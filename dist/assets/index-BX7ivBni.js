const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/javascript-NhlEF-0a.js","assets/typescript-CnyvA8fK.js"])))=>i.map(i=>d[i]);
var DMe=Object.defineProperty;var bne=n=>{throw TypeError(n)};var NMe=(n,e,t)=>e in n?DMe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var is=(n,e,t)=>NMe(n,typeof e!="symbol"?e+"":e,t),E7=(n,e,t)=>e.has(n)||bne("Cannot "+t);var Ve=(n,e,t)=>(E7(n,e,"read from private field"),t?t.call(n):e.get(n)),Ln=(n,e,t)=>e.has(n)?bne("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),Li=(n,e,t,i)=>(E7(n,e,"write to private field"),i?i.call(n,t):e.set(n,t),t),Zo=(n,e,t)=>(E7(n,e,"access private method"),t);var nR=(n,e,t,i)=>({set _(s){Li(n,e,s,t)},get _(){return Ve(n,e,i)}});function TMe(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in n)){const r=Object.getOwnPropertyDescriptor(i,s);r&&Object.defineProperty(n,s,r.get?r:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();var KC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function GG(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var ffe={exports:{}},W5={},gfe={exports:{}},Fi={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fN=Symbol.for("react.element"),RMe=Symbol.for("react.portal"),AMe=Symbol.for("react.fragment"),MMe=Symbol.for("react.strict_mode"),PMe=Symbol.for("react.profiler"),OMe=Symbol.for("react.provider"),FMe=Symbol.for("react.context"),BMe=Symbol.for("react.forward_ref"),WMe=Symbol.for("react.suspense"),HMe=Symbol.for("react.memo"),VMe=Symbol.for("react.lazy"),wne=Symbol.iterator;function zMe(n){return n===null||typeof n!="object"?null:(n=wne&&n[wne]||n["@@iterator"],typeof n=="function"?n:null)}var pfe={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},mfe=Object.assign,_fe={};function px(n,e,t){this.props=n,this.context=e,this.refs=_fe,this.updater=t||pfe}px.prototype.isReactComponent={};px.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};px.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function vfe(){}vfe.prototype=px.prototype;function YG(n,e,t){this.props=n,this.context=e,this.refs=_fe,this.updater=t||pfe}var ZG=YG.prototype=new vfe;ZG.constructor=YG;mfe(ZG,px.prototype);ZG.isPureReactComponent=!0;var Cne=Array.isArray,bfe=Object.prototype.hasOwnProperty,XG={current:null},wfe={key:!0,ref:!0,__self:!0,__source:!0};function Cfe(n,e,t){var i,s={},r=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(r=""+e.key),e)bfe.call(e,i)&&!wfe.hasOwnProperty(i)&&(s[i]=e[i]);var a=arguments.length-2;if(a===1)s.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(n&&n.defaultProps)for(i in a=n.defaultProps,a)s[i]===void 0&&(s[i]=a[i]);return{$$typeof:fN,type:n,key:r,ref:o,props:s,_owner:XG.current}}function UMe(n,e){return{$$typeof:fN,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function QG(n){return typeof n=="object"&&n!==null&&n.$$typeof===fN}function $Me(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var yne=/\/+/g;function I7(n,e){return typeof n=="object"&&n!==null&&n.key!=null?$Me(""+n.key):e.toString(36)}function $A(n,e,t,i,s){var r=typeof n;(r==="undefined"||r==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(r){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case fN:case RMe:o=!0}}if(o)return o=n,s=s(o),n=i===""?"."+I7(o,0):i,Cne(s)?(t="",n!=null&&(t=n.replace(yne,"$&/")+"/"),$A(s,e,t,"",function(c){return c})):s!=null&&(QG(s)&&(s=UMe(s,t+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(yne,"$&/")+"/")+n)),e.push(s)),1;if(o=0,i=i===""?".":i+":",Cne(n))for(var a=0;a<n.length;a++){r=n[a];var l=i+I7(r,a);o+=$A(r,e,t,l,s)}else if(l=zMe(n),typeof l=="function")for(n=l.call(n),a=0;!(r=n.next()).done;)r=r.value,l=i+I7(r,a++),o+=$A(r,e,t,l,s);else if(r==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function sR(n,e,t){if(n==null)return n;var i=[],s=0;return $A(n,i,"","",function(r){return e.call(t,r,s++)}),i}function jMe(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var sl={current:null},jA={transition:null},KMe={ReactCurrentDispatcher:sl,ReactCurrentBatchConfig:jA,ReactCurrentOwner:XG};function yfe(){throw Error("act(...) is not supported in production builds of React.")}Fi.Children={map:sR,forEach:function(n,e,t){sR(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return sR(n,function(){e++}),e},toArray:function(n){return sR(n,function(e){return e})||[]},only:function(n){if(!QG(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Fi.Component=px;Fi.Fragment=AMe;Fi.Profiler=PMe;Fi.PureComponent=YG;Fi.StrictMode=MMe;Fi.Suspense=WMe;Fi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=KMe;Fi.act=yfe;Fi.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=mfe({},n.props),s=n.key,r=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(r=e.ref,o=XG.current),e.key!==void 0&&(s=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)bfe.call(e,l)&&!wfe.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:fN,type:n.type,key:s,ref:r,props:i,_owner:o}};Fi.createContext=function(n){return n={$$typeof:FMe,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:OMe,_context:n},n.Consumer=n};Fi.createElement=Cfe;Fi.createFactory=function(n){var e=Cfe.bind(null,n);return e.type=n,e};Fi.createRef=function(){return{current:null}};Fi.forwardRef=function(n){return{$$typeof:BMe,render:n}};Fi.isValidElement=QG;Fi.lazy=function(n){return{$$typeof:VMe,_payload:{_status:-1,_result:n},_init:jMe}};Fi.memo=function(n,e){return{$$typeof:HMe,type:n,compare:e===void 0?null:e}};Fi.startTransition=function(n){var e=jA.transition;jA.transition={};try{n()}finally{jA.transition=e}};Fi.unstable_act=yfe;Fi.useCallback=function(n,e){return sl.current.useCallback(n,e)};Fi.useContext=function(n){return sl.current.useContext(n)};Fi.useDebugValue=function(){};Fi.useDeferredValue=function(n){return sl.current.useDeferredValue(n)};Fi.useEffect=function(n,e){return sl.current.useEffect(n,e)};Fi.useId=function(){return sl.current.useId()};Fi.useImperativeHandle=function(n,e,t){return sl.current.useImperativeHandle(n,e,t)};Fi.useInsertionEffect=function(n,e){return sl.current.useInsertionEffect(n,e)};Fi.useLayoutEffect=function(n,e){return sl.current.useLayoutEffect(n,e)};Fi.useMemo=function(n,e){return sl.current.useMemo(n,e)};Fi.useReducer=function(n,e,t){return sl.current.useReducer(n,e,t)};Fi.useRef=function(n){return sl.current.useRef(n)};Fi.useState=function(n){return sl.current.useState(n)};Fi.useSyncExternalStore=function(n,e,t){return sl.current.useSyncExternalStore(n,e,t)};Fi.useTransition=function(){return sl.current.useTransition()};Fi.version="18.3.1";gfe.exports=Fi;var A=gfe.exports;const rt=GG(A),Sfe=TMe({__proto__:null,default:rt},[A]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qMe=A,GMe=Symbol.for("react.element"),YMe=Symbol.for("react.fragment"),ZMe=Object.prototype.hasOwnProperty,XMe=qMe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,QMe={key:!0,ref:!0,__self:!0,__source:!0};function xfe(n,e,t){var i,s={},r=null,o=null;t!==void 0&&(r=""+t),e.key!==void 0&&(r=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)ZMe.call(e,i)&&!QMe.hasOwnProperty(i)&&(s[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:GMe,type:n,key:r,ref:o,props:s,_owner:XMe.current}}W5.Fragment=YMe;W5.jsx=xfe;W5.jsxs=xfe;ffe.exports=W5;var k=ffe.exports,Lfe={exports:{}},Bc={},kfe={exports:{}},Efe={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(te,ce){var Ie=te.length;te.push(ce);e:for(;0<Ie;){var Ce=Ie-1>>>1,it=te[Ce];if(0<s(it,ce))te[Ce]=ce,te[Ie]=it,Ie=Ce;else break e}}function t(te){return te.length===0?null:te[0]}function i(te){if(te.length===0)return null;var ce=te[0],Ie=te.pop();if(Ie!==ce){te[0]=Ie;e:for(var Ce=0,it=te.length,He=it>>>1;Ce<He;){var dt=2*(Ce+1)-1,P=te[dt],$=dt+1,Z=te[$];if(0>s(P,Ie))$<it&&0>s(Z,P)?(te[Ce]=Z,te[$]=Ie,Ce=$):(te[Ce]=P,te[dt]=Ie,Ce=dt);else if($<it&&0>s(Z,Ie))te[Ce]=Z,te[$]=Ie,Ce=$;else break e}}return ce}function s(te,ce){var Ie=te.sortIndex-ce.sortIndex;return Ie!==0?Ie:te.id-ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;n.unstable_now=function(){return r.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,u=null,h=3,f=!1,g=!1,p=!1,_=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(te){for(var ce=t(c);ce!==null;){if(ce.callback===null)i(c);else if(ce.startTime<=te)i(c),ce.sortIndex=ce.expirationTime,e(l,ce);else break;ce=t(c)}}function S(te){if(p=!1,y(te),!g)if(t(l)!==null)g=!0,oe(x);else{var ce=t(c);ce!==null&&ve(S,ce.startTime-te)}}function x(te,ce){g=!1,p&&(p=!1,w(N),N=-1),f=!0;var Ie=h;try{for(y(ce),u=t(l);u!==null&&(!(u.expirationTime>ce)||te&&!z());){var Ce=u.callback;if(typeof Ce=="function"){u.callback=null,h=u.priorityLevel;var it=Ce(u.expirationTime<=ce);ce=n.unstable_now(),typeof it=="function"?u.callback=it:u===t(l)&&i(l),y(ce)}else i(l);u=t(l)}if(u!==null)var He=!0;else{var dt=t(c);dt!==null&&ve(S,dt.startTime-ce),He=!1}return He}finally{u=null,h=Ie,f=!1}}var E=!1,D=null,N=-1,I=5,H=-1;function z(){return!(n.unstable_now()-H<I)}function G(){if(D!==null){var te=n.unstable_now();H=te;var ce=!0;try{ce=D(!0,te)}finally{ce?J():(E=!1,D=null)}}else E=!1}var J;if(typeof b=="function")J=function(){b(G)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,ne=j.port2;j.port1.onmessage=G,J=function(){ne.postMessage(null)}}else J=function(){_(G,0)};function oe(te){D=te,E||(E=!0,J())}function ve(te,ce){N=_(function(){te(n.unstable_now())},ce)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(te){te.callback=null},n.unstable_continueExecution=function(){g||f||(g=!0,oe(x))},n.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<te?Math.floor(1e3/te):5},n.unstable_getCurrentPriorityLevel=function(){return h},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(te){switch(h){case 1:case 2:case 3:var ce=3;break;default:ce=h}var Ie=h;h=ce;try{return te()}finally{h=Ie}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(te,ce){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var Ie=h;h=te;try{return ce()}finally{h=Ie}},n.unstable_scheduleCallback=function(te,ce,Ie){var Ce=n.unstable_now();switch(typeof Ie=="object"&&Ie!==null?(Ie=Ie.delay,Ie=typeof Ie=="number"&&0<Ie?Ce+Ie:Ce):Ie=Ce,te){case 1:var it=-1;break;case 2:it=250;break;case 5:it=1073741823;break;case 4:it=1e4;break;default:it=5e3}return it=Ie+it,te={id:d++,callback:ce,priorityLevel:te,startTime:Ie,expirationTime:it,sortIndex:-1},Ie>Ce?(te.sortIndex=Ie,e(c,te),t(l)===null&&te===t(c)&&(p?(w(N),N=-1):p=!0,ve(S,Ie-Ce))):(te.sortIndex=it,e(l,te),g||f||(g=!0,oe(x))),te},n.unstable_shouldYield=z,n.unstable_wrapCallback=function(te){var ce=h;return function(){var Ie=h;h=ce;try{return te.apply(this,arguments)}finally{h=Ie}}}})(Efe);kfe.exports=Efe;var JMe=kfe.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ePe=A,Nc=JMe;function Je(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ife=new Set,ZE={};function P0(n,e){fS(n,e),fS(n+"Capture",e)}function fS(n,e){for(ZE[n]=e,n=0;n<e.length;n++)Ife.add(e[n])}var Bg=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$6=Object.prototype.hasOwnProperty,tPe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Sne={},xne={};function iPe(n){return $6.call(xne,n)?!0:$6.call(Sne,n)?!1:tPe.test(n)?xne[n]=!0:(Sne[n]=!0,!1)}function nPe(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function sPe(n,e,t,i){if(e===null||typeof e>"u"||nPe(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function rl(n,e,t,i,s,r,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=r,this.removeEmptyString=o}var Mo={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Mo[n]=new rl(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Mo[e]=new rl(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Mo[n]=new rl(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Mo[n]=new rl(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Mo[n]=new rl(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Mo[n]=new rl(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Mo[n]=new rl(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Mo[n]=new rl(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Mo[n]=new rl(n,5,!1,n.toLowerCase(),null,!1,!1)});var JG=/[\-:]([a-z])/g;function eY(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(JG,eY);Mo[e]=new rl(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(JG,eY);Mo[e]=new rl(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(JG,eY);Mo[e]=new rl(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Mo[n]=new rl(n,1,!1,n.toLowerCase(),null,!1,!1)});Mo.xlinkHref=new rl("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Mo[n]=new rl(n,1,!1,n.toLowerCase(),null,!0,!0)});function tY(n,e,t,i){var s=Mo.hasOwnProperty(e)?Mo[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(sPe(e,t,s,i)&&(t=null),i||s===null?iPe(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):s.mustUseProperty?n[s.propertyName]=t===null?s.type===3?!1:"":t:(e=s.attributeName,i=s.attributeNamespace,t===null?n.removeAttribute(e):(s=s.type,t=s===3||s===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var lp=ePe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,rR=Symbol.for("react.element"),s1=Symbol.for("react.portal"),r1=Symbol.for("react.fragment"),iY=Symbol.for("react.strict_mode"),j6=Symbol.for("react.profiler"),Dfe=Symbol.for("react.provider"),Nfe=Symbol.for("react.context"),nY=Symbol.for("react.forward_ref"),K6=Symbol.for("react.suspense"),q6=Symbol.for("react.suspense_list"),sY=Symbol.for("react.memo"),Up=Symbol.for("react.lazy"),Tfe=Symbol.for("react.offscreen"),Lne=Symbol.iterator;function mL(n){return n===null||typeof n!="object"?null:(n=Lne&&n[Lne]||n["@@iterator"],typeof n=="function"?n:null)}var Rs=Object.assign,D7;function ik(n){if(D7===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);D7=e&&e[1]||""}return`
`+D7+n}var N7=!1;function T7(n,e){if(!n||N7)return"";N7=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){i=c}n.call(e.prototype)}else{try{throw Error()}catch(c){i=c}n()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),r=i.stack.split(`
`),o=s.length-1,a=r.length-1;1<=o&&0<=a&&s[o]!==r[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==r[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==r[a]){var l=`
`+s[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{N7=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?ik(n):""}function rPe(n){switch(n.tag){case 5:return ik(n.type);case 16:return ik("Lazy");case 13:return ik("Suspense");case 19:return ik("SuspenseList");case 0:case 2:case 15:return n=T7(n.type,!1),n;case 11:return n=T7(n.type.render,!1),n;case 1:return n=T7(n.type,!0),n;default:return""}}function G6(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case r1:return"Fragment";case s1:return"Portal";case j6:return"Profiler";case iY:return"StrictMode";case K6:return"Suspense";case q6:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case Nfe:return(n.displayName||"Context")+".Consumer";case Dfe:return(n._context.displayName||"Context")+".Provider";case nY:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case sY:return e=n.displayName||null,e!==null?e:G6(n.type)||"Memo";case Up:e=n._payload,n=n._init;try{return G6(n(e))}catch{}}return null}function oPe(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return G6(e);case 8:return e===iY?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function v_(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Rfe(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function aPe(n){var e=Rfe(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var s=t.get,r=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){i=""+o,r.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function oR(n){n._valueTracker||(n._valueTracker=aPe(n))}function Afe(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=Rfe(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function sM(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Y6(n,e){var t=e.checked;return Rs({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function kne(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=v_(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Mfe(n,e){e=e.checked,e!=null&&tY(n,"checked",e,!1)}function Z6(n,e){Mfe(n,e);var t=v_(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?X6(n,e.type,t):e.hasOwnProperty("defaultValue")&&X6(n,e.type,v_(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function Ene(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function X6(n,e,t){(e!=="number"||sM(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var nk=Array.isArray;function ay(n,e,t,i){if(n=n.options,e){e={};for(var s=0;s<t.length;s++)e["$"+t[s]]=!0;for(t=0;t<n.length;t++)s=e.hasOwnProperty("$"+n[t].value),n[t].selected!==s&&(n[t].selected=s),s&&i&&(n[t].defaultSelected=!0)}else{for(t=""+v_(t),e=null,s=0;s<n.length;s++){if(n[s].value===t){n[s].selected=!0,i&&(n[s].defaultSelected=!0);return}e!==null||n[s].disabled||(e=n[s])}e!==null&&(e.selected=!0)}}function Q6(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Je(91));return Rs({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Ine(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Je(92));if(nk(t)){if(1<t.length)throw Error(Je(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:v_(t)}}function Pfe(n,e){var t=v_(e.value),i=v_(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function Dne(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function Ofe(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function J6(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?Ofe(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var aR,Ffe=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,s){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,s)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(aR=aR||document.createElement("div"),aR.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=aR.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function XE(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Rk={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lPe=["Webkit","ms","Moz","O"];Object.keys(Rk).forEach(function(n){lPe.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Rk[e]=Rk[n]})});function Bfe(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Rk.hasOwnProperty(n)&&Rk[n]?(""+e).trim():e+"px"}function Wfe(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,s=Bfe(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,s):n[t]=s}}var cPe=Rs({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function eH(n,e){if(e){if(cPe[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Je(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Je(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Je(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Je(62))}}function tH(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var iH=null;function rY(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var nH=null,ly=null,cy=null;function Nne(n){if(n=mN(n)){if(typeof nH!="function")throw Error(Je(280));var e=n.stateNode;e&&(e=$5(e),nH(n.stateNode,n.type,e))}}function Hfe(n){ly?cy?cy.push(n):cy=[n]:ly=n}function Vfe(){if(ly){var n=ly,e=cy;if(cy=ly=null,Nne(n),e)for(n=0;n<e.length;n++)Nne(e[n])}}function zfe(n,e){return n(e)}function Ufe(){}var R7=!1;function $fe(n,e,t){if(R7)return n(e,t);R7=!0;try{return zfe(n,e,t)}finally{R7=!1,(ly!==null||cy!==null)&&(Ufe(),Vfe())}}function QE(n,e){var t=n.stateNode;if(t===null)return null;var i=$5(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(Je(231,e,typeof t));return t}var sH=!1;if(Bg)try{var _L={};Object.defineProperty(_L,"passive",{get:function(){sH=!0}}),window.addEventListener("test",_L,_L),window.removeEventListener("test",_L,_L)}catch{sH=!1}function dPe(n,e,t,i,s,r,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(d){this.onError(d)}}var Ak=!1,rM=null,oM=!1,rH=null,uPe={onError:function(n){Ak=!0,rM=n}};function hPe(n,e,t,i,s,r,o,a,l){Ak=!1,rM=null,dPe.apply(uPe,arguments)}function fPe(n,e,t,i,s,r,o,a,l){if(hPe.apply(this,arguments),Ak){if(Ak){var c=rM;Ak=!1,rM=null}else throw Error(Je(198));oM||(oM=!0,rH=c)}}function O0(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function jfe(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function Tne(n){if(O0(n)!==n)throw Error(Je(188))}function gPe(n){var e=n.alternate;if(!e){if(e=O0(n),e===null)throw Error(Je(188));return e!==n?null:n}for(var t=n,i=e;;){var s=t.return;if(s===null)break;var r=s.alternate;if(r===null){if(i=s.return,i!==null){t=i;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===t)return Tne(s),n;if(r===i)return Tne(s),e;r=r.sibling}throw Error(Je(188))}if(t.return!==i.return)t=s,i=r;else{for(var o=!1,a=s.child;a;){if(a===t){o=!0,t=s,i=r;break}if(a===i){o=!0,i=s,t=r;break}a=a.sibling}if(!o){for(a=r.child;a;){if(a===t){o=!0,t=r,i=s;break}if(a===i){o=!0,i=r,t=s;break}a=a.sibling}if(!o)throw Error(Je(189))}}if(t.alternate!==i)throw Error(Je(190))}if(t.tag!==3)throw Error(Je(188));return t.stateNode.current===t?n:e}function Kfe(n){return n=gPe(n),n!==null?qfe(n):null}function qfe(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=qfe(n);if(e!==null)return e;n=n.sibling}return null}var Gfe=Nc.unstable_scheduleCallback,Rne=Nc.unstable_cancelCallback,pPe=Nc.unstable_shouldYield,mPe=Nc.unstable_requestPaint,Js=Nc.unstable_now,_Pe=Nc.unstable_getCurrentPriorityLevel,oY=Nc.unstable_ImmediatePriority,Yfe=Nc.unstable_UserBlockingPriority,aM=Nc.unstable_NormalPriority,vPe=Nc.unstable_LowPriority,Zfe=Nc.unstable_IdlePriority,H5=null,$h=null;function bPe(n){if($h&&typeof $h.onCommitFiberRoot=="function")try{$h.onCommitFiberRoot(H5,n,void 0,(n.current.flags&128)===128)}catch{}}var Su=Math.clz32?Math.clz32:yPe,wPe=Math.log,CPe=Math.LN2;function yPe(n){return n>>>=0,n===0?32:31-(wPe(n)/CPe|0)|0}var lR=64,cR=4194304;function sk(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function lM(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,s=n.suspendedLanes,r=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~s;a!==0?i=sk(a):(r&=o,r!==0&&(i=sk(r)))}else o=t&~s,o!==0?i=sk(o):r!==0&&(i=sk(r));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,r=e&-e,s>=r||s===16&&(r&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-Su(e),s=1<<t,i|=n[t],e&=~s;return i}function SPe(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xPe(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,s=n.expirationTimes,r=n.pendingLanes;0<r;){var o=31-Su(r),a=1<<o,l=s[o];l===-1?(!(a&t)||a&i)&&(s[o]=SPe(a,e)):l<=e&&(n.expiredLanes|=a),r&=~a}}function oH(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Xfe(){var n=lR;return lR<<=1,!(lR&4194240)&&(lR=64),n}function A7(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function gN(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Su(e),n[e]=t}function LPe(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var s=31-Su(t),r=1<<s;e[s]=0,i[s]=-1,n[s]=-1,t&=~r}}function aY(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-Su(t),s=1<<i;s&e|n[i]&e&&(n[i]|=e),t&=~s}}var Bn=0;function Qfe(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var Jfe,lY,ege,tge,ige,aH=!1,dR=[],Mm=null,Pm=null,Om=null,JE=new Map,eI=new Map,Jp=[],kPe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ane(n,e){switch(n){case"focusin":case"focusout":Mm=null;break;case"dragenter":case"dragleave":Pm=null;break;case"mouseover":case"mouseout":Om=null;break;case"pointerover":case"pointerout":JE.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":eI.delete(e.pointerId)}}function vL(n,e,t,i,s,r){return n===null||n.nativeEvent!==r?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:r,targetContainers:[s]},e!==null&&(e=mN(e),e!==null&&lY(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),n)}function EPe(n,e,t,i,s){switch(e){case"focusin":return Mm=vL(Mm,n,e,t,i,s),!0;case"dragenter":return Pm=vL(Pm,n,e,t,i,s),!0;case"mouseover":return Om=vL(Om,n,e,t,i,s),!0;case"pointerover":var r=s.pointerId;return JE.set(r,vL(JE.get(r)||null,n,e,t,i,s)),!0;case"gotpointercapture":return r=s.pointerId,eI.set(r,vL(eI.get(r)||null,n,e,t,i,s)),!0}return!1}function nge(n){var e=bb(n.target);if(e!==null){var t=O0(e);if(t!==null){if(e=t.tag,e===13){if(e=jfe(t),e!==null){n.blockedOn=e,ige(n.priority,function(){ege(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function KA(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=lH(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);iH=i,t.target.dispatchEvent(i),iH=null}else return e=mN(t),e!==null&&lY(e),n.blockedOn=t,!1;e.shift()}return!0}function Mne(n,e,t){KA(n)&&t.delete(e)}function IPe(){aH=!1,Mm!==null&&KA(Mm)&&(Mm=null),Pm!==null&&KA(Pm)&&(Pm=null),Om!==null&&KA(Om)&&(Om=null),JE.forEach(Mne),eI.forEach(Mne)}function bL(n,e){n.blockedOn===e&&(n.blockedOn=null,aH||(aH=!0,Nc.unstable_scheduleCallback(Nc.unstable_NormalPriority,IPe)))}function tI(n){function e(s){return bL(s,n)}if(0<dR.length){bL(dR[0],n);for(var t=1;t<dR.length;t++){var i=dR[t];i.blockedOn===n&&(i.blockedOn=null)}}for(Mm!==null&&bL(Mm,n),Pm!==null&&bL(Pm,n),Om!==null&&bL(Om,n),JE.forEach(e),eI.forEach(e),t=0;t<Jp.length;t++)i=Jp[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<Jp.length&&(t=Jp[0],t.blockedOn===null);)nge(t),t.blockedOn===null&&Jp.shift()}var dy=lp.ReactCurrentBatchConfig,cM=!0;function DPe(n,e,t,i){var s=Bn,r=dy.transition;dy.transition=null;try{Bn=1,cY(n,e,t,i)}finally{Bn=s,dy.transition=r}}function NPe(n,e,t,i){var s=Bn,r=dy.transition;dy.transition=null;try{Bn=4,cY(n,e,t,i)}finally{Bn=s,dy.transition=r}}function cY(n,e,t,i){if(cM){var s=lH(n,e,t,i);if(s===null)U7(n,e,i,dM,t),Ane(n,i);else if(EPe(s,n,e,t,i))i.stopPropagation();else if(Ane(n,i),e&4&&-1<kPe.indexOf(n)){for(;s!==null;){var r=mN(s);if(r!==null&&Jfe(r),r=lH(n,e,t,i),r===null&&U7(n,e,i,dM,t),r===s)break;s=r}s!==null&&i.stopPropagation()}else U7(n,e,i,null,t)}}var dM=null;function lH(n,e,t,i){if(dM=null,n=rY(i),n=bb(n),n!==null)if(e=O0(n),e===null)n=null;else if(t=e.tag,t===13){if(n=jfe(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return dM=n,null}function sge(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_Pe()){case oY:return 1;case Yfe:return 4;case aM:case vPe:return 16;case Zfe:return 536870912;default:return 16}default:return 16}}var _m=null,dY=null,qA=null;function rge(){if(qA)return qA;var n,e=dY,t=e.length,i,s="value"in _m?_m.value:_m.textContent,r=s.length;for(n=0;n<t&&e[n]===s[n];n++);var o=t-n;for(i=1;i<=o&&e[t-i]===s[r-i];i++);return qA=s.slice(n,1<i?1-i:void 0)}function GA(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function uR(){return!0}function Pne(){return!1}function Wc(n){function e(t,i,s,r,o){this._reactName=t,this._targetInst=s,this.type=i,this.nativeEvent=r,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(r):r[a]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?uR:Pne,this.isPropagationStopped=Pne,this}return Rs(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=uR)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=uR)},persist:function(){},isPersistent:uR}),e}var mx={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},uY=Wc(mx),pN=Rs({},mx,{view:0,detail:0}),TPe=Wc(pN),M7,P7,wL,V5=Rs({},pN,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hY,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==wL&&(wL&&n.type==="mousemove"?(M7=n.screenX-wL.screenX,P7=n.screenY-wL.screenY):P7=M7=0,wL=n),M7)},movementY:function(n){return"movementY"in n?n.movementY:P7}}),One=Wc(V5),RPe=Rs({},V5,{dataTransfer:0}),APe=Wc(RPe),MPe=Rs({},pN,{relatedTarget:0}),O7=Wc(MPe),PPe=Rs({},mx,{animationName:0,elapsedTime:0,pseudoElement:0}),OPe=Wc(PPe),FPe=Rs({},mx,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),BPe=Wc(FPe),WPe=Rs({},mx,{data:0}),Fne=Wc(WPe),HPe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},VPe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zPe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function UPe(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=zPe[n])?!!e[n]:!1}function hY(){return UPe}var $Pe=Rs({},pN,{key:function(n){if(n.key){var e=HPe[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=GA(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?VPe[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hY,charCode:function(n){return n.type==="keypress"?GA(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?GA(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),jPe=Wc($Pe),KPe=Rs({},V5,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bne=Wc(KPe),qPe=Rs({},pN,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hY}),GPe=Wc(qPe),YPe=Rs({},mx,{propertyName:0,elapsedTime:0,pseudoElement:0}),ZPe=Wc(YPe),XPe=Rs({},V5,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),QPe=Wc(XPe),JPe=[9,13,27,32],fY=Bg&&"CompositionEvent"in window,Mk=null;Bg&&"documentMode"in document&&(Mk=document.documentMode);var eOe=Bg&&"TextEvent"in window&&!Mk,oge=Bg&&(!fY||Mk&&8<Mk&&11>=Mk),Wne=" ",Hne=!1;function age(n,e){switch(n){case"keyup":return JPe.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lge(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var o1=!1;function tOe(n,e){switch(n){case"compositionend":return lge(e);case"keypress":return e.which!==32?null:(Hne=!0,Wne);case"textInput":return n=e.data,n===Wne&&Hne?null:n;default:return null}}function iOe(n,e){if(o1)return n==="compositionend"||!fY&&age(n,e)?(n=rge(),qA=dY=_m=null,o1=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return oge&&e.locale!=="ko"?null:e.data;default:return null}}var nOe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vne(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!nOe[n.type]:e==="textarea"}function cge(n,e,t,i){Hfe(i),e=uM(e,"onChange"),0<e.length&&(t=new uY("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var Pk=null,iI=null;function sOe(n){wge(n,0)}function z5(n){var e=c1(n);if(Afe(e))return n}function rOe(n,e){if(n==="change")return e}var dge=!1;if(Bg){var F7;if(Bg){var B7="oninput"in document;if(!B7){var zne=document.createElement("div");zne.setAttribute("oninput","return;"),B7=typeof zne.oninput=="function"}F7=B7}else F7=!1;dge=F7&&(!document.documentMode||9<document.documentMode)}function Une(){Pk&&(Pk.detachEvent("onpropertychange",uge),iI=Pk=null)}function uge(n){if(n.propertyName==="value"&&z5(iI)){var e=[];cge(e,iI,n,rY(n)),$fe(sOe,e)}}function oOe(n,e,t){n==="focusin"?(Une(),Pk=e,iI=t,Pk.attachEvent("onpropertychange",uge)):n==="focusout"&&Une()}function aOe(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return z5(iI)}function lOe(n,e){if(n==="click")return z5(e)}function cOe(n,e){if(n==="input"||n==="change")return z5(e)}function dOe(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Pu=typeof Object.is=="function"?Object.is:dOe;function nI(n,e){if(Pu(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var s=t[i];if(!$6.call(e,s)||!Pu(n[s],e[s]))return!1}return!0}function $ne(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function jne(n,e){var t=$ne(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=$ne(t)}}function hge(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?hge(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function fge(){for(var n=window,e=sM();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=sM(n.document)}return e}function gY(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function uOe(n){var e=fge(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&hge(t.ownerDocument.documentElement,t)){if(i!==null&&gY(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var s=t.textContent.length,r=Math.min(i.start,s);i=i.end===void 0?r:Math.min(i.end,s),!n.extend&&r>i&&(s=i,i=r,r=s),s=jne(t,r);var o=jne(t,i);s&&o&&(n.rangeCount!==1||n.anchorNode!==s.node||n.anchorOffset!==s.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),n.removeAllRanges(),r>i?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var hOe=Bg&&"documentMode"in document&&11>=document.documentMode,a1=null,cH=null,Ok=null,dH=!1;function Kne(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;dH||a1==null||a1!==sM(i)||(i=a1,"selectionStart"in i&&gY(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Ok&&nI(Ok,i)||(Ok=i,i=uM(cH,"onSelect"),0<i.length&&(e=new uY("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=a1)))}function hR(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var l1={animationend:hR("Animation","AnimationEnd"),animationiteration:hR("Animation","AnimationIteration"),animationstart:hR("Animation","AnimationStart"),transitionend:hR("Transition","TransitionEnd")},W7={},gge={};Bg&&(gge=document.createElement("div").style,"AnimationEvent"in window||(delete l1.animationend.animation,delete l1.animationiteration.animation,delete l1.animationstart.animation),"TransitionEvent"in window||delete l1.transitionend.transition);function U5(n){if(W7[n])return W7[n];if(!l1[n])return n;var e=l1[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in gge)return W7[n]=e[t];return n}var pge=U5("animationend"),mge=U5("animationiteration"),_ge=U5("animationstart"),vge=U5("transitionend"),bge=new Map,qne="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function G_(n,e){bge.set(n,e),P0(e,[n])}for(var H7=0;H7<qne.length;H7++){var V7=qne[H7],fOe=V7.toLowerCase(),gOe=V7[0].toUpperCase()+V7.slice(1);G_(fOe,"on"+gOe)}G_(pge,"onAnimationEnd");G_(mge,"onAnimationIteration");G_(_ge,"onAnimationStart");G_("dblclick","onDoubleClick");G_("focusin","onFocus");G_("focusout","onBlur");G_(vge,"onTransitionEnd");fS("onMouseEnter",["mouseout","mouseover"]);fS("onMouseLeave",["mouseout","mouseover"]);fS("onPointerEnter",["pointerout","pointerover"]);fS("onPointerLeave",["pointerout","pointerover"]);P0("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));P0("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));P0("onBeforeInput",["compositionend","keypress","textInput","paste"]);P0("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));P0("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));P0("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rk="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pOe=new Set("cancel close invalid load scroll toggle".split(" ").concat(rk));function Gne(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,fPe(i,e,void 0,n),n.currentTarget=null}function wge(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],s=i.event;i=i.listeners;e:{var r=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==r&&s.isPropagationStopped())break e;Gne(s,a,c),r=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==r&&s.isPropagationStopped())break e;Gne(s,a,c),r=l}}}if(oM)throw n=rH,oM=!1,rH=null,n}function ds(n,e){var t=e[pH];t===void 0&&(t=e[pH]=new Set);var i=n+"__bubble";t.has(i)||(Cge(e,n,2,!1),t.add(i))}function z7(n,e,t){var i=0;e&&(i|=4),Cge(t,n,i,e)}var fR="_reactListening"+Math.random().toString(36).slice(2);function sI(n){if(!n[fR]){n[fR]=!0,Ife.forEach(function(t){t!=="selectionchange"&&(pOe.has(t)||z7(t,!1,n),z7(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[fR]||(e[fR]=!0,z7("selectionchange",!1,e))}}function Cge(n,e,t,i){switch(sge(e)){case 1:var s=DPe;break;case 4:s=NPe;break;default:s=cY}t=s.bind(null,e,t,n),s=void 0,!sH||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?n.addEventListener(e,t,{capture:!0,passive:s}):n.addEventListener(e,t,!0):s!==void 0?n.addEventListener(e,t,{passive:s}):n.addEventListener(e,t,!1)}function U7(n,e,t,i,s){var r=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=bb(a),o===null)return;if(l=o.tag,l===5||l===6){i=r=o;continue e}a=a.parentNode}}i=i.return}$fe(function(){var c=r,d=rY(t),u=[];e:{var h=bge.get(n);if(h!==void 0){var f=uY,g=n;switch(n){case"keypress":if(GA(t)===0)break e;case"keydown":case"keyup":f=jPe;break;case"focusin":g="focus",f=O7;break;case"focusout":g="blur",f=O7;break;case"beforeblur":case"afterblur":f=O7;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=One;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=APe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=GPe;break;case pge:case mge:case _ge:f=OPe;break;case vge:f=ZPe;break;case"scroll":f=TPe;break;case"wheel":f=QPe;break;case"copy":case"cut":case"paste":f=BPe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=Bne}var p=(e&4)!==0,_=!p&&n==="scroll",w=p?h!==null?h+"Capture":null:h;p=[];for(var b=c,y;b!==null;){y=b;var S=y.stateNode;if(y.tag===5&&S!==null&&(y=S,w!==null&&(S=QE(b,w),S!=null&&p.push(rI(b,S,y)))),_)break;b=b.return}0<p.length&&(h=new f(h,g,null,t,d),u.push({event:h,listeners:p}))}}if(!(e&7)){e:{if(h=n==="mouseover"||n==="pointerover",f=n==="mouseout"||n==="pointerout",h&&t!==iH&&(g=t.relatedTarget||t.fromElement)&&(bb(g)||g[Wg]))break e;if((f||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,f?(g=t.relatedTarget||t.toElement,f=c,g=g?bb(g):null,g!==null&&(_=O0(g),g!==_||g.tag!==5&&g.tag!==6)&&(g=null)):(f=null,g=c),f!==g)){if(p=One,S="onMouseLeave",w="onMouseEnter",b="mouse",(n==="pointerout"||n==="pointerover")&&(p=Bne,S="onPointerLeave",w="onPointerEnter",b="pointer"),_=f==null?h:c1(f),y=g==null?h:c1(g),h=new p(S,b+"leave",f,t,d),h.target=_,h.relatedTarget=y,S=null,bb(d)===c&&(p=new p(w,b+"enter",g,t,d),p.target=y,p.relatedTarget=_,S=p),_=S,f&&g)t:{for(p=f,w=g,b=0,y=p;y;y=_C(y))b++;for(y=0,S=w;S;S=_C(S))y++;for(;0<b-y;)p=_C(p),b--;for(;0<y-b;)w=_C(w),y--;for(;b--;){if(p===w||w!==null&&p===w.alternate)break t;p=_C(p),w=_C(w)}p=null}else p=null;f!==null&&Yne(u,h,f,p,!1),g!==null&&_!==null&&Yne(u,_,g,p,!0)}}e:{if(h=c?c1(c):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var x=rOe;else if(Vne(h))if(dge)x=cOe;else{x=aOe;var E=oOe}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(x=lOe);if(x&&(x=x(n,c))){cge(u,x,t,d);break e}E&&E(n,h,c),n==="focusout"&&(E=h._wrapperState)&&E.controlled&&h.type==="number"&&X6(h,"number",h.value)}switch(E=c?c1(c):window,n){case"focusin":(Vne(E)||E.contentEditable==="true")&&(a1=E,cH=c,Ok=null);break;case"focusout":Ok=cH=a1=null;break;case"mousedown":dH=!0;break;case"contextmenu":case"mouseup":case"dragend":dH=!1,Kne(u,t,d);break;case"selectionchange":if(hOe)break;case"keydown":case"keyup":Kne(u,t,d)}var D;if(fY)e:{switch(n){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else o1?age(n,t)&&(N="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(N="onCompositionStart");N&&(oge&&t.locale!=="ko"&&(o1||N!=="onCompositionStart"?N==="onCompositionEnd"&&o1&&(D=rge()):(_m=d,dY="value"in _m?_m.value:_m.textContent,o1=!0)),E=uM(c,N),0<E.length&&(N=new Fne(N,n,null,t,d),u.push({event:N,listeners:E}),D?N.data=D:(D=lge(t),D!==null&&(N.data=D)))),(D=eOe?tOe(n,t):iOe(n,t))&&(c=uM(c,"onBeforeInput"),0<c.length&&(d=new Fne("onBeforeInput","beforeinput",null,t,d),u.push({event:d,listeners:c}),d.data=D))}wge(u,e)})}function rI(n,e,t){return{instance:n,listener:e,currentTarget:t}}function uM(n,e){for(var t=e+"Capture",i=[];n!==null;){var s=n,r=s.stateNode;s.tag===5&&r!==null&&(s=r,r=QE(n,t),r!=null&&i.unshift(rI(n,r,s)),r=QE(n,e),r!=null&&i.push(rI(n,r,s))),n=n.return}return i}function _C(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Yne(n,e,t,i,s){for(var r=e._reactName,o=[];t!==null&&t!==i;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,s?(l=QE(t,r),l!=null&&o.unshift(rI(t,l,a))):s||(l=QE(t,r),l!=null&&o.push(rI(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var mOe=/\r\n?/g,_Oe=/\u0000|\uFFFD/g;function Zne(n){return(typeof n=="string"?n:""+n).replace(mOe,`
`).replace(_Oe,"")}function gR(n,e,t){if(e=Zne(e),Zne(n)!==e&&t)throw Error(Je(425))}function hM(){}var uH=null,hH=null;function fH(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var gH=typeof setTimeout=="function"?setTimeout:void 0,vOe=typeof clearTimeout=="function"?clearTimeout:void 0,Xne=typeof Promise=="function"?Promise:void 0,bOe=typeof queueMicrotask=="function"?queueMicrotask:typeof Xne<"u"?function(n){return Xne.resolve(null).then(n).catch(wOe)}:gH;function wOe(n){setTimeout(function(){throw n})}function $7(n,e){var t=e,i=0;do{var s=t.nextSibling;if(n.removeChild(t),s&&s.nodeType===8)if(t=s.data,t==="/$"){if(i===0){n.removeChild(s),tI(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=s}while(t);tI(e)}function Fm(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function Qne(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var _x=Math.random().toString(36).slice(2),Ah="__reactFiber$"+_x,oI="__reactProps$"+_x,Wg="__reactContainer$"+_x,pH="__reactEvents$"+_x,COe="__reactListeners$"+_x,yOe="__reactHandles$"+_x;function bb(n){var e=n[Ah];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Wg]||t[Ah]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=Qne(n);n!==null;){if(t=n[Ah])return t;n=Qne(n)}return e}n=t,t=n.parentNode}return null}function mN(n){return n=n[Ah]||n[Wg],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function c1(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Je(33))}function $5(n){return n[oI]||null}var mH=[],d1=-1;function Y_(n){return{current:n}}function hs(n){0>d1||(n.current=mH[d1],mH[d1]=null,d1--)}function rs(n,e){d1++,mH[d1]=n.current,n.current=e}var b_={},ua=Y_(b_),Bl=Y_(!1),Xw=b_;function gS(n,e){var t=n.type.contextTypes;if(!t)return b_;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},r;for(r in t)s[r]=e[r];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=s),s}function Wl(n){return n=n.childContextTypes,n!=null}function fM(){hs(Bl),hs(ua)}function Jne(n,e,t){if(ua.current!==b_)throw Error(Je(168));rs(ua,e),rs(Bl,t)}function yge(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(Je(108,oPe(n)||"Unknown",s));return Rs({},t,i)}function gM(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||b_,Xw=ua.current,rs(ua,n),rs(Bl,Bl.current),!0}function ese(n,e,t){var i=n.stateNode;if(!i)throw Error(Je(169));t?(n=yge(n,e,Xw),i.__reactInternalMemoizedMergedChildContext=n,hs(Bl),hs(ua),rs(ua,n)):hs(Bl),rs(Bl,t)}var Jf=null,j5=!1,j7=!1;function Sge(n){Jf===null?Jf=[n]:Jf.push(n)}function SOe(n){j5=!0,Sge(n)}function Z_(){if(!j7&&Jf!==null){j7=!0;var n=0,e=Bn;try{var t=Jf;for(Bn=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}Jf=null,j5=!1}catch(s){throw Jf!==null&&(Jf=Jf.slice(n+1)),Gfe(oY,Z_),s}finally{Bn=e,j7=!1}}return null}var u1=[],h1=0,pM=null,mM=0,dd=[],ud=0,Qw=null,hg=1,fg="";function Bv(n,e){u1[h1++]=mM,u1[h1++]=pM,pM=n,mM=e}function xge(n,e,t){dd[ud++]=hg,dd[ud++]=fg,dd[ud++]=Qw,Qw=n;var i=hg;n=fg;var s=32-Su(i)-1;i&=~(1<<s),t+=1;var r=32-Su(e)+s;if(30<r){var o=s-s%5;r=(i&(1<<o)-1).toString(32),i>>=o,s-=o,hg=1<<32-Su(e)+s|t<<s|i,fg=r+n}else hg=1<<r|t<<s|i,fg=n}function pY(n){n.return!==null&&(Bv(n,1),xge(n,1,0))}function mY(n){for(;n===pM;)pM=u1[--h1],u1[h1]=null,mM=u1[--h1],u1[h1]=null;for(;n===Qw;)Qw=dd[--ud],dd[ud]=null,fg=dd[--ud],dd[ud]=null,hg=dd[--ud],dd[ud]=null}var xc=null,Cc=null,_s=!1,hu=null;function Lge(n,e){var t=vd(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function tse(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,xc=n,Cc=Fm(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,xc=n,Cc=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Qw!==null?{id:hg,overflow:fg}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=vd(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,xc=n,Cc=null,!0):!1;default:return!1}}function _H(n){return(n.mode&1)!==0&&(n.flags&128)===0}function vH(n){if(_s){var e=Cc;if(e){var t=e;if(!tse(n,e)){if(_H(n))throw Error(Je(418));e=Fm(t.nextSibling);var i=xc;e&&tse(n,e)?Lge(i,t):(n.flags=n.flags&-4097|2,_s=!1,xc=n)}}else{if(_H(n))throw Error(Je(418));n.flags=n.flags&-4097|2,_s=!1,xc=n}}}function ise(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;xc=n}function pR(n){if(n!==xc)return!1;if(!_s)return ise(n),_s=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!fH(n.type,n.memoizedProps)),e&&(e=Cc)){if(_H(n))throw kge(),Error(Je(418));for(;e;)Lge(n,e),e=Fm(e.nextSibling)}if(ise(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Je(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Cc=Fm(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Cc=null}}else Cc=xc?Fm(n.stateNode.nextSibling):null;return!0}function kge(){for(var n=Cc;n;)n=Fm(n.nextSibling)}function pS(){Cc=xc=null,_s=!1}function _Y(n){hu===null?hu=[n]:hu.push(n)}var xOe=lp.ReactCurrentBatchConfig;function CL(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Je(309));var i=t.stateNode}if(!i)throw Error(Je(147,n));var s=i,r=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===r?e.ref:(e=function(o){var a=s.refs;o===null?delete a[r]:a[r]=o},e._stringRef=r,e)}if(typeof n!="string")throw Error(Je(284));if(!t._owner)throw Error(Je(290,n))}return n}function mR(n,e){throw n=Object.prototype.toString.call(e),Error(Je(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function nse(n){var e=n._init;return e(n._payload)}function Ege(n){function e(w,b){if(n){var y=w.deletions;y===null?(w.deletions=[b],w.flags|=16):y.push(b)}}function t(w,b){if(!n)return null;for(;b!==null;)e(w,b),b=b.sibling;return null}function i(w,b){for(w=new Map;b!==null;)b.key!==null?w.set(b.key,b):w.set(b.index,b),b=b.sibling;return w}function s(w,b){return w=Vm(w,b),w.index=0,w.sibling=null,w}function r(w,b,y){return w.index=y,n?(y=w.alternate,y!==null?(y=y.index,y<b?(w.flags|=2,b):y):(w.flags|=2,b)):(w.flags|=1048576,b)}function o(w){return n&&w.alternate===null&&(w.flags|=2),w}function a(w,b,y,S){return b===null||b.tag!==6?(b=Q7(y,w.mode,S),b.return=w,b):(b=s(b,y),b.return=w,b)}function l(w,b,y,S){var x=y.type;return x===r1?d(w,b,y.props.children,S,y.key):b!==null&&(b.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Up&&nse(x)===b.type)?(S=s(b,y.props),S.ref=CL(w,b,y),S.return=w,S):(S=t2(y.type,y.key,y.props,null,w.mode,S),S.ref=CL(w,b,y),S.return=w,S)}function c(w,b,y,S){return b===null||b.tag!==4||b.stateNode.containerInfo!==y.containerInfo||b.stateNode.implementation!==y.implementation?(b=J7(y,w.mode,S),b.return=w,b):(b=s(b,y.children||[]),b.return=w,b)}function d(w,b,y,S,x){return b===null||b.tag!==7?(b=Pb(y,w.mode,S,x),b.return=w,b):(b=s(b,y),b.return=w,b)}function u(w,b,y){if(typeof b=="string"&&b!==""||typeof b=="number")return b=Q7(""+b,w.mode,y),b.return=w,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case rR:return y=t2(b.type,b.key,b.props,null,w.mode,y),y.ref=CL(w,null,b),y.return=w,y;case s1:return b=J7(b,w.mode,y),b.return=w,b;case Up:var S=b._init;return u(w,S(b._payload),y)}if(nk(b)||mL(b))return b=Pb(b,w.mode,y,null),b.return=w,b;mR(w,b)}return null}function h(w,b,y,S){var x=b!==null?b.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return x!==null?null:a(w,b,""+y,S);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case rR:return y.key===x?l(w,b,y,S):null;case s1:return y.key===x?c(w,b,y,S):null;case Up:return x=y._init,h(w,b,x(y._payload),S)}if(nk(y)||mL(y))return x!==null?null:d(w,b,y,S,null);mR(w,y)}return null}function f(w,b,y,S,x){if(typeof S=="string"&&S!==""||typeof S=="number")return w=w.get(y)||null,a(b,w,""+S,x);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case rR:return w=w.get(S.key===null?y:S.key)||null,l(b,w,S,x);case s1:return w=w.get(S.key===null?y:S.key)||null,c(b,w,S,x);case Up:var E=S._init;return f(w,b,y,E(S._payload),x)}if(nk(S)||mL(S))return w=w.get(y)||null,d(b,w,S,x,null);mR(b,S)}return null}function g(w,b,y,S){for(var x=null,E=null,D=b,N=b=0,I=null;D!==null&&N<y.length;N++){D.index>N?(I=D,D=null):I=D.sibling;var H=h(w,D,y[N],S);if(H===null){D===null&&(D=I);break}n&&D&&H.alternate===null&&e(w,D),b=r(H,b,N),E===null?x=H:E.sibling=H,E=H,D=I}if(N===y.length)return t(w,D),_s&&Bv(w,N),x;if(D===null){for(;N<y.length;N++)D=u(w,y[N],S),D!==null&&(b=r(D,b,N),E===null?x=D:E.sibling=D,E=D);return _s&&Bv(w,N),x}for(D=i(w,D);N<y.length;N++)I=f(D,w,N,y[N],S),I!==null&&(n&&I.alternate!==null&&D.delete(I.key===null?N:I.key),b=r(I,b,N),E===null?x=I:E.sibling=I,E=I);return n&&D.forEach(function(z){return e(w,z)}),_s&&Bv(w,N),x}function p(w,b,y,S){var x=mL(y);if(typeof x!="function")throw Error(Je(150));if(y=x.call(y),y==null)throw Error(Je(151));for(var E=x=null,D=b,N=b=0,I=null,H=y.next();D!==null&&!H.done;N++,H=y.next()){D.index>N?(I=D,D=null):I=D.sibling;var z=h(w,D,H.value,S);if(z===null){D===null&&(D=I);break}n&&D&&z.alternate===null&&e(w,D),b=r(z,b,N),E===null?x=z:E.sibling=z,E=z,D=I}if(H.done)return t(w,D),_s&&Bv(w,N),x;if(D===null){for(;!H.done;N++,H=y.next())H=u(w,H.value,S),H!==null&&(b=r(H,b,N),E===null?x=H:E.sibling=H,E=H);return _s&&Bv(w,N),x}for(D=i(w,D);!H.done;N++,H=y.next())H=f(D,w,N,H.value,S),H!==null&&(n&&H.alternate!==null&&D.delete(H.key===null?N:H.key),b=r(H,b,N),E===null?x=H:E.sibling=H,E=H);return n&&D.forEach(function(G){return e(w,G)}),_s&&Bv(w,N),x}function _(w,b,y,S){if(typeof y=="object"&&y!==null&&y.type===r1&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case rR:e:{for(var x=y.key,E=b;E!==null;){if(E.key===x){if(x=y.type,x===r1){if(E.tag===7){t(w,E.sibling),b=s(E,y.props.children),b.return=w,w=b;break e}}else if(E.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Up&&nse(x)===E.type){t(w,E.sibling),b=s(E,y.props),b.ref=CL(w,E,y),b.return=w,w=b;break e}t(w,E);break}else e(w,E);E=E.sibling}y.type===r1?(b=Pb(y.props.children,w.mode,S,y.key),b.return=w,w=b):(S=t2(y.type,y.key,y.props,null,w.mode,S),S.ref=CL(w,b,y),S.return=w,w=S)}return o(w);case s1:e:{for(E=y.key;b!==null;){if(b.key===E)if(b.tag===4&&b.stateNode.containerInfo===y.containerInfo&&b.stateNode.implementation===y.implementation){t(w,b.sibling),b=s(b,y.children||[]),b.return=w,w=b;break e}else{t(w,b);break}else e(w,b);b=b.sibling}b=J7(y,w.mode,S),b.return=w,w=b}return o(w);case Up:return E=y._init,_(w,b,E(y._payload),S)}if(nk(y))return g(w,b,y,S);if(mL(y))return p(w,b,y,S);mR(w,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,b!==null&&b.tag===6?(t(w,b.sibling),b=s(b,y),b.return=w,w=b):(t(w,b),b=Q7(y,w.mode,S),b.return=w,w=b),o(w)):t(w,b)}return _}var mS=Ege(!0),Ige=Ege(!1),_M=Y_(null),vM=null,f1=null,vY=null;function bY(){vY=f1=vM=null}function wY(n){var e=_M.current;hs(_M),n._currentValue=e}function bH(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function uy(n,e){vM=n,vY=f1=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Tl=!0),n.firstContext=null)}function kd(n){var e=n._currentValue;if(vY!==n)if(n={context:n,memoizedValue:e,next:null},f1===null){if(vM===null)throw Error(Je(308));f1=n,vM.dependencies={lanes:0,firstContext:n}}else f1=f1.next=n;return e}var wb=null;function CY(n){wb===null?wb=[n]:wb.push(n)}function Dge(n,e,t,i){var s=e.interleaved;return s===null?(t.next=t,CY(e)):(t.next=s.next,s.next=t),e.interleaved=t,Hg(n,i)}function Hg(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var $p=!1;function yY(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Nge(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Ng(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Bm(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,ln&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,Hg(n,t)}return s=i.interleaved,s===null?(e.next=e,CY(i)):(e.next=s.next,s.next=e),i.interleaved=e,Hg(n,t)}function YA(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,aY(n,t)}}function sse(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var s=null,r=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};r===null?s=r=o:r=r.next=o,t=t.next}while(t!==null);r===null?s=r=e:r=r.next=e}else s=r=e;t={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function bM(n,e,t,i){var s=n.updateQueue;$p=!1;var r=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?r=c:o.next=c,o=l;var d=n.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(r!==null){var u=s.baseState;o=0,d=c=l=null,a=r;do{var h=a.lane,f=a.eventTime;if((i&h)===h){d!==null&&(d=d.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=n,p=a;switch(h=e,f=t,p.tag){case 1:if(g=p.payload,typeof g=="function"){u=g.call(f,u,h);break e}u=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=p.payload,h=typeof g=="function"?g.call(f,u,h):g,h==null)break e;u=Rs({},u,h);break e;case 2:$p=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,h=s.effects,h===null?s.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=f,l=u):d=d.next=f,o|=h;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(d===null&&(l=u),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else r===null&&(s.shared.lanes=0);e0|=o,n.lanes=o,n.memoizedState=u}}function rse(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],s=i.callback;if(s!==null){if(i.callback=null,i=t,typeof s!="function")throw Error(Je(191,s));s.call(i)}}}var _N={},jh=Y_(_N),aI=Y_(_N),lI=Y_(_N);function Cb(n){if(n===_N)throw Error(Je(174));return n}function SY(n,e){switch(rs(lI,e),rs(aI,n),rs(jh,_N),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:J6(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=J6(e,n)}hs(jh),rs(jh,e)}function _S(){hs(jh),hs(aI),hs(lI)}function Tge(n){Cb(lI.current);var e=Cb(jh.current),t=J6(e,n.type);e!==t&&(rs(aI,n),rs(jh,t))}function xY(n){aI.current===n&&(hs(jh),hs(aI))}var xs=Y_(0);function wM(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var K7=[];function LY(){for(var n=0;n<K7.length;n++)K7[n]._workInProgressVersionPrimary=null;K7.length=0}var ZA=lp.ReactCurrentDispatcher,q7=lp.ReactCurrentBatchConfig,Jw=0,Is=null,Nr=null,to=null,CM=!1,Fk=!1,cI=0,LOe=0;function Xo(){throw Error(Je(321))}function kY(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Pu(n[t],e[t]))return!1;return!0}function EY(n,e,t,i,s,r){if(Jw=r,Is=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ZA.current=n===null||n.memoizedState===null?DOe:NOe,n=t(i,s),Fk){r=0;do{if(Fk=!1,cI=0,25<=r)throw Error(Je(301));r+=1,to=Nr=null,e.updateQueue=null,ZA.current=TOe,n=t(i,s)}while(Fk)}if(ZA.current=yM,e=Nr!==null&&Nr.next!==null,Jw=0,to=Nr=Is=null,CM=!1,e)throw Error(Je(300));return n}function IY(){var n=cI!==0;return cI=0,n}function gh(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return to===null?Is.memoizedState=to=n:to=to.next=n,to}function Ed(){if(Nr===null){var n=Is.alternate;n=n!==null?n.memoizedState:null}else n=Nr.next;var e=to===null?Is.memoizedState:to.next;if(e!==null)to=e,Nr=n;else{if(n===null)throw Error(Je(310));Nr=n,n={memoizedState:Nr.memoizedState,baseState:Nr.baseState,baseQueue:Nr.baseQueue,queue:Nr.queue,next:null},to===null?Is.memoizedState=to=n:to=to.next=n}return to}function dI(n,e){return typeof e=="function"?e(n):e}function G7(n){var e=Ed(),t=e.queue;if(t===null)throw Error(Je(311));t.lastRenderedReducer=n;var i=Nr,s=i.baseQueue,r=t.pending;if(r!==null){if(s!==null){var o=s.next;s.next=r.next,r.next=o}i.baseQueue=s=r,t.pending=null}if(s!==null){r=s.next,i=i.baseState;var a=o=null,l=null,c=r;do{var d=c.lane;if((Jw&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:n(i,c.action);else{var u={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=u,o=i):l=l.next=u,Is.lanes|=d,e0|=d}c=c.next}while(c!==null&&c!==r);l===null?o=i:l.next=a,Pu(i,e.memoizedState)||(Tl=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,t.lastRenderedState=i}if(n=t.interleaved,n!==null){s=n;do r=s.lane,Is.lanes|=r,e0|=r,s=s.next;while(s!==n)}else s===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Y7(n){var e=Ed(),t=e.queue;if(t===null)throw Error(Je(311));t.lastRenderedReducer=n;var i=t.dispatch,s=t.pending,r=e.memoizedState;if(s!==null){t.pending=null;var o=s=s.next;do r=n(r,o.action),o=o.next;while(o!==s);Pu(r,e.memoizedState)||(Tl=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),t.lastRenderedState=r}return[r,i]}function Rge(){}function Age(n,e){var t=Is,i=Ed(),s=e(),r=!Pu(i.memoizedState,s);if(r&&(i.memoizedState=s,Tl=!0),i=i.queue,DY(Oge.bind(null,t,i,n),[n]),i.getSnapshot!==e||r||to!==null&&to.memoizedState.tag&1){if(t.flags|=2048,uI(9,Pge.bind(null,t,i,s,e),void 0,null),oo===null)throw Error(Je(349));Jw&30||Mge(t,e,s)}return s}function Mge(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Is.updateQueue,e===null?(e={lastEffect:null,stores:null},Is.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function Pge(n,e,t,i){e.value=t,e.getSnapshot=i,Fge(e)&&Bge(n)}function Oge(n,e,t){return t(function(){Fge(e)&&Bge(n)})}function Fge(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Pu(n,t)}catch{return!0}}function Bge(n){var e=Hg(n,1);e!==null&&xu(e,n,1,-1)}function ose(n){var e=gh();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:dI,lastRenderedState:n},e.queue=n,n=n.dispatch=IOe.bind(null,Is,n),[e.memoizedState,n]}function uI(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=Is.updateQueue,e===null?(e={lastEffect:null,stores:null},Is.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function Wge(){return Ed().memoizedState}function XA(n,e,t,i){var s=gh();Is.flags|=n,s.memoizedState=uI(1|e,t,void 0,i===void 0?null:i)}function K5(n,e,t,i){var s=Ed();i=i===void 0?null:i;var r=void 0;if(Nr!==null){var o=Nr.memoizedState;if(r=o.destroy,i!==null&&kY(i,o.deps)){s.memoizedState=uI(e,t,r,i);return}}Is.flags|=n,s.memoizedState=uI(1|e,t,r,i)}function ase(n,e){return XA(8390656,8,n,e)}function DY(n,e){return K5(2048,8,n,e)}function Hge(n,e){return K5(4,2,n,e)}function Vge(n,e){return K5(4,4,n,e)}function zge(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function Uge(n,e,t){return t=t!=null?t.concat([n]):null,K5(4,4,zge.bind(null,e,n),t)}function NY(){}function $ge(n,e){var t=Ed();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&kY(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function jge(n,e){var t=Ed();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&kY(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function Kge(n,e,t){return Jw&21?(Pu(t,e)||(t=Xfe(),Is.lanes|=t,e0|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Tl=!0),n.memoizedState=t)}function kOe(n,e){var t=Bn;Bn=t!==0&&4>t?t:4,n(!0);var i=q7.transition;q7.transition={};try{n(!1),e()}finally{Bn=t,q7.transition=i}}function qge(){return Ed().memoizedState}function EOe(n,e,t){var i=Hm(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},Gge(n))Yge(e,t);else if(t=Dge(n,e,t,i),t!==null){var s=qa();xu(t,n,i,s),Zge(t,e,i)}}function IOe(n,e,t){var i=Hm(n),s={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(Gge(n))Yge(e,s);else{var r=n.alternate;if(n.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var o=e.lastRenderedState,a=r(o,t);if(s.hasEagerState=!0,s.eagerState=a,Pu(a,o)){var l=e.interleaved;l===null?(s.next=s,CY(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}t=Dge(n,e,s,i),t!==null&&(s=qa(),xu(t,n,i,s),Zge(t,e,i))}}function Gge(n){var e=n.alternate;return n===Is||e!==null&&e===Is}function Yge(n,e){Fk=CM=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function Zge(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,aY(n,t)}}var yM={readContext:kd,useCallback:Xo,useContext:Xo,useEffect:Xo,useImperativeHandle:Xo,useInsertionEffect:Xo,useLayoutEffect:Xo,useMemo:Xo,useReducer:Xo,useRef:Xo,useState:Xo,useDebugValue:Xo,useDeferredValue:Xo,useTransition:Xo,useMutableSource:Xo,useSyncExternalStore:Xo,useId:Xo,unstable_isNewReconciler:!1},DOe={readContext:kd,useCallback:function(n,e){return gh().memoizedState=[n,e===void 0?null:e],n},useContext:kd,useEffect:ase,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,XA(4194308,4,zge.bind(null,e,n),t)},useLayoutEffect:function(n,e){return XA(4194308,4,n,e)},useInsertionEffect:function(n,e){return XA(4,2,n,e)},useMemo:function(n,e){var t=gh();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=gh();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=EOe.bind(null,Is,n),[i.memoizedState,n]},useRef:function(n){var e=gh();return n={current:n},e.memoizedState=n},useState:ose,useDebugValue:NY,useDeferredValue:function(n){return gh().memoizedState=n},useTransition:function(){var n=ose(!1),e=n[0];return n=kOe.bind(null,n[1]),gh().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=Is,s=gh();if(_s){if(t===void 0)throw Error(Je(407));t=t()}else{if(t=e(),oo===null)throw Error(Je(349));Jw&30||Mge(i,e,t)}s.memoizedState=t;var r={value:t,getSnapshot:e};return s.queue=r,ase(Oge.bind(null,i,r,n),[n]),i.flags|=2048,uI(9,Pge.bind(null,i,r,t,e),void 0,null),t},useId:function(){var n=gh(),e=oo.identifierPrefix;if(_s){var t=fg,i=hg;t=(i&~(1<<32-Su(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=cI++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=LOe++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},NOe={readContext:kd,useCallback:$ge,useContext:kd,useEffect:DY,useImperativeHandle:Uge,useInsertionEffect:Hge,useLayoutEffect:Vge,useMemo:jge,useReducer:G7,useRef:Wge,useState:function(){return G7(dI)},useDebugValue:NY,useDeferredValue:function(n){var e=Ed();return Kge(e,Nr.memoizedState,n)},useTransition:function(){var n=G7(dI)[0],e=Ed().memoizedState;return[n,e]},useMutableSource:Rge,useSyncExternalStore:Age,useId:qge,unstable_isNewReconciler:!1},TOe={readContext:kd,useCallback:$ge,useContext:kd,useEffect:DY,useImperativeHandle:Uge,useInsertionEffect:Hge,useLayoutEffect:Vge,useMemo:jge,useReducer:Y7,useRef:Wge,useState:function(){return Y7(dI)},useDebugValue:NY,useDeferredValue:function(n){var e=Ed();return Nr===null?e.memoizedState=n:Kge(e,Nr.memoizedState,n)},useTransition:function(){var n=Y7(dI)[0],e=Ed().memoizedState;return[n,e]},useMutableSource:Rge,useSyncExternalStore:Age,useId:qge,unstable_isNewReconciler:!1};function nu(n,e){if(n&&n.defaultProps){e=Rs({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function wH(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:Rs({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var q5={isMounted:function(n){return(n=n._reactInternals)?O0(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=qa(),s=Hm(n),r=Ng(i,s);r.payload=e,t!=null&&(r.callback=t),e=Bm(n,r,s),e!==null&&(xu(e,n,s,i),YA(e,n,s))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=qa(),s=Hm(n),r=Ng(i,s);r.tag=1,r.payload=e,t!=null&&(r.callback=t),e=Bm(n,r,s),e!==null&&(xu(e,n,s,i),YA(e,n,s))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=qa(),i=Hm(n),s=Ng(t,i);s.tag=2,e!=null&&(s.callback=e),e=Bm(n,s,i),e!==null&&(xu(e,n,i,t),YA(e,n,i))}};function lse(n,e,t,i,s,r,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,r,o):e.prototype&&e.prototype.isPureReactComponent?!nI(t,i)||!nI(s,r):!0}function Xge(n,e,t){var i=!1,s=b_,r=e.contextType;return typeof r=="object"&&r!==null?r=kd(r):(s=Wl(e)?Xw:ua.current,i=e.contextTypes,r=(i=i!=null)?gS(n,s):b_),e=new e(t,r),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=q5,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=r),e}function cse(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&q5.enqueueReplaceState(e,e.state,null)}function CH(n,e,t,i){var s=n.stateNode;s.props=t,s.state=n.memoizedState,s.refs={},yY(n);var r=e.contextType;typeof r=="object"&&r!==null?s.context=kd(r):(r=Wl(e)?Xw:ua.current,s.context=gS(n,r)),s.state=n.memoizedState,r=e.getDerivedStateFromProps,typeof r=="function"&&(wH(n,e,r,t),s.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&q5.enqueueReplaceState(s,s.state,null),bM(n,t,s,i),s.state=n.memoizedState),typeof s.componentDidMount=="function"&&(n.flags|=4194308)}function vS(n,e){try{var t="",i=e;do t+=rPe(i),i=i.return;while(i);var s=t}catch(r){s=`
Error generating stack: `+r.message+`
`+r.stack}return{value:n,source:e,stack:s,digest:null}}function Z7(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function yH(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var ROe=typeof WeakMap=="function"?WeakMap:Map;function Qge(n,e,t){t=Ng(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){xM||(xM=!0,RH=i),yH(n,e)},t}function Jge(n,e,t){t=Ng(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;t.payload=function(){return i(s)},t.callback=function(){yH(n,e)}}var r=n.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(t.callback=function(){yH(n,e),typeof i!="function"&&(Wm===null?Wm=new Set([this]):Wm.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function dse(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new ROe;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(t)||(s.add(t),n=KOe.bind(null,n,e,t),e.then(n,n))}function use(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function hse(n,e,t,i,s){return n.mode&1?(n.flags|=65536,n.lanes=s,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Ng(-1,1),e.tag=2,Bm(t,e,1))),t.lanes|=1),n)}var AOe=lp.ReactCurrentOwner,Tl=!1;function Ma(n,e,t,i){e.child=n===null?Ige(e,null,t,i):mS(e,n.child,t,i)}function fse(n,e,t,i,s){t=t.render;var r=e.ref;return uy(e,s),i=EY(n,e,t,i,r,s),t=IY(),n!==null&&!Tl?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,Vg(n,e,s)):(_s&&t&&pY(e),e.flags|=1,Ma(n,e,i,s),e.child)}function gse(n,e,t,i,s){if(n===null){var r=t.type;return typeof r=="function"&&!BY(r)&&r.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=r,epe(n,e,r,i,s)):(n=t2(t.type,null,i,e,e.mode,s),n.ref=e.ref,n.return=e,e.child=n)}if(r=n.child,!(n.lanes&s)){var o=r.memoizedProps;if(t=t.compare,t=t!==null?t:nI,t(o,i)&&n.ref===e.ref)return Vg(n,e,s)}return e.flags|=1,n=Vm(r,i),n.ref=e.ref,n.return=e,e.child=n}function epe(n,e,t,i,s){if(n!==null){var r=n.memoizedProps;if(nI(r,i)&&n.ref===e.ref)if(Tl=!1,e.pendingProps=i=r,(n.lanes&s)!==0)n.flags&131072&&(Tl=!0);else return e.lanes=n.lanes,Vg(n,e,s)}return SH(n,e,t,i,s)}function tpe(n,e,t){var i=e.pendingProps,s=i.children,r=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},rs(p1,uc),uc|=t;else{if(!(t&1073741824))return n=r!==null?r.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,rs(p1,uc),uc|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=r!==null?r.baseLanes:t,rs(p1,uc),uc|=i}else r!==null?(i=r.baseLanes|t,e.memoizedState=null):i=t,rs(p1,uc),uc|=i;return Ma(n,e,s,t),e.child}function ipe(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function SH(n,e,t,i,s){var r=Wl(t)?Xw:ua.current;return r=gS(e,r),uy(e,s),t=EY(n,e,t,i,r,s),i=IY(),n!==null&&!Tl?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,Vg(n,e,s)):(_s&&i&&pY(e),e.flags|=1,Ma(n,e,t,s),e.child)}function pse(n,e,t,i,s){if(Wl(t)){var r=!0;gM(e)}else r=!1;if(uy(e,s),e.stateNode===null)QA(n,e),Xge(e,t,i),CH(e,t,i,s),i=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=kd(c):(c=Wl(t)?Xw:ua.current,c=gS(e,c));var d=t.getDerivedStateFromProps,u=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";u||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&cse(e,o,i,c),$p=!1;var h=e.memoizedState;o.state=h,bM(e,i,o,s),l=e.memoizedState,a!==i||h!==l||Bl.current||$p?(typeof d=="function"&&(wH(e,t,d,i),l=e.memoizedState),(a=$p||lse(e,t,a,i,h,l,c))?(u||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,Nge(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:nu(e.type,a),o.props=c,u=e.pendingProps,h=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=kd(l):(l=Wl(t)?Xw:ua.current,l=gS(e,l));var f=t.getDerivedStateFromProps;(d=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==u||h!==l)&&cse(e,o,i,l),$p=!1,h=e.memoizedState,o.state=h,bM(e,i,o,s);var g=e.memoizedState;a!==u||h!==g||Bl.current||$p?(typeof f=="function"&&(wH(e,t,f,i),g=e.memoizedState),(c=$p||lse(e,t,c,i,h,g,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&h===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&h===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=g),o.props=i,o.state=g,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&h===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&h===n.memoizedState||(e.flags|=1024),i=!1)}return xH(n,e,t,i,r,s)}function xH(n,e,t,i,s,r){ipe(n,e);var o=(e.flags&128)!==0;if(!i&&!o)return s&&ese(e,t,!1),Vg(n,e,r);i=e.stateNode,AOe.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&o?(e.child=mS(e,n.child,null,r),e.child=mS(e,null,a,r)):Ma(n,e,a,r),e.memoizedState=i.state,s&&ese(e,t,!0),e.child}function npe(n){var e=n.stateNode;e.pendingContext?Jne(n,e.pendingContext,e.pendingContext!==e.context):e.context&&Jne(n,e.context,!1),SY(n,e.containerInfo)}function mse(n,e,t,i,s){return pS(),_Y(s),e.flags|=256,Ma(n,e,t,i),e.child}var LH={dehydrated:null,treeContext:null,retryLane:0};function kH(n){return{baseLanes:n,cachePool:null,transitions:null}}function spe(n,e,t){var i=e.pendingProps,s=xs.current,r=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(s&2)!==0),a?(r=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(s|=1),rs(xs,s&1),n===null)return vH(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,n=i.fallback,r?(i=e.mode,r=e.child,o={mode:"hidden",children:o},!(i&1)&&r!==null?(r.childLanes=0,r.pendingProps=o):r=Z5(o,i,0,null),n=Pb(n,i,t,null),r.return=e,n.return=e,r.sibling=n,e.child=r,e.child.memoizedState=kH(t),e.memoizedState=LH,n):TY(e,o));if(s=n.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return MOe(n,e,o,i,a,s,t);if(r){r=i.fallback,o=e.mode,s=n.child,a=s.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=Vm(s,l),i.subtreeFlags=s.subtreeFlags&14680064),a!==null?r=Vm(a,r):(r=Pb(r,o,t,null),r.flags|=2),r.return=e,i.return=e,i.sibling=r,e.child=i,i=r,r=e.child,o=n.child.memoizedState,o=o===null?kH(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},r.memoizedState=o,r.childLanes=n.childLanes&~t,e.memoizedState=LH,i}return r=n.child,n=r.sibling,i=Vm(r,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function TY(n,e){return e=Z5({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function _R(n,e,t,i){return i!==null&&_Y(i),mS(e,n.child,null,t),n=TY(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function MOe(n,e,t,i,s,r,o){if(t)return e.flags&256?(e.flags&=-257,i=Z7(Error(Je(422))),_R(n,e,o,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(r=i.fallback,s=e.mode,i=Z5({mode:"visible",children:i.children},s,0,null),r=Pb(r,s,o,null),r.flags|=2,i.return=e,r.return=e,i.sibling=r,e.child=i,e.mode&1&&mS(e,n.child,null,o),e.child.memoizedState=kH(o),e.memoizedState=LH,r);if(!(e.mode&1))return _R(n,e,o,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var a=i.dgst;return i=a,r=Error(Je(419)),i=Z7(r,i,void 0),_R(n,e,o,i)}if(a=(o&n.childLanes)!==0,Tl||a){if(i=oo,i!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|o)?0:s,s!==0&&s!==r.retryLane&&(r.retryLane=s,Hg(n,s),xu(i,n,s,-1))}return FY(),i=Z7(Error(Je(421))),_R(n,e,o,i)}return s.data==="$?"?(e.flags|=128,e.child=n.child,e=qOe.bind(null,n),s._reactRetry=e,null):(n=r.treeContext,Cc=Fm(s.nextSibling),xc=e,_s=!0,hu=null,n!==null&&(dd[ud++]=hg,dd[ud++]=fg,dd[ud++]=Qw,hg=n.id,fg=n.overflow,Qw=e),e=TY(e,i.children),e.flags|=4096,e)}function _se(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),bH(n.return,e,t)}function X7(n,e,t,i,s){var r=n.memoizedState;r===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:s}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=t,r.tailMode=s)}function rpe(n,e,t){var i=e.pendingProps,s=i.revealOrder,r=i.tail;if(Ma(n,e,i.children,t),i=xs.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&_se(n,t,e);else if(n.tag===19)_se(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(rs(xs,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(t=e.child,s=null;t!==null;)n=t.alternate,n!==null&&wM(n)===null&&(s=t),t=t.sibling;t=s,t===null?(s=e.child,e.child=null):(s=t.sibling,t.sibling=null),X7(e,!1,s,t,r);break;case"backwards":for(t=null,s=e.child,e.child=null;s!==null;){if(n=s.alternate,n!==null&&wM(n)===null){e.child=s;break}n=s.sibling,s.sibling=t,t=s,s=n}X7(e,!0,t,null,r);break;case"together":X7(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function QA(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Vg(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),e0|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(Je(153));if(e.child!==null){for(n=e.child,t=Vm(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Vm(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function POe(n,e,t){switch(e.tag){case 3:npe(e),pS();break;case 5:Tge(e);break;case 1:Wl(e.type)&&gM(e);break;case 4:SY(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;rs(_M,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(rs(xs,xs.current&1),e.flags|=128,null):t&e.child.childLanes?spe(n,e,t):(rs(xs,xs.current&1),n=Vg(n,e,t),n!==null?n.sibling:null);rs(xs,xs.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return rpe(n,e,t);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),rs(xs,xs.current),i)break;return null;case 22:case 23:return e.lanes=0,tpe(n,e,t)}return Vg(n,e,t)}var ope,EH,ape,lpe;ope=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};EH=function(){};ape=function(n,e,t,i){var s=n.memoizedProps;if(s!==i){n=e.stateNode,Cb(jh.current);var r=null;switch(t){case"input":s=Y6(n,s),i=Y6(n,i),r=[];break;case"select":s=Rs({},s,{value:void 0}),i=Rs({},i,{value:void 0}),r=[];break;case"textarea":s=Q6(n,s),i=Q6(n,i),r=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=hM)}eH(t,i);var o;t=null;for(c in s)if(!i.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ZE.hasOwnProperty(c)?r||(r=[]):(r=r||[]).push(c,null));for(c in i){var l=i[c];if(a=s!=null?s[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(r||(r=[]),r.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(r=r||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(r=r||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(ZE.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&ds("scroll",n),r||a===l||(r=[])):(r=r||[]).push(c,l))}t&&(r=r||[]).push("style",t);var c=r;(e.updateQueue=c)&&(e.flags|=4)}};lpe=function(n,e,t,i){t!==i&&(e.flags|=4)};function yL(n,e){if(!_s)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function Qo(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var s=n.child;s!==null;)t|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=n,s=s.sibling;else for(s=n.child;s!==null;)t|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=n,s=s.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function OOe(n,e,t){var i=e.pendingProps;switch(mY(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qo(e),null;case 1:return Wl(e.type)&&fM(),Qo(e),null;case 3:return i=e.stateNode,_S(),hs(Bl),hs(ua),LY(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(pR(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,hu!==null&&(PH(hu),hu=null))),EH(n,e),Qo(e),null;case 5:xY(e);var s=Cb(lI.current);if(t=e.type,n!==null&&e.stateNode!=null)ape(n,e,t,i,s),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(Je(166));return Qo(e),null}if(n=Cb(jh.current),pR(e)){i=e.stateNode,t=e.type;var r=e.memoizedProps;switch(i[Ah]=e,i[oI]=r,n=(e.mode&1)!==0,t){case"dialog":ds("cancel",i),ds("close",i);break;case"iframe":case"object":case"embed":ds("load",i);break;case"video":case"audio":for(s=0;s<rk.length;s++)ds(rk[s],i);break;case"source":ds("error",i);break;case"img":case"image":case"link":ds("error",i),ds("load",i);break;case"details":ds("toggle",i);break;case"input":kne(i,r),ds("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!r.multiple},ds("invalid",i);break;case"textarea":Ine(i,r),ds("invalid",i)}eH(t,r),s=null;for(var o in r)if(r.hasOwnProperty(o)){var a=r[o];o==="children"?typeof a=="string"?i.textContent!==a&&(r.suppressHydrationWarning!==!0&&gR(i.textContent,a,n),s=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(r.suppressHydrationWarning!==!0&&gR(i.textContent,a,n),s=["children",""+a]):ZE.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ds("scroll",i)}switch(t){case"input":oR(i),Ene(i,r,!0);break;case"textarea":oR(i),Dne(i);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(i.onclick=hM)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Ofe(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=o.createElement(t,{is:i.is}):(n=o.createElement(t),t==="select"&&(o=n,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):n=o.createElementNS(n,t),n[Ah]=e,n[oI]=i,ope(n,e,!1,!1),e.stateNode=n;e:{switch(o=tH(t,i),t){case"dialog":ds("cancel",n),ds("close",n),s=i;break;case"iframe":case"object":case"embed":ds("load",n),s=i;break;case"video":case"audio":for(s=0;s<rk.length;s++)ds(rk[s],n);s=i;break;case"source":ds("error",n),s=i;break;case"img":case"image":case"link":ds("error",n),ds("load",n),s=i;break;case"details":ds("toggle",n),s=i;break;case"input":kne(n,i),s=Y6(n,i),ds("invalid",n);break;case"option":s=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},s=Rs({},i,{value:void 0}),ds("invalid",n);break;case"textarea":Ine(n,i),s=Q6(n,i),ds("invalid",n);break;default:s=i}eH(t,s),a=s;for(r in a)if(a.hasOwnProperty(r)){var l=a[r];r==="style"?Wfe(n,l):r==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Ffe(n,l)):r==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&XE(n,l):typeof l=="number"&&XE(n,""+l):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(ZE.hasOwnProperty(r)?l!=null&&r==="onScroll"&&ds("scroll",n):l!=null&&tY(n,r,l,o))}switch(t){case"input":oR(n),Ene(n,i,!1);break;case"textarea":oR(n),Dne(n);break;case"option":i.value!=null&&n.setAttribute("value",""+v_(i.value));break;case"select":n.multiple=!!i.multiple,r=i.value,r!=null?ay(n,!!i.multiple,r,!1):i.defaultValue!=null&&ay(n,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(n.onclick=hM)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Qo(e),null;case 6:if(n&&e.stateNode!=null)lpe(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(Je(166));if(t=Cb(lI.current),Cb(jh.current),pR(e)){if(i=e.stateNode,t=e.memoizedProps,i[Ah]=e,(r=i.nodeValue!==t)&&(n=xc,n!==null))switch(n.tag){case 3:gR(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&gR(i.nodeValue,t,(n.mode&1)!==0)}r&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[Ah]=e,e.stateNode=i}return Qo(e),null;case 13:if(hs(xs),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(_s&&Cc!==null&&e.mode&1&&!(e.flags&128))kge(),pS(),e.flags|=98560,r=!1;else if(r=pR(e),i!==null&&i.dehydrated!==null){if(n===null){if(!r)throw Error(Je(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(Je(317));r[Ah]=e}else pS(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Qo(e),r=!1}else hu!==null&&(PH(hu),hu=null),r=!0;if(!r)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||xs.current&1?Pr===0&&(Pr=3):FY())),e.updateQueue!==null&&(e.flags|=4),Qo(e),null);case 4:return _S(),EH(n,e),n===null&&sI(e.stateNode.containerInfo),Qo(e),null;case 10:return wY(e.type._context),Qo(e),null;case 17:return Wl(e.type)&&fM(),Qo(e),null;case 19:if(hs(xs),r=e.memoizedState,r===null)return Qo(e),null;if(i=(e.flags&128)!==0,o=r.rendering,o===null)if(i)yL(r,!1);else{if(Pr!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=wM(n),o!==null){for(e.flags|=128,yL(r,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)r=t,n=i,r.flags&=14680066,o=r.alternate,o===null?(r.childLanes=0,r.lanes=n,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,n=o.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return rs(xs,xs.current&1|2),e.child}n=n.sibling}r.tail!==null&&Js()>bS&&(e.flags|=128,i=!0,yL(r,!1),e.lanes=4194304)}else{if(!i)if(n=wM(o),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),yL(r,!0),r.tail===null&&r.tailMode==="hidden"&&!o.alternate&&!_s)return Qo(e),null}else 2*Js()-r.renderingStartTime>bS&&t!==1073741824&&(e.flags|=128,i=!0,yL(r,!1),e.lanes=4194304);r.isBackwards?(o.sibling=e.child,e.child=o):(t=r.last,t!==null?t.sibling=o:e.child=o,r.last=o)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=Js(),e.sibling=null,t=xs.current,rs(xs,i?t&1|2:t&1),e):(Qo(e),null);case 22:case 23:return OY(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?uc&1073741824&&(Qo(e),e.subtreeFlags&6&&(e.flags|=8192)):Qo(e),null;case 24:return null;case 25:return null}throw Error(Je(156,e.tag))}function FOe(n,e){switch(mY(e),e.tag){case 1:return Wl(e.type)&&fM(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return _S(),hs(Bl),hs(ua),LY(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return xY(e),null;case 13:if(hs(xs),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(Je(340));pS()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return hs(xs),null;case 4:return _S(),null;case 10:return wY(e.type._context),null;case 22:case 23:return OY(),null;case 24:return null;default:return null}}var vR=!1,na=!1,BOe=typeof WeakSet=="function"?WeakSet:Set,St=null;function g1(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){Hs(n,e,i)}else t.current=null}function IH(n,e,t){try{t()}catch(i){Hs(n,e,i)}}var vse=!1;function WOe(n,e){if(uH=cM,n=fge(),gY(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var s=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{t.nodeType,r.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,d=0,u=n,h=null;t:for(;;){for(var f;u!==t||s!==0&&u.nodeType!==3||(a=o+s),u!==r||i!==0&&u.nodeType!==3||(l=o+i),u.nodeType===3&&(o+=u.nodeValue.length),(f=u.firstChild)!==null;)h=u,u=f;for(;;){if(u===n)break t;if(h===t&&++c===s&&(a=o),h===r&&++d===i&&(l=o),(f=u.nextSibling)!==null)break;u=h,h=u.parentNode}u=f}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(hH={focusedElem:n,selectionRange:t},cM=!1,St=e;St!==null;)if(e=St,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,St=n;else for(;St!==null;){e=St;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var p=g.memoizedProps,_=g.memoizedState,w=e.stateNode,b=w.getSnapshotBeforeUpdate(e.elementType===e.type?p:nu(e.type,p),_);w.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Je(163))}}catch(S){Hs(e,e.return,S)}if(n=e.sibling,n!==null){n.return=e.return,St=n;break}St=e.return}return g=vse,vse=!1,g}function Bk(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&n)===n){var r=s.destroy;s.destroy=void 0,r!==void 0&&IH(e,t,r)}s=s.next}while(s!==i)}}function G5(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function DH(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function cpe(n){var e=n.alternate;e!==null&&(n.alternate=null,cpe(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Ah],delete e[oI],delete e[pH],delete e[COe],delete e[yOe])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function dpe(n){return n.tag===5||n.tag===3||n.tag===4}function bse(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||dpe(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function NH(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=hM));else if(i!==4&&(n=n.child,n!==null))for(NH(n,e,t),n=n.sibling;n!==null;)NH(n,e,t),n=n.sibling}function TH(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(TH(n,e,t),n=n.sibling;n!==null;)TH(n,e,t),n=n.sibling}var vo=null,lu=!1;function kp(n,e,t){for(t=t.child;t!==null;)upe(n,e,t),t=t.sibling}function upe(n,e,t){if($h&&typeof $h.onCommitFiberUnmount=="function")try{$h.onCommitFiberUnmount(H5,t)}catch{}switch(t.tag){case 5:na||g1(t,e);case 6:var i=vo,s=lu;vo=null,kp(n,e,t),vo=i,lu=s,vo!==null&&(lu?(n=vo,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):vo.removeChild(t.stateNode));break;case 18:vo!==null&&(lu?(n=vo,t=t.stateNode,n.nodeType===8?$7(n.parentNode,t):n.nodeType===1&&$7(n,t),tI(n)):$7(vo,t.stateNode));break;case 4:i=vo,s=lu,vo=t.stateNode.containerInfo,lu=!0,kp(n,e,t),vo=i,lu=s;break;case 0:case 11:case 14:case 15:if(!na&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var r=s,o=r.destroy;r=r.tag,o!==void 0&&(r&2||r&4)&&IH(t,e,o),s=s.next}while(s!==i)}kp(n,e,t);break;case 1:if(!na&&(g1(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(a){Hs(t,e,a)}kp(n,e,t);break;case 21:kp(n,e,t);break;case 22:t.mode&1?(na=(i=na)||t.memoizedState!==null,kp(n,e,t),na=i):kp(n,e,t);break;default:kp(n,e,t)}}function wse(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new BOe),e.forEach(function(i){var s=GOe.bind(null,n,i);t.has(i)||(t.add(i),i.then(s,s))})}}function jd(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var s=t[i];try{var r=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:vo=a.stateNode,lu=!1;break e;case 3:vo=a.stateNode.containerInfo,lu=!0;break e;case 4:vo=a.stateNode.containerInfo,lu=!0;break e}a=a.return}if(vo===null)throw Error(Je(160));upe(r,o,s),vo=null,lu=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){Hs(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)hpe(e,n),e=e.sibling}function hpe(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(jd(e,n),th(n),i&4){try{Bk(3,n,n.return),G5(3,n)}catch(p){Hs(n,n.return,p)}try{Bk(5,n,n.return)}catch(p){Hs(n,n.return,p)}}break;case 1:jd(e,n),th(n),i&512&&t!==null&&g1(t,t.return);break;case 5:if(jd(e,n),th(n),i&512&&t!==null&&g1(t,t.return),n.flags&32){var s=n.stateNode;try{XE(s,"")}catch(p){Hs(n,n.return,p)}}if(i&4&&(s=n.stateNode,s!=null)){var r=n.memoizedProps,o=t!==null?t.memoizedProps:r,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&r.type==="radio"&&r.name!=null&&Mfe(s,r),tH(a,o);var c=tH(a,r);for(o=0;o<l.length;o+=2){var d=l[o],u=l[o+1];d==="style"?Wfe(s,u):d==="dangerouslySetInnerHTML"?Ffe(s,u):d==="children"?XE(s,u):tY(s,d,u,c)}switch(a){case"input":Z6(s,r);break;case"textarea":Pfe(s,r);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!r.multiple;var f=r.value;f!=null?ay(s,!!r.multiple,f,!1):h!==!!r.multiple&&(r.defaultValue!=null?ay(s,!!r.multiple,r.defaultValue,!0):ay(s,!!r.multiple,r.multiple?[]:"",!1))}s[oI]=r}catch(p){Hs(n,n.return,p)}}break;case 6:if(jd(e,n),th(n),i&4){if(n.stateNode===null)throw Error(Je(162));s=n.stateNode,r=n.memoizedProps;try{s.nodeValue=r}catch(p){Hs(n,n.return,p)}}break;case 3:if(jd(e,n),th(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{tI(e.containerInfo)}catch(p){Hs(n,n.return,p)}break;case 4:jd(e,n),th(n);break;case 13:jd(e,n),th(n),s=n.child,s.flags&8192&&(r=s.memoizedState!==null,s.stateNode.isHidden=r,!r||s.alternate!==null&&s.alternate.memoizedState!==null||(MY=Js())),i&4&&wse(n);break;case 22:if(d=t!==null&&t.memoizedState!==null,n.mode&1?(na=(c=na)||d,jd(e,n),na=c):jd(e,n),th(n),i&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!d&&n.mode&1)for(St=n,d=n.child;d!==null;){for(u=St=d;St!==null;){switch(h=St,f=h.child,h.tag){case 0:case 11:case 14:case 15:Bk(4,h,h.return);break;case 1:g1(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){i=h,t=h.return;try{e=i,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(p){Hs(i,t,p)}}break;case 5:g1(h,h.return);break;case 22:if(h.memoizedState!==null){yse(u);continue}}f!==null?(f.return=h,St=f):yse(u)}d=d.sibling}e:for(d=null,u=n;;){if(u.tag===5){if(d===null){d=u;try{s=u.stateNode,c?(r=s.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(a=u.stateNode,l=u.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Bfe("display",o))}catch(p){Hs(n,n.return,p)}}}else if(u.tag===6){if(d===null)try{u.stateNode.nodeValue=c?"":u.memoizedProps}catch(p){Hs(n,n.return,p)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===n)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===n)break e;for(;u.sibling===null;){if(u.return===null||u.return===n)break e;d===u&&(d=null),u=u.return}d===u&&(d=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:jd(e,n),th(n),i&4&&wse(n);break;case 21:break;default:jd(e,n),th(n)}}function th(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(dpe(t)){var i=t;break e}t=t.return}throw Error(Je(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(XE(s,""),i.flags&=-33);var r=bse(n);TH(n,r,s);break;case 3:case 4:var o=i.stateNode.containerInfo,a=bse(n);NH(n,a,o);break;default:throw Error(Je(161))}}catch(l){Hs(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function HOe(n,e,t){St=n,fpe(n)}function fpe(n,e,t){for(var i=(n.mode&1)!==0;St!==null;){var s=St,r=s.child;if(s.tag===22&&i){var o=s.memoizedState!==null||vR;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||na;a=vR;var c=na;if(vR=o,(na=l)&&!c)for(St=s;St!==null;)o=St,l=o.child,o.tag===22&&o.memoizedState!==null?Sse(s):l!==null?(l.return=o,St=l):Sse(s);for(;r!==null;)St=r,fpe(r),r=r.sibling;St=s,vR=a,na=c}Cse(n)}else s.subtreeFlags&8772&&r!==null?(r.return=s,St=r):Cse(n)}}function Cse(n){for(;St!==null;){var e=St;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:na||G5(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!na)if(t===null)i.componentDidMount();else{var s=e.elementType===e.type?t.memoizedProps:nu(e.type,t.memoizedProps);i.componentDidUpdate(s,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var r=e.updateQueue;r!==null&&rse(e,r,i);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}rse(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var u=d.dehydrated;u!==null&&tI(u)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Je(163))}na||e.flags&512&&DH(e)}catch(h){Hs(e,e.return,h)}}if(e===n){St=null;break}if(t=e.sibling,t!==null){t.return=e.return,St=t;break}St=e.return}}function yse(n){for(;St!==null;){var e=St;if(e===n){St=null;break}var t=e.sibling;if(t!==null){t.return=e.return,St=t;break}St=e.return}}function Sse(n){for(;St!==null;){var e=St;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{G5(4,e)}catch(l){Hs(e,t,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(l){Hs(e,s,l)}}var r=e.return;try{DH(e)}catch(l){Hs(e,r,l)}break;case 5:var o=e.return;try{DH(e)}catch(l){Hs(e,o,l)}}}catch(l){Hs(e,e.return,l)}if(e===n){St=null;break}var a=e.sibling;if(a!==null){a.return=e.return,St=a;break}St=e.return}}var VOe=Math.ceil,SM=lp.ReactCurrentDispatcher,RY=lp.ReactCurrentOwner,yd=lp.ReactCurrentBatchConfig,ln=0,oo=null,fr=null,Io=0,uc=0,p1=Y_(0),Pr=0,hI=null,e0=0,Y5=0,AY=0,Wk=null,Sl=null,MY=0,bS=1/0,zf=null,xM=!1,RH=null,Wm=null,bR=!1,vm=null,LM=0,Hk=0,AH=null,JA=-1,e2=0;function qa(){return ln&6?Js():JA!==-1?JA:JA=Js()}function Hm(n){return n.mode&1?ln&2&&Io!==0?Io&-Io:xOe.transition!==null?(e2===0&&(e2=Xfe()),e2):(n=Bn,n!==0||(n=window.event,n=n===void 0?16:sge(n.type)),n):1}function xu(n,e,t,i){if(50<Hk)throw Hk=0,AH=null,Error(Je(185));gN(n,t,i),(!(ln&2)||n!==oo)&&(n===oo&&(!(ln&2)&&(Y5|=t),Pr===4&&em(n,Io)),Hl(n,i),t===1&&ln===0&&!(e.mode&1)&&(bS=Js()+500,j5&&Z_()))}function Hl(n,e){var t=n.callbackNode;xPe(n,e);var i=lM(n,n===oo?Io:0);if(i===0)t!==null&&Rne(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&Rne(t),e===1)n.tag===0?SOe(xse.bind(null,n)):Sge(xse.bind(null,n)),bOe(function(){!(ln&6)&&Z_()}),t=null;else{switch(Qfe(i)){case 1:t=oY;break;case 4:t=Yfe;break;case 16:t=aM;break;case 536870912:t=Zfe;break;default:t=aM}t=Cpe(t,gpe.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function gpe(n,e){if(JA=-1,e2=0,ln&6)throw Error(Je(327));var t=n.callbackNode;if(hy()&&n.callbackNode!==t)return null;var i=lM(n,n===oo?Io:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=kM(n,i);else{e=i;var s=ln;ln|=2;var r=mpe();(oo!==n||Io!==e)&&(zf=null,bS=Js()+500,Mb(n,e));do try{$Oe();break}catch(a){ppe(n,a)}while(!0);bY(),SM.current=r,ln=s,fr!==null?e=0:(oo=null,Io=0,e=Pr)}if(e!==0){if(e===2&&(s=oH(n),s!==0&&(i=s,e=MH(n,s))),e===1)throw t=hI,Mb(n,0),em(n,i),Hl(n,Js()),t;if(e===6)em(n,i);else{if(s=n.current.alternate,!(i&30)&&!zOe(s)&&(e=kM(n,i),e===2&&(r=oH(n),r!==0&&(i=r,e=MH(n,r))),e===1))throw t=hI,Mb(n,0),em(n,i),Hl(n,Js()),t;switch(n.finishedWork=s,n.finishedLanes=i,e){case 0:case 1:throw Error(Je(345));case 2:Wv(n,Sl,zf);break;case 3:if(em(n,i),(i&130023424)===i&&(e=MY+500-Js(),10<e)){if(lM(n,0)!==0)break;if(s=n.suspendedLanes,(s&i)!==i){qa(),n.pingedLanes|=n.suspendedLanes&s;break}n.timeoutHandle=gH(Wv.bind(null,n,Sl,zf),e);break}Wv(n,Sl,zf);break;case 4:if(em(n,i),(i&4194240)===i)break;for(e=n.eventTimes,s=-1;0<i;){var o=31-Su(i);r=1<<o,o=e[o],o>s&&(s=o),i&=~r}if(i=s,i=Js()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*VOe(i/1960))-i,10<i){n.timeoutHandle=gH(Wv.bind(null,n,Sl,zf),i);break}Wv(n,Sl,zf);break;case 5:Wv(n,Sl,zf);break;default:throw Error(Je(329))}}}return Hl(n,Js()),n.callbackNode===t?gpe.bind(null,n):null}function MH(n,e){var t=Wk;return n.current.memoizedState.isDehydrated&&(Mb(n,e).flags|=256),n=kM(n,e),n!==2&&(e=Sl,Sl=t,e!==null&&PH(e)),n}function PH(n){Sl===null?Sl=n:Sl.push.apply(Sl,n)}function zOe(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var s=t[i],r=s.getSnapshot;s=s.value;try{if(!Pu(r(),s))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function em(n,e){for(e&=~AY,e&=~Y5,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Su(e),i=1<<t;n[t]=-1,e&=~i}}function xse(n){if(ln&6)throw Error(Je(327));hy();var e=lM(n,0);if(!(e&1))return Hl(n,Js()),null;var t=kM(n,e);if(n.tag!==0&&t===2){var i=oH(n);i!==0&&(e=i,t=MH(n,i))}if(t===1)throw t=hI,Mb(n,0),em(n,e),Hl(n,Js()),t;if(t===6)throw Error(Je(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Wv(n,Sl,zf),Hl(n,Js()),null}function PY(n,e){var t=ln;ln|=1;try{return n(e)}finally{ln=t,ln===0&&(bS=Js()+500,j5&&Z_())}}function t0(n){vm!==null&&vm.tag===0&&!(ln&6)&&hy();var e=ln;ln|=1;var t=yd.transition,i=Bn;try{if(yd.transition=null,Bn=1,n)return n()}finally{Bn=i,yd.transition=t,ln=e,!(ln&6)&&Z_()}}function OY(){uc=p1.current,hs(p1)}function Mb(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,vOe(t)),fr!==null)for(t=fr.return;t!==null;){var i=t;switch(mY(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&fM();break;case 3:_S(),hs(Bl),hs(ua),LY();break;case 5:xY(i);break;case 4:_S();break;case 13:hs(xs);break;case 19:hs(xs);break;case 10:wY(i.type._context);break;case 22:case 23:OY()}t=t.return}if(oo=n,fr=n=Vm(n.current,null),Io=uc=e,Pr=0,hI=null,AY=Y5=e0=0,Sl=Wk=null,wb!==null){for(e=0;e<wb.length;e++)if(t=wb[e],i=t.interleaved,i!==null){t.interleaved=null;var s=i.next,r=t.pending;if(r!==null){var o=r.next;r.next=s,i.next=o}t.pending=i}wb=null}return n}function ppe(n,e){do{var t=fr;try{if(bY(),ZA.current=yM,CM){for(var i=Is.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}CM=!1}if(Jw=0,to=Nr=Is=null,Fk=!1,cI=0,RY.current=null,t===null||t.return===null){Pr=1,hI=e,fr=null;break}e:{var r=n,o=t.return,a=t,l=e;if(e=Io,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,u=d.tag;if(!(d.mode&1)&&(u===0||u===11||u===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=use(o);if(f!==null){f.flags&=-257,hse(f,o,a,r,e),f.mode&1&&dse(r,c,e),e=f,l=c;var g=e.updateQueue;if(g===null){var p=new Set;p.add(l),e.updateQueue=p}else g.add(l);break e}else{if(!(e&1)){dse(r,c,e),FY();break e}l=Error(Je(426))}}else if(_s&&a.mode&1){var _=use(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),hse(_,o,a,r,e),_Y(vS(l,a));break e}}r=l=vS(l,a),Pr!==4&&(Pr=2),Wk===null?Wk=[r]:Wk.push(r),r=o;do{switch(r.tag){case 3:r.flags|=65536,e&=-e,r.lanes|=e;var w=Qge(r,l,e);sse(r,w);break e;case 1:a=l;var b=r.type,y=r.stateNode;if(!(r.flags&128)&&(typeof b.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Wm===null||!Wm.has(y)))){r.flags|=65536,e&=-e,r.lanes|=e;var S=Jge(r,a,e);sse(r,S);break e}}r=r.return}while(r!==null)}vpe(t)}catch(x){e=x,fr===t&&t!==null&&(fr=t=t.return);continue}break}while(!0)}function mpe(){var n=SM.current;return SM.current=yM,n===null?yM:n}function FY(){(Pr===0||Pr===3||Pr===2)&&(Pr=4),oo===null||!(e0&268435455)&&!(Y5&268435455)||em(oo,Io)}function kM(n,e){var t=ln;ln|=2;var i=mpe();(oo!==n||Io!==e)&&(zf=null,Mb(n,e));do try{UOe();break}catch(s){ppe(n,s)}while(!0);if(bY(),ln=t,SM.current=i,fr!==null)throw Error(Je(261));return oo=null,Io=0,Pr}function UOe(){for(;fr!==null;)_pe(fr)}function $Oe(){for(;fr!==null&&!pPe();)_pe(fr)}function _pe(n){var e=wpe(n.alternate,n,uc);n.memoizedProps=n.pendingProps,e===null?vpe(n):fr=e,RY.current=null}function vpe(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=FOe(t,e),t!==null){t.flags&=32767,fr=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Pr=6,fr=null;return}}else if(t=OOe(t,e,uc),t!==null){fr=t;return}if(e=e.sibling,e!==null){fr=e;return}fr=e=n}while(e!==null);Pr===0&&(Pr=5)}function Wv(n,e,t){var i=Bn,s=yd.transition;try{yd.transition=null,Bn=1,jOe(n,e,t,i)}finally{yd.transition=s,Bn=i}return null}function jOe(n,e,t,i){do hy();while(vm!==null);if(ln&6)throw Error(Je(327));t=n.finishedWork;var s=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(Je(177));n.callbackNode=null,n.callbackPriority=0;var r=t.lanes|t.childLanes;if(LPe(n,r),n===oo&&(fr=oo=null,Io=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||bR||(bR=!0,Cpe(aM,function(){return hy(),null})),r=(t.flags&15990)!==0,t.subtreeFlags&15990||r){r=yd.transition,yd.transition=null;var o=Bn;Bn=1;var a=ln;ln|=4,RY.current=null,WOe(n,t),hpe(t,n),uOe(hH),cM=!!uH,hH=uH=null,n.current=t,HOe(t),mPe(),ln=a,Bn=o,yd.transition=r}else n.current=t;if(bR&&(bR=!1,vm=n,LM=s),r=n.pendingLanes,r===0&&(Wm=null),bPe(t.stateNode),Hl(n,Js()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)s=e[t],i(s.value,{componentStack:s.stack,digest:s.digest});if(xM)throw xM=!1,n=RH,RH=null,n;return LM&1&&n.tag!==0&&hy(),r=n.pendingLanes,r&1?n===AH?Hk++:(Hk=0,AH=n):Hk=0,Z_(),null}function hy(){if(vm!==null){var n=Qfe(LM),e=yd.transition,t=Bn;try{if(yd.transition=null,Bn=16>n?16:n,vm===null)var i=!1;else{if(n=vm,vm=null,LM=0,ln&6)throw Error(Je(331));var s=ln;for(ln|=4,St=n.current;St!==null;){var r=St,o=r.child;if(St.flags&16){var a=r.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(St=c;St!==null;){var d=St;switch(d.tag){case 0:case 11:case 15:Bk(8,d,r)}var u=d.child;if(u!==null)u.return=d,St=u;else for(;St!==null;){d=St;var h=d.sibling,f=d.return;if(cpe(d),d===c){St=null;break}if(h!==null){h.return=f,St=h;break}St=f}}}var g=r.alternate;if(g!==null){var p=g.child;if(p!==null){g.child=null;do{var _=p.sibling;p.sibling=null,p=_}while(p!==null)}}St=r}}if(r.subtreeFlags&2064&&o!==null)o.return=r,St=o;else e:for(;St!==null;){if(r=St,r.flags&2048)switch(r.tag){case 0:case 11:case 15:Bk(9,r,r.return)}var w=r.sibling;if(w!==null){w.return=r.return,St=w;break e}St=r.return}}var b=n.current;for(St=b;St!==null;){o=St;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,St=y;else e:for(o=b;St!==null;){if(a=St,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:G5(9,a)}}catch(x){Hs(a,a.return,x)}if(a===o){St=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,St=S;break e}St=a.return}}if(ln=s,Z_(),$h&&typeof $h.onPostCommitFiberRoot=="function")try{$h.onPostCommitFiberRoot(H5,n)}catch{}i=!0}return i}finally{Bn=t,yd.transition=e}}return!1}function Lse(n,e,t){e=vS(t,e),e=Qge(n,e,1),n=Bm(n,e,1),e=qa(),n!==null&&(gN(n,1,e),Hl(n,e))}function Hs(n,e,t){if(n.tag===3)Lse(n,n,t);else for(;e!==null;){if(e.tag===3){Lse(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Wm===null||!Wm.has(i))){n=vS(t,n),n=Jge(e,n,1),e=Bm(e,n,1),n=qa(),e!==null&&(gN(e,1,n),Hl(e,n));break}}e=e.return}}function KOe(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=qa(),n.pingedLanes|=n.suspendedLanes&t,oo===n&&(Io&t)===t&&(Pr===4||Pr===3&&(Io&130023424)===Io&&500>Js()-MY?Mb(n,0):AY|=t),Hl(n,e)}function bpe(n,e){e===0&&(n.mode&1?(e=cR,cR<<=1,!(cR&130023424)&&(cR=4194304)):e=1);var t=qa();n=Hg(n,e),n!==null&&(gN(n,e,t),Hl(n,t))}function qOe(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),bpe(n,t)}function GOe(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,s=n.memoizedState;s!==null&&(t=s.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(Je(314))}i!==null&&i.delete(e),bpe(n,t)}var wpe;wpe=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Bl.current)Tl=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Tl=!1,POe(n,e,t);Tl=!!(n.flags&131072)}else Tl=!1,_s&&e.flags&1048576&&xge(e,mM,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;QA(n,e),n=e.pendingProps;var s=gS(e,ua.current);uy(e,t),s=EY(null,e,i,n,s,t);var r=IY();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Wl(i)?(r=!0,gM(e)):r=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,yY(e),s.updater=q5,e.stateNode=s,s._reactInternals=e,CH(e,i,n,t),e=xH(null,e,i,!0,r,t)):(e.tag=0,_s&&r&&pY(e),Ma(null,e,s,t),e=e.child),e;case 16:i=e.elementType;e:{switch(QA(n,e),n=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=ZOe(i),n=nu(i,n),s){case 0:e=SH(null,e,i,n,t);break e;case 1:e=pse(null,e,i,n,t);break e;case 11:e=fse(null,e,i,n,t);break e;case 14:e=gse(null,e,i,nu(i.type,n),t);break e}throw Error(Je(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:nu(i,s),SH(n,e,i,s,t);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:nu(i,s),pse(n,e,i,s,t);case 3:e:{if(npe(e),n===null)throw Error(Je(387));i=e.pendingProps,r=e.memoizedState,s=r.element,Nge(n,e),bM(e,i,null,t);var o=e.memoizedState;if(i=o.element,r.isDehydrated)if(r={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){s=vS(Error(Je(423)),e),e=mse(n,e,i,t,s);break e}else if(i!==s){s=vS(Error(Je(424)),e),e=mse(n,e,i,t,s);break e}else for(Cc=Fm(e.stateNode.containerInfo.firstChild),xc=e,_s=!0,hu=null,t=Ige(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(pS(),i===s){e=Vg(n,e,t);break e}Ma(n,e,i,t)}e=e.child}return e;case 5:return Tge(e),n===null&&vH(e),i=e.type,s=e.pendingProps,r=n!==null?n.memoizedProps:null,o=s.children,fH(i,s)?o=null:r!==null&&fH(i,r)&&(e.flags|=32),ipe(n,e),Ma(n,e,o,t),e.child;case 6:return n===null&&vH(e),null;case 13:return spe(n,e,t);case 4:return SY(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=mS(e,null,i,t):Ma(n,e,i,t),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:nu(i,s),fse(n,e,i,s,t);case 7:return Ma(n,e,e.pendingProps,t),e.child;case 8:return Ma(n,e,e.pendingProps.children,t),e.child;case 12:return Ma(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,r=e.memoizedProps,o=s.value,rs(_M,i._currentValue),i._currentValue=o,r!==null)if(Pu(r.value,o)){if(r.children===s.children&&!Bl.current){e=Vg(n,e,t);break e}}else for(r=e.child,r!==null&&(r.return=e);r!==null;){var a=r.dependencies;if(a!==null){o=r.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(r.tag===1){l=Ng(-1,t&-t),l.tag=2;var c=r.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}r.lanes|=t,l=r.alternate,l!==null&&(l.lanes|=t),bH(r.return,t,e),a.lanes|=t;break}l=l.next}}else if(r.tag===10)o=r.type===e.type?null:r.child;else if(r.tag===18){if(o=r.return,o===null)throw Error(Je(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),bH(o,t,e),o=r.sibling}else o=r.child;if(o!==null)o.return=r;else for(o=r;o!==null;){if(o===e){o=null;break}if(r=o.sibling,r!==null){r.return=o.return,o=r;break}o=o.return}r=o}Ma(n,e,s.children,t),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,uy(e,t),s=kd(s),i=i(s),e.flags|=1,Ma(n,e,i,t),e.child;case 14:return i=e.type,s=nu(i,e.pendingProps),s=nu(i.type,s),gse(n,e,i,s,t);case 15:return epe(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:nu(i,s),QA(n,e),e.tag=1,Wl(i)?(n=!0,gM(e)):n=!1,uy(e,t),Xge(e,i,s),CH(e,i,s,t),xH(null,e,i,!0,n,t);case 19:return rpe(n,e,t);case 22:return tpe(n,e,t)}throw Error(Je(156,e.tag))};function Cpe(n,e){return Gfe(n,e)}function YOe(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vd(n,e,t,i){return new YOe(n,e,t,i)}function BY(n){return n=n.prototype,!(!n||!n.isReactComponent)}function ZOe(n){if(typeof n=="function")return BY(n)?1:0;if(n!=null){if(n=n.$$typeof,n===nY)return 11;if(n===sY)return 14}return 2}function Vm(n,e){var t=n.alternate;return t===null?(t=vd(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function t2(n,e,t,i,s,r){var o=2;if(i=n,typeof n=="function")BY(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case r1:return Pb(t.children,s,r,e);case iY:o=8,s|=8;break;case j6:return n=vd(12,t,e,s|2),n.elementType=j6,n.lanes=r,n;case K6:return n=vd(13,t,e,s),n.elementType=K6,n.lanes=r,n;case q6:return n=vd(19,t,e,s),n.elementType=q6,n.lanes=r,n;case Tfe:return Z5(t,s,r,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Dfe:o=10;break e;case Nfe:o=9;break e;case nY:o=11;break e;case sY:o=14;break e;case Up:o=16,i=null;break e}throw Error(Je(130,n==null?n:typeof n,""))}return e=vd(o,t,e,s),e.elementType=n,e.type=i,e.lanes=r,e}function Pb(n,e,t,i){return n=vd(7,n,i,e),n.lanes=t,n}function Z5(n,e,t,i){return n=vd(22,n,i,e),n.elementType=Tfe,n.lanes=t,n.stateNode={isHidden:!1},n}function Q7(n,e,t){return n=vd(6,n,null,e),n.lanes=t,n}function J7(n,e,t){return e=vd(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function XOe(n,e,t,i,s){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=A7(0),this.expirationTimes=A7(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=A7(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function WY(n,e,t,i,s,r,o,a,l){return n=new XOe(n,e,t,a,l),e===1?(e=1,r===!0&&(e|=8)):e=0,r=vd(3,null,null,e),n.current=r,r.stateNode=n,r.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},yY(r),n}function QOe(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s1,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function ype(n){if(!n)return b_;n=n._reactInternals;e:{if(O0(n)!==n||n.tag!==1)throw Error(Je(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Wl(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Je(171))}if(n.tag===1){var t=n.type;if(Wl(t))return yge(n,t,e)}return e}function Spe(n,e,t,i,s,r,o,a,l){return n=WY(t,i,!0,n,s,r,o,a,l),n.context=ype(null),t=n.current,i=qa(),s=Hm(t),r=Ng(i,s),r.callback=e??null,Bm(t,r,s),n.current.lanes=s,gN(n,s,i),Hl(n,i),n}function X5(n,e,t,i){var s=e.current,r=qa(),o=Hm(s);return t=ype(t),e.context===null?e.context=t:e.pendingContext=t,e=Ng(r,o),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=Bm(s,e,o),n!==null&&(xu(n,s,o,r),YA(n,s,o)),o}function EM(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function kse(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function HY(n,e){kse(n,e),(n=n.alternate)&&kse(n,e)}function JOe(){return null}var xpe=typeof reportError=="function"?reportError:function(n){console.error(n)};function VY(n){this._internalRoot=n}Q5.prototype.render=VY.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(Je(409));X5(n,e,null,null)};Q5.prototype.unmount=VY.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;t0(function(){X5(null,n,null,null)}),e[Wg]=null}};function Q5(n){this._internalRoot=n}Q5.prototype.unstable_scheduleHydration=function(n){if(n){var e=tge();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Jp.length&&e!==0&&e<Jp[t].priority;t++);Jp.splice(t,0,n),t===0&&nge(n)}};function zY(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function J5(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Ese(){}function eFe(n,e,t,i,s){if(s){if(typeof i=="function"){var r=i;i=function(){var c=EM(o);r.call(c)}}var o=Spe(e,i,n,0,null,!1,!1,"",Ese);return n._reactRootContainer=o,n[Wg]=o.current,sI(n.nodeType===8?n.parentNode:n),t0(),o}for(;s=n.lastChild;)n.removeChild(s);if(typeof i=="function"){var a=i;i=function(){var c=EM(l);a.call(c)}}var l=WY(n,0,!1,null,null,!1,!1,"",Ese);return n._reactRootContainer=l,n[Wg]=l.current,sI(n.nodeType===8?n.parentNode:n),t0(function(){X5(e,l,t,i)}),l}function e3(n,e,t,i,s){var r=t._reactRootContainer;if(r){var o=r;if(typeof s=="function"){var a=s;s=function(){var l=EM(o);a.call(l)}}X5(e,o,n,s)}else o=eFe(t,e,n,s,i);return EM(o)}Jfe=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=sk(e.pendingLanes);t!==0&&(aY(e,t|1),Hl(e,Js()),!(ln&6)&&(bS=Js()+500,Z_()))}break;case 13:t0(function(){var i=Hg(n,1);if(i!==null){var s=qa();xu(i,n,1,s)}}),HY(n,1)}};lY=function(n){if(n.tag===13){var e=Hg(n,134217728);if(e!==null){var t=qa();xu(e,n,134217728,t)}HY(n,134217728)}};ege=function(n){if(n.tag===13){var e=Hm(n),t=Hg(n,e);if(t!==null){var i=qa();xu(t,n,e,i)}HY(n,e)}};tge=function(){return Bn};ige=function(n,e){var t=Bn;try{return Bn=n,e()}finally{Bn=t}};nH=function(n,e,t){switch(e){case"input":if(Z6(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var s=$5(i);if(!s)throw Error(Je(90));Afe(i),Z6(i,s)}}}break;case"textarea":Pfe(n,t);break;case"select":e=t.value,e!=null&&ay(n,!!t.multiple,e,!1)}};zfe=PY;Ufe=t0;var tFe={usingClientEntryPoint:!1,Events:[mN,c1,$5,Hfe,Vfe,PY]},SL={findFiberByHostInstance:bb,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},iFe={bundleType:SL.bundleType,version:SL.version,rendererPackageName:SL.rendererPackageName,rendererConfig:SL.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:lp.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Kfe(n),n===null?null:n.stateNode},findFiberByHostInstance:SL.findFiberByHostInstance||JOe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wR=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wR.isDisabled&&wR.supportsFiber)try{H5=wR.inject(iFe),$h=wR}catch{}}Bc.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tFe;Bc.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zY(e))throw Error(Je(200));return QOe(n,e,null,t)};Bc.createRoot=function(n,e){if(!zY(n))throw Error(Je(299));var t=!1,i="",s=xpe;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=WY(n,1,!1,null,null,t,!1,i,s),n[Wg]=e.current,sI(n.nodeType===8?n.parentNode:n),new VY(e)};Bc.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Je(188)):(n=Object.keys(n).join(","),Error(Je(268,n)));return n=Kfe(e),n=n===null?null:n.stateNode,n};Bc.flushSync=function(n){return t0(n)};Bc.hydrate=function(n,e,t){if(!J5(e))throw Error(Je(200));return e3(null,n,e,!0,t)};Bc.hydrateRoot=function(n,e,t){if(!zY(n))throw Error(Je(405));var i=t!=null&&t.hydratedSources||null,s=!1,r="",o=xpe;if(t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=Spe(e,null,n,1,t??null,s,!1,r,o),n[Wg]=e.current,sI(n),i)for(n=0;n<i.length;n++)t=i[n],s=t._getVersion,s=s(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,s]:e.mutableSourceEagerHydrationData.push(t,s);return new Q5(e)};Bc.render=function(n,e,t){if(!J5(e))throw Error(Je(200));return e3(null,n,e,!1,t)};Bc.unmountComponentAtNode=function(n){if(!J5(n))throw Error(Je(40));return n._reactRootContainer?(t0(function(){e3(null,null,n,!1,function(){n._reactRootContainer=null,n[Wg]=null})}),!0):!1};Bc.unstable_batchedUpdates=PY;Bc.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!J5(t))throw Error(Je(200));if(n==null||n._reactInternals===void 0)throw Error(Je(38));return e3(n,e,t,!1,i)};Bc.version="18.3.1-next-f1338f8080-20240426";function Lpe(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Lpe)}catch(n){console.error(n)}}Lpe(),Lfe.exports=Bc;var F0=Lfe.exports;const kpe=GG(F0);var Epe,Ise=F0;Epe=Ise.createRoot,Ise.hydrateRoot;const nFe=1,sFe=1e6;let e9=0;function rFe(){return e9=(e9+1)%Number.MAX_SAFE_INTEGER,e9.toString()}const t9=new Map,Dse=n=>{if(t9.has(n))return;const e=setTimeout(()=>{t9.delete(n),Vk({type:"REMOVE_TOAST",toastId:n})},sFe);t9.set(n,e)},oFe=(n,e)=>{switch(e.type){case"ADD_TOAST":return{...n,toasts:[e.toast,...n.toasts].slice(0,nFe)};case"UPDATE_TOAST":return{...n,toasts:n.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?Dse(t):n.toasts.forEach(i=>{Dse(i.id)}),{...n,toasts:n.toasts.map(i=>i.id===t||t===void 0?{...i,open:!1}:i)}}case"REMOVE_TOAST":return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(t=>t.id!==e.toastId)}}},i2=[];let n2={toasts:[]};function Vk(n){n2=oFe(n2,n),i2.forEach(e=>{e(n2)})}function rg({...n}){const e=rFe(),t=s=>Vk({type:"UPDATE_TOAST",toast:{...s,id:e}}),i=()=>Vk({type:"DISMISS_TOAST",toastId:e});return Vk({type:"ADD_TOAST",toast:{...n,id:e,open:!0,onOpenChange:s=>{s||i()}}}),{id:e,dismiss:i,update:t}}function Ipe(){const[n,e]=rt.useState(n2);return rt.useEffect(()=>(i2.push(e),()=>{const t=i2.indexOf(e);t>-1&&i2.splice(t,1)}),[n]),{...n,toast:rg,dismiss:t=>Vk({type:"DISMISS_TOAST",toastId:t})}}function Dt(n,e,{checkForDefaultPrevented:t=!0}={}){return function(s){if(n==null||n(s),t===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function aFe(n,e){typeof n=="function"?n(e):n!=null&&(n.current=e)}function Dpe(...n){return e=>n.forEach(t=>aFe(t,e))}function Yi(...n){return A.useCallback(Dpe(...n),n)}function lFe(n,e=[]){let t=[];function i(r,o){const a=A.createContext(o),l=t.length;t=[...t,o];function c(u){const{scope:h,children:f,...g}=u,p=(h==null?void 0:h[n][l])||a,_=A.useMemo(()=>g,Object.values(g));return k.jsx(p.Provider,{value:_,children:f})}function d(u,h){const f=(h==null?void 0:h[n][l])||a,g=A.useContext(f);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${u}\` must be used within \`${r}\``)}return c.displayName=r+"Provider",[c,d]}const s=()=>{const r=t.map(o=>A.createContext(o));return function(a){const l=(a==null?void 0:a[n])||r;return A.useMemo(()=>({[`__scope${n}`]:{...a,[n]:l}}),[a,l])}};return s.scopeName=n,[i,cFe(s,...e)]}function cFe(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const i=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(r){const o=i.reduce((a,{useScope:l,scopeName:c})=>{const u=l(r)[`__scope${c}`];return{...a,...u}},{});return A.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}var i0=A.forwardRef((n,e)=>{const{children:t,...i}=n,s=A.Children.toArray(t),r=s.find(dFe);if(r){const o=r.props.children,a=s.map(l=>l===r?A.Children.count(o)>1?A.Children.only(null):A.isValidElement(o)?o.props.children:null:l);return k.jsx(OH,{...i,ref:e,children:A.isValidElement(o)?A.cloneElement(o,void 0,a):null})}return k.jsx(OH,{...i,ref:e,children:t})});i0.displayName="Slot";var OH=A.forwardRef((n,e)=>{const{children:t,...i}=n;if(A.isValidElement(t)){const s=hFe(t);return A.cloneElement(t,{...uFe(i,t.props),ref:e?Dpe(e,s):s})}return A.Children.count(t)>1?A.Children.only(null):null});OH.displayName="SlotClone";var Npe=({children:n})=>k.jsx(k.Fragment,{children:n});function dFe(n){return A.isValidElement(n)&&n.type===Npe}function uFe(n,e){const t={...e};for(const i in e){const s=n[i],r=e[i];/^on[A-Z]/.test(i)?s&&r?t[i]=(...a)=>{r(...a),s(...a)}:s&&(t[i]=s):i==="style"?t[i]={...s,...r}:i==="className"&&(t[i]=[s,r].filter(Boolean).join(" "))}return{...n,...t}}function hFe(n){var i,s;let e=(i=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function UY(n){const e=n+"CollectionProvider",[t,i]=lFe(e),[s,r]=t(e,{collectionRef:{current:null},itemMap:new Map}),o=f=>{const{scope:g,children:p}=f,_=rt.useRef(null),w=rt.useRef(new Map).current;return k.jsx(s,{scope:g,itemMap:w,collectionRef:_,children:p})};o.displayName=e;const a=n+"CollectionSlot",l=rt.forwardRef((f,g)=>{const{scope:p,children:_}=f,w=r(a,p),b=Yi(g,w.collectionRef);return k.jsx(i0,{ref:b,children:_})});l.displayName=a;const c=n+"CollectionItemSlot",d="data-radix-collection-item",u=rt.forwardRef((f,g)=>{const{scope:p,children:_,...w}=f,b=rt.useRef(null),y=Yi(g,b),S=r(c,p);return rt.useEffect(()=>(S.itemMap.set(b,{ref:b,...w}),()=>void S.itemMap.delete(b))),k.jsx(i0,{[d]:"",ref:y,children:_})});u.displayName=c;function h(f){const g=r(n+"CollectionConsumer",f);return rt.useCallback(()=>{const _=g.collectionRef.current;if(!_)return[];const w=Array.from(_.querySelectorAll(`[${d}]`));return Array.from(g.itemMap.values()).sort((S,x)=>w.indexOf(S.ref.current)-w.indexOf(x.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:o,Slot:l,ItemSlot:u},h,i]}function fFe(n,e){const t=A.createContext(e),i=r=>{const{children:o,...a}=r,l=A.useMemo(()=>a,Object.values(a));return k.jsx(t.Provider,{value:l,children:o})};i.displayName=n+"Provider";function s(r){const o=A.useContext(t);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${r}\` must be used within \`${n}\``)}return[i,s]}function cp(n,e=[]){let t=[];function i(r,o){const a=A.createContext(o),l=t.length;t=[...t,o];const c=u=>{var w;const{scope:h,children:f,...g}=u,p=((w=h==null?void 0:h[n])==null?void 0:w[l])||a,_=A.useMemo(()=>g,Object.values(g));return k.jsx(p.Provider,{value:_,children:f})};c.displayName=r+"Provider";function d(u,h){var p;const f=((p=h==null?void 0:h[n])==null?void 0:p[l])||a,g=A.useContext(f);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${u}\` must be used within \`${r}\``)}return[c,d]}const s=()=>{const r=t.map(o=>A.createContext(o));return function(a){const l=(a==null?void 0:a[n])||r;return A.useMemo(()=>({[`__scope${n}`]:{...a,[n]:l}}),[a,l])}};return s.scopeName=n,[i,gFe(s,...e)]}function gFe(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const i=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(r){const o=i.reduce((a,{useScope:l,scopeName:c})=>{const u=l(r)[`__scope${c}`];return{...a,...u}},{});return A.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}var pFe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Zt=pFe.reduce((n,e)=>{const t=A.forwardRef((i,s)=>{const{asChild:r,...o}=i,a=r?i0:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),k.jsx(a,{...o,ref:s})});return t.displayName=`Primitive.${e}`,{...n,[e]:t}},{});function Tpe(n,e){n&&F0.flushSync(()=>n.dispatchEvent(e))}function ir(n){const e=A.useRef(n);return A.useEffect(()=>{e.current=n}),A.useMemo(()=>(...t)=>{var i;return(i=e.current)==null?void 0:i.call(e,...t)},[])}function mFe(n,e=globalThis==null?void 0:globalThis.document){const t=ir(n);A.useEffect(()=>{const i=s=>{s.key==="Escape"&&t(s)};return e.addEventListener("keydown",i,{capture:!0}),()=>e.removeEventListener("keydown",i,{capture:!0})},[t,e])}var _Fe="DismissableLayer",FH="dismissableLayer.update",vFe="dismissableLayer.pointerDownOutside",bFe="dismissableLayer.focusOutside",Nse,Rpe=A.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),vN=A.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:r,onInteractOutside:o,onDismiss:a,...l}=n,c=A.useContext(Rpe),[d,u]=A.useState(null),h=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,f]=A.useState({}),g=Yi(e,D=>u(D)),p=Array.from(c.layers),[_]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),w=p.indexOf(_),b=d?p.indexOf(d):-1,y=c.layersWithOutsidePointerEventsDisabled.size>0,S=b>=w,x=CFe(D=>{const N=D.target,I=[...c.branches].some(H=>H.contains(N));!S||I||(s==null||s(D),o==null||o(D),D.defaultPrevented||a==null||a())},h),E=yFe(D=>{const N=D.target;[...c.branches].some(H=>H.contains(N))||(r==null||r(D),o==null||o(D),D.defaultPrevented||a==null||a())},h);return mFe(D=>{b===c.layers.size-1&&(i==null||i(D),!D.defaultPrevented&&a&&(D.preventDefault(),a()))},h),A.useEffect(()=>{if(d)return t&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(Nse=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),Tse(),()=>{t&&c.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=Nse)}},[d,h,t,c]),A.useEffect(()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),Tse())},[d,c]),A.useEffect(()=>{const D=()=>f({});return document.addEventListener(FH,D),()=>document.removeEventListener(FH,D)},[]),k.jsx(Zt.div,{...l,ref:g,style:{pointerEvents:y?S?"auto":"none":void 0,...n.style},onFocusCapture:Dt(n.onFocusCapture,E.onFocusCapture),onBlurCapture:Dt(n.onBlurCapture,E.onBlurCapture),onPointerDownCapture:Dt(n.onPointerDownCapture,x.onPointerDownCapture)})});vN.displayName=_Fe;var wFe="DismissableLayerBranch",Ape=A.forwardRef((n,e)=>{const t=A.useContext(Rpe),i=A.useRef(null),s=Yi(e,i);return A.useEffect(()=>{const r=i.current;if(r)return t.branches.add(r),()=>{t.branches.delete(r)}},[t.branches]),k.jsx(Zt.div,{...n,ref:s})});Ape.displayName=wFe;function CFe(n,e=globalThis==null?void 0:globalThis.document){const t=ir(n),i=A.useRef(!1),s=A.useRef(()=>{});return A.useEffect(()=>{const r=a=>{if(a.target&&!i.current){let l=function(){Mpe(vFe,t,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);i.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",r)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",r),e.removeEventListener("click",s.current)}},[e,t]),{onPointerDownCapture:()=>i.current=!0}}function yFe(n,e=globalThis==null?void 0:globalThis.document){const t=ir(n),i=A.useRef(!1);return A.useEffect(()=>{const s=r=>{r.target&&!i.current&&Mpe(bFe,t,{originalEvent:r},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,t]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function Tse(){const n=new CustomEvent(FH);document.dispatchEvent(n)}function Mpe(n,e,t,{discrete:i}){const s=t.originalEvent.target,r=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),i?Tpe(s,r):s.dispatchEvent(r)}var SFe=vN,xFe=Ape,co=globalThis!=null&&globalThis.document?A.useLayoutEffect:()=>{},LFe="Portal",t3=A.forwardRef((n,e)=>{var a;const{container:t,...i}=n,[s,r]=A.useState(!1);co(()=>r(!0),[]);const o=t||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?kpe.createPortal(k.jsx(Zt.div,{...i,ref:e}),o):null});t3.displayName=LFe;function kFe(n,e){return A.useReducer((t,i)=>e[t][i]??t,n)}var Hc=n=>{const{present:e,children:t}=n,i=EFe(e),s=typeof t=="function"?t({present:i.isPresent}):A.Children.only(t),r=Yi(i.ref,IFe(s));return typeof t=="function"||i.isPresent?A.cloneElement(s,{ref:r}):null};Hc.displayName="Presence";function EFe(n){const[e,t]=A.useState(),i=A.useRef({}),s=A.useRef(n),r=A.useRef("none"),o=n?"mounted":"unmounted",[a,l]=kFe(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return A.useEffect(()=>{const c=CR(i.current);r.current=a==="mounted"?c:"none"},[a]),co(()=>{const c=i.current,d=s.current;if(d!==n){const h=r.current,f=CR(c);n?l("MOUNT"):f==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(d&&h!==f?"ANIMATION_OUT":"UNMOUNT"),s.current=n}},[n,l]),co(()=>{if(e){let c;const d=e.ownerDocument.defaultView??window,u=f=>{const p=CR(i.current).includes(f.animationName);if(f.target===e&&p&&(l("ANIMATION_END"),!s.current)){const _=e.style.animationFillMode;e.style.animationFillMode="forwards",c=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=_)})}},h=f=>{f.target===e&&(r.current=CR(i.current))};return e.addEventListener("animationstart",h),e.addEventListener("animationcancel",u),e.addEventListener("animationend",u),()=>{d.clearTimeout(c),e.removeEventListener("animationstart",h),e.removeEventListener("animationcancel",u),e.removeEventListener("animationend",u)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:A.useCallback(c=>{c&&(i.current=getComputedStyle(c)),t(c)},[])}}function CR(n){return(n==null?void 0:n.animationName)||"none"}function IFe(n){var i,s;let e=(i=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function ef({prop:n,defaultProp:e,onChange:t=()=>{}}){const[i,s]=DFe({defaultProp:e,onChange:t}),r=n!==void 0,o=r?n:i,a=ir(t),l=A.useCallback(c=>{if(r){const u=typeof c=="function"?c(n):c;u!==n&&a(u)}else s(c)},[r,n,s,a]);return[o,l]}function DFe({defaultProp:n,onChange:e}){const t=A.useState(n),[i]=t,s=A.useRef(i),r=ir(e);return A.useEffect(()=>{s.current!==i&&(r(i),s.current=i)},[i,s,r]),t}var NFe="VisuallyHidden",bN=A.forwardRef((n,e)=>k.jsx(Zt.span,{...n,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...n.style}}));bN.displayName=NFe;var TFe=bN,$Y="ToastProvider",[jY,RFe,AFe]=UY("Toast"),[Ppe,yEt]=cp("Toast",[AFe]),[MFe,i3]=Ppe($Y),Ope=n=>{const{__scopeToast:e,label:t="Notification",duration:i=5e3,swipeDirection:s="right",swipeThreshold:r=50,children:o}=n,[a,l]=A.useState(null),[c,d]=A.useState(0),u=A.useRef(!1),h=A.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${$Y}\`. Expected non-empty \`string\`.`),k.jsx(jY.Provider,{scope:e,children:k.jsx(MFe,{scope:e,label:t,duration:i,swipeDirection:s,swipeThreshold:r,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:A.useCallback(()=>d(f=>f+1),[]),onToastRemove:A.useCallback(()=>d(f=>f-1),[]),isFocusedToastEscapeKeyDownRef:u,isClosePausedRef:h,children:o})})};Ope.displayName=$Y;var Fpe="ToastViewport",PFe=["F8"],BH="toast.viewportPause",WH="toast.viewportResume",Bpe=A.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:i=PFe,label:s="Notifications ({hotkey})",...r}=n,o=i3(Fpe,t),a=RFe(t),l=A.useRef(null),c=A.useRef(null),d=A.useRef(null),u=A.useRef(null),h=Yi(e,u,o.onViewportChange),f=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=o.toastCount>0;A.useEffect(()=>{const _=w=>{var y;i.length!==0&&i.every(S=>w[S]||w.code===S)&&((y=u.current)==null||y.focus())};return document.addEventListener("keydown",_),()=>document.removeEventListener("keydown",_)},[i]),A.useEffect(()=>{const _=l.current,w=u.current;if(g&&_&&w){const b=()=>{if(!o.isClosePausedRef.current){const E=new CustomEvent(BH);w.dispatchEvent(E),o.isClosePausedRef.current=!0}},y=()=>{if(o.isClosePausedRef.current){const E=new CustomEvent(WH);w.dispatchEvent(E),o.isClosePausedRef.current=!1}},S=E=>{!_.contains(E.relatedTarget)&&y()},x=()=>{_.contains(document.activeElement)||y()};return _.addEventListener("focusin",b),_.addEventListener("focusout",S),_.addEventListener("pointermove",b),_.addEventListener("pointerleave",x),window.addEventListener("blur",b),window.addEventListener("focus",y),()=>{_.removeEventListener("focusin",b),_.removeEventListener("focusout",S),_.removeEventListener("pointermove",b),_.removeEventListener("pointerleave",x),window.removeEventListener("blur",b),window.removeEventListener("focus",y)}}},[g,o.isClosePausedRef]);const p=A.useCallback(({tabbingDirection:_})=>{const b=a().map(y=>{const S=y.ref.current,x=[S,...GFe(S)];return _==="forwards"?x:x.reverse()});return(_==="forwards"?b.reverse():b).flat()},[a]);return A.useEffect(()=>{const _=u.current;if(_){const w=b=>{var x,E,D;const y=b.altKey||b.ctrlKey||b.metaKey;if(b.key==="Tab"&&!y){const N=document.activeElement,I=b.shiftKey;if(b.target===_&&I){(x=c.current)==null||x.focus();return}const G=p({tabbingDirection:I?"backwards":"forwards"}),J=G.findIndex(j=>j===N);i9(G.slice(J+1))?b.preventDefault():I?(E=c.current)==null||E.focus():(D=d.current)==null||D.focus()}};return _.addEventListener("keydown",w),()=>_.removeEventListener("keydown",w)}},[a,p]),k.jsxs(xFe,{ref:l,role:"region","aria-label":s.replace("{hotkey}",f),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&k.jsx(HH,{ref:c,onFocusFromOutsideViewport:()=>{const _=p({tabbingDirection:"forwards"});i9(_)}}),k.jsx(jY.Slot,{scope:t,children:k.jsx(Zt.ol,{tabIndex:-1,...r,ref:h})}),g&&k.jsx(HH,{ref:d,onFocusFromOutsideViewport:()=>{const _=p({tabbingDirection:"backwards"});i9(_)}})]})});Bpe.displayName=Fpe;var Wpe="ToastFocusProxy",HH=A.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:i,...s}=n,r=i3(Wpe,t);return k.jsx(bN,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=r.viewport)!=null&&c.contains(a))&&i()}})});HH.displayName=Wpe;var n3="Toast",OFe="toast.swipeStart",FFe="toast.swipeMove",BFe="toast.swipeCancel",WFe="toast.swipeEnd",Hpe=A.forwardRef((n,e)=>{const{forceMount:t,open:i,defaultOpen:s,onOpenChange:r,...o}=n,[a=!0,l]=ef({prop:i,defaultProp:s,onChange:r});return k.jsx(Hc,{present:t||a,children:k.jsx(zFe,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:ir(n.onPause),onResume:ir(n.onResume),onSwipeStart:Dt(n.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Dt(n.onSwipeMove,c=>{const{x:d,y:u}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${u}px`)}),onSwipeCancel:Dt(n.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Dt(n.onSwipeEnd,c=>{const{x:d,y:u}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${u}px`),l(!1)})})})});Hpe.displayName=n3;var[HFe,VFe]=Ppe(n3,{onClose(){}}),zFe=A.forwardRef((n,e)=>{const{__scopeToast:t,type:i="foreground",duration:s,open:r,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:d,onSwipeMove:u,onSwipeCancel:h,onSwipeEnd:f,...g}=n,p=i3(n3,t),[_,w]=A.useState(null),b=Yi(e,j=>w(j)),y=A.useRef(null),S=A.useRef(null),x=s||p.duration,E=A.useRef(0),D=A.useRef(x),N=A.useRef(0),{onToastAdd:I,onToastRemove:H}=p,z=ir(()=>{var ne;(_==null?void 0:_.contains(document.activeElement))&&((ne=p.viewport)==null||ne.focus()),o()}),G=A.useCallback(j=>{!j||j===1/0||(window.clearTimeout(N.current),E.current=new Date().getTime(),N.current=window.setTimeout(z,j))},[z]);A.useEffect(()=>{const j=p.viewport;if(j){const ne=()=>{G(D.current),c==null||c()},oe=()=>{const ve=new Date().getTime()-E.current;D.current=D.current-ve,window.clearTimeout(N.current),l==null||l()};return j.addEventListener(BH,oe),j.addEventListener(WH,ne),()=>{j.removeEventListener(BH,oe),j.removeEventListener(WH,ne)}}},[p.viewport,x,l,c,G]),A.useEffect(()=>{r&&!p.isClosePausedRef.current&&G(x)},[r,x,p.isClosePausedRef,G]),A.useEffect(()=>(I(),()=>H()),[I,H]);const J=A.useMemo(()=>_?qpe(_):null,[_]);return p.viewport?k.jsxs(k.Fragment,{children:[J&&k.jsx(UFe,{__scopeToast:t,role:"status","aria-live":i==="foreground"?"assertive":"polite","aria-atomic":!0,children:J}),k.jsx(HFe,{scope:t,onClose:z,children:F0.createPortal(k.jsx(jY.ItemSlot,{scope:t,children:k.jsx(SFe,{asChild:!0,onEscapeKeyDown:Dt(a,()=>{p.isFocusedToastEscapeKeyDownRef.current||z(),p.isFocusedToastEscapeKeyDownRef.current=!1}),children:k.jsx(Zt.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":r?"open":"closed","data-swipe-direction":p.swipeDirection,...g,ref:b,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:Dt(n.onKeyDown,j=>{j.key==="Escape"&&(a==null||a(j.nativeEvent),j.nativeEvent.defaultPrevented||(p.isFocusedToastEscapeKeyDownRef.current=!0,z()))}),onPointerDown:Dt(n.onPointerDown,j=>{j.button===0&&(y.current={x:j.clientX,y:j.clientY})}),onPointerMove:Dt(n.onPointerMove,j=>{if(!y.current)return;const ne=j.clientX-y.current.x,oe=j.clientY-y.current.y,ve=!!S.current,te=["left","right"].includes(p.swipeDirection),ce=["left","up"].includes(p.swipeDirection)?Math.min:Math.max,Ie=te?ce(0,ne):0,Ce=te?0:ce(0,oe),it=j.pointerType==="touch"?10:2,He={x:Ie,y:Ce},dt={originalEvent:j,delta:He};ve?(S.current=He,yR(FFe,u,dt,{discrete:!1})):Rse(He,p.swipeDirection,it)?(S.current=He,yR(OFe,d,dt,{discrete:!1}),j.target.setPointerCapture(j.pointerId)):(Math.abs(ne)>it||Math.abs(oe)>it)&&(y.current=null)}),onPointerUp:Dt(n.onPointerUp,j=>{const ne=S.current,oe=j.target;if(oe.hasPointerCapture(j.pointerId)&&oe.releasePointerCapture(j.pointerId),S.current=null,y.current=null,ne){const ve=j.currentTarget,te={originalEvent:j,delta:ne};Rse(ne,p.swipeDirection,p.swipeThreshold)?yR(WFe,f,te,{discrete:!0}):yR(BFe,h,te,{discrete:!0}),ve.addEventListener("click",ce=>ce.preventDefault(),{once:!0})}})})})}),p.viewport)})]}):null}),UFe=n=>{const{__scopeToast:e,children:t,...i}=n,s=i3(n3,e),[r,o]=A.useState(!1),[a,l]=A.useState(!1);return KFe(()=>o(!0)),A.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:k.jsx(t3,{asChild:!0,children:k.jsx(bN,{...i,children:r&&k.jsxs(k.Fragment,{children:[s.label," ",t]})})})},$Fe="ToastTitle",Vpe=A.forwardRef((n,e)=>{const{__scopeToast:t,...i}=n;return k.jsx(Zt.div,{...i,ref:e})});Vpe.displayName=$Fe;var jFe="ToastDescription",zpe=A.forwardRef((n,e)=>{const{__scopeToast:t,...i}=n;return k.jsx(Zt.div,{...i,ref:e})});zpe.displayName=jFe;var Upe="ToastAction",$pe=A.forwardRef((n,e)=>{const{altText:t,...i}=n;return t.trim()?k.jsx(Kpe,{altText:t,asChild:!0,children:k.jsx(KY,{...i,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${Upe}\`. Expected non-empty \`string\`.`),null)});$pe.displayName=Upe;var jpe="ToastClose",KY=A.forwardRef((n,e)=>{const{__scopeToast:t,...i}=n,s=VFe(jpe,t);return k.jsx(Kpe,{asChild:!0,children:k.jsx(Zt.button,{type:"button",...i,ref:e,onClick:Dt(n.onClick,s.onClose)})})});KY.displayName=jpe;var Kpe=A.forwardRef((n,e)=>{const{__scopeToast:t,altText:i,...s}=n;return k.jsx(Zt.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":i||void 0,...s,ref:e})});function qpe(n){const e=[];return Array.from(n.childNodes).forEach(i=>{if(i.nodeType===i.TEXT_NODE&&i.textContent&&e.push(i.textContent),qFe(i)){const s=i.ariaHidden||i.hidden||i.style.display==="none",r=i.dataset.radixToastAnnounceExclude==="";if(!s)if(r){const o=i.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...qpe(i))}}),e}function yR(n,e,t,{discrete:i}){const s=t.originalEvent.currentTarget,r=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),i?Tpe(s,r):s.dispatchEvent(r)}var Rse=(n,e,t=0)=>{const i=Math.abs(n.x),s=Math.abs(n.y),r=i>s;return e==="left"||e==="right"?r&&i>t:!r&&s>t};function KFe(n=()=>{}){const e=ir(n);co(()=>{let t=0,i=0;return t=window.requestAnimationFrame(()=>i=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(i)}},[e])}function qFe(n){return n.nodeType===n.ELEMENT_NODE}function GFe(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const s=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||s?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function i9(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var YFe=Ope,Gpe=Bpe,Ype=Hpe,Zpe=Vpe,Xpe=zpe,Qpe=$pe,Jpe=KY;function eme(n){var e,t,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=eme(n[e]))&&(i&&(i+=" "),i+=t)}else for(t in n)n[t]&&(i&&(i+=" "),i+=t);return i}function tme(){for(var n,e,t=0,i="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=eme(n))&&(i&&(i+=" "),i+=e);return i}const Ase=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,Mse=tme,s3=(n,e)=>t=>{var i;if((e==null?void 0:e.variants)==null)return Mse(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:s,defaultVariants:r}=e,o=Object.keys(s).map(c=>{const d=t==null?void 0:t[c],u=r==null?void 0:r[c];if(d===null)return null;const h=Ase(d)||Ase(u);return s[c][h]}),a=t&&Object.entries(t).reduce((c,d)=>{let[u,h]=d;return h===void 0||(c[u]=h),c},{}),l=e==null||(i=e.compoundVariants)===null||i===void 0?void 0:i.reduce((c,d)=>{let{class:u,className:h,...f}=d;return Object.entries(f).every(g=>{let[p,_]=g;return Array.isArray(_)?_.includes({...r,...a}[p]):{...r,...a}[p]===_})?[...c,u,h]:c},[]);return Mse(n,o,l,t==null?void 0:t.class,t==null?void 0:t.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZFe=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ime=(...n)=>n.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var XFe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QFe=A.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:s="",children:r,iconNode:o,...a},l)=>A.createElement("svg",{ref:l,...XFe,width:e,height:e,stroke:n,strokeWidth:i?Number(t)*24/Number(e):t,className:ime("lucide",s),...a},[...o.map(([c,d])=>A.createElement(c,d)),...Array.isArray(r)?r:[r]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=(n,e)=>{const t=A.forwardRef(({className:i,...s},r)=>A.createElement(QFe,{ref:r,iconNode:e,className:ime(`lucide-${ZFe(n)}`,i),...s}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JFe=bs("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nme=bs("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zk=bs("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n9=bs("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e4e=bs("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t4e=bs("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i4e=bs("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n4e=bs("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s4e=bs("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r4e=bs("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o4e=bs("FileCode",[["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s2=bs("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a4e=bs("FileWarning",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l4e=bs("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pse=bs("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lc=bs("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c4e=bs("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d4e=bs("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ose=bs("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u4e=bs("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h4e=bs("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f4e=bs("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fse=bs("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sd=bs("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),qY="-",g4e=n=>{const e=m4e(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:i}=n;return{getClassGroupId:o=>{const a=o.split(qY);return a[0]===""&&a.length!==1&&a.shift(),sme(a,e)||p4e(o)},getConflictingClassGroupIds:(o,a)=>{const l=t[o]||[];return a&&i[o]?[...l,...i[o]]:l}}},sme=(n,e)=>{var o;if(n.length===0)return e.classGroupId;const t=n[0],i=e.nextPart.get(t),s=i?sme(n.slice(1),i):void 0;if(s)return s;if(e.validators.length===0)return;const r=n.join(qY);return(o=e.validators.find(({validator:a})=>a(r)))==null?void 0:o.classGroupId},Bse=/^\[(.+)\]$/,p4e=n=>{if(Bse.test(n)){const e=Bse.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},m4e=n=>{const{theme:e,prefix:t}=n,i={nextPart:new Map,validators:[]};return v4e(Object.entries(n.classGroups),t).forEach(([r,o])=>{VH(o,i,r,e)}),i},VH=(n,e,t,i)=>{n.forEach(s=>{if(typeof s=="string"){const r=s===""?e:Wse(e,s);r.classGroupId=t;return}if(typeof s=="function"){if(_4e(s)){VH(s(i),e,t,i);return}e.validators.push({validator:s,classGroupId:t});return}Object.entries(s).forEach(([r,o])=>{VH(o,Wse(e,r),t,i)})})},Wse=(n,e)=>{let t=n;return e.split(qY).forEach(i=>{t.nextPart.has(i)||t.nextPart.set(i,{nextPart:new Map,validators:[]}),t=t.nextPart.get(i)}),t},_4e=n=>n.isThemeGetter,v4e=(n,e)=>e?n.map(([t,i])=>{const s=i.map(r=>typeof r=="string"?e+r:typeof r=="object"?Object.fromEntries(Object.entries(r).map(([o,a])=>[e+o,a])):r);return[t,s]}):n,b4e=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,i=new Map;const s=(r,o)=>{t.set(r,o),e++,e>n&&(e=0,i=t,t=new Map)};return{get(r){let o=t.get(r);if(o!==void 0)return o;if((o=i.get(r))!==void 0)return s(r,o),o},set(r,o){t.has(r)?t.set(r,o):s(r,o)}}},rme="!",w4e=n=>{const{separator:e,experimentalParseClassName:t}=n,i=e.length===1,s=e[0],r=e.length,o=a=>{const l=[];let c=0,d=0,u;for(let _=0;_<a.length;_++){let w=a[_];if(c===0){if(w===s&&(i||a.slice(_,_+r)===e)){l.push(a.slice(d,_)),d=_+r;continue}if(w==="/"){u=_;continue}}w==="["?c++:w==="]"&&c--}const h=l.length===0?a:a.substring(d),f=h.startsWith(rme),g=f?h.substring(1):h,p=u&&u>d?u-d:void 0;return{modifiers:l,hasImportantModifier:f,baseClassName:g,maybePostfixModifierPosition:p}};return t?a=>t({className:a,parseClassName:o}):o},C4e=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(i=>{i[0]==="["?(e.push(...t.sort(),i),t=[]):t.push(i)}),e.push(...t.sort()),e},y4e=n=>({cache:b4e(n.cacheSize),parseClassName:w4e(n),...g4e(n)}),S4e=/\s+/,x4e=(n,e)=>{const{parseClassName:t,getClassGroupId:i,getConflictingClassGroupIds:s}=e,r=[],o=n.trim().split(S4e);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:d,hasImportantModifier:u,baseClassName:h,maybePostfixModifierPosition:f}=t(c);let g=!!f,p=i(g?h.substring(0,f):h);if(!p){if(!g){a=c+(a.length>0?" "+a:a);continue}if(p=i(h),!p){a=c+(a.length>0?" "+a:a);continue}g=!1}const _=C4e(d).join(":"),w=u?_+rme:_,b=w+p;if(r.includes(b))continue;r.push(b);const y=s(p,g);for(let S=0;S<y.length;++S){const x=y[S];r.push(w+x)}a=c+(a.length>0?" "+a:a)}return a};function L4e(){let n=0,e,t,i="";for(;n<arguments.length;)(e=arguments[n++])&&(t=ome(e))&&(i&&(i+=" "),i+=t);return i}const ome=n=>{if(typeof n=="string")return n;let e,t="";for(let i=0;i<n.length;i++)n[i]&&(e=ome(n[i]))&&(t&&(t+=" "),t+=e);return t};function k4e(n,...e){let t,i,s,r=o;function o(l){const c=e.reduce((d,u)=>u(d),n());return t=y4e(c),i=t.cache.get,s=t.cache.set,r=a,a(l)}function a(l){const c=i(l);if(c)return c;const d=x4e(l,t);return s(l,d),d}return function(){return r(L4e.apply(null,arguments))}}const cs=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},ame=/^\[(?:([a-z-]+):)?(.+)\]$/i,E4e=/^\d+\/\d+$/,I4e=new Set(["px","full","screen"]),D4e=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,N4e=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,T4e=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,R4e=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,A4e=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Af=n=>fy(n)||I4e.has(n)||E4e.test(n),Ep=n=>vx(n,"length",V4e),fy=n=>!!n&&!Number.isNaN(Number(n)),s9=n=>vx(n,"number",fy),xL=n=>!!n&&Number.isInteger(Number(n)),M4e=n=>n.endsWith("%")&&fy(n.slice(0,-1)),wi=n=>ame.test(n),Ip=n=>D4e.test(n),P4e=new Set(["length","size","percentage"]),O4e=n=>vx(n,P4e,lme),F4e=n=>vx(n,"position",lme),B4e=new Set(["image","url"]),W4e=n=>vx(n,B4e,U4e),H4e=n=>vx(n,"",z4e),LL=()=>!0,vx=(n,e,t)=>{const i=ame.exec(n);return i?i[1]?typeof e=="string"?i[1]===e:e.has(i[1]):t(i[2]):!1},V4e=n=>N4e.test(n)&&!T4e.test(n),lme=()=>!1,z4e=n=>R4e.test(n),U4e=n=>A4e.test(n),$4e=()=>{const n=cs("colors"),e=cs("spacing"),t=cs("blur"),i=cs("brightness"),s=cs("borderColor"),r=cs("borderRadius"),o=cs("borderSpacing"),a=cs("borderWidth"),l=cs("contrast"),c=cs("grayscale"),d=cs("hueRotate"),u=cs("invert"),h=cs("gap"),f=cs("gradientColorStops"),g=cs("gradientColorStopPositions"),p=cs("inset"),_=cs("margin"),w=cs("opacity"),b=cs("padding"),y=cs("saturate"),S=cs("scale"),x=cs("sepia"),E=cs("skew"),D=cs("space"),N=cs("translate"),I=()=>["auto","contain","none"],H=()=>["auto","hidden","clip","visible","scroll"],z=()=>["auto",wi,e],G=()=>[wi,e],J=()=>["",Af,Ep],j=()=>["auto",fy,wi],ne=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],oe=()=>["solid","dashed","dotted","double","none"],ve=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],te=()=>["start","end","center","between","around","evenly","stretch"],ce=()=>["","0",wi],Ie=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Ce=()=>[fy,wi];return{cacheSize:500,separator:":",theme:{colors:[LL],spacing:[Af,Ep],blur:["none","",Ip,wi],brightness:Ce(),borderColor:[n],borderRadius:["none","","full",Ip,wi],borderSpacing:G(),borderWidth:J(),contrast:Ce(),grayscale:ce(),hueRotate:Ce(),invert:ce(),gap:G(),gradientColorStops:[n],gradientColorStopPositions:[M4e,Ep],inset:z(),margin:z(),opacity:Ce(),padding:G(),saturate:Ce(),scale:Ce(),sepia:ce(),skew:Ce(),space:G(),translate:G()},classGroups:{aspect:[{aspect:["auto","square","video",wi]}],container:["container"],columns:[{columns:[Ip]}],"break-after":[{"break-after":Ie()}],"break-before":[{"break-before":Ie()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ne(),wi]}],overflow:[{overflow:H()}],"overflow-x":[{"overflow-x":H()}],"overflow-y":[{"overflow-y":H()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[p]}],"inset-x":[{"inset-x":[p]}],"inset-y":[{"inset-y":[p]}],start:[{start:[p]}],end:[{end:[p]}],top:[{top:[p]}],right:[{right:[p]}],bottom:[{bottom:[p]}],left:[{left:[p]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",xL,wi]}],basis:[{basis:z()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",wi]}],grow:[{grow:ce()}],shrink:[{shrink:ce()}],order:[{order:["first","last","none",xL,wi]}],"grid-cols":[{"grid-cols":[LL]}],"col-start-end":[{col:["auto",{span:["full",xL,wi]},wi]}],"col-start":[{"col-start":j()}],"col-end":[{"col-end":j()}],"grid-rows":[{"grid-rows":[LL]}],"row-start-end":[{row:["auto",{span:[xL,wi]},wi]}],"row-start":[{"row-start":j()}],"row-end":[{"row-end":j()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",wi]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",wi]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...te()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...te(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...te(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[_]}],mx:[{mx:[_]}],my:[{my:[_]}],ms:[{ms:[_]}],me:[{me:[_]}],mt:[{mt:[_]}],mr:[{mr:[_]}],mb:[{mb:[_]}],ml:[{ml:[_]}],"space-x":[{"space-x":[D]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[D]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",wi,e]}],"min-w":[{"min-w":[wi,e,"min","max","fit"]}],"max-w":[{"max-w":[wi,e,"none","full","min","max","fit","prose",{screen:[Ip]},Ip]}],h:[{h:[wi,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[wi,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[wi,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[wi,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Ip,Ep]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",s9]}],"font-family":[{font:[LL]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",wi]}],"line-clamp":[{"line-clamp":["none",fy,s9]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Af,wi]}],"list-image":[{"list-image":["none",wi]}],"list-style-type":[{list:["none","disc","decimal",wi]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[w]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[w]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...oe(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Af,Ep]}],"underline-offset":[{"underline-offset":["auto",Af,wi]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:G()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",wi]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",wi]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[w]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ne(),F4e]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",O4e]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},W4e]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[g]}],"gradient-via-pos":[{via:[g]}],"gradient-to-pos":[{to:[g]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[r]}],"rounded-s":[{"rounded-s":[r]}],"rounded-e":[{"rounded-e":[r]}],"rounded-t":[{"rounded-t":[r]}],"rounded-r":[{"rounded-r":[r]}],"rounded-b":[{"rounded-b":[r]}],"rounded-l":[{"rounded-l":[r]}],"rounded-ss":[{"rounded-ss":[r]}],"rounded-se":[{"rounded-se":[r]}],"rounded-ee":[{"rounded-ee":[r]}],"rounded-es":[{"rounded-es":[r]}],"rounded-tl":[{"rounded-tl":[r]}],"rounded-tr":[{"rounded-tr":[r]}],"rounded-br":[{"rounded-br":[r]}],"rounded-bl":[{"rounded-bl":[r]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[w]}],"border-style":[{border:[...oe(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[w]}],"divide-style":[{divide:oe()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...oe()]}],"outline-offset":[{"outline-offset":[Af,wi]}],"outline-w":[{outline:[Af,Ep]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:J()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[w]}],"ring-offset-w":[{"ring-offset":[Af,Ep]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",Ip,H4e]}],"shadow-color":[{shadow:[LL]}],opacity:[{opacity:[w]}],"mix-blend":[{"mix-blend":[...ve(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":ve()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[i]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Ip,wi]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[u]}],saturate:[{saturate:[y]}],sepia:[{sepia:[x]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[i]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[u]}],"backdrop-opacity":[{"backdrop-opacity":[w]}],"backdrop-saturate":[{"backdrop-saturate":[y]}],"backdrop-sepia":[{"backdrop-sepia":[x]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",wi]}],duration:[{duration:Ce()}],ease:[{ease:["linear","in","out","in-out",wi]}],delay:[{delay:Ce()}],animate:[{animate:["none","spin","ping","pulse","bounce",wi]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[S]}],"scale-x":[{"scale-x":[S]}],"scale-y":[{"scale-y":[S]}],rotate:[{rotate:[xL,wi]}],"translate-x":[{"translate-x":[N]}],"translate-y":[{"translate-y":[N]}],"skew-x":[{"skew-x":[E]}],"skew-y":[{"skew-y":[E]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",wi]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",wi]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":G()}],"scroll-mx":[{"scroll-mx":G()}],"scroll-my":[{"scroll-my":G()}],"scroll-ms":[{"scroll-ms":G()}],"scroll-me":[{"scroll-me":G()}],"scroll-mt":[{"scroll-mt":G()}],"scroll-mr":[{"scroll-mr":G()}],"scroll-mb":[{"scroll-mb":G()}],"scroll-ml":[{"scroll-ml":G()}],"scroll-p":[{"scroll-p":G()}],"scroll-px":[{"scroll-px":G()}],"scroll-py":[{"scroll-py":G()}],"scroll-ps":[{"scroll-ps":G()}],"scroll-pe":[{"scroll-pe":G()}],"scroll-pt":[{"scroll-pt":G()}],"scroll-pr":[{"scroll-pr":G()}],"scroll-pb":[{"scroll-pb":G()}],"scroll-pl":[{"scroll-pl":G()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",wi]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[Af,Ep,s9]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},j4e=k4e($4e);function vi(...n){return j4e(tme(n))}const K4e=YFe,cme=A.forwardRef(({className:n,...e},t)=>k.jsx(Gpe,{ref:t,className:vi("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...e}));cme.displayName=Gpe.displayName;const q4e=s3("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),dme=A.forwardRef(({className:n,variant:e,...t},i)=>k.jsx(Ype,{ref:i,className:vi(q4e({variant:e}),n),...t}));dme.displayName=Ype.displayName;const G4e=A.forwardRef(({className:n,...e},t)=>k.jsx(Qpe,{ref:t,className:vi("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...e}));G4e.displayName=Qpe.displayName;const ume=A.forwardRef(({className:n,...e},t)=>k.jsx(Jpe,{ref:t,className:vi("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:k.jsx(Sd,{className:"h-4 w-4"})}));ume.displayName=Jpe.displayName;const hme=A.forwardRef(({className:n,...e},t)=>k.jsx(Zpe,{ref:t,className:vi("text-sm font-semibold",n),...e}));hme.displayName=Zpe.displayName;const fme=A.forwardRef(({className:n,...e},t)=>k.jsx(Xpe,{ref:t,className:vi("text-sm opacity-90",n),...e}));fme.displayName=Xpe.displayName;function Y4e(){const{toasts:n}=Ipe();return k.jsxs(K4e,{children:[n.map(function({id:e,title:t,description:i,action:s,...r}){return k.jsxs(dme,{...r,children:[k.jsxs("div",{className:"grid gap-1",children:[t&&k.jsx(hme,{children:t}),i&&k.jsx(fme,{children:i})]}),s,k.jsx(ume,{})]},e)}),k.jsx(cme,{})]})}var Hse=["light","dark"],Z4e="(prefers-color-scheme: dark)",X4e=A.createContext(void 0),Q4e={setTheme:n=>{},themes:[]},J4e=()=>{var n;return(n=A.useContext(X4e))!=null?n:Q4e};A.memo(({forcedTheme:n,storageKey:e,attribute:t,enableSystem:i,enableColorScheme:s,defaultTheme:r,value:o,attrs:a,nonce:l})=>{let c=r==="system",d=t==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(g=>`'${g}'`).join(",")})`};`:`var d=document.documentElement,n='${t}',s='setAttribute';`,u=s?Hse.includes(r)&&r?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${r}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",h=(g,p=!1,_=!0)=>{let w=o?o[g]:g,b=p?g+"|| ''":`'${w}'`,y="";return s&&_&&!p&&Hse.includes(g)&&(y+=`d.style.colorScheme = '${g}';`),t==="class"?p||w?y+=`c.add(${b})`:y+="null":w&&(y+=`d[s](n,${b})`),y},f=n?`!function(){${d}${h(n)}}()`:i?`!function(){try{${d}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${c})){var t='${Z4e}',m=window.matchMedia(t);if(m.media!==t||m.matches){${h("dark")}}else{${h("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${h(o?"x[e]":"e",!0)}}${c?"":"else{"+h(r,!1,!1)+"}"}${u}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${h(o?"x[e]":"e",!0)}}else{${h(r,!1,!1)};}${u}}catch(t){}}();`;return A.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:f}})});var e5e=n=>{switch(n){case"success":return n5e;case"info":return r5e;case"warning":return s5e;case"error":return o5e;default:return null}},t5e=Array(12).fill(0),i5e=({visible:n})=>rt.createElement("div",{className:"sonner-loading-wrapper","data-visible":n},rt.createElement("div",{className:"sonner-spinner"},t5e.map((e,t)=>rt.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${t}`})))),n5e=rt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},rt.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),s5e=rt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},rt.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),r5e=rt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},rt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),o5e=rt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},rt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),a5e=()=>{let[n,e]=rt.useState(document.hidden);return rt.useEffect(()=>{let t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),n},zH=1,l5e=class{constructor(){this.subscribe=n=>(this.subscribers.push(n),()=>{let e=this.subscribers.indexOf(n);this.subscribers.splice(e,1)}),this.publish=n=>{this.subscribers.forEach(e=>e(n))},this.addToast=n=>{this.publish(n),this.toasts=[...this.toasts,n]},this.create=n=>{var e;let{message:t,...i}=n,s=typeof(n==null?void 0:n.id)=="number"||((e=n.id)==null?void 0:e.length)>0?n.id:zH++,r=this.toasts.find(a=>a.id===s),o=n.dismissible===void 0?!0:n.dismissible;return r?this.toasts=this.toasts.map(a=>a.id===s?(this.publish({...a,...n,id:s,title:t}),{...a,...n,id:s,dismissible:o,title:t}):a):this.addToast({title:t,...i,dismissible:o,id:s}),s},this.dismiss=n=>(n||this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:n,dismiss:!0})),n),this.message=(n,e)=>this.create({...e,message:n}),this.error=(n,e)=>this.create({...e,message:n,type:"error"}),this.success=(n,e)=>this.create({...e,type:"success",message:n}),this.info=(n,e)=>this.create({...e,type:"info",message:n}),this.warning=(n,e)=>this.create({...e,type:"warning",message:n}),this.loading=(n,e)=>this.create({...e,type:"loading",message:n}),this.promise=(n,e)=>{if(!e)return;let t;e.loading!==void 0&&(t=this.create({...e,promise:n,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let i=n instanceof Promise?n:n(),s=t!==void 0;return i.then(async r=>{if(d5e(r)&&!r.ok){s=!1;let o=typeof e.error=="function"?await e.error(`HTTP error! status: ${r.status}`):e.error,a=typeof e.description=="function"?await e.description(`HTTP error! status: ${r.status}`):e.description;this.create({id:t,type:"error",message:o,description:a})}else if(e.success!==void 0){s=!1;let o=typeof e.success=="function"?await e.success(r):e.success,a=typeof e.description=="function"?await e.description(r):e.description;this.create({id:t,type:"success",message:o,description:a})}}).catch(async r=>{if(e.error!==void 0){s=!1;let o=typeof e.error=="function"?await e.error(r):e.error,a=typeof e.description=="function"?await e.description(r):e.description;this.create({id:t,type:"error",message:o,description:a})}}).finally(()=>{var r;s&&(this.dismiss(t),t=void 0),(r=e.finally)==null||r.call(e)}),t},this.custom=(n,e)=>{let t=(e==null?void 0:e.id)||zH++;return this.create({jsx:n(t),id:t,...e}),t},this.subscribers=[],this.toasts=[]}},dc=new l5e,c5e=(n,e)=>{let t=(e==null?void 0:e.id)||zH++;return dc.addToast({title:n,...e,id:t}),t},d5e=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",u5e=c5e,h5e=()=>dc.toasts;Object.assign(u5e,{success:dc.success,info:dc.info,warning:dc.warning,error:dc.error,custom:dc.custom,message:dc.message,promise:dc.promise,dismiss:dc.dismiss,loading:dc.loading},{getHistory:h5e});function f5e(n,{insertAt:e}={}){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",e==="top"&&t.firstChild?t.insertBefore(i,t.firstChild):t.appendChild(i),i.styleSheet?i.styleSheet.cssText=n:i.appendChild(document.createTextNode(n))}f5e(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function SR(n){return n.label!==void 0}var g5e=3,p5e="32px",m5e=4e3,_5e=356,v5e=14,b5e=20,w5e=200;function C5e(...n){return n.filter(Boolean).join(" ")}var y5e=n=>{var e,t,i,s,r,o,a,l,c,d;let{invert:u,toast:h,unstyled:f,interacting:g,setHeights:p,visibleToasts:_,heights:w,index:b,toasts:y,expanded:S,removeToast:x,defaultRichColors:E,closeButton:D,style:N,cancelButtonStyle:I,actionButtonStyle:H,className:z="",descriptionClassName:G="",duration:J,position:j,gap:ne,loadingIcon:oe,expandByDefault:ve,classNames:te,icons:ce,closeButtonAriaLabel:Ie="Close toast",pauseWhenPageIsHidden:Ce,cn:it}=n,[He,dt]=rt.useState(!1),[P,$]=rt.useState(!1),[Z,ae]=rt.useState(!1),[Le,Ae]=rt.useState(!1),[Ue,qe]=rt.useState(0),[vt,Ot]=rt.useState(0),on=rt.useRef(null),Cs=rt.useRef(null),Rn=b===0,ya=b+1<=_,es=h.type,or=h.dismissible!==!1,Ur=h.className||"",jc=h.descriptionClassName||"",$o=rt.useMemo(()=>w.findIndex(ht=>ht.toastId===h.id)||0,[w,h.id]),Hd=rt.useMemo(()=>{var ht;return(ht=h.closeButton)!=null?ht:D},[h.closeButton,D]),Sr=rt.useMemo(()=>h.duration||J||m5e,[h.duration,J]),dl=rt.useRef(0),xr=rt.useRef(0),ul=rt.useRef(0),$r=rt.useRef(null),[jo,ar]=j.split("-"),ho=rt.useMemo(()=>w.reduce((ht,zi,hn)=>hn>=$o?ht:ht+zi.height,0),[w,$o]),Ko=a5e(),qn=h.invert||u,qs=es==="loading";xr.current=rt.useMemo(()=>$o*ne+ho,[$o,ho]),rt.useEffect(()=>{dt(!0)},[]),rt.useLayoutEffect(()=>{if(!He)return;let ht=Cs.current,zi=ht.style.height;ht.style.height="auto";let hn=ht.getBoundingClientRect().height;ht.style.height=zi,Ot(hn),p(go=>go.find(Qi=>Qi.toastId===h.id)?go.map(Qi=>Qi.toastId===h.id?{...Qi,height:hn}:Qi):[{toastId:h.id,height:hn,position:h.position},...go])},[He,h.title,h.description,p,h.id]);let Lr=rt.useCallback(()=>{$(!0),qe(xr.current),p(ht=>ht.filter(zi=>zi.toastId!==h.id)),setTimeout(()=>{x(h)},w5e)},[h,x,p,xr]);rt.useEffect(()=>{if(h.promise&&es==="loading"||h.duration===1/0||h.type==="loading")return;let ht,zi=Sr;return S||g||Ce&&Ko?(()=>{if(ul.current<dl.current){let hn=new Date().getTime()-dl.current;zi=zi-hn}ul.current=new Date().getTime()})():zi!==1/0&&(dl.current=new Date().getTime(),ht=setTimeout(()=>{var hn;(hn=h.onAutoClose)==null||hn.call(h,h),Lr()},zi)),()=>clearTimeout(ht)},[S,g,ve,h,Sr,Lr,h.promise,es,Ce,Ko]),rt.useEffect(()=>{let ht=Cs.current;if(ht){let zi=ht.getBoundingClientRect().height;return Ot(zi),p(hn=>[{toastId:h.id,height:zi,position:h.position},...hn]),()=>p(hn=>hn.filter(go=>go.toastId!==h.id))}},[p,h.id]),rt.useEffect(()=>{h.delete&&Lr()},[Lr,h.delete]);function fo(){return ce!=null&&ce.loading?rt.createElement("div",{className:"sonner-loader","data-visible":es==="loading"},ce.loading):oe?rt.createElement("div",{className:"sonner-loader","data-visible":es==="loading"},oe):rt.createElement(i5e,{visible:es==="loading"})}return rt.createElement("li",{"aria-live":h.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:Cs,className:it(z,Ur,te==null?void 0:te.toast,(e=h==null?void 0:h.classNames)==null?void 0:e.toast,te==null?void 0:te.default,te==null?void 0:te[es],(t=h==null?void 0:h.classNames)==null?void 0:t[es]),"data-sonner-toast":"","data-rich-colors":(i=h.richColors)!=null?i:E,"data-styled":!(h.jsx||h.unstyled||f),"data-mounted":He,"data-promise":!!h.promise,"data-removed":P,"data-visible":ya,"data-y-position":jo,"data-x-position":ar,"data-index":b,"data-front":Rn,"data-swiping":Z,"data-dismissible":or,"data-type":es,"data-invert":qn,"data-swipe-out":Le,"data-expanded":!!(S||ve&&He),style:{"--index":b,"--toasts-before":b,"--z-index":y.length-b,"--offset":`${P?Ue:xr.current}px`,"--initial-height":ve?"auto":`${vt}px`,...N,...h.style},onPointerDown:ht=>{qs||!or||(on.current=new Date,qe(xr.current),ht.target.setPointerCapture(ht.pointerId),ht.target.tagName!=="BUTTON"&&(ae(!0),$r.current={x:ht.clientX,y:ht.clientY}))},onPointerUp:()=>{var ht,zi,hn,go;if(Le||!or)return;$r.current=null;let Qi=Number(((ht=Cs.current)==null?void 0:ht.style.getPropertyValue("--swipe-amount").replace("px",""))||0),Sa=new Date().getTime()-((zi=on.current)==null?void 0:zi.getTime()),uv=Math.abs(Qi)/Sa;if(Math.abs(Qi)>=b5e||uv>.11){qe(xr.current),(hn=h.onDismiss)==null||hn.call(h,h),Lr(),Ae(!0);return}(go=Cs.current)==null||go.style.setProperty("--swipe-amount","0px"),ae(!1)},onPointerMove:ht=>{var zi;if(!$r.current||!or)return;let hn=ht.clientY-$r.current.y,go=ht.clientX-$r.current.x,Qi=(jo==="top"?Math.min:Math.max)(0,hn),Sa=ht.pointerType==="touch"?10:2;Math.abs(Qi)>Sa?(zi=Cs.current)==null||zi.style.setProperty("--swipe-amount",`${hn}px`):Math.abs(go)>Sa&&($r.current=null)}},Hd&&!h.jsx?rt.createElement("button",{"aria-label":Ie,"data-disabled":qs,"data-close-button":!0,onClick:qs||!or?()=>{}:()=>{var ht;Lr(),(ht=h.onDismiss)==null||ht.call(h,h)},className:it(te==null?void 0:te.closeButton,(s=h==null?void 0:h.classNames)==null?void 0:s.closeButton)},rt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},rt.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),rt.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,h.jsx||rt.isValidElement(h.title)?h.jsx||h.title:rt.createElement(rt.Fragment,null,es||h.icon||h.promise?rt.createElement("div",{"data-icon":"",className:it(te==null?void 0:te.icon,(r=h==null?void 0:h.classNames)==null?void 0:r.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||fo():null,h.type!=="loading"?h.icon||(ce==null?void 0:ce[es])||e5e(es):null):null,rt.createElement("div",{"data-content":"",className:it(te==null?void 0:te.content,(o=h==null?void 0:h.classNames)==null?void 0:o.content)},rt.createElement("div",{"data-title":"",className:it(te==null?void 0:te.title,(a=h==null?void 0:h.classNames)==null?void 0:a.title)},h.title),h.description?rt.createElement("div",{"data-description":"",className:it(G,jc,te==null?void 0:te.description,(l=h==null?void 0:h.classNames)==null?void 0:l.description)},h.description):null),rt.isValidElement(h.cancel)?h.cancel:h.cancel&&SR(h.cancel)?rt.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||I,onClick:ht=>{var zi,hn;SR(h.cancel)&&or&&((hn=(zi=h.cancel).onClick)==null||hn.call(zi,ht),Lr())},className:it(te==null?void 0:te.cancelButton,(c=h==null?void 0:h.classNames)==null?void 0:c.cancelButton)},h.cancel.label):null,rt.isValidElement(h.action)?h.action:h.action&&SR(h.action)?rt.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||H,onClick:ht=>{var zi,hn;SR(h.action)&&(ht.defaultPrevented||((hn=(zi=h.action).onClick)==null||hn.call(zi,ht),Lr()))},className:it(te==null?void 0:te.actionButton,(d=h==null?void 0:h.classNames)==null?void 0:d.actionButton)},h.action.label):null))};function Vse(){if(typeof window>"u"||typeof document>"u")return"ltr";let n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}var S5e=n=>{let{invert:e,position:t="bottom-right",hotkey:i=["altKey","KeyT"],expand:s,closeButton:r,className:o,offset:a,theme:l="light",richColors:c,duration:d,style:u,visibleToasts:h=g5e,toastOptions:f,dir:g=Vse(),gap:p=v5e,loadingIcon:_,icons:w,containerAriaLabel:b="Notifications",pauseWhenPageIsHidden:y,cn:S=C5e}=n,[x,E]=rt.useState([]),D=rt.useMemo(()=>Array.from(new Set([t].concat(x.filter(Ce=>Ce.position).map(Ce=>Ce.position)))),[x,t]),[N,I]=rt.useState([]),[H,z]=rt.useState(!1),[G,J]=rt.useState(!1),[j,ne]=rt.useState(l!=="system"?l:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),oe=rt.useRef(null),ve=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),te=rt.useRef(null),ce=rt.useRef(!1),Ie=rt.useCallback(Ce=>{var it;(it=x.find(He=>He.id===Ce.id))!=null&&it.delete||dc.dismiss(Ce.id),E(He=>He.filter(({id:dt})=>dt!==Ce.id))},[x]);return rt.useEffect(()=>dc.subscribe(Ce=>{if(Ce.dismiss){E(it=>it.map(He=>He.id===Ce.id?{...He,delete:!0}:He));return}setTimeout(()=>{kpe.flushSync(()=>{E(it=>{let He=it.findIndex(dt=>dt.id===Ce.id);return He!==-1?[...it.slice(0,He),{...it[He],...Ce},...it.slice(He+1)]:[Ce,...it]})})})}),[]),rt.useEffect(()=>{if(l!=="system"){ne(l);return}l==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ne("dark"):ne("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:Ce})=>{ne(Ce?"dark":"light")})},[l]),rt.useEffect(()=>{x.length<=1&&z(!1)},[x]),rt.useEffect(()=>{let Ce=it=>{var He,dt;i.every(P=>it[P]||it.code===P)&&(z(!0),(He=oe.current)==null||He.focus()),it.code==="Escape"&&(document.activeElement===oe.current||(dt=oe.current)!=null&&dt.contains(document.activeElement))&&z(!1)};return document.addEventListener("keydown",Ce),()=>document.removeEventListener("keydown",Ce)},[i]),rt.useEffect(()=>{if(oe.current)return()=>{te.current&&(te.current.focus({preventScroll:!0}),te.current=null,ce.current=!1)}},[oe.current]),x.length?rt.createElement("section",{"aria-label":`${b} ${ve}`,tabIndex:-1},D.map((Ce,it)=>{var He;let[dt,P]=Ce.split("-");return rt.createElement("ol",{key:Ce,dir:g==="auto"?Vse():g,tabIndex:-1,ref:oe,className:o,"data-sonner-toaster":!0,"data-theme":j,"data-y-position":dt,"data-x-position":P,style:{"--front-toast-height":`${((He=N[0])==null?void 0:He.height)||0}px`,"--offset":typeof a=="number"?`${a}px`:a||p5e,"--width":`${_5e}px`,"--gap":`${p}px`,...u},onBlur:$=>{ce.current&&!$.currentTarget.contains($.relatedTarget)&&(ce.current=!1,te.current&&(te.current.focus({preventScroll:!0}),te.current=null))},onFocus:$=>{$.target instanceof HTMLElement&&$.target.dataset.dismissible==="false"||ce.current||(ce.current=!0,te.current=$.relatedTarget)},onMouseEnter:()=>z(!0),onMouseMove:()=>z(!0),onMouseLeave:()=>{G||z(!1)},onPointerDown:$=>{$.target instanceof HTMLElement&&$.target.dataset.dismissible==="false"||J(!0)},onPointerUp:()=>J(!1)},x.filter($=>!$.position&&it===0||$.position===Ce).map(($,Z)=>{var ae,Le;return rt.createElement(y5e,{key:$.id,icons:w,index:Z,toast:$,defaultRichColors:c,duration:(ae=f==null?void 0:f.duration)!=null?ae:d,className:f==null?void 0:f.className,descriptionClassName:f==null?void 0:f.descriptionClassName,invert:e,visibleToasts:h,closeButton:(Le=f==null?void 0:f.closeButton)!=null?Le:r,interacting:G,position:Ce,style:f==null?void 0:f.style,unstyled:f==null?void 0:f.unstyled,classNames:f==null?void 0:f.classNames,cancelButtonStyle:f==null?void 0:f.cancelButtonStyle,actionButtonStyle:f==null?void 0:f.actionButtonStyle,removeToast:Ie,toasts:x.filter(Ae=>Ae.position==$.position),heights:N.filter(Ae=>Ae.position==$.position),setHeights:I,expandByDefault:s,gap:p,loadingIcon:_,expanded:H,pauseWhenPageIsHidden:y,cn:S})}))})):null};const x5e=({...n})=>{const{theme:e="system"}=J4e();return k.jsx(S5e,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...n})};var L5e=Sfe.useId||(()=>{}),k5e=0;function Kh(n){const[e,t]=A.useState(L5e());return co(()=>{n||t(i=>i??String(k5e++))},[n]),n||(e?`radix-${e}`:"")}const E5e=["top","right","bottom","left"],w_=Math.min,gc=Math.max,IM=Math.round,xR=Math.floor,C_=n=>({x:n,y:n}),I5e={left:"right",right:"left",bottom:"top",top:"bottom"},D5e={start:"end",end:"start"};function UH(n,e,t){return gc(n,w_(e,t))}function zg(n,e){return typeof n=="function"?n(e):n}function Ug(n){return n.split("-")[0]}function bx(n){return n.split("-")[1]}function GY(n){return n==="x"?"y":"x"}function YY(n){return n==="y"?"height":"width"}function y_(n){return["top","bottom"].includes(Ug(n))?"y":"x"}function ZY(n){return GY(y_(n))}function N5e(n,e,t){t===void 0&&(t=!1);const i=bx(n),s=ZY(n),r=YY(s);let o=s==="x"?i===(t?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[r]>e.floating[r]&&(o=DM(o)),[o,DM(o)]}function T5e(n){const e=DM(n);return[$H(n),e,$H(e)]}function $H(n){return n.replace(/start|end/g,e=>D5e[e])}function R5e(n,e,t){const i=["left","right"],s=["right","left"],r=["top","bottom"],o=["bottom","top"];switch(n){case"top":case"bottom":return t?e?s:i:e?i:s;case"left":case"right":return e?r:o;default:return[]}}function A5e(n,e,t,i){const s=bx(n);let r=R5e(Ug(n),t==="start",i);return s&&(r=r.map(o=>o+"-"+s),e&&(r=r.concat(r.map($H)))),r}function DM(n){return n.replace(/left|right|bottom|top/g,e=>I5e[e])}function M5e(n){return{top:0,right:0,bottom:0,left:0,...n}}function gme(n){return typeof n!="number"?M5e(n):{top:n,right:n,bottom:n,left:n}}function NM(n){const{x:e,y:t,width:i,height:s}=n;return{width:i,height:s,top:t,left:e,right:e+i,bottom:t+s,x:e,y:t}}function zse(n,e,t){let{reference:i,floating:s}=n;const r=y_(e),o=ZY(e),a=YY(o),l=Ug(e),c=r==="y",d=i.x+i.width/2-s.width/2,u=i.y+i.height/2-s.height/2,h=i[a]/2-s[a]/2;let f;switch(l){case"top":f={x:d,y:i.y-s.height};break;case"bottom":f={x:d,y:i.y+i.height};break;case"right":f={x:i.x+i.width,y:u};break;case"left":f={x:i.x-s.width,y:u};break;default:f={x:i.x,y:i.y}}switch(bx(e)){case"start":f[o]-=h*(t&&c?-1:1);break;case"end":f[o]+=h*(t&&c?-1:1);break}return f}const P5e=async(n,e,t)=>{const{placement:i="bottom",strategy:s="absolute",middleware:r=[],platform:o}=t,a=r.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:n,floating:e,strategy:s}),{x:d,y:u}=zse(c,i,l),h=i,f={},g=0;for(let p=0;p<a.length;p++){const{name:_,fn:w}=a[p],{x:b,y,data:S,reset:x}=await w({x:d,y:u,initialPlacement:i,placement:h,strategy:s,middlewareData:f,rects:c,platform:o,elements:{reference:n,floating:e}});d=b??d,u=y??u,f={...f,[_]:{...f[_],...S}},x&&g<=50&&(g++,typeof x=="object"&&(x.placement&&(h=x.placement),x.rects&&(c=x.rects===!0?await o.getElementRects({reference:n,floating:e,strategy:s}):x.rects),{x:d,y:u}=zse(c,h,l)),p=-1)}return{x:d,y:u,placement:h,strategy:s,middlewareData:f}};async function fI(n,e){var t;e===void 0&&(e={});const{x:i,y:s,platform:r,rects:o,elements:a,strategy:l}=n,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:u="floating",altBoundary:h=!1,padding:f=0}=zg(e,n),g=gme(f),_=a[h?u==="floating"?"reference":"floating":u],w=NM(await r.getClippingRect({element:(t=await(r.isElement==null?void 0:r.isElement(_)))==null||t?_:_.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(a.floating)),boundary:c,rootBoundary:d,strategy:l})),b=u==="floating"?{x:i,y:s,width:o.floating.width,height:o.floating.height}:o.reference,y=await(r.getOffsetParent==null?void 0:r.getOffsetParent(a.floating)),S=await(r.isElement==null?void 0:r.isElement(y))?await(r.getScale==null?void 0:r.getScale(y))||{x:1,y:1}:{x:1,y:1},x=NM(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:b,offsetParent:y,strategy:l}):b);return{top:(w.top-x.top+g.top)/S.y,bottom:(x.bottom-w.bottom+g.bottom)/S.y,left:(w.left-x.left+g.left)/S.x,right:(x.right-w.right+g.right)/S.x}}const O5e=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:i,placement:s,rects:r,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:d=0}=zg(n,e)||{};if(c==null)return{};const u=gme(d),h={x:t,y:i},f=ZY(s),g=YY(f),p=await o.getDimensions(c),_=f==="y",w=_?"top":"left",b=_?"bottom":"right",y=_?"clientHeight":"clientWidth",S=r.reference[g]+r.reference[f]-h[f]-r.floating[g],x=h[f]-r.reference[f],E=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let D=E?E[y]:0;(!D||!await(o.isElement==null?void 0:o.isElement(E)))&&(D=a.floating[y]||r.floating[g]);const N=S/2-x/2,I=D/2-p[g]/2-1,H=w_(u[w],I),z=w_(u[b],I),G=H,J=D-p[g]-z,j=D/2-p[g]/2+N,ne=UH(G,j,J),oe=!l.arrow&&bx(s)!=null&&j!==ne&&r.reference[g]/2-(j<G?H:z)-p[g]/2<0,ve=oe?j<G?j-G:j-J:0;return{[f]:h[f]+ve,data:{[f]:ne,centerOffset:j-ne-ve,...oe&&{alignmentOffset:ve}},reset:oe}}}),F5e=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,i;const{placement:s,middlewareData:r,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:d=!0,crossAxis:u=!0,fallbackPlacements:h,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:p=!0,..._}=zg(n,e);if((t=r.arrow)!=null&&t.alignmentOffset)return{};const w=Ug(s),b=y_(a),y=Ug(a)===a,S=await(l.isRTL==null?void 0:l.isRTL(c.floating)),x=h||(y||!p?[DM(a)]:T5e(a)),E=g!=="none";!h&&E&&x.push(...A5e(a,p,g,S));const D=[a,...x],N=await fI(e,_),I=[];let H=((i=r.flip)==null?void 0:i.overflows)||[];if(d&&I.push(N[w]),u){const j=N5e(s,o,S);I.push(N[j[0]],N[j[1]])}if(H=[...H,{placement:s,overflows:I}],!I.every(j=>j<=0)){var z,G;const j=(((z=r.flip)==null?void 0:z.index)||0)+1,ne=D[j];if(ne)return{data:{index:j,overflows:H},reset:{placement:ne}};let oe=(G=H.filter(ve=>ve.overflows[0]<=0).sort((ve,te)=>ve.overflows[1]-te.overflows[1])[0])==null?void 0:G.placement;if(!oe)switch(f){case"bestFit":{var J;const ve=(J=H.filter(te=>{if(E){const ce=y_(te.placement);return ce===b||ce==="y"}return!0}).map(te=>[te.placement,te.overflows.filter(ce=>ce>0).reduce((ce,Ie)=>ce+Ie,0)]).sort((te,ce)=>te[1]-ce[1])[0])==null?void 0:J[0];ve&&(oe=ve);break}case"initialPlacement":oe=a;break}if(s!==oe)return{reset:{placement:oe}}}return{}}}};function Use(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function $se(n){return E5e.some(e=>n[e]>=0)}const B5e=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:i="referenceHidden",...s}=zg(n,e);switch(i){case"referenceHidden":{const r=await fI(e,{...s,elementContext:"reference"}),o=Use(r,t.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:$se(o)}}}case"escaped":{const r=await fI(e,{...s,altBoundary:!0}),o=Use(r,t.floating);return{data:{escapedOffsets:o,escaped:$se(o)}}}default:return{}}}}};async function W5e(n,e){const{placement:t,platform:i,elements:s}=n,r=await(i.isRTL==null?void 0:i.isRTL(s.floating)),o=Ug(t),a=bx(t),l=y_(t)==="y",c=["left","top"].includes(o)?-1:1,d=r&&l?-1:1,u=zg(e,n);let{mainAxis:h,crossAxis:f,alignmentAxis:g}=typeof u=="number"?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:u.mainAxis||0,crossAxis:u.crossAxis||0,alignmentAxis:u.alignmentAxis};return a&&typeof g=="number"&&(f=a==="end"?g*-1:g),l?{x:f*d,y:h*c}:{x:h*c,y:f*d}}const H5e=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,i;const{x:s,y:r,placement:o,middlewareData:a}=e,l=await W5e(e,n);return o===((t=a.offset)==null?void 0:t.placement)&&(i=a.arrow)!=null&&i.alignmentOffset?{}:{x:s+l.x,y:r+l.y,data:{...l,placement:o}}}}},V5e=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:i,placement:s}=e,{mainAxis:r=!0,crossAxis:o=!1,limiter:a={fn:_=>{let{x:w,y:b}=_;return{x:w,y:b}}},...l}=zg(n,e),c={x:t,y:i},d=await fI(e,l),u=y_(Ug(s)),h=GY(u);let f=c[h],g=c[u];if(r){const _=h==="y"?"top":"left",w=h==="y"?"bottom":"right",b=f+d[_],y=f-d[w];f=UH(b,f,y)}if(o){const _=u==="y"?"top":"left",w=u==="y"?"bottom":"right",b=g+d[_],y=g-d[w];g=UH(b,g,y)}const p=a.fn({...e,[h]:f,[u]:g});return{...p,data:{x:p.x-t,y:p.y-i,enabled:{[h]:r,[u]:o}}}}}},z5e=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:i,placement:s,rects:r,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=zg(n,e),d={x:t,y:i},u=y_(s),h=GY(u);let f=d[h],g=d[u];const p=zg(a,e),_=typeof p=="number"?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(l){const y=h==="y"?"height":"width",S=r.reference[h]-r.floating[y]+_.mainAxis,x=r.reference[h]+r.reference[y]-_.mainAxis;f<S?f=S:f>x&&(f=x)}if(c){var w,b;const y=h==="y"?"width":"height",S=["top","left"].includes(Ug(s)),x=r.reference[u]-r.floating[y]+(S&&((w=o.offset)==null?void 0:w[u])||0)+(S?0:_.crossAxis),E=r.reference[u]+r.reference[y]+(S?0:((b=o.offset)==null?void 0:b[u])||0)-(S?_.crossAxis:0);g<x?g=x:g>E&&(g=E)}return{[h]:f,[u]:g}}}},U5e=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,i;const{placement:s,rects:r,platform:o,elements:a}=e,{apply:l=()=>{},...c}=zg(n,e),d=await fI(e,c),u=Ug(s),h=bx(s),f=y_(s)==="y",{width:g,height:p}=r.floating;let _,w;u==="top"||u==="bottom"?(_=u,w=h===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(w=u,_=h==="end"?"top":"bottom");const b=p-d.top-d.bottom,y=g-d.left-d.right,S=w_(p-d[_],b),x=w_(g-d[w],y),E=!e.middlewareData.shift;let D=S,N=x;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(N=y),(i=e.middlewareData.shift)!=null&&i.enabled.y&&(D=b),E&&!h){const H=gc(d.left,0),z=gc(d.right,0),G=gc(d.top,0),J=gc(d.bottom,0);f?N=g-2*(H!==0||z!==0?H+z:gc(d.left,d.right)):D=p-2*(G!==0||J!==0?G+J:gc(d.top,d.bottom))}await l({...e,availableWidth:N,availableHeight:D});const I=await o.getDimensions(a.floating);return g!==I.width||p!==I.height?{reset:{rects:!0}}:{}}}};function r3(){return typeof window<"u"}function wx(n){return pme(n)?(n.nodeName||"").toLowerCase():"#document"}function kc(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function gf(n){var e;return(e=(pme(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function pme(n){return r3()?n instanceof Node||n instanceof kc(n).Node:!1}function Ou(n){return r3()?n instanceof Element||n instanceof kc(n).Element:!1}function tf(n){return r3()?n instanceof HTMLElement||n instanceof kc(n).HTMLElement:!1}function jse(n){return!r3()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof kc(n).ShadowRoot}function wN(n){const{overflow:e,overflowX:t,overflowY:i,display:s}=Fu(n);return/auto|scroll|overlay|hidden|clip/.test(e+i+t)&&!["inline","contents"].includes(s)}function $5e(n){return["table","td","th"].includes(wx(n))}function o3(n){return[":popover-open",":modal"].some(e=>{try{return n.matches(e)}catch{return!1}})}function XY(n){const e=QY(),t=Ou(n)?Fu(n):n;return t.transform!=="none"||t.perspective!=="none"||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","perspective","filter"].some(i=>(t.willChange||"").includes(i))||["paint","layout","strict","content"].some(i=>(t.contain||"").includes(i))}function j5e(n){let e=S_(n);for(;tf(e)&&!wS(e);){if(XY(e))return e;if(o3(e))return null;e=S_(e)}return null}function QY(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function wS(n){return["html","body","#document"].includes(wx(n))}function Fu(n){return kc(n).getComputedStyle(n)}function a3(n){return Ou(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function S_(n){if(wx(n)==="html")return n;const e=n.assignedSlot||n.parentNode||jse(n)&&n.host||gf(n);return jse(e)?e.host:e}function mme(n){const e=S_(n);return wS(e)?n.ownerDocument?n.ownerDocument.body:n.body:tf(e)&&wN(e)?e:mme(e)}function gI(n,e,t){var i;e===void 0&&(e=[]),t===void 0&&(t=!0);const s=mme(n),r=s===((i=n.ownerDocument)==null?void 0:i.body),o=kc(s);if(r){const a=jH(o);return e.concat(o,o.visualViewport||[],wN(s)?s:[],a&&t?gI(a):[])}return e.concat(s,gI(s,[],t))}function jH(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function _me(n){const e=Fu(n);let t=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const s=tf(n),r=s?n.offsetWidth:t,o=s?n.offsetHeight:i,a=IM(t)!==r||IM(i)!==o;return a&&(t=r,i=o),{width:t,height:i,$:a}}function JY(n){return Ou(n)?n:n.contextElement}function gy(n){const e=JY(n);if(!tf(e))return C_(1);const t=e.getBoundingClientRect(),{width:i,height:s,$:r}=_me(e);let o=(r?IM(t.width):t.width)/i,a=(r?IM(t.height):t.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const K5e=C_(0);function vme(n){const e=kc(n);return!QY()||!e.visualViewport?K5e:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function q5e(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==kc(n)?!1:e}function n0(n,e,t,i){e===void 0&&(e=!1),t===void 0&&(t=!1);const s=n.getBoundingClientRect(),r=JY(n);let o=C_(1);e&&(i?Ou(i)&&(o=gy(i)):o=gy(n));const a=q5e(r,t,i)?vme(r):C_(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,d=s.width/o.x,u=s.height/o.y;if(r){const h=kc(r),f=i&&Ou(i)?kc(i):i;let g=h,p=jH(g);for(;p&&i&&f!==g;){const _=gy(p),w=p.getBoundingClientRect(),b=Fu(p),y=w.left+(p.clientLeft+parseFloat(b.paddingLeft))*_.x,S=w.top+(p.clientTop+parseFloat(b.paddingTop))*_.y;l*=_.x,c*=_.y,d*=_.x,u*=_.y,l+=y,c+=S,g=kc(p),p=jH(g)}}return NM({width:d,height:u,x:l,y:c})}function G5e(n){let{elements:e,rect:t,offsetParent:i,strategy:s}=n;const r=s==="fixed",o=gf(i),a=e?o3(e.floating):!1;if(i===o||a&&r)return t;let l={scrollLeft:0,scrollTop:0},c=C_(1);const d=C_(0),u=tf(i);if((u||!u&&!r)&&((wx(i)!=="body"||wN(o))&&(l=a3(i)),tf(i))){const h=n0(i);c=gy(i),d.x=h.x+i.clientLeft,d.y=h.y+i.clientTop}return{width:t.width*c.x,height:t.height*c.y,x:t.x*c.x-l.scrollLeft*c.x+d.x,y:t.y*c.y-l.scrollTop*c.y+d.y}}function Y5e(n){return Array.from(n.getClientRects())}function KH(n,e){const t=a3(n).scrollLeft;return e?e.left+t:n0(gf(n)).left+t}function Z5e(n){const e=gf(n),t=a3(n),i=n.ownerDocument.body,s=gc(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),r=gc(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let o=-t.scrollLeft+KH(n);const a=-t.scrollTop;return Fu(i).direction==="rtl"&&(o+=gc(e.clientWidth,i.clientWidth)-s),{width:s,height:r,x:o,y:a}}function X5e(n,e){const t=kc(n),i=gf(n),s=t.visualViewport;let r=i.clientWidth,o=i.clientHeight,a=0,l=0;if(s){r=s.width,o=s.height;const c=QY();(!c||c&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:r,height:o,x:a,y:l}}function Q5e(n,e){const t=n0(n,!0,e==="fixed"),i=t.top+n.clientTop,s=t.left+n.clientLeft,r=tf(n)?gy(n):C_(1),o=n.clientWidth*r.x,a=n.clientHeight*r.y,l=s*r.x,c=i*r.y;return{width:o,height:a,x:l,y:c}}function Kse(n,e,t){let i;if(e==="viewport")i=X5e(n,t);else if(e==="document")i=Z5e(gf(n));else if(Ou(e))i=Q5e(e,t);else{const s=vme(n);i={...e,x:e.x-s.x,y:e.y-s.y}}return NM(i)}function bme(n,e){const t=S_(n);return t===e||!Ou(t)||wS(t)?!1:Fu(t).position==="fixed"||bme(t,e)}function J5e(n,e){const t=e.get(n);if(t)return t;let i=gI(n,[],!1).filter(a=>Ou(a)&&wx(a)!=="body"),s=null;const r=Fu(n).position==="fixed";let o=r?S_(n):n;for(;Ou(o)&&!wS(o);){const a=Fu(o),l=XY(o);!l&&a.position==="fixed"&&(s=null),(r?!l&&!s:!l&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||wN(o)&&!l&&bme(n,o))?i=i.filter(d=>d!==o):s=a,o=S_(o)}return e.set(n,i),i}function e3e(n){let{element:e,boundary:t,rootBoundary:i,strategy:s}=n;const o=[...t==="clippingAncestors"?o3(e)?[]:J5e(e,this._c):[].concat(t),i],a=o[0],l=o.reduce((c,d)=>{const u=Kse(e,d,s);return c.top=gc(u.top,c.top),c.right=w_(u.right,c.right),c.bottom=w_(u.bottom,c.bottom),c.left=gc(u.left,c.left),c},Kse(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function t3e(n){const{width:e,height:t}=_me(n);return{width:e,height:t}}function i3e(n,e,t){const i=tf(e),s=gf(e),r=t==="fixed",o=n0(n,!0,r,e);let a={scrollLeft:0,scrollTop:0};const l=C_(0);if(i||!i&&!r)if((wx(e)!=="body"||wN(s))&&(a=a3(e)),i){const f=n0(e,!0,r,e);l.x=f.x+e.clientLeft,l.y=f.y+e.clientTop}else s&&(l.x=KH(s));let c=0,d=0;if(s&&!i&&!r){const f=s.getBoundingClientRect();d=f.top+a.scrollTop,c=f.left+a.scrollLeft-KH(s,f)}const u=o.left+a.scrollLeft-l.x-c,h=o.top+a.scrollTop-l.y-d;return{x:u,y:h,width:o.width,height:o.height}}function r9(n){return Fu(n).position==="static"}function qse(n,e){if(!tf(n)||Fu(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return gf(n)===t&&(t=t.ownerDocument.body),t}function wme(n,e){const t=kc(n);if(o3(n))return t;if(!tf(n)){let s=S_(n);for(;s&&!wS(s);){if(Ou(s)&&!r9(s))return s;s=S_(s)}return t}let i=qse(n,e);for(;i&&$5e(i)&&r9(i);)i=qse(i,e);return i&&wS(i)&&r9(i)&&!XY(i)?t:i||j5e(n)||t}const n3e=async function(n){const e=this.getOffsetParent||wme,t=this.getDimensions,i=await t(n.floating);return{reference:i3e(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function s3e(n){return Fu(n).direction==="rtl"}const r3e={convertOffsetParentRelativeRectToViewportRelativeRect:G5e,getDocumentElement:gf,getClippingRect:e3e,getOffsetParent:wme,getElementRects:n3e,getClientRects:Y5e,getDimensions:t3e,getScale:gy,isElement:Ou,isRTL:s3e};function o3e(n,e){let t=null,i;const s=gf(n);function r(){var a;clearTimeout(i),(a=t)==null||a.disconnect(),t=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),r();const{left:c,top:d,width:u,height:h}=n.getBoundingClientRect();if(a||e(),!u||!h)return;const f=xR(d),g=xR(s.clientWidth-(c+u)),p=xR(s.clientHeight-(d+h)),_=xR(c),b={rootMargin:-f+"px "+-g+"px "+-p+"px "+-_+"px",threshold:gc(0,w_(1,l))||1};let y=!0;function S(x){const E=x[0].intersectionRatio;if(E!==l){if(!y)return o();E?o(!1,E):i=setTimeout(()=>{o(!1,1e-7)},1e3)}y=!1}try{t=new IntersectionObserver(S,{...b,root:s.ownerDocument})}catch{t=new IntersectionObserver(S,b)}t.observe(n)}return o(!0),r}function a3e(n,e,t,i){i===void 0&&(i={});const{ancestorScroll:s=!0,ancestorResize:r=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=i,c=JY(n),d=s||r?[...c?gI(c):[],...gI(e)]:[];d.forEach(w=>{s&&w.addEventListener("scroll",t,{passive:!0}),r&&w.addEventListener("resize",t)});const u=c&&a?o3e(c,t):null;let h=-1,f=null;o&&(f=new ResizeObserver(w=>{let[b]=w;b&&b.target===c&&f&&(f.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var y;(y=f)==null||y.observe(e)})),t()}),c&&!l&&f.observe(c),f.observe(e));let g,p=l?n0(n):null;l&&_();function _(){const w=n0(n);p&&(w.x!==p.x||w.y!==p.y||w.width!==p.width||w.height!==p.height)&&t(),p=w,g=requestAnimationFrame(_)}return t(),()=>{var w;d.forEach(b=>{s&&b.removeEventListener("scroll",t),r&&b.removeEventListener("resize",t)}),u==null||u(),(w=f)==null||w.disconnect(),f=null,l&&cancelAnimationFrame(g)}}const l3e=H5e,c3e=V5e,d3e=F5e,u3e=U5e,h3e=B5e,Gse=O5e,f3e=z5e,g3e=(n,e,t)=>{const i=new Map,s={platform:r3e,...t},r={...s.platform,_c:i};return P5e(n,e,{...s,platform:r})};var r2=typeof document<"u"?A.useLayoutEffect:A.useEffect;function TM(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,i,s;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(i=t;i--!==0;)if(!TM(n[i],e[i]))return!1;return!0}if(s=Object.keys(n),t=s.length,t!==Object.keys(e).length)return!1;for(i=t;i--!==0;)if(!{}.hasOwnProperty.call(e,s[i]))return!1;for(i=t;i--!==0;){const r=s[i];if(!(r==="_owner"&&n.$$typeof)&&!TM(n[r],e[r]))return!1}return!0}return n!==n&&e!==e}function Cme(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function Yse(n,e){const t=Cme(n);return Math.round(e*t)/t}function o9(n){const e=A.useRef(n);return r2(()=>{e.current=n}),e}function p3e(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:i=[],platform:s,elements:{reference:r,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=n,[d,u]=A.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[h,f]=A.useState(i);TM(h,i)||f(i);const[g,p]=A.useState(null),[_,w]=A.useState(null),b=A.useCallback(te=>{te!==E.current&&(E.current=te,p(te))},[]),y=A.useCallback(te=>{te!==D.current&&(D.current=te,w(te))},[]),S=r||g,x=o||_,E=A.useRef(null),D=A.useRef(null),N=A.useRef(d),I=l!=null,H=o9(l),z=o9(s),G=o9(c),J=A.useCallback(()=>{if(!E.current||!D.current)return;const te={placement:e,strategy:t,middleware:h};z.current&&(te.platform=z.current),g3e(E.current,D.current,te).then(ce=>{const Ie={...ce,isPositioned:G.current!==!1};j.current&&!TM(N.current,Ie)&&(N.current=Ie,F0.flushSync(()=>{u(Ie)}))})},[h,e,t,z,G]);r2(()=>{c===!1&&N.current.isPositioned&&(N.current.isPositioned=!1,u(te=>({...te,isPositioned:!1})))},[c]);const j=A.useRef(!1);r2(()=>(j.current=!0,()=>{j.current=!1}),[]),r2(()=>{if(S&&(E.current=S),x&&(D.current=x),S&&x){if(H.current)return H.current(S,x,J);J()}},[S,x,J,H,I]);const ne=A.useMemo(()=>({reference:E,floating:D,setReference:b,setFloating:y}),[b,y]),oe=A.useMemo(()=>({reference:S,floating:x}),[S,x]),ve=A.useMemo(()=>{const te={position:t,left:0,top:0};if(!oe.floating)return te;const ce=Yse(oe.floating,d.x),Ie=Yse(oe.floating,d.y);return a?{...te,transform:"translate("+ce+"px, "+Ie+"px)",...Cme(oe.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:ce,top:Ie}},[t,a,oe.floating,d.x,d.y]);return A.useMemo(()=>({...d,update:J,refs:ne,elements:oe,floatingStyles:ve}),[d,J,ne,oe,ve])}const m3e=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:i,padding:s}=typeof n=="function"?n(t):n;return i&&e(i)?i.current!=null?Gse({element:i.current,padding:s}).fn(t):{}:i?Gse({element:i,padding:s}).fn(t):{}}}},_3e=(n,e)=>({...l3e(n),options:[n,e]}),v3e=(n,e)=>({...c3e(n),options:[n,e]}),b3e=(n,e)=>({...f3e(n),options:[n,e]}),w3e=(n,e)=>({...d3e(n),options:[n,e]}),C3e=(n,e)=>({...u3e(n),options:[n,e]}),y3e=(n,e)=>({...h3e(n),options:[n,e]}),S3e=(n,e)=>({...m3e(n),options:[n,e]});var x3e="Arrow",yme=A.forwardRef((n,e)=>{const{children:t,width:i=10,height:s=5,...r}=n;return k.jsx(Zt.svg,{...r,ref:e,width:i,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:k.jsx("polygon",{points:"0,0 30,0 15,10"})})});yme.displayName=x3e;var L3e=yme;function k3e(n,e=[]){let t=[];function i(r,o){const a=A.createContext(o),l=t.length;t=[...t,o];function c(u){const{scope:h,children:f,...g}=u,p=(h==null?void 0:h[n][l])||a,_=A.useMemo(()=>g,Object.values(g));return k.jsx(p.Provider,{value:_,children:f})}function d(u,h){const f=(h==null?void 0:h[n][l])||a,g=A.useContext(f);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${u}\` must be used within \`${r}\``)}return c.displayName=r+"Provider",[c,d]}const s=()=>{const r=t.map(o=>A.createContext(o));return function(a){const l=(a==null?void 0:a[n])||r;return A.useMemo(()=>({[`__scope${n}`]:{...a,[n]:l}}),[a,l])}};return s.scopeName=n,[i,E3e(s,...e)]}function E3e(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const i=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(r){const o=i.reduce((a,{useScope:l,scopeName:c})=>{const u=l(r)[`__scope${c}`];return{...a,...u}},{});return A.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}function eZ(n){const[e,t]=A.useState(void 0);return co(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const i=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const r=s[0];let o,a;if("borderBoxSize"in r){const l=r.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=n.offsetWidth,a=n.offsetHeight;t({width:o,height:a})});return i.observe(n,{box:"border-box"}),()=>i.unobserve(n)}else t(void 0)},[n]),e}var tZ="Popper",[Sme,l3]=k3e(tZ),[I3e,xme]=Sme(tZ),Lme=n=>{const{__scopePopper:e,children:t}=n,[i,s]=A.useState(null);return k.jsx(I3e,{scope:e,anchor:i,onAnchorChange:s,children:t})};Lme.displayName=tZ;var kme="PopperAnchor",Eme=A.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:i,...s}=n,r=xme(kme,t),o=A.useRef(null),a=Yi(e,o);return A.useEffect(()=>{r.onAnchorChange((i==null?void 0:i.current)||o.current)}),i?null:k.jsx(Zt.div,{...s,ref:a})});Eme.displayName=kme;var iZ="PopperContent",[D3e,N3e]=Sme(iZ),Ime=A.forwardRef((n,e)=>{var Z,ae,Le,Ae,Ue,qe;const{__scopePopper:t,side:i="bottom",sideOffset:s=0,align:r="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:d=0,sticky:u="partial",hideWhenDetached:h=!1,updatePositionStrategy:f="optimized",onPlaced:g,...p}=n,_=xme(iZ,t),[w,b]=A.useState(null),y=Yi(e,vt=>b(vt)),[S,x]=A.useState(null),E=eZ(S),D=(E==null?void 0:E.width)??0,N=(E==null?void 0:E.height)??0,I=i+(r!=="center"?"-"+r:""),H=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},z=Array.isArray(c)?c:[c],G=z.length>0,J={padding:H,boundary:z.filter(R3e),altBoundary:G},{refs:j,floatingStyles:ne,placement:oe,isPositioned:ve,middlewareData:te}=p3e({strategy:"fixed",placement:I,whileElementsMounted:(...vt)=>a3e(...vt,{animationFrame:f==="always"}),elements:{reference:_.anchor},middleware:[_3e({mainAxis:s+N,alignmentAxis:o}),l&&v3e({mainAxis:!0,crossAxis:!1,limiter:u==="partial"?b3e():void 0,...J}),l&&w3e({...J}),C3e({...J,apply:({elements:vt,rects:Ot,availableWidth:on,availableHeight:Cs})=>{const{width:Rn,height:ya}=Ot.reference,es=vt.floating.style;es.setProperty("--radix-popper-available-width",`${on}px`),es.setProperty("--radix-popper-available-height",`${Cs}px`),es.setProperty("--radix-popper-anchor-width",`${Rn}px`),es.setProperty("--radix-popper-anchor-height",`${ya}px`)}}),S&&S3e({element:S,padding:a}),A3e({arrowWidth:D,arrowHeight:N}),h&&y3e({strategy:"referenceHidden",...J})]}),[ce,Ie]=Tme(oe),Ce=ir(g);co(()=>{ve&&(Ce==null||Ce())},[ve,Ce]);const it=(Z=te.arrow)==null?void 0:Z.x,He=(ae=te.arrow)==null?void 0:ae.y,dt=((Le=te.arrow)==null?void 0:Le.centerOffset)!==0,[P,$]=A.useState();return co(()=>{w&&$(window.getComputedStyle(w).zIndex)},[w]),k.jsx("div",{ref:j.setFloating,"data-radix-popper-content-wrapper":"",style:{...ne,transform:ve?ne.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:P,"--radix-popper-transform-origin":[(Ae=te.transformOrigin)==null?void 0:Ae.x,(Ue=te.transformOrigin)==null?void 0:Ue.y].join(" "),...((qe=te.hide)==null?void 0:qe.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:k.jsx(D3e,{scope:t,placedSide:ce,onArrowChange:x,arrowX:it,arrowY:He,shouldHideArrow:dt,children:k.jsx(Zt.div,{"data-side":ce,"data-align":Ie,...p,ref:y,style:{...p.style,animation:ve?void 0:"none"}})})})});Ime.displayName=iZ;var Dme="PopperArrow",T3e={top:"bottom",right:"left",bottom:"top",left:"right"},Nme=A.forwardRef(function(e,t){const{__scopePopper:i,...s}=e,r=N3e(Dme,i),o=T3e[r.placedSide];return k.jsx("span",{ref:r.onArrowChange,style:{position:"absolute",left:r.arrowX,top:r.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[r.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[r.placedSide],visibility:r.shouldHideArrow?"hidden":void 0},children:k.jsx(L3e,{...s,ref:t,style:{...s.style,display:"block"}})})});Nme.displayName=Dme;function R3e(n){return n!==null}var A3e=n=>({name:"transformOrigin",options:n,fn(e){var _,w,b;const{placement:t,rects:i,middlewareData:s}=e,o=((_=s.arrow)==null?void 0:_.centerOffset)!==0,a=o?0:n.arrowWidth,l=o?0:n.arrowHeight,[c,d]=Tme(t),u={start:"0%",center:"50%",end:"100%"}[d],h=(((w=s.arrow)==null?void 0:w.x)??0)+a/2,f=(((b=s.arrow)==null?void 0:b.y)??0)+l/2;let g="",p="";return c==="bottom"?(g=o?u:`${h}px`,p=`${-l}px`):c==="top"?(g=o?u:`${h}px`,p=`${i.floating.height+l}px`):c==="right"?(g=`${-l}px`,p=o?u:`${f}px`):c==="left"&&(g=`${i.floating.width+l}px`,p=o?u:`${f}px`),{data:{x:g,y:p}}}});function Tme(n){const[e,t="center"]=n.split("-");return[e,t]}var Rme=Lme,Ame=Eme,Mme=Ime,Pme=Nme,[c3,SEt]=cp("Tooltip",[l3]),d3=l3(),Ome="TooltipProvider",M3e=700,qH="tooltip.open",[P3e,nZ]=c3(Ome),Fme=n=>{const{__scopeTooltip:e,delayDuration:t=M3e,skipDelayDuration:i=300,disableHoverableContent:s=!1,children:r}=n,[o,a]=A.useState(!0),l=A.useRef(!1),c=A.useRef(0);return A.useEffect(()=>{const d=c.current;return()=>window.clearTimeout(d)},[]),k.jsx(P3e,{scope:e,isOpenDelayed:o,delayDuration:t,onOpen:A.useCallback(()=>{window.clearTimeout(c.current),a(!1)},[]),onClose:A.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>a(!0),i)},[i]),isPointerInTransitRef:l,onPointerInTransitChange:A.useCallback(d=>{l.current=d},[]),disableHoverableContent:s,children:r})};Fme.displayName=Ome;var u3="Tooltip",[O3e,h3]=c3(u3),Bme=n=>{const{__scopeTooltip:e,children:t,open:i,defaultOpen:s=!1,onOpenChange:r,disableHoverableContent:o,delayDuration:a}=n,l=nZ(u3,n.__scopeTooltip),c=d3(e),[d,u]=A.useState(null),h=Kh(),f=A.useRef(0),g=o??l.disableHoverableContent,p=a??l.delayDuration,_=A.useRef(!1),[w=!1,b]=ef({prop:i,defaultProp:s,onChange:D=>{D?(l.onOpen(),document.dispatchEvent(new CustomEvent(qH))):l.onClose(),r==null||r(D)}}),y=A.useMemo(()=>w?_.current?"delayed-open":"instant-open":"closed",[w]),S=A.useCallback(()=>{window.clearTimeout(f.current),f.current=0,_.current=!1,b(!0)},[b]),x=A.useCallback(()=>{window.clearTimeout(f.current),f.current=0,b(!1)},[b]),E=A.useCallback(()=>{window.clearTimeout(f.current),f.current=window.setTimeout(()=>{_.current=!0,b(!0),f.current=0},p)},[p,b]);return A.useEffect(()=>()=>{f.current&&(window.clearTimeout(f.current),f.current=0)},[]),k.jsx(Rme,{...c,children:k.jsx(O3e,{scope:e,contentId:h,open:w,stateAttribute:y,trigger:d,onTriggerChange:u,onTriggerEnter:A.useCallback(()=>{l.isOpenDelayed?E():S()},[l.isOpenDelayed,E,S]),onTriggerLeave:A.useCallback(()=>{g?x():(window.clearTimeout(f.current),f.current=0)},[x,g]),onOpen:S,onClose:x,disableHoverableContent:g,children:t})})};Bme.displayName=u3;var GH="TooltipTrigger",Wme=A.forwardRef((n,e)=>{const{__scopeTooltip:t,...i}=n,s=h3(GH,t),r=nZ(GH,t),o=d3(t),a=A.useRef(null),l=Yi(e,a,s.onTriggerChange),c=A.useRef(!1),d=A.useRef(!1),u=A.useCallback(()=>c.current=!1,[]);return A.useEffect(()=>()=>document.removeEventListener("pointerup",u),[u]),k.jsx(Ame,{asChild:!0,...o,children:k.jsx(Zt.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...i,ref:l,onPointerMove:Dt(n.onPointerMove,h=>{h.pointerType!=="touch"&&!d.current&&!r.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:Dt(n.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:Dt(n.onPointerDown,()=>{c.current=!0,document.addEventListener("pointerup",u,{once:!0})}),onFocus:Dt(n.onFocus,()=>{c.current||s.onOpen()}),onBlur:Dt(n.onBlur,s.onClose),onClick:Dt(n.onClick,s.onClose)})})});Wme.displayName=GH;var F3e="TooltipPortal",[xEt,B3e]=c3(F3e,{forceMount:void 0}),CS="TooltipContent",Hme=A.forwardRef((n,e)=>{const t=B3e(CS,n.__scopeTooltip),{forceMount:i=t.forceMount,side:s="top",...r}=n,o=h3(CS,n.__scopeTooltip);return k.jsx(Hc,{present:i||o.open,children:o.disableHoverableContent?k.jsx(Vme,{side:s,...r,ref:e}):k.jsx(W3e,{side:s,...r,ref:e})})}),W3e=A.forwardRef((n,e)=>{const t=h3(CS,n.__scopeTooltip),i=nZ(CS,n.__scopeTooltip),s=A.useRef(null),r=Yi(e,s),[o,a]=A.useState(null),{trigger:l,onClose:c}=t,d=s.current,{onPointerInTransitChange:u}=i,h=A.useCallback(()=>{a(null),u(!1)},[u]),f=A.useCallback((g,p)=>{const _=g.currentTarget,w={x:g.clientX,y:g.clientY},b=U3e(w,_.getBoundingClientRect()),y=$3e(w,b),S=j3e(p.getBoundingClientRect()),x=q3e([...y,...S]);a(x),u(!0)},[u]);return A.useEffect(()=>()=>h(),[h]),A.useEffect(()=>{if(l&&d){const g=_=>f(_,d),p=_=>f(_,l);return l.addEventListener("pointerleave",g),d.addEventListener("pointerleave",p),()=>{l.removeEventListener("pointerleave",g),d.removeEventListener("pointerleave",p)}}},[l,d,f,h]),A.useEffect(()=>{if(o){const g=p=>{const _=p.target,w={x:p.clientX,y:p.clientY},b=(l==null?void 0:l.contains(_))||(d==null?void 0:d.contains(_)),y=!K3e(w,o);b?h():y&&(h(),c())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[l,d,o,c,h]),k.jsx(Vme,{...n,ref:r})}),[H3e,V3e]=c3(u3,{isInside:!1}),Vme=A.forwardRef((n,e)=>{const{__scopeTooltip:t,children:i,"aria-label":s,onEscapeKeyDown:r,onPointerDownOutside:o,...a}=n,l=h3(CS,t),c=d3(t),{onClose:d}=l;return A.useEffect(()=>(document.addEventListener(qH,d),()=>document.removeEventListener(qH,d)),[d]),A.useEffect(()=>{if(l.trigger){const u=h=>{const f=h.target;f!=null&&f.contains(l.trigger)&&d()};return window.addEventListener("scroll",u,{capture:!0}),()=>window.removeEventListener("scroll",u,{capture:!0})}},[l.trigger,d]),k.jsx(vN,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:u=>u.preventDefault(),onDismiss:d,children:k.jsxs(Mme,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[k.jsx(Npe,{children:i}),k.jsx(H3e,{scope:t,isInside:!0,children:k.jsx(TFe,{id:l.contentId,role:"tooltip",children:s||i})})]})})});Hme.displayName=CS;var zme="TooltipArrow",z3e=A.forwardRef((n,e)=>{const{__scopeTooltip:t,...i}=n,s=d3(t);return V3e(zme,t).isInside?null:k.jsx(Pme,{...s,...i,ref:e})});z3e.displayName=zme;function U3e(n,e){const t=Math.abs(e.top-n.y),i=Math.abs(e.bottom-n.y),s=Math.abs(e.right-n.x),r=Math.abs(e.left-n.x);switch(Math.min(t,i,s,r)){case r:return"left";case s:return"right";case t:return"top";case i:return"bottom";default:throw new Error("unreachable")}}function $3e(n,e,t=5){const i=[];switch(e){case"top":i.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":i.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":i.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":i.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return i}function j3e(n){const{top:e,right:t,bottom:i,left:s}=n;return[{x:s,y:e},{x:t,y:e},{x:t,y:i},{x:s,y:i}]}function K3e(n,e){const{x:t,y:i}=n;let s=!1;for(let r=0,o=e.length-1;r<e.length;o=r++){const a=e[r].x,l=e[r].y,c=e[o].x,d=e[o].y;l>i!=d>i&&t<(c-a)*(i-l)/(d-l)+a&&(s=!s)}return s}function q3e(n){const e=n.slice();return e.sort((t,i)=>t.x<i.x?-1:t.x>i.x?1:t.y<i.y?-1:t.y>i.y?1:0),G3e(e)}function G3e(n){if(n.length<=1)return n.slice();const e=[];for(let i=0;i<n.length;i++){const s=n[i];for(;e.length>=2;){const r=e[e.length-1],o=e[e.length-2];if((r.x-o.x)*(s.y-o.y)>=(r.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const t=[];for(let i=n.length-1;i>=0;i--){const s=n[i];for(;t.length>=2;){const r=t[t.length-1],o=t[t.length-2];if((r.x-o.x)*(s.y-o.y)>=(r.y-o.y)*(s.x-o.x))t.pop();else break}t.push(s)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var Y3e=Fme,Z3e=Bme,X3e=Wme,Ume=Hme;const $me=Y3e,a9=Z3e,l9=X3e,o2=A.forwardRef(({className:n,sideOffset:e=4,...t},i)=>k.jsx(Ume,{ref:i,sideOffset:e,className:vi("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...t}));o2.displayName=Ume.displayName;var f3=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},g3=typeof window>"u"||"Deno"in globalThis;function su(){}function Q3e(n,e){return typeof n=="function"?n(e):n}function J3e(n){return typeof n=="number"&&n>=0&&n!==1/0}function eBe(n,e){return Math.max(n+(e||0)-Date.now(),0)}function Zse(n,e){return typeof n=="function"?n(e):n}function tBe(n,e){return typeof n=="function"?n(e):n}function Xse(n,e){const{type:t="all",exact:i,fetchStatus:s,predicate:r,queryKey:o,stale:a}=n;if(o){if(i){if(e.queryHash!==sZ(o,e.options))return!1}else if(!mI(e.queryKey,o))return!1}if(t!=="all"){const l=e.isActive();if(t==="active"&&!l||t==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||r&&!r(e))}function Qse(n,e){const{exact:t,status:i,predicate:s,mutationKey:r}=n;if(r){if(!e.options.mutationKey)return!1;if(t){if(pI(e.options.mutationKey)!==pI(r))return!1}else if(!mI(e.options.mutationKey,r))return!1}return!(i&&e.state.status!==i||s&&!s(e))}function sZ(n,e){return((e==null?void 0:e.queryKeyHashFn)||pI)(n)}function pI(n){return JSON.stringify(n,(e,t)=>YH(t)?Object.keys(t).sort().reduce((i,s)=>(i[s]=t[s],i),{}):t)}function mI(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?!Object.keys(e).some(t=>!mI(n[t],e[t])):!1}function jme(n,e){if(n===e)return n;const t=Jse(n)&&Jse(e);if(t||YH(n)&&YH(e)){const i=t?n:Object.keys(n),s=i.length,r=t?e:Object.keys(e),o=r.length,a=t?[]:{};let l=0;for(let c=0;c<o;c++){const d=t?c:r[c];(!t&&i.includes(d)||t)&&n[d]===void 0&&e[d]===void 0?(a[d]=void 0,l++):(a[d]=jme(n[d],e[d]),a[d]===n[d]&&n[d]!==void 0&&l++)}return s===o&&l===s?n:a}return e}function Jse(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function YH(n){if(!ere(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!ere(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function ere(n){return Object.prototype.toString.call(n)==="[object Object]"}function iBe(n){return new Promise(e=>{setTimeout(e,n)})}function nBe(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?jme(n,e):e}function sBe(n,e,t=0){const i=[...n,e];return t&&i.length>t?i.slice(1):i}function rBe(n,e,t=0){const i=[e,...n];return t&&i.length>t?i.slice(0,-1):i}var rZ=Symbol();function Kme(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===rZ?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}var Nb,hm,Ky,tfe,oBe=(tfe=class extends f3{constructor(){super();Ln(this,Nb);Ln(this,hm);Ln(this,Ky);Li(this,Ky,e=>{if(!g3&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){Ve(this,hm)||this.setEventListener(Ve(this,Ky))}onUnsubscribe(){var e;this.hasListeners()||((e=Ve(this,hm))==null||e.call(this),Li(this,hm,void 0))}setEventListener(e){var t;Li(this,Ky,e),(t=Ve(this,hm))==null||t.call(this),Li(this,hm,e(i=>{typeof i=="boolean"?this.setFocused(i):this.onFocus()}))}setFocused(e){Ve(this,Nb)!==e&&(Li(this,Nb,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof Ve(this,Nb)=="boolean"?Ve(this,Nb):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Nb=new WeakMap,hm=new WeakMap,Ky=new WeakMap,tfe),qme=new oBe,qy,fm,Gy,ife,aBe=(ife=class extends f3{constructor(){super();Ln(this,qy,!0);Ln(this,fm);Ln(this,Gy);Li(this,Gy,e=>{if(!g3&&window.addEventListener){const t=()=>e(!0),i=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",i,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",i)}}})}onSubscribe(){Ve(this,fm)||this.setEventListener(Ve(this,Gy))}onUnsubscribe(){var e;this.hasListeners()||((e=Ve(this,fm))==null||e.call(this),Li(this,fm,void 0))}setEventListener(e){var t;Li(this,Gy,e),(t=Ve(this,fm))==null||t.call(this),Li(this,fm,e(this.setOnline.bind(this)))}setOnline(e){Ve(this,qy)!==e&&(Li(this,qy,e),this.listeners.forEach(i=>{i(e)}))}isOnline(){return Ve(this,qy)}},qy=new WeakMap,fm=new WeakMap,Gy=new WeakMap,ife),RM=new aBe;function lBe(){let n,e;const t=new Promise((s,r)=>{n=s,e=r});t.status="pending",t.catch(()=>{});function i(s){Object.assign(t,s),delete t.resolve,delete t.reject}return t.resolve=s=>{i({status:"fulfilled",value:s}),n(s)},t.reject=s=>{i({status:"rejected",reason:s}),e(s)},t}function cBe(n){return Math.min(1e3*2**n,3e4)}function Gme(n){return(n??"online")==="online"?RM.isOnline():!0}var Yme=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function c9(n){return n instanceof Yme}function Zme(n){let e=!1,t=0,i=!1,s;const r=lBe(),o=p=>{var _;i||(h(new Yme(p)),(_=n.abort)==null||_.call(n))},a=()=>{e=!0},l=()=>{e=!1},c=()=>qme.isFocused()&&(n.networkMode==="always"||RM.isOnline())&&n.canRun(),d=()=>Gme(n.networkMode)&&n.canRun(),u=p=>{var _;i||(i=!0,(_=n.onSuccess)==null||_.call(n,p),s==null||s(),r.resolve(p))},h=p=>{var _;i||(i=!0,(_=n.onError)==null||_.call(n,p),s==null||s(),r.reject(p))},f=()=>new Promise(p=>{var _;s=w=>{(i||c())&&p(w)},(_=n.onPause)==null||_.call(n)}).then(()=>{var p;s=void 0,i||(p=n.onContinue)==null||p.call(n)}),g=()=>{if(i)return;let p;const _=t===0?n.initialPromise:void 0;try{p=_??n.fn()}catch(w){p=Promise.reject(w)}Promise.resolve(p).then(u).catch(w=>{var E;if(i)return;const b=n.retry??(g3?0:3),y=n.retryDelay??cBe,S=typeof y=="function"?y(t,w):y,x=b===!0||typeof b=="number"&&t<b||typeof b=="function"&&b(t,w);if(e||!x){h(w);return}t++,(E=n.onFail)==null||E.call(n,t,w),iBe(S).then(()=>c()?void 0:f()).then(()=>{e?h(w):g()})})};return{promise:r,cancel:o,continue:()=>(s==null||s(),r),cancelRetry:a,continueRetry:l,canStart:d,start:()=>(d()?g():f().then(g),r)}}function dBe(){let n=[],e=0,t=a=>{a()},i=a=>{a()},s=a=>setTimeout(a,0);const r=a=>{e?n.push(a):s(()=>{t(a)})},o=()=>{const a=n;n=[],a.length&&s(()=>{i(()=>{a.forEach(l=>{t(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{r(()=>{a(...l)})},schedule:r,setNotifyFunction:a=>{t=a},setBatchNotifyFunction:a=>{i=a},setScheduler:a=>{s=a}}}var Wa=dBe(),Tb,nfe,Xme=(nfe=class{constructor(){Ln(this,Tb)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),J3e(this.gcTime)&&Li(this,Tb,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(g3?1/0:5*60*1e3))}clearGcTimeout(){Ve(this,Tb)&&(clearTimeout(Ve(this,Tb)),Li(this,Tb,void 0))}},Tb=new WeakMap,nfe),Yy,Zy,ld,ea,uN,Rb,au,Wf,sfe,uBe=(sfe=class extends Xme{constructor(e){super();Ln(this,au);Ln(this,Yy);Ln(this,Zy);Ln(this,ld);Ln(this,ea);Ln(this,uN);Ln(this,Rb);Li(this,Rb,!1),Li(this,uN,e.defaultOptions),this.setOptions(e.options),this.observers=[],Li(this,ld,e.cache),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Li(this,Yy,fBe(this.options)),this.state=e.state??Ve(this,Yy),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=Ve(this,ea))==null?void 0:e.promise}setOptions(e){this.options={...Ve(this,uN),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Ve(this,ld).remove(this)}setData(e,t){const i=nBe(this.state.data,e,this.options);return Zo(this,au,Wf).call(this,{data:i,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),i}setState(e,t){Zo(this,au,Wf).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var i,s;const t=(i=Ve(this,ea))==null?void 0:i.promise;return(s=Ve(this,ea))==null||s.cancel(e),t?t.then(su).catch(su):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Ve(this,Yy))}isActive(){return this.observers.some(e=>tBe(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===rZ||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!eBe(this.state.dataUpdatedAt,e)}onFocus(){var t;const e=this.observers.find(i=>i.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=Ve(this,ea))==null||t.continue()}onOnline(){var t;const e=this.observers.find(i=>i.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=Ve(this,ea))==null||t.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),Ve(this,ld).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(Ve(this,ea)&&(Ve(this,Rb)?Ve(this,ea).cancel({revert:!0}):Ve(this,ea).cancelRetry()),this.scheduleGc()),Ve(this,ld).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Zo(this,au,Wf).call(this,{type:"invalidate"})}fetch(e,t){var l,c,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if(Ve(this,ea))return Ve(this,ea).continueRetry(),Ve(this,ea).promise}if(e&&this.setOptions(e),!this.options.queryFn){const u=this.observers.find(h=>h.options.queryFn);u&&this.setOptions(u.options)}const i=new AbortController,s=u=>{Object.defineProperty(u,"signal",{enumerable:!0,get:()=>(Li(this,Rb,!0),i.signal)})},r=()=>{const u=Kme(this.options,t),h={queryKey:this.queryKey,meta:this.meta};return s(h),Li(this,Rb,!1),this.options.persister?this.options.persister(u,h,this):u(h)},o={fetchOptions:t,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:r};s(o),(l=this.options.behavior)==null||l.onFetch(o,this),Li(this,Zy,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((c=o.fetchOptions)==null?void 0:c.meta))&&Zo(this,au,Wf).call(this,{type:"fetch",meta:(d=o.fetchOptions)==null?void 0:d.meta});const a=u=>{var h,f,g,p;c9(u)&&u.silent||Zo(this,au,Wf).call(this,{type:"error",error:u}),c9(u)||((f=(h=Ve(this,ld).config).onError)==null||f.call(h,u,this),(p=(g=Ve(this,ld).config).onSettled)==null||p.call(g,this.state.data,u,this)),this.scheduleGc()};return Li(this,ea,Zme({initialPromise:t==null?void 0:t.initialPromise,fn:o.fetchFn,abort:i.abort.bind(i),onSuccess:u=>{var h,f,g,p;if(u===void 0){a(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(u)}catch(_){a(_);return}(f=(h=Ve(this,ld).config).onSuccess)==null||f.call(h,u,this),(p=(g=Ve(this,ld).config).onSettled)==null||p.call(g,u,this.state.error,this),this.scheduleGc()},onError:a,onFail:(u,h)=>{Zo(this,au,Wf).call(this,{type:"failed",failureCount:u,error:h})},onPause:()=>{Zo(this,au,Wf).call(this,{type:"pause"})},onContinue:()=>{Zo(this,au,Wf).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),Ve(this,ea).start()}},Yy=new WeakMap,Zy=new WeakMap,ld=new WeakMap,ea=new WeakMap,uN=new WeakMap,Rb=new WeakMap,au=new WeakSet,Wf=function(e){const t=i=>{switch(e.type){case"failed":return{...i,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,...hBe(i.data,this.options),fetchMeta:e.meta??null};case"success":return{...i,data:e.data,dataUpdateCount:i.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return c9(s)&&s.revert&&Ve(this,Zy)?{...Ve(this,Zy),fetchStatus:"idle"}:{...i,error:s,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...e.state}}};this.state=t(this.state),Wa.batch(()=>{this.observers.forEach(i=>{i.onQueryUpdate()}),Ve(this,ld).notify({query:this,type:"updated",action:e})})},sfe);function hBe(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Gme(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function fBe(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,i=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var Lh,rfe,gBe=(rfe=class extends f3{constructor(e={}){super();Ln(this,Lh);this.config=e,Li(this,Lh,new Map)}build(e,t,i){const s=t.queryKey,r=t.queryHash??sZ(s,t);let o=this.get(r);return o||(o=new uBe({cache:this,queryKey:s,queryHash:r,options:e.defaultQueryOptions(t),state:i,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){Ve(this,Lh).has(e.queryHash)||(Ve(this,Lh).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=Ve(this,Lh).get(e.queryHash);t&&(e.destroy(),t===e&&Ve(this,Lh).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Wa.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return Ve(this,Lh).get(e)}getAll(){return[...Ve(this,Lh).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(i=>Xse(t,i))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(i=>Xse(e,i)):t}notify(e){Wa.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Wa.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Wa.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Lh=new WeakMap,rfe),kh,Ra,Ab,Eh,Op,ofe,pBe=(ofe=class extends Xme{constructor(e){super();Ln(this,Eh);Ln(this,kh);Ln(this,Ra);Ln(this,Ab);this.mutationId=e.mutationId,Li(this,Ra,e.mutationCache),Li(this,kh,[]),this.state=e.state||mBe(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){Ve(this,kh).includes(e)||(Ve(this,kh).push(e),this.clearGcTimeout(),Ve(this,Ra).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Li(this,kh,Ve(this,kh).filter(t=>t!==e)),this.scheduleGc(),Ve(this,Ra).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){Ve(this,kh).length||(this.state.status==="pending"?this.scheduleGc():Ve(this,Ra).remove(this))}continue(){var e;return((e=Ve(this,Ab))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var s,r,o,a,l,c,d,u,h,f,g,p,_,w,b,y,S,x,E,D;Li(this,Ab,Zme({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(N,I)=>{Zo(this,Eh,Op).call(this,{type:"failed",failureCount:N,error:I})},onPause:()=>{Zo(this,Eh,Op).call(this,{type:"pause"})},onContinue:()=>{Zo(this,Eh,Op).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Ve(this,Ra).canRun(this)}));const t=this.state.status==="pending",i=!Ve(this,Ab).canStart();try{if(!t){Zo(this,Eh,Op).call(this,{type:"pending",variables:e,isPaused:i}),await((r=(s=Ve(this,Ra).config).onMutate)==null?void 0:r.call(s,e,this));const I=await((a=(o=this.options).onMutate)==null?void 0:a.call(o,e));I!==this.state.context&&Zo(this,Eh,Op).call(this,{type:"pending",context:I,variables:e,isPaused:i})}const N=await Ve(this,Ab).start();return await((c=(l=Ve(this,Ra).config).onSuccess)==null?void 0:c.call(l,N,e,this.state.context,this)),await((u=(d=this.options).onSuccess)==null?void 0:u.call(d,N,e,this.state.context)),await((f=(h=Ve(this,Ra).config).onSettled)==null?void 0:f.call(h,N,null,this.state.variables,this.state.context,this)),await((p=(g=this.options).onSettled)==null?void 0:p.call(g,N,null,e,this.state.context)),Zo(this,Eh,Op).call(this,{type:"success",data:N}),N}catch(N){try{throw await((w=(_=Ve(this,Ra).config).onError)==null?void 0:w.call(_,N,e,this.state.context,this)),await((y=(b=this.options).onError)==null?void 0:y.call(b,N,e,this.state.context)),await((x=(S=Ve(this,Ra).config).onSettled)==null?void 0:x.call(S,void 0,N,this.state.variables,this.state.context,this)),await((D=(E=this.options).onSettled)==null?void 0:D.call(E,void 0,N,e,this.state.context)),N}finally{Zo(this,Eh,Op).call(this,{type:"error",error:N})}}finally{Ve(this,Ra).runNext(this)}}},kh=new WeakMap,Ra=new WeakMap,Ab=new WeakMap,Eh=new WeakSet,Op=function(e){const t=i=>{switch(e.type){case"failed":return{...i,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...i,isPaused:!0};case"continue":return{...i,isPaused:!1};case"pending":return{...i,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...i,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...i,data:void 0,error:e.error,failureCount:i.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),Wa.batch(()=>{Ve(this,kh).forEach(i=>{i.onMutationUpdate(e)}),Ve(this,Ra).notify({mutation:this,type:"updated",action:e})})},ofe);function mBe(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var cc,hN,afe,_Be=(afe=class extends f3{constructor(e={}){super();Ln(this,cc);Ln(this,hN);this.config=e,Li(this,cc,new Map),Li(this,hN,Date.now())}build(e,t,i){const s=new pBe({mutationCache:this,mutationId:++nR(this,hN)._,options:e.defaultMutationOptions(t),state:i});return this.add(s),s}add(e){const t=LR(e),i=Ve(this,cc).get(t)??[];i.push(e),Ve(this,cc).set(t,i),this.notify({type:"added",mutation:e})}remove(e){var i;const t=LR(e);if(Ve(this,cc).has(t)){const s=(i=Ve(this,cc).get(t))==null?void 0:i.filter(r=>r!==e);s&&(s.length===0?Ve(this,cc).delete(t):Ve(this,cc).set(t,s))}this.notify({type:"removed",mutation:e})}canRun(e){var i;const t=(i=Ve(this,cc).get(LR(e)))==null?void 0:i.find(s=>s.state.status==="pending");return!t||t===e}runNext(e){var i;const t=(i=Ve(this,cc).get(LR(e)))==null?void 0:i.find(s=>s!==e&&s.state.isPaused);return(t==null?void 0:t.continue())??Promise.resolve()}clear(){Wa.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...Ve(this,cc).values()].flat()}find(e){const t={exact:!0,...e};return this.getAll().find(i=>Qse(t,i))}findAll(e={}){return this.getAll().filter(t=>Qse(e,t))}notify(e){Wa.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return Wa.batch(()=>Promise.all(e.map(t=>t.continue().catch(su))))}},cc=new WeakMap,hN=new WeakMap,afe);function LR(n){var e;return((e=n.options.scope)==null?void 0:e.id)??String(n.mutationId)}function tre(n){return{onFetch:(e,t)=>{var d,u,h,f,g;const i=e.options,s=(h=(u=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:u.fetchMore)==null?void 0:h.direction,r=((f=e.state.data)==null?void 0:f.pages)||[],o=((g=e.state.data)==null?void 0:g.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let p=!1;const _=y=>{Object.defineProperty(y,"signal",{enumerable:!0,get:()=>(e.signal.aborted?p=!0:e.signal.addEventListener("abort",()=>{p=!0}),e.signal)})},w=Kme(e.options,e.fetchOptions),b=async(y,S,x)=>{if(p)return Promise.reject();if(S==null&&y.pages.length)return Promise.resolve(y);const E={queryKey:e.queryKey,pageParam:S,direction:x?"backward":"forward",meta:e.options.meta};_(E);const D=await w(E),{maxPages:N}=e.options,I=x?rBe:sBe;return{pages:I(y.pages,D,N),pageParams:I(y.pageParams,S,N)}};if(s&&r.length){const y=s==="backward",S=y?vBe:ire,x={pages:r,pageParams:o},E=S(i,x);a=await b(x,E,y)}else{const y=n??r.length;do{const S=l===0?o[0]??i.initialPageParam:ire(i,a);if(l>0&&S==null)break;a=await b(a,S),l++}while(l<y)}return a};e.options.persister?e.fetchFn=()=>{var p,_;return(_=(p=e.options).persister)==null?void 0:_.call(p,c,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=c}}}function ire(n,{pages:e,pageParams:t}){const i=e.length-1;return e.length>0?n.getNextPageParam(e[i],e,t[i],t):void 0}function vBe(n,{pages:e,pageParams:t}){var i;return e.length>0?(i=n.getPreviousPageParam)==null?void 0:i.call(n,e[0],e,t[0],t):void 0}var Os,gm,pm,Xy,Qy,mm,Jy,eS,lfe,bBe=(lfe=class{constructor(n={}){Ln(this,Os);Ln(this,gm);Ln(this,pm);Ln(this,Xy);Ln(this,Qy);Ln(this,mm);Ln(this,Jy);Ln(this,eS);Li(this,Os,n.queryCache||new gBe),Li(this,gm,n.mutationCache||new _Be),Li(this,pm,n.defaultOptions||{}),Li(this,Xy,new Map),Li(this,Qy,new Map),Li(this,mm,0)}mount(){nR(this,mm)._++,Ve(this,mm)===1&&(Li(this,Jy,qme.subscribe(async n=>{n&&(await this.resumePausedMutations(),Ve(this,Os).onFocus())})),Li(this,eS,RM.subscribe(async n=>{n&&(await this.resumePausedMutations(),Ve(this,Os).onOnline())})))}unmount(){var n,e;nR(this,mm)._--,Ve(this,mm)===0&&((n=Ve(this,Jy))==null||n.call(this),Li(this,Jy,void 0),(e=Ve(this,eS))==null||e.call(this),Li(this,eS,void 0))}isFetching(n){return Ve(this,Os).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return Ve(this,gm).findAll({...n,status:"pending"}).length}getQueryData(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=Ve(this,Os).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(n){const e=this.getQueryData(n.queryKey);if(e===void 0)return this.fetchQuery(n);{const t=this.defaultQueryOptions(n),i=Ve(this,Os).build(this,t);return n.revalidateIfStale&&i.isStaleByTime(Zse(t.staleTime,i))&&this.prefetchQuery(t),Promise.resolve(e)}}getQueriesData(n){return Ve(this,Os).findAll(n).map(({queryKey:e,state:t})=>{const i=t.data;return[e,i]})}setQueryData(n,e,t){const i=this.defaultQueryOptions({queryKey:n}),s=Ve(this,Os).get(i.queryHash),r=s==null?void 0:s.state.data,o=Q3e(e,r);if(o!==void 0)return Ve(this,Os).build(this,i).setData(o,{...t,manual:!0})}setQueriesData(n,e,t){return Wa.batch(()=>Ve(this,Os).findAll(n).map(({queryKey:i})=>[i,this.setQueryData(i,e,t)]))}getQueryState(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=Ve(this,Os).get(e.queryHash))==null?void 0:t.state}removeQueries(n){const e=Ve(this,Os);Wa.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=Ve(this,Os),i={type:"active",...n};return Wa.batch(()=>(t.findAll(n).forEach(s=>{s.reset()}),this.refetchQueries(i,e)))}cancelQueries(n={},e={}){const t={revert:!0,...e},i=Wa.batch(()=>Ve(this,Os).findAll(n).map(s=>s.cancel(t)));return Promise.all(i).then(su).catch(su)}invalidateQueries(n={},e={}){return Wa.batch(()=>{if(Ve(this,Os).findAll(n).forEach(i=>{i.invalidate()}),n.refetchType==="none")return Promise.resolve();const t={...n,type:n.refetchType??n.type??"active"};return this.refetchQueries(t,e)})}refetchQueries(n={},e){const t={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},i=Wa.batch(()=>Ve(this,Os).findAll(n).filter(s=>!s.isDisabled()).map(s=>{let r=s.fetch(void 0,t);return t.throwOnError||(r=r.catch(su)),s.state.fetchStatus==="paused"?Promise.resolve():r}));return Promise.all(i).then(su)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=Ve(this,Os).build(this,e);return t.isStaleByTime(Zse(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(su).catch(su)}fetchInfiniteQuery(n){return n.behavior=tre(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(su).catch(su)}ensureInfiniteQueryData(n){return n.behavior=tre(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return RM.isOnline()?Ve(this,gm).resumePausedMutations():Promise.resolve()}getQueryCache(){return Ve(this,Os)}getMutationCache(){return Ve(this,gm)}getDefaultOptions(){return Ve(this,pm)}setDefaultOptions(n){Li(this,pm,n)}setQueryDefaults(n,e){Ve(this,Xy).set(pI(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...Ve(this,Xy).values()];let t={};return e.forEach(i=>{mI(n,i.queryKey)&&(t={...t,...i.defaultOptions})}),t}setMutationDefaults(n,e){Ve(this,Qy).set(pI(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...Ve(this,Qy).values()];let t={};return e.forEach(i=>{mI(n,i.mutationKey)&&(t={...t,...i.defaultOptions})}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...Ve(this,pm).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=sZ(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===rZ&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...Ve(this,pm).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){Ve(this,Os).clear(),Ve(this,gm).clear()}},Os=new WeakMap,gm=new WeakMap,pm=new WeakMap,Xy=new WeakMap,Qy=new WeakMap,mm=new WeakMap,Jy=new WeakMap,eS=new WeakMap,lfe),wBe=A.createContext(void 0),CBe=({client:n,children:e})=>(A.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),k.jsx(wBe.Provider,{value:n,children:e}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _I(){return _I=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},_I.apply(this,arguments)}var bm;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(bm||(bm={}));const nre="popstate";function yBe(n){n===void 0&&(n={});function e(i,s){let{pathname:r,search:o,hash:a}=i.location;return ZH("",{pathname:r,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(i,s){return typeof s=="string"?s:Jme(s)}return xBe(e,t,null,n)}function Or(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Qme(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function SBe(){return Math.random().toString(36).substr(2,8)}function sre(n,e){return{usr:n.state,key:n.key,idx:e}}function ZH(n,e,t,i){return t===void 0&&(t=null),_I({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Cx(e):e,{state:t,key:e&&e.key||i||SBe()})}function Jme(n){let{pathname:e="/",search:t="",hash:i=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Cx(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function xBe(n,e,t,i){i===void 0&&(i={});let{window:s=document.defaultView,v5Compat:r=!1}=i,o=s.history,a=bm.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(_I({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function u(){a=bm.Pop;let _=d(),w=_==null?null:_-c;c=_,l&&l({action:a,location:p.location,delta:w})}function h(_,w){a=bm.Push;let b=ZH(p.location,_,w);c=d()+1;let y=sre(b,c),S=p.createHref(b);try{o.pushState(y,"",S)}catch(x){if(x instanceof DOMException&&x.name==="DataCloneError")throw x;s.location.assign(S)}r&&l&&l({action:a,location:p.location,delta:1})}function f(_,w){a=bm.Replace;let b=ZH(p.location,_,w);c=d();let y=sre(b,c),S=p.createHref(b);o.replaceState(y,"",S),r&&l&&l({action:a,location:p.location,delta:0})}function g(_){let w=s.location.origin!=="null"?s.location.origin:s.location.href,b=typeof _=="string"?_:Jme(_);return b=b.replace(/ $/,"%20"),Or(w,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,w)}let p={get action(){return a},get location(){return n(s,o)},listen(_){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(nre,u),l=_,()=>{s.removeEventListener(nre,u),l=null}},createHref(_){return e(s,_)},createURL:g,encodeLocation(_){let w=g(_);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:h,replace:f,go(_){return o.go(_)}};return p}var rre;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(rre||(rre={}));function LBe(n,e,t){return t===void 0&&(t="/"),kBe(n,e,t,!1)}function kBe(n,e,t,i){let s=typeof e=="string"?Cx(e):e,r=i_e(s.pathname||"/",t);if(r==null)return null;let o=e_e(n);EBe(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=BBe(r);a=OBe(o[l],c,i)}return a}function e_e(n,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let s=(r,o,a)=>{let l={relativePath:a===void 0?r.path||"":a,caseSensitive:r.caseSensitive===!0,childrenIndex:o,route:r};l.relativePath.startsWith("/")&&(Or(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let c=Ob([i,l.relativePath]),d=t.concat(l);r.children&&r.children.length>0&&(Or(r.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),e_e(r.children,e,d,c)),!(r.path==null&&!r.index)&&e.push({path:c,score:MBe(c,r.index),routesMeta:d})};return n.forEach((r,o)=>{var a;if(r.path===""||!((a=r.path)!=null&&a.includes("?")))s(r,o);else for(let l of t_e(r.path))s(r,o,l)}),e}function t_e(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,s=t.endsWith("?"),r=t.replace(/\?$/,"");if(i.length===0)return s?[r,""]:[r];let o=t_e(i.join("/")),a=[];return a.push(...o.map(l=>l===""?r:[r,l].join("/"))),s&&a.push(...o),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function EBe(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:PBe(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const IBe=/^:[\w-]+$/,DBe=3,NBe=2,TBe=1,RBe=10,ABe=-2,ore=n=>n==="*";function MBe(n,e){let t=n.split("/"),i=t.length;return t.some(ore)&&(i+=ABe),e&&(i+=NBe),t.filter(s=>!ore(s)).reduce((s,r)=>s+(IBe.test(r)?DBe:r===""?TBe:RBe),i)}function PBe(n,e){return n.length===e.length&&n.slice(0,-1).every((i,s)=>i===e[s])?n[n.length-1]-e[e.length-1]:0}function OBe(n,e,t){let{routesMeta:i}=n,s={},r="/",o=[];for(let a=0;a<i.length;++a){let l=i[a],c=a===i.length-1,d=r==="/"?e:e.slice(r.length)||"/",u=are({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),h=l.route;if(!u&&c&&t&&!i[i.length-1].route.index&&(u=are({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!u)return null;Object.assign(s,u.params),o.push({params:s,pathname:Ob([r,u.pathname]),pathnameBase:$Be(Ob([r,u.pathnameBase])),route:h}),u.pathnameBase!=="/"&&(r=Ob([r,u.pathnameBase]))}return o}function are(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=FBe(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let r=s[0],o=r.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:i.reduce((c,d,u)=>{let{paramName:h,isOptional:f}=d;if(h==="*"){let p=a[u]||"";o=r.slice(0,r.length-p.length).replace(/(.)\/+$/,"$1")}const g=a[u];return f&&!g?c[h]=void 0:c[h]=(g||"").replace(/%2F/g,"/"),c},{}),pathname:r,pathnameBase:o,pattern:n}}function FBe(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Qme(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(i.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function BBe(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Qme(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function i_e(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function WBe(n,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:s=""}=typeof n=="string"?Cx(n):n;return{pathname:t?t.startsWith("/")?t:HBe(t,e):e,search:jBe(i),hash:KBe(s)}}function HBe(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function d9(n,e,t,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function VBe(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function zBe(n,e){let t=VBe(n);return e?t.map((i,s)=>s===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function UBe(n,e,t,i){i===void 0&&(i=!1);let s;typeof n=="string"?s=Cx(n):(s=_I({},n),Or(!s.pathname||!s.pathname.includes("?"),d9("?","pathname","search",s)),Or(!s.pathname||!s.pathname.includes("#"),d9("#","pathname","hash",s)),Or(!s.search||!s.search.includes("#"),d9("#","search","hash",s)));let r=n===""||s.pathname==="",o=r?"/":s.pathname,a;if(o==null)a=t;else{let u=e.length-1;if(!i&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),u-=1;s.pathname=h.join("/")}a=u>=0?e[u]:"/"}let l=WBe(s,a),c=o&&o!=="/"&&o.endsWith("/"),d=(r||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const Ob=n=>n.join("/").replace(/\/\/+/g,"/"),$Be=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),jBe=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,KBe=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function qBe(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const n_e=["post","put","patch","delete"];new Set(n_e);const GBe=["get",...n_e];new Set(GBe);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vI(){return vI=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},vI.apply(this,arguments)}const oZ=A.createContext(null),YBe=A.createContext(null),p3=A.createContext(null),m3=A.createContext(null),yx=A.createContext({outlet:null,matches:[],isDataRoute:!1}),s_e=A.createContext(null);function _3(){return A.useContext(m3)!=null}function aZ(){return _3()||Or(!1),A.useContext(m3).location}function r_e(n){A.useContext(p3).static||A.useLayoutEffect(n)}function o_e(){let{isDataRoute:n}=A.useContext(yx);return n?lWe():ZBe()}function ZBe(){_3()||Or(!1);let n=A.useContext(oZ),{basename:e,future:t,navigator:i}=A.useContext(p3),{matches:s}=A.useContext(yx),{pathname:r}=aZ(),o=JSON.stringify(zBe(s,t.v7_relativeSplatPath)),a=A.useRef(!1);return r_e(()=>{a.current=!0}),A.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){i.go(c);return}let u=UBe(c,JSON.parse(o),r,d.relative==="path");n==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:Ob([e,u.pathname])),(d.replace?i.replace:i.push)(u,d.state,d)},[e,i,o,r,n])}function XBe(n,e){return QBe(n,e)}function QBe(n,e,t,i){_3()||Or(!1);let{navigator:s}=A.useContext(p3),{matches:r}=A.useContext(yx),o=r[r.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=aZ(),d;if(e){var u;let _=typeof e=="string"?Cx(e):e;l==="/"||(u=_.pathname)!=null&&u.startsWith(l)||Or(!1),d=_}else d=c;let h=d.pathname||"/",f=h;if(l!=="/"){let _=l.replace(/^\//,"").split("/");f="/"+h.replace(/^\//,"").split("/").slice(_.length).join("/")}let g=LBe(n,{pathname:f}),p=nWe(g&&g.map(_=>Object.assign({},_,{params:Object.assign({},a,_.params),pathname:Ob([l,s.encodeLocation?s.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?l:Ob([l,s.encodeLocation?s.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),r,t,i);return e&&p?A.createElement(m3.Provider,{value:{location:vI({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:bm.Pop}},p):p}function JBe(){let n=aWe(),e=qBe(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),t?A.createElement("pre",{style:s},t):null,null)}const eWe=A.createElement(JBe,null);class tWe extends A.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?A.createElement(yx.Provider,{value:this.props.routeContext},A.createElement(s_e.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function iWe(n){let{routeContext:e,match:t,children:i}=n,s=A.useContext(oZ);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),A.createElement(yx.Provider,{value:e},i)}function nWe(n,e,t,i){var s;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),n==null){var r;if(!t)return null;if(t.errors)n=t.matches;else if((r=i)!=null&&r.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,a=(s=t)==null?void 0:s.errors;if(a!=null){let d=o.findIndex(u=>u.route.id&&(a==null?void 0:a[u.route.id])!==void 0);d>=0||Or(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(t&&i&&i.v7_partialHydration)for(let d=0;d<o.length;d++){let u=o[d];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(c=d),u.route.id){let{loaderData:h,errors:f}=t,g=u.route.loader&&h[u.route.id]===void 0&&(!f||f[u.route.id]===void 0);if(u.route.lazy||g){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,u,h)=>{let f,g=!1,p=null,_=null;t&&(f=a&&u.route.id?a[u.route.id]:void 0,p=u.route.errorElement||eWe,l&&(c<0&&h===0?(g=!0,_=null):c===h&&(g=!0,_=u.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,h+1)),b=()=>{let y;return f?y=p:g?y=_:u.route.Component?y=A.createElement(u.route.Component,null):u.route.element?y=u.route.element:y=d,A.createElement(iWe,{match:u,routeContext:{outlet:d,matches:w,isDataRoute:t!=null},children:y})};return t&&(u.route.ErrorBoundary||u.route.errorElement||h===0)?A.createElement(tWe,{location:t.location,revalidation:t.revalidation,component:p,error:f,children:b(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):b()},null)}var a_e=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(a_e||{}),AM=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(AM||{});function sWe(n){let e=A.useContext(oZ);return e||Or(!1),e}function rWe(n){let e=A.useContext(YBe);return e||Or(!1),e}function oWe(n){let e=A.useContext(yx);return e||Or(!1),e}function l_e(n){let e=oWe(),t=e.matches[e.matches.length-1];return t.route.id||Or(!1),t.route.id}function aWe(){var n;let e=A.useContext(s_e),t=rWe(AM.UseRouteError),i=l_e(AM.UseRouteError);return e!==void 0?e:(n=t.errors)==null?void 0:n[i]}function lWe(){let{router:n}=sWe(a_e.UseNavigateStable),e=l_e(AM.UseNavigateStable),t=A.useRef(!1);return r_e(()=>{t.current=!0}),A.useCallback(function(s,r){r===void 0&&(r={}),t.current&&(typeof s=="number"?n.navigate(s):n.navigate(s,vI({fromRouteId:e},r)))},[n,e])}function cWe(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function a2(n){Or(!1)}function dWe(n){let{basename:e="/",children:t=null,location:i,navigationType:s=bm.Pop,navigator:r,static:o=!1,future:a}=n;_3()&&Or(!1);let l=e.replace(/^\/*/,"/"),c=A.useMemo(()=>({basename:l,navigator:r,static:o,future:vI({v7_relativeSplatPath:!1},a)}),[l,a,r,o]);typeof i=="string"&&(i=Cx(i));let{pathname:d="/",search:u="",hash:h="",state:f=null,key:g="default"}=i,p=A.useMemo(()=>{let _=i_e(d,l);return _==null?null:{location:{pathname:_,search:u,hash:h,state:f,key:g},navigationType:s}},[l,d,u,h,f,g,s]);return p==null?null:A.createElement(p3.Provider,{value:c},A.createElement(m3.Provider,{children:t,value:p}))}function uWe(n){let{children:e,location:t}=n;return XBe(XH(e),t)}new Promise(()=>{});function XH(n,e){e===void 0&&(e=[]);let t=[];return A.Children.forEach(n,(i,s)=>{if(!A.isValidElement(i))return;let r=[...e,s];if(i.type===A.Fragment){t.push.apply(t,XH(i.props.children,r));return}i.type!==a2&&Or(!1),!i.props.index||!i.props.children||Or(!1);let o={id:i.props.id||r.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=XH(i.props.children,r)),t.push(o)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const hWe="6";try{window.__reactRouterVersion=hWe}catch{}const fWe="startTransition",lre=Sfe[fWe];function gWe(n){let{basename:e,children:t,future:i,window:s}=n,r=A.useRef();r.current==null&&(r.current=yBe({window:s,v5Compat:!0}));let o=r.current,[a,l]=A.useState({action:o.action,location:o.location}),{v7_startTransition:c}=i||{},d=A.useCallback(u=>{c&&lre?lre(()=>l(u)):l(u)},[l,c]);return A.useLayoutEffect(()=>o.listen(d),[o,d]),A.useEffect(()=>cWe(i),[i]),A.createElement(dWe,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:o,future:i})}var cre;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(cre||(cre={}));var dre;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(dre||(dre={}));/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function c_e(n){return typeof n>"u"||n===null}function pWe(n){return typeof n=="object"&&n!==null}function mWe(n){return Array.isArray(n)?n:c_e(n)?[]:[n]}function _We(n,e){var t,i,s,r;if(e)for(r=Object.keys(e),t=0,i=r.length;t<i;t+=1)s=r[t],n[s]=e[s];return n}function vWe(n,e){var t="",i;for(i=0;i<e;i+=1)t+=n;return t}function bWe(n){return n===0&&Number.NEGATIVE_INFINITY===1/n}var wWe=c_e,CWe=pWe,yWe=mWe,SWe=vWe,xWe=bWe,LWe=_We,Ar={isNothing:wWe,isObject:CWe,toArray:yWe,repeat:SWe,isNegativeZero:xWe,extend:LWe};function d_e(n,e){var t="",i=n.reason||"(unknown reason)";return n.mark?(n.mark.name&&(t+='in "'+n.mark.name+'" '),t+="("+(n.mark.line+1)+":"+(n.mark.column+1)+")",!e&&n.mark.snippet&&(t+=`

`+n.mark.snippet),i+" "+t):i}function bI(n,e){Error.call(this),this.name="YAMLException",this.reason=n,this.mark=e,this.message=d_e(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}bI.prototype=Object.create(Error.prototype);bI.prototype.constructor=bI;bI.prototype.toString=function(e){return this.name+": "+d_e(this,e)};var Ha=bI;function u9(n,e,t,i,s){var r="",o="",a=Math.floor(s/2)-1;return i-e>a&&(r=" ... ",e=i-a+r.length),t-i>a&&(o=" ...",t=i+a-o.length),{str:r+n.slice(e,t).replace(/\t/g,"")+o,pos:i-e+r.length}}function h9(n,e){return Ar.repeat(" ",e-n.length)+n}function kWe(n,e){if(e=Object.create(e||null),!n.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var t=/\r?\n|\r|\0/g,i=[0],s=[],r,o=-1;r=t.exec(n.buffer);)s.push(r.index),i.push(r.index+r[0].length),n.position<=r.index&&o<0&&(o=i.length-2);o<0&&(o=i.length-1);var a="",l,c,d=Math.min(n.line+e.linesAfter,s.length).toString().length,u=e.maxLength-(e.indent+d+3);for(l=1;l<=e.linesBefore&&!(o-l<0);l++)c=u9(n.buffer,i[o-l],s[o-l],n.position-(i[o]-i[o-l]),u),a=Ar.repeat(" ",e.indent)+h9((n.line-l+1).toString(),d)+" | "+c.str+`
`+a;for(c=u9(n.buffer,i[o],s[o],n.position,u),a+=Ar.repeat(" ",e.indent)+h9((n.line+1).toString(),d)+" | "+c.str+`
`,a+=Ar.repeat("-",e.indent+d+3+c.pos)+`^
`,l=1;l<=e.linesAfter&&!(o+l>=s.length);l++)c=u9(n.buffer,i[o+l],s[o+l],n.position-(i[o]-i[o+l]),u),a+=Ar.repeat(" ",e.indent)+h9((n.line+l+1).toString(),d)+" | "+c.str+`
`;return a.replace(/\n$/,"")}var EWe=kWe,IWe=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],DWe=["scalar","sequence","mapping"];function NWe(n){var e={};return n!==null&&Object.keys(n).forEach(function(t){n[t].forEach(function(i){e[String(i)]=t})}),e}function TWe(n,e){if(e=e||{},Object.keys(e).forEach(function(t){if(IWe.indexOf(t)===-1)throw new Ha('Unknown option "'+t+'" is met in definition of "'+n+'" YAML type.')}),this.options=e,this.tag=n,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(t){return t},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=NWe(e.styleAliases||null),DWe.indexOf(this.kind)===-1)throw new Ha('Unknown kind "'+this.kind+'" is specified for "'+n+'" YAML type.')}var Do=TWe;function ure(n,e){var t=[];return n[e].forEach(function(i){var s=t.length;t.forEach(function(r,o){r.tag===i.tag&&r.kind===i.kind&&r.multi===i.multi&&(s=o)}),t[s]=i}),t}function RWe(){var n={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,t;function i(s){s.multi?(n.multi[s.kind].push(s),n.multi.fallback.push(s)):n[s.kind][s.tag]=n.fallback[s.tag]=s}for(e=0,t=arguments.length;e<t;e+=1)arguments[e].forEach(i);return n}function QH(n){return this.extend(n)}QH.prototype.extend=function(e){var t=[],i=[];if(e instanceof Do)i.push(e);else if(Array.isArray(e))i=i.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(t=t.concat(e.implicit)),e.explicit&&(i=i.concat(e.explicit));else throw new Ha("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");t.forEach(function(r){if(!(r instanceof Do))throw new Ha("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(r.loadKind&&r.loadKind!=="scalar")throw new Ha("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(r.multi)throw new Ha("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),i.forEach(function(r){if(!(r instanceof Do))throw new Ha("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var s=Object.create(QH.prototype);return s.implicit=(this.implicit||[]).concat(t),s.explicit=(this.explicit||[]).concat(i),s.compiledImplicit=ure(s,"implicit"),s.compiledExplicit=ure(s,"explicit"),s.compiledTypeMap=RWe(s.compiledImplicit,s.compiledExplicit),s};var u_e=QH,h_e=new Do("tag:yaml.org,2002:str",{kind:"scalar",construct:function(n){return n!==null?n:""}}),f_e=new Do("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(n){return n!==null?n:[]}}),g_e=new Do("tag:yaml.org,2002:map",{kind:"mapping",construct:function(n){return n!==null?n:{}}}),p_e=new u_e({explicit:[h_e,f_e,g_e]});function AWe(n){if(n===null)return!0;var e=n.length;return e===1&&n==="~"||e===4&&(n==="null"||n==="Null"||n==="NULL")}function MWe(){return null}function PWe(n){return n===null}var m_e=new Do("tag:yaml.org,2002:null",{kind:"scalar",resolve:AWe,construct:MWe,predicate:PWe,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function OWe(n){if(n===null)return!1;var e=n.length;return e===4&&(n==="true"||n==="True"||n==="TRUE")||e===5&&(n==="false"||n==="False"||n==="FALSE")}function FWe(n){return n==="true"||n==="True"||n==="TRUE"}function BWe(n){return Object.prototype.toString.call(n)==="[object Boolean]"}var __e=new Do("tag:yaml.org,2002:bool",{kind:"scalar",resolve:OWe,construct:FWe,predicate:BWe,represent:{lowercase:function(n){return n?"true":"false"},uppercase:function(n){return n?"TRUE":"FALSE"},camelcase:function(n){return n?"True":"False"}},defaultStyle:"lowercase"});function WWe(n){return 48<=n&&n<=57||65<=n&&n<=70||97<=n&&n<=102}function HWe(n){return 48<=n&&n<=55}function VWe(n){return 48<=n&&n<=57}function zWe(n){if(n===null)return!1;var e=n.length,t=0,i=!1,s;if(!e)return!1;if(s=n[t],(s==="-"||s==="+")&&(s=n[++t]),s==="0"){if(t+1===e)return!0;if(s=n[++t],s==="b"){for(t++;t<e;t++)if(s=n[t],s!=="_"){if(s!=="0"&&s!=="1")return!1;i=!0}return i&&s!=="_"}if(s==="x"){for(t++;t<e;t++)if(s=n[t],s!=="_"){if(!WWe(n.charCodeAt(t)))return!1;i=!0}return i&&s!=="_"}if(s==="o"){for(t++;t<e;t++)if(s=n[t],s!=="_"){if(!HWe(n.charCodeAt(t)))return!1;i=!0}return i&&s!=="_"}}if(s==="_")return!1;for(;t<e;t++)if(s=n[t],s!=="_"){if(!VWe(n.charCodeAt(t)))return!1;i=!0}return!(!i||s==="_")}function UWe(n){var e=n,t=1,i;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),i=e[0],(i==="-"||i==="+")&&(i==="-"&&(t=-1),e=e.slice(1),i=e[0]),e==="0")return 0;if(i==="0"){if(e[1]==="b")return t*parseInt(e.slice(2),2);if(e[1]==="x")return t*parseInt(e.slice(2),16);if(e[1]==="o")return t*parseInt(e.slice(2),8)}return t*parseInt(e,10)}function $We(n){return Object.prototype.toString.call(n)==="[object Number]"&&n%1===0&&!Ar.isNegativeZero(n)}var v_e=new Do("tag:yaml.org,2002:int",{kind:"scalar",resolve:zWe,construct:UWe,predicate:$We,represent:{binary:function(n){return n>=0?"0b"+n.toString(2):"-0b"+n.toString(2).slice(1)},octal:function(n){return n>=0?"0o"+n.toString(8):"-0o"+n.toString(8).slice(1)},decimal:function(n){return n.toString(10)},hexadecimal:function(n){return n>=0?"0x"+n.toString(16).toUpperCase():"-0x"+n.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),jWe=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function KWe(n){return!(n===null||!jWe.test(n)||n[n.length-1]==="_")}function qWe(n){var e,t;return e=n.replace(/_/g,"").toLowerCase(),t=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?t===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:t*parseFloat(e,10)}var GWe=/^[-+]?[0-9]+e/;function YWe(n,e){var t;if(isNaN(n))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===n)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===n)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Ar.isNegativeZero(n))return"-0.0";return t=n.toString(10),GWe.test(t)?t.replace("e",".e"):t}function ZWe(n){return Object.prototype.toString.call(n)==="[object Number]"&&(n%1!==0||Ar.isNegativeZero(n))}var b_e=new Do("tag:yaml.org,2002:float",{kind:"scalar",resolve:KWe,construct:qWe,predicate:ZWe,represent:YWe,defaultStyle:"lowercase"}),w_e=p_e.extend({implicit:[m_e,__e,v_e,b_e]}),C_e=w_e,y_e=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),S_e=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function XWe(n){return n===null?!1:y_e.exec(n)!==null||S_e.exec(n)!==null}function QWe(n){var e,t,i,s,r,o,a,l=0,c=null,d,u,h;if(e=y_e.exec(n),e===null&&(e=S_e.exec(n)),e===null)throw new Error("Date resolve error");if(t=+e[1],i=+e[2]-1,s=+e[3],!e[4])return new Date(Date.UTC(t,i,s));if(r=+e[4],o=+e[5],a=+e[6],e[7]){for(l=e[7].slice(0,3);l.length<3;)l+="0";l=+l}return e[9]&&(d=+e[10],u=+(e[11]||0),c=(d*60+u)*6e4,e[9]==="-"&&(c=-c)),h=new Date(Date.UTC(t,i,s,r,o,a,l)),c&&h.setTime(h.getTime()-c),h}function JWe(n){return n.toISOString()}var x_e=new Do("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:XWe,construct:QWe,instanceOf:Date,represent:JWe});function e7e(n){return n==="<<"||n===null}var L_e=new Do("tag:yaml.org,2002:merge",{kind:"scalar",resolve:e7e}),lZ=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function t7e(n){if(n===null)return!1;var e,t,i=0,s=n.length,r=lZ;for(t=0;t<s;t++)if(e=r.indexOf(n.charAt(t)),!(e>64)){if(e<0)return!1;i+=6}return i%8===0}function i7e(n){var e,t,i=n.replace(/[\r\n=]/g,""),s=i.length,r=lZ,o=0,a=[];for(e=0;e<s;e++)e%4===0&&e&&(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)),o=o<<6|r.indexOf(i.charAt(e));return t=s%4*6,t===0?(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)):t===18?(a.push(o>>10&255),a.push(o>>2&255)):t===12&&a.push(o>>4&255),new Uint8Array(a)}function n7e(n){var e="",t=0,i,s,r=n.length,o=lZ;for(i=0;i<r;i++)i%3===0&&i&&(e+=o[t>>18&63],e+=o[t>>12&63],e+=o[t>>6&63],e+=o[t&63]),t=(t<<8)+n[i];return s=r%3,s===0?(e+=o[t>>18&63],e+=o[t>>12&63],e+=o[t>>6&63],e+=o[t&63]):s===2?(e+=o[t>>10&63],e+=o[t>>4&63],e+=o[t<<2&63],e+=o[64]):s===1&&(e+=o[t>>2&63],e+=o[t<<4&63],e+=o[64],e+=o[64]),e}function s7e(n){return Object.prototype.toString.call(n)==="[object Uint8Array]"}var k_e=new Do("tag:yaml.org,2002:binary",{kind:"scalar",resolve:t7e,construct:i7e,predicate:s7e,represent:n7e}),r7e=Object.prototype.hasOwnProperty,o7e=Object.prototype.toString;function a7e(n){if(n===null)return!0;var e=[],t,i,s,r,o,a=n;for(t=0,i=a.length;t<i;t+=1){if(s=a[t],o=!1,o7e.call(s)!=="[object Object]")return!1;for(r in s)if(r7e.call(s,r))if(!o)o=!0;else return!1;if(!o)return!1;if(e.indexOf(r)===-1)e.push(r);else return!1}return!0}function l7e(n){return n!==null?n:[]}var E_e=new Do("tag:yaml.org,2002:omap",{kind:"sequence",resolve:a7e,construct:l7e}),c7e=Object.prototype.toString;function d7e(n){if(n===null)return!0;var e,t,i,s,r,o=n;for(r=new Array(o.length),e=0,t=o.length;e<t;e+=1){if(i=o[e],c7e.call(i)!=="[object Object]"||(s=Object.keys(i),s.length!==1))return!1;r[e]=[s[0],i[s[0]]]}return!0}function u7e(n){if(n===null)return[];var e,t,i,s,r,o=n;for(r=new Array(o.length),e=0,t=o.length;e<t;e+=1)i=o[e],s=Object.keys(i),r[e]=[s[0],i[s[0]]];return r}var I_e=new Do("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:d7e,construct:u7e}),h7e=Object.prototype.hasOwnProperty;function f7e(n){if(n===null)return!0;var e,t=n;for(e in t)if(h7e.call(t,e)&&t[e]!==null)return!1;return!0}function g7e(n){return n!==null?n:{}}var D_e=new Do("tag:yaml.org,2002:set",{kind:"mapping",resolve:f7e,construct:g7e}),cZ=C_e.extend({implicit:[x_e,L_e],explicit:[k_e,E_e,I_e,D_e]}),x_=Object.prototype.hasOwnProperty,MM=1,N_e=2,T_e=3,PM=4,f9=1,p7e=2,hre=3,m7e=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,_7e=/[\x85\u2028\u2029]/,v7e=/[,\[\]\{\}]/,R_e=/^(?:!|!!|![a-z\-]+!)$/i,A_e=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function fre(n){return Object.prototype.toString.call(n)}function qh(n){return n===10||n===13}function Fb(n){return n===9||n===32}function Rl(n){return n===9||n===32||n===10||n===13}function m1(n){return n===44||n===91||n===93||n===123||n===125}function b7e(n){var e;return 48<=n&&n<=57?n-48:(e=n|32,97<=e&&e<=102?e-97+10:-1)}function w7e(n){return n===120?2:n===117?4:n===85?8:0}function C7e(n){return 48<=n&&n<=57?n-48:-1}function gre(n){return n===48?"\0":n===97?"\x07":n===98?"\b":n===116||n===9?"	":n===110?`
`:n===118?"\v":n===102?"\f":n===114?"\r":n===101?"\x1B":n===32?" ":n===34?'"':n===47?"/":n===92?"\\":n===78?"":n===95?"":n===76?"\u2028":n===80?"\u2029":""}function y7e(n){return n<=65535?String.fromCharCode(n):String.fromCharCode((n-65536>>10)+55296,(n-65536&1023)+56320)}var M_e=new Array(256),P_e=new Array(256);for(var vC=0;vC<256;vC++)M_e[vC]=gre(vC)?1:0,P_e[vC]=gre(vC);function S7e(n,e){this.input=n,this.filename=e.filename||null,this.schema=e.schema||cZ,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=n.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function O_e(n,e){var t={name:n.filename,buffer:n.input.slice(0,-1),position:n.position,line:n.line,column:n.position-n.lineStart};return t.snippet=EWe(t),new Ha(e,t)}function Ht(n,e){throw O_e(n,e)}function OM(n,e){n.onWarning&&n.onWarning.call(null,O_e(n,e))}var pre={YAML:function(e,t,i){var s,r,o;e.version!==null&&Ht(e,"duplication of %YAML directive"),i.length!==1&&Ht(e,"YAML directive accepts exactly one argument"),s=/^([0-9]+)\.([0-9]+)$/.exec(i[0]),s===null&&Ht(e,"ill-formed argument of the YAML directive"),r=parseInt(s[1],10),o=parseInt(s[2],10),r!==1&&Ht(e,"unacceptable YAML version of the document"),e.version=i[0],e.checkLineBreaks=o<2,o!==1&&o!==2&&OM(e,"unsupported YAML version of the document")},TAG:function(e,t,i){var s,r;i.length!==2&&Ht(e,"TAG directive accepts exactly two arguments"),s=i[0],r=i[1],R_e.test(s)||Ht(e,"ill-formed tag handle (first argument) of the TAG directive"),x_.call(e.tagMap,s)&&Ht(e,'there is a previously declared suffix for "'+s+'" tag handle'),A_e.test(r)||Ht(e,"ill-formed tag prefix (second argument) of the TAG directive");try{r=decodeURIComponent(r)}catch{Ht(e,"tag prefix is malformed: "+r)}e.tagMap[s]=r}};function zm(n,e,t,i){var s,r,o,a;if(e<t){if(a=n.input.slice(e,t),i)for(s=0,r=a.length;s<r;s+=1)o=a.charCodeAt(s),o===9||32<=o&&o<=1114111||Ht(n,"expected valid JSON character");else m7e.test(a)&&Ht(n,"the stream contains non-printable characters");n.result+=a}}function mre(n,e,t,i){var s,r,o,a;for(Ar.isObject(t)||Ht(n,"cannot merge mappings; the provided source object is unacceptable"),s=Object.keys(t),o=0,a=s.length;o<a;o+=1)r=s[o],x_.call(e,r)||(e[r]=t[r],i[r]=!0)}function _1(n,e,t,i,s,r,o,a,l){var c,d;if(Array.isArray(s))for(s=Array.prototype.slice.call(s),c=0,d=s.length;c<d;c+=1)Array.isArray(s[c])&&Ht(n,"nested arrays are not supported inside keys"),typeof s=="object"&&fre(s[c])==="[object Object]"&&(s[c]="[object Object]");if(typeof s=="object"&&fre(s)==="[object Object]"&&(s="[object Object]"),s=String(s),e===null&&(e={}),i==="tag:yaml.org,2002:merge")if(Array.isArray(r))for(c=0,d=r.length;c<d;c+=1)mre(n,e,r[c],t);else mre(n,e,r,t);else!n.json&&!x_.call(t,s)&&x_.call(e,s)&&(n.line=o||n.line,n.lineStart=a||n.lineStart,n.position=l||n.position,Ht(n,"duplicated mapping key")),s==="__proto__"?Object.defineProperty(e,s,{configurable:!0,enumerable:!0,writable:!0,value:r}):e[s]=r,delete t[s];return e}function dZ(n){var e;e=n.input.charCodeAt(n.position),e===10?n.position++:e===13?(n.position++,n.input.charCodeAt(n.position)===10&&n.position++):Ht(n,"a line break is expected"),n.line+=1,n.lineStart=n.position,n.firstTabInLine=-1}function gr(n,e,t){for(var i=0,s=n.input.charCodeAt(n.position);s!==0;){for(;Fb(s);)s===9&&n.firstTabInLine===-1&&(n.firstTabInLine=n.position),s=n.input.charCodeAt(++n.position);if(e&&s===35)do s=n.input.charCodeAt(++n.position);while(s!==10&&s!==13&&s!==0);if(qh(s))for(dZ(n),s=n.input.charCodeAt(n.position),i++,n.lineIndent=0;s===32;)n.lineIndent++,s=n.input.charCodeAt(++n.position);else break}return t!==-1&&i!==0&&n.lineIndent<t&&OM(n,"deficient indentation"),i}function v3(n){var e=n.position,t;return t=n.input.charCodeAt(e),!!((t===45||t===46)&&t===n.input.charCodeAt(e+1)&&t===n.input.charCodeAt(e+2)&&(e+=3,t=n.input.charCodeAt(e),t===0||Rl(t)))}function uZ(n,e){e===1?n.result+=" ":e>1&&(n.result+=Ar.repeat(`
`,e-1))}function x7e(n,e,t){var i,s,r,o,a,l,c,d,u=n.kind,h=n.result,f;if(f=n.input.charCodeAt(n.position),Rl(f)||m1(f)||f===35||f===38||f===42||f===33||f===124||f===62||f===39||f===34||f===37||f===64||f===96||(f===63||f===45)&&(s=n.input.charCodeAt(n.position+1),Rl(s)||t&&m1(s)))return!1;for(n.kind="scalar",n.result="",r=o=n.position,a=!1;f!==0;){if(f===58){if(s=n.input.charCodeAt(n.position+1),Rl(s)||t&&m1(s))break}else if(f===35){if(i=n.input.charCodeAt(n.position-1),Rl(i))break}else{if(n.position===n.lineStart&&v3(n)||t&&m1(f))break;if(qh(f))if(l=n.line,c=n.lineStart,d=n.lineIndent,gr(n,!1,-1),n.lineIndent>=e){a=!0,f=n.input.charCodeAt(n.position);continue}else{n.position=o,n.line=l,n.lineStart=c,n.lineIndent=d;break}}a&&(zm(n,r,o,!1),uZ(n,n.line-l),r=o=n.position,a=!1),Fb(f)||(o=n.position+1),f=n.input.charCodeAt(++n.position)}return zm(n,r,o,!1),n.result?!0:(n.kind=u,n.result=h,!1)}function L7e(n,e){var t,i,s;if(t=n.input.charCodeAt(n.position),t!==39)return!1;for(n.kind="scalar",n.result="",n.position++,i=s=n.position;(t=n.input.charCodeAt(n.position))!==0;)if(t===39)if(zm(n,i,n.position,!0),t=n.input.charCodeAt(++n.position),t===39)i=n.position,n.position++,s=n.position;else return!0;else qh(t)?(zm(n,i,s,!0),uZ(n,gr(n,!1,e)),i=s=n.position):n.position===n.lineStart&&v3(n)?Ht(n,"unexpected end of the document within a single quoted scalar"):(n.position++,s=n.position);Ht(n,"unexpected end of the stream within a single quoted scalar")}function k7e(n,e){var t,i,s,r,o,a;if(a=n.input.charCodeAt(n.position),a!==34)return!1;for(n.kind="scalar",n.result="",n.position++,t=i=n.position;(a=n.input.charCodeAt(n.position))!==0;){if(a===34)return zm(n,t,n.position,!0),n.position++,!0;if(a===92){if(zm(n,t,n.position,!0),a=n.input.charCodeAt(++n.position),qh(a))gr(n,!1,e);else if(a<256&&M_e[a])n.result+=P_e[a],n.position++;else if((o=w7e(a))>0){for(s=o,r=0;s>0;s--)a=n.input.charCodeAt(++n.position),(o=b7e(a))>=0?r=(r<<4)+o:Ht(n,"expected hexadecimal character");n.result+=y7e(r),n.position++}else Ht(n,"unknown escape sequence");t=i=n.position}else qh(a)?(zm(n,t,i,!0),uZ(n,gr(n,!1,e)),t=i=n.position):n.position===n.lineStart&&v3(n)?Ht(n,"unexpected end of the document within a double quoted scalar"):(n.position++,i=n.position)}Ht(n,"unexpected end of the stream within a double quoted scalar")}function E7e(n,e){var t=!0,i,s,r,o=n.tag,a,l=n.anchor,c,d,u,h,f,g=Object.create(null),p,_,w,b;if(b=n.input.charCodeAt(n.position),b===91)d=93,f=!1,a=[];else if(b===123)d=125,f=!0,a={};else return!1;for(n.anchor!==null&&(n.anchorMap[n.anchor]=a),b=n.input.charCodeAt(++n.position);b!==0;){if(gr(n,!0,e),b=n.input.charCodeAt(n.position),b===d)return n.position++,n.tag=o,n.anchor=l,n.kind=f?"mapping":"sequence",n.result=a,!0;t?b===44&&Ht(n,"expected the node content, but found ','"):Ht(n,"missed comma between flow collection entries"),_=p=w=null,u=h=!1,b===63&&(c=n.input.charCodeAt(n.position+1),Rl(c)&&(u=h=!0,n.position++,gr(n,!0,e))),i=n.line,s=n.lineStart,r=n.position,yS(n,e,MM,!1,!0),_=n.tag,p=n.result,gr(n,!0,e),b=n.input.charCodeAt(n.position),(h||n.line===i)&&b===58&&(u=!0,b=n.input.charCodeAt(++n.position),gr(n,!0,e),yS(n,e,MM,!1,!0),w=n.result),f?_1(n,a,g,_,p,w,i,s,r):u?a.push(_1(n,null,g,_,p,w,i,s,r)):a.push(p),gr(n,!0,e),b=n.input.charCodeAt(n.position),b===44?(t=!0,b=n.input.charCodeAt(++n.position)):t=!1}Ht(n,"unexpected end of the stream within a flow collection")}function I7e(n,e){var t,i,s=f9,r=!1,o=!1,a=e,l=0,c=!1,d,u;if(u=n.input.charCodeAt(n.position),u===124)i=!1;else if(u===62)i=!0;else return!1;for(n.kind="scalar",n.result="";u!==0;)if(u=n.input.charCodeAt(++n.position),u===43||u===45)f9===s?s=u===43?hre:p7e:Ht(n,"repeat of a chomping mode identifier");else if((d=C7e(u))>=0)d===0?Ht(n,"bad explicit indentation width of a block scalar; it cannot be less than one"):o?Ht(n,"repeat of an indentation width identifier"):(a=e+d-1,o=!0);else break;if(Fb(u)){do u=n.input.charCodeAt(++n.position);while(Fb(u));if(u===35)do u=n.input.charCodeAt(++n.position);while(!qh(u)&&u!==0)}for(;u!==0;){for(dZ(n),n.lineIndent=0,u=n.input.charCodeAt(n.position);(!o||n.lineIndent<a)&&u===32;)n.lineIndent++,u=n.input.charCodeAt(++n.position);if(!o&&n.lineIndent>a&&(a=n.lineIndent),qh(u)){l++;continue}if(n.lineIndent<a){s===hre?n.result+=Ar.repeat(`
`,r?1+l:l):s===f9&&r&&(n.result+=`
`);break}for(i?Fb(u)?(c=!0,n.result+=Ar.repeat(`
`,r?1+l:l)):c?(c=!1,n.result+=Ar.repeat(`
`,l+1)):l===0?r&&(n.result+=" "):n.result+=Ar.repeat(`
`,l):n.result+=Ar.repeat(`
`,r?1+l:l),r=!0,o=!0,l=0,t=n.position;!qh(u)&&u!==0;)u=n.input.charCodeAt(++n.position);zm(n,t,n.position,!1)}return!0}function _re(n,e){var t,i=n.tag,s=n.anchor,r=[],o,a=!1,l;if(n.firstTabInLine!==-1)return!1;for(n.anchor!==null&&(n.anchorMap[n.anchor]=r),l=n.input.charCodeAt(n.position);l!==0&&(n.firstTabInLine!==-1&&(n.position=n.firstTabInLine,Ht(n,"tab characters must not be used in indentation")),!(l!==45||(o=n.input.charCodeAt(n.position+1),!Rl(o))));){if(a=!0,n.position++,gr(n,!0,-1)&&n.lineIndent<=e){r.push(null),l=n.input.charCodeAt(n.position);continue}if(t=n.line,yS(n,e,T_e,!1,!0),r.push(n.result),gr(n,!0,-1),l=n.input.charCodeAt(n.position),(n.line===t||n.lineIndent>e)&&l!==0)Ht(n,"bad indentation of a sequence entry");else if(n.lineIndent<e)break}return a?(n.tag=i,n.anchor=s,n.kind="sequence",n.result=r,!0):!1}function D7e(n,e,t){var i,s,r,o,a,l,c=n.tag,d=n.anchor,u={},h=Object.create(null),f=null,g=null,p=null,_=!1,w=!1,b;if(n.firstTabInLine!==-1)return!1;for(n.anchor!==null&&(n.anchorMap[n.anchor]=u),b=n.input.charCodeAt(n.position);b!==0;){if(!_&&n.firstTabInLine!==-1&&(n.position=n.firstTabInLine,Ht(n,"tab characters must not be used in indentation")),i=n.input.charCodeAt(n.position+1),r=n.line,(b===63||b===58)&&Rl(i))b===63?(_&&(_1(n,u,h,f,g,null,o,a,l),f=g=p=null),w=!0,_=!0,s=!0):_?(_=!1,s=!0):Ht(n,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),n.position+=1,b=i;else{if(o=n.line,a=n.lineStart,l=n.position,!yS(n,t,N_e,!1,!0))break;if(n.line===r){for(b=n.input.charCodeAt(n.position);Fb(b);)b=n.input.charCodeAt(++n.position);if(b===58)b=n.input.charCodeAt(++n.position),Rl(b)||Ht(n,"a whitespace character is expected after the key-value separator within a block mapping"),_&&(_1(n,u,h,f,g,null,o,a,l),f=g=p=null),w=!0,_=!1,s=!1,f=n.tag,g=n.result;else if(w)Ht(n,"can not read an implicit mapping pair; a colon is missed");else return n.tag=c,n.anchor=d,!0}else if(w)Ht(n,"can not read a block mapping entry; a multiline key may not be an implicit key");else return n.tag=c,n.anchor=d,!0}if((n.line===r||n.lineIndent>e)&&(_&&(o=n.line,a=n.lineStart,l=n.position),yS(n,e,PM,!0,s)&&(_?g=n.result:p=n.result),_||(_1(n,u,h,f,g,p,o,a,l),f=g=p=null),gr(n,!0,-1),b=n.input.charCodeAt(n.position)),(n.line===r||n.lineIndent>e)&&b!==0)Ht(n,"bad indentation of a mapping entry");else if(n.lineIndent<e)break}return _&&_1(n,u,h,f,g,null,o,a,l),w&&(n.tag=c,n.anchor=d,n.kind="mapping",n.result=u),w}function N7e(n){var e,t=!1,i=!1,s,r,o;if(o=n.input.charCodeAt(n.position),o!==33)return!1;if(n.tag!==null&&Ht(n,"duplication of a tag property"),o=n.input.charCodeAt(++n.position),o===60?(t=!0,o=n.input.charCodeAt(++n.position)):o===33?(i=!0,s="!!",o=n.input.charCodeAt(++n.position)):s="!",e=n.position,t){do o=n.input.charCodeAt(++n.position);while(o!==0&&o!==62);n.position<n.length?(r=n.input.slice(e,n.position),o=n.input.charCodeAt(++n.position)):Ht(n,"unexpected end of the stream within a verbatim tag")}else{for(;o!==0&&!Rl(o);)o===33&&(i?Ht(n,"tag suffix cannot contain exclamation marks"):(s=n.input.slice(e-1,n.position+1),R_e.test(s)||Ht(n,"named tag handle cannot contain such characters"),i=!0,e=n.position+1)),o=n.input.charCodeAt(++n.position);r=n.input.slice(e,n.position),v7e.test(r)&&Ht(n,"tag suffix cannot contain flow indicator characters")}r&&!A_e.test(r)&&Ht(n,"tag name cannot contain such characters: "+r);try{r=decodeURIComponent(r)}catch{Ht(n,"tag name is malformed: "+r)}return t?n.tag=r:x_.call(n.tagMap,s)?n.tag=n.tagMap[s]+r:s==="!"?n.tag="!"+r:s==="!!"?n.tag="tag:yaml.org,2002:"+r:Ht(n,'undeclared tag handle "'+s+'"'),!0}function T7e(n){var e,t;if(t=n.input.charCodeAt(n.position),t!==38)return!1;for(n.anchor!==null&&Ht(n,"duplication of an anchor property"),t=n.input.charCodeAt(++n.position),e=n.position;t!==0&&!Rl(t)&&!m1(t);)t=n.input.charCodeAt(++n.position);return n.position===e&&Ht(n,"name of an anchor node must contain at least one character"),n.anchor=n.input.slice(e,n.position),!0}function R7e(n){var e,t,i;if(i=n.input.charCodeAt(n.position),i!==42)return!1;for(i=n.input.charCodeAt(++n.position),e=n.position;i!==0&&!Rl(i)&&!m1(i);)i=n.input.charCodeAt(++n.position);return n.position===e&&Ht(n,"name of an alias node must contain at least one character"),t=n.input.slice(e,n.position),x_.call(n.anchorMap,t)||Ht(n,'unidentified alias "'+t+'"'),n.result=n.anchorMap[t],gr(n,!0,-1),!0}function yS(n,e,t,i,s){var r,o,a,l=1,c=!1,d=!1,u,h,f,g,p,_;if(n.listener!==null&&n.listener("open",n),n.tag=null,n.anchor=null,n.kind=null,n.result=null,r=o=a=PM===t||T_e===t,i&&gr(n,!0,-1)&&(c=!0,n.lineIndent>e?l=1:n.lineIndent===e?l=0:n.lineIndent<e&&(l=-1)),l===1)for(;N7e(n)||T7e(n);)gr(n,!0,-1)?(c=!0,a=r,n.lineIndent>e?l=1:n.lineIndent===e?l=0:n.lineIndent<e&&(l=-1)):a=!1;if(a&&(a=c||s),(l===1||PM===t)&&(MM===t||N_e===t?p=e:p=e+1,_=n.position-n.lineStart,l===1?a&&(_re(n,_)||D7e(n,_,p))||E7e(n,p)?d=!0:(o&&I7e(n,p)||L7e(n,p)||k7e(n,p)?d=!0:R7e(n)?(d=!0,(n.tag!==null||n.anchor!==null)&&Ht(n,"alias node should not have any properties")):x7e(n,p,MM===t)&&(d=!0,n.tag===null&&(n.tag="?")),n.anchor!==null&&(n.anchorMap[n.anchor]=n.result)):l===0&&(d=a&&_re(n,_))),n.tag===null)n.anchor!==null&&(n.anchorMap[n.anchor]=n.result);else if(n.tag==="?"){for(n.result!==null&&n.kind!=="scalar"&&Ht(n,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+n.kind+'"'),u=0,h=n.implicitTypes.length;u<h;u+=1)if(g=n.implicitTypes[u],g.resolve(n.result)){n.result=g.construct(n.result),n.tag=g.tag,n.anchor!==null&&(n.anchorMap[n.anchor]=n.result);break}}else if(n.tag!=="!"){if(x_.call(n.typeMap[n.kind||"fallback"],n.tag))g=n.typeMap[n.kind||"fallback"][n.tag];else for(g=null,f=n.typeMap.multi[n.kind||"fallback"],u=0,h=f.length;u<h;u+=1)if(n.tag.slice(0,f[u].tag.length)===f[u].tag){g=f[u];break}g||Ht(n,"unknown tag !<"+n.tag+">"),n.result!==null&&g.kind!==n.kind&&Ht(n,"unacceptable node kind for !<"+n.tag+'> tag; it should be "'+g.kind+'", not "'+n.kind+'"'),g.resolve(n.result,n.tag)?(n.result=g.construct(n.result,n.tag),n.anchor!==null&&(n.anchorMap[n.anchor]=n.result)):Ht(n,"cannot resolve a node with !<"+n.tag+"> explicit tag")}return n.listener!==null&&n.listener("close",n),n.tag!==null||n.anchor!==null||d}function A7e(n){var e=n.position,t,i,s,r=!1,o;for(n.version=null,n.checkLineBreaks=n.legacy,n.tagMap=Object.create(null),n.anchorMap=Object.create(null);(o=n.input.charCodeAt(n.position))!==0&&(gr(n,!0,-1),o=n.input.charCodeAt(n.position),!(n.lineIndent>0||o!==37));){for(r=!0,o=n.input.charCodeAt(++n.position),t=n.position;o!==0&&!Rl(o);)o=n.input.charCodeAt(++n.position);for(i=n.input.slice(t,n.position),s=[],i.length<1&&Ht(n,"directive name must not be less than one character in length");o!==0;){for(;Fb(o);)o=n.input.charCodeAt(++n.position);if(o===35){do o=n.input.charCodeAt(++n.position);while(o!==0&&!qh(o));break}if(qh(o))break;for(t=n.position;o!==0&&!Rl(o);)o=n.input.charCodeAt(++n.position);s.push(n.input.slice(t,n.position))}o!==0&&dZ(n),x_.call(pre,i)?pre[i](n,i,s):OM(n,'unknown document directive "'+i+'"')}if(gr(n,!0,-1),n.lineIndent===0&&n.input.charCodeAt(n.position)===45&&n.input.charCodeAt(n.position+1)===45&&n.input.charCodeAt(n.position+2)===45?(n.position+=3,gr(n,!0,-1)):r&&Ht(n,"directives end mark is expected"),yS(n,n.lineIndent-1,PM,!1,!0),gr(n,!0,-1),n.checkLineBreaks&&_7e.test(n.input.slice(e,n.position))&&OM(n,"non-ASCII line breaks are interpreted as content"),n.documents.push(n.result),n.position===n.lineStart&&v3(n)){n.input.charCodeAt(n.position)===46&&(n.position+=3,gr(n,!0,-1));return}if(n.position<n.length-1)Ht(n,"end of the stream or a document separator is expected");else return}function F_e(n,e){n=String(n),e=e||{},n.length!==0&&(n.charCodeAt(n.length-1)!==10&&n.charCodeAt(n.length-1)!==13&&(n+=`
`),n.charCodeAt(0)===65279&&(n=n.slice(1)));var t=new S7e(n,e),i=n.indexOf("\0");for(i!==-1&&(t.position=i,Ht(t,"null byte is not allowed in input")),t.input+="\0";t.input.charCodeAt(t.position)===32;)t.lineIndent+=1,t.position+=1;for(;t.position<t.length-1;)A7e(t);return t.documents}function M7e(n,e,t){e!==null&&typeof e=="object"&&typeof t>"u"&&(t=e,e=null);var i=F_e(n,t);if(typeof e!="function")return i;for(var s=0,r=i.length;s<r;s+=1)e(i[s])}function P7e(n,e){var t=F_e(n,e);if(t.length!==0){if(t.length===1)return t[0];throw new Ha("expected a single document in the stream, but found more")}}var O7e=M7e,F7e=P7e,B_e={loadAll:O7e,load:F7e},W_e=Object.prototype.toString,H_e=Object.prototype.hasOwnProperty,hZ=65279,B7e=9,wI=10,W7e=13,H7e=32,V7e=33,z7e=34,JH=35,U7e=37,$7e=38,j7e=39,K7e=42,V_e=44,q7e=45,FM=58,G7e=61,Y7e=62,Z7e=63,X7e=64,z_e=91,U_e=93,Q7e=96,$_e=123,J7e=124,j_e=125,ma={};ma[0]="\\0";ma[7]="\\a";ma[8]="\\b";ma[9]="\\t";ma[10]="\\n";ma[11]="\\v";ma[12]="\\f";ma[13]="\\r";ma[27]="\\e";ma[34]='\\"';ma[92]="\\\\";ma[133]="\\N";ma[160]="\\_";ma[8232]="\\L";ma[8233]="\\P";var e9e=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],t9e=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function i9e(n,e){var t,i,s,r,o,a,l;if(e===null)return{};for(t={},i=Object.keys(e),s=0,r=i.length;s<r;s+=1)o=i[s],a=String(e[o]),o.slice(0,2)==="!!"&&(o="tag:yaml.org,2002:"+o.slice(2)),l=n.compiledTypeMap.fallback[o],l&&H_e.call(l.styleAliases,a)&&(a=l.styleAliases[a]),t[o]=a;return t}function n9e(n){var e,t,i;if(e=n.toString(16).toUpperCase(),n<=255)t="x",i=2;else if(n<=65535)t="u",i=4;else if(n<=4294967295)t="U",i=8;else throw new Ha("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+t+Ar.repeat("0",i-e.length)+e}var s9e=1,CI=2;function r9e(n){this.schema=n.schema||cZ,this.indent=Math.max(1,n.indent||2),this.noArrayIndent=n.noArrayIndent||!1,this.skipInvalid=n.skipInvalid||!1,this.flowLevel=Ar.isNothing(n.flowLevel)?-1:n.flowLevel,this.styleMap=i9e(this.schema,n.styles||null),this.sortKeys=n.sortKeys||!1,this.lineWidth=n.lineWidth||80,this.noRefs=n.noRefs||!1,this.noCompatMode=n.noCompatMode||!1,this.condenseFlow=n.condenseFlow||!1,this.quotingType=n.quotingType==='"'?CI:s9e,this.forceQuotes=n.forceQuotes||!1,this.replacer=typeof n.replacer=="function"?n.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function vre(n,e){for(var t=Ar.repeat(" ",e),i=0,s=-1,r="",o,a=n.length;i<a;)s=n.indexOf(`
`,i),s===-1?(o=n.slice(i),i=a):(o=n.slice(i,s+1),i=s+1),o.length&&o!==`
`&&(r+=t),r+=o;return r}function eV(n,e){return`
`+Ar.repeat(" ",n.indent*e)}function o9e(n,e){var t,i,s;for(t=0,i=n.implicitTypes.length;t<i;t+=1)if(s=n.implicitTypes[t],s.resolve(e))return!0;return!1}function BM(n){return n===H7e||n===B7e}function yI(n){return 32<=n&&n<=126||161<=n&&n<=55295&&n!==8232&&n!==8233||57344<=n&&n<=65533&&n!==hZ||65536<=n&&n<=1114111}function bre(n){return yI(n)&&n!==hZ&&n!==W7e&&n!==wI}function wre(n,e,t){var i=bre(n),s=i&&!BM(n);return(t?i:i&&n!==V_e&&n!==z_e&&n!==U_e&&n!==$_e&&n!==j_e)&&n!==JH&&!(e===FM&&!s)||bre(e)&&!BM(e)&&n===JH||e===FM&&s}function a9e(n){return yI(n)&&n!==hZ&&!BM(n)&&n!==q7e&&n!==Z7e&&n!==FM&&n!==V_e&&n!==z_e&&n!==U_e&&n!==$_e&&n!==j_e&&n!==JH&&n!==$7e&&n!==K7e&&n!==V7e&&n!==J7e&&n!==G7e&&n!==Y7e&&n!==j7e&&n!==z7e&&n!==U7e&&n!==X7e&&n!==Q7e}function l9e(n){return!BM(n)&&n!==FM}function ok(n,e){var t=n.charCodeAt(e),i;return t>=55296&&t<=56319&&e+1<n.length&&(i=n.charCodeAt(e+1),i>=56320&&i<=57343)?(t-55296)*1024+i-56320+65536:t}function K_e(n){var e=/^\n* /;return e.test(n)}var q_e=1,tV=2,G_e=3,Y_e=4,qC=5;function c9e(n,e,t,i,s,r,o,a){var l,c=0,d=null,u=!1,h=!1,f=i!==-1,g=-1,p=a9e(ok(n,0))&&l9e(ok(n,n.length-1));if(e||o)for(l=0;l<n.length;c>=65536?l+=2:l++){if(c=ok(n,l),!yI(c))return qC;p=p&&wre(c,d,a),d=c}else{for(l=0;l<n.length;c>=65536?l+=2:l++){if(c=ok(n,l),c===wI)u=!0,f&&(h=h||l-g-1>i&&n[g+1]!==" ",g=l);else if(!yI(c))return qC;p=p&&wre(c,d,a),d=c}h=h||f&&l-g-1>i&&n[g+1]!==" "}return!u&&!h?p&&!o&&!s(n)?q_e:r===CI?qC:tV:t>9&&K_e(n)?qC:o?r===CI?qC:tV:h?Y_e:G_e}function d9e(n,e,t,i,s){n.dump=function(){if(e.length===0)return n.quotingType===CI?'""':"''";if(!n.noCompatMode&&(e9e.indexOf(e)!==-1||t9e.test(e)))return n.quotingType===CI?'"'+e+'"':"'"+e+"'";var r=n.indent*Math.max(1,t),o=n.lineWidth===-1?-1:Math.max(Math.min(n.lineWidth,40),n.lineWidth-r),a=i||n.flowLevel>-1&&t>=n.flowLevel;function l(c){return o9e(n,c)}switch(c9e(e,a,n.indent,o,l,n.quotingType,n.forceQuotes&&!i,s)){case q_e:return e;case tV:return"'"+e.replace(/'/g,"''")+"'";case G_e:return"|"+Cre(e,n.indent)+yre(vre(e,r));case Y_e:return">"+Cre(e,n.indent)+yre(vre(u9e(e,o),r));case qC:return'"'+h9e(e)+'"';default:throw new Ha("impossible error: invalid scalar style")}}()}function Cre(n,e){var t=K_e(n)?String(e):"",i=n[n.length-1]===`
`,s=i&&(n[n.length-2]===`
`||n===`
`),r=s?"+":i?"":"-";return t+r+`
`}function yre(n){return n[n.length-1]===`
`?n.slice(0,-1):n}function u9e(n,e){for(var t=/(\n+)([^\n]*)/g,i=function(){var c=n.indexOf(`
`);return c=c!==-1?c:n.length,t.lastIndex=c,Sre(n.slice(0,c),e)}(),s=n[0]===`
`||n[0]===" ",r,o;o=t.exec(n);){var a=o[1],l=o[2];r=l[0]===" ",i+=a+(!s&&!r&&l!==""?`
`:"")+Sre(l,e),s=r}return i}function Sre(n,e){if(n===""||n[0]===" ")return n;for(var t=/ [^ ]/g,i,s=0,r,o=0,a=0,l="";i=t.exec(n);)a=i.index,a-s>e&&(r=o>s?o:a,l+=`
`+n.slice(s,r),s=r+1),o=a;return l+=`
`,n.length-s>e&&o>s?l+=n.slice(s,o)+`
`+n.slice(o+1):l+=n.slice(s),l.slice(1)}function h9e(n){for(var e="",t=0,i,s=0;s<n.length;t>=65536?s+=2:s++)t=ok(n,s),i=ma[t],!i&&yI(t)?(e+=n[s],t>=65536&&(e+=n[s+1])):e+=i||n9e(t);return e}function f9e(n,e,t){var i="",s=n.tag,r,o,a;for(r=0,o=t.length;r<o;r+=1)a=t[r],n.replacer&&(a=n.replacer.call(t,String(r),a)),($g(n,e,a,!1,!1)||typeof a>"u"&&$g(n,e,null,!1,!1))&&(i!==""&&(i+=","+(n.condenseFlow?"":" ")),i+=n.dump);n.tag=s,n.dump="["+i+"]"}function xre(n,e,t,i){var s="",r=n.tag,o,a,l;for(o=0,a=t.length;o<a;o+=1)l=t[o],n.replacer&&(l=n.replacer.call(t,String(o),l)),($g(n,e+1,l,!0,!0,!1,!0)||typeof l>"u"&&$g(n,e+1,null,!0,!0,!1,!0))&&((!i||s!=="")&&(s+=eV(n,e)),n.dump&&wI===n.dump.charCodeAt(0)?s+="-":s+="- ",s+=n.dump);n.tag=r,n.dump=s||"[]"}function g9e(n,e,t){var i="",s=n.tag,r=Object.keys(t),o,a,l,c,d;for(o=0,a=r.length;o<a;o+=1)d="",i!==""&&(d+=", "),n.condenseFlow&&(d+='"'),l=r[o],c=t[l],n.replacer&&(c=n.replacer.call(t,l,c)),$g(n,e,l,!1,!1)&&(n.dump.length>1024&&(d+="? "),d+=n.dump+(n.condenseFlow?'"':"")+":"+(n.condenseFlow?"":" "),$g(n,e,c,!1,!1)&&(d+=n.dump,i+=d));n.tag=s,n.dump="{"+i+"}"}function p9e(n,e,t,i){var s="",r=n.tag,o=Object.keys(t),a,l,c,d,u,h;if(n.sortKeys===!0)o.sort();else if(typeof n.sortKeys=="function")o.sort(n.sortKeys);else if(n.sortKeys)throw new Ha("sortKeys must be a boolean or a function");for(a=0,l=o.length;a<l;a+=1)h="",(!i||s!=="")&&(h+=eV(n,e)),c=o[a],d=t[c],n.replacer&&(d=n.replacer.call(t,c,d)),$g(n,e+1,c,!0,!0,!0)&&(u=n.tag!==null&&n.tag!=="?"||n.dump&&n.dump.length>1024,u&&(n.dump&&wI===n.dump.charCodeAt(0)?h+="?":h+="? "),h+=n.dump,u&&(h+=eV(n,e)),$g(n,e+1,d,!0,u)&&(n.dump&&wI===n.dump.charCodeAt(0)?h+=":":h+=": ",h+=n.dump,s+=h));n.tag=r,n.dump=s||"{}"}function Lre(n,e,t){var i,s,r,o,a,l;for(s=t?n.explicitTypes:n.implicitTypes,r=0,o=s.length;r<o;r+=1)if(a=s[r],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof e=="object"&&e instanceof a.instanceOf)&&(!a.predicate||a.predicate(e))){if(t?a.multi&&a.representName?n.tag=a.representName(e):n.tag=a.tag:n.tag="?",a.represent){if(l=n.styleMap[a.tag]||a.defaultStyle,W_e.call(a.represent)==="[object Function]")i=a.represent(e,l);else if(H_e.call(a.represent,l))i=a.represent[l](e,l);else throw new Ha("!<"+a.tag+'> tag resolver accepts not "'+l+'" style');n.dump=i}return!0}return!1}function $g(n,e,t,i,s,r,o){n.tag=null,n.dump=t,Lre(n,t,!1)||Lre(n,t,!0);var a=W_e.call(n.dump),l=i,c;i&&(i=n.flowLevel<0||n.flowLevel>e);var d=a==="[object Object]"||a==="[object Array]",u,h;if(d&&(u=n.duplicates.indexOf(t),h=u!==-1),(n.tag!==null&&n.tag!=="?"||h||n.indent!==2&&e>0)&&(s=!1),h&&n.usedDuplicates[u])n.dump="*ref_"+u;else{if(d&&h&&!n.usedDuplicates[u]&&(n.usedDuplicates[u]=!0),a==="[object Object]")i&&Object.keys(n.dump).length!==0?(p9e(n,e,n.dump,s),h&&(n.dump="&ref_"+u+n.dump)):(g9e(n,e,n.dump),h&&(n.dump="&ref_"+u+" "+n.dump));else if(a==="[object Array]")i&&n.dump.length!==0?(n.noArrayIndent&&!o&&e>0?xre(n,e-1,n.dump,s):xre(n,e,n.dump,s),h&&(n.dump="&ref_"+u+n.dump)):(f9e(n,e,n.dump),h&&(n.dump="&ref_"+u+" "+n.dump));else if(a==="[object String]")n.tag!=="?"&&d9e(n,n.dump,e,r,l);else{if(a==="[object Undefined]")return!1;if(n.skipInvalid)return!1;throw new Ha("unacceptable kind of an object to dump "+a)}n.tag!==null&&n.tag!=="?"&&(c=encodeURI(n.tag[0]==="!"?n.tag.slice(1):n.tag).replace(/!/g,"%21"),n.tag[0]==="!"?c="!"+c:c.slice(0,18)==="tag:yaml.org,2002:"?c="!!"+c.slice(18):c="!<"+c+">",n.dump=c+" "+n.dump)}return!0}function m9e(n,e){var t=[],i=[],s,r;for(iV(n,t,i),s=0,r=i.length;s<r;s+=1)e.duplicates.push(t[i[s]]);e.usedDuplicates=new Array(r)}function iV(n,e,t){var i,s,r;if(n!==null&&typeof n=="object")if(s=e.indexOf(n),s!==-1)t.indexOf(s)===-1&&t.push(s);else if(e.push(n),Array.isArray(n))for(s=0,r=n.length;s<r;s+=1)iV(n[s],e,t);else for(i=Object.keys(n),s=0,r=i.length;s<r;s+=1)iV(n[i[s]],e,t)}function _9e(n,e){e=e||{};var t=new r9e(e);t.noRefs||m9e(n,t);var i=n;return t.replacer&&(i=t.replacer.call({"":i},"",i)),$g(t,0,i,!0,!0)?t.dump+`
`:""}var v9e=_9e,b9e={dump:v9e};function fZ(n,e){return function(){throw new Error("Function yaml."+n+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}var w9e=Do,C9e=u_e,y9e=p_e,S9e=w_e,x9e=C_e,L9e=cZ,Z_e=B_e.load,k9e=B_e.loadAll,E9e=b9e.dump,I9e=Ha,D9e={binary:k_e,float:b_e,map:g_e,null:m_e,pairs:I_e,set:D_e,timestamp:x_e,bool:__e,int:v_e,merge:L_e,omap:E_e,seq:f_e,str:h_e},N9e=fZ("safeLoad","load"),T9e=fZ("safeLoadAll","loadAll"),R9e=fZ("safeDump","dump"),X_e={Type:w9e,Schema:C9e,FAILSAFE_SCHEMA:y9e,JSON_SCHEMA:S9e,CORE_SCHEMA:x9e,DEFAULT_SCHEMA:L9e,load:Z_e,loadAll:k9e,dump:E9e,YAMLException:I9e,types:D9e,safeLoad:N9e,safeLoadAll:T9e,safeDump:R9e};const gs=A.forwardRef(({className:n,...e},t)=>k.jsx("div",{ref:t,className:vi("rounded-lg border bg-card text-card-foreground shadow-sm",n),...e}));gs.displayName="Card";const aa=A.forwardRef(({className:n,...e},t)=>k.jsx("div",{ref:t,className:vi("flex flex-col space-y-1.5 p-6",n),...e}));aa.displayName="CardHeader";const Va=A.forwardRef(({className:n,...e},t)=>k.jsx("h3",{ref:t,className:vi("text-2xl font-semibold leading-none tracking-tight",n),...e}));Va.displayName="CardTitle";const A9e=A.forwardRef(({className:n,...e},t)=>k.jsx("p",{ref:t,className:vi("text-sm text-muted-foreground",n),...e}));A9e.displayName="CardDescription";const ps=A.forwardRef(({className:n,...e},t)=>k.jsx("div",{ref:t,className:vi("p-6 pt-0",n),...e}));ps.displayName="CardContent";const M9e=A.forwardRef(({className:n,...e},t)=>k.jsx("div",{ref:t,className:vi("flex items-center p-6 pt-0",n),...e}));M9e.displayName="CardFooter";const P9e=s3("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),$n=A.forwardRef(({className:n,variant:e,size:t,asChild:i=!1,...s},r)=>{const o=i?i0:"button";return k.jsx(o,{className:vi(P9e({variant:e,size:t,className:n})),ref:r,...s})});$n.displayName="Button";function O9e(n,e=[]){let t=[];function i(r,o){const a=A.createContext(o),l=t.length;t=[...t,o];function c(u){const{scope:h,children:f,...g}=u,p=(h==null?void 0:h[n][l])||a,_=A.useMemo(()=>g,Object.values(g));return k.jsx(p.Provider,{value:_,children:f})}function d(u,h){const f=(h==null?void 0:h[n][l])||a,g=A.useContext(f);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${u}\` must be used within \`${r}\``)}return c.displayName=r+"Provider",[c,d]}const s=()=>{const r=t.map(o=>A.createContext(o));return function(a){const l=(a==null?void 0:a[n])||r;return A.useMemo(()=>({[`__scope${n}`]:{...a,[n]:l}}),[a,l])}};return s.scopeName=n,[i,F9e(s,...e)]}function F9e(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const i=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(r){const o=i.reduce((a,{useScope:l,scopeName:c})=>{const u=l(r)[`__scope${c}`];return{...a,...u}},{});return A.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}var B9e=A.createContext(void 0);function b3(n){const e=A.useContext(B9e);return n||e||"ltr"}var g9="rovingFocusGroup.onEntryFocus",W9e={bubbles:!1,cancelable:!0},w3="RovingFocusGroup",[nV,Q_e,H9e]=UY(w3),[V9e,J_e]=O9e(w3,[H9e]),[z9e,U9e]=V9e(w3),eve=A.forwardRef((n,e)=>k.jsx(nV.Provider,{scope:n.__scopeRovingFocusGroup,children:k.jsx(nV.Slot,{scope:n.__scopeRovingFocusGroup,children:k.jsx($9e,{...n,ref:e})})}));eve.displayName=w3;var $9e=A.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:i,loop:s=!1,dir:r,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:d=!1,...u}=n,h=A.useRef(null),f=Yi(e,h),g=b3(r),[p=null,_]=ef({prop:o,defaultProp:a,onChange:l}),[w,b]=A.useState(!1),y=ir(c),S=Q_e(t),x=A.useRef(!1),[E,D]=A.useState(0);return A.useEffect(()=>{const N=h.current;if(N)return N.addEventListener(g9,y),()=>N.removeEventListener(g9,y)},[y]),k.jsx(z9e,{scope:t,orientation:i,dir:g,loop:s,currentTabStopId:p,onItemFocus:A.useCallback(N=>_(N),[_]),onItemShiftTab:A.useCallback(()=>b(!0),[]),onFocusableItemAdd:A.useCallback(()=>D(N=>N+1),[]),onFocusableItemRemove:A.useCallback(()=>D(N=>N-1),[]),children:k.jsx(Zt.div,{tabIndex:w||E===0?-1:0,"data-orientation":i,...u,ref:f,style:{outline:"none",...n.style},onMouseDown:Dt(n.onMouseDown,()=>{x.current=!0}),onFocus:Dt(n.onFocus,N=>{const I=!x.current;if(N.target===N.currentTarget&&I&&!w){const H=new CustomEvent(g9,W9e);if(N.currentTarget.dispatchEvent(H),!H.defaultPrevented){const z=S().filter(oe=>oe.focusable),G=z.find(oe=>oe.active),J=z.find(oe=>oe.id===p),ne=[G,J,...z].filter(Boolean).map(oe=>oe.ref.current);nve(ne,d)}}x.current=!1}),onBlur:Dt(n.onBlur,()=>b(!1))})})}),tve="RovingFocusGroupItem",ive=A.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:i=!0,active:s=!1,tabStopId:r,...o}=n,a=Kh(),l=r||a,c=U9e(tve,t),d=c.currentTabStopId===l,u=Q_e(t),{onFocusableItemAdd:h,onFocusableItemRemove:f}=c;return A.useEffect(()=>{if(i)return h(),()=>f()},[i,h,f]),k.jsx(nV.ItemSlot,{scope:t,id:l,focusable:i,active:s,children:k.jsx(Zt.span,{tabIndex:d?0:-1,"data-orientation":c.orientation,...o,ref:e,onMouseDown:Dt(n.onMouseDown,g=>{i?c.onItemFocus(l):g.preventDefault()}),onFocus:Dt(n.onFocus,()=>c.onItemFocus(l)),onKeyDown:Dt(n.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){c.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const p=q9e(g,c.orientation,c.dir);if(p!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let w=u().filter(b=>b.focusable).map(b=>b.ref.current);if(p==="last")w.reverse();else if(p==="prev"||p==="next"){p==="prev"&&w.reverse();const b=w.indexOf(g.currentTarget);w=c.loop?G9e(w,b+1):w.slice(b+1)}setTimeout(()=>nve(w))}})})})});ive.displayName=tve;var j9e={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function K9e(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function q9e(n,e,t){const i=K9e(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(i))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(i)))return j9e[i]}function nve(n,e=!1){const t=document.activeElement;for(const i of n)if(i===t||(i.focus({preventScroll:e}),document.activeElement!==t))return}function G9e(n,e){return n.map((t,i)=>n[(e+i)%n.length])}var Y9e=eve,Z9e=ive,gZ="Tabs",[X9e,LEt]=cp(gZ,[J_e]),sve=J_e(),[Q9e,pZ]=X9e(gZ),rve=A.forwardRef((n,e)=>{const{__scopeTabs:t,value:i,onValueChange:s,defaultValue:r,orientation:o="horizontal",dir:a,activationMode:l="automatic",...c}=n,d=b3(a),[u,h]=ef({prop:i,onChange:s,defaultProp:r});return k.jsx(Q9e,{scope:t,baseId:Kh(),value:u,onValueChange:h,orientation:o,dir:d,activationMode:l,children:k.jsx(Zt.div,{dir:d,"data-orientation":o,...c,ref:e})})});rve.displayName=gZ;var ove="TabsList",ave=A.forwardRef((n,e)=>{const{__scopeTabs:t,loop:i=!0,...s}=n,r=pZ(ove,t),o=sve(t);return k.jsx(Y9e,{asChild:!0,...o,orientation:r.orientation,dir:r.dir,loop:i,children:k.jsx(Zt.div,{role:"tablist","aria-orientation":r.orientation,...s,ref:e})})});ave.displayName=ove;var lve="TabsTrigger",cve=A.forwardRef((n,e)=>{const{__scopeTabs:t,value:i,disabled:s=!1,...r}=n,o=pZ(lve,t),a=sve(t),l=hve(o.baseId,i),c=fve(o.baseId,i),d=i===o.value;return k.jsx(Z9e,{asChild:!0,...a,focusable:!s,active:d,children:k.jsx(Zt.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":c,"data-state":d?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:l,...r,ref:e,onMouseDown:Dt(n.onMouseDown,u=>{!s&&u.button===0&&u.ctrlKey===!1?o.onValueChange(i):u.preventDefault()}),onKeyDown:Dt(n.onKeyDown,u=>{[" ","Enter"].includes(u.key)&&o.onValueChange(i)}),onFocus:Dt(n.onFocus,()=>{const u=o.activationMode!=="manual";!d&&!s&&u&&o.onValueChange(i)})})})});cve.displayName=lve;var dve="TabsContent",uve=A.forwardRef((n,e)=>{const{__scopeTabs:t,value:i,forceMount:s,children:r,...o}=n,a=pZ(dve,t),l=hve(a.baseId,i),c=fve(a.baseId,i),d=i===a.value,u=A.useRef(d);return A.useEffect(()=>{const h=requestAnimationFrame(()=>u.current=!1);return()=>cancelAnimationFrame(h)},[]),k.jsx(Hc,{present:s||d,children:({present:h})=>k.jsx(Zt.div,{"data-state":d?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!h,id:c,tabIndex:0,...o,ref:e,style:{...n.style,animationDuration:u.current?"0s":void 0},children:h&&r})})});uve.displayName=dve;function hve(n,e){return`${n}-trigger-${e}`}function fve(n,e){return`${n}-content-${e}`}var J9e=rve,gve=ave,pve=cve,mve=uve;const e8e=J9e,_ve=A.forwardRef(({className:n,...e},t)=>k.jsx(gve,{ref:t,className:vi("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",n),...e}));_ve.displayName=gve.displayName;const GC=A.forwardRef(({className:n,...e},t)=>k.jsx(pve,{ref:t,className:vi("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",n),...e}));GC.displayName=pve.displayName;const YC=A.forwardRef(({className:n,...e},t)=>k.jsx(mve,{ref:t,className:vi("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n),...e}));YC.displayName=mve.displayName;const t8e=s3("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Lu({className:n,variant:e,...t}){return k.jsx("div",{className:vi(t8e({variant:e}),n),...t})}const C3=A.forwardRef(({className:n,...e},t)=>k.jsx("textarea",{className:vi("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:t,...e}));C3.displayName="Textarea";const ss=A.forwardRef(({className:n,type:e,...t},i)=>k.jsx("input",{type:e,className:vi("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:i,...t}));ss.displayName="Input";var i8e="Label",vve=A.forwardRef((n,e)=>k.jsx(Zt.label,{...n,ref:e,onMouseDown:t=>{var s;t.target.closest("button, input, select, textarea")||((s=n.onMouseDown)==null||s.call(n,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));vve.displayName=i8e;var bve=vve;const n8e=s3("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Di=A.forwardRef(({className:n,...e},t)=>k.jsx(bve,{ref:t,className:vi(n8e(),n),...e}));Di.displayName=bve.displayName;var s8e="Separator",kre="horizontal",r8e=["horizontal","vertical"],wve=A.forwardRef((n,e)=>{const{decorative:t,orientation:i=kre,...s}=n,r=o8e(i)?i:kre,a=t?{role:"none"}:{"aria-orientation":r==="vertical"?r:void 0,role:"separator"};return k.jsx(Zt.div,{"data-orientation":r,...a,...s,ref:e})});wve.displayName=s8e;function o8e(n){return r8e.includes(n)}var Cve=wve;const yve=A.forwardRef(({className:n,orientation:e="horizontal",decorative:t=!0,...i},s)=>k.jsx(Cve,{ref:s,decorative:t,orientation:e,className:vi("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",n),...i}));yve.displayName=Cve.displayName;const a8e=({apiInfo:n,setApiInfo:e})=>{var s,r,o;const t=(a,l)=>{e({...n,[a]:l})},i=(a,l)=>{e({...n,contact:{...n.contact,[a]:l}})};return k.jsxs("div",{className:"space-y-6",children:[k.jsxs("div",{className:"space-y-4",children:[k.jsxs("div",{children:[k.jsx(Di,{htmlFor:"title",className:"text-sm font-medium",children:"API Title *"}),k.jsx(ss,{id:"title",value:n.title,onChange:a=>t("title",a.target.value),placeholder:"e.g., ZohoDesk Ticket Support Agent",className:"mt-1"})]}),k.jsxs("div",{children:[k.jsx(Di,{htmlFor:"description",className:"text-sm font-medium",children:"Description"}),k.jsx(C3,{id:"description",value:n.description,onChange:a=>t("description",a.target.value),placeholder:"Brief description of your API",className:"mt-1 min-h-[80px]"})]}),k.jsxs("div",{children:[k.jsx(Di,{htmlFor:"version",className:"text-sm font-medium",children:"Version *"}),k.jsx(ss,{id:"version",value:n.version,onChange:a=>t("version",a.target.value),placeholder:"1.0.0",className:"mt-1"})]})]}),k.jsx(yve,{}),k.jsxs(gs,{className:"bg-gray-50/50",children:[k.jsx(aa,{className:"pb-3",children:k.jsx(Va,{className:"text-sm",children:"Contact Information"})}),k.jsxs(ps,{className:"space-y-3",children:[k.jsxs("div",{children:[k.jsx(Di,{htmlFor:"contactName",className:"text-sm",children:"Contact Name"}),k.jsx(ss,{id:"contactName",value:((s=n.contact)==null?void 0:s.name)||"",onChange:a=>i("name",a.target.value),placeholder:"e.g., pradeep",className:"mt-1"})]}),k.jsxs("div",{children:[k.jsx(Di,{htmlFor:"contactEmail",className:"text-sm",children:"Contact Email"}),k.jsx(ss,{id:"contactEmail",type:"email",value:((r=n.contact)==null?void 0:r.email)||"",onChange:a=>i("email",a.target.value),placeholder:"e.g., odelapradeep12@gmail.com",className:"mt-1"})]}),k.jsxs("div",{children:[k.jsx(Di,{htmlFor:"contactUrl",className:"text-sm",children:"Contact URL"}),k.jsx(ss,{id:"contactUrl",type:"url",value:((o=n.contact)==null?void 0:o.url)||"",onChange:a=>i("url",a.target.value),placeholder:"https://example.com",className:"mt-1"})]})]})]})]})},l8e=({servers:n,setServers:e})=>{const t=()=>{e([...n,{url:"",description:""}])},i=(r,o,a)=>{const l=[...n];l[r]={...l[r],[o]:a},e(l)},s=r=>{e(n.filter((o,a)=>a!==r))};return k.jsxs("div",{className:"space-y-4",children:[n.map((r,o)=>k.jsx(gs,{className:"bg-gray-50/50",children:k.jsxs(ps,{className:"pt-4",children:[k.jsxs("div",{className:"flex justify-between items-start mb-4",children:[k.jsxs("h4",{className:"font-medium text-sm",children:["Server ",o+1]}),k.jsx($n,{variant:"ghost",size:"sm",onClick:()=>s(o),className:"text-red-500 hover:text-red-700",children:k.jsx(Sd,{className:"w-4 h-4"})})]}),k.jsxs("div",{className:"space-y-3",children:[k.jsxs("div",{children:[k.jsx(Di,{className:"text-sm",children:"Server URL *"}),k.jsx(ss,{value:r.url,onChange:a=>i(o,"url",a.target.value),placeholder:"https://desk.localzoho.com",className:"mt-1"})]}),k.jsxs("div",{children:[k.jsx(Di,{className:"text-sm",children:"Description"}),k.jsx(ss,{value:r.description,onChange:a=>i(o,"description",a.target.value),placeholder:"Production server",className:"mt-1"})]})]})]})},o)),k.jsxs($n,{onClick:t,variant:"outline",className:"w-full",children:[k.jsx(Lc,{className:"w-4 h-4 mr-2"}),"Add Server"]})]})};function sV(n,[e,t]){return Math.min(t,Math.max(e,n))}var p9=0;function Sve(){A.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??Ere()),document.body.insertAdjacentElement("beforeend",n[1]??Ere()),p9++,()=>{p9===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),p9--}},[])}function Ere(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var m9="focusScope.autoFocusOnMount",_9="focusScope.autoFocusOnUnmount",Ire={bubbles:!1,cancelable:!0},c8e="FocusScope",mZ=A.forwardRef((n,e)=>{const{loop:t=!1,trapped:i=!1,onMountAutoFocus:s,onUnmountAutoFocus:r,...o}=n,[a,l]=A.useState(null),c=ir(s),d=ir(r),u=A.useRef(null),h=Yi(e,p=>l(p)),f=A.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;A.useEffect(()=>{if(i){let p=function(y){if(f.paused||!a)return;const S=y.target;a.contains(S)?u.current=S:Fp(u.current,{select:!0})},_=function(y){if(f.paused||!a)return;const S=y.relatedTarget;S!==null&&(a.contains(S)||Fp(u.current,{select:!0}))},w=function(y){if(document.activeElement===document.body)for(const x of y)x.removedNodes.length>0&&Fp(a)};document.addEventListener("focusin",p),document.addEventListener("focusout",_);const b=new MutationObserver(w);return a&&b.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",_),b.disconnect()}}},[i,a,f.paused]),A.useEffect(()=>{if(a){Nre.add(f);const p=document.activeElement;if(!a.contains(p)){const w=new CustomEvent(m9,Ire);a.addEventListener(m9,c),a.dispatchEvent(w),w.defaultPrevented||(d8e(p8e(xve(a)),{select:!0}),document.activeElement===p&&Fp(a))}return()=>{a.removeEventListener(m9,c),setTimeout(()=>{const w=new CustomEvent(_9,Ire);a.addEventListener(_9,d),a.dispatchEvent(w),w.defaultPrevented||Fp(p??document.body,{select:!0}),a.removeEventListener(_9,d),Nre.remove(f)},0)}}},[a,c,d,f]);const g=A.useCallback(p=>{if(!t&&!i||f.paused)return;const _=p.key==="Tab"&&!p.altKey&&!p.ctrlKey&&!p.metaKey,w=document.activeElement;if(_&&w){const b=p.currentTarget,[y,S]=u8e(b);y&&S?!p.shiftKey&&w===S?(p.preventDefault(),t&&Fp(y,{select:!0})):p.shiftKey&&w===y&&(p.preventDefault(),t&&Fp(S,{select:!0})):w===b&&p.preventDefault()}},[t,i,f.paused]);return k.jsx(Zt.div,{tabIndex:-1,...o,ref:h,onKeyDown:g})});mZ.displayName=c8e;function d8e(n,{select:e=!1}={}){const t=document.activeElement;for(const i of n)if(Fp(i,{select:e}),document.activeElement!==t)return}function u8e(n){const e=xve(n),t=Dre(e,n),i=Dre(e.reverse(),n);return[t,i]}function xve(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const s=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||s?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function Dre(n,e){for(const t of n)if(!h8e(t,{upTo:e}))return t}function h8e(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function f8e(n){return n instanceof HTMLInputElement&&"select"in n}function Fp(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&f8e(n)&&e&&n.select()}}var Nre=g8e();function g8e(){let n=[];return{add(e){const t=n[0];e!==t&&(t==null||t.pause()),n=Tre(n,e),n.unshift(e)},remove(e){var t;n=Tre(n,e),(t=n[0])==null||t.resume()}}}function Tre(n,e){const t=[...n],i=t.indexOf(e);return i!==-1&&t.splice(i,1),t}function p8e(n){return n.filter(e=>e.tagName!=="A")}function _Z(n){const e=A.useRef({value:n,previous:n});return A.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}var m8e=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},bC=new WeakMap,kR=new WeakMap,ER={},v9=0,Lve=function(n){return n&&(n.host||Lve(n.parentNode))},_8e=function(n,e){return e.map(function(t){if(n.contains(t))return t;var i=Lve(t);return i&&n.contains(i)?i:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},v8e=function(n,e,t,i){var s=_8e(e,Array.isArray(n)?n:[n]);ER[t]||(ER[t]=new WeakMap);var r=ER[t],o=[],a=new Set,l=new Set(s),c=function(u){!u||a.has(u)||(a.add(u),c(u.parentNode))};s.forEach(c);var d=function(u){!u||l.has(u)||Array.prototype.forEach.call(u.children,function(h){if(a.has(h))d(h);else try{var f=h.getAttribute(i),g=f!==null&&f!=="false",p=(bC.get(h)||0)+1,_=(r.get(h)||0)+1;bC.set(h,p),r.set(h,_),o.push(h),p===1&&g&&kR.set(h,!0),_===1&&h.setAttribute(t,"true"),g||h.setAttribute(i,"true")}catch(w){console.error("aria-hidden: cannot operate on ",h,w)}})};return d(e),a.clear(),v9++,function(){o.forEach(function(u){var h=bC.get(u)-1,f=r.get(u)-1;bC.set(u,h),r.set(u,f),h||(kR.has(u)||u.removeAttribute(i),kR.delete(u)),f||u.removeAttribute(t)}),v9--,v9||(bC=new WeakMap,bC=new WeakMap,kR=new WeakMap,ER={})}},kve=function(n,e,t){t===void 0&&(t="data-aria-hidden");var i=Array.from(Array.isArray(n)?n:[n]),s=m8e(n);return s?(i.push.apply(i,Array.from(s.querySelectorAll("[aria-live]"))),v8e(i,s,t,"aria-hidden")):function(){return null}},Mh=function(){return Mh=Object.assign||function(e){for(var t,i=1,s=arguments.length;i<s;i++){t=arguments[i];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Mh.apply(this,arguments)};function CN(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(t[i[s]]=n[i[s]]);return t}function b8e(n,e,t){if(t||arguments.length===2)for(var i=0,s=e.length,r;i<s;i++)(r||!(i in e))&&(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return n.concat(r||Array.prototype.slice.call(e))}var l2="right-scroll-bar-position",c2="width-before-scroll-bar",w8e="with-scroll-bars-hidden",C8e="--removed-body-scroll-bar-size";function b9(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function y8e(n,e){var t=A.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(i){var s=t.value;s!==i&&(t.value=i,t.callback(i,s))}}}})[0];return t.callback=e,t.facade}var S8e=typeof window<"u"?A.useLayoutEffect:A.useEffect,Rre=new WeakMap;function x8e(n,e){var t=y8e(null,function(i){return n.forEach(function(s){return b9(s,i)})});return S8e(function(){var i=Rre.get(t);if(i){var s=new Set(i),r=new Set(n),o=t.current;s.forEach(function(a){r.has(a)||b9(a,null)}),r.forEach(function(a){s.has(a)||b9(a,o)})}Rre.set(t,n)},[n]),t}function L8e(n){return n}function k8e(n,e){e===void 0&&(e=L8e);var t=[],i=!1,s={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(r){var o=e(r,i);return t.push(o),function(){t=t.filter(function(a){return a!==o})}},assignSyncMedium:function(r){for(i=!0;t.length;){var o=t;t=[],o.forEach(r)}t={push:function(a){return r(a)},filter:function(){return t}}},assignMedium:function(r){i=!0;var o=[];if(t.length){var a=t;t=[],a.forEach(r),o=t}var l=function(){var d=o;o=[],d.forEach(r)},c=function(){return Promise.resolve().then(l)};c(),t={push:function(d){o.push(d),c()},filter:function(d){return o=o.filter(d),t}}}};return s}function E8e(n){n===void 0&&(n={});var e=k8e(null);return e.options=Mh({async:!0,ssr:!1},n),e}var Eve=function(n){var e=n.sideCar,t=CN(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=e.read();if(!i)throw new Error("Sidecar medium not found");return A.createElement(i,Mh({},t))};Eve.isSideCarExport=!0;function I8e(n,e){return n.useMedium(e),Eve}var Ive=E8e(),w9=function(){},y3=A.forwardRef(function(n,e){var t=A.useRef(null),i=A.useState({onScrollCapture:w9,onWheelCapture:w9,onTouchMoveCapture:w9}),s=i[0],r=i[1],o=n.forwardProps,a=n.children,l=n.className,c=n.removeScrollBar,d=n.enabled,u=n.shards,h=n.sideCar,f=n.noIsolation,g=n.inert,p=n.allowPinchZoom,_=n.as,w=_===void 0?"div":_,b=n.gapMode,y=CN(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=h,x=x8e([t,e]),E=Mh(Mh({},y),s);return A.createElement(A.Fragment,null,d&&A.createElement(S,{sideCar:Ive,removeScrollBar:c,shards:u,noIsolation:f,inert:g,setCallbacks:r,allowPinchZoom:!!p,lockRef:t,gapMode:b}),o?A.cloneElement(A.Children.only(a),Mh(Mh({},E),{ref:x})):A.createElement(w,Mh({},E,{className:l,ref:x}),a))});y3.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};y3.classNames={fullWidth:c2,zeroRight:l2};var D8e=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function N8e(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=D8e();return e&&n.setAttribute("nonce",e),n}function T8e(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function R8e(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var A8e=function(){var n=0,e=null;return{add:function(t){n==0&&(e=N8e())&&(T8e(e,t),R8e(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},M8e=function(){var n=A8e();return function(e,t){A.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},Dve=function(){var n=M8e(),e=function(t){var i=t.styles,s=t.dynamic;return n(i,s),null};return e},P8e={left:0,top:0,right:0,gap:0},C9=function(n){return parseInt(n||"",10)||0},O8e=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],i=e[n==="padding"?"paddingTop":"marginTop"],s=e[n==="padding"?"paddingRight":"marginRight"];return[C9(t),C9(i),C9(s)]},F8e=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return P8e;var e=O8e(n),t=document.documentElement.clientWidth,i=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,i-t+e[2]-e[0])}},B8e=Dve(),py="data-scroll-locked",W8e=function(n,e,t,i){var s=n.left,r=n.top,o=n.right,a=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(w8e,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(a,"px ").concat(i,`;
  }
  body[`).concat(py,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(i,";"),t==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(r,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(i,`;
    `),t==="padding"&&"padding-right: ".concat(a,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(l2,` {
    right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(c2,` {
    margin-right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(l2," .").concat(l2,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(c2," .").concat(c2,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(py,`] {
    `).concat(C8e,": ").concat(a,`px;
  }
`)},Are=function(){var n=parseInt(document.body.getAttribute(py)||"0",10);return isFinite(n)?n:0},H8e=function(){A.useEffect(function(){return document.body.setAttribute(py,(Are()+1).toString()),function(){var n=Are()-1;n<=0?document.body.removeAttribute(py):document.body.setAttribute(py,n.toString())}},[])},V8e=function(n){var e=n.noRelative,t=n.noImportant,i=n.gapMode,s=i===void 0?"margin":i;H8e();var r=A.useMemo(function(){return F8e(s)},[s]);return A.createElement(B8e,{styles:W8e(r,!e,s,t?"":"!important")})},rV=!1;if(typeof window<"u")try{var IR=Object.defineProperty({},"passive",{get:function(){return rV=!0,!0}});window.addEventListener("test",IR,IR),window.removeEventListener("test",IR,IR)}catch{rV=!1}var wC=rV?{passive:!1}:!1,z8e=function(n){return n.tagName==="TEXTAREA"},Nve=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!z8e(n)&&t[e]==="visible")},U8e=function(n){return Nve(n,"overflowY")},$8e=function(n){return Nve(n,"overflowX")},Mre=function(n,e){var t=e.ownerDocument,i=e;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var s=Tve(n,i);if(s){var r=Rve(n,i),o=r[1],a=r[2];if(o>a)return!0}i=i.parentNode}while(i&&i!==t.body);return!1},j8e=function(n){var e=n.scrollTop,t=n.scrollHeight,i=n.clientHeight;return[e,t,i]},K8e=function(n){var e=n.scrollLeft,t=n.scrollWidth,i=n.clientWidth;return[e,t,i]},Tve=function(n,e){return n==="v"?U8e(e):$8e(e)},Rve=function(n,e){return n==="v"?j8e(e):K8e(e)},q8e=function(n,e){return n==="h"&&e==="rtl"?-1:1},G8e=function(n,e,t,i,s){var r=q8e(n,window.getComputedStyle(e).direction),o=r*i,a=t.target,l=e.contains(a),c=!1,d=o>0,u=0,h=0;do{var f=Rve(n,a),g=f[0],p=f[1],_=f[2],w=p-_-r*g;(g||w)&&Tve(n,a)&&(u+=w,h+=g),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(d&&(Math.abs(u)<1||!s)||!d&&(Math.abs(h)<1||!s))&&(c=!0),c},DR=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},Pre=function(n){return[n.deltaX,n.deltaY]},Ore=function(n){return n&&"current"in n?n.current:n},Y8e=function(n,e){return n[0]===e[0]&&n[1]===e[1]},Z8e=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},X8e=0,CC=[];function Q8e(n){var e=A.useRef([]),t=A.useRef([0,0]),i=A.useRef(),s=A.useState(X8e++)[0],r=A.useState(Dve)[0],o=A.useRef(n);A.useEffect(function(){o.current=n},[n]),A.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(s));var p=b8e([n.lockRef.current],(n.shards||[]).map(Ore),!0).filter(Boolean);return p.forEach(function(_){return _.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),p.forEach(function(_){return _.classList.remove("allow-interactivity-".concat(s))})}}},[n.inert,n.lockRef.current,n.shards]);var a=A.useCallback(function(p,_){if("touches"in p&&p.touches.length===2||p.type==="wheel"&&p.ctrlKey)return!o.current.allowPinchZoom;var w=DR(p),b=t.current,y="deltaX"in p?p.deltaX:b[0]-w[0],S="deltaY"in p?p.deltaY:b[1]-w[1],x,E=p.target,D=Math.abs(y)>Math.abs(S)?"h":"v";if("touches"in p&&D==="h"&&E.type==="range")return!1;var N=Mre(D,E);if(!N)return!0;if(N?x=D:(x=D==="v"?"h":"v",N=Mre(D,E)),!N)return!1;if(!i.current&&"changedTouches"in p&&(y||S)&&(i.current=x),!x)return!0;var I=i.current||x;return G8e(I,_,p,I==="h"?y:S,!0)},[]),l=A.useCallback(function(p){var _=p;if(!(!CC.length||CC[CC.length-1]!==r)){var w="deltaY"in _?Pre(_):DR(_),b=e.current.filter(function(x){return x.name===_.type&&(x.target===_.target||_.target===x.shadowParent)&&Y8e(x.delta,w)})[0];if(b&&b.should){_.cancelable&&_.preventDefault();return}if(!b){var y=(o.current.shards||[]).map(Ore).filter(Boolean).filter(function(x){return x.contains(_.target)}),S=y.length>0?a(_,y[0]):!o.current.noIsolation;S&&_.cancelable&&_.preventDefault()}}},[]),c=A.useCallback(function(p,_,w,b){var y={name:p,delta:_,target:w,should:b,shadowParent:J8e(w)};e.current.push(y),setTimeout(function(){e.current=e.current.filter(function(S){return S!==y})},1)},[]),d=A.useCallback(function(p){t.current=DR(p),i.current=void 0},[]),u=A.useCallback(function(p){c(p.type,Pre(p),p.target,a(p,n.lockRef.current))},[]),h=A.useCallback(function(p){c(p.type,DR(p),p.target,a(p,n.lockRef.current))},[]);A.useEffect(function(){return CC.push(r),n.setCallbacks({onScrollCapture:u,onWheelCapture:u,onTouchMoveCapture:h}),document.addEventListener("wheel",l,wC),document.addEventListener("touchmove",l,wC),document.addEventListener("touchstart",d,wC),function(){CC=CC.filter(function(p){return p!==r}),document.removeEventListener("wheel",l,wC),document.removeEventListener("touchmove",l,wC),document.removeEventListener("touchstart",d,wC)}},[]);var f=n.removeScrollBar,g=n.inert;return A.createElement(A.Fragment,null,g?A.createElement(r,{styles:Z8e(s)}):null,f?A.createElement(V8e,{gapMode:n.gapMode}):null)}function J8e(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const e6e=I8e(Ive,Q8e);var vZ=A.forwardRef(function(n,e){return A.createElement(y3,Mh({},n,{ref:e,sideCar:e6e}))});vZ.classNames=y3.classNames;var t6e=[" ","Enter","ArrowUp","ArrowDown"],i6e=[" ","Enter"],yN="Select",[S3,x3,n6e]=UY(yN),[Sx,kEt]=cp(yN,[n6e,l3]),L3=l3(),[s6e,X_]=Sx(yN),[r6e,o6e]=Sx(yN),Ave=n=>{const{__scopeSelect:e,children:t,open:i,defaultOpen:s,onOpenChange:r,value:o,defaultValue:a,onValueChange:l,dir:c,name:d,autoComplete:u,disabled:h,required:f,form:g}=n,p=L3(e),[_,w]=A.useState(null),[b,y]=A.useState(null),[S,x]=A.useState(!1),E=b3(c),[D=!1,N]=ef({prop:i,defaultProp:s,onChange:r}),[I,H]=ef({prop:o,defaultProp:a,onChange:l}),z=A.useRef(null),G=_?g||!!_.closest("form"):!0,[J,j]=A.useState(new Set),ne=Array.from(J).map(oe=>oe.props.value).join(";");return k.jsx(Rme,{...p,children:k.jsxs(s6e,{required:f,scope:e,trigger:_,onTriggerChange:w,valueNode:b,onValueNodeChange:y,valueNodeHasChildren:S,onValueNodeHasChildrenChange:x,contentId:Kh(),value:I,onValueChange:H,open:D,onOpenChange:N,dir:E,triggerPointerDownPosRef:z,disabled:h,children:[k.jsx(S3.Provider,{scope:e,children:k.jsx(r6e,{scope:n.__scopeSelect,onNativeOptionAdd:A.useCallback(oe=>{j(ve=>new Set(ve).add(oe))},[]),onNativeOptionRemove:A.useCallback(oe=>{j(ve=>{const te=new Set(ve);return te.delete(oe),te})},[]),children:t})}),G?k.jsxs(sbe,{"aria-hidden":!0,required:f,tabIndex:-1,name:d,autoComplete:u,value:I,onChange:oe=>H(oe.target.value),disabled:h,form:g,children:[I===void 0?k.jsx("option",{value:""}):null,Array.from(J)]},ne):null]})})};Ave.displayName=yN;var Mve="SelectTrigger",Pve=A.forwardRef((n,e)=>{const{__scopeSelect:t,disabled:i=!1,...s}=n,r=L3(t),o=X_(Mve,t),a=o.disabled||i,l=Yi(e,o.onTriggerChange),c=x3(t),d=A.useRef("touch"),[u,h,f]=rbe(p=>{const _=c().filter(y=>!y.disabled),w=_.find(y=>y.value===o.value),b=obe(_,p,w);b!==void 0&&o.onValueChange(b.value)}),g=p=>{a||(o.onOpenChange(!0),f()),p&&(o.triggerPointerDownPosRef.current={x:Math.round(p.pageX),y:Math.round(p.pageY)})};return k.jsx(Ame,{asChild:!0,...r,children:k.jsx(Zt.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":nbe(o.value)?"":void 0,...s,ref:l,onClick:Dt(s.onClick,p=>{p.currentTarget.focus(),d.current!=="mouse"&&g(p)}),onPointerDown:Dt(s.onPointerDown,p=>{d.current=p.pointerType;const _=p.target;_.hasPointerCapture(p.pointerId)&&_.releasePointerCapture(p.pointerId),p.button===0&&p.ctrlKey===!1&&p.pointerType==="mouse"&&(g(p),p.preventDefault())}),onKeyDown:Dt(s.onKeyDown,p=>{const _=u.current!=="";!(p.ctrlKey||p.altKey||p.metaKey)&&p.key.length===1&&h(p.key),!(_&&p.key===" ")&&t6e.includes(p.key)&&(g(),p.preventDefault())})})})});Pve.displayName=Mve;var Ove="SelectValue",Fve=A.forwardRef((n,e)=>{const{__scopeSelect:t,className:i,style:s,children:r,placeholder:o="",...a}=n,l=X_(Ove,t),{onValueNodeHasChildrenChange:c}=l,d=r!==void 0,u=Yi(e,l.onValueNodeChange);return co(()=>{c(d)},[c,d]),k.jsx(Zt.span,{...a,ref:u,style:{pointerEvents:"none"},children:nbe(l.value)?k.jsx(k.Fragment,{children:o}):r})});Fve.displayName=Ove;var a6e="SelectIcon",Bve=A.forwardRef((n,e)=>{const{__scopeSelect:t,children:i,...s}=n;return k.jsx(Zt.span,{"aria-hidden":!0,...s,ref:e,children:i||""})});Bve.displayName=a6e;var l6e="SelectPortal",Wve=n=>k.jsx(t3,{asChild:!0,...n});Wve.displayName=l6e;var s0="SelectContent",Hve=A.forwardRef((n,e)=>{const t=X_(s0,n.__scopeSelect),[i,s]=A.useState();if(co(()=>{s(new DocumentFragment)},[]),!t.open){const r=i;return r?F0.createPortal(k.jsx(Vve,{scope:n.__scopeSelect,children:k.jsx(S3.Slot,{scope:n.__scopeSelect,children:k.jsx("div",{children:n.children})})}),r):null}return k.jsx(zve,{...n,ref:e})});Hve.displayName=s0;var Qd=10,[Vve,Q_]=Sx(s0),c6e="SelectContentImpl",zve=A.forwardRef((n,e)=>{const{__scopeSelect:t,position:i="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:r,onPointerDownOutside:o,side:a,sideOffset:l,align:c,alignOffset:d,arrowPadding:u,collisionBoundary:h,collisionPadding:f,sticky:g,hideWhenDetached:p,avoidCollisions:_,...w}=n,b=X_(s0,t),[y,S]=A.useState(null),[x,E]=A.useState(null),D=Yi(e,Z=>S(Z)),[N,I]=A.useState(null),[H,z]=A.useState(null),G=x3(t),[J,j]=A.useState(!1),ne=A.useRef(!1);A.useEffect(()=>{if(y)return kve(y)},[y]),Sve();const oe=A.useCallback(Z=>{const[ae,...Le]=G().map(qe=>qe.ref.current),[Ae]=Le.slice(-1),Ue=document.activeElement;for(const qe of Z)if(qe===Ue||(qe==null||qe.scrollIntoView({block:"nearest"}),qe===ae&&x&&(x.scrollTop=0),qe===Ae&&x&&(x.scrollTop=x.scrollHeight),qe==null||qe.focus(),document.activeElement!==Ue))return},[G,x]),ve=A.useCallback(()=>oe([N,y]),[oe,N,y]);A.useEffect(()=>{J&&ve()},[J,ve]);const{onOpenChange:te,triggerPointerDownPosRef:ce}=b;A.useEffect(()=>{if(y){let Z={x:0,y:0};const ae=Ae=>{var Ue,qe;Z={x:Math.abs(Math.round(Ae.pageX)-(((Ue=ce.current)==null?void 0:Ue.x)??0)),y:Math.abs(Math.round(Ae.pageY)-(((qe=ce.current)==null?void 0:qe.y)??0))}},Le=Ae=>{Z.x<=10&&Z.y<=10?Ae.preventDefault():y.contains(Ae.target)||te(!1),document.removeEventListener("pointermove",ae),ce.current=null};return ce.current!==null&&(document.addEventListener("pointermove",ae),document.addEventListener("pointerup",Le,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ae),document.removeEventListener("pointerup",Le,{capture:!0})}}},[y,te,ce]),A.useEffect(()=>{const Z=()=>te(!1);return window.addEventListener("blur",Z),window.addEventListener("resize",Z),()=>{window.removeEventListener("blur",Z),window.removeEventListener("resize",Z)}},[te]);const[Ie,Ce]=rbe(Z=>{const ae=G().filter(Ue=>!Ue.disabled),Le=ae.find(Ue=>Ue.ref.current===document.activeElement),Ae=obe(ae,Z,Le);Ae&&setTimeout(()=>Ae.ref.current.focus())}),it=A.useCallback((Z,ae,Le)=>{const Ae=!ne.current&&!Le;(b.value!==void 0&&b.value===ae||Ae)&&(I(Z),Ae&&(ne.current=!0))},[b.value]),He=A.useCallback(()=>y==null?void 0:y.focus(),[y]),dt=A.useCallback((Z,ae,Le)=>{const Ae=!ne.current&&!Le;(b.value!==void 0&&b.value===ae||Ae)&&z(Z)},[b.value]),P=i==="popper"?oV:Uve,$=P===oV?{side:a,sideOffset:l,align:c,alignOffset:d,arrowPadding:u,collisionBoundary:h,collisionPadding:f,sticky:g,hideWhenDetached:p,avoidCollisions:_}:{};return k.jsx(Vve,{scope:t,content:y,viewport:x,onViewportChange:E,itemRefCallback:it,selectedItem:N,onItemLeave:He,itemTextRefCallback:dt,focusSelectedItem:ve,selectedItemText:H,position:i,isPositioned:J,searchRef:Ie,children:k.jsx(vZ,{as:i0,allowPinchZoom:!0,children:k.jsx(mZ,{asChild:!0,trapped:b.open,onMountAutoFocus:Z=>{Z.preventDefault()},onUnmountAutoFocus:Dt(s,Z=>{var ae;(ae=b.trigger)==null||ae.focus({preventScroll:!0}),Z.preventDefault()}),children:k.jsx(vN,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:Z=>Z.preventDefault(),onDismiss:()=>b.onOpenChange(!1),children:k.jsx(P,{role:"listbox",id:b.contentId,"data-state":b.open?"open":"closed",dir:b.dir,onContextMenu:Z=>Z.preventDefault(),...w,...$,onPlaced:()=>j(!0),ref:D,style:{display:"flex",flexDirection:"column",outline:"none",...w.style},onKeyDown:Dt(w.onKeyDown,Z=>{const ae=Z.ctrlKey||Z.altKey||Z.metaKey;if(Z.key==="Tab"&&Z.preventDefault(),!ae&&Z.key.length===1&&Ce(Z.key),["ArrowUp","ArrowDown","Home","End"].includes(Z.key)){let Ae=G().filter(Ue=>!Ue.disabled).map(Ue=>Ue.ref.current);if(["ArrowUp","End"].includes(Z.key)&&(Ae=Ae.slice().reverse()),["ArrowUp","ArrowDown"].includes(Z.key)){const Ue=Z.target,qe=Ae.indexOf(Ue);Ae=Ae.slice(qe+1)}setTimeout(()=>oe(Ae)),Z.preventDefault()}})})})})})})});zve.displayName=c6e;var d6e="SelectItemAlignedPosition",Uve=A.forwardRef((n,e)=>{const{__scopeSelect:t,onPlaced:i,...s}=n,r=X_(s0,t),o=Q_(s0,t),[a,l]=A.useState(null),[c,d]=A.useState(null),u=Yi(e,D=>d(D)),h=x3(t),f=A.useRef(!1),g=A.useRef(!0),{viewport:p,selectedItem:_,selectedItemText:w,focusSelectedItem:b}=o,y=A.useCallback(()=>{if(r.trigger&&r.valueNode&&a&&c&&p&&_&&w){const D=r.trigger.getBoundingClientRect(),N=c.getBoundingClientRect(),I=r.valueNode.getBoundingClientRect(),H=w.getBoundingClientRect();if(r.dir!=="rtl"){const Ue=H.left-N.left,qe=I.left-Ue,vt=D.left-qe,Ot=D.width+vt,on=Math.max(Ot,N.width),Cs=window.innerWidth-Qd,Rn=sV(qe,[Qd,Math.max(Qd,Cs-on)]);a.style.minWidth=Ot+"px",a.style.left=Rn+"px"}else{const Ue=N.right-H.right,qe=window.innerWidth-I.right-Ue,vt=window.innerWidth-D.right-qe,Ot=D.width+vt,on=Math.max(Ot,N.width),Cs=window.innerWidth-Qd,Rn=sV(qe,[Qd,Math.max(Qd,Cs-on)]);a.style.minWidth=Ot+"px",a.style.right=Rn+"px"}const z=h(),G=window.innerHeight-Qd*2,J=p.scrollHeight,j=window.getComputedStyle(c),ne=parseInt(j.borderTopWidth,10),oe=parseInt(j.paddingTop,10),ve=parseInt(j.borderBottomWidth,10),te=parseInt(j.paddingBottom,10),ce=ne+oe+J+te+ve,Ie=Math.min(_.offsetHeight*5,ce),Ce=window.getComputedStyle(p),it=parseInt(Ce.paddingTop,10),He=parseInt(Ce.paddingBottom,10),dt=D.top+D.height/2-Qd,P=G-dt,$=_.offsetHeight/2,Z=_.offsetTop+$,ae=ne+oe+Z,Le=ce-ae;if(ae<=dt){const Ue=z.length>0&&_===z[z.length-1].ref.current;a.style.bottom="0px";const qe=c.clientHeight-p.offsetTop-p.offsetHeight,vt=Math.max(P,$+(Ue?He:0)+qe+ve),Ot=ae+vt;a.style.height=Ot+"px"}else{const Ue=z.length>0&&_===z[0].ref.current;a.style.top="0px";const vt=Math.max(dt,ne+p.offsetTop+(Ue?it:0)+$)+Le;a.style.height=vt+"px",p.scrollTop=ae-dt+p.offsetTop}a.style.margin=`${Qd}px 0`,a.style.minHeight=Ie+"px",a.style.maxHeight=G+"px",i==null||i(),requestAnimationFrame(()=>f.current=!0)}},[h,r.trigger,r.valueNode,a,c,p,_,w,r.dir,i]);co(()=>y(),[y]);const[S,x]=A.useState();co(()=>{c&&x(window.getComputedStyle(c).zIndex)},[c]);const E=A.useCallback(D=>{D&&g.current===!0&&(y(),b==null||b(),g.current=!1)},[y,b]);return k.jsx(h6e,{scope:t,contentWrapper:a,shouldExpandOnScrollRef:f,onScrollButtonChange:E,children:k.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S},children:k.jsx(Zt.div,{...s,ref:u,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});Uve.displayName=d6e;var u6e="SelectPopperPosition",oV=A.forwardRef((n,e)=>{const{__scopeSelect:t,align:i="start",collisionPadding:s=Qd,...r}=n,o=L3(t);return k.jsx(Mme,{...o,...r,ref:e,align:i,collisionPadding:s,style:{boxSizing:"border-box",...r.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});oV.displayName=u6e;var[h6e,bZ]=Sx(s0,{}),aV="SelectViewport",$ve=A.forwardRef((n,e)=>{const{__scopeSelect:t,nonce:i,...s}=n,r=Q_(aV,t),o=bZ(aV,t),a=Yi(e,r.onViewportChange),l=A.useRef(0);return k.jsxs(k.Fragment,{children:[k.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),k.jsx(S3.Slot,{scope:t,children:k.jsx(Zt.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:Dt(s.onScroll,c=>{const d=c.currentTarget,{contentWrapper:u,shouldExpandOnScrollRef:h}=o;if(h!=null&&h.current&&u){const f=Math.abs(l.current-d.scrollTop);if(f>0){const g=window.innerHeight-Qd*2,p=parseFloat(u.style.minHeight),_=parseFloat(u.style.height),w=Math.max(p,_);if(w<g){const b=w+f,y=Math.min(g,b),S=b-y;u.style.height=y+"px",u.style.bottom==="0px"&&(d.scrollTop=S>0?S:0,u.style.justifyContent="flex-end")}}}l.current=d.scrollTop})})})]})});$ve.displayName=aV;var jve="SelectGroup",[f6e,g6e]=Sx(jve),p6e=A.forwardRef((n,e)=>{const{__scopeSelect:t,...i}=n,s=Kh();return k.jsx(f6e,{scope:t,id:s,children:k.jsx(Zt.div,{role:"group","aria-labelledby":s,...i,ref:e})})});p6e.displayName=jve;var Kve="SelectLabel",qve=A.forwardRef((n,e)=>{const{__scopeSelect:t,...i}=n,s=g6e(Kve,t);return k.jsx(Zt.div,{id:s.id,...i,ref:e})});qve.displayName=Kve;var WM="SelectItem",[m6e,Gve]=Sx(WM),Yve=A.forwardRef((n,e)=>{const{__scopeSelect:t,value:i,disabled:s=!1,textValue:r,...o}=n,a=X_(WM,t),l=Q_(WM,t),c=a.value===i,[d,u]=A.useState(r??""),[h,f]=A.useState(!1),g=Yi(e,b=>{var y;return(y=l.itemRefCallback)==null?void 0:y.call(l,b,i,s)}),p=Kh(),_=A.useRef("touch"),w=()=>{s||(a.onValueChange(i),a.onOpenChange(!1))};if(i==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return k.jsx(m6e,{scope:t,value:i,disabled:s,textId:p,isSelected:c,onItemTextChange:A.useCallback(b=>{u(y=>y||((b==null?void 0:b.textContent)??"").trim())},[]),children:k.jsx(S3.ItemSlot,{scope:t,value:i,disabled:s,textValue:d,children:k.jsx(Zt.div,{role:"option","aria-labelledby":p,"data-highlighted":h?"":void 0,"aria-selected":c&&h,"data-state":c?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:g,onFocus:Dt(o.onFocus,()=>f(!0)),onBlur:Dt(o.onBlur,()=>f(!1)),onClick:Dt(o.onClick,()=>{_.current!=="mouse"&&w()}),onPointerUp:Dt(o.onPointerUp,()=>{_.current==="mouse"&&w()}),onPointerDown:Dt(o.onPointerDown,b=>{_.current=b.pointerType}),onPointerMove:Dt(o.onPointerMove,b=>{var y;_.current=b.pointerType,s?(y=l.onItemLeave)==null||y.call(l):_.current==="mouse"&&b.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Dt(o.onPointerLeave,b=>{var y;b.currentTarget===document.activeElement&&((y=l.onItemLeave)==null||y.call(l))}),onKeyDown:Dt(o.onKeyDown,b=>{var S;((S=l.searchRef)==null?void 0:S.current)!==""&&b.key===" "||(i6e.includes(b.key)&&w(),b.key===" "&&b.preventDefault())})})})})});Yve.displayName=WM;var ak="SelectItemText",Zve=A.forwardRef((n,e)=>{const{__scopeSelect:t,className:i,style:s,...r}=n,o=X_(ak,t),a=Q_(ak,t),l=Gve(ak,t),c=o6e(ak,t),[d,u]=A.useState(null),h=Yi(e,w=>u(w),l.onItemTextChange,w=>{var b;return(b=a.itemTextRefCallback)==null?void 0:b.call(a,w,l.value,l.disabled)}),f=d==null?void 0:d.textContent,g=A.useMemo(()=>k.jsx("option",{value:l.value,disabled:l.disabled,children:f},l.value),[l.disabled,l.value,f]),{onNativeOptionAdd:p,onNativeOptionRemove:_}=c;return co(()=>(p(g),()=>_(g)),[p,_,g]),k.jsxs(k.Fragment,{children:[k.jsx(Zt.span,{id:l.textId,...r,ref:h}),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?F0.createPortal(r.children,o.valueNode):null]})});Zve.displayName=ak;var Xve="SelectItemIndicator",Qve=A.forwardRef((n,e)=>{const{__scopeSelect:t,...i}=n;return Gve(Xve,t).isSelected?k.jsx(Zt.span,{"aria-hidden":!0,...i,ref:e}):null});Qve.displayName=Xve;var lV="SelectScrollUpButton",Jve=A.forwardRef((n,e)=>{const t=Q_(lV,n.__scopeSelect),i=bZ(lV,n.__scopeSelect),[s,r]=A.useState(!1),o=Yi(e,i.onScrollButtonChange);return co(()=>{if(t.viewport&&t.isPositioned){let a=function(){const c=l.scrollTop>0;r(c)};const l=t.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[t.viewport,t.isPositioned]),s?k.jsx(tbe,{...n,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=t;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});Jve.displayName=lV;var cV="SelectScrollDownButton",ebe=A.forwardRef((n,e)=>{const t=Q_(cV,n.__scopeSelect),i=bZ(cV,n.__scopeSelect),[s,r]=A.useState(!1),o=Yi(e,i.onScrollButtonChange);return co(()=>{if(t.viewport&&t.isPositioned){let a=function(){const c=l.scrollHeight-l.clientHeight,d=Math.ceil(l.scrollTop)<c;r(d)};const l=t.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[t.viewport,t.isPositioned]),s?k.jsx(tbe,{...n,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=t;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});ebe.displayName=cV;var tbe=A.forwardRef((n,e)=>{const{__scopeSelect:t,onAutoScroll:i,...s}=n,r=Q_("SelectScrollButton",t),o=A.useRef(null),a=x3(t),l=A.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return A.useEffect(()=>()=>l(),[l]),co(()=>{var d;const c=a().find(u=>u.ref.current===document.activeElement);(d=c==null?void 0:c.ref.current)==null||d.scrollIntoView({block:"nearest"})},[a]),k.jsx(Zt.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:Dt(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(i,50))}),onPointerMove:Dt(s.onPointerMove,()=>{var c;(c=r.onItemLeave)==null||c.call(r),o.current===null&&(o.current=window.setInterval(i,50))}),onPointerLeave:Dt(s.onPointerLeave,()=>{l()})})}),_6e="SelectSeparator",ibe=A.forwardRef((n,e)=>{const{__scopeSelect:t,...i}=n;return k.jsx(Zt.div,{"aria-hidden":!0,...i,ref:e})});ibe.displayName=_6e;var dV="SelectArrow",v6e=A.forwardRef((n,e)=>{const{__scopeSelect:t,...i}=n,s=L3(t),r=X_(dV,t),o=Q_(dV,t);return r.open&&o.position==="popper"?k.jsx(Pme,{...s,...i,ref:e}):null});v6e.displayName=dV;function nbe(n){return n===""||n===void 0}var sbe=A.forwardRef((n,e)=>{const{value:t,...i}=n,s=A.useRef(null),r=Yi(e,s),o=_Z(t);return A.useEffect(()=>{const a=s.current,l=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==t&&d){const u=new Event("change",{bubbles:!0});d.call(a,t),a.dispatchEvent(u)}},[o,t]),k.jsx(bN,{asChild:!0,children:k.jsx("select",{...i,ref:r,defaultValue:t})})});sbe.displayName="BubbleSelect";function rbe(n){const e=ir(n),t=A.useRef(""),i=A.useRef(0),s=A.useCallback(o=>{const a=t.current+o;e(a),function l(c){t.current=c,window.clearTimeout(i.current),c!==""&&(i.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),r=A.useCallback(()=>{t.current="",window.clearTimeout(i.current)},[]);return A.useEffect(()=>()=>window.clearTimeout(i.current),[]),[t,s,r]}function obe(n,e,t){const s=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,r=t?n.indexOf(t):-1;let o=b6e(n,Math.max(r,0));s.length===1&&(o=o.filter(c=>c!==t));const l=o.find(c=>c.textValue.toLowerCase().startsWith(s.toLowerCase()));return l!==t?l:void 0}function b6e(n,e){return n.map((t,i)=>n[(e+i)%n.length])}var w6e=Ave,abe=Pve,C6e=Fve,y6e=Bve,S6e=Wve,lbe=Hve,x6e=$ve,cbe=qve,dbe=Yve,L6e=Zve,k6e=Qve,ube=Jve,hbe=ebe,fbe=ibe;const pd=w6e,md=C6e,mc=A.forwardRef(({className:n,children:e,...t},i)=>k.jsxs(abe,{ref:i,className:vi("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n),...t,children:[e,k.jsx(y6e,{asChild:!0,children:k.jsx(zk,{className:"h-4 w-4 opacity-50"})})]}));mc.displayName=abe.displayName;const gbe=A.forwardRef(({className:n,...e},t)=>k.jsx(ube,{ref:t,className:vi("flex cursor-default items-center justify-center py-1",n),...e,children:k.jsx(e4e,{className:"h-4 w-4"})}));gbe.displayName=ube.displayName;const pbe=A.forwardRef(({className:n,...e},t)=>k.jsx(hbe,{ref:t,className:vi("flex cursor-default items-center justify-center py-1",n),...e,children:k.jsx(zk,{className:"h-4 w-4"})}));pbe.displayName=hbe.displayName;const _c=A.forwardRef(({className:n,children:e,position:t="popper",...i},s)=>k.jsx(S6e,{children:k.jsxs(lbe,{ref:s,className:vi("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:t,...i,children:[k.jsx(gbe,{}),k.jsx(x6e,{className:vi("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),k.jsx(pbe,{})]})}));_c.displayName=lbe.displayName;const E6e=A.forwardRef(({className:n,...e},t)=>k.jsx(cbe,{ref:t,className:vi("py-1.5 pl-8 pr-2 text-sm font-semibold",n),...e}));E6e.displayName=cbe.displayName;const Mi=A.forwardRef(({className:n,children:e,...t},i)=>k.jsxs(dbe,{ref:i,className:vi("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[k.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:k.jsx(k6e,{children:k.jsx(nme,{className:"h-4 w-4"})})}),k.jsx(L6e,{children:e})]}));Mi.displayName=dbe.displayName;const I6e=A.forwardRef(({className:n,...e},t)=>k.jsx(fbe,{ref:t,className:vi("-mx-1 my-1 h-px bg-muted",n),...e}));I6e.displayName=fbe.displayName;var wZ="Switch",[D6e,EEt]=cp(wZ),[N6e,T6e]=D6e(wZ),mbe=A.forwardRef((n,e)=>{const{__scopeSwitch:t,name:i,checked:s,defaultChecked:r,required:o,disabled:a,value:l="on",onCheckedChange:c,form:d,...u}=n,[h,f]=A.useState(null),g=Yi(e,y=>f(y)),p=A.useRef(!1),_=h?d||!!h.closest("form"):!0,[w=!1,b]=ef({prop:s,defaultProp:r,onChange:c});return k.jsxs(N6e,{scope:t,checked:w,disabled:a,children:[k.jsx(Zt.button,{type:"button",role:"switch","aria-checked":w,"aria-required":o,"data-state":bbe(w),"data-disabled":a?"":void 0,disabled:a,value:l,...u,ref:g,onClick:Dt(n.onClick,y=>{b(S=>!S),_&&(p.current=y.isPropagationStopped(),p.current||y.stopPropagation())})}),_&&k.jsx(R6e,{control:h,bubbles:!p.current,name:i,value:l,checked:w,required:o,disabled:a,form:d,style:{transform:"translateX(-100%)"}})]})});mbe.displayName=wZ;var _be="SwitchThumb",vbe=A.forwardRef((n,e)=>{const{__scopeSwitch:t,...i}=n,s=T6e(_be,t);return k.jsx(Zt.span,{"data-state":bbe(s.checked),"data-disabled":s.disabled?"":void 0,...i,ref:e})});vbe.displayName=_be;var R6e=n=>{const{control:e,checked:t,bubbles:i=!0,...s}=n,r=A.useRef(null),o=_Z(t),a=eZ(e);return A.useEffect(()=>{const l=r.current,c=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(c,"checked").set;if(o!==t&&u){const h=new Event("click",{bubbles:i});u.call(l,t),l.dispatchEvent(h)}},[o,t,i]),k.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...s,tabIndex:-1,ref:r,style:{...n.style,...a,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function bbe(n){return n?"checked":"unchecked"}var wbe=mbe,A6e=vbe;const Uk=A.forwardRef(({className:n,...e},t)=>k.jsx(wbe,{className:vi("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",n),...e,ref:t,children:k.jsx(A6e,{className:vi("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Uk.displayName=wbe.displayName;var CZ="Checkbox",[M6e,IEt]=cp(CZ),[P6e,O6e]=M6e(CZ),Cbe=A.forwardRef((n,e)=>{const{__scopeCheckbox:t,name:i,checked:s,defaultChecked:r,required:o,disabled:a,value:l="on",onCheckedChange:c,form:d,...u}=n,[h,f]=A.useState(null),g=Yi(e,S=>f(S)),p=A.useRef(!1),_=h?d||!!h.closest("form"):!0,[w=!1,b]=ef({prop:s,defaultProp:r,onChange:c}),y=A.useRef(w);return A.useEffect(()=>{const S=h==null?void 0:h.form;if(S){const x=()=>b(y.current);return S.addEventListener("reset",x),()=>S.removeEventListener("reset",x)}},[h,b]),k.jsxs(P6e,{scope:t,state:w,disabled:a,children:[k.jsx(Zt.button,{type:"button",role:"checkbox","aria-checked":Um(w)?"mixed":w,"aria-required":o,"data-state":xbe(w),"data-disabled":a?"":void 0,disabled:a,value:l,...u,ref:g,onKeyDown:Dt(n.onKeyDown,S=>{S.key==="Enter"&&S.preventDefault()}),onClick:Dt(n.onClick,S=>{b(x=>Um(x)?!0:!x),_&&(p.current=S.isPropagationStopped(),p.current||S.stopPropagation())})}),_&&k.jsx(F6e,{control:h,bubbles:!p.current,name:i,value:l,checked:w,required:o,disabled:a,form:d,style:{transform:"translateX(-100%)"},defaultChecked:Um(r)?!1:r})]})});Cbe.displayName=CZ;var ybe="CheckboxIndicator",Sbe=A.forwardRef((n,e)=>{const{__scopeCheckbox:t,forceMount:i,...s}=n,r=O6e(ybe,t);return k.jsx(Hc,{present:i||Um(r.state)||r.state===!0,children:k.jsx(Zt.span,{"data-state":xbe(r.state),"data-disabled":r.disabled?"":void 0,...s,ref:e,style:{pointerEvents:"none",...n.style}})})});Sbe.displayName=ybe;var F6e=n=>{const{control:e,checked:t,bubbles:i=!0,defaultChecked:s,...r}=n,o=A.useRef(null),a=_Z(t),l=eZ(e);A.useEffect(()=>{const d=o.current,u=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(u,"checked").set;if(a!==t&&f){const g=new Event("click",{bubbles:i});d.indeterminate=Um(t),f.call(d,Um(t)?!1:t),d.dispatchEvent(g)}},[a,t,i]);const c=A.useRef(Um(t)?!1:t);return k.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s??c.current,...r,tabIndex:-1,ref:o,style:{...n.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Um(n){return n==="indeterminate"}function xbe(n){return Um(n)?"indeterminate":n?"checked":"unchecked"}var Lbe=Cbe,B6e=Sbe;const HM=A.forwardRef(({className:n,...e},t)=>k.jsx(Lbe,{ref:t,className:vi("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",n),...e,children:k.jsx(B6e,{className:vi("flex items-center justify-center text-current"),children:k.jsx(nme,{className:"h-4 w-4"})})}));HM.displayName=Lbe.displayName;const W6e=({operation:n,onUpdate:e,schemas:t,securitySchemes:i,currentPath:s})=>{var _,w,b,y;const r=(S,x)=>{e({...n,[S]:x})};A.useEffect(()=>{const S=s.match(/\{([^}]+)\}/g);if(S){const x=n.parameters.filter(D=>D.in==="path"),E=[];if(S.forEach(D=>{const N=D.slice(1,-1);x.find(H=>H.name===N)||E.push({name:N,in:"path",required:!0,description:`ID of the ${N}`,schema:{type:"string"},"x-zia-agent-param-type":"system"})}),E.length>0){const D=n.parameters.filter(N=>N.in!=="path");r("parameters",[...x,...E,...D])}}},[s]);const o=()=>{const S={name:"",in:"query",required:!1,description:"",schema:{type:"string"}};r("parameters",[...n.parameters,S])},a=(S,x,E)=>{const D=[...n.parameters];x==="schema"?D[S]={...D[S],schema:E}:D[S]={...D[S],[x]:E},r("parameters",D)},l=S=>{r("parameters",n.parameters.filter((x,E)=>E!==S))},c=()=>{const S={statusCode:"200",description:""};r("responses",[...n.responses,S])},d=(S,x,E)=>{const D=[...n.responses];D[S]={...D[S],[x]:E},r("responses",D)},u=S=>{r("responses",n.responses.filter((x,E)=>E!==S))},h=S=>{S&&!n.tags.includes(S)&&r("tags",[...n.tags,S])},f=S=>{r("tags",n.tags.filter(x=>x!==S))},g=(S,x,E)=>{const D=[...n.security],N=D.findIndex(I=>Object.keys(I)[0]===S);if(E){const I={[S]:x};N>=0?D[N]=I:D.push(I)}else N>=0&&D.splice(N,1);r("security",D)},p=(S,x)=>{const E=n.requestBody||{required:!1,content:{"application/json":{schema:{},"x-zia-agent-param-type":"dynamic"}}};S==="required"?E.required=x:S==="schema"&&(E.content["application/json"].schema=x,E.content["application/json"]["x-zia-agent-param-type"]||(E.content["application/json"]["x-zia-agent-param-type"]="dynamic")),r("requestBody",E)};return k.jsxs("div",{className:"space-y-6",children:[k.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[k.jsxs("div",{children:[k.jsx(Di,{className:"text-sm",children:"Summary *"}),k.jsx(ss,{value:n.summary,onChange:S=>r("summary",S.target.value),placeholder:"desk List all tickets",className:"mt-1"})]}),k.jsxs("div",{children:[k.jsx(Di,{className:"text-sm",children:"Operation ID *"}),k.jsx(ss,{value:n.operationId,onChange:S=>r("operationId",S.target.value),placeholder:"desk25 listTickets",className:"mt-1"})]})]}),k.jsxs("div",{children:[k.jsx(Di,{className:"text-sm",children:"Description"}),k.jsx(C3,{value:n.description,onChange:S=>r("description",S.target.value),placeholder:"Detailed description of the operation",className:"mt-1"})]}),k.jsxs(gs,{className:"bg-gray-50/50",children:[k.jsx(aa,{className:"pb-3",children:k.jsx(Va,{className:"text-sm",children:"Tags"})}),k.jsxs(ps,{className:"space-y-3",children:[k.jsx("div",{className:"flex flex-wrap gap-2",children:n.tags.map(S=>k.jsxs(Lu,{variant:"secondary",className:"flex items-center gap-1",children:[S,k.jsx(Sd,{className:"w-3 h-3 cursor-pointer",onClick:()=>f(S)})]},S))}),k.jsx("div",{className:"flex gap-2",children:k.jsx(ss,{placeholder:"Add tag (press Enter)",onKeyPress:S=>{S.key==="Enter"&&(h(S.currentTarget.value),S.currentTarget.value="")}})})]})]}),k.jsxs(gs,{className:"bg-red-50/30",children:[k.jsx(aa,{className:"pb-3",children:k.jsx(Va,{className:"text-sm",children:"Security Requirements"})}),k.jsxs(ps,{className:"space-y-4",children:[i.map(S=>{var D;const x=n.security.some(N=>Object.keys(N)[0]===S.name),E=((D=n.security.find(N=>Object.keys(N)[0]===S.name))==null?void 0:D[S.name])||[];return k.jsx(gs,{className:"bg-white",children:k.jsxs(ps,{className:"pt-4",children:[k.jsx("div",{className:"flex items-center justify-between mb-3",children:k.jsxs("div",{className:"flex items-center space-x-2",children:[k.jsx(HM,{checked:x,onCheckedChange:N=>g(S.name,E,N)}),k.jsx(Di,{className:"font-medium",children:S.name}),k.jsx(Lu,{variant:"outline",children:S.type})]})}),x&&S.scopes&&Object.keys(S.scopes).length>0&&k.jsxs("div",{className:"mt-3",children:[k.jsx(Di,{className:"text-xs mb-2 block",children:"Required Scopes:"}),k.jsx("div",{className:"space-y-2",children:Object.entries(S.scopes).map(([N,I])=>k.jsxs("div",{className:"flex items-center space-x-2",children:[k.jsx(HM,{checked:E.includes(N),onCheckedChange:H=>{const z=H?[...E,N]:E.filter(G=>G!==N);g(S.name,z,!0)}}),k.jsx(Di,{className:"text-xs",children:N}),k.jsxs("span",{className:"text-xs text-gray-500",children:["- ",I]})]},N))})]})]})},S.name)}),i.length===0&&k.jsx("div",{className:"text-center py-4 text-gray-500 text-sm",children:"No security schemes defined. Add security schemes in the Security tab first."})]})]}),k.jsxs(gs,{className:"bg-purple-50/30",children:[k.jsx(aa,{className:"pb-3",children:k.jsx(Va,{className:"text-sm",children:"Request Body"})}),k.jsxs(ps,{className:"space-y-4",children:[k.jsxs("div",{className:"flex items-center space-x-2",children:[k.jsx(Uk,{checked:!!n.requestBody,onCheckedChange:S=>{S?p("required",!1):r("requestBody",void 0)}}),k.jsx(Di,{className:"text-sm",children:"Has Request Body"})]}),n.requestBody&&k.jsxs("div",{className:"space-y-3",children:[k.jsxs("div",{className:"flex items-center space-x-2",children:[k.jsx(Uk,{checked:n.requestBody.required,onCheckedChange:S=>p("required",S)}),k.jsx(Di,{className:"text-sm",children:"Required"})]}),k.jsxs("div",{children:[k.jsx(Di,{className:"text-sm",children:"Schema Reference"}),k.jsxs(pd,{value:((y=(b=(w=(_=n.requestBody.content)==null?void 0:_["application/json"])==null?void 0:w.schema)==null?void 0:b.$ref)==null?void 0:y.replace("#/components/schemas/",""))||"none",onValueChange:S=>p("schema",S==="none"?{}:{$ref:`#/components/schemas/${S}`}),children:[k.jsx(mc,{className:"mt-1",children:k.jsx(md,{placeholder:"Select schema"})}),k.jsxs(_c,{children:[k.jsx(Mi,{value:"none",children:"No schema"}),t.map(S=>k.jsx(Mi,{value:S.name,children:S.name},S.name))]})]})]})]})]})]}),k.jsxs(gs,{className:"bg-blue-50/30",children:[k.jsx(aa,{className:"pb-3",children:k.jsxs("div",{className:"flex justify-between items-center",children:[k.jsx(Va,{className:"text-sm",children:"Parameters"}),k.jsxs($n,{onClick:o,size:"sm",variant:"outline",children:[k.jsx(Lc,{className:"w-4 h-4 mr-1"}),"Add Parameter"]})]})}),k.jsx(ps,{className:"space-y-4",children:n.parameters.map((S,x)=>k.jsx(gs,{className:"bg-white",children:k.jsxs(ps,{className:"pt-4",children:[k.jsxs("div",{className:"flex justify-between items-start mb-3",children:[k.jsxs("h5",{className:"font-medium text-sm",children:["Parameter ",x+1,S.in==="path"&&k.jsx(Lu,{variant:"outline",className:"ml-2",children:"Path Param"})]}),k.jsx($n,{variant:"ghost",size:"sm",onClick:()=>l(x),className:"text-red-500",disabled:S.in==="path",children:k.jsx(Sd,{className:"w-4 h-4"})})]}),k.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[k.jsxs("div",{children:[k.jsx(Di,{className:"text-xs",children:"Name *"}),k.jsx(ss,{value:S.name,onChange:E=>a(x,"name",E.target.value),placeholder:"orgId",className:"mt-1",disabled:S.in==="path"})]}),k.jsxs("div",{children:[k.jsx(Di,{className:"text-xs",children:"Location *"}),k.jsxs(pd,{value:S.in,onValueChange:E=>a(x,"in",E),disabled:S.in==="path",children:[k.jsx(mc,{className:"mt-1",children:k.jsx(md,{})}),k.jsxs(_c,{children:[k.jsx(Mi,{value:"query",children:"Query"}),k.jsx(Mi,{value:"header",children:"Header"}),k.jsx(Mi,{value:"path",children:"Path"}),k.jsx(Mi,{value:"cookie",children:"Cookie"})]})]})]}),k.jsxs("div",{children:[k.jsx(Di,{className:"text-xs",children:"Type"}),k.jsxs(pd,{value:S.schema.type,onValueChange:E=>a(x,"schema",{type:E}),children:[k.jsx(mc,{className:"mt-1",children:k.jsx(md,{})}),k.jsxs(_c,{children:[k.jsx(Mi,{value:"string",children:"String"}),k.jsx(Mi,{value:"integer",children:"Integer"}),k.jsx(Mi,{value:"number",children:"Number"}),k.jsx(Mi,{value:"boolean",children:"Boolean"}),k.jsx(Mi,{value:"array",children:"Array"})]})]})]}),k.jsxs("div",{className:"flex items-center space-x-2 mt-6",children:[k.jsx(Uk,{checked:S.required,onCheckedChange:E=>a(x,"required",E),disabled:S.in==="path"}),k.jsx(Di,{className:"text-xs",children:"Required"})]})]}),k.jsxs("div",{className:"mt-3",children:[k.jsx(Di,{className:"text-xs",children:"Description"}),k.jsx(ss,{value:S.description,onChange:E=>a(x,"description",E.target.value),placeholder:"The desk zsoId",className:"mt-1"})]}),k.jsxs("div",{className:"mt-3",children:[k.jsx(Di,{className:"text-xs",children:"ZIA Agent Param Type"}),k.jsxs(pd,{value:S["x-zia-agent-param-type"]||"none",onValueChange:E=>a(x,"x-zia-agent-param-type",E==="none"?void 0:E),children:[k.jsx(mc,{className:"mt-1",children:k.jsx(md,{placeholder:"Select type"})}),k.jsxs(_c,{children:[k.jsx(Mi,{value:"none",children:"None"}),k.jsx(Mi,{value:"system",children:"System"}),k.jsx(Mi,{value:"model",children:"Model"}),k.jsx(Mi,{value:"dynamic",children:"Dynamic"})]})]})]})]})},x))})]}),k.jsxs(gs,{className:"bg-green-50/30",children:[k.jsx(aa,{className:"pb-3",children:k.jsxs("div",{className:"flex justify-between items-center",children:[k.jsx(Va,{className:"text-sm",children:"Responses"}),k.jsxs($n,{onClick:c,size:"sm",variant:"outline",children:[k.jsx(Lc,{className:"w-4 h-4 mr-1"}),"Add Response"]})]})}),k.jsx(ps,{className:"space-y-4",children:n.responses.map((S,x)=>{var E,D,N,I;return k.jsx(gs,{className:"bg-white",children:k.jsxs(ps,{className:"pt-4",children:[k.jsxs("div",{className:"flex justify-between items-start mb-3",children:[k.jsxs("h5",{className:"font-medium text-sm",children:["Response ",x+1]}),k.jsx($n,{variant:"ghost",size:"sm",onClick:()=>u(x),className:"text-red-500",children:k.jsx(Sd,{className:"w-4 h-4"})})]}),k.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[k.jsxs("div",{children:[k.jsx(Di,{className:"text-xs",children:"Status Code *"}),k.jsx(ss,{value:S.statusCode,onChange:H=>d(x,"statusCode",H.target.value),placeholder:"200",className:"mt-1"})]}),k.jsxs("div",{children:[k.jsx(Di,{className:"text-xs",children:"Description *"}),k.jsx(ss,{value:S.description,onChange:H=>d(x,"description",H.target.value),placeholder:"A list of tickets",className:"mt-1"})]})]}),k.jsxs("div",{className:"mt-3",children:[k.jsx(Di,{className:"text-xs",children:"Content Schema"}),k.jsxs(pd,{value:((I=(N=(D=(E=S.content)==null?void 0:E["application/json"])==null?void 0:D.schema)==null?void 0:N.$ref)==null?void 0:I.replace("#/components/schemas/",""))||"none",onValueChange:H=>{const z={...S};H==="none"?delete z.content:z.content={"application/json":{schema:{$ref:`#/components/schemas/${H}`}}},d(x,"content",z.content)},children:[k.jsx(mc,{className:"mt-1",children:k.jsx(md,{placeholder:"Select schema (optional)"})}),k.jsxs(_c,{children:[k.jsx(Mi,{value:"none",children:"No schema"}),t.map(H=>k.jsx(Mi,{value:H.name,children:H.name},H.name))]})]})]})]})},x)})})]})]})},H6e=({paths:n,setPaths:e,schemas:t,securitySchemes:i})=>{const[s,r]=A.useState(""),[o,a]=A.useState(null),[l,c]=A.useState(null),d=()=>{if(!s.trim())return;const w={path:s,methods:{}};e([...n,w]),r("")},u=w=>{e(n.filter((b,y)=>y!==w))},h=(w,b)=>{const y=[...n];y[w].methods[b]||(y[w].methods[b]={summary:"",description:"",operationId:"",tags:[],security:[],parameters:[],responses:[]}),e(y),a(w),c(b)},f=(w,b,y)=>{const S=[...n];S[w].methods[b]=y,e(S)},g=(w,b)=>{const y=[...n];delete y[w].methods[b],e(y)},p=(w,b)=>{const y=[...n];y[w].path=b,e(y)},_=["get","post","put","delete","patch","head","options"];return k.jsxs("div",{className:"space-y-4",children:[k.jsx(gs,{className:"bg-blue-50/50 border-blue-200",children:k.jsxs(ps,{className:"pt-4",children:[k.jsxs("div",{className:"flex gap-2",children:[k.jsx(ss,{value:s,onChange:w=>r(w.target.value),placeholder:"/api/v1/tickets or /api/v1/tickets/{ticketId}",className:"flex-1"}),k.jsxs($n,{onClick:d,size:"sm",children:[k.jsx(Lc,{className:"w-4 h-4 mr-1"}),"Add Path"]})]}),k.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:["Use ","{paramName}"," for path parameters (e.g., /tickets/","ticketId",")"]})]})}),n.map((w,b)=>k.jsxs(gs,{className:"bg-white border-l-4 border-l-blue-500",children:[k.jsx(aa,{className:"pb-3",children:k.jsxs("div",{className:"flex justify-between items-center",children:[k.jsx("div",{className:"flex-1",children:k.jsx(ss,{value:w.path,onChange:y=>p(b,y.target.value),className:"font-mono text-blue-700 border-none p-0 h-auto text-lg bg-transparent"})}),k.jsx($n,{variant:"ghost",size:"sm",onClick:()=>u(b),className:"text-red-500 hover:text-red-700",children:k.jsx(Sd,{className:"w-4 h-4"})})]})}),k.jsxs(ps,{className:"space-y-4",children:[k.jsx("div",{className:"flex flex-wrap gap-2",children:Object.keys(w.methods).map(y=>k.jsxs(Lu,{variant:"secondary",className:`cursor-pointer ${y==="get"?"bg-green-100 text-green-700":y==="post"?"bg-blue-100 text-blue-700":y==="put"?"bg-orange-100 text-orange-700":y==="delete"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"}`,onClick:()=>{a(b),c(y)},children:[y.toUpperCase(),k.jsx(h4e,{className:"w-3 h-3 ml-1"})]},y))}),k.jsxs("div",{className:"flex items-center gap-2",children:[k.jsx(Di,{className:"text-sm",children:"Add Method:"}),k.jsxs(pd,{onValueChange:y=>h(b,y),children:[k.jsx(mc,{className:"w-32",children:k.jsx(md,{placeholder:"Method"})}),k.jsx(_c,{children:_.filter(y=>!w.methods[y]).map(y=>k.jsx(Mi,{value:y,children:y.toUpperCase()},y))})]})]}),o===b&&l&&k.jsxs(gs,{className:"bg-gray-50",children:[k.jsx(aa,{className:"pb-3",children:k.jsxs("div",{className:"flex justify-between items-center",children:[k.jsxs(Va,{className:"text-sm",children:["Edit ",l.toUpperCase()," ",w.path]}),k.jsxs("div",{className:"flex gap-2",children:[k.jsx($n,{variant:"ghost",size:"sm",onClick:()=>g(b,l),className:"text-red-500 hover:text-red-700",children:k.jsx(Sd,{className:"w-4 h-4"})}),k.jsx($n,{variant:"ghost",size:"sm",onClick:()=>{a(null),c(null)},children:"Done"})]})]})}),k.jsx(ps,{children:k.jsx(W6e,{operation:w.methods[l],onUpdate:y=>f(b,l,y),schemas:t,securitySchemes:i,currentPath:w.path})})]})]})]},b)),n.length===0&&k.jsxs("div",{className:"text-center py-8 text-gray-500",children:[k.jsx(Lc,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),k.jsx("p",{children:"No paths defined yet. Add your first API endpoint above."})]})]})},V6e=({schemas:n,setSchemas:e})=>{const[t,i]=A.useState(""),s=()=>{if(!t.trim())return;const u={name:t,type:"object",properties:{},required:[]};e([...n,u]),i("")},r=u=>{e(n.filter((h,f)=>f!==u))},o=u=>{const h=[...n],f=`property${Object.keys(h[u].properties).length+1}`;h[u].properties[f]={type:"string",description:""},e(h)},a=(u,h,f,g)=>{const p=[...n];p[u].properties[h]={...p[u].properties[h],[f]:g},e(p)},l=(u,h)=>{const f=[...n];delete f[u].properties[h],f[u].required=f[u].required.filter(g=>g!==h),e(f)},c=(u,h,f)=>{const g=[...n];f?g[u].required.includes(h)||g[u].required.push(h):g[u].required=g[u].required.filter(p=>p!==h),e(g)},d=(u,h,f)=>{if(h===f||!f.trim())return;const g=[...n],p=g[u].properties[h];delete g[u].properties[h],g[u].properties[f]=p;const _=g[u].required.indexOf(h);_>-1&&(g[u].required[_]=f),e(g)};return k.jsxs("div",{className:"space-y-4",children:[k.jsx(gs,{className:"bg-orange-50/50 border-orange-200",children:k.jsx(ps,{className:"pt-4",children:k.jsxs("div",{className:"flex gap-2",children:[k.jsx(ss,{value:t,onChange:u=>i(u.target.value),placeholder:"DeskTicketUpdate",className:"flex-1"}),k.jsxs($n,{onClick:s,size:"sm",children:[k.jsx(Lc,{className:"w-4 h-4 mr-1"}),"Add Schema"]})]})})}),n.map((u,h)=>k.jsxs(gs,{className:"bg-white border-l-4 border-l-orange-500",children:[k.jsx(aa,{className:"pb-3",children:k.jsxs("div",{className:"flex justify-between items-center",children:[k.jsx(Va,{className:"text-lg font-mono text-orange-700",children:u.name}),k.jsx($n,{variant:"ghost",size:"sm",onClick:()=>r(h),className:"text-red-500 hover:text-red-700",children:k.jsx(Sd,{className:"w-4 h-4"})})]})}),k.jsx(ps,{className:"space-y-4",children:k.jsxs("div",{className:"space-y-3",children:[k.jsxs("div",{className:"flex justify-between items-center",children:[k.jsx(Di,{className:"font-medium",children:"Properties"}),k.jsxs($n,{onClick:()=>o(h),size:"sm",variant:"outline",children:[k.jsx(Lc,{className:"w-4 h-4 mr-1"}),"Add Property"]})]}),Object.entries(u.properties).map(([f,g])=>k.jsx(gs,{className:"bg-gray-50",children:k.jsxs(ps,{className:"pt-4",children:[k.jsxs("div",{className:"flex justify-between items-start mb-3",children:[k.jsx(ss,{value:f,onChange:p=>d(h,f,p.target.value),className:"font-mono text-sm w-48"}),k.jsx($n,{variant:"ghost",size:"sm",onClick:()=>l(h,f),className:"text-red-500",children:k.jsx(Sd,{className:"w-4 h-4"})})]}),k.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[k.jsxs("div",{children:[k.jsx(Di,{className:"text-xs",children:"Type"}),k.jsxs(pd,{value:g.type,onValueChange:p=>a(h,f,"type",p),children:[k.jsx(mc,{className:"mt-1",children:k.jsx(md,{})}),k.jsxs(_c,{children:[k.jsx(Mi,{value:"string",children:"String"}),k.jsx(Mi,{value:"integer",children:"Integer"}),k.jsx(Mi,{value:"number",children:"Number"}),k.jsx(Mi,{value:"boolean",children:"Boolean"}),k.jsx(Mi,{value:"array",children:"Array"}),k.jsx(Mi,{value:"object",children:"Object"})]})]})]}),k.jsxs("div",{className:"flex items-center space-x-2 mt-6",children:[k.jsx(Uk,{checked:u.required.includes(f),onCheckedChange:p=>c(h,f,p)}),k.jsx(Di,{className:"text-xs",children:"Required"})]})]}),k.jsxs("div",{className:"mt-3",children:[k.jsx(Di,{className:"text-xs",children:"Description"}),k.jsx(ss,{value:g.description,onChange:p=>a(h,f,"description",p.target.value),placeholder:"The new status of the ticket",className:"mt-1"})]}),k.jsxs("div",{className:"mt-3",children:[k.jsx(Di,{className:"text-xs",children:"ZIA Agent Param Type"}),k.jsxs(pd,{value:g["x-zia-agent-param-type"]||"none",onValueChange:p=>a(h,f,"x-zia-agent-param-type",p==="none"?void 0:p),children:[k.jsx(mc,{className:"mt-1",children:k.jsx(md,{placeholder:"Select type"})}),k.jsxs(_c,{children:[k.jsx(Mi,{value:"none",children:"None"}),k.jsx(Mi,{value:"system",children:"System"}),k.jsx(Mi,{value:"model",children:"Model"}),k.jsx(Mi,{value:"dynamic",children:"Dynamic"})]})]})]})]})},f)),Object.keys(u.properties).length===0&&k.jsx("div",{className:"text-center py-4 text-gray-500 text-sm",children:"No properties defined. Add your first property above."})]})})]},h)),n.length===0&&k.jsxs("div",{className:"text-center py-8 text-gray-500",children:[k.jsx(Lc,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),k.jsx("p",{children:"No schemas defined yet. Add your first data schema above."})]})]})},z6e=({securitySchemes:n,setSecuritySchemes:e})=>{const[t,i]=A.useState(""),s=()=>{if(!t.trim())return;const d={name:t,type:"http",scheme:"bearer"};e([...n,d]),i("")},r=d=>{e(n.filter((u,h)=>h!==d))},o=(d,u,h)=>{const f=[...n];f[d]={...f[d],[u]:h},e(f)},a=(d,u,h)=>{if(!u.trim())return;const f=[...n];f[d].scopes||(f[d].scopes={}),f[d].scopes[u]=h,e(f)},l=(d,u)=>{const h=[...n];h[d].scopes&&delete h[d].scopes[u],e(h)},c=(d,u,h)=>{const f=[...n];f[d].flows={authorizationCode:{authorizationUrl:u,tokenUrl:h,scopes:f[d].scopes||{}}},e(f)};return k.jsxs("div",{className:"space-y-4",children:[k.jsx(gs,{className:"bg-red-50/50 border-red-200",children:k.jsx(ps,{className:"pt-4",children:k.jsxs("div",{className:"flex gap-2",children:[k.jsx(ss,{value:t,onChange:d=>i(d.target.value),placeholder:"bearerAuth or OAuth2",className:"flex-1"}),k.jsxs($n,{onClick:s,size:"sm",children:[k.jsx(Lc,{className:"w-4 h-4 mr-1"}),"Add Security Scheme"]})]})})}),n.map((d,u)=>{var h,f,g,p;return k.jsxs(gs,{className:"bg-white border-l-4 border-l-red-500",children:[k.jsx(aa,{className:"pb-3",children:k.jsxs("div",{className:"flex justify-between items-center",children:[k.jsx(Va,{className:"text-lg font-mono text-red-700",children:d.name}),k.jsx($n,{variant:"ghost",size:"sm",onClick:()=>r(u),className:"text-red-500 hover:text-red-700",children:k.jsx(Sd,{className:"w-4 h-4"})})]})}),k.jsxs(ps,{className:"space-y-4",children:[k.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[k.jsxs("div",{children:[k.jsx(Di,{className:"text-sm",children:"Security Type *"}),k.jsxs(pd,{value:d.type,onValueChange:_=>o(u,"type",_),children:[k.jsx(mc,{className:"mt-1",children:k.jsx(md,{})}),k.jsxs(_c,{children:[k.jsx(Mi,{value:"http",children:"HTTP"}),k.jsx(Mi,{value:"oauth2",children:"OAuth 2.0"}),k.jsx(Mi,{value:"apiKey",children:"API Key"})]})]})]}),d.type==="http"&&k.jsxs("div",{children:[k.jsx(Di,{className:"text-sm",children:"Scheme"}),k.jsxs(pd,{value:d.scheme||"bearer",onValueChange:_=>o(u,"scheme",_),children:[k.jsx(mc,{className:"mt-1",children:k.jsx(md,{})}),k.jsxs(_c,{children:[k.jsx(Mi,{value:"bearer",children:"Bearer"}),k.jsx(Mi,{value:"basic",children:"Basic"}),k.jsx(Mi,{value:"digest",children:"Digest"})]})]})]})]}),d.type==="http"&&d.scheme==="bearer"&&k.jsxs("div",{children:[k.jsx(Di,{className:"text-sm",children:"Bearer Format"}),k.jsx(ss,{value:d.bearerFormat||"",onChange:_=>o(u,"bearerFormat",_.target.value),placeholder:"JWT",className:"mt-1"})]}),d.type==="oauth2"&&k.jsxs(gs,{className:"bg-gray-50",children:[k.jsx(aa,{className:"pb-3",children:k.jsx(Va,{className:"text-sm",children:"OAuth 2.0 Configuration"})}),k.jsxs(ps,{className:"space-y-3",children:[k.jsxs("div",{children:[k.jsx(Di,{className:"text-sm",children:"Authorization URL"}),k.jsx(ss,{value:((f=(h=d.flows)==null?void 0:h.authorizationCode)==null?void 0:f.authorizationUrl)||"",onChange:_=>{var b,y;const w=((y=(b=d.flows)==null?void 0:b.authorizationCode)==null?void 0:y.tokenUrl)||"";c(u,_.target.value,w)},placeholder:"https://accounts.localzoho.com/oauth/v2/auth",className:"mt-1"})]}),k.jsxs("div",{children:[k.jsx(Di,{className:"text-sm",children:"Token URL"}),k.jsx(ss,{value:((p=(g=d.flows)==null?void 0:g.authorizationCode)==null?void 0:p.tokenUrl)||"",onChange:_=>{var b,y;const w=((y=(b=d.flows)==null?void 0:b.authorizationCode)==null?void 0:y.authorizationUrl)||"";c(u,w,_.target.value)},placeholder:"https://accounts.localzoho.com/oauth/v2/token",className:"mt-1"})]})]})]}),(d.type==="oauth2"||d.type==="apiKey")&&k.jsxs(gs,{className:"bg-gray-50",children:[k.jsx(aa,{className:"pb-3",children:k.jsxs("div",{className:"flex justify-between items-center",children:[k.jsx(Va,{className:"text-sm",children:"Scopes"}),k.jsxs($n,{size:"sm",variant:"outline",onClick:()=>{const _=prompt("Scope name:"),w=prompt("Scope description:");_&&w&&a(u,_,w)},children:[k.jsx(Lc,{className:"w-4 h-4 mr-1"}),"Add Scope"]})]})}),k.jsxs(ps,{className:"space-y-2",children:[d.scopes&&Object.entries(d.scopes).map(([_,w])=>k.jsxs("div",{className:"flex justify-between items-center p-2 bg-white rounded border",children:[k.jsxs("div",{children:[k.jsx("span",{className:"font-mono text-sm text-blue-600",children:_}),k.jsx("p",{className:"text-xs text-gray-600",children:w})]}),k.jsx($n,{variant:"ghost",size:"sm",onClick:()=>l(u,_),className:"text-red-500",children:k.jsx(Sd,{className:"w-4 h-4"})})]},_)),(!d.scopes||Object.keys(d.scopes).length===0)&&k.jsx("div",{className:"text-center py-4 text-gray-500 text-sm",children:"No scopes defined. Add your first scope above."})]})]})]})]},u)}),n.length===0&&k.jsxs("div",{className:"text-center py-8 text-gray-500",children:[k.jsx(Lc,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),k.jsx("p",{children:"No security schemes defined yet. Add your first security configuration above."})]})]})};function U6e(n,e){return A.useReducer((t,i)=>e[t][i]??t,n)}var yZ="ScrollArea",[kbe,DEt]=cp(yZ),[$6e,Od]=kbe(yZ),Ebe=A.forwardRef((n,e)=>{const{__scopeScrollArea:t,type:i="hover",dir:s,scrollHideDelay:r=600,...o}=n,[a,l]=A.useState(null),[c,d]=A.useState(null),[u,h]=A.useState(null),[f,g]=A.useState(null),[p,_]=A.useState(null),[w,b]=A.useState(0),[y,S]=A.useState(0),[x,E]=A.useState(!1),[D,N]=A.useState(!1),I=Yi(e,z=>l(z)),H=b3(s);return k.jsx($6e,{scope:t,type:i,dir:H,scrollHideDelay:r,scrollArea:a,viewport:c,onViewportChange:d,content:u,onContentChange:h,scrollbarX:f,onScrollbarXChange:g,scrollbarXEnabled:x,onScrollbarXEnabledChange:E,scrollbarY:p,onScrollbarYChange:_,scrollbarYEnabled:D,onScrollbarYEnabledChange:N,onCornerWidthChange:b,onCornerHeightChange:S,children:k.jsx(Zt.div,{dir:H,...o,ref:I,style:{position:"relative","--radix-scroll-area-corner-width":w+"px","--radix-scroll-area-corner-height":y+"px",...n.style}})})});Ebe.displayName=yZ;var Ibe="ScrollAreaViewport",Dbe=A.forwardRef((n,e)=>{const{__scopeScrollArea:t,children:i,asChild:s,nonce:r,...o}=n,a=Od(Ibe,t),l=A.useRef(null),c=Yi(e,l,a.onViewportChange);return k.jsxs(k.Fragment,{children:[k.jsx("style",{dangerouslySetInnerHTML:{__html:`
[data-radix-scroll-area-viewport] {
  scrollbar-width: none;
  -ms-overflow-style: none;
  -webkit-overflow-scrolling: touch;
}
[data-radix-scroll-area-viewport]::-webkit-scrollbar {
  display: none;
}
:where([data-radix-scroll-area-viewport]) {
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
:where([data-radix-scroll-area-content]) {
  flex-grow: 1;
}
`},nonce:r}),k.jsx(Zt.div,{"data-radix-scroll-area-viewport":"",...o,asChild:s,ref:c,style:{overflowX:a.scrollbarXEnabled?"scroll":"hidden",overflowY:a.scrollbarYEnabled?"scroll":"hidden",...n.style},children:eHe({asChild:s,children:i},d=>k.jsx("div",{"data-radix-scroll-area-content":"",ref:a.onContentChange,style:{minWidth:a.scrollbarXEnabled?"fit-content":void 0},children:d}))})]})});Dbe.displayName=Ibe;var pf="ScrollAreaScrollbar",SZ=A.forwardRef((n,e)=>{const{forceMount:t,...i}=n,s=Od(pf,n.__scopeScrollArea),{onScrollbarXEnabledChange:r,onScrollbarYEnabledChange:o}=s,a=n.orientation==="horizontal";return A.useEffect(()=>(a?r(!0):o(!0),()=>{a?r(!1):o(!1)}),[a,r,o]),s.type==="hover"?k.jsx(j6e,{...i,ref:e,forceMount:t}):s.type==="scroll"?k.jsx(K6e,{...i,ref:e,forceMount:t}):s.type==="auto"?k.jsx(Nbe,{...i,ref:e,forceMount:t}):s.type==="always"?k.jsx(xZ,{...i,ref:e}):null});SZ.displayName=pf;var j6e=A.forwardRef((n,e)=>{const{forceMount:t,...i}=n,s=Od(pf,n.__scopeScrollArea),[r,o]=A.useState(!1);return A.useEffect(()=>{const a=s.scrollArea;let l=0;if(a){const c=()=>{window.clearTimeout(l),o(!0)},d=()=>{l=window.setTimeout(()=>o(!1),s.scrollHideDelay)};return a.addEventListener("pointerenter",c),a.addEventListener("pointerleave",d),()=>{window.clearTimeout(l),a.removeEventListener("pointerenter",c),a.removeEventListener("pointerleave",d)}}},[s.scrollArea,s.scrollHideDelay]),k.jsx(Hc,{present:t||r,children:k.jsx(Nbe,{"data-state":r?"visible":"hidden",...i,ref:e})})}),K6e=A.forwardRef((n,e)=>{const{forceMount:t,...i}=n,s=Od(pf,n.__scopeScrollArea),r=n.orientation==="horizontal",o=E3(()=>l("SCROLL_END"),100),[a,l]=U6e("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return A.useEffect(()=>{if(a==="idle"){const c=window.setTimeout(()=>l("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(c)}},[a,s.scrollHideDelay,l]),A.useEffect(()=>{const c=s.viewport,d=r?"scrollLeft":"scrollTop";if(c){let u=c[d];const h=()=>{const f=c[d];u!==f&&(l("SCROLL"),o()),u=f};return c.addEventListener("scroll",h),()=>c.removeEventListener("scroll",h)}},[s.viewport,r,l,o]),k.jsx(Hc,{present:t||a!=="hidden",children:k.jsx(xZ,{"data-state":a==="hidden"?"hidden":"visible",...i,ref:e,onPointerEnter:Dt(n.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:Dt(n.onPointerLeave,()=>l("POINTER_LEAVE"))})})}),Nbe=A.forwardRef((n,e)=>{const t=Od(pf,n.__scopeScrollArea),{forceMount:i,...s}=n,[r,o]=A.useState(!1),a=n.orientation==="horizontal",l=E3(()=>{if(t.viewport){const c=t.viewport.offsetWidth<t.viewport.scrollWidth,d=t.viewport.offsetHeight<t.viewport.scrollHeight;o(a?c:d)}},10);return SS(t.viewport,l),SS(t.content,l),k.jsx(Hc,{present:i||r,children:k.jsx(xZ,{"data-state":r?"visible":"hidden",...s,ref:e})})}),xZ=A.forwardRef((n,e)=>{const{orientation:t="vertical",...i}=n,s=Od(pf,n.__scopeScrollArea),r=A.useRef(null),o=A.useRef(0),[a,l]=A.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=Pbe(a.viewport,a.content),d={...i,sizes:a,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:h=>r.current=h,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:h=>o.current=h};function u(h,f){return Q6e(h,o.current,a,f)}return t==="horizontal"?k.jsx(q6e,{...d,ref:e,onThumbPositionChange:()=>{if(s.viewport&&r.current){const h=s.viewport.scrollLeft,f=Fre(h,a,s.dir);r.current.style.transform=`translate3d(${f}px, 0, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollLeft=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollLeft=u(h,s.dir))}}):t==="vertical"?k.jsx(G6e,{...d,ref:e,onThumbPositionChange:()=>{if(s.viewport&&r.current){const h=s.viewport.scrollTop,f=Fre(h,a);r.current.style.transform=`translate3d(0, ${f}px, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollTop=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollTop=u(h))}}):null}),q6e=A.forwardRef((n,e)=>{const{sizes:t,onSizesChange:i,...s}=n,r=Od(pf,n.__scopeScrollArea),[o,a]=A.useState(),l=A.useRef(null),c=Yi(e,l,r.onScrollbarXChange);return A.useEffect(()=>{l.current&&a(getComputedStyle(l.current))},[l]),k.jsx(Rbe,{"data-orientation":"horizontal",...s,ref:c,sizes:t,style:{bottom:0,left:r.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:r.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":k3(t)+"px",...n.style},onThumbPointerDown:d=>n.onThumbPointerDown(d.x),onDragScroll:d=>n.onDragScroll(d.x),onWheelScroll:(d,u)=>{if(r.viewport){const h=r.viewport.scrollLeft+d.deltaX;n.onWheelScroll(h),Fbe(h,u)&&d.preventDefault()}},onResize:()=>{l.current&&r.viewport&&o&&i({content:r.viewport.scrollWidth,viewport:r.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:zM(o.paddingLeft),paddingEnd:zM(o.paddingRight)}})}})}),G6e=A.forwardRef((n,e)=>{const{sizes:t,onSizesChange:i,...s}=n,r=Od(pf,n.__scopeScrollArea),[o,a]=A.useState(),l=A.useRef(null),c=Yi(e,l,r.onScrollbarYChange);return A.useEffect(()=>{l.current&&a(getComputedStyle(l.current))},[l]),k.jsx(Rbe,{"data-orientation":"vertical",...s,ref:c,sizes:t,style:{top:0,right:r.dir==="ltr"?0:void 0,left:r.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":k3(t)+"px",...n.style},onThumbPointerDown:d=>n.onThumbPointerDown(d.y),onDragScroll:d=>n.onDragScroll(d.y),onWheelScroll:(d,u)=>{if(r.viewport){const h=r.viewport.scrollTop+d.deltaY;n.onWheelScroll(h),Fbe(h,u)&&d.preventDefault()}},onResize:()=>{l.current&&r.viewport&&o&&i({content:r.viewport.scrollHeight,viewport:r.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:zM(o.paddingTop),paddingEnd:zM(o.paddingBottom)}})}})}),[Y6e,Tbe]=kbe(pf),Rbe=A.forwardRef((n,e)=>{const{__scopeScrollArea:t,sizes:i,hasThumb:s,onThumbChange:r,onThumbPointerUp:o,onThumbPointerDown:a,onThumbPositionChange:l,onDragScroll:c,onWheelScroll:d,onResize:u,...h}=n,f=Od(pf,t),[g,p]=A.useState(null),_=Yi(e,I=>p(I)),w=A.useRef(null),b=A.useRef(""),y=f.viewport,S=i.content-i.viewport,x=ir(d),E=ir(l),D=E3(u,10);function N(I){if(w.current){const H=I.clientX-w.current.left,z=I.clientY-w.current.top;c({x:H,y:z})}}return A.useEffect(()=>{const I=H=>{const z=H.target;(g==null?void 0:g.contains(z))&&x(H,S)};return document.addEventListener("wheel",I,{passive:!1}),()=>document.removeEventListener("wheel",I,{passive:!1})},[y,g,S,x]),A.useEffect(E,[i,E]),SS(g,D),SS(f.content,D),k.jsx(Y6e,{scope:t,scrollbar:g,hasThumb:s,onThumbChange:ir(r),onThumbPointerUp:ir(o),onThumbPositionChange:E,onThumbPointerDown:ir(a),children:k.jsx(Zt.div,{...h,ref:_,style:{position:"absolute",...h.style},onPointerDown:Dt(n.onPointerDown,I=>{I.button===0&&(I.target.setPointerCapture(I.pointerId),w.current=g.getBoundingClientRect(),b.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",f.viewport&&(f.viewport.style.scrollBehavior="auto"),N(I))}),onPointerMove:Dt(n.onPointerMove,N),onPointerUp:Dt(n.onPointerUp,I=>{const H=I.target;H.hasPointerCapture(I.pointerId)&&H.releasePointerCapture(I.pointerId),document.body.style.webkitUserSelect=b.current,f.viewport&&(f.viewport.style.scrollBehavior=""),w.current=null})})})}),VM="ScrollAreaThumb",Abe=A.forwardRef((n,e)=>{const{forceMount:t,...i}=n,s=Tbe(VM,n.__scopeScrollArea);return k.jsx(Hc,{present:t||s.hasThumb,children:k.jsx(Z6e,{ref:e,...i})})}),Z6e=A.forwardRef((n,e)=>{const{__scopeScrollArea:t,style:i,...s}=n,r=Od(VM,t),o=Tbe(VM,t),{onThumbPositionChange:a}=o,l=Yi(e,u=>o.onThumbChange(u)),c=A.useRef(),d=E3(()=>{c.current&&(c.current(),c.current=void 0)},100);return A.useEffect(()=>{const u=r.viewport;if(u){const h=()=>{if(d(),!c.current){const f=J6e(u,a);c.current=f,a()}};return a(),u.addEventListener("scroll",h),()=>u.removeEventListener("scroll",h)}},[r.viewport,d,a]),k.jsx(Zt.div,{"data-state":o.hasThumb?"visible":"hidden",...s,ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...i},onPointerDownCapture:Dt(n.onPointerDownCapture,u=>{const f=u.target.getBoundingClientRect(),g=u.clientX-f.left,p=u.clientY-f.top;o.onThumbPointerDown({x:g,y:p})}),onPointerUp:Dt(n.onPointerUp,o.onThumbPointerUp)})});Abe.displayName=VM;var LZ="ScrollAreaCorner",Mbe=A.forwardRef((n,e)=>{const t=Od(LZ,n.__scopeScrollArea),i=!!(t.scrollbarX&&t.scrollbarY);return t.type!=="scroll"&&i?k.jsx(X6e,{...n,ref:e}):null});Mbe.displayName=LZ;var X6e=A.forwardRef((n,e)=>{const{__scopeScrollArea:t,...i}=n,s=Od(LZ,t),[r,o]=A.useState(0),[a,l]=A.useState(0),c=!!(r&&a);return SS(s.scrollbarX,()=>{var u;const d=((u=s.scrollbarX)==null?void 0:u.offsetHeight)||0;s.onCornerHeightChange(d),l(d)}),SS(s.scrollbarY,()=>{var u;const d=((u=s.scrollbarY)==null?void 0:u.offsetWidth)||0;s.onCornerWidthChange(d),o(d)}),c?k.jsx(Zt.div,{...i,ref:e,style:{width:r,height:a,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...n.style}}):null});function zM(n){return n?parseInt(n,10):0}function Pbe(n,e){const t=n/e;return isNaN(t)?0:t}function k3(n){const e=Pbe(n.viewport,n.content),t=n.scrollbar.paddingStart+n.scrollbar.paddingEnd,i=(n.scrollbar.size-t)*e;return Math.max(i,18)}function Q6e(n,e,t,i="ltr"){const s=k3(t),r=s/2,o=e||r,a=s-o,l=t.scrollbar.paddingStart+o,c=t.scrollbar.size-t.scrollbar.paddingEnd-a,d=t.content-t.viewport,u=i==="ltr"?[0,d]:[d*-1,0];return Obe([l,c],u)(n)}function Fre(n,e,t="ltr"){const i=k3(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=e.scrollbar.size-s,o=e.content-e.viewport,a=r-i,l=t==="ltr"?[0,o]:[o*-1,0],c=sV(n,l);return Obe([0,o],[0,a])(c)}function Obe(n,e){return t=>{if(n[0]===n[1]||e[0]===e[1])return e[0];const i=(e[1]-e[0])/(n[1]-n[0]);return e[0]+i*(t-n[0])}}function Fbe(n,e){return n>0&&n<e}var J6e=(n,e=()=>{})=>{let t={left:n.scrollLeft,top:n.scrollTop},i=0;return function s(){const r={left:n.scrollLeft,top:n.scrollTop},o=t.left!==r.left,a=t.top!==r.top;(o||a)&&e(),t=r,i=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(i)};function E3(n,e){const t=ir(n),i=A.useRef(0);return A.useEffect(()=>()=>window.clearTimeout(i.current),[]),A.useCallback(()=>{window.clearTimeout(i.current),i.current=window.setTimeout(t,e)},[t,e])}function SS(n,e){const t=ir(e);co(()=>{let i=0;if(n){const s=new ResizeObserver(()=>{cancelAnimationFrame(i),i=window.requestAnimationFrame(t)});return s.observe(n),()=>{window.cancelAnimationFrame(i),s.unobserve(n)}}},[n,t])}function eHe(n,e){const{asChild:t,children:i}=n;if(!t)return typeof e=="function"?e(i):e;const s=A.Children.only(i);return A.cloneElement(s,{children:typeof e=="function"?e(s.props.children):e})}var Bbe=Ebe,tHe=Dbe,iHe=Mbe;const kZ=A.forwardRef(({className:n,children:e,...t},i)=>k.jsxs(Bbe,{ref:i,className:vi("relative overflow-hidden",n),...t,children:[k.jsx(tHe,{className:"h-full w-full rounded-[inherit]",children:e}),k.jsx(Wbe,{}),k.jsx(iHe,{})]}));kZ.displayName=Bbe.displayName;const Wbe=A.forwardRef(({className:n,orientation:e="vertical",...t},i)=>k.jsx(SZ,{ref:i,orientation:e,className:vi("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",n),...t,children:k.jsx(Abe,{className:"relative flex-1 rounded-full bg-border"})}));Wbe.displayName=SZ.displayName;const nHe=()=>{};var Bre={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hbe=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},sHe=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const s=n[t++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const r=n[t++];e[i++]=String.fromCharCode((s&31)<<6|r&63)}else if(s>239&&s<365){const r=n[t++],o=n[t++],a=n[t++],l=((s&7)<<18|(r&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{const r=n[t++],o=n[t++];e[i++]=String.fromCharCode((s&15)<<12|(r&63)<<6|o&63)}}return e.join("")},Vbe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<n.length;s+=3){const r=n[s],o=s+1<n.length,a=o?n[s+1]:0,l=s+2<n.length,c=l?n[s+2]:0,d=r>>2,u=(r&3)<<4|a>>4;let h=(a&15)<<2|c>>6,f=c&63;l||(f=64,o||(h=64)),i.push(t[d],t[u],t[h],t[f])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Hbe(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):sHe(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<n.length;){const r=t[n.charAt(s++)],a=s<n.length?t[n.charAt(s)]:0;++s;const c=s<n.length?t[n.charAt(s)]:64;++s;const u=s<n.length?t[n.charAt(s)]:64;if(++s,r==null||a==null||c==null||u==null)throw new rHe;const h=r<<2|a>>4;if(i.push(h),c!==64){const f=a<<4&240|c>>2;if(i.push(f),u!==64){const g=c<<6&192|u;i.push(g)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class rHe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const oHe=function(n){const e=Hbe(n);return Vbe.encodeByteArray(e,!0)},zbe=function(n){return oHe(n).replace(/\./g,"")},Ube=function(n){try{return Vbe.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aHe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lHe=()=>aHe().__FIREBASE_DEFAULTS__,cHe=()=>{if(typeof process>"u"||typeof Bre>"u")return;const n=Bre.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},dHe=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Ube(n[1]);return e&&JSON.parse(e)},EZ=()=>{try{return nHe()||lHe()||cHe()||dHe()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},uHe=n=>{var e,t;return(t=(e=EZ())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},$be=()=>{var n;return(n=EZ())===null||n===void 0?void 0:n.config},jbe=n=>{var e;return(e=EZ())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hHe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IZ(n){return n.endsWith(".cloudworkstations.dev")}async function fHe(n){return(await fetch(n,{credentials:"include"})).ok}const $k={};function gHe(){const n={prod:[],emulator:[]};for(const e of Object.keys($k))$k[e]?n.emulator.push(e):n.prod.push(e);return n}function pHe(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Wre=!1;function mHe(n,e){if(typeof window>"u"||typeof document>"u"||!IZ(window.location.host)||$k[n]===e||$k[n]||Wre)return;$k[n]=e;function t(h){return`__firebase__banner__${h}`}const i="__firebase__banner",r=gHe().prod.length>0;function o(){const h=document.getElementById(i);h&&h.remove()}function a(h){h.style.display="flex",h.style.background="#7faaf0",h.style.position="fixed",h.style.bottom="5px",h.style.left="5px",h.style.padding=".5em",h.style.borderRadius="5px",h.style.alignItems="center"}function l(h,f){h.setAttribute("width","24"),h.setAttribute("id",f),h.setAttribute("height","24"),h.setAttribute("viewBox","0 0 24 24"),h.setAttribute("fill","none"),h.style.marginLeft="-6px"}function c(){const h=document.createElement("span");return h.style.cursor="pointer",h.style.marginLeft="16px",h.style.fontSize="24px",h.innerHTML=" &times;",h.onclick=()=>{Wre=!0,o()},h}function d(h,f){h.setAttribute("id",f),h.innerText="Learn more",h.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",h.setAttribute("target","__blank"),h.style.paddingLeft="5px",h.style.textDecoration="underline"}function u(){const h=pHe(i),f=t("text"),g=document.getElementById(f)||document.createElement("span"),p=t("learnmore"),_=document.getElementById(p)||document.createElement("a"),w=t("preprendIcon"),b=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(h.created){const y=h.element;a(y),d(_,p);const S=c();l(b,w),y.append(b,g,_,S),document.body.appendChild(y)}r?(g.innerText="Preview backend disconnected.",b.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(b.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,g.innerText="Preview backend running in this workspace."),g.setAttribute("id",f)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",u):u()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function el(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _He(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(el())}function vHe(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function bHe(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function wHe(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function CHe(){const n=el();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function yHe(){try{return typeof indexedDB=="object"}catch{return!1}}function SHe(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var r;e(((r=s.error)===null||r===void 0?void 0:r.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xHe="FirebaseError";class J_ extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=xHe,Object.setPrototypeOf(this,J_.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,SN.prototype.create)}}class SN{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},s=`${this.service}/${e}`,r=this.errors[e],o=r?LHe(r,i):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new J_(s,a,i)}}function LHe(n,e){return n.replace(kHe,(t,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const kHe=/\{\$([^}]+)}/g;function EHe(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function xS(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const s of t){if(!i.includes(s))return!1;const r=n[s],o=e[s];if(Hre(r)&&Hre(o)){if(!xS(r,o))return!1}else if(r!==o)return!1}for(const s of i)if(!t.includes(s))return!1;return!0}function Hre(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xN(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function IHe(n,e){const t=new DHe(n,e);return t.subscribe.bind(t)}class DHe{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let s;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");NHe(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:i},s.next===void 0&&(s.next=y9),s.error===void 0&&(s.error=y9),s.complete===void 0&&(s.complete=y9);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),r}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function NHe(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function y9(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ev(n){return n&&n._delegate?n._delegate:n}class LS{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hv="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class THe{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new hHe;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(AHe(e))try{this.getOrInitializeService({instanceIdentifier:Hv})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const r=this.getOrInitializeService({instanceIdentifier:s});i.resolve(r)}catch{}}}}clearInstance(e=Hv){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Hv){return this.instances.has(e)}getOptions(e=Hv){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[r,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);i===a&&o.resolve(s)}return s}onInit(e,t){var i;const s=this.normalizeInstanceIdentifier(t),r=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;r.add(e),this.onInitCallbacks.set(s,r);const o=this.instances.get(s);return o&&e(o,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const s of i)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:RHe(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Hv){return this.component?this.component.multipleInstances?e:Hv:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function RHe(n){return n===Hv?void 0:n}function AHe(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MHe{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new THe(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zn;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Zn||(Zn={}));const PHe={debug:Zn.DEBUG,verbose:Zn.VERBOSE,info:Zn.INFO,warn:Zn.WARN,error:Zn.ERROR,silent:Zn.SILENT},OHe=Zn.INFO,FHe={[Zn.DEBUG]:"log",[Zn.VERBOSE]:"log",[Zn.INFO]:"info",[Zn.WARN]:"warn",[Zn.ERROR]:"error"},BHe=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),s=FHe[e];if(s)console[s](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Kbe{constructor(e){this.name=e,this._logLevel=OHe,this._logHandler=BHe,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Zn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?PHe[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Zn.DEBUG,...e),this._logHandler(this,Zn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Zn.VERBOSE,...e),this._logHandler(this,Zn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Zn.INFO,...e),this._logHandler(this,Zn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Zn.WARN,...e),this._logHandler(this,Zn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Zn.ERROR,...e),this._logHandler(this,Zn.ERROR,...e)}}const WHe=(n,e)=>e.some(t=>n instanceof t);let Vre,zre;function HHe(){return Vre||(Vre=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function VHe(){return zre||(zre=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const qbe=new WeakMap,uV=new WeakMap,Gbe=new WeakMap,S9=new WeakMap,DZ=new WeakMap;function zHe(n){const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("success",r),n.removeEventListener("error",o)},r=()=>{t($m(n.result)),s()},o=()=>{i(n.error),s()};n.addEventListener("success",r),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&qbe.set(t,n)}).catch(()=>{}),DZ.set(e,n),e}function UHe(n){if(uV.has(n))return;const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("complete",r),n.removeEventListener("error",o),n.removeEventListener("abort",o)},r=()=>{t(),s()},o=()=>{i(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",r),n.addEventListener("error",o),n.addEventListener("abort",o)});uV.set(n,e)}let hV={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return uV.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Gbe.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return $m(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function $He(n){hV=n(hV)}function jHe(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(x9(this),e,...t);return Gbe.set(i,e.sort?e.sort():[e]),$m(i)}:VHe().includes(n)?function(...e){return n.apply(x9(this),e),$m(qbe.get(this))}:function(...e){return $m(n.apply(x9(this),e))}}function KHe(n){return typeof n=="function"?jHe(n):(n instanceof IDBTransaction&&UHe(n),WHe(n,HHe())?new Proxy(n,hV):n)}function $m(n){if(n instanceof IDBRequest)return zHe(n);if(S9.has(n))return S9.get(n);const e=KHe(n);return e!==n&&(S9.set(n,e),DZ.set(e,n)),e}const x9=n=>DZ.get(n);function qHe(n,e,{blocked:t,upgrade:i,blocking:s,terminated:r}={}){const o=indexedDB.open(n,e),a=$m(o);return i&&o.addEventListener("upgradeneeded",l=>{i($m(o.result),l.oldVersion,l.newVersion,$m(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{r&&l.addEventListener("close",()=>r()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const GHe=["get","getKey","getAll","getAllKeys","count"],YHe=["put","add","delete","clear"],L9=new Map;function Ure(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(L9.get(e))return L9.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,s=YHe.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(s||GHe.includes(t)))return;const r=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return i&&(c=c.index(a.shift())),(await Promise.all([c[t](...a),s&&l.done]))[0]};return L9.set(e,r),r}$He(n=>({...n,get:(e,t,i)=>Ure(e,t)||n.get(e,t,i),has:(e,t)=>!!Ure(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZHe{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(XHe(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function XHe(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const fV="@firebase/app",$re="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jg=new Kbe("@firebase/app"),QHe="@firebase/app-compat",JHe="@firebase/analytics-compat",eVe="@firebase/analytics",tVe="@firebase/app-check-compat",iVe="@firebase/app-check",nVe="@firebase/auth",sVe="@firebase/auth-compat",rVe="@firebase/database",oVe="@firebase/data-connect",aVe="@firebase/database-compat",lVe="@firebase/functions",cVe="@firebase/functions-compat",dVe="@firebase/installations",uVe="@firebase/installations-compat",hVe="@firebase/messaging",fVe="@firebase/messaging-compat",gVe="@firebase/performance",pVe="@firebase/performance-compat",mVe="@firebase/remote-config",_Ve="@firebase/remote-config-compat",vVe="@firebase/storage",bVe="@firebase/storage-compat",wVe="@firebase/firestore",CVe="@firebase/ai",yVe="@firebase/firestore-compat",SVe="firebase",xVe="11.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gV="[DEFAULT]",LVe={[fV]:"fire-core",[QHe]:"fire-core-compat",[eVe]:"fire-analytics",[JHe]:"fire-analytics-compat",[iVe]:"fire-app-check",[tVe]:"fire-app-check-compat",[nVe]:"fire-auth",[sVe]:"fire-auth-compat",[rVe]:"fire-rtdb",[oVe]:"fire-data-connect",[aVe]:"fire-rtdb-compat",[lVe]:"fire-fn",[cVe]:"fire-fn-compat",[dVe]:"fire-iid",[uVe]:"fire-iid-compat",[hVe]:"fire-fcm",[fVe]:"fire-fcm-compat",[gVe]:"fire-perf",[pVe]:"fire-perf-compat",[mVe]:"fire-rc",[_Ve]:"fire-rc-compat",[vVe]:"fire-gcs",[bVe]:"fire-gcs-compat",[wVe]:"fire-fst",[yVe]:"fire-fst-compat",[CVe]:"fire-vertex","fire-js":"fire-js",[SVe]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UM=new Map,kVe=new Map,pV=new Map;function jre(n,e){try{n.container.addComponent(e)}catch(t){jg.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function SI(n){const e=n.name;if(pV.has(e))return jg.debug(`There were multiple attempts to register component ${e}.`),!1;pV.set(e,n);for(const t of UM.values())jre(t,n);for(const t of kVe.values())jre(t,n);return!0}function Ybe(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Ph(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EVe={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},jm=new SN("app","Firebase",EVe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IVe{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new LS("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw jm.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LN=xVe;function Zbe(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:gV,automaticDataCollectionEnabled:!0},e),s=i.name;if(typeof s!="string"||!s)throw jm.create("bad-app-name",{appName:String(s)});if(t||(t=$be()),!t)throw jm.create("no-options");const r=UM.get(s);if(r){if(xS(t,r.options)&&xS(i,r.config))return r;throw jm.create("duplicate-app",{appName:s})}const o=new MHe(s);for(const l of pV.values())o.addComponent(l);const a=new IVe(t,i,o);return UM.set(s,a),a}function DVe(n=gV){const e=UM.get(n);if(!e&&n===gV&&$be())return Zbe();if(!e)throw jm.create("no-app",{appName:n});return e}function my(n,e,t){var i;let s=(i=LVe[n])!==null&&i!==void 0?i:n;t&&(s+=`-${t}`);const r=s.match(/\s|\//),o=e.match(/\s|\//);if(r||o){const a=[`Unable to register library "${s}" with version "${e}":`];r&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),jg.warn(a.join(" "));return}SI(new LS(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NVe="firebase-heartbeat-database",TVe=1,xI="firebase-heartbeat-store";let k9=null;function Xbe(){return k9||(k9=qHe(NVe,TVe,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(xI)}catch(t){console.warn(t)}}}}).catch(n=>{throw jm.create("idb-open",{originalErrorMessage:n.message})})),k9}async function RVe(n){try{const t=(await Xbe()).transaction(xI),i=await t.objectStore(xI).get(Qbe(n));return await t.done,i}catch(e){if(e instanceof J_)jg.warn(e.message);else{const t=jm.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});jg.warn(t.message)}}}async function Kre(n,e){try{const i=(await Xbe()).transaction(xI,"readwrite");await i.objectStore(xI).put(e,Qbe(n)),await i.done}catch(t){if(t instanceof J_)jg.warn(t.message);else{const i=jm.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});jg.warn(i.message)}}}function Qbe(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AVe=1024,MVe=30;class PVe{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new FVe(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=qre();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:s}),this._heartbeatsCache.heartbeats.length>MVe){const o=BVe(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){jg.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=qre(),{heartbeatsToSend:i,unsentEntries:s}=OVe(this._heartbeatsCache.heartbeats),r=zbe(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(t){return jg.warn(t),""}}}function qre(){return new Date().toISOString().substring(0,10)}function OVe(n,e=AVe){const t=[];let i=n.slice();for(const s of n){const r=t.find(o=>o.agent===s.agent);if(r){if(r.dates.push(s.date),Gre(t)>e){r.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),Gre(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class FVe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return yHe()?SHe().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await RVe(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return Kre(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return Kre(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Gre(n){return zbe(JSON.stringify({version:2,heartbeats:n})).length}function BVe(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WVe(n){SI(new LS("platform-logger",e=>new ZHe(e),"PRIVATE")),SI(new LS("heartbeat",e=>new PVe(e),"PRIVATE")),my(fV,$re,n),my(fV,$re,"esm2017"),my("fire-js","")}WVe("");function Jbe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const HVe=Jbe,ewe=new SN("auth","Firebase",Jbe());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $M=new Kbe("@firebase/auth");function VVe(n,...e){$M.logLevel<=Zn.WARN&&$M.warn(`Auth (${LN}): ${n}`,...e)}function d2(n,...e){$M.logLevel<=Zn.ERROR&&$M.error(`Auth (${LN}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nf(n,...e){throw TZ(n,...e)}function ku(n,...e){return TZ(n,...e)}function NZ(n,e,t){const i=Object.assign(Object.assign({},HVe()),{[e]:t});return new SN("auth","Firebase",i).create(e,{appName:n.name})}function Bb(n){return NZ(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function zVe(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&nf(n,"argument-error"),NZ(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function TZ(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return ewe.create(n,...e)}function ai(n,e,...t){if(!n)throw TZ(e,...t)}function gg(n){const e="INTERNAL ASSERTION FAILED: "+n;throw d2(e),new Error(e)}function Kg(n,e){n||gg(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mV(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function UVe(){return Yre()==="http:"||Yre()==="https:"}function Yre(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $Ve(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(UVe()||bHe()||"connection"in navigator)?navigator.onLine:!0}function jVe(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(e,t){this.shortDelay=e,this.longDelay=t,Kg(t>e,"Short delay should be less than long delay!"),this.isMobile=_He()||wHe()}get(){return $Ve()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RZ(n,e){Kg(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class twe{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;gg("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;gg("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;gg("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KVe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qVe=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],GVe=new kN(3e4,6e4);function AZ(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function xx(n,e,t,i,s={}){return iwe(n,s,async()=>{let r={},o={};i&&(e==="GET"?o=i:r={body:JSON.stringify(i)});const a=xN(Object.assign({key:n.config.apiKey},o)).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const c=Object.assign({method:e,headers:l},r);return vHe()||(c.referrerPolicy="no-referrer"),n.emulatorConfig&&IZ(n.emulatorConfig.host)&&(c.credentials="include"),twe.fetch()(await nwe(n,n.config.apiHost,t,a),c)})}async function iwe(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},KVe),e);try{const s=new ZVe(n),r=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const o=await r.json();if("needConfirmation"in o)throw NR(n,"account-exists-with-different-credential",o);if(r.ok&&!("errorMessage"in o))return o;{const a=r.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw NR(n,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw NR(n,"email-already-in-use",o);if(l==="USER_DISABLED")throw NR(n,"user-disabled",o);const d=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw NZ(n,d,c);nf(n,d)}}catch(s){if(s instanceof J_)throw s;nf(n,"network-request-failed",{message:String(s)})}}async function YVe(n,e,t,i,s={}){const r=await xx(n,e,t,i,s);return"mfaPendingCredential"in r&&nf(n,"multi-factor-auth-required",{_serverResponse:r}),r}async function nwe(n,e,t,i){const s=`${e}${t}?${i}`,r=n,o=r.config.emulator?RZ(n.config,s):`${n.config.apiScheme}://${s}`;return qVe.includes(t)&&(await r._persistenceManagerAvailable,r._getPersistenceType()==="COOKIE")?r._getPersistence()._getFinalTarget(o).toString():o}class ZVe{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(ku(this.auth,"network-request-failed")),GVe.get())})}}function NR(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const s=ku(n,e,i);return s.customData._tokenResponse=t,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XVe(n,e){return xx(n,"POST","/v1/accounts:delete",e)}async function jM(n,e){return xx(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jk(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function QVe(n,e=!1){const t=ev(n),i=await t.getIdToken(e),s=MZ(i);ai(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const r=typeof s.firebase=="object"?s.firebase:void 0,o=r==null?void 0:r.sign_in_provider;return{claims:s,token:i,authTime:jk(E9(s.auth_time)),issuedAtTime:jk(E9(s.iat)),expirationTime:jk(E9(s.exp)),signInProvider:o||null,signInSecondFactor:(r==null?void 0:r.sign_in_second_factor)||null}}function E9(n){return Number(n)*1e3}function MZ(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return d2("JWT malformed, contained fewer than 3 sections"),null;try{const s=Ube(t);return s?JSON.parse(s):(d2("Failed to decode base64 JWT payload"),null)}catch(s){return d2("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Zre(n){const e=MZ(n);return ai(e,"internal-error"),ai(typeof e.exp<"u","internal-error"),ai(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LI(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof J_&&JVe(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function JVe({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eze{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _V{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=jk(this.lastLoginAt),this.creationTime=jk(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KM(n){var e;const t=n.auth,i=await n.getIdToken(),s=await LI(n,jM(t,{idToken:i}));ai(s==null?void 0:s.users.length,t,"internal-error");const r=s.users[0];n._notifyReloadListener(r);const o=!((e=r.providerUserInfo)===null||e===void 0)&&e.length?swe(r.providerUserInfo):[],a=ize(n.providerData,o),l=n.isAnonymous,c=!(n.email&&r.passwordHash)&&!(a!=null&&a.length),d=l?c:!1,u={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new _V(r.createdAt,r.lastLoginAt),isAnonymous:d};Object.assign(n,u)}async function tze(n){const e=ev(n);await KM(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function ize(n,e){return[...n.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function swe(n){return n.map(e=>{var{providerId:t}=e,i=CN(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nze(n,e){const t=await iwe(n,{},async()=>{const i=xN({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:r}=n.config,o=await nwe(n,s,"/v1/token",`key=${r}`),a=await n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",twe.fetch()(o,{method:"POST",headers:a,body:i})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function sze(n,e){return xx(n,"POST","/v2/accounts:revokeToken",AZ(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ai(e.idToken,"internal-error"),ai(typeof e.idToken<"u","internal-error"),ai(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Zre(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ai(e.length!==0,"internal-error");const t=Zre(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ai(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:s,expiresIn:r}=await nze(e,t);this.updateTokensAndExpiration(i,s,Number(r))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:s,expirationTime:r}=t,o=new _y;return i&&(ai(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),s&&(ai(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),r&&(ai(typeof r=="number","internal-error",{appName:e}),o.expirationTime=r),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new _y,this.toJSON())}_performRefresh(){return gg("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dp(n,e){ai(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class bu{constructor(e){var{uid:t,auth:i,stsTokenManager:s}=e,r=CN(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new eze(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new _V(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await LI(this,this.stsTokenManager.getToken(this.auth,e));return ai(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return QVe(this,e)}reload(){return tze(this)}_assign(e){this!==e&&(ai(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new bu(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ai(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await KM(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ph(this.auth.app))return Promise.reject(Bb(this.auth));const e=await this.getIdToken();return await LI(this,XVe(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,s,r,o,a,l,c,d;const u=(i=t.displayName)!==null&&i!==void 0?i:void 0,h=(s=t.email)!==null&&s!==void 0?s:void 0,f=(r=t.phoneNumber)!==null&&r!==void 0?r:void 0,g=(o=t.photoURL)!==null&&o!==void 0?o:void 0,p=(a=t.tenantId)!==null&&a!==void 0?a:void 0,_=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,w=(c=t.createdAt)!==null&&c!==void 0?c:void 0,b=(d=t.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:y,emailVerified:S,isAnonymous:x,providerData:E,stsTokenManager:D}=t;ai(y&&D,e,"internal-error");const N=_y.fromJSON(this.name,D);ai(typeof y=="string",e,"internal-error"),Dp(u,e.name),Dp(h,e.name),ai(typeof S=="boolean",e,"internal-error"),ai(typeof x=="boolean",e,"internal-error"),Dp(f,e.name),Dp(g,e.name),Dp(p,e.name),Dp(_,e.name),Dp(w,e.name),Dp(b,e.name);const I=new bu({uid:y,auth:e,email:h,emailVerified:S,displayName:u,isAnonymous:x,photoURL:g,phoneNumber:f,tenantId:p,stsTokenManager:N,createdAt:w,lastLoginAt:b});return E&&Array.isArray(E)&&(I.providerData=E.map(H=>Object.assign({},H))),_&&(I._redirectEventId=_),I}static async _fromIdTokenResponse(e,t,i=!1){const s=new _y;s.updateFromServerResponse(t);const r=new bu({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await KM(r),r}static async _fromGetAccountInfoResponse(e,t,i){const s=t.users[0];ai(s.localId!==void 0,"internal-error");const r=s.providerUserInfo!==void 0?swe(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(r!=null&&r.length),a=new _y;a.updateFromIdToken(i);const l=new bu({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:r,metadata:new _V(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(r!=null&&r.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xre=new Map;function pg(n){Kg(n instanceof Function,"Expected a class definition");let e=Xre.get(n);return e?(Kg(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Xre.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rwe{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}rwe.type="NONE";const Qre=rwe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u2(n,e,t){return`firebase:${n}:${e}:${t}`}class vy{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:s,name:r}=this.auth;this.fullUserKey=u2(this.userKey,s.apiKey,r),this.fullPersistenceKey=u2("persistence",s.apiKey,r),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await jM(this.auth,{idToken:e}).catch(()=>{});return t?bu._fromGetAccountInfoResponse(this.auth,t,e):null}return bu._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new vy(pg(Qre),e,i);const s=(await Promise.all(t.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let r=s[0]||pg(Qre);const o=u2(i,e.config.apiKey,e.name);let a=null;for(const c of t)try{const d=await c._get(o);if(d){let u;if(typeof d=="string"){const h=await jM(e,{idToken:d}).catch(()=>{});if(!h)break;u=await bu._fromGetAccountInfoResponse(e,h,d)}else u=bu._fromJSON(e,d);c!==r&&(a=u),r=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!r._shouldAllowMigration||!l.length?new vy(r,e,i):(r=l[0],a&&await r._set(o,a.toJSON()),await Promise.all(t.map(async c=>{if(c!==r)try{await c._remove(o)}catch{}})),new vy(r,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jre(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(cwe(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(owe(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(uwe(e))return"Blackberry";if(hwe(e))return"Webos";if(awe(e))return"Safari";if((e.includes("chrome/")||lwe(e))&&!e.includes("edge/"))return"Chrome";if(dwe(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function owe(n=el()){return/firefox\//i.test(n)}function awe(n=el()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function lwe(n=el()){return/crios\//i.test(n)}function cwe(n=el()){return/iemobile/i.test(n)}function dwe(n=el()){return/android/i.test(n)}function uwe(n=el()){return/blackberry/i.test(n)}function hwe(n=el()){return/webos/i.test(n)}function PZ(n=el()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function rze(n=el()){var e;return PZ(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function oze(){return CHe()&&document.documentMode===10}function fwe(n=el()){return PZ(n)||dwe(n)||hwe(n)||uwe(n)||/windows phone/i.test(n)||cwe(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gwe(n,e=[]){let t;switch(n){case"Browser":t=Jre(el());break;case"Worker":t=`${Jre(el())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${LN}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aze{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=r=>new Promise((o,a)=>{try{const l=e(r);o(l)}catch(l){a(l)}});i.onAbort=t,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lze(n,e={}){return xx(n,"GET","/v2/passwordPolicy",AZ(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cze=6;class dze{constructor(e){var t,i,s,r;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:cze,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(r=e.forceUpgradeOnSignin)!==null&&r!==void 0?r:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,s,r,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(i=l.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(r=l.containsUppercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,s,r){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uze{constructor(e,t,i,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new eoe(this),this.idTokenSubscription=new eoe(this),this.beforeStateQueue=new aze(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ewe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(r=>this._resolvePersistenceManagerAvailable=r)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=pg(t)),this._initializationPromise=this.queue(async()=>{var i,s,r;if(!this._deleted&&(this.persistenceManager=await vy.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await jM(this,{idToken:e}),i=await bu._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Ph(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let s=i,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ai(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await KM(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=jVe()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ph(this.app))return Promise.reject(Bb(this));const t=e?ev(e):null;return t&&ai(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ai(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ph(this.app)?Promise.reject(Bb(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ph(this.app)?Promise.reject(Bb(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(pg(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await lze(this),t=new dze(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new SN("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await sze(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&pg(e)||this._popupRedirectResolver;ai(t,this,"argument-error"),this.redirectPersistenceManager=await vy.create(this,[pg(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,s){if(this._deleted)return()=>{};const r=typeof t=="function"?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ai(a,this,"internal-error"),a.then(()=>{o||r(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,i,s);return()=>{o=!0,l()}}else{const l=e.addObserver(t);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ai(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=gwe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;if(Ph(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&VVe(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function I3(n){return ev(n)}class eoe{constructor(e){this.auth=e,this.observer=null,this.addObserver=IHe(t=>this.observer=t)}get next(){return ai(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let OZ={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function hze(n){OZ=n}function fze(n){return OZ.loadJS(n)}function gze(){return OZ.gapiScript}function pze(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mze(n,e){const t=Ybe(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),r=t.getOptions();if(xS(r,e??{}))return s;nf(s,"already-initialized")}return t.initialize({options:e})}function _ze(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(pg);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function vze(n,e,t){const i=I3(n);ai(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,r=pwe(e),{host:o,port:a}=bze(e),l=a===null?"":`:${a}`,c={url:`${r}//${o}${l}/`},d=Object.freeze({host:o,port:a,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){ai(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),ai(xS(c,i.config.emulator)&&xS(d,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=c,i.emulatorConfig=d,i.settings.appVerificationDisabledForTesting=!0,IZ(o)?(fHe(`${r}//${o}${l}`),mHe("Auth",!0)):wze()}function pwe(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function bze(n){const e=pwe(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const r=s[1];return{host:r,port:toe(i.substr(r.length+1))}}else{const[r,o]=i.split(":");return{host:r,port:toe(o)}}}function toe(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function wze(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mwe{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return gg("not implemented")}_getIdTokenResponse(e){return gg("not implemented")}_linkToIdToken(e,t){return gg("not implemented")}_getReauthenticationResolver(e){return gg("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function by(n,e){return YVe(n,"POST","/v1/accounts:signInWithIdp",AZ(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cze="http://localhost";class r0 extends mwe{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new r0(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):nf("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s}=t,r=CN(t,["providerId","signInMethod"]);if(!i||!s)return null;const o=new r0(i,s);return o.idToken=r.idToken||void 0,o.accessToken=r.accessToken||void 0,o.secret=r.secret,o.nonce=r.nonce,o.pendingToken=r.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return by(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,by(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,by(e,t)}buildRequest(){const e={requestUri:Cze,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=xN(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FZ{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN extends FZ{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm extends EN{constructor(){super("facebook.com")}static credential(e){return r0._fromParams({providerId:tm.PROVIDER_ID,signInMethod:tm.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return tm.credentialFromTaggedObject(e)}static credentialFromError(e){return tm.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return tm.credential(e.oauthAccessToken)}catch{return null}}}tm.FACEBOOK_SIGN_IN_METHOD="facebook.com";tm.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og extends EN{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return r0._fromParams({providerId:og.PROVIDER_ID,signInMethod:og.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return og.credentialFromTaggedObject(e)}static credentialFromError(e){return og.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return og.credential(t,i)}catch{return null}}}og.GOOGLE_SIGN_IN_METHOD="google.com";og.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im extends EN{constructor(){super("github.com")}static credential(e){return r0._fromParams({providerId:im.PROVIDER_ID,signInMethod:im.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return im.credentialFromTaggedObject(e)}static credentialFromError(e){return im.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return im.credential(e.oauthAccessToken)}catch{return null}}}im.GITHUB_SIGN_IN_METHOD="github.com";im.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm extends EN{constructor(){super("twitter.com")}static credential(e,t){return r0._fromParams({providerId:nm.PROVIDER_ID,signInMethod:nm.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return nm.credentialFromTaggedObject(e)}static credentialFromError(e){return nm.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return nm.credential(t,i)}catch{return null}}}nm.TWITTER_SIGN_IN_METHOD="twitter.com";nm.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,s=!1){const r=await bu._fromIdTokenResponse(e,i,s),o=ioe(i);return new kS({user:r,providerId:o,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const s=ioe(i);return new kS({user:e,providerId:s,_tokenResponse:i,operationType:t})}}function ioe(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qM extends J_{constructor(e,t,i,s){var r;super(t.code,t.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,qM.prototype),this.customData={appName:e.name,tenantId:(r=e.tenantId)!==null&&r!==void 0?r:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,s){return new qM(e,t,i,s)}}function _we(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?qM._fromErrorAndOperation(n,r,e,i):r})}async function yze(n,e,t=!1){const i=await LI(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return kS._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sze(n,e,t=!1){const{auth:i}=n;if(Ph(i.app))return Promise.reject(Bb(i));const s="reauthenticate";try{const r=await LI(n,_we(i,s,e,n),t);ai(r.idToken,i,"internal-error");const o=MZ(r.idToken);ai(o,i,"internal-error");const{sub:a}=o;return ai(n.uid===a,i,"user-mismatch"),kS._forOperation(n,s,r)}catch(r){throw(r==null?void 0:r.code)==="auth/user-not-found"&&nf(i,"user-mismatch"),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xze(n,e,t=!1){if(Ph(n.app))return Promise.reject(Bb(n));const i="signIn",s=await _we(n,i,e),r=await kS._fromIdTokenResponse(n,i,s);return t||await n._updateCurrentUser(r.user),r}function Lze(n,e,t,i){return ev(n).onIdTokenChanged(e,t,i)}function kze(n,e,t){return ev(n).beforeAuthStateChanged(e,t)}function Eze(n,e,t,i){return ev(n).onAuthStateChanged(e,t,i)}function Ize(n){return ev(n).signOut()}const GM="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vwe{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(GM,"1"),this.storage.removeItem(GM),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dze=1e3,Nze=10;class bwe extends vwe{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=fwe(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),s=this.localCache[t];i!==s&&e(t,s,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const i=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(i);!t&&this.localCache[i]===o||this.notifyListeners(i,o)},r=this.storage.getItem(i);oze()&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Nze):s()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},Dze)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}bwe.type="LOCAL";const Tze=bwe;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wwe extends vwe{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}wwe.type="SESSION";const Cwe=wwe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rze(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D3{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const i=new D3(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:s,data:r}=t.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const a=Array.from(o).map(async c=>c(t.origin,r)),l=await Rze(a);t.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}D3.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BZ(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aze{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let r,o;return new Promise((a,l)=>{const c=BZ("",20);s.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},i);o={messageChannel:s,onMessage(u){const h=u;if(h.data.eventId===c)switch(h.data.status){case"ack":clearTimeout(d),r=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),a(h.data.response);break;default:clearTimeout(d),clearTimeout(r),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gh(){return window}function Mze(n){Gh().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ywe(){return typeof Gh().WorkerGlobalScope<"u"&&typeof Gh().importScripts=="function"}async function Pze(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Oze(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function Fze(){return ywe()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Swe="firebaseLocalStorageDb",Bze=1,YM="firebaseLocalStorage",xwe="fbase_key";class IN{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function N3(n,e){return n.transaction([YM],e?"readwrite":"readonly").objectStore(YM)}function Wze(){const n=indexedDB.deleteDatabase(Swe);return new IN(n).toPromise()}function vV(){const n=indexedDB.open(Swe,Bze);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(YM,{keyPath:xwe})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(YM)?e(i):(i.close(),await Wze(),e(await vV()))})})}async function noe(n,e,t){const i=N3(n,!0).put({[xwe]:e,value:t});return new IN(i).toPromise()}async function Hze(n,e){const t=N3(n,!1).get(e),i=await new IN(t).toPromise();return i===void 0?null:i.value}function soe(n,e){const t=N3(n,!0).delete(e);return new IN(t).toPromise()}const Vze=800,zze=3;class Lwe{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await vV(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>zze)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ywe()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=D3._getInstance(Fze()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await Pze(),!this.activeServiceWorker)return;this.sender=new Aze(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Oze()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await vV();return await noe(e,GM,"1"),await soe(e,GM),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>noe(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>Hze(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>soe(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const r=N3(s,!1).getAll();return new IN(r).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:r}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(r)&&(this.notifyListeners(s,r),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Vze)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Lwe.type="LOCAL";const Uze=Lwe;new kN(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kwe(n,e){return e?pg(e):(ai(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WZ extends mwe{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return by(e,this._buildIdpRequest())}_linkToIdToken(e,t){return by(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return by(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function $ze(n){return xze(n.auth,new WZ(n),n.bypassAuthState)}function jze(n){const{auth:e,user:t}=n;return ai(t,e,"internal-error"),Sze(t,new WZ(n),n.bypassAuthState)}async function Kze(n){const{auth:e,user:t}=n;return ai(t,e,"internal-error"),yze(t,new WZ(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ewe{constructor(e,t,i,s,r=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:s,tenantId:r,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:t,sessionId:i,tenantId:r||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return $ze;case"linkViaPopup":case"linkViaRedirect":return Kze;case"reauthViaPopup":case"reauthViaRedirect":return jze;default:nf(this.auth,"internal-error")}}resolve(e){Kg(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Kg(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qze=new kN(2e3,1e4);async function Gze(n,e,t){if(Ph(n.app))return Promise.reject(ku(n,"operation-not-supported-in-this-environment"));const i=I3(n);zVe(n,e,FZ);const s=kwe(i,t);return new yb(i,"signInViaPopup",e,s).executeNotNull()}class yb extends Ewe{constructor(e,t,i,s,r){super(e,t,s,r),this.provider=i,this.authWindow=null,this.pollId=null,yb.currentPopupAction&&yb.currentPopupAction.cancel(),yb.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ai(e,this.auth,"internal-error"),e}async onExecution(){Kg(this.filter.length===1,"Popup operations only handle one event");const e=BZ();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ku(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ku(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,yb.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ku(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,qze.get())};e()}}yb.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yze="pendingRedirect",h2=new Map;class Zze extends Ewe{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=h2.get(this.auth._key());if(!e){try{const i=await Xze(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}h2.set(this.auth._key(),e)}return this.bypassAuthState||h2.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Xze(n,e){const t=eUe(e),i=Jze(n);if(!await i._isAvailable())return!1;const s=await i._get(t)==="true";return await i._remove(t),s}function Qze(n,e){h2.set(n._key(),e)}function Jze(n){return pg(n._redirectPersistence)}function eUe(n){return u2(Yze,n.config.apiKey,n.name)}async function tUe(n,e,t=!1){if(Ph(n.app))return Promise.reject(Bb(n));const i=I3(n),s=kwe(i,e),o=await new Zze(i,s,t).execute();return o&&!t&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iUe=10*60*1e3;class nUe{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!sUe(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!Iwe(e)){const s=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(ku(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=iUe&&this.cachedEventUids.clear(),this.cachedEventUids.has(roe(e))}saveEventToCache(e){this.cachedEventUids.add(roe(e)),this.lastProcessedEventTime=Date.now()}}function roe(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Iwe({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function sUe(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Iwe(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rUe(n,e={}){return xx(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oUe=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,aUe=/^https?/;async function lUe(n){if(n.config.emulator)return;const{authorizedDomains:e}=await rUe(n);for(const t of e)try{if(cUe(t))return}catch{}nf(n,"unauthorized-domain")}function cUe(n){const e=mV(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===i}if(!aUe.test(t))return!1;if(oUe.test(n))return i===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dUe=new kN(3e4,6e4);function ooe(){const n=Gh().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function uUe(n){return new Promise((e,t)=>{var i,s,r;function o(){ooe(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ooe(),t(ku(n,"network-request-failed"))},timeout:dUe.get()})}if(!((s=(i=Gh().gapi)===null||i===void 0?void 0:i.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((r=Gh().gapi)===null||r===void 0)&&r.load)o();else{const a=pze("iframefcb");return Gh()[a]=()=>{gapi.load?o():t(ku(n,"network-request-failed"))},fze(`${gze()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw f2=null,e})}let f2=null;function hUe(n){return f2=f2||uUe(n),f2}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fUe=new kN(5e3,15e3),gUe="__/auth/iframe",pUe="emulator/auth/iframe",mUe={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_Ue=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function vUe(n){const e=n.config;ai(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?RZ(e,pUe):`https://${n.config.authDomain}/${gUe}`,i={apiKey:e.apiKey,appName:n.name,v:LN},s=_Ue.get(n.config.apiHost);s&&(i.eid=s);const r=n._getFrameworks();return r.length&&(i.fw=r.join(",")),`${t}?${xN(i).slice(1)}`}async function bUe(n){const e=await hUe(n),t=Gh().gapi;return ai(t,n,"internal-error"),e.open({where:document.body,url:vUe(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mUe,dontclear:!0},i=>new Promise(async(s,r)=>{await i.restyle({setHideOnLeave:!1});const o=ku(n,"network-request-failed"),a=Gh().setTimeout(()=>{r(o)},fUe.get());function l(){Gh().clearTimeout(a),s(i)}i.ping(l).then(l,()=>{r(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wUe={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},CUe=500,yUe=600,SUe="_blank",xUe="http://localhost";class aoe{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function LUe(n,e,t,i=CUe,s=yUe){const r=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l=Object.assign(Object.assign({},wUe),{width:i.toString(),height:s.toString(),top:r,left:o}),c=el().toLowerCase();t&&(a=lwe(c)?SUe:t),owe(c)&&(e=e||xUe,l.scrollbars="yes");const d=Object.entries(l).reduce((h,[f,g])=>`${h}${f}=${g},`,"");if(rze(c)&&a!=="_self")return kUe(e||"",a),new aoe(null);const u=window.open(e||"",a,d);ai(u,n,"popup-blocked");try{u.focus()}catch{}return new aoe(u)}function kUe(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EUe="__/auth/handler",IUe="emulator/auth/handler",DUe=encodeURIComponent("fac");async function loe(n,e,t,i,s,r){ai(n.config.authDomain,n,"auth-domain-config-required"),ai(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:LN,eventId:s};if(e instanceof FZ){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",EHe(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,u]of Object.entries({}))o[d]=u}if(e instanceof EN){const d=e.getScopes().filter(u=>u!=="");d.length>0&&(o.scopes=d.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await n._getAppCheckToken(),c=l?`#${DUe}=${encodeURIComponent(l)}`:"";return`${NUe(n)}?${xN(a).slice(1)}${c}`}function NUe({config:n}){return n.emulator?RZ(n,IUe):`https://${n.authDomain}/${EUe}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I9="webStorageSupport";class TUe{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Cwe,this._completeRedirectFn=tUe,this._overrideRedirectResult=Qze}async _openPopup(e,t,i,s){var r;Kg((r=this.eventManagers[e._key()])===null||r===void 0?void 0:r.manager,"_initialize() not called before _openPopup()");const o=await loe(e,t,i,mV(),s);return LUe(e,o,BZ())}async _openRedirect(e,t,i,s){await this._originValidation(e);const r=await loe(e,t,i,mV(),s);return Mze(r),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:r}=this.eventManagers[t];return s?Promise.resolve(s):(Kg(r,"If manager is not set, promise should be"),r)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await bUe(e),i=new nUe(e);return t.register("authEvent",s=>(ai(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(I9,{type:I9},s=>{var r;const o=(r=s==null?void 0:s[0])===null||r===void 0?void 0:r[I9];o!==void 0&&t(!!o),nf(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=lUe(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return fwe()||awe()||PZ()}}const RUe=TUe;var coe="@firebase/auth",doe="1.10.6";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AUe{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ai(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MUe(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function PUe(n){SI(new LS("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),r=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;ai(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:gwe(n)},c=new uze(i,s,r,l);return _ze(c,t),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),SI(new LS("auth-internal",e=>{const t=I3(e.getProvider("auth").getImmediate());return(i=>new AUe(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),my(coe,doe,MUe(n)),my(coe,doe,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OUe=5*60,FUe=jbe("authIdTokenMaxAge")||OUe;let uoe=null;const BUe=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>FUe)return;const s=t==null?void 0:t.token;uoe!==s&&(uoe=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function WUe(n=DVe()){const e=Ybe(n,"auth");if(e.isInitialized())return e.getImmediate();const t=mze(n,{popupRedirectResolver:RUe,persistence:[Uze,Tze,Cwe]}),i=jbe("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const r=new URL(i,location.origin);if(location.origin===r.origin){const o=BUe(r.toString());kze(t,o,()=>o(t.currentUser)),Lze(t,a=>o(a))}}const s=uHe("auth");return s&&vze(t,`http://${s}`),t}function HUe(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}hze({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=s=>{const r=ku("internal-error");r.customData=s,t(r)},i.type="text/javascript",i.charset="UTF-8",HUe().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});PUe("Browser");var VUe="firebase",zUe="11.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */my(VUe,zUe,"app");console.log("AIzaSyCq42nKnlSfOIp_eMqvGh7LxfLfh2MDGRQ");const UUe={apiKey:"AIzaSyCq42nKnlSfOIp_eMqvGh7LxfLfh2MDGRQ",authDomain:"yamlgenerator-b4495.firebaseapp.com",projectId:"yamlgenerator-b4495",storageBucket:"yamlgenerator-b4495.firebasestorage.app",messagingSenderId:"1001665856411",appId:"1:1001665856411:web:cf6a953eb3a471fd81d73e",measurementId:"G-VD7EKLPX3E"},$Ue=Zbe(UUe),HZ=WUe($Ue),jUe=new og,Dwe=async()=>{try{return(await Gze(HZ,jUe)).user}catch(n){throw console.error("Error signing in with Google: ",n),n}},KUe=()=>Ize(HZ),Nwe=A.createContext({user:null,loading:!0});function qUe({children:n}){const[e,t]=A.useState(null),[i,s]=A.useState(!0);return A.useEffect(()=>{const r=Eze(HZ,o=>{t(o),s(!1)});return()=>r()},[]),k.jsx(Nwe.Provider,{value:{user:e,loading:i},children:!i&&n})}function DN(){return A.useContext(Nwe)}function oc(n,e=0){return n[n.length-(1+e)]}function GUe(n){if(n.length===0)throw new Error("Invalid tail call");return[n.slice(0,n.length-1),n[n.length-1]]}function dn(n,e,t=(i,s)=>i===s){if(n===e)return!0;if(!n||!e||n.length!==e.length)return!1;for(let i=0,s=n.length;i<s;i++)if(!t(n[i],e[i]))return!1;return!0}function YUe(n,e){const t=n.length-1;e<t&&(n[e]=n[t]),n.pop()}function kI(n,e,t){return ZUe(n.length,i=>t(n[i],e))}function ZUe(n,e){let t=0,i=n-1;for(;t<=i;){const s=(t+i)/2|0,r=e(s);if(r<0)t=s+1;else if(r>0)i=s-1;else return s}return-(t+1)}function bV(n,e,t){if(n=n|0,n>=e.length)throw new TypeError("invalid index");const i=e[Math.floor(e.length*Math.random())],s=[],r=[],o=[];for(const a of e){const l=t(a,i);l<0?s.push(a):l>0?r.push(a):o.push(a)}return n<s.length?bV(n,s,t):n<s.length+o.length?o[0]:bV(n-(s.length+o.length),r,t)}function hoe(n,e){const t=[];let i;for(const s of n.slice(0).sort(e))!i||e(i[0],s)!==0?(i=[s],t.push(i)):i.push(s);return t}function*VZ(n,e){let t,i;for(const s of n)i!==void 0&&e(i,s)?t.push(s):(t&&(yield t),t=[s]),i=s;t&&(yield t)}function Twe(n,e){for(let t=0;t<=n.length;t++)e(t===0?void 0:n[t-1],t===n.length?void 0:n[t])}function XUe(n,e){for(let t=0;t<n.length;t++)e(t===0?void 0:n[t-1],n[t],t+1===n.length?void 0:n[t+1])}function Id(n){return n.filter(e=>!!e)}function foe(n){let e=0;for(let t=0;t<n.length;t++)n[t]&&(n[e]=n[t],e+=1);n.length=e}function Rwe(n){return!Array.isArray(n)||n.length===0}function ao(n){return Array.isArray(n)&&n.length>0}function qg(n,e=t=>t){const t=new Set;return n.filter(i=>{const s=e(i);return t.has(s)?!1:(t.add(s),!0)})}function zZ(n,e){return n.length>0?n[0]:e}function ta(n,e){let t=typeof e=="number"?n:0;typeof e=="number"?t=n:(t=0,e=n);const i=[];if(t<=e)for(let s=t;s<e;s++)i.push(s);else for(let s=t;s>e;s--)i.push(s);return i}function T3(n,e,t){const i=n.slice(0,e),s=n.slice(e);return i.concat(t,s)}function D9(n,e){const t=n.indexOf(e);t>-1&&(n.splice(t,1),n.unshift(e))}function TR(n,e){const t=n.indexOf(e);t>-1&&(n.splice(t,1),n.push(e))}function wV(n,e){for(const t of e)n.push(t)}function UZ(n){return Array.isArray(n)?n:[n]}function QUe(n,e,t){const i=Awe(n,e),s=n.length,r=t.length;n.length=s+r;for(let o=s-1;o>=i;o--)n[o+r]=n[o];for(let o=0;o<r;o++)n[o+i]=t[o]}function goe(n,e,t,i){const s=Awe(n,e);let r=n.splice(s,t);return r===void 0&&(r=[]),QUe(n,s,i),r}function Awe(n,e){return e<0?Math.max(e+n.length,0):Math.min(e,n.length)}var EI;(function(n){function e(r){return r<0}n.isLessThan=e;function t(r){return r<=0}n.isLessThanOrEqual=t;function i(r){return r>0}n.isGreaterThan=i;function s(r){return r===0}n.isNeitherLessOrGreaterThan=s,n.greaterThan=1,n.lessThan=-1,n.neitherLessOrGreaterThan=0})(EI||(EI={}));function No(n,e){return(t,i)=>e(n(t),n(i))}function JUe(...n){return(e,t)=>{for(const i of n){const s=i(e,t);if(!EI.isNeitherLessOrGreaterThan(s))return s}return EI.neitherLessOrGreaterThan}}const xd=(n,e)=>n-e,e$e=(n,e)=>xd(n?1:0,e?1:0);function Mwe(n){return(e,t)=>-n(e,t)}class Gg{constructor(e){this.items=e,this.firstIdx=0,this.lastIdx=this.items.length-1}get length(){return this.lastIdx-this.firstIdx+1}takeWhile(e){let t=this.firstIdx;for(;t<this.items.length&&e(this.items[t]);)t++;const i=t===this.firstIdx?null:this.items.slice(this.firstIdx,t);return this.firstIdx=t,i}takeFromEndWhile(e){let t=this.lastIdx;for(;t>=0&&e(this.items[t]);)t--;const i=t===this.lastIdx?null:this.items.slice(t+1,this.lastIdx+1);return this.lastIdx=t,i}peek(){if(this.length!==0)return this.items[this.firstIdx]}dequeue(){const e=this.items[this.firstIdx];return this.firstIdx++,e}takeCount(e){const t=this.items.slice(this.firstIdx,this.firstIdx+e);return this.firstIdx+=e,t}}const j1=class j1{constructor(e){this.iterate=e}toArray(){const e=[];return this.iterate(t=>(e.push(t),!0)),e}filter(e){return new j1(t=>this.iterate(i=>e(i)?t(i):!0))}map(e){return new j1(t=>this.iterate(i=>t(e(i))))}findLast(e){let t;return this.iterate(i=>(e(i)&&(t=i),!0)),t}findLastMaxBy(e){let t,i=!0;return this.iterate(s=>((i||EI.isGreaterThan(e(s,t)))&&(i=!1,t=s),!0)),t}};j1.empty=new j1(e=>{});let Wb=j1;class ZM{constructor(e){this._indexMap=e}static createSortPermutation(e,t){const i=Array.from(e.keys()).sort((s,r)=>t(e[s],e[r]));return new ZM(i)}apply(e){return e.map((t,i)=>e[this._indexMap[i]])}inverse(){const e=this._indexMap.slice();for(let t=0;t<this._indexMap.length;t++)e[this._indexMap[t]]=t;return new ZM(e)}}function ca(n){return typeof n=="string"}function zs(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)&&!(n instanceof RegExp)&&!(n instanceof Date)}function t$e(n){const e=Object.getPrototypeOf(Uint8Array);return typeof n=="object"&&n instanceof e}function L_(n){return typeof n=="number"&&!isNaN(n)}function poe(n){return!!n&&typeof n[Symbol.iterator]=="function"}function Pwe(n){return n===!0||n===!1}function ro(n){return typeof n>"u"}function Yh(n){return!El(n)}function El(n){return ro(n)||n===null}function si(n,e){if(!n)throw new Error(e?`Unexpected type, expected '${e}'`:"Unexpected type")}function wm(n){if(El(n))throw new Error("Assertion Failed: argument is undefined or null");return n}function II(n){return typeof n=="function"}function i$e(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++)n$e(n[i],e[i])}function n$e(n,e){if(ca(e)){if(typeof n!==e)throw new Error(`argument does not match constraint: typeof ${e}`)}else if(II(e)){try{if(n instanceof e)return}catch{}if(!El(n)&&n.constructor===e||e.length===1&&e.call(void 0,n)===!0)return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}function eg(n){if(!n||typeof n!="object"||n instanceof RegExp)return n;const e=Array.isArray(n)?[]:{};return Object.entries(n).forEach(([t,i])=>{e[t]=i&&typeof i=="object"?eg(i):i}),e}function s$e(n){if(!n||typeof n!="object")return n;const e=[n];for(;e.length>0;){const t=e.shift();Object.freeze(t);for(const i in t)if(Owe.call(t,i)){const s=t[i];typeof s=="object"&&!Object.isFrozen(s)&&!t$e(s)&&e.push(s)}}return n}const Owe=Object.prototype.hasOwnProperty;function Fwe(n,e){return CV(n,e,new Set)}function CV(n,e,t){if(El(n))return n;const i=e(n);if(typeof i<"u")return i;if(Array.isArray(n)){const s=[];for(const r of n)s.push(CV(r,e,t));return s}if(zs(n)){if(t.has(n))throw new Error("Cannot clone recursive data-structure");t.add(n);const s={};for(const r in n)Owe.call(n,r)&&(s[r]=CV(n[r],e,t));return t.delete(n),s}return n}function R3(n,e,t=!0){return zs(n)?(zs(e)&&Object.keys(e).forEach(i=>{i in n?t&&(zs(n[i])&&zs(e[i])?R3(n[i],e[i],t):n[i]=e[i]):n[i]=e[i]}),n):e}function Ga(n,e){if(n===e)return!0;if(n==null||e===null||e===void 0||typeof n!=typeof e||typeof n!="object"||Array.isArray(n)!==Array.isArray(e))return!1;let t,i;if(Array.isArray(n)){if(n.length!==e.length)return!1;for(t=0;t<n.length;t++)if(!Ga(n[t],e[t]))return!1}else{const s=[];for(i in n)s.push(i);s.sort();const r=[];for(i in e)r.push(i);if(r.sort(),!Ga(s,r))return!1;for(t=0;t<s.length;t++)if(!Ga(n[s[t]],e[s[t]]))return!1}return!0}function r$e(n){let e=[];for(;Object.prototype!==n;)e=e.concat(Object.getOwnPropertyNames(n)),n=Object.getPrototypeOf(n);return e}function yV(n){const e=[];for(const t of r$e(n))typeof n[t]=="function"&&e.push(t);return e}function o$e(n,e){const t=s=>function(){const r=Array.prototype.slice.call(arguments,0);return e(s,r)},i={};for(const s of n)i[s]=t(s);return i}function Bwe(){return globalThis._VSCODE_NLS_MESSAGES}function $Z(){return globalThis._VSCODE_NLS_LANGUAGE}const a$e=$Z()==="pseudo"||typeof document<"u"&&document.location&&document.location.hash.indexOf("pseudo=true")>=0;function XM(n,e){let t;return e.length===0?t=n:t=n.replace(/\{(\d+)\}/g,(i,s)=>{const r=s[0],o=e[r];let a=i;return typeof o=="string"?a=o:(typeof o=="number"||typeof o=="boolean"||o===void 0||o===null)&&(a=String(o)),a}),a$e&&(t=""+t.replace(/[aouei]/g,"$&$&")+""),t}function v(n,e,...t){return XM(typeof n=="number"?Wwe(n,e):e,t)}function Wwe(n,e){var i;const t=(i=Bwe())==null?void 0:i[n];if(typeof t!="string"){if(typeof e=="string")return e;throw new Error(`!!! NLS MISSING: ${n} !!!`)}return t}function lt(n,e,...t){let i;typeof n=="number"?i=Wwe(n,e):i=e;const s=XM(i,t);return{value:s,original:e===i?s:XM(e,t)}}const v1="en";let QM=!1,JM=!1,g2=!1,Hwe=!1,jZ=!1,KZ=!1,Vwe=!1,RR,p2=v1,moe=v1,l$e,qd;const Tg=globalThis;let bo;var cfe;typeof Tg.vscode<"u"&&typeof Tg.vscode.process<"u"?bo=Tg.vscode.process:typeof process<"u"&&typeof((cfe=process==null?void 0:process.versions)==null?void 0:cfe.node)=="string"&&(bo=process);var dfe;const c$e=typeof((dfe=bo==null?void 0:bo.versions)==null?void 0:dfe.electron)=="string",d$e=c$e&&(bo==null?void 0:bo.type)==="renderer";var ufe;if(typeof bo=="object"){QM=bo.platform==="win32",JM=bo.platform==="darwin",g2=bo.platform==="linux",g2&&bo.env.SNAP&&bo.env.SNAP_REVISION,bo.env.CI||bo.env.BUILD_ARTIFACTSTAGINGDIRECTORY,RR=v1,p2=v1;const n=bo.env.VSCODE_NLS_CONFIG;if(n)try{const e=JSON.parse(n);RR=e.userLocale,moe=e.osLocale,p2=e.resolvedLanguage||v1,l$e=(ufe=e.languagePack)==null?void 0:ufe.translationsConfigFile}catch{}Hwe=!0}else typeof navigator=="object"&&!d$e?(qd=navigator.userAgent,QM=qd.indexOf("Windows")>=0,JM=qd.indexOf("Macintosh")>=0,KZ=(qd.indexOf("Macintosh")>=0||qd.indexOf("iPad")>=0||qd.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,g2=qd.indexOf("Linux")>=0,Vwe=(qd==null?void 0:qd.indexOf("Mobi"))>=0,jZ=!0,p2=$Z()||v1,RR=navigator.language.toLowerCase(),moe=RR):console.error("Unable to resolve platform.");const wr=QM,Bt=JM,Po=g2,Eu=Hwe,B0=jZ,u$e=jZ&&typeof Tg.importScripts=="function",h$e=u$e?Tg.origin:void 0,Bu=KZ,zwe=Vwe,sf=qd,f$e=p2,g$e=typeof Tg.postMessage=="function"&&!Tg.importScripts,Uwe=(()=>{if(g$e){const n=[];Tg.addEventListener("message",t=>{if(t.data&&t.data.vscodeScheduleAsyncWork)for(let i=0,s=n.length;i<s;i++){const r=n[i];if(r.id===t.data.vscodeScheduleAsyncWork){n.splice(i,1),r.callback();return}}});let e=0;return t=>{const i=++e;n.push({id:i,callback:t}),Tg.postMessage({vscodeScheduleAsyncWork:i},"*")}}return n=>setTimeout(n)})(),Ka=JM||KZ?2:QM?1:3;let _oe=!0,voe=!1;function $we(){if(!voe){voe=!0;const n=new Uint8Array(2);n[0]=1,n[1]=2,_oe=new Uint16Array(n.buffer)[0]===513}return _oe}const jwe=!!(sf&&sf.indexOf("Chrome")>=0),p$e=!!(sf&&sf.indexOf("Firefox")>=0),m$e=!!(!jwe&&sf&&sf.indexOf("Safari")>=0),_$e=!!(sf&&sf.indexOf("Edg/")>=0),v$e=!!(sf&&sf.indexOf("Android")>=0),Tr={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!0,independentColorPoolPerBracketType:!1}};var qt;(function(n){function e(S){return S&&typeof S=="object"&&typeof S[Symbol.iterator]=="function"}n.is=e;const t=Object.freeze([]);function i(){return t}n.empty=i;function*s(S){yield S}n.single=s;function r(S){return e(S)?S:s(S)}n.wrap=r;function o(S){return S||t}n.from=o;function*a(S){for(let x=S.length-1;x>=0;x--)yield S[x]}n.reverse=a;function l(S){return!S||S[Symbol.iterator]().next().done===!0}n.isEmpty=l;function c(S){return S[Symbol.iterator]().next().value}n.first=c;function d(S,x){let E=0;for(const D of S)if(x(D,E++))return!0;return!1}n.some=d;function u(S,x){for(const E of S)if(x(E))return E}n.find=u;function*h(S,x){for(const E of S)x(E)&&(yield E)}n.filter=h;function*f(S,x){let E=0;for(const D of S)yield x(D,E++)}n.map=f;function*g(S,x){let E=0;for(const D of S)yield*x(D,E++)}n.flatMap=g;function*p(...S){for(const x of S)yield*x}n.concat=p;function _(S,x,E){let D=E;for(const N of S)D=x(D,N);return D}n.reduce=_;function*w(S,x,E=S.length){for(x<0&&(x+=S.length),E<0?E+=S.length:E>S.length&&(E=S.length);x<E;x++)yield S[x]}n.slice=w;function b(S,x=Number.POSITIVE_INFINITY){const E=[];if(x===0)return[E,S];const D=S[Symbol.iterator]();for(let N=0;N<x;N++){const I=D.next();if(I.done)return[E,n.empty()];E.push(I.value)}return[E,{[Symbol.iterator](){return D}}]}n.consume=b;async function y(S){const x=[];for await(const E of S)x.push(E);return Promise.resolve(x)}n.asyncToArray=y})(qt||(qt={}));var xg;let Ss=(xg=class{constructor(e){this.element=e,this.next=xg.Undefined,this.prev=xg.Undefined}},xg.Undefined=new xg(void 0),xg);class xo{constructor(){this._first=Ss.Undefined,this._last=Ss.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===Ss.Undefined}clear(){let e=this._first;for(;e!==Ss.Undefined;){const t=e.next;e.prev=Ss.Undefined,e.next=Ss.Undefined,e=t}this._first=Ss.Undefined,this._last=Ss.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){const i=new Ss(e);if(this._first===Ss.Undefined)this._first=i,this._last=i;else if(t){const r=this._last;this._last=i,i.prev=r,r.next=i}else{const r=this._first;this._first=i,i.next=r,r.prev=i}this._size+=1;let s=!1;return()=>{s||(s=!0,this._remove(i))}}shift(){if(this._first!==Ss.Undefined){const e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==Ss.Undefined){const e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==Ss.Undefined&&e.next!==Ss.Undefined){const t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===Ss.Undefined&&e.next===Ss.Undefined?(this._first=Ss.Undefined,this._last=Ss.Undefined):e.next===Ss.Undefined?(this._last=this._last.prev,this._last.next=Ss.Undefined):e.prev===Ss.Undefined&&(this._first=this._first.next,this._first.prev=Ss.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==Ss.Undefined;)yield e.element,e=e.next}}const eP="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";function b$e(n=""){let e="(-?\\d*\\.\\d\\w*)|([^";for(const t of eP)n.indexOf(t)>=0||(e+="\\"+t);return e+="\\s]+)",new RegExp(e,"g")}const qZ=b$e();function GZ(n){let e=qZ;if(n&&n instanceof RegExp)if(n.global)e=n;else{let t="g";n.ignoreCase&&(t+="i"),n.multiline&&(t+="m"),n.unicode&&(t+="u"),e=new RegExp(n.source,t)}return e.lastIndex=0,e}const Kwe=new xo;Kwe.unshift({maxLen:1e3,windowSize:15,timeBudget:150});function DI(n,e,t,i,s){if(e=GZ(e),s||(s=qt.first(Kwe)),t.length>s.maxLen){let c=n-s.maxLen/2;return c<0?c=0:i+=c,t=t.substring(c,n+s.maxLen/2),DI(n,e,t,i,s)}const r=Date.now(),o=n-1-i;let a=-1,l=null;for(let c=1;!(Date.now()-r>=s.timeBudget);c++){const d=o-s.windowSize*c;e.lastIndex=Math.max(0,d);const u=w$e(e,t,o,a);if(!u&&l||(l=u,d<=0))break;a=d}if(l){const c={word:l[0],startColumn:i+1+l.index,endColumn:i+1+l.index+l[0].length};return e.lastIndex=0,c}return null}function w$e(n,e,t,i){let s;for(;s=n.exec(e);){const r=s.index||0;if(r<=t&&n.lastIndex>=t)return s;if(i>0&&r>i)return null}return null}const dh=8;class qwe{constructor(e){this._values=e}hasChanged(e){return this._values[e]}}class Gwe{constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}}class rn{constructor(e,t,i,s){this.id=e,this.name=t,this.defaultValue=i,this.schema=s}applyUpdate(e,t){return A3(e,t)}compute(e,t,i){return i}}class Kk{constructor(e,t){this.newValue=e,this.didChange=t}}function A3(n,e){if(typeof n!="object"||typeof e!="object"||!n||!e)return new Kk(e,n!==e);if(Array.isArray(n)||Array.isArray(e)){const i=Array.isArray(n)&&Array.isArray(e)&&dn(n,e);return new Kk(e,!i)}let t=!1;for(const i in e)if(e.hasOwnProperty(i)){const s=A3(n[i],e[i]);s.didChange&&(n[i]=s.newValue,t=!0)}return new Kk(n,t)}class NN{constructor(e){this.schema=void 0,this.id=e,this.name="_never_",this.defaultValue=void 0}applyUpdate(e,t){return A3(e,t)}validate(e){return this.defaultValue}}class Lx{constructor(e,t,i,s){this.id=e,this.name=t,this.defaultValue=i,this.schema=s}applyUpdate(e,t){return A3(e,t)}validate(e){return typeof e>"u"?this.defaultValue:e}compute(e,t,i){return i}}function Ge(n,e){return typeof n>"u"?e:n==="false"?!1:!!n}class ii extends Lx{constructor(e,t,i,s=void 0){typeof s<"u"&&(s.type="boolean",s.default=i),super(e,t,i,s)}validate(e){return Ge(e,this.defaultValue)}}function Vv(n,e,t,i){if(typeof n>"u")return e;let s=parseInt(n,10);return isNaN(s)?e:(s=Math.max(t,s),s=Math.min(i,s),s|0)}class Pi extends Lx{static clampedInt(e,t,i,s){return Vv(e,t,i,s)}constructor(e,t,i,s,r,o=void 0){typeof o<"u"&&(o.type="integer",o.default=i,o.minimum=s,o.maximum=r),super(e,t,i,o),this.minimum=s,this.maximum=r}validate(e){return Pi.clampedInt(e,this.defaultValue,this.minimum,this.maximum)}}function C$e(n,e,t,i){if(typeof n>"u")return e;const s=Al.float(n,e);return Al.clamp(s,t,i)}class Al extends Lx{static clamp(e,t,i){return e<t?t:e>i?i:e}static float(e,t){if(typeof e=="number")return e;if(typeof e>"u")return t;const i=parseFloat(e);return isNaN(i)?t:i}constructor(e,t,i,s,r){typeof r<"u"&&(r.type="number",r.default=i),super(e,t,i,r),this.validationFn=s}validate(e){return this.validationFn(Al.float(e,this.defaultValue))}}class no extends Lx{static string(e,t){return typeof e!="string"?t:e}constructor(e,t,i,s=void 0){typeof s<"u"&&(s.type="string",s.default=i),super(e,t,i,s)}validate(e){return no.string(e,this.defaultValue)}}function En(n,e,t,i){return typeof n!="string"?e:i&&n in i?i[n]:t.indexOf(n)===-1?e:n}class kn extends Lx{constructor(e,t,i,s,r=void 0){typeof r<"u"&&(r.type="string",r.enum=s,r.default=i),super(e,t,i,r),this._allowedValues=s}validate(e){return En(e,this.defaultValue,this._allowedValues)}}class AR extends rn{constructor(e,t,i,s,r,o,a=void 0){typeof a<"u"&&(a.type="string",a.enum=r,a.default=s),super(e,t,i,a),this._allowedValues=r,this._convert=o}validate(e){return typeof e!="string"?this.defaultValue:this._allowedValues.indexOf(e)===-1?this.defaultValue:this._convert(e)}}function y$e(n){switch(n){case"none":return 0;case"keep":return 1;case"brackets":return 2;case"advanced":return 3;case"full":return 4}}class S$e extends rn{constructor(){super(2,"accessibilitySupport",0,{type:"string",enum:["auto","on","off"],enumDescriptions:[v("accessibilitySupport.auto","Use platform APIs to detect when a Screen Reader is attached."),v("accessibilitySupport.on","Optimize for usage with a Screen Reader."),v("accessibilitySupport.off","Assume a screen reader is not attached.")],default:"auto",tags:["accessibility"],description:v("accessibilitySupport","Controls if the UI should run in a mode where it is optimized for screen readers.")})}validate(e){switch(e){case"auto":return 0;case"off":return 1;case"on":return 2}return this.defaultValue}compute(e,t,i){return i===0?e.accessibilitySupport:i}}class x$e extends rn{constructor(){const e={insertSpace:!0,ignoreEmptyLines:!0};super(23,"comments",e,{"editor.comments.insertSpace":{type:"boolean",default:e.insertSpace,description:v("comments.insertSpace","Controls whether a space character is inserted when commenting.")},"editor.comments.ignoreEmptyLines":{type:"boolean",default:e.ignoreEmptyLines,description:v("comments.ignoreEmptyLines","Controls if empty lines should be ignored with toggle, add or remove actions for line comments.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertSpace:Ge(t.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:Ge(t.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}}function L$e(n){switch(n){case"blink":return 1;case"smooth":return 2;case"phase":return 3;case"expand":return 4;case"solid":return 5}}var er;(function(n){n[n.Line=1]="Line",n[n.Block=2]="Block",n[n.Underline=3]="Underline",n[n.LineThin=4]="LineThin",n[n.BlockOutline=5]="BlockOutline",n[n.UnderlineThin=6]="UnderlineThin"})(er||(er={}));function k$e(n){switch(n){case"line":return er.Line;case"block":return er.Block;case"underline":return er.Underline;case"line-thin":return er.LineThin;case"block-outline":return er.BlockOutline;case"underline-thin":return er.UnderlineThin}}class E$e extends NN{constructor(){super(143)}compute(e,t,i){const s=["monaco-editor"];return t.get(39)&&s.push(t.get(39)),e.extraEditorClassName&&s.push(e.extraEditorClassName),t.get(74)==="default"?s.push("mouse-default"):t.get(74)==="copy"&&s.push("mouse-copy"),t.get(112)&&s.push("showUnused"),t.get(141)&&s.push("showDeprecated"),s.join(" ")}}class I$e extends ii{constructor(){super(37,"emptySelectionClipboard",!0,{description:v("emptySelectionClipboard","Controls whether copying without a selection copies the current line.")})}compute(e,t,i){return i&&e.emptySelectionClipboard}}class D$e extends rn{constructor(){const e={cursorMoveOnType:!0,seedSearchStringFromSelection:"always",autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0};super(41,"find",e,{"editor.find.cursorMoveOnType":{type:"boolean",default:e.cursorMoveOnType,description:v("find.cursorMoveOnType","Controls whether the cursor should jump to find matches while typing.")},"editor.find.seedSearchStringFromSelection":{type:"string",enum:["never","always","selection"],default:e.seedSearchStringFromSelection,enumDescriptions:[v("editor.find.seedSearchStringFromSelection.never","Never seed search string from the editor selection."),v("editor.find.seedSearchStringFromSelection.always","Always seed search string from the editor selection, including word at cursor position."),v("editor.find.seedSearchStringFromSelection.selection","Only seed search string from the editor selection.")],description:v("find.seedSearchStringFromSelection","Controls whether the search string in the Find Widget is seeded from the editor selection.")},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:e.autoFindInSelection,enumDescriptions:[v("editor.find.autoFindInSelection.never","Never turn on Find in Selection automatically (default)."),v("editor.find.autoFindInSelection.always","Always turn on Find in Selection automatically."),v("editor.find.autoFindInSelection.multiline","Turn on Find in Selection automatically when multiple lines of content are selected.")],description:v("find.autoFindInSelection","Controls the condition for turning on Find in Selection automatically.")},"editor.find.globalFindClipboard":{type:"boolean",default:e.globalFindClipboard,description:v("find.globalFindClipboard","Controls whether the Find Widget should read or modify the shared find clipboard on macOS."),included:Bt},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:e.addExtraSpaceOnTop,description:v("find.addExtraSpaceOnTop","Controls whether the Find Widget should add extra lines on top of the editor. When true, you can scroll beyond the first line when the Find Widget is visible.")},"editor.find.loop":{type:"boolean",default:e.loop,description:v("find.loop","Controls whether the search automatically restarts from the beginning (or the end) when no further matches can be found.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{cursorMoveOnType:Ge(t.cursorMoveOnType,this.defaultValue.cursorMoveOnType),seedSearchStringFromSelection:typeof e.seedSearchStringFromSelection=="boolean"?e.seedSearchStringFromSelection?"always":"never":En(t.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,["never","always","selection"]),autoFindInSelection:typeof e.autoFindInSelection=="boolean"?e.autoFindInSelection?"always":"never":En(t.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:Ge(t.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:Ge(t.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:Ge(t.loop,this.defaultValue.loop)}}}const Gf=class Gf extends rn{constructor(){super(51,"fontLigatures",Gf.OFF,{anyOf:[{type:"boolean",description:v("fontLigatures","Enables/Disables font ligatures ('calt' and 'liga' font features). Change this to a string for fine-grained control of the 'font-feature-settings' CSS property.")},{type:"string",description:v("fontFeatureSettings","Explicit 'font-feature-settings' CSS property. A boolean can be passed instead if one only needs to turn on/off ligatures.")}],description:v("fontLigaturesGeneral","Configures font ligatures or font features. Can be either a boolean to enable/disable ligatures or a string for the value of the CSS 'font-feature-settings' property."),default:!1})}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e==="false"||e.length===0?Gf.OFF:e==="true"?Gf.ON:e:e?Gf.ON:Gf.OFF}};Gf.OFF='"liga" off, "calt" off',Gf.ON='"liga" on, "calt" on';let k_=Gf;const Yf=class Yf extends rn{constructor(){super(54,"fontVariations",Yf.OFF,{anyOf:[{type:"boolean",description:v("fontVariations","Enables/Disables the translation from font-weight to font-variation-settings. Change this to a string for fine-grained control of the 'font-variation-settings' CSS property.")},{type:"string",description:v("fontVariationSettings","Explicit 'font-variation-settings' CSS property. A boolean can be passed instead if one only needs to translate font-weight to font-variation-settings.")}],description:v("fontVariationsGeneral","Configures font variations. Can be either a boolean to enable/disable the translation from font-weight to font-variation-settings or a string for the value of the CSS 'font-variation-settings' property."),default:!1})}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e==="false"?Yf.OFF:e==="true"?Yf.TRANSLATE:e:e?Yf.TRANSLATE:Yf.OFF}compute(e,t,i){return e.fontInfo.fontVariationSettings}};Yf.OFF="normal",Yf.TRANSLATE="translate";let NI=Yf;class N$e extends NN{constructor(){super(50)}compute(e,t,i){return e.fontInfo}}class T$e extends Lx{constructor(){super(52,"fontSize",To.fontSize,{type:"number",minimum:6,maximum:100,default:To.fontSize,description:v("fontSize","Controls the font size in pixels.")})}validate(e){const t=Al.float(e,this.defaultValue);return t===0?To.fontSize:Al.clamp(t,6,100)}compute(e,t,i){return e.fontInfo.fontSize}}const mh=class mh extends rn{constructor(){super(53,"fontWeight",To.fontWeight,{anyOf:[{type:"number",minimum:mh.MINIMUM_VALUE,maximum:mh.MAXIMUM_VALUE,errorMessage:v("fontWeightErrorMessage",'Only "normal" and "bold" keywords or numbers between 1 and 1000 are allowed.')},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:mh.SUGGESTION_VALUES}],default:To.fontWeight,description:v("fontWeight",'Controls the font weight. Accepts "normal" and "bold" keywords or numbers between 1 and 1000.')})}validate(e){return e==="normal"||e==="bold"?e:String(Pi.clampedInt(e,To.fontWeight,mh.MINIMUM_VALUE,mh.MAXIMUM_VALUE))}};mh.SUGGESTION_VALUES=["normal","bold","100","200","300","400","500","600","700","800","900"],mh.MINIMUM_VALUE=1,mh.MAXIMUM_VALUE=1e3;let SV=mh;class R$e extends rn{constructor(){const e={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",multipleTests:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:"",alternativeTestsCommand:""},t={type:"string",enum:["peek","gotoAndPeek","goto"],default:e.multiple,enumDescriptions:[v("editor.gotoLocation.multiple.peek","Show Peek view of the results (default)"),v("editor.gotoLocation.multiple.gotoAndPeek","Go to the primary result and show a Peek view"),v("editor.gotoLocation.multiple.goto","Go to the primary result and enable Peek-less navigation to others")]},i=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];super(58,"gotoLocation",e,{"editor.gotoLocation.multiple":{deprecationMessage:v("editor.gotoLocation.multiple.deprecated","This setting is deprecated, please use separate settings like 'editor.editor.gotoLocation.multipleDefinitions' or 'editor.editor.gotoLocation.multipleImplementations' instead.")},"editor.gotoLocation.multipleDefinitions":{description:v("editor.editor.gotoLocation.multipleDefinitions","Controls the behavior the 'Go to Definition'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleTypeDefinitions":{description:v("editor.editor.gotoLocation.multipleTypeDefinitions","Controls the behavior the 'Go to Type Definition'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleDeclarations":{description:v("editor.editor.gotoLocation.multipleDeclarations","Controls the behavior the 'Go to Declaration'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleImplementations":{description:v("editor.editor.gotoLocation.multipleImplemenattions","Controls the behavior the 'Go to Implementations'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleReferences":{description:v("editor.editor.gotoLocation.multipleReferences","Controls the behavior the 'Go to References'-command when multiple target locations exist."),...t},"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:e.alternativeDefinitionCommand,enum:i,description:v("alternativeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Definition' is the current location.")},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:e.alternativeTypeDefinitionCommand,enum:i,description:v("alternativeTypeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Type Definition' is the current location.")},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:e.alternativeDeclarationCommand,enum:i,description:v("alternativeDeclarationCommand","Alternative command id that is being executed when the result of 'Go to Declaration' is the current location.")},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:e.alternativeImplementationCommand,enum:i,description:v("alternativeImplementationCommand","Alternative command id that is being executed when the result of 'Go to Implementation' is the current location.")},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:e.alternativeReferenceCommand,enum:i,description:v("alternativeReferenceCommand","Alternative command id that is being executed when the result of 'Go to Reference' is the current location.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{multiple:En(t.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:t.multipleDefinitions??En(t.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:t.multipleTypeDefinitions??En(t.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:t.multipleDeclarations??En(t.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:t.multipleImplementations??En(t.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:t.multipleReferences??En(t.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),multipleTests:t.multipleTests??En(t.multipleTests,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:no.string(t.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:no.string(t.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:no.string(t.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:no.string(t.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:no.string(t.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand),alternativeTestsCommand:no.string(t.alternativeTestsCommand,this.defaultValue.alternativeTestsCommand)}}}class A$e extends rn{constructor(){const e={enabled:!0,delay:300,hidingDelay:300,sticky:!0,above:!0};super(60,"hover",e,{"editor.hover.enabled":{type:"boolean",default:e.enabled,description:v("hover.enabled","Controls whether the hover is shown.")},"editor.hover.delay":{type:"number",default:e.delay,minimum:0,maximum:1e4,description:v("hover.delay","Controls the delay in milliseconds after which the hover is shown.")},"editor.hover.sticky":{type:"boolean",default:e.sticky,description:v("hover.sticky","Controls whether the hover should remain visible when mouse is moved over it.")},"editor.hover.hidingDelay":{type:"integer",minimum:0,default:e.hidingDelay,description:v("hover.hidingDelay","Controls the delay in milliseconds after which the hover is hidden. Requires `editor.hover.sticky` to be enabled.")},"editor.hover.above":{type:"boolean",default:e.above,description:v("hover.above","Prefer showing hovers above the line, if there's space.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Ge(t.enabled,this.defaultValue.enabled),delay:Pi.clampedInt(t.delay,this.defaultValue.delay,0,1e4),sticky:Ge(t.sticky,this.defaultValue.sticky),hidingDelay:Pi.clampedInt(t.hidingDelay,this.defaultValue.hidingDelay,0,6e5),above:Ge(t.above,this.defaultValue.above)}}}class wy extends NN{constructor(){super(146)}compute(e,t,i){return wy.computeLayout(t,{memory:e.memory,outerWidth:e.outerWidth,outerHeight:e.outerHeight,isDominatedByLongLines:e.isDominatedByLongLines,lineHeight:e.fontInfo.lineHeight,viewLineCount:e.viewLineCount,lineNumbersDigitCount:e.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:e.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:e.fontInfo.maxDigitWidth,pixelRatio:e.pixelRatio,glyphMarginDecorationLaneCount:e.glyphMarginDecorationLaneCount})}static computeContainedMinimapLineCount(e){const t=e.height/e.lineHeight,i=Math.floor(e.paddingTop/e.lineHeight);let s=Math.floor(e.paddingBottom/e.lineHeight);e.scrollBeyondLastLine&&(s=Math.max(s,t-1));const r=(i+e.viewLineCount+s)/(e.pixelRatio*e.height),o=Math.floor(e.viewLineCount/r);return{typicalViewportLineCount:t,extraLinesBeforeFirstLine:i,extraLinesBeyondLastLine:s,desiredRatio:r,minimapLineCount:o}}static _computeMinimapLayout(e,t){const i=e.outerWidth,s=e.outerHeight,r=e.pixelRatio;if(!e.minimap.enabled)return{renderMinimap:0,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(r*s),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:s};const o=t.stableMinimapLayoutInput,a=o&&e.outerHeight===o.outerHeight&&e.lineHeight===o.lineHeight&&e.typicalHalfwidthCharacterWidth===o.typicalHalfwidthCharacterWidth&&e.pixelRatio===o.pixelRatio&&e.scrollBeyondLastLine===o.scrollBeyondLastLine&&e.paddingTop===o.paddingTop&&e.paddingBottom===o.paddingBottom&&e.minimap.enabled===o.minimap.enabled&&e.minimap.side===o.minimap.side&&e.minimap.size===o.minimap.size&&e.minimap.showSlider===o.minimap.showSlider&&e.minimap.renderCharacters===o.minimap.renderCharacters&&e.minimap.maxColumn===o.minimap.maxColumn&&e.minimap.scale===o.minimap.scale&&e.verticalScrollbarWidth===o.verticalScrollbarWidth&&e.isViewportWrapping===o.isViewportWrapping,l=e.lineHeight,c=e.typicalHalfwidthCharacterWidth,d=e.scrollBeyondLastLine,u=e.minimap.renderCharacters;let h=r>=2?Math.round(e.minimap.scale*2):e.minimap.scale;const f=e.minimap.maxColumn,g=e.minimap.size,p=e.minimap.side,_=e.verticalScrollbarWidth,w=e.viewLineCount,b=e.remainingWidth,y=e.isViewportWrapping,S=u?2:3;let x=Math.floor(r*s);const E=x/r;let D=!1,N=!1,I=S*h,H=h/r,z=1;if(g==="fill"||g==="fit"){const{typicalViewportLineCount:te,extraLinesBeforeFirstLine:ce,extraLinesBeyondLastLine:Ie,desiredRatio:Ce,minimapLineCount:it}=wy.computeContainedMinimapLineCount({viewLineCount:w,scrollBeyondLastLine:d,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,height:s,lineHeight:l,pixelRatio:r});if(w/it>1)D=!0,N=!0,h=1,I=1,H=h/r;else{let dt=!1,P=h+1;if(g==="fit"){const $=Math.ceil((ce+w+Ie)*I);y&&a&&b<=t.stableFitRemainingWidth?(dt=!0,P=t.stableFitMaxMinimapScale):dt=$>x}if(g==="fill"||dt){D=!0;const $=h;I=Math.min(l*r,Math.max(1,Math.floor(1/Ce))),y&&a&&b<=t.stableFitRemainingWidth&&(P=t.stableFitMaxMinimapScale),h=Math.min(P,Math.max(1,Math.floor(I/S))),h>$&&(z=Math.min(2,h/$)),H=h/r/z,x=Math.ceil(Math.max(te,ce+w+Ie)*I),y?(t.stableMinimapLayoutInput=e,t.stableFitRemainingWidth=b,t.stableFitMaxMinimapScale=h):(t.stableMinimapLayoutInput=null,t.stableFitRemainingWidth=0)}}}const G=Math.floor(f*H),J=Math.min(G,Math.max(0,Math.floor((b-_-2)*H/(c+H)))+dh);let j=Math.floor(r*J);const ne=j/r;j=Math.floor(j*z);const oe=u?1:2,ve=p==="left"?0:i-J-_;return{renderMinimap:oe,minimapLeft:ve,minimapWidth:J,minimapHeightIsEditorHeight:D,minimapIsSampling:N,minimapScale:h,minimapLineHeight:I,minimapCanvasInnerWidth:j,minimapCanvasInnerHeight:x,minimapCanvasOuterWidth:ne,minimapCanvasOuterHeight:E}}static computeLayout(e,t){const i=t.outerWidth|0,s=t.outerHeight|0,r=t.lineHeight|0,o=t.lineNumbersDigitCount|0,a=t.typicalHalfwidthCharacterWidth,l=t.maxDigitWidth,c=t.pixelRatio,d=t.viewLineCount,u=e.get(138),h=u==="inherit"?e.get(137):u,f=h==="inherit"?e.get(133):h,g=e.get(136),p=t.isDominatedByLongLines,_=e.get(57),w=e.get(68).renderType!==0,b=e.get(69),y=e.get(106),S=e.get(84),x=e.get(73),E=e.get(104),D=E.verticalScrollbarSize,N=E.verticalHasArrows,I=E.arrowSize,H=E.horizontalScrollbarSize,z=e.get(43),G=e.get(111)!=="never";let J=e.get(66);z&&G&&(J+=16);let j=0;if(w){const ae=Math.max(o,b);j=Math.round(ae*l)}let ne=0;_&&(ne=r*t.glyphMarginDecorationLaneCount);let oe=0,ve=oe+ne,te=ve+j,ce=te+J;const Ie=i-ne-j-J;let Ce=!1,it=!1,He=-1;h==="inherit"&&p?(Ce=!0,it=!0):f==="on"||f==="bounded"?it=!0:f==="wordWrapColumn"&&(He=g);const dt=wy._computeMinimapLayout({outerWidth:i,outerHeight:s,lineHeight:r,typicalHalfwidthCharacterWidth:a,pixelRatio:c,scrollBeyondLastLine:y,paddingTop:S.top,paddingBottom:S.bottom,minimap:x,verticalScrollbarWidth:D,viewLineCount:d,remainingWidth:Ie,isViewportWrapping:it},t.memory||new Gwe);dt.renderMinimap!==0&&dt.minimapLeft===0&&(oe+=dt.minimapWidth,ve+=dt.minimapWidth,te+=dt.minimapWidth,ce+=dt.minimapWidth);const P=Ie-dt.minimapWidth,$=Math.max(1,Math.floor((P-D-2)/a)),Z=N?I:0;return it&&(He=Math.max(1,$),f==="bounded"&&(He=Math.min(He,g))),{width:i,height:s,glyphMarginLeft:oe,glyphMarginWidth:ne,glyphMarginDecorationLaneCount:t.glyphMarginDecorationLaneCount,lineNumbersLeft:ve,lineNumbersWidth:j,decorationsLeft:te,decorationsWidth:J,contentLeft:ce,contentWidth:P,minimap:dt,viewportColumn:$,isWordWrapMinified:Ce,isViewportWrapping:it,wrappingColumn:He,verticalScrollbarWidth:D,horizontalScrollbarHeight:H,overviewRuler:{top:Z,width:D,height:s-2*Z,right:0}}}}class M$e extends rn{constructor(){super(140,"wrappingStrategy","simple",{"editor.wrappingStrategy":{enumDescriptions:[v("wrappingStrategy.simple","Assumes that all characters are of the same width. This is a fast algorithm that works correctly for monospace fonts and certain scripts (like Latin characters) where glyphs are of equal width."),v("wrappingStrategy.advanced","Delegates wrapping points computation to the browser. This is a slow algorithm, that might cause freezes for large files, but it works correctly in all cases.")],type:"string",enum:["simple","advanced"],default:"simple",description:v("wrappingStrategy","Controls the algorithm that computes wrapping points. Note that when in accessibility mode, advanced will be used for the best experience.")}})}validate(e){return En(e,"simple",["simple","advanced"])}compute(e,t,i){return t.get(2)===2?"advanced":i}}var cd;(function(n){n.Off="off",n.OnCode="onCode",n.On="on"})(cd||(cd={}));class P$e extends rn{constructor(){const e={enabled:cd.OnCode};super(65,"lightbulb",e,{"editor.lightbulb.enabled":{type:"string",tags:["experimental"],enum:[cd.Off,cd.OnCode,cd.On],default:e.enabled,enumDescriptions:[v("editor.lightbulb.enabled.off","Disable the code action menu."),v("editor.lightbulb.enabled.onCode","Show the code action menu when the cursor is on lines with code."),v("editor.lightbulb.enabled.on","Show the code action menu when the cursor is on lines with code or on empty lines.")],description:v("enabled","Enables the Code Action lightbulb in the editor.")}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:En(e.enabled,this.defaultValue.enabled,[cd.Off,cd.OnCode,cd.On])}}}class O$e extends rn{constructor(){const e={enabled:!0,maxLineCount:5,defaultModel:"outlineModel",scrollWithEditor:!0};super(116,"stickyScroll",e,{"editor.stickyScroll.enabled":{type:"boolean",default:e.enabled,description:v("editor.stickyScroll.enabled","Shows the nested current scopes during the scroll at the top of the editor."),tags:["experimental"]},"editor.stickyScroll.maxLineCount":{type:"number",default:e.maxLineCount,minimum:1,maximum:20,description:v("editor.stickyScroll.maxLineCount","Defines the maximum number of sticky lines to show.")},"editor.stickyScroll.defaultModel":{type:"string",enum:["outlineModel","foldingProviderModel","indentationModel"],default:e.defaultModel,description:v("editor.stickyScroll.defaultModel","Defines the model to use for determining which lines to stick. If the outline model does not exist, it will fall back on the folding provider model which falls back on the indentation model. This order is respected in all three cases.")},"editor.stickyScroll.scrollWithEditor":{type:"boolean",default:e.scrollWithEditor,description:v("editor.stickyScroll.scrollWithEditor","Enable scrolling of Sticky Scroll with the editor's horizontal scrollbar.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Ge(t.enabled,this.defaultValue.enabled),maxLineCount:Pi.clampedInt(t.maxLineCount,this.defaultValue.maxLineCount,1,20),defaultModel:En(t.defaultModel,this.defaultValue.defaultModel,["outlineModel","foldingProviderModel","indentationModel"]),scrollWithEditor:Ge(t.scrollWithEditor,this.defaultValue.scrollWithEditor)}}}class F$e extends rn{constructor(){const e={enabled:"on",fontSize:0,fontFamily:"",padding:!1};super(142,"inlayHints",e,{"editor.inlayHints.enabled":{type:"string",default:e.enabled,description:v("inlayHints.enable","Enables the inlay hints in the editor."),enum:["on","onUnlessPressed","offUnlessPressed","off"],markdownEnumDescriptions:[v("editor.inlayHints.on","Inlay hints are enabled"),v("editor.inlayHints.onUnlessPressed","Inlay hints are showing by default and hide when holding {0}",Bt?"Ctrl+Option":"Ctrl+Alt"),v("editor.inlayHints.offUnlessPressed","Inlay hints are hidden by default and show when holding {0}",Bt?"Ctrl+Option":"Ctrl+Alt"),v("editor.inlayHints.off","Inlay hints are disabled")]},"editor.inlayHints.fontSize":{type:"number",default:e.fontSize,markdownDescription:v("inlayHints.fontSize","Controls font size of inlay hints in the editor. As default the {0} is used when the configured value is less than {1} or greater than the editor font size.","`#editor.fontSize#`","`5`")},"editor.inlayHints.fontFamily":{type:"string",default:e.fontFamily,markdownDescription:v("inlayHints.fontFamily","Controls font family of inlay hints in the editor. When set to empty, the {0} is used.","`#editor.fontFamily#`")},"editor.inlayHints.padding":{type:"boolean",default:e.padding,description:v("inlayHints.padding","Enables the padding around the inlay hints in the editor.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return typeof t.enabled=="boolean"&&(t.enabled=t.enabled?"on":"off"),{enabled:En(t.enabled,this.defaultValue.enabled,["on","off","offUnlessPressed","onUnlessPressed"]),fontSize:Pi.clampedInt(t.fontSize,this.defaultValue.fontSize,0,100),fontFamily:no.string(t.fontFamily,this.defaultValue.fontFamily),padding:Ge(t.padding,this.defaultValue.padding)}}}class B$e extends rn{constructor(){super(66,"lineDecorationsWidth",10)}validate(e){return typeof e=="string"&&/^\d+(\.\d+)?ch$/.test(e)?-parseFloat(e.substring(0,e.length-2)):Pi.clampedInt(e,this.defaultValue,0,1e3)}compute(e,t,i){return i<0?Pi.clampedInt(-i*e.fontInfo.typicalHalfwidthCharacterWidth,this.defaultValue,0,1e3):i}}class W$e extends Al{constructor(){super(67,"lineHeight",To.lineHeight,e=>Al.clamp(e,0,150),{markdownDescription:v("lineHeight",`Controls the line height. 
 - Use 0 to automatically compute the line height from the font size.
 - Values between 0 and 8 will be used as a multiplier with the font size.
 - Values greater than or equal to 8 will be used as effective values.`)})}compute(e,t,i){return e.fontInfo.lineHeight}}class H$e extends rn{constructor(){const e={enabled:!0,size:"proportional",side:"right",showSlider:"mouseover",autohide:!1,renderCharacters:!0,maxColumn:120,scale:1,showRegionSectionHeaders:!0,showMarkSectionHeaders:!0,sectionHeaderFontSize:9,sectionHeaderLetterSpacing:1};super(73,"minimap",e,{"editor.minimap.enabled":{type:"boolean",default:e.enabled,description:v("minimap.enabled","Controls whether the minimap is shown.")},"editor.minimap.autohide":{type:"boolean",default:e.autohide,description:v("minimap.autohide","Controls whether the minimap is hidden automatically.")},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[v("minimap.size.proportional","The minimap has the same size as the editor contents (and might scroll)."),v("minimap.size.fill","The minimap will stretch or shrink as necessary to fill the height of the editor (no scrolling)."),v("minimap.size.fit","The minimap will shrink as necessary to never be larger than the editor (no scrolling).")],default:e.size,description:v("minimap.size","Controls the size of the minimap.")},"editor.minimap.side":{type:"string",enum:["left","right"],default:e.side,description:v("minimap.side","Controls the side where to render the minimap.")},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:e.showSlider,description:v("minimap.showSlider","Controls when the minimap slider is shown.")},"editor.minimap.scale":{type:"number",default:e.scale,minimum:1,maximum:3,enum:[1,2,3],description:v("minimap.scale","Scale of content drawn in the minimap: 1, 2 or 3.")},"editor.minimap.renderCharacters":{type:"boolean",default:e.renderCharacters,description:v("minimap.renderCharacters","Render the actual characters on a line as opposed to color blocks.")},"editor.minimap.maxColumn":{type:"number",default:e.maxColumn,description:v("minimap.maxColumn","Limit the width of the minimap to render at most a certain number of columns.")},"editor.minimap.showRegionSectionHeaders":{type:"boolean",default:e.showRegionSectionHeaders,description:v("minimap.showRegionSectionHeaders","Controls whether named regions are shown as section headers in the minimap.")},"editor.minimap.showMarkSectionHeaders":{type:"boolean",default:e.showMarkSectionHeaders,description:v("minimap.showMarkSectionHeaders","Controls whether MARK: comments are shown as section headers in the minimap.")},"editor.minimap.sectionHeaderFontSize":{type:"number",default:e.sectionHeaderFontSize,description:v("minimap.sectionHeaderFontSize","Controls the font size of section headers in the minimap.")},"editor.minimap.sectionHeaderLetterSpacing":{type:"number",default:e.sectionHeaderLetterSpacing,description:v("minimap.sectionHeaderLetterSpacing","Controls the amount of space (in pixels) between characters of section header. This helps the readability of the header in small font sizes.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Ge(t.enabled,this.defaultValue.enabled),autohide:Ge(t.autohide,this.defaultValue.autohide),size:En(t.size,this.defaultValue.size,["proportional","fill","fit"]),side:En(t.side,this.defaultValue.side,["right","left"]),showSlider:En(t.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:Ge(t.renderCharacters,this.defaultValue.renderCharacters),scale:Pi.clampedInt(t.scale,1,1,3),maxColumn:Pi.clampedInt(t.maxColumn,this.defaultValue.maxColumn,1,1e4),showRegionSectionHeaders:Ge(t.showRegionSectionHeaders,this.defaultValue.showRegionSectionHeaders),showMarkSectionHeaders:Ge(t.showMarkSectionHeaders,this.defaultValue.showMarkSectionHeaders),sectionHeaderFontSize:Al.clamp(t.sectionHeaderFontSize??this.defaultValue.sectionHeaderFontSize,4,32),sectionHeaderLetterSpacing:Al.clamp(t.sectionHeaderLetterSpacing??this.defaultValue.sectionHeaderLetterSpacing,0,5)}}}function V$e(n){return n==="ctrlCmd"?Bt?"metaKey":"ctrlKey":"altKey"}class z$e extends rn{constructor(){super(84,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1e3,description:v("padding.top","Controls the amount of space between the top edge of the editor and the first line.")},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1e3,description:v("padding.bottom","Controls the amount of space between the bottom edge of the editor and the last line.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{top:Pi.clampedInt(t.top,0,0,1e3),bottom:Pi.clampedInt(t.bottom,0,0,1e3)}}}class U$e extends rn{constructor(){const e={enabled:!0,cycle:!0};super(86,"parameterHints",e,{"editor.parameterHints.enabled":{type:"boolean",default:e.enabled,description:v("parameterHints.enabled","Enables a pop-up that shows parameter documentation and type information as you type.")},"editor.parameterHints.cycle":{type:"boolean",default:e.cycle,description:v("parameterHints.cycle","Controls whether the parameter hints menu cycles or closes when reaching the end of the list.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Ge(t.enabled,this.defaultValue.enabled),cycle:Ge(t.cycle,this.defaultValue.cycle)}}}class $$e extends NN{constructor(){super(144)}compute(e,t,i){return e.pixelRatio}}class j$e extends rn{constructor(){super(88,"placeholder",void 0)}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e:this.defaultValue}}class K$e extends rn{constructor(){const e={other:"on",comments:"off",strings:"off"},t=[{type:"boolean"},{type:"string",enum:["on","inline","off"],enumDescriptions:[v("on","Quick suggestions show inside the suggest widget"),v("inline","Quick suggestions show as ghost text"),v("off","Quick suggestions are disabled")]}];super(90,"quickSuggestions",e,{type:"object",additionalProperties:!1,properties:{strings:{anyOf:t,default:e.strings,description:v("quickSuggestions.strings","Enable quick suggestions inside strings.")},comments:{anyOf:t,default:e.comments,description:v("quickSuggestions.comments","Enable quick suggestions inside comments.")},other:{anyOf:t,default:e.other,description:v("quickSuggestions.other","Enable quick suggestions outside of strings and comments.")}},default:e,markdownDescription:v("quickSuggestions","Controls whether suggestions should automatically show up while typing. This can be controlled for typing in comments, strings, and other code. Quick suggestion can be configured to show as ghost text or with the suggest widget. Also be aware of the {0}-setting which controls if suggestions are triggered by special characters.","`#editor.suggestOnTriggerCharacters#`")}),this.defaultValue=e}validate(e){if(typeof e=="boolean"){const c=e?"on":"off";return{comments:c,strings:c,other:c}}if(!e||typeof e!="object")return this.defaultValue;const{other:t,comments:i,strings:s}=e,r=["on","inline","off"];let o,a,l;return typeof t=="boolean"?o=t?"on":"off":o=En(t,this.defaultValue.other,r),typeof i=="boolean"?a=i?"on":"off":a=En(i,this.defaultValue.comments,r),typeof s=="boolean"?l=s?"on":"off":l=En(s,this.defaultValue.strings,r),{other:o,comments:a,strings:l}}}class q$e extends rn{constructor(){super(68,"lineNumbers",{renderType:1,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[v("lineNumbers.off","Line numbers are not rendered."),v("lineNumbers.on","Line numbers are rendered as absolute number."),v("lineNumbers.relative","Line numbers are rendered as distance in lines to cursor position."),v("lineNumbers.interval","Line numbers are rendered every 10 lines.")],default:"on",description:v("lineNumbers","Controls the display of line numbers.")})}validate(e){let t=this.defaultValue.renderType,i=this.defaultValue.renderFn;return typeof e<"u"&&(typeof e=="function"?(t=4,i=e):e==="interval"?t=3:e==="relative"?t=2:e==="on"?t=1:t=0),{renderType:t,renderFn:i}}}function tP(n){const e=n.get(99);return e==="editable"?n.get(92):e!=="on"}class G$e extends rn{constructor(){const e=[],t={type:"number",description:v("rulers.size","Number of monospace characters at which this editor ruler will render.")};super(103,"rulers",e,{type:"array",items:{anyOf:[t,{type:["object"],properties:{column:t,color:{type:"string",description:v("rulers.color","Color of this editor ruler."),format:"color-hex"}}}]},default:e,description:v("rulers","Render vertical rulers after a certain number of monospace characters. Use multiple values for multiple rulers. No rulers are drawn if array is empty.")})}validate(e){if(Array.isArray(e)){const t=[];for(const i of e)if(typeof i=="number")t.push({column:Pi.clampedInt(i,0,0,1e4),color:null});else if(i&&typeof i=="object"){const s=i;t.push({column:Pi.clampedInt(s.column,0,0,1e4),color:s.color})}return t.sort((i,s)=>i.column-s.column),t}return this.defaultValue}}class Y$e extends rn{constructor(){super(93,"readOnlyMessage",void 0)}validate(e){return!e||typeof e!="object"?this.defaultValue:e}}function boe(n,e){if(typeof n!="string")return e;switch(n){case"hidden":return 2;case"visible":return 3;default:return 1}}let Z$e=class extends rn{constructor(){const e={vertical:1,horizontal:1,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1,ignoreHorizontalScrollbarInContentHeight:!1};super(104,"scrollbar",e,{"editor.scrollbar.vertical":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[v("scrollbar.vertical.auto","The vertical scrollbar will be visible only when necessary."),v("scrollbar.vertical.visible","The vertical scrollbar will always be visible."),v("scrollbar.vertical.fit","The vertical scrollbar will always be hidden.")],default:"auto",description:v("scrollbar.vertical","Controls the visibility of the vertical scrollbar.")},"editor.scrollbar.horizontal":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[v("scrollbar.horizontal.auto","The horizontal scrollbar will be visible only when necessary."),v("scrollbar.horizontal.visible","The horizontal scrollbar will always be visible."),v("scrollbar.horizontal.fit","The horizontal scrollbar will always be hidden.")],default:"auto",description:v("scrollbar.horizontal","Controls the visibility of the horizontal scrollbar.")},"editor.scrollbar.verticalScrollbarSize":{type:"number",default:e.verticalScrollbarSize,description:v("scrollbar.verticalScrollbarSize","The width of the vertical scrollbar.")},"editor.scrollbar.horizontalScrollbarSize":{type:"number",default:e.horizontalScrollbarSize,description:v("scrollbar.horizontalScrollbarSize","The height of the horizontal scrollbar.")},"editor.scrollbar.scrollByPage":{type:"boolean",default:e.scrollByPage,description:v("scrollbar.scrollByPage","Controls whether clicks scroll by page or jump to click position.")},"editor.scrollbar.ignoreHorizontalScrollbarInContentHeight":{type:"boolean",default:e.ignoreHorizontalScrollbarInContentHeight,description:v("scrollbar.ignoreHorizontalScrollbarInContentHeight","When set, the horizontal scrollbar will not increase the size of the editor's content.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e,i=Pi.clampedInt(t.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),s=Pi.clampedInt(t.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:Pi.clampedInt(t.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:boe(t.vertical,this.defaultValue.vertical),horizontal:boe(t.horizontal,this.defaultValue.horizontal),useShadows:Ge(t.useShadows,this.defaultValue.useShadows),verticalHasArrows:Ge(t.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:Ge(t.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:Ge(t.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:Ge(t.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:i,horizontalSliderSize:Pi.clampedInt(t.horizontalSliderSize,i,0,1e3),verticalScrollbarSize:s,verticalSliderSize:Pi.clampedInt(t.verticalSliderSize,s,0,1e3),scrollByPage:Ge(t.scrollByPage,this.defaultValue.scrollByPage),ignoreHorizontalScrollbarInContentHeight:Ge(t.ignoreHorizontalScrollbarInContentHeight,this.defaultValue.ignoreHorizontalScrollbarInContentHeight)}}};const bl="inUntrustedWorkspace",ia={allowedCharacters:"editor.unicodeHighlight.allowedCharacters",invisibleCharacters:"editor.unicodeHighlight.invisibleCharacters",nonBasicASCII:"editor.unicodeHighlight.nonBasicASCII",ambiguousCharacters:"editor.unicodeHighlight.ambiguousCharacters",includeComments:"editor.unicodeHighlight.includeComments",includeStrings:"editor.unicodeHighlight.includeStrings",allowedLocales:"editor.unicodeHighlight.allowedLocales"};class X$e extends rn{constructor(){const e={nonBasicASCII:bl,invisibleCharacters:!0,ambiguousCharacters:!0,includeComments:bl,includeStrings:!0,allowedCharacters:{},allowedLocales:{_os:!0,_vscode:!0}};super(126,"unicodeHighlight",e,{[ia.nonBasicASCII]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,bl],default:e.nonBasicASCII,description:v("unicodeHighlight.nonBasicASCII","Controls whether all non-basic ASCII characters are highlighted. Only characters between U+0020 and U+007E, tab, line-feed and carriage-return are considered basic ASCII.")},[ia.invisibleCharacters]:{restricted:!0,type:"boolean",default:e.invisibleCharacters,description:v("unicodeHighlight.invisibleCharacters","Controls whether characters that just reserve space or have no width at all are highlighted.")},[ia.ambiguousCharacters]:{restricted:!0,type:"boolean",default:e.ambiguousCharacters,description:v("unicodeHighlight.ambiguousCharacters","Controls whether characters are highlighted that can be confused with basic ASCII characters, except those that are common in the current user locale.")},[ia.includeComments]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,bl],default:e.includeComments,description:v("unicodeHighlight.includeComments","Controls whether characters in comments should also be subject to Unicode highlighting.")},[ia.includeStrings]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,bl],default:e.includeStrings,description:v("unicodeHighlight.includeStrings","Controls whether characters in strings should also be subject to Unicode highlighting.")},[ia.allowedCharacters]:{restricted:!0,type:"object",default:e.allowedCharacters,description:v("unicodeHighlight.allowedCharacters","Defines allowed characters that are not being highlighted."),additionalProperties:{type:"boolean"}},[ia.allowedLocales]:{restricted:!0,type:"object",additionalProperties:{type:"boolean"},default:e.allowedLocales,description:v("unicodeHighlight.allowedLocales","Unicode characters that are common in allowed locales are not being highlighted.")}})}applyUpdate(e,t){let i=!1;t.allowedCharacters&&e&&(Ga(e.allowedCharacters,t.allowedCharacters)||(e={...e,allowedCharacters:t.allowedCharacters},i=!0)),t.allowedLocales&&e&&(Ga(e.allowedLocales,t.allowedLocales)||(e={...e,allowedLocales:t.allowedLocales},i=!0));const s=super.applyUpdate(e,t);return i?new Kk(s.newValue,!0):s}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{nonBasicASCII:Cy(t.nonBasicASCII,bl,[!0,!1,bl]),invisibleCharacters:Ge(t.invisibleCharacters,this.defaultValue.invisibleCharacters),ambiguousCharacters:Ge(t.ambiguousCharacters,this.defaultValue.ambiguousCharacters),includeComments:Cy(t.includeComments,bl,[!0,!1,bl]),includeStrings:Cy(t.includeStrings,bl,[!0,!1,bl]),allowedCharacters:this.validateBooleanMap(e.allowedCharacters,this.defaultValue.allowedCharacters),allowedLocales:this.validateBooleanMap(e.allowedLocales,this.defaultValue.allowedLocales)}}validateBooleanMap(e,t){if(typeof e!="object"||!e)return t;const i={};for(const[s,r]of Object.entries(e))r===!0&&(i[s]=!0);return i}}class Q$e extends rn{constructor(){const e={enabled:!0,mode:"subwordSmart",showToolbar:"onHover",suppressSuggestions:!1,keepOnBlur:!1,fontFamily:"default"};super(62,"inlineSuggest",e,{"editor.inlineSuggest.enabled":{type:"boolean",default:e.enabled,description:v("inlineSuggest.enabled","Controls whether to automatically show inline suggestions in the editor.")},"editor.inlineSuggest.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover","never"],enumDescriptions:[v("inlineSuggest.showToolbar.always","Show the inline suggestion toolbar whenever an inline suggestion is shown."),v("inlineSuggest.showToolbar.onHover","Show the inline suggestion toolbar when hovering over an inline suggestion."),v("inlineSuggest.showToolbar.never","Never show the inline suggestion toolbar.")],description:v("inlineSuggest.showToolbar","Controls when to show the inline suggestion toolbar.")},"editor.inlineSuggest.suppressSuggestions":{type:"boolean",default:e.suppressSuggestions,description:v("inlineSuggest.suppressSuggestions","Controls how inline suggestions interact with the suggest widget. If enabled, the suggest widget is not shown automatically when inline suggestions are available.")},"editor.inlineSuggest.fontFamily":{type:"string",default:e.fontFamily,description:v("inlineSuggest.fontFamily","Controls the font family of the inline suggestions.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Ge(t.enabled,this.defaultValue.enabled),mode:En(t.mode,this.defaultValue.mode,["prefix","subword","subwordSmart"]),showToolbar:En(t.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),suppressSuggestions:Ge(t.suppressSuggestions,this.defaultValue.suppressSuggestions),keepOnBlur:Ge(t.keepOnBlur,this.defaultValue.keepOnBlur),fontFamily:no.string(t.fontFamily,this.defaultValue.fontFamily)}}}class J$e extends rn{constructor(){const e={enabled:!1,showToolbar:"onHover",fontFamily:"default",keepOnBlur:!1};super(63,"experimentalInlineEdit",e,{"editor.experimentalInlineEdit.enabled":{type:"boolean",default:e.enabled,description:v("inlineEdit.enabled","Controls whether to show inline edits in the editor.")},"editor.experimentalInlineEdit.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover","never"],enumDescriptions:[v("inlineEdit.showToolbar.always","Show the inline edit toolbar whenever an inline suggestion is shown."),v("inlineEdit.showToolbar.onHover","Show the inline edit toolbar when hovering over an inline suggestion."),v("inlineEdit.showToolbar.never","Never show the inline edit toolbar.")],description:v("inlineEdit.showToolbar","Controls when to show the inline edit toolbar.")},"editor.experimentalInlineEdit.fontFamily":{type:"string",default:e.fontFamily,description:v("inlineEdit.fontFamily","Controls the font family of the inline edit.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Ge(t.enabled,this.defaultValue.enabled),showToolbar:En(t.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),fontFamily:no.string(t.fontFamily,this.defaultValue.fontFamily),keepOnBlur:Ge(t.keepOnBlur,this.defaultValue.keepOnBlur)}}}class eje extends rn{constructor(){const e={enabled:Tr.bracketPairColorizationOptions.enabled,independentColorPoolPerBracketType:Tr.bracketPairColorizationOptions.independentColorPoolPerBracketType};super(15,"bracketPairColorization",e,{"editor.bracketPairColorization.enabled":{type:"boolean",default:e.enabled,markdownDescription:v("bracketPairColorization.enabled","Controls whether bracket pair colorization is enabled or not. Use {0} to override the bracket highlight colors.","`#workbench.colorCustomizations#`")},"editor.bracketPairColorization.independentColorPoolPerBracketType":{type:"boolean",default:e.independentColorPoolPerBracketType,description:v("bracketPairColorization.independentColorPoolPerBracketType","Controls whether each bracket type has its own independent color pool.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Ge(t.enabled,this.defaultValue.enabled),independentColorPoolPerBracketType:Ge(t.independentColorPoolPerBracketType,this.defaultValue.independentColorPoolPerBracketType)}}}class tje extends rn{constructor(){const e={bracketPairs:!1,bracketPairsHorizontal:"active",highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};super(16,"guides",e,{"editor.guides.bracketPairs":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[v("editor.guides.bracketPairs.true","Enables bracket pair guides."),v("editor.guides.bracketPairs.active","Enables bracket pair guides only for the active bracket pair."),v("editor.guides.bracketPairs.false","Disables bracket pair guides.")],default:e.bracketPairs,description:v("editor.guides.bracketPairs","Controls whether bracket pair guides are enabled or not.")},"editor.guides.bracketPairsHorizontal":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[v("editor.guides.bracketPairsHorizontal.true","Enables horizontal guides as addition to vertical bracket pair guides."),v("editor.guides.bracketPairsHorizontal.active","Enables horizontal guides only for the active bracket pair."),v("editor.guides.bracketPairsHorizontal.false","Disables horizontal bracket pair guides.")],default:e.bracketPairsHorizontal,description:v("editor.guides.bracketPairsHorizontal","Controls whether horizontal bracket pair guides are enabled or not.")},"editor.guides.highlightActiveBracketPair":{type:"boolean",default:e.highlightActiveBracketPair,description:v("editor.guides.highlightActiveBracketPair","Controls whether the editor should highlight the active bracket pair.")},"editor.guides.indentation":{type:"boolean",default:e.indentation,description:v("editor.guides.indentation","Controls whether the editor should render indent guides.")},"editor.guides.highlightActiveIndentation":{type:["boolean","string"],enum:[!0,"always",!1],enumDescriptions:[v("editor.guides.highlightActiveIndentation.true","Highlights the active indent guide."),v("editor.guides.highlightActiveIndentation.always","Highlights the active indent guide even if bracket guides are highlighted."),v("editor.guides.highlightActiveIndentation.false","Do not highlight the active indent guide.")],default:e.highlightActiveIndentation,description:v("editor.guides.highlightActiveIndentation","Controls whether the editor should highlight the active indent guide.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{bracketPairs:Cy(t.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,"active"]),bracketPairsHorizontal:Cy(t.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,"active"]),highlightActiveBracketPair:Ge(t.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:Ge(t.indentation,this.defaultValue.indentation),highlightActiveIndentation:Cy(t.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation,[!0,!1,"always"])}}}function Cy(n,e,t){const i=t.indexOf(n);return i===-1?e:t[i]}class ije extends rn{constructor(){const e={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!1,localityBonus:!1,shareSuggestSelections:!1,selectionMode:"always",showIcons:!0,showStatusBar:!1,preview:!1,previewMode:"subwordSmart",showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,matchOnWordStartOnly:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(119,"suggest",e,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[v("suggest.insertMode.insert","Insert suggestion without overwriting text right of the cursor."),v("suggest.insertMode.replace","Insert suggestion and overwrite text right of the cursor.")],default:e.insertMode,description:v("suggest.insertMode","Controls whether words are overwritten when accepting completions. Note that this depends on extensions opting into this feature.")},"editor.suggest.filterGraceful":{type:"boolean",default:e.filterGraceful,description:v("suggest.filterGraceful","Controls whether filtering and sorting suggestions accounts for small typos.")},"editor.suggest.localityBonus":{type:"boolean",default:e.localityBonus,description:v("suggest.localityBonus","Controls whether sorting favors words that appear close to the cursor.")},"editor.suggest.shareSuggestSelections":{type:"boolean",default:e.shareSuggestSelections,markdownDescription:v("suggest.shareSuggestSelections","Controls whether remembered suggestion selections are shared between multiple workspaces and windows (needs `#editor.suggestSelection#`).")},"editor.suggest.selectionMode":{type:"string",enum:["always","never","whenTriggerCharacter","whenQuickSuggestion"],enumDescriptions:[v("suggest.insertMode.always","Always select a suggestion when automatically triggering IntelliSense."),v("suggest.insertMode.never","Never select a suggestion when automatically triggering IntelliSense."),v("suggest.insertMode.whenTriggerCharacter","Select a suggestion only when triggering IntelliSense from a trigger character."),v("suggest.insertMode.whenQuickSuggestion","Select a suggestion only when triggering IntelliSense as you type.")],default:e.selectionMode,markdownDescription:v("suggest.selectionMode","Controls whether a suggestion is selected when the widget shows. Note that this only applies to automatically triggered suggestions ({0} and {1}) and that a suggestion is always selected when explicitly invoked, e.g via `Ctrl+Space`.","`#editor.quickSuggestions#`","`#editor.suggestOnTriggerCharacters#`")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:e.snippetsPreventQuickSuggestions,description:v("suggest.snippetsPreventQuickSuggestions","Controls whether an active snippet prevents quick suggestions.")},"editor.suggest.showIcons":{type:"boolean",default:e.showIcons,description:v("suggest.showIcons","Controls whether to show or hide icons in suggestions.")},"editor.suggest.showStatusBar":{type:"boolean",default:e.showStatusBar,description:v("suggest.showStatusBar","Controls the visibility of the status bar at the bottom of the suggest widget.")},"editor.suggest.preview":{type:"boolean",default:e.preview,description:v("suggest.preview","Controls whether to preview the suggestion outcome in the editor.")},"editor.suggest.showInlineDetails":{type:"boolean",default:e.showInlineDetails,description:v("suggest.showInlineDetails","Controls whether suggest details show inline with the label or only in the details widget.")},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:v("suggest.maxVisibleSuggestions.dep","This setting is deprecated. The suggest widget can now be resized.")},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:v("deprecated","This setting is deprecated, please use separate settings like 'editor.suggest.showKeywords' or 'editor.suggest.showSnippets' instead.")},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showMethods","When enabled IntelliSense shows `method`-suggestions.")},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showFunctions","When enabled IntelliSense shows `function`-suggestions.")},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showConstructors","When enabled IntelliSense shows `constructor`-suggestions.")},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showDeprecated","When enabled IntelliSense shows `deprecated`-suggestions.")},"editor.suggest.matchOnWordStartOnly":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.matchOnWordStartOnly","When enabled IntelliSense filtering requires that the first character matches on a word start. For example, `c` on `Console` or `WebContext` but _not_ on `description`. When disabled IntelliSense will show more results but still sorts them by match quality.")},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showFields","When enabled IntelliSense shows `field`-suggestions.")},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showVariables","When enabled IntelliSense shows `variable`-suggestions.")},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showClasss","When enabled IntelliSense shows `class`-suggestions.")},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showStructs","When enabled IntelliSense shows `struct`-suggestions.")},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showInterfaces","When enabled IntelliSense shows `interface`-suggestions.")},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showModules","When enabled IntelliSense shows `module`-suggestions.")},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showPropertys","When enabled IntelliSense shows `property`-suggestions.")},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showEvents","When enabled IntelliSense shows `event`-suggestions.")},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showOperators","When enabled IntelliSense shows `operator`-suggestions.")},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showUnits","When enabled IntelliSense shows `unit`-suggestions.")},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showValues","When enabled IntelliSense shows `value`-suggestions.")},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showConstants","When enabled IntelliSense shows `constant`-suggestions.")},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showEnums","When enabled IntelliSense shows `enum`-suggestions.")},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showEnumMembers","When enabled IntelliSense shows `enumMember`-suggestions.")},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showKeywords","When enabled IntelliSense shows `keyword`-suggestions.")},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showTexts","When enabled IntelliSense shows `text`-suggestions.")},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showColors","When enabled IntelliSense shows `color`-suggestions.")},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showFiles","When enabled IntelliSense shows `file`-suggestions.")},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showReferences","When enabled IntelliSense shows `reference`-suggestions.")},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showCustomcolors","When enabled IntelliSense shows `customcolor`-suggestions.")},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showFolders","When enabled IntelliSense shows `folder`-suggestions.")},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showTypeParameters","When enabled IntelliSense shows `typeParameter`-suggestions.")},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showSnippets","When enabled IntelliSense shows `snippet`-suggestions.")},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showUsers","When enabled IntelliSense shows `user`-suggestions.")},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:v("editor.suggest.showIssues","When enabled IntelliSense shows `issues`-suggestions.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertMode:En(t.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:Ge(t.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:Ge(t.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:Ge(t.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:Ge(t.shareSuggestSelections,this.defaultValue.shareSuggestSelections),selectionMode:En(t.selectionMode,this.defaultValue.selectionMode,["always","never","whenQuickSuggestion","whenTriggerCharacter"]),showIcons:Ge(t.showIcons,this.defaultValue.showIcons),showStatusBar:Ge(t.showStatusBar,this.defaultValue.showStatusBar),preview:Ge(t.preview,this.defaultValue.preview),previewMode:En(t.previewMode,this.defaultValue.previewMode,["prefix","subword","subwordSmart"]),showInlineDetails:Ge(t.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:Ge(t.showMethods,this.defaultValue.showMethods),showFunctions:Ge(t.showFunctions,this.defaultValue.showFunctions),showConstructors:Ge(t.showConstructors,this.defaultValue.showConstructors),showDeprecated:Ge(t.showDeprecated,this.defaultValue.showDeprecated),matchOnWordStartOnly:Ge(t.matchOnWordStartOnly,this.defaultValue.matchOnWordStartOnly),showFields:Ge(t.showFields,this.defaultValue.showFields),showVariables:Ge(t.showVariables,this.defaultValue.showVariables),showClasses:Ge(t.showClasses,this.defaultValue.showClasses),showStructs:Ge(t.showStructs,this.defaultValue.showStructs),showInterfaces:Ge(t.showInterfaces,this.defaultValue.showInterfaces),showModules:Ge(t.showModules,this.defaultValue.showModules),showProperties:Ge(t.showProperties,this.defaultValue.showProperties),showEvents:Ge(t.showEvents,this.defaultValue.showEvents),showOperators:Ge(t.showOperators,this.defaultValue.showOperators),showUnits:Ge(t.showUnits,this.defaultValue.showUnits),showValues:Ge(t.showValues,this.defaultValue.showValues),showConstants:Ge(t.showConstants,this.defaultValue.showConstants),showEnums:Ge(t.showEnums,this.defaultValue.showEnums),showEnumMembers:Ge(t.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:Ge(t.showKeywords,this.defaultValue.showKeywords),showWords:Ge(t.showWords,this.defaultValue.showWords),showColors:Ge(t.showColors,this.defaultValue.showColors),showFiles:Ge(t.showFiles,this.defaultValue.showFiles),showReferences:Ge(t.showReferences,this.defaultValue.showReferences),showFolders:Ge(t.showFolders,this.defaultValue.showFolders),showTypeParameters:Ge(t.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:Ge(t.showSnippets,this.defaultValue.showSnippets),showUsers:Ge(t.showUsers,this.defaultValue.showUsers),showIssues:Ge(t.showIssues,this.defaultValue.showIssues)}}}class nje extends rn{constructor(){super(114,"smartSelect",{selectLeadingAndTrailingWhitespace:!0,selectSubwords:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:v("selectLeadingAndTrailingWhitespace","Whether leading and trailing whitespace should always be selected."),default:!0,type:"boolean"},"editor.smartSelect.selectSubwords":{description:v("selectSubwords","Whether subwords (like 'foo' in 'fooBar' or 'foo_bar') should be selected."),default:!0,type:"boolean"}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{selectLeadingAndTrailingWhitespace:Ge(e.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace),selectSubwords:Ge(e.selectSubwords,this.defaultValue.selectSubwords)}}}class sje extends rn{constructor(){const e=[];super(131,"wordSegmenterLocales",e,{anyOf:[{description:v("wordSegmenterLocales","Locales to be used for word segmentation when doing word related navigations or operations. Specify the BCP 47 language tag of the word you wish to recognize (e.g., ja, zh-CN, zh-Hant-TW, etc.)."),type:"string"},{description:v("wordSegmenterLocales","Locales to be used for word segmentation when doing word related navigations or operations. Specify the BCP 47 language tag of the word you wish to recognize (e.g., ja, zh-CN, zh-Hant-TW, etc.)."),type:"array",items:{type:"string"}}]})}validate(e){if(typeof e=="string"&&(e=[e]),Array.isArray(e)){const t=[];for(const i of e)if(typeof i=="string")try{Intl.Segmenter.supportedLocalesOf(i).length>0&&t.push(i)}catch{}return t}return this.defaultValue}}class rje extends rn{constructor(){super(139,"wrappingIndent",1,{"editor.wrappingIndent":{type:"string",enum:["none","same","indent","deepIndent"],enumDescriptions:[v("wrappingIndent.none","No indentation. Wrapped lines begin at column 1."),v("wrappingIndent.same","Wrapped lines get the same indentation as the parent."),v("wrappingIndent.indent","Wrapped lines get +1 indentation toward the parent."),v("wrappingIndent.deepIndent","Wrapped lines get +2 indentation toward the parent.")],description:v("wrappingIndent","Controls the indentation of wrapped lines."),default:"same"}})}validate(e){switch(e){case"none":return 0;case"same":return 1;case"indent":return 2;case"deepIndent":return 3}return 1}compute(e,t,i){return t.get(2)===2?0:i}}class oje extends NN{constructor(){super(147)}compute(e,t,i){const s=t.get(146);return{isDominatedByLongLines:e.isDominatedByLongLines,isWordWrapMinified:s.isWordWrapMinified,isViewportWrapping:s.isViewportWrapping,wrappingColumn:s.wrappingColumn}}}class aje extends rn{constructor(){const e={enabled:!0,showDropSelector:"afterDrop"};super(36,"dropIntoEditor",e,{"editor.dropIntoEditor.enabled":{type:"boolean",default:e.enabled,markdownDescription:v("dropIntoEditor.enabled","Controls whether you can drag and drop a file into a text editor by holding down the `Shift` key (instead of opening the file in an editor).")},"editor.dropIntoEditor.showDropSelector":{type:"string",markdownDescription:v("dropIntoEditor.showDropSelector","Controls if a widget is shown when dropping files into the editor. This widget lets you control how the file is dropped."),enum:["afterDrop","never"],enumDescriptions:[v("dropIntoEditor.showDropSelector.afterDrop","Show the drop selector widget after a file is dropped into the editor."),v("dropIntoEditor.showDropSelector.never","Never show the drop selector widget. Instead the default drop provider is always used.")],default:"afterDrop"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Ge(t.enabled,this.defaultValue.enabled),showDropSelector:En(t.showDropSelector,this.defaultValue.showDropSelector,["afterDrop","never"])}}}class lje extends rn{constructor(){const e={enabled:!0,showPasteSelector:"afterPaste"};super(85,"pasteAs",e,{"editor.pasteAs.enabled":{type:"boolean",default:e.enabled,markdownDescription:v("pasteAs.enabled","Controls whether you can paste content in different ways.")},"editor.pasteAs.showPasteSelector":{type:"string",markdownDescription:v("pasteAs.showPasteSelector","Controls if a widget is shown when pasting content in to the editor. This widget lets you control how the file is pasted."),enum:["afterPaste","never"],enumDescriptions:[v("pasteAs.showPasteSelector.afterPaste","Show the paste selector widget after content is pasted into the editor."),v("pasteAs.showPasteSelector.never","Never show the paste selector widget. Instead the default pasting behavior is always used.")],default:"afterPaste"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Ge(t.enabled,this.defaultValue.enabled),showPasteSelector:En(t.showPasteSelector,this.defaultValue.showPasteSelector,["afterPaste","never"])}}}const cje="Consolas, 'Courier New', monospace",dje="Menlo, Monaco, 'Courier New', monospace",uje="'Droid Sans Mono', 'monospace', monospace",To={fontFamily:Bt?dje:Po?uje:cje,fontWeight:"normal",fontSize:Bt?12:14,lineHeight:0,letterSpacing:0},b1=[];function ke(n){return b1[n.id]=n,n}const Ku={acceptSuggestionOnCommitCharacter:ke(new ii(0,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:v("acceptSuggestionOnCommitCharacter","Controls whether suggestions should be accepted on commit characters. For example, in JavaScript, the semi-colon (`;`) can be a commit character that accepts a suggestion and types that character.")})),acceptSuggestionOnEnter:ke(new kn(1,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",v("acceptSuggestionOnEnterSmart","Only accept a suggestion with `Enter` when it makes a textual change."),""],markdownDescription:v("acceptSuggestionOnEnter","Controls whether suggestions should be accepted on `Enter`, in addition to `Tab`. Helps to avoid ambiguity between inserting new lines or accepting suggestions.")})),accessibilitySupport:ke(new S$e),accessibilityPageSize:ke(new Pi(3,"accessibilityPageSize",10,1,1073741824,{description:v("accessibilityPageSize","Controls the number of lines in the editor that can be read out by a screen reader at once. When we detect a screen reader we automatically set the default to be 500. Warning: this has a performance implication for numbers larger than the default."),tags:["accessibility"]})),ariaLabel:ke(new no(4,"ariaLabel",v("editorViewAccessibleLabel","Editor content"))),ariaRequired:ke(new ii(5,"ariaRequired",!1,void 0)),screenReaderAnnounceInlineSuggestion:ke(new ii(8,"screenReaderAnnounceInlineSuggestion",!0,{description:v("screenReaderAnnounceInlineSuggestion","Control whether inline suggestions are announced by a screen reader."),tags:["accessibility"]})),autoClosingBrackets:ke(new kn(6,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",v("editor.autoClosingBrackets.languageDefined","Use language configurations to determine when to autoclose brackets."),v("editor.autoClosingBrackets.beforeWhitespace","Autoclose brackets only when the cursor is to the left of whitespace."),""],description:v("autoClosingBrackets","Controls whether the editor should automatically close brackets after the user adds an opening bracket.")})),autoClosingComments:ke(new kn(7,"autoClosingComments","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",v("editor.autoClosingComments.languageDefined","Use language configurations to determine when to autoclose comments."),v("editor.autoClosingComments.beforeWhitespace","Autoclose comments only when the cursor is to the left of whitespace."),""],description:v("autoClosingComments","Controls whether the editor should automatically close comments after the user adds an opening comment.")})),autoClosingDelete:ke(new kn(9,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",v("editor.autoClosingDelete.auto","Remove adjacent closing quotes or brackets only if they were automatically inserted."),""],description:v("autoClosingDelete","Controls whether the editor should remove adjacent closing quotes or brackets when deleting.")})),autoClosingOvertype:ke(new kn(10,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",v("editor.autoClosingOvertype.auto","Type over closing quotes or brackets only if they were automatically inserted."),""],description:v("autoClosingOvertype","Controls whether the editor should type over closing quotes or brackets.")})),autoClosingQuotes:ke(new kn(11,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",v("editor.autoClosingQuotes.languageDefined","Use language configurations to determine when to autoclose quotes."),v("editor.autoClosingQuotes.beforeWhitespace","Autoclose quotes only when the cursor is to the left of whitespace."),""],description:v("autoClosingQuotes","Controls whether the editor should automatically close quotes after the user adds an opening quote.")})),autoIndent:ke(new AR(12,"autoIndent",4,"full",["none","keep","brackets","advanced","full"],y$e,{enumDescriptions:[v("editor.autoIndent.none","The editor will not insert indentation automatically."),v("editor.autoIndent.keep","The editor will keep the current line's indentation."),v("editor.autoIndent.brackets","The editor will keep the current line's indentation and honor language defined brackets."),v("editor.autoIndent.advanced","The editor will keep the current line's indentation, honor language defined brackets and invoke special onEnterRules defined by languages."),v("editor.autoIndent.full","The editor will keep the current line's indentation, honor language defined brackets, invoke special onEnterRules defined by languages, and honor indentationRules defined by languages.")],description:v("autoIndent","Controls whether the editor should automatically adjust the indentation when users type, paste, move or indent lines.")})),automaticLayout:ke(new ii(13,"automaticLayout",!1)),autoSurround:ke(new kn(14,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[v("editor.autoSurround.languageDefined","Use language configurations to determine when to automatically surround selections."),v("editor.autoSurround.quotes","Surround with quotes but not brackets."),v("editor.autoSurround.brackets","Surround with brackets but not quotes."),""],description:v("autoSurround","Controls whether the editor should automatically surround selections when typing quotes or brackets.")})),bracketPairColorization:ke(new eje),bracketPairGuides:ke(new tje),stickyTabStops:ke(new ii(117,"stickyTabStops",!1,{description:v("stickyTabStops","Emulate selection behavior of tab characters when using spaces for indentation. Selection will stick to tab stops.")})),codeLens:ke(new ii(17,"codeLens",!0,{description:v("codeLens","Controls whether the editor shows CodeLens.")})),codeLensFontFamily:ke(new no(18,"codeLensFontFamily","",{description:v("codeLensFontFamily","Controls the font family for CodeLens.")})),codeLensFontSize:ke(new Pi(19,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,markdownDescription:v("codeLensFontSize","Controls the font size in pixels for CodeLens. When set to 0, 90% of `#editor.fontSize#` is used.")})),colorDecorators:ke(new ii(20,"colorDecorators",!0,{description:v("colorDecorators","Controls whether the editor should render the inline color decorators and color picker.")})),colorDecoratorActivatedOn:ke(new kn(149,"colorDecoratorsActivatedOn","clickAndHover",["clickAndHover","hover","click"],{enumDescriptions:[v("editor.colorDecoratorActivatedOn.clickAndHover","Make the color picker appear both on click and hover of the color decorator"),v("editor.colorDecoratorActivatedOn.hover","Make the color picker appear on hover of the color decorator"),v("editor.colorDecoratorActivatedOn.click","Make the color picker appear on click of the color decorator")],description:v("colorDecoratorActivatedOn","Controls the condition to make a color picker appear from a color decorator")})),colorDecoratorsLimit:ke(new Pi(21,"colorDecoratorsLimit",500,1,1e6,{markdownDescription:v("colorDecoratorsLimit","Controls the max number of color decorators that can be rendered in an editor at once.")})),columnSelection:ke(new ii(22,"columnSelection",!1,{description:v("columnSelection","Enable that the selection with the mouse and keys is doing column selection.")})),comments:ke(new x$e),contextmenu:ke(new ii(24,"contextmenu",!0)),copyWithSyntaxHighlighting:ke(new ii(25,"copyWithSyntaxHighlighting",!0,{description:v("copyWithSyntaxHighlighting","Controls whether syntax highlighting should be copied into the clipboard.")})),cursorBlinking:ke(new AR(26,"cursorBlinking",1,"blink",["blink","smooth","phase","expand","solid"],L$e,{description:v("cursorBlinking","Control the cursor animation style.")})),cursorSmoothCaretAnimation:ke(new kn(27,"cursorSmoothCaretAnimation","off",["off","explicit","on"],{enumDescriptions:[v("cursorSmoothCaretAnimation.off","Smooth caret animation is disabled."),v("cursorSmoothCaretAnimation.explicit","Smooth caret animation is enabled only when the user moves the cursor with an explicit gesture."),v("cursorSmoothCaretAnimation.on","Smooth caret animation is always enabled.")],description:v("cursorSmoothCaretAnimation","Controls whether the smooth caret animation should be enabled.")})),cursorStyle:ke(new AR(28,"cursorStyle",er.Line,"line",["line","block","underline","line-thin","block-outline","underline-thin"],k$e,{description:v("cursorStyle","Controls the cursor style.")})),cursorSurroundingLines:ke(new Pi(29,"cursorSurroundingLines",0,0,1073741824,{description:v("cursorSurroundingLines","Controls the minimal number of visible leading lines (minimum 0) and trailing lines (minimum 1) surrounding the cursor. Known as 'scrollOff' or 'scrollOffset' in some other editors.")})),cursorSurroundingLinesStyle:ke(new kn(30,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[v("cursorSurroundingLinesStyle.default","`cursorSurroundingLines` is enforced only when triggered via the keyboard or API."),v("cursorSurroundingLinesStyle.all","`cursorSurroundingLines` is enforced always.")],markdownDescription:v("cursorSurroundingLinesStyle","Controls when `#editor.cursorSurroundingLines#` should be enforced.")})),cursorWidth:ke(new Pi(31,"cursorWidth",0,0,1073741824,{markdownDescription:v("cursorWidth","Controls the width of the cursor when `#editor.cursorStyle#` is set to `line`.")})),disableLayerHinting:ke(new ii(32,"disableLayerHinting",!1)),disableMonospaceOptimizations:ke(new ii(33,"disableMonospaceOptimizations",!1)),domReadOnly:ke(new ii(34,"domReadOnly",!1)),dragAndDrop:ke(new ii(35,"dragAndDrop",!0,{description:v("dragAndDrop","Controls whether the editor should allow moving selections via drag and drop.")})),emptySelectionClipboard:ke(new I$e),dropIntoEditor:ke(new aje),stickyScroll:ke(new O$e),experimentalWhitespaceRendering:ke(new kn(38,"experimentalWhitespaceRendering","svg",["svg","font","off"],{enumDescriptions:[v("experimentalWhitespaceRendering.svg","Use a new rendering method with svgs."),v("experimentalWhitespaceRendering.font","Use a new rendering method with font characters."),v("experimentalWhitespaceRendering.off","Use the stable rendering method.")],description:v("experimentalWhitespaceRendering","Controls whether whitespace is rendered with a new, experimental method.")})),extraEditorClassName:ke(new no(39,"extraEditorClassName","")),fastScrollSensitivity:ke(new Al(40,"fastScrollSensitivity",5,n=>n<=0?5:n,{markdownDescription:v("fastScrollSensitivity","Scrolling speed multiplier when pressing `Alt`.")})),find:ke(new D$e),fixedOverflowWidgets:ke(new ii(42,"fixedOverflowWidgets",!1)),folding:ke(new ii(43,"folding",!0,{description:v("folding","Controls whether the editor has code folding enabled.")})),foldingStrategy:ke(new kn(44,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[v("foldingStrategy.auto","Use a language-specific folding strategy if available, else the indentation-based one."),v("foldingStrategy.indentation","Use the indentation-based folding strategy.")],description:v("foldingStrategy","Controls the strategy for computing folding ranges.")})),foldingHighlight:ke(new ii(45,"foldingHighlight",!0,{description:v("foldingHighlight","Controls whether the editor should highlight folded ranges.")})),foldingImportsByDefault:ke(new ii(46,"foldingImportsByDefault",!1,{description:v("foldingImportsByDefault","Controls whether the editor automatically collapses import ranges.")})),foldingMaximumRegions:ke(new Pi(47,"foldingMaximumRegions",5e3,10,65e3,{description:v("foldingMaximumRegions","The maximum number of foldable regions. Increasing this value may result in the editor becoming less responsive when the current source has a large number of foldable regions.")})),unfoldOnClickAfterEndOfLine:ke(new ii(48,"unfoldOnClickAfterEndOfLine",!1,{description:v("unfoldOnClickAfterEndOfLine","Controls whether clicking on the empty content after a folded line will unfold the line.")})),fontFamily:ke(new no(49,"fontFamily",To.fontFamily,{description:v("fontFamily","Controls the font family.")})),fontInfo:ke(new N$e),fontLigatures2:ke(new k_),fontSize:ke(new T$e),fontWeight:ke(new SV),fontVariations:ke(new NI),formatOnPaste:ke(new ii(55,"formatOnPaste",!1,{description:v("formatOnPaste","Controls whether the editor should automatically format the pasted content. A formatter must be available and the formatter should be able to format a range in a document.")})),formatOnType:ke(new ii(56,"formatOnType",!1,{description:v("formatOnType","Controls whether the editor should automatically format the line after typing.")})),glyphMargin:ke(new ii(57,"glyphMargin",!0,{description:v("glyphMargin","Controls whether the editor should render the vertical glyph margin. Glyph margin is mostly used for debugging.")})),gotoLocation:ke(new R$e),hideCursorInOverviewRuler:ke(new ii(59,"hideCursorInOverviewRuler",!1,{description:v("hideCursorInOverviewRuler","Controls whether the cursor should be hidden in the overview ruler.")})),hover:ke(new A$e),inDiffEditor:ke(new ii(61,"inDiffEditor",!1)),letterSpacing:ke(new Al(64,"letterSpacing",To.letterSpacing,n=>Al.clamp(n,-5,20),{description:v("letterSpacing","Controls the letter spacing in pixels.")})),lightbulb:ke(new P$e),lineDecorationsWidth:ke(new B$e),lineHeight:ke(new W$e),lineNumbers:ke(new q$e),lineNumbersMinChars:ke(new Pi(69,"lineNumbersMinChars",5,1,300)),linkedEditing:ke(new ii(70,"linkedEditing",!1,{description:v("linkedEditing","Controls whether the editor has linked editing enabled. Depending on the language, related symbols such as HTML tags, are updated while editing.")})),links:ke(new ii(71,"links",!0,{description:v("links","Controls whether the editor should detect links and make them clickable.")})),matchBrackets:ke(new kn(72,"matchBrackets","always",["always","near","never"],{description:v("matchBrackets","Highlight matching brackets.")})),minimap:ke(new H$e),mouseStyle:ke(new kn(74,"mouseStyle","text",["text","default","copy"])),mouseWheelScrollSensitivity:ke(new Al(75,"mouseWheelScrollSensitivity",1,n=>n===0?1:n,{markdownDescription:v("mouseWheelScrollSensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")})),mouseWheelZoom:ke(new ii(76,"mouseWheelZoom",!1,{markdownDescription:Bt?v("mouseWheelZoom.mac","Zoom the font of the editor when using mouse wheel and holding `Cmd`."):v("mouseWheelZoom","Zoom the font of the editor when using mouse wheel and holding `Ctrl`.")})),multiCursorMergeOverlapping:ke(new ii(77,"multiCursorMergeOverlapping",!0,{description:v("multiCursorMergeOverlapping","Merge multiple cursors when they are overlapping.")})),multiCursorModifier:ke(new AR(78,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],V$e,{markdownEnumDescriptions:[v("multiCursorModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),v("multiCursorModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],markdownDescription:v({key:"multiCursorModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add multiple cursors with the mouse. The Go to Definition and Open Link mouse gestures will adapt such that they do not conflict with the [multicursor modifier](https://code.visualstudio.com/docs/editor/codebasics#_multicursor-modifier).")})),multiCursorPaste:ke(new kn(79,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[v("multiCursorPaste.spread","Each cursor pastes a single line of the text."),v("multiCursorPaste.full","Each cursor pastes the full text.")],markdownDescription:v("multiCursorPaste","Controls pasting when the line count of the pasted text matches the cursor count.")})),multiCursorLimit:ke(new Pi(80,"multiCursorLimit",1e4,1,1e5,{markdownDescription:v("multiCursorLimit","Controls the max number of cursors that can be in an active editor at once.")})),occurrencesHighlight:ke(new kn(81,"occurrencesHighlight","singleFile",["off","singleFile","multiFile"],{markdownEnumDescriptions:[v("occurrencesHighlight.off","Does not highlight occurrences."),v("occurrencesHighlight.singleFile","Highlights occurrences only in the current file."),v("occurrencesHighlight.multiFile","Experimental: Highlights occurrences across all valid open files.")],markdownDescription:v("occurrencesHighlight","Controls whether occurrences should be highlighted across open files.")})),overviewRulerBorder:ke(new ii(82,"overviewRulerBorder",!0,{description:v("overviewRulerBorder","Controls whether a border should be drawn around the overview ruler.")})),overviewRulerLanes:ke(new Pi(83,"overviewRulerLanes",3,0,3)),padding:ke(new z$e),pasteAs:ke(new lje),parameterHints:ke(new U$e),peekWidgetDefaultFocus:ke(new kn(87,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[v("peekWidgetDefaultFocus.tree","Focus the tree when opening peek"),v("peekWidgetDefaultFocus.editor","Focus the editor when opening peek")],description:v("peekWidgetDefaultFocus","Controls whether to focus the inline editor or the tree in the peek widget.")})),placeholder:ke(new j$e),definitionLinkOpensInPeek:ke(new ii(89,"definitionLinkOpensInPeek",!1,{description:v("definitionLinkOpensInPeek","Controls whether the Go to Definition mouse gesture always opens the peek widget.")})),quickSuggestions:ke(new K$e),quickSuggestionsDelay:ke(new Pi(91,"quickSuggestionsDelay",10,0,1073741824,{description:v("quickSuggestionsDelay","Controls the delay in milliseconds after which quick suggestions will show up.")})),readOnly:ke(new ii(92,"readOnly",!1)),readOnlyMessage:ke(new Y$e),renameOnType:ke(new ii(94,"renameOnType",!1,{description:v("renameOnType","Controls whether the editor auto renames on type."),markdownDeprecationMessage:v("renameOnTypeDeprecate","Deprecated, use `editor.linkedEditing` instead.")})),renderControlCharacters:ke(new ii(95,"renderControlCharacters",!0,{description:v("renderControlCharacters","Controls whether the editor should render control characters."),restricted:!0})),renderFinalNewline:ke(new kn(96,"renderFinalNewline",Po?"dimmed":"on",["off","on","dimmed"],{description:v("renderFinalNewline","Render last line number when the file ends with a newline.")})),renderLineHighlight:ke(new kn(97,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",v("renderLineHighlight.all","Highlights both the gutter and the current line.")],description:v("renderLineHighlight","Controls how the editor should render the current line highlight.")})),renderLineHighlightOnlyWhenFocus:ke(new ii(98,"renderLineHighlightOnlyWhenFocus",!1,{description:v("renderLineHighlightOnlyWhenFocus","Controls if the editor should render the current line highlight only when the editor is focused.")})),renderValidationDecorations:ke(new kn(99,"renderValidationDecorations","editable",["editable","on","off"])),renderWhitespace:ke(new kn(100,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",v("renderWhitespace.boundary","Render whitespace characters except for single spaces between words."),v("renderWhitespace.selection","Render whitespace characters only on selected text."),v("renderWhitespace.trailing","Render only trailing whitespace characters."),""],description:v("renderWhitespace","Controls how the editor should render whitespace characters.")})),revealHorizontalRightPadding:ke(new Pi(101,"revealHorizontalRightPadding",15,0,1e3)),roundedSelection:ke(new ii(102,"roundedSelection",!0,{description:v("roundedSelection","Controls whether selections should have rounded corners.")})),rulers:ke(new G$e),scrollbar:ke(new Z$e),scrollBeyondLastColumn:ke(new Pi(105,"scrollBeyondLastColumn",4,0,1073741824,{description:v("scrollBeyondLastColumn","Controls the number of extra characters beyond which the editor will scroll horizontally.")})),scrollBeyondLastLine:ke(new ii(106,"scrollBeyondLastLine",!0,{description:v("scrollBeyondLastLine","Controls whether the editor will scroll beyond the last line.")})),scrollPredominantAxis:ke(new ii(107,"scrollPredominantAxis",!0,{description:v("scrollPredominantAxis","Scroll only along the predominant axis when scrolling both vertically and horizontally at the same time. Prevents horizontal drift when scrolling vertically on a trackpad.")})),selectionClipboard:ke(new ii(108,"selectionClipboard",!0,{description:v("selectionClipboard","Controls whether the Linux primary clipboard should be supported."),included:Po})),selectionHighlight:ke(new ii(109,"selectionHighlight",!0,{description:v("selectionHighlight","Controls whether the editor should highlight matches similar to the selection.")})),selectOnLineNumbers:ke(new ii(110,"selectOnLineNumbers",!0)),showFoldingControls:ke(new kn(111,"showFoldingControls","mouseover",["always","never","mouseover"],{enumDescriptions:[v("showFoldingControls.always","Always show the folding controls."),v("showFoldingControls.never","Never show the folding controls and reduce the gutter size."),v("showFoldingControls.mouseover","Only show the folding controls when the mouse is over the gutter.")],description:v("showFoldingControls","Controls when the folding controls on the gutter are shown.")})),showUnused:ke(new ii(112,"showUnused",!0,{description:v("showUnused","Controls fading out of unused code.")})),showDeprecated:ke(new ii(141,"showDeprecated",!0,{description:v("showDeprecated","Controls strikethrough deprecated variables.")})),inlayHints:ke(new F$e),snippetSuggestions:ke(new kn(113,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[v("snippetSuggestions.top","Show snippet suggestions on top of other suggestions."),v("snippetSuggestions.bottom","Show snippet suggestions below other suggestions."),v("snippetSuggestions.inline","Show snippets suggestions with other suggestions."),v("snippetSuggestions.none","Do not show snippet suggestions.")],description:v("snippetSuggestions","Controls whether snippets are shown with other suggestions and how they are sorted.")})),smartSelect:ke(new nje),smoothScrolling:ke(new ii(115,"smoothScrolling",!1,{description:v("smoothScrolling","Controls whether the editor will scroll using an animation.")})),stopRenderingLineAfter:ke(new Pi(118,"stopRenderingLineAfter",1e4,-1,1073741824)),suggest:ke(new ije),inlineSuggest:ke(new Q$e),inlineEdit:ke(new J$e),inlineCompletionsAccessibilityVerbose:ke(new ii(150,"inlineCompletionsAccessibilityVerbose",!1,{description:v("inlineCompletionsAccessibilityVerbose","Controls whether the accessibility hint should be provided to screen reader users when an inline completion is shown.")})),suggestFontSize:ke(new Pi(120,"suggestFontSize",0,0,1e3,{markdownDescription:v("suggestFontSize","Font size for the suggest widget. When set to {0}, the value of {1} is used.","`0`","`#editor.fontSize#`")})),suggestLineHeight:ke(new Pi(121,"suggestLineHeight",0,0,1e3,{markdownDescription:v("suggestLineHeight","Line height for the suggest widget. When set to {0}, the value of {1} is used. The minimum value is 8.","`0`","`#editor.lineHeight#`")})),suggestOnTriggerCharacters:ke(new ii(122,"suggestOnTriggerCharacters",!0,{description:v("suggestOnTriggerCharacters","Controls whether suggestions should automatically show up when typing trigger characters.")})),suggestSelection:ke(new kn(123,"suggestSelection","first",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[v("suggestSelection.first","Always select the first suggestion."),v("suggestSelection.recentlyUsed","Select recent suggestions unless further typing selects one, e.g. `console.| -> console.log` because `log` has been completed recently."),v("suggestSelection.recentlyUsedByPrefix","Select suggestions based on previous prefixes that have completed those suggestions, e.g. `co -> console` and `con -> const`.")],description:v("suggestSelection","Controls how suggestions are pre-selected when showing the suggest list.")})),tabCompletion:ke(new kn(124,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[v("tabCompletion.on","Tab complete will insert the best matching suggestion when pressing tab."),v("tabCompletion.off","Disable tab completions."),v("tabCompletion.onlySnippets","Tab complete snippets when their prefix match. Works best when 'quickSuggestions' aren't enabled.")],description:v("tabCompletion","Enables tab completions.")})),tabIndex:ke(new Pi(125,"tabIndex",0,-1,1073741824)),unicodeHighlight:ke(new X$e),unusualLineTerminators:ke(new kn(127,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[v("unusualLineTerminators.auto","Unusual line terminators are automatically removed."),v("unusualLineTerminators.off","Unusual line terminators are ignored."),v("unusualLineTerminators.prompt","Unusual line terminators prompt to be removed.")],description:v("unusualLineTerminators","Remove unusual line terminators that might cause problems.")})),useShadowDOM:ke(new ii(128,"useShadowDOM",!0)),useTabStops:ke(new ii(129,"useTabStops",!0,{description:v("useTabStops","Spaces and tabs are inserted and deleted in alignment with tab stops.")})),wordBreak:ke(new kn(130,"wordBreak","normal",["normal","keepAll"],{markdownEnumDescriptions:[v("wordBreak.normal","Use the default line break rule."),v("wordBreak.keepAll","Word breaks should not be used for Chinese/Japanese/Korean (CJK) text. Non-CJK text behavior is the same as for normal.")],description:v("wordBreak","Controls the word break rules used for Chinese/Japanese/Korean (CJK) text.")})),wordSegmenterLocales:ke(new sje),wordSeparators:ke(new no(132,"wordSeparators",eP,{description:v("wordSeparators","Characters that will be used as word separators when doing word related navigations or operations.")})),wordWrap:ke(new kn(133,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[v("wordWrap.off","Lines will never wrap."),v("wordWrap.on","Lines will wrap at the viewport width."),v({key:"wordWrap.wordWrapColumn",comment:["- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at `#editor.wordWrapColumn#`."),v({key:"wordWrap.bounded",comment:["- viewport means the edge of the visible window size.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at the minimum of viewport and `#editor.wordWrapColumn#`.")],description:v({key:"wordWrap",comment:["- 'off', 'on', 'wordWrapColumn' and 'bounded' refer to values the setting can take and should not be localized.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Controls how lines should wrap.")})),wordWrapBreakAfterCharacters:ke(new no(134,"wordWrapBreakAfterCharacters"," 	})]?|/&.,;")),wordWrapBreakBeforeCharacters:ke(new no(135,"wordWrapBreakBeforeCharacters","([{+")),wordWrapColumn:ke(new Pi(136,"wordWrapColumn",80,1,1073741824,{markdownDescription:v({key:"wordWrapColumn",comment:["- `editor.wordWrap` refers to a different setting and should not be localized.","- 'wordWrapColumn' and 'bounded' refer to values the different setting can take and should not be localized."]},"Controls the wrapping column of the editor when `#editor.wordWrap#` is `wordWrapColumn` or `bounded`.")})),wordWrapOverride1:ke(new kn(137,"wordWrapOverride1","inherit",["off","on","inherit"])),wordWrapOverride2:ke(new kn(138,"wordWrapOverride2","inherit",["off","on","inherit"])),editorClassName:ke(new E$e),defaultColorDecorators:ke(new ii(148,"defaultColorDecorators",!1,{markdownDescription:v("defaultColorDecorators","Controls whether inline color decorations should be shown using the default document color provider")})),pixelRatio:ke(new $$e),tabFocusMode:ke(new ii(145,"tabFocusMode",!1,{markdownDescription:v("tabFocusMode","Controls whether the editor receives tabs or defers them to the workbench for navigation.")})),layoutInfo:ke(new wy),wrappingInfo:ke(new oje),wrappingIndent:ke(new rje),wrappingStrategy:ke(new M$e)};class hje{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?ES.isErrorNoTelemetry(e)?new ES(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}emit(e){this.listeners.forEach(t=>{t(e)})}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}}const Ywe=new hje;function pt(n){Vc(n)||Ywe.onUnexpectedError(n)}function Wn(n){Vc(n)||Ywe.onUnexpectedExternalError(n)}function woe(n){if(n instanceof Error){const{name:e,message:t}=n,i=n.stacktrace||n.stack;return{$isError:!0,name:e,message:t,stack:i,noTelemetry:ES.isErrorNoTelemetry(n)}}return n}const iP="Canceled";function Vc(n){return n instanceof Dd?!0:n instanceof Error&&n.name===iP&&n.message===iP}class Dd extends Error{constructor(){super(iP),this.name=this.message}}function fje(){const n=new Error(iP);return n.name=n.message,n}function Ec(n){return n?new Error(`Illegal argument: ${n}`):new Error("Illegal argument")}function YZ(n){return n?new Error(`Illegal state: ${n}`):new Error("Illegal state")}class gje extends Error{constructor(e){super("NotSupported"),e&&(this.message=e)}}class ES extends Error{constructor(e){super(e),this.name="CodeExpectedError"}static fromError(e){if(e instanceof ES)return e;const t=new ES;return t.message=e.message,t.stack=e.stack,t}static isErrorNoTelemetry(e){return e.name==="CodeExpectedError"}}class li extends Error{constructor(e){super(e||"An unexpected bug occurred."),Object.setPrototypeOf(this,li.prototype)}}function E_(n,e){const t=this;let i=!1,s;return function(){return i||(i=!0,s=n.apply(t,arguments)),s}}function M3(n){return typeof n=="object"&&n!==null&&typeof n.dispose=="function"&&n.dispose.length===0}function Ti(n){if(qt.is(n)){const e=[];for(const t of n)if(t)try{t.dispose()}catch(i){e.push(i)}if(e.length===1)throw e[0];if(e.length>1)throw new AggregateError(e,"Encountered errors while disposing of store");return Array.isArray(n)?[]:n}else if(n)return n.dispose(),n}function Ld(...n){return Ye(()=>Ti(n))}function Ye(n){return{dispose:E_(()=>{n()})}}const s4=class s4{constructor(){this._toDispose=new Set,this._isDisposed=!1}dispose(){this._isDisposed||(this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{Ti(this._toDispose)}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?s4.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}deleteAndLeak(e){e&&this._toDispose.has(e)&&this._toDispose.delete(e)}};s4.DISABLE_DISPOSED_WARNING=!1;let ue=s4;const zee=class zee{constructor(){this._store=new ue,this._store}dispose(){this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}};zee.None=Object.freeze({dispose(){}});let ee=zee;class As{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(e){var t;this._isDisposed||e===this._value||((t=this._value)==null||t.dispose(),this._value=e)}clear(){this.value=void 0}dispose(){var e;this._isDisposed=!0,(e=this._value)==null||e.dispose(),this._value=void 0}}class pje{constructor(e){this._disposable=e,this._counter=1}acquire(){return this._counter++,this}release(){return--this._counter===0&&this._disposable.dispose(),this}}class mje{constructor(e){this.object=e}dispose(){}}class ZZ{constructor(){this._store=new Map,this._isDisposed=!1}dispose(){this._isDisposed=!0,this.clearAndDisposeAll()}clearAndDisposeAll(){if(this._store.size)try{Ti(this._store.values())}finally{this._store.clear()}}get(e){return this._store.get(e)}set(e,t,i=!1){var s;this._isDisposed&&console.warn(new Error("Trying to add a disposable to a DisposableMap that has already been disposed of. The added object will be leaked!").stack),i||(s=this._store.get(e))==null||s.dispose(),this._store.set(e,t)}deleteAndDispose(e){var t;(t=this._store.get(e))==null||t.dispose(),this._store.delete(e)}[Symbol.iterator](){return this._store[Symbol.iterator]()}}const _je=globalThis.performance&&typeof globalThis.performance.now=="function";class js{static create(e){return new js(e)}constructor(e){this._now=_je&&e===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}}var Ee;(function(n){n.None=()=>ee.None;function e(J,j){return h(J,()=>{},0,void 0,!0,void 0,j)}n.defer=e;function t(J){return(j,ne=null,oe)=>{let ve=!1,te;return te=J(ce=>{if(!ve)return te?te.dispose():ve=!0,j.call(ne,ce)},null,oe),ve&&te.dispose(),te}}n.once=t;function i(J,j){return n.once(n.filter(J,j))}n.onceIf=i;function s(J,j,ne){return d((oe,ve=null,te)=>J(ce=>oe.call(ve,j(ce)),null,te),ne)}n.map=s;function r(J,j,ne){return d((oe,ve=null,te)=>J(ce=>{j(ce),oe.call(ve,ce)},null,te),ne)}n.forEach=r;function o(J,j,ne){return d((oe,ve=null,te)=>J(ce=>j(ce)&&oe.call(ve,ce),null,te),ne)}n.filter=o;function a(J){return J}n.signal=a;function l(...J){return(j,ne=null,oe)=>{const ve=Ld(...J.map(te=>te(ce=>j.call(ne,ce))));return u(ve,oe)}}n.any=l;function c(J,j,ne,oe){let ve=ne;return s(J,te=>(ve=j(ve,te),ve),oe)}n.reduce=c;function d(J,j){let ne;const oe={onWillAddFirstListener(){ne=J(ve.fire,ve)},onDidRemoveLastListener(){ne==null||ne.dispose()}},ve=new X(oe);return j==null||j.add(ve),ve.event}function u(J,j){return j instanceof Array?j.push(J):j&&j.add(J),J}function h(J,j,ne=100,oe=!1,ve=!1,te,ce){let Ie,Ce,it,He=0,dt;const P={leakWarningThreshold:te,onWillAddFirstListener(){Ie=J(Z=>{He++,Ce=j(Ce,Z),oe&&!it&&($.fire(Ce),Ce=void 0),dt=()=>{const ae=Ce;Ce=void 0,it=void 0,(!oe||He>1)&&$.fire(ae),He=0},typeof ne=="number"?(clearTimeout(it),it=setTimeout(dt,ne)):it===void 0&&(it=0,queueMicrotask(dt))})},onWillRemoveListener(){ve&&He>0&&(dt==null||dt())},onDidRemoveLastListener(){dt=void 0,Ie.dispose()}},$=new X(P);return ce==null||ce.add($),$.event}n.debounce=h;function f(J,j=0,ne){return n.debounce(J,(oe,ve)=>oe?(oe.push(ve),oe):[ve],j,void 0,!0,void 0,ne)}n.accumulate=f;function g(J,j=(oe,ve)=>oe===ve,ne){let oe=!0,ve;return o(J,te=>{const ce=oe||!j(te,ve);return oe=!1,ve=te,ce},ne)}n.latch=g;function p(J,j,ne){return[n.filter(J,j,ne),n.filter(J,oe=>!j(oe),ne)]}n.split=p;function _(J,j=!1,ne=[],oe){let ve=ne.slice(),te=J(Ce=>{ve?ve.push(Ce):Ie.fire(Ce)});oe&&oe.add(te);const ce=()=>{ve==null||ve.forEach(Ce=>Ie.fire(Ce)),ve=null},Ie=new X({onWillAddFirstListener(){te||(te=J(Ce=>Ie.fire(Ce)),oe&&oe.add(te))},onDidAddFirstListener(){ve&&(j?setTimeout(ce):ce())},onDidRemoveLastListener(){te&&te.dispose(),te=null}});return oe&&oe.add(Ie),Ie.event}n.buffer=_;function w(J,j){return(oe,ve,te)=>{const ce=j(new y);return J(function(Ie){const Ce=ce.evaluate(Ie);Ce!==b&&oe.call(ve,Ce)},void 0,te)}}n.chain=w;const b=Symbol("HaltChainable");class y{constructor(){this.steps=[]}map(j){return this.steps.push(j),this}forEach(j){return this.steps.push(ne=>(j(ne),ne)),this}filter(j){return this.steps.push(ne=>j(ne)?ne:b),this}reduce(j,ne){let oe=ne;return this.steps.push(ve=>(oe=j(oe,ve),oe)),this}latch(j=(ne,oe)=>ne===oe){let ne=!0,oe;return this.steps.push(ve=>{const te=ne||!j(ve,oe);return ne=!1,oe=ve,te?ve:b}),this}evaluate(j){for(const ne of this.steps)if(j=ne(j),j===b)break;return j}}function S(J,j,ne=oe=>oe){const oe=(...Ie)=>ce.fire(ne(...Ie)),ve=()=>J.on(j,oe),te=()=>J.removeListener(j,oe),ce=new X({onWillAddFirstListener:ve,onDidRemoveLastListener:te});return ce.event}n.fromNodeEventEmitter=S;function x(J,j,ne=oe=>oe){const oe=(...Ie)=>ce.fire(ne(...Ie)),ve=()=>J.addEventListener(j,oe),te=()=>J.removeEventListener(j,oe),ce=new X({onWillAddFirstListener:ve,onDidRemoveLastListener:te});return ce.event}n.fromDOMEventEmitter=x;function E(J){return new Promise(j=>t(J)(j))}n.toPromise=E;function D(J){const j=new X;return J.then(ne=>{j.fire(ne)},()=>{j.fire(void 0)}).finally(()=>{j.dispose()}),j.event}n.fromPromise=D;function N(J,j){return J(ne=>j.fire(ne))}n.forward=N;function I(J,j,ne){return j(ne),J(oe=>j(oe))}n.runAndSubscribe=I;class H{constructor(j,ne){this._observable=j,this._counter=0,this._hasChanged=!1;const oe={onWillAddFirstListener:()=>{j.addObserver(this),this._observable.reportChanges()},onDidRemoveLastListener:()=>{j.removeObserver(this)}};this.emitter=new X(oe),ne&&ne.add(this.emitter)}beginUpdate(j){this._counter++}handlePossibleChange(j){}handleChange(j,ne){this._hasChanged=!0}endUpdate(j){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function z(J,j){return new H(J,j).emitter.event}n.fromObservable=z;function G(J){return(j,ne,oe)=>{let ve=0,te=!1;const ce={beginUpdate(){ve++},endUpdate(){ve--,ve===0&&(J.reportChanges(),te&&(te=!1,j.call(ne)))},handlePossibleChange(){},handleChange(){te=!0}};J.addObserver(ce),J.reportChanges();const Ie={dispose(){J.removeObserver(ce)}};return oe instanceof ue?oe.add(Ie):Array.isArray(oe)&&oe.push(Ie),Ie}}n.fromObservableLight=G})(Ee||(Ee={}));const K1=class K1{constructor(e){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name=`${e}_${K1._idPool++}`,K1.all.add(this)}start(e){this._stopWatch=new js,this.listenerCount=e}stop(){if(this._stopWatch){const e=this._stopWatch.elapsed();this.durations.push(e),this.elapsedOverall+=e,this.invocationCount+=1,this._stopWatch=void 0}}};K1.all=new Set,K1._idPool=0;let xV=K1,vje=-1;const r4=class r4{constructor(e,t,i=(r4._idPool++).toString(16).padStart(3,"0")){this._errorHandler=e,this.threshold=t,this.name=i,this._warnCountdown=0}dispose(){var e;(e=this._stacks)==null||e.clear()}check(e,t){const i=this.threshold;if(i<=0||t<i)return;this._stacks||(this._stacks=new Map);const s=this._stacks.get(e.value)||0;if(this._stacks.set(e.value,s+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=i*.5;const[r,o]=this.getMostFrequentStack(),a=`[${this.name}] potential listener LEAK detected, having ${t} listeners already. MOST frequent listener (${o}):`;console.warn(a),console.warn(r);const l=new bje(a,r);this._errorHandler(l)}return()=>{const r=this._stacks.get(e.value)||0;this._stacks.set(e.value,r-1)}}getMostFrequentStack(){if(!this._stacks)return;let e,t=0;for(const[i,s]of this._stacks)(!e||t<s)&&(e=[i,s],t=s);return e}};r4._idPool=1;let LV=r4;class XZ{static create(){const e=new Error;return new XZ(e.stack??"")}constructor(e){this.value=e}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}}class bje extends Error{constructor(e,t){super(e),this.name="ListenerLeakError",this.stack=t}}class wje extends Error{constructor(e,t){super(e),this.name="ListenerRefusalError",this.stack=t}}class N9{constructor(e){this.value=e}}const Cje=2;let X=class{constructor(e){var t,i,s,r;this._size=0,this._options=e,this._leakageMon=(t=this._options)!=null&&t.leakWarningThreshold?new LV((e==null?void 0:e.onListenerError)??pt,((i=this._options)==null?void 0:i.leakWarningThreshold)??vje):void 0,this._perfMon=(s=this._options)!=null&&s._profName?new xV(this._options._profName):void 0,this._deliveryQueue=(r=this._options)==null?void 0:r.deliveryQueue}dispose(){var e,t,i,s;this._disposed||(this._disposed=!0,((e=this._deliveryQueue)==null?void 0:e.current)===this&&this._deliveryQueue.reset(),this._listeners&&(this._listeners=void 0,this._size=0),(i=(t=this._options)==null?void 0:t.onDidRemoveLastListener)==null||i.call(t),(s=this._leakageMon)==null||s.dispose())}get event(){return this._event??(this._event=(e,t,i)=>{var a,l,c,d,u;if(this._leakageMon&&this._size>this._leakageMon.threshold**2){const h=`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this._size} vs ${this._leakageMon.threshold})`;console.warn(h);const f=this._leakageMon.getMostFrequentStack()??["UNKNOWN stack",-1],g=new wje(`${h}. HINT: Stack shows most frequent listener (${f[1]}-times)`,f[0]);return(((a=this._options)==null?void 0:a.onListenerError)||pt)(g),ee.None}if(this._disposed)return ee.None;t&&(e=e.bind(t));const s=new N9(e);let r;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(s.stack=XZ.create(),r=this._leakageMon.check(s.stack,this._size+1)),this._listeners?this._listeners instanceof N9?(this._deliveryQueue??(this._deliveryQueue=new Zwe),this._listeners=[this._listeners,s]):this._listeners.push(s):((c=(l=this._options)==null?void 0:l.onWillAddFirstListener)==null||c.call(l,this),this._listeners=s,(u=(d=this._options)==null?void 0:d.onDidAddFirstListener)==null||u.call(d,this)),this._size++;const o=Ye(()=>{r==null||r(),this._removeListener(s)});return i instanceof ue?i.add(o):Array.isArray(i)&&i.push(o),o}),this._event}_removeListener(e){var r,o,a,l;if((o=(r=this._options)==null?void 0:r.onWillRemoveListener)==null||o.call(r,this),!this._listeners)return;if(this._size===1){this._listeners=void 0,(l=(a=this._options)==null?void 0:a.onDidRemoveLastListener)==null||l.call(a,this),this._size=0;return}const t=this._listeners,i=t.indexOf(e);if(i===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,t[i]=void 0;const s=this._deliveryQueue.current===this;if(this._size*Cje<=t.length){let c=0;for(let d=0;d<t.length;d++)t[d]?t[c++]=t[d]:s&&(this._deliveryQueue.end--,c<this._deliveryQueue.i&&this._deliveryQueue.i--);t.length=c}}_deliver(e,t){var s;if(!e)return;const i=((s=this._options)==null?void 0:s.onListenerError)||pt;if(!i){e.value(t);return}try{e.value(t)}catch(r){i(r)}}_deliverQueue(e){const t=e.current._listeners;for(;e.i<e.end;)this._deliver(t[e.i++],e.value);e.reset()}fire(e){var t,i,s,r;if((t=this._deliveryQueue)!=null&&t.current&&(this._deliverQueue(this._deliveryQueue),(i=this._perfMon)==null||i.stop()),(s=this._perfMon)==null||s.start(this._size),this._listeners)if(this._listeners instanceof N9)this._deliver(this._listeners,e);else{const o=this._deliveryQueue;o.enqueue(this,e,this._listeners.length),this._deliverQueue(o)}(r=this._perfMon)==null||r.stop()}hasListeners(){return this._size>0}};const yje=()=>new Zwe;class Zwe{constructor(){this.i=-1,this.end=0}enqueue(e,t,i){this.i=0,this.end=i,this.current=e,this.value=t}reset(){this.i=this.end,this.current=void 0,this.value=void 0}}class o0 extends X{constructor(e){super(e),this._isPaused=0,this._eventQueue=new xo,this._mergeFn=e==null?void 0:e.merge}pause(){this._isPaused++}resume(){if(this._isPaused!==0&&--this._isPaused===0)if(this._mergeFn){if(this._eventQueue.size>0){const e=Array.from(this._eventQueue);this._eventQueue.clear(),super.fire(this._mergeFn(e))}}else for(;!this._isPaused&&this._eventQueue.size!==0;)super.fire(this._eventQueue.shift())}fire(e){this._size&&(this._isPaused!==0?this._eventQueue.push(e):super.fire(e))}}class Xwe extends o0{constructor(e){super(e),this._delay=e.delay??100}fire(e){this._handle||(this.pause(),this._handle=setTimeout(()=>{this._handle=void 0,this.resume()},this._delay)),super.fire(e)}}class Sje extends X{constructor(e){super(e),this._queuedEvents=[],this._mergeFn=e==null?void 0:e.merge}fire(e){this.hasListeners()&&(this._queuedEvents.push(e),this._queuedEvents.length===1&&queueMicrotask(()=>{this._mergeFn?super.fire(this._mergeFn(this._queuedEvents)):this._queuedEvents.forEach(t=>super.fire(t)),this._queuedEvents=[]}))}}class xje{constructor(){this.hasListeners=!1,this.events=[],this.emitter=new X({onWillAddFirstListener:()=>this.onFirstListenerAdd(),onDidRemoveLastListener:()=>this.onLastListenerRemove()})}get event(){return this.emitter.event}add(e){const t={event:e,listener:null};return this.events.push(t),this.hasListeners&&this.hook(t),Ye(E_(()=>{this.hasListeners&&this.unhook(t);const s=this.events.indexOf(t);this.events.splice(s,1)}))}onFirstListenerAdd(){this.hasListeners=!0,this.events.forEach(e=>this.hook(e))}onLastListenerRemove(){this.hasListeners=!1,this.events.forEach(e=>this.unhook(e))}hook(e){e.listener=e.event(t=>this.emitter.fire(t))}unhook(e){var t;(t=e.listener)==null||t.dispose(),e.listener=null}dispose(){var e;this.emitter.dispose();for(const t of this.events)(e=t.listener)==null||e.dispose();this.events=[]}}class TN{constructor(){this.data=[]}wrapEvent(e,t,i){return(s,r,o)=>e(a=>{const l=this.data[this.data.length-1];if(!t){l?l.buffers.push(()=>s.call(r,a)):s.call(r,a);return}const c=l;if(!c){s.call(r,t(i,a));return}c.items??(c.items=[]),c.items.push(a),c.buffers.length===0&&l.buffers.push(()=>{c.reducedResult??(c.reducedResult=i?c.items.reduce(t,i):c.items.reduce(t)),s.call(r,c.reducedResult)})},void 0,o)}bufferEvents(e){const t={buffers:new Array};this.data.push(t);const i=e();return this.data.pop(),t.buffers.forEach(s=>s()),i}}class Coe{constructor(){this.listening=!1,this.inputEvent=Ee.None,this.inputEventListener=ee.None,this.emitter=new X({onDidAddFirstListener:()=>{this.listening=!0,this.inputEventListener=this.inputEvent(this.emitter.fire,this.emitter)},onDidRemoveLastListener:()=>{this.listening=!1,this.inputEventListener.dispose()}}),this.event=this.emitter.event}set input(e){this.inputEvent=e,this.listening&&(this.inputEventListener.dispose(),this.inputEventListener=e(this.emitter.fire,this.emitter))}dispose(){this.inputEventListener.dispose(),this.emitter.dispose()}}const Qwe=Object.freeze(function(n,e){const t=setTimeout(n.bind(e),0);return{dispose(){clearTimeout(t)}}});var xt;(function(n){function e(t){return t===n.None||t===n.Cancelled||t instanceof m2?!0:!t||typeof t!="object"?!1:typeof t.isCancellationRequested=="boolean"&&typeof t.onCancellationRequested=="function"}n.isCancellationToken=e,n.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Ee.None}),n.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:Qwe})})(xt||(xt={}));class m2{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?Qwe:(this._emitter||(this._emitter=new X),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}}let mn=class{constructor(e){this._token=void 0,this._parentListener=void 0,this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new m2),this._token}cancel(){this._token?this._token instanceof m2&&this._token.cancel():this._token=xt.Cancelled}dispose(e=!1){var t;e&&this.cancel(),(t=this._parentListener)==null||t.dispose(),this._token?this._token instanceof m2&&this._token.dispose():this._token=xt.None}};function kV(n){const e=new mn;return n.add({dispose(){e.cancel()}}),e.token}class QZ{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,t){this._keyCodeToStr[e]=t,this._strToKeyCode[t.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||0}}const _2=new QZ,EV=new QZ,IV=new QZ,Jwe=new Array(230),Lje=Object.create(null),kje=Object.create(null),JZ=[];for(let n=0;n<=193;n++)JZ[n]=-1;(function(){const n="",e=[[1,0,"None",0,"unknown",0,"VK_UNKNOWN",n,n],[1,1,"Hyper",0,n,0,n,n,n],[1,2,"Super",0,n,0,n,n,n],[1,3,"Fn",0,n,0,n,n,n],[1,4,"FnLock",0,n,0,n,n,n],[1,5,"Suspend",0,n,0,n,n,n],[1,6,"Resume",0,n,0,n,n,n],[1,7,"Turbo",0,n,0,n,n,n],[1,8,"Sleep",0,n,0,"VK_SLEEP",n,n],[1,9,"WakeUp",0,n,0,n,n,n],[0,10,"KeyA",31,"A",65,"VK_A",n,n],[0,11,"KeyB",32,"B",66,"VK_B",n,n],[0,12,"KeyC",33,"C",67,"VK_C",n,n],[0,13,"KeyD",34,"D",68,"VK_D",n,n],[0,14,"KeyE",35,"E",69,"VK_E",n,n],[0,15,"KeyF",36,"F",70,"VK_F",n,n],[0,16,"KeyG",37,"G",71,"VK_G",n,n],[0,17,"KeyH",38,"H",72,"VK_H",n,n],[0,18,"KeyI",39,"I",73,"VK_I",n,n],[0,19,"KeyJ",40,"J",74,"VK_J",n,n],[0,20,"KeyK",41,"K",75,"VK_K",n,n],[0,21,"KeyL",42,"L",76,"VK_L",n,n],[0,22,"KeyM",43,"M",77,"VK_M",n,n],[0,23,"KeyN",44,"N",78,"VK_N",n,n],[0,24,"KeyO",45,"O",79,"VK_O",n,n],[0,25,"KeyP",46,"P",80,"VK_P",n,n],[0,26,"KeyQ",47,"Q",81,"VK_Q",n,n],[0,27,"KeyR",48,"R",82,"VK_R",n,n],[0,28,"KeyS",49,"S",83,"VK_S",n,n],[0,29,"KeyT",50,"T",84,"VK_T",n,n],[0,30,"KeyU",51,"U",85,"VK_U",n,n],[0,31,"KeyV",52,"V",86,"VK_V",n,n],[0,32,"KeyW",53,"W",87,"VK_W",n,n],[0,33,"KeyX",54,"X",88,"VK_X",n,n],[0,34,"KeyY",55,"Y",89,"VK_Y",n,n],[0,35,"KeyZ",56,"Z",90,"VK_Z",n,n],[0,36,"Digit1",22,"1",49,"VK_1",n,n],[0,37,"Digit2",23,"2",50,"VK_2",n,n],[0,38,"Digit3",24,"3",51,"VK_3",n,n],[0,39,"Digit4",25,"4",52,"VK_4",n,n],[0,40,"Digit5",26,"5",53,"VK_5",n,n],[0,41,"Digit6",27,"6",54,"VK_6",n,n],[0,42,"Digit7",28,"7",55,"VK_7",n,n],[0,43,"Digit8",29,"8",56,"VK_8",n,n],[0,44,"Digit9",30,"9",57,"VK_9",n,n],[0,45,"Digit0",21,"0",48,"VK_0",n,n],[1,46,"Enter",3,"Enter",13,"VK_RETURN",n,n],[1,47,"Escape",9,"Escape",27,"VK_ESCAPE",n,n],[1,48,"Backspace",1,"Backspace",8,"VK_BACK",n,n],[1,49,"Tab",2,"Tab",9,"VK_TAB",n,n],[1,50,"Space",10,"Space",32,"VK_SPACE",n,n],[0,51,"Minus",88,"-",189,"VK_OEM_MINUS","-","OEM_MINUS"],[0,52,"Equal",86,"=",187,"VK_OEM_PLUS","=","OEM_PLUS"],[0,53,"BracketLeft",92,"[",219,"VK_OEM_4","[","OEM_4"],[0,54,"BracketRight",94,"]",221,"VK_OEM_6","]","OEM_6"],[0,55,"Backslash",93,"\\",220,"VK_OEM_5","\\","OEM_5"],[0,56,"IntlHash",0,n,0,n,n,n],[0,57,"Semicolon",85,";",186,"VK_OEM_1",";","OEM_1"],[0,58,"Quote",95,"'",222,"VK_OEM_7","'","OEM_7"],[0,59,"Backquote",91,"`",192,"VK_OEM_3","`","OEM_3"],[0,60,"Comma",87,",",188,"VK_OEM_COMMA",",","OEM_COMMA"],[0,61,"Period",89,".",190,"VK_OEM_PERIOD",".","OEM_PERIOD"],[0,62,"Slash",90,"/",191,"VK_OEM_2","/","OEM_2"],[1,63,"CapsLock",8,"CapsLock",20,"VK_CAPITAL",n,n],[1,64,"F1",59,"F1",112,"VK_F1",n,n],[1,65,"F2",60,"F2",113,"VK_F2",n,n],[1,66,"F3",61,"F3",114,"VK_F3",n,n],[1,67,"F4",62,"F4",115,"VK_F4",n,n],[1,68,"F5",63,"F5",116,"VK_F5",n,n],[1,69,"F6",64,"F6",117,"VK_F6",n,n],[1,70,"F7",65,"F7",118,"VK_F7",n,n],[1,71,"F8",66,"F8",119,"VK_F8",n,n],[1,72,"F9",67,"F9",120,"VK_F9",n,n],[1,73,"F10",68,"F10",121,"VK_F10",n,n],[1,74,"F11",69,"F11",122,"VK_F11",n,n],[1,75,"F12",70,"F12",123,"VK_F12",n,n],[1,76,"PrintScreen",0,n,0,n,n,n],[1,77,"ScrollLock",84,"ScrollLock",145,"VK_SCROLL",n,n],[1,78,"Pause",7,"PauseBreak",19,"VK_PAUSE",n,n],[1,79,"Insert",19,"Insert",45,"VK_INSERT",n,n],[1,80,"Home",14,"Home",36,"VK_HOME",n,n],[1,81,"PageUp",11,"PageUp",33,"VK_PRIOR",n,n],[1,82,"Delete",20,"Delete",46,"VK_DELETE",n,n],[1,83,"End",13,"End",35,"VK_END",n,n],[1,84,"PageDown",12,"PageDown",34,"VK_NEXT",n,n],[1,85,"ArrowRight",17,"RightArrow",39,"VK_RIGHT","Right",n],[1,86,"ArrowLeft",15,"LeftArrow",37,"VK_LEFT","Left",n],[1,87,"ArrowDown",18,"DownArrow",40,"VK_DOWN","Down",n],[1,88,"ArrowUp",16,"UpArrow",38,"VK_UP","Up",n],[1,89,"NumLock",83,"NumLock",144,"VK_NUMLOCK",n,n],[1,90,"NumpadDivide",113,"NumPad_Divide",111,"VK_DIVIDE",n,n],[1,91,"NumpadMultiply",108,"NumPad_Multiply",106,"VK_MULTIPLY",n,n],[1,92,"NumpadSubtract",111,"NumPad_Subtract",109,"VK_SUBTRACT",n,n],[1,93,"NumpadAdd",109,"NumPad_Add",107,"VK_ADD",n,n],[1,94,"NumpadEnter",3,n,0,n,n,n],[1,95,"Numpad1",99,"NumPad1",97,"VK_NUMPAD1",n,n],[1,96,"Numpad2",100,"NumPad2",98,"VK_NUMPAD2",n,n],[1,97,"Numpad3",101,"NumPad3",99,"VK_NUMPAD3",n,n],[1,98,"Numpad4",102,"NumPad4",100,"VK_NUMPAD4",n,n],[1,99,"Numpad5",103,"NumPad5",101,"VK_NUMPAD5",n,n],[1,100,"Numpad6",104,"NumPad6",102,"VK_NUMPAD6",n,n],[1,101,"Numpad7",105,"NumPad7",103,"VK_NUMPAD7",n,n],[1,102,"Numpad8",106,"NumPad8",104,"VK_NUMPAD8",n,n],[1,103,"Numpad9",107,"NumPad9",105,"VK_NUMPAD9",n,n],[1,104,"Numpad0",98,"NumPad0",96,"VK_NUMPAD0",n,n],[1,105,"NumpadDecimal",112,"NumPad_Decimal",110,"VK_DECIMAL",n,n],[0,106,"IntlBackslash",97,"OEM_102",226,"VK_OEM_102",n,n],[1,107,"ContextMenu",58,"ContextMenu",93,n,n,n],[1,108,"Power",0,n,0,n,n,n],[1,109,"NumpadEqual",0,n,0,n,n,n],[1,110,"F13",71,"F13",124,"VK_F13",n,n],[1,111,"F14",72,"F14",125,"VK_F14",n,n],[1,112,"F15",73,"F15",126,"VK_F15",n,n],[1,113,"F16",74,"F16",127,"VK_F16",n,n],[1,114,"F17",75,"F17",128,"VK_F17",n,n],[1,115,"F18",76,"F18",129,"VK_F18",n,n],[1,116,"F19",77,"F19",130,"VK_F19",n,n],[1,117,"F20",78,"F20",131,"VK_F20",n,n],[1,118,"F21",79,"F21",132,"VK_F21",n,n],[1,119,"F22",80,"F22",133,"VK_F22",n,n],[1,120,"F23",81,"F23",134,"VK_F23",n,n],[1,121,"F24",82,"F24",135,"VK_F24",n,n],[1,122,"Open",0,n,0,n,n,n],[1,123,"Help",0,n,0,n,n,n],[1,124,"Select",0,n,0,n,n,n],[1,125,"Again",0,n,0,n,n,n],[1,126,"Undo",0,n,0,n,n,n],[1,127,"Cut",0,n,0,n,n,n],[1,128,"Copy",0,n,0,n,n,n],[1,129,"Paste",0,n,0,n,n,n],[1,130,"Find",0,n,0,n,n,n],[1,131,"AudioVolumeMute",117,"AudioVolumeMute",173,"VK_VOLUME_MUTE",n,n],[1,132,"AudioVolumeUp",118,"AudioVolumeUp",175,"VK_VOLUME_UP",n,n],[1,133,"AudioVolumeDown",119,"AudioVolumeDown",174,"VK_VOLUME_DOWN",n,n],[1,134,"NumpadComma",110,"NumPad_Separator",108,"VK_SEPARATOR",n,n],[0,135,"IntlRo",115,"ABNT_C1",193,"VK_ABNT_C1",n,n],[1,136,"KanaMode",0,n,0,n,n,n],[0,137,"IntlYen",0,n,0,n,n,n],[1,138,"Convert",0,n,0,n,n,n],[1,139,"NonConvert",0,n,0,n,n,n],[1,140,"Lang1",0,n,0,n,n,n],[1,141,"Lang2",0,n,0,n,n,n],[1,142,"Lang3",0,n,0,n,n,n],[1,143,"Lang4",0,n,0,n,n,n],[1,144,"Lang5",0,n,0,n,n,n],[1,145,"Abort",0,n,0,n,n,n],[1,146,"Props",0,n,0,n,n,n],[1,147,"NumpadParenLeft",0,n,0,n,n,n],[1,148,"NumpadParenRight",0,n,0,n,n,n],[1,149,"NumpadBackspace",0,n,0,n,n,n],[1,150,"NumpadMemoryStore",0,n,0,n,n,n],[1,151,"NumpadMemoryRecall",0,n,0,n,n,n],[1,152,"NumpadMemoryClear",0,n,0,n,n,n],[1,153,"NumpadMemoryAdd",0,n,0,n,n,n],[1,154,"NumpadMemorySubtract",0,n,0,n,n,n],[1,155,"NumpadClear",131,"Clear",12,"VK_CLEAR",n,n],[1,156,"NumpadClearEntry",0,n,0,n,n,n],[1,0,n,5,"Ctrl",17,"VK_CONTROL",n,n],[1,0,n,4,"Shift",16,"VK_SHIFT",n,n],[1,0,n,6,"Alt",18,"VK_MENU",n,n],[1,0,n,57,"Meta",91,"VK_COMMAND",n,n],[1,157,"ControlLeft",5,n,0,"VK_LCONTROL",n,n],[1,158,"ShiftLeft",4,n,0,"VK_LSHIFT",n,n],[1,159,"AltLeft",6,n,0,"VK_LMENU",n,n],[1,160,"MetaLeft",57,n,0,"VK_LWIN",n,n],[1,161,"ControlRight",5,n,0,"VK_RCONTROL",n,n],[1,162,"ShiftRight",4,n,0,"VK_RSHIFT",n,n],[1,163,"AltRight",6,n,0,"VK_RMENU",n,n],[1,164,"MetaRight",57,n,0,"VK_RWIN",n,n],[1,165,"BrightnessUp",0,n,0,n,n,n],[1,166,"BrightnessDown",0,n,0,n,n,n],[1,167,"MediaPlay",0,n,0,n,n,n],[1,168,"MediaRecord",0,n,0,n,n,n],[1,169,"MediaFastForward",0,n,0,n,n,n],[1,170,"MediaRewind",0,n,0,n,n,n],[1,171,"MediaTrackNext",124,"MediaTrackNext",176,"VK_MEDIA_NEXT_TRACK",n,n],[1,172,"MediaTrackPrevious",125,"MediaTrackPrevious",177,"VK_MEDIA_PREV_TRACK",n,n],[1,173,"MediaStop",126,"MediaStop",178,"VK_MEDIA_STOP",n,n],[1,174,"Eject",0,n,0,n,n,n],[1,175,"MediaPlayPause",127,"MediaPlayPause",179,"VK_MEDIA_PLAY_PAUSE",n,n],[1,176,"MediaSelect",128,"LaunchMediaPlayer",181,"VK_MEDIA_LAUNCH_MEDIA_SELECT",n,n],[1,177,"LaunchMail",129,"LaunchMail",180,"VK_MEDIA_LAUNCH_MAIL",n,n],[1,178,"LaunchApp2",130,"LaunchApp2",183,"VK_MEDIA_LAUNCH_APP2",n,n],[1,179,"LaunchApp1",0,n,0,"VK_MEDIA_LAUNCH_APP1",n,n],[1,180,"SelectTask",0,n,0,n,n,n],[1,181,"LaunchScreenSaver",0,n,0,n,n,n],[1,182,"BrowserSearch",120,"BrowserSearch",170,"VK_BROWSER_SEARCH",n,n],[1,183,"BrowserHome",121,"BrowserHome",172,"VK_BROWSER_HOME",n,n],[1,184,"BrowserBack",122,"BrowserBack",166,"VK_BROWSER_BACK",n,n],[1,185,"BrowserForward",123,"BrowserForward",167,"VK_BROWSER_FORWARD",n,n],[1,186,"BrowserStop",0,n,0,"VK_BROWSER_STOP",n,n],[1,187,"BrowserRefresh",0,n,0,"VK_BROWSER_REFRESH",n,n],[1,188,"BrowserFavorites",0,n,0,"VK_BROWSER_FAVORITES",n,n],[1,189,"ZoomToggle",0,n,0,n,n,n],[1,190,"MailReply",0,n,0,n,n,n],[1,191,"MailForward",0,n,0,n,n,n],[1,192,"MailSend",0,n,0,n,n,n],[1,0,n,114,"KeyInComposition",229,n,n,n],[1,0,n,116,"ABNT_C2",194,"VK_ABNT_C2",n,n],[1,0,n,96,"OEM_8",223,"VK_OEM_8",n,n],[1,0,n,0,n,0,"VK_KANA",n,n],[1,0,n,0,n,0,"VK_HANGUL",n,n],[1,0,n,0,n,0,"VK_JUNJA",n,n],[1,0,n,0,n,0,"VK_FINAL",n,n],[1,0,n,0,n,0,"VK_HANJA",n,n],[1,0,n,0,n,0,"VK_KANJI",n,n],[1,0,n,0,n,0,"VK_CONVERT",n,n],[1,0,n,0,n,0,"VK_NONCONVERT",n,n],[1,0,n,0,n,0,"VK_ACCEPT",n,n],[1,0,n,0,n,0,"VK_MODECHANGE",n,n],[1,0,n,0,n,0,"VK_SELECT",n,n],[1,0,n,0,n,0,"VK_PRINT",n,n],[1,0,n,0,n,0,"VK_EXECUTE",n,n],[1,0,n,0,n,0,"VK_SNAPSHOT",n,n],[1,0,n,0,n,0,"VK_HELP",n,n],[1,0,n,0,n,0,"VK_APPS",n,n],[1,0,n,0,n,0,"VK_PROCESSKEY",n,n],[1,0,n,0,n,0,"VK_PACKET",n,n],[1,0,n,0,n,0,"VK_DBE_SBCSCHAR",n,n],[1,0,n,0,n,0,"VK_DBE_DBCSCHAR",n,n],[1,0,n,0,n,0,"VK_ATTN",n,n],[1,0,n,0,n,0,"VK_CRSEL",n,n],[1,0,n,0,n,0,"VK_EXSEL",n,n],[1,0,n,0,n,0,"VK_EREOF",n,n],[1,0,n,0,n,0,"VK_PLAY",n,n],[1,0,n,0,n,0,"VK_ZOOM",n,n],[1,0,n,0,n,0,"VK_NONAME",n,n],[1,0,n,0,n,0,"VK_PA1",n,n],[1,0,n,0,n,0,"VK_OEM_CLEAR",n,n]],t=[],i=[];for(const s of e){const[r,o,a,l,c,d,u,h,f]=s;if(i[o]||(i[o]=!0,Lje[a]=o,kje[a.toLowerCase()]=o,r&&(JZ[o]=l)),!t[l]){if(t[l]=!0,!c)throw new Error(`String representation missing for key code ${l} around scan code ${a}`);_2.define(l,c),EV.define(l,h||c),IV.define(l,f||h||c)}d&&(Jwe[d]=l)}})();var ag;(function(n){function e(a){return _2.keyCodeToStr(a)}n.toString=e;function t(a){return _2.strToKeyCode(a)}n.fromString=t;function i(a){return EV.keyCodeToStr(a)}n.toUserSettingsUS=i;function s(a){return IV.keyCodeToStr(a)}n.toUserSettingsGeneral=s;function r(a){return EV.strToKeyCode(a)||IV.strToKeyCode(a)}n.fromUserSettings=r;function o(a){if(a>=98&&a<=113)return null;switch(a){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return _2.keyCodeToStr(a)}n.toElectronAccelerator=o})(ag||(ag={}));function as(n,e){const t=(e&65535)<<16>>>0;return(n|t)>>>0}var yoe={};let yy;const T9=globalThis.vscode;var hfe;if(typeof T9<"u"&&typeof T9.process<"u"){const n=T9.process;yy={get platform(){return n.platform},get arch(){return n.arch},get env(){return n.env},cwd(){return n.cwd()}}}else typeof process<"u"&&typeof((hfe=process==null?void 0:process.versions)==null?void 0:hfe.node)=="string"?yy={get platform(){return process.platform},get arch(){return process.arch},get env(){return yoe},cwd(){return yoe.VSCODE_CWD||process.cwd()}}:yy={get platform(){return wr?"win32":Bt?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};const nP=yy.cwd,DV=yy.env,Eje=yy.platform,Ije=65,Dje=97,Nje=90,Tje=122,Km=46,Xr=47,_l=92,Np=58,Rje=63;class e0e extends Error{constructor(e,t,i){let s;typeof t=="string"&&t.indexOf("not ")===0?(s="must not be",t=t.replace(/^not /,"")):s="must be";const r=e.indexOf(".")!==-1?"property":"argument";let o=`The "${e}" ${r} ${s} of type ${t}`;o+=`. Received type ${typeof i}`,super(o),this.code="ERR_INVALID_ARG_TYPE"}}function Aje(n,e){if(n===null||typeof n!="object")throw new e0e(e,"Object",n)}function Ws(n,e){if(typeof n!="string")throw new e0e(e,"string",n)}const dp=Eje==="win32";function Ci(n){return n===Xr||n===_l}function NV(n){return n===Xr}function Tp(n){return n>=Ije&&n<=Nje||n>=Dje&&n<=Tje}function sP(n,e,t,i){let s="",r=0,o=-1,a=0,l=0;for(let c=0;c<=n.length;++c){if(c<n.length)l=n.charCodeAt(c);else{if(i(l))break;l=Xr}if(i(l)){if(!(o===c-1||a===1))if(a===2){if(s.length<2||r!==2||s.charCodeAt(s.length-1)!==Km||s.charCodeAt(s.length-2)!==Km){if(s.length>2){const d=s.lastIndexOf(t);d===-1?(s="",r=0):(s=s.slice(0,d),r=s.length-1-s.lastIndexOf(t)),o=c,a=0;continue}else if(s.length!==0){s="",r=0,o=c,a=0;continue}}e&&(s+=s.length>0?`${t}..`:"..",r=2)}else s.length>0?s+=`${t}${n.slice(o+1,c)}`:s=n.slice(o+1,c),r=c-o-1;o=c,a=0}else l===Km&&a!==-1?++a:a=-1}return s}function Mje(n){return n?`${n[0]==="."?"":"."}${n}`:""}function t0e(n,e){Aje(e,"pathObject");const t=e.dir||e.root,i=e.base||`${e.name||""}${Mje(e.ext)}`;return t?t===e.root?`${t}${i}`:`${t}${n}${i}`:i}const la={resolve(...n){let e="",t="",i=!1;for(let s=n.length-1;s>=-1;s--){let r;if(s>=0){if(r=n[s],Ws(r,`paths[${s}]`),r.length===0)continue}else e.length===0?r=nP():(r=DV[`=${e}`]||nP(),(r===void 0||r.slice(0,2).toLowerCase()!==e.toLowerCase()&&r.charCodeAt(2)===_l)&&(r=`${e}\\`));const o=r.length;let a=0,l="",c=!1;const d=r.charCodeAt(0);if(o===1)Ci(d)&&(a=1,c=!0);else if(Ci(d))if(c=!0,Ci(r.charCodeAt(1))){let u=2,h=u;for(;u<o&&!Ci(r.charCodeAt(u));)u++;if(u<o&&u!==h){const f=r.slice(h,u);for(h=u;u<o&&Ci(r.charCodeAt(u));)u++;if(u<o&&u!==h){for(h=u;u<o&&!Ci(r.charCodeAt(u));)u++;(u===o||u!==h)&&(l=`\\\\${f}\\${r.slice(h,u)}`,a=u)}}}else a=1;else Tp(d)&&r.charCodeAt(1)===Np&&(l=r.slice(0,2),a=2,o>2&&Ci(r.charCodeAt(2))&&(c=!0,a=3));if(l.length>0)if(e.length>0){if(l.toLowerCase()!==e.toLowerCase())continue}else e=l;if(i){if(e.length>0)break}else if(t=`${r.slice(a)}\\${t}`,i=c,c&&e.length>0)break}return t=sP(t,!i,"\\",Ci),i?`${e}\\${t}`:`${e}${t}`||"."},normalize(n){Ws(n,"path");const e=n.length;if(e===0)return".";let t=0,i,s=!1;const r=n.charCodeAt(0);if(e===1)return NV(r)?"\\":n;if(Ci(r))if(s=!0,Ci(n.charCodeAt(1))){let a=2,l=a;for(;a<e&&!Ci(n.charCodeAt(a));)a++;if(a<e&&a!==l){const c=n.slice(l,a);for(l=a;a<e&&Ci(n.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!Ci(n.charCodeAt(a));)a++;if(a===e)return`\\\\${c}\\${n.slice(l)}\\`;a!==l&&(i=`\\\\${c}\\${n.slice(l,a)}`,t=a)}}}else t=1;else Tp(r)&&n.charCodeAt(1)===Np&&(i=n.slice(0,2),t=2,e>2&&Ci(n.charCodeAt(2))&&(s=!0,t=3));let o=t<e?sP(n.slice(t),!s,"\\",Ci):"";return o.length===0&&!s&&(o="."),o.length>0&&Ci(n.charCodeAt(e-1))&&(o+="\\"),i===void 0?s?`\\${o}`:o:s?`${i}\\${o}`:`${i}${o}`},isAbsolute(n){Ws(n,"path");const e=n.length;if(e===0)return!1;const t=n.charCodeAt(0);return Ci(t)||e>2&&Tp(t)&&n.charCodeAt(1)===Np&&Ci(n.charCodeAt(2))},join(...n){if(n.length===0)return".";let e,t;for(let r=0;r<n.length;++r){const o=n[r];Ws(o,"path"),o.length>0&&(e===void 0?e=t=o:e+=`\\${o}`)}if(e===void 0)return".";let i=!0,s=0;if(typeof t=="string"&&Ci(t.charCodeAt(0))){++s;const r=t.length;r>1&&Ci(t.charCodeAt(1))&&(++s,r>2&&(Ci(t.charCodeAt(2))?++s:i=!1))}if(i){for(;s<e.length&&Ci(e.charCodeAt(s));)s++;s>=2&&(e=`\\${e.slice(s)}`)}return la.normalize(e)},relative(n,e){if(Ws(n,"from"),Ws(e,"to"),n===e)return"";const t=la.resolve(n),i=la.resolve(e);if(t===i||(n=t.toLowerCase(),e=i.toLowerCase(),n===e))return"";let s=0;for(;s<n.length&&n.charCodeAt(s)===_l;)s++;let r=n.length;for(;r-1>s&&n.charCodeAt(r-1)===_l;)r--;const o=r-s;let a=0;for(;a<e.length&&e.charCodeAt(a)===_l;)a++;let l=e.length;for(;l-1>a&&e.charCodeAt(l-1)===_l;)l--;const c=l-a,d=o<c?o:c;let u=-1,h=0;for(;h<d;h++){const g=n.charCodeAt(s+h);if(g!==e.charCodeAt(a+h))break;g===_l&&(u=h)}if(h!==d){if(u===-1)return i}else{if(c>d){if(e.charCodeAt(a+h)===_l)return i.slice(a+h+1);if(h===2)return i.slice(a+h)}o>d&&(n.charCodeAt(s+h)===_l?u=h:h===2&&(u=3)),u===-1&&(u=0)}let f="";for(h=s+u+1;h<=r;++h)(h===r||n.charCodeAt(h)===_l)&&(f+=f.length===0?"..":"\\..");return a+=u,f.length>0?`${f}${i.slice(a,l)}`:(i.charCodeAt(a)===_l&&++a,i.slice(a,l))},toNamespacedPath(n){if(typeof n!="string"||n.length===0)return n;const e=la.resolve(n);if(e.length<=2)return n;if(e.charCodeAt(0)===_l){if(e.charCodeAt(1)===_l){const t=e.charCodeAt(2);if(t!==Rje&&t!==Km)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(Tp(e.charCodeAt(0))&&e.charCodeAt(1)===Np&&e.charCodeAt(2)===_l)return`\\\\?\\${e}`;return n},dirname(n){Ws(n,"path");const e=n.length;if(e===0)return".";let t=-1,i=0;const s=n.charCodeAt(0);if(e===1)return Ci(s)?n:".";if(Ci(s)){if(t=i=1,Ci(n.charCodeAt(1))){let a=2,l=a;for(;a<e&&!Ci(n.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&Ci(n.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!Ci(n.charCodeAt(a));)a++;if(a===e)return n;a!==l&&(t=i=a+1)}}}}else Tp(s)&&n.charCodeAt(1)===Np&&(t=e>2&&Ci(n.charCodeAt(2))?3:2,i=t);let r=-1,o=!0;for(let a=e-1;a>=i;--a)if(Ci(n.charCodeAt(a))){if(!o){r=a;break}}else o=!1;if(r===-1){if(t===-1)return".";r=t}return n.slice(0,r)},basename(n,e){e!==void 0&&Ws(e,"suffix"),Ws(n,"path");let t=0,i=-1,s=!0,r;if(n.length>=2&&Tp(n.charCodeAt(0))&&n.charCodeAt(1)===Np&&(t=2),e!==void 0&&e.length>0&&e.length<=n.length){if(e===n)return"";let o=e.length-1,a=-1;for(r=n.length-1;r>=t;--r){const l=n.charCodeAt(r);if(Ci(l)){if(!s){t=r+1;break}}else a===-1&&(s=!1,a=r+1),o>=0&&(l===e.charCodeAt(o)?--o===-1&&(i=r):(o=-1,i=a))}return t===i?i=a:i===-1&&(i=n.length),n.slice(t,i)}for(r=n.length-1;r>=t;--r)if(Ci(n.charCodeAt(r))){if(!s){t=r+1;break}}else i===-1&&(s=!1,i=r+1);return i===-1?"":n.slice(t,i)},extname(n){Ws(n,"path");let e=0,t=-1,i=0,s=-1,r=!0,o=0;n.length>=2&&n.charCodeAt(1)===Np&&Tp(n.charCodeAt(0))&&(e=i=2);for(let a=n.length-1;a>=e;--a){const l=n.charCodeAt(a);if(Ci(l)){if(!r){i=a+1;break}continue}s===-1&&(r=!1,s=a+1),l===Km?t===-1?t=a:o!==1&&(o=1):t!==-1&&(o=-1)}return t===-1||s===-1||o===0||o===1&&t===s-1&&t===i+1?"":n.slice(t,s)},format:t0e.bind(null,"\\"),parse(n){Ws(n,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(n.length===0)return e;const t=n.length;let i=0,s=n.charCodeAt(0);if(t===1)return Ci(s)?(e.root=e.dir=n,e):(e.base=e.name=n,e);if(Ci(s)){if(i=1,Ci(n.charCodeAt(1))){let u=2,h=u;for(;u<t&&!Ci(n.charCodeAt(u));)u++;if(u<t&&u!==h){for(h=u;u<t&&Ci(n.charCodeAt(u));)u++;if(u<t&&u!==h){for(h=u;u<t&&!Ci(n.charCodeAt(u));)u++;u===t?i=u:u!==h&&(i=u+1)}}}}else if(Tp(s)&&n.charCodeAt(1)===Np){if(t<=2)return e.root=e.dir=n,e;if(i=2,Ci(n.charCodeAt(2))){if(t===3)return e.root=e.dir=n,e;i=3}}i>0&&(e.root=n.slice(0,i));let r=-1,o=i,a=-1,l=!0,c=n.length-1,d=0;for(;c>=i;--c){if(s=n.charCodeAt(c),Ci(s)){if(!l){o=c+1;break}continue}a===-1&&(l=!1,a=c+1),s===Km?r===-1?r=c:d!==1&&(d=1):r!==-1&&(d=-1)}return a!==-1&&(r===-1||d===0||d===1&&r===a-1&&r===o+1?e.base=e.name=n.slice(o,a):(e.name=n.slice(o,r),e.base=n.slice(o,a),e.ext=n.slice(r,a))),o>0&&o!==i?e.dir=n.slice(0,o-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null},Pje=(()=>{if(dp){const n=/\\/g;return()=>{const e=nP().replace(n,"/");return e.slice(e.indexOf("/"))}}return()=>nP()})(),Qn={resolve(...n){let e="",t=!1;for(let i=n.length-1;i>=-1&&!t;i--){const s=i>=0?n[i]:Pje();Ws(s,`paths[${i}]`),s.length!==0&&(e=`${s}/${e}`,t=s.charCodeAt(0)===Xr)}return e=sP(e,!t,"/",NV),t?`/${e}`:e.length>0?e:"."},normalize(n){if(Ws(n,"path"),n.length===0)return".";const e=n.charCodeAt(0)===Xr,t=n.charCodeAt(n.length-1)===Xr;return n=sP(n,!e,"/",NV),n.length===0?e?"/":t?"./":".":(t&&(n+="/"),e?`/${n}`:n)},isAbsolute(n){return Ws(n,"path"),n.length>0&&n.charCodeAt(0)===Xr},join(...n){if(n.length===0)return".";let e;for(let t=0;t<n.length;++t){const i=n[t];Ws(i,"path"),i.length>0&&(e===void 0?e=i:e+=`/${i}`)}return e===void 0?".":Qn.normalize(e)},relative(n,e){if(Ws(n,"from"),Ws(e,"to"),n===e||(n=Qn.resolve(n),e=Qn.resolve(e),n===e))return"";const t=1,i=n.length,s=i-t,r=1,o=e.length-r,a=s<o?s:o;let l=-1,c=0;for(;c<a;c++){const u=n.charCodeAt(t+c);if(u!==e.charCodeAt(r+c))break;u===Xr&&(l=c)}if(c===a)if(o>a){if(e.charCodeAt(r+c)===Xr)return e.slice(r+c+1);if(c===0)return e.slice(r+c)}else s>a&&(n.charCodeAt(t+c)===Xr?l=c:c===0&&(l=0));let d="";for(c=t+l+1;c<=i;++c)(c===i||n.charCodeAt(c)===Xr)&&(d+=d.length===0?"..":"/..");return`${d}${e.slice(r+l)}`},toNamespacedPath(n){return n},dirname(n){if(Ws(n,"path"),n.length===0)return".";const e=n.charCodeAt(0)===Xr;let t=-1,i=!0;for(let s=n.length-1;s>=1;--s)if(n.charCodeAt(s)===Xr){if(!i){t=s;break}}else i=!1;return t===-1?e?"/":".":e&&t===1?"//":n.slice(0,t)},basename(n,e){e!==void 0&&Ws(e,"ext"),Ws(n,"path");let t=0,i=-1,s=!0,r;if(e!==void 0&&e.length>0&&e.length<=n.length){if(e===n)return"";let o=e.length-1,a=-1;for(r=n.length-1;r>=0;--r){const l=n.charCodeAt(r);if(l===Xr){if(!s){t=r+1;break}}else a===-1&&(s=!1,a=r+1),o>=0&&(l===e.charCodeAt(o)?--o===-1&&(i=r):(o=-1,i=a))}return t===i?i=a:i===-1&&(i=n.length),n.slice(t,i)}for(r=n.length-1;r>=0;--r)if(n.charCodeAt(r)===Xr){if(!s){t=r+1;break}}else i===-1&&(s=!1,i=r+1);return i===-1?"":n.slice(t,i)},extname(n){Ws(n,"path");let e=-1,t=0,i=-1,s=!0,r=0;for(let o=n.length-1;o>=0;--o){const a=n.charCodeAt(o);if(a===Xr){if(!s){t=o+1;break}continue}i===-1&&(s=!1,i=o+1),a===Km?e===-1?e=o:r!==1&&(r=1):e!==-1&&(r=-1)}return e===-1||i===-1||r===0||r===1&&e===i-1&&e===t+1?"":n.slice(e,i)},format:t0e.bind(null,"/"),parse(n){Ws(n,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(n.length===0)return e;const t=n.charCodeAt(0)===Xr;let i;t?(e.root="/",i=1):i=0;let s=-1,r=0,o=-1,a=!0,l=n.length-1,c=0;for(;l>=i;--l){const d=n.charCodeAt(l);if(d===Xr){if(!a){r=l+1;break}continue}o===-1&&(a=!1,o=l+1),d===Km?s===-1?s=l:c!==1&&(c=1):s!==-1&&(c=-1)}if(o!==-1){const d=r===0&&t?1:r;s===-1||c===0||c===1&&s===o-1&&s===r+1?e.base=e.name=n.slice(d,o):(e.name=n.slice(d,s),e.base=n.slice(d,o),e.ext=n.slice(s,o))}return r>0?e.dir=n.slice(0,r-1):t&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};Qn.win32=la.win32=la;Qn.posix=la.posix=Qn;const i0e=dp?la.normalize:Qn.normalize,Oje=dp?la.join:Qn.join,Fje=dp?la.resolve:Qn.resolve,Bje=dp?la.relative:Qn.relative,n0e=dp?la.dirname:Qn.dirname,qm=dp?la.basename:Qn.basename,Wje=dp?la.extname:Qn.extname,Iu=dp?la.sep:Qn.sep,Hje=/^\w[\w\d+.-]*$/,Vje=/^\//,zje=/^\/\//;function Uje(n,e){if(!n.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${n.authority}", path: "${n.path}", query: "${n.query}", fragment: "${n.fragment}"}`);if(n.scheme&&!Hje.test(n.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(n.path){if(n.authority){if(!Vje.test(n.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(zje.test(n.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function $je(n,e){return!n&&!e?"file":n}function jje(n,e){switch(n){case"https":case"http":case"file":e?e[0]!==fu&&(e=fu+e):e=fu;break}return e}const Yn="",fu="/",Kje=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class Xe{static isUri(e){return e instanceof Xe?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}constructor(e,t,i,s,r,o=!1){typeof e=="object"?(this.scheme=e.scheme||Yn,this.authority=e.authority||Yn,this.path=e.path||Yn,this.query=e.query||Yn,this.fragment=e.fragment||Yn):(this.scheme=$je(e,o),this.authority=t||Yn,this.path=jje(this.scheme,i||Yn),this.query=s||Yn,this.fragment=r||Yn,Uje(this,o))}get fsPath(){return rP(this,!1)}with(e){if(!e)return this;let{scheme:t,authority:i,path:s,query:r,fragment:o}=e;return t===void 0?t=this.scheme:t===null&&(t=Yn),i===void 0?i=this.authority:i===null&&(i=Yn),s===void 0?s=this.path:s===null&&(s=Yn),r===void 0?r=this.query:r===null&&(r=Yn),o===void 0?o=this.fragment:o===null&&(o=Yn),t===this.scheme&&i===this.authority&&s===this.path&&r===this.query&&o===this.fragment?this:new yC(t,i,s,r,o)}static parse(e,t=!1){const i=Kje.exec(e);return i?new yC(i[2]||Yn,MR(i[4]||Yn),MR(i[5]||Yn),MR(i[7]||Yn),MR(i[9]||Yn),t):new yC(Yn,Yn,Yn,Yn,Yn)}static file(e){let t=Yn;if(wr&&(e=e.replace(/\\/g,fu)),e[0]===fu&&e[1]===fu){const i=e.indexOf(fu,2);i===-1?(t=e.substring(2),e=fu):(t=e.substring(2,i),e=e.substring(i)||fu)}return new yC("file",t,e,Yn,Yn)}static from(e,t){return new yC(e.scheme,e.authority,e.path,e.query,e.fragment,t)}static joinPath(e,...t){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let i;return wr&&e.scheme==="file"?i=Xe.file(la.join(rP(e,!0),...t)).path:i=Qn.join(e.path,...t),e.with({path:i})}toString(e=!1){return TV(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof Xe)return e;{const t=new yC(e);return t._formatted=e.external??null,t._fsPath=e._sep===s0e?e.fsPath??null:null,t}}else return e}}const s0e=wr?1:void 0;let yC=class extends Xe{constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=rP(this,!1)),this._fsPath}toString(e=!1){return e?TV(this,!0):(this._formatted||(this._formatted=TV(this,!1)),this._formatted)}toJSON(){const e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=s0e),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}};const r0e={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function Soe(n,e,t){let i,s=-1;for(let r=0;r<n.length;r++){const o=n.charCodeAt(r);if(o>=97&&o<=122||o>=65&&o<=90||o>=48&&o<=57||o===45||o===46||o===95||o===126||e&&o===47||t&&o===91||t&&o===93||t&&o===58)s!==-1&&(i+=encodeURIComponent(n.substring(s,r)),s=-1),i!==void 0&&(i+=n.charAt(r));else{i===void 0&&(i=n.substr(0,r));const a=r0e[o];a!==void 0?(s!==-1&&(i+=encodeURIComponent(n.substring(s,r)),s=-1),i+=a):s===-1&&(s=r)}}return s!==-1&&(i+=encodeURIComponent(n.substring(s))),i!==void 0?i:n}function qje(n){let e;for(let t=0;t<n.length;t++){const i=n.charCodeAt(t);i===35||i===63?(e===void 0&&(e=n.substr(0,t)),e+=r0e[i]):e!==void 0&&(e+=n[t])}return e!==void 0?e:n}function rP(n,e){let t;return n.authority&&n.path.length>1&&n.scheme==="file"?t=`//${n.authority}${n.path}`:n.path.charCodeAt(0)===47&&(n.path.charCodeAt(1)>=65&&n.path.charCodeAt(1)<=90||n.path.charCodeAt(1)>=97&&n.path.charCodeAt(1)<=122)&&n.path.charCodeAt(2)===58?e?t=n.path.substr(1):t=n.path[1].toLowerCase()+n.path.substr(2):t=n.path,wr&&(t=t.replace(/\//g,"\\")),t}function TV(n,e){const t=e?qje:Soe;let i="",{scheme:s,authority:r,path:o,query:a,fragment:l}=n;if(s&&(i+=s,i+=":"),(r||s==="file")&&(i+=fu,i+=fu),r){let c=r.indexOf("@");if(c!==-1){const d=r.substr(0,c);r=r.substr(c+1),c=d.lastIndexOf(":"),c===-1?i+=t(d,!1,!1):(i+=t(d.substr(0,c),!1,!1),i+=":",i+=t(d.substr(c+1),!1,!0)),i+="@"}r=r.toLowerCase(),c=r.lastIndexOf(":"),c===-1?i+=t(r,!1,!0):(i+=t(r.substr(0,c),!1,!0),i+=r.substr(c))}if(o){if(o.length>=3&&o.charCodeAt(0)===47&&o.charCodeAt(2)===58){const c=o.charCodeAt(1);c>=65&&c<=90&&(o=`/${String.fromCharCode(c+32)}:${o.substr(3)}`)}else if(o.length>=2&&o.charCodeAt(1)===58){const c=o.charCodeAt(0);c>=65&&c<=90&&(o=`${String.fromCharCode(c+32)}:${o.substr(2)}`)}i+=t(o,!0,!1)}return a&&(i+="?",i+=t(a,!1,!1)),l&&(i+="#",i+=e?l:Soe(l,!1,!1)),i}function o0e(n){try{return decodeURIComponent(n)}catch{return n.length>3?n.substr(0,3)+o0e(n.substr(3)):n}}const xoe=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function MR(n){return n.match(xoe)?n.replace(xoe,e=>o0e(e)):n}let Y=class zv{constructor(e,t){this.lineNumber=e,this.column=t}with(e=this.lineNumber,t=this.column){return e===this.lineNumber&&t===this.column?this:new zv(e,t)}delta(e=0,t=0){return this.with(this.lineNumber+e,this.column+t)}equals(e){return zv.equals(this,e)}static equals(e,t){return!e&&!t?!0:!!e&&!!t&&e.lineNumber===t.lineNumber&&e.column===t.column}isBefore(e){return zv.isBefore(this,e)}static isBefore(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<t.column}isBeforeOrEqual(e){return zv.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<=t.column}static compare(e,t){const i=e.lineNumber|0,s=t.lineNumber|0;if(i===s){const r=e.column|0,o=t.column|0;return r-o}return i-s}clone(){return new zv(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new zv(e.lineNumber,e.column)}static isIPosition(e){return e&&typeof e.lineNumber=="number"&&typeof e.column=="number"}toJSON(){return{lineNumber:this.lineNumber,column:this.column}}},M=class Zs{constructor(e,t,i,s){e>i||e===i&&t>s?(this.startLineNumber=i,this.startColumn=s,this.endLineNumber=e,this.endColumn=t):(this.startLineNumber=e,this.startColumn=t,this.endLineNumber=i,this.endColumn=s)}isEmpty(){return Zs.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return Zs.containsPosition(this,e)}static containsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<e.startColumn||t.lineNumber===e.endLineNumber&&t.column>e.endColumn)}static strictContainsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<=e.startColumn||t.lineNumber===e.endLineNumber&&t.column>=e.endColumn)}containsRange(e){return Zs.containsRange(this,e)}static containsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>e.endColumn)}strictContainsRange(e){return Zs.strictContainsRange(this,e)}static strictContainsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<=e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>=e.endColumn)}plusRange(e){return Zs.plusRange(this,e)}static plusRange(e,t){let i,s,r,o;return t.startLineNumber<e.startLineNumber?(i=t.startLineNumber,s=t.startColumn):t.startLineNumber===e.startLineNumber?(i=t.startLineNumber,s=Math.min(t.startColumn,e.startColumn)):(i=e.startLineNumber,s=e.startColumn),t.endLineNumber>e.endLineNumber?(r=t.endLineNumber,o=t.endColumn):t.endLineNumber===e.endLineNumber?(r=t.endLineNumber,o=Math.max(t.endColumn,e.endColumn)):(r=e.endLineNumber,o=e.endColumn),new Zs(i,s,r,o)}intersectRanges(e){return Zs.intersectRanges(this,e)}static intersectRanges(e,t){let i=e.startLineNumber,s=e.startColumn,r=e.endLineNumber,o=e.endColumn;const a=t.startLineNumber,l=t.startColumn,c=t.endLineNumber,d=t.endColumn;return i<a?(i=a,s=l):i===a&&(s=Math.max(s,l)),r>c?(r=c,o=d):r===c&&(o=Math.min(o,d)),i>r||i===r&&s>o?null:new Zs(i,s,r,o)}equalsRange(e){return Zs.equalsRange(this,e)}static equalsRange(e,t){return!e&&!t?!0:!!e&&!!t&&e.startLineNumber===t.startLineNumber&&e.startColumn===t.startColumn&&e.endLineNumber===t.endLineNumber&&e.endColumn===t.endColumn}getEndPosition(){return Zs.getEndPosition(this)}static getEndPosition(e){return new Y(e.endLineNumber,e.endColumn)}getStartPosition(){return Zs.getStartPosition(this)}static getStartPosition(e){return new Y(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,t){return new Zs(this.startLineNumber,this.startColumn,e,t)}setStartPosition(e,t){return new Zs(e,t,this.endLineNumber,this.endColumn)}collapseToStart(){return Zs.collapseToStart(this)}static collapseToStart(e){return new Zs(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}collapseToEnd(){return Zs.collapseToEnd(this)}static collapseToEnd(e){return new Zs(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn)}delta(e){return new Zs(this.startLineNumber+e,this.startColumn,this.endLineNumber+e,this.endColumn)}static fromPositions(e,t=e){return new Zs(e.lineNumber,e.column,t.lineNumber,t.column)}static lift(e){return e?new Zs(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return e&&typeof e.startLineNumber=="number"&&typeof e.startColumn=="number"&&typeof e.endLineNumber=="number"&&typeof e.endColumn=="number"}static areIntersectingOrTouching(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<e.startColumn)}static areIntersecting(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<=t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<=e.startColumn)}static compareRangesUsingStarts(e,t){if(e&&t){const r=e.startLineNumber|0,o=t.startLineNumber|0;if(r===o){const a=e.startColumn|0,l=t.startColumn|0;if(a===l){const c=e.endLineNumber|0,d=t.endLineNumber|0;if(c===d){const u=e.endColumn|0,h=t.endColumn|0;return u-h}return c-d}return a-l}return r-o}return(e?1:0)-(t?1:0)}static compareRangesUsingEnds(e,t){return e.endLineNumber===t.endLineNumber?e.endColumn===t.endColumn?e.startLineNumber===t.startLineNumber?e.startColumn-t.startColumn:e.startLineNumber-t.startLineNumber:e.endColumn-t.endColumn:e.endLineNumber-t.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}toJSON(){return this}},$e=class id extends M{constructor(e,t,i,s){super(e,t,i,s),this.selectionStartLineNumber=e,this.selectionStartColumn=t,this.positionLineNumber=i,this.positionColumn=s}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(e){return id.selectionsEqual(this,e)}static selectionsEqual(e,t){return e.selectionStartLineNumber===t.selectionStartLineNumber&&e.selectionStartColumn===t.selectionStartColumn&&e.positionLineNumber===t.positionLineNumber&&e.positionColumn===t.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1}setEndPosition(e,t){return this.getDirection()===0?new id(this.startLineNumber,this.startColumn,e,t):new id(e,t,this.startLineNumber,this.startColumn)}getPosition(){return new Y(this.positionLineNumber,this.positionColumn)}getSelectionStart(){return new Y(this.selectionStartLineNumber,this.selectionStartColumn)}setStartPosition(e,t){return this.getDirection()===0?new id(e,t,this.endLineNumber,this.endColumn):new id(this.endLineNumber,this.endColumn,e,t)}static fromPositions(e,t=e){return new id(e.lineNumber,e.column,t.lineNumber,t.column)}static fromRange(e,t){return t===0?new id(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):new id(e.endLineNumber,e.endColumn,e.startLineNumber,e.startColumn)}static liftSelection(e){return new id(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn)}static selectionsArrEqual(e,t){if(e&&!t||!e&&t)return!1;if(!e&&!t)return!0;if(e.length!==t.length)return!1;for(let i=0,s=e.length;i<s;i++)if(!this.selectionsEqual(e[i],t[i]))return!1;return!0}static isISelection(e){return e&&typeof e.selectionStartLineNumber=="number"&&typeof e.selectionStartColumn=="number"&&typeof e.positionLineNumber=="number"&&typeof e.positionColumn=="number"}static createWithDirection(e,t,i,s,r){return r===0?new id(e,t,i,s):new id(i,s,e,t)}};const RV=Object.create(null);function T(n,e){if(ca(e)){const t=RV[e];if(t===void 0)throw new Error(`${n} references an unknown codicon: ${e}`);e=t}return RV[n]=e,{id:n}}function a0e(){return RV}const Gje={add:T("add",6e4),plus:T("plus",6e4),gistNew:T("gist-new",6e4),repoCreate:T("repo-create",6e4),lightbulb:T("lightbulb",60001),lightBulb:T("light-bulb",60001),repo:T("repo",60002),repoDelete:T("repo-delete",60002),gistFork:T("gist-fork",60003),repoForked:T("repo-forked",60003),gitPullRequest:T("git-pull-request",60004),gitPullRequestAbandoned:T("git-pull-request-abandoned",60004),recordKeys:T("record-keys",60005),keyboard:T("keyboard",60005),tag:T("tag",60006),gitPullRequestLabel:T("git-pull-request-label",60006),tagAdd:T("tag-add",60006),tagRemove:T("tag-remove",60006),person:T("person",60007),personFollow:T("person-follow",60007),personOutline:T("person-outline",60007),personFilled:T("person-filled",60007),gitBranch:T("git-branch",60008),gitBranchCreate:T("git-branch-create",60008),gitBranchDelete:T("git-branch-delete",60008),sourceControl:T("source-control",60008),mirror:T("mirror",60009),mirrorPublic:T("mirror-public",60009),star:T("star",60010),starAdd:T("star-add",60010),starDelete:T("star-delete",60010),starEmpty:T("star-empty",60010),comment:T("comment",60011),commentAdd:T("comment-add",60011),alert:T("alert",60012),warning:T("warning",60012),search:T("search",60013),searchSave:T("search-save",60013),logOut:T("log-out",60014),signOut:T("sign-out",60014),logIn:T("log-in",60015),signIn:T("sign-in",60015),eye:T("eye",60016),eyeUnwatch:T("eye-unwatch",60016),eyeWatch:T("eye-watch",60016),circleFilled:T("circle-filled",60017),primitiveDot:T("primitive-dot",60017),closeDirty:T("close-dirty",60017),debugBreakpoint:T("debug-breakpoint",60017),debugBreakpointDisabled:T("debug-breakpoint-disabled",60017),debugHint:T("debug-hint",60017),terminalDecorationSuccess:T("terminal-decoration-success",60017),primitiveSquare:T("primitive-square",60018),edit:T("edit",60019),pencil:T("pencil",60019),info:T("info",60020),issueOpened:T("issue-opened",60020),gistPrivate:T("gist-private",60021),gitForkPrivate:T("git-fork-private",60021),lock:T("lock",60021),mirrorPrivate:T("mirror-private",60021),close:T("close",60022),removeClose:T("remove-close",60022),x:T("x",60022),repoSync:T("repo-sync",60023),sync:T("sync",60023),clone:T("clone",60024),desktopDownload:T("desktop-download",60024),beaker:T("beaker",60025),microscope:T("microscope",60025),vm:T("vm",60026),deviceDesktop:T("device-desktop",60026),file:T("file",60027),fileText:T("file-text",60027),more:T("more",60028),ellipsis:T("ellipsis",60028),kebabHorizontal:T("kebab-horizontal",60028),mailReply:T("mail-reply",60029),reply:T("reply",60029),organization:T("organization",60030),organizationFilled:T("organization-filled",60030),organizationOutline:T("organization-outline",60030),newFile:T("new-file",60031),fileAdd:T("file-add",60031),newFolder:T("new-folder",60032),fileDirectoryCreate:T("file-directory-create",60032),trash:T("trash",60033),trashcan:T("trashcan",60033),history:T("history",60034),clock:T("clock",60034),folder:T("folder",60035),fileDirectory:T("file-directory",60035),symbolFolder:T("symbol-folder",60035),logoGithub:T("logo-github",60036),markGithub:T("mark-github",60036),github:T("github",60036),terminal:T("terminal",60037),console:T("console",60037),repl:T("repl",60037),zap:T("zap",60038),symbolEvent:T("symbol-event",60038),error:T("error",60039),stop:T("stop",60039),variable:T("variable",60040),symbolVariable:T("symbol-variable",60040),array:T("array",60042),symbolArray:T("symbol-array",60042),symbolModule:T("symbol-module",60043),symbolPackage:T("symbol-package",60043),symbolNamespace:T("symbol-namespace",60043),symbolObject:T("symbol-object",60043),symbolMethod:T("symbol-method",60044),symbolFunction:T("symbol-function",60044),symbolConstructor:T("symbol-constructor",60044),symbolBoolean:T("symbol-boolean",60047),symbolNull:T("symbol-null",60047),symbolNumeric:T("symbol-numeric",60048),symbolNumber:T("symbol-number",60048),symbolStructure:T("symbol-structure",60049),symbolStruct:T("symbol-struct",60049),symbolParameter:T("symbol-parameter",60050),symbolTypeParameter:T("symbol-type-parameter",60050),symbolKey:T("symbol-key",60051),symbolText:T("symbol-text",60051),symbolReference:T("symbol-reference",60052),goToFile:T("go-to-file",60052),symbolEnum:T("symbol-enum",60053),symbolValue:T("symbol-value",60053),symbolRuler:T("symbol-ruler",60054),symbolUnit:T("symbol-unit",60054),activateBreakpoints:T("activate-breakpoints",60055),archive:T("archive",60056),arrowBoth:T("arrow-both",60057),arrowDown:T("arrow-down",60058),arrowLeft:T("arrow-left",60059),arrowRight:T("arrow-right",60060),arrowSmallDown:T("arrow-small-down",60061),arrowSmallLeft:T("arrow-small-left",60062),arrowSmallRight:T("arrow-small-right",60063),arrowSmallUp:T("arrow-small-up",60064),arrowUp:T("arrow-up",60065),bell:T("bell",60066),bold:T("bold",60067),book:T("book",60068),bookmark:T("bookmark",60069),debugBreakpointConditionalUnverified:T("debug-breakpoint-conditional-unverified",60070),debugBreakpointConditional:T("debug-breakpoint-conditional",60071),debugBreakpointConditionalDisabled:T("debug-breakpoint-conditional-disabled",60071),debugBreakpointDataUnverified:T("debug-breakpoint-data-unverified",60072),debugBreakpointData:T("debug-breakpoint-data",60073),debugBreakpointDataDisabled:T("debug-breakpoint-data-disabled",60073),debugBreakpointLogUnverified:T("debug-breakpoint-log-unverified",60074),debugBreakpointLog:T("debug-breakpoint-log",60075),debugBreakpointLogDisabled:T("debug-breakpoint-log-disabled",60075),briefcase:T("briefcase",60076),broadcast:T("broadcast",60077),browser:T("browser",60078),bug:T("bug",60079),calendar:T("calendar",60080),caseSensitive:T("case-sensitive",60081),check:T("check",60082),checklist:T("checklist",60083),chevronDown:T("chevron-down",60084),chevronLeft:T("chevron-left",60085),chevronRight:T("chevron-right",60086),chevronUp:T("chevron-up",60087),chromeClose:T("chrome-close",60088),chromeMaximize:T("chrome-maximize",60089),chromeMinimize:T("chrome-minimize",60090),chromeRestore:T("chrome-restore",60091),circleOutline:T("circle-outline",60092),circle:T("circle",60092),debugBreakpointUnverified:T("debug-breakpoint-unverified",60092),terminalDecorationIncomplete:T("terminal-decoration-incomplete",60092),circleSlash:T("circle-slash",60093),circuitBoard:T("circuit-board",60094),clearAll:T("clear-all",60095),clippy:T("clippy",60096),closeAll:T("close-all",60097),cloudDownload:T("cloud-download",60098),cloudUpload:T("cloud-upload",60099),code:T("code",60100),collapseAll:T("collapse-all",60101),colorMode:T("color-mode",60102),commentDiscussion:T("comment-discussion",60103),creditCard:T("credit-card",60105),dash:T("dash",60108),dashboard:T("dashboard",60109),database:T("database",60110),debugContinue:T("debug-continue",60111),debugDisconnect:T("debug-disconnect",60112),debugPause:T("debug-pause",60113),debugRestart:T("debug-restart",60114),debugStart:T("debug-start",60115),debugStepInto:T("debug-step-into",60116),debugStepOut:T("debug-step-out",60117),debugStepOver:T("debug-step-over",60118),debugStop:T("debug-stop",60119),debug:T("debug",60120),deviceCameraVideo:T("device-camera-video",60121),deviceCamera:T("device-camera",60122),deviceMobile:T("device-mobile",60123),diffAdded:T("diff-added",60124),diffIgnored:T("diff-ignored",60125),diffModified:T("diff-modified",60126),diffRemoved:T("diff-removed",60127),diffRenamed:T("diff-renamed",60128),diff:T("diff",60129),diffSidebyside:T("diff-sidebyside",60129),discard:T("discard",60130),editorLayout:T("editor-layout",60131),emptyWindow:T("empty-window",60132),exclude:T("exclude",60133),extensions:T("extensions",60134),eyeClosed:T("eye-closed",60135),fileBinary:T("file-binary",60136),fileCode:T("file-code",60137),fileMedia:T("file-media",60138),filePdf:T("file-pdf",60139),fileSubmodule:T("file-submodule",60140),fileSymlinkDirectory:T("file-symlink-directory",60141),fileSymlinkFile:T("file-symlink-file",60142),fileZip:T("file-zip",60143),files:T("files",60144),filter:T("filter",60145),flame:T("flame",60146),foldDown:T("fold-down",60147),foldUp:T("fold-up",60148),fold:T("fold",60149),folderActive:T("folder-active",60150),folderOpened:T("folder-opened",60151),gear:T("gear",60152),gift:T("gift",60153),gistSecret:T("gist-secret",60154),gist:T("gist",60155),gitCommit:T("git-commit",60156),gitCompare:T("git-compare",60157),compareChanges:T("compare-changes",60157),gitMerge:T("git-merge",60158),githubAction:T("github-action",60159),githubAlt:T("github-alt",60160),globe:T("globe",60161),grabber:T("grabber",60162),graph:T("graph",60163),gripper:T("gripper",60164),heart:T("heart",60165),home:T("home",60166),horizontalRule:T("horizontal-rule",60167),hubot:T("hubot",60168),inbox:T("inbox",60169),issueReopened:T("issue-reopened",60171),issues:T("issues",60172),italic:T("italic",60173),jersey:T("jersey",60174),json:T("json",60175),kebabVertical:T("kebab-vertical",60176),key:T("key",60177),law:T("law",60178),lightbulbAutofix:T("lightbulb-autofix",60179),linkExternal:T("link-external",60180),link:T("link",60181),listOrdered:T("list-ordered",60182),listUnordered:T("list-unordered",60183),liveShare:T("live-share",60184),loading:T("loading",60185),location:T("location",60186),mailRead:T("mail-read",60187),mail:T("mail",60188),markdown:T("markdown",60189),megaphone:T("megaphone",60190),mention:T("mention",60191),milestone:T("milestone",60192),gitPullRequestMilestone:T("git-pull-request-milestone",60192),mortarBoard:T("mortar-board",60193),move:T("move",60194),multipleWindows:T("multiple-windows",60195),mute:T("mute",60196),noNewline:T("no-newline",60197),note:T("note",60198),octoface:T("octoface",60199),openPreview:T("open-preview",60200),package:T("package",60201),paintcan:T("paintcan",60202),pin:T("pin",60203),play:T("play",60204),run:T("run",60204),plug:T("plug",60205),preserveCase:T("preserve-case",60206),preview:T("preview",60207),project:T("project",60208),pulse:T("pulse",60209),question:T("question",60210),quote:T("quote",60211),radioTower:T("radio-tower",60212),reactions:T("reactions",60213),references:T("references",60214),refresh:T("refresh",60215),regex:T("regex",60216),remoteExplorer:T("remote-explorer",60217),remote:T("remote",60218),remove:T("remove",60219),replaceAll:T("replace-all",60220),replace:T("replace",60221),repoClone:T("repo-clone",60222),repoForcePush:T("repo-force-push",60223),repoPull:T("repo-pull",60224),repoPush:T("repo-push",60225),report:T("report",60226),requestChanges:T("request-changes",60227),rocket:T("rocket",60228),rootFolderOpened:T("root-folder-opened",60229),rootFolder:T("root-folder",60230),rss:T("rss",60231),ruby:T("ruby",60232),saveAll:T("save-all",60233),saveAs:T("save-as",60234),save:T("save",60235),screenFull:T("screen-full",60236),screenNormal:T("screen-normal",60237),searchStop:T("search-stop",60238),server:T("server",60240),settingsGear:T("settings-gear",60241),settings:T("settings",60242),shield:T("shield",60243),smiley:T("smiley",60244),sortPrecedence:T("sort-precedence",60245),splitHorizontal:T("split-horizontal",60246),splitVertical:T("split-vertical",60247),squirrel:T("squirrel",60248),starFull:T("star-full",60249),starHalf:T("star-half",60250),symbolClass:T("symbol-class",60251),symbolColor:T("symbol-color",60252),symbolConstant:T("symbol-constant",60253),symbolEnumMember:T("symbol-enum-member",60254),symbolField:T("symbol-field",60255),symbolFile:T("symbol-file",60256),symbolInterface:T("symbol-interface",60257),symbolKeyword:T("symbol-keyword",60258),symbolMisc:T("symbol-misc",60259),symbolOperator:T("symbol-operator",60260),symbolProperty:T("symbol-property",60261),wrench:T("wrench",60261),wrenchSubaction:T("wrench-subaction",60261),symbolSnippet:T("symbol-snippet",60262),tasklist:T("tasklist",60263),telescope:T("telescope",60264),textSize:T("text-size",60265),threeBars:T("three-bars",60266),thumbsdown:T("thumbsdown",60267),thumbsup:T("thumbsup",60268),tools:T("tools",60269),triangleDown:T("triangle-down",60270),triangleLeft:T("triangle-left",60271),triangleRight:T("triangle-right",60272),triangleUp:T("triangle-up",60273),twitter:T("twitter",60274),unfold:T("unfold",60275),unlock:T("unlock",60276),unmute:T("unmute",60277),unverified:T("unverified",60278),verified:T("verified",60279),versions:T("versions",60280),vmActive:T("vm-active",60281),vmOutline:T("vm-outline",60282),vmRunning:T("vm-running",60283),watch:T("watch",60284),whitespace:T("whitespace",60285),wholeWord:T("whole-word",60286),window:T("window",60287),wordWrap:T("word-wrap",60288),zoomIn:T("zoom-in",60289),zoomOut:T("zoom-out",60290),listFilter:T("list-filter",60291),listFlat:T("list-flat",60292),listSelection:T("list-selection",60293),selection:T("selection",60293),listTree:T("list-tree",60294),debugBreakpointFunctionUnverified:T("debug-breakpoint-function-unverified",60295),debugBreakpointFunction:T("debug-breakpoint-function",60296),debugBreakpointFunctionDisabled:T("debug-breakpoint-function-disabled",60296),debugStackframeActive:T("debug-stackframe-active",60297),circleSmallFilled:T("circle-small-filled",60298),debugStackframeDot:T("debug-stackframe-dot",60298),terminalDecorationMark:T("terminal-decoration-mark",60298),debugStackframe:T("debug-stackframe",60299),debugStackframeFocused:T("debug-stackframe-focused",60299),debugBreakpointUnsupported:T("debug-breakpoint-unsupported",60300),symbolString:T("symbol-string",60301),debugReverseContinue:T("debug-reverse-continue",60302),debugStepBack:T("debug-step-back",60303),debugRestartFrame:T("debug-restart-frame",60304),debugAlt:T("debug-alt",60305),callIncoming:T("call-incoming",60306),callOutgoing:T("call-outgoing",60307),menu:T("menu",60308),expandAll:T("expand-all",60309),feedback:T("feedback",60310),gitPullRequestReviewer:T("git-pull-request-reviewer",60310),groupByRefType:T("group-by-ref-type",60311),ungroupByRefType:T("ungroup-by-ref-type",60312),account:T("account",60313),gitPullRequestAssignee:T("git-pull-request-assignee",60313),bellDot:T("bell-dot",60314),debugConsole:T("debug-console",60315),library:T("library",60316),output:T("output",60317),runAll:T("run-all",60318),syncIgnored:T("sync-ignored",60319),pinned:T("pinned",60320),githubInverted:T("github-inverted",60321),serverProcess:T("server-process",60322),serverEnvironment:T("server-environment",60323),pass:T("pass",60324),issueClosed:T("issue-closed",60324),stopCircle:T("stop-circle",60325),playCircle:T("play-circle",60326),record:T("record",60327),debugAltSmall:T("debug-alt-small",60328),vmConnect:T("vm-connect",60329),cloud:T("cloud",60330),merge:T("merge",60331),export:T("export",60332),graphLeft:T("graph-left",60333),magnet:T("magnet",60334),notebook:T("notebook",60335),redo:T("redo",60336),checkAll:T("check-all",60337),pinnedDirty:T("pinned-dirty",60338),passFilled:T("pass-filled",60339),circleLargeFilled:T("circle-large-filled",60340),circleLarge:T("circle-large",60341),circleLargeOutline:T("circle-large-outline",60341),combine:T("combine",60342),gather:T("gather",60342),table:T("table",60343),variableGroup:T("variable-group",60344),typeHierarchy:T("type-hierarchy",60345),typeHierarchySub:T("type-hierarchy-sub",60346),typeHierarchySuper:T("type-hierarchy-super",60347),gitPullRequestCreate:T("git-pull-request-create",60348),runAbove:T("run-above",60349),runBelow:T("run-below",60350),notebookTemplate:T("notebook-template",60351),debugRerun:T("debug-rerun",60352),workspaceTrusted:T("workspace-trusted",60353),workspaceUntrusted:T("workspace-untrusted",60354),workspaceUnknown:T("workspace-unknown",60355),terminalCmd:T("terminal-cmd",60356),terminalDebian:T("terminal-debian",60357),terminalLinux:T("terminal-linux",60358),terminalPowershell:T("terminal-powershell",60359),terminalTmux:T("terminal-tmux",60360),terminalUbuntu:T("terminal-ubuntu",60361),terminalBash:T("terminal-bash",60362),arrowSwap:T("arrow-swap",60363),copy:T("copy",60364),personAdd:T("person-add",60365),filterFilled:T("filter-filled",60366),wand:T("wand",60367),debugLineByLine:T("debug-line-by-line",60368),inspect:T("inspect",60369),layers:T("layers",60370),layersDot:T("layers-dot",60371),layersActive:T("layers-active",60372),compass:T("compass",60373),compassDot:T("compass-dot",60374),compassActive:T("compass-active",60375),azure:T("azure",60376),issueDraft:T("issue-draft",60377),gitPullRequestClosed:T("git-pull-request-closed",60378),gitPullRequestDraft:T("git-pull-request-draft",60379),debugAll:T("debug-all",60380),debugCoverage:T("debug-coverage",60381),runErrors:T("run-errors",60382),folderLibrary:T("folder-library",60383),debugContinueSmall:T("debug-continue-small",60384),beakerStop:T("beaker-stop",60385),graphLine:T("graph-line",60386),graphScatter:T("graph-scatter",60387),pieChart:T("pie-chart",60388),bracket:T("bracket",60175),bracketDot:T("bracket-dot",60389),bracketError:T("bracket-error",60390),lockSmall:T("lock-small",60391),azureDevops:T("azure-devops",60392),verifiedFilled:T("verified-filled",60393),newline:T("newline",60394),layout:T("layout",60395),layoutActivitybarLeft:T("layout-activitybar-left",60396),layoutActivitybarRight:T("layout-activitybar-right",60397),layoutPanelLeft:T("layout-panel-left",60398),layoutPanelCenter:T("layout-panel-center",60399),layoutPanelJustify:T("layout-panel-justify",60400),layoutPanelRight:T("layout-panel-right",60401),layoutPanel:T("layout-panel",60402),layoutSidebarLeft:T("layout-sidebar-left",60403),layoutSidebarRight:T("layout-sidebar-right",60404),layoutStatusbar:T("layout-statusbar",60405),layoutMenubar:T("layout-menubar",60406),layoutCentered:T("layout-centered",60407),target:T("target",60408),indent:T("indent",60409),recordSmall:T("record-small",60410),errorSmall:T("error-small",60411),terminalDecorationError:T("terminal-decoration-error",60411),arrowCircleDown:T("arrow-circle-down",60412),arrowCircleLeft:T("arrow-circle-left",60413),arrowCircleRight:T("arrow-circle-right",60414),arrowCircleUp:T("arrow-circle-up",60415),layoutSidebarRightOff:T("layout-sidebar-right-off",60416),layoutPanelOff:T("layout-panel-off",60417),layoutSidebarLeftOff:T("layout-sidebar-left-off",60418),blank:T("blank",60419),heartFilled:T("heart-filled",60420),map:T("map",60421),mapHorizontal:T("map-horizontal",60421),foldHorizontal:T("fold-horizontal",60421),mapFilled:T("map-filled",60422),mapHorizontalFilled:T("map-horizontal-filled",60422),foldHorizontalFilled:T("fold-horizontal-filled",60422),circleSmall:T("circle-small",60423),bellSlash:T("bell-slash",60424),bellSlashDot:T("bell-slash-dot",60425),commentUnresolved:T("comment-unresolved",60426),gitPullRequestGoToChanges:T("git-pull-request-go-to-changes",60427),gitPullRequestNewChanges:T("git-pull-request-new-changes",60428),searchFuzzy:T("search-fuzzy",60429),commentDraft:T("comment-draft",60430),send:T("send",60431),sparkle:T("sparkle",60432),insert:T("insert",60433),mic:T("mic",60434),thumbsdownFilled:T("thumbsdown-filled",60435),thumbsupFilled:T("thumbsup-filled",60436),coffee:T("coffee",60437),snake:T("snake",60438),game:T("game",60439),vr:T("vr",60440),chip:T("chip",60441),piano:T("piano",60442),music:T("music",60443),micFilled:T("mic-filled",60444),repoFetch:T("repo-fetch",60445),copilot:T("copilot",60446),lightbulbSparkle:T("lightbulb-sparkle",60447),robot:T("robot",60448),sparkleFilled:T("sparkle-filled",60449),diffSingle:T("diff-single",60450),diffMultiple:T("diff-multiple",60451),surroundWith:T("surround-with",60452),share:T("share",60453),gitStash:T("git-stash",60454),gitStashApply:T("git-stash-apply",60455),gitStashPop:T("git-stash-pop",60456),vscode:T("vscode",60457),vscodeInsiders:T("vscode-insiders",60458),codeOss:T("code-oss",60459),runCoverage:T("run-coverage",60460),runAllCoverage:T("run-all-coverage",60461),coverage:T("coverage",60462),githubProject:T("github-project",60463),mapVertical:T("map-vertical",60464),foldVertical:T("fold-vertical",60464),mapVerticalFilled:T("map-vertical-filled",60465),foldVerticalFilled:T("fold-vertical-filled",60465),goToSearch:T("go-to-search",60466),percentage:T("percentage",60467),sortPercentage:T("sort-percentage",60467),attach:T("attach",60468)},Yje={dialogError:T("dialog-error","error"),dialogWarning:T("dialog-warning","warning"),dialogInfo:T("dialog-info","info"),dialogClose:T("dialog-close","close"),treeItemExpanded:T("tree-item-expanded","chevron-down"),treeFilterOnTypeOn:T("tree-filter-on-type-on","list-filter"),treeFilterOnTypeOff:T("tree-filter-on-type-off","list-selection"),treeFilterClear:T("tree-filter-clear","close"),treeItemLoading:T("tree-item-loading","loading"),menuSelection:T("menu-selection","check"),menuSubmenu:T("menu-submenu","chevron-right"),menuBarMore:T("menubar-more","more"),scrollbarButtonLeft:T("scrollbar-button-left","triangle-left"),scrollbarButtonRight:T("scrollbar-button-right","triangle-right"),scrollbarButtonUp:T("scrollbar-button-up","triangle-up"),scrollbarButtonDown:T("scrollbar-button-down","triangle-down"),toolBarMore:T("toolbar-more","more"),quickInputBack:T("quick-input-back","arrow-left"),dropDownButton:T("drop-down-button",60084),symbolCustomColor:T("symbol-customcolor",60252),exportIcon:T("export",60332),workspaceUnspecified:T("workspace-unspecified",60355),newLine:T("newline",60394),thumbsDownFilled:T("thumbsdown-filled",60435),thumbsUpFilled:T("thumbsup-filled",60436),gitFetch:T("git-fetch",60445),lightbulbSparkleAutofix:T("lightbulb-sparkle-autofix",60447),debugBreakpointPending:T("debug-breakpoint-pending",60377)},ye={...Gje,...Yje};let l0e=class{constructor(){this._tokenizationSupports=new Map,this._factories=new Map,this._onDidChange=new X,this.onDidChange=this._onDidChange.event,this._colorMap=null}handleChange(e){this._onDidChange.fire({changedLanguages:e,changedColorMap:!1})}register(e,t){return this._tokenizationSupports.set(e,t),this.handleChange([e]),Ye(()=>{this._tokenizationSupports.get(e)===t&&(this._tokenizationSupports.delete(e),this.handleChange([e]))})}get(e){return this._tokenizationSupports.get(e)||null}registerFactory(e,t){var s;(s=this._factories.get(e))==null||s.dispose();const i=new Zje(this,e,t);return this._factories.set(e,i),Ye(()=>{const r=this._factories.get(e);!r||r!==i||(this._factories.delete(e),r.dispose())})}async getOrCreate(e){const t=this.get(e);if(t)return t;const i=this._factories.get(e);return!i||i.isResolved?null:(await i.resolve(),this.get(e))}isResolved(e){if(this.get(e))return!0;const i=this._factories.get(e);return!!(!i||i.isResolved)}setColorMap(e){this._colorMap=e,this._onDidChange.fire({changedLanguages:Array.from(this._tokenizationSupports.keys()),changedColorMap:!0})}getColorMap(){return this._colorMap}getDefaultBackground(){return this._colorMap&&this._colorMap.length>2?this._colorMap[2]:null}};class Zje extends ee{get isResolved(){return this._isResolved}constructor(e,t,i){super(),this._registry=e,this._languageId=t,this._factory=i,this._isDisposed=!1,this._resolvePromise=null,this._isResolved=!1}dispose(){this._isDisposed=!0,super.dispose()}async resolve(){return this._resolvePromise||(this._resolvePromise=this._create()),this._resolvePromise}async _create(){const e=await this._factory.tokenizationSupport;this._isResolved=!0,e&&!this._isDisposed&&this._register(this._registry.register(this._languageId,e))}}let TI=class{constructor(e,t,i){this.offset=e,this.type=t,this.language=i,this._tokenBrand=void 0}toString(){return"("+this.offset+", "+this.type+")"}};class eX{constructor(e,t){this.tokens=e,this.endState=t,this._tokenizationResultBrand=void 0}}class P3{constructor(e,t){this.tokens=e,this.endState=t,this._encodedTokenizationResultBrand=void 0}}var Ba;(function(n){n[n.Increase=0]="Increase",n[n.Decrease=1]="Decrease"})(Ba||(Ba={}));var RI;(function(n){const e=new Map;e.set(0,ye.symbolMethod),e.set(1,ye.symbolFunction),e.set(2,ye.symbolConstructor),e.set(3,ye.symbolField),e.set(4,ye.symbolVariable),e.set(5,ye.symbolClass),e.set(6,ye.symbolStruct),e.set(7,ye.symbolInterface),e.set(8,ye.symbolModule),e.set(9,ye.symbolProperty),e.set(10,ye.symbolEvent),e.set(11,ye.symbolOperator),e.set(12,ye.symbolUnit),e.set(13,ye.symbolValue),e.set(15,ye.symbolEnum),e.set(14,ye.symbolConstant),e.set(15,ye.symbolEnum),e.set(16,ye.symbolEnumMember),e.set(17,ye.symbolKeyword),e.set(27,ye.symbolSnippet),e.set(18,ye.symbolText),e.set(19,ye.symbolColor),e.set(20,ye.symbolFile),e.set(21,ye.symbolReference),e.set(22,ye.symbolCustomColor),e.set(23,ye.symbolFolder),e.set(24,ye.symbolTypeParameter),e.set(25,ye.account),e.set(26,ye.issues);function t(r){let o=e.get(r);return o||(console.info("No codicon found for CompletionItemKind "+r),o=ye.symbolProperty),o}n.toIcon=t;const i=new Map;i.set("method",0),i.set("function",1),i.set("constructor",2),i.set("field",3),i.set("variable",4),i.set("class",5),i.set("struct",6),i.set("interface",7),i.set("module",8),i.set("property",9),i.set("event",10),i.set("operator",11),i.set("unit",12),i.set("value",13),i.set("constant",14),i.set("enum",15),i.set("enum-member",16),i.set("enumMember",16),i.set("keyword",17),i.set("snippet",27),i.set("text",18),i.set("color",19),i.set("file",20),i.set("reference",21),i.set("customcolor",22),i.set("folder",23),i.set("type-parameter",24),i.set("typeParameter",24),i.set("account",25),i.set("issue",26);function s(r,o){let a=i.get(r);return typeof a>"u"&&!o&&(a=9),a}n.fromString=s})(RI||(RI={}));var Du;(function(n){n[n.Automatic=0]="Automatic",n[n.Explicit=1]="Explicit"})(Du||(Du={}));class c0e{constructor(e,t,i,s){this.range=e,this.text=t,this.completionKind=i,this.isSnippetText=s}equals(e){return M.lift(this.range).equalsRange(e.range)&&this.text===e.text&&this.completionKind===e.completionKind&&this.isSnippetText===e.isSnippetText}}var AI;(function(n){n[n.Automatic=0]="Automatic",n[n.PasteAs=1]="PasteAs"})(AI||(AI={}));var Zh;(function(n){n[n.Invoke=1]="Invoke",n[n.TriggerCharacter=2]="TriggerCharacter",n[n.ContentChange=3]="ContentChange"})(Zh||(Zh={}));var IS;(function(n){n[n.Text=0]="Text",n[n.Read=1]="Read",n[n.Write=2]="Write"})(IS||(IS={}));function Xje(n){return n&&Xe.isUri(n.uri)&&M.isIRange(n.range)&&(M.isIRange(n.originSelectionRange)||M.isIRange(n.targetSelectionRange))}const Qje={17:v("Array","array"),16:v("Boolean","boolean"),4:v("Class","class"),13:v("Constant","constant"),8:v("Constructor","constructor"),9:v("Enum","enumeration"),21:v("EnumMember","enumeration member"),23:v("Event","event"),7:v("Field","field"),0:v("File","file"),11:v("Function","function"),10:v("Interface","interface"),19:v("Key","key"),5:v("Method","method"),1:v("Module","module"),2:v("Namespace","namespace"),20:v("Null","null"),15:v("Number","number"),18:v("Object","object"),24:v("Operator","operator"),3:v("Package","package"),6:v("Property","property"),14:v("String","string"),22:v("Struct","struct"),25:v("TypeParameter","type parameter"),12:v("Variable","variable")};function Jje(n,e){return v("symbolAriaLabel","{0} ({1})",n,Qje[e])}var oP;(function(n){const e=new Map;e.set(0,ye.symbolFile),e.set(1,ye.symbolModule),e.set(2,ye.symbolNamespace),e.set(3,ye.symbolPackage),e.set(4,ye.symbolClass),e.set(5,ye.symbolMethod),e.set(6,ye.symbolProperty),e.set(7,ye.symbolField),e.set(8,ye.symbolConstructor),e.set(9,ye.symbolEnum),e.set(10,ye.symbolInterface),e.set(11,ye.symbolFunction),e.set(12,ye.symbolVariable),e.set(13,ye.symbolConstant),e.set(14,ye.symbolString),e.set(15,ye.symbolNumber),e.set(16,ye.symbolBoolean),e.set(17,ye.symbolArray),e.set(18,ye.symbolObject),e.set(19,ye.symbolKey),e.set(20,ye.symbolNull),e.set(21,ye.symbolEnumMember),e.set(22,ye.symbolStruct),e.set(23,ye.symbolEvent),e.set(24,ye.symbolOperator),e.set(25,ye.symbolTypeParameter);function t(i){let s=e.get(i);return s||(console.info("No codicon found for SymbolKind "+i),s=ye.symbolProperty),s}n.toIcon=t})(oP||(oP={}));const sd=class sd{static fromValue(e){switch(e){case"comment":return sd.Comment;case"imports":return sd.Imports;case"region":return sd.Region}return new sd(e)}constructor(e){this.value=e}};sd.Comment=new sd("comment"),sd.Imports=new sd("imports"),sd.Region=new sd("region");let I_=sd;var AV;(function(n){n[n.AIGenerated=1]="AIGenerated"})(AV||(AV={}));var MI;(function(n){n[n.Invoke=0]="Invoke",n[n.Automatic=1]="Automatic"})(MI||(MI={}));var MV;(function(n){function e(t){return!t||typeof t!="object"?!1:typeof t.id=="string"&&typeof t.title=="string"}n.is=e})(MV||(MV={}));var aP;(function(n){n[n.Type=1]="Type",n[n.Parameter=2]="Parameter"})(aP||(aP={}));class eKe{constructor(e){this.createSupport=e,this._tokenizationSupport=null}dispose(){this._tokenizationSupport&&this._tokenizationSupport.then(e=>{e&&e.dispose()})}get tokenizationSupport(){return this._tokenizationSupport||(this._tokenizationSupport=this.createSupport()),this._tokenizationSupport}}const In=new l0e,PV=new l0e;var lP;(function(n){n[n.Invoke=0]="Invoke",n[n.Automatic=1]="Automatic"})(lP||(lP={}));var OV;(function(n){n[n.Unknown=0]="Unknown",n[n.Disabled=1]="Disabled",n[n.Enabled=2]="Enabled"})(OV||(OV={}));var FV;(function(n){n[n.Invoke=1]="Invoke",n[n.Auto=2]="Auto"})(FV||(FV={}));var BV;(function(n){n[n.None=0]="None",n[n.KeepWhitespace=1]="KeepWhitespace",n[n.InsertAsSnippet=4]="InsertAsSnippet"})(BV||(BV={}));var WV;(function(n){n[n.Method=0]="Method",n[n.Function=1]="Function",n[n.Constructor=2]="Constructor",n[n.Field=3]="Field",n[n.Variable=4]="Variable",n[n.Class=5]="Class",n[n.Struct=6]="Struct",n[n.Interface=7]="Interface",n[n.Module=8]="Module",n[n.Property=9]="Property",n[n.Event=10]="Event",n[n.Operator=11]="Operator",n[n.Unit=12]="Unit",n[n.Value=13]="Value",n[n.Constant=14]="Constant",n[n.Enum=15]="Enum",n[n.EnumMember=16]="EnumMember",n[n.Keyword=17]="Keyword",n[n.Text=18]="Text",n[n.Color=19]="Color",n[n.File=20]="File",n[n.Reference=21]="Reference",n[n.Customcolor=22]="Customcolor",n[n.Folder=23]="Folder",n[n.TypeParameter=24]="TypeParameter",n[n.User=25]="User",n[n.Issue=26]="Issue",n[n.Snippet=27]="Snippet"})(WV||(WV={}));var HV;(function(n){n[n.Deprecated=1]="Deprecated"})(HV||(HV={}));var VV;(function(n){n[n.Invoke=0]="Invoke",n[n.TriggerCharacter=1]="TriggerCharacter",n[n.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})(VV||(VV={}));var zV;(function(n){n[n.EXACT=0]="EXACT",n[n.ABOVE=1]="ABOVE",n[n.BELOW=2]="BELOW"})(zV||(zV={}));var UV;(function(n){n[n.NotSet=0]="NotSet",n[n.ContentFlush=1]="ContentFlush",n[n.RecoverFromMarkers=2]="RecoverFromMarkers",n[n.Explicit=3]="Explicit",n[n.Paste=4]="Paste",n[n.Undo=5]="Undo",n[n.Redo=6]="Redo"})(UV||(UV={}));var $V;(function(n){n[n.LF=1]="LF",n[n.CRLF=2]="CRLF"})($V||($V={}));var jV;(function(n){n[n.Text=0]="Text",n[n.Read=1]="Read",n[n.Write=2]="Write"})(jV||(jV={}));var KV;(function(n){n[n.None=0]="None",n[n.Keep=1]="Keep",n[n.Brackets=2]="Brackets",n[n.Advanced=3]="Advanced",n[n.Full=4]="Full"})(KV||(KV={}));var qV;(function(n){n[n.acceptSuggestionOnCommitCharacter=0]="acceptSuggestionOnCommitCharacter",n[n.acceptSuggestionOnEnter=1]="acceptSuggestionOnEnter",n[n.accessibilitySupport=2]="accessibilitySupport",n[n.accessibilityPageSize=3]="accessibilityPageSize",n[n.ariaLabel=4]="ariaLabel",n[n.ariaRequired=5]="ariaRequired",n[n.autoClosingBrackets=6]="autoClosingBrackets",n[n.autoClosingComments=7]="autoClosingComments",n[n.screenReaderAnnounceInlineSuggestion=8]="screenReaderAnnounceInlineSuggestion",n[n.autoClosingDelete=9]="autoClosingDelete",n[n.autoClosingOvertype=10]="autoClosingOvertype",n[n.autoClosingQuotes=11]="autoClosingQuotes",n[n.autoIndent=12]="autoIndent",n[n.automaticLayout=13]="automaticLayout",n[n.autoSurround=14]="autoSurround",n[n.bracketPairColorization=15]="bracketPairColorization",n[n.guides=16]="guides",n[n.codeLens=17]="codeLens",n[n.codeLensFontFamily=18]="codeLensFontFamily",n[n.codeLensFontSize=19]="codeLensFontSize",n[n.colorDecorators=20]="colorDecorators",n[n.colorDecoratorsLimit=21]="colorDecoratorsLimit",n[n.columnSelection=22]="columnSelection",n[n.comments=23]="comments",n[n.contextmenu=24]="contextmenu",n[n.copyWithSyntaxHighlighting=25]="copyWithSyntaxHighlighting",n[n.cursorBlinking=26]="cursorBlinking",n[n.cursorSmoothCaretAnimation=27]="cursorSmoothCaretAnimation",n[n.cursorStyle=28]="cursorStyle",n[n.cursorSurroundingLines=29]="cursorSurroundingLines",n[n.cursorSurroundingLinesStyle=30]="cursorSurroundingLinesStyle",n[n.cursorWidth=31]="cursorWidth",n[n.disableLayerHinting=32]="disableLayerHinting",n[n.disableMonospaceOptimizations=33]="disableMonospaceOptimizations",n[n.domReadOnly=34]="domReadOnly",n[n.dragAndDrop=35]="dragAndDrop",n[n.dropIntoEditor=36]="dropIntoEditor",n[n.emptySelectionClipboard=37]="emptySelectionClipboard",n[n.experimentalWhitespaceRendering=38]="experimentalWhitespaceRendering",n[n.extraEditorClassName=39]="extraEditorClassName",n[n.fastScrollSensitivity=40]="fastScrollSensitivity",n[n.find=41]="find",n[n.fixedOverflowWidgets=42]="fixedOverflowWidgets",n[n.folding=43]="folding",n[n.foldingStrategy=44]="foldingStrategy",n[n.foldingHighlight=45]="foldingHighlight",n[n.foldingImportsByDefault=46]="foldingImportsByDefault",n[n.foldingMaximumRegions=47]="foldingMaximumRegions",n[n.unfoldOnClickAfterEndOfLine=48]="unfoldOnClickAfterEndOfLine",n[n.fontFamily=49]="fontFamily",n[n.fontInfo=50]="fontInfo",n[n.fontLigatures=51]="fontLigatures",n[n.fontSize=52]="fontSize",n[n.fontWeight=53]="fontWeight",n[n.fontVariations=54]="fontVariations",n[n.formatOnPaste=55]="formatOnPaste",n[n.formatOnType=56]="formatOnType",n[n.glyphMargin=57]="glyphMargin",n[n.gotoLocation=58]="gotoLocation",n[n.hideCursorInOverviewRuler=59]="hideCursorInOverviewRuler",n[n.hover=60]="hover",n[n.inDiffEditor=61]="inDiffEditor",n[n.inlineSuggest=62]="inlineSuggest",n[n.inlineEdit=63]="inlineEdit",n[n.letterSpacing=64]="letterSpacing",n[n.lightbulb=65]="lightbulb",n[n.lineDecorationsWidth=66]="lineDecorationsWidth",n[n.lineHeight=67]="lineHeight",n[n.lineNumbers=68]="lineNumbers",n[n.lineNumbersMinChars=69]="lineNumbersMinChars",n[n.linkedEditing=70]="linkedEditing",n[n.links=71]="links",n[n.matchBrackets=72]="matchBrackets",n[n.minimap=73]="minimap",n[n.mouseStyle=74]="mouseStyle",n[n.mouseWheelScrollSensitivity=75]="mouseWheelScrollSensitivity",n[n.mouseWheelZoom=76]="mouseWheelZoom",n[n.multiCursorMergeOverlapping=77]="multiCursorMergeOverlapping",n[n.multiCursorModifier=78]="multiCursorModifier",n[n.multiCursorPaste=79]="multiCursorPaste",n[n.multiCursorLimit=80]="multiCursorLimit",n[n.occurrencesHighlight=81]="occurrencesHighlight",n[n.overviewRulerBorder=82]="overviewRulerBorder",n[n.overviewRulerLanes=83]="overviewRulerLanes",n[n.padding=84]="padding",n[n.pasteAs=85]="pasteAs",n[n.parameterHints=86]="parameterHints",n[n.peekWidgetDefaultFocus=87]="peekWidgetDefaultFocus",n[n.placeholder=88]="placeholder",n[n.definitionLinkOpensInPeek=89]="definitionLinkOpensInPeek",n[n.quickSuggestions=90]="quickSuggestions",n[n.quickSuggestionsDelay=91]="quickSuggestionsDelay",n[n.readOnly=92]="readOnly",n[n.readOnlyMessage=93]="readOnlyMessage",n[n.renameOnType=94]="renameOnType",n[n.renderControlCharacters=95]="renderControlCharacters",n[n.renderFinalNewline=96]="renderFinalNewline",n[n.renderLineHighlight=97]="renderLineHighlight",n[n.renderLineHighlightOnlyWhenFocus=98]="renderLineHighlightOnlyWhenFocus",n[n.renderValidationDecorations=99]="renderValidationDecorations",n[n.renderWhitespace=100]="renderWhitespace",n[n.revealHorizontalRightPadding=101]="revealHorizontalRightPadding",n[n.roundedSelection=102]="roundedSelection",n[n.rulers=103]="rulers",n[n.scrollbar=104]="scrollbar",n[n.scrollBeyondLastColumn=105]="scrollBeyondLastColumn",n[n.scrollBeyondLastLine=106]="scrollBeyondLastLine",n[n.scrollPredominantAxis=107]="scrollPredominantAxis",n[n.selectionClipboard=108]="selectionClipboard",n[n.selectionHighlight=109]="selectionHighlight",n[n.selectOnLineNumbers=110]="selectOnLineNumbers",n[n.showFoldingControls=111]="showFoldingControls",n[n.showUnused=112]="showUnused",n[n.snippetSuggestions=113]="snippetSuggestions",n[n.smartSelect=114]="smartSelect",n[n.smoothScrolling=115]="smoothScrolling",n[n.stickyScroll=116]="stickyScroll",n[n.stickyTabStops=117]="stickyTabStops",n[n.stopRenderingLineAfter=118]="stopRenderingLineAfter",n[n.suggest=119]="suggest",n[n.suggestFontSize=120]="suggestFontSize",n[n.suggestLineHeight=121]="suggestLineHeight",n[n.suggestOnTriggerCharacters=122]="suggestOnTriggerCharacters",n[n.suggestSelection=123]="suggestSelection",n[n.tabCompletion=124]="tabCompletion",n[n.tabIndex=125]="tabIndex",n[n.unicodeHighlighting=126]="unicodeHighlighting",n[n.unusualLineTerminators=127]="unusualLineTerminators",n[n.useShadowDOM=128]="useShadowDOM",n[n.useTabStops=129]="useTabStops",n[n.wordBreak=130]="wordBreak",n[n.wordSegmenterLocales=131]="wordSegmenterLocales",n[n.wordSeparators=132]="wordSeparators",n[n.wordWrap=133]="wordWrap",n[n.wordWrapBreakAfterCharacters=134]="wordWrapBreakAfterCharacters",n[n.wordWrapBreakBeforeCharacters=135]="wordWrapBreakBeforeCharacters",n[n.wordWrapColumn=136]="wordWrapColumn",n[n.wordWrapOverride1=137]="wordWrapOverride1",n[n.wordWrapOverride2=138]="wordWrapOverride2",n[n.wrappingIndent=139]="wrappingIndent",n[n.wrappingStrategy=140]="wrappingStrategy",n[n.showDeprecated=141]="showDeprecated",n[n.inlayHints=142]="inlayHints",n[n.editorClassName=143]="editorClassName",n[n.pixelRatio=144]="pixelRatio",n[n.tabFocusMode=145]="tabFocusMode",n[n.layoutInfo=146]="layoutInfo",n[n.wrappingInfo=147]="wrappingInfo",n[n.defaultColorDecorators=148]="defaultColorDecorators",n[n.colorDecoratorsActivatedOn=149]="colorDecoratorsActivatedOn",n[n.inlineCompletionsAccessibilityVerbose=150]="inlineCompletionsAccessibilityVerbose"})(qV||(qV={}));var GV;(function(n){n[n.TextDefined=0]="TextDefined",n[n.LF=1]="LF",n[n.CRLF=2]="CRLF"})(GV||(GV={}));var YV;(function(n){n[n.LF=0]="LF",n[n.CRLF=1]="CRLF"})(YV||(YV={}));var ZV;(function(n){n[n.Left=1]="Left",n[n.Center=2]="Center",n[n.Right=3]="Right"})(ZV||(ZV={}));var XV;(function(n){n[n.Increase=0]="Increase",n[n.Decrease=1]="Decrease"})(XV||(XV={}));var QV;(function(n){n[n.None=0]="None",n[n.Indent=1]="Indent",n[n.IndentOutdent=2]="IndentOutdent",n[n.Outdent=3]="Outdent"})(QV||(QV={}));var JV;(function(n){n[n.Both=0]="Both",n[n.Right=1]="Right",n[n.Left=2]="Left",n[n.None=3]="None"})(JV||(JV={}));var ez;(function(n){n[n.Type=1]="Type",n[n.Parameter=2]="Parameter"})(ez||(ez={}));var tz;(function(n){n[n.Automatic=0]="Automatic",n[n.Explicit=1]="Explicit"})(tz||(tz={}));var iz;(function(n){n[n.Invoke=0]="Invoke",n[n.Automatic=1]="Automatic"})(iz||(iz={}));var nz;(function(n){n[n.DependsOnKbLayout=-1]="DependsOnKbLayout",n[n.Unknown=0]="Unknown",n[n.Backspace=1]="Backspace",n[n.Tab=2]="Tab",n[n.Enter=3]="Enter",n[n.Shift=4]="Shift",n[n.Ctrl=5]="Ctrl",n[n.Alt=6]="Alt",n[n.PauseBreak=7]="PauseBreak",n[n.CapsLock=8]="CapsLock",n[n.Escape=9]="Escape",n[n.Space=10]="Space",n[n.PageUp=11]="PageUp",n[n.PageDown=12]="PageDown",n[n.End=13]="End",n[n.Home=14]="Home",n[n.LeftArrow=15]="LeftArrow",n[n.UpArrow=16]="UpArrow",n[n.RightArrow=17]="RightArrow",n[n.DownArrow=18]="DownArrow",n[n.Insert=19]="Insert",n[n.Delete=20]="Delete",n[n.Digit0=21]="Digit0",n[n.Digit1=22]="Digit1",n[n.Digit2=23]="Digit2",n[n.Digit3=24]="Digit3",n[n.Digit4=25]="Digit4",n[n.Digit5=26]="Digit5",n[n.Digit6=27]="Digit6",n[n.Digit7=28]="Digit7",n[n.Digit8=29]="Digit8",n[n.Digit9=30]="Digit9",n[n.KeyA=31]="KeyA",n[n.KeyB=32]="KeyB",n[n.KeyC=33]="KeyC",n[n.KeyD=34]="KeyD",n[n.KeyE=35]="KeyE",n[n.KeyF=36]="KeyF",n[n.KeyG=37]="KeyG",n[n.KeyH=38]="KeyH",n[n.KeyI=39]="KeyI",n[n.KeyJ=40]="KeyJ",n[n.KeyK=41]="KeyK",n[n.KeyL=42]="KeyL",n[n.KeyM=43]="KeyM",n[n.KeyN=44]="KeyN",n[n.KeyO=45]="KeyO",n[n.KeyP=46]="KeyP",n[n.KeyQ=47]="KeyQ",n[n.KeyR=48]="KeyR",n[n.KeyS=49]="KeyS",n[n.KeyT=50]="KeyT",n[n.KeyU=51]="KeyU",n[n.KeyV=52]="KeyV",n[n.KeyW=53]="KeyW",n[n.KeyX=54]="KeyX",n[n.KeyY=55]="KeyY",n[n.KeyZ=56]="KeyZ",n[n.Meta=57]="Meta",n[n.ContextMenu=58]="ContextMenu",n[n.F1=59]="F1",n[n.F2=60]="F2",n[n.F3=61]="F3",n[n.F4=62]="F4",n[n.F5=63]="F5",n[n.F6=64]="F6",n[n.F7=65]="F7",n[n.F8=66]="F8",n[n.F9=67]="F9",n[n.F10=68]="F10",n[n.F11=69]="F11",n[n.F12=70]="F12",n[n.F13=71]="F13",n[n.F14=72]="F14",n[n.F15=73]="F15",n[n.F16=74]="F16",n[n.F17=75]="F17",n[n.F18=76]="F18",n[n.F19=77]="F19",n[n.F20=78]="F20",n[n.F21=79]="F21",n[n.F22=80]="F22",n[n.F23=81]="F23",n[n.F24=82]="F24",n[n.NumLock=83]="NumLock",n[n.ScrollLock=84]="ScrollLock",n[n.Semicolon=85]="Semicolon",n[n.Equal=86]="Equal",n[n.Comma=87]="Comma",n[n.Minus=88]="Minus",n[n.Period=89]="Period",n[n.Slash=90]="Slash",n[n.Backquote=91]="Backquote",n[n.BracketLeft=92]="BracketLeft",n[n.Backslash=93]="Backslash",n[n.BracketRight=94]="BracketRight",n[n.Quote=95]="Quote",n[n.OEM_8=96]="OEM_8",n[n.IntlBackslash=97]="IntlBackslash",n[n.Numpad0=98]="Numpad0",n[n.Numpad1=99]="Numpad1",n[n.Numpad2=100]="Numpad2",n[n.Numpad3=101]="Numpad3",n[n.Numpad4=102]="Numpad4",n[n.Numpad5=103]="Numpad5",n[n.Numpad6=104]="Numpad6",n[n.Numpad7=105]="Numpad7",n[n.Numpad8=106]="Numpad8",n[n.Numpad9=107]="Numpad9",n[n.NumpadMultiply=108]="NumpadMultiply",n[n.NumpadAdd=109]="NumpadAdd",n[n.NUMPAD_SEPARATOR=110]="NUMPAD_SEPARATOR",n[n.NumpadSubtract=111]="NumpadSubtract",n[n.NumpadDecimal=112]="NumpadDecimal",n[n.NumpadDivide=113]="NumpadDivide",n[n.KEY_IN_COMPOSITION=114]="KEY_IN_COMPOSITION",n[n.ABNT_C1=115]="ABNT_C1",n[n.ABNT_C2=116]="ABNT_C2",n[n.AudioVolumeMute=117]="AudioVolumeMute",n[n.AudioVolumeUp=118]="AudioVolumeUp",n[n.AudioVolumeDown=119]="AudioVolumeDown",n[n.BrowserSearch=120]="BrowserSearch",n[n.BrowserHome=121]="BrowserHome",n[n.BrowserBack=122]="BrowserBack",n[n.BrowserForward=123]="BrowserForward",n[n.MediaTrackNext=124]="MediaTrackNext",n[n.MediaTrackPrevious=125]="MediaTrackPrevious",n[n.MediaStop=126]="MediaStop",n[n.MediaPlayPause=127]="MediaPlayPause",n[n.LaunchMediaPlayer=128]="LaunchMediaPlayer",n[n.LaunchMail=129]="LaunchMail",n[n.LaunchApp2=130]="LaunchApp2",n[n.Clear=131]="Clear",n[n.MAX_VALUE=132]="MAX_VALUE"})(nz||(nz={}));var sz;(function(n){n[n.Hint=1]="Hint",n[n.Info=2]="Info",n[n.Warning=4]="Warning",n[n.Error=8]="Error"})(sz||(sz={}));var rz;(function(n){n[n.Unnecessary=1]="Unnecessary",n[n.Deprecated=2]="Deprecated"})(rz||(rz={}));var oz;(function(n){n[n.Inline=1]="Inline",n[n.Gutter=2]="Gutter"})(oz||(oz={}));var az;(function(n){n[n.Normal=1]="Normal",n[n.Underlined=2]="Underlined"})(az||(az={}));var lz;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.TEXTAREA=1]="TEXTAREA",n[n.GUTTER_GLYPH_MARGIN=2]="GUTTER_GLYPH_MARGIN",n[n.GUTTER_LINE_NUMBERS=3]="GUTTER_LINE_NUMBERS",n[n.GUTTER_LINE_DECORATIONS=4]="GUTTER_LINE_DECORATIONS",n[n.GUTTER_VIEW_ZONE=5]="GUTTER_VIEW_ZONE",n[n.CONTENT_TEXT=6]="CONTENT_TEXT",n[n.CONTENT_EMPTY=7]="CONTENT_EMPTY",n[n.CONTENT_VIEW_ZONE=8]="CONTENT_VIEW_ZONE",n[n.CONTENT_WIDGET=9]="CONTENT_WIDGET",n[n.OVERVIEW_RULER=10]="OVERVIEW_RULER",n[n.SCROLLBAR=11]="SCROLLBAR",n[n.OVERLAY_WIDGET=12]="OVERLAY_WIDGET",n[n.OUTSIDE_EDITOR=13]="OUTSIDE_EDITOR"})(lz||(lz={}));var cz;(function(n){n[n.AIGenerated=1]="AIGenerated"})(cz||(cz={}));var dz;(function(n){n[n.Invoke=0]="Invoke",n[n.Automatic=1]="Automatic"})(dz||(dz={}));var uz;(function(n){n[n.TOP_RIGHT_CORNER=0]="TOP_RIGHT_CORNER",n[n.BOTTOM_RIGHT_CORNER=1]="BOTTOM_RIGHT_CORNER",n[n.TOP_CENTER=2]="TOP_CENTER"})(uz||(uz={}));var hz;(function(n){n[n.Left=1]="Left",n[n.Center=2]="Center",n[n.Right=4]="Right",n[n.Full=7]="Full"})(hz||(hz={}));var fz;(function(n){n[n.Word=0]="Word",n[n.Line=1]="Line",n[n.Suggest=2]="Suggest"})(fz||(fz={}));var gz;(function(n){n[n.Left=0]="Left",n[n.Right=1]="Right",n[n.None=2]="None",n[n.LeftOfInjectedText=3]="LeftOfInjectedText",n[n.RightOfInjectedText=4]="RightOfInjectedText"})(gz||(gz={}));var pz;(function(n){n[n.Off=0]="Off",n[n.On=1]="On",n[n.Relative=2]="Relative",n[n.Interval=3]="Interval",n[n.Custom=4]="Custom"})(pz||(pz={}));var mz;(function(n){n[n.None=0]="None",n[n.Text=1]="Text",n[n.Blocks=2]="Blocks"})(mz||(mz={}));var _z;(function(n){n[n.Smooth=0]="Smooth",n[n.Immediate=1]="Immediate"})(_z||(_z={}));var vz;(function(n){n[n.Auto=1]="Auto",n[n.Hidden=2]="Hidden",n[n.Visible=3]="Visible"})(vz||(vz={}));var bz;(function(n){n[n.LTR=0]="LTR",n[n.RTL=1]="RTL"})(bz||(bz={}));var wz;(function(n){n.Off="off",n.OnCode="onCode",n.On="on"})(wz||(wz={}));var Cz;(function(n){n[n.Invoke=1]="Invoke",n[n.TriggerCharacter=2]="TriggerCharacter",n[n.ContentChange=3]="ContentChange"})(Cz||(Cz={}));var yz;(function(n){n[n.File=0]="File",n[n.Module=1]="Module",n[n.Namespace=2]="Namespace",n[n.Package=3]="Package",n[n.Class=4]="Class",n[n.Method=5]="Method",n[n.Property=6]="Property",n[n.Field=7]="Field",n[n.Constructor=8]="Constructor",n[n.Enum=9]="Enum",n[n.Interface=10]="Interface",n[n.Function=11]="Function",n[n.Variable=12]="Variable",n[n.Constant=13]="Constant",n[n.String=14]="String",n[n.Number=15]="Number",n[n.Boolean=16]="Boolean",n[n.Array=17]="Array",n[n.Object=18]="Object",n[n.Key=19]="Key",n[n.Null=20]="Null",n[n.EnumMember=21]="EnumMember",n[n.Struct=22]="Struct",n[n.Event=23]="Event",n[n.Operator=24]="Operator",n[n.TypeParameter=25]="TypeParameter"})(yz||(yz={}));var Sz;(function(n){n[n.Deprecated=1]="Deprecated"})(Sz||(Sz={}));var xz;(function(n){n[n.Hidden=0]="Hidden",n[n.Blink=1]="Blink",n[n.Smooth=2]="Smooth",n[n.Phase=3]="Phase",n[n.Expand=4]="Expand",n[n.Solid=5]="Solid"})(xz||(xz={}));var Lz;(function(n){n[n.Line=1]="Line",n[n.Block=2]="Block",n[n.Underline=3]="Underline",n[n.LineThin=4]="LineThin",n[n.BlockOutline=5]="BlockOutline",n[n.UnderlineThin=6]="UnderlineThin"})(Lz||(Lz={}));var kz;(function(n){n[n.AlwaysGrowsWhenTypingAtEdges=0]="AlwaysGrowsWhenTypingAtEdges",n[n.NeverGrowsWhenTypingAtEdges=1]="NeverGrowsWhenTypingAtEdges",n[n.GrowsOnlyWhenTypingBefore=2]="GrowsOnlyWhenTypingBefore",n[n.GrowsOnlyWhenTypingAfter=3]="GrowsOnlyWhenTypingAfter"})(kz||(kz={}));var Ez;(function(n){n[n.None=0]="None",n[n.Same=1]="Same",n[n.Indent=2]="Indent",n[n.DeepIndent=3]="DeepIndent"})(Ez||(Ez={}));var Lg;let tKe=(Lg=class{static chord(e,t){return as(e,t)}},Lg.CtrlCmd=2048,Lg.Shift=1024,Lg.Alt=512,Lg.WinCtrl=256,Lg);function d0e(){return{editor:void 0,languages:void 0,CancellationTokenSource:mn,Emitter:X,KeyCode:nz,KeyMod:tKe,Position:Y,Range:M,Selection:$e,SelectionDirection:bz,MarkerSeverity:sz,MarkerTag:rz,Uri:Xe,Token:TI}}function iKe(n,e){const t=n;typeof t.vscodeWindowId!="number"&&Object.defineProperty(t,"vscodeWindowId",{get:()=>e})}const Ei=window;function u0e(n){return n}class nKe{constructor(e,t){this.lastCache=void 0,this.lastArgKey=void 0,typeof e=="function"?(this._fn=e,this._computeKey=u0e):(this._fn=t,this._computeKey=e.getCacheKey)}get(e){const t=this._computeKey(e);return this.lastArgKey!==t&&(this.lastArgKey=t,this.lastCache=this._fn(e)),this.lastCache}}class Loe{get cachedValues(){return this._map}constructor(e,t){this._map=new Map,this._map2=new Map,typeof e=="function"?(this._fn=e,this._computeKey=u0e):(this._fn=t,this._computeKey=e.getCacheKey)}get(e){const t=this._computeKey(e);if(this._map2.has(t))return this._map2.get(t);const i=this._fn(e);return this._map.set(e,i),this._map2.set(t,i),i}}class Wu{constructor(e){this.executor=e,this._didRun=!1}get value(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}}function h0e(n){return!n||typeof n!="string"?!0:n.trim().length===0}const sKe=/{(\d+)}/g;function a0(n,...e){return e.length===0?n:n.replace(sKe,function(t,i){const s=parseInt(i,10);return isNaN(s)||s<0||s>=e.length?t:e[s]})}function rKe(n){return n.replace(/[<>"'&]/g,e=>{switch(e){case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"'":return"&apos;";case"&":return"&amp;"}return e})}function qk(n){return n.replace(/[<>&]/g,function(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return e}})}function $l(n){return n.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function oKe(n,e=" "){const t=RN(n,e);return f0e(t,e)}function RN(n,e){if(!n||!e)return n;const t=e.length;if(t===0||n.length===0)return n;let i=0;for(;n.indexOf(e,i)===i;)i=i+t;return n.substring(i)}function f0e(n,e){if(!n||!e)return n;const t=e.length,i=n.length;if(t===0||i===0)return n;let s=i,r=-1;for(;r=n.lastIndexOf(e,s-1),!(r===-1||r+t!==s);){if(r===0)return"";s=r}return n.substring(0,s)}function aKe(n){return n.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*")}function lKe(n){return n.replace(/\*/g,"")}function g0e(n,e,t={}){if(!n)throw new Error("Cannot create regex from empty string");e||(n=$l(n)),t.wholeWord&&(/\B/.test(n.charAt(0))||(n="\\b"+n),/\B/.test(n.charAt(n.length-1))||(n=n+"\\b"));let i="";return t.global&&(i+="g"),t.matchCase||(i+="i"),t.multiline&&(i+="m"),t.unicode&&(i+="u"),new RegExp(n,i)}function cKe(n){return n.source==="^"||n.source==="^$"||n.source==="$"||n.source==="^\\s*$"?!1:!!(n.exec("")&&n.lastIndex===0)}function mf(n){return n.split(/\r\n|\r|\n/)}function dKe(n){const e=[],t=n.split(/(\r\n|\r|\n)/);for(let i=0;i<Math.ceil(t.length/2);i++)e.push(t[2*i]+(t[2*i+1]??""));return e}function lo(n){for(let e=0,t=n.length;e<t;e++){const i=n.charCodeAt(e);if(i!==32&&i!==9)return e}return-1}function Ni(n,e=0,t=n.length){for(let i=e;i<t;i++){const s=n.charCodeAt(i);if(s!==32&&s!==9)return n.substring(e,i)}return n.substring(e,t)}function Nu(n,e=n.length-1){for(let t=e;t>=0;t--){const i=n.charCodeAt(t);if(i!==32&&i!==9)return t}return-1}function PI(n,e){return n<e?-1:n>e?1:0}function tX(n,e,t=0,i=n.length,s=0,r=e.length){for(;t<i&&s<r;t++,s++){const l=n.charCodeAt(t),c=e.charCodeAt(s);if(l<c)return-1;if(l>c)return 1}const o=i-t,a=r-s;return o<a?-1:o>a?1:0}function Iz(n,e){return AN(n,e,0,n.length,0,e.length)}function AN(n,e,t=0,i=n.length,s=0,r=e.length){for(;t<i&&s<r;t++,s++){let l=n.charCodeAt(t),c=e.charCodeAt(s);if(l===c)continue;if(l>=128||c>=128)return tX(n.toLowerCase(),e.toLowerCase(),t,i,s,r);Cm(l)&&(l-=32),Cm(c)&&(c-=32);const d=l-c;if(d!==0)return d}const o=i-t,a=r-s;return o<a?-1:o>a?1:0}function PR(n){return n>=48&&n<=57}function Cm(n){return n>=97&&n<=122}function Ih(n){return n>=65&&n<=90}function w1(n,e){return n.length===e.length&&AN(n,e)===0}function iX(n,e){const t=e.length;return e.length>n.length?!1:AN(n,e,0,t)===0}function D_(n,e){const t=Math.min(n.length,e.length);let i;for(i=0;i<t;i++)if(n.charCodeAt(i)!==e.charCodeAt(i))return i;return t}function cP(n,e){const t=Math.min(n.length,e.length);let i;const s=n.length-1,r=e.length-1;for(i=0;i<t;i++)if(n.charCodeAt(s-i)!==e.charCodeAt(r-i))return i;return t}function ks(n){return 55296<=n&&n<=56319}function l0(n){return 56320<=n&&n<=57343}function nX(n,e){return(n-55296<<10)+(e-56320)+65536}function dP(n,e,t){const i=n.charCodeAt(t);if(ks(i)&&t+1<e){const s=n.charCodeAt(t+1);if(l0(s))return nX(i,s)}return i}function uKe(n,e){const t=n.charCodeAt(e-1);if(l0(t)&&e>1){const i=n.charCodeAt(e-2);if(ks(i))return nX(i,t)}return t}class sX{get offset(){return this._offset}constructor(e,t=0){this._str=e,this._len=e.length,this._offset=t}setOffset(e){this._offset=e}prevCodePoint(){const e=uKe(this._str,this._offset);return this._offset-=e>=65536?2:1,e}nextCodePoint(){const e=dP(this._str,this._len,this._offset);return this._offset+=e>=65536?2:1,e}eol(){return this._offset>=this._len}}class uP{get offset(){return this._iterator.offset}constructor(e,t=0){this._iterator=new sX(e,t)}nextGraphemeLength(){const e=hP.getInstance(),t=this._iterator,i=t.offset;let s=e.getGraphemeBreakType(t.nextCodePoint());for(;!t.eol();){const r=t.offset,o=e.getGraphemeBreakType(t.nextCodePoint());if(koe(s,o)){t.setOffset(r);break}s=o}return t.offset-i}prevGraphemeLength(){const e=hP.getInstance(),t=this._iterator,i=t.offset;let s=e.getGraphemeBreakType(t.prevCodePoint());for(;t.offset>0;){const r=t.offset,o=e.getGraphemeBreakType(t.prevCodePoint());if(koe(o,s)){t.setOffset(r);break}s=o}return i-t.offset}eol(){return this._iterator.eol()}}function rX(n,e){return new uP(n,e).nextGraphemeLength()}function p0e(n,e){return new uP(n,e).prevGraphemeLength()}function hKe(n,e){e>0&&l0(n.charCodeAt(e))&&e--;const t=e+rX(n,e);return[t-p0e(n,t),t]}let R9;function fKe(){return/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDC7\uFDF0-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE35\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDD23\uDE80-\uDEA9\uDEAD-\uDF45\uDF51-\uDF81\uDF86-\uDFF6]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD4B-\uDFFF]|\uD83B[\uDC00-\uDEBB])/}function DS(n){return R9||(R9=fKe()),R9.test(n)}const gKe=/^[\t\n\r\x20-\x7E]*$/;function MN(n){return gKe.test(n)}const m0e=/[\u2028\u2029]/;function _0e(n){return m0e.test(n)}function N_(n){return n>=11904&&n<=55215||n>=63744&&n<=64255||n>=65281&&n<=65374}function oX(n){return n>=127462&&n<=127487||n===8986||n===8987||n===9200||n===9203||n>=9728&&n<=10175||n===11088||n===11093||n>=127744&&n<=128591||n>=128640&&n<=128764||n>=128992&&n<=129008||n>=129280&&n<=129535||n>=129648&&n<=129782}const pKe="\uFEFF";function aX(n){return!!(n&&n.length>0&&n.charCodeAt(0)===65279)}function mKe(n,e=!1){return n?(e&&(n=n.replace(/\\./g,"")),n.toLowerCase()!==n):!1}function v0e(n){return n=n%(2*26),n<26?String.fromCharCode(97+n):String.fromCharCode(65+n-26)}function koe(n,e){return n===0?e!==5&&e!==7:n===2&&e===3?!1:n===4||n===2||n===3||e===4||e===2||e===3?!0:!(n===8&&(e===8||e===9||e===11||e===12)||(n===11||n===9)&&(e===9||e===10)||(n===12||n===10)&&e===10||e===5||e===13||e===7||n===1||n===13&&e===14||n===6&&e===6)}const hb=class hb{static getInstance(){return hb._INSTANCE||(hb._INSTANCE=new hb),hb._INSTANCE}constructor(){this._data=_Ke()}getGraphemeBreakType(e){if(e<32)return e===10?3:e===13?2:4;if(e<127)return 0;const t=this._data,i=t.length/3;let s=1;for(;s<=i;)if(e<t[3*s])s=2*s;else if(e>t[3*s+1])s=2*s+1;else return t[3*s+2];return 0}};hb._INSTANCE=null;let hP=hb;function _Ke(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}function vKe(n,e){if(n===0)return 0;const t=bKe(n,e);if(t!==void 0)return t;const i=new sX(e,n);return i.prevCodePoint(),i.offset}function bKe(n,e){const t=new sX(e,n);let i=t.prevCodePoint();for(;wKe(i)||i===65039||i===8419;){if(t.offset===0)return;i=t.prevCodePoint()}if(!oX(i))return;let s=t.offset;return s>0&&t.prevCodePoint()===8205&&(s=t.offset),s}function wKe(n){return 127995<=n&&n<=127999}const b0e="",_h=class _h{static getInstance(e){return _h.cache.get(Array.from(e))}static getLocales(){return _h._locales.value}constructor(e){this.confusableDictionary=e}isAmbiguous(e){return this.confusableDictionary.has(e)}getPrimaryConfusable(e){return this.confusableDictionary.get(e)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}};_h.ambiguousCharacterData=new Wu(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}')),_h.cache=new nKe({getCacheKey:JSON.stringify},e=>{function t(d){const u=new Map;for(let h=0;h<d.length;h+=2)u.set(d[h],d[h+1]);return u}function i(d,u){const h=new Map(d);for(const[f,g]of u)h.set(f,g);return h}function s(d,u){if(!d)return u;const h=new Map;for(const[f,g]of d)u.has(f)&&h.set(f,g);return h}const r=_h.ambiguousCharacterData.value;let o=e.filter(d=>!d.startsWith("_")&&d in r);o.length===0&&(o=["_default"]);let a;for(const d of o){const u=t(r[d]);a=s(a,u)}const l=t(r._common),c=i(l,a);return new _h(c)}),_h._locales=new Wu(()=>Object.keys(_h.ambiguousCharacterData.value).filter(e=>!e.startsWith("_")));let OI=_h;const q1=class q1{static getRawData(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static getData(){return this._data||(this._data=new Set(q1.getRawData())),this._data}static isInvisibleCharacter(e){return q1.getData().has(e)}static get codePoints(){return q1.getData()}};q1._data=void 0;let Hb=q1;const o4=class o4{constructor(){this.mapWindowIdToZoomFactor=new Map}getZoomFactor(e){return this.mapWindowIdToZoomFactor.get(this.getWindowId(e))??1}getWindowId(e){return e.vscodeWindowId}};o4.INSTANCE=new o4;let Dz=o4;function w0e(n,e,t){typeof e=="string"&&(e=n.matchMedia(e)),e.addEventListener("change",t)}function CKe(n){return Dz.INSTANCE.getZoomFactor(n)}const kx=navigator.userAgent,Tc=kx.indexOf("Firefox")>=0,Vb=kx.indexOf("AppleWebKit")>=0,PN=kx.indexOf("Chrome")>=0,Yg=!PN&&kx.indexOf("Safari")>=0,C0e=!PN&&!Yg&&Vb;kx.indexOf("Electron/")>=0;const Eoe=kx.indexOf("Android")>=0;let v2=!1;if(typeof Ei.matchMedia=="function"){const n=Ei.matchMedia("(display-mode: standalone) or (display-mode: window-controls-overlay)"),e=Ei.matchMedia("(display-mode: fullscreen)");v2=n.matches,w0e(Ei,n,({matches:t})=>{v2&&e.matches||(v2=t)})}function yKe(){return v2}const lX={clipboard:{writeText:Eu||document.queryCommandSupported&&document.queryCommandSupported("copy")||!!(navigator&&navigator.clipboard&&navigator.clipboard.writeText),readText:Eu||!!(navigator&&navigator.clipboard&&navigator.clipboard.readText)},keyboard:Eu||yKe()?0:navigator.keyboard||Yg?1:2,touch:"ontouchstart"in Ei||navigator.maxTouchPoints>0,pointerEvents:Ei.PointerEvent&&("ontouchstart"in Ei||navigator.maxTouchPoints>0)};function Nz(n,e){if(typeof n=="number"){if(n===0)return null;const t=(n&65535)>>>0,i=(n&4294901760)>>>16;return i!==0?new A9([OR(t,e),OR(i,e)]):new A9([OR(t,e)])}else{const t=[];for(let i=0;i<n.length;i++)t.push(OR(n[i],e));return new A9(t)}}function OR(n,e){const t=!!(n&2048),i=!!(n&256),s=e===2?i:t,r=!!(n&1024),o=!!(n&512),a=e===2?t:i,l=n&255;return new Zg(s,r,o,a,l)}class Zg{constructor(e,t,i,s,r){this.ctrlKey=e,this.shiftKey=t,this.altKey=i,this.metaKey=s,this.keyCode=r}equals(e){return e instanceof Zg&&this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.keyCode===e.keyCode}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}}class A9{constructor(e){if(e.length===0)throw Ec("chords");this.chords=e}}class SKe{constructor(e,t,i,s,r,o){this.ctrlKey=e,this.shiftKey=t,this.altKey=i,this.metaKey=s,this.keyLabel=r,this.keyAriaLabel=o}}class xKe{}function LKe(n){if(n.charCode){const t=String.fromCharCode(n.charCode).toUpperCase();return ag.fromString(t)}const e=n.keyCode;if(e===3)return 7;if(Tc)switch(e){case 59:return 85;case 60:if(Po)return 97;break;case 61:return 86;case 107:return 109;case 109:return 111;case 173:return 88;case 224:if(Bt)return 57;break}else if(Vb){if(Bt&&e===93)return 57;if(!Bt&&e===92)return 57}return Jwe[e]||0}const kKe=Bt?256:2048,EKe=512,IKe=1024,DKe=Bt?2048:256;class Oi{constructor(e){var i;this._standardKeyboardEventBrand=!0;const t=e;this.browserEvent=t,this.target=t.target,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.altGraphKey=(i=t.getModifierState)==null?void 0:i.call(t,"AltGraph"),this.keyCode=LKe(t),this.code=t.code,this.ctrlKey=this.ctrlKey||this.keyCode===5,this.altKey=this.altKey||this.keyCode===6,this.shiftKey=this.shiftKey||this.keyCode===4,this.metaKey=this.metaKey||this.keyCode===57,this._asKeybinding=this._computeKeybinding(),this._asKeyCodeChord=this._computeKeyCodeChord()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeyCodeChord(){return this._asKeyCodeChord}equals(e){return this._asKeybinding===e}_computeKeybinding(){let e=0;this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode);let t=0;return this.ctrlKey&&(t|=kKe),this.altKey&&(t|=EKe),this.shiftKey&&(t|=IKe),this.metaKey&&(t|=DKe),t|=e,t}_computeKeyCodeChord(){let e=0;return this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode),new Zg(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,e)}}const Ioe=new WeakMap;function NKe(n){if(!n.parent||n.parent===n)return null;try{const e=n.location,t=n.parent.location;if(e.origin!=="null"&&t.origin!=="null"&&e.origin!==t.origin)return null}catch{return null}return n.parent}class TKe{static getSameOriginWindowChain(e){let t=Ioe.get(e);if(!t){t=[],Ioe.set(e,t);let i=e,s;do s=NKe(i),s?t.push({window:new WeakRef(i),iframeElement:i.frameElement||null}):t.push({window:new WeakRef(i),iframeElement:null}),i=s;while(i)}return t.slice(0)}static getPositionOfChildWindowRelativeToAncestorWindow(e,t){if(!t||e===t)return{top:0,left:0};let i=0,s=0;const r=this.getSameOriginWindowChain(e);for(const o of r){const a=o.window.deref();if(i+=(a==null?void 0:a.scrollY)??0,s+=(a==null?void 0:a.scrollX)??0,a===t||!o.iframeElement)break;const l=o.iframeElement.getBoundingClientRect();i+=l.top,s+=l.left}return{top:i,left:s}}}class bd{constructor(e,t){this.timestamp=Date.now(),this.browserEvent=t,this.leftButton=t.button===0,this.middleButton=t.button===1,this.rightButton=t.button===2,this.buttons=t.buttons,this.target=t.target,this.detail=t.detail||1,t.type==="dblclick"&&(this.detail=2),this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,typeof t.pageX=="number"?(this.posx=t.pageX,this.posy=t.pageY):(this.posx=t.clientX+this.target.ownerDocument.body.scrollLeft+this.target.ownerDocument.documentElement.scrollLeft,this.posy=t.clientY+this.target.ownerDocument.body.scrollTop+this.target.ownerDocument.documentElement.scrollTop);const i=TKe.getPositionOfChildWindowRelativeToAncestorWindow(e,t.view);this.posx-=i.left,this.posy-=i.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}}class c0{constructor(e,t=0,i=0){var r;this.browserEvent=e||null,this.target=e?e.target||e.targetNode||e.srcElement:null,this.deltaY=i,this.deltaX=t;let s=!1;if(PN){const o=navigator.userAgent.match(/Chrome\/(\d+)/);s=(o?parseInt(o[1]):123)<=122}if(e){const o=e,a=e,l=((r=e.view)==null?void 0:r.devicePixelRatio)||1;if(typeof o.wheelDeltaY<"u")s?this.deltaY=o.wheelDeltaY/(120*l):this.deltaY=o.wheelDeltaY/120;else if(typeof a.VERTICAL_AXIS<"u"&&a.axis===a.VERTICAL_AXIS)this.deltaY=-a.detail/3;else if(e.type==="wheel"){const c=e;c.deltaMode===c.DOM_DELTA_LINE?Tc&&!Bt?this.deltaY=-e.deltaY/3:this.deltaY=-e.deltaY:this.deltaY=-e.deltaY/40}if(typeof o.wheelDeltaX<"u")Yg&&wr?this.deltaX=-(o.wheelDeltaX/120):s?this.deltaX=o.wheelDeltaX/(120*l):this.deltaX=o.wheelDeltaX/120;else if(typeof a.HORIZONTAL_AXIS<"u"&&a.axis===a.HORIZONTAL_AXIS)this.deltaX=-e.detail/3;else if(e.type==="wheel"){const c=e;c.deltaMode===c.DOM_DELTA_LINE?Tc&&!Bt?this.deltaX=-e.deltaX/3:this.deltaX=-e.deltaX:this.deltaX=-e.deltaX/40}this.deltaY===0&&this.deltaX===0&&e.wheelDelta&&(s?this.deltaY=e.wheelDelta/(120*l):this.deltaY=e.wheelDelta/120)}}preventDefault(){var e;(e=this.browserEvent)==null||e.preventDefault()}stopPropagation(){var e;(e=this.browserEvent)==null||e.stopPropagation()}}const y0e=Symbol("MicrotaskDelay");function Tz(n){return!!n&&typeof n.then=="function"}function Ds(n){const e=new mn,t=n(e.token),i=new Promise((s,r)=>{const o=e.token.onCancellationRequested(()=>{o.dispose(),r(new Dd)});Promise.resolve(t).then(a=>{o.dispose(),e.dispose(),s(a)},a=>{o.dispose(),e.dispose(),r(a)})});return new class{cancel(){e.cancel(),e.dispose()}then(s,r){return i.then(s,r)}catch(s){return this.then(void 0,s)}finally(s){return i.finally(s)}}}function ON(n,e,t){return new Promise((i,s)=>{const r=e.onCancellationRequested(()=>{r.dispose(),i(t)});n.then(i,s).finally(()=>r.dispose())})}class RKe{constructor(){this.isDisposed=!1,this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(e){if(this.isDisposed)return Promise.reject(new Error("Throttler is disposed"));if(this.activePromise){if(this.queuedPromiseFactory=e,!this.queuedPromise){const t=()=>{if(this.queuedPromise=null,this.isDisposed)return;const i=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,i};this.queuedPromise=new Promise(i=>{this.activePromise.then(t,t).then(i)})}return new Promise((t,i)=>{this.queuedPromise.then(t,i)})}return this.activePromise=e(),new Promise((t,i)=>{this.activePromise.then(s=>{this.activePromise=null,t(s)},s=>{this.activePromise=null,i(s)})})}dispose(){this.isDisposed=!0}}const AKe=(n,e)=>{let t=!0;const i=setTimeout(()=>{t=!1,e()},n);return{isTriggered:()=>t,dispose:()=>{clearTimeout(i),t=!1}}},MKe=n=>{let e=!0;return queueMicrotask(()=>{e&&(e=!1,n())}),{isTriggered:()=>e,dispose:()=>{e=!1}}};class Rc{constructor(e){this.defaultDelay=e,this.deferred=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(e,t=this.defaultDelay){this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((s,r)=>{this.doResolve=s,this.doReject=r}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){const s=this.task;return this.task=null,s()}}));const i=()=>{var s;this.deferred=null,(s=this.doResolve)==null||s.call(this,null)};return this.deferred=t===y0e?MKe(i):AKe(t,i),this.completionPromise}isTriggered(){var e;return!!((e=this.deferred)!=null&&e.isTriggered())}cancel(){var e;this.cancelTimeout(),this.completionPromise&&((e=this.doReject)==null||e.call(this,new Dd),this.completionPromise=null)}cancelTimeout(){var e;(e=this.deferred)==null||e.dispose(),this.deferred=null}dispose(){this.cancel()}}class S0e{constructor(e){this.delayer=new Rc(e),this.throttler=new RKe}trigger(e,t){return this.delayer.trigger(()=>this.throttler.queue(e),t)}cancel(){this.delayer.cancel()}dispose(){this.delayer.dispose(),this.throttler.dispose()}}function Xg(n,e){return e?new Promise((t,i)=>{const s=setTimeout(()=>{r.dispose(),t()},n),r=e.onCancellationRequested(()=>{clearTimeout(s),r.dispose(),i(new Dd)})}):Ds(t=>Xg(n,t))}function T_(n,e=0,t){const i=setTimeout(()=>{n(),t&&s.dispose()},e),s=Ye(()=>{clearTimeout(i),t==null||t.deleteAndLeak(s)});return t==null||t.add(s),s}function cX(n,e=i=>!!i,t=null){let i=0;const s=n.length,r=()=>{if(i>=s)return Promise.resolve(t);const o=n[i++];return Promise.resolve(o()).then(l=>e(l)?Promise.resolve(l):r())};return r()}class Fd{constructor(e,t){this._isDisposed=!1,this._token=-1,typeof e=="function"&&typeof t=="number"&&this.setIfNotSet(e,t)}dispose(){this.cancel(),this._isDisposed=!0}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,t){if(this._isDisposed)throw new li("Calling 'cancelAndSet' on a disposed TimeoutTimer");this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},t)}setIfNotSet(e,t){if(this._isDisposed)throw new li("Calling 'setIfNotSet' on a disposed TimeoutTimer");this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},t))}}class dX{constructor(){this.disposable=void 0,this.isDisposed=!1}cancel(){var e;(e=this.disposable)==null||e.dispose(),this.disposable=void 0}cancelAndSet(e,t,i=globalThis){if(this.isDisposed)throw new li("Calling 'cancelAndSet' on a disposed IntervalTimer");this.cancel();const s=i.setInterval(()=>{e()},t);this.disposable=Ye(()=>{i.clearInterval(s),this.disposable=void 0})}dispose(){this.cancel(),this.isDisposed=!0}}class yi{constructor(e,t){this.timeoutToken=-1,this.runner=e,this.timeout=t,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(e=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,e)}get delay(){return this.timeout}set delay(e){this.timeout=e}isScheduled(){return this.timeoutToken!==-1}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){var e;(e=this.runner)==null||e.call(this)}}let x0e,Gk;(function(){typeof globalThis.requestIdleCallback!="function"||typeof globalThis.cancelIdleCallback!="function"?Gk=(n,e)=>{Uwe(()=>{if(t)return;const i=Date.now()+15;e(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,i-Date.now())}}))});let t=!1;return{dispose(){t||(t=!0)}}}:Gk=(n,e,t)=>{const i=n.requestIdleCallback(e,typeof t=="number"?{timeout:t}:void 0);let s=!1;return{dispose(){s||(s=!0,n.cancelIdleCallback(i))}}},x0e=n=>Gk(globalThis,n)})();class L0e{constructor(e,t){this._didRun=!1,this._executor=()=>{try{this._value=t()}catch(i){this._error=i}finally{this._didRun=!0}},this._handle=Gk(e,()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}}class PKe extends L0e{constructor(e){super(globalThis,e)}}class Ex{get isRejected(){var e;return((e=this.outcome)==null?void 0:e.outcome)===1}get isSettled(){return!!this.outcome}constructor(){this.p=new Promise((e,t)=>{this.completeCallback=e,this.errorCallback=t})}complete(e){return new Promise(t=>{this.completeCallback(e),this.outcome={outcome:0,value:e},t()})}error(e){return new Promise(t=>{this.errorCallback(e),this.outcome={outcome:1,value:e},t()})}cancel(){return this.error(new Dd)}}var Rz;(function(n){async function e(i){let s;const r=await Promise.all(i.map(o=>o.then(a=>a,a=>{s||(s=a)})));if(typeof s<"u")throw s;return r}n.settled=e;function t(i){return new Promise(async(s,r)=>{try{await i(s,r)}catch(o){r(o)}})}n.withAsyncBody=t})(Rz||(Rz={}));const Ta=class Ta{static fromArray(e){return new Ta(t=>{t.emitMany(e)})}static fromPromise(e){return new Ta(async t=>{t.emitMany(await e)})}static fromPromises(e){return new Ta(async t=>{await Promise.all(e.map(async i=>t.emitOne(await i)))})}static merge(e){return new Ta(async t=>{await Promise.all(e.map(async i=>{for await(const s of i)t.emitOne(s)}))})}constructor(e,t){this._state=0,this._results=[],this._error=null,this._onReturn=t,this._onStateChanged=new X,queueMicrotask(async()=>{const i={emitOne:s=>this.emitOne(s),emitMany:s=>this.emitMany(s),reject:s=>this.reject(s)};try{await Promise.resolve(e(i)),this.resolve()}catch(s){this.reject(s)}finally{i.emitOne=void 0,i.emitMany=void 0,i.reject=void 0}})}[Symbol.asyncIterator](){let e=0;return{next:async()=>{do{if(this._state===2)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(this._state===1)return{done:!0,value:void 0};await Ee.toPromise(this._onStateChanged.event)}while(!0)},return:async()=>{var t;return(t=this._onReturn)==null||t.call(this),{done:!0,value:void 0}}}}static map(e,t){return new Ta(async i=>{for await(const s of e)i.emitOne(t(s))})}map(e){return Ta.map(this,e)}static filter(e,t){return new Ta(async i=>{for await(const s of e)t(s)&&i.emitOne(s)})}filter(e){return Ta.filter(this,e)}static coalesce(e){return Ta.filter(e,t=>!!t)}coalesce(){return Ta.coalesce(this)}static async toPromise(e){const t=[];for await(const i of e)t.push(i);return t}toPromise(){return Ta.toPromise(this)}emitOne(e){this._state===0&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){this._state===0&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(e){this._state===0&&(this._state=2,this._error=e,this._onStateChanged.fire())}};Ta.EMPTY=Ta.fromArray([]);let Ml=Ta;class OKe extends Ml{constructor(e,t){super(t),this._source=e}cancel(){this._source.cancel()}}function FKe(n){const e=new mn,t=n(e.token);return new OKe(e,async i=>{const s=e.token.onCancellationRequested(()=>{s.dispose(),e.dispose(),i.reject(new Dd)});try{for await(const r of t){if(e.token.isCancellationRequested)return;i.emitOne(r)}s.dispose(),e.dispose()}catch(r){s.dispose(),e.dispose(),i.reject(r)}})}/*! @license DOMPurify 3.1.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.7/LICENSE */const{entries:k0e,setPrototypeOf:Doe,isFrozen:BKe,getPrototypeOf:WKe,getOwnPropertyDescriptor:HKe}=Object;let{freeze:tl,seal:Nd,create:E0e}=Object,{apply:Az,construct:Mz}=typeof Reflect<"u"&&Reflect;tl||(tl=function(e){return e});Nd||(Nd=function(e){return e});Az||(Az=function(e,t,i){return e.apply(t,i)});Mz||(Mz=function(e,t){return new e(...t)});const FR=Ac(Array.prototype.forEach),Noe=Ac(Array.prototype.pop),kL=Ac(Array.prototype.push),b2=Ac(String.prototype.toLowerCase),M9=Ac(String.prototype.toString),Toe=Ac(String.prototype.match),EL=Ac(String.prototype.replace),VKe=Ac(String.prototype.indexOf),zKe=Ac(String.prototype.trim),Jd=Ac(Object.prototype.hasOwnProperty),Ia=Ac(RegExp.prototype.test),IL=UKe(TypeError);function Ac(n){return function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];return Az(n,e,i)}}function UKe(n){return function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return Mz(n,t)}}function Ai(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:b2;Doe&&Doe(n,null);let i=e.length;for(;i--;){let s=e[i];if(typeof s=="string"){const r=t(s);r!==s&&(BKe(e)||(e[i]=r),s=r)}n[s]=!0}return n}function $Ke(n){for(let e=0;e<n.length;e++)Jd(n,e)||(n[e]=null);return n}function Uv(n){const e=E0e(null);for(const[t,i]of k0e(n))Jd(n,t)&&(Array.isArray(i)?e[t]=$Ke(i):i&&typeof i=="object"&&i.constructor===Object?e[t]=Uv(i):e[t]=i);return e}function DL(n,e){for(;n!==null;){const i=HKe(n,e);if(i){if(i.get)return Ac(i.get);if(typeof i.value=="function")return Ac(i.value)}n=WKe(n)}function t(){return null}return t}const Roe=tl(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),P9=tl(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),O9=tl(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),jKe=tl(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),F9=tl(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),KKe=tl(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Aoe=tl(["#text"]),Moe=tl(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),B9=tl(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Poe=tl(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),BR=tl(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),qKe=Nd(/\{\{[\w\W]*|[\w\W]*\}\}/gm),GKe=Nd(/<%[\w\W]*|[\w\W]*%>/gm),YKe=Nd(/\${[\w\W]*}/gm),ZKe=Nd(/^data-[\-\w.\u00B7-\uFFFF]/),XKe=Nd(/^aria-[\-\w]+$/),I0e=Nd(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),QKe=Nd(/^(?:\w+script|data):/i),JKe=Nd(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),D0e=Nd(/^html$/i),eqe=Nd(/^[a-z][.\w]*(-[.\w]+)+$/i);var Ooe=Object.freeze({__proto__:null,MUSTACHE_EXPR:qKe,ERB_EXPR:GKe,TMPLIT_EXPR:YKe,DATA_ATTR:ZKe,ARIA_ATTR:XKe,IS_ALLOWED_URI:I0e,IS_SCRIPT_OR_DATA:QKe,ATTR_WHITESPACE:JKe,DOCTYPE_NAME:D0e,CUSTOM_ELEMENT:eqe});const NL={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},tqe=function(){return typeof window>"u"?null:window},iqe=function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let i=null;const s="data-tt-policy-suffix";t&&t.hasAttribute(s)&&(i=t.getAttribute(s));const r="dompurify"+(i?"#"+i:"");try{return e.createPolicy(r,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+r+" could not be created."),null}};function N0e(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:tqe();const e=Et=>N0e(Et);if(e.version="3.1.7",e.removed=[],!n||!n.document||n.document.nodeType!==NL.document)return e.isSupported=!1,e;let{document:t}=n;const i=t,s=i.currentScript,{DocumentFragment:r,HTMLTemplateElement:o,Node:a,Element:l,NodeFilter:c,NamedNodeMap:d=n.NamedNodeMap||n.MozNamedAttrMap,HTMLFormElement:u,DOMParser:h,trustedTypes:f}=n,g=l.prototype,p=DL(g,"cloneNode"),_=DL(g,"remove"),w=DL(g,"nextSibling"),b=DL(g,"childNodes"),y=DL(g,"parentNode");if(typeof o=="function"){const Et=t.createElement("template");Et.content&&Et.content.ownerDocument&&(t=Et.content.ownerDocument)}let S,x="";const{implementation:E,createNodeIterator:D,createDocumentFragment:N,getElementsByTagName:I}=t,{importNode:H}=i;let z={};e.isSupported=typeof k0e=="function"&&typeof y=="function"&&E&&E.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:G,ERB_EXPR:J,TMPLIT_EXPR:j,DATA_ATTR:ne,ARIA_ATTR:oe,IS_SCRIPT_OR_DATA:ve,ATTR_WHITESPACE:te,CUSTOM_ELEMENT:ce}=Ooe;let{IS_ALLOWED_URI:Ie}=Ooe,Ce=null;const it=Ai({},[...Roe,...P9,...O9,...F9,...Aoe]);let He=null;const dt=Ai({},[...Moe,...B9,...Poe,...BR]);let P=Object.seal(E0e(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),$=null,Z=null,ae=!0,Le=!0,Ae=!1,Ue=!0,qe=!1,vt=!0,Ot=!1,on=!1,Cs=!1,Rn=!1,ya=!1,es=!1,or=!0,Ur=!1;const jc="user-content-";let $o=!0,Hd=!1,Sr={},dl=null;const xr=Ai({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ul=null;const $r=Ai({},["audio","video","img","source","image","track"]);let jo=null;const ar=Ai({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ho="http://www.w3.org/1998/Math/MathML",Ko="http://www.w3.org/2000/svg",qn="http://www.w3.org/1999/xhtml";let qs=qn,Lr=!1,fo=null;const ht=Ai({},[ho,Ko,qn],M9);let zi=null;const hn=["application/xhtml+xml","text/html"],go="text/html";let Qi=null,Sa=null;const uv=t.createElement("form"),iC=function(fe){return fe instanceof RegExp||fe instanceof Function},hv=function(){let fe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Sa&&Sa===fe)){if((!fe||typeof fe!="object")&&(fe={}),fe=Uv(fe),zi=hn.indexOf(fe.PARSER_MEDIA_TYPE)===-1?go:fe.PARSER_MEDIA_TYPE,Qi=zi==="application/xhtml+xml"?M9:b2,Ce=Jd(fe,"ALLOWED_TAGS")?Ai({},fe.ALLOWED_TAGS,Qi):it,He=Jd(fe,"ALLOWED_ATTR")?Ai({},fe.ALLOWED_ATTR,Qi):dt,fo=Jd(fe,"ALLOWED_NAMESPACES")?Ai({},fe.ALLOWED_NAMESPACES,M9):ht,jo=Jd(fe,"ADD_URI_SAFE_ATTR")?Ai(Uv(ar),fe.ADD_URI_SAFE_ATTR,Qi):ar,ul=Jd(fe,"ADD_DATA_URI_TAGS")?Ai(Uv($r),fe.ADD_DATA_URI_TAGS,Qi):$r,dl=Jd(fe,"FORBID_CONTENTS")?Ai({},fe.FORBID_CONTENTS,Qi):xr,$=Jd(fe,"FORBID_TAGS")?Ai({},fe.FORBID_TAGS,Qi):{},Z=Jd(fe,"FORBID_ATTR")?Ai({},fe.FORBID_ATTR,Qi):{},Sr=Jd(fe,"USE_PROFILES")?fe.USE_PROFILES:!1,ae=fe.ALLOW_ARIA_ATTR!==!1,Le=fe.ALLOW_DATA_ATTR!==!1,Ae=fe.ALLOW_UNKNOWN_PROTOCOLS||!1,Ue=fe.ALLOW_SELF_CLOSE_IN_ATTR!==!1,qe=fe.SAFE_FOR_TEMPLATES||!1,vt=fe.SAFE_FOR_XML!==!1,Ot=fe.WHOLE_DOCUMENT||!1,Rn=fe.RETURN_DOM||!1,ya=fe.RETURN_DOM_FRAGMENT||!1,es=fe.RETURN_TRUSTED_TYPE||!1,Cs=fe.FORCE_BODY||!1,or=fe.SANITIZE_DOM!==!1,Ur=fe.SANITIZE_NAMED_PROPS||!1,$o=fe.KEEP_CONTENT!==!1,Hd=fe.IN_PLACE||!1,Ie=fe.ALLOWED_URI_REGEXP||I0e,qs=fe.NAMESPACE||qn,P=fe.CUSTOM_ELEMENT_HANDLING||{},fe.CUSTOM_ELEMENT_HANDLING&&iC(fe.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(P.tagNameCheck=fe.CUSTOM_ELEMENT_HANDLING.tagNameCheck),fe.CUSTOM_ELEMENT_HANDLING&&iC(fe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(P.attributeNameCheck=fe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),fe.CUSTOM_ELEMENT_HANDLING&&typeof fe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(P.allowCustomizedBuiltInElements=fe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),qe&&(Le=!1),ya&&(Rn=!0),Sr&&(Ce=Ai({},Aoe),He=[],Sr.html===!0&&(Ai(Ce,Roe),Ai(He,Moe)),Sr.svg===!0&&(Ai(Ce,P9),Ai(He,B9),Ai(He,BR)),Sr.svgFilters===!0&&(Ai(Ce,O9),Ai(He,B9),Ai(He,BR)),Sr.mathMl===!0&&(Ai(Ce,F9),Ai(He,Poe),Ai(He,BR))),fe.ADD_TAGS&&(Ce===it&&(Ce=Uv(Ce)),Ai(Ce,fe.ADD_TAGS,Qi)),fe.ADD_ATTR&&(He===dt&&(He=Uv(He)),Ai(He,fe.ADD_ATTR,Qi)),fe.ADD_URI_SAFE_ATTR&&Ai(jo,fe.ADD_URI_SAFE_ATTR,Qi),fe.FORBID_CONTENTS&&(dl===xr&&(dl=Uv(dl)),Ai(dl,fe.FORBID_CONTENTS,Qi)),$o&&(Ce["#text"]=!0),Ot&&Ai(Ce,["html","head","body"]),Ce.table&&(Ai(Ce,["tbody"]),delete $.tbody),fe.TRUSTED_TYPES_POLICY){if(typeof fe.TRUSTED_TYPES_POLICY.createHTML!="function")throw IL('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof fe.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw IL('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');S=fe.TRUSTED_TYPES_POLICY,x=S.createHTML("")}else S===void 0&&(S=iqe(f,s)),S!==null&&typeof x=="string"&&(x=S.createHTML(""));tl&&tl(fe),Sa=fe}},Kt=Ai({},["mi","mo","mn","ms","mtext"]),U=Ai({},["annotation-xml"]),q=Ai({},["title","style","font","a","script"]),Q=Ai({},[...P9,...O9,...jKe]),se=Ai({},[...F9,...KKe]),de=function(fe){let et=y(fe);(!et||!et.tagName)&&(et={namespaceURI:qs,tagName:"template"});const Ct=b2(fe.tagName),bn=b2(et.tagName);return fo[fe.namespaceURI]?fe.namespaceURI===Ko?et.namespaceURI===qn?Ct==="svg":et.namespaceURI===ho?Ct==="svg"&&(bn==="annotation-xml"||Kt[bn]):!!Q[Ct]:fe.namespaceURI===ho?et.namespaceURI===qn?Ct==="math":et.namespaceURI===Ko?Ct==="math"&&U[bn]:!!se[Ct]:fe.namespaceURI===qn?et.namespaceURI===Ko&&!U[bn]||et.namespaceURI===ho&&!Kt[bn]?!1:!se[Ct]&&(q[Ct]||!Q[Ct]):!!(zi==="application/xhtml+xml"&&fo[fe.namespaceURI]):!1},be=function(fe){kL(e.removed,{element:fe});try{y(fe).removeChild(fe)}catch{_(fe)}},Ne=function(fe,et){try{kL(e.removed,{attribute:et.getAttributeNode(fe),from:et})}catch{kL(e.removed,{attribute:null,from:et})}if(et.removeAttribute(fe),fe==="is"&&!He[fe])if(Rn||ya)try{be(et)}catch{}else try{et.setAttribute(fe,"")}catch{}},tt=function(fe){let et=null,Ct=null;if(Cs)fe="<remove></remove>"+fe;else{const Ms=Toe(fe,/^[\r\n\t ]+/);Ct=Ms&&Ms[0]}zi==="application/xhtml+xml"&&qs===qn&&(fe='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+fe+"</body></html>");const bn=S?S.createHTML(fe):fe;if(qs===qn)try{et=new h().parseFromString(bn,zi)}catch{}if(!et||!et.documentElement){et=E.createDocument(qs,"template",null);try{et.documentElement.innerHTML=Lr?x:bn}catch{}}const Kr=et.body||et.documentElement;return fe&&Ct&&Kr.insertBefore(t.createTextNode(Ct),Kr.childNodes[0]||null),qs===qn?I.call(et,Ot?"html":"body")[0]:Ot?et.documentElement:Kr},ut=function(fe){return D.call(fe.ownerDocument||fe,fe,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},Ut=function(fe){return fe instanceof u&&(typeof fe.nodeName!="string"||typeof fe.textContent!="string"||typeof fe.removeChild!="function"||!(fe.attributes instanceof d)||typeof fe.removeAttribute!="function"||typeof fe.setAttribute!="function"||typeof fe.namespaceURI!="string"||typeof fe.insertBefore!="function"||typeof fe.hasChildNodes!="function")},Si=function(fe){return typeof a=="function"&&fe instanceof a},Ii=function(fe,et,Ct){z[fe]&&FR(z[fe],bn=>{bn.call(e,et,Ct,Sa)})},yn=function(fe){let et=null;if(Ii("beforeSanitizeElements",fe,null),Ut(fe))return be(fe),!0;const Ct=Qi(fe.nodeName);if(Ii("uponSanitizeElement",fe,{tagName:Ct,allowedTags:Ce}),fe.hasChildNodes()&&!Si(fe.firstElementChild)&&Ia(/<[/\w]/g,fe.innerHTML)&&Ia(/<[/\w]/g,fe.textContent)||fe.nodeType===NL.progressingInstruction||vt&&fe.nodeType===NL.comment&&Ia(/<[/\w]/g,fe.data))return be(fe),!0;if(!Ce[Ct]||$[Ct]){if(!$[Ct]&&jr(Ct)&&(P.tagNameCheck instanceof RegExp&&Ia(P.tagNameCheck,Ct)||P.tagNameCheck instanceof Function&&P.tagNameCheck(Ct)))return!1;if($o&&!dl[Ct]){const bn=y(fe)||fe.parentNode,Kr=b(fe)||fe.childNodes;if(Kr&&bn){const Ms=Kr.length;for(let qo=Ms-1;qo>=0;--qo){const Kc=p(Kr[qo],!0);Kc.__removalCount=(fe.__removalCount||0)+1,bn.insertBefore(Kc,w(fe))}}}return be(fe),!0}return fe instanceof l&&!de(fe)||(Ct==="noscript"||Ct==="noembed"||Ct==="noframes")&&Ia(/<\/no(script|embed|frames)/i,fe.innerHTML)?(be(fe),!0):(qe&&fe.nodeType===NL.text&&(et=fe.textContent,FR([G,J,j],bn=>{et=EL(et,bn," ")}),fe.textContent!==et&&(kL(e.removed,{element:fe.cloneNode()}),fe.textContent=et)),Ii("afterSanitizeElements",fe,null),!1)},Sn=function(fe,et,Ct){if(or&&(et==="id"||et==="name")&&(Ct in t||Ct in uv))return!1;if(!(Le&&!Z[et]&&Ia(ne,et))){if(!(ae&&Ia(oe,et))){if(!He[et]||Z[et]){if(!(jr(fe)&&(P.tagNameCheck instanceof RegExp&&Ia(P.tagNameCheck,fe)||P.tagNameCheck instanceof Function&&P.tagNameCheck(fe))&&(P.attributeNameCheck instanceof RegExp&&Ia(P.attributeNameCheck,et)||P.attributeNameCheck instanceof Function&&P.attributeNameCheck(et))||et==="is"&&P.allowCustomizedBuiltInElements&&(P.tagNameCheck instanceof RegExp&&Ia(P.tagNameCheck,Ct)||P.tagNameCheck instanceof Function&&P.tagNameCheck(Ct))))return!1}else if(!jo[et]){if(!Ia(Ie,EL(Ct,te,""))){if(!((et==="src"||et==="xlink:href"||et==="href")&&fe!=="script"&&VKe(Ct,"data:")===0&&ul[fe])){if(!(Ae&&!Ia(ve,EL(Ct,te,"")))){if(Ct)return!1}}}}}}return!0},jr=function(fe){return fe!=="annotation-xml"&&Toe(fe,ce)},xa=function(fe){Ii("beforeSanitizeAttributes",fe,null);const{attributes:et}=fe;if(!et)return;const Ct={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:He};let bn=et.length;for(;bn--;){const Kr=et[bn],{name:Ms,namespaceURI:qo,value:Kc}=Kr,gv=Qi(Ms);let qr=Ms==="value"?Kc:zKe(Kc);if(Ct.attrName=gv,Ct.attrValue=qr,Ct.keepAttr=!0,Ct.forceKeepAttr=void 0,Ii("uponSanitizeAttribute",fe,Ct),qr=Ct.attrValue,Ct.forceKeepAttr||(Ne(Ms,fe),!Ct.keepAttr))continue;if(!Ue&&Ia(/\/>/i,qr)){Ne(Ms,fe);continue}qe&&FR([G,J,j],eL=>{qr=EL(qr,eL," ")});const Jx=Qi(fe.nodeName);if(Sn(Jx,gv,qr)){if(Ur&&(gv==="id"||gv==="name")&&(Ne(Ms,fe),qr=jc+qr),vt&&Ia(/((--!?|])>)|<\/(style|title)/i,qr)){Ne(Ms,fe);continue}if(S&&typeof f=="object"&&typeof f.getAttributeType=="function"&&!qo)switch(f.getAttributeType(Jx,gv)){case"TrustedHTML":{qr=S.createHTML(qr);break}case"TrustedScriptURL":{qr=S.createScriptURL(qr);break}}try{qo?fe.setAttributeNS(qo,Ms,qr):fe.setAttribute(Ms,qr),Ut(fe)?be(fe):Noe(e.removed)}catch{}}}Ii("afterSanitizeAttributes",fe,null)},fv=function Et(fe){let et=null;const Ct=ut(fe);for(Ii("beforeSanitizeShadowDOM",fe,null);et=Ct.nextNode();)Ii("uponSanitizeShadowNode",et,null),!yn(et)&&(et.content instanceof r&&Et(et.content),xa(et));Ii("afterSanitizeShadowDOM",fe,null)};return e.sanitize=function(Et){let fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},et=null,Ct=null,bn=null,Kr=null;if(Lr=!Et,Lr&&(Et="<!-->"),typeof Et!="string"&&!Si(Et))if(typeof Et.toString=="function"){if(Et=Et.toString(),typeof Et!="string")throw IL("dirty is not a string, aborting")}else throw IL("toString is not a function");if(!e.isSupported)return Et;if(on||hv(fe),e.removed=[],typeof Et=="string"&&(Hd=!1),Hd){if(Et.nodeName){const Kc=Qi(Et.nodeName);if(!Ce[Kc]||$[Kc])throw IL("root node is forbidden and cannot be sanitized in-place")}}else if(Et instanceof a)et=tt("<!---->"),Ct=et.ownerDocument.importNode(Et,!0),Ct.nodeType===NL.element&&Ct.nodeName==="BODY"||Ct.nodeName==="HTML"?et=Ct:et.appendChild(Ct);else{if(!Rn&&!qe&&!Ot&&Et.indexOf("<")===-1)return S&&es?S.createHTML(Et):Et;if(et=tt(Et),!et)return Rn?null:es?x:""}et&&Cs&&be(et.firstChild);const Ms=ut(Hd?Et:et);for(;bn=Ms.nextNode();)yn(bn)||(bn.content instanceof r&&fv(bn.content),xa(bn));if(Hd)return Et;if(Rn){if(ya)for(Kr=N.call(et.ownerDocument);et.firstChild;)Kr.appendChild(et.firstChild);else Kr=et;return(He.shadowroot||He.shadowrootmode)&&(Kr=H.call(i,Kr,!0)),Kr}let qo=Ot?et.outerHTML:et.innerHTML;return Ot&&Ce["!doctype"]&&et.ownerDocument&&et.ownerDocument.doctype&&et.ownerDocument.doctype.name&&Ia(D0e,et.ownerDocument.doctype.name)&&(qo="<!DOCTYPE "+et.ownerDocument.doctype.name+`>
`+qo),qe&&FR([G,J,j],Kc=>{qo=EL(qo,Kc," ")}),S&&es?S.createHTML(qo):qo},e.setConfig=function(){let Et=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};hv(Et),on=!0},e.clearConfig=function(){Sa=null,on=!1},e.isValidAttribute=function(Et,fe,et){Sa||hv({});const Ct=Qi(Et),bn=Qi(fe);return Sn(Ct,bn,et)},e.addHook=function(Et,fe){typeof fe=="function"&&(z[Et]=z[Et]||[],kL(z[Et],fe))},e.removeHook=function(Et){if(z[Et])return Noe(z[Et])},e.removeHooks=function(Et){z[Et]&&(z[Et]=[])},e.removeAllHooks=function(){z={}},e}var _f=N0e();_f.version;_f.isSupported;const T0e=_f.sanitize;_f.setConfig;_f.clearConfig;_f.isValidAttribute;const R0e=_f.addHook,A0e=_f.removeHook;_f.removeHooks;_f.removeAllHooks;var mt;(function(n){n.inMemory="inmemory",n.vscode="vscode",n.internal="private",n.walkThrough="walkThrough",n.walkThroughSnippet="walkThroughSnippet",n.http="http",n.https="https",n.file="file",n.mailto="mailto",n.untitled="untitled",n.data="data",n.command="command",n.vscodeRemote="vscode-remote",n.vscodeRemoteResource="vscode-remote-resource",n.vscodeManagedRemoteResource="vscode-managed-remote-resource",n.vscodeUserData="vscode-userdata",n.vscodeCustomEditor="vscode-custom-editor",n.vscodeNotebookCell="vscode-notebook-cell",n.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",n.vscodeNotebookCellMetadataDiff="vscode-notebook-cell-metadata-diff",n.vscodeNotebookCellOutput="vscode-notebook-cell-output",n.vscodeNotebookCellOutputDiff="vscode-notebook-cell-output-diff",n.vscodeNotebookMetadata="vscode-notebook-metadata",n.vscodeInteractiveInput="vscode-interactive-input",n.vscodeSettings="vscode-settings",n.vscodeWorkspaceTrust="vscode-workspace-trust",n.vscodeTerminal="vscode-terminal",n.vscodeChatCodeBlock="vscode-chat-code-block",n.vscodeChatCodeCompareBlock="vscode-chat-code-compare-block",n.vscodeChatSesssion="vscode-chat-editor",n.webviewPanel="webview-panel",n.vscodeWebview="vscode-webview",n.extension="extension",n.vscodeFileResource="vscode-file",n.tmp="tmp",n.vsls="vsls",n.vscodeSourceControl="vscode-scm",n.commentsInput="comment",n.codeSetting="code-setting",n.outputChannel="output"})(mt||(mt={}));function O3(n,e){return Xe.isUri(n)?w1(n.scheme,e):iX(n,e+":")}function Pz(n,...e){return e.some(t=>O3(n,t))}const nqe="tkn";class sqe{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null,this._serverRootPath="/"}setPreferredWebSchema(e){this._preferredWebSchema=e}get _remoteResourcesPath(){return Qn.join(this._serverRootPath,mt.vscodeRemoteResource)}rewrite(e){if(this._delegate)try{return this._delegate(e)}catch(a){return pt(a),e}const t=e.authority;let i=this._hosts[t];i&&i.indexOf(":")!==-1&&i.indexOf("[")===-1&&(i=`[${i}]`);const s=this._ports[t],r=this._connectionTokens[t];let o=`path=${encodeURIComponent(e.path)}`;return typeof r=="string"&&(o+=`&${nqe}=${encodeURIComponent(r)}`),Xe.from({scheme:B0?this._preferredWebSchema:mt.vscodeRemoteResource,authority:`${i}:${s}`,path:this._remoteResourcesPath,query:o})}}const M0e=new sqe,rqe="vscode-app",RE=class RE{asBrowserUri(e){const t=this.toUri(e);return this.uriToBrowserUri(t)}uriToBrowserUri(e){return e.scheme===mt.vscodeRemote?M0e.rewrite(e):e.scheme===mt.file&&(Eu||h$e===`${mt.vscodeFileResource}://${RE.FALLBACK_AUTHORITY}`)?e.with({scheme:mt.vscodeFileResource,authority:e.authority||RE.FALLBACK_AUTHORITY,query:null,fragment:null}):e}toUri(e,t){if(Xe.isUri(e))return e;if(globalThis._VSCODE_FILE_ROOT){const i=globalThis._VSCODE_FILE_ROOT;if(/^\w[\w\d+.-]*:\/\//.test(i))return Xe.joinPath(Xe.parse(i,!0),e);const s=Oje(i,e);return Xe.file(s)}return Xe.parse(t.toUrl(e))}};RE.FALLBACK_AUTHORITY=rqe;let Oz=RE;const F3=new Oz;var Fz;(function(n){const e=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);n.CoopAndCoep=Object.freeze(e.get("3"));const t="vscode-coi";function i(r){let o;typeof r=="string"?o=new URL(r).searchParams:r instanceof URL?o=r.searchParams:Xe.isUri(r)&&(o=new URL(r.toString(!0)).searchParams);const a=o==null?void 0:o.get(t);if(a)return e.get(a)}n.getHeadersFromQuery=i;function s(r,o,a){if(!globalThis.crossOriginIsolated)return;const l=o&&a?"3":a?"2":"1";r instanceof URLSearchParams?r.set(t,l):r[t]=l}n.addSearchParam=s})(Fz||(Fz={}));function B3(n){return W3(n,0)}function W3(n,e){switch(typeof n){case"object":return n===null?mg(349,e):Array.isArray(n)?aqe(n,e):lqe(n,e);case"string":return uX(n,e);case"boolean":return oqe(n,e);case"number":return mg(n,e);case"undefined":return mg(937,e);default:return mg(617,e)}}function mg(n,e){return(e<<5)-e+n|0}function oqe(n,e){return mg(n?433:863,e)}function uX(n,e){e=mg(149417,e);for(let t=0,i=n.length;t<i;t++)e=mg(n.charCodeAt(t),e);return e}function aqe(n,e){return e=mg(104579,e),n.reduce((t,i)=>W3(i,t),e)}function lqe(n,e){return e=mg(181387,e),Object.keys(n).sort().reduce((t,i)=>(t=uX(i,t),W3(n[i],t)),e)}function W9(n,e,t=32){const i=t-e,s=~((1<<i)-1);return(n<<e|(s&n)>>>i)>>>0}function Foe(n,e=0,t=n.byteLength,i=0){for(let s=0;s<t;s++)n[e+s]=i}function cqe(n,e,t="0"){for(;n.length<e;)n=t+n;return n}function TL(n,e=32){return n instanceof ArrayBuffer?Array.from(new Uint8Array(n)).map(t=>t.toString(16).padStart(2,"0")).join(""):cqe((n>>>0).toString(16),e/4)}const a4=class a4{constructor(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(67),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._leftoverHighSurrogate=0,this._finished=!1}update(e){const t=e.length;if(t===0)return;const i=this._buff;let s=this._buffLen,r=this._leftoverHighSurrogate,o,a;for(r!==0?(o=r,a=-1,r=0):(o=e.charCodeAt(0),a=0);;){let l=o;if(ks(o))if(a+1<t){const c=e.charCodeAt(a+1);l0(c)?(a++,l=nX(o,c)):l=65533}else{r=o;break}else l0(o)&&(l=65533);if(s=this._push(i,s,l),a++,a<t)o=e.charCodeAt(a);else break}this._buffLen=s,this._leftoverHighSurrogate=r}_push(e,t,i){return i<128?e[t++]=i:i<2048?(e[t++]=192|(i&1984)>>>6,e[t++]=128|(i&63)>>>0):i<65536?(e[t++]=224|(i&61440)>>>12,e[t++]=128|(i&4032)>>>6,e[t++]=128|(i&63)>>>0):(e[t++]=240|(i&1835008)>>>18,e[t++]=128|(i&258048)>>>12,e[t++]=128|(i&4032)>>>6,e[t++]=128|(i&63)>>>0),t>=64&&(this._step(),t-=64,this._totalLen+=64,e[0]=e[64],e[1]=e[65],e[2]=e[66]),t}digest(){return this._finished||(this._finished=!0,this._leftoverHighSurrogate&&(this._leftoverHighSurrogate=0,this._buffLen=this._push(this._buff,this._buffLen,65533)),this._totalLen+=this._buffLen,this._wrapUp()),TL(this._h0)+TL(this._h1)+TL(this._h2)+TL(this._h3)+TL(this._h4)}_wrapUp(){this._buff[this._buffLen++]=128,Foe(this._buff,this._buffLen),this._buffLen>56&&(this._step(),Foe(this._buff));const e=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(e/4294967296),!1),this._buffDV.setUint32(60,e%4294967296,!1),this._step()}_step(){const e=a4._bigBlock32,t=this._buffDV;for(let u=0;u<64;u+=4)e.setUint32(u,t.getUint32(u,!1),!1);for(let u=64;u<320;u+=4)e.setUint32(u,W9(e.getUint32(u-12,!1)^e.getUint32(u-32,!1)^e.getUint32(u-56,!1)^e.getUint32(u-64,!1),1),!1);let i=this._h0,s=this._h1,r=this._h2,o=this._h3,a=this._h4,l,c,d;for(let u=0;u<80;u++)u<20?(l=s&r|~s&o,c=1518500249):u<40?(l=s^r^o,c=1859775393):u<60?(l=s&r|s&o|r&o,c=2400959708):(l=s^r^o,c=3395469782),d=W9(i,5)+l+a+c+e.getUint32(u*4,!1)&4294967295,a=o,o=r,r=W9(s,30),s=i,i=d;this._h0=this._h0+i&4294967295,this._h1=this._h1+s&4294967295,this._h2=this._h2+r&4294967295,this._h3=this._h3+o&4294967295,this._h4=this._h4+a&4294967295}};a4._bigBlock32=new DataView(new ArrayBuffer(320));let Bz=a4;const{registerWindow:OEt,getWindow:nt,getDocument:FEt,getWindows:P0e,getWindowsCount:dqe,getWindowId:fP,getWindowById:Boe,hasWindow:BEt,onDidRegisterWindow:H3,onWillUnregisterWindow:uqe,onDidUnregisterWindow:hqe}=function(){const n=new Map;iKe(Ei,1);const e={window:Ei,disposables:new ue};n.set(Ei.vscodeWindowId,e);const t=new X,i=new X,s=new X;function r(o,a){return(typeof o=="number"?n.get(o):void 0)??(a?e:void 0)}return{onDidRegisterWindow:t.event,onWillUnregisterWindow:s.event,onDidUnregisterWindow:i.event,registerWindow(o){if(n.has(o.vscodeWindowId))return ee.None;const a=new ue,l={window:o,disposables:a.add(new ue)};return n.set(o.vscodeWindowId,l),a.add(Ye(()=>{n.delete(o.vscodeWindowId),i.fire(o)})),a.add(re(o,Se.BEFORE_UNLOAD,()=>{s.fire(o)})),t.fire(l),a},getWindows(){return n.values()},getWindowsCount(){return n.size},getWindowId(o){return o.vscodeWindowId},hasWindow(o){return n.has(o)},getWindowById:r,getWindow(o){var c;const a=o;if((c=a==null?void 0:a.ownerDocument)!=null&&c.defaultView)return a.ownerDocument.defaultView.window;const l=o;return l!=null&&l.view?l.view.window:Ei},getDocument(o){return nt(o).document}}}();function nr(n){for(;n.firstChild;)n.firstChild.remove()}class fqe{constructor(e,t,i,s){this._node=e,this._type=t,this._handler=i,this._options=s||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}}function re(n,e,t,i){return new fqe(n,e,t,i)}function O0e(n,e){return function(t){return e(new bd(n,t))}}function gqe(n){return function(e){return n(new Oi(e))}}const Cn=function(e,t,i,s){let r=i;return t==="click"||t==="mousedown"||t==="contextmenu"?r=O0e(nt(e),i):(t==="keydown"||t==="keypress"||t==="keyup")&&(r=gqe(i)),re(e,t,r,s)},pqe=function(e,t,i){const s=O0e(nt(e),t);return mqe(e,s,i)};function mqe(n,e,t){return re(n,Bu&&lX.pointerEvents?Se.POINTER_DOWN:Se.MOUSE_DOWN,e,t)}function lk(n,e,t){return Gk(n,e,t)}class H9 extends L0e{constructor(e,t){super(e,t)}}let gP,il;class hX extends dX{constructor(e){super(),this.defaultTarget=e&&nt(e)}cancelAndSet(e,t,i){return super.cancelAndSet(e,t,i??this.defaultTarget)}}class V9{constructor(e,t=0){this._runner=e,this.priority=t,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(e){pt(e)}}static sort(e,t){return t.priority-e.priority}}(function(){const n=new Map,e=new Map,t=new Map,i=new Map,s=r=>{t.set(r,!1);const o=n.get(r)??[];for(e.set(r,o),n.set(r,[]),i.set(r,!0);o.length>0;)o.sort(V9.sort),o.shift().execute();i.set(r,!1)};il=(r,o,a=0)=>{const l=fP(r),c=new V9(o,a);let d=n.get(l);return d||(d=[],n.set(l,d)),d.push(c),t.get(l)||(t.set(l,!0),r.requestAnimationFrame(()=>s(l))),c},gP=(r,o,a)=>{const l=fP(r);if(i.get(l)){const c=new V9(o,a);let d=e.get(l);return d||(d=[],e.set(l,d)),d.push(c),c}else return il(r,o,a)}})();function V3(n){return nt(n).getComputedStyle(n,null)}function R_(n,e){const t=nt(n),i=t.document;if(n!==i.body)return new _i(n.clientWidth,n.clientHeight);if(Bu&&(t!=null&&t.visualViewport))return new _i(t.visualViewport.width,t.visualViewport.height);if(t!=null&&t.innerWidth&&t.innerHeight)return new _i(t.innerWidth,t.innerHeight);if(i.body&&i.body.clientWidth&&i.body.clientHeight)return new _i(i.body.clientWidth,i.body.clientHeight);if(i.documentElement&&i.documentElement.clientWidth&&i.documentElement.clientHeight)return new _i(i.documentElement.clientWidth,i.documentElement.clientHeight);throw new Error("Unable to figure out browser width and height")}class zn{static convertToPixels(e,t){return parseFloat(t)||0}static getDimension(e,t,i){const s=V3(e),r=s?s.getPropertyValue(t):"0";return zn.convertToPixels(e,r)}static getBorderLeftWidth(e){return zn.getDimension(e,"border-left-width","borderLeftWidth")}static getBorderRightWidth(e){return zn.getDimension(e,"border-right-width","borderRightWidth")}static getBorderTopWidth(e){return zn.getDimension(e,"border-top-width","borderTopWidth")}static getBorderBottomWidth(e){return zn.getDimension(e,"border-bottom-width","borderBottomWidth")}static getPaddingLeft(e){return zn.getDimension(e,"padding-left","paddingLeft")}static getPaddingRight(e){return zn.getDimension(e,"padding-right","paddingRight")}static getPaddingTop(e){return zn.getDimension(e,"padding-top","paddingTop")}static getPaddingBottom(e){return zn.getDimension(e,"padding-bottom","paddingBottom")}static getMarginLeft(e){return zn.getDimension(e,"margin-left","marginLeft")}static getMarginTop(e){return zn.getDimension(e,"margin-top","marginTop")}static getMarginRight(e){return zn.getDimension(e,"margin-right","marginRight")}static getMarginBottom(e){return zn.getDimension(e,"margin-bottom","marginBottom")}}const fb=class fb{constructor(e,t){this.width=e,this.height=t}with(e=this.width,t=this.height){return e!==this.width||t!==this.height?new fb(e,t):this}static is(e){return typeof e=="object"&&typeof e.height=="number"&&typeof e.width=="number"}static lift(e){return e instanceof fb?e:new fb(e.width,e.height)}static equals(e,t){return e===t?!0:!e||!t?!1:e.width===t.width&&e.height===t.height}};fb.None=new fb(0,0);let _i=fb;function F0e(n){let e=n.offsetParent,t=n.offsetTop,i=n.offsetLeft;for(;(n=n.parentNode)!==null&&n!==n.ownerDocument.body&&n!==n.ownerDocument.documentElement;){t-=n.scrollTop;const s=W0e(n)?null:V3(n);s&&(i-=s.direction!=="rtl"?n.scrollLeft:-n.scrollLeft),n===e&&(i+=zn.getBorderLeftWidth(n),t+=zn.getBorderTopWidth(n),t+=n.offsetTop,i+=n.offsetLeft,e=n.offsetParent)}return{left:i,top:t}}function _qe(n,e,t){typeof e=="number"&&(n.style.width=`${e}px`),typeof t=="number"&&(n.style.height=`${t}px`)}function Fn(n){const e=n.getBoundingClientRect(),t=nt(n);return{left:e.left+t.scrollX,top:e.top+t.scrollY,width:e.width,height:e.height}}function B0e(n){let e=n,t=1;do{const i=V3(e).zoom;i!=null&&i!=="1"&&(t*=i),e=e.parentElement}while(e!==null&&e!==e.ownerDocument.documentElement);return t}function Pa(n){const e=zn.getMarginLeft(n)+zn.getMarginRight(n);return n.offsetWidth+e}function z9(n){const e=zn.getBorderLeftWidth(n)+zn.getBorderRightWidth(n),t=zn.getPaddingLeft(n)+zn.getPaddingRight(n);return n.offsetWidth-e-t}function vqe(n){const e=zn.getBorderTopWidth(n)+zn.getBorderBottomWidth(n),t=zn.getPaddingTop(n)+zn.getPaddingBottom(n);return n.offsetHeight-e-t}function _g(n){const e=zn.getMarginTop(n)+zn.getMarginBottom(n);return n.offsetHeight+e}function Es(n,e){return!!(e!=null&&e.contains(n))}function bqe(n,e,t){for(;n&&n.nodeType===n.ELEMENT_NODE;){if(n.classList.contains(e))return n;if(t){if(typeof t=="string"){if(n.classList.contains(t))return null}else if(n===t)return null}n=n.parentNode}return null}function U9(n,e,t){return!!bqe(n,e,t)}function W0e(n){return n&&!!n.host&&!!n.mode}function pP(n){return!!d0(n)}function d0(n){var e;for(;n.parentNode;){if(n===((e=n.ownerDocument)==null?void 0:e.body))return null;n=n.parentNode}return W0e(n)?n:null}function vr(){let n=Ix().activeElement;for(;n!=null&&n.shadowRoot;)n=n.shadowRoot.activeElement;return n}function z3(n){return vr()===n}function H0e(n){return Es(vr(),n)}function Ix(){return dqe()<=1?Ei.document:Array.from(P0e()).map(({window:e})=>e.document).find(e=>e.hasFocus())??Ei.document}function ck(){var e;return((e=Ix().defaultView)==null?void 0:e.window)??Ei}const fX=new Map;function V0e(){return new wqe}class wqe{constructor(){this._currentCssStyle="",this._styleSheet=void 0}setStyle(e){e!==this._currentCssStyle&&(this._currentCssStyle=e,this._styleSheet?this._styleSheet.innerText=e:this._styleSheet=jl(Ei.document.head,t=>t.innerText=e))}dispose(){this._styleSheet&&(this._styleSheet.remove(),this._styleSheet=void 0)}}function jl(n=Ei.document.head,e,t){const i=document.createElement("style");if(i.type="text/css",i.media="screen",e==null||e(i),n.appendChild(i),t&&t.add(Ye(()=>i.remove())),n===Ei.document.head){const s=new Set;fX.set(i,s);for(const{window:r,disposables:o}of P0e()){if(r===Ei)continue;const a=o.add(Cqe(i,s,r));t==null||t.add(a)}}return i}function Cqe(n,e,t){var r,o;const i=new ue,s=n.cloneNode(!0);t.document.head.appendChild(s),i.add(Ye(()=>s.remove()));for(const a of U0e(n))(o=s.sheet)==null||o.insertRule(a.cssText,(r=s.sheet)==null?void 0:r.cssRules.length);return i.add(yqe.observe(n,i,{childList:!0})(()=>{s.textContent=n.textContent})),e.add(s),i.add(Ye(()=>e.delete(s))),i}const yqe=new class{constructor(){this.mutationObservers=new Map}observe(n,e,t){let i=this.mutationObservers.get(n);i||(i=new Map,this.mutationObservers.set(n,i));const s=B3(t);let r=i.get(s);if(r)r.users+=1;else{const o=new X,a=new MutationObserver(c=>o.fire(c));a.observe(n,t);const l=r={users:1,observer:a,onDidMutate:o.event};e.add(Ye(()=>{l.users-=1,l.users===0&&(o.dispose(),a.disconnect(),i==null||i.delete(s),(i==null?void 0:i.size)===0&&this.mutationObservers.delete(n))})),i.set(s,r)}return r.onDidMutate}};let $9=null;function z0e(){return $9||($9=jl()),$9}function U0e(n){var e,t;return(e=n==null?void 0:n.sheet)!=null&&e.rules?n.sheet.rules:(t=n==null?void 0:n.sheet)!=null&&t.cssRules?n.sheet.cssRules:[]}function mP(n,e,t=z0e()){var i;if(!(!t||!e)){(i=t.sheet)==null||i.insertRule(`${n} {${e}}`,0);for(const s of fX.get(t)??[])mP(n,e,s)}}function Wz(n,e=z0e()){var s;if(!e)return;const t=U0e(e),i=[];for(let r=0;r<t.length;r++){const o=t[r];Sqe(o)&&o.selectorText.indexOf(n)!==-1&&i.push(r)}for(let r=i.length-1;r>=0;r--)(s=e.sheet)==null||s.deleteRule(i[r]);for(const r of fX.get(e)??[])Wz(n,r)}function Sqe(n){return typeof n.selectorText=="string"}function Ns(n){return n instanceof HTMLElement||n instanceof nt(n).HTMLElement}function Woe(n){return n instanceof HTMLAnchorElement||n instanceof nt(n).HTMLAnchorElement}function xqe(n){return n instanceof SVGElement||n instanceof nt(n).SVGElement}function gX(n){return n instanceof MouseEvent||n instanceof nt(n).MouseEvent}function tg(n){return n instanceof KeyboardEvent||n instanceof nt(n).KeyboardEvent}const Se={CLICK:"click",AUXCLICK:"auxclick",DBLCLICK:"dblclick",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",POINTER_LEAVE:"pointerleave",CONTEXT_MENU:"contextmenu",WHEEL:"wheel",KEY_DOWN:"keydown",KEY_PRESS:"keypress",KEY_UP:"keyup",LOAD:"load",BEFORE_UNLOAD:"beforeunload",UNLOAD:"unload",PAGE_SHOW:"pageshow",PAGE_HIDE:"pagehide",PASTE:"paste",ABORT:"abort",ERROR:"error",RESIZE:"resize",SCROLL:"scroll",FULLSCREEN_CHANGE:"fullscreenchange",WK_FULLSCREEN_CHANGE:"webkitfullscreenchange",SELECT:"select",CHANGE:"change",SUBMIT:"submit",RESET:"reset",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",BLUR:"blur",INPUT:"input",STORAGE:"storage",DRAG_START:"dragstart",DRAG:"drag",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"drop",DRAG_END:"dragend",ANIMATION_START:Vb?"webkitAnimationStart":"animationstart",ANIMATION_END:Vb?"webkitAnimationEnd":"animationend",ANIMATION_ITERATION:Vb?"webkitAnimationIteration":"animationiteration"};function Lqe(n){const e=n;return!!(e&&typeof e.preventDefault=="function"&&typeof e.stopPropagation=="function")}const $t={stop:(n,e)=>(n.preventDefault(),e&&n.stopPropagation(),n)};function kqe(n){const e=[];for(let t=0;n&&n.nodeType===n.ELEMENT_NODE;t++)e[t]=n.scrollTop,n=n.parentNode;return e}function Eqe(n,e){for(let t=0;n&&n.nodeType===n.ELEMENT_NODE;t++)n.scrollTop!==e[t]&&(n.scrollTop=e[t]),n=n.parentNode}class _P extends ee{static hasFocusWithin(e){if(Ns(e)){const t=d0(e),i=t?t.activeElement:e.ownerDocument.activeElement;return Es(i,e)}else{const t=e;return Es(t.document.activeElement,t.document)}}constructor(e){super(),this._onDidFocus=this._register(new X),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new X),this.onDidBlur=this._onDidBlur.event;let t=_P.hasFocusWithin(e),i=!1;const s=()=>{i=!1,t||(t=!0,this._onDidFocus.fire())},r=()=>{t&&(i=!0,(Ns(e)?nt(e):e).setTimeout(()=>{i&&(i=!1,t=!1,this._onDidBlur.fire())},0))};this._refreshStateHandler=()=>{_P.hasFocusWithin(e)!==t&&(t?r():s())},this._register(re(e,Se.FOCUS,s,!0)),this._register(re(e,Se.BLUR,r,!0)),Ns(e)&&(this._register(re(e,Se.FOCUS_IN,()=>this._refreshStateHandler())),this._register(re(e,Se.FOCUS_OUT,()=>this._refreshStateHandler())))}}function Hu(n){return new _P(n)}function Iqe(n,e){return n.after(e),e}function _e(n,...e){if(n.append(...e),e.length===1&&typeof e[0]!="string")return e[0]}function pX(n,e){return n.insertBefore(e,n.firstChild),e}function sr(n,...e){n.innerText="",_e(n,...e)}const Dqe=/([\w\-]+)?(#([\w\-]+))?((\.([\w\-]+))*)/;var FI;(function(n){n.HTML="http://www.w3.org/1999/xhtml",n.SVG="http://www.w3.org/2000/svg"})(FI||(FI={}));function $0e(n,e,t,...i){const s=Dqe.exec(e);if(!s)throw new Error("Bad use of emmet");const r=s[1]||"div";let o;return n!==FI.HTML?o=document.createElementNS(n,r):o=document.createElement(r),s[3]&&(o.id=s[3]),s[4]&&(o.className=s[4].replace(/\./g," ").trim()),t&&Object.entries(t).forEach(([a,l])=>{typeof l>"u"||(/^on\w+$/.test(a)?o[a]=l:a==="selected"?l&&o.setAttribute(a,"true"):o.setAttribute(a,l))}),o.append(...i),o}function xe(n,e,...t){return $0e(FI.HTML,n,e,...t)}xe.SVG=function(n,e,...t){return $0e(FI.SVG,n,e,...t)};function Nqe(n,...e){n?za(...e):Co(...e)}function za(...n){for(const e of n)e.style.display="",e.removeAttribute("aria-hidden")}function Co(...n){for(const e of n)e.style.display="none",e.setAttribute("aria-hidden","true")}function Hoe(n,e){const t=n.devicePixelRatio*e;return Math.max(1,Math.floor(t))/n.devicePixelRatio}function j0e(n){Ei.open(n,"_blank","noopener")}function Tqe(n,e){const t=()=>{e(),i=il(n,t)};let i=il(n,t);return Ye(()=>i.dispose())}M0e.setPreferredWebSchema(/^https:/.test(Ei.location.href)?"https":"http");function Qg(n){return n?`url('${F3.uriToBrowserUri(n).toString(!0).replace(/'/g,"%27")}')`:"url('')"}function j9(n){return`'${n.replace(/'/g,"%27")}'`}function Rg(n,e){if(n!==void 0){const t=n.match(/^\s*var\((.+)\)$/);if(t){const i=t[1].split(",",2);return i.length===2&&(e=Rg(i[1].trim(),e)),`var(${i[0]}, ${e})`}return n}return e}function Rqe(n,e=!1){const t=document.createElement("a");return R0e("afterSanitizeAttributes",i=>{for(const s of["href","src"])if(i.hasAttribute(s)){const r=i.getAttribute(s);if(s==="href"&&r.startsWith("#"))continue;if(t.href=r,!n.includes(t.protocol.replace(/:$/,""))){if(e&&s==="src"&&t.href.startsWith("data:"))continue;i.removeAttribute(s)}}}),Ye(()=>{A0e("afterSanitizeAttributes")})}const Aqe=Object.freeze(["a","abbr","b","bdo","blockquote","br","caption","cite","code","col","colgroup","dd","del","details","dfn","div","dl","dt","em","figcaption","figure","h1","h2","h3","h4","h5","h6","hr","i","img","input","ins","kbd","label","li","mark","ol","p","pre","q","rp","rt","ruby","samp","small","small","source","span","strike","strong","sub","summary","sup","table","tbody","td","tfoot","th","thead","time","tr","tt","u","ul","var","video","wbr"]);class vg extends X{constructor(){super(),this._subscriptions=new ue,this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1},this._subscriptions.add(Ee.runAndSubscribe(H3,({window:e,disposables:t})=>this.registerListeners(e,t),{window:Ei,disposables:this._subscriptions}))}registerListeners(e,t){t.add(re(e,"keydown",i=>{if(i.defaultPrevented)return;const s=new Oi(i);if(!(s.keyCode===6&&i.repeat)){if(i.altKey&&!this._keyStatus.altKey)this._keyStatus.lastKeyPressed="alt";else if(i.ctrlKey&&!this._keyStatus.ctrlKey)this._keyStatus.lastKeyPressed="ctrl";else if(i.metaKey&&!this._keyStatus.metaKey)this._keyStatus.lastKeyPressed="meta";else if(i.shiftKey&&!this._keyStatus.shiftKey)this._keyStatus.lastKeyPressed="shift";else if(s.keyCode!==6)this._keyStatus.lastKeyPressed=void 0;else return;this._keyStatus.altKey=i.altKey,this._keyStatus.ctrlKey=i.ctrlKey,this._keyStatus.metaKey=i.metaKey,this._keyStatus.shiftKey=i.shiftKey,this._keyStatus.lastKeyPressed&&(this._keyStatus.event=i,this.fire(this._keyStatus))}},!0)),t.add(re(e,"keyup",i=>{i.defaultPrevented||(!i.altKey&&this._keyStatus.altKey?this._keyStatus.lastKeyReleased="alt":!i.ctrlKey&&this._keyStatus.ctrlKey?this._keyStatus.lastKeyReleased="ctrl":!i.metaKey&&this._keyStatus.metaKey?this._keyStatus.lastKeyReleased="meta":!i.shiftKey&&this._keyStatus.shiftKey?this._keyStatus.lastKeyReleased="shift":this._keyStatus.lastKeyReleased=void 0,this._keyStatus.lastKeyPressed!==this._keyStatus.lastKeyReleased&&(this._keyStatus.lastKeyPressed=void 0),this._keyStatus.altKey=i.altKey,this._keyStatus.ctrlKey=i.ctrlKey,this._keyStatus.metaKey=i.metaKey,this._keyStatus.shiftKey=i.shiftKey,this._keyStatus.lastKeyReleased&&(this._keyStatus.event=i,this.fire(this._keyStatus)))},!0)),t.add(re(e.document.body,"mousedown",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),t.add(re(e.document.body,"mouseup",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),t.add(re(e.document.body,"mousemove",i=>{i.buttons&&(this._keyStatus.lastKeyPressed=void 0)},!0)),t.add(re(e,"blur",()=>{this.resetKeyStatus()}))}get keyStatus(){return this._keyStatus}resetKeyStatus(){this.doResetKeyStatus(),this.fire(this._keyStatus)}doResetKeyStatus(){this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1}}static getInstance(){return vg.instance||(vg.instance=new vg),vg.instance}dispose(){super.dispose(),this._subscriptions.dispose()}}class Mqe extends ee{constructor(e,t){super(),this.element=e,this.callbacks=t,this.counter=0,this.dragStartTime=0,this.registerListeners()}registerListeners(){this.callbacks.onDragStart&&this._register(re(this.element,Se.DRAG_START,e=>{var t,i;(i=(t=this.callbacks).onDragStart)==null||i.call(t,e)})),this.callbacks.onDrag&&this._register(re(this.element,Se.DRAG,e=>{var t,i;(i=(t=this.callbacks).onDrag)==null||i.call(t,e)})),this._register(re(this.element,Se.DRAG_ENTER,e=>{var t,i;this.counter++,this.dragStartTime=e.timeStamp,(i=(t=this.callbacks).onDragEnter)==null||i.call(t,e)})),this._register(re(this.element,Se.DRAG_OVER,e=>{var t,i;e.preventDefault(),(i=(t=this.callbacks).onDragOver)==null||i.call(t,e,e.timeStamp-this.dragStartTime)})),this._register(re(this.element,Se.DRAG_LEAVE,e=>{var t,i;this.counter--,this.counter===0&&(this.dragStartTime=0,(i=(t=this.callbacks).onDragLeave)==null||i.call(t,e))})),this._register(re(this.element,Se.DRAG_END,e=>{var t,i;this.counter=0,this.dragStartTime=0,(i=(t=this.callbacks).onDragEnd)==null||i.call(t,e)})),this._register(re(this.element,Se.DROP,e=>{var t,i;this.counter=0,this.dragStartTime=0,(i=(t=this.callbacks).onDrop)==null||i.call(t,e)}))}}const K0e=/(?<tag>[\w\-]+)?(?:#(?<id>[\w\-]+))?(?<class>(?:\.(?:[\w\-]+))*)(?:@(?<name>(?:[\w\_])+))?/;function Pt(n,...e){let t,i;Array.isArray(e[0])?(t={},i=e[0]):(t=e[0]||{},i=e[1]);const s=K0e.exec(n);if(!s||!s.groups)throw new Error("Bad use of h");const r=s.groups.tag||"div",o=document.createElement(r);s.groups.id&&(o.id=s.groups.id);const a=[];if(s.groups.class)for(const c of s.groups.class.split("."))c!==""&&a.push(c);if(t.className!==void 0)for(const c of t.className.split("."))c!==""&&a.push(c);a.length>0&&(o.className=a.join(" "));const l={};if(s.groups.name&&(l[s.groups.name]=o),i)for(const c of i)Ns(c)?o.appendChild(c):typeof c=="string"?o.append(c):"root"in c&&(Object.assign(l,c),o.appendChild(c.root));for(const[c,d]of Object.entries(t))if(c!=="className")if(c==="style")for(const[u,h]of Object.entries(d))o.style.setProperty(vP(u),typeof h=="number"?h+"px":""+h);else c==="tabIndex"?o.tabIndex=d:o.setAttribute(vP(c),d.toString());return l.root=o,l}function SC(n,...e){let t,i;Array.isArray(e[0])?(t={},i=e[0]):(t=e[0]||{},i=e[1]);const s=K0e.exec(n);if(!s||!s.groups)throw new Error("Bad use of h");const r=s.groups.tag||"div",o=document.createElementNS("http://www.w3.org/2000/svg",r);s.groups.id&&(o.id=s.groups.id);const a=[];if(s.groups.class)for(const c of s.groups.class.split("."))c!==""&&a.push(c);if(t.className!==void 0)for(const c of t.className.split("."))c!==""&&a.push(c);a.length>0&&(o.className=a.join(" "));const l={};if(s.groups.name&&(l[s.groups.name]=o),i)for(const c of i)Ns(c)?o.appendChild(c):typeof c=="string"?o.append(c):"root"in c&&(Object.assign(l,c),o.appendChild(c.root));for(const[c,d]of Object.entries(t))if(c!=="className")if(c==="style")for(const[u,h]of Object.entries(d))o.style.setProperty(vP(u),typeof h=="number"?h+"px":""+h);else c==="tabIndex"?o.tabIndex=d:o.setAttribute(vP(c),d.toString());return l.root=o,l}function vP(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}class Pqe extends ee{constructor(e){super(),this._onDidChange=this._register(new X),this.onDidChange=this._onDidChange.event,this._listener=()=>this._handleChange(e,!0),this._mediaQueryList=null,this._handleChange(e,!1)}_handleChange(e,t){var i;(i=this._mediaQueryList)==null||i.removeEventListener("change",this._listener),this._mediaQueryList=e.matchMedia(`(resolution: ${e.devicePixelRatio}dppx)`),this._mediaQueryList.addEventListener("change",this._listener),t&&this._onDidChange.fire()}}class Oqe extends ee{get value(){return this._value}constructor(e){super(),this._onDidChange=this._register(new X),this.onDidChange=this._onDidChange.event,this._value=this._getPixelRatio(e);const t=this._register(new Pqe(e));this._register(t.onDidChange(()=>{this._value=this._getPixelRatio(e),this._onDidChange.fire(this._value)}))}_getPixelRatio(e){const t=document.createElement("canvas").getContext("2d"),i=e.devicePixelRatio||1,s=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return i/s}}class Fqe{constructor(){this.mapWindowIdToPixelRatioMonitor=new Map}_getOrCreatePixelRatioMonitor(e){const t=fP(e);let i=this.mapWindowIdToPixelRatioMonitor.get(t);return i||(i=new Oqe(e),this.mapWindowIdToPixelRatioMonitor.set(t,i),Ee.once(hqe)(({vscodeWindowId:s})=>{s===t&&(i==null||i.dispose(),this.mapWindowIdToPixelRatioMonitor.delete(t))})),i}getInstance(e){return this._getOrCreatePixelRatioMonitor(e)}}const BI=new Fqe;class q0e{constructor(e){this.domNode=e,this._maxWidth="",this._width="",this._height="",this._top="",this._left="",this._bottom="",this._right="",this._paddingLeft="",this._fontFamily="",this._fontWeight="",this._fontSize="",this._fontStyle="",this._fontFeatureSettings="",this._fontVariationSettings="",this._textDecoration="",this._lineHeight="",this._letterSpacing="",this._className="",this._display="",this._position="",this._visibility="",this._color="",this._backgroundColor="",this._layerHint=!1,this._contain="none",this._boxShadow=""}setMaxWidth(e){const t=Kd(e);this._maxWidth!==t&&(this._maxWidth=t,this.domNode.style.maxWidth=this._maxWidth)}setWidth(e){const t=Kd(e);this._width!==t&&(this._width=t,this.domNode.style.width=this._width)}setHeight(e){const t=Kd(e);this._height!==t&&(this._height=t,this.domNode.style.height=this._height)}setTop(e){const t=Kd(e);this._top!==t&&(this._top=t,this.domNode.style.top=this._top)}setLeft(e){const t=Kd(e);this._left!==t&&(this._left=t,this.domNode.style.left=this._left)}setBottom(e){const t=Kd(e);this._bottom!==t&&(this._bottom=t,this.domNode.style.bottom=this._bottom)}setRight(e){const t=Kd(e);this._right!==t&&(this._right=t,this.domNode.style.right=this._right)}setPaddingLeft(e){const t=Kd(e);this._paddingLeft!==t&&(this._paddingLeft=t,this.domNode.style.paddingLeft=this._paddingLeft)}setFontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(e){const t=Kd(e);this._fontSize!==t&&(this._fontSize=t,this.domNode.style.fontSize=this._fontSize)}setFontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.domNode.style.fontStyle=this._fontStyle)}setFontFeatureSettings(e){this._fontFeatureSettings!==e&&(this._fontFeatureSettings=e,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setFontVariationSettings(e){this._fontVariationSettings!==e&&(this._fontVariationSettings=e,this.domNode.style.fontVariationSettings=this._fontVariationSettings)}setTextDecoration(e){this._textDecoration!==e&&(this._textDecoration=e,this.domNode.style.textDecoration=this._textDecoration)}setLineHeight(e){const t=Kd(e);this._lineHeight!==t&&(this._lineHeight=t,this.domNode.style.lineHeight=this._lineHeight)}setLetterSpacing(e){const t=Kd(e);this._letterSpacing!==t&&(this._letterSpacing=t,this.domNode.style.letterSpacing=this._letterSpacing)}setClassName(e){this._className!==e&&(this._className=e,this.domNode.className=this._className)}toggleClassName(e,t){this.domNode.classList.toggle(e,t),this._className=this.domNode.className}setDisplay(e){this._display!==e&&(this._display=e,this.domNode.style.display=this._display)}setPosition(e){this._position!==e&&(this._position=e,this.domNode.style.position=this._position)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this.domNode.style.visibility=this._visibility)}setColor(e){this._color!==e&&(this._color=e,this.domNode.style.color=this._color)}setBackgroundColor(e){this._backgroundColor!==e&&(this._backgroundColor=e,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(e){this._layerHint!==e&&(this._layerHint=e,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(e){this._boxShadow!==e&&(this._boxShadow=e,this.domNode.style.boxShadow=e)}setContain(e){this._contain!==e&&(this._contain=e,this.domNode.style.contain=this._contain)}setAttribute(e,t){this.domNode.setAttribute(e,t)}removeAttribute(e){this.domNode.removeAttribute(e)}appendChild(e){this.domNode.appendChild(e.domNode)}removeChild(e){this.domNode.removeChild(e.domNode)}}function Kd(n){return typeof n=="number"?`${n}px`:n}function ui(n){return new q0e(n)}function rr(n,e){n instanceof q0e?(n.setFontFamily(e.getMassagedFontFamily()),n.setFontWeight(e.fontWeight),n.setFontSize(e.fontSize),n.setFontFeatureSettings(e.fontFeatureSettings),n.setFontVariationSettings(e.fontVariationSettings),n.setLineHeight(e.lineHeight),n.setLetterSpacing(e.letterSpacing)):(n.style.fontFamily=e.getMassagedFontFamily(),n.style.fontWeight=e.fontWeight,n.style.fontSize=e.fontSize+"px",n.style.fontFeatureSettings=e.fontFeatureSettings,n.style.fontVariationSettings=e.fontVariationSettings,n.style.lineHeight=e.lineHeight+"px",n.style.letterSpacing=e.letterSpacing+"px")}class Bqe{constructor(e,t){this.chr=e,this.type=t,this.width=0}fulfill(e){this.width=e}}class mX{constructor(e,t){this._bareFontInfo=e,this._requests=t,this._container=null,this._testElements=null}read(e){var t;this._createDomElements(),e.document.body.appendChild(this._container),this._readFromDomElements(),(t=this._container)==null||t.remove(),this._container=null,this._testElements=null}_createDomElements(){const e=document.createElement("div");e.style.position="absolute",e.style.top="-50000px",e.style.width="50000px";const t=document.createElement("div");rr(t,this._bareFontInfo),e.appendChild(t);const i=document.createElement("div");rr(i,this._bareFontInfo),i.style.fontWeight="bold",e.appendChild(i);const s=document.createElement("div");rr(s,this._bareFontInfo),s.style.fontStyle="italic",e.appendChild(s);const r=[];for(const o of this._requests){let a;o.type===0&&(a=t),o.type===2&&(a=i),o.type===1&&(a=s),a.appendChild(document.createElement("br"));const l=document.createElement("span");mX._render(l,o),a.appendChild(l),r.push(l)}this._container=e,this._testElements=r}static _render(e,t){if(t.chr===" "){let i="";for(let s=0;s<8;s++)i+=i;e.innerText=i}else{let i=t.chr;for(let s=0;s<8;s++)i+=i;e.textContent=i}}_readFromDomElements(){for(let e=0,t=this._requests.length;e<t;e++){const i=this._requests[e],s=this._testElements[e];i.fulfill(s.offsetWidth/256)}}}function Wqe(n,e,t){new mX(e,t).read(n)}const vc=new class{constructor(){this._zoomLevel=0,this._onDidChangeZoomLevel=new X,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event}getZoomLevel(){return this._zoomLevel}setZoomLevel(n){n=Math.min(Math.max(-5,n),20),this._zoomLevel!==n&&(this._zoomLevel=n,this._onDidChangeZoomLevel.fire(this._zoomLevel))}},Hqe=Bt?1.5:1.35,K9=8;class zb{static createFromValidatedSettings(e,t,i){const s=e.get(49),r=e.get(53),o=e.get(52),a=e.get(51),l=e.get(54),c=e.get(67),d=e.get(64);return zb._create(s,r,o,a,l,c,d,t,i)}static _create(e,t,i,s,r,o,a,l,c){o===0?o=Hqe*i:o<K9&&(o=o*i),o=Math.round(o),o<K9&&(o=K9);const d=1+(c?0:vc.getZoomLevel()*.1);return i*=d,o*=d,r===NI.TRANSLATE&&(t==="normal"||t==="bold"?r=NI.OFF:(r=`'wght' ${parseInt(t,10)}`,t="normal")),new zb({pixelRatio:l,fontFamily:e,fontWeight:t,fontSize:i,fontFeatureSettings:s,fontVariationSettings:r,lineHeight:o,letterSpacing:a})}constructor(e){this._bareFontInfoBrand=void 0,this.pixelRatio=e.pixelRatio,this.fontFamily=String(e.fontFamily),this.fontWeight=String(e.fontWeight),this.fontSize=e.fontSize,this.fontFeatureSettings=e.fontFeatureSettings,this.fontVariationSettings=e.fontVariationSettings,this.lineHeight=e.lineHeight|0,this.letterSpacing=e.letterSpacing}getId(){return`${this.pixelRatio}-${this.fontFamily}-${this.fontWeight}-${this.fontSize}-${this.fontFeatureSettings}-${this.fontVariationSettings}-${this.lineHeight}-${this.letterSpacing}`}getMassagedFontFamily(){const e=To.fontFamily,t=zb._wrapInQuotes(this.fontFamily);return e&&this.fontFamily!==e?`${t}, ${e}`:t}static _wrapInQuotes(e){return/[,"']/.test(e)?e:/[+ ]/.test(e)?`"${e}"`:e}}const Vqe=2;class Hz extends zb{constructor(e,t){super(e),this._editorStylingBrand=void 0,this.version=Vqe,this.isTrusted=t,this.isMonospace=e.isMonospace,this.typicalHalfwidthCharacterWidth=e.typicalHalfwidthCharacterWidth,this.typicalFullwidthCharacterWidth=e.typicalFullwidthCharacterWidth,this.canUseHalfwidthRightwardsArrow=e.canUseHalfwidthRightwardsArrow,this.spaceWidth=e.spaceWidth,this.middotWidth=e.middotWidth,this.wsmiddotWidth=e.wsmiddotWidth,this.maxDigitWidth=e.maxDigitWidth}equals(e){return this.fontFamily===e.fontFamily&&this.fontWeight===e.fontWeight&&this.fontSize===e.fontSize&&this.fontFeatureSettings===e.fontFeatureSettings&&this.fontVariationSettings===e.fontVariationSettings&&this.lineHeight===e.lineHeight&&this.letterSpacing===e.letterSpacing&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.typicalFullwidthCharacterWidth===e.typicalFullwidthCharacterWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.maxDigitWidth===e.maxDigitWidth}}class zqe extends ee{constructor(){super(...arguments),this._cache=new Map,this._evictUntrustedReadingsTimeout=-1,this._onDidChange=this._register(new X),this.onDidChange=this._onDidChange.event}dispose(){this._evictUntrustedReadingsTimeout!==-1&&(clearTimeout(this._evictUntrustedReadingsTimeout),this._evictUntrustedReadingsTimeout=-1),super.dispose()}clearAllFontInfos(){this._cache.clear(),this._onDidChange.fire()}_ensureCache(e){const t=fP(e);let i=this._cache.get(t);return i||(i=new Uqe,this._cache.set(t,i)),i}_writeToCache(e,t,i){this._ensureCache(e).put(t,i),!i.isTrusted&&this._evictUntrustedReadingsTimeout===-1&&(this._evictUntrustedReadingsTimeout=e.setTimeout(()=>{this._evictUntrustedReadingsTimeout=-1,this._evictUntrustedReadings(e)},5e3))}_evictUntrustedReadings(e){const t=this._ensureCache(e),i=t.getValues();let s=!1;for(const r of i)r.isTrusted||(s=!0,t.remove(r));s&&this._onDidChange.fire()}readFontInfo(e,t){const i=this._ensureCache(e);if(!i.has(t)){let s=this._actualReadFontInfo(e,t);(s.typicalHalfwidthCharacterWidth<=2||s.typicalFullwidthCharacterWidth<=2||s.spaceWidth<=2||s.maxDigitWidth<=2)&&(s=new Hz({pixelRatio:BI.getInstance(e).value,fontFamily:s.fontFamily,fontWeight:s.fontWeight,fontSize:s.fontSize,fontFeatureSettings:s.fontFeatureSettings,fontVariationSettings:s.fontVariationSettings,lineHeight:s.lineHeight,letterSpacing:s.letterSpacing,isMonospace:s.isMonospace,typicalHalfwidthCharacterWidth:Math.max(s.typicalHalfwidthCharacterWidth,5),typicalFullwidthCharacterWidth:Math.max(s.typicalFullwidthCharacterWidth,5),canUseHalfwidthRightwardsArrow:s.canUseHalfwidthRightwardsArrow,spaceWidth:Math.max(s.spaceWidth,5),middotWidth:Math.max(s.middotWidth,5),wsmiddotWidth:Math.max(s.wsmiddotWidth,5),maxDigitWidth:Math.max(s.maxDigitWidth,5)},!1)),this._writeToCache(e,t,s)}return i.get(t)}_createRequest(e,t,i,s){const r=new Bqe(e,t);return i.push(r),s==null||s.push(r),r}_actualReadFontInfo(e,t){const i=[],s=[],r=this._createRequest("n",0,i,s),o=this._createRequest("",0,i,null),a=this._createRequest(" ",0,i,s),l=this._createRequest("0",0,i,s),c=this._createRequest("1",0,i,s),d=this._createRequest("2",0,i,s),u=this._createRequest("3",0,i,s),h=this._createRequest("4",0,i,s),f=this._createRequest("5",0,i,s),g=this._createRequest("6",0,i,s),p=this._createRequest("7",0,i,s),_=this._createRequest("8",0,i,s),w=this._createRequest("9",0,i,s),b=this._createRequest("",0,i,s),y=this._createRequest("",0,i,null),S=this._createRequest("",0,i,s),x=this._createRequest("",0,i,null),E="|/-_ilm%";for(let z=0,G=E.length;z<G;z++)this._createRequest(E.charAt(z),0,i,s),this._createRequest(E.charAt(z),1,i,s),this._createRequest(E.charAt(z),2,i,s);Wqe(e,t,i);const D=Math.max(l.width,c.width,d.width,u.width,h.width,f.width,g.width,p.width,_.width,w.width);let N=t.fontFeatureSettings===k_.OFF;const I=s[0].width;for(let z=1,G=s.length;N&&z<G;z++){const J=I-s[z].width;if(J<-.001||J>.001){N=!1;break}}let H=!0;return N&&y.width!==I&&(H=!1),y.width>b.width&&(H=!1),new Hz({pixelRatio:BI.getInstance(e).value,fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontSize:t.fontSize,fontFeatureSettings:t.fontFeatureSettings,fontVariationSettings:t.fontVariationSettings,lineHeight:t.lineHeight,letterSpacing:t.letterSpacing,isMonospace:N,typicalHalfwidthCharacterWidth:r.width,typicalFullwidthCharacterWidth:o.width,canUseHalfwidthRightwardsArrow:H,spaceWidth:a.width,middotWidth:S.width,wsmiddotWidth:x.width,maxDigitWidth:D},!0)}}class Uqe{constructor(){this._keys=Object.create(null),this._values=Object.create(null)}has(e){const t=e.getId();return!!this._values[t]}get(e){const t=e.getId();return this._values[t]}put(e,t){const i=e.getId();this._keys[i]=e,this._values[i]=t}remove(e){const t=e.getId();delete this._keys[t],delete this._values[t]}getValues(){return Object.keys(this._keys).map(e=>this._values[e])}}const Vz=new zqe;var wu;(function(n){n.serviceIds=new Map,n.DI_TARGET="$di$target",n.DI_DEPENDENCIES="$di$dependencies";function e(t){return t[n.DI_DEPENDENCIES]||[]}n.getServiceDependencies=e})(wu||(wu={}));const Ze=Wt("instantiationService");function $qe(n,e,t){e[wu.DI_TARGET]===e?e[wu.DI_DEPENDENCIES].push({id:n,index:t}):(e[wu.DI_DEPENDENCIES]=[{id:n,index:t}],e[wu.DI_TARGET]=e)}function Wt(n){if(wu.serviceIds.has(n))return wu.serviceIds.get(n);const e=function(t,i,s){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");$qe(e,t,s)};return e.toString=()=>n,wu.serviceIds.set(n,e),e}const ri=Wt("codeEditorService"),Zi=Wt("modelService"),_a=Wt("textModelService");class Ya extends ee{constructor(e,t="",i="",s=!0,r){super(),this._onDidChange=this._register(new X),this.onDidChange=this._onDidChange.event,this._enabled=!0,this._id=e,this._label=t,this._cssClass=i,this._enabled=s,this._actionCallback=r}get id(){return this._id}get label(){return this._label}set label(e){this._setLabel(e)}_setLabel(e){this._label!==e&&(this._label=e,this._onDidChange.fire({label:e}))}get tooltip(){return this._tooltip||""}set tooltip(e){this._setTooltip(e)}_setTooltip(e){this._tooltip!==e&&(this._tooltip=e,this._onDidChange.fire({tooltip:e}))}get class(){return this._cssClass}set class(e){this._setClass(e)}_setClass(e){this._cssClass!==e&&(this._cssClass=e,this._onDidChange.fire({class:e}))}get enabled(){return this._enabled}set enabled(e){this._setEnabled(e)}_setEnabled(e){this._enabled!==e&&(this._enabled=e,this._onDidChange.fire({enabled:e}))}get checked(){return this._checked}set checked(e){this._setChecked(e)}_setChecked(e){this._checked!==e&&(this._checked=e,this._onDidChange.fire({checked:e}))}async run(e,t){this._actionCallback&&await this._actionCallback(e)}}class u0 extends ee{constructor(){super(...arguments),this._onWillRun=this._register(new X),this.onWillRun=this._onWillRun.event,this._onDidRun=this._register(new X),this.onDidRun=this._onDidRun.event}async run(e,t){if(!e.enabled)return;this._onWillRun.fire({action:e});let i;try{await this.runAction(e,t)}catch(s){i=s}this._onDidRun.fire({action:e,error:i})}async runAction(e,t){await e.run(t)}}const AE=class AE{constructor(){this.id=AE.ID,this.label="",this.tooltip="",this.class="separator",this.enabled=!1,this.checked=!1}static join(...e){let t=[];for(const i of e)i.length&&(t.length?t=[...t,new AE,...i]:t=i);return t}async run(){}};AE.ID="vs.actions.separator";let Ts=AE;class NS{get actions(){return this._actions}constructor(e,t,i,s){this.tooltip="",this.enabled=!0,this.checked=void 0,this.id=e,this.label=t,this.class=s,this._actions=i}async run(){}}const l4=class l4 extends Ya{constructor(){super(l4.ID,v("submenu.empty","(empty)"),void 0,!1)}};l4.ID="vs.actions.empty";let zz=l4;function Ub(n){return{id:n.id,label:n.label,tooltip:n.tooltip??n.label,class:n.class,enabled:n.enabled??!0,checked:n.checked,run:async(...e)=>n.run(...e)}}var Uz;(function(n){function e(t){return t&&typeof t=="object"&&typeof t.id=="string"}n.isThemeColor=e})(Uz||(Uz={}));var ot;(function(n){n.iconNameSegment="[A-Za-z0-9]+",n.iconNameExpression="[A-Za-z0-9-]+",n.iconModifierExpression="~[A-Za-z]+",n.iconNameCharacter="[A-Za-z0-9~-]";const e=new RegExp(`^(${n.iconNameExpression})(${n.iconModifierExpression})?$`);function t(h){const f=e.exec(h.id);if(!f)return t(ye.error);const[,g,p]=f,_=["codicon","codicon-"+g];return p&&_.push("codicon-modifier-"+p.substring(1)),_}n.asClassNameArray=t;function i(h){return t(h).join(" ")}n.asClassName=i;function s(h){return"."+t(h).join(".")}n.asCSSSelector=s;function r(h){return h&&typeof h=="object"&&typeof h.id=="string"&&(typeof h.color>"u"||Uz.isThemeColor(h.color))}n.isThemeIcon=r;const o=new RegExp(`^\\$\\((${n.iconNameExpression}(?:${n.iconModifierExpression})?)\\)$`);function a(h){const f=o.exec(h);if(!f)return;const[,g]=f;return{id:g}}n.fromString=a;function l(h){return{id:h}}n.fromId=l;function c(h,f){let g=h.id;const p=g.lastIndexOf("~");return p!==-1&&(g=g.substring(0,p)),f&&(g=`${g}~${f}`),{id:g}}n.modify=c;function d(h){const f=h.id.lastIndexOf("~");if(f!==-1)return h.id.substring(f+1)}n.getModifier=d;function u(h,f){var g,p;return h.id===f.id&&((g=h.color)==null?void 0:g.id)===((p=f.color)==null?void 0:p.id)}n.isEqual=u})(ot||(ot={}));const Vi=Wt("commandService"),Gt=new class{constructor(){this._commands=new Map,this._onDidRegisterCommand=new X,this.onDidRegisterCommand=this._onDidRegisterCommand.event}registerCommand(n,e){if(!n)throw new Error("invalid command");if(typeof n=="string"){if(!e)throw new Error("invalid command");return this.registerCommand({id:n,handler:e})}if(n.metadata&&Array.isArray(n.metadata.args)){const o=[];for(const l of n.metadata.args)o.push(l.constraint);const a=n.handler;n.handler=function(l,...c){return i$e(c,o),a(l,...c)}}const{id:t}=n;let i=this._commands.get(t);i||(i=new xo,this._commands.set(t,i));const s=i.unshift(n),r=Ye(()=>{s();const o=this._commands.get(t);o!=null&&o.isEmpty()&&this._commands.delete(t)});return this._onDidRegisterCommand.fire(t),r}registerCommandAlias(n,e){return Gt.registerCommand(n,(t,...i)=>t.get(Vi).executeCommand(e,...i))}getCommand(n){const e=this._commands.get(n);if(!(!e||e.isEmpty()))return qt.first(e)}getCommands(){const n=new Map;for(const e of this._commands.keys()){const t=this.getCommand(e);t&&n.set(e,t)}return n}};Gt.registerCommand("noop",()=>{});function q9(...n){switch(n.length){case 1:return v("contextkey.scanner.hint.didYouMean1","Did you mean {0}?",n[0]);case 2:return v("contextkey.scanner.hint.didYouMean2","Did you mean {0} or {1}?",n[0],n[1]);case 3:return v("contextkey.scanner.hint.didYouMean3","Did you mean {0}, {1} or {2}?",n[0],n[1],n[2]);default:return}}const jqe=v("contextkey.scanner.hint.didYouForgetToOpenOrCloseQuote","Did you forget to open or close the quote?"),Kqe=v("contextkey.scanner.hint.didYouForgetToEscapeSlash","Did you forget to escape the '/' (slash) character? Put two backslashes before it to escape, e.g., '\\\\/'.");var kg;let RL=(kg=class{constructor(){this._input="",this._start=0,this._current=0,this._tokens=[],this._errors=[],this.stringRe=/[a-zA-Z0-9_<>\-\./\\:\*\?\+\[\]\^,#@;"%\$\p{L}-]+/uy}static getLexeme(e){switch(e.type){case 0:return"(";case 1:return")";case 2:return"!";case 3:return e.isTripleEq?"===":"==";case 4:return e.isTripleEq?"!==":"!=";case 5:return"<";case 6:return"<=";case 7:return">=";case 8:return">=";case 9:return"=~";case 10:return e.lexeme;case 11:return"true";case 12:return"false";case 13:return"in";case 14:return"not";case 15:return"&&";case 16:return"||";case 17:return e.lexeme;case 18:return e.lexeme;case 19:return e.lexeme;case 20:return"EOF";default:throw YZ(`unhandled token type: ${JSON.stringify(e)}; have you forgotten to add a case?`)}}reset(e){return this._input=e,this._start=0,this._current=0,this._tokens=[],this._errors=[],this}scan(){for(;!this._isAtEnd();)switch(this._start=this._current,this._advance()){case 40:this._addToken(0);break;case 41:this._addToken(1);break;case 33:if(this._match(61)){const t=this._match(61);this._tokens.push({type:4,offset:this._start,isTripleEq:t})}else this._addToken(2);break;case 39:this._quotedString();break;case 47:this._regex();break;case 61:if(this._match(61)){const t=this._match(61);this._tokens.push({type:3,offset:this._start,isTripleEq:t})}else this._match(126)?this._addToken(9):this._error(q9("==","=~"));break;case 60:this._addToken(this._match(61)?6:5);break;case 62:this._addToken(this._match(61)?8:7);break;case 38:this._match(38)?this._addToken(15):this._error(q9("&&"));break;case 124:this._match(124)?this._addToken(16):this._error(q9("||"));break;case 32:case 13:case 9:case 10:case 160:break;default:this._string()}return this._start=this._current,this._addToken(20),Array.from(this._tokens)}_match(e){return this._isAtEnd()||this._input.charCodeAt(this._current)!==e?!1:(this._current++,!0)}_advance(){return this._input.charCodeAt(this._current++)}_peek(){return this._isAtEnd()?0:this._input.charCodeAt(this._current)}_addToken(e){this._tokens.push({type:e,offset:this._start})}_error(e){const t=this._start,i=this._input.substring(this._start,this._current),s={type:19,offset:this._start,lexeme:i};this._errors.push({offset:t,lexeme:i,additionalInfo:e}),this._tokens.push(s)}_string(){this.stringRe.lastIndex=this._start;const e=this.stringRe.exec(this._input);if(e){this._current=this._start+e[0].length;const t=this._input.substring(this._start,this._current),i=kg._keywords.get(t);i?this._addToken(i):this._tokens.push({type:17,lexeme:t,offset:this._start})}}_quotedString(){for(;this._peek()!==39&&!this._isAtEnd();)this._advance();if(this._isAtEnd()){this._error(jqe);return}this._advance(),this._tokens.push({type:18,lexeme:this._input.substring(this._start+1,this._current-1),offset:this._start+1})}_regex(){let e=this._current,t=!1,i=!1;for(;;){if(e>=this._input.length){this._current=e,this._error(Kqe);return}const r=this._input.charCodeAt(e);if(t)t=!1;else if(r===47&&!i){e++;break}else r===91?i=!0:r===92?t=!0:r===93&&(i=!1);e++}for(;e<this._input.length&&kg._regexFlags.has(this._input.charCodeAt(e));)e++;this._current=e;const s=this._input.substring(this._start,this._current);this._tokens.push({type:10,lexeme:s,offset:this._start})}_isAtEnd(){return this._current>=this._input.length}},kg._regexFlags=new Set(["i","g","s","m","y","u"].map(e=>e.charCodeAt(0))),kg._keywords=new Map([["not",14],["in",13],["false",12],["true",11]]),kg);const Fr=new Map;Fr.set("false",!1);Fr.set("true",!0);Fr.set("isMac",Bt);Fr.set("isLinux",Po);Fr.set("isWindows",wr);Fr.set("isWeb",B0);Fr.set("isMacNative",Bt&&!B0);Fr.set("isEdge",_$e);Fr.set("isFirefox",p$e);Fr.set("isChrome",jwe);Fr.set("isSafari",m$e);const qqe=Object.prototype.hasOwnProperty,Gqe={regexParsingWithErrorRecovery:!0},Yqe=v("contextkey.parser.error.emptyString","Empty context key expression"),Zqe=v("contextkey.parser.error.emptyString.hint","Did you forget to write an expression? You can also put 'false' or 'true' to always evaluate to false or true, respectively."),Xqe=v("contextkey.parser.error.noInAfterNot","'in' after 'not'."),Voe=v("contextkey.parser.error.closingParenthesis","closing parenthesis ')'"),Qqe=v("contextkey.parser.error.unexpectedToken","Unexpected token"),Jqe=v("contextkey.parser.error.unexpectedToken.hint","Did you forget to put && or || before the token?"),eGe=v("contextkey.parser.error.unexpectedEOF","Unexpected end of expression"),tGe=v("contextkey.parser.error.unexpectedEOF.hint","Did you forget to put a context key?");var Wh;let iGe=(Wh=class{constructor(e=Gqe){this._config=e,this._scanner=new RL,this._tokens=[],this._current=0,this._parsingErrors=[],this._flagsGYRe=/g|y/g}parse(e){if(e===""){this._parsingErrors.push({message:Yqe,offset:0,lexeme:"",additionalInfo:Zqe});return}this._tokens=this._scanner.reset(e).scan(),this._current=0,this._parsingErrors=[];try{const t=this._expr();if(!this._isAtEnd()){const i=this._peek(),s=i.type===17?Jqe:void 0;throw this._parsingErrors.push({message:Qqe,offset:i.offset,lexeme:RL.getLexeme(i),additionalInfo:s}),Wh._parseError}return t}catch(t){if(t!==Wh._parseError)throw t;return}}_expr(){return this._or()}_or(){const e=[this._and()];for(;this._matchOne(16);){const t=this._and();e.push(t)}return e.length===1?e[0]:he.or(...e)}_and(){const e=[this._term()];for(;this._matchOne(15);){const t=this._term();e.push(t)}return e.length===1?e[0]:he.and(...e)}_term(){if(this._matchOne(2)){const e=this._peek();switch(e.type){case 11:return this._advance(),Oo.INSTANCE;case 12:return this._advance(),ha.INSTANCE;case 0:{this._advance();const t=this._expr();return this._consume(1,Voe),t==null?void 0:t.negate()}case 17:return this._advance(),H0.create(e.lexeme);default:throw this._errExpectedButGot("KEY | true | false | '(' expression ')'",e)}}return this._primary()}_primary(){const e=this._peek();switch(e.type){case 11:return this._advance(),he.true();case 12:return this._advance(),he.false();case 0:{this._advance();const t=this._expr();return this._consume(1,Voe),t}case 17:{const t=e.lexeme;if(this._advance(),this._matchOne(9)){const s=this._peek();if(!this._config.regexParsingWithErrorRecovery){if(this._advance(),s.type!==10)throw this._errExpectedButGot("REGEX",s);const r=s.lexeme,o=r.lastIndexOf("/"),a=o===r.length-1?void 0:this._removeFlagsGY(r.substring(o+1));let l;try{l=new RegExp(r.substring(1,o),a)}catch{throw this._errExpectedButGot("REGEX",s)}return WI.create(t,l)}switch(s.type){case 10:case 19:{const r=[s.lexeme];this._advance();let o=this._peek(),a=0;for(let h=0;h<s.lexeme.length;h++)s.lexeme.charCodeAt(h)===40?a++:s.lexeme.charCodeAt(h)===41&&a--;for(;!this._isAtEnd()&&o.type!==15&&o.type!==16;){switch(o.type){case 0:a++;break;case 1:a--;break;case 10:case 18:for(let h=0;h<o.lexeme.length;h++)o.lexeme.charCodeAt(h)===40?a++:s.lexeme.charCodeAt(h)===41&&a--}if(a<0)break;r.push(RL.getLexeme(o)),this._advance(),o=this._peek()}const l=r.join(""),c=l.lastIndexOf("/"),d=c===l.length-1?void 0:this._removeFlagsGY(l.substring(c+1));let u;try{u=new RegExp(l.substring(1,c),d)}catch{throw this._errExpectedButGot("REGEX",s)}return he.regex(t,u)}case 18:{const r=s.lexeme;this._advance();let o=null;if(!h0e(r)){const a=r.indexOf("/"),l=r.lastIndexOf("/");if(a!==l&&a>=0){const c=r.slice(a+1,l),d=r[l+1]==="i"?"i":"";try{o=new RegExp(c,d)}catch{throw this._errExpectedButGot("REGEX",s)}}}if(o===null)throw this._errExpectedButGot("REGEX",s);return WI.create(t,o)}default:throw this._errExpectedButGot("REGEX",this._peek())}}if(this._matchOne(14)){this._consume(13,Xqe);const s=this._value();return he.notIn(t,s)}switch(this._peek().type){case 3:{this._advance();const s=this._value();if(this._previous().type===18)return he.equals(t,s);switch(s){case"true":return he.has(t);case"false":return he.not(t);default:return he.equals(t,s)}}case 4:{this._advance();const s=this._value();if(this._previous().type===18)return he.notEquals(t,s);switch(s){case"true":return he.not(t);case"false":return he.has(t);default:return he.notEquals(t,s)}}case 5:return this._advance(),Y3.create(t,this._value());case 6:return this._advance(),Z3.create(t,this._value());case 7:return this._advance(),q3.create(t,this._value());case 8:return this._advance(),G3.create(t,this._value());case 13:return this._advance(),he.in(t,this._value());default:return he.has(t)}}case 20:throw this._parsingErrors.push({message:eGe,offset:e.offset,lexeme:"",additionalInfo:tGe}),Wh._parseError;default:throw this._errExpectedButGot(`true | false | KEY 
	| KEY '=~' REGEX 
	| KEY ('==' | '!=' | '<' | '<=' | '>' | '>=' | 'in' | 'not' 'in') value`,this._peek())}}_value(){const e=this._peek();switch(e.type){case 17:case 18:return this._advance(),e.lexeme;case 11:return this._advance(),"true";case 12:return this._advance(),"false";case 13:return this._advance(),"in";default:return""}}_removeFlagsGY(e){return e.replaceAll(this._flagsGYRe,"")}_previous(){return this._tokens[this._current-1]}_matchOne(e){return this._check(e)?(this._advance(),!0):!1}_advance(){return this._isAtEnd()||this._current++,this._previous()}_consume(e,t){if(this._check(e))return this._advance();throw this._errExpectedButGot(t,this._peek())}_errExpectedButGot(e,t,i){const s=v("contextkey.parser.error.expectedButGot",`Expected: {0}
Received: '{1}'.`,e,RL.getLexeme(t)),r=t.offset,o=RL.getLexeme(t);return this._parsingErrors.push({message:s,offset:r,lexeme:o,additionalInfo:i}),Wh._parseError}_check(e){return this._peek().type===e}_peek(){return this._tokens[this._current]}_isAtEnd(){return this._peek().type===20}},Wh._parseError=new Error,Wh);const Uee=class Uee{static false(){return Oo.INSTANCE}static true(){return ha.INSTANCE}static has(e){return W0.create(e)}static equals(e,t){return Dx.create(e,t)}static notEquals(e,t){return j3.create(e,t)}static regex(e,t){return WI.create(e,t)}static in(e,t){return U3.create(e,t)}static notIn(e,t){return $3.create(e,t)}static not(e){return H0.create(e)}static and(...e){return Sb.create(e,null,!0)}static or(...e){return lg.create(e,null,!0)}static deserialize(e){return e==null?void 0:this._parser.parse(e)}};Uee._parser=new iGe({regexParsingWithErrorRecovery:!1});let he=Uee;function nGe(n,e){const t=n?n.substituteConstants():void 0,i=e?e.substituteConstants():void 0;return!t&&!i?!0:!t||!i?!1:t.equals(i)}function Yk(n,e){return n.cmp(e)}const c4=class c4{constructor(){this.type=0}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!1}serialize(){return"false"}keys(){return[]}negate(){return ha.INSTANCE}};c4.INSTANCE=new c4;let Oo=c4;const d4=class d4{constructor(){this.type=1}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!0}serialize(){return"true"}keys(){return[]}negate(){return Oo.INSTANCE}};d4.INSTANCE=new d4;let ha=d4;class W0{static create(e,t=null){const i=Fr.get(e);return typeof i=="boolean"?i?ha.INSTANCE:Oo.INSTANCE:new W0(e,t)}constructor(e,t){this.key=e,this.negated=t,this.type=2}cmp(e){return e.type!==this.type?this.type-e.type:Y0e(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=Fr.get(this.key);return typeof e=="boolean"?e?ha.INSTANCE:Oo.INSTANCE:this}evaluate(e){return!!e.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}negate(){return this.negated||(this.negated=H0.create(this.key,this)),this.negated}}class Dx{static create(e,t,i=null){if(typeof t=="boolean")return t?W0.create(e,i):H0.create(e,i);const s=Fr.get(e);return typeof s=="boolean"?t===(s?"true":"false")?ha.INSTANCE:Oo.INSTANCE:new Dx(e,t,i)}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=4}cmp(e){return e.type!==this.type?this.type-e.type:V0(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=Fr.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?ha.INSTANCE:Oo.INSTANCE}return this}evaluate(e){return e.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=j3.create(this.key,this.value,this)),this.negated}}class U3{static create(e,t){return new U3(e,t)}constructor(e,t){this.key=e,this.valueKey=t,this.type=10,this.negated=null}cmp(e){return e.type!==this.type?this.type-e.type:V0(this.key,this.valueKey,e.key,e.valueKey)}equals(e){return e.type===this.type?this.key===e.key&&this.valueKey===e.valueKey:!1}substituteConstants(){return this}evaluate(e){const t=e.getValue(this.valueKey),i=e.getValue(this.key);return Array.isArray(t)?t.includes(i):typeof i=="string"&&typeof t=="object"&&t!==null?qqe.call(t,i):!1}serialize(){return`${this.key} in '${this.valueKey}'`}keys(){return[this.key,this.valueKey]}negate(){return this.negated||(this.negated=$3.create(this.key,this.valueKey)),this.negated}}class $3{static create(e,t){return new $3(e,t)}constructor(e,t){this.key=e,this.valueKey=t,this.type=11,this._negated=U3.create(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:this._negated.cmp(e._negated)}equals(e){return e.type===this.type?this._negated.equals(e._negated):!1}substituteConstants(){return this}evaluate(e){return!this._negated.evaluate(e)}serialize(){return`${this.key} not in '${this.valueKey}'`}keys(){return this._negated.keys()}negate(){return this._negated}}class j3{static create(e,t,i=null){if(typeof t=="boolean")return t?H0.create(e,i):W0.create(e,i);const s=Fr.get(e);return typeof s=="boolean"?t===(s?"true":"false")?Oo.INSTANCE:ha.INSTANCE:new j3(e,t,i)}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=5}cmp(e){return e.type!==this.type?this.type-e.type:V0(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=Fr.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?Oo.INSTANCE:ha.INSTANCE}return this}evaluate(e){return e.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=Dx.create(this.key,this.value,this)),this.negated}}class H0{static create(e,t=null){const i=Fr.get(e);return typeof i=="boolean"?i?Oo.INSTANCE:ha.INSTANCE:new H0(e,t)}constructor(e,t){this.key=e,this.negated=t,this.type=3}cmp(e){return e.type!==this.type?this.type-e.type:Y0e(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=Fr.get(this.key);return typeof e=="boolean"?e?Oo.INSTANCE:ha.INSTANCE:this}evaluate(e){return!e.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=W0.create(this.key,this)),this.negated}}function K3(n,e){if(typeof n=="string"){const t=parseFloat(n);isNaN(t)||(n=t)}return typeof n=="string"||typeof n=="number"?e(n):Oo.INSTANCE}class q3{static create(e,t,i=null){return K3(t,s=>new q3(e,s,i))}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=12}cmp(e){return e.type!==this.type?this.type-e.type:V0(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>this.value}serialize(){return`${this.key} > ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=Z3.create(this.key,this.value,this)),this.negated}}class G3{static create(e,t,i=null){return K3(t,s=>new G3(e,s,i))}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=13}cmp(e){return e.type!==this.type?this.type-e.type:V0(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>=this.value}serialize(){return`${this.key} >= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=Y3.create(this.key,this.value,this)),this.negated}}class Y3{static create(e,t,i=null){return K3(t,s=>new Y3(e,s,i))}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=14}cmp(e){return e.type!==this.type?this.type-e.type:V0(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<this.value}serialize(){return`${this.key} < ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=G3.create(this.key,this.value,this)),this.negated}}class Z3{static create(e,t,i=null){return K3(t,s=>new Z3(e,s,i))}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=15}cmp(e){return e.type!==this.type?this.type-e.type:V0(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<=this.value}serialize(){return`${this.key} <= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=q3.create(this.key,this.value,this)),this.negated}}class WI{static create(e,t){return new WI(e,t)}constructor(e,t){this.key=e,this.regexp=t,this.type=7,this.negated=null}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.key<e.key)return-1;if(this.key>e.key)return 1;const t=this.regexp?this.regexp.source:"",i=e.regexp?e.regexp.source:"";return t<i?-1:t>i?1:0}equals(e){if(e.type===this.type){const t=this.regexp?this.regexp.source:"",i=e.regexp?e.regexp.source:"";return this.key===e.key&&t===i}return!1}substituteConstants(){return this}evaluate(e){const t=e.getValue(this.key);return this.regexp?this.regexp.test(t):!1}serialize(){const e=this.regexp?`/${this.regexp.source}/${this.regexp.flags}`:"/invalid/";return`${this.key} =~ ${e}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=_X.create(this)),this.negated}}class _X{static create(e){return new _X(e)}constructor(e){this._actual=e,this.type=8}cmp(e){return e.type!==this.type?this.type-e.type:this._actual.cmp(e._actual)}equals(e){return e.type===this.type?this._actual.equals(e._actual):!1}substituteConstants(){return this}evaluate(e){return!this._actual.evaluate(e)}serialize(){return`!(${this._actual.serialize()})`}keys(){return this._actual.keys()}negate(){return this._actual}}function G0e(n){let e=null;for(let t=0,i=n.length;t<i;t++){const s=n[t].substituteConstants();if(n[t]!==s&&e===null){e=[];for(let r=0;r<t;r++)e[r]=n[r]}e!==null&&(e[t]=s)}return e===null?n:e}class Sb{static create(e,t,i){return Sb._normalizeArr(e,t,i)}constructor(e,t){this.expr=e,this.negated=t,this.type=6}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,i=this.expr.length;t<i;t++){const s=Yk(this.expr[t],e.expr[t]);if(s!==0)return s}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,i=this.expr.length;t<i;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=G0e(this.expr);return e===this.expr?this:Sb.create(e,this.negated,!1)}evaluate(e){for(let t=0,i=this.expr.length;t<i;t++)if(!this.expr[t].evaluate(e))return!1;return!0}static _normalizeArr(e,t,i){const s=[];let r=!1;for(const o of e)if(o){if(o.type===1){r=!0;continue}if(o.type===0)return Oo.INSTANCE;if(o.type===6){s.push(...o.expr);continue}s.push(o)}if(s.length===0&&r)return ha.INSTANCE;if(s.length!==0){if(s.length===1)return s[0];s.sort(Yk);for(let o=1;o<s.length;o++)s[o-1].equals(s[o])&&(s.splice(o,1),o--);if(s.length===1)return s[0];for(;s.length>1;){const o=s[s.length-1];if(o.type!==9)break;s.pop();const a=s.pop(),l=s.length===0,c=lg.create(o.expr.map(d=>Sb.create([d,a],null,i)),null,l);c&&(s.push(c),s.sort(Yk))}if(s.length===1)return s[0];if(i){for(let o=0;o<s.length;o++)for(let a=o+1;a<s.length;a++)if(s[o].negate().equals(s[a]))return Oo.INSTANCE;if(s.length===1)return s[0]}return new Sb(s,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" && ")}keys(){const e=[];for(const t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){const e=[];for(const t of this.expr)e.push(t.negate());this.negated=lg.create(e,this,!0)}return this.negated}}class lg{static create(e,t,i){return lg._normalizeArr(e,t,i)}constructor(e,t){this.expr=e,this.negated=t,this.type=9}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,i=this.expr.length;t<i;t++){const s=Yk(this.expr[t],e.expr[t]);if(s!==0)return s}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,i=this.expr.length;t<i;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=G0e(this.expr);return e===this.expr?this:lg.create(e,this.negated,!1)}evaluate(e){for(let t=0,i=this.expr.length;t<i;t++)if(this.expr[t].evaluate(e))return!0;return!1}static _normalizeArr(e,t,i){let s=[],r=!1;if(e){for(let o=0,a=e.length;o<a;o++){const l=e[o];if(l){if(l.type===0){r=!0;continue}if(l.type===1)return ha.INSTANCE;if(l.type===9){s=s.concat(l.expr);continue}s.push(l)}}if(s.length===0&&r)return Oo.INSTANCE;s.sort(Yk)}if(s.length!==0){if(s.length===1)return s[0];for(let o=1;o<s.length;o++)s[o-1].equals(s[o])&&(s.splice(o,1),o--);if(s.length===1)return s[0];if(i){for(let o=0;o<s.length;o++)for(let a=o+1;a<s.length;a++)if(s[o].negate().equals(s[a]))return ha.INSTANCE;if(s.length===1)return s[0]}return new lg(s,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" || ")}keys(){const e=[];for(const t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){const e=[];for(const t of this.expr)e.push(t.negate());for(;e.length>1;){const t=e.shift(),i=e.shift(),s=[];for(const r of Uoe(t))for(const o of Uoe(i))s.push(Sb.create([r,o],null,!1));e.unshift(lg.create(s,null,!1))}this.negated=lg.create(e,this,!0)}return this.negated}}const G1=class G1 extends W0{static all(){return G1._info.values()}constructor(e,t,i){super(e,null),this._defaultValue=t,typeof i=="object"?G1._info.push({...i,key:e}):i!==!0&&G1._info.push({key:e,description:i,type:t!=null?typeof t:void 0})}bindTo(e){return e.createKey(this.key,this._defaultValue)}getValue(e){return e.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(e){return Dx.create(this.key,e)}};G1._info=[];let Re=G1;const at=Wt("contextKeyService");function Y0e(n,e){return n<e?-1:n>e?1:0}function V0(n,e,t,i){return n<t?-1:n>t?1:e<i?-1:e>i?1:0}function $z(n,e){if(n.type===0||e.type===1)return!0;if(n.type===9)return e.type===9?zoe(n.expr,e.expr):!1;if(e.type===9){for(const t of e.expr)if($z(n,t))return!0;return!1}if(n.type===6){if(e.type===6)return zoe(e.expr,n.expr);for(const t of n.expr)if($z(t,e))return!0;return!1}return n.equals(e)}function zoe(n,e){let t=0,i=0;for(;t<n.length&&i<e.length;){const s=n[t].cmp(e[i]);if(s<0)return!1;s===0&&t++,i++}return t===n.length}function Uoe(n){return n.type===9?n.expr:[n]}function G9(n,e){if(!n)throw new Error(e?`Assertion failed (${e})`:"Assertion Failed")}function X3(n,e="Unreachable"){throw new Error(e)}function $oe(n){n||pt(new li("Soft Assertion Failed"))}function h0(n){if(!n()){debugger;n(),pt(new li("Assertion Failed"))}}function vX(n,e){let t=0;for(;t<n.length-1;){const i=n[t],s=n[t+1];if(!e(i,s))return!1;t++}return!0}class sGe{constructor(){this.data=new Map}add(e,t){G9(ca(e)),G9(zs(t)),G9(!this.data.has(e),"There is already an extension with this id"),this.data.set(e,t)}as(e){return this.data.get(e)||null}}const _n=new sGe;class bX{constructor(){this._coreKeybindings=new xo,this._extensionKeybindings=[],this._cachedMergedKeybindings=null}static bindToCurrentPlatform(e){if(Ka===1){if(e&&e.win)return e.win}else if(Ka===2){if(e&&e.mac)return e.mac}else if(e&&e.linux)return e.linux;return e}registerKeybindingRule(e){const t=bX.bindToCurrentPlatform(e),i=new ue;if(t&&t.primary){const s=Nz(t.primary,Ka);s&&i.add(this._registerDefaultKeybinding(s,e.id,e.args,e.weight,0,e.when))}if(t&&Array.isArray(t.secondary))for(let s=0,r=t.secondary.length;s<r;s++){const o=t.secondary[s],a=Nz(o,Ka);a&&i.add(this._registerDefaultKeybinding(a,e.id,e.args,e.weight,-s-1,e.when))}return i}registerCommandAndKeybindingRule(e){return Ld(this.registerKeybindingRule(e),Gt.registerCommand(e))}_registerDefaultKeybinding(e,t,i,s,r,o){const a=this._coreKeybindings.push({keybinding:e,command:t,commandArgs:i,when:o,weight1:s,weight2:r,extensionId:null,isBuiltinExtension:!1});return this._cachedMergedKeybindings=null,Ye(()=>{a(),this._cachedMergedKeybindings=null})}getDefaultKeybindings(){return this._cachedMergedKeybindings||(this._cachedMergedKeybindings=Array.from(this._coreKeybindings).concat(this._extensionKeybindings),this._cachedMergedKeybindings.sort(oGe)),this._cachedMergedKeybindings.slice(0)}}const Fo=new bX,rGe={EditorModes:"platform.keybindingsRegistry"};_n.add(rGe.EditorModes,Fo);function oGe(n,e){if(n.weight1!==e.weight1)return n.weight1-e.weight1;if(n.command&&e.command){if(n.command<e.command)return-1;if(n.command>e.command)return 1}return n.weight2-e.weight2}var aGe=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},joe=function(n,e){return function(t,i){e(t,i,n)}},w2;function Sy(n){return n.command!==void 0}function lGe(n){return n.submenu!==void 0}const W=class W{constructor(e){if(W._instances.has(e))throw new TypeError(`MenuId with identifier '${e}' already exists. Use MenuId.for(ident) or a unique identifier`);W._instances.set(e,this),this.id=e}};W._instances=new Map,W.CommandPalette=new W("CommandPalette"),W.DebugBreakpointsContext=new W("DebugBreakpointsContext"),W.DebugCallStackContext=new W("DebugCallStackContext"),W.DebugConsoleContext=new W("DebugConsoleContext"),W.DebugVariablesContext=new W("DebugVariablesContext"),W.NotebookVariablesContext=new W("NotebookVariablesContext"),W.DebugHoverContext=new W("DebugHoverContext"),W.DebugWatchContext=new W("DebugWatchContext"),W.DebugToolBar=new W("DebugToolBar"),W.DebugToolBarStop=new W("DebugToolBarStop"),W.DebugCallStackToolbar=new W("DebugCallStackToolbar"),W.DebugCreateConfiguration=new W("DebugCreateConfiguration"),W.EditorContext=new W("EditorContext"),W.SimpleEditorContext=new W("SimpleEditorContext"),W.EditorContent=new W("EditorContent"),W.EditorLineNumberContext=new W("EditorLineNumberContext"),W.EditorContextCopy=new W("EditorContextCopy"),W.EditorContextPeek=new W("EditorContextPeek"),W.EditorContextShare=new W("EditorContextShare"),W.EditorTitle=new W("EditorTitle"),W.EditorTitleRun=new W("EditorTitleRun"),W.EditorTitleContext=new W("EditorTitleContext"),W.EditorTitleContextShare=new W("EditorTitleContextShare"),W.EmptyEditorGroup=new W("EmptyEditorGroup"),W.EmptyEditorGroupContext=new W("EmptyEditorGroupContext"),W.EditorTabsBarContext=new W("EditorTabsBarContext"),W.EditorTabsBarShowTabsSubmenu=new W("EditorTabsBarShowTabsSubmenu"),W.EditorTabsBarShowTabsZenModeSubmenu=new W("EditorTabsBarShowTabsZenModeSubmenu"),W.EditorActionsPositionSubmenu=new W("EditorActionsPositionSubmenu"),W.ExplorerContext=new W("ExplorerContext"),W.ExplorerContextShare=new W("ExplorerContextShare"),W.ExtensionContext=new W("ExtensionContext"),W.GlobalActivity=new W("GlobalActivity"),W.CommandCenter=new W("CommandCenter"),W.CommandCenterCenter=new W("CommandCenterCenter"),W.LayoutControlMenuSubmenu=new W("LayoutControlMenuSubmenu"),W.LayoutControlMenu=new W("LayoutControlMenu"),W.MenubarMainMenu=new W("MenubarMainMenu"),W.MenubarAppearanceMenu=new W("MenubarAppearanceMenu"),W.MenubarDebugMenu=new W("MenubarDebugMenu"),W.MenubarEditMenu=new W("MenubarEditMenu"),W.MenubarCopy=new W("MenubarCopy"),W.MenubarFileMenu=new W("MenubarFileMenu"),W.MenubarGoMenu=new W("MenubarGoMenu"),W.MenubarHelpMenu=new W("MenubarHelpMenu"),W.MenubarLayoutMenu=new W("MenubarLayoutMenu"),W.MenubarNewBreakpointMenu=new W("MenubarNewBreakpointMenu"),W.PanelAlignmentMenu=new W("PanelAlignmentMenu"),W.PanelPositionMenu=new W("PanelPositionMenu"),W.ActivityBarPositionMenu=new W("ActivityBarPositionMenu"),W.MenubarPreferencesMenu=new W("MenubarPreferencesMenu"),W.MenubarRecentMenu=new W("MenubarRecentMenu"),W.MenubarSelectionMenu=new W("MenubarSelectionMenu"),W.MenubarShare=new W("MenubarShare"),W.MenubarSwitchEditorMenu=new W("MenubarSwitchEditorMenu"),W.MenubarSwitchGroupMenu=new W("MenubarSwitchGroupMenu"),W.MenubarTerminalMenu=new W("MenubarTerminalMenu"),W.MenubarViewMenu=new W("MenubarViewMenu"),W.MenubarHomeMenu=new W("MenubarHomeMenu"),W.OpenEditorsContext=new W("OpenEditorsContext"),W.OpenEditorsContextShare=new W("OpenEditorsContextShare"),W.ProblemsPanelContext=new W("ProblemsPanelContext"),W.SCMInputBox=new W("SCMInputBox"),W.SCMChangesSeparator=new W("SCMChangesSeparator"),W.SCMChangesContext=new W("SCMChangesContext"),W.SCMIncomingChanges=new W("SCMIncomingChanges"),W.SCMIncomingChangesContext=new W("SCMIncomingChangesContext"),W.SCMIncomingChangesSetting=new W("SCMIncomingChangesSetting"),W.SCMOutgoingChanges=new W("SCMOutgoingChanges"),W.SCMOutgoingChangesContext=new W("SCMOutgoingChangesContext"),W.SCMOutgoingChangesSetting=new W("SCMOutgoingChangesSetting"),W.SCMIncomingChangesAllChangesContext=new W("SCMIncomingChangesAllChangesContext"),W.SCMIncomingChangesHistoryItemContext=new W("SCMIncomingChangesHistoryItemContext"),W.SCMOutgoingChangesAllChangesContext=new W("SCMOutgoingChangesAllChangesContext"),W.SCMOutgoingChangesHistoryItemContext=new W("SCMOutgoingChangesHistoryItemContext"),W.SCMChangeContext=new W("SCMChangeContext"),W.SCMResourceContext=new W("SCMResourceContext"),W.SCMResourceContextShare=new W("SCMResourceContextShare"),W.SCMResourceFolderContext=new W("SCMResourceFolderContext"),W.SCMResourceGroupContext=new W("SCMResourceGroupContext"),W.SCMSourceControl=new W("SCMSourceControl"),W.SCMSourceControlInline=new W("SCMSourceControlInline"),W.SCMSourceControlTitle=new W("SCMSourceControlTitle"),W.SCMHistoryTitle=new W("SCMHistoryTitle"),W.SCMTitle=new W("SCMTitle"),W.SearchContext=new W("SearchContext"),W.SearchActionMenu=new W("SearchActionContext"),W.StatusBarWindowIndicatorMenu=new W("StatusBarWindowIndicatorMenu"),W.StatusBarRemoteIndicatorMenu=new W("StatusBarRemoteIndicatorMenu"),W.StickyScrollContext=new W("StickyScrollContext"),W.TestItem=new W("TestItem"),W.TestItemGutter=new W("TestItemGutter"),W.TestProfilesContext=new W("TestProfilesContext"),W.TestMessageContext=new W("TestMessageContext"),W.TestMessageContent=new W("TestMessageContent"),W.TestPeekElement=new W("TestPeekElement"),W.TestPeekTitle=new W("TestPeekTitle"),W.TestCallStack=new W("TestCallStack"),W.TouchBarContext=new W("TouchBarContext"),W.TitleBarContext=new W("TitleBarContext"),W.TitleBarTitleContext=new W("TitleBarTitleContext"),W.TunnelContext=new W("TunnelContext"),W.TunnelPrivacy=new W("TunnelPrivacy"),W.TunnelProtocol=new W("TunnelProtocol"),W.TunnelPortInline=new W("TunnelInline"),W.TunnelTitle=new W("TunnelTitle"),W.TunnelLocalAddressInline=new W("TunnelLocalAddressInline"),W.TunnelOriginInline=new W("TunnelOriginInline"),W.ViewItemContext=new W("ViewItemContext"),W.ViewContainerTitle=new W("ViewContainerTitle"),W.ViewContainerTitleContext=new W("ViewContainerTitleContext"),W.ViewTitle=new W("ViewTitle"),W.ViewTitleContext=new W("ViewTitleContext"),W.CommentEditorActions=new W("CommentEditorActions"),W.CommentThreadTitle=new W("CommentThreadTitle"),W.CommentThreadActions=new W("CommentThreadActions"),W.CommentThreadAdditionalActions=new W("CommentThreadAdditionalActions"),W.CommentThreadTitleContext=new W("CommentThreadTitleContext"),W.CommentThreadCommentContext=new W("CommentThreadCommentContext"),W.CommentTitle=new W("CommentTitle"),W.CommentActions=new W("CommentActions"),W.CommentsViewThreadActions=new W("CommentsViewThreadActions"),W.InteractiveToolbar=new W("InteractiveToolbar"),W.InteractiveCellTitle=new W("InteractiveCellTitle"),W.InteractiveCellDelete=new W("InteractiveCellDelete"),W.InteractiveCellExecute=new W("InteractiveCellExecute"),W.InteractiveInputExecute=new W("InteractiveInputExecute"),W.InteractiveInputConfig=new W("InteractiveInputConfig"),W.ReplInputExecute=new W("ReplInputExecute"),W.IssueReporter=new W("IssueReporter"),W.NotebookToolbar=new W("NotebookToolbar"),W.NotebookStickyScrollContext=new W("NotebookStickyScrollContext"),W.NotebookCellTitle=new W("NotebookCellTitle"),W.NotebookCellDelete=new W("NotebookCellDelete"),W.NotebookCellInsert=new W("NotebookCellInsert"),W.NotebookCellBetween=new W("NotebookCellBetween"),W.NotebookCellListTop=new W("NotebookCellTop"),W.NotebookCellExecute=new W("NotebookCellExecute"),W.NotebookCellExecuteGoTo=new W("NotebookCellExecuteGoTo"),W.NotebookCellExecutePrimary=new W("NotebookCellExecutePrimary"),W.NotebookDiffCellInputTitle=new W("NotebookDiffCellInputTitle"),W.NotebookDiffCellMetadataTitle=new W("NotebookDiffCellMetadataTitle"),W.NotebookDiffCellOutputsTitle=new W("NotebookDiffCellOutputsTitle"),W.NotebookOutputToolbar=new W("NotebookOutputToolbar"),W.NotebookOutlineFilter=new W("NotebookOutlineFilter"),W.NotebookOutlineActionMenu=new W("NotebookOutlineActionMenu"),W.NotebookEditorLayoutConfigure=new W("NotebookEditorLayoutConfigure"),W.NotebookKernelSource=new W("NotebookKernelSource"),W.BulkEditTitle=new W("BulkEditTitle"),W.BulkEditContext=new W("BulkEditContext"),W.TimelineItemContext=new W("TimelineItemContext"),W.TimelineTitle=new W("TimelineTitle"),W.TimelineTitleContext=new W("TimelineTitleContext"),W.TimelineFilterSubMenu=new W("TimelineFilterSubMenu"),W.AccountsContext=new W("AccountsContext"),W.SidebarTitle=new W("SidebarTitle"),W.PanelTitle=new W("PanelTitle"),W.AuxiliaryBarTitle=new W("AuxiliaryBarTitle"),W.AuxiliaryBarHeader=new W("AuxiliaryBarHeader"),W.TerminalInstanceContext=new W("TerminalInstanceContext"),W.TerminalEditorInstanceContext=new W("TerminalEditorInstanceContext"),W.TerminalNewDropdownContext=new W("TerminalNewDropdownContext"),W.TerminalTabContext=new W("TerminalTabContext"),W.TerminalTabEmptyAreaContext=new W("TerminalTabEmptyAreaContext"),W.TerminalStickyScrollContext=new W("TerminalStickyScrollContext"),W.WebviewContext=new W("WebviewContext"),W.InlineCompletionsActions=new W("InlineCompletionsActions"),W.InlineEditsActions=new W("InlineEditsActions"),W.InlineEditActions=new W("InlineEditActions"),W.NewFile=new W("NewFile"),W.MergeInput1Toolbar=new W("MergeToolbar1Toolbar"),W.MergeInput2Toolbar=new W("MergeToolbar2Toolbar"),W.MergeBaseToolbar=new W("MergeBaseToolbar"),W.MergeInputResultToolbar=new W("MergeToolbarResultToolbar"),W.InlineSuggestionToolbar=new W("InlineSuggestionToolbar"),W.InlineEditToolbar=new W("InlineEditToolbar"),W.ChatContext=new W("ChatContext"),W.ChatCodeBlock=new W("ChatCodeblock"),W.ChatCompareBlock=new W("ChatCompareBlock"),W.ChatMessageTitle=new W("ChatMessageTitle"),W.ChatExecute=new W("ChatExecute"),W.ChatExecuteSecondary=new W("ChatExecuteSecondary"),W.ChatInputSide=new W("ChatInputSide"),W.AccessibleView=new W("AccessibleView"),W.MultiDiffEditorFileToolbar=new W("MultiDiffEditorFileToolbar"),W.DiffEditorHunkToolbar=new W("DiffEditorHunkToolbar"),W.DiffEditorSelectionToolbar=new W("DiffEditorSelectionToolbar");let ze=W;const Yl=Wt("menuService"),ME=class ME{static for(e){let t=this._all.get(e);return t||(t=new ME(e),this._all.set(e,t)),t}static merge(e){const t=new Set;for(const i of e)i instanceof ME&&t.add(i.id);return t}constructor(e){this.id=e,this.has=t=>t===e}};ME._all=new Map;let Jv=ME;const Us=new class{constructor(){this._commands=new Map,this._menuItems=new Map,this._onDidChangeMenu=new Sje({merge:Jv.merge}),this.onDidChangeMenu=this._onDidChangeMenu.event}addCommand(n){return this._commands.set(n.id,n),this._onDidChangeMenu.fire(Jv.for(ze.CommandPalette)),Ye(()=>{this._commands.delete(n.id)&&this._onDidChangeMenu.fire(Jv.for(ze.CommandPalette))})}getCommand(n){return this._commands.get(n)}getCommands(){const n=new Map;return this._commands.forEach((e,t)=>n.set(t,e)),n}appendMenuItem(n,e){let t=this._menuItems.get(n);t||(t=new xo,this._menuItems.set(n,t));const i=t.push(e);return this._onDidChangeMenu.fire(Jv.for(n)),Ye(()=>{i(),this._onDidChangeMenu.fire(Jv.for(n))})}appendMenuItems(n){const e=new ue;for(const{id:t,item:i}of n)e.add(this.appendMenuItem(t,i));return e}getMenuItems(n){let e;return this._menuItems.has(n)?e=[...this._menuItems.get(n)]:e=[],n===ze.CommandPalette&&this._appendImplicitItems(e),e}_appendImplicitItems(n){const e=new Set;for(const t of n)Sy(t)&&(e.add(t.command.id),t.alt&&e.add(t.alt.id));this._commands.forEach((t,i)=>{e.has(i)||n.push({command:t})})}};class xy extends NS{constructor(e,t,i){super(`submenuitem.${e.submenu.id}`,typeof e.title=="string"?e.title:e.title.value,i,"submenu"),this.item=e,this.hideActions=t}}let Za=w2=class{static label(e,t){return t!=null&&t.renderShortTitle&&e.shortTitle?typeof e.shortTitle=="string"?e.shortTitle:e.shortTitle.value:typeof e.title=="string"?e.title:e.title.value}constructor(e,t,i,s,r,o,a){var c;this.hideActions=s,this.menuKeybinding=r,this._commandService=a,this.id=e.id,this.label=w2.label(e,i),this.tooltip=(typeof e.tooltip=="string"?e.tooltip:(c=e.tooltip)==null?void 0:c.value)??"",this.enabled=!e.precondition||o.contextMatchesRules(e.precondition),this.checked=void 0;let l;if(e.toggled){const d=e.toggled.condition?e.toggled:{condition:e.toggled};this.checked=o.contextMatchesRules(d.condition),this.checked&&d.tooltip&&(this.tooltip=typeof d.tooltip=="string"?d.tooltip:d.tooltip.value),this.checked&&ot.isThemeIcon(d.icon)&&(l=d.icon),this.checked&&d.title&&(this.label=typeof d.title=="string"?d.title:d.title.value)}l||(l=ot.isThemeIcon(e.icon)?e.icon:void 0),this.item=e,this.alt=t?new w2(t,void 0,i,s,void 0,o,a):void 0,this._options=i,this.class=l&&ot.asClassName(l)}run(...e){var i,s;let t=[];return(i=this._options)!=null&&i.arg&&(t=[...t,this._options.arg]),(s=this._options)!=null&&s.shouldForwardArgs&&(t=[...t,...e]),this._commandService.executeCommand(this.id,...t)}};Za=w2=aGe([joe(5,at),joe(6,Vi)],Za);class Ho{constructor(e){this.desc=e}}function Bi(n){const e=[],t=new n,{f1:i,menu:s,keybinding:r,...o}=t.desc;if(Gt.getCommand(o.id))throw new Error(`Cannot register two commands with the same id: ${o.id}`);if(e.push(Gt.registerCommand({id:o.id,handler:(a,...l)=>t.run(a,...l),metadata:o.metadata})),Array.isArray(s))for(const a of s)e.push(Us.appendMenuItem(a.id,{command:{...o,precondition:a.precondition===null?void 0:o.precondition},...a}));else s&&e.push(Us.appendMenuItem(s.id,{command:{...o,precondition:s.precondition===null?void 0:o.precondition},...s}));if(i&&(e.push(Us.appendMenuItem(ze.CommandPalette,{command:o,when:o.precondition})),e.push(Us.addCommand(o))),Array.isArray(r))for(const a of r)e.push(Fo.registerKeybindingRule({...a,id:o.id,when:o.precondition?he.and(o.precondition,a.when):a.when}));else r&&e.push(Fo.registerKeybindingRule({...r,id:o.id,when:o.precondition?he.and(o.precondition,r.when):r.when}));return{dispose(){Ti(e)}}}const Hr=Wt("telemetryService"),Cr=Wt("logService");var sa;(function(n){n[n.Off=0]="Off",n[n.Trace=1]="Trace",n[n.Debug=2]="Debug",n[n.Info=3]="Info",n[n.Warning=4]="Warning",n[n.Error=5]="Error"})(sa||(sa={}));const Z0e=sa.Info;class X0e extends ee{constructor(){super(...arguments),this.level=Z0e,this._onDidChangeLogLevel=this._register(new X),this.onDidChangeLogLevel=this._onDidChangeLogLevel.event}setLevel(e){this.level!==e&&(this.level=e,this._onDidChangeLogLevel.fire(this.level))}getLevel(){return this.level}checkLogLevel(e){return this.level!==sa.Off&&this.level<=e}}class cGe extends X0e{constructor(e=Z0e,t=!0){super(),this.useColors=t,this.setLevel(e)}trace(e,...t){this.checkLogLevel(sa.Trace)&&(this.useColors?console.log("%cTRACE","color: #888",e,...t):console.log(e,...t))}debug(e,...t){this.checkLogLevel(sa.Debug)&&(this.useColors?console.log("%cDEBUG","background: #eee; color: #888",e,...t):console.log(e,...t))}info(e,...t){this.checkLogLevel(sa.Info)&&(this.useColors?console.log("%c INFO","color: #33f",e,...t):console.log(e,...t))}warn(e,...t){this.checkLogLevel(sa.Warning)&&(this.useColors?console.log("%c WARN","color: #993",e,...t):console.log(e,...t))}error(e,...t){this.checkLogLevel(sa.Error)&&(this.useColors?console.log("%c  ERR","color: #f33",e,...t):console.error(e,...t))}}class dGe extends X0e{constructor(e){super(),this.loggers=e,e.length&&this.setLevel(e[0].getLevel())}setLevel(e){for(const t of this.loggers)t.setLevel(e);super.setLevel(e)}trace(e,...t){for(const i of this.loggers)i.trace(e,...t)}debug(e,...t){for(const i of this.loggers)i.debug(e,...t)}info(e,...t){for(const i of this.loggers)i.info(e,...t)}warn(e,...t){for(const i of this.loggers)i.warn(e,...t)}error(e,...t){for(const i of this.loggers)i.error(e,...t)}dispose(){for(const e of this.loggers)e.dispose();super.dispose()}}function uGe(n){switch(n){case sa.Trace:return"trace";case sa.Debug:return"debug";case sa.Info:return"info";case sa.Warning:return"warn";case sa.Error:return"error";case sa.Off:return"off"}}new Re("logLevel",uGe(sa.Info));class Q3{constructor(e){this.id=e.id,this.precondition=e.precondition,this._kbOpts=e.kbOpts,this._menuOpts=e.menuOpts,this.metadata=e.metadata}register(){if(Array.isArray(this._menuOpts)?this._menuOpts.forEach(this._registerMenuItem,this):this._menuOpts&&this._registerMenuItem(this._menuOpts),this._kbOpts){const e=Array.isArray(this._kbOpts)?this._kbOpts:[this._kbOpts];for(const t of e){let i=t.kbExpr;this.precondition&&(i?i=he.and(i,this.precondition):i=this.precondition);const s={id:this.id,weight:t.weight,args:t.args,when:i,primary:t.primary,secondary:t.secondary,win:t.win,linux:t.linux,mac:t.mac};Fo.registerKeybindingRule(s)}}Gt.registerCommand({id:this.id,handler:(e,t)=>this.runCommand(e,t),metadata:this.metadata})}_registerMenuItem(e){Us.appendMenuItem(e.menuId,{group:e.group,command:{id:this.id,title:e.title,icon:e.icon,precondition:this.precondition},when:e.when,order:e.order})}}class Nx extends Q3{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,t,i,s){return this._implementations.push({priority:e,name:t,implementation:i,when:s}),this._implementations.sort((r,o)=>o.priority-r.priority),{dispose:()=>{for(let r=0;r<this._implementations.length;r++)if(this._implementations[r].implementation===i){this._implementations.splice(r,1);return}}}}runCommand(e,t){const i=e.get(Cr),s=e.get(at);i.trace(`Executing Command '${this.id}' which has ${this._implementations.length} bound.`);for(const r of this._implementations){if(r.when){const a=s.getContext(vr());if(!r.when.evaluate(a))continue}const o=r.implementation(e,t);if(o)return i.trace(`Command '${this.id}' was handled by '${r.name}'.`),typeof o=="boolean"?void 0:o}i.trace(`The Command '${this.id}' was not handled by any implementation.`)}}class Q0e extends Q3{constructor(e,t){super(t),this.command=e}runCommand(e,t){return this.command.runCommand(e,t)}}class vs extends Q3{static bindToContribution(e){return class extends vs{constructor(i){super(i),this._callback=i.handler}runEditorCommand(i,s,r){const o=e(s);o&&this._callback(o,r)}}}static runEditorCommand(e,t,i,s){const r=e.get(ri),o=r.getFocusedCodeEditor()||r.getActiveCodeEditor();if(o)return o.invokeWithinContext(a=>{if(a.get(at).contextMatchesRules(i??void 0))return s(a,o,t)})}runCommand(e,t){return vs.runEditorCommand(e,t,this.precondition,(i,s,r)=>this.runEditorCommand(i,s,r))}}class Oe extends vs{static convertOptions(e){let t;Array.isArray(e.menuOpts)?t=e.menuOpts:e.menuOpts?t=[e.menuOpts]:t=[];function i(s){return s.menuId||(s.menuId=ze.EditorContext),s.title||(s.title=e.label),s.when=he.and(e.precondition,s.when),s}return Array.isArray(e.contextMenuOpts)?t.push(...e.contextMenuOpts.map(i)):e.contextMenuOpts&&t.push(i(e.contextMenuOpts)),e.menuOpts=t,e}constructor(e){super(Oe.convertOptions(e)),this.label=e.label,this.alias=e.alias}runEditorCommand(e,t,i){return this.reportTelemetry(e,t),this.run(e,t,i||{})}reportTelemetry(e,t){e.get(Hr).publicLog2("editorActionInvoked",{name:this.label,id:this.id})}}class J0e extends Oe{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,t){return this._implementations.push([e,t]),this._implementations.sort((i,s)=>s[0]-i[0]),{dispose:()=>{for(let i=0;i<this._implementations.length;i++)if(this._implementations[i][1]===t){this._implementations.splice(i,1);return}}}}run(e,t,i){for(const s of this._implementations){const r=s[1](e,t,i);if(r)return typeof r=="boolean"?void 0:r}}}class qu extends Ho{run(e,...t){const i=e.get(ri),s=i.getFocusedCodeEditor()||i.getActiveCodeEditor();if(s)return s.invokeWithinContext(r=>{var c;const o=r.get(at),a=r.get(Cr);if(!o.contextMatchesRules(this.desc.precondition??void 0)){a.debug("[EditorAction2] NOT running command because its precondition is FALSE",this.desc.id,(c=this.desc.precondition)==null?void 0:c.serialize());return}return this.runEditorCommand(r,s,...t)})}}function va(n,e){Gt.registerCommand(n,function(t,...i){const s=t.get(Ze),[r,o]=i;si(Xe.isUri(r)),si(Y.isIPosition(o));const a=t.get(Zi).getModel(r);if(a){const l=Y.lift(o);return s.invokeFunction(e,a,l,...i.slice(2))}return t.get(_a).createModelReference(r).then(l=>new Promise((c,d)=>{try{const u=s.invokeFunction(e,l.object.textEditorModel,Y.lift(o),i.slice(2));c(u)}catch(u){d(u)}}).finally(()=>{l.dispose()}))})}function Te(n){return bc.INSTANCE.registerEditorCommand(n),n}function we(n){const e=new n;return bc.INSTANCE.registerEditorAction(e),e}function eCe(n){return bc.INSTANCE.registerEditorAction(n),n}function hGe(n){bc.INSTANCE.registerEditorAction(n)}function Xt(n,e,t){bc.INSTANCE.registerEditorContribution(n,e,t)}var $b;(function(n){function e(o){return bc.INSTANCE.getEditorCommand(o)}n.getEditorCommand=e;function t(){return bc.INSTANCE.getEditorActions()}n.getEditorActions=t;function i(){return bc.INSTANCE.getEditorContributions()}n.getEditorContributions=i;function s(o){return bc.INSTANCE.getEditorContributions().filter(a=>o.indexOf(a.id)>=0)}n.getSomeEditorContributions=s;function r(){return bc.INSTANCE.getDiffEditorContributions()}n.getDiffEditorContributions=r})($b||($b={}));const fGe={EditorCommonContributions:"editor.contributions"},u4=class u4{constructor(){this.editorContributions=[],this.diffEditorContributions=[],this.editorActions=[],this.editorCommands=Object.create(null)}registerEditorContribution(e,t,i){this.editorContributions.push({id:e,ctor:t,instantiation:i})}getEditorContributions(){return this.editorContributions.slice(0)}getDiffEditorContributions(){return this.diffEditorContributions.slice(0)}registerEditorAction(e){e.register(),this.editorActions.push(e)}getEditorActions(){return this.editorActions}registerEditorCommand(e){e.register(),this.editorCommands[e.id]=e}getEditorCommand(e){return this.editorCommands[e]||null}};u4.INSTANCE=new u4;let bc=u4;_n.add(fGe.EditorCommonContributions,bc.INSTANCE);function FN(n){return n.register(),n}const tCe=FN(new Nx({id:"undo",precondition:void 0,kbOpts:{weight:0,primary:2104},menuOpts:[{menuId:ze.MenubarEditMenu,group:"1_do",title:v({key:"miUndo",comment:["&& denotes a mnemonic"]},"&&Undo"),order:1},{menuId:ze.CommandPalette,group:"",title:v("undo","Undo"),order:1}]}));FN(new Q0e(tCe,{id:"default:undo",precondition:void 0}));const iCe=FN(new Nx({id:"redo",precondition:void 0,kbOpts:{weight:0,primary:2103,secondary:[3128],mac:{primary:3128}},menuOpts:[{menuId:ze.MenubarEditMenu,group:"1_do",title:v({key:"miRedo",comment:["&& denotes a mnemonic"]},"&&Redo"),order:2},{menuId:ze.CommandPalette,group:"",title:v("redo","Redo"),order:1}]}));FN(new Q0e(iCe,{id:"default:redo",precondition:void 0}));const gGe=FN(new Nx({id:"editor.action.selectAll",precondition:void 0,kbOpts:{weight:0,kbExpr:null,primary:2079},menuOpts:[{menuId:ze.MenubarSelectionMenu,group:"1_basic",title:v({key:"miSelectAll",comment:["&& denotes a mnemonic"]},"&&Select All"),order:1},{menuId:ze.CommandPalette,group:"",title:v("selectAll","Select All"),order:1}]})),pGe="modulepreload",mGe=function(n){return"/"+n},Koe={},Qe=function(e,t,i){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(t.map(l=>{if(l=mGe(l),l in Koe)return;Koe[l]=!0;const c=l.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const u=document.createElement("link");if(u.rel=c?"stylesheet":pGe,c||(u.as="script"),u.crossOrigin="",u.href=l,a&&u.setAttribute("nonce",a),document.head.appendChild(u),c)return new Promise((h,f)=>{u.addEventListener("load",h),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${l}`)))})}))}function r(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&r(a.reason);return e().catch(r)})},qoe="default",_Ge="$initialize";let Goe=!1;function jz(n){B0&&(Goe||(Goe=!0,console.warn("Could not create web worker(s). Falling back to loading web worker code in main thread, which might cause UI freezes. Please see https://github.com/microsoft/monaco-editor#faq")),console.warn(n.message))}class vGe{constructor(e,t,i,s,r){this.vsWorker=e,this.req=t,this.channel=i,this.method=s,this.args=r,this.type=0}}class Yoe{constructor(e,t,i,s){this.vsWorker=e,this.seq=t,this.res=i,this.err=s,this.type=1}}class bGe{constructor(e,t,i,s,r){this.vsWorker=e,this.req=t,this.channel=i,this.eventName=s,this.arg=r,this.type=2}}class wGe{constructor(e,t,i){this.vsWorker=e,this.req=t,this.event=i,this.type=3}}class CGe{constructor(e,t){this.vsWorker=e,this.req=t,this.type=4}}class yGe{constructor(e){this._workerId=-1,this._handler=e,this._lastSentReq=0,this._pendingReplies=Object.create(null),this._pendingEmitters=new Map,this._pendingEvents=new Map}setWorkerId(e){this._workerId=e}sendMessage(e,t,i){const s=String(++this._lastSentReq);return new Promise((r,o)=>{this._pendingReplies[s]={resolve:r,reject:o},this._send(new vGe(this._workerId,s,e,t,i))})}listen(e,t,i){let s=null;const r=new X({onWillAddFirstListener:()=>{s=String(++this._lastSentReq),this._pendingEmitters.set(s,r),this._send(new bGe(this._workerId,s,e,t,i))},onDidRemoveLastListener:()=>{this._pendingEmitters.delete(s),this._send(new CGe(this._workerId,s)),s=null}});return r.event}handleMessage(e){!e||!e.vsWorker||this._workerId!==-1&&e.vsWorker!==this._workerId||this._handleMessage(e)}createProxyToRemoteChannel(e,t){const i={get:(s,r)=>(typeof r=="string"&&!s[r]&&(sCe(r)?s[r]=o=>this.listen(e,r,o):nCe(r)?s[r]=this.listen(e,r,void 0):r.charCodeAt(0)===36&&(s[r]=async(...o)=>(await(t==null?void 0:t()),this.sendMessage(e,r,o)))),s[r])};return new Proxy(Object.create(null),i)}_handleMessage(e){switch(e.type){case 1:return this._handleReplyMessage(e);case 0:return this._handleRequestMessage(e);case 2:return this._handleSubscribeEventMessage(e);case 3:return this._handleEventMessage(e);case 4:return this._handleUnsubscribeEventMessage(e)}}_handleReplyMessage(e){if(!this._pendingReplies[e.seq]){console.warn("Got reply to unknown seq");return}const t=this._pendingReplies[e.seq];if(delete this._pendingReplies[e.seq],e.err){let i=e.err;e.err.$isError&&(i=new Error,i.name=e.err.name,i.message=e.err.message,i.stack=e.err.stack),t.reject(i);return}t.resolve(e.res)}_handleRequestMessage(e){const t=e.req;this._handler.handleMessage(e.channel,e.method,e.args).then(s=>{this._send(new Yoe(this._workerId,t,s,void 0))},s=>{s.detail instanceof Error&&(s.detail=woe(s.detail)),this._send(new Yoe(this._workerId,t,void 0,woe(s)))})}_handleSubscribeEventMessage(e){const t=e.req,i=this._handler.handleEvent(e.channel,e.eventName,e.arg)(s=>{this._send(new wGe(this._workerId,t,s))});this._pendingEvents.set(t,i)}_handleEventMessage(e){if(!this._pendingEmitters.has(e.req)){console.warn("Got event for unknown req");return}this._pendingEmitters.get(e.req).fire(e.event)}_handleUnsubscribeEventMessage(e){if(!this._pendingEvents.has(e.req)){console.warn("Got unsubscribe for unknown req");return}this._pendingEvents.get(e.req).dispose(),this._pendingEvents.delete(e.req)}_send(e){const t=[];if(e.type===0)for(let i=0;i<e.args.length;i++)e.args[i]instanceof ArrayBuffer&&t.push(e.args[i]);else e.type===1&&e.res instanceof ArrayBuffer&&t.push(e.res);this._handler.sendMessage(e,t)}}class SGe extends ee{constructor(e,t){super(),this._localChannels=new Map,this._worker=this._register(e.create({amdModuleId:"vs/base/common/worker/simpleWorker",esmModuleLocation:t.esmModuleLocation,label:t.label},r=>{this._protocol.handleMessage(r)},r=>{pt(r)})),this._protocol=new yGe({sendMessage:(r,o)=>{this._worker.postMessage(r,o)},handleMessage:(r,o,a)=>this._handleMessage(r,o,a),handleEvent:(r,o,a)=>this._handleEvent(r,o,a)}),this._protocol.setWorkerId(this._worker.getId());let i=null;const s=globalThis.require;typeof s<"u"&&typeof s.getConfig=="function"?i=s.getConfig():typeof globalThis.requirejs<"u"&&(i=globalThis.requirejs.s.contexts._.config),this._onModuleLoaded=this._protocol.sendMessage(qoe,_Ge,[this._worker.getId(),JSON.parse(JSON.stringify(i)),t.amdModuleId]),this.proxy=this._protocol.createProxyToRemoteChannel(qoe,async()=>{await this._onModuleLoaded}),this._onModuleLoaded.catch(r=>{this._onError("Worker failed to load "+t.amdModuleId,r)})}_handleMessage(e,t,i){const s=this._localChannels.get(e);if(!s)return Promise.reject(new Error(`Missing channel ${e} on main thread`));if(typeof s[t]!="function")return Promise.reject(new Error(`Missing method ${t} on main thread channel ${e}`));try{return Promise.resolve(s[t].apply(s,i))}catch(r){return Promise.reject(r)}}_handleEvent(e,t,i){const s=this._localChannels.get(e);if(!s)throw new Error(`Missing channel ${e} on main thread`);if(sCe(t)){const r=s[t].call(s,i);if(typeof r!="function")throw new Error(`Missing dynamic event ${t} on main thread channel ${e}.`);return r}if(nCe(t)){const r=s[t];if(typeof r!="function")throw new Error(`Missing event ${t} on main thread channel ${e}.`);return r}throw new Error(`Malformed event name ${t}`)}setChannel(e,t){this._localChannels.set(e,t)}_onError(e,t){console.error(e),console.info(t)}}function nCe(n){return n[0]==="o"&&n[1]==="n"&&Ih(n.charCodeAt(2))}function sCe(n){return/^onDynamic/.test(n)&&Ih(n.charCodeAt(9))}function up(n,e){var i;const t=globalThis.MonacoEnvironment;if(t!=null&&t.createTrustedTypesPolicy)try{return t.createTrustedTypesPolicy(n,e)}catch(s){pt(s);return}try{return(i=globalThis.trustedTypes)==null?void 0:i.createPolicy(n,e)}catch(s){pt(s);return}}let C1;typeof self=="object"&&self.constructor&&self.constructor.name==="DedicatedWorkerGlobalScope"&&globalThis.workerttPolicy!==void 0?C1=globalThis.workerttPolicy:C1=up("defaultWorkerFactory",{createScriptURL:n=>n});function xGe(n,e){const t=globalThis.MonacoEnvironment;if(t){if(typeof t.getWorker=="function")return t.getWorker("workerMain.js",e);if(typeof t.getWorkerUrl=="function"){const i=t.getWorkerUrl("workerMain.js",e);return new Worker(C1?C1.createScriptURL(i):i,{name:e,type:"module"})}}if(n){const i=LGe(e,n.toString(!0)),s=new Worker(C1?C1.createScriptURL(i):i,{name:e,type:"module"});return kGe(s)}throw new Error("You must define a function MonacoEnvironment.getWorkerUrl or MonacoEnvironment.getWorker")}function LGe(n,e,t){if(!(/^((http:)|(https:)|(file:)|(vscode-file:))/.test(e)&&e.substring(0,globalThis.origin.length)!==globalThis.origin)){const r=e.lastIndexOf("?"),o=e.lastIndexOf("#",r),a=r>0?new URLSearchParams(e.substring(r+1,~o?o:void 0)):new URLSearchParams;Fz.addSearchParam(a,!0,!0),a.toString()?e=`${e}?${a.toString()}#${n}`:e=`${e}#${n}`}const s=new Blob([Id([`/*${n}*/`,void 0,`globalThis._VSCODE_NLS_MESSAGES = ${JSON.stringify(Bwe())};`,`globalThis._VSCODE_NLS_LANGUAGE = ${JSON.stringify($Z())};`,`globalThis._VSCODE_FILE_ROOT = '${globalThis._VSCODE_FILE_ROOT}';`,"const ttPolicy = globalThis.trustedTypes?.createPolicy('defaultWorkerFactory', { createScriptURL: value => value });","globalThis.workerttPolicy = ttPolicy;",`await import(ttPolicy?.createScriptURL('${e}') ?? '${e}');`,"globalThis.postMessage({ type: 'vscode-worker-ready' });",`/*${n}*/`]).join("")],{type:"application/javascript"});return URL.createObjectURL(s)}function kGe(n){return new Promise((e,t)=>{n.onmessage=function(i){i.data.type==="vscode-worker-ready"&&(n.onmessage=null,e(n))},n.onerror=t})}function EGe(n){return typeof n.then=="function"}class IGe extends ee{constructor(e,t,i,s,r,o){super(),this.id=i,this.label=s;const a=xGe(e,s);EGe(a)?this.worker=a:this.worker=Promise.resolve(a),this.postMessage(t,[]),this.worker.then(l=>{l.onmessage=function(c){r(c.data)},l.onmessageerror=o,typeof l.addEventListener=="function"&&l.addEventListener("error",o)}),this._register(Ye(()=>{var l;(l=this.worker)==null||l.then(c=>{c.onmessage=null,c.onmessageerror=null,c.removeEventListener("error",o),c.terminate()}),this.worker=null}))}getId(){return this.id}postMessage(e,t){var i;(i=this.worker)==null||i.then(s=>{try{s.postMessage(e,t)}catch(r){pt(r),pt(new Error(`FAILED to post message to '${this.label}'-worker`,{cause:r}))}})}}class DGe{constructor(e,t){this.amdModuleId=e,this.label=t,this.esmModuleLocation=F3.asBrowserUri(`${e}.esm.js`)}}const h4=class h4{constructor(){this._webWorkerFailedBeforeError=!1}create(e,t,i){const s=++h4.LAST_WORKER_ID;if(this._webWorkerFailedBeforeError)throw this._webWorkerFailedBeforeError;return new IGe(e.esmModuleLocation,e.amdModuleId,s,e.label||"anonymous"+s,t,r=>{jz(r),this._webWorkerFailedBeforeError=r,i(r)})}};h4.LAST_WORKER_ID=0;let Kz=h4;function NGe(n,e){const t=typeof n=="string"?new DGe(n,e):n;return new SGe(new Kz,t)}var os;(function(n){n[n.None=0]="None",n[n.Indent=1]="Indent",n[n.IndentOutdent=2]="IndentOutdent",n[n.Outdent=3]="Outdent"})(os||(os={}));class Y9{constructor(e){if(this._neutralCharacter=null,this._neutralCharacterSearched=!1,this.open=e.open,this.close=e.close,this._inString=!0,this._inComment=!0,this._inRegEx=!0,Array.isArray(e.notIn))for(let t=0,i=e.notIn.length;t<i;t++)switch(e.notIn[t]){case"string":this._inString=!1;break;case"comment":this._inComment=!1;break;case"regex":this._inRegEx=!1;break}}isOK(e){switch(e){case 0:return!0;case 1:return this._inComment;case 2:return this._inString;case 3:return this._inRegEx}}shouldAutoClose(e,t){if(e.getTokenCount()===0)return!0;const i=e.findTokenIndexAtOffset(t-2),s=e.getStandardTokenType(i);return this.isOK(s)}_findNeutralCharacterInRange(e,t){for(let i=e;i<=t;i++){const s=String.fromCharCode(i);if(!this.open.includes(s)&&!this.close.includes(s))return s}return null}findNeutralCharacter(){return this._neutralCharacterSearched||(this._neutralCharacterSearched=!0,this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(48,57)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(97,122)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(65,90))),this._neutralCharacter}}class TGe{constructor(e){this.autoClosingPairsOpenByStart=new Map,this.autoClosingPairsOpenByEnd=new Map,this.autoClosingPairsCloseByStart=new Map,this.autoClosingPairsCloseByEnd=new Map,this.autoClosingPairsCloseSingleChar=new Map;for(const t of e)AL(this.autoClosingPairsOpenByStart,t.open.charAt(0),t),AL(this.autoClosingPairsOpenByEnd,t.open.charAt(t.open.length-1),t),AL(this.autoClosingPairsCloseByStart,t.close.charAt(0),t),AL(this.autoClosingPairsCloseByEnd,t.close.charAt(t.close.length-1),t),t.close.length===1&&t.open.length===1&&AL(this.autoClosingPairsCloseSingleChar,t.close,t)}}function AL(n,e,t){n.has(e)?n.get(e).push(t):n.set(e,[t])}const Y1=class Y1{constructor(e){if(e.autoClosingPairs?this._autoClosingPairs=e.autoClosingPairs.map(t=>new Y9(t)):e.brackets?this._autoClosingPairs=e.brackets.map(t=>new Y9({open:t[0],close:t[1]})):this._autoClosingPairs=[],e.__electricCharacterSupport&&e.__electricCharacterSupport.docComment){const t=e.__electricCharacterSupport.docComment;this._autoClosingPairs.push(new Y9({open:t.open,close:t.close||""}))}this._autoCloseBeforeForQuotes=typeof e.autoCloseBefore=="string"?e.autoCloseBefore:Y1.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_QUOTES,this._autoCloseBeforeForBrackets=typeof e.autoCloseBefore=="string"?e.autoCloseBefore:Y1.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_BRACKETS,this._surroundingPairs=e.surroundingPairs||this._autoClosingPairs}getAutoClosingPairs(){return this._autoClosingPairs}getAutoCloseBeforeSet(e){return e?this._autoCloseBeforeForQuotes:this._autoCloseBeforeForBrackets}getSurroundingPairs(){return this._surroundingPairs}};Y1.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_QUOTES=`;:.,=}])> 
	`,Y1.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_BRACKETS=`'"\`;:.,=}])> 
	`;let qz=Y1;function xb(n,e){const t=n.getCount(),i=n.findTokenIndexAtOffset(e),s=n.getLanguageId(i);let r=i;for(;r+1<t&&n.getLanguageId(r+1)===s;)r++;let o=i;for(;o>0&&n.getLanguageId(o-1)===s;)o--;return new RGe(n,s,o,r+1,n.getStartOffset(o),n.getEndOffset(r))}class RGe{constructor(e,t,i,s,r,o){this._scopedLineTokensBrand=void 0,this._actual=e,this.languageId=t,this._firstTokenIndex=i,this._lastTokenIndex=s,this.firstCharOffset=r,this._lastCharOffset=o,this.languageIdCodec=e.languageIdCodec}getLineContent(){return this._actual.getLineContent().substring(this.firstCharOffset,this._lastCharOffset)}getLineLength(){return this._lastCharOffset-this.firstCharOffset}getActualLineContentBefore(e){return this._actual.getLineContent().substring(0,this.firstCharOffset+e)}getTokenCount(){return this._lastTokenIndex-this._firstTokenIndex}findTokenIndexAtOffset(e){return this._actual.findTokenIndexAtOffset(e+this.firstCharOffset)-this._firstTokenIndex}getStandardTokenType(e){return this._actual.getStandardTokenType(e+this._firstTokenIndex)}toIViewLineTokens(){return this._actual.sliceAndInflate(this.firstCharOffset,this._lastCharOffset,0)}}function uh(n){return(n&3)!==0}const Zoe=typeof Buffer<"u";let Z9;class J3{static wrap(e){return Zoe&&!Buffer.isBuffer(e)&&(e=Buffer.from(e.buffer,e.byteOffset,e.byteLength)),new J3(e)}constructor(e){this.buffer=e,this.byteLength=this.buffer.byteLength}toString(){return Zoe?this.buffer.toString():(Z9||(Z9=new TextDecoder),Z9.decode(this.buffer))}}function AGe(n,e){return n[e+0]<<0>>>0|n[e+1]<<8>>>0}function MGe(n,e,t){n[t+0]=e&255,e=e>>>8,n[t+1]=e&255}function ru(n,e){return n[e]*2**24+n[e+1]*2**16+n[e+2]*2**8+n[e+3]}function ou(n,e,t){n[t+3]=e,e=e>>>8,n[t+2]=e,e=e>>>8,n[t+1]=e,e=e>>>8,n[t]=e}function Xoe(n,e){return n[e]}function Qoe(n,e,t){n[t]=e}let X9;function rCe(){return X9||(X9=new TextDecoder("UTF-16LE")),X9}let Q9;function PGe(){return Q9||(Q9=new TextDecoder("UTF-16BE")),Q9}let J9;function oCe(){return J9||(J9=$we()?rCe():PGe()),J9}function OGe(n,e,t){const i=new Uint16Array(n.buffer,e,t);return t>0&&(i[0]===65279||i[0]===65534)?FGe(n,e,t):rCe().decode(i)}function FGe(n,e,t){const i=[];let s=0;for(let r=0;r<t;r++){const o=AGe(n,e);e+=2,i[s++]=String.fromCharCode(o)}return i.join("")}class Tx{constructor(e){this._capacity=e|0,this._buffer=new Uint16Array(this._capacity),this._completedStrings=null,this._bufferLength=0}reset(){this._completedStrings=null,this._bufferLength=0}build(){return this._completedStrings!==null?(this._flushBuffer(),this._completedStrings.join("")):this._buildBuffer()}_buildBuffer(){if(this._bufferLength===0)return"";const e=new Uint16Array(this._buffer.buffer,0,this._bufferLength);return oCe().decode(e)}_flushBuffer(){const e=this._buildBuffer();this._bufferLength=0,this._completedStrings===null?this._completedStrings=[e]:this._completedStrings[this._completedStrings.length]=e}appendCharCode(e){const t=this._capacity-this._bufferLength;t<=1&&(t===0||ks(e))&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendASCIICharCode(e){this._bufferLength===this._capacity&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendString(e){const t=e.length;if(this._bufferLength+t>=this._capacity){this._flushBuffer(),this._completedStrings[this._completedStrings.length]=e;return}for(let i=0;i<t;i++)this._buffer[this._bufferLength++]=e.charCodeAt(i)}}class bP{constructor(e,t,i,s,r,o){this._richEditBracketBrand=void 0,this.languageId=e,this.index=t,this.open=i,this.close=s,this.forwardRegex=r,this.reversedRegex=o,this._openSet=bP._toSet(this.open),this._closeSet=bP._toSet(this.close)}isOpen(e){return this._openSet.has(e)}isClose(e){return this._closeSet.has(e)}static _toSet(e){const t=new Set;for(const i of e)t.add(i);return t}}function BGe(n){const e=n.length;n=n.map(o=>[o[0].toLowerCase(),o[1].toLowerCase()]);const t=[];for(let o=0;o<e;o++)t[o]=o;const i=(o,a)=>{const[l,c]=o,[d,u]=a;return l===d||l===u||c===d||c===u},s=(o,a)=>{const l=Math.min(o,a),c=Math.max(o,a);for(let d=0;d<e;d++)t[d]===c&&(t[d]=l)};for(let o=0;o<e;o++){const a=n[o];for(let l=o+1;l<e;l++){const c=n[l];i(a,c)&&s(t[o],t[l])}}const r=[];for(let o=0;o<e;o++){const a=[],l=[];for(let c=0;c<e;c++)if(t[c]===o){const[d,u]=n[c];a.push(d),l.push(u)}a.length>0&&r.push({open:a,close:l})}return r}class WGe{constructor(e,t){this._richEditBracketsBrand=void 0;const i=BGe(t);this.brackets=i.map((s,r)=>new bP(e,r,s.open,s.close,HGe(s.open,s.close,i,r),VGe(s.open,s.close,i,r))),this.forwardRegex=zGe(this.brackets),this.reversedRegex=UGe(this.brackets),this.textIsBracket={},this.textIsOpenBracket={},this.maxBracketLength=0;for(const s of this.brackets){for(const r of s.open)this.textIsBracket[r]=s,this.textIsOpenBracket[r]=!0,this.maxBracketLength=Math.max(this.maxBracketLength,r.length);for(const r of s.close)this.textIsBracket[r]=s,this.textIsOpenBracket[r]=!1,this.maxBracketLength=Math.max(this.maxBracketLength,r.length)}}}function aCe(n,e,t,i){for(let s=0,r=e.length;s<r;s++){if(s===t)continue;const o=e[s];for(const a of o.open)a.indexOf(n)>=0&&i.push(a);for(const a of o.close)a.indexOf(n)>=0&&i.push(a)}}function lCe(n,e){return n.length-e.length}function eB(n){if(n.length<=1)return n;const e=[],t=new Set;for(const i of n)t.has(i)||(e.push(i),t.add(i));return e}function HGe(n,e,t,i){let s=[];s=s.concat(n),s=s.concat(e);for(let r=0,o=s.length;r<o;r++)aCe(s[r],t,i,s);return s=eB(s),s.sort(lCe),s.reverse(),BN(s)}function VGe(n,e,t,i){let s=[];s=s.concat(n),s=s.concat(e);for(let r=0,o=s.length;r<o;r++)aCe(s[r],t,i,s);return s=eB(s),s.sort(lCe),s.reverse(),BN(s.map(wX))}function zGe(n){let e=[];for(const t of n){for(const i of t.open)e.push(i);for(const i of t.close)e.push(i)}return e=eB(e),BN(e)}function UGe(n){let e=[];for(const t of n){for(const i of t.open)e.push(i);for(const i of t.close)e.push(i)}return e=eB(e),BN(e.map(wX))}function $Ge(n){const e=/^[\w ]+$/.test(n);return n=$l(n),e?`\\b${n}\\b`:n}function BN(n,e){const t=`(${n.map($Ge).join(")|(")})`;return g0e(t,!0,e)}const wX=function(){function n(i){const s=new Uint16Array(i.length);let r=0;for(let o=i.length-1;o>=0;o--)s[r++]=i.charCodeAt(o);return oCe().decode(s)}let e=null,t=null;return function(s){return e!==s&&(e=s,t=n(e)),t}}();class nd{static _findPrevBracketInText(e,t,i,s){const r=i.match(e);if(!r)return null;const o=i.length-(r.index||0),a=r[0].length,l=s+o;return new M(t,l-a+1,t,l+1)}static findPrevBracketInRange(e,t,i,s,r){const a=wX(i).substring(i.length-r,i.length-s);return this._findPrevBracketInText(e,t,a,s)}static findNextBracketInText(e,t,i,s){const r=i.match(e);if(!r)return null;const o=r.index||0,a=r[0].length;if(a===0)return null;const l=s+o;return new M(t,l+1,t,l+1+a)}static findNextBracketInRange(e,t,i,s,r){const o=i.substring(s,r);return this.findNextBracketInText(e,t,o,s)}}class jGe{constructor(e){this._richEditBrackets=e}getElectricCharacters(){const e=[];if(this._richEditBrackets)for(const t of this._richEditBrackets.brackets)for(const i of t.close){const s=i.charAt(i.length-1);e.push(s)}return qg(e)}onElectricCharacter(e,t,i){if(!this._richEditBrackets||this._richEditBrackets.brackets.length===0)return null;const s=t.findTokenIndexAtOffset(i-1);if(uh(t.getStandardTokenType(s)))return null;const r=this._richEditBrackets.reversedRegex,o=t.getLineContent().substring(0,i-1)+e,a=nd.findPrevBracketInRange(r,1,o,0,o.length);if(!a)return null;const l=o.substring(a.startColumn-1,a.endColumn-1).toLowerCase();if(this._richEditBrackets.textIsOpenBracket[l])return null;const d=t.getActualLineContentBefore(a.startColumn-1);return/^\s*$/.test(d)?{matchOpenBracket:l}:null}}function WR(n){return n.global&&(n.lastIndex=0),!0}class KGe{constructor(e){this._indentationRules=e}shouldIncrease(e){return!!(this._indentationRules&&this._indentationRules.increaseIndentPattern&&WR(this._indentationRules.increaseIndentPattern)&&this._indentationRules.increaseIndentPattern.test(e))}shouldDecrease(e){return!!(this._indentationRules&&this._indentationRules.decreaseIndentPattern&&WR(this._indentationRules.decreaseIndentPattern)&&this._indentationRules.decreaseIndentPattern.test(e))}shouldIndentNextLine(e){return!!(this._indentationRules&&this._indentationRules.indentNextLinePattern&&WR(this._indentationRules.indentNextLinePattern)&&this._indentationRules.indentNextLinePattern.test(e))}shouldIgnore(e){return!!(this._indentationRules&&this._indentationRules.unIndentedLinePattern&&WR(this._indentationRules.unIndentedLinePattern)&&this._indentationRules.unIndentedLinePattern.test(e))}getIndentMetadata(e){let t=0;return this.shouldIncrease(e)&&(t+=1),this.shouldDecrease(e)&&(t+=2),this.shouldIndentNextLine(e)&&(t+=4),this.shouldIgnore(e)&&(t+=8),t}}class y1{constructor(e){e=e||{},e.brackets=e.brackets||[["(",")"],["{","}"],["[","]"]],this._brackets=[],e.brackets.forEach(t=>{const i=y1._createOpenBracketRegExp(t[0]),s=y1._createCloseBracketRegExp(t[1]);i&&s&&this._brackets.push({open:t[0],openRegExp:i,close:t[1],closeRegExp:s})}),this._regExpRules=e.onEnterRules||[]}onEnter(e,t,i,s){if(e>=3)for(let r=0,o=this._regExpRules.length;r<o;r++){const a=this._regExpRules[r];if([{reg:a.beforeText,text:i},{reg:a.afterText,text:s},{reg:a.previousLineText,text:t}].every(c=>c.reg?(c.reg.lastIndex=0,c.reg.test(c.text)):!0))return a.action}if(e>=2&&i.length>0&&s.length>0)for(let r=0,o=this._brackets.length;r<o;r++){const a=this._brackets[r];if(a.openRegExp.test(i)&&a.closeRegExp.test(s))return{indentAction:os.IndentOutdent}}if(e>=2&&i.length>0){for(let r=0,o=this._brackets.length;r<o;r++)if(this._brackets[r].openRegExp.test(i))return{indentAction:os.Indent}}return null}static _createOpenBracketRegExp(e){let t=$l(e);return/\B/.test(t.charAt(0))||(t="\\b"+t),t+="\\s*$",y1._safeRegExp(t)}static _createCloseBracketRegExp(e){let t=$l(e);return/\B/.test(t.charAt(t.length-1))||(t=t+"\\b"),t="^\\s*"+t,y1._safeRegExp(t)}static _safeRegExp(e){try{return new RegExp(e)}catch(t){return pt(t),null}}}const Tt=Wt("configurationService");function Gz(n,e){const t=Object.create(null);for(const i in n)cCe(t,i,n[i],e);return t}function cCe(n,e,t,i){const s=e.split("."),r=s.pop();let o=n;for(let a=0;a<s.length;a++){const l=s[a];let c=o[l];switch(typeof c){case"undefined":c=o[l]=Object.create(null);break;case"object":if(c===null){i(`Ignoring ${e} as ${s.slice(0,a+1).join(".")} is null`);return}break;default:i(`Ignoring ${e} as ${s.slice(0,a+1).join(".")} is ${JSON.stringify(c)}`);return}o=c}if(typeof o=="object"&&o!==null)try{o[r]=t}catch{i(`Ignoring ${e} as ${s.join(".")} is ${JSON.stringify(o)}`)}else i(`Ignoring ${e} as ${s.join(".")} is ${JSON.stringify(o)}`)}function qGe(n,e){const t=e.split(".");dCe(n,t)}function dCe(n,e){const t=e.shift();if(e.length===0){delete n[t];return}if(Object.keys(n).indexOf(t)!==-1){const i=n[t];typeof i=="object"&&!Array.isArray(i)&&(dCe(i,e),Object.keys(i).length===0&&delete n[t])}}function Joe(n,e,t){function i(o,a){let l=o;for(const c of a){if(typeof l!="object"||l===null)return;l=l[c]}return l}const s=e.split("."),r=i(n,s);return typeof r>"u"?t:r}function GGe(n){return n.replace(/[\[\]]/g,"")}const un=Wt("languageService");class Dh{constructor(e,t=[],i=!1){this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=i}}const uCe=[];function jt(n,e,t){e instanceof Dh||(e=new Dh(e,[],!!t)),uCe.push([n,e])}function eae(){return uCe}const On=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list"}),tB={JSONContribution:"base.contributions.json"};function YGe(n){return n.length>0&&n.charAt(n.length-1)==="#"?n.substring(0,n.length-1):n}class ZGe{constructor(){this._onDidChangeSchema=new X,this.schemasById={}}registerSchema(e,t){this.schemasById[YGe(e)]=t,this._onDidChangeSchema.fire(e)}notifySchemaChanged(e){this._onDidChangeSchema.fire(e)}}const XGe=new ZGe;_n.add(tB.JSONContribution,XGe);const Bd={Configuration:"base.contributions.configuration"},ML="vscode://schemas/settings/resourceLanguage",tae=_n.as(tB.JSONContribution);class QGe{constructor(){this.registeredConfigurationDefaults=[],this.overrideIdentifiers=new Set,this._onDidSchemaChange=new X,this._onDidUpdateConfiguration=new X,this.configurationDefaultsOverrides=new Map,this.defaultLanguageConfigurationOverridesNode={id:"defaultOverrides",title:v("defaultLanguageConfigurationOverrides.title","Default Language Configuration Overrides"),properties:{}},this.configurationContributors=[this.defaultLanguageConfigurationOverridesNode],this.resourceLanguageSettingsSchema={properties:{},patternProperties:{},additionalProperties:!0,allowTrailingCommas:!0,allowComments:!0},this.configurationProperties={},this.policyConfigurations=new Map,this.excludedConfigurationProperties={},tae.registerSchema(ML,this.resourceLanguageSettingsSchema),this.registerOverridePropertyPatternKey()}registerConfiguration(e,t=!0){this.registerConfigurations([e],t)}registerConfigurations(e,t=!0){const i=new Set;this.doRegisterConfigurations(e,t,i),tae.registerSchema(ML,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:i})}registerDefaultConfigurations(e){const t=new Set;this.doRegisterDefaultConfigurations(e,t),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:t,defaultsOverrides:!0})}doRegisterDefaultConfigurations(e,t){this.registeredConfigurationDefaults.push(...e);const i=[];for(const{overrides:s,source:r}of e)for(const o in s){t.add(o);const a=this.configurationDefaultsOverrides.get(o)??this.configurationDefaultsOverrides.set(o,{configurationDefaultOverrides:[]}).get(o),l=s[o];if(a.configurationDefaultOverrides.push({value:l,source:r}),A_.test(o)){const c=this.mergeDefaultConfigurationsForOverrideIdentifier(o,l,r,a.configurationDefaultOverrideValue);if(!c)continue;a.configurationDefaultOverrideValue=c,this.updateDefaultOverrideProperty(o,c,r),i.push(...wP(o))}else{const c=this.mergeDefaultConfigurationsForConfigurationProperty(o,l,r,a.configurationDefaultOverrideValue);if(!c)continue;a.configurationDefaultOverrideValue=c;const d=this.configurationProperties[o];d&&(this.updatePropertyDefaultValue(o,d),this.updateSchema(o,d))}}this.doRegisterOverrideIdentifiers(i)}updateDefaultOverrideProperty(e,t,i){const s={type:"object",default:t.value,description:v("defaultLanguageConfiguration.description","Configure settings to be overridden for the {0} language.",GGe(e)),$ref:ML,defaultDefaultValue:t.value,source:i,defaultValueSource:i};this.configurationProperties[e]=s,this.defaultLanguageConfigurationOverridesNode.properties[e]=s}mergeDefaultConfigurationsForOverrideIdentifier(e,t,i,s){const r=(s==null?void 0:s.value)||{},o=(s==null?void 0:s.source)??new Map;if(!(o instanceof Map)){console.error("objectConfigurationSources is not a Map");return}for(const a of Object.keys(t)){const l=t[a];if(zs(l)&&(ro(r[a])||zs(r[a]))){if(r[a]={...r[a]??{},...l},i)for(const d in l)o.set(`${a}.${d}`,i)}else r[a]=l,i?o.set(a,i):o.delete(a)}return{value:r,source:o}}mergeDefaultConfigurationsForConfigurationProperty(e,t,i,s){const r=this.configurationProperties[e],o=(s==null?void 0:s.value)??(r==null?void 0:r.defaultDefaultValue);let a=i;if(zs(t)&&(r!==void 0&&r.type==="object"||r===void 0&&(ro(o)||zs(o)))){if(a=(s==null?void 0:s.source)??new Map,!(a instanceof Map)){console.error("defaultValueSource is not a Map");return}for(const c in t)i&&a.set(`${e}.${c}`,i);t={...zs(o)?o:{},...t}}return{value:t,source:a}}registerOverrideIdentifiers(e){this.doRegisterOverrideIdentifiers(e),this._onDidSchemaChange.fire()}doRegisterOverrideIdentifiers(e){for(const t of e)this.overrideIdentifiers.add(t);this.updateOverridePropertyPatternKey()}doRegisterConfigurations(e,t,i){e.forEach(s=>{this.validateAndRegisterProperties(s,t,s.extensionInfo,s.restrictedProperties,void 0,i),this.configurationContributors.push(s),this.registerJSONConfiguration(s)})}validateAndRegisterProperties(e,t=!0,i,s,r=3,o){var c;r=El(e.scope)?r:e.scope;const a=e.properties;if(a)for(const d in a){const u=a[d];if(t&&tYe(d,u)){delete a[d];continue}if(u.source=i,u.defaultDefaultValue=a[d].default,this.updatePropertyDefaultValue(d,u),A_.test(d)?u.scope=void 0:(u.scope=El(u.scope)?r:u.scope,u.restricted=El(u.restricted)?!!(s!=null&&s.includes(d)):u.restricted),a[d].hasOwnProperty("included")&&!a[d].included){this.excludedConfigurationProperties[d]=a[d],delete a[d];continue}else this.configurationProperties[d]=a[d],(c=a[d].policy)!=null&&c.name&&this.policyConfigurations.set(a[d].policy.name,d);!a[d].deprecationMessage&&a[d].markdownDeprecationMessage&&(a[d].deprecationMessage=a[d].markdownDeprecationMessage),o.add(d)}const l=e.allOf;if(l)for(const d of l)this.validateAndRegisterProperties(d,t,i,s,r,o)}getConfigurationProperties(){return this.configurationProperties}getPolicyConfigurations(){return this.policyConfigurations}registerJSONConfiguration(e){const t=i=>{const s=i.properties;if(s)for(const o in s)this.updateSchema(o,s[o]);const r=i.allOf;r==null||r.forEach(t)};t(e)}updateSchema(e,t){switch(t.scope){case 1:break;case 2:break;case 6:break;case 3:break;case 4:break;case 5:this.resourceLanguageSettingsSchema.properties[e]=t;break}}updateOverridePropertyPatternKey(){for(const e of this.overrideIdentifiers.values()){const t=`[${e}]`,i={type:"object",description:v("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),errorMessage:v("overrideSettings.errorMessage","This setting does not support per-language configuration."),$ref:ML};this.updatePropertyDefaultValue(t,i)}}registerOverridePropertyPatternKey(){v("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),v("overrideSettings.errorMessage","This setting does not support per-language configuration."),this._onDidSchemaChange.fire()}updatePropertyDefaultValue(e,t){var o;const i=(o=this.configurationDefaultsOverrides.get(e))==null?void 0:o.configurationDefaultOverrideValue;let s,r;i&&(!t.disallowConfigurationDefault||!i.source)&&(s=i.value,r=i.source),ro(s)&&(s=t.defaultDefaultValue,r=void 0),ro(s)&&(s=eYe(t.type)),t.default=s,t.defaultValueSource=r}}const hCe="\\[([^\\]]+)\\]",iae=new RegExp(hCe,"g"),JGe=`^(${hCe})+$`,A_=new RegExp(JGe);function wP(n){const e=[];if(A_.test(n)){let t=iae.exec(n);for(;t!=null&&t.length;){const i=t[1].trim();i&&e.push(i),t=iae.exec(n)}}return qg(e)}function eYe(n){switch(Array.isArray(n)?n[0]:n){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}const C2=new QGe;_n.add(Bd.Configuration,C2);function tYe(n,e){var t,i,s,r;return n.trim()?A_.test(n)?v("config.property.languageDefault","Cannot register '{0}'. This matches property pattern '\\\\[.*\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.",n):C2.getConfigurationProperties()[n]!==void 0?v("config.property.duplicate","Cannot register '{0}'. This property is already registered.",n):(t=e.policy)!=null&&t.name&&C2.getPolicyConfigurations().get((i=e.policy)==null?void 0:i.name)!==void 0?v("config.policy.duplicate","Cannot register '{0}'. The associated policy {1} is already registered with {2}.",n,(s=e.policy)==null?void 0:s.name,C2.getPolicyConfigurations().get((r=e.policy)==null?void 0:r.name)):null:v("config.property.empty","Cannot register an empty property")}const iYe={ModesRegistry:"editor.modesRegistry"};class nYe{constructor(){this._onDidChangeLanguages=new X,this.onDidChangeLanguages=this._onDidChangeLanguages.event,this._languages=[]}registerLanguage(e){return this._languages.push(e),this._onDidChangeLanguages.fire(void 0),{dispose:()=>{for(let t=0,i=this._languages.length;t<i;t++)if(this._languages[t]===e){this._languages.splice(t,1);return}}}}getLanguages(){return this._languages}}const TS=new nYe;_n.add(iYe.ModesRegistry,TS);const Ro="plaintext",sYe=".txt";TS.registerLanguage({id:Ro,extensions:[sYe],aliases:[v("plainText.alias","Plain Text"),"text"],mimetypes:[On.text]});_n.as(Bd.Configuration).registerDefaultConfigurations([{overrides:{"[plaintext]":{"editor.unicodeHighlight.ambiguousCharacters":!1,"editor.unicodeHighlight.invisibleCharacters":!1}}}]);class rYe{constructor(e,t){this.languageId=e;const i=t.brackets?nae(t.brackets):[],s=new Loe(a=>{const l=new Set;return{info:new oYe(this,a,l),closing:l}}),r=new Loe(a=>{const l=new Set,c=new Set;return{info:new aYe(this,a,l,c),opening:l,openingColorized:c}});for(const[a,l]of i){const c=s.get(a),d=r.get(l);c.closing.add(d.info),d.opening.add(c.info)}const o=t.colorizedBracketPairs?nae(t.colorizedBracketPairs):i.filter(a=>!(a[0]==="<"&&a[1]===">"));for(const[a,l]of o){const c=s.get(a),d=r.get(l);c.closing.add(d.info),d.openingColorized.add(c.info),d.opening.add(c.info)}this._openingBrackets=new Map([...s.cachedValues].map(([a,l])=>[a,l.info])),this._closingBrackets=new Map([...r.cachedValues].map(([a,l])=>[a,l.info]))}get openingBrackets(){return[...this._openingBrackets.values()]}get closingBrackets(){return[...this._closingBrackets.values()]}getOpeningBracketInfo(e){return this._openingBrackets.get(e)}getClosingBracketInfo(e){return this._closingBrackets.get(e)}getBracketInfo(e){return this.getOpeningBracketInfo(e)||this.getClosingBracketInfo(e)}getBracketRegExp(e){const t=Array.from([...this._openingBrackets.keys(),...this._closingBrackets.keys()]);return BN(t,e)}}function nae(n){return n.filter(([e,t])=>e!==""&&t!=="")}class fCe{constructor(e,t){this.config=e,this.bracketText=t}get languageId(){return this.config.languageId}}class oYe extends fCe{constructor(e,t,i){super(e,t),this.openedBrackets=i,this.isOpeningBracket=!0}}class aYe extends fCe{constructor(e,t,i,s){super(e,t),this.openingBrackets=i,this.openingColorizedBrackets=s,this.isOpeningBracket=!1}closes(e){return e.config!==this.config?!1:this.openingBrackets.has(e)}closesColorized(e){return e.config!==this.config?!1:this.openingColorizedBrackets.has(e)}getOpeningBrackets(){return[...this.openingBrackets]}}var lYe=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},sae=function(n,e){return function(t,i){e(t,i,n)}};class e8{constructor(e){this.languageId=e}affects(e){return this.languageId?this.languageId===e:!0}}const vn=Wt("languageConfigurationService");let Yz=class extends ee{constructor(e,t){super(),this.configurationService=e,this.languageService=t,this._registry=this._register(new hYe),this.onDidChangeEmitter=this._register(new X),this.onDidChange=this.onDidChangeEmitter.event,this.configurations=new Map;const i=new Set(Object.values(Zz));this._register(this.configurationService.onDidChangeConfiguration(s=>{const r=s.change.keys.some(a=>i.has(a)),o=s.change.overrides.filter(([a,l])=>l.some(c=>i.has(c))).map(([a])=>a);if(r)this.configurations.clear(),this.onDidChangeEmitter.fire(new e8(void 0));else for(const a of o)this.languageService.isRegisteredLanguageId(a)&&(this.configurations.delete(a),this.onDidChangeEmitter.fire(new e8(a)))})),this._register(this._registry.onDidChange(s=>{this.configurations.delete(s.languageId),this.onDidChangeEmitter.fire(new e8(s.languageId))}))}register(e,t,i){return this._registry.register(e,t,i)}getLanguageConfiguration(e){let t=this.configurations.get(e);return t||(t=cYe(e,this._registry,this.configurationService,this.languageService),this.configurations.set(e,t)),t}};Yz=lYe([sae(0,Tt),sae(1,un)],Yz);function cYe(n,e,t,i){let s=e.getLanguageConfiguration(n);if(!s){if(!i.isRegisteredLanguageId(n))return new Ly(n,{});s=new Ly(n,{})}const r=dYe(s.languageId,t),o=pCe([s.underlyingConfig,r]);return new Ly(s.languageId,o)}const Zz={brackets:"editor.language.brackets",colorizedBracketPairs:"editor.language.colorizedBracketPairs"};function dYe(n,e){const t=e.getValue(Zz.brackets,{overrideIdentifier:n}),i=e.getValue(Zz.colorizedBracketPairs,{overrideIdentifier:n});return{brackets:rae(t),colorizedBracketPairs:rae(i)}}function rae(n){if(Array.isArray(n))return n.map(e=>{if(!(!Array.isArray(e)||e.length!==2))return[e[0],e[1]]}).filter(e=>!!e)}function gCe(n,e,t){const i=n.getLineContent(e);let s=Ni(i);return s.length>t-1&&(s=s.substring(0,t-1)),s}class uYe{constructor(e){this.languageId=e,this._resolved=null,this._entries=[],this._order=0,this._resolved=null}register(e,t){const i=new oae(e,t,++this._order);return this._entries.push(i),this._resolved=null,Ye(()=>{for(let s=0;s<this._entries.length;s++)if(this._entries[s]===i){this._entries.splice(s,1),this._resolved=null;break}})}getResolvedConfiguration(){if(!this._resolved){const e=this._resolve();e&&(this._resolved=new Ly(this.languageId,e))}return this._resolved}_resolve(){return this._entries.length===0?null:(this._entries.sort(oae.cmp),pCe(this._entries.map(e=>e.configuration)))}}function pCe(n){let e={comments:void 0,brackets:void 0,wordPattern:void 0,indentationRules:void 0,onEnterRules:void 0,autoClosingPairs:void 0,surroundingPairs:void 0,autoCloseBefore:void 0,folding:void 0,colorizedBracketPairs:void 0,__electricCharacterSupport:void 0};for(const t of n)e={comments:t.comments||e.comments,brackets:t.brackets||e.brackets,wordPattern:t.wordPattern||e.wordPattern,indentationRules:t.indentationRules||e.indentationRules,onEnterRules:t.onEnterRules||e.onEnterRules,autoClosingPairs:t.autoClosingPairs||e.autoClosingPairs,surroundingPairs:t.surroundingPairs||e.surroundingPairs,autoCloseBefore:t.autoCloseBefore||e.autoCloseBefore,folding:t.folding||e.folding,colorizedBracketPairs:t.colorizedBracketPairs||e.colorizedBracketPairs,__electricCharacterSupport:t.__electricCharacterSupport||e.__electricCharacterSupport};return e}class oae{constructor(e,t,i){this.configuration=e,this.priority=t,this.order=i}static cmp(e,t){return e.priority===t.priority?e.order-t.order:e.priority-t.priority}}class aae{constructor(e){this.languageId=e}}class hYe extends ee{constructor(){super(),this._entries=new Map,this._onDidChange=this._register(new X),this.onDidChange=this._onDidChange.event,this._register(this.register(Ro,{brackets:[["(",")"],["[","]"],["{","}"]],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:"<",close:">"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}],colorizedBracketPairs:[],folding:{offSide:!0}},0))}register(e,t,i=0){let s=this._entries.get(e);s||(s=new uYe(e),this._entries.set(e,s));const r=s.register(t,i);return this._onDidChange.fire(new aae(e)),Ye(()=>{r.dispose(),this._onDidChange.fire(new aae(e))})}getLanguageConfiguration(e){const t=this._entries.get(e);return(t==null?void 0:t.getResolvedConfiguration())||null}}class Ly{constructor(e,t){this.languageId=e,this.underlyingConfig=t,this._brackets=null,this._electricCharacter=null,this._onEnterSupport=this.underlyingConfig.brackets||this.underlyingConfig.indentationRules||this.underlyingConfig.onEnterRules?new y1(this.underlyingConfig):null,this.comments=Ly._handleComments(this.underlyingConfig),this.characterPair=new qz(this.underlyingConfig),this.wordDefinition=this.underlyingConfig.wordPattern||qZ,this.indentationRules=this.underlyingConfig.indentationRules,this.underlyingConfig.indentationRules?this.indentRulesSupport=new KGe(this.underlyingConfig.indentationRules):this.indentRulesSupport=null,this.foldingRules=this.underlyingConfig.folding||{},this.bracketsNew=new rYe(e,this.underlyingConfig)}getWordDefinition(){return GZ(this.wordDefinition)}get brackets(){return!this._brackets&&this.underlyingConfig.brackets&&(this._brackets=new WGe(this.languageId,this.underlyingConfig.brackets)),this._brackets}get electricCharacter(){return this._electricCharacter||(this._electricCharacter=new jGe(this.brackets)),this._electricCharacter}onEnter(e,t,i,s){return this._onEnterSupport?this._onEnterSupport.onEnter(e,t,i,s):null}getAutoClosingPairs(){return new TGe(this.characterPair.getAutoClosingPairs())}getAutoCloseBeforeSet(e){return this.characterPair.getAutoCloseBeforeSet(e)}getSurroundingPairs(){return this.characterPair.getSurroundingPairs()}static _handleComments(e){const t=e.comments;if(!t)return null;const i={};if(t.lineComment&&(i.lineCommentToken=t.lineComment),t.blockComment){const[s,r]=t.blockComment;i.blockCommentStartToken=s,i.blockCommentEndToken=r}return i}}jt(vn,Yz,1);class Bp{constructor(e,t,i,s){this.originalStart=e,this.originalLength=t,this.modifiedStart=i,this.modifiedLength=s}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}}class lae{constructor(e){this.source=e}getElements(){const e=this.source,t=new Int32Array(e.length);for(let i=0,s=e.length;i<s;i++)t[i]=e.charCodeAt(i);return t}}function fYe(n,e,t){return new Oh(new lae(n),new lae(e)).ComputeDiff(t).changes}class xC{static Assert(e,t){if(!e)throw new Error(t)}}class LC{static Copy(e,t,i,s,r){for(let o=0;o<r;o++)i[s+o]=e[t+o]}static Copy2(e,t,i,s,r){for(let o=0;o<r;o++)i[s+o]=e[t+o]}}class cae{constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new Bp(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_originalCount++}AddModifiedElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}}class Oh{constructor(e,t,i=null){this.ContinueProcessingPredicate=i,this._originalSequence=e,this._modifiedSequence=t;const[s,r,o]=Oh._getElements(e),[a,l,c]=Oh._getElements(t);this._hasStrings=o&&c,this._originalStringElements=s,this._originalElementsOrHash=r,this._modifiedStringElements=a,this._modifiedElementsOrHash=l,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _isStringArray(e){return e.length>0&&typeof e[0]=="string"}static _getElements(e){const t=e.getElements();if(Oh._isStringArray(t)){const i=new Int32Array(t.length);for(let s=0,r=t.length;s<r;s++)i[s]=uX(t[s],0);return[t,i,!0]}return t instanceof Int32Array?[[],t,!1]:[[],new Int32Array(t),!1]}ElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._modifiedStringElements[t]:!0}ElementsAreStrictEqual(e,t){if(!this.ElementsAreEqual(e,t))return!1;const i=Oh._getStrictElement(this._originalSequence,e),s=Oh._getStrictElement(this._modifiedSequence,t);return i===s}static _getStrictElement(e,t){return typeof e.getStrictElement=="function"?e.getStrictElement(t):null}OriginalElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._originalElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._originalStringElements[t]:!0}ModifiedElementsAreEqual(e,t){return this._modifiedElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._modifiedStringElements[e]===this._modifiedStringElements[t]:!0}ComputeDiff(e){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1,e)}_ComputeDiff(e,t,i,s,r){const o=[!1];let a=this.ComputeDiffRecursive(e,t,i,s,o);return r&&(a=this.PrettifyChanges(a)),{quitEarly:o[0],changes:a}}ComputeDiffRecursive(e,t,i,s,r){for(r[0]=!1;e<=t&&i<=s&&this.ElementsAreEqual(e,i);)e++,i++;for(;t>=e&&s>=i&&this.ElementsAreEqual(t,s);)t--,s--;if(e>t||i>s){let u;return i<=s?(xC.Assert(e===t+1,"originalStart should only be one more than originalEnd"),u=[new Bp(e,0,i,s-i+1)]):e<=t?(xC.Assert(i===s+1,"modifiedStart should only be one more than modifiedEnd"),u=[new Bp(e,t-e+1,i,0)]):(xC.Assert(e===t+1,"originalStart should only be one more than originalEnd"),xC.Assert(i===s+1,"modifiedStart should only be one more than modifiedEnd"),u=[]),u}const o=[0],a=[0],l=this.ComputeRecursionPoint(e,t,i,s,o,a,r),c=o[0],d=a[0];if(l!==null)return l;if(!r[0]){const u=this.ComputeDiffRecursive(e,c,i,d,r);let h=[];return r[0]?h=[new Bp(c+1,t-(c+1)+1,d+1,s-(d+1)+1)]:h=this.ComputeDiffRecursive(c+1,t,d+1,s,r),this.ConcatenateChanges(u,h)}return[new Bp(e,t-e+1,i,s-i+1)]}WALKTRACE(e,t,i,s,r,o,a,l,c,d,u,h,f,g,p,_,w,b){let y=null,S=null,x=new cae,E=t,D=i,N=f[0]-_[0]-s,I=-1073741824,H=this.m_forwardHistory.length-1;do{const z=N+e;z===E||z<D&&c[z-1]<c[z+1]?(u=c[z+1],g=u-N-s,u<I&&x.MarkNextChange(),I=u,x.AddModifiedElement(u+1,g),N=z+1-e):(u=c[z-1]+1,g=u-N-s,u<I&&x.MarkNextChange(),I=u-1,x.AddOriginalElement(u,g+1),N=z-1-e),H>=0&&(c=this.m_forwardHistory[H],e=c[0],E=1,D=c.length-1)}while(--H>=-1);if(y=x.getReverseChanges(),b[0]){let z=f[0]+1,G=_[0]+1;if(y!==null&&y.length>0){const J=y[y.length-1];z=Math.max(z,J.getOriginalEnd()),G=Math.max(G,J.getModifiedEnd())}S=[new Bp(z,h-z+1,G,p-G+1)]}else{x=new cae,E=o,D=a,N=f[0]-_[0]-l,I=1073741824,H=w?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{const z=N+r;z===E||z<D&&d[z-1]>=d[z+1]?(u=d[z+1]-1,g=u-N-l,u>I&&x.MarkNextChange(),I=u+1,x.AddOriginalElement(u+1,g+1),N=z+1-r):(u=d[z-1],g=u-N-l,u>I&&x.MarkNextChange(),I=u,x.AddModifiedElement(u+1,g+1),N=z-1-r),H>=0&&(d=this.m_reverseHistory[H],r=d[0],E=1,D=d.length-1)}while(--H>=-1);S=x.getChanges()}return this.ConcatenateChanges(y,S)}ComputeRecursionPoint(e,t,i,s,r,o,a){let l=0,c=0,d=0,u=0,h=0,f=0;e--,i--,r[0]=0,o[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];const g=t-e+(s-i),p=g+1,_=new Int32Array(p),w=new Int32Array(p),b=s-i,y=t-e,S=e-i,x=t-s,D=(y-b)%2===0;_[b]=e,w[y]=t,a[0]=!1;for(let N=1;N<=g/2+1;N++){let I=0,H=0;d=this.ClipDiagonalBound(b-N,N,b,p),u=this.ClipDiagonalBound(b+N,N,b,p);for(let G=d;G<=u;G+=2){G===d||G<u&&_[G-1]<_[G+1]?l=_[G+1]:l=_[G-1]+1,c=l-(G-b)-S;const J=l;for(;l<t&&c<s&&this.ElementsAreEqual(l+1,c+1);)l++,c++;if(_[G]=l,l+c>I+H&&(I=l,H=c),!D&&Math.abs(G-y)<=N-1&&l>=w[G])return r[0]=l,o[0]=c,J<=w[G]&&N<=1448?this.WALKTRACE(b,d,u,S,y,h,f,x,_,w,l,t,r,c,s,o,D,a):null}const z=(I-e+(H-i)-N)/2;if(this.ContinueProcessingPredicate!==null&&!this.ContinueProcessingPredicate(I,z))return a[0]=!0,r[0]=I,o[0]=H,z>0&&N<=1448?this.WALKTRACE(b,d,u,S,y,h,f,x,_,w,l,t,r,c,s,o,D,a):(e++,i++,[new Bp(e,t-e+1,i,s-i+1)]);h=this.ClipDiagonalBound(y-N,N,y,p),f=this.ClipDiagonalBound(y+N,N,y,p);for(let G=h;G<=f;G+=2){G===h||G<f&&w[G-1]>=w[G+1]?l=w[G+1]-1:l=w[G-1],c=l-(G-y)-x;const J=l;for(;l>e&&c>i&&this.ElementsAreEqual(l,c);)l--,c--;if(w[G]=l,D&&Math.abs(G-b)<=N&&l<=_[G])return r[0]=l,o[0]=c,J>=_[G]&&N<=1448?this.WALKTRACE(b,d,u,S,y,h,f,x,_,w,l,t,r,c,s,o,D,a):null}if(N<=1447){let G=new Int32Array(u-d+2);G[0]=b-d+1,LC.Copy2(_,d,G,1,u-d+1),this.m_forwardHistory.push(G),G=new Int32Array(f-h+2),G[0]=y-h+1,LC.Copy2(w,h,G,1,f-h+1),this.m_reverseHistory.push(G)}}return this.WALKTRACE(b,d,u,S,y,h,f,x,_,w,l,t,r,c,s,o,D,a)}PrettifyChanges(e){for(let t=0;t<e.length;t++){const i=e[t],s=t<e.length-1?e[t+1].originalStart:this._originalElementsOrHash.length,r=t<e.length-1?e[t+1].modifiedStart:this._modifiedElementsOrHash.length,o=i.originalLength>0,a=i.modifiedLength>0;for(;i.originalStart+i.originalLength<s&&i.modifiedStart+i.modifiedLength<r&&(!o||this.OriginalElementsAreEqual(i.originalStart,i.originalStart+i.originalLength))&&(!a||this.ModifiedElementsAreEqual(i.modifiedStart,i.modifiedStart+i.modifiedLength));){const c=this.ElementsAreStrictEqual(i.originalStart,i.modifiedStart);if(this.ElementsAreStrictEqual(i.originalStart+i.originalLength,i.modifiedStart+i.modifiedLength)&&!c)break;i.originalStart++,i.modifiedStart++}const l=[null];if(t<e.length-1&&this.ChangesOverlap(e[t],e[t+1],l)){e[t]=l[0],e.splice(t+1,1),t--;continue}}for(let t=e.length-1;t>=0;t--){const i=e[t];let s=0,r=0;if(t>0){const u=e[t-1];s=u.originalStart+u.originalLength,r=u.modifiedStart+u.modifiedLength}const o=i.originalLength>0,a=i.modifiedLength>0;let l=0,c=this._boundaryScore(i.originalStart,i.originalLength,i.modifiedStart,i.modifiedLength);for(let u=1;;u++){const h=i.originalStart-u,f=i.modifiedStart-u;if(h<s||f<r||o&&!this.OriginalElementsAreEqual(h,h+i.originalLength)||a&&!this.ModifiedElementsAreEqual(f,f+i.modifiedLength))break;const p=(h===s&&f===r?5:0)+this._boundaryScore(h,i.originalLength,f,i.modifiedLength);p>c&&(c=p,l=u)}i.originalStart-=l,i.modifiedStart-=l;const d=[null];if(t>0&&this.ChangesOverlap(e[t-1],e[t],d)){e[t-1]=d[0],e.splice(t,1),t++;continue}}if(this._hasStrings)for(let t=1,i=e.length;t<i;t++){const s=e[t-1],r=e[t],o=r.originalStart-s.originalStart-s.originalLength,a=s.originalStart,l=r.originalStart+r.originalLength,c=l-a,d=s.modifiedStart,u=r.modifiedStart+r.modifiedLength,h=u-d;if(o<5&&c<20&&h<20){const f=this._findBetterContiguousSequence(a,c,d,h,o);if(f){const[g,p]=f;(g!==s.originalStart+s.originalLength||p!==s.modifiedStart+s.modifiedLength)&&(s.originalLength=g-s.originalStart,s.modifiedLength=p-s.modifiedStart,r.originalStart=g+o,r.modifiedStart=p+o,r.originalLength=l-r.originalStart,r.modifiedLength=u-r.modifiedStart)}}}return e}_findBetterContiguousSequence(e,t,i,s,r){if(t<r||s<r)return null;const o=e+t-r+1,a=i+s-r+1;let l=0,c=0,d=0;for(let u=e;u<o;u++)for(let h=i;h<a;h++){const f=this._contiguousSequenceScore(u,h,r);f>0&&f>l&&(l=f,c=u,d=h)}return l>0?[c,d]:null}_contiguousSequenceScore(e,t,i){let s=0;for(let r=0;r<i;r++){if(!this.ElementsAreEqual(e+r,t+r))return 0;s+=this._originalStringElements[e+r].length}return s}_OriginalIsBoundary(e){return e<=0||e>=this._originalElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._originalStringElements[e])}_OriginalRegionIsBoundary(e,t){if(this._OriginalIsBoundary(e)||this._OriginalIsBoundary(e-1))return!0;if(t>0){const i=e+t;if(this._OriginalIsBoundary(i-1)||this._OriginalIsBoundary(i))return!0}return!1}_ModifiedIsBoundary(e){return e<=0||e>=this._modifiedElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._modifiedStringElements[e])}_ModifiedRegionIsBoundary(e,t){if(this._ModifiedIsBoundary(e)||this._ModifiedIsBoundary(e-1))return!0;if(t>0){const i=e+t;if(this._ModifiedIsBoundary(i-1)||this._ModifiedIsBoundary(i))return!0}return!1}_boundaryScore(e,t,i,s){const r=this._OriginalRegionIsBoundary(e,t)?1:0,o=this._ModifiedRegionIsBoundary(i,s)?1:0;return r+o}ConcatenateChanges(e,t){const i=[];if(e.length===0||t.length===0)return t.length>0?t:e;if(this.ChangesOverlap(e[e.length-1],t[0],i)){const s=new Array(e.length+t.length-1);return LC.Copy(e,0,s,0,e.length-1),s[e.length-1]=i[0],LC.Copy(t,1,s,e.length,t.length-1),s}else{const s=new Array(e.length+t.length);return LC.Copy(e,0,s,0,e.length),LC.Copy(t,0,s,e.length,t.length),s}}ChangesOverlap(e,t,i){if(xC.Assert(e.originalStart<=t.originalStart,"Left change is not less than or equal to right change"),xC.Assert(e.modifiedStart<=t.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=t.originalStart||e.modifiedStart+e.modifiedLength>=t.modifiedStart){const s=e.originalStart;let r=e.originalLength;const o=e.modifiedStart;let a=e.modifiedLength;return e.originalStart+e.originalLength>=t.originalStart&&(r=t.originalStart+t.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=t.modifiedStart&&(a=t.modifiedStart+t.modifiedLength-e.modifiedStart),i[0]=new Bp(s,r,o,a),!0}else return i[0]=null,!1}ClipDiagonalBound(e,t,i,s){if(e>=0&&e<s)return e;const r=i,o=s-i-1,a=t%2===0;if(e<0){const l=r%2===0;return a===l?0:1}else{const l=o%2===0;return a===l?s-1:s-2}}}function CP(n){return n<0?0:n>255?255:n|0}function kC(n){return n<0?0:n>4294967295?4294967295:n|0}class Rx{constructor(e){const t=CP(e);this._defaultValue=t,this._asciiMap=Rx._createAsciiMap(t),this._map=new Map}static _createAsciiMap(e){const t=new Uint8Array(256);return t.fill(e),t}set(e,t){const i=CP(t);e>=0&&e<256?this._asciiMap[e]=i:this._map.set(e,i)}get(e){return e>=0&&e<256?this._asciiMap[e]:this._map.get(e)||this._defaultValue}clear(){this._asciiMap.fill(this._defaultValue),this._map.clear()}}class yP{constructor(){this._actual=new Rx(0)}add(e){this._actual.set(e,1)}has(e){return this._actual.get(e)===1}clear(){return this._actual.clear()}}class gYe{constructor(e,t,i){const s=new Uint8Array(e*t);for(let r=0,o=e*t;r<o;r++)s[r]=i;this._data=s,this.rows=e,this.cols=t}get(e,t){return this._data[e*this.cols+t]}set(e,t,i){this._data[e*this.cols+t]=i}}class pYe{constructor(e){let t=0,i=0;for(let r=0,o=e.length;r<o;r++){const[a,l,c]=e[r];l>t&&(t=l),a>i&&(i=a),c>i&&(i=c)}t++,i++;const s=new gYe(i,t,0);for(let r=0,o=e.length;r<o;r++){const[a,l,c]=e[r];s.set(a,l,c)}this._states=s,this._maxCharCode=t}nextState(e,t){return t<0||t>=this._maxCharCode?0:this._states.get(e,t)}}let t8=null;function mYe(){return t8===null&&(t8=new pYe([[1,104,2],[1,72,2],[1,102,6],[1,70,6],[2,116,3],[2,84,3],[3,116,4],[3,84,4],[4,112,5],[4,80,5],[5,115,9],[5,83,9],[5,58,10],[6,105,7],[6,73,7],[7,108,8],[7,76,8],[8,101,9],[8,69,9],[9,58,10],[10,47,11],[11,47,12]])),t8}let PL=null;function _Ye(){if(PL===null){PL=new Rx(0);const n=` 	<>'"`;for(let t=0;t<n.length;t++)PL.set(n.charCodeAt(t),1);const e=".,;:";for(let t=0;t<e.length;t++)PL.set(e.charCodeAt(t),2)}return PL}class SP{static _createLink(e,t,i,s,r){let o=r-1;do{const a=t.charCodeAt(o);if(e.get(a)!==2)break;o--}while(o>s);if(s>0){const a=t.charCodeAt(s-1),l=t.charCodeAt(o);(a===40&&l===41||a===91&&l===93||a===123&&l===125)&&o--}return{range:{startLineNumber:i,startColumn:s+1,endLineNumber:i,endColumn:o+2},url:t.substring(s,o+1)}}static computeLinks(e,t=mYe()){const i=_Ye(),s=[];for(let r=1,o=e.getLineCount();r<=o;r++){const a=e.getLineContent(r),l=a.length;let c=0,d=0,u=0,h=1,f=!1,g=!1,p=!1,_=!1;for(;c<l;){let w=!1;const b=a.charCodeAt(c);if(h===13){let y;switch(b){case 40:f=!0,y=0;break;case 41:y=f?0:1;break;case 91:p=!0,g=!0,y=0;break;case 93:p=!1,y=g?0:1;break;case 123:_=!0,y=0;break;case 125:y=_?0:1;break;case 39:case 34:case 96:u===b?y=1:u===39||u===34||u===96?y=0:y=1;break;case 42:y=u===42?1:0;break;case 124:y=u===124?1:0;break;case 32:y=p?0:1;break;default:y=i.get(b)}y===1&&(s.push(SP._createLink(i,a,r,d,c)),w=!0)}else if(h===12){let y;b===91?(g=!0,y=0):y=i.get(b),y===1?w=!0:h=13}else h=t.nextState(h,b),h===0&&(w=!0);w&&(h=1,f=!1,g=!1,_=!1,d=c+1,u=b),c++}h===13&&s.push(SP._createLink(i,a,r,d,l))}return s}}function vYe(n){return!n||typeof n.getLineCount!="function"||typeof n.getLineContent!="function"?[]:SP.computeLinks(n)}const f4=class f4{constructor(){this._defaultValueSet=[["true","false"],["True","False"],["Private","Public","Friend","ReadOnly","Partial","Protected","WriteOnly"],["public","protected","private"]]}navigateValueSet(e,t,i,s,r){if(e&&t){const o=this.doNavigateValueSet(t,r);if(o)return{range:e,value:o}}if(i&&s){const o=this.doNavigateValueSet(s,r);if(o)return{range:i,value:o}}return null}doNavigateValueSet(e,t){const i=this.numberReplace(e,t);return i!==null?i:this.textReplace(e,t)}numberReplace(e,t){const i=Math.pow(10,e.length-(e.lastIndexOf(".")+1));let s=Number(e);const r=parseFloat(e);return!isNaN(s)&&!isNaN(r)&&s===r?s===0&&!t?null:(s=Math.floor(s*i),s+=t?i:-i,String(s/i)):null}textReplace(e,t){return this.valueSetsReplace(this._defaultValueSet,e,t)}valueSetsReplace(e,t,i){let s=null;for(let r=0,o=e.length;s===null&&r<o;r++)s=this.valueSetReplace(e[r],t,i);return s}valueSetReplace(e,t,i){let s=e.indexOf(t);return s>=0?(s+=i?1:-1,s<0?s=e.length-1:s%=e.length,e[s]):null}};f4.INSTANCE=new f4;let Xz=f4;const PE=class PE{static getChannel(e){return e.getChannel(PE.CHANNEL_NAME)}static setChannel(e,t){e.setChannel(PE.CHANNEL_NAME,t)}};PE.CHANNEL_NAME="editorWorkerHost";let Qz=PE;var dae,uae;class bYe{constructor(e,t){this.uri=e,this.value=t}}function wYe(n){return Array.isArray(n)}const gb=class gb{constructor(e,t){if(this[dae]="ResourceMap",e instanceof gb)this.map=new Map(e.map),this.toKey=t??gb.defaultToKey;else if(wYe(e)){this.map=new Map,this.toKey=t??gb.defaultToKey;for(const[i,s]of e)this.set(i,s)}else this.map=new Map,this.toKey=e??gb.defaultToKey}set(e,t){return this.map.set(this.toKey(e),new bYe(e,t)),this}get(e){var t;return(t=this.map.get(this.toKey(e)))==null?void 0:t.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,t){typeof t<"u"&&(e=e.bind(t));for(const[i,s]of this.map)e(s.value,s.uri,this)}*values(){for(const e of this.map.values())yield e.value}*keys(){for(const e of this.map.values())yield e.uri}*entries(){for(const e of this.map.values())yield[e.uri,e.value]}*[(dae=Symbol.toStringTag,Symbol.iterator)](){for(const[,e]of this.map)yield[e.uri,e.value]}};gb.defaultToKey=e=>e.toString();let $s=gb;class CYe{constructor(){this[uae]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return(e=this._head)==null?void 0:e.value}get last(){var e;return(e=this._tail)==null?void 0:e.value}has(e){return this._map.has(e)}get(e,t=0){const i=this._map.get(e);if(i)return t!==0&&this.touch(i,t),i.value}set(e,t,i=0){let s=this._map.get(e);if(s)s.value=t,i!==0&&this.touch(s,i);else{switch(s={key:e,value:t,next:void 0,previous:void 0},i){case 0:this.addItemLast(s);break;case 1:this.addItemFirst(s);break;case 2:this.addItemLast(s);break;default:this.addItemLast(s);break}this._map.set(e,s),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){const i=this._state;let s=this._head;for(;s;){if(t?e.bind(t)(s.value,s.key,this):e(s.value,s.key,this),this._state!==i)throw new Error("LinkedMap got modified during iteration.");s=s.next}}keys(){const e=this,t=this._state;let i=this._head;const s={[Symbol.iterator](){return s},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const r={value:i.key,done:!1};return i=i.next,r}else return{value:void 0,done:!0}}};return s}values(){const e=this,t=this._state;let i=this._head;const s={[Symbol.iterator](){return s},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const r={value:i.value,done:!1};return i=i.next,r}else return{value:void 0,done:!0}}};return s}entries(){const e=this,t=this._state;let i=this._head;const s={[Symbol.iterator](){return s},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const r={value:[i.key,i.value],done:!1};return i=i.next,r}else return{value:void 0,done:!0}}};return s}[(uae=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._head,i=this.size;for(;t&&i>e;)this._map.delete(t.key),t=t.next,i--;this._head=t,this._size=i,t&&(t.previous=void 0),this._state++}trimNew(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._tail,i=this.size;for(;t&&i>e;)this._map.delete(t.key),t=t.previous,i--;this._tail=t,this._size=i,t&&(t.next=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const t=e.next,i=e.previous;if(!t||!i)throw new Error("Invalid list");t.previous=i,i.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(t!==1&&t!==2)){if(t===1){if(e===this._head)return;const i=e.next,s=e.previous;e===this._tail?(s.next=void 0,this._tail=s):(i.previous=s,s.next=i),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===2){if(e===this._tail)return;const i=e.next,s=e.previous;e===this._head?(i.previous=void 0,this._head=i):(i.previous=s,s.next=i),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){const e=[];return this.forEach((t,i)=>{e.push([i,t])}),e}fromJSON(e){this.clear();for(const[t,i]of e)this.set(t,i)}}class yYe extends CYe{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get(e,t=2){return super.get(e,t)}peek(e){return super.get(e,0)}set(e,t){return super.set(e,t,2),this}checkTrim(){this.size>this._limit&&this.trim(Math.round(this._limit*this._ratio))}}class vf extends yYe{constructor(e,t=1){super(e,t)}trim(e){this.trimOld(e)}set(e,t){return super.set(e,t),this.checkTrim(),this}}class SYe{constructor(e){if(this._m1=new Map,this._m2=new Map,e)for(const[t,i]of e)this.set(t,i)}clear(){this._m1.clear(),this._m2.clear()}set(e,t){this._m1.set(e,t),this._m2.set(t,e)}get(e){return this._m1.get(e)}getKey(e){return this._m2.get(e)}delete(e){const t=this._m1.get(e);return t===void 0?!1:(this._m1.delete(e),this._m2.delete(t),!0)}keys(){return this._m1.keys()}values(){return this._m1.values()}}class CX{constructor(){this.map=new Map}add(e,t){let i=this.map.get(e);i||(i=new Set,this.map.set(e,i)),i.add(t)}delete(e,t){const i=this.map.get(e);i&&(i.delete(t),i.size===0&&this.map.delete(e))}forEach(e,t){const i=this.map.get(e);i&&i.forEach(t)}get(e){const t=this.map.get(e);return t||new Set}}class xYe extends Rx{constructor(e,t){super(0),this._segmenter=null,this._cachedLine=null,this._cachedSegments=[],this.intlSegmenterLocales=t,this.intlSegmenterLocales.length>0?this._segmenter=new Intl.Segmenter(this.intlSegmenterLocales,{granularity:"word"}):this._segmenter=null;for(let i=0,s=e.length;i<s;i++)this.set(e.charCodeAt(i),2);this.set(32,1),this.set(9,1)}findPrevIntlWordBeforeOrAtOffset(e,t){let i=null;for(const s of this._getIntlSegmenterWordsOnLine(e)){if(s.index>t)break;i=s}return i}findNextIntlWordAtOrAfterOffset(e,t){for(const i of this._getIntlSegmenterWordsOnLine(e))if(!(i.index<t))return i;return null}_getIntlSegmenterWordsOnLine(e){return this._segmenter?this._cachedLine===e?this._cachedSegments:(this._cachedLine=e,this._cachedSegments=this._filterWordSegments(this._segmenter.segment(e)),this._cachedSegments):[]}_filterWordSegments(e){const t=[];for(const i of e)this._isWordLike(i)&&t.push(i);return t}_isWordLike(e){return!!e.isWordLike}}const hae=new vf(10);function Mc(n,e){const t=`${n}/${e.join(",")}`;let i=hae.get(t);return i||(i=new xYe(n,e),hae.set(t,i)),i}var Vl;(function(n){n[n.Left=1]="Left",n[n.Center=2]="Center",n[n.Right=4]="Right",n[n.Full=7]="Full"})(Vl||(Vl={}));var Td;(function(n){n[n.Left=1]="Left",n[n.Center=2]="Center",n[n.Right=3]="Right"})(Td||(Td={}));var wd;(function(n){n[n.Both=0]="Both",n[n.Right=1]="Right",n[n.Left=2]="Left",n[n.None=3]="None"})(wd||(wd={}));class y2{get originalIndentSize(){return this._indentSizeIsTabSize?"tabSize":this.indentSize}constructor(e){this._textModelResolvedOptionsBrand=void 0,this.tabSize=Math.max(1,e.tabSize|0),e.indentSize==="tabSize"?(this.indentSize=this.tabSize,this._indentSizeIsTabSize=!0):(this.indentSize=Math.max(1,e.indentSize|0),this._indentSizeIsTabSize=!1),this.insertSpaces=!!e.insertSpaces,this.defaultEOL=e.defaultEOL|0,this.trimAutoWhitespace=!!e.trimAutoWhitespace,this.bracketPairColorizationOptions=e.bracketPairColorizationOptions}equals(e){return this.tabSize===e.tabSize&&this._indentSizeIsTabSize===e._indentSizeIsTabSize&&this.indentSize===e.indentSize&&this.insertSpaces===e.insertSpaces&&this.defaultEOL===e.defaultEOL&&this.trimAutoWhitespace===e.trimAutoWhitespace&&Ga(this.bracketPairColorizationOptions,e.bracketPairColorizationOptions)}createChangeEvent(e){return{tabSize:this.tabSize!==e.tabSize,indentSize:this.indentSize!==e.indentSize,insertSpaces:this.insertSpaces!==e.insertSpaces,trimAutoWhitespace:this.trimAutoWhitespace!==e.trimAutoWhitespace}}}class HI{constructor(e,t){this._findMatchBrand=void 0,this.range=e,this.matches=t}}function LYe(n){return n&&typeof n.read=="function"}class i8{constructor(e,t,i,s,r,o){this.identifier=e,this.range=t,this.text=i,this.forceMoveMarkers=s,this.isAutoWhitespaceEdit=r,this._isTracked=o}}class kYe{constructor(e,t,i){this.regex=e,this.wordSeparators=t,this.simpleSearch=i}}class EYe{constructor(e,t,i){this.reverseEdits=e,this.changes=t,this.trimAutoWhitespaceLineNumbers=i}}function mCe(n){return!n.isTooLargeForSyncing()&&!n.isForSimpleWidget}const IYe=999;class $v{constructor(e,t,i,s){this.searchString=e,this.isRegex=t,this.matchCase=i,this.wordSeparators=s}parseSearchRequest(){if(this.searchString==="")return null;let e;this.isRegex?e=DYe(this.searchString):e=this.searchString.indexOf(`
`)>=0;let t=null;try{t=g0e(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:e,global:!0,unicode:!0})}catch{return null}if(!t)return null;let i=!this.isRegex&&!e;return i&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(i=this.matchCase),new kYe(t,this.wordSeparators?Mc(this.wordSeparators,[]):null,i?this.searchString:null)}}function DYe(n){if(!n||n.length===0)return!1;for(let e=0,t=n.length;e<t;e++){const i=n.charCodeAt(e);if(i===10)return!0;if(i===92){if(e++,e>=t)break;const s=n.charCodeAt(e);if(s===110||s===114||s===87)return!0}}return!1}function eb(n,e,t){if(!t)return new HI(n,null);const i=[];for(let s=0,r=e.length;s<r;s++)i[s]=e[s];return new HI(n,i)}class fae{constructor(e){const t=[];let i=0;for(let s=0,r=e.length;s<r;s++)e.charCodeAt(s)===10&&(t[i++]=s);this._lineFeedsOffsets=t}findLineFeedCountBeforeOffset(e){const t=this._lineFeedsOffsets;let i=0,s=t.length-1;if(s===-1||e<=t[0])return 0;for(;i<s;){const r=i+((s-i)/2>>0);t[r]>=e?s=r-1:t[r+1]>=e?(i=r,s=r):i=r+1}return i+1}}class HR{static findMatches(e,t,i,s,r){const o=t.parseSearchRequest();return o?o.regex.multiline?this._doFindMatchesMultiline(e,i,new S1(o.wordSeparators,o.regex),s,r):this._doFindMatchesLineByLine(e,i,o,s,r):[]}static _getMultilineMatchRange(e,t,i,s,r,o){let a,l=0;s?(l=s.findLineFeedCountBeforeOffset(r),a=t+r+l):a=t+r;let c;if(s){const f=s.findLineFeedCountBeforeOffset(r+o.length)-l;c=a+o.length+f}else c=a+o.length;const d=e.getPositionAt(a),u=e.getPositionAt(c);return new M(d.lineNumber,d.column,u.lineNumber,u.column)}static _doFindMatchesMultiline(e,t,i,s,r){const o=e.getOffsetAt(t.getStartPosition()),a=e.getValueInRange(t,1),l=e.getEOL()===`\r
`?new fae(a):null,c=[];let d=0,u;for(i.reset(0);u=i.next(a);)if(c[d++]=eb(this._getMultilineMatchRange(e,o,a,l,u.index,u[0]),u,s),d>=r)return c;return c}static _doFindMatchesLineByLine(e,t,i,s,r){const o=[];let a=0;if(t.startLineNumber===t.endLineNumber){const c=e.getLineContent(t.startLineNumber).substring(t.startColumn-1,t.endColumn-1);return a=this._findMatchesInLine(i,c,t.startLineNumber,t.startColumn-1,a,o,s,r),o}const l=e.getLineContent(t.startLineNumber).substring(t.startColumn-1);a=this._findMatchesInLine(i,l,t.startLineNumber,t.startColumn-1,a,o,s,r);for(let c=t.startLineNumber+1;c<t.endLineNumber&&a<r;c++)a=this._findMatchesInLine(i,e.getLineContent(c),c,0,a,o,s,r);if(a<r){const c=e.getLineContent(t.endLineNumber).substring(0,t.endColumn-1);a=this._findMatchesInLine(i,c,t.endLineNumber,0,a,o,s,r)}return o}static _findMatchesInLine(e,t,i,s,r,o,a,l){const c=e.wordSeparators;if(!a&&e.simpleSearch){const h=e.simpleSearch,f=h.length,g=t.length;let p=-f;for(;(p=t.indexOf(h,p+f))!==-1;)if((!c||yX(c,t,g,p,f))&&(o[r++]=new HI(new M(i,p+1+s,i,p+1+f+s),null),r>=l))return r;return r}const d=new S1(e.wordSeparators,e.regex);let u;d.reset(0);do if(u=d.next(t),u&&(o[r++]=eb(new M(i,u.index+1+s,i,u.index+1+u[0].length+s),u,a),r>=l))return r;while(u);return r}static findNextMatch(e,t,i,s){const r=t.parseSearchRequest();if(!r)return null;const o=new S1(r.wordSeparators,r.regex);return r.regex.multiline?this._doFindNextMatchMultiline(e,i,o,s):this._doFindNextMatchLineByLine(e,i,o,s)}static _doFindNextMatchMultiline(e,t,i,s){const r=new Y(t.lineNumber,1),o=e.getOffsetAt(r),a=e.getLineCount(),l=e.getValueInRange(new M(r.lineNumber,r.column,a,e.getLineMaxColumn(a)),1),c=e.getEOL()===`\r
`?new fae(l):null;i.reset(t.column-1);const d=i.next(l);return d?eb(this._getMultilineMatchRange(e,o,l,c,d.index,d[0]),d,s):t.lineNumber!==1||t.column!==1?this._doFindNextMatchMultiline(e,new Y(1,1),i,s):null}static _doFindNextMatchLineByLine(e,t,i,s){const r=e.getLineCount(),o=t.lineNumber,a=e.getLineContent(o),l=this._findFirstMatchInLine(i,a,o,t.column,s);if(l)return l;for(let c=1;c<=r;c++){const d=(o+c-1)%r,u=e.getLineContent(d+1),h=this._findFirstMatchInLine(i,u,d+1,1,s);if(h)return h}return null}static _findFirstMatchInLine(e,t,i,s,r){e.reset(s-1);const o=e.next(t);return o?eb(new M(i,o.index+1,i,o.index+1+o[0].length),o,r):null}static findPreviousMatch(e,t,i,s){const r=t.parseSearchRequest();if(!r)return null;const o=new S1(r.wordSeparators,r.regex);return r.regex.multiline?this._doFindPreviousMatchMultiline(e,i,o,s):this._doFindPreviousMatchLineByLine(e,i,o,s)}static _doFindPreviousMatchMultiline(e,t,i,s){const r=this._doFindMatchesMultiline(e,new M(1,1,t.lineNumber,t.column),i,s,10*IYe);if(r.length>0)return r[r.length-1];const o=e.getLineCount();return t.lineNumber!==o||t.column!==e.getLineMaxColumn(o)?this._doFindPreviousMatchMultiline(e,new Y(o,e.getLineMaxColumn(o)),i,s):null}static _doFindPreviousMatchLineByLine(e,t,i,s){const r=e.getLineCount(),o=t.lineNumber,a=e.getLineContent(o).substring(0,t.column-1),l=this._findLastMatchInLine(i,a,o,s);if(l)return l;for(let c=1;c<=r;c++){const d=(r+o-c-1)%r,u=e.getLineContent(d+1),h=this._findLastMatchInLine(i,u,d+1,s);if(h)return h}return null}static _findLastMatchInLine(e,t,i,s){let r=null,o;for(e.reset(0);o=e.next(t);)r=eb(new M(i,o.index+1,i,o.index+1+o[0].length),o,s);return r}}function NYe(n,e,t,i,s){if(i===0)return!0;const r=e.charCodeAt(i-1);if(n.get(r)!==0||r===13||r===10)return!0;if(s>0){const o=e.charCodeAt(i);if(n.get(o)!==0)return!0}return!1}function TYe(n,e,t,i,s){if(i+s===t)return!0;const r=e.charCodeAt(i+s);if(n.get(r)!==0||r===13||r===10)return!0;if(s>0){const o=e.charCodeAt(i+s-1);if(n.get(o)!==0)return!0}return!1}function yX(n,e,t,i,s){return NYe(n,e,t,i,s)&&TYe(n,e,t,i,s)}class S1{constructor(e,t){this._wordSeparators=e,this._searchRegex=t,this._prevMatchStartIndex=-1,this._prevMatchLength=0}reset(e){this._searchRegex.lastIndex=e,this._prevMatchStartIndex=-1,this._prevMatchLength=0}next(e){const t=e.length;let i;do{if(this._prevMatchStartIndex+this._prevMatchLength===t||(i=this._searchRegex.exec(e),!i))return null;const s=i.index,r=i[0].length;if(s===this._prevMatchStartIndex&&r===this._prevMatchLength){if(r===0){dP(e,t,this._searchRegex.lastIndex)>65535?this._searchRegex.lastIndex+=2:this._searchRegex.lastIndex+=1;continue}return null}if(this._prevMatchStartIndex=s,this._prevMatchLength=r,!this._wordSeparators||yX(this._wordSeparators,e,t,s,r))return i}while(i);return null}}class SX{static computeUnicodeHighlights(e,t,i){const s=i?i.startLineNumber:1,r=i?i.endLineNumber:e.getLineCount(),o=new gae(t),a=o.getCandidateCodePoints();let l;a==="allNonBasicAscii"?l=new RegExp("[^\\t\\n\\r\\x20-\\x7E]","g"):l=new RegExp(`${RYe(Array.from(a))}`,"g");const c=new S1(null,l),d=[];let u=!1,h,f=0,g=0,p=0;e:for(let _=s,w=r;_<=w;_++){const b=e.getLineContent(_),y=b.length;c.reset(0);do if(h=c.next(b),h){let S=h.index,x=h.index+h[0].length;if(S>0){const I=b.charCodeAt(S-1);ks(I)&&S--}if(x+1<y){const I=b.charCodeAt(x-1);ks(I)&&x++}const E=b.substring(S,x);let D=DI(S+1,qZ,b,0);D&&D.endColumn<=S+1&&(D=null);const N=o.shouldHighlightNonBasicASCII(E,D?D.word:null);if(N!==0){if(N===3?f++:N===2?g++:N===1?p++:X3(),d.length>=1e3){u=!0;break e}d.push(new M(_,S+1,_,x+1))}}while(h)}return{ranges:d,hasMore:u,ambiguousCharacterCount:f,invisibleCharacterCount:g,nonBasicAsciiCharacterCount:p}}static computeUnicodeHighlightReason(e,t){const i=new gae(t);switch(i.shouldHighlightNonBasicASCII(e,null)){case 0:return null;case 2:return{kind:1};case 3:{const r=e.codePointAt(0),o=i.ambiguousCharacters.getPrimaryConfusable(r),a=OI.getLocales().filter(l=>!OI.getInstance(new Set([...t.allowedLocales,l])).isAmbiguous(r));return{kind:0,confusableWith:String.fromCodePoint(o),notAmbiguousInLocales:a}}case 1:return{kind:2}}}}function RYe(n,e){return`[${$l(n.map(i=>String.fromCodePoint(i)).join(""))}]`}class gae{constructor(e){this.options=e,this.allowedCodePoints=new Set(e.allowedCodePoints),this.ambiguousCharacters=OI.getInstance(new Set(e.allowedLocales))}getCandidateCodePoints(){if(this.options.nonBasicASCII)return"allNonBasicAscii";const e=new Set;if(this.options.invisibleCharacters)for(const t of Hb.codePoints)pae(String.fromCodePoint(t))||e.add(t);if(this.options.ambiguousCharacters)for(const t of this.ambiguousCharacters.getConfusableCodePoints())e.add(t);for(const t of this.allowedCodePoints)e.delete(t);return e}shouldHighlightNonBasicASCII(e,t){const i=e.codePointAt(0);if(this.allowedCodePoints.has(i))return 0;if(this.options.nonBasicASCII)return 1;let s=!1,r=!1;if(t)for(const o of t){const a=o.codePointAt(0),l=MN(o);s=s||l,!l&&!this.ambiguousCharacters.isAmbiguous(a)&&!Hb.isInvisibleCharacter(a)&&(r=!0)}return!s&&r?0:this.options.invisibleCharacters&&!pae(e)&&Hb.isInvisibleCharacter(i)?2:this.options.ambiguousCharacters&&this.ambiguousCharacters.isAmbiguous(i)?3:0}}function pae(n){return n===" "||n===`
`||n==="	"}class S2{constructor(e,t,i){this.changes=e,this.moves=t,this.hitTimeout=i}}class _Ce{constructor(e,t){this.lineRangeMapping=e,this.changes=t}}class At{static addRange(e,t){let i=0;for(;i<t.length&&t[i].endExclusive<e.start;)i++;let s=i;for(;s<t.length&&t[s].start<=e.endExclusive;)s++;if(i===s)t.splice(i,0,e);else{const r=Math.min(e.start,t[i].start),o=Math.max(e.endExclusive,t[s-1].endExclusive);t.splice(i,s-i,new At(r,o))}}static tryCreate(e,t){if(!(e>t))return new At(e,t)}static ofLength(e){return new At(0,e)}static ofStartAndLength(e,t){return new At(e,e+t)}constructor(e,t){if(this.start=e,this.endExclusive=t,e>t)throw new li(`Invalid range: ${this.toString()}`)}get isEmpty(){return this.start===this.endExclusive}delta(e){return new At(this.start+e,this.endExclusive+e)}deltaStart(e){return new At(this.start+e,this.endExclusive)}deltaEnd(e){return new At(this.start,this.endExclusive+e)}get length(){return this.endExclusive-this.start}toString(){return`[${this.start}, ${this.endExclusive})`}contains(e){return this.start<=e&&e<this.endExclusive}join(e){return new At(Math.min(this.start,e.start),Math.max(this.endExclusive,e.endExclusive))}intersect(e){const t=Math.max(this.start,e.start),i=Math.min(this.endExclusive,e.endExclusive);if(t<=i)return new At(t,i)}intersects(e){const t=Math.max(this.start,e.start),i=Math.min(this.endExclusive,e.endExclusive);return t<i}isBefore(e){return this.endExclusive<=e.start}isAfter(e){return this.start>=e.endExclusive}slice(e){return e.slice(this.start,this.endExclusive)}substring(e){return e.substring(this.start,this.endExclusive)}clip(e){if(this.isEmpty)throw new li(`Invalid clipping range: ${this.toString()}`);return Math.max(this.start,Math.min(this.endExclusive-1,e))}clipCyclic(e){if(this.isEmpty)throw new li(`Invalid clipping range: ${this.toString()}`);return e<this.start?this.endExclusive-(this.start-e)%this.length:e>=this.endExclusive?this.start+(e-this.start)%this.length:e}forEach(e){for(let t=this.start;t<this.endExclusive;t++)e(t)}}class xX{constructor(){this._sortedRanges=[]}addRange(e){let t=0;for(;t<this._sortedRanges.length&&this._sortedRanges[t].endExclusive<e.start;)t++;let i=t;for(;i<this._sortedRanges.length&&this._sortedRanges[i].start<=e.endExclusive;)i++;if(t===i)this._sortedRanges.splice(t,0,e);else{const s=Math.min(e.start,this._sortedRanges[t].start),r=Math.max(e.endExclusive,this._sortedRanges[i-1].endExclusive);this._sortedRanges.splice(t,i-t,new At(s,r))}}toString(){return this._sortedRanges.map(e=>e.toString()).join(", ")}intersectsStrict(e){let t=0;for(;t<this._sortedRanges.length&&this._sortedRanges[t].endExclusive<=e.start;)t++;return t<this._sortedRanges.length&&this._sortedRanges[t].start<e.endExclusive}intersectWithRange(e){const t=new xX;for(const i of this._sortedRanges){const s=i.intersect(e);s&&t.addRange(s)}return t}intersectWithRangeLength(e){return this.intersectWithRange(e).length}get length(){return this._sortedRanges.reduce((e,t)=>e+t.length,0)}}function VI(n,e){const t=AYe(n,e);if(t!==-1)return n[t]}function AYe(n,e,t=n.length-1){for(let i=t;i>=0;i--){const s=n[i];if(e(s))return i}return-1}function RS(n,e){const t=zI(n,e);return t===-1?void 0:n[t]}function zI(n,e,t=0,i=n.length){let s=t,r=i;for(;s<r;){const o=Math.floor((s+r)/2);e(n[o])?s=o+1:r=o}return s-1}function MYe(n,e){const t=UI(n,e);return t===n.length?void 0:n[t]}function UI(n,e,t=0,i=n.length){let s=t,r=i;for(;s<r;){const o=Math.floor((s+r)/2);e(n[o])?r=o:s=o+1}return s}const g4=class g4{constructor(e){this._array=e,this._findLastMonotonousLastIdx=0}findLastMonotonous(e){if(g4.assertInvariants){if(this._prevFindLastPredicate){for(const i of this._array)if(this._prevFindLastPredicate(i)&&!e(i))throw new Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.")}this._prevFindLastPredicate=e}const t=zI(this._array,e,this._findLastMonotonousLastIdx);return this._findLastMonotonousLastIdx=t+1,t===-1?void 0:this._array[t]}};g4.assertInvariants=!1;let xP=g4;function LX(n,e){if(n.length===0)return;let t=n[0];for(let i=1;i<n.length;i++){const s=n[i];e(s,t)>0&&(t=s)}return t}function PYe(n,e){if(n.length===0)return;let t=n[0];for(let i=1;i<n.length;i++){const s=n[i];e(s,t)>=0&&(t=s)}return t}function OYe(n,e){return LX(n,(t,i)=>-e(t,i))}function FYe(n,e){if(n.length===0)return-1;let t=0;for(let i=1;i<n.length;i++){const s=n[i];e(s,n[t])>0&&(t=i)}return t}function BYe(n,e){for(const t of n){const i=e(t);if(i!==void 0)return i}}let wt=class Hf{static fromRangeInclusive(e){return new Hf(e.startLineNumber,e.endLineNumber+1)}static joinMany(e){if(e.length===0)return[];let t=new wc(e[0].slice());for(let i=1;i<e.length;i++)t=t.getUnion(new wc(e[i].slice()));return t.ranges}static join(e){if(e.length===0)throw new li("lineRanges cannot be empty");let t=e[0].startLineNumber,i=e[0].endLineNumberExclusive;for(let s=1;s<e.length;s++)t=Math.min(t,e[s].startLineNumber),i=Math.max(i,e[s].endLineNumberExclusive);return new Hf(t,i)}static ofLength(e,t){return new Hf(e,e+t)}static deserialize(e){return new Hf(e[0],e[1])}constructor(e,t){if(e>t)throw new li(`startLineNumber ${e} cannot be after endLineNumberExclusive ${t}`);this.startLineNumber=e,this.endLineNumberExclusive=t}contains(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}get isEmpty(){return this.startLineNumber===this.endLineNumberExclusive}delta(e){return new Hf(this.startLineNumber+e,this.endLineNumberExclusive+e)}deltaLength(e){return new Hf(this.startLineNumber,this.endLineNumberExclusive+e)}get length(){return this.endLineNumberExclusive-this.startLineNumber}join(e){return new Hf(Math.min(this.startLineNumber,e.startLineNumber),Math.max(this.endLineNumberExclusive,e.endLineNumberExclusive))}toString(){return`[${this.startLineNumber},${this.endLineNumberExclusive})`}intersect(e){const t=Math.max(this.startLineNumber,e.startLineNumber),i=Math.min(this.endLineNumberExclusive,e.endLineNumberExclusive);if(t<=i)return new Hf(t,i)}intersectsStrict(e){return this.startLineNumber<e.endLineNumberExclusive&&e.startLineNumber<this.endLineNumberExclusive}overlapOrTouch(e){return this.startLineNumber<=e.endLineNumberExclusive&&e.startLineNumber<=this.endLineNumberExclusive}equals(e){return this.startLineNumber===e.startLineNumber&&this.endLineNumberExclusive===e.endLineNumberExclusive}toInclusiveRange(){return this.isEmpty?null:new M(this.startLineNumber,1,this.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER)}toExclusiveRange(){return new M(this.startLineNumber,1,this.endLineNumberExclusive,1)}mapToLineArray(e){const t=[];for(let i=this.startLineNumber;i<this.endLineNumberExclusive;i++)t.push(e(i));return t}forEach(e){for(let t=this.startLineNumber;t<this.endLineNumberExclusive;t++)e(t)}serialize(){return[this.startLineNumber,this.endLineNumberExclusive]}includes(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}toOffsetRange(){return new At(this.startLineNumber-1,this.endLineNumberExclusive-1)}};class wc{constructor(e=[]){this._normalizedRanges=e}get ranges(){return this._normalizedRanges}addRange(e){if(e.length===0)return;const t=UI(this._normalizedRanges,s=>s.endLineNumberExclusive>=e.startLineNumber),i=zI(this._normalizedRanges,s=>s.startLineNumber<=e.endLineNumberExclusive)+1;if(t===i)this._normalizedRanges.splice(t,0,e);else if(t===i-1){const s=this._normalizedRanges[t];this._normalizedRanges[t]=s.join(e)}else{const s=this._normalizedRanges[t].join(this._normalizedRanges[i-1]).join(e);this._normalizedRanges.splice(t,i-t,s)}}contains(e){const t=RS(this._normalizedRanges,i=>i.startLineNumber<=e);return!!t&&t.endLineNumberExclusive>e}intersects(e){const t=RS(this._normalizedRanges,i=>i.startLineNumber<e.endLineNumberExclusive);return!!t&&t.endLineNumberExclusive>e.startLineNumber}getUnion(e){if(this._normalizedRanges.length===0)return e;if(e._normalizedRanges.length===0)return this;const t=[];let i=0,s=0,r=null;for(;i<this._normalizedRanges.length||s<e._normalizedRanges.length;){let o=null;if(i<this._normalizedRanges.length&&s<e._normalizedRanges.length){const a=this._normalizedRanges[i],l=e._normalizedRanges[s];a.startLineNumber<l.startLineNumber?(o=a,i++):(o=l,s++)}else i<this._normalizedRanges.length?(o=this._normalizedRanges[i],i++):(o=e._normalizedRanges[s],s++);r===null?r=o:r.endLineNumberExclusive>=o.startLineNumber?r=new wt(r.startLineNumber,Math.max(r.endLineNumberExclusive,o.endLineNumberExclusive)):(t.push(r),r=o)}return r!==null&&t.push(r),new wc(t)}subtractFrom(e){const t=UI(this._normalizedRanges,o=>o.endLineNumberExclusive>=e.startLineNumber),i=zI(this._normalizedRanges,o=>o.startLineNumber<=e.endLineNumberExclusive)+1;if(t===i)return new wc([e]);const s=[];let r=e.startLineNumber;for(let o=t;o<i;o++){const a=this._normalizedRanges[o];a.startLineNumber>r&&s.push(new wt(r,a.startLineNumber)),r=a.endLineNumberExclusive}return r<e.endLineNumberExclusive&&s.push(new wt(r,e.endLineNumberExclusive)),new wc(s)}toString(){return this._normalizedRanges.map(e=>e.toString()).join(", ")}getIntersection(e){const t=[];let i=0,s=0;for(;i<this._normalizedRanges.length&&s<e._normalizedRanges.length;){const r=this._normalizedRanges[i],o=e._normalizedRanges[s],a=r.intersect(o);a&&!a.isEmpty&&t.push(a),r.endLineNumberExclusive<o.endLineNumberExclusive?i++:s++}return new wc(t)}getWithDelta(e){return new wc(this._normalizedRanges.map(t=>t.delta(e)))}}const qp=class qp{static betweenPositions(e,t){return e.lineNumber===t.lineNumber?new qp(0,t.column-e.column):new qp(t.lineNumber-e.lineNumber,t.column-1)}static ofRange(e){return qp.betweenPositions(e.getStartPosition(),e.getEndPosition())}static ofText(e){let t=0,i=0;for(const s of e)s===`
`?(t++,i=0):i++;return new qp(t,i)}constructor(e,t){this.lineCount=e,this.columnCount=t}isGreaterThanOrEqualTo(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>=e.columnCount}createRange(e){return this.lineCount===0?new M(e.lineNumber,e.column,e.lineNumber,e.column+this.columnCount):new M(e.lineNumber,e.column,e.lineNumber+this.lineCount,this.columnCount+1)}addToPosition(e){return this.lineCount===0?new Y(e.lineNumber,e.column+this.columnCount):new Y(e.lineNumber+this.lineCount,this.columnCount+1)}toString(){return`${this.lineCount},${this.columnCount}`}};qp.zero=new qp(0,0);let Rd=qp;class WYe{constructor(e){this.text=e,this.lineStartOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let t=0;t<e.length;t++)e.charAt(t)===`
`&&this.lineStartOffsetByLineIdx.push(t+1)}getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}getOffsetRange(e){return new At(this.getOffset(e.getStartPosition()),this.getOffset(e.getEndPosition()))}get textLength(){const e=this.lineStartOffsetByLineIdx.length-1;return new Rd(e,this.text.length-this.lineStartOffsetByLineIdx[e])}}class kX{constructor(e){this.edits=e,h0(()=>vX(e,(t,i)=>t.range.getEndPosition().isBeforeOrEqual(i.range.getStartPosition())))}apply(e){let t="",i=new Y(1,1);for(const r of this.edits){const o=r.range,a=o.getStartPosition(),l=o.getEndPosition(),c=mae(i,a);c.isEmpty()||(t+=e.getValueOfRange(c)),t+=r.text,i=l}const s=mae(i,e.endPositionExclusive);return s.isEmpty()||(t+=e.getValueOfRange(s)),t}applyToString(e){const t=new HYe(e);return this.apply(t)}getNewRanges(){const e=[];let t=0,i=0,s=0;for(const r of this.edits){const o=Rd.ofText(r.text),a=Y.lift({lineNumber:r.range.startLineNumber+i,column:r.range.startColumn+(r.range.startLineNumber===t?s:0)}),l=o.createRange(a);e.push(l),i=l.endLineNumber-r.range.endLineNumber,s=l.endColumn-r.range.endColumn,t=r.range.endLineNumber}return e}}class rf{constructor(e,t){this.range=e,this.text=t}toSingleEditOperation(){return{range:this.range,text:this.text}}}function mae(n,e){if(n.lineNumber===e.lineNumber&&n.column===Number.MAX_SAFE_INTEGER)return M.fromPositions(e,e);if(!n.isBeforeOrEqual(e))throw new li("start must be before end");return new M(n.lineNumber,n.column,e.lineNumber,e.column)}class vCe{get endPositionExclusive(){return this.length.addToPosition(new Y(1,1))}}class HYe extends vCe{constructor(e){super(),this.value=e,this._t=new WYe(this.value)}getValueOfRange(e){return this._t.getOffsetRange(e).substring(this.value)}get length(){return this._t.textLength}}class so{static inverse(e,t,i){const s=[];let r=1,o=1;for(const l of e){const c=new so(new wt(r,l.original.startLineNumber),new wt(o,l.modified.startLineNumber));c.modified.isEmpty||s.push(c),r=l.original.endLineNumberExclusive,o=l.modified.endLineNumberExclusive}const a=new so(new wt(r,t+1),new wt(o,i+1));return a.modified.isEmpty||s.push(a),s}static clip(e,t,i){const s=[];for(const r of e){const o=r.original.intersect(t),a=r.modified.intersect(i);o&&!o.isEmpty&&a&&!a.isEmpty&&s.push(new so(o,a))}return s}constructor(e,t){this.original=e,this.modified=t}toString(){return`{${this.original.toString()}->${this.modified.toString()}}`}flip(){return new so(this.modified,this.original)}join(e){return new so(this.original.join(e.original),this.modified.join(e.modified))}toRangeMapping(){const e=this.original.toInclusiveRange(),t=this.modified.toInclusiveRange();if(e&&t)return new xl(e,t);if(this.original.startLineNumber===1||this.modified.startLineNumber===1){if(!(this.modified.startLineNumber===1&&this.original.startLineNumber===1))throw new li("not a valid diff");return new xl(new M(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new M(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1))}else return new xl(new M(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),new M(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER))}toRangeMapping2(e,t){if(_ae(this.original.endLineNumberExclusive,e)&&_ae(this.modified.endLineNumberExclusive,t))return new xl(new M(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new M(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1));if(!this.original.isEmpty&&!this.modified.isEmpty)return new xl(M.fromPositions(new Y(this.original.startLineNumber,1),EC(new Y(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),e)),M.fromPositions(new Y(this.modified.startLineNumber,1),EC(new Y(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),t)));if(this.original.startLineNumber>1&&this.modified.startLineNumber>1)return new xl(M.fromPositions(EC(new Y(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER),e),EC(new Y(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),e)),M.fromPositions(EC(new Y(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER),t),EC(new Y(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),t)));throw new li}}function EC(n,e){if(n.lineNumber<1)return new Y(1,1);if(n.lineNumber>e.length)return new Y(e.length,e[e.length-1].length+1);const t=e[n.lineNumber-1];return n.column>t.length+1?new Y(n.lineNumber,t.length+1):n}function _ae(n,e){return n>=1&&n<=e.length}class zl extends so{static fromRangeMappings(e){const t=wt.join(e.map(s=>wt.fromRangeInclusive(s.originalRange))),i=wt.join(e.map(s=>wt.fromRangeInclusive(s.modifiedRange)));return new zl(t,i,e)}constructor(e,t,i){super(e,t),this.innerChanges=i}flip(){var e;return new zl(this.modified,this.original,(e=this.innerChanges)==null?void 0:e.map(t=>t.flip()))}withInnerChangesFromLineRanges(){return new zl(this.original,this.modified,[this.toRangeMapping()])}}class xl{static assertSorted(e){for(let t=1;t<e.length;t++){const i=e[t-1],s=e[t];if(!(i.originalRange.getEndPosition().isBeforeOrEqual(s.originalRange.getStartPosition())&&i.modifiedRange.getEndPosition().isBeforeOrEqual(s.modifiedRange.getStartPosition())))throw new li("Range mappings must be sorted")}}constructor(e,t){this.originalRange=e,this.modifiedRange=t}toString(){return`{${this.originalRange.toString()}->${this.modifiedRange.toString()}}`}flip(){return new xl(this.modifiedRange,this.originalRange)}toTextEdit(e){const t=e.getValueOfRange(this.modifiedRange);return new rf(this.originalRange,t)}}const VYe=3;class zYe{computeDiff(e,t,i){var l;const r=new jYe(e,t,{maxComputationTime:i.maxComputationTimeMs,shouldIgnoreTrimWhitespace:i.ignoreTrimWhitespace,shouldComputeCharChanges:!0,shouldMakePrettyDiff:!0,shouldPostProcessCharChanges:!0}).computeDiff(),o=[];let a=null;for(const c of r.changes){let d;c.originalEndLineNumber===0?d=new wt(c.originalStartLineNumber+1,c.originalStartLineNumber+1):d=new wt(c.originalStartLineNumber,c.originalEndLineNumber+1);let u;c.modifiedEndLineNumber===0?u=new wt(c.modifiedStartLineNumber+1,c.modifiedStartLineNumber+1):u=new wt(c.modifiedStartLineNumber,c.modifiedEndLineNumber+1);let h=new zl(d,u,(l=c.charChanges)==null?void 0:l.map(f=>new xl(new M(f.originalStartLineNumber,f.originalStartColumn,f.originalEndLineNumber,f.originalEndColumn),new M(f.modifiedStartLineNumber,f.modifiedStartColumn,f.modifiedEndLineNumber,f.modifiedEndColumn))));a&&(a.modified.endLineNumberExclusive===h.modified.startLineNumber||a.original.endLineNumberExclusive===h.original.startLineNumber)&&(h=new zl(a.original.join(h.original),a.modified.join(h.modified),a.innerChanges&&h.innerChanges?a.innerChanges.concat(h.innerChanges):void 0),o.pop()),o.push(h),a=h}return h0(()=>vX(o,(c,d)=>d.original.startLineNumber-c.original.endLineNumberExclusive===d.modified.startLineNumber-c.modified.endLineNumberExclusive&&c.original.endLineNumberExclusive<d.original.startLineNumber&&c.modified.endLineNumberExclusive<d.modified.startLineNumber)),new S2(o,[],r.quitEarly)}}function bCe(n,e,t,i){return new Oh(n,e,t).ComputeDiff(i)}let vae=class{constructor(e){const t=[],i=[];for(let s=0,r=e.length;s<r;s++)t[s]=Jz(e[s],1),i[s]=eU(e[s],1);this.lines=e,this._startColumns=t,this._endColumns=i}getElements(){const e=[];for(let t=0,i=this.lines.length;t<i;t++)e[t]=this.lines[t].substring(this._startColumns[t]-1,this._endColumns[t]-1);return e}getStrictElement(e){return this.lines[e]}getStartLineNumber(e){return e+1}getEndLineNumber(e){return e+1}createCharSequence(e,t,i){const s=[],r=[],o=[];let a=0;for(let l=t;l<=i;l++){const c=this.lines[l],d=e?this._startColumns[l]:1,u=e?this._endColumns[l]:c.length+1;for(let h=d;h<u;h++)s[a]=c.charCodeAt(h-1),r[a]=l+1,o[a]=h,a++;!e&&l<i&&(s[a]=10,r[a]=l+1,o[a]=c.length+1,a++)}return new UYe(s,r,o)}};class UYe{constructor(e,t,i){this._charCodes=e,this._lineNumbers=t,this._columns=i}toString(){return"["+this._charCodes.map((e,t)=>(e===10?"\\n":String.fromCharCode(e))+`-(${this._lineNumbers[t]},${this._columns[t]})`).join(", ")+"]"}_assertIndex(e,t){if(e<0||e>=t.length)throw new Error("Illegal index")}getElements(){return this._charCodes}getStartLineNumber(e){return e>0&&e===this._lineNumbers.length?this.getEndLineNumber(e-1):(this._assertIndex(e,this._lineNumbers),this._lineNumbers[e])}getEndLineNumber(e){return e===-1?this.getStartLineNumber(e+1):(this._assertIndex(e,this._lineNumbers),this._charCodes[e]===10?this._lineNumbers[e]+1:this._lineNumbers[e])}getStartColumn(e){return e>0&&e===this._columns.length?this.getEndColumn(e-1):(this._assertIndex(e,this._columns),this._columns[e])}getEndColumn(e){return e===-1?this.getStartColumn(e+1):(this._assertIndex(e,this._columns),this._charCodes[e]===10?1:this._columns[e]+1)}}class ky{constructor(e,t,i,s,r,o,a,l){this.originalStartLineNumber=e,this.originalStartColumn=t,this.originalEndLineNumber=i,this.originalEndColumn=s,this.modifiedStartLineNumber=r,this.modifiedStartColumn=o,this.modifiedEndLineNumber=a,this.modifiedEndColumn=l}static createFromDiffChange(e,t,i){const s=t.getStartLineNumber(e.originalStart),r=t.getStartColumn(e.originalStart),o=t.getEndLineNumber(e.originalStart+e.originalLength-1),a=t.getEndColumn(e.originalStart+e.originalLength-1),l=i.getStartLineNumber(e.modifiedStart),c=i.getStartColumn(e.modifiedStart),d=i.getEndLineNumber(e.modifiedStart+e.modifiedLength-1),u=i.getEndColumn(e.modifiedStart+e.modifiedLength-1);return new ky(s,r,o,a,l,c,d,u)}}function $Ye(n){if(n.length<=1)return n;const e=[n[0]];let t=e[0];for(let i=1,s=n.length;i<s;i++){const r=n[i],o=r.originalStart-(t.originalStart+t.originalLength),a=r.modifiedStart-(t.modifiedStart+t.modifiedLength);Math.min(o,a)<VYe?(t.originalLength=r.originalStart+r.originalLength-t.originalStart,t.modifiedLength=r.modifiedStart+r.modifiedLength-t.modifiedStart):(e.push(r),t=r)}return e}class Zk{constructor(e,t,i,s,r){this.originalStartLineNumber=e,this.originalEndLineNumber=t,this.modifiedStartLineNumber=i,this.modifiedEndLineNumber=s,this.charChanges=r}static createFromDiffResult(e,t,i,s,r,o,a){let l,c,d,u,h;if(t.originalLength===0?(l=i.getStartLineNumber(t.originalStart)-1,c=0):(l=i.getStartLineNumber(t.originalStart),c=i.getEndLineNumber(t.originalStart+t.originalLength-1)),t.modifiedLength===0?(d=s.getStartLineNumber(t.modifiedStart)-1,u=0):(d=s.getStartLineNumber(t.modifiedStart),u=s.getEndLineNumber(t.modifiedStart+t.modifiedLength-1)),o&&t.originalLength>0&&t.originalLength<20&&t.modifiedLength>0&&t.modifiedLength<20&&r()){const f=i.createCharSequence(e,t.originalStart,t.originalStart+t.originalLength-1),g=s.createCharSequence(e,t.modifiedStart,t.modifiedStart+t.modifiedLength-1);if(f.getElements().length>0&&g.getElements().length>0){let p=bCe(f,g,r,!0).changes;a&&(p=$Ye(p)),h=[];for(let _=0,w=p.length;_<w;_++)h.push(ky.createFromDiffChange(p[_],f,g))}}return new Zk(l,c,d,u,h)}}class jYe{constructor(e,t,i){this.shouldComputeCharChanges=i.shouldComputeCharChanges,this.shouldPostProcessCharChanges=i.shouldPostProcessCharChanges,this.shouldIgnoreTrimWhitespace=i.shouldIgnoreTrimWhitespace,this.shouldMakePrettyDiff=i.shouldMakePrettyDiff,this.originalLines=e,this.modifiedLines=t,this.original=new vae(e),this.modified=new vae(t),this.continueLineDiff=bae(i.maxComputationTime),this.continueCharDiff=bae(i.maxComputationTime===0?0:Math.min(i.maxComputationTime,5e3))}computeDiff(){if(this.original.lines.length===1&&this.original.lines[0].length===0)return this.modified.lines.length===1&&this.modified.lines[0].length===0?{quitEarly:!1,changes:[]}:{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:1,modifiedStartLineNumber:1,modifiedEndLineNumber:this.modified.lines.length,charChanges:void 0}]};if(this.modified.lines.length===1&&this.modified.lines[0].length===0)return{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:this.original.lines.length,modifiedStartLineNumber:1,modifiedEndLineNumber:1,charChanges:void 0}]};const e=bCe(this.original,this.modified,this.continueLineDiff,this.shouldMakePrettyDiff),t=e.changes,i=e.quitEarly;if(this.shouldIgnoreTrimWhitespace){const a=[];for(let l=0,c=t.length;l<c;l++)a.push(Zk.createFromDiffResult(this.shouldIgnoreTrimWhitespace,t[l],this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges));return{quitEarly:i,changes:a}}const s=[];let r=0,o=0;for(let a=-1,l=t.length;a<l;a++){const c=a+1<l?t[a+1]:null,d=c?c.originalStart:this.originalLines.length,u=c?c.modifiedStart:this.modifiedLines.length;for(;r<d&&o<u;){const h=this.originalLines[r],f=this.modifiedLines[o];if(h!==f){{let g=Jz(h,1),p=Jz(f,1);for(;g>1&&p>1;){const _=h.charCodeAt(g-2),w=f.charCodeAt(p-2);if(_!==w)break;g--,p--}(g>1||p>1)&&this._pushTrimWhitespaceCharChange(s,r+1,1,g,o+1,1,p)}{let g=eU(h,1),p=eU(f,1);const _=h.length+1,w=f.length+1;for(;g<_&&p<w;){const b=h.charCodeAt(g-1),y=h.charCodeAt(p-1);if(b!==y)break;g++,p++}(g<_||p<w)&&this._pushTrimWhitespaceCharChange(s,r+1,g,_,o+1,p,w)}}r++,o++}c&&(s.push(Zk.createFromDiffResult(this.shouldIgnoreTrimWhitespace,c,this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges)),r+=c.originalLength,o+=c.modifiedLength)}return{quitEarly:i,changes:s}}_pushTrimWhitespaceCharChange(e,t,i,s,r,o,a){if(this._mergeTrimWhitespaceCharChange(e,t,i,s,r,o,a))return;let l;this.shouldComputeCharChanges&&(l=[new ky(t,i,t,s,r,o,r,a)]),e.push(new Zk(t,t,r,r,l))}_mergeTrimWhitespaceCharChange(e,t,i,s,r,o,a){const l=e.length;if(l===0)return!1;const c=e[l-1];return c.originalEndLineNumber===0||c.modifiedEndLineNumber===0?!1:c.originalEndLineNumber===t&&c.modifiedEndLineNumber===r?(this.shouldComputeCharChanges&&c.charChanges&&c.charChanges.push(new ky(t,i,t,s,r,o,r,a)),!0):c.originalEndLineNumber+1===t&&c.modifiedEndLineNumber+1===r?(c.originalEndLineNumber=t,c.modifiedEndLineNumber=r,this.shouldComputeCharChanges&&c.charChanges&&c.charChanges.push(new ky(t,i,t,s,r,o,r,a)),!0):!1}}function Jz(n,e){const t=lo(n);return t===-1?e:t+1}function eU(n,e){const t=Nu(n);return t===-1?e:t+2}function bae(n){if(n===0)return()=>!0;const e=Date.now();return()=>Date.now()-e<n}class Ag{static trivial(e,t){return new Ag([new Ls(At.ofLength(e.length),At.ofLength(t.length))],!1)}static trivialTimedOut(e,t){return new Ag([new Ls(At.ofLength(e.length),At.ofLength(t.length))],!0)}constructor(e,t){this.diffs=e,this.hitTimeout=t}}class Ls{static invert(e,t){const i=[];return Twe(e,(s,r)=>{i.push(Ls.fromOffsetPairs(s?s.getEndExclusives():bg.zero,r?r.getStarts():new bg(t,(s?s.seq2Range.endExclusive-s.seq1Range.endExclusive:0)+t)))}),i}static fromOffsetPairs(e,t){return new Ls(new At(e.offset1,t.offset1),new At(e.offset2,t.offset2))}static assertSorted(e){let t;for(const i of e){if(t&&!(t.seq1Range.endExclusive<=i.seq1Range.start&&t.seq2Range.endExclusive<=i.seq2Range.start))throw new li("Sequence diffs must be sorted");t=i}}constructor(e,t){this.seq1Range=e,this.seq2Range=t}swap(){return new Ls(this.seq2Range,this.seq1Range)}toString(){return`${this.seq1Range} <-> ${this.seq2Range}`}join(e){return new Ls(this.seq1Range.join(e.seq1Range),this.seq2Range.join(e.seq2Range))}delta(e){return e===0?this:new Ls(this.seq1Range.delta(e),this.seq2Range.delta(e))}deltaStart(e){return e===0?this:new Ls(this.seq1Range.deltaStart(e),this.seq2Range.deltaStart(e))}deltaEnd(e){return e===0?this:new Ls(this.seq1Range.deltaEnd(e),this.seq2Range.deltaEnd(e))}intersect(e){const t=this.seq1Range.intersect(e.seq1Range),i=this.seq2Range.intersect(e.seq2Range);if(!(!t||!i))return new Ls(t,i)}getStarts(){return new bg(this.seq1Range.start,this.seq2Range.start)}getEndExclusives(){return new bg(this.seq1Range.endExclusive,this.seq2Range.endExclusive)}}const pb=class pb{constructor(e,t){this.offset1=e,this.offset2=t}toString(){return`${this.offset1} <-> ${this.offset2}`}delta(e){return e===0?this:new pb(this.offset1+e,this.offset2+e)}equals(e){return this.offset1===e.offset1&&this.offset2===e.offset2}};pb.zero=new pb(0,0),pb.max=new pb(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER);let bg=pb;const p4=class p4{isValid(){return!0}};p4.instance=new p4;let $I=p4;class KYe{constructor(e){if(this.timeout=e,this.startTime=Date.now(),this.valid=!0,e<=0)throw new li("timeout must be positive")}isValid(){if(!(Date.now()-this.startTime<this.timeout)&&this.valid){this.valid=!1;debugger}return this.valid}}class n8{constructor(e,t){this.width=e,this.height=t,this.array=[],this.array=new Array(e*t)}get(e,t){return this.array[e+t*this.width]}set(e,t,i){this.array[e+t*this.width]=i}}function tU(n){return n===32||n===9}const OE=class OE{static getKey(e){let t=this.chrKeys.get(e);return t===void 0&&(t=this.chrKeys.size,this.chrKeys.set(e,t)),t}constructor(e,t,i){this.range=e,this.lines=t,this.source=i,this.histogram=[];let s=0;for(let r=e.startLineNumber-1;r<e.endLineNumberExclusive-1;r++){const o=t[r];for(let l=0;l<o.length;l++){s++;const c=o[l],d=OE.getKey(c);this.histogram[d]=(this.histogram[d]||0)+1}s++;const a=OE.getKey(`
`);this.histogram[a]=(this.histogram[a]||0)+1}this.totalCount=s}computeSimilarity(e){let t=0;const i=Math.max(this.histogram.length,e.histogram.length);for(let s=0;s<i;s++)t+=Math.abs((this.histogram[s]??0)-(e.histogram[s]??0));return 1-t/(this.totalCount+e.totalCount)}};OE.chrKeys=new Map;let LP=OE;class qYe{compute(e,t,i=$I.instance,s){if(e.length===0||t.length===0)return Ag.trivial(e,t);const r=new n8(e.length,t.length),o=new n8(e.length,t.length),a=new n8(e.length,t.length);for(let g=0;g<e.length;g++)for(let p=0;p<t.length;p++){if(!i.isValid())return Ag.trivialTimedOut(e,t);const _=g===0?0:r.get(g-1,p),w=p===0?0:r.get(g,p-1);let b;e.getElement(g)===t.getElement(p)?(g===0||p===0?b=0:b=r.get(g-1,p-1),g>0&&p>0&&o.get(g-1,p-1)===3&&(b+=a.get(g-1,p-1)),b+=s?s(g,p):1):b=-1;const y=Math.max(_,w,b);if(y===b){const S=g>0&&p>0?a.get(g-1,p-1):0;a.set(g,p,S+1),o.set(g,p,3)}else y===_?(a.set(g,p,0),o.set(g,p,1)):y===w&&(a.set(g,p,0),o.set(g,p,2));r.set(g,p,y)}const l=[];let c=e.length,d=t.length;function u(g,p){(g+1!==c||p+1!==d)&&l.push(new Ls(new At(g+1,c),new At(p+1,d))),c=g,d=p}let h=e.length-1,f=t.length-1;for(;h>=0&&f>=0;)o.get(h,f)===3?(u(h,f),h--,f--):o.get(h,f)===1?h--:f--;return u(-1,-1),l.reverse(),new Ag(l,!1)}}class wCe{compute(e,t,i=$I.instance){if(e.length===0||t.length===0)return Ag.trivial(e,t);const s=e,r=t;function o(p,_){for(;p<s.length&&_<r.length&&s.getElement(p)===r.getElement(_);)p++,_++;return p}let a=0;const l=new GYe;l.set(0,o(0,0));const c=new YYe;c.set(0,l.get(0)===0?null:new wae(null,0,0,l.get(0)));let d=0;e:for(;;){if(a++,!i.isValid())return Ag.trivialTimedOut(s,r);const p=-Math.min(a,r.length+a%2),_=Math.min(a,s.length+a%2);for(d=p;d<=_;d+=2){const w=d===_?-1:l.get(d+1),b=d===p?-1:l.get(d-1)+1,y=Math.min(Math.max(w,b),s.length),S=y-d;if(y>s.length||S>r.length)continue;const x=o(y,S);l.set(d,x);const E=y===w?c.get(d+1):c.get(d-1);if(c.set(d,x!==y?new wae(E,y,S,x-y):E),l.get(d)===s.length&&l.get(d)-d===r.length)break e}}let u=c.get(d);const h=[];let f=s.length,g=r.length;for(;;){const p=u?u.x+u.length:0,_=u?u.y+u.length:0;if((p!==f||_!==g)&&h.push(new Ls(new At(p,f),new At(_,g))),!u)break;f=u.x,g=u.y,u=u.prev}return h.reverse(),new Ag(h,!1)}}class wae{constructor(e,t,i,s){this.prev=e,this.x=t,this.y=i,this.length=s}}class GYe{constructor(){this.positiveArr=new Int32Array(10),this.negativeArr=new Int32Array(10)}get(e){return e<0?(e=-e-1,this.negativeArr[e]):this.positiveArr[e]}set(e,t){if(e<0){if(e=-e-1,e>=this.negativeArr.length){const i=this.negativeArr;this.negativeArr=new Int32Array(i.length*2),this.negativeArr.set(i)}this.negativeArr[e]=t}else{if(e>=this.positiveArr.length){const i=this.positiveArr;this.positiveArr=new Int32Array(i.length*2),this.positiveArr.set(i)}this.positiveArr[e]=t}}}class YYe{constructor(){this.positiveArr=[],this.negativeArr=[]}get(e){return e<0?(e=-e-1,this.negativeArr[e]):this.positiveArr[e]}set(e,t){e<0?(e=-e-1,this.negativeArr[e]=t):this.positiveArr[e]=t}}class kP{constructor(e,t,i){this.lines=e,this.range=t,this.considerWhitespaceChanges=i,this.elements=[],this.firstElementOffsetByLineIdx=[],this.lineStartOffsets=[],this.trimmedWsLengthsByLineIdx=[],this.firstElementOffsetByLineIdx.push(0);for(let s=this.range.startLineNumber;s<=this.range.endLineNumber;s++){let r=e[s-1],o=0;s===this.range.startLineNumber&&this.range.startColumn>1&&(o=this.range.startColumn-1,r=r.substring(o)),this.lineStartOffsets.push(o);let a=0;if(!i){const c=r.trimStart();a=r.length-c.length,r=c.trimEnd()}this.trimmedWsLengthsByLineIdx.push(a);const l=s===this.range.endLineNumber?Math.min(this.range.endColumn-1-o-a,r.length):r.length;for(let c=0;c<l;c++)this.elements.push(r.charCodeAt(c));s<this.range.endLineNumber&&(this.elements.push(10),this.firstElementOffsetByLineIdx.push(this.elements.length))}}toString(){return`Slice: "${this.text}"`}get text(){return this.getText(new At(0,this.length))}getText(e){return this.elements.slice(e.start,e.endExclusive).map(t=>String.fromCharCode(t)).join("")}getElement(e){return this.elements[e]}get length(){return this.elements.length}getBoundaryScore(e){const t=yae(e>0?this.elements[e-1]:-1),i=yae(e<this.elements.length?this.elements[e]:-1);if(t===7&&i===8)return 0;if(t===8)return 150;let s=0;return t!==i&&(s+=10,t===0&&i===1&&(s+=1)),s+=Cae(t),s+=Cae(i),s}translateOffset(e,t="right"){const i=zI(this.firstElementOffsetByLineIdx,r=>r<=e),s=e-this.firstElementOffsetByLineIdx[i];return new Y(this.range.startLineNumber+i,1+this.lineStartOffsets[i]+s+(s===0&&t==="left"?0:this.trimmedWsLengthsByLineIdx[i]))}translateRange(e){const t=this.translateOffset(e.start,"right"),i=this.translateOffset(e.endExclusive,"left");return i.isBefore(t)?M.fromPositions(i,i):M.fromPositions(t,i)}findWordContaining(e){if(e<0||e>=this.elements.length||!s8(this.elements[e]))return;let t=e;for(;t>0&&s8(this.elements[t-1]);)t--;let i=e;for(;i<this.elements.length&&s8(this.elements[i]);)i++;return new At(t,i)}countLinesIn(e){return this.translateOffset(e.endExclusive).lineNumber-this.translateOffset(e.start).lineNumber}isStronglyEqual(e,t){return this.elements[e]===this.elements[t]}extendToFullLines(e){const t=RS(this.firstElementOffsetByLineIdx,s=>s<=e.start)??0,i=MYe(this.firstElementOffsetByLineIdx,s=>e.endExclusive<=s)??this.elements.length;return new At(t,i)}}function s8(n){return n>=97&&n<=122||n>=65&&n<=90||n>=48&&n<=57}const ZYe={0:0,1:0,2:0,3:10,4:2,5:30,6:3,7:10,8:10};function Cae(n){return ZYe[n]}function yae(n){return n===10?8:n===13?7:tU(n)?6:n>=97&&n<=122?0:n>=65&&n<=90?1:n>=48&&n<=57?2:n===-1?3:n===44||n===59?5:4}function XYe(n,e,t,i,s,r){let{moves:o,excludedChanges:a}=JYe(n,e,t,r);if(!r.isValid())return[];const l=n.filter(d=>!a.has(d)),c=eZe(l,i,s,e,t,r);return wV(o,c),o=tZe(o),o=o.filter(d=>{const u=d.original.toOffsetRange().slice(e).map(f=>f.trim());return u.join(`
`).length>=15&&QYe(u,f=>f.length>=2)>=2}),o=iZe(n,o),o}function QYe(n,e){let t=0;for(const i of n)e(i)&&t++;return t}function JYe(n,e,t,i){const s=[],r=n.filter(l=>l.modified.isEmpty&&l.original.length>=3).map(l=>new LP(l.original,e,l)),o=new Set(n.filter(l=>l.original.isEmpty&&l.modified.length>=3).map(l=>new LP(l.modified,t,l))),a=new Set;for(const l of r){let c=-1,d;for(const u of o){const h=l.computeSimilarity(u);h>c&&(c=h,d=u)}if(c>.9&&d&&(o.delete(d),s.push(new so(l.range,d.range)),a.add(l.source),a.add(d.source)),!i.isValid())return{moves:s,excludedChanges:a}}return{moves:s,excludedChanges:a}}function eZe(n,e,t,i,s,r){const o=[],a=new CX;for(const h of n)for(let f=h.original.startLineNumber;f<h.original.endLineNumberExclusive-2;f++){const g=`${e[f-1]}:${e[f+1-1]}:${e[f+2-1]}`;a.add(g,{range:new wt(f,f+3)})}const l=[];n.sort(No(h=>h.modified.startLineNumber,xd));for(const h of n){let f=[];for(let g=h.modified.startLineNumber;g<h.modified.endLineNumberExclusive-2;g++){const p=`${t[g-1]}:${t[g+1-1]}:${t[g+2-1]}`,_=new wt(g,g+3),w=[];a.forEach(p,({range:b})=>{for(const S of f)if(S.originalLineRange.endLineNumberExclusive+1===b.endLineNumberExclusive&&S.modifiedLineRange.endLineNumberExclusive+1===_.endLineNumberExclusive){S.originalLineRange=new wt(S.originalLineRange.startLineNumber,b.endLineNumberExclusive),S.modifiedLineRange=new wt(S.modifiedLineRange.startLineNumber,_.endLineNumberExclusive),w.push(S);return}const y={modifiedLineRange:_,originalLineRange:b};l.push(y),w.push(y)}),f=w}if(!r.isValid())return[]}l.sort(Mwe(No(h=>h.modifiedLineRange.length,xd)));const c=new wc,d=new wc;for(const h of l){const f=h.modifiedLineRange.startLineNumber-h.originalLineRange.startLineNumber,g=c.subtractFrom(h.modifiedLineRange),p=d.subtractFrom(h.originalLineRange).getWithDelta(f),_=g.getIntersection(p);for(const w of _.ranges){if(w.length<3)continue;const b=w,y=w.delta(-f);o.push(new so(y,b)),c.addRange(b),d.addRange(y)}}o.sort(No(h=>h.original.startLineNumber,xd));const u=new xP(n);for(let h=0;h<o.length;h++){const f=o[h],g=u.findLastMonotonous(E=>E.original.startLineNumber<=f.original.startLineNumber),p=RS(n,E=>E.modified.startLineNumber<=f.modified.startLineNumber),_=Math.max(f.original.startLineNumber-g.original.startLineNumber,f.modified.startLineNumber-p.modified.startLineNumber),w=u.findLastMonotonous(E=>E.original.startLineNumber<f.original.endLineNumberExclusive),b=RS(n,E=>E.modified.startLineNumber<f.modified.endLineNumberExclusive),y=Math.max(w.original.endLineNumberExclusive-f.original.endLineNumberExclusive,b.modified.endLineNumberExclusive-f.modified.endLineNumberExclusive);let S;for(S=0;S<_;S++){const E=f.original.startLineNumber-S-1,D=f.modified.startLineNumber-S-1;if(E>i.length||D>s.length||c.contains(D)||d.contains(E)||!Sae(i[E-1],s[D-1],r))break}S>0&&(d.addRange(new wt(f.original.startLineNumber-S,f.original.startLineNumber)),c.addRange(new wt(f.modified.startLineNumber-S,f.modified.startLineNumber)));let x;for(x=0;x<y;x++){const E=f.original.endLineNumberExclusive+x,D=f.modified.endLineNumberExclusive+x;if(E>i.length||D>s.length||c.contains(D)||d.contains(E)||!Sae(i[E-1],s[D-1],r))break}x>0&&(d.addRange(new wt(f.original.endLineNumberExclusive,f.original.endLineNumberExclusive+x)),c.addRange(new wt(f.modified.endLineNumberExclusive,f.modified.endLineNumberExclusive+x))),(S>0||x>0)&&(o[h]=new so(new wt(f.original.startLineNumber-S,f.original.endLineNumberExclusive+x),new wt(f.modified.startLineNumber-S,f.modified.endLineNumberExclusive+x)))}return o}function Sae(n,e,t){if(n.trim()===e.trim())return!0;if(n.length>300&&e.length>300)return!1;const s=new wCe().compute(new kP([n],new M(1,1,1,n.length),!1),new kP([e],new M(1,1,1,e.length),!1),t);let r=0;const o=Ls.invert(s.diffs,n.length);for(const d of o)d.seq1Range.forEach(u=>{tU(n.charCodeAt(u))||r++});function a(d){let u=0;for(let h=0;h<n.length;h++)tU(d.charCodeAt(h))||u++;return u}const l=a(n.length>e.length?n:e);return r/l>.6&&l>10}function tZe(n){if(n.length===0)return n;n.sort(No(t=>t.original.startLineNumber,xd));const e=[n[0]];for(let t=1;t<n.length;t++){const i=e[e.length-1],s=n[t],r=s.original.startLineNumber-i.original.endLineNumberExclusive,o=s.modified.startLineNumber-i.modified.endLineNumberExclusive;if(r>=0&&o>=0&&r+o<=2){e[e.length-1]=i.join(s);continue}e.push(s)}return e}function iZe(n,e){const t=new xP(n);return e=e.filter(i=>{const s=t.findLastMonotonous(a=>a.original.startLineNumber<i.original.endLineNumberExclusive)||new so(new wt(1,1),new wt(1,1)),r=RS(n,a=>a.modified.startLineNumber<i.modified.endLineNumberExclusive);return s!==r}),e}function iU(n,e,t){let i=t;return i=xae(n,e,i),i=xae(n,e,i),i=nZe(n,e,i),i}function xae(n,e,t){if(t.length===0)return t;const i=[];i.push(t[0]);for(let r=1;r<t.length;r++){const o=i[i.length-1];let a=t[r];if(a.seq1Range.isEmpty||a.seq2Range.isEmpty){const l=a.seq1Range.start-o.seq1Range.endExclusive;let c;for(c=1;c<=l&&!(n.getElement(a.seq1Range.start-c)!==n.getElement(a.seq1Range.endExclusive-c)||e.getElement(a.seq2Range.start-c)!==e.getElement(a.seq2Range.endExclusive-c));c++);if(c--,c===l){i[i.length-1]=new Ls(new At(o.seq1Range.start,a.seq1Range.endExclusive-l),new At(o.seq2Range.start,a.seq2Range.endExclusive-l));continue}a=a.delta(-c)}i.push(a)}const s=[];for(let r=0;r<i.length-1;r++){const o=i[r+1];let a=i[r];if(a.seq1Range.isEmpty||a.seq2Range.isEmpty){const l=o.seq1Range.start-a.seq1Range.endExclusive;let c;for(c=0;c<l&&!(!n.isStronglyEqual(a.seq1Range.start+c,a.seq1Range.endExclusive+c)||!e.isStronglyEqual(a.seq2Range.start+c,a.seq2Range.endExclusive+c));c++);if(c===l){i[r+1]=new Ls(new At(a.seq1Range.start+l,o.seq1Range.endExclusive),new At(a.seq2Range.start+l,o.seq2Range.endExclusive));continue}c>0&&(a=a.delta(c))}s.push(a)}return i.length>0&&s.push(i[i.length-1]),s}function nZe(n,e,t){if(!n.getBoundaryScore||!e.getBoundaryScore)return t;for(let i=0;i<t.length;i++){const s=i>0?t[i-1]:void 0,r=t[i],o=i+1<t.length?t[i+1]:void 0,a=new At(s?s.seq1Range.endExclusive+1:0,o?o.seq1Range.start-1:n.length),l=new At(s?s.seq2Range.endExclusive+1:0,o?o.seq2Range.start-1:e.length);r.seq1Range.isEmpty?t[i]=Lae(r,n,e,a,l):r.seq2Range.isEmpty&&(t[i]=Lae(r.swap(),e,n,l,a).swap())}return t}function Lae(n,e,t,i,s){let o=1;for(;n.seq1Range.start-o>=i.start&&n.seq2Range.start-o>=s.start&&t.isStronglyEqual(n.seq2Range.start-o,n.seq2Range.endExclusive-o)&&o<100;)o++;o--;let a=0;for(;n.seq1Range.start+a<i.endExclusive&&n.seq2Range.endExclusive+a<s.endExclusive&&t.isStronglyEqual(n.seq2Range.start+a,n.seq2Range.endExclusive+a)&&a<100;)a++;if(o===0&&a===0)return n;let l=0,c=-1;for(let d=-o;d<=a;d++){const u=n.seq2Range.start+d,h=n.seq2Range.endExclusive+d,f=n.seq1Range.start+d,g=e.getBoundaryScore(f)+t.getBoundaryScore(u)+t.getBoundaryScore(h);g>c&&(c=g,l=d)}return n.delta(l)}function sZe(n,e,t){const i=[];for(const s of t){const r=i[i.length-1];if(!r){i.push(s);continue}s.seq1Range.start-r.seq1Range.endExclusive<=2||s.seq2Range.start-r.seq2Range.endExclusive<=2?i[i.length-1]=new Ls(r.seq1Range.join(s.seq1Range),r.seq2Range.join(s.seq2Range)):i.push(s)}return i}function rZe(n,e,t){const i=Ls.invert(t,n.length),s=[];let r=new bg(0,0);function o(l,c){if(l.offset1<r.offset1||l.offset2<r.offset2)return;const d=n.findWordContaining(l.offset1),u=e.findWordContaining(l.offset2);if(!d||!u)return;let h=new Ls(d,u);const f=h.intersect(c);let g=f.seq1Range.length,p=f.seq2Range.length;for(;i.length>0;){const _=i[0];if(!(_.seq1Range.intersects(h.seq1Range)||_.seq2Range.intersects(h.seq2Range)))break;const b=n.findWordContaining(_.seq1Range.start),y=e.findWordContaining(_.seq2Range.start),S=new Ls(b,y),x=S.intersect(_);if(g+=x.seq1Range.length,p+=x.seq2Range.length,h=h.join(S),h.seq1Range.endExclusive>=_.seq1Range.endExclusive)i.shift();else break}g+p<(h.seq1Range.length+h.seq2Range.length)*2/3&&s.push(h),r=h.getEndExclusives()}for(;i.length>0;){const l=i.shift();l.seq1Range.isEmpty||(o(l.getStarts(),l),o(l.getEndExclusives().delta(-1),l))}return oZe(t,s)}function oZe(n,e){const t=[];for(;n.length>0||e.length>0;){const i=n[0],s=e[0];let r;i&&(!s||i.seq1Range.start<s.seq1Range.start)?r=n.shift():r=e.shift(),t.length>0&&t[t.length-1].seq1Range.endExclusive>=r.seq1Range.start?t[t.length-1]=t[t.length-1].join(r):t.push(r)}return t}function aZe(n,e,t){let i=t;if(i.length===0)return i;let s=0,r;do{r=!1;const o=[i[0]];for(let a=1;a<i.length;a++){let d=function(h,f){const g=new At(c.seq1Range.endExclusive,l.seq1Range.start);return n.getText(g).replace(/\s/g,"").length<=4&&(h.seq1Range.length+h.seq2Range.length>5||f.seq1Range.length+f.seq2Range.length>5)};const l=i[a],c=o[o.length-1];d(c,l)?(r=!0,o[o.length-1]=o[o.length-1].join(l)):o.push(l)}i=o}while(s++<10&&r);return i}function lZe(n,e,t){let i=t;if(i.length===0)return i;let s=0,r;do{r=!1;const a=[i[0]];for(let l=1;l<i.length;l++){let u=function(f,g){const p=new At(d.seq1Range.endExclusive,c.seq1Range.start);if(n.countLinesIn(p)>5||p.length>500)return!1;const w=n.getText(p).trim();if(w.length>20||w.split(/\r\n|\r|\n/).length>1)return!1;const b=n.countLinesIn(f.seq1Range),y=f.seq1Range.length,S=e.countLinesIn(f.seq2Range),x=f.seq2Range.length,E=n.countLinesIn(g.seq1Range),D=g.seq1Range.length,N=e.countLinesIn(g.seq2Range),I=g.seq2Range.length,H=2*40+50;function z(G){return Math.min(G,H)}return Math.pow(Math.pow(z(b*40+y),1.5)+Math.pow(z(S*40+x),1.5),1.5)+Math.pow(Math.pow(z(E*40+D),1.5)+Math.pow(z(N*40+I),1.5),1.5)>(H**1.5)**1.5*1.3};const c=i[l],d=a[a.length-1];u(d,c)?(r=!0,a[a.length-1]=a[a.length-1].join(c)):a.push(c)}i=a}while(s++<10&&r);const o=[];return XUe(i,(a,l,c)=>{let d=l;function u(w){return w.length>0&&w.trim().length<=3&&l.seq1Range.length+l.seq2Range.length>100}const h=n.extendToFullLines(l.seq1Range),f=n.getText(new At(h.start,l.seq1Range.start));u(f)&&(d=d.deltaStart(-f.length));const g=n.getText(new At(l.seq1Range.endExclusive,h.endExclusive));u(g)&&(d=d.deltaEnd(g.length));const p=Ls.fromOffsetPairs(a?a.getEndExclusives():bg.zero,c?c.getStarts():bg.max),_=d.intersect(p);o.length>0&&_.getStarts().equals(o[o.length-1].getEndExclusives())?o[o.length-1]=o[o.length-1].join(_):o.push(_)}),o}class kae{constructor(e,t){this.trimmedHash=e,this.lines=t}getElement(e){return this.trimmedHash[e]}get length(){return this.trimmedHash.length}getBoundaryScore(e){const t=e===0?0:Eae(this.lines[e-1]),i=e===this.lines.length?0:Eae(this.lines[e]);return 1e3-(t+i)}getText(e){return this.lines.slice(e.start,e.endExclusive).join(`
`)}isStronglyEqual(e,t){return this.lines[e]===this.lines[t]}}function Eae(n){let e=0;for(;e<n.length&&(n.charCodeAt(e)===32||n.charCodeAt(e)===9);)e++;return e}class CCe{constructor(){this.dynamicProgrammingDiffing=new qYe,this.myersDiffingAlgorithm=new wCe}computeDiff(e,t,i){if(e.length<=1&&dn(e,t,(x,E)=>x===E))return new S2([],[],!1);if(e.length===1&&e[0].length===0||t.length===1&&t[0].length===0)return new S2([new zl(new wt(1,e.length+1),new wt(1,t.length+1),[new xl(new M(1,1,e.length,e[e.length-1].length+1),new M(1,1,t.length,t[t.length-1].length+1))])],[],!1);const s=i.maxComputationTimeMs===0?$I.instance:new KYe(i.maxComputationTimeMs),r=!i.ignoreTrimWhitespace,o=new Map;function a(x){let E=o.get(x);return E===void 0&&(E=o.size,o.set(x,E)),E}const l=e.map(x=>a(x.trim())),c=t.map(x=>a(x.trim())),d=new kae(l,e),u=new kae(c,t),h=d.length+u.length<1700?this.dynamicProgrammingDiffing.compute(d,u,s,(x,E)=>e[x]===t[E]?t[E].length===0?.1:1+Math.log(1+t[E].length):.99):this.myersDiffingAlgorithm.compute(d,u,s);let f=h.diffs,g=h.hitTimeout;f=iU(d,u,f),f=aZe(d,u,f);const p=[],_=x=>{if(r)for(let E=0;E<x;E++){const D=w+E,N=b+E;if(e[D]!==t[N]){const I=this.refineDiff(e,t,new Ls(new At(D,D+1),new At(N,N+1)),s,r);for(const H of I.mappings)p.push(H);I.hitTimeout&&(g=!0)}}};let w=0,b=0;for(const x of f){h0(()=>x.seq1Range.start-w===x.seq2Range.start-b);const E=x.seq1Range.start-w;_(E),w=x.seq1Range.endExclusive,b=x.seq2Range.endExclusive;const D=this.refineDiff(e,t,x,s,r);D.hitTimeout&&(g=!0);for(const N of D.mappings)p.push(N)}_(e.length-w);const y=Iae(p,e,t);let S=[];return i.computeMoves&&(S=this.computeMoves(y,e,t,l,c,s,r)),h0(()=>{function x(D,N){if(D.lineNumber<1||D.lineNumber>N.length)return!1;const I=N[D.lineNumber-1];return!(D.column<1||D.column>I.length+1)}function E(D,N){return!(D.startLineNumber<1||D.startLineNumber>N.length+1||D.endLineNumberExclusive<1||D.endLineNumberExclusive>N.length+1)}for(const D of y){if(!D.innerChanges)return!1;for(const N of D.innerChanges)if(!(x(N.modifiedRange.getStartPosition(),t)&&x(N.modifiedRange.getEndPosition(),t)&&x(N.originalRange.getStartPosition(),e)&&x(N.originalRange.getEndPosition(),e)))return!1;if(!E(D.modified,t)||!E(D.original,e))return!1}return!0}),new S2(y,S,g)}computeMoves(e,t,i,s,r,o,a){return XYe(e,t,i,s,r,o).map(d=>{const u=this.refineDiff(t,i,new Ls(d.original.toOffsetRange(),d.modified.toOffsetRange()),o,a),h=Iae(u.mappings,t,i,!0);return new _Ce(d,h)})}refineDiff(e,t,i,s,r){const a=dZe(i).toRangeMapping2(e,t),l=new kP(e,a.originalRange,r),c=new kP(t,a.modifiedRange,r),d=l.length+c.length<500?this.dynamicProgrammingDiffing.compute(l,c,s):this.myersDiffingAlgorithm.compute(l,c,s);let u=d.diffs;return u=iU(l,c,u),u=rZe(l,c,u),u=sZe(l,c,u),u=lZe(l,c,u),{mappings:u.map(f=>new xl(l.translateRange(f.seq1Range),c.translateRange(f.seq2Range))),hitTimeout:d.hitTimeout}}}function Iae(n,e,t,i=!1){const s=[];for(const r of VZ(n.map(o=>cZe(o,e,t)),(o,a)=>o.original.overlapOrTouch(a.original)||o.modified.overlapOrTouch(a.modified))){const o=r[0],a=r[r.length-1];s.push(new zl(o.original.join(a.original),o.modified.join(a.modified),r.map(l=>l.innerChanges[0])))}return h0(()=>!i&&s.length>0&&(s[0].modified.startLineNumber!==s[0].original.startLineNumber||t.length-s[s.length-1].modified.endLineNumberExclusive!==e.length-s[s.length-1].original.endLineNumberExclusive)?!1:vX(s,(r,o)=>o.original.startLineNumber-r.original.endLineNumberExclusive===o.modified.startLineNumber-r.modified.endLineNumberExclusive&&r.original.endLineNumberExclusive<o.original.startLineNumber&&r.modified.endLineNumberExclusive<o.modified.startLineNumber)),s}function cZe(n,e,t){let i=0,s=0;n.modifiedRange.endColumn===1&&n.originalRange.endColumn===1&&n.originalRange.startLineNumber+i<=n.originalRange.endLineNumber&&n.modifiedRange.startLineNumber+i<=n.modifiedRange.endLineNumber&&(s=-1),n.modifiedRange.startColumn-1>=t[n.modifiedRange.startLineNumber-1].length&&n.originalRange.startColumn-1>=e[n.originalRange.startLineNumber-1].length&&n.originalRange.startLineNumber<=n.originalRange.endLineNumber+s&&n.modifiedRange.startLineNumber<=n.modifiedRange.endLineNumber+s&&(i=1);const r=new wt(n.originalRange.startLineNumber+i,n.originalRange.endLineNumber+1+s),o=new wt(n.modifiedRange.startLineNumber+i,n.modifiedRange.endLineNumber+1+s);return new zl(r,o,[n])}function dZe(n){return new so(new wt(n.seq1Range.start+1,n.seq1Range.endExclusive+1),new wt(n.seq2Range.start+1,n.seq2Range.endExclusive+1))}const Dae={getLegacy:()=>new zYe,getDefault:()=>new CCe};function Gm(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}class Jt{constructor(e,t,i,s=1){this._rgbaBrand=void 0,this.r=Math.min(255,Math.max(0,e))|0,this.g=Math.min(255,Math.max(0,t))|0,this.b=Math.min(255,Math.max(0,i))|0,this.a=Gm(Math.max(Math.min(1,s),0),3)}static equals(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a}}class hd{constructor(e,t,i,s){this._hslaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=Gm(Math.max(Math.min(1,t),0),3),this.l=Gm(Math.max(Math.min(1,i),0),3),this.a=Gm(Math.max(Math.min(1,s),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.l===t.l&&e.a===t.a}static fromRGBA(e){const t=e.r/255,i=e.g/255,s=e.b/255,r=e.a,o=Math.max(t,i,s),a=Math.min(t,i,s);let l=0,c=0;const d=(a+o)/2,u=o-a;if(u>0){switch(c=Math.min(d<=.5?u/(2*d):u/(2-2*d),1),o){case t:l=(i-s)/u+(i<s?6:0);break;case i:l=(s-t)/u+2;break;case s:l=(t-i)/u+4;break}l*=60,l=Math.round(l)}return new hd(l,c,d,r)}static _hue2rgb(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+(t-e)*6*i:i<1/2?t:i<2/3?e+(t-e)*(2/3-i)*6:e}static toRGBA(e){const t=e.h/360,{s:i,l:s,a:r}=e;let o,a,l;if(i===0)o=a=l=s;else{const c=s<.5?s*(1+i):s+i-s*i,d=2*s-c;o=hd._hue2rgb(d,c,t+1/3),a=hd._hue2rgb(d,c,t),l=hd._hue2rgb(d,c,t-1/3)}return new Jt(Math.round(o*255),Math.round(a*255),Math.round(l*255),r)}}class zh{constructor(e,t,i,s){this._hsvaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=Gm(Math.max(Math.min(1,t),0),3),this.v=Gm(Math.max(Math.min(1,i),0),3),this.a=Gm(Math.max(Math.min(1,s),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.v===t.v&&e.a===t.a}static fromRGBA(e){const t=e.r/255,i=e.g/255,s=e.b/255,r=Math.max(t,i,s),o=Math.min(t,i,s),a=r-o,l=r===0?0:a/r;let c;return a===0?c=0:r===t?c=((i-s)/a%6+6)%6:r===i?c=(s-t)/a+2:c=(t-i)/a+4,new zh(Math.round(c*60),l,r,e.a)}static toRGBA(e){const{h:t,s:i,v:s,a:r}=e,o=s*i,a=o*(1-Math.abs(t/60%2-1)),l=s-o;let[c,d,u]=[0,0,0];return t<60?(c=o,d=a):t<120?(c=a,d=o):t<180?(d=o,u=a):t<240?(d=a,u=o):t<300?(c=a,u=o):t<=360&&(c=o,u=a),c=Math.round((c+l)*255),d=Math.round((d+l)*255),u=Math.round((u+l)*255),new Jt(c,d,u,r)}}const Pn=class Pn{static fromHex(e){return Pn.Format.CSS.parseHex(e)||Pn.red}static equals(e,t){return!e&&!t?!0:!e||!t?!1:e.equals(t)}get hsla(){return this._hsla?this._hsla:hd.fromRGBA(this.rgba)}get hsva(){return this._hsva?this._hsva:zh.fromRGBA(this.rgba)}constructor(e){if(e)if(e instanceof Jt)this.rgba=e;else if(e instanceof hd)this._hsla=e,this.rgba=hd.toRGBA(e);else if(e instanceof zh)this._hsva=e,this.rgba=zh.toRGBA(e);else throw new Error("Invalid color ctor argument");else throw new Error("Color needs a value")}equals(e){return!!e&&Jt.equals(this.rgba,e.rgba)&&hd.equals(this.hsla,e.hsla)&&zh.equals(this.hsva,e.hsva)}getRelativeLuminance(){const e=Pn._relativeLuminanceForComponent(this.rgba.r),t=Pn._relativeLuminanceForComponent(this.rgba.g),i=Pn._relativeLuminanceForComponent(this.rgba.b),s=.2126*e+.7152*t+.0722*i;return Gm(s,4)}static _relativeLuminanceForComponent(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}isLighter(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3>=128}isLighterThan(e){const t=this.getRelativeLuminance(),i=e.getRelativeLuminance();return t>i}isDarkerThan(e){const t=this.getRelativeLuminance(),i=e.getRelativeLuminance();return t<i}lighten(e){return new Pn(new hd(this.hsla.h,this.hsla.s,this.hsla.l+this.hsla.l*e,this.hsla.a))}darken(e){return new Pn(new hd(this.hsla.h,this.hsla.s,this.hsla.l-this.hsla.l*e,this.hsla.a))}transparent(e){const{r:t,g:i,b:s,a:r}=this.rgba;return new Pn(new Jt(t,i,s,r*e))}isTransparent(){return this.rgba.a===0}isOpaque(){return this.rgba.a===1}opposite(){return new Pn(new Jt(255-this.rgba.r,255-this.rgba.g,255-this.rgba.b,this.rgba.a))}makeOpaque(e){if(this.isOpaque()||e.rgba.a!==1)return this;const{r:t,g:i,b:s,a:r}=this.rgba;return new Pn(new Jt(e.rgba.r-r*(e.rgba.r-t),e.rgba.g-r*(e.rgba.g-i),e.rgba.b-r*(e.rgba.b-s),1))}toString(){return this._toString||(this._toString=Pn.Format.CSS.format(this)),this._toString}static getLighterColor(e,t,i){if(e.isLighterThan(t))return e;i=i||.5;const s=e.getRelativeLuminance(),r=t.getRelativeLuminance();return i=i*(r-s)/r,e.lighten(i)}static getDarkerColor(e,t,i){if(e.isDarkerThan(t))return e;i=i||.5;const s=e.getRelativeLuminance(),r=t.getRelativeLuminance();return i=i*(s-r)/s,e.darken(i)}};Pn.white=new Pn(new Jt(255,255,255,1)),Pn.black=new Pn(new Jt(0,0,0,1)),Pn.red=new Pn(new Jt(255,0,0,1)),Pn.blue=new Pn(new Jt(0,0,255,1)),Pn.green=new Pn(new Jt(0,255,0,1)),Pn.cyan=new Pn(new Jt(0,255,255,1)),Pn.lightgrey=new Pn(new Jt(211,211,211,1)),Pn.transparent=new Pn(new Jt(0,0,0,0));let ge=Pn;(function(n){(function(e){(function(t){function i(f){return f.rgba.a===1?`rgb(${f.rgba.r}, ${f.rgba.g}, ${f.rgba.b})`:n.Format.CSS.formatRGBA(f)}t.formatRGB=i;function s(f){return`rgba(${f.rgba.r}, ${f.rgba.g}, ${f.rgba.b}, ${+f.rgba.a.toFixed(2)})`}t.formatRGBA=s;function r(f){return f.hsla.a===1?`hsl(${f.hsla.h}, ${(f.hsla.s*100).toFixed(2)}%, ${(f.hsla.l*100).toFixed(2)}%)`:n.Format.CSS.formatHSLA(f)}t.formatHSL=r;function o(f){return`hsla(${f.hsla.h}, ${(f.hsla.s*100).toFixed(2)}%, ${(f.hsla.l*100).toFixed(2)}%, ${f.hsla.a.toFixed(2)})`}t.formatHSLA=o;function a(f){const g=f.toString(16);return g.length!==2?"0"+g:g}function l(f){return`#${a(f.rgba.r)}${a(f.rgba.g)}${a(f.rgba.b)}`}t.formatHex=l;function c(f,g=!1){return g&&f.rgba.a===1?n.Format.CSS.formatHex(f):`#${a(f.rgba.r)}${a(f.rgba.g)}${a(f.rgba.b)}${a(Math.round(f.rgba.a*255))}`}t.formatHexA=c;function d(f){return f.isOpaque()?n.Format.CSS.formatHex(f):n.Format.CSS.formatRGBA(f)}t.format=d;function u(f){const g=f.length;if(g===0||f.charCodeAt(0)!==35)return null;if(g===7){const p=16*h(f.charCodeAt(1))+h(f.charCodeAt(2)),_=16*h(f.charCodeAt(3))+h(f.charCodeAt(4)),w=16*h(f.charCodeAt(5))+h(f.charCodeAt(6));return new n(new Jt(p,_,w,1))}if(g===9){const p=16*h(f.charCodeAt(1))+h(f.charCodeAt(2)),_=16*h(f.charCodeAt(3))+h(f.charCodeAt(4)),w=16*h(f.charCodeAt(5))+h(f.charCodeAt(6)),b=16*h(f.charCodeAt(7))+h(f.charCodeAt(8));return new n(new Jt(p,_,w,b/255))}if(g===4){const p=h(f.charCodeAt(1)),_=h(f.charCodeAt(2)),w=h(f.charCodeAt(3));return new n(new Jt(16*p+p,16*_+_,16*w+w))}if(g===5){const p=h(f.charCodeAt(1)),_=h(f.charCodeAt(2)),w=h(f.charCodeAt(3)),b=h(f.charCodeAt(4));return new n(new Jt(16*p+p,16*_+_,16*w+w,(16*b+b)/255))}return null}t.parseHex=u;function h(f){switch(f){case 48:return 0;case 49:return 1;case 50:return 2;case 51:return 3;case 52:return 4;case 53:return 5;case 54:return 6;case 55:return 7;case 56:return 8;case 57:return 9;case 97:return 10;case 65:return 10;case 98:return 11;case 66:return 11;case 99:return 12;case 67:return 12;case 100:return 13;case 68:return 13;case 101:return 14;case 69:return 14;case 102:return 15;case 70:return 15}return 0}})(e.CSS||(e.CSS={}))})(n.Format||(n.Format={}))})(ge||(ge={}));function yCe(n){const e=[];for(const t of n){const i=Number(t);(i||i===0&&t.replace(/\s/g,"")!=="")&&e.push(i)}return e}function EX(n,e,t,i){return{red:n/255,blue:t/255,green:e/255,alpha:i}}function OL(n,e){const t=e.index,i=e[0].length;if(!t)return;const s=n.positionAt(t);return{startLineNumber:s.lineNumber,startColumn:s.column,endLineNumber:s.lineNumber,endColumn:s.column+i}}function uZe(n,e){if(!n)return;const t=ge.Format.CSS.parseHex(e);if(t)return{range:n,color:EX(t.rgba.r,t.rgba.g,t.rgba.b,t.rgba.a)}}function Nae(n,e,t){if(!n||e.length!==1)return;const s=e[0].values(),r=yCe(s);return{range:n,color:EX(r[0],r[1],r[2],t?r[3]:1)}}function Tae(n,e,t){if(!n||e.length!==1)return;const s=e[0].values(),r=yCe(s),o=new ge(new hd(r[0],r[1]/100,r[2]/100,t?r[3]:1));return{range:n,color:EX(o.rgba.r,o.rgba.g,o.rgba.b,o.rgba.a)}}function FL(n,e){return typeof n=="string"?[...n.matchAll(e)]:n.findMatches(e)}function hZe(n){const e=[],i=FL(n,/\b(rgb|rgba|hsl|hsla)(\([0-9\s,.\%]*\))|(#)([A-Fa-f0-9]{3})\b|(#)([A-Fa-f0-9]{4})\b|(#)([A-Fa-f0-9]{6})\b|(#)([A-Fa-f0-9]{8})\b/gm);if(i.length>0)for(const s of i){const r=s.filter(c=>c!==void 0),o=r[1],a=r[2];if(!a)continue;let l;if(o==="rgb"){const c=/^\(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*\)$/gm;l=Nae(OL(n,s),FL(a,c),!1)}else if(o==="rgba"){const c=/^\(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(0[.][0-9]+|[.][0-9]+|[01][.]|[01])\s*\)$/gm;l=Nae(OL(n,s),FL(a,c),!0)}else if(o==="hsl"){const c=/^\(\s*(36[0]|3[0-5][0-9]|[12][0-9][0-9]|[1-9]?[0-9])\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*\)$/gm;l=Tae(OL(n,s),FL(a,c),!1)}else if(o==="hsla"){const c=/^\(\s*(36[0]|3[0-5][0-9]|[12][0-9][0-9]|[1-9]?[0-9])\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(0[.][0-9]+|[.][0-9]+|[01][.]|[01])\s*\)$/gm;l=Tae(OL(n,s),FL(a,c),!0)}else o==="#"&&(l=uZe(OL(n,s),o+a));l&&e.push(l)}return e}function fZe(n){return!n||typeof n.getValue!="function"||typeof n.positionAt!="function"?[]:hZe(n)}const Rae=new RegExp("\\bMARK:\\s*(.*)$","d"),gZe=/^-+|-+$/g;function pZe(n,e){var i;let t=[];if(e.findRegionSectionHeaders&&((i=e.foldingRules)!=null&&i.markers)){const s=mZe(n,e);t=t.concat(s)}if(e.findMarkSectionHeaders){const s=_Ze(n);t=t.concat(s)}return t}function mZe(n,e){const t=[],i=n.getLineCount();for(let s=1;s<=i;s++){const r=n.getLineContent(s),o=r.match(e.foldingRules.markers.start);if(o){const a={startLineNumber:s,startColumn:o[0].length+1,endLineNumber:s,endColumn:r.length+1};if(a.endColumn>a.startColumn){const l={range:a,...SCe(r.substring(o[0].length)),shouldBeInComments:!1};(l.text||l.hasSeparatorLine)&&t.push(l)}}}return t}function _Ze(n){const e=[],t=n.getLineCount();for(let i=1;i<=t;i++){const s=n.getLineContent(i);vZe(s,i,e)}return e}function vZe(n,e,t){Rae.lastIndex=0;const i=Rae.exec(n);if(i){const s=i.indices[1][0]+1,r=i.indices[1][1]+1,o={startLineNumber:e,startColumn:s,endLineNumber:e,endColumn:r};if(o.endColumn>o.startColumn){const a={range:o,...SCe(i[1]),shouldBeInComments:!0};(a.text||a.hasSeparatorLine)&&t.push(a)}}}function SCe(n){n=n.trim();const e=n.startsWith("-");return n=n.replace(gZe,""),{text:n,hasSeparatorLine:e}}class bZe{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}insertValues(e,t){e=kC(e);const i=this.values,s=this.prefixSum,r=t.length;return r===0?!1:(this.values=new Uint32Array(i.length+r),this.values.set(i.subarray(0,e),0),this.values.set(i.subarray(e),e+r),this.values.set(t,e),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(s.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}setValue(e,t){return e=kC(e),t=kC(t),this.values[e]===t?!1:(this.values[e]=t,e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),!0)}removeValues(e,t){e=kC(e),t=kC(t);const i=this.values,s=this.prefixSum;if(e>=i.length)return!1;const r=i.length-e;return t>=r&&(t=r),t===0?!1:(this.values=new Uint32Array(i.length-t),this.values.set(i.subarray(0,e),0),this.values.set(i.subarray(e+t),e),this.prefixSum=new Uint32Array(this.values.length),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(s.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=kC(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let t=this.prefixSumValidIndex[0]+1;t===0&&(this.prefixSum[0]=this.values[0],t++),e>=this.values.length&&(e=this.values.length-1);for(let i=t;i<=e;i++)this.prefixSum[i]=this.prefixSum[i-1]+this.values[i];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let t=0,i=this.values.length-1,s=0,r=0,o=0;for(;t<=i;)if(s=t+(i-t)/2|0,r=this.prefixSum[s],o=r-this.values[s],e<o)i=s-1;else if(e>=r)t=s+1;else break;return new xCe(s,e-o)}}class wZe{constructor(e){this._values=e,this._isValid=!1,this._validEndIndex=-1,this._prefixSum=[],this._indexBySum=[]}getTotalSum(){return this._ensureValid(),this._indexBySum.length}getPrefixSum(e){return this._ensureValid(),e===0?0:this._prefixSum[e-1]}getIndexOf(e){this._ensureValid();const t=this._indexBySum[e],i=t>0?this._prefixSum[t-1]:0;return new xCe(t,e-i)}removeValues(e,t){this._values.splice(e,t),this._invalidate(e)}insertValues(e,t){this._values=T3(this._values,e,t),this._invalidate(e)}_invalidate(e){this._isValid=!1,this._validEndIndex=Math.min(this._validEndIndex,e-1)}_ensureValid(){if(!this._isValid){for(let e=this._validEndIndex+1,t=this._values.length;e<t;e++){const i=this._values[e],s=e>0?this._prefixSum[e-1]:0;this._prefixSum[e]=s+i;for(let r=0;r<i;r++)this._indexBySum[s+r]=e}this._prefixSum.length=this._values.length,this._indexBySum.length=this._prefixSum[this._prefixSum.length-1],this._isValid=!0,this._validEndIndex=this._values.length-1}}setValue(e,t){this._values[e]!==t&&(this._values[e]=t,this._invalidate(e))}}class xCe{constructor(e,t){this.index=e,this.remainder=t,this._prefixSumIndexOfResultBrand=void 0,this.index=e,this.remainder=t}}class CZe{constructor(e,t,i,s){this._uri=e,this._lines=t,this._eol=i,this._versionId=s,this._lineStarts=null,this._cachedTextValue=null}dispose(){this._lines.length=0}get version(){return this._versionId}getText(){return this._cachedTextValue===null&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue}onEvents(e){e.eol&&e.eol!==this._eol&&(this._eol=e.eol,this._lineStarts=null);const t=e.changes;for(const i of t)this._acceptDeleteRange(i.range),this._acceptInsertText(new Y(i.range.startLineNumber,i.range.startColumn),i.text);this._versionId=e.versionId,this._cachedTextValue=null}_ensureLineStarts(){if(!this._lineStarts){const e=this._eol.length,t=this._lines.length,i=new Uint32Array(t);for(let s=0;s<t;s++)i[s]=this._lines[s].length+e;this._lineStarts=new bZe(i)}}_setLineText(e,t){this._lines[e]=t,this._lineStarts&&this._lineStarts.setValue(e,this._lines[e].length+this._eol.length)}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.startLineNumber-1].substring(e.endColumn-1));return}this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.endLineNumber-1].substring(e.endColumn-1)),this._lines.splice(e.startLineNumber,e.endLineNumber-e.startLineNumber),this._lineStarts&&this._lineStarts.removeValues(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t){if(t.length===0)return;const i=mf(t);if(i.length===1){this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+i[0]+this._lines[e.lineNumber-1].substring(e.column-1));return}i[i.length-1]+=this._lines[e.lineNumber-1].substring(e.column-1),this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+i[0]);const s=new Uint32Array(i.length-1);for(let r=1;r<i.length;r++)this._lines.splice(e.lineNumber+r-1,0,i[r]),s[r-1]=i[r].length+this._eol.length;this._lineStarts&&this._lineStarts.insertValues(e.lineNumber,s)}}const Aae=60*1e3;class yZe extends ee{constructor(e,t,i=!1){if(super(),this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),this._proxy=e,this._modelService=t,!i){const s=new dX;s.cancelAndSet(()=>this._checkStopModelSync(),Math.round(Aae/2)),this._register(s)}}dispose(){for(const e in this._syncedModels)Ti(this._syncedModels[e]);this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),super.dispose()}ensureSyncedResources(e,t=!1){for(const i of e){const s=i.toString();this._syncedModels[s]||this._beginModelSync(i,t),this._syncedModels[s]&&(this._syncedModelsLastUsedTime[s]=new Date().getTime())}}_checkStopModelSync(){const e=new Date().getTime(),t=[];for(const i in this._syncedModelsLastUsedTime)e-this._syncedModelsLastUsedTime[i]>Aae&&t.push(i);for(const i of t)this._stopModelSync(i)}_beginModelSync(e,t){const i=this._modelService.getModel(e);if(!i||!t&&i.isTooLargeForSyncing())return;const s=e.toString();this._proxy.$acceptNewModel({url:i.uri.toString(),lines:i.getLinesContent(),EOL:i.getEOL(),versionId:i.getVersionId()});const r=new ue;r.add(i.onDidChangeContent(o=>{this._proxy.$acceptModelChanged(s.toString(),o)})),r.add(i.onWillDispose(()=>{this._stopModelSync(s)})),r.add(Ye(()=>{this._proxy.$acceptRemovedModel(s)})),this._syncedModels[s]=r}_stopModelSync(e){const t=this._syncedModels[e];delete this._syncedModels[e],delete this._syncedModelsLastUsedTime[e],Ti(t)}}class SZe{constructor(){this._models=Object.create(null)}getModel(e){return this._models[e]}getModels(){const e=[];return Object.keys(this._models).forEach(t=>e.push(this._models[t])),e}$acceptNewModel(e){this._models[e.url]=new xZe(Xe.parse(e.url),e.lines,e.EOL,e.versionId)}$acceptModelChanged(e,t){if(!this._models[e])return;this._models[e].onEvents(t)}$acceptRemovedModel(e){this._models[e]&&delete this._models[e]}}class xZe extends CZe{get uri(){return this._uri}get eol(){return this._eol}getValue(){return this.getText()}findMatches(e){const t=[];for(let i=0;i<this._lines.length;i++){const s=this._lines[i],r=this.offsetAt(new Y(i+1,1)),o=s.matchAll(e);for(const a of o)(a.index||a.index===0)&&(a.index=a.index+r),t.push(a)}return t}getLinesContent(){return this._lines.slice(0)}getLineCount(){return this._lines.length}getLineContent(e){return this._lines[e-1]}getWordAtPosition(e,t){const i=DI(e.column,GZ(t),this._lines[e.lineNumber-1],0);return i?new M(e.lineNumber,i.startColumn,e.lineNumber,i.endColumn):null}words(e){const t=this._lines,i=this._wordenize.bind(this);let s=0,r="",o=0,a=[];return{*[Symbol.iterator](){for(;;)if(o<a.length){const l=r.substring(a[o].start,a[o].end);o+=1,yield l}else if(s<t.length)r=t[s],a=i(r,e),o=0,s+=1;else break}}}getLineWords(e,t){const i=this._lines[e-1],s=this._wordenize(i,t),r=[];for(const o of s)r.push({word:i.substring(o.start,o.end),startColumn:o.start+1,endColumn:o.end+1});return r}_wordenize(e,t){const i=[];let s;for(t.lastIndex=0;(s=t.exec(e))&&s[0].length!==0;)i.push({start:s.index,end:s.index+s[0].length});return i}getValueInRange(e){if(e=this._validateRange(e),e.startLineNumber===e.endLineNumber)return this._lines[e.startLineNumber-1].substring(e.startColumn-1,e.endColumn-1);const t=this._eol,i=e.startLineNumber-1,s=e.endLineNumber-1,r=[];r.push(this._lines[i].substring(e.startColumn-1));for(let o=i+1;o<s;o++)r.push(this._lines[o]);return r.push(this._lines[s].substring(0,e.endColumn-1)),r.join(t)}offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.lineNumber-2)+(e.column-1)}positionAt(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();const t=this._lineStarts.getIndexOf(e),i=this._lines[t.index].length;return{lineNumber:1+t.index,column:1+Math.min(t.remainder,i)}}_validateRange(e){const t=this._validatePosition({lineNumber:e.startLineNumber,column:e.startColumn}),i=this._validatePosition({lineNumber:e.endLineNumber,column:e.endColumn});return t.lineNumber!==e.startLineNumber||t.column!==e.startColumn||i.lineNumber!==e.endLineNumber||i.column!==e.endColumn?{startLineNumber:t.lineNumber,startColumn:t.column,endLineNumber:i.lineNumber,endColumn:i.column}:e}_validatePosition(e){if(!Y.isIPosition(e))throw new Error("bad position");let{lineNumber:t,column:i}=e,s=!1;if(t<1)t=1,i=1,s=!0;else if(t>this._lines.length)t=this._lines.length,i=this._lines[t-1].length+1,s=!0;else{const r=this._lines[t-1].length+1;i<1?(i=1,s=!0):i>r&&(i=r,s=!0)}return s?{lineNumber:t,column:i}:e}}const m4=class m4{constructor(){this._workerTextModelSyncServer=new SZe}dispose(){}_getModel(e){return this._workerTextModelSyncServer.getModel(e)}_getModels(){return this._workerTextModelSyncServer.getModels()}$acceptNewModel(e){this._workerTextModelSyncServer.$acceptNewModel(e)}$acceptModelChanged(e,t){this._workerTextModelSyncServer.$acceptModelChanged(e,t)}$acceptRemovedModel(e){this._workerTextModelSyncServer.$acceptRemovedModel(e)}async $computeUnicodeHighlights(e,t,i){const s=this._getModel(e);return s?SX.computeUnicodeHighlights(s,t,i):{ranges:[],hasMore:!1,ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0}}async $findSectionHeaders(e,t){const i=this._getModel(e);return i?pZe(i,t):[]}async $computeDiff(e,t,i,s){const r=this._getModel(e),o=this._getModel(t);return!r||!o?null:x2.computeDiff(r,o,i,s)}static computeDiff(e,t,i,s){const r=s==="advanced"?Dae.getDefault():Dae.getLegacy(),o=e.getLinesContent(),a=t.getLinesContent(),l=r.computeDiff(o,a,i),c=l.changes.length>0?!1:this._modelsAreIdentical(e,t);function d(u){return u.map(h=>{var f;return[h.original.startLineNumber,h.original.endLineNumberExclusive,h.modified.startLineNumber,h.modified.endLineNumberExclusive,(f=h.innerChanges)==null?void 0:f.map(g=>[g.originalRange.startLineNumber,g.originalRange.startColumn,g.originalRange.endLineNumber,g.originalRange.endColumn,g.modifiedRange.startLineNumber,g.modifiedRange.startColumn,g.modifiedRange.endLineNumber,g.modifiedRange.endColumn])]})}return{identical:c,quitEarly:l.hitTimeout,changes:d(l.changes),moves:l.moves.map(u=>[u.lineRangeMapping.original.startLineNumber,u.lineRangeMapping.original.endLineNumberExclusive,u.lineRangeMapping.modified.startLineNumber,u.lineRangeMapping.modified.endLineNumberExclusive,d(u.changes)])}}static _modelsAreIdentical(e,t){const i=e.getLineCount(),s=t.getLineCount();if(i!==s)return!1;for(let r=1;r<=i;r++){const o=e.getLineContent(r),a=t.getLineContent(r);if(o!==a)return!1}return!0}async $computeMoreMinimalEdits(e,t,i){const s=this._getModel(e);if(!s)return t;const r=[];let o;t=t.slice(0).sort((l,c)=>{if(l.range&&c.range)return M.compareRangesUsingStarts(l.range,c.range);const d=l.range?0:1,u=c.range?0:1;return d-u});let a=0;for(let l=1;l<t.length;l++)M.getEndPosition(t[a].range).equals(M.getStartPosition(t[l].range))?(t[a].range=M.fromPositions(M.getStartPosition(t[a].range),M.getEndPosition(t[l].range)),t[a].text+=t[l].text):(a++,t[a]=t[l]);t.length=a+1;for(let{range:l,text:c,eol:d}of t){if(typeof d=="number"&&(o=d),M.isEmpty(l)&&!c)continue;const u=s.getValueInRange(l);if(c=c.replace(/\r\n|\n|\r/g,s.eol),u===c)continue;if(Math.max(c.length,u.length)>x2._diffLimit){r.push({range:l,text:c});continue}const h=fYe(u,c,i),f=s.offsetAt(M.lift(l).getStartPosition());for(const g of h){const p=s.positionAt(f+g.originalStart),_=s.positionAt(f+g.originalStart+g.originalLength),w={text:c.substr(g.modifiedStart,g.modifiedLength),range:{startLineNumber:p.lineNumber,startColumn:p.column,endLineNumber:_.lineNumber,endColumn:_.column}};s.getValueInRange(w.range)!==w.text&&r.push(w)}}return typeof o=="number"&&r.push({eol:o,text:"",range:{startLineNumber:0,startColumn:0,endLineNumber:0,endColumn:0}}),r}async $computeLinks(e){const t=this._getModel(e);return t?vYe(t):null}async $computeDefaultDocumentColors(e){const t=this._getModel(e);return t?fZe(t):null}async $textualSuggest(e,t,i,s){const r=new js,o=new RegExp(i,s),a=new Set;e:for(const l of e){const c=this._getModel(l);if(c){for(const d of c.words(o))if(!(d===t||!isNaN(Number(d)))&&(a.add(d),a.size>x2._suggestionsLimit))break e}}return{words:Array.from(a),duration:r.elapsed()}}async $computeWordRanges(e,t,i,s){const r=this._getModel(e);if(!r)return Object.create(null);const o=new RegExp(i,s),a=Object.create(null);for(let l=t.startLineNumber;l<t.endLineNumber;l++){const c=r.getLineWords(l,o);for(const d of c){if(!isNaN(Number(d.word)))continue;let u=a[d.word];u||(u=[],a[d.word]=u),u.push({startLineNumber:l,startColumn:d.startColumn,endLineNumber:l,endColumn:d.endColumn})}}return a}async $navigateValueSet(e,t,i,s,r){const o=this._getModel(e);if(!o)return null;const a=new RegExp(s,r);t.startColumn===t.endColumn&&(t={startLineNumber:t.startLineNumber,startColumn:t.startColumn,endLineNumber:t.endLineNumber,endColumn:t.endColumn+1});const l=o.getValueInRange(t),c=o.getWordAtPosition({lineNumber:t.startLineNumber,column:t.startColumn},a);if(!c)return null;const d=o.getValueInRange(c);return Xz.INSTANCE.navigateValueSet(t,l,c,d,i)}};m4._diffLimit=1e5,m4._suggestionsLimit=1e4;let nU=m4;class x2 extends nU{constructor(e,t){super(),this._host=e,this._foreignModuleFactory=t,this._foreignModule=null}async $ping(){return"pong"}$loadForeignModule(e,t,i){const o={host:o$e(i,(a,l)=>this._host.$fhr(a,l)),getMirrorModels:()=>this._getModels()};return this._foreignModuleFactory?(this._foreignModule=this._foreignModuleFactory(o,t),Promise.resolve(yV(this._foreignModule))):new Promise((a,l)=>{const c=d=>{this._foreignModule=d.create(o,t),a(yV(this._foreignModule))};{const d=F3.asBrowserUri(`${e}.js`).toString(!0);Qe(()=>import(`${d}`),[]).then(c).catch(l)}})}$fmr(e,t){if(!this._foreignModule||typeof this._foreignModule[e]!="function")return Promise.reject(new Error("Missing requestHandler or method: "+e));try{return Promise.resolve(this._foreignModule[e].apply(this._foreignModule,t))}catch(i){return Promise.reject(i)}}}typeof importScripts=="function"&&(globalThis.monaco=d0e());const iB=Wt("textResourceConfigurationService"),LCe=Wt("textResourcePropertiesService"),Be=Wt("ILanguageFeaturesService");var IX=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},tb=function(n,e){return function(t,i){e(t,i,n)}};const Mae=5*60*1e3;function ib(n,e){const t=n.getModel(e);return!(!t||t.isTooLargeForSyncing())}let sU=class extends ee{constructor(e,t,i,s,r,o){super(),this._languageConfigurationService=r,this._modelService=t,this._workerManager=this._register(new rU(e,this._modelService)),this._logService=s,this._register(o.linkProvider.register({language:"*",hasAccessToAllModels:!0},{provideLinks:async(a,l)=>{if(!ib(this._modelService,a.uri))return Promise.resolve({links:[]});const d=await(await this._workerWithResources([a.uri])).$computeLinks(a.uri.toString());return d&&{links:d}}})),this._register(o.completionProvider.register("*",new LZe(this._workerManager,i,this._modelService,this._languageConfigurationService)))}dispose(){super.dispose()}canComputeUnicodeHighlights(e){return ib(this._modelService,e)}async computedUnicodeHighlights(e,t,i){return(await this._workerWithResources([e])).$computeUnicodeHighlights(e.toString(),t,i)}async computeDiff(e,t,i,s){const o=await(await this._workerWithResources([e,t],!0)).$computeDiff(e.toString(),t.toString(),i,s);if(!o)return null;return{identical:o.identical,quitEarly:o.quitEarly,changes:l(o.changes),moves:o.moves.map(c=>new _Ce(new so(new wt(c[0],c[1]),new wt(c[2],c[3])),l(c[4])))};function l(c){return c.map(d=>{var u;return new zl(new wt(d[0],d[1]),new wt(d[2],d[3]),(u=d[4])==null?void 0:u.map(h=>new xl(new M(h[0],h[1],h[2],h[3]),new M(h[4],h[5],h[6],h[7]))))})}}async computeMoreMinimalEdits(e,t,i=!1){if(ao(t)){if(!ib(this._modelService,e))return Promise.resolve(t);const s=js.create(),r=this._workerWithResources([e]).then(o=>o.$computeMoreMinimalEdits(e.toString(),t,i));return r.finally(()=>this._logService.trace("FORMAT#computeMoreMinimalEdits",e.toString(!0),s.elapsed())),Promise.race([r,Xg(1e3).then(()=>t)])}else return Promise.resolve(void 0)}canNavigateValueSet(e){return ib(this._modelService,e)}async navigateValueSet(e,t,i){const s=this._modelService.getModel(e);if(!s)return null;const r=this._languageConfigurationService.getLanguageConfiguration(s.getLanguageId()).getWordDefinition(),o=r.source,a=r.flags;return(await this._workerWithResources([e])).$navigateValueSet(e.toString(),t,i,o,a)}canComputeWordRanges(e){return ib(this._modelService,e)}async computeWordRanges(e,t){const i=this._modelService.getModel(e);if(!i)return Promise.resolve(null);const s=this._languageConfigurationService.getLanguageConfiguration(i.getLanguageId()).getWordDefinition(),r=s.source,o=s.flags;return(await this._workerWithResources([e])).$computeWordRanges(e.toString(),t,r,o)}async findSectionHeaders(e,t){return(await this._workerWithResources([e])).$findSectionHeaders(e.toString(),t)}async computeDefaultDocumentColors(e){return(await this._workerWithResources([e])).$computeDefaultDocumentColors(e.toString())}async _workerWithResources(e,t=!1){return await(await this._workerManager.withWorker()).workerWithSyncedResources(e,t)}};sU=IX([tb(1,Zi),tb(2,iB),tb(3,Cr),tb(4,vn),tb(5,Be)],sU);class LZe{constructor(e,t,i,s){this.languageConfigurationService=s,this._debugDisplayName="wordbasedCompletions",this._workerManager=e,this._configurationService=t,this._modelService=i}async provideCompletionItems(e,t){const i=this._configurationService.getValue(e.uri,t,"editor");if(i.wordBasedSuggestions==="off")return;const s=[];if(i.wordBasedSuggestions==="currentDocument")ib(this._modelService,e.uri)&&s.push(e.uri);else for(const u of this._modelService.getModels())ib(this._modelService,u.uri)&&(u===e?s.unshift(u.uri):(i.wordBasedSuggestions==="allDocuments"||u.getLanguageId()===e.getLanguageId())&&s.push(u.uri));if(s.length===0)return;const r=this.languageConfigurationService.getLanguageConfiguration(e.getLanguageId()).getWordDefinition(),o=e.getWordAtPosition(t),a=o?new M(t.lineNumber,o.startColumn,t.lineNumber,o.endColumn):M.fromPositions(t),l=a.setEndPosition(t.lineNumber,t.column),d=await(await this._workerManager.withWorker()).textualSuggest(s,o==null?void 0:o.word,r);if(d)return{duration:d.duration,suggestions:d.words.map(u=>({kind:18,label:u,insertText:u,range:{insert:l,replace:a}}))}}}let rU=class extends ee{constructor(e,t){super(),this._workerDescriptor=e,this._modelService=t,this._editorWorkerClient=null,this._lastWorkerUsedTime=new Date().getTime(),this._register(new hX).cancelAndSet(()=>this._checkStopIdleWorker(),Math.round(Mae/2),Ei),this._register(this._modelService.onModelRemoved(s=>this._checkStopEmptyWorker()))}dispose(){this._editorWorkerClient&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null),super.dispose()}_checkStopEmptyWorker(){if(!this._editorWorkerClient)return;this._modelService.getModels().length===0&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}_checkStopIdleWorker(){if(!this._editorWorkerClient)return;new Date().getTime()-this._lastWorkerUsedTime>Mae&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}withWorker(){return this._lastWorkerUsedTime=new Date().getTime(),this._editorWorkerClient||(this._editorWorkerClient=new EP(this._workerDescriptor,!1,this._modelService)),Promise.resolve(this._editorWorkerClient)}};rU=IX([tb(1,Zi)],rU);class kZe{constructor(e){this._instance=e,this.proxy=this._instance}dispose(){this._instance.dispose()}setChannel(e,t){throw new Error("Not supported")}}let EP=class extends ee{constructor(e,t,i){super(),this._workerDescriptor=e,this._disposed=!1,this._modelService=i,this._keepIdleModels=t,this._worker=null,this._modelManager=null}fhr(e,t){throw new Error("Not implemented!")}_getOrCreateWorker(){if(!this._worker)try{this._worker=this._register(NGe(this._workerDescriptor)),Qz.setChannel(this._worker,this._createEditorWorkerHost())}catch(e){jz(e),this._worker=this._createFallbackLocalWorker()}return this._worker}async _getProxy(){try{const e=this._getOrCreateWorker().proxy;return await e.$ping(),e}catch(e){return jz(e),this._worker=this._createFallbackLocalWorker(),this._worker.proxy}}_createFallbackLocalWorker(){return new kZe(new x2(this._createEditorWorkerHost(),null))}_createEditorWorkerHost(){return{$fhr:(e,t)=>this.fhr(e,t)}}_getOrCreateModelManager(e){return this._modelManager||(this._modelManager=this._register(new yZe(e,this._modelService,this._keepIdleModels))),this._modelManager}async workerWithSyncedResources(e,t=!1){if(this._disposed)return Promise.reject(fje());const i=await this._getProxy();return this._getOrCreateModelManager(i).ensureSyncedResources(e,t),i}async textualSuggest(e,t,i){const s=await this.workerWithSyncedResources(e),r=i.source,o=i.flags;return s.$textualSuggest(e.map(a=>a.toString()),t,r,o)}dispose(){super.dispose(),this._disposed=!0}};EP=IX([tb(2,Zi)],EP);var yc;(function(n){n.DARK="dark",n.LIGHT="light",n.HIGH_CONTRAST_DARK="hcDark",n.HIGH_CONTRAST_LIGHT="hcLight"})(yc||(yc={}));function Tu(n){return n===yc.HIGH_CONTRAST_DARK||n===yc.HIGH_CONTRAST_LIGHT}function AS(n){return n===yc.DARK||n===yc.HIGH_CONTRAST_DARK}const ws=Wt("themeService");function Dn(n){return{id:n}}function oU(n){switch(n){case yc.DARK:return"vs-dark";case yc.HIGH_CONTRAST_DARK:return"hc-black";case yc.HIGH_CONTRAST_LIGHT:return"hc-light";default:return"vs"}}const kCe={ThemingContribution:"base.contributions.theming"};class EZe{constructor(){this.themingParticipants=[],this.themingParticipants=[],this.onThemingParticipantAddedEmitter=new X}onColorThemeChange(e){return this.themingParticipants.push(e),this.onThemingParticipantAddedEmitter.fire(e),Ye(()=>{const t=this.themingParticipants.indexOf(e);this.themingParticipants.splice(t,1)})}getThemingParticipants(){return this.themingParticipants}}const ECe=new EZe;_n.add(kCe.ThemingContribution,ECe);function zc(n){return ECe.onColorThemeChange(n)}class IZe extends ee{constructor(e){super(),this.themeService=e,this.theme=e.getColorTheme(),this._register(this.themeService.onDidColorThemeChange(t=>this.onThemeChange(t)))}onThemeChange(e){this.theme=e,this.updateStyles()}updateStyles(){}}var DZe=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},NZe=function(n,e){return function(t,i){e(t,i,n)}};let aU=class extends ee{constructor(e){super(),this._themeService=e,this._onWillCreateCodeEditor=this._register(new X),this._onCodeEditorAdd=this._register(new X),this.onCodeEditorAdd=this._onCodeEditorAdd.event,this._onCodeEditorRemove=this._register(new X),this.onCodeEditorRemove=this._onCodeEditorRemove.event,this._onWillCreateDiffEditor=this._register(new X),this._onDiffEditorAdd=this._register(new X),this.onDiffEditorAdd=this._onDiffEditorAdd.event,this._onDiffEditorRemove=this._register(new X),this.onDiffEditorRemove=this._onDiffEditorRemove.event,this._decorationOptionProviders=new Map,this._codeEditorOpenHandlers=new xo,this._modelProperties=new Map,this._codeEditors=Object.create(null),this._diffEditors=Object.create(null),this._globalStyleSheet=null}willCreateCodeEditor(){this._onWillCreateCodeEditor.fire()}addCodeEditor(e){this._codeEditors[e.getId()]=e,this._onCodeEditorAdd.fire(e)}removeCodeEditor(e){delete this._codeEditors[e.getId()]&&this._onCodeEditorRemove.fire(e)}listCodeEditors(){return Object.keys(this._codeEditors).map(e=>this._codeEditors[e])}willCreateDiffEditor(){this._onWillCreateDiffEditor.fire()}addDiffEditor(e){this._diffEditors[e.getId()]=e,this._onDiffEditorAdd.fire(e)}listDiffEditors(){return Object.keys(this._diffEditors).map(e=>this._diffEditors[e])}getFocusedCodeEditor(){let e=null;const t=this.listCodeEditors();for(const i of t){if(i.hasTextFocus())return i;i.hasWidgetFocus()&&(e=i)}return e}removeDecorationType(e){const t=this._decorationOptionProviders.get(e);t&&(t.refCount--,t.refCount<=0&&(this._decorationOptionProviders.delete(e),t.dispose(),this.listCodeEditors().forEach(i=>i.removeDecorationsByType(e))))}setModelProperty(e,t,i){const s=e.toString();let r;this._modelProperties.has(s)?r=this._modelProperties.get(s):(r=new Map,this._modelProperties.set(s,r)),r.set(t,i)}getModelProperty(e,t){const i=e.toString();if(this._modelProperties.has(i))return this._modelProperties.get(i).get(t)}async openCodeEditor(e,t,i){for(const s of this._codeEditorOpenHandlers){const r=await s(e,t,i);if(r!==null)return r}return null}registerCodeEditorOpenHandler(e){const t=this._codeEditorOpenHandlers.unshift(e);return Ye(t)}};aU=DZe([NZe(0,ws)],aU);var TZe=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Pae=function(n,e){return function(t,i){e(t,i,n)}};let IP=class extends aU{constructor(e,t){super(t),this._register(this.onCodeEditorAdd(()=>this._checkContextKey())),this._register(this.onCodeEditorRemove(()=>this._checkContextKey())),this._editorIsOpen=e.createKey("editorIsOpen",!1),this._activeCodeEditor=null,this._register(this.registerCodeEditorOpenHandler(async(i,s,r)=>s?this.doOpenEditor(s,i):null))}_checkContextKey(){let e=!1;for(const t of this.listCodeEditors())if(!t.isSimpleWidget){e=!0;break}this._editorIsOpen.set(e)}setActiveCodeEditor(e){this._activeCodeEditor=e}getActiveCodeEditor(){return this._activeCodeEditor}doOpenEditor(e,t){if(!this.findModel(e,t.resource)){if(t.resource){const r=t.resource.scheme;if(r===mt.http||r===mt.https)return j0e(t.resource.toString()),e}return null}const s=t.options?t.options.selection:null;if(s)if(typeof s.endLineNumber=="number"&&typeof s.endColumn=="number")e.setSelection(s),e.revealRangeInCenter(s,1);else{const r={lineNumber:s.startLineNumber,column:s.startColumn};e.setPosition(r),e.revealPositionInCenter(r,1)}return e}findModel(e,t){const i=e.getModel();return i&&i.uri.toString()!==t.toString()?null:i}};IP=TZe([Pae(0,at),Pae(1,ws)],IP);jt(ri,IP,0);const tv=Wt("layoutService");var ICe=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},DCe=function(n,e){return function(t,i){e(t,i,n)}};let DP=class{get mainContainer(){var e;return((e=zZ(this._codeEditorService.listCodeEditors()))==null?void 0:e.getContainerDomNode())??Ei.document.body}get activeContainer(){const e=this._codeEditorService.getFocusedCodeEditor()??this._codeEditorService.getActiveCodeEditor();return(e==null?void 0:e.getContainerDomNode())??this.mainContainer}get mainContainerDimension(){return R_(this.mainContainer)}get activeContainerDimension(){return R_(this.activeContainer)}get containers(){return Id(this._codeEditorService.listCodeEditors().map(e=>e.getContainerDomNode()))}getContainer(){return this.activeContainer}whenContainerStylesLoaded(){}focus(){var e;(e=this._codeEditorService.getFocusedCodeEditor())==null||e.focus()}constructor(e){this._codeEditorService=e,this.onDidLayoutMainContainer=Ee.None,this.onDidLayoutActiveContainer=Ee.None,this.onDidLayoutContainer=Ee.None,this.onDidChangeActiveContainer=Ee.None,this.onDidAddContainer=Ee.None,this.mainContainerOffset={top:0,quickPickTop:0},this.activeContainerOffset={top:0,quickPickTop:0}}};DP=ICe([DCe(0,ri)],DP);let lU=class extends DP{get mainContainer(){return this._container}constructor(e,t){super(t),this._container=e}};lU=ICe([DCe(1,ri)],lU);jt(tv,DP,1);var jI;(function(n){n[n.Ignore=0]="Ignore",n[n.Info=1]="Info",n[n.Warning=2]="Warning",n[n.Error=3]="Error"})(jI||(jI={}));(function(n){const e="error",t="warning",i="warn",s="info",r="ignore";function o(l){return l?w1(e,l)?n.Error:w1(t,l)||w1(i,l)?n.Warning:w1(s,l)?n.Info:n.Ignore:n.Ignore}n.fromValue=o;function a(l){switch(l){case n.Error:return e;case n.Warning:return t;case n.Info:return s;default:return r}}n.toString=a})(jI||(jI={}));const Un=jI,WN=Wt("dialogService");var nB=Un;const jn=Wt("notificationService");class RZe{}const DX=Wt("undoRedoService");class NCe{constructor(e,t){this.resource=e,this.elements=t}}const Z1=class Z1{constructor(){this.id=Z1._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}};Z1._ID=0,Z1.None=new Z1;let cU=Z1;const X1=class X1{constructor(){this.id=X1._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}};X1._ID=0,X1.None=new X1;let nb=X1;var AZe=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Oae=function(n,e){return function(t,i){e(t,i,n)}};function VR(n){return n.scheme===mt.file?n.fsPath:n.path}let TCe=0;class zR{constructor(e,t,i,s,r,o,a){this.id=++TCe,this.type=0,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabel=t,this.strResource=i,this.resourceLabels=[this.resourceLabel],this.strResources=[this.strResource],this.groupId=s,this.groupOrder=r,this.sourceId=o,this.sourceOrder=a,this.isValid=!0}setValid(e){this.isValid=e}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.isValid?"  VALID":"INVALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class Fae{constructor(e,t){this.resourceLabel=e,this.reason=t}}class Bae{constructor(){this.elements=new Map}createMessage(){const e=[],t=[];for(const[,s]of this.elements)(s.reason===0?e:t).push(s.resourceLabel);const i=[];return e.length>0&&i.push(v({key:"externalRemoval",comment:["{0} is a list of filenames"]},"The following files have been closed and modified on disk: {0}.",e.join(", "))),t.length>0&&i.push(v({key:"noParallelUniverses",comment:["{0} is a list of filenames"]},"The following files have been modified in an incompatible way: {0}.",t.join(", "))),i.join(`
`)}get size(){return this.elements.size}has(e){return this.elements.has(e)}set(e,t){this.elements.set(e,t)}delete(e){return this.elements.delete(e)}}class MZe{constructor(e,t,i,s,r,o,a){this.id=++TCe,this.type=1,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabels=t,this.strResources=i,this.groupId=s,this.groupOrder=r,this.sourceId=o,this.sourceOrder=a,this.removedResources=null,this.invalidatedResources=null}canSplit(){return typeof this.actual.split=="function"}removeResource(e,t,i){this.removedResources||(this.removedResources=new Bae),this.removedResources.has(t)||this.removedResources.set(t,new Fae(e,i))}setValid(e,t,i){i?this.invalidatedResources&&(this.invalidatedResources.delete(t),this.invalidatedResources.size===0&&(this.invalidatedResources=null)):(this.invalidatedResources||(this.invalidatedResources=new Bae),this.invalidatedResources.has(t)||this.invalidatedResources.set(t,new Fae(e,0)))}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.invalidatedResources?"INVALID":"  VALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class RCe{constructor(e,t){this.resourceLabel=e,this.strResource=t,this._past=[],this._future=[],this.locked=!1,this.versionId=1}dispose(){for(const e of this._past)e.type===1&&e.removeResource(this.resourceLabel,this.strResource,0);for(const e of this._future)e.type===1&&e.removeResource(this.resourceLabel,this.strResource,0);this.versionId++}toString(){const e=[];e.push(`* ${this.strResource}:`);for(let t=0;t<this._past.length;t++)e.push(`   * [UNDO] ${this._past[t]}`);for(let t=this._future.length-1;t>=0;t--)e.push(`   * [REDO] ${this._future[t]}`);return e.join(`
`)}flushAllElements(){this._past=[],this._future=[],this.versionId++}_setElementValidFlag(e,t){e.type===1?e.setValid(this.resourceLabel,this.strResource,t):e.setValid(t)}setElementsValidFlag(e,t){for(const i of this._past)t(i.actual)&&this._setElementValidFlag(i,e);for(const i of this._future)t(i.actual)&&this._setElementValidFlag(i,e)}pushElement(e){for(const t of this._future)t.type===1&&t.removeResource(this.resourceLabel,this.strResource,1);this._future=[],this._past.push(e),this.versionId++}createSnapshot(e){const t=[];for(let i=0,s=this._past.length;i<s;i++)t.push(this._past[i].id);for(let i=this._future.length-1;i>=0;i--)t.push(this._future[i].id);return new NCe(e,t)}restoreSnapshot(e){const t=e.elements.length;let i=!0,s=0,r=-1;for(let a=0,l=this._past.length;a<l;a++,s++){const c=this._past[a];i&&(s>=t||c.id!==e.elements[s])&&(i=!1,r=0),!i&&c.type===1&&c.removeResource(this.resourceLabel,this.strResource,0)}let o=-1;for(let a=this._future.length-1;a>=0;a--,s++){const l=this._future[a];i&&(s>=t||l.id!==e.elements[s])&&(i=!1,o=a),!i&&l.type===1&&l.removeResource(this.resourceLabel,this.strResource,0)}r!==-1&&(this._past=this._past.slice(0,r)),o!==-1&&(this._future=this._future.slice(o+1)),this.versionId++}getElements(){const e=[],t=[];for(const i of this._past)e.push(i.actual);for(const i of this._future)t.push(i.actual);return{past:e,future:t}}getClosestPastElement(){return this._past.length===0?null:this._past[this._past.length-1]}getSecondClosestPastElement(){return this._past.length<2?null:this._past[this._past.length-2]}getClosestFutureElement(){return this._future.length===0?null:this._future[this._future.length-1]}hasPastElements(){return this._past.length>0}hasFutureElements(){return this._future.length>0}splitPastWorkspaceElement(e,t){for(let i=this._past.length-1;i>=0;i--)if(this._past[i]===e){t.has(this.strResource)?this._past[i]=t.get(this.strResource):this._past.splice(i,1);break}this.versionId++}splitFutureWorkspaceElement(e,t){for(let i=this._future.length-1;i>=0;i--)if(this._future[i]===e){t.has(this.strResource)?this._future[i]=t.get(this.strResource):this._future.splice(i,1);break}this.versionId++}moveBackward(e){this._past.pop(),this._future.push(e),this.versionId++}moveForward(e){this._future.pop(),this._past.push(e),this.versionId++}}class r8{constructor(e){this.editStacks=e,this._versionIds=[];for(let t=0,i=this.editStacks.length;t<i;t++)this._versionIds[t]=this.editStacks[t].versionId}isValid(){for(let e=0,t=this.editStacks.length;e<t;e++)if(this._versionIds[e]!==this.editStacks[e].versionId)return!1;return!0}}const ACe=new RCe("","");ACe.locked=!0;let dU=class{constructor(e,t){this._dialogService=e,this._notificationService=t,this._editStacks=new Map,this._uriComparisonKeyComputers=[]}getUriComparisonKey(e){for(const t of this._uriComparisonKeyComputers)if(t[0]===e.scheme)return t[1].getComparisonKey(e);return e.toString()}_print(e){console.log("------------------------------------"),console.log(`AFTER ${e}: `);const t=[];for(const i of this._editStacks)t.push(i[1].toString());console.log(t.join(`
`))}pushElement(e,t=cU.None,i=nb.None){if(e.type===0){const s=VR(e.resource),r=this.getUriComparisonKey(e.resource);this._pushElement(new zR(e,s,r,t.id,t.nextOrder(),i.id,i.nextOrder()))}else{const s=new Set,r=[],o=[];for(const a of e.resources){const l=VR(a),c=this.getUriComparisonKey(a);s.has(c)||(s.add(c),r.push(l),o.push(c))}r.length===1?this._pushElement(new zR(e,r[0],o[0],t.id,t.nextOrder(),i.id,i.nextOrder())):this._pushElement(new MZe(e,r,o,t.id,t.nextOrder(),i.id,i.nextOrder()))}}_pushElement(e){for(let t=0,i=e.strResources.length;t<i;t++){const s=e.resourceLabels[t],r=e.strResources[t];let o;this._editStacks.has(r)?o=this._editStacks.get(r):(o=new RCe(s,r),this._editStacks.set(r,o)),o.pushElement(e)}}getLastElement(e){const t=this.getUriComparisonKey(e);if(this._editStacks.has(t)){const i=this._editStacks.get(t);if(i.hasFutureElements())return null;const s=i.getClosestPastElement();return s?s.actual:null}return null}_splitPastWorkspaceElement(e,t){const i=e.actual.split(),s=new Map;for(const r of i){const o=VR(r.resource),a=this.getUriComparisonKey(r.resource),l=new zR(r,o,a,0,0,0,0);s.set(l.strResource,l)}for(const r of e.strResources){if(t&&t.has(r))continue;this._editStacks.get(r).splitPastWorkspaceElement(e,s)}}_splitFutureWorkspaceElement(e,t){const i=e.actual.split(),s=new Map;for(const r of i){const o=VR(r.resource),a=this.getUriComparisonKey(r.resource),l=new zR(r,o,a,0,0,0,0);s.set(l.strResource,l)}for(const r of e.strResources){if(t&&t.has(r))continue;this._editStacks.get(r).splitFutureWorkspaceElement(e,s)}}removeElements(e){const t=typeof e=="string"?e:this.getUriComparisonKey(e);this._editStacks.has(t)&&(this._editStacks.get(t).dispose(),this._editStacks.delete(t))}setElementsValidFlag(e,t,i){const s=this.getUriComparisonKey(e);this._editStacks.has(s)&&this._editStacks.get(s).setElementsValidFlag(t,i)}createSnapshot(e){const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).createSnapshot(e):new NCe(e,[])}restoreSnapshot(e){const t=this.getUriComparisonKey(e.resource);if(this._editStacks.has(t)){const i=this._editStacks.get(t);i.restoreSnapshot(e),!i.hasPastElements()&&!i.hasFutureElements()&&(i.dispose(),this._editStacks.delete(t))}}getElements(e){const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).getElements():{past:[],future:[]}}_findClosestUndoElementWithSource(e){if(!e)return[null,null];let t=null,i=null;for(const[s,r]of this._editStacks){const o=r.getClosestPastElement();o&&o.sourceId===e&&(!t||o.sourceOrder>t.sourceOrder)&&(t=o,i=s)}return[t,i]}canUndo(e){if(e instanceof nb){const[,i]=this._findClosestUndoElementWithSource(e.id);return!!i}const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).hasPastElements():!1}_onError(e,t){pt(e);for(const i of t.strResources)this.removeElements(i);this._notificationService.error(e)}_acquireLocks(e){for(const t of e.editStacks)if(t.locked)throw new Error("Cannot acquire edit stack lock");for(const t of e.editStacks)t.locked=!0;return()=>{for(const t of e.editStacks)t.locked=!1}}_safeInvokeWithLocks(e,t,i,s,r){const o=this._acquireLocks(i);let a;try{a=t()}catch(l){return o(),s.dispose(),this._onError(l,e)}return a?a.then(()=>(o(),s.dispose(),r()),l=>(o(),s.dispose(),this._onError(l,e))):(o(),s.dispose(),r())}async _invokeWorkspacePrepare(e){if(typeof e.actual.prepareUndoRedo>"u")return ee.None;const t=e.actual.prepareUndoRedo();return typeof t>"u"?ee.None:t}_invokeResourcePrepare(e,t){if(e.actual.type!==1||typeof e.actual.prepareUndoRedo>"u")return t(ee.None);const i=e.actual.prepareUndoRedo();return i?M3(i)?t(i):i.then(s=>t(s)):t(ee.None)}_getAffectedEditStacks(e){const t=[];for(const i of e.strResources)t.push(this._editStacks.get(i)||ACe);return new r8(t)}_tryToSplitAndUndo(e,t,i,s){if(t.canSplit())return this._splitPastWorkspaceElement(t,i),this._notificationService.warn(s),new UR(this._undo(e,0,!0));for(const r of t.strResources)this.removeElements(r);return this._notificationService.warn(s),new UR}_checkWorkspaceUndo(e,t,i,s){if(t.removedResources)return this._tryToSplitAndUndo(e,t,t.removedResources,v({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(s&&t.invalidatedResources)return this._tryToSplitAndUndo(e,t,t.invalidatedResources,v({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const r=[];for(const a of i.editStacks)a.getClosestPastElement()!==t&&r.push(a.resourceLabel);if(r.length>0)return this._tryToSplitAndUndo(e,t,null,v({key:"cannotWorkspaceUndoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because changes were made to {1}",t.label,r.join(", ")));const o=[];for(const a of i.editStacks)a.locked&&o.push(a.resourceLabel);return o.length>0?this._tryToSplitAndUndo(e,t,null,v({key:"cannotWorkspaceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,o.join(", "))):i.isValid()?null:this._tryToSplitAndUndo(e,t,null,v({key:"cannotWorkspaceUndoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceUndo(e,t,i){const s=this._getAffectedEditStacks(t),r=this._checkWorkspaceUndo(e,t,s,!1);return r?r.returnValue:this._confirmAndExecuteWorkspaceUndo(e,t,s,i)}_isPartOfUndoGroup(e){if(!e.groupId)return!1;for(const[,t]of this._editStacks){const i=t.getClosestPastElement();if(i){if(i===e){const s=t.getSecondClosestPastElement();if(s&&s.groupId===e.groupId)return!0}if(i.groupId===e.groupId)return!0}}return!1}async _confirmAndExecuteWorkspaceUndo(e,t,i,s){if(t.canSplit()&&!this._isPartOfUndoGroup(t)){let a;(function(d){d[d.All=0]="All",d[d.This=1]="This",d[d.Cancel=2]="Cancel"})(a||(a={}));const{result:l}=await this._dialogService.prompt({type:Un.Info,message:v("confirmWorkspace","Would you like to undo '{0}' across all files?",t.label),buttons:[{label:v({key:"ok",comment:["{0} denotes a number that is > 1, && denotes a mnemonic"]},"&&Undo in {0} Files",i.editStacks.length),run:()=>a.All},{label:v({key:"nok",comment:["&& denotes a mnemonic"]},"Undo this &&File"),run:()=>a.This}],cancelButton:{run:()=>a.Cancel}});if(l===a.Cancel)return;if(l===a.This)return this._splitPastWorkspaceElement(t,null),this._undo(e,0,!0);const c=this._checkWorkspaceUndo(e,t,i,!1);if(c)return c.returnValue;s=!0}let r;try{r=await this._invokeWorkspacePrepare(t)}catch(a){return this._onError(a,t)}const o=this._checkWorkspaceUndo(e,t,i,!0);if(o)return r.dispose(),o.returnValue;for(const a of i.editStacks)a.moveBackward(t);return this._safeInvokeWithLocks(t,()=>t.actual.undo(),i,r,()=>this._continueUndoInGroup(t.groupId,s))}_resourceUndo(e,t,i){if(!t.isValid){e.flushAllElements();return}if(e.locked){const s=v({key:"cannotResourceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not undo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(s);return}return this._invokeResourcePrepare(t,s=>(e.moveBackward(t),this._safeInvokeWithLocks(t,()=>t.actual.undo(),new r8([e]),s,()=>this._continueUndoInGroup(t.groupId,i))))}_findClosestUndoElementInGroup(e){if(!e)return[null,null];let t=null,i=null;for(const[s,r]of this._editStacks){const o=r.getClosestPastElement();o&&o.groupId===e&&(!t||o.groupOrder>t.groupOrder)&&(t=o,i=s)}return[t,i]}_continueUndoInGroup(e,t){if(!e)return;const[,i]=this._findClosestUndoElementInGroup(e);if(i)return this._undo(i,0,t)}undo(e){if(e instanceof nb){const[,t]=this._findClosestUndoElementWithSource(e.id);return t?this._undo(t,e.id,!1):void 0}return typeof e=="string"?this._undo(e,0,!1):this._undo(this.getUriComparisonKey(e),0,!1)}_undo(e,t=0,i){if(!this._editStacks.has(e))return;const s=this._editStacks.get(e),r=s.getClosestPastElement();if(!r)return;if(r.groupId){const[a,l]=this._findClosestUndoElementInGroup(r.groupId);if(r!==a&&l)return this._undo(l,t,i)}if((r.sourceId!==t||r.confirmBeforeUndo)&&!i)return this._confirmAndContinueUndo(e,t,r);try{return r.type===1?this._workspaceUndo(e,r,i):this._resourceUndo(s,r,i)}finally{}}async _confirmAndContinueUndo(e,t,i){if((await this._dialogService.confirm({message:v("confirmDifferentSource","Would you like to undo '{0}'?",i.label),primaryButton:v({key:"confirmDifferentSource.yes",comment:["&& denotes a mnemonic"]},"&&Yes"),cancelButton:v("confirmDifferentSource.no","No")})).confirmed)return this._undo(e,t,!0)}_findClosestRedoElementWithSource(e){if(!e)return[null,null];let t=null,i=null;for(const[s,r]of this._editStacks){const o=r.getClosestFutureElement();o&&o.sourceId===e&&(!t||o.sourceOrder<t.sourceOrder)&&(t=o,i=s)}return[t,i]}canRedo(e){if(e instanceof nb){const[,i]=this._findClosestRedoElementWithSource(e.id);return!!i}const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).hasFutureElements():!1}_tryToSplitAndRedo(e,t,i,s){if(t.canSplit())return this._splitFutureWorkspaceElement(t,i),this._notificationService.warn(s),new UR(this._redo(e));for(const r of t.strResources)this.removeElements(r);return this._notificationService.warn(s),new UR}_checkWorkspaceRedo(e,t,i,s){if(t.removedResources)return this._tryToSplitAndRedo(e,t,t.removedResources,v({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(s&&t.invalidatedResources)return this._tryToSplitAndRedo(e,t,t.invalidatedResources,v({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const r=[];for(const a of i.editStacks)a.getClosestFutureElement()!==t&&r.push(a.resourceLabel);if(r.length>0)return this._tryToSplitAndRedo(e,t,null,v({key:"cannotWorkspaceRedoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because changes were made to {1}",t.label,r.join(", ")));const o=[];for(const a of i.editStacks)a.locked&&o.push(a.resourceLabel);return o.length>0?this._tryToSplitAndRedo(e,t,null,v({key:"cannotWorkspaceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,o.join(", "))):i.isValid()?null:this._tryToSplitAndRedo(e,t,null,v({key:"cannotWorkspaceRedoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceRedo(e,t){const i=this._getAffectedEditStacks(t),s=this._checkWorkspaceRedo(e,t,i,!1);return s?s.returnValue:this._executeWorkspaceRedo(e,t,i)}async _executeWorkspaceRedo(e,t,i){let s;try{s=await this._invokeWorkspacePrepare(t)}catch(o){return this._onError(o,t)}const r=this._checkWorkspaceRedo(e,t,i,!0);if(r)return s.dispose(),r.returnValue;for(const o of i.editStacks)o.moveForward(t);return this._safeInvokeWithLocks(t,()=>t.actual.redo(),i,s,()=>this._continueRedoInGroup(t.groupId))}_resourceRedo(e,t){if(!t.isValid){e.flushAllElements();return}if(e.locked){const i=v({key:"cannotResourceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not redo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(i);return}return this._invokeResourcePrepare(t,i=>(e.moveForward(t),this._safeInvokeWithLocks(t,()=>t.actual.redo(),new r8([e]),i,()=>this._continueRedoInGroup(t.groupId))))}_findClosestRedoElementInGroup(e){if(!e)return[null,null];let t=null,i=null;for(const[s,r]of this._editStacks){const o=r.getClosestFutureElement();o&&o.groupId===e&&(!t||o.groupOrder<t.groupOrder)&&(t=o,i=s)}return[t,i]}_continueRedoInGroup(e){if(!e)return;const[,t]=this._findClosestRedoElementInGroup(e);if(t)return this._redo(t)}redo(e){if(e instanceof nb){const[,t]=this._findClosestRedoElementWithSource(e.id);return t?this._redo(t):void 0}return typeof e=="string"?this._redo(e):this._redo(this.getUriComparisonKey(e))}_redo(e){if(!this._editStacks.has(e))return;const t=this._editStacks.get(e),i=t.getClosestFutureElement();if(i){if(i.groupId){const[s,r]=this._findClosestRedoElementInGroup(i.groupId);if(i!==s&&r)return this._redo(r)}try{return i.type===1?this._workspaceRedo(e,i):this._resourceRedo(t,i)}finally{}}}};dU=AZe([Oae(0,WN),Oae(1,jn)],dU);class UR{constructor(e){this.returnValue=e}}jt(DX,dU,1);function wo(n,e,t){return Math.min(Math.max(n,e),t)}class MCe{constructor(){this._n=1,this._val=0}update(e){return this._val=this._val+(e-this._val)/this._n,this._n+=1,this._val}get value(){return this._val}}class PZe{constructor(e){this._n=0,this._val=0,this._values=[],this._index=0,this._sum=0,this._values=new Array(e),this._values.fill(0,0,e)}update(e){const t=this._values[this._index];return this._values[this._index]=e,this._index=(this._index+1)%this._values.length,this._sum-=t,this._sum+=e,this._n<this._values.length&&(this._n+=1),this._val=this._sum/this._n,this._val}get value(){return this._val}}const NX=Wt("environmentService");var OZe=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Wae=function(n,e){return function(t,i){e(t,i,n)}};const Zl=Wt("ILanguageFeatureDebounceService");var NP;(function(n){const e=new WeakMap;let t=0;function i(s){let r=e.get(s);return r===void 0&&(r=++t,e.set(s,r)),r}n.of=i})(NP||(NP={}));class FZe{constructor(e){this._default=e}get(e){return this._default}update(e,t){return this._default}default(){return this._default}}class BZe{constructor(e,t,i,s,r,o){this._logService=e,this._name=t,this._registry=i,this._default=s,this._min=r,this._max=o,this._cache=new vf(50,.7)}_key(e){return e.id+this._registry.all(e).reduce((t,i)=>W3(NP.of(i),t),0)}get(e){const t=this._key(e),i=this._cache.get(t);return i?wo(i.value,this._min,this._max):this.default()}update(e,t){const i=this._key(e);let s=this._cache.get(i);s||(s=new PZe(6),this._cache.set(i,s));const r=wo(s.update(t),this._min,this._max);return O3(e.uri,"output")||this._logService.trace(`[DEBOUNCE: ${this._name}] for ${e.uri.toString()} is ${r}ms`),r}_overall(){const e=new MCe;for(const[,t]of this._cache)e.update(t.value);return e.value}default(){const e=this._overall()|0||this._default;return wo(e,this._min,this._max)}}let uU=class{constructor(e,t){this._logService=e,this._data=new Map,this._isDev=t.isExtensionDevelopment||!t.isBuilt}for(e,t,i){const s=(i==null?void 0:i.min)??50,r=(i==null?void 0:i.max)??s**2,o=(i==null?void 0:i.key)??void 0,a=`${NP.of(e)},${s}${o?","+o:""}`;let l=this._data.get(a);return l||(this._isDev?(this._logService.debug(`[DEBOUNCE: ${t}] is disabled in developed mode`),l=new FZe(s*1.5)):l=new BZe(this._logService,t,e,this._overallAverage()|0||s*1.5,s,r),this._data.set(a,l)),l}_overallAverage(){const e=new MCe;for(const t of this._data.values())e.update(t.default());return e.value}};uU=OZe([Wae(0,Cr),Wae(1,NX)],uU);jt(Zl,uU,1);class ra{static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&768)>>>8}static containsBalancedBrackets(e){return(e&1024)!==0}static getFontStyle(e){return(e&30720)>>>11}static getForeground(e){return(e&16744448)>>>15}static getBackground(e){return(e&4278190080)>>>24}static getClassNameFromMetadata(e){let i="mtk"+this.getForeground(e);const s=this.getFontStyle(e);return s&1&&(i+=" mtki"),s&2&&(i+=" mtkb"),s&4&&(i+=" mtku"),s&8&&(i+=" mtks"),i}static getInlineStyleFromMetadata(e,t){const i=this.getForeground(e),s=this.getFontStyle(e);let r=`color: ${t[i]};`;s&1&&(r+="font-style: italic;"),s&2&&(r+="font-weight: bold;");let o="";return s&4&&(o+=" underline"),s&8&&(o+=" line-through"),o&&(r+=`text-decoration:${o};`),r}static getPresentationFromMetadata(e){const t=this.getForeground(e),i=this.getFontStyle(e);return{foreground:t,italic:!!(i&1),bold:!!(i&2),underline:!!(i&4),strikethrough:!!(i&8)}}}function M_(n){let e=0,t=0,i=0,s=0;for(let r=0,o=n.length;r<o;r++){const a=n.charCodeAt(r);a===13?(e===0&&(t=r),e++,r+1<o&&n.charCodeAt(r+1)===10?(s|=2,r++):s|=3,i=r+1):a===10&&(s|=1,e===0&&(t=r),e++,i=r+1)}return e===0&&(t=n.length),[e,t,n.length-i,s]}class Xk{static create(e,t){return new Xk(e,new TP(t))}get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._endLineNumber}constructor(e,t){this._startLineNumber=e,this._tokens=t,this._endLineNumber=this._startLineNumber+this._tokens.getMaxDeltaLine()}toString(){return this._tokens.toString(this._startLineNumber)}_updateEndLineNumber(){this._endLineNumber=this._startLineNumber+this._tokens.getMaxDeltaLine()}isEmpty(){return this._tokens.isEmpty()}getLineTokens(e){return this._startLineNumber<=e&&e<=this._endLineNumber?this._tokens.getLineTokens(e-this._startLineNumber):null}getRange(){const e=this._tokens.getRange();return e&&new M(this._startLineNumber+e.startLineNumber,e.startColumn,this._startLineNumber+e.endLineNumber,e.endColumn)}removeTokens(e){const t=e.startLineNumber-this._startLineNumber,i=e.endLineNumber-this._startLineNumber;this._startLineNumber+=this._tokens.removeTokens(t,e.startColumn-1,i,e.endColumn-1),this._updateEndLineNumber()}split(e){const t=e.startLineNumber-this._startLineNumber,i=e.endLineNumber-this._startLineNumber,[s,r,o]=this._tokens.split(t,e.startColumn-1,i,e.endColumn-1);return[new Xk(this._startLineNumber,s),new Xk(this._startLineNumber+o,r)]}applyEdit(e,t){const[i,s,r]=M_(t);this.acceptEdit(e,i,s,r,t.length>0?t.charCodeAt(0):0)}acceptEdit(e,t,i,s,r){this._acceptDeleteRange(e),this._acceptInsertText(new Y(e.startLineNumber,e.startColumn),t,i,s,r),this._updateEndLineNumber()}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return;const t=e.startLineNumber-this._startLineNumber,i=e.endLineNumber-this._startLineNumber;if(i<0){const r=i-t;this._startLineNumber-=r;return}const s=this._tokens.getMaxDeltaLine();if(!(t>=s+1)){if(t<0&&i>=s+1){this._startLineNumber=0,this._tokens.clear();return}if(t<0){const r=-t;this._startLineNumber-=r,this._tokens.acceptDeleteRange(e.startColumn-1,0,0,i,e.endColumn-1)}else this._tokens.acceptDeleteRange(0,t,e.startColumn-1,i,e.endColumn-1)}}_acceptInsertText(e,t,i,s,r){if(t===0&&i===0)return;const o=e.lineNumber-this._startLineNumber;if(o<0){this._startLineNumber+=t;return}const a=this._tokens.getMaxDeltaLine();o>=a+1||this._tokens.acceptInsertText(o,e.column-1,t,i,s,r)}}class TP{constructor(e){this._tokens=e,this._tokenCount=e.length/4}toString(e){const t=[];for(let i=0;i<this._tokenCount;i++)t.push(`(${this._getDeltaLine(i)+e},${this._getStartCharacter(i)}-${this._getEndCharacter(i)})`);return`[${t.join(",")}]`}getMaxDeltaLine(){const e=this._getTokenCount();return e===0?-1:this._getDeltaLine(e-1)}getRange(){const e=this._getTokenCount();if(e===0)return null;const t=this._getStartCharacter(0),i=this._getDeltaLine(e-1),s=this._getEndCharacter(e-1);return new M(0,t+1,i,s+1)}_getTokenCount(){return this._tokenCount}_getDeltaLine(e){return this._tokens[4*e]}_getStartCharacter(e){return this._tokens[4*e+1]}_getEndCharacter(e){return this._tokens[4*e+2]}isEmpty(){return this._getTokenCount()===0}getLineTokens(e){let t=0,i=this._getTokenCount()-1;for(;t<i;){const s=t+Math.floor((i-t)/2),r=this._getDeltaLine(s);if(r<e)t=s+1;else if(r>e)i=s-1;else{let o=s;for(;o>t&&this._getDeltaLine(o-1)===e;)o--;let a=s;for(;a<i&&this._getDeltaLine(a+1)===e;)a++;return new Hae(this._tokens.subarray(4*o,4*a+4))}}return this._getDeltaLine(t)===e?new Hae(this._tokens.subarray(4*t,4*t+4)):null}clear(){this._tokenCount=0}removeTokens(e,t,i,s){const r=this._tokens,o=this._tokenCount;let a=0,l=!1,c=0;for(let d=0;d<o;d++){const u=4*d,h=r[u],f=r[u+1],g=r[u+2],p=r[u+3];if((h>e||h===e&&g>=t)&&(h<i||h===i&&f<=s))l=!0;else{if(a===0&&(c=h),l){const _=4*a;r[_]=h-c,r[_+1]=f,r[_+2]=g,r[_+3]=p}a++}}return this._tokenCount=a,c}split(e,t,i,s){const r=this._tokens,o=this._tokenCount,a=[],l=[];let c=a,d=0,u=0;for(let h=0;h<o;h++){const f=4*h,g=r[f],p=r[f+1],_=r[f+2],w=r[f+3];if(g>e||g===e&&_>=t){if(g<i||g===i&&p<=s)continue;c!==l&&(c=l,d=0,u=g)}c[d++]=g-u,c[d++]=p,c[d++]=_,c[d++]=w}return[new TP(new Uint32Array(a)),new TP(new Uint32Array(l)),u]}acceptDeleteRange(e,t,i,s,r){const o=this._tokens,a=this._tokenCount,l=s-t;let c=0,d=!1;for(let u=0;u<a;u++){const h=4*u;let f=o[h],g=o[h+1],p=o[h+2];const _=o[h+3];if(f<t||f===t&&p<=i){c++;continue}else if(f===t&&g<i)f===s&&p>r?p-=r-i:p=i;else if(f===t&&g===i)if(f===s&&p>r)p-=r-i;else{d=!0;continue}else if(f<s||f===s&&g<r)if(f===s&&p>r)f=t,g=i,p=g+(p-r);else{d=!0;continue}else if(f>s){if(l===0&&!d){c=a;break}f-=l}else if(f===s&&g>=r)e&&f===0&&(g+=e,p+=e),f-=l,g-=r-i,p-=r-i;else throw new Error("Not possible!");const w=4*c;o[w]=f,o[w+1]=g,o[w+2]=p,o[w+3]=_,c++}this._tokenCount=c}acceptInsertText(e,t,i,s,r,o){const a=i===0&&s===1&&(o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122),l=this._tokens,c=this._tokenCount;for(let d=0;d<c;d++){const u=4*d;let h=l[u],f=l[u+1],g=l[u+2];if(!(h<e||h===e&&g<t)){if(h===e&&g===t)if(a)g+=1;else continue;else if(h===e&&f<t&&t<g)i===0?g+=s:g=t;else{if(h===e&&f===t&&a)continue;if(h===e)if(h+=i,i===0)f+=s,g+=s;else{const p=g-f;f=r+(f-t),g=f+p}else h+=i}l[u]=h,l[u+1]=f,l[u+2]=g}}}}class Hae{constructor(e){this._tokens=e}getCount(){return this._tokens.length/4}getStartCharacter(e){return this._tokens[4*e+1]}getEndCharacter(e){return this._tokens[4*e+2]}getMetadata(e){return this._tokens[4*e+3]}}var WZe=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},o8=function(n,e){return function(t,i){e(t,i,n)}};let hU=class{constructor(e,t,i,s){this._legend=e,this._themeService=t,this._languageService=i,this._logService=s,this._hasWarnedOverlappingTokens=!1,this._hasWarnedInvalidLengthTokens=!1,this._hasWarnedInvalidEditStart=!1,this._hashTable=new fU}getMetadata(e,t,i){const s=this._languageService.languageIdCodec.encodeLanguageId(i),r=this._hashTable.get(e,t,s);let o;if(r)o=r.metadata;else{let a=this._legend.tokenTypes[e];const l=[];if(a){let c=t;for(let u=0;c>0&&u<this._legend.tokenModifiers.length;u++)c&1&&l.push(this._legend.tokenModifiers[u]),c=c>>1;const d=this._themeService.getColorTheme().getTokenStyleMetadata(a,l,i);if(typeof d>"u")o=2147483647;else{if(o=0,typeof d.italic<"u"){const u=(d.italic?1:0)<<11;o|=u|1}if(typeof d.bold<"u"){const u=(d.bold?2:0)<<11;o|=u|2}if(typeof d.underline<"u"){const u=(d.underline?4:0)<<11;o|=u|4}if(typeof d.strikethrough<"u"){const u=(d.strikethrough?8:0)<<11;o|=u|8}if(d.foreground){const u=d.foreground<<15;o|=u|16}o===0&&(o=2147483647)}}else o=2147483647,a="not-in-legend";this._hashTable.add(e,t,s,o)}return o}warnOverlappingSemanticTokens(e,t){this._hasWarnedOverlappingTokens||(this._hasWarnedOverlappingTokens=!0,this._logService.warn(`Overlapping semantic tokens detected at lineNumber ${e}, column ${t}`))}warnInvalidLengthSemanticTokens(e,t){this._hasWarnedInvalidLengthTokens||(this._hasWarnedInvalidLengthTokens=!0,this._logService.warn(`Semantic token with invalid length detected at lineNumber ${e}, column ${t}`))}warnInvalidEditStart(e,t,i,s,r){this._hasWarnedInvalidEditStart||(this._hasWarnedInvalidEditStart=!0,this._logService.warn(`Invalid semantic tokens edit detected (previousResultId: ${e}, resultId: ${t}) at edit #${i}: The provided start offset ${s} is outside the previous data (length ${r}).`))}};hU=WZe([o8(1,ws),o8(2,un),o8(3,Cr)],hU);function PCe(n,e,t){const i=n.data,s=n.data.length/5|0,r=Math.max(Math.ceil(s/1024),400),o=[];let a=0,l=1,c=0;for(;a<s;){const d=a;let u=Math.min(d+r,s);if(u<s){let b=u;for(;b-1>d&&i[5*b]===0;)b--;if(b-1===d){let y=u;for(;y+1<s&&i[5*y]===0;)y++;u=y}else u=b}let h=new Uint32Array((u-d)*4),f=0,g=0,p=0,_=0;for(;a<u;){const b=5*a,y=i[b],S=i[b+1],x=l+y|0,E=y===0?c+S|0:S,D=i[b+2],N=E+D|0,I=i[b+3],H=i[b+4];if(N<=E)e.warnInvalidLengthSemanticTokens(x,E+1);else if(p===x&&_>E)e.warnOverlappingSemanticTokens(x,E+1);else{const z=e.getMetadata(I,H,t);z!==2147483647&&(g===0&&(g=x),h[f]=x-g,h[f+1]=E,h[f+2]=N,h[f+3]=z,f+=4,p=x,_=N)}l=x,c=E,a++}f!==h.length&&(h=h.subarray(0,f));const w=Xk.create(g,h);o.push(w)}return o}class HZe{constructor(e,t,i,s){this.tokenTypeIndex=e,this.tokenModifierSet=t,this.languageId=i,this.metadata=s,this.next=null}}const Zf=class Zf{constructor(){this._elementsCount=0,this._currentLengthIndex=0,this._currentLength=Zf._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<Zf._SIZES.length?2/3*this._currentLength:0),this._elements=[],Zf._nullOutEntries(this._elements,this._currentLength)}static _nullOutEntries(e,t){for(let i=0;i<t;i++)e[i]=null}_hash2(e,t){return(e<<5)-e+t|0}_hashFunc(e,t,i){return this._hash2(this._hash2(e,t),i)%this._currentLength}get(e,t,i){const s=this._hashFunc(e,t,i);let r=this._elements[s];for(;r;){if(r.tokenTypeIndex===e&&r.tokenModifierSet===t&&r.languageId===i)return r;r=r.next}return null}add(e,t,i,s){if(this._elementsCount++,this._growCount!==0&&this._elementsCount>=this._growCount){const r=this._elements;this._currentLengthIndex++,this._currentLength=Zf._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<Zf._SIZES.length?2/3*this._currentLength:0),this._elements=[],Zf._nullOutEntries(this._elements,this._currentLength);for(const o of r){let a=o;for(;a;){const l=a.next;a.next=null,this._add(a),a=l}}}this._add(new HZe(e,t,i,s))}_add(e){const t=this._hashFunc(e.tokenTypeIndex,e.tokenModifierSet,e.languageId);e.next=this._elements[t],this._elements[t]=e}};Zf._SIZES=[3,7,13,31,61,127,251,509,1021,2039,4093,8191,16381,32749,65521,131071,262139,524287,1048573,2097143];let fU=Zf;const sB=Wt("semanticTokensStylingService");var VZe=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},a8=function(n,e){return function(t,i){e(t,i,n)}};let gU=class extends ee{constructor(e,t,i){super(),this._themeService=e,this._logService=t,this._languageService=i,this._caches=new WeakMap,this._register(this._themeService.onDidColorThemeChange(()=>{this._caches=new WeakMap}))}getStyling(e){return this._caches.has(e)||this._caches.set(e,new hU(e.getLegend(),this._themeService,this._languageService,this._logService)),this._caches.get(e)}};gU=VZe([a8(0,ws),a8(1,Cr),a8(2,un)],gU);jt(sB,gU,1);function Rp(n){return n===47||n===92}function OCe(n){return n.replace(/[\\/]/g,Qn.sep)}function zZe(n){return n.indexOf("/")===-1&&(n=OCe(n)),/^[a-zA-Z]:(\/|$)/.test(n)&&(n="/"+n),n}function Vae(n,e=Qn.sep){if(!n)return"";const t=n.length,i=n.charCodeAt(0);if(Rp(i)){if(Rp(n.charCodeAt(1))&&!Rp(n.charCodeAt(2))){let r=3;const o=r;for(;r<t&&!Rp(n.charCodeAt(r));r++);if(o!==r&&!Rp(n.charCodeAt(r+1))){for(r+=1;r<t;r++)if(Rp(n.charCodeAt(r)))return n.slice(0,r+1).replace(/[\\/]/g,e)}}return e}else if(FCe(i)&&n.charCodeAt(1)===58)return Rp(n.charCodeAt(2))?n.slice(0,2)+e:n.slice(0,2);let s=n.indexOf("://");if(s!==-1){for(s+=3;s<t;s++)if(Rp(n.charCodeAt(s)))return n.slice(0,s+1)}return""}function pU(n,e,t,i=Iu){if(n===e)return!0;if(!n||!e||e.length>n.length)return!1;if(t){if(!iX(n,e))return!1;if(e.length===n.length)return!0;let r=e.length;return e.charAt(e.length-1)===i&&r--,n.charAt(r)===i}return e.charAt(e.length-1)!==i&&(e+=i),n.indexOf(e)===0}function FCe(n){return n>=65&&n<=90||n>=97&&n<=122}function UZe(n,e=wr){return e?FCe(n.charCodeAt(0))&&n.charCodeAt(1)===58:!1}const $R="**",zae="/",L2="[/\\\\]",k2="[^/\\\\]",$Ze=/\//g;function Uae(n,e){switch(n){case 0:return"";case 1:return`${k2}*?`;default:return`(?:${L2}|${k2}+${L2}${e?`|${L2}${k2}+`:""})*?`}}function $ae(n,e){if(!n)return[];const t=[];let i=!1,s=!1,r="";for(const o of n){switch(o){case e:if(!i&&!s){t.push(r),r="";continue}break;case"{":i=!0;break;case"}":i=!1;break;case"[":s=!0;break;case"]":s=!1;break}r+=o}return r&&t.push(r),t}function BCe(n){if(!n)return"";let e="";const t=$ae(n,zae);if(t.every(i=>i===$R))e=".*";else{let i=!1;t.forEach((s,r)=>{if(s===$R){if(i)return;e+=Uae(2,r===t.length-1)}else{let o=!1,a="",l=!1,c="";for(const d of s){if(d!=="}"&&o){a+=d;continue}if(l&&(d!=="]"||!c)){let u;d==="-"?u=d:(d==="^"||d==="!")&&!c?u="^":d===zae?u="":u=$l(d),c+=u;continue}switch(d){case"{":o=!0;continue;case"[":l=!0;continue;case"}":{const h=`(?:${$ae(a,",").map(f=>BCe(f)).join("|")})`;e+=h,o=!1,a="";break}case"]":{e+="["+c+"]",l=!1,c="";break}case"?":e+=k2;continue;case"*":e+=Uae(1);continue;default:e+=$l(d)}}r<t.length-1&&(t[r+1]!==$R||r+2<t.length)&&(e+=L2)}i=s===$R})}return e}const jZe=/^\*\*\/\*\.[\w\.-]+$/,KZe=/^\*\*\/([\w\.-]+)\/?$/,qZe=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,GZe=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,YZe=/^\*\*((\/[\w\.-]+)+)\/?$/,ZZe=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,jae=new vf(1e4),Kae=function(){return!1},Xh=function(){return null};function TX(n,e){if(!n)return Xh;let t;typeof n!="string"?t=n.pattern:t=n,t=t.trim();const i=`${t}_${!!e.trimForExclusions}`;let s=jae.get(i);if(s)return qae(s,n);let r;return jZe.test(t)?s=XZe(t.substr(4),t):(r=KZe.exec(l8(t,e)))?s=QZe(r[1],t):(e.trimForExclusions?GZe:qZe).test(t)?s=JZe(t,e):(r=YZe.exec(l8(t,e)))?s=Gae(r[1].substr(1),t,!0):(r=ZZe.exec(l8(t,e)))?s=Gae(r[1],t,!1):s=eXe(t),jae.set(i,s),qae(s,n)}function qae(n,e){if(typeof e=="string")return n;const t=function(i,s){return pU(i,e.base,!Po)?n(RN(i.substr(e.base.length),Iu),s):null};return t.allBasenames=n.allBasenames,t.allPaths=n.allPaths,t.basenames=n.basenames,t.patterns=n.patterns,t}function l8(n,e){return e.trimForExclusions&&n.endsWith("/**")?n.substr(0,n.length-2):n}function XZe(n,e){return function(t,i){return typeof t=="string"&&t.endsWith(n)?e:null}}function QZe(n,e){const t=`/${n}`,i=`\\${n}`,s=function(o,a){return typeof o!="string"?null:a?a===n?e:null:o===n||o.endsWith(t)||o.endsWith(i)?e:null},r=[n];return s.basenames=r,s.patterns=[e],s.allBasenames=r,s}function JZe(n,e){const t=HCe(n.slice(1,-1).split(",").map(a=>TX(a,e)).filter(a=>a!==Xh),n),i=t.length;if(!i)return Xh;if(i===1)return t[0];const s=function(a,l){for(let c=0,d=t.length;c<d;c++)if(t[c](a,l))return n;return null},r=t.find(a=>!!a.allBasenames);r&&(s.allBasenames=r.allBasenames);const o=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return o.length&&(s.allPaths=o),s}function Gae(n,e,t){const i=Iu===Qn.sep,s=i?n:n.replace($Ze,Iu),r=Iu+s,o=Qn.sep+n;let a;return t?a=function(l,c){return typeof l=="string"&&(l===s||l.endsWith(r)||!i&&(l===n||l.endsWith(o)))?e:null}:a=function(l,c){return typeof l=="string"&&(l===s||!i&&l===n)?e:null},a.allPaths=[(t?"*/":"./")+n],a}function eXe(n){try{const e=new RegExp(`^${BCe(n)}$`);return function(t){return e.lastIndex=0,typeof t=="string"&&e.test(t)?n:null}}catch{return Xh}}function tXe(n,e,t){return!n||typeof e!="string"?!1:WCe(n)(e,void 0,t)}function WCe(n,e={}){if(!n)return Kae;if(typeof n=="string"||iXe(n)){const t=TX(n,e);if(t===Xh)return Kae;const i=function(s,r){return!!t(s,r)};return t.allBasenames&&(i.allBasenames=t.allBasenames),t.allPaths&&(i.allPaths=t.allPaths),i}return nXe(n,e)}function iXe(n){const e=n;return e?typeof e.base=="string"&&typeof e.pattern=="string":!1}function nXe(n,e){const t=HCe(Object.getOwnPropertyNames(n).map(a=>sXe(a,n[a],e)).filter(a=>a!==Xh)),i=t.length;if(!i)return Xh;if(!t.some(a=>!!a.requiresSiblings)){if(i===1)return t[0];const a=function(d,u){let h;for(let f=0,g=t.length;f<g;f++){const p=t[f](d,u);if(typeof p=="string")return p;Tz(p)&&(h||(h=[]),h.push(p))}return h?(async()=>{for(const f of h){const g=await f;if(typeof g=="string")return g}return null})():null},l=t.find(d=>!!d.allBasenames);l&&(a.allBasenames=l.allBasenames);const c=t.reduce((d,u)=>u.allPaths?d.concat(u.allPaths):d,[]);return c.length&&(a.allPaths=c),a}const s=function(a,l,c){let d,u;for(let h=0,f=t.length;h<f;h++){const g=t[h];g.requiresSiblings&&c&&(l||(l=qm(a)),d||(d=l.substr(0,l.length-Wje(a).length)));const p=g(a,l,d,c);if(typeof p=="string")return p;Tz(p)&&(u||(u=[]),u.push(p))}return u?(async()=>{for(const h of u){const f=await h;if(typeof f=="string")return f}return null})():null},r=t.find(a=>!!a.allBasenames);r&&(s.allBasenames=r.allBasenames);const o=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return o.length&&(s.allPaths=o),s}function sXe(n,e,t){if(e===!1)return Xh;const i=TX(n,t);if(i===Xh)return Xh;if(typeof e=="boolean")return i;if(e){const s=e.when;if(typeof s=="string"){const r=(o,a,l,c)=>{if(!c||!i(o,a))return null;const d=s.replace("$(basename)",()=>l),u=c(d);return Tz(u)?u.then(h=>h?n:null):u?n:null};return r.requiresSiblings=!0,r}}return i}function HCe(n,e){const t=n.filter(a=>!!a.basenames);if(t.length<2)return n;const i=t.reduce((a,l)=>{const c=l.basenames;return c?a.concat(c):a},[]);let s;if(e){s=[];for(let a=0,l=i.length;a<l;a++)s.push(e)}else s=t.reduce((a,l)=>{const c=l.patterns;return c?a.concat(c):a},[]);const r=function(a,l){if(typeof a!="string")return null;if(!l){let d;for(d=a.length;d>0;d--){const u=a.charCodeAt(d-1);if(u===47||u===92)break}l=a.substr(d)}const c=i.indexOf(l);return c!==-1?s[c]:null};r.basenames=i,r.patterns=s,r.allBasenames=i;const o=n.filter(a=>!a.basenames);return o.push(r),o}function RX(n,e,t,i,s,r){if(Array.isArray(n)){let o=0;for(const a of n){const l=RX(a,e,t,i,s,r);if(l===10)return l;l>o&&(o=l)}return o}else{if(typeof n=="string")return i?n==="*"?5:n===t?10:0:0;if(n){const{language:o,pattern:a,scheme:l,hasAccessToAllModels:c,notebookType:d}=n;if(!i&&!c)return 0;d&&s&&(e=s);let u=0;if(l)if(l===e.scheme)u=10;else if(l==="*")u=5;else return 0;if(o)if(o===t)u=10;else if(o==="*")u=Math.max(u,5);else return 0;if(d)if(d===r)u=10;else if(d==="*"&&r!==void 0)u=Math.max(u,5);else return 0;if(a){let h;if(typeof a=="string"?h=a:h={...a,base:i0e(a.base)},h===e.fsPath||tXe(h,e.fsPath))u=10;else return 0}return u}else return 0}}function VCe(n){return typeof n=="string"?!1:Array.isArray(n)?n.every(VCe):!!n.exclusive}class Yae{constructor(e,t,i,s,r){this.uri=e,this.languageId=t,this.notebookUri=i,this.notebookType=s,this.recursive=r}equals(e){var t,i;return this.notebookType===e.notebookType&&this.languageId===e.languageId&&this.uri.toString()===e.uri.toString()&&((t=this.notebookUri)==null?void 0:t.toString())===((i=e.notebookUri)==null?void 0:i.toString())&&this.recursive===e.recursive}}class fn{constructor(e){this._notebookInfoResolver=e,this._clock=0,this._entries=[],this._onDidChange=new X,this.onDidChange=this._onDidChange.event}register(e,t){let i={selector:e,provider:t,_score:-1,_time:this._clock++};return this._entries.push(i),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),Ye(()=>{if(i){const s=this._entries.indexOf(i);s>=0&&(this._entries.splice(s,1),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),i=void 0)}})}has(e){return this.all(e).length>0}all(e){if(!e)return[];this._updateScores(e,!1);const t=[];for(const i of this._entries)i._score>0&&t.push(i.provider);return t}ordered(e,t=!1){const i=[];return this._orderedForEach(e,t,s=>i.push(s.provider)),i}orderedGroups(e){const t=[];let i,s;return this._orderedForEach(e,!1,r=>{i&&s===r._score?i.push(r.provider):(s=r._score,i=[r.provider],t.push(i))}),t}_orderedForEach(e,t,i){this._updateScores(e,t);for(const s of this._entries)s._score>0&&i(s)}_updateScores(e,t){var r,o;const i=(r=this._notebookInfoResolver)==null?void 0:r.call(this,e.uri),s=i?new Yae(e.uri,e.getLanguageId(),i.uri,i.type,t):new Yae(e.uri,e.getLanguageId(),void 0,void 0,t);if(!((o=this._lastCandidate)!=null&&o.equals(s))){this._lastCandidate=s;for(const a of this._entries)if(a._score=RX(a.selector,s.uri,s.languageId,mCe(e),s.notebookUri,s.notebookType),VCe(a.selector)&&a._score>0)if(t)a._score=0;else{for(const l of this._entries)l._score=0;a._score=1e3;break}this._entries.sort(fn._compareByScoreAndTime)}}static _compareByScoreAndTime(e,t){return e._score<t._score?1:e._score>t._score?-1:dk(e.selector)&&!dk(t.selector)?1:!dk(e.selector)&&dk(t.selector)?-1:e._time<t._time?1:e._time>t._time?-1:0}}function dk(n){return typeof n=="string"?!1:Array.isArray(n)?n.some(dk):!!n.isBuiltin}class rXe{constructor(){this.referenceProvider=new fn(this._score.bind(this)),this.renameProvider=new fn(this._score.bind(this)),this.newSymbolNamesProvider=new fn(this._score.bind(this)),this.codeActionProvider=new fn(this._score.bind(this)),this.definitionProvider=new fn(this._score.bind(this)),this.typeDefinitionProvider=new fn(this._score.bind(this)),this.declarationProvider=new fn(this._score.bind(this)),this.implementationProvider=new fn(this._score.bind(this)),this.documentSymbolProvider=new fn(this._score.bind(this)),this.inlayHintsProvider=new fn(this._score.bind(this)),this.colorProvider=new fn(this._score.bind(this)),this.codeLensProvider=new fn(this._score.bind(this)),this.documentFormattingEditProvider=new fn(this._score.bind(this)),this.documentRangeFormattingEditProvider=new fn(this._score.bind(this)),this.onTypeFormattingEditProvider=new fn(this._score.bind(this)),this.signatureHelpProvider=new fn(this._score.bind(this)),this.hoverProvider=new fn(this._score.bind(this)),this.documentHighlightProvider=new fn(this._score.bind(this)),this.multiDocumentHighlightProvider=new fn(this._score.bind(this)),this.selectionRangeProvider=new fn(this._score.bind(this)),this.foldingRangeProvider=new fn(this._score.bind(this)),this.linkProvider=new fn(this._score.bind(this)),this.inlineCompletionsProvider=new fn(this._score.bind(this)),this.inlineEditProvider=new fn(this._score.bind(this)),this.completionProvider=new fn(this._score.bind(this)),this.linkedEditingRangeProvider=new fn(this._score.bind(this)),this.documentRangeSemanticTokensProvider=new fn(this._score.bind(this)),this.documentSemanticTokensProvider=new fn(this._score.bind(this)),this.documentDropEditProvider=new fn(this._score.bind(this)),this.documentPasteEditProvider=new fn(this._score.bind(this))}_score(e){var t;return(t=this._notebookTypeResolver)==null?void 0:t.call(this,e)}}jt(Be,rXe,1);function AX(n){return`--vscode-${n.replace(/\./g,"-")}`}function Me(n){return`var(${AX(n)})`}function oXe(n,e){return`var(${AX(n)}, ${e})`}function aXe(n){return n!==null&&typeof n=="object"&&"light"in n&&"dark"in n}const zCe={ColorContribution:"base.contributions.colors"},lXe="default";class cXe{constructor(){this._onDidChangeSchema=new X,this.onDidChangeSchema=this._onDidChangeSchema.event,this.colorSchema={type:"object",properties:{}},this.colorReferenceSchema={type:"string",enum:[],enumDescriptions:[]},this.colorsById={}}registerColor(e,t,i,s=!1,r){const o={id:e,description:i,defaults:t,needsTransparency:s,deprecationMessage:r};this.colorsById[e]=o;const a={type:"string",format:"color-hex",defaultSnippets:[{body:"${1:#ff0000}"}]};return r&&(a.deprecationMessage=r),s&&(a.pattern="^#(?:(?<rgba>[0-9a-fA-f]{3}[0-9a-eA-E])|(?:[0-9a-fA-F]{6}(?:(?![fF]{2})(?:[0-9a-fA-F]{2}))))?$",a.patternErrorMessage=v("transparecyRequired","This color must be transparent or it will obscure content")),this.colorSchema.properties[e]={description:i,oneOf:[a,{type:"string",const:lXe,description:v("useDefault","Use the default color.")}]},this.colorReferenceSchema.enum.push(e),this.colorReferenceSchema.enumDescriptions.push(i),this._onDidChangeSchema.fire(),e}getColors(){return Object.keys(this.colorsById).map(e=>this.colorsById[e])}resolveDefaultColor(e,t){const i=this.colorsById[e];if(i!=null&&i.defaults){const s=aXe(i.defaults)?i.defaults[t.type]:i.defaults;return Gd(s,t)}}getColorSchema(){return this.colorSchema}toString(){const e=(t,i)=>{const s=t.indexOf(".")===-1?0:1,r=i.indexOf(".")===-1?0:1;return s!==r?s-r:t.localeCompare(i)};return Object.keys(this.colorsById).sort(e).map(t=>`- \`${t}\`: ${this.colorsById[t].description}`).join(`
`)}}const rB=new cXe;_n.add(zCe.ColorContribution,rB);function B(n,e,t,i,s){return rB.registerColor(n,e,t,i,s)}function dXe(n,e){var t,i,s,r;switch(n.op){case 0:return(t=Gd(n.value,e))==null?void 0:t.darken(n.factor);case 1:return(i=Gd(n.value,e))==null?void 0:i.lighten(n.factor);case 2:return(s=Gd(n.value,e))==null?void 0:s.transparent(n.factor);case 3:{const o=Gd(n.background,e);return o?(r=Gd(n.value,e))==null?void 0:r.makeOpaque(o):Gd(n.value,e)}case 4:for(const o of n.values){const a=Gd(o,e);if(a)return a}return;case 6:return Gd(e.defines(n.if)?n.then:n.else,e);case 5:{const o=Gd(n.value,e);if(!o)return;const a=Gd(n.background,e);return a?o.isDarkerThan(a)?ge.getLighterColor(o,a,n.factor).transparent(n.transparency):ge.getDarkerColor(o,a,n.factor).transparent(n.transparency):o.transparent(n.factor*n.transparency)}default:throw X3()}}function z0(n,e){return{op:0,value:n,factor:e}}function Ru(n,e){return{op:1,value:n,factor:e}}function kt(n,e){return{op:2,value:n,factor:e}}function KI(...n){return{op:4,values:n}}function uXe(n,e,t){return{op:6,if:n,then:e,else:t}}function Zae(n,e,t,i){return{op:5,value:n,background:e,factor:t,transparency:i}}function Gd(n,e){if(n!==null){if(typeof n=="string")return n[0]==="#"?ge.fromHex(n):e.getColor(n);if(n instanceof ge)return n;if(typeof n=="object")return dXe(n,e)}}const UCe="vscode://schemas/workbench-colors",$Ce=_n.as(tB.JSONContribution);$Ce.registerSchema(UCe,rB.getColorSchema());const Xae=new yi(()=>$Ce.notifySchemaChanged(UCe),200);rB.onDidChangeSchema(()=>{Xae.isScheduled()||Xae.schedule()});const Mt=B("foreground",{dark:"#CCCCCC",light:"#616161",hcDark:"#FFFFFF",hcLight:"#292929"},v("foreground","Overall foreground color. This color is only used if not overridden by a component."));B("disabledForeground",{dark:"#CCCCCC80",light:"#61616180",hcDark:"#A5A5A5",hcLight:"#7F7F7F"},v("disabledForeground","Overall foreground for disabled elements. This color is only used if not overridden by a component."));B("errorForeground",{dark:"#F48771",light:"#A1260D",hcDark:"#F48771",hcLight:"#B5200D"},v("errorForeground","Overall foreground color for error messages. This color is only used if not overridden by a component."));B("descriptionForeground",{light:"#717171",dark:kt(Mt,.7),hcDark:kt(Mt,.7),hcLight:kt(Mt,.7)},v("descriptionForeground","Foreground color for description text providing additional information, for example for a label."));const RP=B("icon.foreground",{dark:"#C5C5C5",light:"#424242",hcDark:"#FFFFFF",hcLight:"#292929"},v("iconForeground","The default color for icons in the workbench.")),of=B("focusBorder",{dark:"#007FD4",light:"#0090F1",hcDark:"#F38518",hcLight:"#006BBD"},v("focusBorder","Overall border color for focused elements. This color is only used if not overridden by a component.")),Yt=B("contrastBorder",{light:null,dark:null,hcDark:"#6FC3DF",hcLight:"#0F4A85"},v("contrastBorder","An extra border around elements to separate them from others for greater contrast.")),nn=B("contrastActiveBorder",{light:null,dark:null,hcDark:of,hcLight:of},v("activeContrastBorder","An extra border around active elements to separate them from others for greater contrast."));B("selection.background",null,v("selectionBackground","The background color of text selections in the workbench (e.g. for input fields or text areas). Note that this does not apply to selections within the editor."));const hXe=B("textLink.foreground",{light:"#006AB1",dark:"#3794FF",hcDark:"#21A6FF",hcLight:"#0F4A85"},v("textLinkForeground","Foreground color for links in text."));B("textLink.activeForeground",{light:"#006AB1",dark:"#3794FF",hcDark:"#21A6FF",hcLight:"#0F4A85"},v("textLinkActiveForeground","Foreground color for links in text when clicked on and on mouse hover."));B("textSeparator.foreground",{light:"#0000002e",dark:"#ffffff2e",hcDark:ge.black,hcLight:"#292929"},v("textSeparatorForeground","Color for text separators."));B("textPreformat.foreground",{light:"#A31515",dark:"#D7BA7D",hcDark:"#000000",hcLight:"#FFFFFF"},v("textPreformatForeground","Foreground color for preformatted text segments."));B("textPreformat.background",{light:"#0000001A",dark:"#FFFFFF1A",hcDark:"#FFFFFF",hcLight:"#09345f"},v("textPreformatBackground","Background color for preformatted text segments."));B("textBlockQuote.background",{light:"#f2f2f2",dark:"#222222",hcDark:null,hcLight:"#F2F2F2"},v("textBlockQuoteBackground","Background color for block quotes in text."));B("textBlockQuote.border",{light:"#007acc80",dark:"#007acc80",hcDark:ge.white,hcLight:"#292929"},v("textBlockQuoteBorder","Border color for block quotes in text."));B("textCodeBlock.background",{light:"#dcdcdc66",dark:"#0a0a0a66",hcDark:ge.black,hcLight:"#F2F2F2"},v("textCodeBlockBackground","Background color for code blocks in text."));B("sash.hoverBorder",of,v("sashActiveBorder","Border color of active sashes."));const E2=B("badge.background",{dark:"#4D4D4D",light:"#C4C4C4",hcDark:ge.black,hcLight:"#0F4A85"},v("badgeBackground","Badge background color. Badges are small information labels, e.g. for search results count.")),fXe=B("badge.foreground",{dark:ge.white,light:"#333",hcDark:ge.white,hcLight:ge.white},v("badgeForeground","Badge foreground color. Badges are small information labels, e.g. for search results count.")),MX=B("scrollbar.shadow",{dark:"#000000",light:"#DDDDDD",hcDark:null,hcLight:null},v("scrollbarShadow","Scrollbar shadow to indicate that the view is scrolled.")),jCe=B("scrollbarSlider.background",{dark:ge.fromHex("#797979").transparent(.4),light:ge.fromHex("#646464").transparent(.4),hcDark:kt(Yt,.6),hcLight:kt(Yt,.4)},v("scrollbarSliderBackground","Scrollbar slider background color.")),KCe=B("scrollbarSlider.hoverBackground",{dark:ge.fromHex("#646464").transparent(.7),light:ge.fromHex("#646464").transparent(.7),hcDark:kt(Yt,.8),hcLight:kt(Yt,.8)},v("scrollbarSliderHoverBackground","Scrollbar slider background color when hovering.")),qCe=B("scrollbarSlider.activeBackground",{dark:ge.fromHex("#BFBFBF").transparent(.4),light:ge.fromHex("#000000").transparent(.6),hcDark:Yt,hcLight:Yt},v("scrollbarSliderActiveBackground","Scrollbar slider background color when clicked on.")),gXe=B("progressBar.background",{dark:ge.fromHex("#0E70C0"),light:ge.fromHex("#0E70C0"),hcDark:Yt,hcLight:Yt},v("progressBarBackground","Background color of the progress bar that can show for long running operations.")),Ad=B("editor.background",{light:"#ffffff",dark:"#1E1E1E",hcDark:ge.black,hcLight:ge.white},v("editorBackground","Editor background color.")),bf=B("editor.foreground",{light:"#333333",dark:"#BBBBBB",hcDark:ge.white,hcLight:Mt},v("editorForeground","Editor default foreground color."));B("editorStickyScroll.background",Ad,v("editorStickyScrollBackground","Background color of sticky scroll in the editor"));B("editorStickyScrollHover.background",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:null,hcLight:ge.fromHex("#0F4A85").transparent(.1)},v("editorStickyScrollHoverBackground","Background color of sticky scroll on hover in the editor"));B("editorStickyScroll.border",{dark:null,light:null,hcDark:Yt,hcLight:Yt},v("editorStickyScrollBorder","Border color of sticky scroll in the editor"));B("editorStickyScroll.shadow",MX,v("editorStickyScrollShadow"," Shadow color of sticky scroll in the editor"));const Pl=B("editorWidget.background",{dark:"#252526",light:"#F3F3F3",hcDark:"#0C141F",hcLight:ge.white},v("editorWidgetBackground","Background color of editor widgets, such as find/replace.")),oB=B("editorWidget.foreground",Mt,v("editorWidgetForeground","Foreground color of editor widgets, such as find/replace.")),PX=B("editorWidget.border",{dark:"#454545",light:"#C8C8C8",hcDark:Yt,hcLight:Yt},v("editorWidgetBorder","Border color of editor widgets. The color is only used if the widget chooses to have a border and if the color is not overridden by a widget."));B("editorWidget.resizeBorder",null,v("editorWidgetResizeBorder","Border color of the resize bar of editor widgets. The color is only used if the widget chooses to have a resize border and if the color is not overridden by a widget."));B("editorError.background",null,v("editorError.background","Background color of error text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0);const aB=B("editorError.foreground",{dark:"#F14C4C",light:"#E51400",hcDark:"#F48771",hcLight:"#B5200D"},v("editorError.foreground","Foreground color of error squigglies in the editor.")),pXe=B("editorError.border",{dark:null,light:null,hcDark:ge.fromHex("#E47777").transparent(.8),hcLight:"#B5200D"},v("errorBorder","If set, color of double underlines for errors in the editor.")),mXe=B("editorWarning.background",null,v("editorWarning.background","Background color of warning text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),Jg=B("editorWarning.foreground",{dark:"#CCA700",light:"#BF8803",hcDark:"#FFD370",hcLight:"#895503"},v("editorWarning.foreground","Foreground color of warning squigglies in the editor.")),qI=B("editorWarning.border",{dark:null,light:null,hcDark:ge.fromHex("#FFCC00").transparent(.8),hcLight:ge.fromHex("#FFCC00").transparent(.8)},v("warningBorder","If set, color of double underlines for warnings in the editor."));B("editorInfo.background",null,v("editorInfo.background","Background color of info text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0);const af=B("editorInfo.foreground",{dark:"#3794FF",light:"#1a85ff",hcDark:"#3794FF",hcLight:"#1a85ff"},v("editorInfo.foreground","Foreground color of info squigglies in the editor.")),GI=B("editorInfo.border",{dark:null,light:null,hcDark:ge.fromHex("#3794FF").transparent(.8),hcLight:"#292929"},v("infoBorder","If set, color of double underlines for infos in the editor.")),_Xe=B("editorHint.foreground",{dark:ge.fromHex("#eeeeee").transparent(.7),light:"#6c6c6c",hcDark:null,hcLight:null},v("editorHint.foreground","Foreground color of hint squigglies in the editor."));B("editorHint.border",{dark:null,light:null,hcDark:ge.fromHex("#eeeeee").transparent(.8),hcLight:"#292929"},v("hintBorder","If set, color of double underlines for hints in the editor."));const vXe=B("editorLink.activeForeground",{dark:"#4E94CE",light:ge.blue,hcDark:ge.cyan,hcLight:"#292929"},v("activeLinkForeground","Color of active links.")),ym=B("editor.selectionBackground",{light:"#ADD6FF",dark:"#264F78",hcDark:"#f3f518",hcLight:"#0F4A85"},v("editorSelectionBackground","Color of the editor selection.")),bXe=B("editor.selectionForeground",{light:null,dark:null,hcDark:"#000000",hcLight:ge.white},v("editorSelectionForeground","Color of the selected text for high contrast.")),GCe=B("editor.inactiveSelectionBackground",{light:kt(ym,.5),dark:kt(ym,.5),hcDark:kt(ym,.7),hcLight:kt(ym,.5)},v("editorInactiveSelection","Color of the selection in an inactive editor. The color must not be opaque so as not to hide underlying decorations."),!0),OX=B("editor.selectionHighlightBackground",{light:Zae(ym,Ad,.3,.6),dark:Zae(ym,Ad,.3,.6),hcDark:null,hcLight:null},v("editorSelectionHighlight","Color for regions with the same content as the selection. The color must not be opaque so as not to hide underlying decorations."),!0);B("editor.selectionHighlightBorder",{light:null,dark:null,hcDark:nn,hcLight:nn},v("editorSelectionHighlightBorder","Border color for regions with the same content as the selection."));B("editor.findMatchBackground",{light:"#A8AC94",dark:"#515C6A",hcDark:null,hcLight:null},v("editorFindMatch","Color of the current search match."));const wXe=B("editor.findMatchForeground",null,v("editorFindMatchForeground","Text color of the current search match.")),wg=B("editor.findMatchHighlightBackground",{light:"#EA5C0055",dark:"#EA5C0055",hcDark:null,hcLight:null},v("findMatchHighlight","Color of the other search matches. The color must not be opaque so as not to hide underlying decorations."),!0),CXe=B("editor.findMatchHighlightForeground",null,v("findMatchHighlightForeground","Foreground color of the other search matches."),!0);B("editor.findRangeHighlightBackground",{dark:"#3a3d4166",light:"#b4b4b44d",hcDark:null,hcLight:null},v("findRangeHighlight","Color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0);B("editor.findMatchBorder",{light:null,dark:null,hcDark:nn,hcLight:nn},v("editorFindMatchBorder","Border color of the current search match."));const Sm=B("editor.findMatchHighlightBorder",{light:null,dark:null,hcDark:nn,hcLight:nn},v("findMatchHighlightBorder","Border color of the other search matches.")),yXe=B("editor.findRangeHighlightBorder",{dark:null,light:null,hcDark:kt(nn,.4),hcLight:kt(nn,.4)},v("findRangeHighlightBorder","Border color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0);B("editor.hoverHighlightBackground",{light:"#ADD6FF26",dark:"#264f7840",hcDark:"#ADD6FF26",hcLight:null},v("hoverHighlight","Highlight below the word for which a hover is shown. The color must not be opaque so as not to hide underlying decorations."),!0);const AP=B("editorHoverWidget.background",Pl,v("hoverBackground","Background color of the editor hover."));B("editorHoverWidget.foreground",oB,v("hoverForeground","Foreground color of the editor hover."));const YCe=B("editorHoverWidget.border",PX,v("hoverBorder","Border color of the editor hover."));B("editorHoverWidget.statusBarBackground",{dark:Ru(AP,.2),light:z0(AP,.05),hcDark:Pl,hcLight:Pl},v("statusBarBackground","Background color of the editor hover status bar."));const FX=B("editorInlayHint.foreground",{dark:"#969696",light:"#969696",hcDark:ge.white,hcLight:ge.black},v("editorInlayHintForeground","Foreground color of inline hints")),BX=B("editorInlayHint.background",{dark:kt(E2,.1),light:kt(E2,.1),hcDark:kt(ge.white,.1),hcLight:kt(E2,.1)},v("editorInlayHintBackground","Background color of inline hints")),SXe=B("editorInlayHint.typeForeground",FX,v("editorInlayHintForegroundTypes","Foreground color of inline hints for types")),xXe=B("editorInlayHint.typeBackground",BX,v("editorInlayHintBackgroundTypes","Background color of inline hints for types")),LXe=B("editorInlayHint.parameterForeground",FX,v("editorInlayHintForegroundParameter","Foreground color of inline hints for parameters")),kXe=B("editorInlayHint.parameterBackground",BX,v("editorInlayHintBackgroundParameter","Background color of inline hints for parameters")),EXe=B("editorLightBulb.foreground",{dark:"#FFCC00",light:"#DDB100",hcDark:"#FFCC00",hcLight:"#007ACC"},v("editorLightBulbForeground","The color used for the lightbulb actions icon."));B("editorLightBulbAutoFix.foreground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},v("editorLightBulbAutoFixForeground","The color used for the lightbulb auto fix actions icon."));B("editorLightBulbAi.foreground",EXe,v("editorLightBulbAiForeground","The color used for the lightbulb AI icon."));B("editor.snippetTabstopHighlightBackground",{dark:new ge(new Jt(124,124,124,.3)),light:new ge(new Jt(10,50,100,.2)),hcDark:new ge(new Jt(124,124,124,.3)),hcLight:new ge(new Jt(10,50,100,.2))},v("snippetTabstopHighlightBackground","Highlight background color of a snippet tabstop."));B("editor.snippetTabstopHighlightBorder",null,v("snippetTabstopHighlightBorder","Highlight border color of a snippet tabstop."));B("editor.snippetFinalTabstopHighlightBackground",null,v("snippetFinalTabstopHighlightBackground","Highlight background color of the final tabstop of a snippet."));B("editor.snippetFinalTabstopHighlightBorder",{dark:"#525252",light:new ge(new Jt(10,50,100,.5)),hcDark:"#525252",hcLight:"#292929"},v("snippetFinalTabstopHighlightBorder","Highlight border color of the final tabstop of a snippet."));const mU=new ge(new Jt(155,185,85,.2)),_U=new ge(new Jt(255,0,0,.2)),IXe=B("diffEditor.insertedTextBackground",{dark:"#9ccc2c33",light:"#9ccc2c40",hcDark:null,hcLight:null},v("diffEditorInserted","Background color for text that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),DXe=B("diffEditor.removedTextBackground",{dark:"#ff000033",light:"#ff000033",hcDark:null,hcLight:null},v("diffEditorRemoved","Background color for text that got removed. The color must not be opaque so as not to hide underlying decorations."),!0);B("diffEditor.insertedLineBackground",{dark:mU,light:mU,hcDark:null,hcLight:null},v("diffEditorInsertedLines","Background color for lines that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0);B("diffEditor.removedLineBackground",{dark:_U,light:_U,hcDark:null,hcLight:null},v("diffEditorRemovedLines","Background color for lines that got removed. The color must not be opaque so as not to hide underlying decorations."),!0);B("diffEditorGutter.insertedLineBackground",null,v("diffEditorInsertedLineGutter","Background color for the margin where lines got inserted."));B("diffEditorGutter.removedLineBackground",null,v("diffEditorRemovedLineGutter","Background color for the margin where lines got removed."));const NXe=B("diffEditorOverview.insertedForeground",null,v("diffEditorOverviewInserted","Diff overview ruler foreground for inserted content.")),TXe=B("diffEditorOverview.removedForeground",null,v("diffEditorOverviewRemoved","Diff overview ruler foreground for removed content."));B("diffEditor.insertedTextBorder",{dark:null,light:null,hcDark:"#33ff2eff",hcLight:"#374E06"},v("diffEditorInsertedOutline","Outline color for the text that got inserted."));B("diffEditor.removedTextBorder",{dark:null,light:null,hcDark:"#FF008F",hcLight:"#AD0707"},v("diffEditorRemovedOutline","Outline color for text that got removed."));B("diffEditor.border",{dark:null,light:null,hcDark:Yt,hcLight:Yt},v("diffEditorBorder","Border color between the two text editors."));B("diffEditor.diagonalFill",{dark:"#cccccc33",light:"#22222233",hcDark:null,hcLight:null},v("diffDiagonalFill","Color of the diff editor's diagonal fill. The diagonal fill is used in side-by-side diff views."));B("diffEditor.unchangedRegionBackground","sideBar.background",v("diffEditor.unchangedRegionBackground","The background color of unchanged blocks in the diff editor."));B("diffEditor.unchangedRegionForeground","foreground",v("diffEditor.unchangedRegionForeground","The foreground color of unchanged blocks in the diff editor."));B("diffEditor.unchangedCodeBackground",{dark:"#74747429",light:"#b8b8b829",hcDark:null,hcLight:null},v("diffEditor.unchangedCodeBackground","The background color of unchanged code in the diff editor."));const Ax=B("widget.shadow",{dark:kt(ge.black,.36),light:kt(ge.black,.16),hcDark:null,hcLight:null},v("widgetShadow","Shadow color of widgets such as find/replace inside the editor.")),ZCe=B("widget.border",{dark:null,light:null,hcDark:Yt,hcLight:Yt},v("widgetBorder","Border color of widgets such as find/replace inside the editor.")),Qae=B("toolbar.hoverBackground",{dark:"#5a5d5e50",light:"#b8b8b850",hcDark:null,hcLight:null},v("toolbarHoverBackground","Toolbar background when hovering over actions using the mouse"));B("toolbar.hoverOutline",{dark:null,light:null,hcDark:nn,hcLight:nn},v("toolbarHoverOutline","Toolbar outline when hovering over actions using the mouse"));B("toolbar.activeBackground",{dark:Ru(Qae,.1),light:z0(Qae,.1),hcDark:null,hcLight:null},v("toolbarActiveBackground","Toolbar background when holding the mouse over actions"));const RXe=B("breadcrumb.foreground",kt(Mt,.8),v("breadcrumbsFocusForeground","Color of focused breadcrumb items.")),AXe=B("breadcrumb.background",Ad,v("breadcrumbsBackground","Background color of breadcrumb items.")),Jae=B("breadcrumb.focusForeground",{light:z0(Mt,.2),dark:Ru(Mt,.1),hcDark:Ru(Mt,.1),hcLight:Ru(Mt,.1)},v("breadcrumbsFocusForeground","Color of focused breadcrumb items.")),MXe=B("breadcrumb.activeSelectionForeground",{light:z0(Mt,.2),dark:Ru(Mt,.1),hcDark:Ru(Mt,.1),hcLight:Ru(Mt,.1)},v("breadcrumbsSelectedForeground","Color of selected breadcrumb items."));B("breadcrumbPicker.background",Pl,v("breadcrumbsSelectedBackground","Background color of breadcrumb item picker."));const XCe=.5,ele=ge.fromHex("#40C8AE").transparent(XCe),tle=ge.fromHex("#40A6FF").transparent(XCe),ile=ge.fromHex("#606060").transparent(.4),WX=.4,MS=1,vU=B("merge.currentHeaderBackground",{dark:ele,light:ele,hcDark:null,hcLight:null},v("mergeCurrentHeaderBackground","Current header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);B("merge.currentContentBackground",kt(vU,WX),v("mergeCurrentContentBackground","Current content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const bU=B("merge.incomingHeaderBackground",{dark:tle,light:tle,hcDark:null,hcLight:null},v("mergeIncomingHeaderBackground","Incoming header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);B("merge.incomingContentBackground",kt(bU,WX),v("mergeIncomingContentBackground","Incoming content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const wU=B("merge.commonHeaderBackground",{dark:ile,light:ile,hcDark:null,hcLight:null},v("mergeCommonHeaderBackground","Common ancestor header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);B("merge.commonContentBackground",kt(wU,WX),v("mergeCommonContentBackground","Common ancestor content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const PS=B("merge.border",{dark:null,light:null,hcDark:"#C3DF6F",hcLight:"#007ACC"},v("mergeBorder","Border color on headers and the splitter in inline merge-conflicts."));B("editorOverviewRuler.currentContentForeground",{dark:kt(vU,MS),light:kt(vU,MS),hcDark:PS,hcLight:PS},v("overviewRulerCurrentContentForeground","Current overview ruler foreground for inline merge-conflicts."));B("editorOverviewRuler.incomingContentForeground",{dark:kt(bU,MS),light:kt(bU,MS),hcDark:PS,hcLight:PS},v("overviewRulerIncomingContentForeground","Incoming overview ruler foreground for inline merge-conflicts."));B("editorOverviewRuler.commonContentForeground",{dark:kt(wU,MS),light:kt(wU,MS),hcDark:PS,hcLight:PS},v("overviewRulerCommonContentForeground","Common ancestor overview ruler foreground for inline merge-conflicts."));const c8=B("editorOverviewRuler.findMatchForeground",{dark:"#d186167e",light:"#d186167e",hcDark:"#AB5A00",hcLight:"#AB5A00"},v("overviewRulerFindMatchForeground","Overview ruler marker color for find matches. The color must not be opaque so as not to hide underlying decorations."),!0),QCe=B("editorOverviewRuler.selectionHighlightForeground","#A0A0A0CC",v("overviewRulerSelectionHighlightForeground","Overview ruler marker color for selection highlights. The color must not be opaque so as not to hide underlying decorations."),!0),PXe=B("problemsErrorIcon.foreground",aB,v("problemsErrorIconForeground","The color used for the problems error icon.")),OXe=B("problemsWarningIcon.foreground",Jg,v("problemsWarningIconForeground","The color used for the problems warning icon.")),FXe=B("problemsInfoIcon.foreground",af,v("problemsInfoIconForeground","The color used for the problems info icon.")),CU=B("minimap.findMatchHighlight",{light:"#d18616",dark:"#d18616",hcDark:"#AB5A00",hcLight:"#0F4A85"},v("minimapFindMatchHighlight","Minimap marker color for find matches."),!0),lB=B("minimap.selectionOccurrenceHighlight",{light:"#c9c9c9",dark:"#676767",hcDark:"#ffffff",hcLight:"#0F4A85"},v("minimapSelectionOccurrenceHighlight","Minimap marker color for repeating editor selections."),!0),nle=B("minimap.selectionHighlight",{light:"#ADD6FF",dark:"#264F78",hcDark:"#ffffff",hcLight:"#0F4A85"},v("minimapSelectionHighlight","Minimap marker color for the editor selection."),!0),BXe=B("minimap.infoHighlight",{dark:af,light:af,hcDark:GI,hcLight:GI},v("minimapInfo","Minimap marker color for infos.")),WXe=B("minimap.warningHighlight",{dark:Jg,light:Jg,hcDark:qI,hcLight:qI},v("overviewRuleWarning","Minimap marker color for warnings.")),HXe=B("minimap.errorHighlight",{dark:new ge(new Jt(255,18,18,.7)),light:new ge(new Jt(255,18,18,.7)),hcDark:new ge(new Jt(255,50,50,1)),hcLight:"#B5200D"},v("minimapError","Minimap marker color for errors.")),VXe=B("minimap.background",null,v("minimapBackground","Minimap background color.")),zXe=B("minimap.foregroundOpacity",ge.fromHex("#000f"),v("minimapForegroundOpacity",'Opacity of foreground elements rendered in the minimap. For example, "#000000c0" will render the elements with 75% opacity.'));B("minimapSlider.background",kt(jCe,.5),v("minimapSliderBackground","Minimap slider background color."));B("minimapSlider.hoverBackground",kt(KCe,.5),v("minimapSliderHoverBackground","Minimap slider background color when hovering."));B("minimapSlider.activeBackground",kt(qCe,.5),v("minimapSliderActiveBackground","Minimap slider background color when clicked on."));B("charts.foreground",Mt,v("chartsForeground","The foreground color used in charts."));B("charts.lines",kt(Mt,.5),v("chartsLines","The color used for horizontal lines in charts."));B("charts.red",aB,v("chartsRed","The red color used in chart visualizations."));B("charts.blue",af,v("chartsBlue","The blue color used in chart visualizations."));B("charts.yellow",Jg,v("chartsYellow","The yellow color used in chart visualizations."));B("charts.orange",CU,v("chartsOrange","The orange color used in chart visualizations."));B("charts.green",{dark:"#89D185",light:"#388A34",hcDark:"#89D185",hcLight:"#374e06"},v("chartsGreen","The green color used in chart visualizations."));B("charts.purple",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},v("chartsPurple","The purple color used in chart visualizations."));const yU=B("input.background",{dark:"#3C3C3C",light:ge.white,hcDark:ge.black,hcLight:ge.white},v("inputBoxBackground","Input box background.")),JCe=B("input.foreground",Mt,v("inputBoxForeground","Input box foreground.")),e1e=B("input.border",{dark:null,light:null,hcDark:Yt,hcLight:Yt},v("inputBoxBorder","Input box border.")),cB=B("inputOption.activeBorder",{dark:"#007ACC",light:"#007ACC",hcDark:Yt,hcLight:Yt},v("inputBoxActiveOptionBorder","Border color of activated options in input fields.")),UXe=B("inputOption.hoverBackground",{dark:"#5a5d5e80",light:"#b8b8b850",hcDark:null,hcLight:null},v("inputOption.hoverBackground","Background color of activated options in input fields.")),HN=B("inputOption.activeBackground",{dark:kt(of,.4),light:kt(of,.2),hcDark:ge.transparent,hcLight:ge.transparent},v("inputOption.activeBackground","Background hover color of options in input fields.")),dB=B("inputOption.activeForeground",{dark:ge.white,light:ge.black,hcDark:Mt,hcLight:Mt},v("inputOption.activeForeground","Foreground color of activated options in input fields."));B("input.placeholderForeground",{light:kt(Mt,.5),dark:kt(Mt,.5),hcDark:kt(Mt,.7),hcLight:kt(Mt,.7)},v("inputPlaceholderForeground","Input box foreground color for placeholder text."));const $Xe=B("inputValidation.infoBackground",{dark:"#063B49",light:"#D6ECF2",hcDark:ge.black,hcLight:ge.white},v("inputValidationInfoBackground","Input validation background color for information severity.")),jXe=B("inputValidation.infoForeground",{dark:null,light:null,hcDark:null,hcLight:Mt},v("inputValidationInfoForeground","Input validation foreground color for information severity.")),KXe=B("inputValidation.infoBorder",{dark:"#007acc",light:"#007acc",hcDark:Yt,hcLight:Yt},v("inputValidationInfoBorder","Input validation border color for information severity.")),qXe=B("inputValidation.warningBackground",{dark:"#352A05",light:"#F6F5D2",hcDark:ge.black,hcLight:ge.white},v("inputValidationWarningBackground","Input validation background color for warning severity.")),GXe=B("inputValidation.warningForeground",{dark:null,light:null,hcDark:null,hcLight:Mt},v("inputValidationWarningForeground","Input validation foreground color for warning severity.")),YXe=B("inputValidation.warningBorder",{dark:"#B89500",light:"#B89500",hcDark:Yt,hcLight:Yt},v("inputValidationWarningBorder","Input validation border color for warning severity.")),ZXe=B("inputValidation.errorBackground",{dark:"#5A1D1D",light:"#F2DEDE",hcDark:ge.black,hcLight:ge.white},v("inputValidationErrorBackground","Input validation background color for error severity.")),XXe=B("inputValidation.errorForeground",{dark:null,light:null,hcDark:null,hcLight:Mt},v("inputValidationErrorForeground","Input validation foreground color for error severity.")),QXe=B("inputValidation.errorBorder",{dark:"#BE1100",light:"#BE1100",hcDark:Yt,hcLight:Yt},v("inputValidationErrorBorder","Input validation border color for error severity.")),uB=B("dropdown.background",{dark:"#3C3C3C",light:ge.white,hcDark:ge.black,hcLight:ge.white},v("dropdownBackground","Dropdown background.")),JXe=B("dropdown.listBackground",{dark:null,light:null,hcDark:ge.black,hcLight:ge.white},v("dropdownListBackground","Dropdown list background.")),HX=B("dropdown.foreground",{dark:"#F0F0F0",light:Mt,hcDark:ge.white,hcLight:Mt},v("dropdownForeground","Dropdown foreground.")),VX=B("dropdown.border",{dark:uB,light:"#CECECE",hcDark:Yt,hcLight:Yt},v("dropdownBorder","Dropdown border.")),t1e=B("button.foreground",ge.white,v("buttonForeground","Button foreground color.")),eQe=B("button.separator",kt(t1e,.4),v("buttonSeparator","Button separator color.")),uk=B("button.background",{dark:"#0E639C",light:"#007ACC",hcDark:null,hcLight:"#0F4A85"},v("buttonBackground","Button background color.")),tQe=B("button.hoverBackground",{dark:Ru(uk,.2),light:z0(uk,.2),hcDark:uk,hcLight:uk},v("buttonHoverBackground","Button background color when hovering.")),iQe=B("button.border",Yt,v("buttonBorder","Button border color.")),nQe=B("button.secondaryForeground",{dark:ge.white,light:ge.white,hcDark:ge.white,hcLight:Mt},v("buttonSecondaryForeground","Secondary button foreground color.")),SU=B("button.secondaryBackground",{dark:"#3A3D41",light:"#5F6A79",hcDark:null,hcLight:ge.white},v("buttonSecondaryBackground","Secondary button background color.")),sQe=B("button.secondaryHoverBackground",{dark:Ru(SU,.2),light:z0(SU,.2),hcDark:null,hcLight:null},v("buttonSecondaryHoverBackground","Secondary button background color when hovering.")),hk=B("radio.activeForeground",dB,v("radioActiveForeground","Foreground color of active radio option.")),rQe=B("radio.activeBackground",HN,v("radioBackground","Background color of active radio option.")),oQe=B("radio.activeBorder",cB,v("radioActiveBorder","Border color of the active radio option.")),aQe=B("radio.inactiveForeground",null,v("radioInactiveForeground","Foreground color of inactive radio option.")),lQe=B("radio.inactiveBackground",null,v("radioInactiveBackground","Background color of inactive radio option.")),cQe=B("radio.inactiveBorder",{light:kt(hk,.2),dark:kt(hk,.2),hcDark:kt(hk,.4),hcLight:kt(hk,.2)},v("radioInactiveBorder","Border color of the inactive radio option.")),dQe=B("radio.inactiveHoverBackground",UXe,v("radioHoverBackground","Background color of inactive active radio option when hovering.")),uQe=B("checkbox.background",uB,v("checkbox.background","Background color of checkbox widget."));B("checkbox.selectBackground",Pl,v("checkbox.select.background","Background color of checkbox widget when the element it's in is selected."));const hQe=B("checkbox.foreground",HX,v("checkbox.foreground","Foreground color of checkbox widget.")),fQe=B("checkbox.border",VX,v("checkbox.border","Border color of checkbox widget."));B("checkbox.selectBorder",RP,v("checkbox.select.border","Border color of checkbox widget when the element it's in is selected."));const gQe=B("keybindingLabel.background",{dark:new ge(new Jt(128,128,128,.17)),light:new ge(new Jt(221,221,221,.4)),hcDark:ge.transparent,hcLight:ge.transparent},v("keybindingLabelBackground","Keybinding label background color. The keybinding label is used to represent a keyboard shortcut.")),pQe=B("keybindingLabel.foreground",{dark:ge.fromHex("#CCCCCC"),light:ge.fromHex("#555555"),hcDark:ge.white,hcLight:Mt},v("keybindingLabelForeground","Keybinding label foreground color. The keybinding label is used to represent a keyboard shortcut.")),mQe=B("keybindingLabel.border",{dark:new ge(new Jt(51,51,51,.6)),light:new ge(new Jt(204,204,204,.4)),hcDark:new ge(new Jt(111,195,223)),hcLight:Yt},v("keybindingLabelBorder","Keybinding label border color. The keybinding label is used to represent a keyboard shortcut.")),_Qe=B("keybindingLabel.bottomBorder",{dark:new ge(new Jt(68,68,68,.6)),light:new ge(new Jt(187,187,187,.4)),hcDark:new ge(new Jt(111,195,223)),hcLight:Mt},v("keybindingLabelBottomBorder","Keybinding label border bottom color. The keybinding label is used to represent a keyboard shortcut.")),vQe=B("list.focusBackground",null,v("listFocusBackground","List/Tree background color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),bQe=B("list.focusForeground",null,v("listFocusForeground","List/Tree foreground color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),wQe=B("list.focusOutline",{dark:of,light:of,hcDark:nn,hcLight:nn},v("listFocusOutline","List/Tree outline color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),CQe=B("list.focusAndSelectionOutline",null,v("listFocusAndSelectionOutline","List/Tree outline color for the focused item when the list/tree is active and selected. An active list/tree has keyboard focus, an inactive does not.")),f0=B("list.activeSelectionBackground",{dark:"#04395E",light:"#0060C0",hcDark:null,hcLight:ge.fromHex("#0F4A85").transparent(.1)},v("listActiveSelectionBackground","List/Tree background color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),YI=B("list.activeSelectionForeground",{dark:ge.white,light:ge.white,hcDark:null,hcLight:null},v("listActiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),i1e=B("list.activeSelectionIconForeground",null,v("listActiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),yQe=B("list.inactiveSelectionBackground",{dark:"#37373D",light:"#E4E6F1",hcDark:null,hcLight:ge.fromHex("#0F4A85").transparent(.1)},v("listInactiveSelectionBackground","List/Tree background color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),SQe=B("list.inactiveSelectionForeground",null,v("listInactiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),xQe=B("list.inactiveSelectionIconForeground",null,v("listInactiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),LQe=B("list.inactiveFocusBackground",null,v("listInactiveFocusBackground","List/Tree background color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),kQe=B("list.inactiveFocusOutline",null,v("listInactiveFocusOutline","List/Tree outline color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),n1e=B("list.hoverBackground",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:ge.white.transparent(.1),hcLight:ge.fromHex("#0F4A85").transparent(.1)},v("listHoverBackground","List/Tree background when hovering over items using the mouse.")),s1e=B("list.hoverForeground",null,v("listHoverForeground","List/Tree foreground when hovering over items using the mouse.")),EQe=B("list.dropBackground",{dark:"#062F4A",light:"#D6EBFF",hcDark:null,hcLight:null},v("listDropBackground","List/Tree drag and drop background when moving items over other items when using the mouse.")),IQe=B("list.dropBetweenBackground",{dark:RP,light:RP,hcDark:null,hcLight:null},v("listDropBetweenBackground","List/Tree drag and drop border color when moving items between items when using the mouse.")),x1=B("list.highlightForeground",{dark:"#2AAAFF",light:"#0066BF",hcDark:of,hcLight:of},v("highlight","List/Tree foreground color of the match highlights when searching inside the list/tree.")),DQe=B("list.focusHighlightForeground",{dark:x1,light:uXe(f0,x1,"#BBE7FF"),hcDark:x1,hcLight:x1},v("listFocusHighlightForeground","List/Tree foreground color of the match highlights on actively focused items when searching inside the list/tree."));B("list.invalidItemForeground",{dark:"#B89500",light:"#B89500",hcDark:"#B89500",hcLight:"#B5200D"},v("invalidItemForeground","List/Tree foreground color for invalid items, for example an unresolved root in explorer."));B("list.errorForeground",{dark:"#F88070",light:"#B01011",hcDark:null,hcLight:null},v("listErrorForeground","Foreground color of list items containing errors."));B("list.warningForeground",{dark:"#CCA700",light:"#855F00",hcDark:null,hcLight:null},v("listWarningForeground","Foreground color of list items containing warnings."));const NQe=B("listFilterWidget.background",{light:z0(Pl,0),dark:Ru(Pl,0),hcDark:Pl,hcLight:Pl},v("listFilterWidgetBackground","Background color of the type filter widget in lists and trees.")),TQe=B("listFilterWidget.outline",{dark:ge.transparent,light:ge.transparent,hcDark:"#f38518",hcLight:"#007ACC"},v("listFilterWidgetOutline","Outline color of the type filter widget in lists and trees.")),RQe=B("listFilterWidget.noMatchesOutline",{dark:"#BE1100",light:"#BE1100",hcDark:Yt,hcLight:Yt},v("listFilterWidgetNoMatchesOutline","Outline color of the type filter widget in lists and trees, when there are no matches.")),AQe=B("listFilterWidget.shadow",Ax,v("listFilterWidgetShadow","Shadow color of the type filter widget in lists and trees."));B("list.filterMatchBackground",{dark:wg,light:wg,hcDark:null,hcLight:null},v("listFilterMatchHighlight","Background color of the filtered match."));B("list.filterMatchBorder",{dark:Sm,light:Sm,hcDark:Yt,hcLight:nn},v("listFilterMatchHighlightBorder","Border color of the filtered match."));B("list.deemphasizedForeground",{dark:"#8C8C8C",light:"#8E8E90",hcDark:"#A7A8A9",hcLight:"#666666"},v("listDeemphasizedForeground","List/Tree foreground color for items that are deemphasized."));const r1e=B("tree.indentGuidesStroke",{dark:"#585858",light:"#a9a9a9",hcDark:"#a9a9a9",hcLight:"#a5a5a5"},v("treeIndentGuidesStroke","Tree stroke color for the indentation guides.")),MQe=B("tree.inactiveIndentGuidesStroke",kt(r1e,.4),v("treeInactiveIndentGuidesStroke","Tree stroke color for the indentation guides that are not active.")),PQe=B("tree.tableColumnsBorder",{dark:"#CCCCCC20",light:"#61616120",hcDark:null,hcLight:null},v("tableColumnsBorder","Table border color between columns.")),OQe=B("tree.tableOddRowsBackground",{dark:kt(Mt,.04),light:kt(Mt,.04),hcDark:null,hcLight:null},v("tableOddRowsBackgroundColor","Background color for odd table rows."));B("editorActionList.background",Pl,v("editorActionListBackground","Action List background color."));B("editorActionList.foreground",oB,v("editorActionListForeground","Action List foreground color."));B("editorActionList.focusForeground",YI,v("editorActionListFocusForeground","Action List foreground color for the focused item."));B("editorActionList.focusBackground",f0,v("editorActionListFocusBackground","Action List background color for the focused item."));const FQe=B("menu.border",{dark:null,light:null,hcDark:Yt,hcLight:Yt},v("menuBorder","Border color of menus.")),BQe=B("menu.foreground",HX,v("menuForeground","Foreground color of menu items.")),WQe=B("menu.background",uB,v("menuBackground","Background color of menu items.")),HQe=B("menu.selectionForeground",YI,v("menuSelectionForeground","Foreground color of the selected menu item in menus.")),VQe=B("menu.selectionBackground",f0,v("menuSelectionBackground","Background color of the selected menu item in menus.")),zQe=B("menu.selectionBorder",{dark:null,light:null,hcDark:nn,hcLight:nn},v("menuSelectionBorder","Border color of the selected menu item in menus.")),UQe=B("menu.separatorBackground",{dark:"#606060",light:"#D4D4D4",hcDark:Yt,hcLight:Yt},v("menuSeparatorBackground","Color of a separator menu item in menus.")),sle=B("quickInput.background",Pl,v("pickerBackground","Quick picker background color. The quick picker widget is the container for pickers like the command palette.")),$Qe=B("quickInput.foreground",oB,v("pickerForeground","Quick picker foreground color. The quick picker widget is the container for pickers like the command palette.")),jQe=B("quickInputTitle.background",{dark:new ge(new Jt(255,255,255,.105)),light:new ge(new Jt(0,0,0,.06)),hcDark:"#000000",hcLight:ge.white},v("pickerTitleBackground","Quick picker title background color. The quick picker widget is the container for pickers like the command palette.")),o1e=B("pickerGroup.foreground",{dark:"#3794FF",light:"#0066BF",hcDark:ge.white,hcLight:"#0F4A85"},v("pickerGroupForeground","Quick picker color for grouping labels.")),KQe=B("pickerGroup.border",{dark:"#3F3F46",light:"#CCCEDB",hcDark:ge.white,hcLight:"#0F4A85"},v("pickerGroupBorder","Quick picker color for grouping borders.")),rle=B("quickInput.list.focusBackground",null,"",void 0,v("quickInput.list.focusBackground deprecation","Please use quickInputList.focusBackground instead")),ZI=B("quickInputList.focusForeground",YI,v("quickInput.listFocusForeground","Quick picker foreground color for the focused item.")),zX=B("quickInputList.focusIconForeground",i1e,v("quickInput.listFocusIconForeground","Quick picker icon foreground color for the focused item.")),XI=B("quickInputList.focusBackground",{dark:KI(rle,f0),light:KI(rle,f0),hcDark:null,hcLight:null},v("quickInput.listFocusBackground","Quick picker background color for the focused item."));B("search.resultsInfoForeground",{light:Mt,dark:kt(Mt,.65),hcDark:Mt,hcLight:Mt},v("search.resultsInfoForeground","Color of the text in the search viewlet's completion message."));B("searchEditor.findMatchBackground",{light:kt(wg,.66),dark:kt(wg,.66),hcDark:wg,hcLight:wg},v("searchEditor.queryMatch","Color of the Search Editor query matches."));B("searchEditor.findMatchBorder",{light:kt(Sm,.66),dark:kt(Sm,.66),hcDark:Sm,hcLight:Sm},v("searchEditor.editorFindMatchBorder","Border color of the Search Editor query matches."));var qQe=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},ole=function(n,e){return function(t,i){e(t,i,n)}};const wf=Wt("hoverService");let OS=class extends ee{get delay(){return this.isInstantlyHovering()?0:this._delay}constructor(e,t,i={},s,r){super(),this.placement=e,this.instantHover=t,this.overrideOptions=i,this.configurationService=s,this.hoverService=r,this.lastHoverHideTime=0,this.timeLimit=200,this.hoverDisposables=this._register(new ue),this._delay=this.configurationService.getValue("workbench.hover.delay"),this._register(this.configurationService.onDidChangeConfiguration(o=>{o.affectsConfiguration("workbench.hover.delay")&&(this._delay=this.configurationService.getValue("workbench.hover.delay"))}))}showHover(e,t){const i=typeof this.overrideOptions=="function"?this.overrideOptions(e,t):this.overrideOptions;this.hoverDisposables.clear();const s=Ns(e.target)?[e.target]:e.target.targetElements;for(const o of s)this.hoverDisposables.add(Cn(o,"keydown",a=>{a.equals(9)&&this.hoverService.hideHover()}));const r=Ns(e.content)?void 0:e.content.toString();return this.hoverService.showHover({...e,...i,persistence:{hideOnKeyDown:!0,...i.persistence},id:r,appearance:{...e.appearance,compact:!0,skipFadeInAnimation:this.isInstantlyHovering(),...i.appearance}},t)}isInstantlyHovering(){return this.instantHover&&Date.now()-this.lastHoverHideTime<this.timeLimit}onDidHideHover(){this.hoverDisposables.clear(),this.instantHover&&(this.lastHoverHideTime=Date.now())}};OS=qQe([ole(3,Tt),ole(4,wf)],OS);const hp=Wt("contextViewService"),ol=Wt("contextMenuService"),hi=Wt("keybindingService");class Mx{constructor(){this._hooks=new ue,this._pointerMoveCallback=null,this._onStopCallback=null}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(e,t){if(!this.isMonitoring())return;this._hooks.clear(),this._pointerMoveCallback=null;const i=this._onStopCallback;this._onStopCallback=null,e&&i&&i(t)}isMonitoring(){return!!this._pointerMoveCallback}startMonitoring(e,t,i,s,r){this.isMonitoring()&&this.stopMonitoring(!1),this._pointerMoveCallback=s,this._onStopCallback=r;let o=e;try{e.setPointerCapture(t),this._hooks.add(Ye(()=>{try{e.releasePointerCapture(t)}catch{}}))}catch{o=nt(e)}this._hooks.add(re(o,Se.POINTER_MOVE,a=>{if(a.buttons!==i){this.stopMonitoring(!0);return}a.preventDefault(),this._pointerMoveCallback(a)})),this._hooks.add(re(o,Se.POINTER_UP,a=>this.stopMonitoring(!0)))}}function Kn(n,e,t){let i=null,s=null;if(typeof t.value=="function"?(i="value",s=t.value,s.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof t.get=="function"&&(i="get",s=t.get),!s)throw new Error("not supported");const r=`$memoize$${e}`;t[i]=function(...o){return this.hasOwnProperty(r)||Object.defineProperty(this,r,{configurable:!1,enumerable:!1,writable:!1,value:s.apply(this,o)}),this[r]}}var GQe=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Hi;(function(n){n.Tap="-monaco-gesturetap",n.Change="-monaco-gesturechange",n.Start="-monaco-gesturestart",n.End="-monaco-gesturesend",n.Contextmenu="-monaco-gesturecontextmenu"})(Hi||(Hi={}));const ur=class ur extends ee{constructor(){super(),this.dispatched=!1,this.targets=new xo,this.ignoreTargets=new xo,this.activeTouches={},this.handle=null,this._lastSetTapCountTime=0,this._register(Ee.runAndSubscribe(H3,({window:e,disposables:t})=>{t.add(re(e.document,"touchstart",i=>this.onTouchStart(i),{passive:!1})),t.add(re(e.document,"touchend",i=>this.onTouchEnd(e,i))),t.add(re(e.document,"touchmove",i=>this.onTouchMove(i),{passive:!1}))},{window:Ei,disposables:this._store}))}static addTarget(e){if(!ur.isTouchDevice())return ee.None;ur.INSTANCE||(ur.INSTANCE=new ur);const t=ur.INSTANCE.targets.push(e);return Ye(t)}static ignoreTarget(e){if(!ur.isTouchDevice())return ee.None;ur.INSTANCE||(ur.INSTANCE=new ur);const t=ur.INSTANCE.ignoreTargets.push(e);return Ye(t)}static isTouchDevice(){return"ontouchstart"in Ei||navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(e){const t=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let i=0,s=e.targetTouches.length;i<s;i++){const r=e.targetTouches.item(i);this.activeTouches[r.identifier]={id:r.identifier,initialTarget:r.target,initialTimeStamp:t,initialPageX:r.pageX,initialPageY:r.pageY,rollingTimestamps:[t],rollingPageX:[r.pageX],rollingPageY:[r.pageY]};const o=this.newGestureEvent(Hi.Start,r.target);o.pageX=r.pageX,o.pageY=r.pageY,this.dispatchEvent(o)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}onTouchEnd(e,t){const i=Date.now(),s=Object.keys(this.activeTouches).length;for(let r=0,o=t.changedTouches.length;r<o;r++){const a=t.changedTouches.item(r);if(!this.activeTouches.hasOwnProperty(String(a.identifier))){console.warn("move of an UNKNOWN touch",a);continue}const l=this.activeTouches[a.identifier],c=Date.now()-l.initialTimeStamp;if(c<ur.HOLD_DELAY&&Math.abs(l.initialPageX-oc(l.rollingPageX))<30&&Math.abs(l.initialPageY-oc(l.rollingPageY))<30){const d=this.newGestureEvent(Hi.Tap,l.initialTarget);d.pageX=oc(l.rollingPageX),d.pageY=oc(l.rollingPageY),this.dispatchEvent(d)}else if(c>=ur.HOLD_DELAY&&Math.abs(l.initialPageX-oc(l.rollingPageX))<30&&Math.abs(l.initialPageY-oc(l.rollingPageY))<30){const d=this.newGestureEvent(Hi.Contextmenu,l.initialTarget);d.pageX=oc(l.rollingPageX),d.pageY=oc(l.rollingPageY),this.dispatchEvent(d)}else if(s===1){const d=oc(l.rollingPageX),u=oc(l.rollingPageY),h=oc(l.rollingTimestamps)-l.rollingTimestamps[0],f=d-l.rollingPageX[0],g=u-l.rollingPageY[0],p=[...this.targets].filter(_=>l.initialTarget instanceof Node&&_.contains(l.initialTarget));this.inertia(e,p,i,Math.abs(f)/h,f>0?1:-1,d,Math.abs(g)/h,g>0?1:-1,u)}this.dispatchEvent(this.newGestureEvent(Hi.End,l.initialTarget)),delete this.activeTouches[a.identifier]}this.dispatched&&(t.preventDefault(),t.stopPropagation(),this.dispatched=!1)}newGestureEvent(e,t){const i=document.createEvent("CustomEvent");return i.initEvent(e,!1,!0),i.initialTarget=t,i.tapCount=0,i}dispatchEvent(e){if(e.type===Hi.Tap){const t=new Date().getTime();let i=0;t-this._lastSetTapCountTime>ur.CLEAR_TAP_COUNT_TIME?i=1:i=2,this._lastSetTapCountTime=t,e.tapCount=i}else(e.type===Hi.Change||e.type===Hi.Contextmenu)&&(this._lastSetTapCountTime=0);if(e.initialTarget instanceof Node){for(const i of this.ignoreTargets)if(i.contains(e.initialTarget))return;const t=[];for(const i of this.targets)if(i.contains(e.initialTarget)){let s=0,r=e.initialTarget;for(;r&&r!==i;)s++,r=r.parentElement;t.push([s,i])}t.sort((i,s)=>i[0]-s[0]);for(const[i,s]of t)s.dispatchEvent(e),this.dispatched=!0}}inertia(e,t,i,s,r,o,a,l,c){this.handle=il(e,()=>{const d=Date.now(),u=d-i;let h=0,f=0,g=!0;s+=ur.SCROLL_FRICTION*u,a+=ur.SCROLL_FRICTION*u,s>0&&(g=!1,h=r*s*u),a>0&&(g=!1,f=l*a*u);const p=this.newGestureEvent(Hi.Change);p.translationX=h,p.translationY=f,t.forEach(_=>_.dispatchEvent(p)),g||this.inertia(e,t,d,s,r,o+h,a,l,c+f)})}onTouchMove(e){const t=Date.now();for(let i=0,s=e.changedTouches.length;i<s;i++){const r=e.changedTouches.item(i);if(!this.activeTouches.hasOwnProperty(String(r.identifier))){console.warn("end of an UNKNOWN touch",r);continue}const o=this.activeTouches[r.identifier],a=this.newGestureEvent(Hi.Change,o.initialTarget);a.translationX=r.pageX-oc(o.rollingPageX),a.translationY=r.pageY-oc(o.rollingPageY),a.pageX=r.pageX,a.pageY=r.pageY,this.dispatchEvent(a),o.rollingPageX.length>3&&(o.rollingPageX.shift(),o.rollingPageY.shift(),o.rollingTimestamps.shift()),o.rollingPageX.push(r.pageX),o.rollingPageY.push(r.pageY),o.rollingTimestamps.push(t)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}};ur.SCROLL_FRICTION=-.005,ur.HOLD_DELAY=700,ur.CLEAR_TAP_COUNT_TIME=400;let Br=ur;GQe([Kn],Br,"isTouchDevice",null);let Xl=class extends ee{onclick(e,t){this._register(re(e,Se.CLICK,i=>t(new bd(nt(e),i))))}onmousedown(e,t){this._register(re(e,Se.MOUSE_DOWN,i=>t(new bd(nt(e),i))))}onmouseover(e,t){this._register(re(e,Se.MOUSE_OVER,i=>t(new bd(nt(e),i))))}onmouseleave(e,t){this._register(re(e,Se.MOUSE_LEAVE,i=>t(new bd(nt(e),i))))}onkeydown(e,t){this._register(re(e,Se.KEY_DOWN,i=>t(new Oi(i))))}onkeyup(e,t){this._register(re(e,Se.KEY_UP,i=>t(new Oi(i))))}oninput(e,t){this._register(re(e,Se.INPUT,t))}onblur(e,t){this._register(re(e,Se.BLUR,t))}onfocus(e,t){this._register(re(e,Se.FOCUS,t))}ignoreGesture(e){return Br.ignoreTarget(e)}};const FS=11;class YQe extends Xl{constructor(e){super(),this._onActivate=e.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=e.bgWidth+"px",this.bgDomNode.style.height=e.bgHeight+"px",typeof e.top<"u"&&(this.bgDomNode.style.top="0px"),typeof e.left<"u"&&(this.bgDomNode.style.left="0px"),typeof e.bottom<"u"&&(this.bgDomNode.style.bottom="0px"),typeof e.right<"u"&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=e.className,this.domNode.classList.add(...ot.asClassNameArray(e.icon)),this.domNode.style.position="absolute",this.domNode.style.width=FS+"px",this.domNode.style.height=FS+"px",typeof e.top<"u"&&(this.domNode.style.top=e.top+"px"),typeof e.left<"u"&&(this.domNode.style.left=e.left+"px"),typeof e.bottom<"u"&&(this.domNode.style.bottom=e.bottom+"px"),typeof e.right<"u"&&(this.domNode.style.right=e.right+"px"),this._pointerMoveMonitor=this._register(new Mx),this._register(Cn(this.bgDomNode,Se.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._register(Cn(this.domNode,Se.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._pointerdownRepeatTimer=this._register(new hX),this._pointerdownScheduleRepeatTimer=this._register(new Fd)}_arrowPointerDown(e){if(!e.target||!(e.target instanceof Element))return;const t=()=>{this._pointerdownRepeatTimer.cancelAndSet(()=>this._onActivate(),1e3/24,nt(e))};this._onActivate(),this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancelAndSet(t,200),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,i=>{},()=>{this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancel()}),e.preventDefault()}}class ZQe extends ee{constructor(e,t,i){super(),this._visibility=e,this._visibleClassName=t,this._invisibleClassName=i,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new Fd)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this._updateShouldBeVisible())}setShouldBeVisible(e){this._rawShouldBeVisible=e,this._updateShouldBeVisible()}_applyVisibilitySetting(){return this._visibility===2?!1:this._visibility===3?!0:this._rawShouldBeVisible}_updateShouldBeVisible(){const e=this._applyVisibilitySetting();this._shouldBeVisible!==e&&(this._shouldBeVisible=e,this.ensureVisibility())}setIsNeeded(e){this._isNeeded!==e&&(this._isNeeded=e,this.ensureVisibility())}setDomNode(e){this._domNode=e,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){if(!this._isNeeded){this._hide(!1);return}this._shouldBeVisible?this._reveal():this._hide(!0)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(()=>{var e;(e=this._domNode)==null||e.setClassName(this._visibleClassName)},0))}_hide(e){var t;this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,(t=this._domNode)==null||t.setClassName(this._invisibleClassName+(e?" fade":"")))}}const XQe=140;class a1e extends Xl{constructor(e){super(),this._lazyRender=e.lazyRender,this._host=e.host,this._scrollable=e.scrollable,this._scrollByPage=e.scrollByPage,this._scrollbarState=e.scrollbarState,this._visibilityController=this._register(new ZQe(e.visibility,"visible scrollbar "+e.extraScrollbarClassName,"invisible scrollbar "+e.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._pointerMoveMonitor=this._register(new Mx),this._shouldRender=!0,this.domNode=ui(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this._register(re(this.domNode.domNode,Se.POINTER_DOWN,t=>this._domNodePointerDown(t)))}_createArrow(e){const t=this._register(new YQe(e));this.domNode.domNode.appendChild(t.bgDomNode),this.domNode.domNode.appendChild(t.domNode)}_createSlider(e,t,i,s){this.slider=ui(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(e),this.slider.setLeft(t),typeof i=="number"&&this.slider.setWidth(i),typeof s=="number"&&this.slider.setHeight(s),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this._register(re(this.slider.domNode,Se.POINTER_DOWN,r=>{r.button===0&&(r.preventDefault(),this._sliderPointerDown(r))})),this.onclick(this.slider.domNode,r=>{r.leftButton&&r.stopPropagation()})}_onElementSize(e){return this._scrollbarState.setVisibleSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(e){return this._scrollbarState.setScrollSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(e){return this._scrollbarState.setScrollPosition(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodePointerDown(e){e.target===this.domNode.domNode&&this._onPointerDown(e)}delegatePointerDown(e){const t=this.domNode.domNode.getClientRects()[0].top,i=t+this._scrollbarState.getSliderPosition(),s=t+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),r=this._sliderPointerPosition(e);i<=r&&r<=s?e.button===0&&(e.preventDefault(),this._sliderPointerDown(e)):this._onPointerDown(e)}_onPointerDown(e){let t,i;if(e.target===this.domNode.domNode&&typeof e.offsetX=="number"&&typeof e.offsetY=="number")t=e.offsetX,i=e.offsetY;else{const r=Fn(this.domNode.domNode);t=e.pageX-r.left,i=e.pageY-r.top}const s=this._pointerDownRelativePosition(t,i);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(s):this._scrollbarState.getDesiredScrollPositionFromOffset(s)),e.button===0&&(e.preventDefault(),this._sliderPointerDown(e))}_sliderPointerDown(e){if(!e.target||!(e.target instanceof Element))return;const t=this._sliderPointerPosition(e),i=this._sliderOrthogonalPointerPosition(e),s=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,r=>{const o=this._sliderOrthogonalPointerPosition(r),a=Math.abs(o-i);if(wr&&a>XQe){this._setDesiredScrollPositionNow(s.getScrollPosition());return}const c=this._sliderPointerPosition(r)-t;this._setDesiredScrollPositionNow(s.getDesiredScrollPositionFromDelta(c))},()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd()}),this._host.onDragStart()}_setDesiredScrollPositionNow(e){const t={};this.writeScrollPosition(t,e),this._scrollable.setScrollPositionNow(t)}updateScrollbarSize(e){this._updateScrollbarSize(e),this._scrollbarState.setScrollbarSize(e),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}}const QQe=20;class BS{constructor(e,t,i,s,r,o){this._scrollbarSize=Math.round(t),this._oppositeScrollbarSize=Math.round(i),this._arrowSize=Math.round(e),this._visibleSize=s,this._scrollSize=r,this._scrollPosition=o,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new BS(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(e){const t=Math.round(e);return this._visibleSize!==t?(this._visibleSize=t,this._refreshComputedValues(),!0):!1}setScrollSize(e){const t=Math.round(e);return this._scrollSize!==t?(this._scrollSize=t,this._refreshComputedValues(),!0):!1}setScrollPosition(e){const t=Math.round(e);return this._scrollPosition!==t?(this._scrollPosition=t,this._refreshComputedValues(),!0):!1}setScrollbarSize(e){this._scrollbarSize=Math.round(e)}setOppositeScrollbarSize(e){this._oppositeScrollbarSize=Math.round(e)}static _computeValues(e,t,i,s,r){const o=Math.max(0,i-e),a=Math.max(0,o-2*t),l=s>0&&s>i;if(!l)return{computedAvailableSize:Math.round(o),computedIsNeeded:l,computedSliderSize:Math.round(a),computedSliderRatio:0,computedSliderPosition:0};const c=Math.round(Math.max(QQe,Math.floor(i*a/s))),d=(a-c)/(s-i),u=r*d;return{computedAvailableSize:Math.round(o),computedIsNeeded:l,computedSliderSize:Math.round(c),computedSliderRatio:d,computedSliderPosition:Math.round(u)}}_refreshComputedValues(){const e=BS._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=e.computedAvailableSize,this._computedIsNeeded=e.computedIsNeeded,this._computedSliderSize=e.computedSliderSize,this._computedSliderRatio=e.computedSliderRatio,this._computedSliderPosition=e.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize-this._computedSliderSize/2;return Math.round(t/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize;let i=this._scrollPosition;return t<this._computedSliderPosition?i-=this._visibleSize:i+=this._visibleSize,i}getDesiredScrollPositionFromDelta(e){if(!this._computedIsNeeded)return 0;const t=this._computedSliderPosition+e;return Math.round(t/this._computedSliderRatio)}}class JQe extends a1e{constructor(e,t,i){const s=e.getScrollDimensions(),r=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:i,scrollbarState:new BS(t.horizontalHasArrows?t.arrowSize:0,t.horizontal===2?0:t.horizontalScrollbarSize,t.vertical===2?0:t.verticalScrollbarSize,s.width,s.scrollWidth,r.scrollLeft),visibility:t.horizontal,extraScrollbarClassName:"horizontal",scrollable:e,scrollByPage:t.scrollByPage}),t.horizontalHasArrows){const o=(t.arrowSize-FS)/2,a=(t.horizontalScrollbarSize-FS)/2;this._createArrow({className:"scra",icon:ye.scrollbarButtonLeft,top:a,left:o,bottom:void 0,right:void 0,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new c0(null,1,0))}),this._createArrow({className:"scra",icon:ye.scrollbarButtonRight,top:a,left:void 0,bottom:void 0,right:o,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new c0(null,-1,0))})}this._createSlider(Math.floor((t.horizontalScrollbarSize-t.horizontalSliderSize)/2),0,void 0,t.horizontalSliderSize)}_updateSlider(e,t){this.slider.setWidth(e),this.slider.setLeft(t)}_renderDomNode(e,t){this.domNode.setWidth(e),this.domNode.setHeight(t),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(e.width)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return e}_sliderPointerPosition(e){return e.pageX}_sliderOrthogonalPointerPosition(e){return e.pageY}_updateScrollbarSize(e){this.slider.setHeight(e)}writeScrollPosition(e,t){e.scrollLeft=t}updateOptions(e){this.updateScrollbarSize(e.horizontal===2?0:e.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._visibilityController.setVisibility(e.horizontal),this._scrollByPage=e.scrollByPage}}class eJe extends a1e{constructor(e,t,i){const s=e.getScrollDimensions(),r=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:i,scrollbarState:new BS(t.verticalHasArrows?t.arrowSize:0,t.vertical===2?0:t.verticalScrollbarSize,0,s.height,s.scrollHeight,r.scrollTop),visibility:t.vertical,extraScrollbarClassName:"vertical",scrollable:e,scrollByPage:t.scrollByPage}),t.verticalHasArrows){const o=(t.arrowSize-FS)/2,a=(t.verticalScrollbarSize-FS)/2;this._createArrow({className:"scra",icon:ye.scrollbarButtonUp,top:o,left:a,bottom:void 0,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new c0(null,0,1))}),this._createArrow({className:"scra",icon:ye.scrollbarButtonDown,top:void 0,left:a,bottom:o,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new c0(null,0,-1))})}this._createSlider(0,Math.floor((t.verticalScrollbarSize-t.verticalSliderSize)/2),t.verticalSliderSize,void 0)}_updateSlider(e,t){this.slider.setHeight(e),this.slider.setTop(t)}_renderDomNode(e,t){this.domNode.setWidth(t),this.domNode.setHeight(e),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(e.height)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return t}_sliderPointerPosition(e){return e.pageY}_sliderOrthogonalPointerPosition(e){return e.pageX}_updateScrollbarSize(e){this.slider.setWidth(e)}writeScrollPosition(e,t){e.scrollTop=t}updateOptions(e){this.updateScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(e.vertical),this._scrollByPage=e.scrollByPage}}class MP{constructor(e,t,i,s,r,o,a){this._forceIntegerValues=e,this._scrollStateBrand=void 0,this._forceIntegerValues&&(t=t|0,i=i|0,s=s|0,r=r|0,o=o|0,a=a|0),this.rawScrollLeft=s,this.rawScrollTop=a,t<0&&(t=0),s+t>i&&(s=i-t),s<0&&(s=0),r<0&&(r=0),a+r>o&&(a=o-r),a<0&&(a=0),this.width=t,this.scrollWidth=i,this.scrollLeft=s,this.height=r,this.scrollHeight=o,this.scrollTop=a}equals(e){return this.rawScrollLeft===e.rawScrollLeft&&this.rawScrollTop===e.rawScrollTop&&this.width===e.width&&this.scrollWidth===e.scrollWidth&&this.scrollLeft===e.scrollLeft&&this.height===e.height&&this.scrollHeight===e.scrollHeight&&this.scrollTop===e.scrollTop}withScrollDimensions(e,t){return new MP(this._forceIntegerValues,typeof e.width<"u"?e.width:this.width,typeof e.scrollWidth<"u"?e.scrollWidth:this.scrollWidth,t?this.rawScrollLeft:this.scrollLeft,typeof e.height<"u"?e.height:this.height,typeof e.scrollHeight<"u"?e.scrollHeight:this.scrollHeight,t?this.rawScrollTop:this.scrollTop)}withScrollPosition(e){return new MP(this._forceIntegerValues,this.width,this.scrollWidth,typeof e.scrollLeft<"u"?e.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,typeof e.scrollTop<"u"?e.scrollTop:this.rawScrollTop)}createScrollEvent(e,t){const i=this.width!==e.width,s=this.scrollWidth!==e.scrollWidth,r=this.scrollLeft!==e.scrollLeft,o=this.height!==e.height,a=this.scrollHeight!==e.scrollHeight,l=this.scrollTop!==e.scrollTop;return{inSmoothScrolling:t,oldWidth:e.width,oldScrollWidth:e.scrollWidth,oldScrollLeft:e.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:e.height,oldScrollHeight:e.scrollHeight,oldScrollTop:e.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:i,scrollWidthChanged:s,scrollLeftChanged:r,heightChanged:o,scrollHeightChanged:a,scrollTopChanged:l}}}class Px extends ee{constructor(e){super(),this._scrollableBrand=void 0,this._onScroll=this._register(new X),this.onScroll=this._onScroll.event,this._smoothScrollDuration=e.smoothScrollDuration,this._scheduleAtNextAnimationFrame=e.scheduleAtNextAnimationFrame,this._state=new MP(e.forceIntegerValues,0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(e){this._smoothScrollDuration=e}validateScrollPosition(e){return this._state.withScrollPosition(e)}getScrollDimensions(){return this._state}setScrollDimensions(e,t){var s;const i=this._state.withScrollDimensions(e,t);this._setState(i,!!this._smoothScrolling),(s=this._smoothScrolling)==null||s.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(e){const t=this._state.withScrollPosition(e);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(t,!1)}setScrollPositionSmooth(e,t){if(this._smoothScrollDuration===0)return this.setScrollPositionNow(e);if(this._smoothScrolling){e={scrollLeft:typeof e.scrollLeft>"u"?this._smoothScrolling.to.scrollLeft:e.scrollLeft,scrollTop:typeof e.scrollTop>"u"?this._smoothScrolling.to.scrollTop:e.scrollTop};const i=this._state.withScrollPosition(e);if(this._smoothScrolling.to.scrollLeft===i.scrollLeft&&this._smoothScrolling.to.scrollTop===i.scrollTop)return;let s;t?s=new QI(this._smoothScrolling.from,i,this._smoothScrolling.startTime,this._smoothScrolling.duration):s=this._smoothScrolling.combine(this._state,i,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=s}else{const i=this._state.withScrollPosition(e);this._smoothScrolling=QI.start(this._state,i,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}hasPendingScrollAnimation(){return!!this._smoothScrolling}_performSmoothScrolling(){if(!this._smoothScrolling)return;const e=this._smoothScrolling.tick(),t=this._state.withScrollPosition(e);if(this._setState(t,!0),!!this._smoothScrolling){if(e.isDone){this._smoothScrolling.dispose(),this._smoothScrolling=null;return}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}}_setState(e,t){const i=this._state;i.equals(e)||(this._state=e,this._onScroll.fire(this._state.createScrollEvent(i,t)))}}class ale{constructor(e,t,i){this.scrollLeft=e,this.scrollTop=t,this.isDone=i}}function d8(n,e){const t=e-n;return function(i){return n+t*nJe(i)}}function tJe(n,e,t){return function(i){return i<t?n(i/t):e((i-t)/(1-t))}}class QI{constructor(e,t,i,s){this.from=e,this.to=t,this.duration=s,this.startTime=i,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(e,t,i){if(Math.abs(e-t)>2.5*i){let r,o;return e<t?(r=e+.75*i,o=t-.75*i):(r=e-.75*i,o=t+.75*i),tJe(d8(e,r),d8(o,t),.33)}return d8(e,t)}dispose(){this.animationFrameDisposable!==null&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(e){this.to=e.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(e){const t=(e-this.startTime)/this.duration;if(t<1){const i=this.scrollLeft(t),s=this.scrollTop(t);return new ale(i,s,!1)}return new ale(this.to.scrollLeft,this.to.scrollTop,!0)}combine(e,t,i){return QI.start(e,t,i)}static start(e,t,i){i=i+10;const s=Date.now()-10;return new QI(e,t,s,i)}}function iJe(n){return Math.pow(n,3)}function nJe(n){return 1-iJe(1-n)}const sJe=500,lle=50;class rJe{constructor(e,t,i){this.timestamp=e,this.deltaX=t,this.deltaY=i,this.score=0}}const _4=class _4{constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(this._front===-1&&this._rear===-1)return!1;let e=1,t=0,i=1,s=this._rear;do{const r=s===this._front?e:Math.pow(2,-i);if(e-=r,t+=this._memory[s].score*r,s===this._front)break;s=(this._capacity+s-1)%this._capacity,i++}while(!0);return t<=.5}acceptStandardWheelEvent(e){if(PN){const t=nt(e.browserEvent),i=CKe(t);this.accept(Date.now(),e.deltaX*i,e.deltaY*i)}else this.accept(Date.now(),e.deltaX,e.deltaY)}accept(e,t,i){let s=null;const r=new rJe(e,t,i);this._front===-1&&this._rear===-1?(this._memory[0]=r,this._front=0,this._rear=0):(s=this._memory[this._rear],this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=r),r.score=this._computeScore(r,s)}_computeScore(e,t){if(Math.abs(e.deltaX)>0&&Math.abs(e.deltaY)>0)return 1;let i=.5;if((!this._isAlmostInt(e.deltaX)||!this._isAlmostInt(e.deltaY))&&(i+=.25),t){const s=Math.abs(e.deltaX),r=Math.abs(e.deltaY),o=Math.abs(t.deltaX),a=Math.abs(t.deltaY),l=Math.max(Math.min(s,o),1),c=Math.max(Math.min(r,a),1),d=Math.max(s,o),u=Math.max(r,a);d%l===0&&u%c===0&&(i-=.5)}return Math.min(Math.max(i,0),1)}_isAlmostInt(e){return Math.abs(Math.round(e)-e)<.01}};_4.INSTANCE=new _4;let PP=_4;class UX extends Xl{get options(){return this._options}constructor(e,t,i){super(),this._onScroll=this._register(new X),this.onScroll=this._onScroll.event,this._onWillScroll=this._register(new X),e.style.overflow="hidden",this._options=oJe(t),this._scrollable=i,this._register(this._scrollable.onScroll(r=>{this._onWillScroll.fire(r),this._onDidScroll(r),this._onScroll.fire(r)}));const s={onMouseWheel:r=>this._onMouseWheel(r),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new eJe(this._scrollable,this._options,s)),this._horizontalScrollbar=this._register(new JQe(this._scrollable,this._options,s)),this._domNode=document.createElement("div"),this._domNode.className="monaco-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.style.overflow="hidden",this._domNode.appendChild(e),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=ui(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=ui(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=ui(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,r=>this._onMouseOver(r)),this.onmouseleave(this._listenOnDomNode,r=>this._onMouseLeave(r)),this._hideTimeout=this._register(new Fd),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}dispose(){this._mouseWheelToDispose=Ti(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarPointerDown(e){this._verticalScrollbar.delegatePointerDown(e)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(e){this._scrollable.setScrollDimensions(e,!1)}updateClassName(e){this._options.className=e,Bt&&(this._options.className+=" mac"),this._domNode.className="monaco-scrollable-element "+this._options.className}updateOptions(e){typeof e.handleMouseWheel<"u"&&(this._options.handleMouseWheel=e.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),typeof e.mouseWheelScrollSensitivity<"u"&&(this._options.mouseWheelScrollSensitivity=e.mouseWheelScrollSensitivity),typeof e.fastScrollSensitivity<"u"&&(this._options.fastScrollSensitivity=e.fastScrollSensitivity),typeof e.scrollPredominantAxis<"u"&&(this._options.scrollPredominantAxis=e.scrollPredominantAxis),typeof e.horizontal<"u"&&(this._options.horizontal=e.horizontal),typeof e.vertical<"u"&&(this._options.vertical=e.vertical),typeof e.horizontalScrollbarSize<"u"&&(this._options.horizontalScrollbarSize=e.horizontalScrollbarSize),typeof e.verticalScrollbarSize<"u"&&(this._options.verticalScrollbarSize=e.verticalScrollbarSize),typeof e.scrollByPage<"u"&&(this._options.scrollByPage=e.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}delegateScrollFromMouseWheelEvent(e){this._onMouseWheel(new c0(e))}_setListeningToMouseWheel(e){if(this._mouseWheelToDispose.length>0!==e&&(this._mouseWheelToDispose=Ti(this._mouseWheelToDispose),e)){const i=s=>{this._onMouseWheel(new c0(s))};this._mouseWheelToDispose.push(re(this._listenOnDomNode,Se.MOUSE_WHEEL,i,{passive:!1}))}}_onMouseWheel(e){var r;if((r=e.browserEvent)!=null&&r.defaultPrevented)return;const t=PP.INSTANCE;t.acceptStandardWheelEvent(e);let i=!1;if(e.deltaY||e.deltaX){let o=e.deltaY*this._options.mouseWheelScrollSensitivity,a=e.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(this._options.scrollYToX&&a+o===0?a=o=0:Math.abs(o)>=Math.abs(a)?a=0:o=0),this._options.flipAxes&&([o,a]=[a,o]);const l=!Bt&&e.browserEvent&&e.browserEvent.shiftKey;(this._options.scrollYToX||l)&&!a&&(a=o,o=0),e.browserEvent&&e.browserEvent.altKey&&(a=a*this._options.fastScrollSensitivity,o=o*this._options.fastScrollSensitivity);const c=this._scrollable.getFutureScrollPosition();let d={};if(o){const u=lle*o,h=c.scrollTop-(u<0?Math.floor(u):Math.ceil(u));this._verticalScrollbar.writeScrollPosition(d,h)}if(a){const u=lle*a,h=c.scrollLeft-(u<0?Math.floor(u):Math.ceil(u));this._horizontalScrollbar.writeScrollPosition(d,h)}d=this._scrollable.validateScrollPosition(d),(c.scrollLeft!==d.scrollLeft||c.scrollTop!==d.scrollTop)&&(this._options.mouseWheelSmoothScroll&&t.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(d):this._scrollable.setScrollPositionNow(d),i=!0)}let s=i;!s&&this._options.alwaysConsumeMouseWheel&&(s=!0),!s&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(s=!0),s&&(e.preventDefault(),e.stopPropagation())}_onDidScroll(e){this._shouldRender=this._horizontalScrollbar.onDidScroll(e)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(e)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){const e=this._scrollable.getCurrentScrollPosition(),t=e.scrollTop>0,i=e.scrollLeft>0,s=i?" left":"",r=t?" top":"",o=i||t?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${s}`),this._topShadowDomNode.setClassName(`shadow${r}`),this._topLeftShadowDomNode.setClassName(`shadow${o}${r}${s}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseLeave(e){this._mouseIsOver=!1,this._hide()}_onMouseOver(e){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){!this._mouseIsOver&&!this._isDragging&&(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){!this._mouseIsOver&&!this._isDragging&&this._hideTimeout.cancelAndSet(()=>this._hide(),sJe)}}class l1e extends UX{constructor(e,t){t=t||{},t.mouseWheelSmoothScroll=!1;const i=new Px({forceIntegerValues:!0,smoothScrollDuration:0,scheduleAtNextAnimationFrame:s=>il(nt(e),s)});super(e,t,i),this._register(i)}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}}class hB extends UX{constructor(e,t,i){super(e,t,i)}setScrollPosition(e){e.reuseAnimation?this._scrollable.setScrollPositionSmooth(e,e.reuseAnimation):this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}}class VN extends UX{constructor(e,t){t=t||{},t.mouseWheelSmoothScroll=!1;const i=new Px({forceIntegerValues:!1,smoothScrollDuration:0,scheduleAtNextAnimationFrame:s=>il(nt(e),s)});super(e,t,i),this._register(i),this._element=e,this._register(this.onScroll(s=>{s.scrollTopChanged&&(this._element.scrollTop=s.scrollTop),s.scrollLeftChanged&&(this._element.scrollLeft=s.scrollLeft)})),this.scanDomNode()}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}scanDomNode(){this.setScrollDimensions({width:this._element.clientWidth,scrollWidth:this._element.scrollWidth,height:this._element.clientHeight,scrollHeight:this._element.scrollHeight}),this.setScrollPosition({scrollLeft:this._element.scrollLeft,scrollTop:this._element.scrollTop})}}function oJe(n){const e={lazyRender:typeof n.lazyRender<"u"?n.lazyRender:!1,className:typeof n.className<"u"?n.className:"",useShadows:typeof n.useShadows<"u"?n.useShadows:!0,handleMouseWheel:typeof n.handleMouseWheel<"u"?n.handleMouseWheel:!0,flipAxes:typeof n.flipAxes<"u"?n.flipAxes:!1,consumeMouseWheelIfScrollbarIsNeeded:typeof n.consumeMouseWheelIfScrollbarIsNeeded<"u"?n.consumeMouseWheelIfScrollbarIsNeeded:!1,alwaysConsumeMouseWheel:typeof n.alwaysConsumeMouseWheel<"u"?n.alwaysConsumeMouseWheel:!1,scrollYToX:typeof n.scrollYToX<"u"?n.scrollYToX:!1,mouseWheelScrollSensitivity:typeof n.mouseWheelScrollSensitivity<"u"?n.mouseWheelScrollSensitivity:1,fastScrollSensitivity:typeof n.fastScrollSensitivity<"u"?n.fastScrollSensitivity:5,scrollPredominantAxis:typeof n.scrollPredominantAxis<"u"?n.scrollPredominantAxis:!0,mouseWheelSmoothScroll:typeof n.mouseWheelSmoothScroll<"u"?n.mouseWheelSmoothScroll:!0,arrowSize:typeof n.arrowSize<"u"?n.arrowSize:11,listenOnDomNode:typeof n.listenOnDomNode<"u"?n.listenOnDomNode:null,horizontal:typeof n.horizontal<"u"?n.horizontal:1,horizontalScrollbarSize:typeof n.horizontalScrollbarSize<"u"?n.horizontalScrollbarSize:10,horizontalSliderSize:typeof n.horizontalSliderSize<"u"?n.horizontalSliderSize:0,horizontalHasArrows:typeof n.horizontalHasArrows<"u"?n.horizontalHasArrows:!1,vertical:typeof n.vertical<"u"?n.vertical:1,verticalScrollbarSize:typeof n.verticalScrollbarSize<"u"?n.verticalScrollbarSize:10,verticalHasArrows:typeof n.verticalHasArrows<"u"?n.verticalHasArrows:!1,verticalSliderSize:typeof n.verticalSliderSize<"u"?n.verticalSliderSize:0,scrollByPage:typeof n.scrollByPage<"u"?n.scrollByPage:!1};return e.horizontalSliderSize=typeof n.horizontalSliderSize<"u"?n.horizontalSliderSize:e.horizontalScrollbarSize,e.verticalSliderSize=typeof n.verticalSliderSize<"u"?n.verticalSliderSize:e.verticalScrollbarSize,Bt&&(e.className+=" mac"),e}const jR=xe;let $X=class extends ee{constructor(){super(),this.containerDomNode=document.createElement("div"),this.containerDomNode.className="monaco-hover",this.containerDomNode.tabIndex=0,this.containerDomNode.setAttribute("role","tooltip"),this.contentsDomNode=document.createElement("div"),this.contentsDomNode.className="monaco-hover-content",this.scrollbar=this._register(new VN(this.contentsDomNode,{consumeMouseWheelIfScrollbarIsNeeded:!0})),this.containerDomNode.appendChild(this.scrollbar.getDomNode())}onContentsChanged(){this.scrollbar.scanDomNode()}};class fB extends ee{static render(e,t,i){return new fB(e,t,i)}constructor(e,t,i){super(),this.actionLabel=t.label,this.actionKeybindingLabel=i,this.actionContainer=_e(e,jR("div.action-container")),this.actionContainer.setAttribute("tabindex","0"),this.action=_e(this.actionContainer,jR("a.action")),this.action.setAttribute("role","button"),t.iconClass&&_e(this.action,jR(`span.icon.${t.iconClass}`));const s=_e(this.action,jR("span"));s.textContent=i?`${t.label} (${i})`:t.label,this._store.add(new d1e(this.actionContainer,t.run)),this._store.add(new u1e(this.actionContainer,t.run,[3,10])),this.setEnabled(!0)}setEnabled(e){e?(this.actionContainer.classList.remove("disabled"),this.actionContainer.removeAttribute("aria-disabled")):(this.actionContainer.classList.add("disabled"),this.actionContainer.setAttribute("aria-disabled","true"))}}function c1e(n,e){return n&&e?v("acessibleViewHint","Inspect this in the accessible view with {0}.",e):n?v("acessibleViewHintNoKbOpen","Inspect this in the accessible view via the command Open Accessible View which is currently not triggerable via keybinding."):""}class d1e extends ee{constructor(e,t){super(),this._register(re(e,Se.CLICK,i=>{i.stopPropagation(),i.preventDefault(),t(e)}))}}class u1e extends ee{constructor(e,t,i){super(),this._register(re(e,Se.KEY_DOWN,s=>{const r=new Oi(s);i.some(o=>r.equals(o))&&(s.stopPropagation(),s.preventDefault(),t(e))}))}}const ba=Wt("openerService");function aJe(n){let e;const t=/^L?(\d+)(?:,(\d+))?(-L?(\d+)(?:,(\d+))?)?/.exec(n.fragment);return t&&(e={startLineNumber:parseInt(t[1]),startColumn:t[2]?parseInt(t[2]):1,endLineNumber:t[4]?parseInt(t[4]):void 0,endColumn:t[4]?t[5]?parseInt(t[5]):1:void 0},n=n.with({fragment:""})),{selection:e,uri:n}}class zt{get event(){return this.emitter.event}constructor(e,t,i){const s=r=>this.emitter.fire(r);this.emitter=new X({onWillAddFirstListener:()=>e.addEventListener(t,s,i),onDidRemoveLastListener:()=>e.removeEventListener(t,s,i)})}dispose(){this.emitter.dispose()}}function lJe(n,e={}){const t=jX(e);return t.textContent=n,t}function cJe(n,e={}){const t=jX(e);return h1e(t,uJe(n,!!e.renderCodeSegments),e.actionHandler,e.renderCodeSegments),t}function jX(n){const e=n.inline?"span":"div",t=document.createElement(e);return n.className&&(t.className=n.className),t}class dJe{constructor(e){this.source=e,this.index=0}eos(){return this.index>=this.source.length}next(){const e=this.peek();return this.advance(),e}peek(){return this.source[this.index]}advance(){this.index++}}function h1e(n,e,t,i){let s;if(e.type===2)s=document.createTextNode(e.content||"");else if(e.type===3)s=document.createElement("b");else if(e.type===4)s=document.createElement("i");else if(e.type===7&&i)s=document.createElement("code");else if(e.type===5&&t){const r=document.createElement("a");t.disposables.add(Cn(r,"click",o=>{t.callback(String(e.index),o)})),s=r}else e.type===8?s=document.createElement("br"):e.type===1&&(s=n);s&&n!==s&&n.appendChild(s),s&&Array.isArray(e.children)&&e.children.forEach(r=>{h1e(s,r,t,i)})}function uJe(n,e){const t={type:1,children:[]};let i=0,s=t;const r=[],o=new dJe(n);for(;!o.eos();){let a=o.next();const l=a==="\\"&&xU(o.peek(),e)!==0;if(l&&(a=o.next()),!l&&hJe(a,e)&&a===o.peek()){o.advance(),s.type===2&&(s=r.pop());const c=xU(a,e);if(s.type===c||s.type===5&&c===6)s=r.pop();else{const d={type:c,children:[]};c===5&&(d.index=i,i++),s.children.push(d),r.push(s),s=d}}else if(a===`
`)s.type===2&&(s=r.pop()),s.children.push({type:8});else if(s.type!==2){const c={type:2,content:a};s.children.push(c),r.push(s),s=c}else s.content+=a}return s.type===2&&(s=r.pop()),t}function hJe(n,e){return xU(n,e)!==0}function xU(n,e){switch(n){case"*":return 3;case"_":return 4;case"[":return 5;case"]":return 6;case"`":return e?7:0;default:return 0}}const fJe=new RegExp(`(\\\\)?\\$\\((${ot.iconNameExpression}(?:${ot.iconModifierExpression})?)\\)`,"g");function Ym(n){const e=new Array;let t,i=0,s=0;for(;(t=fJe.exec(n))!==null;){s=t.index||0,i<s&&e.push(n.substring(i,s)),i=(t.index||0)+t[0].length;const[,r,o]=t;e.push(r?`$(${o})`:g0({id:o}))}return i<n.length&&e.push(n.substring(i)),e}function g0(n){const e=xe("span");return e.classList.add(...ot.asClassNameArray(n)),e}function gJe(n){const e=pJe(n);if(e&&e.length>0)return new Uint32Array(e)}let wl=0;const sm=new Uint32Array(10);function pJe(n){if(wl=0,ih(n,u8,4352),wl>0||(ih(n,h8,4449),wl>0)||(ih(n,f8,4520),wl>0)||(ih(n,xv,12593),wl))return sm.subarray(0,wl);if(n>=44032&&n<=55203){const e=n-44032,t=e%588,i=Math.floor(e/588),s=Math.floor(t/28),r=t%28-1;if(i<u8.length?ih(i,u8,0):4352+i-12593<xv.length&&ih(4352+i,xv,12593),s<h8.length?ih(s,h8,0):4449+s-12593<xv.length&&ih(4449+s-12593,xv,12593),r>=0&&(r<f8.length?ih(r,f8,0):4520+r-12593<xv.length&&ih(4520+r-12593,xv,12593)),wl>0)return sm.subarray(0,wl)}}function ih(n,e,t){n>=t&&n<t+e.length&&mJe(e[n-t])}function mJe(n){n!==0&&(sm[wl++]=n&255,n>>8&&(sm[wl++]=n>>8&255),n>>16&&(sm[wl++]=n>>16&255))}const u8=new Uint8Array([114,82,115,101,69,102,97,113,81,116,84,100,119,87,99,122,120,118,103]),h8=new Uint16Array([107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]),f8=new Uint16Array([114,82,29810,115,30579,26483,101,102,29286,24934,29030,29798,30822,30310,26470,97,113,29809,116,84,100,119,99,122,120,118,103]),xv=new Uint16Array([114,82,29810,115,30579,26483,101,69,102,29286,24934,29030,29798,30822,30310,26470,97,113,81,29809,116,84,100,119,87,99,122,120,118,103,107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]);function KX(...n){return function(e,t){for(let i=0,s=n.length;i<s;i++){const r=n[i](e,t);if(r)return r}return null}}f1e.bind(void 0,!1);const JI=f1e.bind(void 0,!0);function f1e(n,e,t){if(!t||t.length<e.length)return null;let i;return n?i=iX(t,e):i=t.indexOf(e)===0,i?e.length>0?[{start:0,end:e.length}]:[]:null}function g1e(n,e){const t=e.toLowerCase().indexOf(n.toLowerCase());return t===-1?null:[{start:t,end:t+n.length}]}function p1e(n,e){return LU(n.toLowerCase(),e.toLowerCase(),0,0)}function LU(n,e,t,i){if(t===n.length)return[];if(i===e.length)return null;if(n[t]===e[i]){let s=null;return(s=LU(n,e,t+1,i+1))?YX({start:i,end:i+1},s):null}return LU(n,e,t,i+1)}function qX(n){return 97<=n&&n<=122}function gB(n){return 65<=n&&n<=90}function GX(n){return 48<=n&&n<=57}function m1e(n){return n===32||n===9||n===10||n===13}const _1e=new Set;"()[]{}<>`'\"-/;:,.?!".split("").forEach(n=>_1e.add(n.charCodeAt(0)));function OP(n){return m1e(n)||_1e.has(n)}function cle(n,e){return n===e||OP(n)&&OP(e)}const g8=new Map;function dle(n){if(g8.has(n))return g8.get(n);let e;const t=gJe(n);return t&&(e=t),g8.set(n,e),e}function v1e(n){return qX(n)||gB(n)||GX(n)}function YX(n,e){return e.length===0?e=[n]:n.end===e[0].start?e[0].start=n.start:e.unshift(n),e}function b1e(n,e){for(let t=e;t<n.length;t++){const i=n.charCodeAt(t);if(gB(i)||GX(i)||t>0&&!v1e(n.charCodeAt(t-1)))return t}return n.length}function kU(n,e,t,i){if(t===n.length)return[];if(i===e.length)return null;if(n[t]!==e[i].toLowerCase())return null;{let s=null,r=i+1;for(s=kU(n,e,t+1,i+1);!s&&(r=b1e(e,r))<e.length;)s=kU(n,e,t+1,r),r++;return s===null?null:YX({start:i,end:i+1},s)}}function _Je(n){let e=0,t=0,i=0,s=0,r=0;for(let d=0;d<n.length;d++)r=n.charCodeAt(d),gB(r)&&e++,qX(r)&&t++,v1e(r)&&i++,GX(r)&&s++;const o=e/n.length,a=t/n.length,l=i/n.length,c=s/n.length;return{upperPercent:o,lowerPercent:a,alphaPercent:l,numericPercent:c}}function vJe(n){const{upperPercent:e,lowerPercent:t}=n;return t===0&&e>.6}function bJe(n){const{upperPercent:e,lowerPercent:t,alphaPercent:i,numericPercent:s}=n;return t>.2&&e<.8&&i>.6&&s<.2}function wJe(n){let e=0,t=0,i=0,s=0;for(let r=0;r<n.length;r++)i=n.charCodeAt(r),gB(i)&&e++,qX(i)&&t++,m1e(i)&&s++;return(e===0||t===0)&&s===0?n.length<=30:e<=5}function w1e(n,e){if(!e||(e=e.trim(),e.length===0)||!wJe(n))return null;e.length>60&&(e=e.substring(0,60));const t=_Je(e);if(!bJe(t)){if(!vJe(t))return null;e=e.toLowerCase()}let i=null,s=0;for(n=n.toLowerCase();s<e.length&&(i=kU(n,e,0,s))===null;)s=b1e(e,s+1);return i}function CJe(n,e,t=!1){if(!e||e.length===0)return null;let i=null,s=0;for(n=n.toLowerCase(),e=e.toLowerCase();s<e.length&&(i=EU(n,e,0,s,t),i===null);)s=C1e(e,s+1);return i}function EU(n,e,t,i,s){let r=0;if(t===n.length)return[];if(i===e.length)return null;if(!cle(n.charCodeAt(t),e.charCodeAt(i))){const l=dle(n.charCodeAt(t));if(!l)return null;for(let c=0;c<l.length;c++)if(!cle(l[c],e.charCodeAt(i+c)))return null;r+=l.length-1}let o=null,a=i+r+1;if(o=EU(n,e,t+1,a,s),!s)for(;!o&&(a=C1e(e,a))<e.length;)o=EU(n,e,t+1,a,s),a++;if(!o)return null;if(n.charCodeAt(t)!==e.charCodeAt(i)){const l=dle(n.charCodeAt(t));if(!l)return o;for(let c=0;c<l.length;c++)if(l[c]!==e.charCodeAt(i+c))return o}return YX({start:i,end:i+r+1},o)}function C1e(n,e){for(let t=e;t<n.length;t++)if(OP(n.charCodeAt(t))||t>0&&OP(n.charCodeAt(t-1)))return t;return n.length}const yJe=KX(JI,w1e,g1e),SJe=KX(JI,w1e,p1e),ule=new vf(1e4);function hle(n,e,t=!1){if(typeof n!="string"||typeof e!="string")return null;let i=ule.get(n);i||(i=new RegExp(aKe(n),"i"),ule.set(n,i));const s=i.exec(e);return s?[{start:s.index,end:s.index+s[0].length}]:t?SJe(n,e):yJe(n,e)}function xJe(n,e){const t=p0(n,n.toLowerCase(),0,e,e.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});return t?zN(t):null}function LJe(n,e,t,i,s,r){const o=Math.min(13,n.length);for(;t<o;t++){const a=p0(n,e,t,i,s,r,{firstMatchCanBeWeak:!0,boostFullMatch:!0});if(a)return a}return[0,r]}function zN(n){if(typeof n>"u")return[];const e=[],t=n[1];for(let i=n.length-1;i>1;i--){const s=n[i]+t,r=e[e.length-1];r&&r.end===s?r.end=s+1:e.push({start:s,end:s+1})}return e}const xm=128;function ZX(){const n=[],e=[];for(let t=0;t<=xm;t++)e[t]=0;for(let t=0;t<=xm;t++)n.push(e.slice(0));return n}function y1e(n){const e=[];for(let t=0;t<=n;t++)e[t]=0;return e}const S1e=y1e(2*xm),IU=y1e(2*xm),Mf=ZX(),Lv=ZX(),KR=ZX();function qR(n,e){if(e<0||e>=n.length)return!1;const t=n.codePointAt(e);switch(t){case 95:case 45:case 46:case 32:case 47:case 92:case 39:case 34:case 58:case 36:case 60:case 62:case 40:case 41:case 91:case 93:case 123:case 125:return!0;case void 0:return!1;default:return!!oX(t)}}function fle(n,e){if(e<0||e>=n.length)return!1;switch(n.charCodeAt(e)){case 32:case 9:return!0;default:return!1}}function I2(n,e,t){return e[n]!==t[n]}function kJe(n,e,t,i,s,r,o=!1){for(;e<t&&s<r;)n[e]===i[s]&&(o&&(S1e[e]=s),e+=1),s+=1;return e===t}var Au;(function(n){n.Default=[-100,0];function e(t){return!t||t.length===2&&t[0]===-100&&t[1]===0}n.isDefault=e})(Au||(Au={}));const $ee=class $ee{constructor(e,t){this.firstMatchCanBeWeak=e,this.boostFullMatch=t}};$ee.default={boostFullMatch:!0,firstMatchCanBeWeak:!1};let eD=$ee;function p0(n,e,t,i,s,r,o=eD.default){const a=n.length>xm?xm:n.length,l=i.length>xm?xm:i.length;if(t>=a||r>=l||a-t>l-r||!kJe(e,t,a,s,r,l,!0))return;EJe(a,l,t,r,e,s);let c=1,d=1,u=t,h=r;const f=[!1];for(c=1,u=t;u<a;c++,u++){const b=S1e[u],y=IU[u],S=u+1<a?IU[u+1]:l;for(d=b-r+1,h=b;h<S;d++,h++){let x=Number.MIN_SAFE_INTEGER,E=!1;h<=y&&(x=IJe(n,e,u,t,i,s,h,l,r,Mf[c-1][d-1]===0,f));let D=0;x!==Number.MAX_SAFE_INTEGER&&(E=!0,D=x+Lv[c-1][d-1]);const N=h>b,I=N?Lv[c][d-1]+(Mf[c][d-1]>0?-5:0):0,H=h>b+1&&Mf[c][d-1]>0,z=H?Lv[c][d-2]+(Mf[c][d-2]>0?-5:0):0;if(H&&(!N||z>=I)&&(!E||z>=D))Lv[c][d]=z,KR[c][d]=3,Mf[c][d]=0;else if(N&&(!E||I>=D))Lv[c][d]=I,KR[c][d]=2,Mf[c][d]=0;else if(E)Lv[c][d]=D,KR[c][d]=1,Mf[c][d]=Mf[c-1][d-1]+1;else throw new Error("not possible")}}if(!f[0]&&!o.firstMatchCanBeWeak)return;c--,d--;const g=[Lv[c][d],r];let p=0,_=0;for(;c>=1;){let b=d;do{const y=KR[c][b];if(y===3)b=b-2;else if(y===2)b=b-1;else break}while(b>=1);p>1&&e[t+c-1]===s[r+d-1]&&!I2(b+r-1,i,s)&&p+1>Mf[c][b]&&(b=d),b===d?p++:p=1,_||(_=b),c--,d=b-1,g.push(d)}l-r===a&&o.boostFullMatch&&(g[0]+=2);const w=_-a;return g[0]-=w,g}function EJe(n,e,t,i,s,r){let o=n-1,a=e-1;for(;o>=t&&a>=i;)s[o]===r[a]&&(IU[o]=a,o--),a--}function IJe(n,e,t,i,s,r,o,a,l,c,d){if(e[t]!==r[o])return Number.MIN_SAFE_INTEGER;let u=1,h=!1;return o===t-i?u=n[t]===s[o]?7:5:I2(o,s,r)&&(o===0||!I2(o-1,s,r))?(u=n[t]===s[o]?7:5,h=!0):qR(r,o)&&(o===0||!qR(r,o-1))?u=5:(qR(r,o-1)||fle(r,o-1))&&(u=5,h=!0),u>1&&t===i&&(d[0]=!0),h||(h=I2(o,s,r)||qR(r,o-1)||fle(r,o-1)),t===i?o>l&&(u-=h?3:5):c?u+=h?2:0:u+=h?0:1,o+1===a&&(u-=h?3:5),u}function DJe(n,e,t,i,s,r,o){return NJe(n,e,t,i,s,r,!0,o)}function NJe(n,e,t,i,s,r,o,a){let l=p0(n,e,t,i,s,r,a);if(l&&!o)return l;if(n.length>=3){const c=Math.min(7,n.length-1);for(let d=t+1;d<c;d++){const u=TJe(n,d);if(u){const h=p0(u,u.toLowerCase(),t,i,s,r,a);h&&(h[0]-=3,(!l||h[0]>l[0])&&(l=h))}}}return l}function TJe(n,e){if(e+1>=n.length)return;const t=n[e],i=n[e+1];if(t!==i)return n.slice(0,e)+i+t+n.slice(e+2)}const RJe="$(",XX=new RegExp(`\\$\\(${ot.iconNameExpression}(?:${ot.iconModifierExpression})?\\)`,"g"),AJe=new RegExp(`(\\\\)?${XX.source}`,"g");function MJe(n){return n.replace(AJe,(e,t)=>t?e:`\\${e}`)}const PJe=new RegExp(`\\\\${XX.source}`,"g");function OJe(n){return n.replace(PJe,e=>`\\${e}`)}const FJe=new RegExp(`(\\s)?(\\\\)?${XX.source}(\\s)?`,"g");function QX(n){return n.indexOf(RJe)===-1?n:n.replace(FJe,(e,t,i,s)=>i?e:t||s||"")}function BJe(n){return n?n.replace(/\$\((.*?)\)/g,(e,t)=>` ${t} `).trim():""}const p8=new RegExp(`\\$\\(${ot.iconNameCharacter}+\\)`,"g");function fk(n){p8.lastIndex=0;let e="";const t=[];let i=0;for(;;){const s=p8.lastIndex,r=p8.exec(n),o=n.substring(s,r==null?void 0:r.index);if(o.length>0){e+=o;for(let a=0;a<o.length;a++)t.push(i)}if(!r)break;i+=r[0].length}return{text:e,iconOffsets:t}}function m8(n,e,t=!1){const{text:i,iconOffsets:s}=e;if(!s||s.length===0)return hle(n,i,t);const r=RN(i," "),o=i.length-r.length,a=hle(n,r,t);if(a)for(const l of a){const c=s[l.start+o]+o;l.start+=c,l.end+=c}return a}function hh(n){return rP(n,!0)}class WJe{constructor(e){this._ignorePathCasing=e}compare(e,t,i=!1){return e===t?0:PI(this.getComparisonKey(e,i),this.getComparisonKey(t,i))}isEqual(e,t,i=!1){return e===t?!0:!e||!t?!1:this.getComparisonKey(e,i)===this.getComparisonKey(t,i)}getComparisonKey(e,t=!1){return e.with({path:this._ignorePathCasing(e)?e.path.toLowerCase():void 0,fragment:t?null:void 0}).toString()}isEqualOrParent(e,t,i=!1){if(e.scheme===t.scheme){if(e.scheme===mt.file)return pU(hh(e),hh(t),this._ignorePathCasing(e))&&e.query===t.query&&(i||e.fragment===t.fragment);if(ple(e.authority,t.authority))return pU(e.path,t.path,this._ignorePathCasing(e),"/")&&e.query===t.query&&(i||e.fragment===t.fragment)}return!1}joinPath(e,...t){return Xe.joinPath(e,...t)}basenameOrAuthority(e){return Pc(e)||e.authority}basename(e){return Qn.basename(e.path)}extname(e){return Qn.extname(e.path)}dirname(e){if(e.path.length===0)return e;let t;return e.scheme===mt.file?t=Xe.file(n0e(hh(e))).path:(t=Qn.dirname(e.path),e.authority&&t.length&&t.charCodeAt(0)!==47&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/")),e.with({path:t})}normalizePath(e){if(!e.path.length)return e;let t;return e.scheme===mt.file?t=Xe.file(i0e(hh(e))).path:t=Qn.normalize(e.path),e.with({path:t})}relativePath(e,t){if(e.scheme!==t.scheme||!ple(e.authority,t.authority))return;if(e.scheme===mt.file){const r=Bje(hh(e),hh(t));return wr?OCe(r):r}let i=e.path||"/";const s=t.path||"/";if(this._ignorePathCasing(e)){let r=0;for(const o=Math.min(i.length,s.length);r<o&&!(i.charCodeAt(r)!==s.charCodeAt(r)&&i.charAt(r).toLowerCase()!==s.charAt(r).toLowerCase());r++);i=s.substr(0,r)+i.substr(r)}return Qn.relative(i,s)}resolvePath(e,t){if(e.scheme===mt.file){const i=Xe.file(Fje(hh(e),t));return e.with({authority:i.authority,path:i.path})}return t=zZe(t),e.with({path:Qn.resolve(e.path,t)})}isAbsolutePath(e){return!!e.path&&e.path[0]==="/"}isEqualAuthority(e,t){return e===t||e!==void 0&&t!==void 0&&w1(e,t)}hasTrailingPathSeparator(e,t=Iu){if(e.scheme===mt.file){const i=hh(e);return i.length>Vae(i).length&&i[i.length-1]===t}else{const i=e.path;return i.length>1&&i.charCodeAt(i.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(e.fsPath)}}removeTrailingPathSeparator(e,t=Iu){return mle(e,t)?e.with({path:e.path.substr(0,e.path.length-1)}):e}addTrailingPathSeparator(e,t=Iu){let i=!1;if(e.scheme===mt.file){const s=hh(e);i=s!==void 0&&s.length===Vae(s).length&&s[s.length-1]===t}else{t="/";const s=e.path;i=s.length===1&&s.charCodeAt(s.length-1)===47}return!i&&!mle(e,t)?e.with({path:e.path+"/"}):e}}const sn=new WJe(()=>!1),tD=sn.isEqual.bind(sn);sn.isEqualOrParent.bind(sn);sn.getComparisonKey.bind(sn);const HJe=sn.basenameOrAuthority.bind(sn),Pc=sn.basename.bind(sn),VJe=sn.extname.bind(sn),pB=sn.dirname.bind(sn),zJe=sn.joinPath.bind(sn),UJe=sn.normalizePath.bind(sn),$Je=sn.relativePath.bind(sn),gle=sn.resolvePath.bind(sn);sn.isAbsolutePath.bind(sn);const ple=sn.isEqualAuthority.bind(sn),mle=sn.hasTrailingPathSeparator.bind(sn);sn.removeTrailingPathSeparator.bind(sn);sn.addTrailingPathSeparator.bind(sn);var P_;(function(n){n.META_DATA_LABEL="label",n.META_DATA_DESCRIPTION="description",n.META_DATA_SIZE="size",n.META_DATA_MIME="mime";function e(t){const i=new Map;t.path.substring(t.path.indexOf(";")+1,t.path.lastIndexOf(";")).split(";").forEach(o=>{const[a,l]=o.split(":");a&&l&&i.set(a,l)});const r=t.path.substring(0,t.path.indexOf(";"));return r&&i.set(n.META_DATA_MIME,r),i}n.parseMetaData=e})(P_||(P_={}));class Rr{constructor(e="",t=!1){if(this.value=e,typeof this.value!="string")throw Ec("value");typeof t=="boolean"?(this.isTrusted=t,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=t.isTrusted??void 0,this.supportThemeIcons=t.supportThemeIcons??!1,this.supportHtml=t.supportHtml??!1)}appendText(e,t=0){return this.value+=KJe(this.supportThemeIcons?MJe(e):e).replace(/([ \t]+)/g,(i,s)=>"&nbsp;".repeat(s.length)).replace(/\>/gm,"\\>").replace(/\n/g,t===1?`\\
`:`

`),this}appendMarkdown(e){return this.value+=e,this}appendCodeblock(e,t){return this.value+=`
${qJe(t,e)}
`,this}appendLink(e,t,i){return this.value+="[",this.value+=this._escape(t,"]"),this.value+="](",this.value+=this._escape(String(e),")"),i&&(this.value+=` "${this._escape(this._escape(i,'"'),")")}"`),this.value+=")",this}_escape(e,t){const i=new RegExp($l(t),"g");return e.replace(i,(s,r)=>e.charAt(r-1)!=="\\"?`\\${s}`:s)}}function WS(n){return Mu(n)?!n.value:Array.isArray(n)?n.every(WS):!0}function Mu(n){return n instanceof Rr?!0:n&&typeof n=="object"?typeof n.value=="string"&&(typeof n.isTrusted=="boolean"||typeof n.isTrusted=="object"||n.isTrusted===void 0)&&(typeof n.supportThemeIcons=="boolean"||n.supportThemeIcons===void 0):!1}function jJe(n,e){return n===e?!0:!n||!e?!1:n.value===e.value&&n.isTrusted===e.isTrusted&&n.supportThemeIcons===e.supportThemeIcons&&n.supportHtml===e.supportHtml&&(n.baseUri===e.baseUri||!!n.baseUri&&!!e.baseUri&&tD(Xe.from(n.baseUri),Xe.from(e.baseUri)))}function KJe(n){return n.replace(/[\\`*_{}[\]()#+\-!~]/g,"\\$&")}function qJe(n,e){var s;const t=((s=n.match(/^`+/gm))==null?void 0:s.reduce((r,o)=>r.length>o.length?r:o).length)??0,i=t>=3?t+1:3;return[`${"`".repeat(i)}${e}`,n,`${"`".repeat(i)}`].join(`
`)}function GR(n){return n.replace(/"/g,"&quot;")}function _8(n){return n&&n.replace(/\\([\\`*_{}[\]()#+\-.!~])/g,"$1")}function GJe(n){const e=[],t=n.split("|").map(s=>s.trim());n=t[0];const i=t[1];if(i){const s=/height=(\d+)/.exec(i),r=/width=(\d+)/.exec(i),o=s?s[1]:"",a=r?r[1]:"",l=isFinite(parseInt(a)),c=isFinite(parseInt(o));l&&e.push(`width="${a}"`),c&&e.push(`height="${o}"`)}return{href:n,dimensions:e}}class JX{constructor(e){this._prefix=e,this._lastId=0}nextId(){return this._prefix+ ++this._lastId}}const DU=new JX("id#");let Vr={};(function(){function n(e,t){t(Vr)}n.amd=!0,function(e,t){typeof n=="function"&&n.amd?n(["exports"],t):typeof exports=="object"&&typeof module<"u"?t(exports):(e=typeof globalThis<"u"?globalThis:e||self,t(e.marked={}))}(this,function(e){function t(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}e.defaults=t();function i(Kt){e.defaults=Kt}const s=/[&<>"']/,r=new RegExp(s.source,"g"),o=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,a=new RegExp(o.source,"g"),l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},c=Kt=>l[Kt];function d(Kt,U){if(U){if(s.test(Kt))return Kt.replace(r,c)}else if(o.test(Kt))return Kt.replace(a,c);return Kt}const u=/(^|[^\[])\^/g;function h(Kt,U){let q=typeof Kt=="string"?Kt:Kt.source;U=U||"";const Q={replace:(se,de)=>{let be=typeof de=="string"?de:de.source;return be=be.replace(u,"$1"),q=q.replace(se,be),Q},getRegex:()=>new RegExp(q,U)};return Q}function f(Kt){try{Kt=encodeURI(Kt).replace(/%25/g,"%")}catch{return null}return Kt}const g={exec:()=>null};function p(Kt,U){const q=Kt.replace(/\|/g,(de,be,Ne)=>{let tt=!1,ut=be;for(;--ut>=0&&Ne[ut]==="\\";)tt=!tt;return tt?"|":" |"}),Q=q.split(/ \|/);let se=0;if(Q[0].trim()||Q.shift(),Q.length>0&&!Q[Q.length-1].trim()&&Q.pop(),U)if(Q.length>U)Q.splice(U);else for(;Q.length<U;)Q.push("");for(;se<Q.length;se++)Q[se]=Q[se].trim().replace(/\\\|/g,"|");return Q}function _(Kt,U,q){const Q=Kt.length;if(Q===0)return"";let se=0;for(;se<Q;){const de=Kt.charAt(Q-se-1);if(de===U&&!q)se++;else if(de!==U&&q)se++;else break}return Kt.slice(0,Q-se)}function w(Kt,U){if(Kt.indexOf(U[1])===-1)return-1;let q=0;for(let Q=0;Q<Kt.length;Q++)if(Kt[Q]==="\\")Q++;else if(Kt[Q]===U[0])q++;else if(Kt[Q]===U[1]&&(q--,q<0))return Q;return-1}function b(Kt,U,q,Q){const se=U.href,de=U.title?d(U.title):null,be=Kt[1].replace(/\\([\[\]])/g,"$1");if(Kt[0].charAt(0)!=="!"){Q.state.inLink=!0;const Ne={type:"link",raw:q,href:se,title:de,text:be,tokens:Q.inlineTokens(be)};return Q.state.inLink=!1,Ne}return{type:"image",raw:q,href:se,title:de,text:d(be)}}function y(Kt,U){const q=Kt.match(/^(\s+)(?:```)/);if(q===null)return U;const Q=q[1];return U.split(`
`).map(se=>{const de=se.match(/^\s+/);if(de===null)return se;const[be]=de;return be.length>=Q.length?se.slice(Q.length):se}).join(`
`)}class S{constructor(U){is(this,"options");is(this,"rules");is(this,"lexer");this.options=U||e.defaults}space(U){const q=this.rules.block.newline.exec(U);if(q&&q[0].length>0)return{type:"space",raw:q[0]}}code(U){const q=this.rules.block.code.exec(U);if(q){const Q=q[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:q[0],codeBlockStyle:"indented",text:this.options.pedantic?Q:_(Q,`
`)}}}fences(U){const q=this.rules.block.fences.exec(U);if(q){const Q=q[0],se=y(Q,q[3]||"");return{type:"code",raw:Q,lang:q[2]?q[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):q[2],text:se}}}heading(U){const q=this.rules.block.heading.exec(U);if(q){let Q=q[2].trim();if(/#$/.test(Q)){const se=_(Q,"#");(this.options.pedantic||!se||/ $/.test(se))&&(Q=se.trim())}return{type:"heading",raw:q[0],depth:q[1].length,text:Q,tokens:this.lexer.inline(Q)}}}hr(U){const q=this.rules.block.hr.exec(U);if(q)return{type:"hr",raw:_(q[0],`
`)}}blockquote(U){const q=this.rules.block.blockquote.exec(U);if(q){let Q=_(q[0],`
`).split(`
`),se="",de="";const be=[];for(;Q.length>0;){let Ne=!1;const tt=[];let ut;for(ut=0;ut<Q.length;ut++)if(/^ {0,3}>/.test(Q[ut]))tt.push(Q[ut]),Ne=!0;else if(!Ne)tt.push(Q[ut]);else break;Q=Q.slice(ut);const Ut=tt.join(`
`),Si=Ut.replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`).replace(/^ {0,3}>[ \t]?/gm,"");se=se?`${se}
${Ut}`:Ut,de=de?`${de}
${Si}`:Si;const Ii=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(Si,be,!0),this.lexer.state.top=Ii,Q.length===0)break;const yn=be[be.length-1];if((yn==null?void 0:yn.type)==="code")break;if((yn==null?void 0:yn.type)==="blockquote"){const Sn=yn,jr=Sn.raw+`
`+Q.join(`
`),xa=this.blockquote(jr);be[be.length-1]=xa,se=se.substring(0,se.length-Sn.raw.length)+xa.raw,de=de.substring(0,de.length-Sn.text.length)+xa.text;break}else if((yn==null?void 0:yn.type)==="list"){const Sn=yn,jr=Sn.raw+`
`+Q.join(`
`),xa=this.list(jr);be[be.length-1]=xa,se=se.substring(0,se.length-yn.raw.length)+xa.raw,de=de.substring(0,de.length-Sn.raw.length)+xa.raw,Q=jr.substring(be[be.length-1].raw.length).split(`
`);continue}}return{type:"blockquote",raw:se,tokens:be,text:de}}}list(U){let q=this.rules.block.list.exec(U);if(q){let Q=q[1].trim();const se=Q.length>1,de={type:"list",raw:"",ordered:se,start:se?+Q.slice(0,-1):"",loose:!1,items:[]};Q=se?`\\d{1,9}\\${Q.slice(-1)}`:`\\${Q}`,this.options.pedantic&&(Q=se?Q:"[*+-]");const be=new RegExp(`^( {0,3}${Q})((?:[	 ][^\\n]*)?(?:\\n|$))`);let Ne=!1;for(;U;){let tt=!1,ut="",Ut="";if(!(q=be.exec(U))||this.rules.block.hr.test(U))break;ut=q[0],U=U.substring(ut.length);let Si=q[2].split(`
`,1)[0].replace(/^\t+/,fv=>" ".repeat(3*fv.length)),Ii=U.split(`
`,1)[0],yn=!Si.trim(),Sn=0;if(this.options.pedantic?(Sn=2,Ut=Si.trimStart()):yn?Sn=q[1].length+1:(Sn=q[2].search(/[^ ]/),Sn=Sn>4?1:Sn,Ut=Si.slice(Sn),Sn+=q[1].length),yn&&/^ *$/.test(Ii)&&(ut+=Ii+`
`,U=U.substring(Ii.length+1),tt=!0),!tt){const fv=new RegExp(`^ {0,${Math.min(3,Sn-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),Et=new RegExp(`^ {0,${Math.min(3,Sn-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fe=new RegExp(`^ {0,${Math.min(3,Sn-1)}}(?:\`\`\`|~~~)`),et=new RegExp(`^ {0,${Math.min(3,Sn-1)}}#`);for(;U;){const Ct=U.split(`
`,1)[0];if(Ii=Ct,this.options.pedantic&&(Ii=Ii.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),fe.test(Ii)||et.test(Ii)||fv.test(Ii)||Et.test(U))break;if(Ii.search(/[^ ]/)>=Sn||!Ii.trim())Ut+=`
`+Ii.slice(Sn);else{if(yn||Si.search(/[^ ]/)>=4||fe.test(Si)||et.test(Si)||Et.test(Si))break;Ut+=`
`+Ii}!yn&&!Ii.trim()&&(yn=!0),ut+=Ct+`
`,U=U.substring(Ct.length+1),Si=Ii.slice(Sn)}}de.loose||(Ne?de.loose=!0:/\n *\n *$/.test(ut)&&(Ne=!0));let jr=null,xa;this.options.gfm&&(jr=/^\[[ xX]\] /.exec(Ut),jr&&(xa=jr[0]!=="[ ] ",Ut=Ut.replace(/^\[[ xX]\] +/,""))),de.items.push({type:"list_item",raw:ut,task:!!jr,checked:xa,loose:!1,text:Ut,tokens:[]}),de.raw+=ut}de.items[de.items.length-1].raw=de.items[de.items.length-1].raw.trimEnd(),de.items[de.items.length-1].text=de.items[de.items.length-1].text.trimEnd(),de.raw=de.raw.trimEnd();for(let tt=0;tt<de.items.length;tt++)if(this.lexer.state.top=!1,de.items[tt].tokens=this.lexer.blockTokens(de.items[tt].text,[]),!de.loose){const ut=de.items[tt].tokens.filter(Si=>Si.type==="space"),Ut=ut.length>0&&ut.some(Si=>/\n.*\n/.test(Si.raw));de.loose=Ut}if(de.loose)for(let tt=0;tt<de.items.length;tt++)de.items[tt].loose=!0;return de}}html(U){const q=this.rules.block.html.exec(U);if(q)return{type:"html",block:!0,raw:q[0],pre:q[1]==="pre"||q[1]==="script"||q[1]==="style",text:q[0]}}def(U){const q=this.rules.block.def.exec(U);if(q){const Q=q[1].toLowerCase().replace(/\s+/g," "),se=q[2]?q[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",de=q[3]?q[3].substring(1,q[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):q[3];return{type:"def",tag:Q,raw:q[0],href:se,title:de}}}table(U){const q=this.rules.block.table.exec(U);if(!q||!/[:|]/.test(q[2]))return;const Q=p(q[1]),se=q[2].replace(/^\||\| *$/g,"").split("|"),de=q[3]&&q[3].trim()?q[3].replace(/\n[ \t]*$/,"").split(`
`):[],be={type:"table",raw:q[0],header:[],align:[],rows:[]};if(Q.length===se.length){for(const Ne of se)/^ *-+: *$/.test(Ne)?be.align.push("right"):/^ *:-+: *$/.test(Ne)?be.align.push("center"):/^ *:-+ *$/.test(Ne)?be.align.push("left"):be.align.push(null);for(let Ne=0;Ne<Q.length;Ne++)be.header.push({text:Q[Ne],tokens:this.lexer.inline(Q[Ne]),header:!0,align:be.align[Ne]});for(const Ne of de)be.rows.push(p(Ne,be.header.length).map((tt,ut)=>({text:tt,tokens:this.lexer.inline(tt),header:!1,align:be.align[ut]})));return be}}lheading(U){const q=this.rules.block.lheading.exec(U);if(q)return{type:"heading",raw:q[0],depth:q[2].charAt(0)==="="?1:2,text:q[1],tokens:this.lexer.inline(q[1])}}paragraph(U){const q=this.rules.block.paragraph.exec(U);if(q){const Q=q[1].charAt(q[1].length-1)===`
`?q[1].slice(0,-1):q[1];return{type:"paragraph",raw:q[0],text:Q,tokens:this.lexer.inline(Q)}}}text(U){const q=this.rules.block.text.exec(U);if(q)return{type:"text",raw:q[0],text:q[0],tokens:this.lexer.inline(q[0])}}escape(U){const q=this.rules.inline.escape.exec(U);if(q)return{type:"escape",raw:q[0],text:d(q[1])}}tag(U){const q=this.rules.inline.tag.exec(U);if(q)return!this.lexer.state.inLink&&/^<a /i.test(q[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(q[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(q[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(q[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:q[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:q[0]}}link(U){const q=this.rules.inline.link.exec(U);if(q){const Q=q[2].trim();if(!this.options.pedantic&&/^</.test(Q)){if(!/>$/.test(Q))return;const be=_(Q.slice(0,-1),"\\");if((Q.length-be.length)%2===0)return}else{const be=w(q[2],"()");if(be>-1){const tt=(q[0].indexOf("!")===0?5:4)+q[1].length+be;q[2]=q[2].substring(0,be),q[0]=q[0].substring(0,tt).trim(),q[3]=""}}let se=q[2],de="";if(this.options.pedantic){const be=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(se);be&&(se=be[1],de=be[3])}else de=q[3]?q[3].slice(1,-1):"";return se=se.trim(),/^</.test(se)&&(this.options.pedantic&&!/>$/.test(Q)?se=se.slice(1):se=se.slice(1,-1)),b(q,{href:se&&se.replace(this.rules.inline.anyPunctuation,"$1"),title:de&&de.replace(this.rules.inline.anyPunctuation,"$1")},q[0],this.lexer)}}reflink(U,q){let Q;if((Q=this.rules.inline.reflink.exec(U))||(Q=this.rules.inline.nolink.exec(U))){const se=(Q[2]||Q[1]).replace(/\s+/g," "),de=q[se.toLowerCase()];if(!de){const be=Q[0].charAt(0);return{type:"text",raw:be,text:be}}return b(Q,de,Q[0],this.lexer)}}emStrong(U,q,Q=""){let se=this.rules.inline.emStrongLDelim.exec(U);if(!se||se[3]&&Q.match(/[\p{L}\p{N}]/u))return;if(!(se[1]||se[2]||"")||!Q||this.rules.inline.punctuation.exec(Q)){const be=[...se[0]].length-1;let Ne,tt,ut=be,Ut=0;const Si=se[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(Si.lastIndex=0,q=q.slice(-1*U.length+be);(se=Si.exec(q))!=null;){if(Ne=se[1]||se[2]||se[3]||se[4]||se[5]||se[6],!Ne)continue;if(tt=[...Ne].length,se[3]||se[4]){ut+=tt;continue}else if((se[5]||se[6])&&be%3&&!((be+tt)%3)){Ut+=tt;continue}if(ut-=tt,ut>0)continue;tt=Math.min(tt,tt+ut+Ut);const Ii=[...se[0]][0].length,yn=U.slice(0,be+se.index+Ii+tt);if(Math.min(be,tt)%2){const jr=yn.slice(1,-1);return{type:"em",raw:yn,text:jr,tokens:this.lexer.inlineTokens(jr)}}const Sn=yn.slice(2,-2);return{type:"strong",raw:yn,text:Sn,tokens:this.lexer.inlineTokens(Sn)}}}}codespan(U){const q=this.rules.inline.code.exec(U);if(q){let Q=q[2].replace(/\n/g," ");const se=/[^ ]/.test(Q),de=/^ /.test(Q)&&/ $/.test(Q);return se&&de&&(Q=Q.substring(1,Q.length-1)),Q=d(Q,!0),{type:"codespan",raw:q[0],text:Q}}}br(U){const q=this.rules.inline.br.exec(U);if(q)return{type:"br",raw:q[0]}}del(U){const q=this.rules.inline.del.exec(U);if(q)return{type:"del",raw:q[0],text:q[2],tokens:this.lexer.inlineTokens(q[2])}}autolink(U){const q=this.rules.inline.autolink.exec(U);if(q){let Q,se;return q[2]==="@"?(Q=d(q[1]),se="mailto:"+Q):(Q=d(q[1]),se=Q),{type:"link",raw:q[0],text:Q,href:se,tokens:[{type:"text",raw:Q,text:Q}]}}}url(U){var Q;let q;if(q=this.rules.inline.url.exec(U)){let se,de;if(q[2]==="@")se=d(q[0]),de="mailto:"+se;else{let be;do be=q[0],q[0]=((Q=this.rules.inline._backpedal.exec(q[0]))==null?void 0:Q[0])??"";while(be!==q[0]);se=d(q[0]),q[1]==="www."?de="http://"+q[0]:de=q[0]}return{type:"link",raw:q[0],text:se,href:de,tokens:[{type:"text",raw:se,text:se}]}}}inlineText(U){const q=this.rules.inline.text.exec(U);if(q){let Q;return this.lexer.state.inRawBlock?Q=q[0]:Q=d(q[0]),{type:"text",raw:q[0],text:Q}}}}const x=/^(?: *(?:\n|$))+/,E=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,D=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,N=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,I=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,H=/(?:[*+-]|\d{1,9}[.)])/,z=h(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,H).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),G=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,J=/^[^\n]+/,j=/(?!\s*\])(?:\\.|[^\[\]\\])+/,ne=h(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",j).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),oe=h(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,H).getRegex(),ve="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",te=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,ce=h("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",te).replace("tag",ve).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Ie=h(G).replace("hr",N).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ve).getRegex(),it={blockquote:h(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Ie).getRegex(),code:E,def:ne,fences:D,heading:I,hr:N,html:ce,lheading:z,list:oe,newline:x,paragraph:Ie,table:g,text:J},He=h("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",N).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ve).getRegex(),dt={...it,table:He,paragraph:h(G).replace("hr",N).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",He).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ve).getRegex()},P={...it,html:h(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",te).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:g,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:h(G).replace("hr",N).replace("heading",` *#{1,6} *[^
]`).replace("lheading",z).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},$=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Z=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,ae=/^( {2,}|\\)\n(?!\s*$)/,Le=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Ae="\\p{P}\\p{S}",Ue=h(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,Ae).getRegex(),qe=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,vt=h(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,Ae).getRegex(),Ot=h("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,Ae).getRegex(),on=h("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,Ae).getRegex(),Cs=h(/\\([punct])/,"gu").replace(/punct/g,Ae).getRegex(),Rn=h(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),ya=h(te).replace("(?:-->|$)","-->").getRegex(),es=h("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",ya).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),or=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Ur=h(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",or).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),jc=h(/^!?\[(label)\]\[(ref)\]/).replace("label",or).replace("ref",j).getRegex(),$o=h(/^!?\[(ref)\](?:\[\])?/).replace("ref",j).getRegex(),Hd=h("reflink|nolink(?!\\()","g").replace("reflink",jc).replace("nolink",$o).getRegex(),Sr={_backpedal:g,anyPunctuation:Cs,autolink:Rn,blockSkip:qe,br:ae,code:Z,del:g,emStrongLDelim:vt,emStrongRDelimAst:Ot,emStrongRDelimUnd:on,escape:$,link:Ur,nolink:$o,punctuation:Ue,reflink:jc,reflinkSearch:Hd,tag:es,text:Le,url:g},dl={...Sr,link:h(/^!?\[(label)\]\((.*?)\)/).replace("label",or).getRegex(),reflink:h(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",or).getRegex()},xr={...Sr,escape:h($).replace("])","~|])").getRegex(),url:h(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},ul={...xr,br:h(ae).replace("{2,}","*").getRegex(),text:h(xr.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},$r={normal:it,gfm:dt,pedantic:P},jo={normal:Sr,gfm:xr,breaks:ul,pedantic:dl};class ar{constructor(U){is(this,"tokens");is(this,"options");is(this,"state");is(this,"tokenizer");is(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=U||e.defaults,this.options.tokenizer=this.options.tokenizer||new S,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const q={block:$r.normal,inline:jo.normal};this.options.pedantic?(q.block=$r.pedantic,q.inline=jo.pedantic):this.options.gfm&&(q.block=$r.gfm,this.options.breaks?q.inline=jo.breaks:q.inline=jo.gfm),this.tokenizer.rules=q}static get rules(){return{block:$r,inline:jo}}static lex(U,q){return new ar(q).lex(U)}static lexInline(U,q){return new ar(q).inlineTokens(U)}lex(U){U=U.replace(/\r\n|\r/g,`
`),this.blockTokens(U,this.tokens);for(let q=0;q<this.inlineQueue.length;q++){const Q=this.inlineQueue[q];this.inlineTokens(Q.src,Q.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(U,q=[],Q=!1){this.options.pedantic?U=U.replace(/\t/g,"    ").replace(/^ +$/gm,""):U=U.replace(/^( *)(\t+)/gm,(Ne,tt,ut)=>tt+"    ".repeat(ut.length));let se,de,be;for(;U;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(Ne=>(se=Ne.call({lexer:this},U,q))?(U=U.substring(se.raw.length),q.push(se),!0):!1))){if(se=this.tokenizer.space(U)){U=U.substring(se.raw.length),se.raw.length===1&&q.length>0?q[q.length-1].raw+=`
`:q.push(se);continue}if(se=this.tokenizer.code(U)){U=U.substring(se.raw.length),de=q[q.length-1],de&&(de.type==="paragraph"||de.type==="text")?(de.raw+=`
`+se.raw,de.text+=`
`+se.text,this.inlineQueue[this.inlineQueue.length-1].src=de.text):q.push(se);continue}if(se=this.tokenizer.fences(U)){U=U.substring(se.raw.length),q.push(se);continue}if(se=this.tokenizer.heading(U)){U=U.substring(se.raw.length),q.push(se);continue}if(se=this.tokenizer.hr(U)){U=U.substring(se.raw.length),q.push(se);continue}if(se=this.tokenizer.blockquote(U)){U=U.substring(se.raw.length),q.push(se);continue}if(se=this.tokenizer.list(U)){U=U.substring(se.raw.length),q.push(se);continue}if(se=this.tokenizer.html(U)){U=U.substring(se.raw.length),q.push(se);continue}if(se=this.tokenizer.def(U)){U=U.substring(se.raw.length),de=q[q.length-1],de&&(de.type==="paragraph"||de.type==="text")?(de.raw+=`
`+se.raw,de.text+=`
`+se.raw,this.inlineQueue[this.inlineQueue.length-1].src=de.text):this.tokens.links[se.tag]||(this.tokens.links[se.tag]={href:se.href,title:se.title});continue}if(se=this.tokenizer.table(U)){U=U.substring(se.raw.length),q.push(se);continue}if(se=this.tokenizer.lheading(U)){U=U.substring(se.raw.length),q.push(se);continue}if(be=U,this.options.extensions&&this.options.extensions.startBlock){let Ne=1/0;const tt=U.slice(1);let ut;this.options.extensions.startBlock.forEach(Ut=>{ut=Ut.call({lexer:this},tt),typeof ut=="number"&&ut>=0&&(Ne=Math.min(Ne,ut))}),Ne<1/0&&Ne>=0&&(be=U.substring(0,Ne+1))}if(this.state.top&&(se=this.tokenizer.paragraph(be))){de=q[q.length-1],Q&&(de==null?void 0:de.type)==="paragraph"?(de.raw+=`
`+se.raw,de.text+=`
`+se.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=de.text):q.push(se),Q=be.length!==U.length,U=U.substring(se.raw.length);continue}if(se=this.tokenizer.text(U)){U=U.substring(se.raw.length),de=q[q.length-1],de&&de.type==="text"?(de.raw+=`
`+se.raw,de.text+=`
`+se.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=de.text):q.push(se);continue}if(U){const Ne="Infinite loop on byte: "+U.charCodeAt(0);if(this.options.silent){console.error(Ne);break}else throw new Error(Ne)}}return this.state.top=!0,q}inline(U,q=[]){return this.inlineQueue.push({src:U,tokens:q}),q}inlineTokens(U,q=[]){let Q,se,de,be=U,Ne,tt,ut;if(this.tokens.links){const Ut=Object.keys(this.tokens.links);if(Ut.length>0)for(;(Ne=this.tokenizer.rules.inline.reflinkSearch.exec(be))!=null;)Ut.includes(Ne[0].slice(Ne[0].lastIndexOf("[")+1,-1))&&(be=be.slice(0,Ne.index)+"["+"a".repeat(Ne[0].length-2)+"]"+be.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(Ne=this.tokenizer.rules.inline.blockSkip.exec(be))!=null;)be=be.slice(0,Ne.index)+"["+"a".repeat(Ne[0].length-2)+"]"+be.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(Ne=this.tokenizer.rules.inline.anyPunctuation.exec(be))!=null;)be=be.slice(0,Ne.index)+"++"+be.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;U;)if(tt||(ut=""),tt=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(Ut=>(Q=Ut.call({lexer:this},U,q))?(U=U.substring(Q.raw.length),q.push(Q),!0):!1))){if(Q=this.tokenizer.escape(U)){U=U.substring(Q.raw.length),q.push(Q);continue}if(Q=this.tokenizer.tag(U)){U=U.substring(Q.raw.length),se=q[q.length-1],se&&Q.type==="text"&&se.type==="text"?(se.raw+=Q.raw,se.text+=Q.text):q.push(Q);continue}if(Q=this.tokenizer.link(U)){U=U.substring(Q.raw.length),q.push(Q);continue}if(Q=this.tokenizer.reflink(U,this.tokens.links)){U=U.substring(Q.raw.length),se=q[q.length-1],se&&Q.type==="text"&&se.type==="text"?(se.raw+=Q.raw,se.text+=Q.text):q.push(Q);continue}if(Q=this.tokenizer.emStrong(U,be,ut)){U=U.substring(Q.raw.length),q.push(Q);continue}if(Q=this.tokenizer.codespan(U)){U=U.substring(Q.raw.length),q.push(Q);continue}if(Q=this.tokenizer.br(U)){U=U.substring(Q.raw.length),q.push(Q);continue}if(Q=this.tokenizer.del(U)){U=U.substring(Q.raw.length),q.push(Q);continue}if(Q=this.tokenizer.autolink(U)){U=U.substring(Q.raw.length),q.push(Q);continue}if(!this.state.inLink&&(Q=this.tokenizer.url(U))){U=U.substring(Q.raw.length),q.push(Q);continue}if(de=U,this.options.extensions&&this.options.extensions.startInline){let Ut=1/0;const Si=U.slice(1);let Ii;this.options.extensions.startInline.forEach(yn=>{Ii=yn.call({lexer:this},Si),typeof Ii=="number"&&Ii>=0&&(Ut=Math.min(Ut,Ii))}),Ut<1/0&&Ut>=0&&(de=U.substring(0,Ut+1))}if(Q=this.tokenizer.inlineText(de)){U=U.substring(Q.raw.length),Q.raw.slice(-1)!=="_"&&(ut=Q.raw.slice(-1)),tt=!0,se=q[q.length-1],se&&se.type==="text"?(se.raw+=Q.raw,se.text+=Q.text):q.push(Q);continue}if(U){const Ut="Infinite loop on byte: "+U.charCodeAt(0);if(this.options.silent){console.error(Ut);break}else throw new Error(Ut)}}return q}}class ho{constructor(U){is(this,"options");is(this,"parser");this.options=U||e.defaults}space(U){return""}code({text:U,lang:q,escaped:Q}){var be;const se=(be=(q||"").match(/^\S*/))==null?void 0:be[0],de=U.replace(/\n$/,"")+`
`;return se?'<pre><code class="language-'+d(se)+'">'+(Q?de:d(de,!0))+`</code></pre>
`:"<pre><code>"+(Q?de:d(de,!0))+`</code></pre>
`}blockquote({tokens:U}){return`<blockquote>
${this.parser.parse(U)}</blockquote>
`}html({text:U}){return U}heading({tokens:U,depth:q}){return`<h${q}>${this.parser.parseInline(U)}</h${q}>
`}hr(U){return`<hr>
`}list(U){const q=U.ordered,Q=U.start;let se="";for(let Ne=0;Ne<U.items.length;Ne++){const tt=U.items[Ne];se+=this.listitem(tt)}const de=q?"ol":"ul",be=q&&Q!==1?' start="'+Q+'"':"";return"<"+de+be+`>
`+se+"</"+de+`>
`}listitem(U){let q="";if(U.task){const Q=this.checkbox({checked:!!U.checked});U.loose?U.tokens.length>0&&U.tokens[0].type==="paragraph"?(U.tokens[0].text=Q+" "+U.tokens[0].text,U.tokens[0].tokens&&U.tokens[0].tokens.length>0&&U.tokens[0].tokens[0].type==="text"&&(U.tokens[0].tokens[0].text=Q+" "+U.tokens[0].tokens[0].text)):U.tokens.unshift({type:"text",raw:Q+" ",text:Q+" "}):q+=Q+" "}return q+=this.parser.parse(U.tokens,!!U.loose),`<li>${q}</li>
`}checkbox({checked:U}){return"<input "+(U?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:U}){return`<p>${this.parser.parseInline(U)}</p>
`}table(U){let q="",Q="";for(let de=0;de<U.header.length;de++)Q+=this.tablecell(U.header[de]);q+=this.tablerow({text:Q});let se="";for(let de=0;de<U.rows.length;de++){const be=U.rows[de];Q="";for(let Ne=0;Ne<be.length;Ne++)Q+=this.tablecell(be[Ne]);se+=this.tablerow({text:Q})}return se&&(se=`<tbody>${se}</tbody>`),`<table>
<thead>
`+q+`</thead>
`+se+`</table>
`}tablerow({text:U}){return`<tr>
${U}</tr>
`}tablecell(U){const q=this.parser.parseInline(U.tokens),Q=U.header?"th":"td";return(U.align?`<${Q} align="${U.align}">`:`<${Q}>`)+q+`</${Q}>
`}strong({tokens:U}){return`<strong>${this.parser.parseInline(U)}</strong>`}em({tokens:U}){return`<em>${this.parser.parseInline(U)}</em>`}codespan({text:U}){return`<code>${U}</code>`}br(U){return"<br>"}del({tokens:U}){return`<del>${this.parser.parseInline(U)}</del>`}link({href:U,title:q,tokens:Q}){const se=this.parser.parseInline(Q),de=f(U);if(de===null)return se;U=de;let be='<a href="'+U+'"';return q&&(be+=' title="'+q+'"'),be+=">"+se+"</a>",be}image({href:U,title:q,text:Q}){const se=f(U);if(se===null)return Q;U=se;let de=`<img src="${U}" alt="${Q}"`;return q&&(de+=` title="${q}"`),de+=">",de}text(U){return"tokens"in U&&U.tokens?this.parser.parseInline(U.tokens):U.text}}class Ko{strong({text:U}){return U}em({text:U}){return U}codespan({text:U}){return U}del({text:U}){return U}html({text:U}){return U}text({text:U}){return U}link({text:U}){return""+U}image({text:U}){return""+U}br(){return""}}class qn{constructor(U){is(this,"options");is(this,"renderer");is(this,"textRenderer");this.options=U||e.defaults,this.options.renderer=this.options.renderer||new ho,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Ko}static parse(U,q){return new qn(q).parse(U)}static parseInline(U,q){return new qn(q).parseInline(U)}parse(U,q=!0){let Q="";for(let se=0;se<U.length;se++){const de=U[se];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[de.type]){const Ne=de,tt=this.options.extensions.renderers[Ne.type].call({parser:this},Ne);if(tt!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(Ne.type)){Q+=tt||"";continue}}const be=de;switch(be.type){case"space":{Q+=this.renderer.space(be);continue}case"hr":{Q+=this.renderer.hr(be);continue}case"heading":{Q+=this.renderer.heading(be);continue}case"code":{Q+=this.renderer.code(be);continue}case"table":{Q+=this.renderer.table(be);continue}case"blockquote":{Q+=this.renderer.blockquote(be);continue}case"list":{Q+=this.renderer.list(be);continue}case"html":{Q+=this.renderer.html(be);continue}case"paragraph":{Q+=this.renderer.paragraph(be);continue}case"text":{let Ne=be,tt=this.renderer.text(Ne);for(;se+1<U.length&&U[se+1].type==="text";)Ne=U[++se],tt+=`
`+this.renderer.text(Ne);q?Q+=this.renderer.paragraph({type:"paragraph",raw:tt,text:tt,tokens:[{type:"text",raw:tt,text:tt}]}):Q+=tt;continue}default:{const Ne='Token with "'+be.type+'" type was not found.';if(this.options.silent)return console.error(Ne),"";throw new Error(Ne)}}}return Q}parseInline(U,q){q=q||this.renderer;let Q="";for(let se=0;se<U.length;se++){const de=U[se];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[de.type]){const Ne=this.options.extensions.renderers[de.type].call({parser:this},de);if(Ne!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(de.type)){Q+=Ne||"";continue}}const be=de;switch(be.type){case"escape":{Q+=q.text(be);break}case"html":{Q+=q.html(be);break}case"link":{Q+=q.link(be);break}case"image":{Q+=q.image(be);break}case"strong":{Q+=q.strong(be);break}case"em":{Q+=q.em(be);break}case"codespan":{Q+=q.codespan(be);break}case"br":{Q+=q.br(be);break}case"del":{Q+=q.del(be);break}case"text":{Q+=q.text(be);break}default:{const Ne='Token with "'+be.type+'" type was not found.';if(this.options.silent)return console.error(Ne),"";throw new Error(Ne)}}}return Q}}class qs{constructor(U){is(this,"options");this.options=U||e.defaults}preprocess(U){return U}postprocess(U){return U}processAllTokens(U){return U}}is(qs,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));class Lr{constructor(...U){is(this,"defaults",t());is(this,"options",this.setOptions);is(this,"parse",this.parseMarkdown(ar.lex,qn.parse));is(this,"parseInline",this.parseMarkdown(ar.lexInline,qn.parseInline));is(this,"Parser",qn);is(this,"Renderer",ho);is(this,"TextRenderer",Ko);is(this,"Lexer",ar);is(this,"Tokenizer",S);is(this,"Hooks",qs);this.use(...U)}walkTokens(U,q){var se,de;let Q=[];for(const be of U)switch(Q=Q.concat(q.call(this,be)),be.type){case"table":{const Ne=be;for(const tt of Ne.header)Q=Q.concat(this.walkTokens(tt.tokens,q));for(const tt of Ne.rows)for(const ut of tt)Q=Q.concat(this.walkTokens(ut.tokens,q));break}case"list":{const Ne=be;Q=Q.concat(this.walkTokens(Ne.items,q));break}default:{const Ne=be;(de=(se=this.defaults.extensions)==null?void 0:se.childTokens)!=null&&de[Ne.type]?this.defaults.extensions.childTokens[Ne.type].forEach(tt=>{const ut=Ne[tt].flat(1/0);Q=Q.concat(this.walkTokens(ut,q))}):Ne.tokens&&(Q=Q.concat(this.walkTokens(Ne.tokens,q)))}}return Q}use(...U){const q=this.defaults.extensions||{renderers:{},childTokens:{}};return U.forEach(Q=>{const se={...Q};if(se.async=this.defaults.async||se.async||!1,Q.extensions&&(Q.extensions.forEach(de=>{if(!de.name)throw new Error("extension name required");if("renderer"in de){const be=q.renderers[de.name];be?q.renderers[de.name]=function(...Ne){let tt=de.renderer.apply(this,Ne);return tt===!1&&(tt=be.apply(this,Ne)),tt}:q.renderers[de.name]=de.renderer}if("tokenizer"in de){if(!de.level||de.level!=="block"&&de.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const be=q[de.level];be?be.unshift(de.tokenizer):q[de.level]=[de.tokenizer],de.start&&(de.level==="block"?q.startBlock?q.startBlock.push(de.start):q.startBlock=[de.start]:de.level==="inline"&&(q.startInline?q.startInline.push(de.start):q.startInline=[de.start]))}"childTokens"in de&&de.childTokens&&(q.childTokens[de.name]=de.childTokens)}),se.extensions=q),Q.renderer){const de=this.defaults.renderer||new ho(this.defaults);for(const be in Q.renderer){if(!(be in de))throw new Error(`renderer '${be}' does not exist`);if(["options","parser"].includes(be))continue;const Ne=be,tt=Q.renderer[Ne],ut=de[Ne];de[Ne]=(...Ut)=>{let Si=tt.apply(de,Ut);return Si===!1&&(Si=ut.apply(de,Ut)),Si||""}}se.renderer=de}if(Q.tokenizer){const de=this.defaults.tokenizer||new S(this.defaults);for(const be in Q.tokenizer){if(!(be in de))throw new Error(`tokenizer '${be}' does not exist`);if(["options","rules","lexer"].includes(be))continue;const Ne=be,tt=Q.tokenizer[Ne],ut=de[Ne];de[Ne]=(...Ut)=>{let Si=tt.apply(de,Ut);return Si===!1&&(Si=ut.apply(de,Ut)),Si}}se.tokenizer=de}if(Q.hooks){const de=this.defaults.hooks||new qs;for(const be in Q.hooks){if(!(be in de))throw new Error(`hook '${be}' does not exist`);if(be==="options")continue;const Ne=be,tt=Q.hooks[Ne],ut=de[Ne];qs.passThroughHooks.has(be)?de[Ne]=Ut=>{if(this.defaults.async)return Promise.resolve(tt.call(de,Ut)).then(Ii=>ut.call(de,Ii));const Si=tt.call(de,Ut);return ut.call(de,Si)}:de[Ne]=(...Ut)=>{let Si=tt.apply(de,Ut);return Si===!1&&(Si=ut.apply(de,Ut)),Si}}se.hooks=de}if(Q.walkTokens){const de=this.defaults.walkTokens,be=Q.walkTokens;se.walkTokens=function(Ne){let tt=[];return tt.push(be.call(this,Ne)),de&&(tt=tt.concat(de.call(this,Ne))),tt}}this.defaults={...this.defaults,...se}}),this}setOptions(U){return this.defaults={...this.defaults,...U},this}lexer(U,q){return ar.lex(U,q??this.defaults)}parser(U,q){return qn.parse(U,q??this.defaults)}parseMarkdown(U,q){return(se,de)=>{const be={...de},Ne={...this.defaults,...be},tt=this.onError(!!Ne.silent,!!Ne.async);if(this.defaults.async===!0&&be.async===!1)return tt(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof se>"u"||se===null)return tt(new Error("marked(): input parameter is undefined or null"));if(typeof se!="string")return tt(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(se)+", string expected"));if(Ne.hooks&&(Ne.hooks.options=Ne),Ne.async)return Promise.resolve(Ne.hooks?Ne.hooks.preprocess(se):se).then(ut=>U(ut,Ne)).then(ut=>Ne.hooks?Ne.hooks.processAllTokens(ut):ut).then(ut=>Ne.walkTokens?Promise.all(this.walkTokens(ut,Ne.walkTokens)).then(()=>ut):ut).then(ut=>q(ut,Ne)).then(ut=>Ne.hooks?Ne.hooks.postprocess(ut):ut).catch(tt);try{Ne.hooks&&(se=Ne.hooks.preprocess(se));let ut=U(se,Ne);Ne.hooks&&(ut=Ne.hooks.processAllTokens(ut)),Ne.walkTokens&&this.walkTokens(ut,Ne.walkTokens);let Ut=q(ut,Ne);return Ne.hooks&&(Ut=Ne.hooks.postprocess(Ut)),Ut}catch(ut){return tt(ut)}}}onError(U,q){return Q=>{if(Q.message+=`
Please report this to https://github.com/markedjs/marked.`,U){const se="<p>An error occurred:</p><pre>"+d(Q.message+"",!0)+"</pre>";return q?Promise.resolve(se):se}if(q)return Promise.reject(Q);throw Q}}}const fo=new Lr;function ht(Kt,U){return fo.parse(Kt,U)}ht.options=ht.setOptions=function(Kt){return fo.setOptions(Kt),ht.defaults=fo.defaults,i(ht.defaults),ht},ht.getDefaults=t,ht.defaults=e.defaults,ht.use=function(...Kt){return fo.use(...Kt),ht.defaults=fo.defaults,i(ht.defaults),ht},ht.walkTokens=function(Kt,U){return fo.walkTokens(Kt,U)},ht.parseInline=fo.parseInline,ht.Parser=qn,ht.parser=qn.parse,ht.Renderer=ho,ht.TextRenderer=Ko,ht.Lexer=ar,ht.lexer=ar.lex,ht.Tokenizer=S,ht.Hooks=qs,ht.parse=ht;const zi=ht.options,hn=ht.setOptions,go=ht.use,Qi=ht.walkTokens,Sa=ht.parseInline,uv=ht,iC=qn.parse,hv=ar.lex;e.Hooks=qs,e.Lexer=ar,e.Marked=Lr,e.Parser=qn,e.Renderer=ho,e.TextRenderer=Ko,e.Tokenizer=S,e.getDefaults=t,e.lexer=hv,e.marked=ht,e.options=zi,e.parse=uv,e.parseInline=Sa,e.parser=iC,e.setOptions=hn,e.use=go,e.walkTokens=Qi})})();Vr.Hooks||exports.Hooks;Vr.Lexer||exports.Lexer;Vr.Marked||exports.Marked;Vr.Parser||exports.Parser;var x1e=Vr.Renderer||exports.Renderer;Vr.TextRenderer||exports.TextRenderer;Vr.Tokenizer||exports.Tokenizer;var YJe=Vr.defaults||exports.defaults;Vr.getDefaults||exports.getDefaults;var mB=Vr.lexer||exports.lexer;Vr.marked||exports.marked;Vr.options||exports.options;var L1e=Vr.parse||exports.parse;Vr.parseInline||exports.parseInline;var ZJe=Vr.parser||exports.parser;Vr.setOptions||exports.setOptions;Vr.use||exports.use;Vr.walkTokens||exports.walkTokens;function XJe(n){return JSON.stringify(n,QJe)}function NU(n){let e=JSON.parse(n);return e=TU(e),e}function QJe(n,e){return e instanceof RegExp?{$mid:2,source:e.source,flags:e.flags}:e}function TU(n,e=0){if(!n||e>200)return n;if(typeof n=="object"){switch(n.$mid){case 1:return Xe.revive(n);case 2:return new RegExp(n.source,n.flags);case 17:return new Date(n.source)}if(n instanceof J3||n instanceof Uint8Array)return n;if(Array.isArray(n))for(let t=0;t<n.length;++t)n[t]=TU(n[t],e+1);else for(const t in n)Object.hasOwnProperty.call(n,t)&&(n[t]=TU(n[t],e+1))}return n}const v8=Object.freeze({image:({href:n,title:e,text:t})=>{let i=[],s=[];return n&&({href:n,dimensions:i}=GJe(n),s.push(`src="${GR(n)}"`)),t&&s.push(`alt="${GR(t)}"`),e&&s.push(`title="${GR(e)}"`),i.length&&(s=s.concat(i)),"<img "+s.join(" ")+">"},paragraph({tokens:n}){return`<p>${this.parser.parseInline(n)}</p>`},link({href:n,title:e,tokens:t}){let i=this.parser.parseInline(t);return typeof n!="string"?"":(n===i&&(i=_8(i)),e=typeof e=="string"?GR(_8(e)):"",n=_8(n),n=n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),`<a href="${n}" title="${e||n}" draggable="false">${i}</a>`)}});function _B(n,e={},t={}){const i=new ue;let s=!1;const r=jX(e),o=function(p){let _;try{_=NU(decodeURIComponent(p))}catch{}return _?(_=Fwe(_,w=>{if(n.uris&&n.uris[w])return Xe.revive(n.uris[w])}),encodeURIComponent(JSON.stringify(_))):p},a=function(p,_){const w=n.uris&&n.uris[p];let b=Xe.revive(w);return _?p.startsWith(mt.data+":")?p:(b||(b=Xe.parse(p)),F3.uriToBrowserUri(b).toString(!0)):!b||Xe.parse(p).toString()===b.toString()?p:(b.query&&(b=b.with({query:o(b.query)})),b.toString())},l=new x1e;l.image=v8.image,l.link=v8.link,l.paragraph=v8.paragraph;const c=[],d=[];if(e.codeBlockRendererSync?l.code=({text:p,lang:_})=>{const w=DU.nextId(),b=e.codeBlockRendererSync(_le(_),p);return d.push([w,b]),`<div class="code" data-code="${w}">${qk(p)}</div>`}:e.codeBlockRenderer&&(l.code=({text:p,lang:_})=>{const w=DU.nextId(),b=e.codeBlockRenderer(_le(_),p);return c.push(b.then(y=>[w,y])),`<div class="code" data-code="${w}">${qk(p)}</div>`}),e.actionHandler){const p=function(b){let y=b.target;if(!(y.tagName!=="A"&&(y=y.parentElement,!y||y.tagName!=="A")))try{let S=y.dataset.href;S&&(n.baseUri&&(S=b8(Xe.from(n.baseUri),S)),e.actionHandler.callback(S,b))}catch(S){pt(S)}finally{b.preventDefault()}},_=e.actionHandler.disposables.add(new zt(r,"click")),w=e.actionHandler.disposables.add(new zt(r,"auxclick"));e.actionHandler.disposables.add(Ee.any(_.event,w.event)(b=>{const y=new bd(nt(r),b);!y.leftButton&&!y.middleButton||p(y)})),e.actionHandler.disposables.add(re(r,"keydown",b=>{const y=new Oi(b);!y.equals(10)&&!y.equals(3)||p(y)}))}n.supportHtml||(l.html=({text:p})=>{var w;return(w=e.sanitizerOptions)!=null&&w.replaceWithPlaintext?qk(p):(n.isTrusted?p.match(/^(<span[^>]+>)|(<\/\s*span>)$/):void 0)?p:""}),t.renderer=l;let u=n.value??"";u.length>1e5&&(u=`${u.substr(0,1e5)}`),n.supportThemeIcons&&(u=OJe(u));let h;if(e.fillInIncompleteTokens){const p={...YJe,...t},_=mB(u,p),w=het(_);h=ZJe(w,p)}else h=L1e(u,{...t,async:!1});n.supportThemeIcons&&(h=Ym(h).map(_=>typeof _=="string"?_:_.outerHTML).join(""));const g=new DOMParser().parseFromString(RU({isTrusted:n.isTrusted,...e.sanitizerOptions},h),"text/html");if(g.body.querySelectorAll("img, audio, video, source").forEach(p=>{const _=p.getAttribute("src");if(_){let w=_;try{n.baseUri&&(w=b8(Xe.from(n.baseUri),w))}catch{}if(p.setAttribute("src",a(w,!0)),e.remoteImageIsAllowed){const b=Xe.parse(w);b.scheme!==mt.file&&b.scheme!==mt.data&&!e.remoteImageIsAllowed(b)&&p.replaceWith(xe("",void 0,p.outerHTML))}}}),g.body.querySelectorAll("a").forEach(p=>{const _=p.getAttribute("href");if(p.setAttribute("href",""),!_||/^data:|javascript:/i.test(_)||/^command:/i.test(_)&&!n.isTrusted||/^command:(\/\/\/)?_workbench\.downloadResource/i.test(_))p.replaceWith(...p.childNodes);else{let w=a(_,!1);n.baseUri&&(w=b8(Xe.from(n.baseUri),_)),p.dataset.href=w}}),r.innerHTML=RU({isTrusted:n.isTrusted,...e.sanitizerOptions},g.body.innerHTML),c.length>0)Promise.all(c).then(p=>{var b;if(s)return;const _=new Map(p),w=r.querySelectorAll("div[data-code]");for(const y of w){const S=_.get(y.dataset.code??"");S&&sr(y,S)}(b=e.asyncRenderCallback)==null||b.call(e)});else if(d.length>0){const p=new Map(d),_=r.querySelectorAll("div[data-code]");for(const w of _){const b=p.get(w.dataset.code??"");b&&sr(w,b)}}if(e.asyncRenderCallback)for(const p of r.getElementsByTagName("img")){const _=i.add(re(p,"load",()=>{_.dispose(),e.asyncRenderCallback()}))}return{element:r,dispose:()=>{s=!0,i.dispose()}}}function _le(n){if(!n)return"";const e=n.split(/[\s+|:|,|\{|\?]/,1);return e.length?e[0]:n}function b8(n,e){return/^\w[\w\d+.-]*:/.test(e)?e:n.path.endsWith("/")?gle(n,e).toString():gle(pB(n),e).toString()}const JJe=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];function RU(n,e){const{config:t,allowedSchemes:i}=tet(n),s=new ue;s.add(vle("uponSanitizeAttribute",(r,o)=>{var a;if(o.attrName==="style"||o.attrName==="class"){if(r.tagName==="SPAN"){if(o.attrName==="style"){o.keepAttr=/^(color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z]+)+\));)?(background-color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z]+)+\));)?(border-radius:[0-9]+px;)?$/.test(o.attrValue);return}else if(o.attrName==="class"){o.keepAttr=/^codicon codicon-[a-z\-]+( codicon-modifier-[a-z\-]+)?$/.test(o.attrValue);return}}o.keepAttr=!1;return}else if(r.tagName==="INPUT"&&((a=r.attributes.getNamedItem("type"))==null?void 0:a.value)==="checkbox"){if(o.attrName==="type"&&o.attrValue==="checkbox"||o.attrName==="disabled"||o.attrName==="checked"){o.keepAttr=!0;return}o.keepAttr=!1}})),s.add(vle("uponSanitizeElement",(r,o)=>{var a;if(o.tagName==="input"&&(((a=r.attributes.getNamedItem("type"))==null?void 0:a.value)==="checkbox"?r.setAttribute("disabled",""):n.replaceWithPlaintext||r.remove()),n.replaceWithPlaintext&&!o.allowedTags[o.tagName]&&o.tagName!=="body"&&r.parentElement){let l,c;if(o.tagName==="#comment")l=`<!--${r.textContent}-->`;else{const f=JJe.includes(o.tagName),g=r.attributes.length?" "+Array.from(r.attributes).map(p=>`${p.name}="${p.value}"`).join(" "):"";l=`<${o.tagName}${g}>`,f||(c=`</${o.tagName}>`)}const d=document.createDocumentFragment(),u=r.parentElement.ownerDocument.createTextNode(l);d.appendChild(u);const h=c?r.parentElement.ownerDocument.createTextNode(c):void 0;for(;r.firstChild;)d.appendChild(r.firstChild);h&&d.appendChild(h),r.nodeType===Node.COMMENT_NODE?r.parentElement.insertBefore(d,r):r.parentElement.replaceChild(d,r)}})),s.add(Rqe(i));try{return T0e(e,{...t,RETURN_TRUSTED_TYPE:!0})}finally{s.dispose()}}const eet=["align","autoplay","alt","checked","class","colspan","controls","data-code","data-href","disabled","draggable","height","href","loop","muted","playsinline","poster","rowspan","src","style","target","title","type","width","start"];function tet(n){const e=[mt.http,mt.https,mt.mailto,mt.data,mt.file,mt.vscodeFileResource,mt.vscodeRemote,mt.vscodeRemoteResource];return n.isTrusted&&e.push(mt.command),{config:{ALLOWED_TAGS:n.allowedTags??[...Aqe],ALLOWED_ATTR:eet,ALLOW_UNKNOWN_PROTOCOLS:!0},allowedSchemes:e}}function iet(n){return typeof n=="string"?n:net(n)}function net(n,e){let t=n.value??"";t.length>1e5&&(t=`${t.substr(0,1e5)}`);const i=L1e(t,{async:!1,renderer:oet.value}).replace(/&(#\d+|[a-zA-Z]+);/g,s=>set.get(s)??s);return RU({isTrusted:!1},i).toString()}const set=new Map([["&quot;",'"'],["&nbsp;"," "],["&amp;","&"],["&#39;","'"],["&lt;","<"],["&gt;",">"]]);function ret(){const n=new x1e;return n.code=({text:e})=>e,n.blockquote=({text:e})=>e+`
`,n.html=e=>"",n.heading=function({tokens:e}){return this.parser.parseInline(e)+`
`},n.hr=()=>"",n.list=function({items:e}){return e.map(t=>this.listitem(t)).join(`
`)+`
`},n.listitem=({text:e})=>e+`
`,n.paragraph=function({tokens:e}){return this.parser.parseInline(e)+`
`},n.table=function({header:e,rows:t}){return e.map(i=>this.tablecell(i)).join(" ")+`
`+t.map(i=>i.map(s=>this.tablecell(s)).join(" ")).join(`
`)+`
`},n.tablerow=({text:e})=>e,n.tablecell=function({tokens:e}){return this.parser.parseInline(e)},n.strong=({text:e})=>e,n.em=({text:e})=>e,n.codespan=({text:e})=>e,n.br=e=>`
`,n.del=({text:e})=>e,n.image=e=>"",n.text=({text:e})=>e,n.link=({text:e})=>e,n}const oet=new Wu(n=>ret());function FP(n){let e="";return n.forEach(t=>{e+=t.raw}),e}function k1e(n){var e,t;if(n.tokens)for(let i=n.tokens.length-1;i>=0;i--){const s=n.tokens[i];if(s.type==="text"){const r=s.raw.split(`
`),o=r[r.length-1];if(o.includes("`"))return get(n);if(o.includes("**"))return wet(n);if(o.match(/\*\w/))return pet(n);if(o.match(/(^|\s)__\w/))return Cet(n);if(o.match(/(^|\s)_\w/))return met(n);if(aet(o)||cet(o)&&n.tokens.slice(0,i).some(a=>a.type==="text"&&a.raw.match(/\[[^\]]*$/))){const a=n.tokens.slice(i+1);return((e=a[0])==null?void 0:e.type)==="link"&&((t=a[1])==null?void 0:t.type)==="text"&&a[1].raw.match(/^ *"[^"]*$/)||o.match(/^[^"]* +"[^"]*$/)?vet(n):_et(n)}else if(o.match(/(^|\s)\[\w*/))return bet(n)}}}function aet(n){return!!n.match(/(^|\s)\[.*\]\(\w*/)}function cet(n){return!!n.match(/^[^\[]*\]\([^\)]*$/)}function det(n){var l;const e=n.items[n.items.length-1],t=e.tokens?e.tokens[e.tokens.length-1]:void 0;let i;if((t==null?void 0:t.type)==="text"&&!("inRawBlock"in e)&&(i=k1e(t)),!i||i.type!=="paragraph")return;const s=FP(n.items.slice(0,-1)),r=(l=e.raw.match(/^(\s*(-|\d+\.|\*) +)/))==null?void 0:l[0];if(!r)return;const o=r+FP(e.tokens.slice(0,-1))+i.raw,a=mB(s+o)[0];if(a.type==="list")return a}const uet=3;function het(n){for(let e=0;e<uet;e++){const t=fet(n);if(t)n=t;else break}return n}function fet(n){let e,t;for(e=0;e<n.length;e++){const i=n[e];if(i.type==="paragraph"&&i.raw.match(/(\n|^)\|/)){t=yet(n.slice(e));break}if(e===n.length-1&&i.type==="list"){const s=det(i);if(s){t=[s];break}}if(e===n.length-1&&i.type==="paragraph"){const s=k1e(i);if(s){t=[s];break}}}if(t){const i=[...n.slice(0,e),...t];return i.links=n.links,i}return null}function get(n){return iv(n,"`")}function pet(n){return iv(n,"*")}function met(n){return iv(n,"_")}function _et(n){return iv(n,")")}function vet(n){return iv(n,'")')}function bet(n){return iv(n,"](https://microsoft.com)")}function wet(n){return iv(n,"**")}function Cet(n){return iv(n,"__")}function iv(n,e){const t=FP(Array.isArray(n)?n:[n]);return mB(t+e)[0]}function yet(n){const e=FP(n),t=e.split(`
`);let i,s=!1;for(let r=0;r<t.length;r++){const o=t[r].trim();if(typeof i>"u"&&o.match(/^\s*\|/)){const a=o.match(/(\|[^\|]+)(?=\||$)/g);a&&(i=a.length)}else if(typeof i=="number")if(o.match(/^\s*\|/)){if(r!==t.length-1)return;s=!0}else return}if(typeof i=="number"&&i>0){const r=s?t.slice(0,-1).join(`
`):e,o=!!r.match(/\|\s*$/),a=r+(o?"":"|")+`
|${" --- |".repeat(i)}`;return mB(a)}}function vle(n,e){return R0e(n,e),Ye(()=>A0e(n))}const Xf=class Xf{static createEmpty(e,t){const i=Xf.defaultTokenMetadata,s=new Uint32Array(2);return s[0]=e.length,s[1]=i,new Xf(s,e,t)}static createFromTextAndMetadata(e,t){let i=0,s="";const r=new Array;for(const{text:o,metadata:a}of e)r.push(i+o.length,a),i+=o.length,s+=o;return new Xf(new Uint32Array(r),s,t)}constructor(e,t,i){this._lineTokensBrand=void 0,this._tokens=e,this._tokensCount=this._tokens.length>>>1,this._text=t,this.languageIdCodec=i}equals(e){return e instanceof Xf?this.slicedEquals(e,0,this._tokensCount):!1}slicedEquals(e,t,i){if(this._text!==e._text||this._tokensCount!==e._tokensCount)return!1;const s=t<<1,r=s+(i<<1);for(let o=s;o<r;o++)if(this._tokens[o]!==e._tokens[o])return!1;return!0}getLineContent(){return this._text}getCount(){return this._tokensCount}getStartOffset(e){return e>0?this._tokens[e-1<<1]:0}getMetadata(e){return this._tokens[(e<<1)+1]}getLanguageId(e){const t=this._tokens[(e<<1)+1],i=ra.getLanguageId(t);return this.languageIdCodec.decodeLanguageId(i)}getStandardTokenType(e){const t=this._tokens[(e<<1)+1];return ra.getTokenType(t)}getForeground(e){const t=this._tokens[(e<<1)+1];return ra.getForeground(t)}getClassName(e){const t=this._tokens[(e<<1)+1];return ra.getClassNameFromMetadata(t)}getInlineStyle(e,t){const i=this._tokens[(e<<1)+1];return ra.getInlineStyleFromMetadata(i,t)}getPresentation(e){const t=this._tokens[(e<<1)+1];return ra.getPresentationFromMetadata(t)}getEndOffset(e){return this._tokens[e<<1]}findTokenIndexAtOffset(e){return Xf.findIndexInTokensArray(this._tokens,e)}inflate(){return this}sliceAndInflate(e,t,i){return new eQ(this,e,t,i)}static convertToEndOffset(e,t){const s=(e.length>>>1)-1;for(let r=0;r<s;r++)e[r<<1]=e[r+1<<1];e[s<<1]=t}static findIndexInTokensArray(e,t){if(e.length<=2)return 0;let i=0,s=(e.length>>>1)-1;for(;i<s;){const r=i+Math.floor((s-i)/2),o=e[r<<1];if(o===t)return r+1;o<t?i=r+1:o>t&&(s=r)}return i}withInserted(e){if(e.length===0)return this;let t=0,i=0,s="";const r=new Array;let o=0;for(;;){const a=t<this._tokensCount?this._tokens[t<<1]:-1,l=i<e.length?e[i]:null;if(a!==-1&&(l===null||a<=l.offset)){s+=this._text.substring(o,a);const c=this._tokens[(t<<1)+1];r.push(s.length,c),t++,o=a}else if(l){if(l.offset>o){s+=this._text.substring(o,l.offset);const c=this._tokens[(t<<1)+1];r.push(s.length,c),o=l.offset}s+=l.text,r.push(s.length,l.tokenMetadata),i++}else break}return new Xf(new Uint32Array(r),s,this.languageIdCodec)}getTokenText(e){const t=this.getStartOffset(e),i=this.getEndOffset(e);return this._text.substring(t,i)}forEach(e){const t=this.getCount();for(let i=0;i<t;i++)e(i)}};Xf.defaultTokenMetadata=(32768|2<<24)>>>0;let Ks=Xf;class eQ{constructor(e,t,i,s){this._source=e,this._startOffset=t,this._endOffset=i,this._deltaOffset=s,this._firstTokenIndex=e.findTokenIndexAtOffset(t),this.languageIdCodec=e.languageIdCodec,this._tokensCount=0;for(let r=this._firstTokenIndex,o=e.getCount();r<o&&!(e.getStartOffset(r)>=i);r++)this._tokensCount++}getMetadata(e){return this._source.getMetadata(this._firstTokenIndex+e)}getLanguageId(e){return this._source.getLanguageId(this._firstTokenIndex+e)}getLineContent(){return this._source.getLineContent().substring(this._startOffset,this._endOffset)}equals(e){return e instanceof eQ?this._startOffset===e._startOffset&&this._endOffset===e._endOffset&&this._deltaOffset===e._deltaOffset&&this._source.slicedEquals(e._source,this._firstTokenIndex,this._tokensCount):!1}getCount(){return this._tokensCount}getStandardTokenType(e){return this._source.getStandardTokenType(this._firstTokenIndex+e)}getForeground(e){return this._source.getForeground(this._firstTokenIndex+e)}getEndOffset(e){const t=this._source.getEndOffset(this._firstTokenIndex+e);return Math.min(this._endOffset,t)-this._startOffset+this._deltaOffset}getClassName(e){return this._source.getClassName(this._firstTokenIndex+e)}getInlineStyle(e,t){return this._source.getInlineStyle(this._firstTokenIndex+e,t)}getPresentation(e){return this._source.getPresentation(this._firstTokenIndex+e)}findTokenIndexAtOffset(e){return this._source.findTokenIndexAtOffset(e+this._startOffset-this._deltaOffset)-this._firstTokenIndex}getTokenText(e){const t=this._firstTokenIndex+e,i=this._source.getStartOffset(t),s=this._source.getEndOffset(t);let r=this._source.getTokenText(t);return i<this._startOffset&&(r=r.substring(this._startOffset-i)),s>this._endOffset&&(r=r.substring(0,r.length-(s-this._endOffset))),r}forEach(e){for(let t=0;t<this.getCount();t++)e(t)}}function xet(n,e){const t=e.lineNumber;if(!n.tokenization.isCheapToTokenize(t))return;n.tokenization.forceTokenization(t);const i=n.tokenization.getLineTokens(t),s=i.findTokenIndexAtOffset(e.column-1);return i.getStandardTokenType(s)}const HS=new class{clone(){return this}equals(n){return this===n}};function tQ(n,e){return new eX([new TI(0,"",n)],e)}function vB(n,e){const t=new Uint32Array(2);return t[0]=0,t[1]=(n<<0|0|0|32768|2<<24)>>>0,new P3(t,e===null?HS:e)}const ble={getInitialState:()=>HS,tokenizeEncoded:(n,e,t)=>vB(0,t)};async function Let(n,e,t){if(!t)return wle(e,n.languageIdCodec,ble);const i=await In.getOrCreate(t);return wle(e,n.languageIdCodec,i||ble)}function ket(n,e,t,i,s,r,o){let a="<div>",l=i,c=0,d=!0;for(let u=0,h=e.getCount();u<h;u++){const f=e.getEndOffset(u);if(f<=i)continue;let g="";for(;l<f&&l<s;l++){const p=n.charCodeAt(l);switch(p){case 9:{let _=r-(l+c)%r;for(c+=_-1;_>0;)o&&d?(g+="&#160;",d=!1):(g+=" ",d=!0),_--;break}case 60:g+="&lt;",d=!1;break;case 62:g+="&gt;",d=!1;break;case 38:g+="&amp;",d=!1;break;case 0:g+="&#00;",d=!1;break;case 65279:case 8232:case 8233:case 133:g+="",d=!1;break;case 13:g+="&#8203",d=!1;break;case 32:o&&d?(g+="&#160;",d=!1):(g+=" ",d=!0);break;default:g+=String.fromCharCode(p),d=!1}}if(a+=`<span style="${e.getInlineStyle(u,t)}">${g}</span>`,f>s||l>=s)break}return a+="</div>",a}function wle(n,e,t){let i='<div class="monaco-tokenized-source">';const s=mf(n);let r=t.getInitialState();for(let o=0,a=s.length;o<a;o++){const l=s[o];o>0&&(i+="<br/>");const c=t.tokenizeEncoded(l,!0,r);Ks.convertToEndOffset(c.tokens,l.length);const u=new Ks(c.tokens,l,e).inflate();let h=0;for(let f=0,g=u.getCount();f<g;f++){const p=u.getClassName(f),_=u.getEndOffset(f);i+=`<span class="${p}">${qk(l.substring(h,_))}</span>`,h=_}r=c.endState}return i+="</div>",i}var Eet=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Cle=function(n,e){return function(t,i){e(t,i,n)}},AU,tw;let ep=(tw=class{constructor(e,t,i){this._options=e,this._languageService=t,this._openerService=i,this._onDidRenderAsync=new X,this.onDidRenderAsync=this._onDidRenderAsync.event}dispose(){this._onDidRenderAsync.dispose()}render(e,t,i){if(!e)return{element:document.createElement("span"),dispose:()=>{}};const s=new ue,r=s.add(_B(e,{...this._getRenderOptions(e,s),...t},i));return r.element.classList.add("rendered-markdown"),{element:r.element,dispose:()=>s.dispose()}}_getRenderOptions(e,t){return{codeBlockRenderer:async(i,s)=>{var l,c;let r;i?r=this._languageService.getLanguageIdByLanguageName(i):this._options.editor&&(r=(l=this._options.editor.getModel())==null?void 0:l.getLanguageId()),r||(r=Ro);const o=await Let(this._languageService,s,r),a=document.createElement("span");if(a.innerHTML=((c=AU._ttpTokenizer)==null?void 0:c.createHTML(o))??o,this._options.editor){const d=this._options.editor.getOption(50);rr(a,d)}else this._options.codeBlockFontFamily&&(a.style.fontFamily=this._options.codeBlockFontFamily);return this._options.codeBlockFontSize!==void 0&&(a.style.fontSize=this._options.codeBlockFontSize),a},asyncRenderCallback:()=>this._onDidRenderAsync.fire(),actionHandler:{callback:i=>iQ(this._openerService,i,e.isTrusted),disposables:t}}}},AU=tw,tw._ttpTokenizer=up("tokenizeToString",{createHTML(e){return e}}),tw);ep=AU=Eet([Cle(1,un),Cle(2,ba)],ep);async function iQ(n,e,t){try{return await n.open(e,{fromUserGesture:!0,allowContributedOpeners:!0,allowCommands:Iet(t)})}catch(i){return pt(i),!1}}function Iet(n){return n===!0?!0:n&&Array.isArray(n.enabledCommands)?n.enabledCommands:!1}const al=Wt("accessibilityService"),UN=new Re("accessibilityModeEnabled",!1),yle=2e4;let sb,D2,MU,N2,PU;function Det(n){sb=document.createElement("div"),sb.className="monaco-aria-container";const e=()=>{const i=document.createElement("div");return i.className="monaco-alert",i.setAttribute("role","alert"),i.setAttribute("aria-atomic","true"),sb.appendChild(i),i};D2=e(),MU=e();const t=()=>{const i=document.createElement("div");return i.className="monaco-status",i.setAttribute("aria-live","polite"),i.setAttribute("aria-atomic","true"),sb.appendChild(i),i};N2=t(),PU=t(),n.appendChild(sb)}function Bo(n){sb&&(D2.textContent!==n?(nr(MU),BP(D2,n)):(nr(D2),BP(MU,n)))}function lf(n){sb&&(N2.textContent!==n?(nr(PU),BP(N2,n)):(nr(N2),BP(PU,n)))}function BP(n,e){nr(n),e.length>yle&&(e=e.substr(0,yle)),n.textContent=e,n.style.visibility="hidden",n.style.visibility="visible"}var Net=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},BL=function(n,e){return function(t,i){e(t,i,n)}};const nh=xe;let OU=class extends Xl{get _targetWindow(){return nt(this._target.targetElements[0])}get _targetDocumentElement(){return nt(this._target.targetElements[0]).document.documentElement}get isDisposed(){return this._isDisposed}get isMouseIn(){return this._lockMouseTracker.isMouseIn}get domNode(){return this._hover.containerDomNode}get onDispose(){return this._onDispose.event}get onRequestLayout(){return this._onRequestLayout.event}get anchor(){return this._hoverPosition===2?0:1}get x(){return this._x}get y(){return this._y}get isLocked(){return this._isLocked}set isLocked(e){this._isLocked!==e&&(this._isLocked=e,this._hoverContainer.classList.toggle("locked",this._isLocked))}constructor(e,t,i,s,r,o){var h,f,g,p,_,w,b;super(),this._keybindingService=t,this._configurationService=i,this._openerService=s,this._instantiationService=r,this._accessibilityService=o,this._messageListeners=new ue,this._isDisposed=!1,this._forcePosition=!1,this._x=0,this._y=0,this._isLocked=!1,this._enableFocusTraps=!1,this._addedFocusTrap=!1,this._onDispose=this._register(new X),this._onRequestLayout=this._register(new X),this._linkHandler=e.linkHandler||(y=>iQ(this._openerService,y,Mu(e.content)?e.content.isTrusted:void 0)),this._target="targetElements"in e.target?e.target:new Tet(e.target),this._hoverPointer=(h=e.appearance)!=null&&h.showPointer?nh("div.workbench-hover-pointer"):void 0,this._hover=this._register(new $X),this._hover.containerDomNode.classList.add("workbench-hover","fadeIn"),(f=e.appearance)!=null&&f.compact&&this._hover.containerDomNode.classList.add("workbench-hover","compact"),(g=e.appearance)!=null&&g.skipFadeInAnimation&&this._hover.containerDomNode.classList.add("skip-fade-in"),e.additionalClasses&&this._hover.containerDomNode.classList.add(...e.additionalClasses),(p=e.position)!=null&&p.forcePosition&&(this._forcePosition=!0),e.trapFocus&&(this._enableFocusTraps=!0),this._hoverPosition=((_=e.position)==null?void 0:_.hoverPosition)??3,this.onmousedown(this._hover.containerDomNode,y=>y.stopPropagation()),this.onkeydown(this._hover.containerDomNode,y=>{y.equals(9)&&this.dispose()}),this._register(re(this._targetWindow,"blur",()=>this.dispose()));const a=nh("div.hover-row.markdown-hover"),l=nh("div.hover-contents");if(typeof e.content=="string")l.textContent=e.content,l.style.whiteSpace="pre-wrap";else if(Ns(e.content))l.appendChild(e.content),l.classList.add("html-hover-contents");else{const y=e.content,S=this._instantiationService.createInstance(ep,{codeBlockFontFamily:this._configurationService.getValue("editor").fontFamily||To.fontFamily}),{element:x}=S.render(y,{actionHandler:{callback:E=>this._linkHandler(E),disposables:this._messageListeners},asyncRenderCallback:()=>{l.classList.add("code-hover-contents"),this.layout(),this._onRequestLayout.fire()}});l.appendChild(x)}if(a.appendChild(l),this._hover.contentsDomNode.appendChild(a),e.actions&&e.actions.length>0){const y=nh("div.hover-row.status-bar"),S=nh("div.actions");e.actions.forEach(x=>{const E=this._keybindingService.lookupKeybinding(x.commandId),D=E?E.getLabel():null;fB.render(S,{label:x.label,commandId:x.commandId,run:N=>{x.run(N),this.dispose()},iconClass:x.iconClass},D)}),y.appendChild(S),this._hover.containerDomNode.appendChild(y)}this._hoverContainer=nh("div.workbench-hover-container"),this._hoverPointer&&this._hoverContainer.appendChild(this._hoverPointer),this._hoverContainer.appendChild(this._hover.containerDomNode);let c;if(e.actions&&e.actions.length>0?c=!1:((w=e.persistence)==null?void 0:w.hideOnHover)===void 0?c=typeof e.content=="string"||Mu(e.content)&&!e.content.value.includes("](")&&!e.content.value.includes("</a>"):c=e.persistence.hideOnHover,(b=e.appearance)!=null&&b.showHoverHint){const y=nh("div.hover-row.status-bar"),S=nh("div.info");S.textContent=v("hoverhint","Hold {0} key to mouse over",Bt?"Option":"Alt"),y.appendChild(S),this._hover.containerDomNode.appendChild(y)}const d=[...this._target.targetElements];c||d.push(this._hoverContainer);const u=this._register(new Sle(d));if(this._register(u.onMouseOut(()=>{this._isLocked||this.dispose()})),c){const y=[...this._target.targetElements,this._hoverContainer];this._lockMouseTracker=this._register(new Sle(y)),this._register(this._lockMouseTracker.onMouseOut(()=>{this._isLocked||this.dispose()}))}else this._lockMouseTracker=u}addFocusTrap(){if(!this._enableFocusTraps||this._addedFocusTrap)return;this._addedFocusTrap=!0;const e=this._hover.containerDomNode,t=this.findLastFocusableChild(this._hover.containerDomNode);if(t){const i=pX(this._hoverContainer,nh("div")),s=_e(this._hoverContainer,nh("div"));i.tabIndex=0,s.tabIndex=0,this._register(re(s,"focus",r=>{e.focus(),r.preventDefault()})),this._register(re(i,"focus",r=>{t.focus(),r.preventDefault()}))}}findLastFocusableChild(e){if(e.hasChildNodes())for(let t=0;t<e.childNodes.length;t++){const i=e.childNodes.item(e.childNodes.length-t-1);if(i.nodeType===i.ELEMENT_NODE){const r=i;if(typeof r.tabIndex=="number"&&r.tabIndex>=0)return r}const s=this.findLastFocusableChild(i);if(s)return s}}render(e){var s;e.appendChild(this._hoverContainer);const i=this._hoverContainer.contains(this._hoverContainer.ownerDocument.activeElement)&&c1e(this._configurationService.getValue("accessibility.verbosity.hover")===!0&&this._accessibilityService.isScreenReaderOptimized(),(s=this._keybindingService.lookupKeybinding("editor.action.accessibleView"))==null?void 0:s.getAriaLabel());i&&lf(i),this.layout(),this.addFocusTrap()}layout(){this._hover.containerDomNode.classList.remove("right-aligned"),this._hover.contentsDomNode.style.maxHeight="";const e=d=>{const u=B0e(d),h=d.getBoundingClientRect();return{top:h.top*u,bottom:h.bottom*u,right:h.right*u,left:h.left*u}},t=this._target.targetElements.map(d=>e(d)),{top:i,right:s,bottom:r,left:o}=t[0],a=s-o,l=r-i,c={top:i,right:s,bottom:r,left:o,width:a,height:l,center:{x:o+a/2,y:i+l/2}};if(this.adjustHorizontalHoverPosition(c),this.adjustVerticalHoverPosition(c),this.adjustHoverMaxHeight(c),this._hoverContainer.style.padding="",this._hoverContainer.style.margin="",this._hoverPointer){switch(this._hoverPosition){case 1:c.left+=3,c.right+=3,this._hoverContainer.style.paddingLeft="3px",this._hoverContainer.style.marginLeft="-3px";break;case 0:c.left-=3,c.right-=3,this._hoverContainer.style.paddingRight="3px",this._hoverContainer.style.marginRight="-3px";break;case 2:c.top+=3,c.bottom+=3,this._hoverContainer.style.paddingTop="3px",this._hoverContainer.style.marginTop="-3px";break;case 3:c.top-=3,c.bottom-=3,this._hoverContainer.style.paddingBottom="3px",this._hoverContainer.style.marginBottom="-3px";break}c.center.x=c.left+a/2,c.center.y=c.top+l/2}this.computeXCordinate(c),this.computeYCordinate(c),this._hoverPointer&&(this._hoverPointer.classList.remove("top"),this._hoverPointer.classList.remove("left"),this._hoverPointer.classList.remove("right"),this._hoverPointer.classList.remove("bottom"),this.setHoverPointerPosition(c)),this._hover.onContentsChanged()}computeXCordinate(e){const t=this._hover.containerDomNode.clientWidth+2;this._target.x!==void 0?this._x=this._target.x:this._hoverPosition===1?this._x=e.right:this._hoverPosition===0?this._x=e.left-t:(this._hoverPointer?this._x=e.center.x-this._hover.containerDomNode.clientWidth/2:this._x=e.left,this._x+t>=this._targetDocumentElement.clientWidth&&(this._hover.containerDomNode.classList.add("right-aligned"),this._x=Math.max(this._targetDocumentElement.clientWidth-t-2,this._targetDocumentElement.clientLeft))),this._x<this._targetDocumentElement.clientLeft&&(this._x=e.left+2)}computeYCordinate(e){this._target.y!==void 0?this._y=this._target.y:this._hoverPosition===3?this._y=e.top:this._hoverPosition===2?this._y=e.bottom-2:this._hoverPointer?this._y=e.center.y+this._hover.containerDomNode.clientHeight/2:this._y=e.bottom,this._y>this._targetWindow.innerHeight&&(this._y=e.bottom)}adjustHorizontalHoverPosition(e){if(this._target.x!==void 0)return;const t=this._hoverPointer?3:0;if(this._forcePosition){const i=t+2;this._hoverPosition===1?this._hover.containerDomNode.style.maxWidth=`${this._targetDocumentElement.clientWidth-e.right-i}px`:this._hoverPosition===0&&(this._hover.containerDomNode.style.maxWidth=`${e.left-i}px`);return}this._hoverPosition===1?this._targetDocumentElement.clientWidth-e.right<this._hover.containerDomNode.clientWidth+t&&(e.left>=this._hover.containerDomNode.clientWidth+t?this._hoverPosition=0:this._hoverPosition=2):this._hoverPosition===0&&(e.left<this._hover.containerDomNode.clientWidth+t&&(this._targetDocumentElement.clientWidth-e.right>=this._hover.containerDomNode.clientWidth+t?this._hoverPosition=1:this._hoverPosition=2),e.left-this._hover.containerDomNode.clientWidth-t<=this._targetDocumentElement.clientLeft&&(this._hoverPosition=1))}adjustVerticalHoverPosition(e){if(this._target.y!==void 0||this._forcePosition)return;const t=this._hoverPointer?3:0;this._hoverPosition===3?e.top-this._hover.containerDomNode.clientHeight-t<0&&(this._hoverPosition=2):this._hoverPosition===2&&e.bottom+this._hover.containerDomNode.clientHeight+t>this._targetWindow.innerHeight&&(this._hoverPosition=3)}adjustHoverMaxHeight(e){let t=this._targetWindow.innerHeight/2;if(this._forcePosition){const i=(this._hoverPointer?3:0)+2;this._hoverPosition===3?t=Math.min(t,e.top-i):this._hoverPosition===2&&(t=Math.min(t,this._targetWindow.innerHeight-e.bottom-i))}if(this._hover.containerDomNode.style.maxHeight=`${t}px`,this._hover.contentsDomNode.clientHeight<this._hover.contentsDomNode.scrollHeight){const i=`${this._hover.scrollbar.options.verticalScrollbarSize}px`;this._hover.contentsDomNode.style.paddingRight!==i&&(this._hover.contentsDomNode.style.paddingRight=i)}}setHoverPointerPosition(e){if(this._hoverPointer)switch(this._hoverPosition){case 0:case 1:{this._hoverPointer.classList.add(this._hoverPosition===0?"right":"left");const t=this._hover.containerDomNode.clientHeight;t>e.height?this._hoverPointer.style.top=`${e.center.y-(this._y-t)-3}px`:this._hoverPointer.style.top=`${Math.round(t/2)-3}px`;break}case 3:case 2:{this._hoverPointer.classList.add(this._hoverPosition===3?"bottom":"top");const t=this._hover.containerDomNode.clientWidth;let i=Math.round(t/2)-3;const s=this._x+i;(s<e.left||s>e.right)&&(i=e.center.x-this._x-3),this._hoverPointer.style.left=`${i}px`;break}}}focus(){this._hover.containerDomNode.focus()}dispose(){this._isDisposed||(this._onDispose.fire(),this._hoverContainer.remove(),this._messageListeners.dispose(),this._target.dispose(),super.dispose()),this._isDisposed=!0}};OU=Net([BL(1,hi),BL(2,Tt),BL(3,ba),BL(4,Ze),BL(5,al)],OU);class Sle extends Xl{get onMouseOut(){return this._onMouseOut.event}get isMouseIn(){return this._isMouseIn}constructor(e){super(),this._elements=e,this._isMouseIn=!0,this._onMouseOut=this._register(new X),this._elements.forEach(t=>this.onmouseover(t,()=>this._onTargetMouseOver(t))),this._elements.forEach(t=>this.onmouseleave(t,()=>this._onTargetMouseLeave(t)))}_onTargetMouseOver(e){this._isMouseIn=!0,this._clearEvaluateMouseStateTimeout(e)}_onTargetMouseLeave(e){this._isMouseIn=!1,this._evaluateMouseState(e)}_evaluateMouseState(e){this._clearEvaluateMouseStateTimeout(e),this._mouseTimeout=nt(e).setTimeout(()=>this._fireIfMouseOutside(),0)}_clearEvaluateMouseStateTimeout(e){this._mouseTimeout&&(nt(e).clearTimeout(this._mouseTimeout),this._mouseTimeout=void 0)}_fireIfMouseOutside(){this._isMouseIn||this._onMouseOut.fire()}}class Tet{constructor(e){this._element=e,this.targetElements=[this._element]}dispose(){}}var Ir;(function(n){function e(r,o){if(r.start>=o.end||o.start>=r.end)return{start:0,end:0};const a=Math.max(r.start,o.start),l=Math.min(r.end,o.end);return l-a<=0?{start:0,end:0}:{start:a,end:l}}n.intersect=e;function t(r){return r.end-r.start<=0}n.isEmpty=t;function i(r,o){return!t(e(r,o))}n.intersects=i;function s(r,o){const a=[],l={start:r.start,end:Math.min(o.start,r.end)},c={start:Math.max(o.end,r.start),end:r.end};return t(l)||a.push(l),t(c)||a.push(c),a}n.relativeComplement=s})(Ir||(Ir={}));function Ret(n){const e=n;return!!e&&typeof e.x=="number"&&typeof e.y=="number"}var Lm;(function(n){n[n.AVOID=0]="AVOID",n[n.ALIGN=1]="ALIGN"})(Lm||(Lm={}));function L1(n,e,t){const i=t.mode===Lm.ALIGN?t.offset:t.offset+t.size,s=t.mode===Lm.ALIGN?t.offset+t.size:t.offset;return t.position===0?e<=n-i?i:e<=s?s-e:Math.max(n-e,0):e<=s?s-e:e<=n-i?i:0}const Q1=class Q1 extends ee{constructor(e,t){super(),this.container=null,this.useFixedPosition=!1,this.useShadowDOM=!1,this.delegate=null,this.toDisposeOnClean=ee.None,this.toDisposeOnSetContainer=ee.None,this.shadowRoot=null,this.shadowRootHostElement=null,this.view=xe(".context-view"),Co(this.view),this.setContainer(e,t),this._register(Ye(()=>this.setContainer(null,1)))}setContainer(e,t){var s;this.useFixedPosition=t!==1;const i=this.useShadowDOM;if(this.useShadowDOM=t===3,!(e===this.container&&i===this.useShadowDOM)&&(this.container&&(this.toDisposeOnSetContainer.dispose(),this.view.remove(),this.shadowRoot&&(this.shadowRoot=null,(s=this.shadowRootHostElement)==null||s.remove(),this.shadowRootHostElement=null),this.container=null),e)){if(this.container=e,this.useShadowDOM){this.shadowRootHostElement=xe(".shadow-root-host"),this.container.appendChild(this.shadowRootHostElement),this.shadowRoot=this.shadowRootHostElement.attachShadow({mode:"open"});const o=document.createElement("style");o.textContent=Aet,this.shadowRoot.appendChild(o),this.shadowRoot.appendChild(this.view),this.shadowRoot.appendChild(xe("slot"))}else this.container.appendChild(this.view);const r=new ue;Q1.BUBBLE_UP_EVENTS.forEach(o=>{r.add(Cn(this.container,o,a=>{this.onDOMEvent(a,!1)}))}),Q1.BUBBLE_DOWN_EVENTS.forEach(o=>{r.add(Cn(this.container,o,a=>{this.onDOMEvent(a,!0)},!0))}),this.toDisposeOnSetContainer=r}}show(e){var t,i;this.isVisible()&&this.hide(),nr(this.view),this.view.className="context-view monaco-component",this.view.style.top="0px",this.view.style.left="0px",this.view.style.zIndex=`${2575+(e.layer??0)}`,this.view.style.position=this.useFixedPosition?"fixed":"absolute",za(this.view),this.toDisposeOnClean=e.render(this.view)||ee.None,this.delegate=e,this.doLayout(),(i=(t=this.delegate).focus)==null||i.call(t)}getViewElement(){return this.view}layout(){var e,t;if(this.isVisible()){if(this.delegate.canRelayout===!1&&!(Bu&&lX.pointerEvents)){this.hide();return}(t=(e=this.delegate)==null?void 0:e.layout)==null||t.call(e),this.doLayout()}}doLayout(){if(!this.isVisible())return;const e=this.delegate.getAnchor();let t;if(Ns(e)){const h=Fn(e),f=B0e(e);t={top:h.top*f,left:h.left*f,width:h.width*f,height:h.height*f}}else Ret(e)?t={top:e.y,left:e.x,width:e.width||1,height:e.height||2}:t={top:e.posy,left:e.posx,width:2,height:2};const i=Pa(this.view),s=_g(this.view),r=this.delegate.anchorPosition||0,o=this.delegate.anchorAlignment||0,a=this.delegate.anchorAxisAlignment||0;let l,c;const d=ck();if(a===0){const h={offset:t.top-d.pageYOffset,size:t.height,position:r===0?0:1},f={offset:t.left,size:t.width,position:o===0?0:1,mode:Lm.ALIGN};l=L1(d.innerHeight,s,h)+d.pageYOffset,Ir.intersects({start:l,end:l+s},{start:h.offset,end:h.offset+h.size})&&(f.mode=Lm.AVOID),c=L1(d.innerWidth,i,f)}else{const h={offset:t.left,size:t.width,position:o===0?0:1},f={offset:t.top,size:t.height,position:r===0?0:1,mode:Lm.ALIGN};c=L1(d.innerWidth,i,h),Ir.intersects({start:c,end:c+i},{start:h.offset,end:h.offset+h.size})&&(f.mode=Lm.AVOID),l=L1(d.innerHeight,s,f)+d.pageYOffset}this.view.classList.remove("top","bottom","left","right"),this.view.classList.add(r===0?"bottom":"top"),this.view.classList.add(o===0?"left":"right"),this.view.classList.toggle("fixed",this.useFixedPosition);const u=Fn(this.container);this.view.style.top=`${l-(this.useFixedPosition?Fn(this.view).top:u.top)}px`,this.view.style.left=`${c-(this.useFixedPosition?Fn(this.view).left:u.left)}px`,this.view.style.width="initial"}hide(e){const t=this.delegate;this.delegate=null,t!=null&&t.onHide&&t.onHide(e),this.toDisposeOnClean.dispose(),Co(this.view)}isVisible(){return!!this.delegate}onDOMEvent(e,t){this.delegate&&(this.delegate.onDOMEvent?this.delegate.onDOMEvent(e,nt(e).document.activeElement):t&&!Es(e.target,this.container)&&this.hide())}dispose(){this.hide(),super.dispose()}};Q1.BUBBLE_UP_EVENTS=["click","keydown","focus","blur"],Q1.BUBBLE_DOWN_EVENTS=["click"];let FU=Q1;const Aet=`
	:host {
		all: initial; /* 1st rule so subsequent properties are reset. */
	}

	.codicon[class*='codicon-'] {
		font: normal normal normal 16px/1 codicon;
		display: inline-block;
		text-decoration: none;
		text-rendering: auto;
		text-align: center;
		-webkit-font-smoothing: antialiased;
		-moz-osx-font-smoothing: grayscale;
		user-select: none;
		-webkit-user-select: none;
		-ms-user-select: none;
	}

	:host {
		font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "HelveticaNeue-Light", system-ui, "Ubuntu", "Droid Sans", sans-serif;
	}

	:host-context(.mac) { font-family: -apple-system, BlinkMacSystemFont, sans-serif; }
	:host-context(.mac:lang(zh-Hans)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Hiragino Sans GB", sans-serif; }
	:host-context(.mac:lang(zh-Hant)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang TC", sans-serif; }
	:host-context(.mac:lang(ja)) { font-family: -apple-system, BlinkMacSystemFont, "Hiragino Kaku Gothic Pro", sans-serif; }
	:host-context(.mac:lang(ko)) { font-family: -apple-system, BlinkMacSystemFont, "Nanum Gothic", "Apple SD Gothic Neo", "AppleGothic", sans-serif; }

	:host-context(.windows) { font-family: "Segoe WPC", "Segoe UI", sans-serif; }
	:host-context(.windows:lang(zh-Hans)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft YaHei", sans-serif; }
	:host-context(.windows:lang(zh-Hant)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft Jhenghei", sans-serif; }
	:host-context(.windows:lang(ja)) { font-family: "Segoe WPC", "Segoe UI", "Yu Gothic UI", "Meiryo UI", sans-serif; }
	:host-context(.windows:lang(ko)) { font-family: "Segoe WPC", "Segoe UI", "Malgun Gothic", "Dotom", sans-serif; }

	:host-context(.linux) { font-family: system-ui, "Ubuntu", "Droid Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hans)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans SC", "Source Han Sans CN", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hant)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans TC", "Source Han Sans TW", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ja)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans J", "Source Han Sans JP", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ko)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans K", "Source Han Sans JR", "Source Han Sans", "UnDotum", "FBaekmuk Gulim", sans-serif; }
`;var Met=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Pet=function(n,e){return function(t,i){e(t,i,n)}};let WP=class extends ee{constructor(e){super(),this.layoutService=e,this.contextView=this._register(new FU(this.layoutService.mainContainer,1)),this.layout(),this._register(e.onDidLayoutContainer(()=>this.layout()))}showContextView(e,t,i){let s;t?t===this.layoutService.getContainer(nt(t))?s=1:i?s=3:s=2:s=1,this.contextView.setContainer(t??this.layoutService.activeContainer,s),this.contextView.show(e);const r={close:()=>{this.openContextView===r&&this.hideContextView()}};return this.openContextView=r,r}layout(){this.contextView.layout()}hideContextView(e){this.contextView.hide(e),this.openContextView=void 0}};WP=Met([Pet(0,tv)],WP);class Oet extends WP{getContextViewElement(){return this.contextView.getViewElement()}}class Fet{constructor(e,t,i){this.hoverDelegate=e,this.target=t,this.fadeInAnimation=i}async update(e,t,i){if(this._cancellationTokenSource&&(this._cancellationTokenSource.dispose(!0),this._cancellationTokenSource=void 0),this.isDisposed)return;let s;if(e===void 0||ca(e)||Ns(e))s=e;else if(!II(e.markdown))s=e.markdown??e.markdownNotSupportedFallback;else{this._hoverWidget||this.show(v("iconLabel.loading","Loading..."),t,i),this._cancellationTokenSource=new mn;const r=this._cancellationTokenSource.token;if(s=await e.markdown(r),s===void 0&&(s=e.markdownNotSupportedFallback),this.isDisposed||r.isCancellationRequested)return}this.show(s,t,i)}show(e,t,i){var r;const s=this._hoverWidget;if(this.hasContent(e)){const o={content:e,target:this.target,actions:i==null?void 0:i.actions,linkHandler:i==null?void 0:i.linkHandler,trapFocus:i==null?void 0:i.trapFocus,appearance:{showPointer:this.hoverDelegate.placement==="element",skipFadeInAnimation:!this.fadeInAnimation||!!s,showHoverHint:(r=i==null?void 0:i.appearance)==null?void 0:r.showHoverHint},position:{hoverPosition:2}};this._hoverWidget=this.hoverDelegate.showHover(o,t)}s==null||s.dispose()}hasContent(e){return e?Mu(e)?!!e.value:!0:!1}get isDisposed(){var e;return(e=this._hoverWidget)==null?void 0:e.isDisposed}dispose(){var e,t;(e=this._hoverWidget)==null||e.dispose(),(t=this._cancellationTokenSource)==null||t.dispose(!0),this._cancellationTokenSource=void 0}}var Bet=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},WL=function(n,e){return function(t,i){e(t,i,n)}};let BU=class extends ee{constructor(e,t,i,s,r){super(),this._instantiationService=e,this._keybindingService=i,this._layoutService=s,this._accessibilityService=r,this._managedHovers=new Map,t.onDidShowContextMenu(()=>this.hideHover()),this._contextViewHandler=this._register(new WP(this._layoutService))}showHover(e,t,i){var l,c,d,u;if(xle(this._currentHoverOptions)===xle(e)||this._currentHover&&((c=(l=this._currentHoverOptions)==null?void 0:l.persistence)!=null&&c.sticky))return;this._currentHoverOptions=e,this._lastHoverOptions=e;const s=e.trapFocus||this._accessibilityService.isScreenReaderOptimized(),r=vr();i||(s&&r?r.classList.contains("monaco-hover")||(this._lastFocusedElementBeforeOpen=r):this._lastFocusedElementBeforeOpen=void 0);const o=new ue,a=this._instantiationService.createInstance(OU,e);if((d=e.persistence)!=null&&d.sticky&&(a.isLocked=!0),a.onDispose(()=>{var f,g;((f=this._currentHover)==null?void 0:f.domNode)&&H0e(this._currentHover.domNode)&&((g=this._lastFocusedElementBeforeOpen)==null||g.focus()),this._currentHoverOptions===e&&(this._currentHoverOptions=void 0),o.dispose()},void 0,o),!e.container){const h=Ns(e.target)?e.target:e.target.targetElements[0];e.container=this._layoutService.getContainer(nt(h))}if(this._contextViewHandler.showContextView(new Wet(a,t),e.container),a.onRequestLayout(()=>this._contextViewHandler.layout(),void 0,o),(u=e.persistence)!=null&&u.sticky)o.add(re(nt(e.container).document,Se.MOUSE_DOWN,h=>{Es(h.target,a.domNode)||this.doHideHover()}));else{if("targetElements"in e.target)for(const f of e.target.targetElements)o.add(re(f,Se.CLICK,()=>this.hideHover()));else o.add(re(e.target,Se.CLICK,()=>this.hideHover()));const h=vr();if(h){const f=nt(h).document;o.add(re(h,Se.KEY_DOWN,g=>{var p;return this._keyDown(g,a,!!((p=e.persistence)!=null&&p.hideOnKeyDown))})),o.add(re(f,Se.KEY_DOWN,g=>{var p;return this._keyDown(g,a,!!((p=e.persistence)!=null&&p.hideOnKeyDown))})),o.add(re(h,Se.KEY_UP,g=>this._keyUp(g,a))),o.add(re(f,Se.KEY_UP,g=>this._keyUp(g,a)))}}if("IntersectionObserver"in Ei){const h=new IntersectionObserver(g=>this._intersectionChange(g,a),{threshold:0}),f="targetElements"in e.target?e.target.targetElements[0]:e.target;h.observe(f),o.add(Ye(()=>h.disconnect()))}return this._currentHover=a,a}hideHover(){var e;(e=this._currentHover)!=null&&e.isLocked||!this._currentHoverOptions||this.doHideHover()}doHideHover(){this._currentHover=void 0,this._currentHoverOptions=void 0,this._contextViewHandler.hideContextView()}_intersectionChange(e,t){e[e.length-1].isIntersecting||t.dispose()}showAndFocusLastHover(){this._lastHoverOptions&&this.showHover(this._lastHoverOptions,!0,!0)}_keyDown(e,t,i){var o,a;if(e.key==="Alt"){t.isLocked=!0;return}const s=new Oi(e);this._keybindingService.resolveKeyboardEvent(s).getSingleModifierDispatchChords().some(l=>!!l)||this._keybindingService.softDispatch(s,s.target).kind!==0||i&&(!((o=this._currentHoverOptions)!=null&&o.trapFocus)||e.key!=="Tab")&&(this.hideHover(),(a=this._lastFocusedElementBeforeOpen)==null||a.focus())}_keyUp(e,t){var i;e.key==="Alt"&&(t.isLocked=!1,t.isMouseIn||(this.hideHover(),(i=this._lastFocusedElementBeforeOpen)==null||i.focus()))}setupManagedHover(e,t,i,s){t.setAttribute("custom-hover","true"),t.title!==""&&(console.warn("HTML element already has a title attribute, which will conflict with the custom hover. Please remove the title attribute."),console.trace("Stack trace:",t.title),t.title="");let r,o;const a=(y,S)=>{var E;const x=o!==void 0;y&&(o==null||o.dispose(),o=void 0),S&&(r==null||r.dispose(),r=void 0),x&&((E=e.onDidHideHover)==null||E.call(e),o=void 0)},l=(y,S,x,E)=>new Fd(async()=>{(!o||o.isDisposed)&&(o=new Fet(e,x||t,y>0),await o.update(typeof i=="function"?i():i,S,{...s,trapFocus:E}))},y);let c=!1;const d=re(t,Se.MOUSE_DOWN,()=>{c=!0,a(!0,!0)},!0),u=re(t,Se.MOUSE_UP,()=>{c=!1},!0),h=re(t,Se.MOUSE_LEAVE,y=>{c=!1,a(!1,y.fromElement===t)},!0),f=y=>{if(r)return;const S=new ue,x={targetElements:[t],dispose:()=>{}};if(e.placement===void 0||e.placement==="mouse"){const E=D=>{x.x=D.x+10,Ns(D.target)&&Lle(D.target,t)!==t&&a(!0,!0)};S.add(re(t,Se.MOUSE_MOVE,E,!0))}r=S,!(Ns(y.target)&&Lle(y.target,t)!==t)&&S.add(l(e.delay,!1,x))},g=re(t,Se.MOUSE_OVER,f,!0),p=()=>{if(c||r)return;const y={targetElements:[t],dispose:()=>{}},S=new ue,x=()=>a(!0,!0);S.add(re(t,Se.BLUR,x,!0)),S.add(l(e.delay,!1,y)),r=S};let _;const w=t.tagName.toLowerCase();w!=="input"&&w!=="textarea"&&(_=re(t,Se.FOCUS,p,!0));const b={show:y=>{a(!1,!0),l(0,y,void 0,y)},hide:()=>{a(!0,!0)},update:async(y,S)=>{i=y,await(o==null?void 0:o.update(i,void 0,S))},dispose:()=>{this._managedHovers.delete(t),g.dispose(),h.dispose(),d.dispose(),u.dispose(),_==null||_.dispose(),a(!0,!0)}};return this._managedHovers.set(t,b),b}showManagedHover(e){const t=this._managedHovers.get(e);t&&t.show(!0)}dispose(){this._managedHovers.forEach(e=>e.dispose()),super.dispose()}};BU=Bet([WL(0,Ze),WL(1,ol),WL(2,hi),WL(3,tv),WL(4,al)],BU);function xle(n){if(n!==void 0)return(n==null?void 0:n.id)??n}class Wet{get anchorPosition(){return this._hover.anchor}constructor(e,t=!1){this._hover=e,this._focus=t,this.layer=1}render(e){return this._hover.render(e),this._focus&&this._hover.focus(),this._hover}getAnchor(){return{x:this._hover.x,y:this._hover.y}}layout(){this._hover.layout()}}function Lle(n,e){for(e=e??nt(n).document.body;!n.hasAttribute("custom-hover")&&n!==e;)n=n.parentElement;return n}jt(wf,BU,1);zc((n,e)=>{const t=n.getColor(YCe);t&&(e.addRule(`.monaco-workbench .workbench-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${t.transparent(.5)}; }`),e.addRule(`.monaco-workbench .workbench-hover hr { border-top: 1px solid ${t.transparent(.5)}; }`))});const $N=Wt("IWorkspaceEditService");class nQ{constructor(e){this.metadata=e}static convert(e){return e.edits.map(t=>{if(Zm.is(t))return Zm.lift(t);if(Ey.is(t))return Ey.lift(t);throw new Error("Unsupported edit")})}}class Zm extends nQ{static is(e){return e instanceof Zm?!0:zs(e)&&Xe.isUri(e.resource)&&zs(e.textEdit)}static lift(e){return e instanceof Zm?e:new Zm(e.resource,e.textEdit,e.versionId,e.metadata)}constructor(e,t,i=void 0,s){super(s),this.resource=e,this.textEdit=t,this.versionId=i}}class Ey extends nQ{static is(e){return e instanceof Ey?!0:zs(e)&&(!!e.newResource||!!e.oldResource)}static lift(e){return e instanceof Ey?e:new Ey(e.oldResource,e.newResource,e.options,e.metadata)}constructor(e,t,i={},s){super(s),this.oldResource=e,this.newResource=t,this.options=i}}const lr={enableSplitViewResizing:!0,splitViewDefaultRatio:.5,renderSideBySide:!0,renderMarginRevertIcon:!0,renderGutterMenu:!0,maxComputationTime:5e3,maxFileSize:50,ignoreTrimWhitespace:!0,renderIndicators:!0,originalEditable:!1,diffCodeLens:!1,renderOverviewRuler:!0,diffWordWrap:"inherit",diffAlgorithm:"advanced",accessibilityVerbose:!1,experimental:{showMoves:!1,showEmptyDecorations:!0,useTrueInlineView:!1},hideUnchangedRegions:{enabled:!1,contextLineCount:3,minimumLineCount:3,revealLineCount:20},isInEmbeddedEditor:!1,onlyShowAccessibleDiffViewer:!1,renderSideBySideInlineBreakpoint:900,useInlineViewWhenSpaceIsLimited:!0,compactMode:!1},jN=Object.freeze({id:"editor",order:5,type:"object",title:v("editorConfigurationTitle","Editor"),scope:5}),HP={...jN,properties:{"editor.tabSize":{type:"number",default:Tr.tabSize,minimum:1,markdownDescription:v("tabSize","The number of spaces a tab is equal to. This setting is overridden based on the file contents when {0} is on.","`#editor.detectIndentation#`")},"editor.indentSize":{anyOf:[{type:"string",enum:["tabSize"]},{type:"number",minimum:1}],default:"tabSize",markdownDescription:v("indentSize",'The number of spaces used for indentation or `"tabSize"` to use the value from `#editor.tabSize#`. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.')},"editor.insertSpaces":{type:"boolean",default:Tr.insertSpaces,markdownDescription:v("insertSpaces","Insert spaces when pressing `Tab`. This setting is overridden based on the file contents when {0} is on.","`#editor.detectIndentation#`")},"editor.detectIndentation":{type:"boolean",default:Tr.detectIndentation,markdownDescription:v("detectIndentation","Controls whether {0} and {1} will be automatically detected when a file is opened based on the file contents.","`#editor.tabSize#`","`#editor.insertSpaces#`")},"editor.trimAutoWhitespace":{type:"boolean",default:Tr.trimAutoWhitespace,description:v("trimAutoWhitespace","Remove trailing auto inserted whitespace.")},"editor.largeFileOptimizations":{type:"boolean",default:Tr.largeFileOptimizations,description:v("largeFileOptimizations","Special handling for large files to disable certain memory intensive features.")},"editor.wordBasedSuggestions":{enum:["off","currentDocument","matchingDocuments","allDocuments"],default:"matchingDocuments",enumDescriptions:[v("wordBasedSuggestions.off","Turn off Word Based Suggestions."),v("wordBasedSuggestions.currentDocument","Only suggest words from the active document."),v("wordBasedSuggestions.matchingDocuments","Suggest words from all open documents of the same language."),v("wordBasedSuggestions.allDocuments","Suggest words from all open documents.")],description:v("wordBasedSuggestions","Controls whether completions should be computed based on words in the document and from which documents they are computed.")},"editor.semanticHighlighting.enabled":{enum:[!0,!1,"configuredByTheme"],enumDescriptions:[v("semanticHighlighting.true","Semantic highlighting enabled for all color themes."),v("semanticHighlighting.false","Semantic highlighting disabled for all color themes."),v("semanticHighlighting.configuredByTheme","Semantic highlighting is configured by the current color theme's `semanticHighlighting` setting.")],default:"configuredByTheme",description:v("semanticHighlighting.enabled","Controls whether the semanticHighlighting is shown for the languages that support it.")},"editor.stablePeek":{type:"boolean",default:!1,markdownDescription:v("stablePeek","Keep peek editors open even when double-clicking their content or when hitting `Escape`.")},"editor.maxTokenizationLineLength":{type:"integer",default:2e4,description:v("maxTokenizationLineLength","Lines above this length will not be tokenized for performance reasons")},"editor.experimental.asyncTokenization":{type:"boolean",default:!0,description:v("editor.experimental.asyncTokenization","Controls whether the tokenization should happen asynchronously on a web worker."),tags:["experimental"]},"editor.experimental.asyncTokenizationLogging":{type:"boolean",default:!1,description:v("editor.experimental.asyncTokenizationLogging","Controls whether async tokenization should be logged. For debugging only.")},"editor.experimental.asyncTokenizationVerification":{type:"boolean",default:!1,description:v("editor.experimental.asyncTokenizationVerification","Controls whether async tokenization should be verified against legacy background tokenization. Might slow down tokenization. For debugging only."),tags:["experimental"]},"editor.experimental.treeSitterTelemetry":{type:"boolean",default:!1,markdownDescription:v("editor.experimental.treeSitterTelemetry","Controls whether tree sitter parsing should be turned on and telemetry collected. Setting `editor.experimental.preferTreeSitter` for specific languages will take precedence."),tags:["experimental"]},"editor.language.brackets":{type:["array","null"],default:null,description:v("schema.brackets","Defines the bracket symbols that increase or decrease the indentation."),items:{type:"array",items:[{type:"string",description:v("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:v("schema.closeBracket","The closing bracket character or string sequence.")}]}},"editor.language.colorizedBracketPairs":{type:["array","null"],default:null,description:v("schema.colorizedBracketPairs","Defines the bracket pairs that are colorized by their nesting level if bracket pair colorization is enabled."),items:{type:"array",items:[{type:"string",description:v("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:v("schema.closeBracket","The closing bracket character or string sequence.")}]}},"diffEditor.maxComputationTime":{type:"number",default:lr.maxComputationTime,description:v("maxComputationTime","Timeout in milliseconds after which diff computation is cancelled. Use 0 for no timeout.")},"diffEditor.maxFileSize":{type:"number",default:lr.maxFileSize,description:v("maxFileSize","Maximum file size in MB for which to compute diffs. Use 0 for no limit.")},"diffEditor.renderSideBySide":{type:"boolean",default:lr.renderSideBySide,description:v("sideBySide","Controls whether the diff editor shows the diff side by side or inline.")},"diffEditor.renderSideBySideInlineBreakpoint":{type:"number",default:lr.renderSideBySideInlineBreakpoint,description:v("renderSideBySideInlineBreakpoint","If the diff editor width is smaller than this value, the inline view is used.")},"diffEditor.useInlineViewWhenSpaceIsLimited":{type:"boolean",default:lr.useInlineViewWhenSpaceIsLimited,description:v("useInlineViewWhenSpaceIsLimited","If enabled and the editor width is too small, the inline view is used.")},"diffEditor.renderMarginRevertIcon":{type:"boolean",default:lr.renderMarginRevertIcon,description:v("renderMarginRevertIcon","When enabled, the diff editor shows arrows in its glyph margin to revert changes.")},"diffEditor.renderGutterMenu":{type:"boolean",default:lr.renderGutterMenu,description:v("renderGutterMenu","When enabled, the diff editor shows a special gutter for revert and stage actions.")},"diffEditor.ignoreTrimWhitespace":{type:"boolean",default:lr.ignoreTrimWhitespace,description:v("ignoreTrimWhitespace","When enabled, the diff editor ignores changes in leading or trailing whitespace.")},"diffEditor.renderIndicators":{type:"boolean",default:lr.renderIndicators,description:v("renderIndicators","Controls whether the diff editor shows +/- indicators for added/removed changes.")},"diffEditor.codeLens":{type:"boolean",default:lr.diffCodeLens,description:v("codeLens","Controls whether the editor shows CodeLens.")},"diffEditor.wordWrap":{type:"string",enum:["off","on","inherit"],default:lr.diffWordWrap,markdownEnumDescriptions:[v("wordWrap.off","Lines will never wrap."),v("wordWrap.on","Lines will wrap at the viewport width."),v("wordWrap.inherit","Lines will wrap according to the {0} setting.","`#editor.wordWrap#`")]},"diffEditor.diffAlgorithm":{type:"string",enum:["legacy","advanced"],default:lr.diffAlgorithm,markdownEnumDescriptions:[v("diffAlgorithm.legacy","Uses the legacy diffing algorithm."),v("diffAlgorithm.advanced","Uses the advanced diffing algorithm.")],tags:["experimental"]},"diffEditor.hideUnchangedRegions.enabled":{type:"boolean",default:lr.hideUnchangedRegions.enabled,markdownDescription:v("hideUnchangedRegions.enabled","Controls whether the diff editor shows unchanged regions.")},"diffEditor.hideUnchangedRegions.revealLineCount":{type:"integer",default:lr.hideUnchangedRegions.revealLineCount,markdownDescription:v("hideUnchangedRegions.revealLineCount","Controls how many lines are used for unchanged regions."),minimum:1},"diffEditor.hideUnchangedRegions.minimumLineCount":{type:"integer",default:lr.hideUnchangedRegions.minimumLineCount,markdownDescription:v("hideUnchangedRegions.minimumLineCount","Controls how many lines are used as a minimum for unchanged regions."),minimum:1},"diffEditor.hideUnchangedRegions.contextLineCount":{type:"integer",default:lr.hideUnchangedRegions.contextLineCount,markdownDescription:v("hideUnchangedRegions.contextLineCount","Controls how many lines are used as context when comparing unchanged regions."),minimum:1},"diffEditor.experimental.showMoves":{type:"boolean",default:lr.experimental.showMoves,markdownDescription:v("showMoves","Controls whether the diff editor should show detected code moves.")},"diffEditor.experimental.showEmptyDecorations":{type:"boolean",default:lr.experimental.showEmptyDecorations,description:v("showEmptyDecorations","Controls whether the diff editor shows empty decorations to see where characters got inserted or deleted.")},"diffEditor.experimental.useTrueInlineView":{type:"boolean",default:lr.experimental.useTrueInlineView,description:v("useTrueInlineView","If enabled and the editor uses the inline view, word changes are rendered inline.")}}};function Het(n){return typeof n.type<"u"||typeof n.anyOf<"u"}for(const n of b1){const e=n.schema;if(typeof e<"u")if(Het(e))HP.properties[`editor.${n.name}`]=e;else for(const t in e)Object.hasOwnProperty.call(e,t)&&(HP.properties[t]=e[t])}let YR=null;function E1e(){return YR===null&&(YR=Object.create(null),Object.keys(HP.properties).forEach(n=>{YR[n]=!0})),YR}function Vet(n){return E1e()[`editor.${n}`]||!1}function zet(n){return E1e()[`diffEditor.${n}`]||!1}const Uet=_n.as(Bd.Configuration);Uet.registerConfiguration(HP);class gn{static insert(e,t){return{range:new M(e.lineNumber,e.column,e.lineNumber,e.column),text:t,forceMoveMarkers:!0}}static delete(e){return{range:e,text:null}}static replace(e,t){return{range:e,text:t}}static replaceMove(e,t){return{range:e,text:t,forceMoveMarkers:!0}}}function ZR(n){return Object.isFrozen(n)?n:s$e(n)}class tr{static createEmptyModel(e){return new tr({},[],[],void 0,e)}constructor(e,t,i,s,r){this._contents=e,this._keys=t,this._overrides=i,this.raw=s,this.logService=r,this.overrideConfigurations=new Map}get rawConfiguration(){var e;if(!this._rawConfiguration)if((e=this.raw)!=null&&e.length){const t=this.raw.map(i=>{if(i instanceof tr)return i;const s=new $et("",this.logService);return s.parseRaw(i),s.configurationModel});this._rawConfiguration=t.reduce((i,s)=>s===i?s:i.merge(s),t[0])}else this._rawConfiguration=this;return this._rawConfiguration}get contents(){return this._contents}get overrides(){return this._overrides}get keys(){return this._keys}isEmpty(){return this._keys.length===0&&Object.keys(this._contents).length===0&&this._overrides.length===0}getValue(e){return e?Joe(this.contents,e):this.contents}inspect(e,t){const i=this;return{get value(){return ZR(i.rawConfiguration.getValue(e))},get override(){return t?ZR(i.rawConfiguration.getOverrideValue(e,t)):void 0},get merged(){return ZR(t?i.rawConfiguration.override(t).getValue(e):i.rawConfiguration.getValue(e))},get overrides(){const s=[];for(const{contents:r,identifiers:o,keys:a}of i.rawConfiguration.overrides){const l=new tr(r,a,[],void 0,i.logService).getValue(e);l!==void 0&&s.push({identifiers:o,value:l})}return s.length?ZR(s):void 0}}}getOverrideValue(e,t){const i=this.getContentsForOverrideIdentifer(t);return i?e?Joe(i,e):i:void 0}override(e){let t=this.overrideConfigurations.get(e);return t||(t=this.createOverrideConfigurationModel(e),this.overrideConfigurations.set(e,t)),t}merge(...e){var o,a;const t=eg(this.contents),i=eg(this.overrides),s=[...this.keys],r=(o=this.raw)!=null&&o.length?[...this.raw]:[this];for(const l of e)if(r.push(...(a=l.raw)!=null&&a.length?l.raw:[l]),!l.isEmpty()){this.mergeContents(t,l.contents);for(const c of l.overrides){const[d]=i.filter(u=>dn(u.identifiers,c.identifiers));d?(this.mergeContents(d.contents,c.contents),d.keys.push(...c.keys),d.keys=qg(d.keys)):i.push(eg(c))}for(const c of l.keys)s.indexOf(c)===-1&&s.push(c)}return new tr(t,s,i,r.every(l=>l instanceof tr)?void 0:r,this.logService)}createOverrideConfigurationModel(e){const t=this.getContentsForOverrideIdentifer(e);if(!t||typeof t!="object"||!Object.keys(t).length)return this;const i={};for(const s of qg([...Object.keys(this.contents),...Object.keys(t)])){let r=this.contents[s];const o=t[s];o&&(typeof r=="object"&&typeof o=="object"?(r=eg(r),this.mergeContents(r,o)):r=o),i[s]=r}return new tr(i,this.keys,this.overrides,void 0,this.logService)}mergeContents(e,t){for(const i of Object.keys(t)){if(i in e&&zs(e[i])&&zs(t[i])){this.mergeContents(e[i],t[i]);continue}e[i]=eg(t[i])}}getContentsForOverrideIdentifer(e){let t=null,i=null;const s=r=>{r&&(i?this.mergeContents(i,r):i=eg(r))};for(const r of this.overrides)r.identifiers.length===1&&r.identifiers[0]===e?t=r.contents:r.identifiers.includes(e)&&s(r.contents);return s(t),i}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}setValue(e,t){this.updateValue(e,t,!1)}removeValue(e){const t=this.keys.indexOf(e);t!==-1&&(this.keys.splice(t,1),qGe(this.contents,e),A_.test(e)&&this.overrides.splice(this.overrides.findIndex(i=>dn(i.identifiers,wP(e))),1))}updateValue(e,t,i){if(cCe(this.contents,e,t,s=>this.logService.error(s)),i=i||this.keys.indexOf(e)===-1,i&&this.keys.push(e),A_.test(e)){const s=wP(e),r={identifiers:s,keys:Object.keys(this.contents[e]),contents:Gz(this.contents[e],a=>this.logService.error(a))},o=this.overrides.findIndex(a=>dn(a.identifiers,s));o!==-1?this.overrides[o]=r:this.overrides.push(r)}}}class $et{constructor(e,t){this._name=e,this.logService=t,this._raw=null,this._configurationModel=null,this._restrictedConfigurations=[]}get configurationModel(){return this._configurationModel||tr.createEmptyModel(this.logService)}parseRaw(e,t){this._raw=e;const{contents:i,keys:s,overrides:r,restricted:o,hasExcludedProperties:a}=this.doParseRaw(e,t);this._configurationModel=new tr(i,s,r,a?[e]:void 0,this.logService),this._restrictedConfigurations=o||[]}doParseRaw(e,t){const i=_n.as(Bd.Configuration).getConfigurationProperties(),s=this.filter(e,i,!0,t);e=s.raw;const r=Gz(e,l=>this.logService.error(`Conflict in settings file ${this._name}: ${l}`)),o=Object.keys(e),a=this.toOverrides(e,l=>this.logService.error(`Conflict in settings file ${this._name}: ${l}`));return{contents:r,keys:o,overrides:a,restricted:s.restricted,hasExcludedProperties:s.hasExcludedProperties}}filter(e,t,i,s){var l,c,d;let r=!1;if(!(s!=null&&s.scopes)&&!(s!=null&&s.skipRestricted)&&!((l=s==null?void 0:s.exclude)!=null&&l.length))return{raw:e,restricted:[],hasExcludedProperties:r};const o={},a=[];for(const u in e)if(A_.test(u)&&i){const h=this.filter(e[u],t,!1,s);o[u]=h.raw,r=r||h.hasExcludedProperties,a.push(...h.restricted)}else{const h=t[u],f=h?typeof h.scope<"u"?h.scope:3:void 0;h!=null&&h.restricted&&a.push(u),!((c=s.exclude)!=null&&c.includes(u))&&((d=s.include)!=null&&d.includes(u)||(f===void 0||s.scopes===void 0||s.scopes.includes(f))&&!(s.skipRestricted&&(h!=null&&h.restricted)))?o[u]=e[u]:r=!0}return{raw:o,restricted:a,hasExcludedProperties:r}}toOverrides(e,t){const i=[];for(const s of Object.keys(e))if(A_.test(s)){const r={};for(const o in e[s])r[o]=e[s][o];i.push({identifiers:wP(s),keys:Object.keys(r),contents:Gz(r,t)})}return i}}class jet{constructor(e,t,i,s,r,o,a,l,c,d,u,h,f){this.key=e,this.overrides=t,this._value=i,this.overrideIdentifiers=s,this.defaultConfiguration=r,this.policyConfiguration=o,this.applicationConfiguration=a,this.userConfiguration=l,this.localUserConfiguration=c,this.remoteUserConfiguration=d,this.workspaceConfiguration=u,this.folderConfigurationModel=h,this.memoryConfigurationModel=f}toInspectValue(e){return(e==null?void 0:e.value)!==void 0||(e==null?void 0:e.override)!==void 0||(e==null?void 0:e.overrides)!==void 0?e:void 0}get userInspectValue(){return this._userInspectValue||(this._userInspectValue=this.userConfiguration.inspect(this.key,this.overrides.overrideIdentifier)),this._userInspectValue}get user(){return this.toInspectValue(this.userInspectValue)}}class bB{constructor(e,t,i,s,r,o,a,l,c,d){this._defaultConfiguration=e,this._policyConfiguration=t,this._applicationConfiguration=i,this._localUserConfiguration=s,this._remoteUserConfiguration=r,this._workspaceConfiguration=o,this._folderConfigurations=a,this._memoryConfiguration=l,this._memoryConfigurationByResource=c,this.logService=d,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations=new $s,this._userConfiguration=null}getValue(e,t,i){return this.getConsolidatedConfigurationModel(e,t,i).getValue(e)}updateValue(e,t,i={}){let s;i.resource?(s=this._memoryConfigurationByResource.get(i.resource),s||(s=tr.createEmptyModel(this.logService),this._memoryConfigurationByResource.set(i.resource,s))):s=this._memoryConfiguration,t===void 0?s.removeValue(e):s.setValue(e,t),i.resource||(this._workspaceConsolidatedConfiguration=null)}inspect(e,t,i){const s=this.getConsolidatedConfigurationModel(e,t,i),r=this.getFolderConfigurationModelForResource(t.resource,i),o=t.resource?this._memoryConfigurationByResource.get(t.resource)||this._memoryConfiguration:this._memoryConfiguration,a=new Set;for(const l of s.overrides)for(const c of l.identifiers)s.getOverrideValue(e,c)!==void 0&&a.add(c);return new jet(e,t,s.getValue(e),a.size?[...a]:void 0,this._defaultConfiguration,this._policyConfiguration.isEmpty()?void 0:this._policyConfiguration,this.applicationConfiguration.isEmpty()?void 0:this.applicationConfiguration,this.userConfiguration,this.localUserConfiguration,this.remoteUserConfiguration,i?this._workspaceConfiguration:void 0,r||void 0,o)}get applicationConfiguration(){return this._applicationConfiguration}get userConfiguration(){return this._userConfiguration||(this._userConfiguration=this._remoteUserConfiguration.isEmpty()?this._localUserConfiguration:this._localUserConfiguration.merge(this._remoteUserConfiguration)),this._userConfiguration}get localUserConfiguration(){return this._localUserConfiguration}get remoteUserConfiguration(){return this._remoteUserConfiguration}getConsolidatedConfigurationModel(e,t,i){let s=this.getConsolidatedConfigurationModelForResource(t,i);return t.overrideIdentifier&&(s=s.override(t.overrideIdentifier)),!this._policyConfiguration.isEmpty()&&this._policyConfiguration.getValue(e)!==void 0&&(s=s.merge(this._policyConfiguration)),s}getConsolidatedConfigurationModelForResource({resource:e},t){let i=this.getWorkspaceConsolidatedConfiguration();if(t&&e){const s=t.getFolder(e);s&&(i=this.getFolderConsolidatedConfiguration(s.uri)||i);const r=this._memoryConfigurationByResource.get(e);r&&(i=i.merge(r))}return i}getWorkspaceConsolidatedConfiguration(){return this._workspaceConsolidatedConfiguration||(this._workspaceConsolidatedConfiguration=this._defaultConfiguration.merge(this.applicationConfiguration,this.userConfiguration,this._workspaceConfiguration,this._memoryConfiguration)),this._workspaceConsolidatedConfiguration}getFolderConsolidatedConfiguration(e){let t=this._foldersConsolidatedConfigurations.get(e);if(!t){const i=this.getWorkspaceConsolidatedConfiguration(),s=this._folderConfigurations.get(e);s?(t=i.merge(s),this._foldersConsolidatedConfigurations.set(e,t)):t=i}return t}getFolderConfigurationModelForResource(e,t){if(t&&e){const i=t.getFolder(e);if(i)return this._folderConfigurations.get(i.uri)}}toData(){return{defaults:{contents:this._defaultConfiguration.contents,overrides:this._defaultConfiguration.overrides,keys:this._defaultConfiguration.keys},policy:{contents:this._policyConfiguration.contents,overrides:this._policyConfiguration.overrides,keys:this._policyConfiguration.keys},application:{contents:this.applicationConfiguration.contents,overrides:this.applicationConfiguration.overrides,keys:this.applicationConfiguration.keys},user:{contents:this.userConfiguration.contents,overrides:this.userConfiguration.overrides,keys:this.userConfiguration.keys},workspace:{contents:this._workspaceConfiguration.contents,overrides:this._workspaceConfiguration.overrides,keys:this._workspaceConfiguration.keys},folders:[...this._folderConfigurations.keys()].reduce((e,t)=>{const{contents:i,overrides:s,keys:r}=this._folderConfigurations.get(t);return e.push([t,{contents:i,overrides:s,keys:r}]),e},[])}}static parse(e,t){const i=this.parseConfigurationModel(e.defaults,t),s=this.parseConfigurationModel(e.policy,t),r=this.parseConfigurationModel(e.application,t),o=this.parseConfigurationModel(e.user,t),a=this.parseConfigurationModel(e.workspace,t),l=e.folders.reduce((c,d)=>(c.set(Xe.revive(d[0]),this.parseConfigurationModel(d[1],t)),c),new $s);return new bB(i,s,r,o,tr.createEmptyModel(t),a,l,tr.createEmptyModel(t),new $s,t)}static parseConfigurationModel(e,t){return new tr(e.contents,e.keys,e.overrides,void 0,t)}}class Ket{constructor(e,t,i,s,r){this.change=e,this.previous=t,this.currentConfiguraiton=i,this.currentWorkspace=s,this.logService=r,this._marker=`
`,this._markerCode1=this._marker.charCodeAt(0),this._markerCode2=46,this.affectedKeys=new Set,this._previousConfiguration=void 0;for(const o of e.keys)this.affectedKeys.add(o);for(const[,o]of e.overrides)for(const a of o)this.affectedKeys.add(a);this._affectsConfigStr=this._marker;for(const o of this.affectedKeys)this._affectsConfigStr+=o+this._marker}get previousConfiguration(){return!this._previousConfiguration&&this.previous&&(this._previousConfiguration=bB.parse(this.previous.data,this.logService)),this._previousConfiguration}affectsConfiguration(e,t){var a;const i=this._marker+e,s=this._affectsConfigStr.indexOf(i);if(s<0)return!1;const r=s+i.length;if(r>=this._affectsConfigStr.length)return!1;const o=this._affectsConfigStr.charCodeAt(r);if(o!==this._markerCode1&&o!==this._markerCode2)return!1;if(t){const l=this.previousConfiguration?this.previousConfiguration.getValue(e,t,(a=this.previous)==null?void 0:a.workspace):void 0,c=this.currentConfiguraiton.getValue(e,t,this.currentWorkspace);return!Ga(l,c)}return!0}}class qet{constructor(){this._onDidChange=new X,this.onDidChange=this._onDidChange.event,this._enabled=!0}get enabled(){return this._enabled}enable(){this._enabled=!0,this._onDidChange.fire()}disable(){this._enabled=!1,this._onDidChange.fire()}}const Qk=new qet,VP={kind:0},Get={kind:1};function Yet(n,e,t){return{kind:2,commandId:n,commandArgs:e,isBubble:t}}class Jk{constructor(e,t,i){var s;this._log=i,this._defaultKeybindings=e,this._defaultBoundCommands=new Map;for(const r of e){const o=r.command;o&&o.charAt(0)!=="-"&&this._defaultBoundCommands.set(o,!0)}this._map=new Map,this._lookupMap=new Map,this._keybindings=Jk.handleRemovals([].concat(e).concat(t));for(let r=0,o=this._keybindings.length;r<o;r++){const a=this._keybindings[r];if(a.chords.length===0)continue;const l=(s=a.when)==null?void 0:s.substituteConstants();l&&l.type===0||this._addKeyPress(a.chords[0],a)}}static _isTargetedForRemoval(e,t,i){if(t){for(let s=0;s<t.length;s++)if(t[s]!==e.chords[s])return!1}return!(i&&i.type!==1&&(!e.when||!nGe(i,e.when)))}static handleRemovals(e){const t=new Map;for(let s=0,r=e.length;s<r;s++){const o=e[s];if(o.command&&o.command.charAt(0)==="-"){const a=o.command.substring(1);t.has(a)?t.get(a).push(o):t.set(a,[o])}}if(t.size===0)return e;const i=[];for(let s=0,r=e.length;s<r;s++){const o=e[s];if(!o.command||o.command.length===0){i.push(o);continue}if(o.command.charAt(0)==="-")continue;const a=t.get(o.command);if(!a||!o.isDefault){i.push(o);continue}let l=!1;for(const c of a){const d=c.when;if(this._isTargetedForRemoval(o,c.chords,d)){l=!0;break}}if(!l){i.push(o);continue}}return i}_addKeyPress(e,t){const i=this._map.get(e);if(typeof i>"u"){this._map.set(e,[t]),this._addToLookupMap(t);return}for(let s=i.length-1;s>=0;s--){const r=i[s];if(r.command===t.command)continue;let o=!0;for(let a=1;a<r.chords.length&&a<t.chords.length;a++)if(r.chords[a]!==t.chords[a]){o=!1;break}o&&Jk.whenIsEntirelyIncluded(r.when,t.when)&&this._removeFromLookupMap(r)}i.push(t),this._addToLookupMap(t)}_addToLookupMap(e){if(!e.command)return;let t=this._lookupMap.get(e.command);typeof t>"u"?(t=[e],this._lookupMap.set(e.command,t)):t.push(e)}_removeFromLookupMap(e){if(!e.command)return;const t=this._lookupMap.get(e.command);if(!(typeof t>"u")){for(let i=0,s=t.length;i<s;i++)if(t[i]===e){t.splice(i,1);return}}}static whenIsEntirelyIncluded(e,t){return!t||t.type===1?!0:!e||e.type===1?!1:$z(e,t)}getKeybindings(){return this._keybindings}lookupPrimaryKeybinding(e,t){const i=this._lookupMap.get(e);if(typeof i>"u"||i.length===0)return null;if(i.length===1)return i[0];for(let s=i.length-1;s>=0;s--){const r=i[s];if(t.contextMatchesRules(r.when))return r}return i[i.length-1]}resolve(e,t,i){const s=[...t,i];this._log(`| Resolving ${s}`);const r=this._map.get(s[0]);if(r===void 0)return this._log("\\ No keybinding entries."),VP;let o=null;if(s.length<2)o=r;else{o=[];for(let l=0,c=r.length;l<c;l++){const d=r[l];if(s.length>d.chords.length)continue;let u=!0;for(let h=1;h<s.length;h++)if(d.chords[h]!==s[h]){u=!1;break}u&&o.push(d)}}const a=this._findCommand(e,o);return a?s.length<a.chords.length?(this._log(`\\ From ${o.length} keybinding entries, awaiting ${a.chords.length-s.length} more chord(s), when: ${kle(a.when)}, source: ${Ele(a)}.`),Get):(this._log(`\\ From ${o.length} keybinding entries, matched ${a.command}, when: ${kle(a.when)}, source: ${Ele(a)}.`),Yet(a.command,a.commandArgs,a.bubble)):(this._log(`\\ From ${o.length} keybinding entries, no when clauses matched the context.`),VP)}_findCommand(e,t){for(let i=t.length-1;i>=0;i--){const s=t[i];if(Jk._contextMatchesRules(e,s.when))return s}return null}static _contextMatchesRules(e,t){return t?t.evaluate(e):!0}}function kle(n){return n?`${n.serialize()}`:"no when condition"}function Ele(n){return n.extensionId?n.isBuiltinExtension?`built-in extension ${n.extensionId}`:`user extension ${n.extensionId}`:n.isDefault?"built-in":"user"}const Zet=/^(cursor|delete|undo|redo|tab|editor\.action\.clipboard)/;class Xet extends ee{get onDidUpdateKeybindings(){return this._onDidUpdateKeybindings?this._onDidUpdateKeybindings.event:Ee.None}get inChordMode(){return this._currentChords.length>0}constructor(e,t,i,s,r){super(),this._contextKeyService=e,this._commandService=t,this._telemetryService=i,this._notificationService=s,this._logService=r,this._onDidUpdateKeybindings=this._register(new X),this._currentChords=[],this._currentChordChecker=new dX,this._currentChordStatusMessage=null,this._ignoreSingleModifiers=k1.EMPTY,this._currentSingleModifier=null,this._currentSingleModifierClearTimeout=new Fd,this._currentlyDispatchingCommandId=null,this._logging=!1}dispose(){super.dispose()}_log(e){this._logging&&this._logService.info(`[KeybindingService]: ${e}`)}getKeybindings(){return this._getResolver().getKeybindings()}lookupKeybinding(e,t){const i=this._getResolver().lookupPrimaryKeybinding(e,t||this._contextKeyService);if(i)return i.resolvedKeybinding}dispatchEvent(e,t){return this._dispatch(e,t)}softDispatch(e,t){this._log("/ Soft dispatching keyboard event");const i=this.resolveKeyboardEvent(e);if(i.hasMultipleChords())return console.warn("keyboard event should not be mapped to multiple chords"),VP;const[s]=i.getDispatchChords();if(s===null)return this._log("\\ Keyboard event cannot be dispatched"),VP;const r=this._contextKeyService.getContext(t),o=this._currentChords.map(({keypress:a})=>a);return this._getResolver().resolve(r,o,s)}_scheduleLeaveChordMode(){const e=Date.now();this._currentChordChecker.cancelAndSet(()=>{if(!this._documentHasFocus()){this._leaveChordMode();return}Date.now()-e>5e3&&this._leaveChordMode()},500)}_expectAnotherChord(e,t){switch(this._currentChords.push({keypress:e,label:t}),this._currentChords.length){case 0:throw YZ("impossible");case 1:this._currentChordStatusMessage=this._notificationService.status(v("first.chord","({0}) was pressed. Waiting for second key of chord...",t));break;default:{const i=this._currentChords.map(({label:s})=>s).join(", ");this._currentChordStatusMessage=this._notificationService.status(v("next.chord","({0}) was pressed. Waiting for next key of chord...",i))}}this._scheduleLeaveChordMode(),Qk.enabled&&Qk.disable()}_leaveChordMode(){this._currentChordStatusMessage&&(this._currentChordStatusMessage.dispose(),this._currentChordStatusMessage=null),this._currentChordChecker.cancel(),this._currentChords=[],Qk.enable()}_dispatch(e,t){return this._doDispatch(this.resolveKeyboardEvent(e),t,!1)}_singleModifierDispatch(e,t){const i=this.resolveKeyboardEvent(e),[s]=i.getSingleModifierDispatchChords();if(s)return this._ignoreSingleModifiers.has(s)?(this._log(`+ Ignoring single modifier ${s} due to it being pressed together with other keys.`),this._ignoreSingleModifiers=k1.EMPTY,this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1):(this._ignoreSingleModifiers=k1.EMPTY,this._currentSingleModifier===null?(this._log(`+ Storing single modifier for possible chord ${s}.`),this._currentSingleModifier=s,this._currentSingleModifierClearTimeout.cancelAndSet(()=>{this._log("+ Clearing single modifier due to 300ms elapsed."),this._currentSingleModifier=null},300),!1):s===this._currentSingleModifier?(this._log(`/ Dispatching single modifier chord ${s} ${s}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,this._doDispatch(i,t,!0)):(this._log(`+ Clearing single modifier due to modifier mismatch: ${this._currentSingleModifier} ${s}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1));const[r]=i.getChords();return this._ignoreSingleModifiers=new k1(r),this._currentSingleModifier!==null&&this._log("+ Clearing single modifier due to other key up."),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1}_doDispatch(e,t,i=!1){let s=!1;if(e.hasMultipleChords())return console.warn("Unexpected keyboard event mapped to multiple chords"),!1;let r=null,o=null;if(i){const[d]=e.getSingleModifierDispatchChords();r=d,o=d?[d]:[]}else[r]=e.getDispatchChords(),o=this._currentChords.map(({keypress:d})=>d);if(r===null)return this._log("\\ Keyboard event cannot be dispatched in keydown phase."),s;const a=this._contextKeyService.getContext(t),l=e.getLabel(),c=this._getResolver().resolve(a,o,r);switch(c.kind){case 0:{if(this._logService.trace("KeybindingService#dispatch",l,"[ No matching keybinding ]"),this.inChordMode){const d=this._currentChords.map(({label:u})=>u).join(", ");this._log(`+ Leaving multi-chord mode: Nothing bound to "${d}, ${l}".`),this._notificationService.status(v("missing.chord","The key combination ({0}, {1}) is not a command.",d,l),{hideAfter:10*1e3}),this._leaveChordMode(),s=!0}return s}case 1:return this._logService.trace("KeybindingService#dispatch",l,"[ Several keybindings match - more chords needed ]"),s=!0,this._expectAnotherChord(r,l),this._log(this._currentChords.length===1?"+ Entering multi-chord mode...":"+ Continuing multi-chord mode..."),s;case 2:{if(this._logService.trace("KeybindingService#dispatch",l,`[ Will dispatch command ${c.commandId} ]`),c.commandId===null||c.commandId===""){if(this.inChordMode){const d=this._currentChords.map(({label:u})=>u).join(", ");this._log(`+ Leaving chord mode: Nothing bound to "${d}, ${l}".`),this._notificationService.status(v("missing.chord","The key combination ({0}, {1}) is not a command.",d,l),{hideAfter:10*1e3}),this._leaveChordMode(),s=!0}}else{this.inChordMode&&this._leaveChordMode(),c.isBubble||(s=!0),this._log(`+ Invoking command ${c.commandId}.`),this._currentlyDispatchingCommandId=c.commandId;try{typeof c.commandArgs>"u"?this._commandService.executeCommand(c.commandId).then(void 0,d=>this._notificationService.warn(d)):this._commandService.executeCommand(c.commandId,c.commandArgs).then(void 0,d=>this._notificationService.warn(d))}finally{this._currentlyDispatchingCommandId=null}Zet.test(c.commandId)||this._telemetryService.publicLog2("workbenchActionExecuted",{id:c.commandId,from:"keybinding",detail:e.getUserSettingsLabel()??void 0})}return s}}}mightProducePrintableCharacter(e){return e.ctrlKey||e.metaKey?!1:e.keyCode>=31&&e.keyCode<=56||e.keyCode>=21&&e.keyCode<=30}}const v4=class v4{constructor(e){this._ctrlKey=e?e.ctrlKey:!1,this._shiftKey=e?e.shiftKey:!1,this._altKey=e?e.altKey:!1,this._metaKey=e?e.metaKey:!1}has(e){switch(e){case"ctrl":return this._ctrlKey;case"shift":return this._shiftKey;case"alt":return this._altKey;case"meta":return this._metaKey}}};v4.EMPTY=new v4(null);let k1=v4;class Ile{constructor(e,t,i,s,r,o,a){this._resolvedKeybindingItemBrand=void 0,this.resolvedKeybinding=e,this.chords=e?WU(e.getDispatchChords()):[],e&&this.chords.length===0&&(this.chords=WU(e.getSingleModifierDispatchChords())),this.bubble=t?t.charCodeAt(0)===94:!1,this.command=this.bubble?t.substr(1):t,this.commandArgs=i,this.when=s,this.isDefault=r,this.extensionId=o,this.isBuiltinExtension=a}}function WU(n){const e=[];for(let t=0,i=n.length;t<i;t++){const s=n[t];if(!s)return[];e.push(s)}return e}class wB{constructor(e,t,i=t){this.modifierLabels=[null],this.modifierLabels[2]=e,this.modifierLabels[1]=t,this.modifierLabels[3]=i}toLabel(e,t,i){if(t.length===0)return null;const s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=i(a);if(l===null)return null;s[r]=ttt(a,l,this.modifierLabels[e])}return s.join(" ")}}const sQ=new wB({ctrlKey:"",shiftKey:"",altKey:"",metaKey:"",separator:""},{ctrlKey:v({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:v({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:v({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:v({key:"windowsKey",comment:["This is the short form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:v({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:v({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:v({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:v({key:"superKey",comment:["This is the short form for the Super key on the keyboard"]},"Super"),separator:"+"}),Qet=new wB({ctrlKey:v({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:v({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:v({key:"optKey.long",comment:["This is the long form for the Alt/Option key on the keyboard"]},"Option"),metaKey:v({key:"cmdKey.long",comment:["This is the long form for the Command key on the keyboard"]},"Command"),separator:"+"},{ctrlKey:v({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:v({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:v({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:v({key:"windowsKey.long",comment:["This is the long form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:v({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:v({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:v({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:v({key:"superKey.long",comment:["This is the long form for the Super key on the keyboard"]},"Super"),separator:"+"}),Jet=new wB({ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Cmd",separator:"+"},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Super",separator:"+"}),ett=new wB({ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"cmd",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"win",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"meta",separator:"+"});function ttt(n,e,t){if(e===null)return"";const i=[];return n.ctrlKey&&i.push(t.ctrlKey),n.shiftKey&&i.push(t.shiftKey),n.altKey&&i.push(t.altKey),n.metaKey&&i.push(t.metaKey),e!==""&&i.push(e),i.join(t.separator)}class itt extends xKe{constructor(e,t){if(super(),t.length===0)throw Ec("chords");this._os=e,this._chords=t}getLabel(){return sQ.toLabel(this._os,this._chords,e=>this._getLabel(e))}getAriaLabel(){return Qet.toLabel(this._os,this._chords,e=>this._getAriaLabel(e))}getElectronAccelerator(){return this._chords.length>1||this._chords[0].isDuplicateModifierCase()?null:Jet.toLabel(this._os,this._chords,e=>this._getElectronAccelerator(e))}getUserSettingsLabel(){return ett.toLabel(this._os,this._chords,e=>this._getUserSettingsLabel(e))}hasMultipleChords(){return this._chords.length>1}getChords(){return this._chords.map(e=>this._getChord(e))}_getChord(e){return new SKe(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,this._getLabel(e),this._getAriaLabel(e))}getDispatchChords(){return this._chords.map(e=>this._getChordDispatch(e))}getSingleModifierDispatchChords(){return this._chords.map(e=>this._getSingleModifierChordDispatch(e))}}class iD extends itt{constructor(e,t){super(t,e)}_keyCodeToUILabel(e){if(this._os===2)switch(e){case 15:return"";case 16:return"";case 17:return"";case 18:return""}return ag.toString(e)}_getLabel(e){return e.isDuplicateModifierCase()?"":this._keyCodeToUILabel(e.keyCode)}_getAriaLabel(e){return e.isDuplicateModifierCase()?"":ag.toString(e.keyCode)}_getElectronAccelerator(e){return ag.toElectronAccelerator(e.keyCode)}_getUserSettingsLabel(e){if(e.isDuplicateModifierCase())return"";const t=ag.toUserSettingsUS(e.keyCode);return t&&t.toLowerCase()}_getChordDispatch(e){return iD.getDispatchStr(e)}static getDispatchStr(e){if(e.isModifierKey())return null;let t="";return e.ctrlKey&&(t+="ctrl+"),e.shiftKey&&(t+="shift+"),e.altKey&&(t+="alt+"),e.metaKey&&(t+="meta+"),t+=ag.toString(e.keyCode),t}_getSingleModifierChordDispatch(e){return e.keyCode===5&&!e.shiftKey&&!e.altKey&&!e.metaKey?"ctrl":e.keyCode===4&&!e.ctrlKey&&!e.altKey&&!e.metaKey?"shift":e.keyCode===6&&!e.ctrlKey&&!e.shiftKey&&!e.metaKey?"alt":e.keyCode===57&&!e.ctrlKey&&!e.shiftKey&&!e.altKey?"meta":null}static _scanCodeToKeyCode(e){const t=JZ[e];if(t!==-1)return t;switch(e){case 10:return 31;case 11:return 32;case 12:return 33;case 13:return 34;case 14:return 35;case 15:return 36;case 16:return 37;case 17:return 38;case 18:return 39;case 19:return 40;case 20:return 41;case 21:return 42;case 22:return 43;case 23:return 44;case 24:return 45;case 25:return 46;case 26:return 47;case 27:return 48;case 28:return 49;case 29:return 50;case 30:return 51;case 31:return 52;case 32:return 53;case 33:return 54;case 34:return 55;case 35:return 56;case 36:return 22;case 37:return 23;case 38:return 24;case 39:return 25;case 40:return 26;case 41:return 27;case 42:return 28;case 43:return 29;case 44:return 30;case 45:return 21;case 51:return 88;case 52:return 86;case 53:return 92;case 54:return 94;case 55:return 93;case 56:return 0;case 57:return 85;case 58:return 95;case 59:return 91;case 60:return 87;case 61:return 89;case 62:return 90;case 106:return 97}return 0}static _toKeyCodeChord(e){if(!e)return null;if(e instanceof Zg)return e;const t=this._scanCodeToKeyCode(e.scanCode);return t===0?null:new Zg(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,t)}static resolveKeybinding(e,t){const i=WU(e.chords.map(s=>this._toKeyCodeChord(s)));return i.length>0?[new iD(i,t)]:[]}}const VS=Wt("labelService"),I1e=Wt("progressService"),jee=class jee{constructor(e){this.callback=e}report(e){this._value=e,this.callback(this._value)}};jee.None=Object.freeze({report(){}});let Cu=jee;const nv=Wt("editorProgressService");class ntt{constructor(){this._value="",this._pos=0}reset(e){return this._value=e,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(e){const t=e.charCodeAt(0),i=this._value.charCodeAt(this._pos);return t-i}value(){return this._value[this._pos]}}class stt{constructor(e=!0){this._caseSensitive=e}reset(e){return this._value=e,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===46)if(e)this._from++;else break;else e=!1;return this}cmp(e){return this._caseSensitive?tX(e,this._value,0,e.length,this._from,this._to):AN(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class rtt{constructor(e=!0,t=!0){this._splitOnBackslash=e,this._caseSensitive=t}reset(e){this._from=0,this._to=0,this._value=e,this._valueLen=e.length;for(let t=e.length-1;t>=0;t--,this._valueLen--){const i=this._value.charCodeAt(t);if(!(i===47||this._splitOnBackslash&&i===92))break}return this.next()}hasNext(){return this._to<this._valueLen}next(){this._from=this._to;let e=!0;for(;this._to<this._valueLen;this._to++){const t=this._value.charCodeAt(this._to);if(t===47||this._splitOnBackslash&&t===92)if(e)this._from++;else break;else e=!1}return this}cmp(e){return this._caseSensitive?tX(e,this._value,0,e.length,this._from,this._to):AN(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class ott{constructor(e,t){this._ignorePathCasing=e,this._ignoreQueryAndFragment=t,this._states=[],this._stateIdx=0}reset(e){return this._value=e,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new rtt(!1,!this._ignorePathCasing(e)),this._pathIterator.reset(e.path),this._pathIterator.value()&&this._states.push(3)),this._ignoreQueryAndFragment(e)||(this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5)),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(e){if(this._states[this._stateIdx]===1)return Iz(e,this._value.scheme);if(this._states[this._stateIdx]===2)return Iz(e,this._value.authority);if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(e);if(this._states[this._stateIdx]===4)return PI(e,this._value.query);if(this._states[this._stateIdx]===5)return PI(e,this._value.fragment);throw new Error}value(){if(this._states[this._stateIdx]===1)return this._value.scheme;if(this._states[this._stateIdx]===2)return this._value.authority;if(this._states[this._stateIdx]===3)return this._pathIterator.value();if(this._states[this._stateIdx]===4)return this._value.query;if(this._states[this._stateIdx]===5)return this._value.fragment;throw new Error}}class XR{constructor(){this.height=1}rotateLeft(){const e=this.right;return this.right=e.left,e.left=this,this.updateHeight(),e.updateHeight(),e}rotateRight(){const e=this.left;return this.left=e.right,e.right=this,this.updateHeight(),e.updateHeight(),e}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){var e;return((e=this.left)==null?void 0:e.height)??0}get heightRight(){var e;return((e=this.right)==null?void 0:e.height)??0}}class Iy{static forUris(e=()=>!1,t=()=>!1){return new Iy(new ott(e,t))}static forStrings(){return new Iy(new ntt)}static forConfigKeys(){return new Iy(new stt)}constructor(e){this._iter=e}clear(){this._root=void 0}set(e,t){const i=this._iter.reset(e);let s;this._root||(this._root=new XR,this._root.segment=i.value());const r=[];for(s=this._root;;){const a=i.cmp(s.segment);if(a>0)s.left||(s.left=new XR,s.left.segment=i.value()),r.push([-1,s]),s=s.left;else if(a<0)s.right||(s.right=new XR,s.right.segment=i.value()),r.push([1,s]),s=s.right;else if(i.hasNext())i.next(),s.mid||(s.mid=new XR,s.mid.segment=i.value()),r.push([0,s]),s=s.mid;else break}const o=s.value;s.value=t,s.key=e;for(let a=r.length-1;a>=0;a--){const l=r[a][1];l.updateHeight();const c=l.balanceFactor();if(c<-1||c>1){const d=r[a][0],u=r[a+1][0];if(d===1&&u===1)r[a][1]=l.rotateLeft();else if(d===-1&&u===-1)r[a][1]=l.rotateRight();else if(d===1&&u===-1)l.right=r[a+1][1]=r[a+1][1].rotateRight(),r[a][1]=l.rotateLeft();else if(d===-1&&u===1)l.left=r[a+1][1]=r[a+1][1].rotateLeft(),r[a][1]=l.rotateRight();else throw new Error;if(a>0)switch(r[a-1][0]){case-1:r[a-1][1].left=r[a][1];break;case 1:r[a-1][1].right=r[a][1];break;case 0:r[a-1][1].mid=r[a][1];break}else this._root=r[0][1]}}return o}get(e){var t;return(t=this._getNode(e))==null?void 0:t.value}_getNode(e){const t=this._iter.reset(e);let i=this._root;for(;i;){const s=t.cmp(i.segment);if(s>0)i=i.left;else if(s<0)i=i.right;else if(t.hasNext())t.next(),i=i.mid;else break}return i}has(e){const t=this._getNode(e);return!((t==null?void 0:t.value)===void 0&&(t==null?void 0:t.mid)===void 0)}delete(e){return this._delete(e,!1)}deleteSuperstr(e){return this._delete(e,!0)}_delete(e,t){const i=this._iter.reset(e),s=[];let r=this._root;for(;r;){const o=i.cmp(r.segment);if(o>0)s.push([-1,r]),r=r.left;else if(o<0)s.push([1,r]),r=r.right;else if(i.hasNext())i.next(),s.push([0,r]),r=r.mid;else break}if(r){if(t?(r.left=void 0,r.mid=void 0,r.right=void 0,r.height=1):(r.key=void 0,r.value=void 0),!r.mid&&!r.value)if(r.left&&r.right){const o=this._min(r.right);if(o.key){const{key:a,value:l,segment:c}=o;this._delete(o.key,!1),r.key=a,r.value=l,r.segment=c}}else{const o=r.left??r.right;if(s.length>0){const[a,l]=s[s.length-1];switch(a){case-1:l.left=o;break;case 0:l.mid=o;break;case 1:l.right=o;break}}else this._root=o}for(let o=s.length-1;o>=0;o--){const a=s[o][1];a.updateHeight();const l=a.balanceFactor();if(l>1?(a.right.balanceFactor()>=0||(a.right=a.right.rotateRight()),s[o][1]=a.rotateLeft()):l<-1&&(a.left.balanceFactor()<=0||(a.left=a.left.rotateLeft()),s[o][1]=a.rotateRight()),o>0)switch(s[o-1][0]){case-1:s[o-1][1].left=s[o][1];break;case 1:s[o-1][1].right=s[o][1];break;case 0:s[o-1][1].mid=s[o][1];break}else this._root=s[0][1]}}}_min(e){for(;e.left;)e=e.left;return e}findSubstr(e){const t=this._iter.reset(e);let i=this._root,s;for(;i;){const r=t.cmp(i.segment);if(r>0)i=i.left;else if(r<0)i=i.right;else if(t.hasNext())t.next(),s=i.value||s,i=i.mid;else break}return i&&i.value||s}findSuperstr(e){return this._findSuperstrOrElement(e,!1)}_findSuperstrOrElement(e,t){const i=this._iter.reset(e);let s=this._root;for(;s;){const r=i.cmp(s.segment);if(r>0)s=s.left;else if(r<0)s=s.right;else if(i.hasNext())i.next(),s=s.mid;else return s.mid?this._entries(s.mid):t?s.value:void 0}}forEach(e){for(const[t,i]of this)e(i,t)}*[Symbol.iterator](){yield*this._entries(this._root)}_entries(e){const t=[];return this._dfsEntries(e,t),t[Symbol.iterator]()}_dfsEntries(e,t){e&&(e.left&&this._dfsEntries(e.left,t),e.value&&t.push([e.key,e.value]),e.mid&&this._dfsEntries(e.mid,t),e.right&&this._dfsEntries(e.right,t))}}const m0=Wt("contextService");function HU(n){const e=n;return typeof(e==null?void 0:e.id)=="string"&&Xe.isUri(e.uri)}function att(n){const e=n;return typeof(e==null?void 0:e.id)=="string"&&!HU(n)&&!dtt(n)}const ltt={id:"empty-window"};function ctt(n,e){if(typeof n=="string"||typeof n>"u")return typeof n=="string"?{id:qm(n)}:ltt;const t=n;return t.configuration?{id:t.id,configPath:t.configuration}:t.folders.length===1?{id:t.id,uri:t.folders[0].uri}:{id:t.id}}function dtt(n){const e=n;return typeof(e==null?void 0:e.id)=="string"&&Xe.isUri(e.configPath)}class utt{constructor(e,t){this.raw=t,this.uri=e.uri,this.index=e.index,this.name=e.name}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}}const VU="code-workspace";v("codeWorkspace","Code Workspace");const D1e="4064f6ec-cb38-4ad0-af64-ee6467e63c82";function htt(n){return n.id===D1e}var zU;(function(n){n.inspectTokensAction=v("inspectTokens","Developer: Inspect Tokens")})(zU||(zU={}));var zP;(function(n){n.gotoLineActionLabel=v("gotoLineActionLabel","Go to Line/Column...")})(zP||(zP={}));var UU;(function(n){n.helpQuickAccessActionLabel=v("helpQuickAccess","Show all Quick Access Providers")})(UU||(UU={}));var UP;(function(n){n.quickCommandActionLabel=v("quickCommandActionLabel","Command Palette"),n.quickCommandHelp=v("quickCommandActionHelp","Show And Run Commands")})(UP||(UP={}));var nD;(function(n){n.quickOutlineActionLabel=v("quickOutlineActionLabel","Go to Symbol..."),n.quickOutlineByCategoryActionLabel=v("quickOutlineByCategoryActionLabel","Go to Symbol by Category...")})(nD||(nD={}));var $U;(function(n){n.editorViewAccessibleLabel=v("editorViewAccessibleLabel","Editor content")})($U||($U={}));var jU;(function(n){n.toggleHighContrast=v("toggleHighContrast","Toggle High Contrast Theme")})(jU||(jU={}));var KU;(function(n){n.bulkEditServiceSummary=v("bulkEditServiceSummary","Made {0} edits in {1} files")})(KU||(KU={}));const N1e=Wt("workspaceTrustManagementService");let zS=[],rQ=[],T1e=[];function QR(n,e=!1){ftt(n,!1,e)}function ftt(n,e,t){const i=gtt(n,e);zS.push(i),i.userConfigured?T1e.push(i):rQ.push(i),t&&!i.userConfigured&&zS.forEach(s=>{s.mime===i.mime||s.userConfigured||(i.extension&&s.extension===i.extension&&console.warn(`Overwriting extension <<${i.extension}>> to now point to mime <<${i.mime}>>`),i.filename&&s.filename===i.filename&&console.warn(`Overwriting filename <<${i.filename}>> to now point to mime <<${i.mime}>>`),i.filepattern&&s.filepattern===i.filepattern&&console.warn(`Overwriting filepattern <<${i.filepattern}>> to now point to mime <<${i.mime}>>`),i.firstline&&s.firstline===i.firstline&&console.warn(`Overwriting firstline <<${i.firstline}>> to now point to mime <<${i.mime}>>`))})}function gtt(n,e){return{id:n.id,mime:n.mime,filename:n.filename,extension:n.extension,filepattern:n.filepattern,firstline:n.firstline,userConfigured:e,filenameLowercase:n.filename?n.filename.toLowerCase():void 0,extensionLowercase:n.extension?n.extension.toLowerCase():void 0,filepatternLowercase:n.filepattern?WCe(n.filepattern.toLowerCase()):void 0,filepatternOnPath:n.filepattern?n.filepattern.indexOf(Qn.sep)>=0:!1}}function ptt(){zS=zS.filter(n=>n.userConfigured),rQ=[]}function mtt(n,e){return _tt(n,e).map(t=>t.id)}function _tt(n,e){let t;if(n)switch(n.scheme){case mt.file:t=n.fsPath;break;case mt.data:{t=P_.parseMetaData(n).get(P_.META_DATA_LABEL);break}case mt.vscodeNotebookCell:t=void 0;break;default:t=n.path}if(!t)return[{id:"unknown",mime:On.unknown}];t=t.toLowerCase();const i=qm(t),s=Dle(t,i,T1e);if(s)return[s,{id:Ro,mime:On.text}];const r=Dle(t,i,rQ);if(r)return[r,{id:Ro,mime:On.text}];if(e){const o=vtt(e);if(o)return[o,{id:Ro,mime:On.text}]}return[{id:"unknown",mime:On.unknown}]}function Dle(n,e,t){var o;let i,s,r;for(let a=t.length-1;a>=0;a--){const l=t[a];if(e===l.filenameLowercase){i=l;break}if(l.filepattern&&(!s||l.filepattern.length>s.filepattern.length)){const c=l.filepatternOnPath?n:e;(o=l.filepatternLowercase)!=null&&o.call(l,c)&&(s=l)}l.extension&&(!r||l.extension.length>r.extension.length)&&e.endsWith(l.extensionLowercase)&&(r=l)}if(i)return i;if(s)return s;if(r)return r}function vtt(n){if(aX(n)&&(n=n.substr(1)),n.length>0)for(let e=zS.length-1;e>=0;e--){const t=zS[e];if(!t.firstline)continue;const i=n.match(t.firstline);if(i&&i.length>0)return t}}const JR=Object.prototype.hasOwnProperty,Nle="vs.editor.nullLanguage";class btt{constructor(){this._languageIdToLanguage=[],this._languageToLanguageId=new Map,this._register(Nle,0),this._register(Ro,1),this._nextLanguageId=2}_register(e,t){this._languageIdToLanguage[t]=e,this._languageToLanguageId.set(e,t)}register(e){if(this._languageToLanguageId.has(e))return;const t=this._nextLanguageId++;this._register(e,t)}encodeLanguageId(e){return this._languageToLanguageId.get(e)||0}decodeLanguageId(e){return this._languageIdToLanguage[e]||Nle}}const FE=class FE extends ee{constructor(e=!0,t=!1){super(),this._onDidChange=this._register(new X),this.onDidChange=this._onDidChange.event,FE.instanceCount++,this._warnOnOverwrite=t,this.languageIdCodec=new btt,this._dynamicLanguages=[],this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},e&&(this._initializeFromRegistry(),this._register(TS.onDidChangeLanguages(i=>{this._initializeFromRegistry()})))}dispose(){FE.instanceCount--,super.dispose()}_initializeFromRegistry(){this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},ptt();const e=[].concat(TS.getLanguages()).concat(this._dynamicLanguages);this._registerLanguages(e)}_registerLanguages(e){for(const t of e)this._registerLanguage(t);this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},Object.keys(this._languages).forEach(t=>{const i=this._languages[t];i.name&&(this._nameMap[i.name]=i.identifier),i.aliases.forEach(s=>{this._lowercaseNameMap[s.toLowerCase()]=i.identifier}),i.mimetypes.forEach(s=>{this._mimeTypesMap[s]=i.identifier})}),_n.as(Bd.Configuration).registerOverrideIdentifiers(this.getRegisteredLanguageIds()),this._onDidChange.fire()}_registerLanguage(e){const t=e.id;let i;JR.call(this._languages,t)?i=this._languages[t]:(this.languageIdCodec.register(t),i={identifier:t,name:null,mimetypes:[],aliases:[],extensions:[],filenames:[],configurationFiles:[],icons:[]},this._languages[t]=i),this._mergeLanguage(i,e)}_mergeLanguage(e,t){const i=t.id;let s=null;if(Array.isArray(t.mimetypes)&&t.mimetypes.length>0&&(e.mimetypes.push(...t.mimetypes),s=t.mimetypes[0]),s||(s=`text/x-${i}`,e.mimetypes.push(s)),Array.isArray(t.extensions)){t.configuration?e.extensions=t.extensions.concat(e.extensions):e.extensions=e.extensions.concat(t.extensions);for(const a of t.extensions)QR({id:i,mime:s,extension:a},this._warnOnOverwrite)}if(Array.isArray(t.filenames))for(const a of t.filenames)QR({id:i,mime:s,filename:a},this._warnOnOverwrite),e.filenames.push(a);if(Array.isArray(t.filenamePatterns))for(const a of t.filenamePatterns)QR({id:i,mime:s,filepattern:a},this._warnOnOverwrite);if(typeof t.firstLine=="string"&&t.firstLine.length>0){let a=t.firstLine;a.charAt(0)!=="^"&&(a="^"+a);try{const l=new RegExp(a);cKe(l)||QR({id:i,mime:s,firstline:l},this._warnOnOverwrite)}catch(l){console.warn(`[${t.id}]: Invalid regular expression \`${a}\`: `,l)}}e.aliases.push(i);let r=null;if(typeof t.aliases<"u"&&Array.isArray(t.aliases)&&(t.aliases.length===0?r=[null]:r=t.aliases),r!==null)for(const a of r)!a||a.length===0||e.aliases.push(a);const o=r!==null&&r.length>0;if(!(o&&r[0]===null)){const a=(o?r[0]:null)||i;(o||!e.name)&&(e.name=a)}t.configuration&&e.configurationFiles.push(t.configuration),t.icon&&e.icons.push(t.icon)}isRegisteredLanguageId(e){return e?JR.call(this._languages,e):!1}getRegisteredLanguageIds(){return Object.keys(this._languages)}getLanguageIdByLanguageName(e){const t=e.toLowerCase();return JR.call(this._lowercaseNameMap,t)?this._lowercaseNameMap[t]:null}getLanguageIdByMimeType(e){return e&&JR.call(this._mimeTypesMap,e)?this._mimeTypesMap[e]:null}guessLanguageIdByFilepathOrFirstLine(e,t){return!e&&!t?[]:mtt(e,t)}};FE.instanceCount=0;let qU=FE;const Kl=(n,e)=>n===e;function $P(n=Kl){return(e,t)=>dn(e,t,n)}function wtt(){return(n,e)=>n.equals(e)}function GU(n,e,t){if(t!==void 0){const i=n;return i==null||e===void 0||e===null?e===i:t(i,e)}else{const i=n;return(s,r)=>s==null||r===void 0||r===null?r===s:i(s,r)}}function jP(n,e){if(n===e)return!0;if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(!jP(n[t],e[t]))return!1;return!0}if(n&&typeof n=="object"&&e&&typeof e=="object"&&Object.getPrototypeOf(n)===Object.prototype&&Object.getPrototypeOf(e)===Object.prototype){const t=n,i=e,s=Object.keys(t),r=Object.keys(i),o=new Set(r);if(s.length!==r.length)return!1;for(const a of s)if(!o.has(a)||!jP(t[a],i[a]))return!1;return!0}return!1}class Wr{constructor(e,t,i){this.owner=e,this.debugNameSource=t,this.referenceFn=i}getDebugName(e){return Ctt(e,this)}}const Tle=new Map,YU=new WeakMap;function Ctt(n,e){const t=YU.get(n);if(t)return t;const i=ytt(n,e);if(i){let s=Tle.get(i)??0;s++,Tle.set(i,s);const r=s===1?i:`${i}#${s}`;return YU.set(n,r),r}}function ytt(n,e){const t=YU.get(n);if(t)return t;const i=e.owner?xtt(e.owner)+".":"";let s;const r=e.debugNameSource;if(r!==void 0)if(typeof r=="function"){if(s=r(),s!==void 0)return i+s}else return i+r;const o=e.referenceFn;if(o!==void 0&&(s=oQ(o),s!==void 0))return i+s;if(e.owner!==void 0){const a=Stt(e.owner,n);if(a!==void 0)return i+a}}function Stt(n,e){for(const t in n)if(n[t]===e)return t}const Rle=new Map,Ale=new WeakMap;function xtt(n){const e=Ale.get(n);if(e)return e;const t=Ltt(n);let i=Rle.get(t)??0;i++,Rle.set(t,i);const s=i===1?t:`${t}#${i}`;return Ale.set(n,s),s}function Ltt(n){const e=n.constructor;return e?e.name:"Object"}function oQ(n){const e=n.toString(),i=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(e),s=i?i[1]:void 0;return s==null?void 0:s.trim()}let ktt;function R1e(){return ktt}let A1e;function Ett(n){A1e=n}let M1e;function Itt(n){M1e=n}let ZU;function Dtt(n){ZU=n}class P1e{get TChange(){return null}reportChanges(){this.get()}read(e){return e?e.readObservable(this):this.get()}map(e,t){const i=t===void 0?void 0:e,s=t===void 0?e:t;return ZU({owner:i,debugName:()=>{const r=oQ(s);if(r!==void 0)return r;const a=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1(?:\??)\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(s.toString());if(a)return`${this.debugName}.${a[2]}`;if(!i)return`${this.debugName} (mapped)`},debugReferenceFn:s},r=>s(this.read(r),r))}flatten(){return ZU({owner:void 0,debugName:()=>`${this.debugName} (flattened)`},e=>this.read(e).read(e))}recomputeInitiallyAndOnChange(e,t){return e.add(A1e(this,t)),this}keepObserved(e){return e.add(M1e(this)),this}}class Ox extends P1e{constructor(){super(...arguments),this.observers=new Set}addObserver(e){const t=this.observers.size;this.observers.add(e),t===0&&this.onFirstObserverAdded()}removeObserver(e){this.observers.delete(e)&&this.observers.size===0&&this.onLastObserverRemoved()}onFirstObserverAdded(){}onLastObserverRemoved(){}}function pn(n,e){const t=new Fx(n,e);try{n(t)}finally{t.finish()}}let eA;function gk(n){if(eA)n(eA);else{const e=new Fx(n,void 0);eA=e;try{n(e)}finally{e.finish(),eA=void 0}}}async function O1e(n,e){const t=new Fx(n,e);try{await n(t)}finally{t.finish()}}function _0(n,e,t){n?e(n):pn(e,t)}class Fx{constructor(e,t){this._fn=e,this._getDebugName=t,this.updatingObservers=[]}getDebugName(){return this._getDebugName?this._getDebugName():oQ(this._fn)}updateObserver(e,t){this.updatingObservers.push({observer:e,observable:t}),e.beginUpdate(t)}finish(){const e=this.updatingObservers;for(let t=0;t<e.length;t++){const{observer:i,observable:s}=e[t];i.endUpdate(s)}this.updatingObservers=null}}function Nt(n,e){let t;return typeof n=="string"?t=new Wr(void 0,n,void 0):t=new Wr(n,void 0,void 0),new aQ(t,e,Kl)}class aQ extends Ox{get debugName(){return this._debugNameData.getDebugName(this)??"ObservableValue"}constructor(e,t,i){super(),this._debugNameData=e,this._equalityComparator=i,this._value=t}get(){return this._value}set(e,t,i){var r;if(i===void 0&&this._equalityComparator(this._value,e))return;let s;t||(t=s=new Fx(()=>{},()=>`Setting ${this.debugName}`));try{const o=this._value;this._setValue(e),(r=R1e())==null||r.handleObservableChanged(this,{oldValue:o,newValue:e,change:i,didChange:!0,hadValue:!0});for(const a of this.observers)t.updateObserver(a,this),a.handleChange(this,i)}finally{s&&s.finish()}}toString(){return`${this.debugName}: ${this._value}`}_setValue(e){this._value=e}}function sD(n,e){let t;return typeof n=="string"?t=new Wr(void 0,n,void 0):t=new Wr(n,void 0,void 0),new Ntt(t,e,Kl)}class Ntt extends aQ{_setValue(e){this._value!==e&&(this._value&&this._value.dispose(),this._value=e)}dispose(){var e;(e=this._value)==null||e.dispose()}}function Ke(n,e){return e!==void 0?new v0(new Wr(n,void 0,e),e,void 0,void 0,void 0,Kl):new v0(new Wr(void 0,void 0,n),n,void 0,void 0,void 0,Kl)}function KN(n,e,t){return new Ttt(new Wr(n,void 0,e),e,void 0,void 0,void 0,Kl,t)}function Il(n,e){return new v0(new Wr(n.owner,n.debugName,n.debugReferenceFn),e,void 0,void 0,n.onLastObserverRemoved,n.equalsFn??Kl)}Dtt(Il);function F1e(n,e){return new v0(new Wr(n.owner,n.debugName,void 0),e,n.createEmptyChangeSummary,n.handleChange,void 0,n.equalityComparer??Kl)}function sv(n,e){let t,i;e===void 0?(t=n,i=void 0):(i=n,t=e);const s=new ue;return new v0(new Wr(i,void 0,t),r=>(s.clear(),t(r,s)),void 0,void 0,()=>s.dispose(),Kl)}function io(n,e){let t,i;e===void 0?(t=n,i=void 0):(i=n,t=e);let s;return new v0(new Wr(i,void 0,t),r=>{s?s.clear():s=new ue;const o=t(r);return o&&s.add(o),o},void 0,void 0,()=>{s&&(s.dispose(),s=void 0)},Kl)}class v0 extends Ox{get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}constructor(e,t,i,s,r=void 0,o){var a;super(),this._debugNameData=e,this._computeFn=t,this.createChangeSummary=i,this._handleChange=s,this._handleLastObserverRemoved=r,this._equalityComparator=o,this.state=0,this.value=void 0,this.updateCount=0,this.dependencies=new Set,this.dependenciesToBeRemoved=new Set,this.changeSummary=void 0,this.changeSummary=(a=this.createChangeSummary)==null?void 0:a.call(this)}onLastObserverRemoved(){var e;this.state=0,this.value=void 0;for(const t of this.dependencies)t.removeObserver(this);this.dependencies.clear(),(e=this._handleLastObserverRemoved)==null||e.call(this)}get(){var e;if(this.observers.size===0){const t=this._computeFn(this,(e=this.createChangeSummary)==null?void 0:e.call(this));return this.onLastObserverRemoved(),t}else{do{if(this.state===1){for(const t of this.dependencies)if(t.reportChanges(),this.state===2)break}this.state===1&&(this.state=3),this._recomputeIfNeeded()}while(this.state!==3);return this.value}}_recomputeIfNeeded(){var o;if(this.state===3)return;const e=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=e;const t=this.state!==0,i=this.value;this.state=3;const s=this.changeSummary;this.changeSummary=(o=this.createChangeSummary)==null?void 0:o.call(this);try{this.value=this._computeFn(this,s)}finally{for(const a of this.dependenciesToBeRemoved)a.removeObserver(this);this.dependenciesToBeRemoved.clear()}if(t&&!this._equalityComparator(i,this.value))for(const a of this.observers)a.handleChange(this,void 0)}toString(){return`LazyDerived<${this.debugName}>`}beginUpdate(e){this.updateCount++;const t=this.updateCount===1;if(this.state===3&&(this.state=1,!t))for(const i of this.observers)i.handlePossibleChange(this);if(t)for(const i of this.observers)i.beginUpdate(this)}endUpdate(e){if(this.updateCount--,this.updateCount===0){const t=[...this.observers];for(const i of t)i.endUpdate(this)}h0(()=>this.updateCount>=0)}handlePossibleChange(e){if(this.state===3&&this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)){this.state=1;for(const t of this.observers)t.handlePossibleChange(this)}}handleChange(e,t){if(this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)){const i=this._handleChange?this._handleChange({changedObservable:e,change:t,didChange:r=>r===e},this.changeSummary):!0,s=this.state===3;if(i&&(this.state===1||s)&&(this.state=2,s))for(const r of this.observers)r.handlePossibleChange(this)}}readObservable(e){e.addObserver(this);const t=e.get();return this.dependencies.add(e),this.dependenciesToBeRemoved.delete(e),t}addObserver(e){const t=!this.observers.has(e)&&this.updateCount>0;super.addObserver(e),t&&e.beginUpdate(this)}removeObserver(e){const t=this.observers.has(e)&&this.updateCount>0;super.removeObserver(e),t&&e.endUpdate(this)}}class Ttt extends v0{constructor(e,t,i,s,r=void 0,o,a){super(e,t,i,s,r,o),this.set=a}}function gt(n){return new CB(new Wr(void 0,void 0,n),n,void 0,void 0)}function qN(n,e){return new CB(new Wr(n.owner,n.debugName,n.debugReferenceFn??e),e,void 0,void 0)}function GN(n,e){return new CB(new Wr(n.owner,n.debugName,n.debugReferenceFn??e),e,n.createEmptyChangeSummary,n.handleChange)}function Rtt(n,e){const t=new ue,i=GN({owner:n.owner,debugName:n.debugName,debugReferenceFn:n.debugReferenceFn??e,createEmptyChangeSummary:n.createEmptyChangeSummary,handleChange:n.handleChange},(s,r)=>{t.clear(),e(s,r,t)});return Ye(()=>{i.dispose(),t.dispose()})}function da(n){const e=new ue,t=qN({owner:void 0,debugName:void 0,debugReferenceFn:n},i=>{e.clear(),n(i,e)});return Ye(()=>{t.dispose(),e.dispose()})}class CB{get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}constructor(e,t,i,s){var r;this._debugNameData=e,this._runFn=t,this.createChangeSummary=i,this._handleChange=s,this.state=2,this.updateCount=0,this.disposed=!1,this.dependencies=new Set,this.dependenciesToBeRemoved=new Set,this.changeSummary=(r=this.createChangeSummary)==null?void 0:r.call(this),this._runIfNeeded()}dispose(){this.disposed=!0;for(const e of this.dependencies)e.removeObserver(this);this.dependencies.clear()}_runIfNeeded(){var i,s;if(this.state===3)return;const e=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=e,this.state=3;const t=this.disposed;try{if(!t){(i=R1e())==null||i.handleAutorunTriggered(this);const r=this.changeSummary;this.changeSummary=(s=this.createChangeSummary)==null?void 0:s.call(this),this._runFn(this,r)}}finally{for(const r of this.dependenciesToBeRemoved)r.removeObserver(this);this.dependenciesToBeRemoved.clear()}}toString(){return`Autorun<${this.debugName}>`}beginUpdate(){this.state===3&&(this.state=1),this.updateCount++}endUpdate(){if(this.updateCount===1)do{if(this.state===1){this.state=3;for(const e of this.dependencies)if(e.reportChanges(),this.state===2)break}this._runIfNeeded()}while(this.state!==3);this.updateCount--,h0(()=>this.updateCount>=0)}handlePossibleChange(e){this.state===3&&this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)&&(this.state=1)}handleChange(e,t){this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)&&(!this._handleChange||this._handleChange({changedObservable:e,change:t,didChange:s=>s===e},this.changeSummary))&&(this.state=2)}readObservable(e){if(this.disposed)return e.get();e.addObserver(this);const t=e.get();return this.dependencies.add(e),this.dependenciesToBeRemoved.delete(e),t}}(function(n){n.Observer=CB})(gt||(gt={}));function Sc(n){return new Att(n)}class Att extends P1e{constructor(e){super(),this.value=e}get debugName(){return this.toString()}get(){return this.value}addObserver(e){}removeObserver(e){}toString(){return`Const: ${this.value}`}}function mi(...n){let e,t,i;return n.length===3?[e,t,i]=n:[t,i]=n,new km(new Wr(e,void 0,i),t,i,()=>km.globalTransaction,Kl)}function Mtt(n,e,t){return new km(new Wr(n.owner,n.debugName,n.debugReferenceFn??t),e,t,()=>km.globalTransaction,n.equalsFn??Kl)}class km extends Ox{constructor(e,t,i,s,r){super(),this._debugNameData=e,this.event=t,this._getValue=i,this._getTransaction=s,this._equalityComparator=r,this.hasValue=!1,this.handleEvent=o=>{const a=this._getValue(o),l=this.value;(!this.hasValue||!this._equalityComparator(l,a))&&(this.value=a,this.hasValue&&_0(this._getTransaction(),d=>{for(const u of this.observers)d.updateObserver(u,this),u.handleChange(this,void 0)},()=>{const d=this.getDebugName();return"Event fired"+(d?`: ${d}`:"")}),this.hasValue=!0)}}getDebugName(){return this._debugNameData.getDebugName(this)}get debugName(){const e=this.getDebugName();return"From Event"+(e?`: ${e}`:"")}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0,this.hasValue=!1,this.value=void 0}get(){return this.subscription?(this.hasValue||this.handleEvent(void 0),this.value):this._getValue(void 0)}}(function(n){n.Observer=km;function e(t,i){let s=!1;km.globalTransaction===void 0&&(km.globalTransaction=t,s=!0);try{i()}finally{s&&(km.globalTransaction=void 0)}}n.batchEventsGlobally=e})(mi||(mi={}));function pr(n,e){return new Ptt(n,e)}class Ptt extends Ox{constructor(e,t){super(),this.debugName=e,this.event=t,this.handleEvent=()=>{pn(i=>{for(const s of this.observers)i.updateObserver(s,this),s.handleChange(this,void 0)},()=>this.debugName)}}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0}get(){}}function Bx(n){return typeof n=="string"?new Mle(n):new Mle(void 0,n)}class Mle extends Ox{get debugName(){return new Wr(this._owner,this._debugName,void 0).getDebugName(this)??"Observable Signal"}toString(){return this.debugName}constructor(e,t){super(),this._debugName=e,this._owner=t}trigger(e,t){if(!e){pn(i=>{this.trigger(i,t)},()=>`Trigger signal ${this.debugName}`);return}for(const i of this.observers)e.updateObserver(i,this),i.handleChange(this,t)}get(){}}function Ott(n){const e=new B1e(!1,void 0);return n.addObserver(e),Ye(()=>{n.removeObserver(e)})}Itt(Ott);function Wx(n,e){const t=new B1e(!0,e);return n.addObserver(t),e?e(n.get()):n.reportChanges(),Ye(()=>{n.removeObserver(t)})}Ett(Wx);class B1e{constructor(e,t){this._forceRecompute=e,this._handleValue=t,this._counter=0}beginUpdate(e){this._counter++}endUpdate(e){this._counter--,this._counter===0&&this._forceRecompute&&(this._handleValue?this._handleValue(e.get()):e.reportChanges())}handlePossibleChange(e){}handleChange(e,t){}}function YN(n,e){let t;return Il({owner:n,debugReferenceFn:e},s=>(t=e(s,t),t))}function Ftt(n,e,t,i){let s=new Ple(t,i);return Il({debugReferenceFn:t,owner:n,onLastObserverRemoved:()=>{s.dispose(),s=new Ple(t)}},o=>(s.setItems(e.read(o)),s.getItems()))}class Ple{constructor(e,t){this._map=e,this._keySelector=t,this._cache=new Map,this._items=[]}dispose(){this._cache.forEach(e=>e.store.dispose()),this._cache.clear()}setItems(e){const t=[],i=new Set(this._cache.keys());for(const s of e){const r=this._keySelector?this._keySelector(s):s;let o=this._cache.get(r);if(o)i.delete(r);else{const a=new ue;o={out:this._map(s,a),store:a},this._cache.set(r,o)}t.push(o.out)}for(const s of i)this._cache.get(s).store.dispose(),this._cache.delete(s);this._items=t}getItems(){return this._items}}function Btt(n,e){return YN(n,(t,i)=>i??e(t))}class yB{static fromFn(e){return new yB(e())}constructor(e){this._value=Nt(this,void 0),this.promiseResult=this._value,this.promise=e.then(t=>(pn(i=>{this._value.set(new Ole(t,void 0),i)}),t),t=>{throw pn(i=>{this._value.set(new Ole(void 0,t),i)}),t})}}class Ole{constructor(e,t){this.data=e,this.error=t}}function W1e(n,e,t,i){return e||(e=s=>s!=null),new Promise((s,r)=>{let o=!0,a=!1;const l=n.map(d=>({isFinished:e(d),error:t?t(d):!1,state:d})),c=gt(d=>{const{isFinished:u,error:h,state:f}=l.read(d);(u||h)&&(o?a=!0:c.dispose(),h?r(h===!0?f:h):s(f))});if(i){const d=i.onCancellationRequested(()=>{c.dispose(),d.dispose(),r(new Dd)});if(i.isCancellationRequested){c.dispose(),d.dispose(),r(new Dd);return}}o=!1,a&&c.dispose()})}class Wtt extends Ox{get debugName(){return this._debugNameData.getDebugName(this)??"LazyObservableValue"}constructor(e,t,i){super(),this._debugNameData=e,this._equalityComparator=i,this._isUpToDate=!0,this._deltas=[],this._updateCounter=0,this._value=t}get(){return this._update(),this._value}_update(){if(!this._isUpToDate)if(this._isUpToDate=!0,this._deltas.length>0){for(const e of this.observers)for(const t of this._deltas)e.handleChange(this,t);this._deltas.length=0}else for(const e of this.observers)e.handleChange(this,void 0)}_beginUpdate(){if(this._updateCounter++,this._updateCounter===1)for(const e of this.observers)e.beginUpdate(this)}_endUpdate(){if(this._updateCounter--,this._updateCounter===0){this._update();const e=[...this.observers];for(const t of e)t.endUpdate(this)}}addObserver(e){const t=!this.observers.has(e)&&this._updateCounter>0;super.addObserver(e),t&&e.beginUpdate(this)}removeObserver(e){const t=this.observers.has(e)&&this._updateCounter>0;super.removeObserver(e),t&&e.endUpdate(this)}set(e,t,i){if(i===void 0&&this._equalityComparator(this._value,e))return;let s;t||(t=s=new Fx(()=>{},()=>`Setting ${this.debugName}`));try{if(this._isUpToDate=!1,this._setValue(e),i!==void 0&&this._deltas.push(i),t.updateObserver({beginUpdate:()=>this._beginUpdate(),endUpdate:()=>this._endUpdate(),handleChange:(r,o)=>{},handlePossibleChange:r=>{}},this),this._updateCounter>1)for(const r of this.observers)r.handlePossibleChange(this)}finally{s&&s.finish()}}toString(){return`${this.debugName}: ${this._value}`}_setValue(e){this._value=e}}function XU(n,e){return n.lazy?new Wtt(new Wr(n.owner,n.debugName,void 0),e,n.equalsFn??Kl):new aQ(new Wr(n.owner,n.debugName,void 0),e,n.equalsFn??Kl)}const BE=class BE extends ee{constructor(e=!1){super(),this._onDidRequestBasicLanguageFeatures=this._register(new X),this.onDidRequestBasicLanguageFeatures=this._onDidRequestBasicLanguageFeatures.event,this._onDidRequestRichLanguageFeatures=this._register(new X),this.onDidRequestRichLanguageFeatures=this._onDidRequestRichLanguageFeatures.event,this._onDidChange=this._register(new X({leakWarningThreshold:200})),this.onDidChange=this._onDidChange.event,this._requestedBasicLanguages=new Set,this._requestedRichLanguages=new Set,BE.instanceCount++,this._registry=this._register(new qU(!0,e)),this.languageIdCodec=this._registry.languageIdCodec,this._register(this._registry.onDidChange(()=>this._onDidChange.fire()))}dispose(){BE.instanceCount--,super.dispose()}isRegisteredLanguageId(e){return this._registry.isRegisteredLanguageId(e)}getLanguageIdByLanguageName(e){return this._registry.getLanguageIdByLanguageName(e)}getLanguageIdByMimeType(e){return this._registry.getLanguageIdByMimeType(e)}guessLanguageIdByFilepathOrFirstLine(e,t){const i=this._registry.guessLanguageIdByFilepathOrFirstLine(e,t);return zZ(i,null)}createById(e){return new Fle(this.onDidChange,()=>this._createAndGetLanguageIdentifier(e))}createByFilepathOrFirstLine(e,t){return new Fle(this.onDidChange,()=>{const i=this.guessLanguageIdByFilepathOrFirstLine(e,t);return this._createAndGetLanguageIdentifier(i)})}_createAndGetLanguageIdentifier(e){return(!e||!this.isRegisteredLanguageId(e))&&(e=Ro),e}requestBasicLanguageFeatures(e){this._requestedBasicLanguages.has(e)||(this._requestedBasicLanguages.add(e),this._onDidRequestBasicLanguageFeatures.fire(e))}requestRichLanguageFeatures(e){this._requestedRichLanguages.has(e)||(this._requestedRichLanguages.add(e),this.requestBasicLanguageFeatures(e),In.getOrCreate(e),this._onDidRequestRichLanguageFeatures.fire(e))}};BE.instanceCount=0;let QU=BE;class Fle{constructor(e,t){this._value=mi(this,e,()=>t()),this.onDidChange=Ee.fromObservable(this._value)}get languageId(){return this._value.get()}}const rD={RESOURCES:"ResourceURLs",DOWNLOAD_URL:"DownloadURL",FILES:"Files",TEXT:On.text,INTERNAL_URI_LIST:"application/vnd.code.uri-list"},Htt=()=>({get delay(){return-1},dispose:()=>{},showHover:()=>{}});let SB=Htt;const Vtt=new Wu(()=>SB("mouse",!1)),ztt=new Wu(()=>SB("element",!1));function Utt(n){SB=n}function Vo(n){return n==="element"?ztt.value:Vtt.value}function US(){return SB("element",!0)}let H1e={showHover:()=>{},hideHover:()=>{},showAndFocusLastHover:()=>{},setupManagedHover:()=>null,showManagedHover:()=>{}};function $tt(n){H1e=n}function Gu(){return H1e}class jtt{constructor(e){this.spliceables=e}splice(e,t,i){this.spliceables.forEach(s=>s.splice(e,t,i))}}class kv extends Error{constructor(e,t){super(`ListError [${e}] ${t}`)}}function Ble(n,e){const t=[];for(const i of e){if(n.start>=i.range.end)continue;if(n.end<i.range.start)break;const s=Ir.intersect(n,i.range);Ir.isEmpty(s)||t.push({range:s,size:i.size})}return t}function JU({start:n,end:e},t){return{start:n+t,end:e+t}}function Ktt(n){const e=[];let t=null;for(const i of n){const s=i.range.start,r=i.range.end,o=i.size;if(t&&o===t.size){t.range.end=r;continue}t={range:{start:s,end:r},size:o},e.push(t)}return e}function qtt(...n){return Ktt(n.reduce((e,t)=>e.concat(t),[]))}class Gtt{get paddingTop(){return this._paddingTop}set paddingTop(e){this._size=this._size+e-this._paddingTop,this._paddingTop=e}constructor(e){this.groups=[],this._size=0,this._paddingTop=0,this._paddingTop=e??0,this._size=this._paddingTop}splice(e,t,i=[]){const s=i.length-t,r=Ble({start:0,end:e},this.groups),o=Ble({start:e+t,end:Number.POSITIVE_INFINITY},this.groups).map(l=>({range:JU(l.range,s),size:l.size})),a=i.map((l,c)=>({range:{start:e+c,end:e+c+1},size:l.size}));this.groups=qtt(r,a,o),this._size=this._paddingTop+this.groups.reduce((l,c)=>l+c.size*(c.range.end-c.range.start),0)}get count(){const e=this.groups.length;return e?this.groups[e-1].range.end:0}get size(){return this._size}indexAt(e){if(e<0)return-1;if(e<this._paddingTop)return 0;let t=0,i=this._paddingTop;for(const s of this.groups){const r=s.range.end-s.range.start,o=i+r*s.size;if(e<o)return t+Math.floor((e-i)/s.size);t+=r,i=o}return t}indexAfter(e){return Math.min(this.indexAt(e)+1,this.count)}positionAt(e){if(e<0)return-1;let t=0,i=0;for(const s of this.groups){const r=s.range.end-s.range.start,o=i+r;if(e<o)return this._paddingTop+t+(e-i)*s.size;t+=r*s.size,i=o}return-1}}class Ytt{constructor(e){this.renderers=e,this.cache=new Map,this.transactionNodesPendingRemoval=new Set,this.inTransaction=!1}alloc(e){let t=this.getTemplateCache(e).pop(),i=!1;if(t)i=this.transactionNodesPendingRemoval.has(t.domNode),i&&this.transactionNodesPendingRemoval.delete(t.domNode);else{const s=xe(".monaco-list-row"),o=this.getRenderer(e).renderTemplate(s);t={domNode:s,templateId:e,templateData:o}}return{row:t,isReusingConnectedDomNode:i}}release(e){e&&this.releaseRow(e)}transact(e){if(this.inTransaction)throw new Error("Already in transaction");this.inTransaction=!0;try{e()}finally{for(const t of this.transactionNodesPendingRemoval)this.doRemoveNode(t);this.transactionNodesPendingRemoval.clear(),this.inTransaction=!1}}releaseRow(e){const{domNode:t,templateId:i}=e;t&&(this.inTransaction?this.transactionNodesPendingRemoval.add(t):this.doRemoveNode(t)),this.getTemplateCache(i).push(e)}doRemoveNode(e){e.classList.remove("scrolling"),e.remove()}getTemplateCache(e){let t=this.cache.get(e);return t||(t=[],this.cache.set(e,t)),t}dispose(){this.cache.forEach((e,t)=>{for(const i of e)this.getRenderer(t).disposeTemplate(i.templateData),i.templateData=null}),this.cache.clear(),this.transactionNodesPendingRemoval.clear()}getRenderer(e){const t=this.renderers.get(e);if(!t)throw new Error(`No renderer found for ${e}`);return t}}var fp=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const Ev={CurrentDragAndDropData:void 0},sh={useShadows:!0,verticalScrollMode:1,setRowLineHeight:!0,setRowHeight:!0,supportDynamicHeights:!1,dnd:{getDragElements(n){return[n]},getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){},dispose(){}},horizontalScrolling:!1,transformOptimization:!0,alwaysConsumeMouseWheel:!0};class ZN{constructor(e){this.elements=e}update(){}getData(){return this.elements}}class Ztt{constructor(e){this.elements=e}update(){}getData(){return this.elements}}class Xtt{constructor(){this.types=[],this.files=[]}update(e){if(e.types&&this.types.splice(0,this.types.length,...e.types),e.files){this.files.splice(0,this.files.length);for(let t=0;t<e.files.length;t++){const i=e.files.item(t);i&&(i.size||i.type)&&this.files.push(i)}}}getData(){return{types:this.types,files:this.files}}}function Qtt(n,e){return Array.isArray(n)&&Array.isArray(e)?dn(n,e):n===e}class Jtt{constructor(e){e!=null&&e.getSetSize?this.getSetSize=e.getSetSize.bind(e):this.getSetSize=(t,i,s)=>s,e!=null&&e.getPosInSet?this.getPosInSet=e.getPosInSet.bind(e):this.getPosInSet=(t,i)=>i+1,e!=null&&e.getRole?this.getRole=e.getRole.bind(e):this.getRole=t=>"listitem",e!=null&&e.isChecked?this.isChecked=e.isChecked.bind(e):this.isChecked=t=>{}}}const b4=class b4{get contentHeight(){return this.rangeMap.size}get onDidScroll(){return this.scrollableElement.onScroll}get scrollableElementDomNode(){return this.scrollableElement.getDomNode()}get horizontalScrolling(){return this._horizontalScrolling}set horizontalScrolling(e){if(e!==this._horizontalScrolling){if(e&&this.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");if(this._horizontalScrolling=e,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this._horizontalScrolling){for(const t of this.items)this.measureItemWidth(t);this.updateScrollWidth(),this.scrollableElement.setScrollDimensions({width:z9(this.domNode)}),this.rowsContainer.style.width=`${Math.max(this.scrollWidth||0,this.renderWidth)}px`}else this.scrollableElementWidthDelayer.cancel(),this.scrollableElement.setScrollDimensions({width:this.renderWidth,scrollWidth:this.renderWidth}),this.rowsContainer.style.width=""}}constructor(e,t,i,s=sh){var o,a;if(this.virtualDelegate=t,this.domId=`list_id_${++b4.InstanceCount}`,this.renderers=new Map,this.renderWidth=0,this._scrollHeight=0,this.scrollableElementUpdateDisposable=null,this.scrollableElementWidthDelayer=new Rc(50),this.splicing=!1,this.dragOverAnimationStopDisposable=ee.None,this.dragOverMouseY=0,this.canDrop=!1,this.currentDragFeedbackDisposable=ee.None,this.onDragLeaveTimeout=ee.None,this.disposables=new ue,this._onDidChangeContentHeight=new X,this._onDidChangeContentWidth=new X,this.onDidChangeContentHeight=Ee.latch(this._onDidChangeContentHeight.event,void 0,this.disposables),this._horizontalScrolling=!1,s.horizontalScrolling&&s.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");this.items=[],this.itemId=0,this.rangeMap=this.createRangeMap(s.paddingTop??0);for(const l of i)this.renderers.set(l.templateId,l);this.cache=this.disposables.add(new Ytt(this.renderers)),this.lastRenderTop=0,this.lastRenderHeight=0,this.domNode=document.createElement("div"),this.domNode.className="monaco-list",this.domNode.classList.add(this.domId),this.domNode.tabIndex=0,this.domNode.classList.toggle("mouse-support",typeof s.mouseSupport=="boolean"?s.mouseSupport:!0),this._horizontalScrolling=s.horizontalScrolling??sh.horizontalScrolling,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this.paddingBottom=typeof s.paddingBottom>"u"?0:s.paddingBottom,this.accessibilityProvider=new Jtt(s.accessibilityProvider),this.rowsContainer=document.createElement("div"),this.rowsContainer.className="monaco-list-rows",(s.transformOptimization??sh.transformOptimization)&&(this.rowsContainer.style.transform="translate3d(0px, 0px, 0px)",this.rowsContainer.style.overflow="hidden",this.rowsContainer.style.contain="strict"),this.disposables.add(Br.addTarget(this.rowsContainer)),this.scrollable=this.disposables.add(new Px({forceIntegerValues:!0,smoothScrollDuration:s.smoothScrolling??!1?125:0,scheduleAtNextAnimationFrame:l=>il(nt(this.domNode),l)})),this.scrollableElement=this.disposables.add(new hB(this.rowsContainer,{alwaysConsumeMouseWheel:s.alwaysConsumeMouseWheel??sh.alwaysConsumeMouseWheel,horizontal:1,vertical:s.verticalScrollMode??sh.verticalScrollMode,useShadows:s.useShadows??sh.useShadows,mouseWheelScrollSensitivity:s.mouseWheelScrollSensitivity,fastScrollSensitivity:s.fastScrollSensitivity,scrollByPage:s.scrollByPage},this.scrollable)),this.domNode.appendChild(this.scrollableElement.getDomNode()),e.appendChild(this.domNode),this.scrollableElement.onScroll(this.onScroll,this,this.disposables),this.disposables.add(re(this.rowsContainer,Hi.Change,l=>this.onTouchChange(l))),this.disposables.add(re(this.scrollableElement.getDomNode(),"scroll",l=>l.target.scrollTop=0)),this.disposables.add(re(this.domNode,"dragover",l=>this.onDragOver(this.toDragEvent(l)))),this.disposables.add(re(this.domNode,"drop",l=>this.onDrop(this.toDragEvent(l)))),this.disposables.add(re(this.domNode,"dragleave",l=>this.onDragLeave(this.toDragEvent(l)))),this.disposables.add(re(this.domNode,"dragend",l=>this.onDragEnd(l))),this.setRowLineHeight=s.setRowLineHeight??sh.setRowLineHeight,this.setRowHeight=s.setRowHeight??sh.setRowHeight,this.supportDynamicHeights=s.supportDynamicHeights??sh.supportDynamicHeights,this.dnd=s.dnd??this.disposables.add(sh.dnd),this.layout((o=s.initialSize)==null?void 0:o.height,(a=s.initialSize)==null?void 0:a.width)}updateOptions(e){e.paddingBottom!==void 0&&(this.paddingBottom=e.paddingBottom,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),e.smoothScrolling!==void 0&&this.scrollable.setSmoothScrollDuration(e.smoothScrolling?125:0),e.horizontalScrolling!==void 0&&(this.horizontalScrolling=e.horizontalScrolling);let t;if(e.scrollByPage!==void 0&&(t={...t??{},scrollByPage:e.scrollByPage}),e.mouseWheelScrollSensitivity!==void 0&&(t={...t??{},mouseWheelScrollSensitivity:e.mouseWheelScrollSensitivity}),e.fastScrollSensitivity!==void 0&&(t={...t??{},fastScrollSensitivity:e.fastScrollSensitivity}),t&&this.scrollableElement.updateOptions(t),e.paddingTop!==void 0&&e.paddingTop!==this.rangeMap.paddingTop){const i=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),s=e.paddingTop-this.rangeMap.paddingTop;this.rangeMap.paddingTop=e.paddingTop,this.render(i,Math.max(0,this.lastRenderTop+s),this.lastRenderHeight,void 0,void 0,!0),this.setScrollTop(this.lastRenderTop),this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.lastRenderTop,this.lastRenderHeight)}}createRangeMap(e){return new Gtt(e)}splice(e,t,i=[]){if(this.splicing)throw new Error("Can't run recursive splices.");this.splicing=!0;try{return this._splice(e,t,i)}finally{this.splicing=!1,this._onDidChangeContentHeight.fire(this.contentHeight)}}_splice(e,t,i=[]){const s=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),r={start:e,end:e+t},o=Ir.intersect(s,r),a=new Map;for(let x=o.end-1;x>=o.start;x--){const E=this.items[x];if(E.dragStartDisposable.dispose(),E.checkedDisposable.dispose(),E.row){let D=a.get(E.templateId);D||(D=[],a.set(E.templateId,D));const N=this.renderers.get(E.templateId);N&&N.disposeElement&&N.disposeElement(E.element,x,E.row.templateData,E.size),D.unshift(E.row)}E.row=null,E.stale=!0}const l={start:e+t,end:this.items.length},c=Ir.intersect(l,s),d=Ir.relativeComplement(l,s),u=i.map(x=>({id:String(this.itemId++),element:x,templateId:this.virtualDelegate.getTemplateId(x),size:this.virtualDelegate.getHeight(x),width:void 0,hasDynamicHeight:!!this.virtualDelegate.hasDynamicHeight&&this.virtualDelegate.hasDynamicHeight(x),lastDynamicHeightWidth:void 0,row:null,uri:void 0,dropTarget:!1,dragStartDisposable:ee.None,checkedDisposable:ee.None,stale:!1}));let h;e===0&&t>=this.items.length?(this.rangeMap=this.createRangeMap(this.rangeMap.paddingTop),this.rangeMap.splice(0,0,u),h=this.items,this.items=u):(this.rangeMap.splice(e,t,u),h=this.items.splice(e,t,...u));const f=i.length-t,g=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),p=JU(c,f),_=Ir.intersect(g,p);for(let x=_.start;x<_.end;x++)this.updateItemInDOM(this.items[x],x);const w=Ir.relativeComplement(p,g);for(const x of w)for(let E=x.start;E<x.end;E++)this.removeItemFromDOM(E);const b=d.map(x=>JU(x,f)),S=[{start:e,end:e+i.length},...b].map(x=>Ir.intersect(g,x)).reverse();for(const x of S)for(let E=x.end-1;E>=x.start;E--){const D=this.items[E],N=a.get(D.templateId),I=N==null?void 0:N.pop();this.insertItemInDOM(E,I)}for(const x of a.values())for(const E of x)this.cache.release(E);return this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight),h.map(x=>x.element)}eventuallyUpdateScrollDimensions(){this._scrollHeight=this.contentHeight,this.rowsContainer.style.height=`${this._scrollHeight}px`,this.scrollableElementUpdateDisposable||(this.scrollableElementUpdateDisposable=il(nt(this.domNode),()=>{this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight}),this.updateScrollWidth(),this.scrollableElementUpdateDisposable=null}))}eventuallyUpdateScrollWidth(){if(!this.horizontalScrolling){this.scrollableElementWidthDelayer.cancel();return}this.scrollableElementWidthDelayer.trigger(()=>this.updateScrollWidth())}updateScrollWidth(){if(!this.horizontalScrolling)return;let e=0;for(const t of this.items)typeof t.width<"u"&&(e=Math.max(e,t.width));this.scrollWidth=e,this.scrollableElement.setScrollDimensions({scrollWidth:e===0?0:e+10}),this._onDidChangeContentWidth.fire(this.scrollWidth)}rerender(){if(this.supportDynamicHeights){for(const e of this.items)e.lastDynamicHeightWidth=void 0;this._rerender(this.lastRenderTop,this.lastRenderHeight)}}get length(){return this.items.length}get renderHeight(){return this.scrollableElement.getScrollDimensions().height}get firstVisibleIndex(){return this.getRenderRange(this.lastRenderTop,this.lastRenderHeight).start}element(e){return this.items[e].element}indexOf(e){return this.items.findIndex(t=>t.element===e)}domElement(e){const t=this.items[e].row;return t&&t.domNode}elementHeight(e){return this.items[e].size}elementTop(e){return this.rangeMap.positionAt(e)}indexAt(e){return this.rangeMap.indexAt(e)}indexAfter(e){return this.rangeMap.indexAfter(e)}layout(e,t){const i={height:typeof e=="number"?e:vqe(this.domNode)};this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,i.scrollHeight=this.scrollHeight),this.scrollableElement.setScrollDimensions(i),typeof t<"u"&&(this.renderWidth=t,this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight)),this.horizontalScrolling&&this.scrollableElement.setScrollDimensions({width:typeof t=="number"?t:z9(this.domNode)})}render(e,t,i,s,r,o=!1){const a=this.getRenderRange(t,i),l=Ir.relativeComplement(a,e).reverse(),c=Ir.relativeComplement(e,a);if(o){const d=Ir.intersect(e,a);for(let u=d.start;u<d.end;u++)this.updateItemInDOM(this.items[u],u)}this.cache.transact(()=>{for(const d of c)for(let u=d.start;u<d.end;u++)this.removeItemFromDOM(u);for(const d of l)for(let u=d.end-1;u>=d.start;u--)this.insertItemInDOM(u)}),s!==void 0&&(this.rowsContainer.style.left=`-${s}px`),this.rowsContainer.style.top=`-${t}px`,this.horizontalScrolling&&r!==void 0&&(this.rowsContainer.style.width=`${Math.max(r,this.renderWidth)}px`),this.lastRenderTop=t,this.lastRenderHeight=i}insertItemInDOM(e,t){var l,c;const i=this.items[e];if(!i.row)if(t)i.row=t,i.stale=!0;else{const d=this.cache.alloc(i.templateId);i.row=d.row,i.stale||(i.stale=d.isReusingConnectedDomNode)}const s=this.accessibilityProvider.getRole(i.element)||"listitem";i.row.domNode.setAttribute("role",s);const r=this.accessibilityProvider.isChecked(i.element);if(typeof r=="boolean")i.row.domNode.setAttribute("aria-checked",String(!!r));else if(r){const d=u=>i.row.domNode.setAttribute("aria-checked",String(!!u));d(r.value),i.checkedDisposable=r.onDidChange(()=>d(r.value))}if(i.stale||!i.row.domNode.parentElement){const d=((c=(l=this.items.at(e+1))==null?void 0:l.row)==null?void 0:c.domNode)??null;(i.row.domNode.parentElement!==this.rowsContainer||i.row.domNode.nextElementSibling!==d)&&this.rowsContainer.insertBefore(i.row.domNode,d),i.stale=!1}this.updateItemInDOM(i,e);const o=this.renderers.get(i.templateId);if(!o)throw new Error(`No renderer found for template id ${i.templateId}`);o==null||o.renderElement(i.element,e,i.row.templateData,i.size);const a=this.dnd.getDragURI(i.element);i.dragStartDisposable.dispose(),i.row.domNode.draggable=!!a,a&&(i.dragStartDisposable=re(i.row.domNode,"dragstart",d=>this.onDragStart(i.element,a,d))),this.horizontalScrolling&&(this.measureItemWidth(i),this.eventuallyUpdateScrollWidth())}measureItemWidth(e){if(!e.row||!e.row.domNode)return;e.row.domNode.style.width="fit-content",e.width=z9(e.row.domNode);const t=nt(e.row.domNode).getComputedStyle(e.row.domNode);t.paddingLeft&&(e.width+=parseFloat(t.paddingLeft)),t.paddingRight&&(e.width+=parseFloat(t.paddingRight)),e.row.domNode.style.width=""}updateItemInDOM(e,t){e.row.domNode.style.top=`${this.elementTop(t)}px`,this.setRowHeight&&(e.row.domNode.style.height=`${e.size}px`),this.setRowLineHeight&&(e.row.domNode.style.lineHeight=`${e.size}px`),e.row.domNode.setAttribute("data-index",`${t}`),e.row.domNode.setAttribute("data-last-element",t===this.length-1?"true":"false"),e.row.domNode.setAttribute("data-parity",t%2===0?"even":"odd"),e.row.domNode.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(e.element,t,this.length))),e.row.domNode.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(e.element,t))),e.row.domNode.setAttribute("id",this.getElementDomId(t)),e.row.domNode.classList.toggle("drop-target",e.dropTarget)}removeItemFromDOM(e){const t=this.items[e];if(t.dragStartDisposable.dispose(),t.checkedDisposable.dispose(),t.row){const i=this.renderers.get(t.templateId);i&&i.disposeElement&&i.disposeElement(t.element,e,t.row.templateData,t.size),this.cache.release(t.row),t.row=null}this.horizontalScrolling&&this.eventuallyUpdateScrollWidth()}getScrollTop(){return this.scrollableElement.getScrollPosition().scrollTop}setScrollTop(e,t){this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),this.scrollableElement.setScrollPosition({scrollTop:e,reuseAnimation:t})}get scrollTop(){return this.getScrollTop()}set scrollTop(e){this.setScrollTop(e)}get scrollHeight(){return this._scrollHeight+(this.horizontalScrolling?10:0)+this.paddingBottom}get onMouseClick(){return Ee.map(this.disposables.add(new zt(this.domNode,"click")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseDblClick(){return Ee.map(this.disposables.add(new zt(this.domNode,"dblclick")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseMiddleClick(){return Ee.filter(Ee.map(this.disposables.add(new zt(this.domNode,"auxclick")).event,e=>this.toMouseEvent(e),this.disposables),e=>e.browserEvent.button===1,this.disposables)}get onMouseDown(){return Ee.map(this.disposables.add(new zt(this.domNode,"mousedown")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseOver(){return Ee.map(this.disposables.add(new zt(this.domNode,"mouseover")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseOut(){return Ee.map(this.disposables.add(new zt(this.domNode,"mouseout")).event,e=>this.toMouseEvent(e),this.disposables)}get onContextMenu(){return Ee.any(Ee.map(this.disposables.add(new zt(this.domNode,"contextmenu")).event,e=>this.toMouseEvent(e),this.disposables),Ee.map(this.disposables.add(new zt(this.domNode,Hi.Contextmenu)).event,e=>this.toGestureEvent(e),this.disposables))}get onTouchStart(){return Ee.map(this.disposables.add(new zt(this.domNode,"touchstart")).event,e=>this.toTouchEvent(e),this.disposables)}get onTap(){return Ee.map(this.disposables.add(new zt(this.rowsContainer,Hi.Tap)).event,e=>this.toGestureEvent(e),this.disposables)}toMouseEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),i=typeof t>"u"?void 0:this.items[t],s=i&&i.element;return{browserEvent:e,index:t,element:s}}toTouchEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),i=typeof t>"u"?void 0:this.items[t],s=i&&i.element;return{browserEvent:e,index:t,element:s}}toGestureEvent(e){const t=this.getItemIndexFromEventTarget(e.initialTarget||null),i=typeof t>"u"?void 0:this.items[t],s=i&&i.element;return{browserEvent:e,index:t,element:s}}toDragEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),i=typeof t>"u"?void 0:this.items[t],s=i&&i.element,r=this.getTargetSector(e,t);return{browserEvent:e,index:t,element:s,sector:r}}onScroll(e){try{const t=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight);this.render(t,e.scrollTop,e.height,e.scrollLeft,e.scrollWidth),this.supportDynamicHeights&&this._rerender(e.scrollTop,e.height,e.inSmoothScrolling)}catch(t){throw console.error("Got bad scroll event:",e),t}}onTouchChange(e){e.preventDefault(),e.stopPropagation(),this.scrollTop-=e.translationY}onDragStart(e,t,i){var r,o;if(!i.dataTransfer)return;const s=this.dnd.getDragElements(e);if(i.dataTransfer.effectAllowed="copyMove",i.dataTransfer.setData(rD.TEXT,t),i.dataTransfer.setDragImage){let a;this.dnd.getDragLabel&&(a=this.dnd.getDragLabel(s,i)),typeof a>"u"&&(a=String(s.length));const l=xe(".monaco-drag-image");l.textContent=a,(u=>{for(;u&&!u.classList.contains("monaco-workbench");)u=u.parentElement;return u||this.domNode.ownerDocument})(this.domNode).appendChild(l),i.dataTransfer.setDragImage(l,-10,-10),setTimeout(()=>l.remove(),0)}this.domNode.classList.add("dragging"),this.currentDragData=new ZN(s),Ev.CurrentDragAndDropData=new Ztt(s),(o=(r=this.dnd).onDragStart)==null||o.call(r,this.currentDragData,i)}onDragOver(e){var r,o;if(e.browserEvent.preventDefault(),this.onDragLeaveTimeout.dispose(),Ev.CurrentDragAndDropData&&Ev.CurrentDragAndDropData.getData()==="vscode-ui"||(this.setupDragAndDropScrollTopAnimation(e.browserEvent),!e.browserEvent.dataTransfer))return!1;if(!this.currentDragData)if(Ev.CurrentDragAndDropData)this.currentDragData=Ev.CurrentDragAndDropData;else{if(!e.browserEvent.dataTransfer.types)return!1;this.currentDragData=new Xtt}const t=this.dnd.onDragOver(this.currentDragData,e.element,e.index,e.sector,e.browserEvent);if(this.canDrop=typeof t=="boolean"?t:t.accept,!this.canDrop)return this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),!1;e.browserEvent.dataTransfer.dropEffect=typeof t!="boolean"&&((r=t.effect)==null?void 0:r.type)===0?"copy":"move";let i;typeof t!="boolean"&&t.feedback?i=t.feedback:typeof e.index>"u"?i=[-1]:i=[e.index],i=qg(i).filter(a=>a>=-1&&a<this.length).sort((a,l)=>a-l),i=i[0]===-1?[-1]:i;let s=typeof t!="boolean"&&t.effect&&t.effect.position?t.effect.position:"drop-target";if(Qtt(this.currentDragFeedback,i)&&this.currentDragFeedbackPosition===s)return!0;if(this.currentDragFeedback=i,this.currentDragFeedbackPosition=s,this.currentDragFeedbackDisposable.dispose(),i[0]===-1)this.domNode.classList.add(s),this.rowsContainer.classList.add(s),this.currentDragFeedbackDisposable=Ye(()=>{this.domNode.classList.remove(s),this.rowsContainer.classList.remove(s)});else{if(i.length>1&&s!=="drop-target")throw new Error("Can't use multiple feedbacks with position different than 'over'");s==="drop-target-after"&&i[0]<this.length-1&&(i[0]+=1,s="drop-target-before");for(const a of i){const l=this.items[a];l.dropTarget=!0,(o=l.row)==null||o.domNode.classList.add(s)}this.currentDragFeedbackDisposable=Ye(()=>{var a;for(const l of i){const c=this.items[l];c.dropTarget=!1,(a=c.row)==null||a.domNode.classList.remove(s)}})}return!0}onDragLeave(e){var t,i;this.onDragLeaveTimeout.dispose(),this.onDragLeaveTimeout=T_(()=>this.clearDragOverFeedback(),100,this.disposables),this.currentDragData&&((i=(t=this.dnd).onDragLeave)==null||i.call(t,this.currentDragData,e.element,e.index,e.browserEvent))}onDrop(e){if(!this.canDrop)return;const t=this.currentDragData;this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,Ev.CurrentDragAndDropData=void 0,!(!t||!e.browserEvent.dataTransfer)&&(e.browserEvent.preventDefault(),t.update(e.browserEvent.dataTransfer),this.dnd.drop(t,e.element,e.index,e.sector,e.browserEvent))}onDragEnd(e){var t,i;this.canDrop=!1,this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,Ev.CurrentDragAndDropData=void 0,(i=(t=this.dnd).onDragEnd)==null||i.call(t,e)}clearDragOverFeedback(){this.currentDragFeedback=void 0,this.currentDragFeedbackPosition=void 0,this.currentDragFeedbackDisposable.dispose(),this.currentDragFeedbackDisposable=ee.None}setupDragAndDropScrollTopAnimation(e){if(!this.dragOverAnimationDisposable){const t=F0e(this.domNode).top;this.dragOverAnimationDisposable=Tqe(nt(this.domNode),this.animateDragAndDropScrollTop.bind(this,t))}this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationStopDisposable=T_(()=>{this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)},1e3,this.disposables),this.dragOverMouseY=e.pageY}animateDragAndDropScrollTop(e){if(this.dragOverMouseY===void 0)return;const t=this.dragOverMouseY-e,i=this.renderHeight-35;t<35?this.scrollTop+=Math.max(-14,Math.floor(.3*(t-35))):t>i&&(this.scrollTop+=Math.min(14,Math.floor(.3*(t-i))))}teardownDragAndDropScrollTopAnimation(){this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)}getTargetSector(e,t){if(t===void 0)return;const i=e.offsetY/this.items[t].size,s=Math.floor(i/.25);return wo(s,0,3)}getItemIndexFromEventTarget(e){const t=this.scrollableElement.getDomNode();let i=e;for(;(Ns(i)||xqe(i))&&i!==this.rowsContainer&&t.contains(i);){const s=i.getAttribute("data-index");if(s){const r=Number(s);if(!isNaN(r))return r}i=i.parentElement}}getRenderRange(e,t){return{start:this.rangeMap.indexAt(e),end:this.rangeMap.indexAfter(e+t-1)}}_rerender(e,t,i){const s=this.getRenderRange(e,t);let r,o;e===this.elementTop(s.start)?(r=s.start,o=0):s.end-s.start>1&&(r=s.start+1,o=this.elementTop(r)-e);let a=0;for(;;){const l=this.getRenderRange(e,t);let c=!1;for(let d=l.start;d<l.end;d++){const u=this.probeDynamicHeight(d);u!==0&&this.rangeMap.splice(d,1,[this.items[d]]),a+=u,c=c||u!==0}if(!c){a!==0&&this.eventuallyUpdateScrollDimensions();const d=Ir.relativeComplement(s,l);for(const h of d)for(let f=h.start;f<h.end;f++)this.items[f].row&&this.removeItemFromDOM(f);const u=Ir.relativeComplement(l,s).reverse();for(const h of u)for(let f=h.end-1;f>=h.start;f--)this.insertItemInDOM(f);for(let h=l.start;h<l.end;h++)this.items[h].row&&this.updateItemInDOM(this.items[h],h);if(typeof r=="number"){const h=this.scrollable.getFutureScrollPosition().scrollTop-e,f=this.elementTop(r)-o+h;this.setScrollTop(f,i)}this._onDidChangeContentHeight.fire(this.contentHeight);return}}}probeDynamicHeight(e){var o,a,l;const t=this.items[e];if(this.virtualDelegate.getDynamicHeight){const c=this.virtualDelegate.getDynamicHeight(t.element);if(c!==null){const d=t.size;return t.size=c,t.lastDynamicHeightWidth=this.renderWidth,c-d}}if(!t.hasDynamicHeight||t.lastDynamicHeightWidth===this.renderWidth||this.virtualDelegate.hasDynamicHeight&&!this.virtualDelegate.hasDynamicHeight(t.element))return 0;const i=t.size;if(t.row)return t.row.domNode.style.height="",t.size=t.row.domNode.offsetHeight,t.size===0&&!Es(t.row.domNode,nt(t.row.domNode).document.body)&&console.warn("Measuring item node that is not in DOM! Add ListView to the DOM before measuring row height!",new Error().stack),t.lastDynamicHeightWidth=this.renderWidth,t.size-i;const{row:s}=this.cache.alloc(t.templateId);s.domNode.style.height="",this.rowsContainer.appendChild(s.domNode);const r=this.renderers.get(t.templateId);if(!r)throw new li("Missing renderer for templateId: "+t.templateId);return r.renderElement(t.element,e,s.templateData,void 0),t.size=s.domNode.offsetHeight,(o=r.disposeElement)==null||o.call(r,t.element,e,s.templateData,void 0),(l=(a=this.virtualDelegate).setDynamicHeight)==null||l.call(a,t.element,t.size),t.lastDynamicHeightWidth=this.renderWidth,s.domNode.remove(),this.cache.release(s),t.size-i}getElementDomId(e){return`${this.domId}_${e}`}dispose(){var e,t,i;for(const s of this.items)if(s.dragStartDisposable.dispose(),s.checkedDisposable.dispose(),s.row){const r=this.renderers.get(s.row.templateId);r&&((e=r.disposeElement)==null||e.call(r,s.element,-1,s.row.templateData,void 0),r.disposeTemplate(s.row.templateData))}this.items=[],(t=this.domNode)==null||t.remove(),(i=this.dragOverAnimationDisposable)==null||i.dispose(),this.disposables.dispose()}};b4.InstanceCount=0;let Md=b4;fp([Kn],Md.prototype,"onMouseClick",null);fp([Kn],Md.prototype,"onMouseDblClick",null);fp([Kn],Md.prototype,"onMouseMiddleClick",null);fp([Kn],Md.prototype,"onMouseDown",null);fp([Kn],Md.prototype,"onMouseOver",null);fp([Kn],Md.prototype,"onMouseOut",null);fp([Kn],Md.prototype,"onContextMenu",null);fp([Kn],Md.prototype,"onTouchStart",null);fp([Kn],Md.prototype,"onTap",null);var rv=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};class eit{constructor(e){this.trait=e,this.renderedElements=[]}get templateId(){return`template:${this.trait.name}`}renderTemplate(e){return e}renderElement(e,t,i){const s=this.renderedElements.findIndex(r=>r.templateData===i);if(s>=0){const r=this.renderedElements[s];this.trait.unrender(i),r.index=t}else{const r={index:t,templateData:i};this.renderedElements.push(r)}this.trait.renderIndex(t,i)}splice(e,t,i){const s=[];for(const r of this.renderedElements)r.index<e?s.push(r):r.index>=e+t&&s.push({index:r.index+i-t,templateData:r.templateData});this.renderedElements=s}renderIndexes(e){for(const{index:t,templateData:i}of this.renderedElements)e.indexOf(t)>-1&&this.trait.renderIndex(t,i)}disposeTemplate(e){const t=this.renderedElements.findIndex(i=>i.templateData===e);t<0||this.renderedElements.splice(t,1)}}let KP=class{get name(){return this._trait}get renderer(){return new eit(this)}constructor(e){this._trait=e,this.indexes=[],this.sortedIndexes=[],this._onChange=new X,this.onChange=this._onChange.event}splice(e,t,i){const s=i.length-t,r=e+t,o=[];let a=0;for(;a<this.sortedIndexes.length&&this.sortedIndexes[a]<e;)o.push(this.sortedIndexes[a++]);for(let l=0;l<i.length;l++)i[l]&&o.push(l+e);for(;a<this.sortedIndexes.length&&this.sortedIndexes[a]>=r;)o.push(this.sortedIndexes[a++]+s);this.renderer.splice(e,t,i.length),this._set(o,o)}renderIndex(e,t){t.classList.toggle(this._trait,this.contains(e))}unrender(e){e.classList.remove(this._trait)}set(e,t){return this._set(e,[...e].sort(Hle),t)}_set(e,t,i){const s=this.indexes,r=this.sortedIndexes;this.indexes=e,this.sortedIndexes=t;const o=e$(r,e);return this.renderer.renderIndexes(o),this._onChange.fire({indexes:e,browserEvent:i}),s}get(){return this.indexes}contains(e){return kI(this.sortedIndexes,e,Hle)>=0}dispose(){Ti(this._onChange)}};rv([Kn],KP.prototype,"renderer",null);class tit extends KP{constructor(e){super("selected"),this.setAriaSelected=e}renderIndex(e,t){super.renderIndex(e,t),this.setAriaSelected&&(this.contains(e)?t.setAttribute("aria-selected","true"):t.setAttribute("aria-selected","false"))}}class w8{constructor(e,t,i){this.trait=e,this.view=t,this.identityProvider=i}splice(e,t,i){if(!this.identityProvider)return this.trait.splice(e,t,new Array(i.length).fill(!1));const s=this.trait.get().map(a=>this.identityProvider.getId(this.view.element(a)).toString());if(s.length===0)return this.trait.splice(e,t,new Array(i.length).fill(!1));const r=new Set(s),o=i.map(a=>r.has(this.identityProvider.getId(a).toString()));this.trait.splice(e,t,o)}}function Xm(n){return n.tagName==="INPUT"||n.tagName==="TEXTAREA"}function XN(n,e){return n.classList.contains(e)?!0:n.classList.contains("monaco-list")||!n.parentElement?!1:XN(n.parentElement,e)}function pk(n){return XN(n,"monaco-editor")}function iit(n){return XN(n,"monaco-custom-toggle")}function nit(n){return XN(n,"action-item")}function eE(n){return XN(n,"monaco-tree-sticky-row")}function oD(n){return n.classList.contains("monaco-tree-sticky-container")}function V1e(n){return n.tagName==="A"&&n.classList.contains("monaco-button")||n.tagName==="DIV"&&n.classList.contains("monaco-button-dropdown")?!0:n.classList.contains("monaco-list")||!n.parentElement?!1:V1e(n.parentElement)}class z1e{get onKeyDown(){return Ee.chain(this.disposables.add(new zt(this.view.domNode,"keydown")).event,e=>e.filter(t=>!Xm(t.target)).map(t=>new Oi(t)))}constructor(e,t,i){this.list=e,this.view=t,this.disposables=new ue,this.multipleSelectionDisposables=new ue,this.multipleSelectionSupport=i.multipleSelectionSupport,this.disposables.add(this.onKeyDown(s=>{switch(s.keyCode){case 3:return this.onEnter(s);case 16:return this.onUpArrow(s);case 18:return this.onDownArrow(s);case 11:return this.onPageUpArrow(s);case 12:return this.onPageDownArrow(s);case 9:return this.onEscape(s);case 31:this.multipleSelectionSupport&&(Bt?s.metaKey:s.ctrlKey)&&this.onCtrlA(s)}}))}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionSupport=e.multipleSelectionSupport)}onEnter(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(this.list.getFocus(),e.browserEvent)}onUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPrevious(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNext(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPreviousPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNextPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onCtrlA(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(ta(this.list.length),e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus()}onEscape(e){this.list.getSelection().length&&(e.preventDefault(),e.stopPropagation(),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus())}dispose(){this.disposables.dispose(),this.multipleSelectionDisposables.dispose()}}rv([Kn],z1e.prototype,"onKeyDown",null);var Fh;(function(n){n[n.Automatic=0]="Automatic",n[n.Trigger=1]="Trigger"})(Fh||(Fh={}));var E1;(function(n){n[n.Idle=0]="Idle",n[n.Typing=1]="Typing"})(E1||(E1={}));const sit=new class{mightProducePrintableCharacter(n){return n.ctrlKey||n.metaKey||n.altKey?!1:n.keyCode>=31&&n.keyCode<=56||n.keyCode>=21&&n.keyCode<=30||n.keyCode>=98&&n.keyCode<=107||n.keyCode>=85&&n.keyCode<=95}};class rit{constructor(e,t,i,s,r){this.list=e,this.view=t,this.keyboardNavigationLabelProvider=i,this.keyboardNavigationEventFilter=s,this.delegate=r,this.enabled=!1,this.state=E1.Idle,this.mode=Fh.Automatic,this.triggered=!1,this.previouslyFocused=-1,this.enabledDisposables=new ue,this.disposables=new ue,this.updateOptions(e.options)}updateOptions(e){e.typeNavigationEnabled??!0?this.enable():this.disable(),this.mode=e.typeNavigationMode??Fh.Automatic}enable(){if(this.enabled)return;let e=!1;const t=Ee.chain(this.enabledDisposables.add(new zt(this.view.domNode,"keydown")).event,r=>r.filter(o=>!Xm(o.target)).filter(()=>this.mode===Fh.Automatic||this.triggered).map(o=>new Oi(o)).filter(o=>e||this.keyboardNavigationEventFilter(o)).filter(o=>this.delegate.mightProducePrintableCharacter(o)).forEach(o=>$t.stop(o,!0)).map(o=>o.browserEvent.key)),i=Ee.debounce(t,()=>null,800,void 0,void 0,void 0,this.enabledDisposables);Ee.reduce(Ee.any(t,i),(r,o)=>o===null?null:(r||"")+o,void 0,this.enabledDisposables)(this.onInput,this,this.enabledDisposables),i(this.onClear,this,this.enabledDisposables),t(()=>e=!0,void 0,this.enabledDisposables),i(()=>e=!1,void 0,this.enabledDisposables),this.enabled=!0,this.triggered=!1}disable(){this.enabled&&(this.enabledDisposables.clear(),this.enabled=!1,this.triggered=!1)}onClear(){var t;const e=this.list.getFocus();if(e.length>0&&e[0]===this.previouslyFocused){const i=(t=this.list.options.accessibilityProvider)==null?void 0:t.getAriaLabel(this.list.element(e[0]));typeof i=="string"?Bo(i):i&&Bo(i.get())}this.previouslyFocused=-1}onInput(e){if(!e){this.state=E1.Idle,this.triggered=!1;return}const t=this.list.getFocus(),i=t.length>0?t[0]:0,s=this.state===E1.Idle?1:0;this.state=E1.Typing;for(let r=0;r<this.list.length;r++){const o=(i+r+s)%this.list.length,a=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(o)),l=a&&a.toString();if(this.list.options.typeNavigationEnabled){if(typeof l<"u"){if(JI(e,l)){this.previouslyFocused=i,this.list.setFocus([o]),this.list.reveal(o);return}const c=xJe(e,l);if(c&&c[0].end-c[0].start>1&&c.length===1){this.previouslyFocused=i,this.list.setFocus([o]),this.list.reveal(o);return}}}else if(typeof l>"u"||JI(e,l)){this.previouslyFocused=i,this.list.setFocus([o]),this.list.reveal(o);return}}}dispose(){this.disable(),this.enabledDisposables.dispose(),this.disposables.dispose()}}class oit{constructor(e,t){this.list=e,this.view=t,this.disposables=new ue;const i=Ee.chain(this.disposables.add(new zt(t.domNode,"keydown")).event,r=>r.filter(o=>!Xm(o.target)).map(o=>new Oi(o)));Ee.chain(i,r=>r.filter(o=>o.keyCode===2&&!o.ctrlKey&&!o.metaKey&&!o.shiftKey&&!o.altKey))(this.onTab,this,this.disposables)}onTab(e){if(e.target!==this.view.domNode)return;const t=this.list.getFocus();if(t.length===0)return;const i=this.view.domElement(t[0]);if(!i)return;const s=i.querySelector("[tabIndex]");if(!s||!Ns(s)||s.tabIndex===-1)return;const r=nt(s).getComputedStyle(s);r.visibility==="hidden"||r.display==="none"||(e.preventDefault(),e.stopPropagation(),s.focus())}dispose(){this.disposables.dispose()}}function U1e(n){return Bt?n.browserEvent.metaKey:n.browserEvent.ctrlKey}function $1e(n){return n.browserEvent.shiftKey}function ait(n){return gX(n)&&n.button===2}const Wle={isSelectionSingleChangeEvent:U1e,isSelectionRangeChangeEvent:$1e};class j1e{constructor(e){this.list=e,this.disposables=new ue,this._onPointer=new X,this.onPointer=this._onPointer.event,e.options.multipleSelectionSupport!==!1&&(this.multipleSelectionController=this.list.options.multipleSelectionController||Wle),this.mouseSupport=typeof e.options.mouseSupport>"u"||!!e.options.mouseSupport,this.mouseSupport&&(e.onMouseDown(this.onMouseDown,this,this.disposables),e.onContextMenu(this.onContextMenu,this,this.disposables),e.onMouseDblClick(this.onDoubleClick,this,this.disposables),e.onTouchStart(this.onMouseDown,this,this.disposables),this.disposables.add(Br.addTarget(e.getHTMLElement()))),Ee.any(e.onMouseClick,e.onMouseMiddleClick,e.onTap)(this.onViewPointer,this,this.disposables)}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionController=void 0,e.multipleSelectionSupport&&(this.multipleSelectionController=this.list.options.multipleSelectionController||Wle))}isSelectionSingleChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionSingleChangeEvent(e):!1}isSelectionRangeChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionRangeChangeEvent(e):!1}isSelectionChangeEvent(e){return this.isSelectionSingleChangeEvent(e)||this.isSelectionRangeChangeEvent(e)}onMouseDown(e){pk(e.browserEvent.target)||vr()!==e.browserEvent.target&&this.list.domFocus()}onContextMenu(e){if(Xm(e.browserEvent.target)||pk(e.browserEvent.target))return;const t=typeof e.index>"u"?[]:[e.index];this.list.setFocus(t,e.browserEvent)}onViewPointer(e){if(!this.mouseSupport||Xm(e.browserEvent.target)||pk(e.browserEvent.target)||e.browserEvent.isHandledByList)return;e.browserEvent.isHandledByList=!0;const t=e.index;if(typeof t>"u"){this.list.setFocus([],e.browserEvent),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0);return}if(this.isSelectionChangeEvent(e))return this.changeSelection(e);this.list.setFocus([t],e.browserEvent),this.list.setAnchor(t),ait(e.browserEvent)||this.list.setSelection([t],e.browserEvent),this._onPointer.fire(e)}onDoubleClick(e){if(Xm(e.browserEvent.target)||pk(e.browserEvent.target)||this.isSelectionChangeEvent(e)||e.browserEvent.isHandledByList)return;e.browserEvent.isHandledByList=!0;const t=this.list.getFocus();this.list.setSelection(t,e.browserEvent)}changeSelection(e){const t=e.index;let i=this.list.getAnchor();if(this.isSelectionRangeChangeEvent(e)){typeof i>"u"&&(i=this.list.getFocus()[0]??t,this.list.setAnchor(i));const s=Math.min(i,t),r=Math.max(i,t),o=ta(s,r+1),a=this.list.getSelection(),l=dit(e$(a,[i]),i);if(l.length===0)return;const c=e$(o,uit(a,l));this.list.setSelection(c,e.browserEvent),this.list.setFocus([t],e.browserEvent)}else if(this.isSelectionSingleChangeEvent(e)){const s=this.list.getSelection(),r=s.filter(o=>o!==t);this.list.setFocus([t]),this.list.setAnchor(t),s.length===r.length?this.list.setSelection([...r,t],e.browserEvent):this.list.setSelection(r,e.browserEvent)}}dispose(){this.disposables.dispose()}}class K1e{constructor(e,t){this.styleElement=e,this.selectorSuffix=t}style(e){const t=this.selectorSuffix&&`.${this.selectorSuffix}`,i=[];e.listBackground&&i.push(`.monaco-list${t} .monaco-list-rows { background: ${e.listBackground}; }`),e.listFocusBackground&&(i.push(`.monaco-list${t}:focus .monaco-list-row.focused { background-color: ${e.listFocusBackground}; }`),i.push(`.monaco-list${t}:focus .monaco-list-row.focused:hover { background-color: ${e.listFocusBackground}; }`)),e.listFocusForeground&&i.push(`.monaco-list${t}:focus .monaco-list-row.focused { color: ${e.listFocusForeground}; }`),e.listActiveSelectionBackground&&(i.push(`.monaco-list${t}:focus .monaco-list-row.selected { background-color: ${e.listActiveSelectionBackground}; }`),i.push(`.monaco-list${t}:focus .monaco-list-row.selected:hover { background-color: ${e.listActiveSelectionBackground}; }`)),e.listActiveSelectionForeground&&i.push(`.monaco-list${t}:focus .monaco-list-row.selected { color: ${e.listActiveSelectionForeground}; }`),e.listActiveSelectionIconForeground&&i.push(`.monaco-list${t}:focus .monaco-list-row.selected .codicon { color: ${e.listActiveSelectionIconForeground}; }`),e.listFocusAndSelectionBackground&&i.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.selected.focused { background-color: ${e.listFocusAndSelectionBackground}; }
			`),e.listFocusAndSelectionForeground&&i.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.selected.focused { color: ${e.listFocusAndSelectionForeground}; }
			`),e.listInactiveFocusForeground&&(i.push(`.monaco-list${t} .monaco-list-row.focused { color:  ${e.listInactiveFocusForeground}; }`),i.push(`.monaco-list${t} .monaco-list-row.focused:hover { color:  ${e.listInactiveFocusForeground}; }`)),e.listInactiveSelectionIconForeground&&i.push(`.monaco-list${t} .monaco-list-row.focused .codicon { color:  ${e.listInactiveSelectionIconForeground}; }`),e.listInactiveFocusBackground&&(i.push(`.monaco-list${t} .monaco-list-row.focused { background-color:  ${e.listInactiveFocusBackground}; }`),i.push(`.monaco-list${t} .monaco-list-row.focused:hover { background-color:  ${e.listInactiveFocusBackground}; }`)),e.listInactiveSelectionBackground&&(i.push(`.monaco-list${t} .monaco-list-row.selected { background-color:  ${e.listInactiveSelectionBackground}; }`),i.push(`.monaco-list${t} .monaco-list-row.selected:hover { background-color:  ${e.listInactiveSelectionBackground}; }`)),e.listInactiveSelectionForeground&&i.push(`.monaco-list${t} .monaco-list-row.selected { color: ${e.listInactiveSelectionForeground}; }`),e.listHoverBackground&&i.push(`.monaco-list${t}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { background-color: ${e.listHoverBackground}; }`),e.listHoverForeground&&i.push(`.monaco-list${t}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { color:  ${e.listHoverForeground}; }`);const s=Rg(e.listFocusAndSelectionOutline,Rg(e.listSelectionOutline,e.listFocusOutline??""));s&&i.push(`.monaco-list${t}:focus .monaco-list-row.focused.selected { outline: 1px solid ${s}; outline-offset: -1px;}`),e.listFocusOutline&&i.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
				.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
			`);const r=Rg(e.listSelectionOutline,e.listInactiveFocusOutline??"");r&&i.push(`.monaco-list${t} .monaco-list-row.focused.selected { outline: 1px dotted ${r}; outline-offset: -1px; }`),e.listSelectionOutline&&i.push(`.monaco-list${t} .monaco-list-row.selected { outline: 1px dotted ${e.listSelectionOutline}; outline-offset: -1px; }`),e.listInactiveFocusOutline&&i.push(`.monaco-list${t} .monaco-list-row.focused { outline: 1px dotted ${e.listInactiveFocusOutline}; outline-offset: -1px; }`),e.listHoverOutline&&i.push(`.monaco-list${t} .monaco-list-row:hover { outline: 1px dashed ${e.listHoverOutline}; outline-offset: -1px; }`),e.listDropOverBackground&&i.push(`
				.monaco-list${t}.drop-target,
				.monaco-list${t} .monaco-list-rows.drop-target,
				.monaco-list${t} .monaco-list-row.drop-target { background-color: ${e.listDropOverBackground} !important; color: inherit !important; }
			`),e.listDropBetweenBackground&&(i.push(`
			.monaco-list${t} .monaco-list-rows.drop-target-before .monaco-list-row:first-child::before,
			.monaco-list${t} .monaco-list-row.drop-target-before::before {
				content: ""; position: absolute; top: 0px; left: 0px; width: 100%; height: 1px;
				background-color: ${e.listDropBetweenBackground};
			}`),i.push(`
			.monaco-list${t} .monaco-list-rows.drop-target-after .monaco-list-row:last-child::after,
			.monaco-list${t} .monaco-list-row.drop-target-after::after {
				content: ""; position: absolute; bottom: 0px; left: 0px; width: 100%; height: 1px;
				background-color: ${e.listDropBetweenBackground};
			}`)),e.tableColumnsBorder&&i.push(`
				.monaco-table > .monaco-split-view2,
				.monaco-table > .monaco-split-view2 .monaco-sash.vertical::before,
				.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2,
				.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: ${e.tableColumnsBorder};
				}

				.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2,
				.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: transparent;
				}
			`),e.tableOddRowsBackgroundColor&&i.push(`
				.monaco-table .monaco-list-row[data-parity=odd]:not(.focused):not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(:focus) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(.focused) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr {
					background-color: ${e.tableOddRowsBackgroundColor};
				}
			`),this.styleElement.textContent=i.join(`
`)}}const lit={listFocusBackground:"#7FB0D0",listActiveSelectionBackground:"#0E639C",listActiveSelectionForeground:"#FFFFFF",listActiveSelectionIconForeground:"#FFFFFF",listFocusAndSelectionOutline:"#90C2F9",listFocusAndSelectionBackground:"#094771",listFocusAndSelectionForeground:"#FFFFFF",listInactiveSelectionBackground:"#3F3F46",listInactiveSelectionIconForeground:"#FFFFFF",listHoverBackground:"#2A2D2E",listDropOverBackground:"#383B3D",listDropBetweenBackground:"#EEEEEE",treeIndentGuidesStroke:"#a9a9a9",treeInactiveIndentGuidesStroke:ge.fromHex("#a9a9a9").transparent(.4).toString(),tableColumnsBorder:ge.fromHex("#cccccc").transparent(.2).toString(),tableOddRowsBackgroundColor:ge.fromHex("#cccccc").transparent(.04).toString(),listBackground:void 0,listFocusForeground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusForeground:void 0,listInactiveFocusBackground:void 0,listHoverForeground:void 0,listFocusOutline:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listHoverOutline:void 0,treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:void 0},cit={keyboardSupport:!0,mouseSupport:!0,multipleSelectionSupport:!0,dnd:{getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){},dispose(){}}};function dit(n,e){const t=n.indexOf(e);if(t===-1)return[];const i=[];let s=t-1;for(;s>=0&&n[s]===e-(t-s);)i.push(n[s--]);for(i.reverse(),s=t;s<n.length&&n[s]===e+(s-t);)i.push(n[s++]);return i}function e$(n,e){const t=[];let i=0,s=0;for(;i<n.length||s<e.length;)if(i>=n.length)t.push(e[s++]);else if(s>=e.length)t.push(n[i++]);else if(n[i]===e[s]){t.push(n[i]),i++,s++;continue}else n[i]<e[s]?t.push(n[i++]):t.push(e[s++]);return t}function uit(n,e){const t=[];let i=0,s=0;for(;i<n.length||s<e.length;)if(i>=n.length)t.push(e[s++]);else if(s>=e.length)t.push(n[i++]);else if(n[i]===e[s]){i++,s++;continue}else n[i]<e[s]?t.push(n[i++]):s++;return t}const Hle=(n,e)=>n-e;class hit{constructor(e,t){this._templateId=e,this.renderers=t}get templateId(){return this._templateId}renderTemplate(e){return this.renderers.map(t=>t.renderTemplate(e))}renderElement(e,t,i,s){let r=0;for(const o of this.renderers)o.renderElement(e,t,i[r++],s)}disposeElement(e,t,i,s){var o;let r=0;for(const a of this.renderers)(o=a.disposeElement)==null||o.call(a,e,t,i[r],s),r+=1}disposeTemplate(e){let t=0;for(const i of this.renderers)i.disposeTemplate(e[t++])}}class fit{constructor(e){this.accessibilityProvider=e,this.templateId="a18n"}renderTemplate(e){return{container:e,disposables:new ue}}renderElement(e,t,i){const s=this.accessibilityProvider.getAriaLabel(e),r=s&&typeof s!="string"?s:Sc(s);i.disposables.add(gt(a=>{this.setAriaLabel(a.readObservable(r),i.container)}));const o=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(e);typeof o=="number"?i.container.setAttribute("aria-level",`${o}`):i.container.removeAttribute("aria-level")}setAriaLabel(e,t){e?t.setAttribute("aria-label",e):t.removeAttribute("aria-label")}disposeElement(e,t,i,s){i.disposables.clear()}disposeTemplate(e){e.disposables.dispose()}}class git{constructor(e,t){this.list=e,this.dnd=t}getDragElements(e){const t=this.list.getSelectedElements();return t.indexOf(e)>-1?t:[e]}getDragURI(e){return this.dnd.getDragURI(e)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e,t)}onDragStart(e,t){var i,s;(s=(i=this.dnd).onDragStart)==null||s.call(i,e,t)}onDragOver(e,t,i,s,r){return this.dnd.onDragOver(e,t,i,s,r)}onDragLeave(e,t,i,s){var r,o;(o=(r=this.dnd).onDragLeave)==null||o.call(r,e,t,i,s)}onDragEnd(e){var t,i;(i=(t=this.dnd).onDragEnd)==null||i.call(t,e)}drop(e,t,i,s,r){this.dnd.drop(e,t,i,s,r)}dispose(){this.dnd.dispose()}}class Ql{get onDidChangeFocus(){return Ee.map(this.eventBufferer.wrapEvent(this.focus.onChange),e=>this.toListEvent(e),this.disposables)}get onDidChangeSelection(){return Ee.map(this.eventBufferer.wrapEvent(this.selection.onChange),e=>this.toListEvent(e),this.disposables)}get domId(){return this.view.domId}get onDidScroll(){return this.view.onDidScroll}get onMouseClick(){return this.view.onMouseClick}get onMouseDblClick(){return this.view.onMouseDblClick}get onMouseMiddleClick(){return this.view.onMouseMiddleClick}get onPointer(){return this.mouseController.onPointer}get onMouseDown(){return this.view.onMouseDown}get onMouseOver(){return this.view.onMouseOver}get onMouseOut(){return this.view.onMouseOut}get onTouchStart(){return this.view.onTouchStart}get onTap(){return this.view.onTap}get onContextMenu(){let e=!1;const t=Ee.chain(this.disposables.add(new zt(this.view.domNode,"keydown")).event,r=>r.map(o=>new Oi(o)).filter(o=>e=o.keyCode===58||o.shiftKey&&o.keyCode===68).map(o=>$t.stop(o,!0)).filter(()=>!1)),i=Ee.chain(this.disposables.add(new zt(this.view.domNode,"keyup")).event,r=>r.forEach(()=>e=!1).map(o=>new Oi(o)).filter(o=>o.keyCode===58||o.shiftKey&&o.keyCode===68).map(o=>$t.stop(o,!0)).map(({browserEvent:o})=>{const a=this.getFocus(),l=a.length?a[0]:void 0,c=typeof l<"u"?this.view.element(l):void 0,d=typeof l<"u"?this.view.domElement(l):this.view.domNode;return{index:l,element:c,anchor:d,browserEvent:o}})),s=Ee.chain(this.view.onContextMenu,r=>r.filter(o=>!e).map(({element:o,index:a,browserEvent:l})=>({element:o,index:a,anchor:new bd(nt(this.view.domNode),l),browserEvent:l})));return Ee.any(t,i,s)}get onKeyDown(){return this.disposables.add(new zt(this.view.domNode,"keydown")).event}get onDidFocus(){return Ee.signal(this.disposables.add(new zt(this.view.domNode,"focus",!0)).event)}get onDidBlur(){return Ee.signal(this.disposables.add(new zt(this.view.domNode,"blur",!0)).event)}constructor(e,t,i,s,r=cit){var c,d,u;this.user=e,this._options=r,this.focus=new KP("focused"),this.anchor=new KP("anchor"),this.eventBufferer=new TN,this._ariaLabel="",this.disposables=new ue,this._onDidDispose=new X,this.onDidDispose=this._onDidDispose.event;const o=this._options.accessibilityProvider&&this._options.accessibilityProvider.getWidgetRole?(c=this._options.accessibilityProvider)==null?void 0:c.getWidgetRole():"list";this.selection=new tit(o!=="listbox");const a=[this.focus.renderer,this.selection.renderer];this.accessibilityProvider=r.accessibilityProvider,this.accessibilityProvider&&(a.push(new fit(this.accessibilityProvider)),(u=(d=this.accessibilityProvider).onDidChangeActiveDescendant)==null||u.call(d,this.onDidChangeActiveDescendant,this,this.disposables)),s=s.map(h=>new hit(h.templateId,[...a,h]));const l={...r,dnd:r.dnd&&new git(this,r.dnd)};if(this.view=this.createListView(t,i,s,l),this.view.domNode.setAttribute("role",o),r.styleController)this.styleController=r.styleController(this.view.domId);else{const h=jl(this.view.domNode);this.styleController=new K1e(h,this.view.domId)}if(this.spliceable=new jtt([new w8(this.focus,this.view,r.identityProvider),new w8(this.selection,this.view,r.identityProvider),new w8(this.anchor,this.view,r.identityProvider),this.view]),this.disposables.add(this.focus),this.disposables.add(this.selection),this.disposables.add(this.anchor),this.disposables.add(this.view),this.disposables.add(this._onDidDispose),this.disposables.add(new oit(this,this.view)),(typeof r.keyboardSupport!="boolean"||r.keyboardSupport)&&(this.keyboardController=new z1e(this,this.view,r),this.disposables.add(this.keyboardController)),r.keyboardNavigationLabelProvider){const h=r.keyboardNavigationDelegate||sit;this.typeNavigationController=new rit(this,this.view,r.keyboardNavigationLabelProvider,r.keyboardNavigationEventFilter??(()=>!0),h),this.disposables.add(this.typeNavigationController)}this.mouseController=this.createMouseController(r),this.disposables.add(this.mouseController),this.onDidChangeFocus(this._onFocusChange,this,this.disposables),this.onDidChangeSelection(this._onSelectionChange,this,this.disposables),this.accessibilityProvider&&(this.ariaLabel=this.accessibilityProvider.getWidgetAriaLabel()),this._options.multipleSelectionSupport!==!1&&this.view.domNode.setAttribute("aria-multiselectable","true")}createListView(e,t,i,s){return new Md(e,t,i,s)}createMouseController(e){return new j1e(this)}updateOptions(e={}){var t,i;this._options={...this._options,...e},(t=this.typeNavigationController)==null||t.updateOptions(this._options),this._options.multipleSelectionController!==void 0&&(this._options.multipleSelectionSupport?this.view.domNode.setAttribute("aria-multiselectable","true"):this.view.domNode.removeAttribute("aria-multiselectable")),this.mouseController.updateOptions(e),(i=this.keyboardController)==null||i.updateOptions(e),this.view.updateOptions(e)}get options(){return this._options}splice(e,t,i=[]){if(e<0||e>this.view.length)throw new kv(this.user,`Invalid start index: ${e}`);if(t<0)throw new kv(this.user,`Invalid delete count: ${t}`);t===0&&i.length===0||this.eventBufferer.bufferEvents(()=>this.spliceable.splice(e,t,i))}rerender(){this.view.rerender()}element(e){return this.view.element(e)}indexOf(e){return this.view.indexOf(e)}indexAt(e){return this.view.indexAt(e)}get length(){return this.view.length}get contentHeight(){return this.view.contentHeight}get onDidChangeContentHeight(){return this.view.onDidChangeContentHeight}get scrollTop(){return this.view.getScrollTop()}set scrollTop(e){this.view.setScrollTop(e)}get scrollHeight(){return this.view.scrollHeight}get renderHeight(){return this.view.renderHeight}get firstVisibleIndex(){return this.view.firstVisibleIndex}get ariaLabel(){return this._ariaLabel}set ariaLabel(e){this._ariaLabel=e,this.view.domNode.setAttribute("aria-label",e)}domFocus(){this.view.domNode.focus({preventScroll:!0})}layout(e,t){this.view.layout(e,t)}setSelection(e,t){for(const i of e)if(i<0||i>=this.length)throw new kv(this.user,`Invalid index ${i}`);this.selection.set(e,t)}getSelection(){return this.selection.get()}getSelectedElements(){return this.getSelection().map(e=>this.view.element(e))}setAnchor(e){if(typeof e>"u"){this.anchor.set([]);return}if(e<0||e>=this.length)throw new kv(this.user,`Invalid index ${e}`);this.anchor.set([e])}getAnchor(){return zZ(this.anchor.get(),void 0)}getAnchorElement(){const e=this.getAnchor();return typeof e>"u"?void 0:this.element(e)}setFocus(e,t){for(const i of e)if(i<0||i>=this.length)throw new kv(this.user,`Invalid index ${i}`);this.focus.set(e,t)}focusNext(e=1,t=!1,i,s){if(this.length===0)return;const r=this.focus.get(),o=this.findNextIndex(r.length>0?r[0]+e:0,t,s);o>-1&&this.setFocus([o],i)}focusPrevious(e=1,t=!1,i,s){if(this.length===0)return;const r=this.focus.get(),o=this.findPreviousIndex(r.length>0?r[0]-e:0,t,s);o>-1&&this.setFocus([o],i)}async focusNextPage(e,t){let i=this.view.indexAt(this.view.getScrollTop()+this.view.renderHeight);i=i===0?0:i-1;const s=this.getFocus()[0];if(s!==i&&(s===void 0||i>s)){const r=this.findPreviousIndex(i,!1,t);r>-1&&s!==r?this.setFocus([r],e):this.setFocus([i],e)}else{const r=this.view.getScrollTop();let o=r+this.view.renderHeight;i>s&&(o-=this.view.elementHeight(i)),this.view.setScrollTop(o),this.view.getScrollTop()!==r&&(this.setFocus([]),await Xg(0),await this.focusNextPage(e,t))}}async focusPreviousPage(e,t,i=()=>0){let s;const r=i(),o=this.view.getScrollTop()+r;o===0?s=this.view.indexAt(o):s=this.view.indexAfter(o-1);const a=this.getFocus()[0];if(a!==s&&(a===void 0||a>=s)){const l=this.findNextIndex(s,!1,t);l>-1&&a!==l?this.setFocus([l],e):this.setFocus([s],e)}else{const l=o;this.view.setScrollTop(o-this.view.renderHeight-r),this.view.getScrollTop()+i()!==l&&(this.setFocus([]),await Xg(0),await this.focusPreviousPage(e,t,i))}}focusLast(e,t){if(this.length===0)return;const i=this.findPreviousIndex(this.length-1,!1,t);i>-1&&this.setFocus([i],e)}focusFirst(e,t){this.focusNth(0,e,t)}focusNth(e,t,i){if(this.length===0)return;const s=this.findNextIndex(e,!1,i);s>-1&&this.setFocus([s],t)}findNextIndex(e,t=!1,i){for(let s=0;s<this.length;s++){if(e>=this.length&&!t)return-1;if(e=e%this.length,!i||i(this.element(e)))return e;e++}return-1}findPreviousIndex(e,t=!1,i){for(let s=0;s<this.length;s++){if(e<0&&!t)return-1;if(e=(this.length+e%this.length)%this.length,!i||i(this.element(e)))return e;e--}return-1}getFocus(){return this.focus.get()}getFocusedElements(){return this.getFocus().map(e=>this.view.element(e))}reveal(e,t,i=0){if(e<0||e>=this.length)throw new kv(this.user,`Invalid index ${e}`);const s=this.view.getScrollTop(),r=this.view.elementTop(e),o=this.view.elementHeight(e);if(L_(t)){const a=o-this.view.renderHeight+i;this.view.setScrollTop(a*wo(t,0,1)+r-i)}else{const a=r+o,l=s+this.view.renderHeight;r<s+i&&a>=l||(r<s+i||a>=l&&o>=this.view.renderHeight?this.view.setScrollTop(r-i):a>=l&&this.view.setScrollTop(a-this.view.renderHeight))}}getRelativeTop(e,t=0){if(e<0||e>=this.length)throw new kv(this.user,`Invalid index ${e}`);const i=this.view.getScrollTop(),s=this.view.elementTop(e),r=this.view.elementHeight(e);if(s<i+t||s+r>i+this.view.renderHeight)return null;const o=r-this.view.renderHeight+t;return Math.abs((i+t-s)/o)}getHTMLElement(){return this.view.domNode}getScrollableElement(){return this.view.scrollableElementDomNode}getElementID(e){return this.view.getElementDomId(e)}getElementTop(e){return this.view.elementTop(e)}style(e){this.styleController.style(e)}toListEvent({indexes:e,browserEvent:t}){return{indexes:e,elements:e.map(i=>this.view.element(i)),browserEvent:t}}_onFocusChange(){const e=this.focus.get();this.view.domNode.classList.toggle("element-focused",e.length>0),this.onDidChangeActiveDescendant()}onDidChangeActiveDescendant(){var t;const e=this.focus.get();if(e.length>0){let i;(t=this.accessibilityProvider)!=null&&t.getActiveDescendantId&&(i=this.accessibilityProvider.getActiveDescendantId(this.view.element(e[0]))),this.view.domNode.setAttribute("aria-activedescendant",i||this.view.getElementDomId(e[0]))}else this.view.domNode.removeAttribute("aria-activedescendant")}_onSelectionChange(){const e=this.selection.get();this.view.domNode.classList.toggle("selection-none",e.length===0),this.view.domNode.classList.toggle("selection-single",e.length===1),this.view.domNode.classList.toggle("selection-multiple",e.length>1)}dispose(){this._onDidDispose.fire(),this.disposables.dispose(),this._onDidDispose.dispose()}}rv([Kn],Ql.prototype,"onDidChangeFocus",null);rv([Kn],Ql.prototype,"onDidChangeSelection",null);rv([Kn],Ql.prototype,"onContextMenu",null);rv([Kn],Ql.prototype,"onKeyDown",null);rv([Kn],Ql.prototype,"onDidFocus",null);rv([Kn],Ql.prototype,"onDidBlur",null);const Lb=xe,q1e="selectOption.entry.template";class pit{get templateId(){return q1e}renderTemplate(e){const t=Object.create(null);return t.root=e,t.text=_e(e,Lb(".option-text")),t.detail=_e(e,Lb(".option-detail")),t.decoratorRight=_e(e,Lb(".option-decorator-right")),t}renderElement(e,t,i){const s=i,r=e.text,o=e.detail,a=e.decoratorRight,l=e.isDisabled;s.text.textContent=r,s.detail.textContent=o||"",s.decoratorRight.innerText=a||"",l?s.root.classList.add("option-disabled"):s.root.classList.remove("option-disabled")}disposeTemplate(e){}}const vh=class vh extends ee{constructor(e,t,i,s,r){super(),this.options=[],this._currentSelection=0,this._hasDetails=!1,this._skipLayout=!1,this._sticky=!1,this._isVisible=!1,this.styles=s,this.selectBoxOptions=r||Object.create(null),typeof this.selectBoxOptions.minBottomMargin!="number"?this.selectBoxOptions.minBottomMargin=vh.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN:this.selectBoxOptions.minBottomMargin<0&&(this.selectBoxOptions.minBottomMargin=0),this.selectElement=document.createElement("select"),this.selectElement.className="monaco-select-box monaco-select-box-dropdown-padding",typeof this.selectBoxOptions.ariaLabel=="string"&&this.selectElement.setAttribute("aria-label",this.selectBoxOptions.ariaLabel),typeof this.selectBoxOptions.ariaDescription=="string"&&this.selectElement.setAttribute("aria-description",this.selectBoxOptions.ariaDescription),this._onDidSelect=new X,this._register(this._onDidSelect),this.registerListeners(),this.constructSelectDropDown(i),this.selected=t||0,e&&this.setOptions(e,t),this.initStyleSheet()}setTitle(e){!this._hover&&e?this._hover=this._register(Gu().setupManagedHover(Vo("mouse"),this.selectElement,e)):this._hover&&this._hover.update(e)}getHeight(){return 22}getTemplateId(){return q1e}constructSelectDropDown(e){this.contextViewProvider=e,this.selectDropDownContainer=xe(".monaco-select-box-dropdown-container"),this.selectDropDownContainer.classList.add("monaco-select-box-dropdown-padding"),this.selectionDetailsPane=_e(this.selectDropDownContainer,Lb(".select-box-details-pane"));const t=_e(this.selectDropDownContainer,Lb(".select-box-dropdown-container-width-control")),i=_e(t,Lb(".width-control-div"));this.widthControlElement=document.createElement("span"),this.widthControlElement.className="option-text-width-control",_e(i,this.widthControlElement),this._dropDownPosition=0,this.styleElement=jl(this.selectDropDownContainer),this.selectDropDownContainer.setAttribute("draggable","true"),this._register(re(this.selectDropDownContainer,Se.DRAG_START,s=>{$t.stop(s,!0)}))}registerListeners(){this._register(Cn(this.selectElement,"change",t=>{this.selected=t.target.selectedIndex,this._onDidSelect.fire({index:t.target.selectedIndex,selected:t.target.value}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)})),this._register(re(this.selectElement,Se.CLICK,t=>{$t.stop(t),this._isVisible?this.hideSelectDropDown(!0):this.showSelectDropDown()})),this._register(re(this.selectElement,Se.MOUSE_DOWN,t=>{$t.stop(t)}));let e;this._register(re(this.selectElement,"touchstart",t=>{e=this._isVisible})),this._register(re(this.selectElement,"touchend",t=>{$t.stop(t),e?this.hideSelectDropDown(!0):this.showSelectDropDown()})),this._register(re(this.selectElement,Se.KEY_DOWN,t=>{const i=new Oi(t);let s=!1;Bt?(i.keyCode===18||i.keyCode===16||i.keyCode===10||i.keyCode===3)&&(s=!0):(i.keyCode===18&&i.altKey||i.keyCode===16&&i.altKey||i.keyCode===10||i.keyCode===3)&&(s=!0),s&&(this.showSelectDropDown(),$t.stop(t,!0))}))}get onDidSelect(){return this._onDidSelect.event}setOptions(e,t){dn(this.options,e)||(this.options=e,this.selectElement.options.length=0,this._hasDetails=!1,this._cachedMaxDetailsHeight=void 0,this.options.forEach((i,s)=>{this.selectElement.add(this.createOption(i.text,s,i.isDisabled)),typeof i.description=="string"&&(this._hasDetails=!0)})),t!==void 0&&(this.select(t),this._currentSelection=this.selected)}setOptionsList(){var e;(e=this.selectList)==null||e.splice(0,this.selectList.length,this.options)}select(e){e>=0&&e<this.options.length?this.selected=e:e>this.options.length-1?this.select(this.options.length-1):this.selected<0&&(this.selected=0),this.selectElement.selectedIndex=this.selected,this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)}focus(){this.selectElement&&(this.selectElement.tabIndex=0,this.selectElement.focus())}blur(){this.selectElement&&(this.selectElement.tabIndex=-1,this.selectElement.blur())}setFocusable(e){this.selectElement.tabIndex=e?0:-1}render(e){this.container=e,e.classList.add("select-container"),e.appendChild(this.selectElement),this.styleSelectElement()}initStyleSheet(){const e=[];this.styles.listFocusBackground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { background-color: ${this.styles.listFocusBackground} !important; }`),this.styles.listFocusForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { color: ${this.styles.listFocusForeground} !important; }`),this.styles.decoratorRightForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.focused) .option-decorator-right { color: ${this.styles.decoratorRightForeground}; }`),this.styles.selectBackground&&this.styles.selectBorder&&this.styles.selectBorder!==this.styles.selectBackground?(e.push(`.monaco-select-box-dropdown-container { border: 1px solid ${this.styles.selectBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectBorder} } `)):this.styles.selectListBorder&&(e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectListBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectListBorder} } `)),this.styles.listHoverForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { color: ${this.styles.listHoverForeground} !important; }`),this.styles.listHoverBackground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { background-color: ${this.styles.listHoverBackground} !important; }`),this.styles.listFocusOutline&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { outline: 1.6px dotted ${this.styles.listFocusOutline} !important; outline-offset: -1.6px !important; }`),this.styles.listHoverOutline&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { outline: 1.6px dashed ${this.styles.listHoverOutline} !important; outline-offset: -1.6px !important; }`),e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled.focused { background-color: transparent !important; color: inherit !important; outline: none !important; }"),e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled:hover { background-color: transparent !important; color: inherit !important; outline: none !important; }"),this.styleElement.textContent=e.join(`
`)}styleSelectElement(){const e=this.styles.selectBackground??"",t=this.styles.selectForeground??"",i=this.styles.selectBorder??"";this.selectElement.style.backgroundColor=e,this.selectElement.style.color=t,this.selectElement.style.borderColor=i}styleList(){const e=this.styles.selectBackground??"",t=Rg(this.styles.selectListBackground,e);this.selectDropDownListContainer.style.backgroundColor=t,this.selectionDetailsPane.style.backgroundColor=t;const i=this.styles.focusBorder??"";this.selectDropDownContainer.style.outlineColor=i,this.selectDropDownContainer.style.outlineOffset="-1px",this.selectList.style(this.styles)}createOption(e,t,i){const s=document.createElement("option");return s.value=e,s.text=e,s.disabled=!!i,s}showSelectDropDown(){this.selectionDetailsPane.innerText="",!(!this.contextViewProvider||this._isVisible)&&(this.createSelectList(this.selectDropDownContainer),this.setOptionsList(),this.contextViewProvider.showContextView({getAnchor:()=>this.selectElement,render:e=>this.renderSelectDropDown(e,!0),layout:()=>{this.layoutSelectDropDown()},onHide:()=>{this.selectDropDownContainer.classList.remove("visible"),this.selectElement.classList.remove("synthetic-focus")},anchorPosition:this._dropDownPosition},this.selectBoxOptions.optionsAsChildren?this.container:void 0),this._isVisible=!0,this.hideSelectDropDown(!1),this.contextViewProvider.showContextView({getAnchor:()=>this.selectElement,render:e=>this.renderSelectDropDown(e),layout:()=>this.layoutSelectDropDown(),onHide:()=>{this.selectDropDownContainer.classList.remove("visible"),this.selectElement.classList.remove("synthetic-focus")},anchorPosition:this._dropDownPosition},this.selectBoxOptions.optionsAsChildren?this.container:void 0),this._currentSelection=this.selected,this._isVisible=!0,this.selectElement.setAttribute("aria-expanded","true"))}hideSelectDropDown(e){!this.contextViewProvider||!this._isVisible||(this._isVisible=!1,this.selectElement.setAttribute("aria-expanded","false"),e&&this.selectElement.focus(),this.contextViewProvider.hideContextView())}renderSelectDropDown(e,t){return e.appendChild(this.selectDropDownContainer),this.layoutSelectDropDown(t),{dispose:()=>{this.selectDropDownContainer.remove()}}}measureMaxDetailsHeight(){let e=0;return this.options.forEach((t,i)=>{this.updateDetail(i),this.selectionDetailsPane.offsetHeight>e&&(e=this.selectionDetailsPane.offsetHeight)}),e}layoutSelectDropDown(e){if(this._skipLayout)return!1;if(this.selectList){this.selectDropDownContainer.classList.add("visible");const t=nt(this.selectElement),i=Fn(this.selectElement),s=nt(this.selectElement).getComputedStyle(this.selectElement),r=parseFloat(s.getPropertyValue("--dropdown-padding-top"))+parseFloat(s.getPropertyValue("--dropdown-padding-bottom")),o=t.innerHeight-i.top-i.height-(this.selectBoxOptions.minBottomMargin||0),a=i.top-vh.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN,l=this.selectElement.offsetWidth,c=this.setWidthControlElement(this.widthControlElement),d=Math.max(c,Math.round(l)).toString()+"px";this.selectDropDownContainer.style.width=d,this.selectList.getHTMLElement().style.height="",this.selectList.layout();let u=this.selectList.contentHeight;this._hasDetails&&this._cachedMaxDetailsHeight===void 0&&(this._cachedMaxDetailsHeight=this.measureMaxDetailsHeight());const h=this._hasDetails?this._cachedMaxDetailsHeight:0,f=u+r+h,g=Math.floor((o-r-h)/this.getHeight()),p=Math.floor((a-r-h)/this.getHeight());if(e)return i.top+i.height>t.innerHeight-22||i.top<vh.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN||g<1&&p<1?!1:(g<vh.DEFAULT_MINIMUM_VISIBLE_OPTIONS&&p>g&&this.options.length>g?(this._dropDownPosition=1,this.selectDropDownListContainer.remove(),this.selectionDetailsPane.remove(),this.selectDropDownContainer.appendChild(this.selectionDetailsPane),this.selectDropDownContainer.appendChild(this.selectDropDownListContainer),this.selectionDetailsPane.classList.remove("border-top"),this.selectionDetailsPane.classList.add("border-bottom")):(this._dropDownPosition=0,this.selectDropDownListContainer.remove(),this.selectionDetailsPane.remove(),this.selectDropDownContainer.appendChild(this.selectDropDownListContainer),this.selectDropDownContainer.appendChild(this.selectionDetailsPane),this.selectionDetailsPane.classList.remove("border-bottom"),this.selectionDetailsPane.classList.add("border-top")),!0);if(i.top+i.height>t.innerHeight-22||i.top<vh.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN||this._dropDownPosition===0&&g<1||this._dropDownPosition===1&&p<1)return this.hideSelectDropDown(!0),!1;if(this._dropDownPosition===0){if(this._isVisible&&g+p<1)return this.hideSelectDropDown(!0),!1;f>o&&(u=g*this.getHeight())}else f>a&&(u=p*this.getHeight());return this.selectList.layout(u),this.selectList.domFocus(),this.selectList.length>0&&(this.selectList.setFocus([this.selected||0]),this.selectList.reveal(this.selectList.getFocus()[0]||0)),this._hasDetails?(this.selectList.getHTMLElement().style.height=u+r+"px",this.selectDropDownContainer.style.height=""):this.selectDropDownContainer.style.height=u+r+"px",this.updateDetail(this.selected),this.selectDropDownContainer.style.width=d,this.selectDropDownListContainer.setAttribute("tabindex","0"),this.selectElement.classList.add("synthetic-focus"),this.selectDropDownContainer.classList.add("synthetic-focus"),!0}else return!1}setWidthControlElement(e){let t=0;if(e){let i=0,s=0;this.options.forEach((r,o)=>{const a=r.detail?r.detail.length:0,l=r.decoratorRight?r.decoratorRight.length:0,c=r.text.length+a+l;c>s&&(i=o,s=c)}),e.textContent=this.options[i].text+(this.options[i].decoratorRight?this.options[i].decoratorRight+" ":""),t=Pa(e)}return t}createSelectList(e){if(this.selectList)return;this.selectDropDownListContainer=_e(e,Lb(".select-box-dropdown-list-container")),this.listRenderer=new pit,this.selectList=this._register(new Ql("SelectBoxCustom",this.selectDropDownListContainer,this,[this.listRenderer],{useShadows:!1,verticalScrollMode:3,keyboardSupport:!1,mouseSupport:!1,accessibilityProvider:{getAriaLabel:s=>{let r=s.text;return s.detail&&(r+=`. ${s.detail}`),s.decoratorRight&&(r+=`. ${s.decoratorRight}`),s.description&&(r+=`. ${s.description}`),r},getWidgetAriaLabel:()=>v({key:"selectBox",comment:["Behave like native select dropdown element."]},"Select Box"),getRole:()=>Bt?"":"option",getWidgetRole:()=>"listbox"}})),this.selectBoxOptions.ariaLabel&&(this.selectList.ariaLabel=this.selectBoxOptions.ariaLabel);const t=this._register(new zt(this.selectDropDownListContainer,"keydown")),i=Ee.chain(t.event,s=>s.filter(()=>this.selectList.length>0).map(r=>new Oi(r)));this._register(Ee.chain(i,s=>s.filter(r=>r.keyCode===3))(this.onEnter,this)),this._register(Ee.chain(i,s=>s.filter(r=>r.keyCode===2))(this.onEnter,this)),this._register(Ee.chain(i,s=>s.filter(r=>r.keyCode===9))(this.onEscape,this)),this._register(Ee.chain(i,s=>s.filter(r=>r.keyCode===16))(this.onUpArrow,this)),this._register(Ee.chain(i,s=>s.filter(r=>r.keyCode===18))(this.onDownArrow,this)),this._register(Ee.chain(i,s=>s.filter(r=>r.keyCode===12))(this.onPageDown,this)),this._register(Ee.chain(i,s=>s.filter(r=>r.keyCode===11))(this.onPageUp,this)),this._register(Ee.chain(i,s=>s.filter(r=>r.keyCode===14))(this.onHome,this)),this._register(Ee.chain(i,s=>s.filter(r=>r.keyCode===13))(this.onEnd,this)),this._register(Ee.chain(i,s=>s.filter(r=>r.keyCode>=21&&r.keyCode<=56||r.keyCode>=85&&r.keyCode<=113))(this.onCharacter,this)),this._register(re(this.selectList.getHTMLElement(),Se.POINTER_UP,s=>this.onPointerUp(s))),this._register(this.selectList.onMouseOver(s=>typeof s.index<"u"&&this.selectList.setFocus([s.index]))),this._register(this.selectList.onDidChangeFocus(s=>this.onListFocus(s))),this._register(re(this.selectDropDownContainer,Se.FOCUS_OUT,s=>{!this._isVisible||Es(s.relatedTarget,this.selectDropDownContainer)||this.onListBlur()})),this.selectList.getHTMLElement().setAttribute("aria-label",this.selectBoxOptions.ariaLabel||""),this.selectList.getHTMLElement().setAttribute("aria-expanded","true"),this.styleList()}onPointerUp(e){if(!this.selectList.length)return;$t.stop(e);const t=e.target;if(!t||t.classList.contains("slider"))return;const i=t.closest(".monaco-list-row");if(!i)return;const s=Number(i.getAttribute("data-index")),r=i.classList.contains("option-disabled");s>=0&&s<this.options.length&&!r&&(this.selected=s,this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0]),this.selected!==this._currentSelection&&(this._currentSelection=this.selected,this._onDidSelect.fire({index:this.selectElement.selectedIndex,selected:this.options[this.selected].text}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)),this.hideSelectDropDown(!0))}onListBlur(){this._sticky||(this.selected!==this._currentSelection&&this.select(this._currentSelection),this.hideSelectDropDown(!1))}renderDescriptionMarkdown(e,t){const i=r=>{for(let o=0;o<r.childNodes.length;o++){const a=r.childNodes.item(o);(a.tagName&&a.tagName.toLowerCase())==="img"?a.remove():i(a)}},s=_B({value:e,supportThemeIcons:!0},{actionHandler:t});return s.element.classList.add("select-box-description-markdown"),i(s.element),s.element}onListFocus(e){!this._isVisible||!this._hasDetails||this.updateDetail(e.indexes[0])}updateDetail(e){this.selectionDetailsPane.innerText="";const t=this.options[e],i=(t==null?void 0:t.description)??"",s=(t==null?void 0:t.descriptionIsMarkdown)??!1;if(i){if(s){const r=t.descriptionMarkdownActionHandler;this.selectionDetailsPane.appendChild(this.renderDescriptionMarkdown(i,r))}else this.selectionDetailsPane.innerText=i;this.selectionDetailsPane.style.display="block"}else this.selectionDetailsPane.style.display="none";this._skipLayout=!0,this.contextViewProvider.layout(),this._skipLayout=!1}onEscape(e){$t.stop(e),this.select(this._currentSelection),this.hideSelectDropDown(!0)}onEnter(e){$t.stop(e),this.selected!==this._currentSelection&&(this._currentSelection=this.selected,this._onDidSelect.fire({index:this.selectElement.selectedIndex,selected:this.options[this.selected].text}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)),this.hideSelectDropDown(!0)}onDownArrow(e){if(this.selected<this.options.length-1){$t.stop(e,!0);const t=this.options[this.selected+1].isDisabled;if(t&&this.options.length>this.selected+2)this.selected+=2;else{if(t)return;this.selected++}this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0])}}onUpArrow(e){this.selected>0&&($t.stop(e,!0),this.options[this.selected-1].isDisabled&&this.selected>1?this.selected-=2:this.selected--,this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0]))}onPageUp(e){$t.stop(e),this.selectList.focusPreviousPage(),setTimeout(()=>{this.selected=this.selectList.getFocus()[0],this.options[this.selected].isDisabled&&this.selected<this.options.length-1&&(this.selected++,this.selectList.setFocus([this.selected])),this.selectList.reveal(this.selected),this.select(this.selected)},1)}onPageDown(e){$t.stop(e),this.selectList.focusNextPage(),setTimeout(()=>{this.selected=this.selectList.getFocus()[0],this.options[this.selected].isDisabled&&this.selected>0&&(this.selected--,this.selectList.setFocus([this.selected])),this.selectList.reveal(this.selected),this.select(this.selected)},1)}onHome(e){$t.stop(e),!(this.options.length<2)&&(this.selected=0,this.options[this.selected].isDisabled&&this.selected>1&&this.selected++,this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selected),this.select(this.selected))}onEnd(e){$t.stop(e),!(this.options.length<2)&&(this.selected=this.options.length-1,this.options[this.selected].isDisabled&&this.selected>1&&this.selected--,this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selected),this.select(this.selected))}onCharacter(e){const t=ag.toString(e.keyCode);let i=-1;for(let s=0;s<this.options.length-1;s++)if(i=(s+this.selected+1)%this.options.length,this.options[i].text.charAt(0).toUpperCase()===t&&!this.options[i].isDisabled){this.select(i),this.selectList.setFocus([i]),this.selectList.reveal(this.selectList.getFocus()[0]),$t.stop(e);break}}dispose(){this.hideSelectDropDown(!1),super.dispose()}};vh.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN=32,vh.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN=2,vh.DEFAULT_MINIMUM_VISIBLE_OPTIONS=3;let t$=vh;class mit extends ee{constructor(e,t,i,s){super(),this.selected=0,this.selectBoxOptions=s||Object.create(null),this.options=[],this.selectElement=document.createElement("select"),this.selectElement.className="monaco-select-box",typeof this.selectBoxOptions.ariaLabel=="string"&&this.selectElement.setAttribute("aria-label",this.selectBoxOptions.ariaLabel),typeof this.selectBoxOptions.ariaDescription=="string"&&this.selectElement.setAttribute("aria-description",this.selectBoxOptions.ariaDescription),this._onDidSelect=this._register(new X),this.styles=i,this.registerListeners(),this.setOptions(e,t)}registerListeners(){this._register(Br.addTarget(this.selectElement)),[Hi.Tap].forEach(e=>{this._register(re(this.selectElement,e,t=>{this.selectElement.focus()}))}),this._register(Cn(this.selectElement,"click",e=>{$t.stop(e,!0)})),this._register(Cn(this.selectElement,"change",e=>{this.selectElement.title=e.target.value,this._onDidSelect.fire({index:e.target.selectedIndex,selected:e.target.value})})),this._register(Cn(this.selectElement,"keydown",e=>{let t=!1;Bt?(e.keyCode===18||e.keyCode===16||e.keyCode===10)&&(t=!0):(e.keyCode===18&&e.altKey||e.keyCode===10||e.keyCode===3)&&(t=!0),t&&e.stopPropagation()}))}get onDidSelect(){return this._onDidSelect.event}setOptions(e,t){(!this.options||!dn(this.options,e))&&(this.options=e,this.selectElement.options.length=0,this.options.forEach((i,s)=>{this.selectElement.add(this.createOption(i.text,s,i.isDisabled))})),t!==void 0&&this.select(t)}select(e){this.options.length===0?this.selected=0:e>=0&&e<this.options.length?this.selected=e:e>this.options.length-1?this.select(this.options.length-1):this.selected<0&&(this.selected=0),this.selectElement.selectedIndex=this.selected,this.selected<this.options.length&&typeof this.options[this.selected].text=="string"?this.selectElement.title=this.options[this.selected].text:this.selectElement.title=""}focus(){this.selectElement&&(this.selectElement.tabIndex=0,this.selectElement.focus())}blur(){this.selectElement&&(this.selectElement.tabIndex=-1,this.selectElement.blur())}setFocusable(e){this.selectElement.tabIndex=e?0:-1}render(e){e.classList.add("select-container"),e.appendChild(this.selectElement),this.setOptions(this.options,this.selected),this.applyStyles()}applyStyles(){this.selectElement&&(this.selectElement.style.backgroundColor=this.styles.selectBackground??"",this.selectElement.style.color=this.styles.selectForeground??"",this.selectElement.style.borderColor=this.styles.selectBorder??"")}createOption(e,t,i){const s=document.createElement("option");return s.value=e,s.text=e,s.disabled=!!i,s}}class _it extends Xl{constructor(e,t,i,s,r){super(),Bt&&!(r!=null&&r.useCustomDrawn)?this.selectBoxDelegate=new mit(e,t,s,r):this.selectBoxDelegate=new t$(e,t,i,s,r),this._register(this.selectBoxDelegate)}get onDidSelect(){return this.selectBoxDelegate.onDidSelect}setOptions(e,t){this.selectBoxDelegate.setOptions(e,t)}select(e){this.selectBoxDelegate.select(e)}focus(){this.selectBoxDelegate.focus()}blur(){this.selectBoxDelegate.blur()}setFocusable(e){this.selectBoxDelegate.setFocusable(e)}render(e){this.selectBoxDelegate.render(e)}}class gu extends ee{get action(){return this._action}constructor(e,t,i={}){super(),this.options=i,this._context=e||this,this._action=t,t instanceof Ya&&this._register(t.onDidChange(s=>{this.element&&this.handleActionChangeEvent(s)}))}handleActionChangeEvent(e){e.enabled!==void 0&&this.updateEnabled(),e.checked!==void 0&&this.updateChecked(),e.class!==void 0&&this.updateClass(),e.label!==void 0&&(this.updateLabel(),this.updateTooltip()),e.tooltip!==void 0&&this.updateTooltip()}get actionRunner(){return this._actionRunner||(this._actionRunner=this._register(new u0)),this._actionRunner}set actionRunner(e){this._actionRunner=e}isEnabled(){return this._action.enabled}setActionContext(e){this._context=e}render(e){const t=this.element=e;this._register(Br.addTarget(e));const i=this.options&&this.options.draggable;i&&(e.draggable=!0,Tc&&this._register(re(e,Se.DRAG_START,s=>{var r;return(r=s.dataTransfer)==null?void 0:r.setData(rD.TEXT,this._action.label)}))),this._register(re(t,Hi.Tap,s=>this.onClick(s,!0))),this._register(re(t,Se.MOUSE_DOWN,s=>{i||$t.stop(s,!0),this._action.enabled&&s.button===0&&t.classList.add("active")})),Bt&&this._register(re(t,Se.CONTEXT_MENU,s=>{s.button===0&&s.ctrlKey===!0&&this.onClick(s)})),this._register(re(t,Se.CLICK,s=>{$t.stop(s,!0),this.options&&this.options.isMenu||this.onClick(s)})),this._register(re(t,Se.DBLCLICK,s=>{$t.stop(s,!0)})),[Se.MOUSE_UP,Se.MOUSE_OUT].forEach(s=>{this._register(re(t,s,r=>{$t.stop(r),t.classList.remove("active")}))})}onClick(e,t=!1){var s;$t.stop(e,!0);const i=El(this._context)?(s=this.options)!=null&&s.useEventAsContext?e:{preserveFocus:t}:this._context;this.actionRunner.run(this._action,i)}focus(){this.element&&(this.element.tabIndex=0,this.element.focus(),this.element.classList.add("focused"))}blur(){this.element&&(this.element.blur(),this.element.tabIndex=-1,this.element.classList.remove("focused"))}setFocusable(e){this.element&&(this.element.tabIndex=e?0:-1)}get trapsArrowNavigation(){return!1}updateEnabled(){}updateLabel(){}getClass(){return this.action.class}getTooltip(){return this.action.tooltip}updateTooltip(){var t;if(!this.element)return;const e=this.getTooltip()??"";if(this.updateAriaLabel(),(t=this.options.hoverDelegate)!=null&&t.showNativeHover)this.element.title=e;else if(!this.customHover&&e!==""){const i=this.options.hoverDelegate??Vo("element");this.customHover=this._store.add(Gu().setupManagedHover(i,this.element,e))}else this.customHover&&this.customHover.update(e)}updateAriaLabel(){if(this.element){const e=this.getTooltip()??"";this.element.setAttribute("aria-label",e)}}updateClass(){}updateChecked(){}dispose(){this.element&&(this.element.remove(),this.element=void 0),this._context=void 0,super.dispose()}}class $S extends gu{constructor(e,t,i){super(e,t,i),this.options=i,this.options.icon=i.icon!==void 0?i.icon:!1,this.options.label=i.label!==void 0?i.label:!0,this.cssClass=""}render(e){super.render(e),si(this.element);const t=document.createElement("a");if(t.classList.add("action-label"),t.setAttribute("role",this.getDefaultAriaRole()),this.label=t,this.element.appendChild(t),this.options.label&&this.options.keybinding){const i=document.createElement("span");i.classList.add("keybinding"),i.textContent=this.options.keybinding,this.element.appendChild(i)}this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked()}getDefaultAriaRole(){return this._action.id===Ts.ID?"presentation":this.options.isMenu?"menuitem":this.options.isTabList?"tab":"button"}focus(){this.label&&(this.label.tabIndex=0,this.label.focus())}blur(){this.label&&(this.label.tabIndex=-1)}setFocusable(e){this.label&&(this.label.tabIndex=e?0:-1)}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this.action.label)}getTooltip(){let e=null;return this.action.tooltip?e=this.action.tooltip:!this.options.label&&this.action.label&&this.options.icon&&(e=this.action.label,this.options.keybinding&&(e=v({key:"titleLabel",comment:["action title","action keybinding"]},"{0} ({1})",e,this.options.keybinding))),e??void 0}updateClass(){var e;this.cssClass&&this.label&&this.label.classList.remove(...this.cssClass.split(" ")),this.options.icon?(this.cssClass=this.getClass(),this.label&&(this.label.classList.add("codicon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" "))),this.updateEnabled()):(e=this.label)==null||e.classList.remove("codicon")}updateEnabled(){var e,t;this.action.enabled?(this.label&&(this.label.removeAttribute("aria-disabled"),this.label.classList.remove("disabled")),(e=this.element)==null||e.classList.remove("disabled")):(this.label&&(this.label.setAttribute("aria-disabled","true"),this.label.classList.add("disabled")),(t=this.element)==null||t.classList.add("disabled"))}updateAriaLabel(){if(this.label){const e=this.getTooltip()??"";this.label.setAttribute("aria-label",e)}}updateChecked(){this.label&&(this.action.checked!==void 0?(this.label.classList.toggle("checked",this.action.checked),this.options.isTabList?this.label.setAttribute("aria-selected",this.action.checked?"true":"false"):(this.label.setAttribute("aria-checked",this.action.checked?"true":"false"),this.label.setAttribute("role","checkbox"))):(this.label.classList.remove("checked"),this.label.removeAttribute(this.options.isTabList?"aria-selected":"aria-checked"),this.label.setAttribute("role",this.getDefaultAriaRole())))}}class vit extends gu{constructor(e,t,i,s,r,o,a){super(e,t),this.selectBox=new _it(i,s,r,o,a),this.selectBox.setFocusable(!1),this._register(this.selectBox),this.registerListeners()}select(e){this.selectBox.select(e)}registerListeners(){this._register(this.selectBox.onDidSelect(e=>this.runAction(e.selected,e.index)))}runAction(e,t){this.actionRunner.run(this._action,this.getActionContext(e,t))}getActionContext(e,t){return e}setFocusable(e){this.selectBox.setFocusable(e)}focus(){var e;(e=this.selectBox)==null||e.focus()}blur(){var e;(e=this.selectBox)==null||e.blur()}render(e){this.selectBox.render(e)}}class bit extends u0{constructor(e,t){super(),this._onDidChangeVisibility=this._register(new X),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this._element=_e(e,xe(".monaco-dropdown")),this._label=_e(this._element,xe(".dropdown-label"));let i=t.labelRenderer;i||(i=r=>(r.textContent=t.label||"",null));for(const r of[Se.CLICK,Se.MOUSE_DOWN,Hi.Tap])this._register(re(this.element,r,o=>$t.stop(o,!0)));for(const r of[Se.MOUSE_DOWN,Hi.Tap])this._register(re(this._label,r,o=>{gX(o)&&(o.detail>1||o.button!==0)||(this.visible?this.hide():this.show())}));this._register(re(this._label,Se.KEY_UP,r=>{const o=new Oi(r);(o.equals(3)||o.equals(10))&&($t.stop(r,!0),this.visible?this.hide():this.show())}));const s=i(this._label);s&&this._register(s),this._register(Br.addTarget(this._label))}get element(){return this._element}show(){this.visible||(this.visible=!0,this._onDidChangeVisibility.fire(!0))}hide(){this.visible&&(this.visible=!1,this._onDidChangeVisibility.fire(!1))}dispose(){super.dispose(),this.hide(),this.boxContainer&&(this.boxContainer.remove(),this.boxContainer=void 0),this.contents&&(this.contents.remove(),this.contents=void 0),this._label&&(this._label.remove(),this._label=void 0)}}class wit extends bit{constructor(e,t){super(e,t),this._options=t,this._actions=[],this.actions=t.actions||[]}set menuOptions(e){this._menuOptions=e}get menuOptions(){return this._menuOptions}get actions(){return this._options.actionProvider?this._options.actionProvider.getActions():this._actions}set actions(e){this._actions=e}show(){super.show(),this.element.classList.add("active"),this._options.contextMenuProvider.showContextMenu({getAnchor:()=>this.element,getActions:()=>this.actions,getActionsContext:()=>this.menuOptions?this.menuOptions.context:null,getActionViewItem:(e,t)=>this.menuOptions&&this.menuOptions.actionViewItemProvider?this.menuOptions.actionViewItemProvider(e,t):void 0,getKeyBinding:e=>this.menuOptions&&this.menuOptions.getKeyBinding?this.menuOptions.getKeyBinding(e):void 0,getMenuClassName:()=>this._options.menuClassName||"",onHide:()=>this.onHide(),actionRunner:this.menuOptions?this.menuOptions.actionRunner:void 0,anchorAlignment:this.menuOptions?this.menuOptions.anchorAlignment:0,domForShadowRoot:this._options.menuAsChild?this.element:void 0,skipTelemetry:this._options.skipTelemetry})}hide(){super.hide()}onHide(){this.hide(),this.element.classList.remove("active")}}class qP extends gu{constructor(e,t,i,s=Object.create(null)){super(null,e,s),this.actionItem=null,this._onDidChangeVisibility=this._register(new X),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this.menuActionsOrProvider=t,this.contextMenuProvider=i,this.options=s,this.options.actionRunner&&(this.actionRunner=this.options.actionRunner)}render(e){this.actionItem=e;const t=r=>{this.element=_e(r,xe("a.action-label"));let o=[];return typeof this.options.classNames=="string"?o=this.options.classNames.split(/\s+/g).filter(a=>!!a):this.options.classNames&&(o=this.options.classNames),o.find(a=>a==="icon")||o.push("codicon"),this.element.classList.add(...o),this.element.setAttribute("role","button"),this.element.setAttribute("aria-haspopup","true"),this.element.setAttribute("aria-expanded","false"),this._action.label&&this._register(Gu().setupManagedHover(this.options.hoverDelegate??Vo("mouse"),this.element,this._action.label)),this.element.ariaLabel=this._action.label||"",null},i=Array.isArray(this.menuActionsOrProvider),s={contextMenuProvider:this.contextMenuProvider,labelRenderer:t,menuAsChild:this.options.menuAsChild,actions:i?this.menuActionsOrProvider:void 0,actionProvider:i?void 0:this.menuActionsOrProvider,skipTelemetry:this.options.skipTelemetry};if(this.dropdownMenu=this._register(new wit(e,s)),this._register(this.dropdownMenu.onDidChangeVisibility(r=>{var o;(o=this.element)==null||o.setAttribute("aria-expanded",`${r}`),this._onDidChangeVisibility.fire(r)})),this.dropdownMenu.menuOptions={actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,getKeyBinding:this.options.keybindingProvider,context:this._context},this.options.anchorAlignmentProvider){const r=this;this.dropdownMenu.menuOptions={...this.dropdownMenu.menuOptions,get anchorAlignment(){return r.options.anchorAlignmentProvider()}}}this.updateTooltip(),this.updateEnabled()}getTooltip(){let e=null;return this.action.tooltip?e=this.action.tooltip:this.action.label&&(e=this.action.label),e??void 0}setActionContext(e){super.setActionContext(e),this.dropdownMenu&&(this.dropdownMenu.menuOptions?this.dropdownMenu.menuOptions.context=e:this.dropdownMenu.menuOptions={context:e})}show(){var e;(e=this.dropdownMenu)==null||e.show()}updateEnabled(){var t,i;const e=!this.action.enabled;(t=this.actionItem)==null||t.classList.toggle("disabled",e),(i=this.element)==null||i.classList.toggle("disabled",e)}}function Cit(n){return n&&typeof n=="object"&&typeof n.original=="string"&&typeof n.value=="string"}function yit(n){return n?n.condition!==void 0:!1}var Dy;(function(n){n[n.STORAGE_DOES_NOT_EXIST=0]="STORAGE_DOES_NOT_EXIST",n[n.STORAGE_IN_MEMORY=1]="STORAGE_IN_MEMORY"})(Dy||(Dy={}));var I1;(function(n){n[n.None=0]="None",n[n.Initialized=1]="Initialized",n[n.Closed=2]="Closed"})(I1||(I1={}));const w4=class w4 extends ee{constructor(e,t=Object.create(null)){super(),this.database=e,this.options=t,this._onDidChangeStorage=this._register(new o0),this.onDidChangeStorage=this._onDidChangeStorage.event,this.state=I1.None,this.cache=new Map,this.flushDelayer=this._register(new S0e(w4.DEFAULT_FLUSH_DELAY)),this.pendingDeletes=new Set,this.pendingInserts=new Map,this.whenFlushedCallbacks=[],this.registerListeners()}registerListeners(){this._register(this.database.onDidChangeItemsExternal(e=>this.onDidChangeItemsExternal(e)))}onDidChangeItemsExternal(e){var t,i;this._onDidChangeStorage.pause();try{(t=e.changed)==null||t.forEach((s,r)=>this.acceptExternal(r,s)),(i=e.deleted)==null||i.forEach(s=>this.acceptExternal(s,void 0))}finally{this._onDidChangeStorage.resume()}}acceptExternal(e,t){if(this.state===I1.Closed)return;let i=!1;El(t)?i=this.cache.delete(e):this.cache.get(e)!==t&&(this.cache.set(e,t),i=!0),i&&this._onDidChangeStorage.fire({key:e,external:!0})}get(e,t){const i=this.cache.get(e);return El(i)?t:i}getBoolean(e,t){const i=this.get(e);return El(i)?t:i==="true"}getNumber(e,t){const i=this.get(e);return El(i)?t:parseInt(i,10)}async set(e,t,i=!1){if(this.state===I1.Closed)return;if(El(t))return this.delete(e,i);const s=zs(t)||Array.isArray(t)?XJe(t):String(t);if(this.cache.get(e)!==s)return this.cache.set(e,s),this.pendingInserts.set(e,s),this.pendingDeletes.delete(e),this._onDidChangeStorage.fire({key:e,external:i}),this.doFlush()}async delete(e,t=!1){if(!(this.state===I1.Closed||!this.cache.delete(e)))return this.pendingDeletes.has(e)||this.pendingDeletes.add(e),this.pendingInserts.delete(e),this._onDidChangeStorage.fire({key:e,external:t}),this.doFlush()}get hasPending(){return this.pendingInserts.size>0||this.pendingDeletes.size>0}async flushPending(){if(!this.hasPending)return;const e={insert:this.pendingInserts,delete:this.pendingDeletes};return this.pendingDeletes=new Set,this.pendingInserts=new Map,this.database.updateItems(e).finally(()=>{var t;if(!this.hasPending)for(;this.whenFlushedCallbacks.length;)(t=this.whenFlushedCallbacks.pop())==null||t()})}async doFlush(e){return this.options.hint===Dy.STORAGE_IN_MEMORY?this.flushPending():this.flushDelayer.trigger(()=>this.flushPending(),e)}};w4.DEFAULT_FLUSH_DELAY=100;let tE=w4;class C8{constructor(){this.onDidChangeItemsExternal=Ee.None,this.items=new Map}async updateItems(e){var t,i;(t=e.insert)==null||t.forEach((s,r)=>this.items.set(r,s)),(i=e.delete)==null||i.forEach(s=>this.items.delete(s))}}const T2="__$__targetStorageMarker",Wd=Wt("storageService");var aD;(function(n){n[n.NONE=0]="NONE",n[n.SHUTDOWN=1]="SHUTDOWN"})(aD||(aD={}));function Sit(n){const e=n.get(T2);if(e)try{return JSON.parse(e)}catch{}return Object.create(null)}const C4=class C4 extends ee{constructor(e={flushInterval:C4.DEFAULT_FLUSH_INTERVAL}){super(),this.options=e,this._onDidChangeValue=this._register(new o0),this._onDidChangeTarget=this._register(new o0),this._onWillSaveState=this._register(new X),this.onWillSaveState=this._onWillSaveState.event,this._workspaceKeyTargets=void 0,this._profileKeyTargets=void 0,this._applicationKeyTargets=void 0}onDidChangeValue(e,t,i){return Ee.filter(this._onDidChangeValue.event,s=>s.scope===e&&(t===void 0||s.key===t),i)}emitDidChangeValue(e,t){const{key:i,external:s}=t;if(i===T2){switch(e){case-1:this._applicationKeyTargets=void 0;break;case 0:this._profileKeyTargets=void 0;break;case 1:this._workspaceKeyTargets=void 0;break}this._onDidChangeTarget.fire({scope:e})}else this._onDidChangeValue.fire({scope:e,key:i,target:this.getKeyTargets(e)[i],external:s})}get(e,t,i){var s;return(s=this.getStorage(t))==null?void 0:s.get(e,i)}getBoolean(e,t,i){var s;return(s=this.getStorage(t))==null?void 0:s.getBoolean(e,i)}getNumber(e,t,i){var s;return(s=this.getStorage(t))==null?void 0:s.getNumber(e,i)}store(e,t,i,s,r=!1){if(El(t)){this.remove(e,i,r);return}this.withPausedEmitters(()=>{var o;this.updateKeyTarget(e,i,s),(o=this.getStorage(i))==null||o.set(e,t,r)})}remove(e,t,i=!1){this.withPausedEmitters(()=>{var s;this.updateKeyTarget(e,t,void 0),(s=this.getStorage(t))==null||s.delete(e,i)})}withPausedEmitters(e){this._onDidChangeValue.pause(),this._onDidChangeTarget.pause();try{e()}finally{this._onDidChangeValue.resume(),this._onDidChangeTarget.resume()}}updateKeyTarget(e,t,i,s=!1){var o,a;const r=this.getKeyTargets(t);typeof i=="number"?r[e]!==i&&(r[e]=i,(o=this.getStorage(t))==null||o.set(T2,JSON.stringify(r),s)):typeof r[e]=="number"&&(delete r[e],(a=this.getStorage(t))==null||a.set(T2,JSON.stringify(r),s))}get workspaceKeyTargets(){return this._workspaceKeyTargets||(this._workspaceKeyTargets=this.loadKeyTargets(1)),this._workspaceKeyTargets}get profileKeyTargets(){return this._profileKeyTargets||(this._profileKeyTargets=this.loadKeyTargets(0)),this._profileKeyTargets}get applicationKeyTargets(){return this._applicationKeyTargets||(this._applicationKeyTargets=this.loadKeyTargets(-1)),this._applicationKeyTargets}getKeyTargets(e){switch(e){case-1:return this.applicationKeyTargets;case 0:return this.profileKeyTargets;default:return this.workspaceKeyTargets}}loadKeyTargets(e){const t=this.getStorage(e);return t?Sit(t):Object.create(null)}};C4.DEFAULT_FLUSH_INTERVAL=60*1e3;let i$=C4;class xit extends i${constructor(){super(),this.applicationStorage=this._register(new tE(new C8,{hint:Dy.STORAGE_IN_MEMORY})),this.profileStorage=this._register(new tE(new C8,{hint:Dy.STORAGE_IN_MEMORY})),this.workspaceStorage=this._register(new tE(new C8,{hint:Dy.STORAGE_IN_MEMORY})),this._register(this.workspaceStorage.onDidChangeStorage(e=>this.emitDidChangeValue(1,e))),this._register(this.profileStorage.onDidChangeStorage(e=>this.emitDidChangeValue(0,e))),this._register(this.applicationStorage.onDidChangeStorage(e=>this.emitDidChangeValue(-1,e)))}getStorage(e){switch(e){case-1:return this.applicationStorage;case 0:return this.profileStorage;default:return this.workspaceStorage}}}function Lit(n,e){const t={...e};for(const i in n){const s=n[i];t[i]=s!==void 0?Me(s):void 0}return t}const kit={keybindingLabelBackground:Me(gQe),keybindingLabelForeground:Me(pQe),keybindingLabelBorder:Me(mQe),keybindingLabelBottomBorder:Me(_Qe),keybindingLabelShadow:Me(Ax)},Eit={buttonForeground:Me(t1e),buttonSeparator:Me(eQe),buttonBackground:Me(uk),buttonHoverBackground:Me(tQe),buttonSecondaryForeground:Me(nQe),buttonSecondaryBackground:Me(SU),buttonSecondaryHoverBackground:Me(sQe),buttonBorder:Me(iQe)},Iit={progressBarBackground:Me(gXe)},GP={inputActiveOptionBorder:Me(cB),inputActiveOptionForeground:Me(dB),inputActiveOptionBackground:Me(HN)};Me(hk),Me(rQe),Me(oQe),Me(aQe),Me(lQe),Me(cQe),Me(dQe);Me(uQe),Me(fQe),Me(hQe);Me(Pl),Me(oB),Me(Ax),Me(Yt),Me(PXe),Me(OXe),Me(FXe),Me(hXe);const YP={inputBackground:Me(yU),inputForeground:Me(JCe),inputBorder:Me(e1e),inputValidationInfoBorder:Me(KXe),inputValidationInfoBackground:Me($Xe),inputValidationInfoForeground:Me(jXe),inputValidationWarningBorder:Me(YXe),inputValidationWarningBackground:Me(qXe),inputValidationWarningForeground:Me(GXe),inputValidationErrorBorder:Me(QXe),inputValidationErrorBackground:Me(ZXe),inputValidationErrorForeground:Me(XXe)},Dit={listFilterWidgetBackground:Me(NQe),listFilterWidgetOutline:Me(TQe),listFilterWidgetNoMatchesOutline:Me(RQe),listFilterWidgetShadow:Me(AQe),inputBoxStyles:YP,toggleStyles:GP},G1e={badgeBackground:Me(E2),badgeForeground:Me(fXe),badgeBorder:Me(Yt)};Me(AXe),Me(RXe),Me(Jae),Me(Jae),Me(MXe);const U0={listBackground:void 0,listInactiveFocusForeground:void 0,listFocusBackground:Me(vQe),listFocusForeground:Me(bQe),listFocusOutline:Me(wQe),listActiveSelectionBackground:Me(f0),listActiveSelectionForeground:Me(YI),listActiveSelectionIconForeground:Me(i1e),listFocusAndSelectionOutline:Me(CQe),listFocusAndSelectionBackground:Me(f0),listFocusAndSelectionForeground:Me(YI),listInactiveSelectionBackground:Me(yQe),listInactiveSelectionIconForeground:Me(xQe),listInactiveSelectionForeground:Me(SQe),listInactiveFocusBackground:Me(LQe),listInactiveFocusOutline:Me(kQe),listHoverBackground:Me(n1e),listHoverForeground:Me(s1e),listDropOverBackground:Me(EQe),listDropBetweenBackground:Me(IQe),listSelectionOutline:Me(nn),listHoverOutline:Me(nn),treeIndentGuidesStroke:Me(r1e),treeInactiveIndentGuidesStroke:Me(MQe),treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:Me(MX),tableColumnsBorder:Me(PQe),tableOddRowsBackgroundColor:Me(OQe)};function $0(n){return Lit(n,U0)}const Nit={selectBackground:Me(uB),selectListBackground:Me(JXe),selectForeground:Me(HX),decoratorRightForeground:Me(o1e),selectBorder:Me(VX),focusBorder:Me(of),listFocusBackground:Me(XI),listInactiveSelectionIconForeground:Me(zX),listFocusForeground:Me(ZI),listFocusOutline:oXe(nn,ge.transparent.toString()),listHoverBackground:Me(n1e),listHoverForeground:Me(s1e),listHoverOutline:Me(nn),selectListBorder:Me(PX),listBackground:void 0,listActiveSelectionBackground:void 0,listActiveSelectionForeground:void 0,listActiveSelectionIconForeground:void 0,listFocusAndSelectionBackground:void 0,listDropOverBackground:void 0,listDropBetweenBackground:void 0,listInactiveSelectionBackground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusBackground:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listFocusAndSelectionForeground:void 0,listFocusAndSelectionOutline:void 0,listInactiveFocusForeground:void 0,tableColumnsBorder:void 0,tableOddRowsBackgroundColor:void 0,treeIndentGuidesStroke:void 0,treeInactiveIndentGuidesStroke:void 0,treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:void 0},Tit={shadowColor:Me(Ax),borderColor:Me(FQe),foregroundColor:Me(BQe),backgroundColor:Me(WQe),selectionForegroundColor:Me(HQe),selectionBackgroundColor:Me(VQe),selectionBorderColor:Me(zQe),separatorColor:Me(UQe),scrollbarShadow:Me(MX),scrollbarSliderBackground:Me(jCe),scrollbarSliderHoverBackground:Me(KCe),scrollbarSliderActiveBackground:Me(qCe)};var xB=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},oa=function(n,e){return function(t,i){e(t,i,n)}};function Rit(n,e,t,i){let s,r,o;if(Array.isArray(n))o=n,s=e,r=t;else{const c=e;o=n.getActions(c),s=t,r=i}const a=vg.getInstance(),l=a.keyStatus.altKey||(wr||Po)&&a.keyStatus.shiftKey;Y1e(o,s,l,r?c=>c===r:c=>c==="navigation")}function LB(n,e,t,i,s,r){let o,a,l,c,d;if(Array.isArray(n))d=n,o=e,a=t,l=i,c=s;else{const h=e;d=n.getActions(h),o=t,a=i,l=s,c=r}Y1e(d,o,!1,typeof a=="string"?h=>h===a:a,l,c)}function Y1e(n,e,t,i=o=>o==="navigation",s=()=>!1,r=!1){let o,a;Array.isArray(e)?(o=e,a=e):(o=e.primary,a=e.secondary);const l=new Set;for(const[c,d]of n){let u;i(c)?(u=o,u.length>0&&r&&u.push(new Ts)):(u=a,u.length>0&&u.push(new Ts));for(let h of d){t&&(h=h instanceof Za&&h.alt?h.alt:h);const f=u.push(h);h instanceof NS&&l.add({group:c,action:h,index:f-1})}}for(const{group:c,action:d,index:u}of l){const h=i(c)?o:a,f=d.actions;s(d,c,h.length)&&h.splice(u,1,...f)}}let O_=class extends $S{constructor(e,t,i,s,r,o,a,l){super(void 0,e,{icon:!!(e.class||e.item.icon),label:!e.class&&!e.item.icon,draggable:t==null?void 0:t.draggable,keybinding:t==null?void 0:t.keybinding,hoverDelegate:t==null?void 0:t.hoverDelegate}),this._options=t,this._keybindingService=i,this._notificationService=s,this._contextKeyService=r,this._themeService=o,this._contextMenuService=a,this._accessibilityService=l,this._wantsAltCommand=!1,this._itemClassDispose=this._register(new As),this._altKey=vg.getInstance()}get _menuItemAction(){return this._action}get _commandAction(){return this._wantsAltCommand&&this._menuItemAction.alt||this._menuItemAction}async onClick(e){e.preventDefault(),e.stopPropagation();try{await this.actionRunner.run(this._commandAction,this._context)}catch(t){this._notificationService.error(t)}}render(e){if(super.render(e),e.classList.add("menu-entry"),this.options.icon&&this._updateItemClass(this._menuItemAction.item),this._menuItemAction.alt){let t=!1;const i=()=>{var r;const s=!!((r=this._menuItemAction.alt)!=null&&r.enabled)&&(!this._accessibilityService.isMotionReduced()||t)&&(this._altKey.keyStatus.altKey||this._altKey.keyStatus.shiftKey&&t);s!==this._wantsAltCommand&&(this._wantsAltCommand=s,this.updateLabel(),this.updateTooltip(),this.updateClass())};this._register(this._altKey.event(i)),this._register(re(e,"mouseleave",s=>{t=!1,i()})),this._register(re(e,"mouseenter",s=>{t=!0,i()})),i()}}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this._commandAction.label)}getTooltip(){var r;const e=this._keybindingService.lookupKeybinding(this._commandAction.id,this._contextKeyService),t=e&&e.getLabel(),i=this._commandAction.tooltip||this._commandAction.label;let s=t?v("titleAndKb","{0} ({1})",i,t):i;if(!this._wantsAltCommand&&((r=this._menuItemAction.alt)!=null&&r.enabled)){const o=this._menuItemAction.alt.tooltip||this._menuItemAction.alt.label,a=this._keybindingService.lookupKeybinding(this._menuItemAction.alt.id,this._contextKeyService),l=a&&a.getLabel(),c=l?v("titleAndKb","{0} ({1})",o,l):o;s=v("titleAndKbAndAlt",`{0}
[{1}] {2}`,s,sQ.modifierLabels[Ka].altKey,c)}return s}updateClass(){this.options.icon&&(this._commandAction!==this._menuItemAction?this._menuItemAction.alt&&this._updateItemClass(this._menuItemAction.alt.item):this._updateItemClass(this._menuItemAction.item))}_updateItemClass(e){this._itemClassDispose.value=void 0;const{element:t,label:i}=this;if(!t||!i)return;const s=this._commandAction.checked&&yit(e.toggled)&&e.toggled.icon?e.toggled.icon:e.icon;if(s)if(ot.isThemeIcon(s)){const r=ot.asClassNameArray(s);i.classList.add(...r),this._itemClassDispose.value=Ye(()=>{i.classList.remove(...r)})}else i.style.backgroundImage=AS(this._themeService.getColorTheme().type)?Qg(s.dark):Qg(s.light),i.classList.add("icon"),this._itemClassDispose.value=Ld(Ye(()=>{i.style.backgroundImage="",i.classList.remove("icon")}),this._themeService.onDidColorThemeChange(()=>{this.updateClass()}))}};O_=xB([oa(2,hi),oa(3,jn),oa(4,at),oa(5,ws),oa(6,ol),oa(7,al)],O_);class lQ extends O_{render(e){var t;this.options.label=!0,this.options.icon=!1,super.render(e),e.classList.add("text-only"),e.classList.toggle("use-comma",((t=this._options)==null?void 0:t.useComma)??!1)}updateLabel(){var t;const e=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!e)return super.updateLabel();if(this.label){const i=lQ._symbolPrintEnter(e);(t=this._options)!=null&&t.conversational?this.label.textContent=v({key:"content2",comment:['A label with keybindg like "ESC to dismiss"']},"{1} to {0}",this._action.label,i):this.label.textContent=v({key:"content",comment:["A label","A keybinding"]},"{0} ({1})",this._action.label,i)}}static _symbolPrintEnter(e){var t;return(t=e.getLabel())==null?void 0:t.replace(/\benter\b/gi,"").replace(/\bEscape\b/gi,"Esc")}}let n$=class extends qP{constructor(e,t,i,s,r){const o={...t,menuAsChild:(t==null?void 0:t.menuAsChild)??!1,classNames:(t==null?void 0:t.classNames)??(ot.isThemeIcon(e.item.icon)?ot.asClassName(e.item.icon):void 0),keybindingProvider:(t==null?void 0:t.keybindingProvider)??(a=>i.lookupKeybinding(a.id))};super(e,{getActions:()=>e.actions},s,o),this._keybindingService=i,this._contextMenuService=s,this._themeService=r}render(e){super.render(e),si(this.element),e.classList.add("menu-entry");const t=this._action,{icon:i}=t.item;if(i&&!ot.isThemeIcon(i)){this.element.classList.add("icon");const s=()=>{this.element&&(this.element.style.backgroundImage=AS(this._themeService.getColorTheme().type)?Qg(i.dark):Qg(i.light))};s(),this._register(this._themeService.onDidColorThemeChange(()=>{s()}))}}};n$=xB([oa(2,hi),oa(3,ol),oa(4,ws)],n$);let s$=class extends gu{constructor(e,t,i,s,r,o,a,l){super(null,e),this._keybindingService=i,this._notificationService=s,this._contextMenuService=r,this._menuService=o,this._instaService=a,this._storageService=l,this._container=null,this._options=t,this._storageKey=`${e.item.submenu.id}_lastActionId`;let c;const d=t!=null&&t.persistLastActionId?l.get(this._storageKey,1):void 0;d&&(c=e.actions.find(h=>d===h.id)),c||(c=e.actions[0]),this._defaultAction=this._instaService.createInstance(O_,c,{keybinding:this._getDefaultActionKeybindingLabel(c)});const u={keybindingProvider:h=>this._keybindingService.lookupKeybinding(h.id),...t,menuAsChild:(t==null?void 0:t.menuAsChild)??!0,classNames:(t==null?void 0:t.classNames)??["codicon","codicon-chevron-down"],actionRunner:(t==null?void 0:t.actionRunner)??new u0};this._dropdown=new qP(e,e.actions,this._contextMenuService,u),this._register(this._dropdown.actionRunner.onDidRun(h=>{h.action instanceof Za&&this.update(h.action)}))}update(e){var t;(t=this._options)!=null&&t.persistLastActionId&&this._storageService.store(this._storageKey,e.id,1,1),this._defaultAction.dispose(),this._defaultAction=this._instaService.createInstance(O_,e,{keybinding:this._getDefaultActionKeybindingLabel(e)}),this._defaultAction.actionRunner=new class extends u0{async runAction(i,s){await i.run(void 0)}},this._container&&this._defaultAction.render(pX(this._container,xe(".action-container")))}_getDefaultActionKeybindingLabel(e){var i;let t;if((i=this._options)!=null&&i.renderKeybindingWithDefaultActionLabel){const s=this._keybindingService.lookupKeybinding(e.id);s&&(t=`(${s.getLabel()})`)}return t}setActionContext(e){super.setActionContext(e),this._defaultAction.setActionContext(e),this._dropdown.setActionContext(e)}render(e){this._container=e,super.render(this._container),this._container.classList.add("monaco-dropdown-with-default");const t=xe(".action-container");this._defaultAction.render(_e(this._container,t)),this._register(re(t,Se.KEY_DOWN,s=>{const r=new Oi(s);r.equals(17)&&(this._defaultAction.element.tabIndex=-1,this._dropdown.focus(),r.stopPropagation())}));const i=xe(".dropdown-action-container");this._dropdown.render(_e(this._container,i)),this._register(re(i,Se.KEY_DOWN,s=>{var o;const r=new Oi(s);r.equals(15)&&(this._defaultAction.element.tabIndex=0,this._dropdown.setFocusable(!1),(o=this._defaultAction.element)==null||o.focus(),r.stopPropagation())}))}focus(e){e?this._dropdown.focus():(this._defaultAction.element.tabIndex=0,this._defaultAction.element.focus())}blur(){this._defaultAction.element.tabIndex=-1,this._dropdown.blur(),this._container.blur()}setFocusable(e){e?this._defaultAction.element.tabIndex=0:(this._defaultAction.element.tabIndex=-1,this._dropdown.setFocusable(!1))}dispose(){this._defaultAction.dispose(),this._dropdown.dispose(),super.dispose()}};s$=xB([oa(2,hi),oa(3,jn),oa(4,ol),oa(5,Yl),oa(6,Ze),oa(7,Wd)],s$);let r$=class extends vit{constructor(e,t){super(null,e,e.actions.map(i=>({text:i.id===Ts.ID?"":i.label,isDisabled:!i.enabled})),0,t,Nit,{ariaLabel:e.tooltip,optionsAsChildren:!0}),this.select(Math.max(0,e.actions.findIndex(i=>i.checked)))}render(e){super.render(e),e.style.borderColor=Me(VX)}runAction(e,t){const i=this.action.actions[t];i&&this.actionRunner.run(i)}};r$=xB([oa(1,hp)],r$);function Z1e(n,e,t){return e instanceof Za?n.createInstance(O_,e,t):e instanceof xy?e.item.isSelection?n.createInstance(r$,e):e.item.rememberDefaultAction?n.createInstance(s$,e,{...t,persistLastActionId:!0}):n.createInstance(n$,e,t):void 0}class Ul extends ee{constructor(e,t={}){var r,o;super(),this._actionRunnerDisposables=this._register(new ue),this.viewItemDisposables=this._register(new ZZ),this.triggerKeyDown=!1,this.focusable=!0,this._onDidBlur=this._register(new X),this.onDidBlur=this._onDidBlur.event,this._onDidCancel=this._register(new X({onWillAddFirstListener:()=>this.cancelHasListener=!0})),this.onDidCancel=this._onDidCancel.event,this.cancelHasListener=!1,this._onDidRun=this._register(new X),this.onDidRun=this._onDidRun.event,this._onWillRun=this._register(new X),this.onWillRun=this._onWillRun.event,this.options=t,this._context=t.context??null,this._orientation=this.options.orientation??0,this._triggerKeys={keyDown:((r=this.options.triggerKeys)==null?void 0:r.keyDown)??!1,keys:((o=this.options.triggerKeys)==null?void 0:o.keys)??[3,10]},this._hoverDelegate=t.hoverDelegate??this._register(US()),this.options.actionRunner?this._actionRunner=this.options.actionRunner:(this._actionRunner=new u0,this._actionRunnerDisposables.add(this._actionRunner)),this._actionRunnerDisposables.add(this._actionRunner.onDidRun(a=>this._onDidRun.fire(a))),this._actionRunnerDisposables.add(this._actionRunner.onWillRun(a=>this._onWillRun.fire(a))),this.viewItems=[],this.focusedItem=void 0,this.domNode=document.createElement("div"),this.domNode.className="monaco-action-bar";let i,s;switch(this._orientation){case 0:i=[15],s=[17];break;case 1:i=[16],s=[18],this.domNode.className+=" vertical";break}this._register(re(this.domNode,Se.KEY_DOWN,a=>{const l=new Oi(a);let c=!0;const d=typeof this.focusedItem=="number"?this.viewItems[this.focusedItem]:void 0;i&&(l.equals(i[0])||l.equals(i[1]))?c=this.focusPrevious():s&&(l.equals(s[0])||l.equals(s[1]))?c=this.focusNext():l.equals(9)&&this.cancelHasListener?this._onDidCancel.fire():l.equals(14)?c=this.focusFirst():l.equals(13)?c=this.focusLast():l.equals(2)&&d instanceof gu&&d.trapsArrowNavigation?c=this.focusNext(void 0,!0):this.isTriggerKeyEvent(l)?this._triggerKeys.keyDown?this.doTrigger(l):this.triggerKeyDown=!0:c=!1,c&&(l.preventDefault(),l.stopPropagation())})),this._register(re(this.domNode,Se.KEY_UP,a=>{const l=new Oi(a);this.isTriggerKeyEvent(l)?(!this._triggerKeys.keyDown&&this.triggerKeyDown&&(this.triggerKeyDown=!1,this.doTrigger(l)),l.preventDefault(),l.stopPropagation()):(l.equals(2)||l.equals(1026)||l.equals(16)||l.equals(18)||l.equals(15)||l.equals(17))&&this.updateFocusedItem()})),this.focusTracker=this._register(Hu(this.domNode)),this._register(this.focusTracker.onDidBlur(()=>{(vr()===this.domNode||!Es(vr(),this.domNode))&&(this._onDidBlur.fire(),this.previouslyFocusedItem=this.focusedItem,this.focusedItem=void 0,this.triggerKeyDown=!1)})),this._register(this.focusTracker.onDidFocus(()=>this.updateFocusedItem())),this.actionsList=document.createElement("ul"),this.actionsList.className="actions-container",this.options.highlightToggledItems&&this.actionsList.classList.add("highlight-toggled"),this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"),this.options.ariaLabel&&this.actionsList.setAttribute("aria-label",this.options.ariaLabel),this.domNode.appendChild(this.actionsList),e.appendChild(this.domNode)}refreshRole(){this.length()>=1?this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"):this.actionsList.setAttribute("role","presentation")}setFocusable(e){if(this.focusable=e,this.focusable){const t=this.viewItems.find(i=>i instanceof gu&&i.isEnabled());t instanceof gu&&t.setFocusable(!0)}else this.viewItems.forEach(t=>{t instanceof gu&&t.setFocusable(!1)})}isTriggerKeyEvent(e){let t=!1;return this._triggerKeys.keys.forEach(i=>{t=t||e.equals(i)}),t}updateFocusedItem(){var e,t;for(let i=0;i<this.actionsList.children.length;i++){const s=this.actionsList.children[i];if(Es(vr(),s)){this.focusedItem=i,(t=(e=this.viewItems[this.focusedItem])==null?void 0:e.showHover)==null||t.call(e);break}}}get context(){return this._context}set context(e){this._context=e,this.viewItems.forEach(t=>t.setActionContext(e))}get actionRunner(){return this._actionRunner}set actionRunner(e){this._actionRunner=e,this._actionRunnerDisposables.clear(),this._actionRunnerDisposables.add(this._actionRunner.onDidRun(t=>this._onDidRun.fire(t))),this._actionRunnerDisposables.add(this._actionRunner.onWillRun(t=>this._onWillRun.fire(t))),this.viewItems.forEach(t=>t.actionRunner=e)}getContainer(){return this.domNode}getAction(e){var t;if(typeof e=="number")return(t=this.viewItems[e])==null?void 0:t.action;if(Ns(e)){for(;e.parentElement!==this.actionsList;){if(!e.parentElement)return;e=e.parentElement}for(let i=0;i<this.actionsList.childNodes.length;i++)if(this.actionsList.childNodes[i]===e)return this.viewItems[i].action}}push(e,t={}){const i=Array.isArray(e)?e:[e];let s=L_(t.index)?t.index:null;i.forEach(r=>{const o=document.createElement("li");o.className="action-item",o.setAttribute("role","presentation");let a;const l={hoverDelegate:this._hoverDelegate,...t,isTabList:this.options.ariaRole==="tablist"};this.options.actionViewItemProvider&&(a=this.options.actionViewItemProvider(r,l)),a||(a=new $S(this.context,r,l)),this.options.allowContextMenu||this.viewItemDisposables.set(a,re(o,Se.CONTEXT_MENU,c=>{$t.stop(c,!0)})),a.actionRunner=this._actionRunner,a.setActionContext(this.context),a.render(o),this.focusable&&a instanceof gu&&this.viewItems.length===0&&a.setFocusable(!0),s===null||s<0||s>=this.actionsList.children.length?(this.actionsList.appendChild(o),this.viewItems.push(a)):(this.actionsList.insertBefore(o,this.actionsList.children[s]),this.viewItems.splice(s,0,a),s++)}),typeof this.focusedItem=="number"&&this.focus(this.focusedItem),this.refreshRole()}clear(){this.isEmpty()||(this.viewItems=Ti(this.viewItems),this.viewItemDisposables.clearAndDisposeAll(),nr(this.actionsList),this.refreshRole())}length(){return this.viewItems.length}isEmpty(){return this.viewItems.length===0}focus(e){let t=!1,i;if(e===void 0?t=!0:typeof e=="number"?i=e:typeof e=="boolean"&&(t=e),t&&typeof this.focusedItem>"u"){const s=this.viewItems.findIndex(r=>r.isEnabled());this.focusedItem=s===-1?void 0:s,this.updateFocus(void 0,void 0,!0)}else i!==void 0&&(this.focusedItem=i),this.updateFocus(void 0,void 0,!0)}focusFirst(){return this.focusedItem=this.length()-1,this.focusNext(!0)}focusLast(){return this.focusedItem=0,this.focusPrevious(!0)}focusNext(e,t){if(typeof this.focusedItem>"u")this.focusedItem=this.viewItems.length-1;else if(this.viewItems.length<=1)return!1;const i=this.focusedItem;let s;do{if(!e&&this.options.preventLoopNavigation&&this.focusedItem+1>=this.viewItems.length)return this.focusedItem=i,!1;this.focusedItem=(this.focusedItem+1)%this.viewItems.length,s=this.viewItems[this.focusedItem]}while(this.focusedItem!==i&&(this.options.focusOnlyEnabledItems&&!s.isEnabled()||s.action.id===Ts.ID));return this.updateFocus(void 0,void 0,t),!0}focusPrevious(e){if(typeof this.focusedItem>"u")this.focusedItem=0;else if(this.viewItems.length<=1)return!1;const t=this.focusedItem;let i;do{if(this.focusedItem=this.focusedItem-1,this.focusedItem<0){if(!e&&this.options.preventLoopNavigation)return this.focusedItem=t,!1;this.focusedItem=this.viewItems.length-1}i=this.viewItems[this.focusedItem]}while(this.focusedItem!==t&&(this.options.focusOnlyEnabledItems&&!i.isEnabled()||i.action.id===Ts.ID));return this.updateFocus(!0),!0}updateFocus(e,t,i=!1){var r,o;typeof this.focusedItem>"u"&&this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem!==void 0&&this.previouslyFocusedItem!==this.focusedItem&&((r=this.viewItems[this.previouslyFocusedItem])==null||r.blur());const s=this.focusedItem!==void 0?this.viewItems[this.focusedItem]:void 0;if(s){let a=!0;II(s.focus)||(a=!1),this.options.focusOnlyEnabledItems&&II(s.isEnabled)&&!s.isEnabled()&&(a=!1),s.action.id===Ts.ID&&(a=!1),a?(i||this.previouslyFocusedItem!==this.focusedItem)&&(s.focus(e),this.previouslyFocusedItem=this.focusedItem):(this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem=void 0),a&&((o=s.showHover)==null||o.call(s))}}doTrigger(e){if(typeof this.focusedItem>"u")return;const t=this.viewItems[this.focusedItem];if(t instanceof gu){const i=t._context===null||t._context===void 0?e:t._context;this.run(t._action,i)}}async run(e,t){await this._actionRunner.run(e,t)}dispose(){this._context=void 0,this.viewItems=Ti(this.viewItems),this.getContainer().remove(),super.dispose()}}const o$=/\(&([^\s&])\)|(^|[^&])&([^\s&])/,y8=/(&amp;)?(&amp;)([^\s&])/g;var ZP;(function(n){n[n.Right=0]="Right",n[n.Left=1]="Left"})(ZP||(ZP={}));var a$;(function(n){n[n.Above=0]="Above",n[n.Below=1]="Below"})(a$||(a$={}));class Ny extends Ul{constructor(e,t,i,s){e.classList.add("monaco-menu-container"),e.setAttribute("role","presentation");const r=document.createElement("div");r.classList.add("monaco-menu"),r.setAttribute("role","presentation"),super(r,{orientation:1,actionViewItemProvider:c=>this.doGetActionViewItem(c,i,o),context:i.context,actionRunner:i.actionRunner,ariaLabel:i.ariaLabel,ariaRole:"menu",focusOnlyEnabledItems:!0,triggerKeys:{keys:[3,...Bt||Po?[10]:[]],keyDown:!0}}),this.menuStyles=s,this.menuElement=r,this.actionsList.tabIndex=0,this.initializeOrUpdateStyleSheet(e,s),this._register(Br.addTarget(r)),this._register(re(r,Se.KEY_DOWN,c=>{new Oi(c).equals(2)&&c.preventDefault()})),i.enableMnemonics&&this._register(re(r,Se.KEY_DOWN,c=>{const d=c.key.toLocaleLowerCase();if(this.mnemonics.has(d)){$t.stop(c,!0);const u=this.mnemonics.get(d);if(u.length===1&&(u[0]instanceof Vle&&u[0].container&&this.focusItemByElement(u[0].container),u[0].onClick(c)),u.length>1){const h=u.shift();h&&h.container&&(this.focusItemByElement(h.container),u.push(h)),this.mnemonics.set(d,u)}}})),Po&&this._register(re(r,Se.KEY_DOWN,c=>{const d=new Oi(c);d.equals(14)||d.equals(11)?(this.focusedItem=this.viewItems.length-1,this.focusNext(),$t.stop(c,!0)):(d.equals(13)||d.equals(12))&&(this.focusedItem=0,this.focusPrevious(),$t.stop(c,!0))})),this._register(re(this.domNode,Se.MOUSE_OUT,c=>{const d=c.relatedTarget;Es(d,this.domNode)||(this.focusedItem=void 0,this.updateFocus(),c.stopPropagation())})),this._register(re(this.actionsList,Se.MOUSE_OVER,c=>{let d=c.target;if(!(!d||!Es(d,this.actionsList)||d===this.actionsList)){for(;d.parentElement!==this.actionsList&&d.parentElement!==null;)d=d.parentElement;if(d.classList.contains("action-item")){const u=this.focusedItem;this.setFocusedItem(d),u!==this.focusedItem&&this.updateFocus()}}})),this._register(Br.addTarget(this.actionsList)),this._register(re(this.actionsList,Hi.Tap,c=>{let d=c.initialTarget;if(!(!d||!Es(d,this.actionsList)||d===this.actionsList)){for(;d.parentElement!==this.actionsList&&d.parentElement!==null;)d=d.parentElement;if(d.classList.contains("action-item")){const u=this.focusedItem;this.setFocusedItem(d),u!==this.focusedItem&&this.updateFocus()}}}));const o={parent:this};this.mnemonics=new Map,this.scrollableElement=this._register(new VN(r,{alwaysConsumeMouseWheel:!0,horizontal:2,vertical:3,verticalScrollbarSize:7,handleMouseWheel:!0,useShadows:!0}));const a=this.scrollableElement.getDomNode();a.style.position="",this.styleScrollElement(a,s),this._register(re(r,Hi.Change,c=>{$t.stop(c,!0);const d=this.scrollableElement.getScrollPosition().scrollTop;this.scrollableElement.setScrollPosition({scrollTop:d-c.translationY})})),this._register(re(a,Se.MOUSE_UP,c=>{c.preventDefault()}));const l=nt(e);r.style.maxHeight=`${Math.max(10,l.innerHeight-e.getBoundingClientRect().top-35)}px`,t=t.filter((c,d)=>{var u;return(u=i.submenuIds)!=null&&u.has(c.id)?(console.warn(`Found submenu cycle: ${c.id}`),!1):!(c instanceof Ts&&(d===t.length-1||d===0||t[d-1]instanceof Ts))}),this.push(t,{icon:!0,label:!0,isMenu:!0}),e.appendChild(this.scrollableElement.getDomNode()),this.scrollableElement.scanDomNode(),this.viewItems.filter(c=>!(c instanceof zle)).forEach((c,d,u)=>{c.updatePositionInSet(d+1,u.length)})}initializeOrUpdateStyleSheet(e,t){this.styleSheet||(pP(e)?this.styleSheet=jl(e):(Ny.globalStyleSheet||(Ny.globalStyleSheet=jl()),this.styleSheet=Ny.globalStyleSheet)),this.styleSheet.textContent=Mit(t,pP(e))}styleScrollElement(e,t){const i=t.foregroundColor??"",s=t.backgroundColor??"",r=t.borderColor?`1px solid ${t.borderColor}`:"",o="5px",a=t.shadowColor?`0 2px 8px ${t.shadowColor}`:"";e.style.outline=r,e.style.borderRadius=o,e.style.color=i,e.style.backgroundColor=s,e.style.boxShadow=a}getContainer(){return this.scrollableElement.getDomNode()}get onScroll(){return this.scrollableElement.onScroll}focusItemByElement(e){const t=this.focusedItem;this.setFocusedItem(e),t!==this.focusedItem&&this.updateFocus()}setFocusedItem(e){for(let t=0;t<this.actionsList.children.length;t++){const i=this.actionsList.children[t];if(e===i){this.focusedItem=t;break}}}updateFocus(e){super.updateFocus(e,!0,!0),typeof this.focusedItem<"u"&&this.scrollableElement.setScrollPosition({scrollTop:Math.round(this.menuElement.scrollTop)})}doGetActionViewItem(e,t,i){if(e instanceof Ts)return new zle(t.context,e,{icon:!0},this.menuStyles);if(e instanceof NS){const s=new Vle(e,e.actions,i,{...t,submenuIds:new Set([...t.submenuIds||[],e.id])},this.menuStyles);if(t.enableMnemonics){const r=s.getMnemonic();if(r&&s.isEnabled()){let o=[];this.mnemonics.has(r)&&(o=this.mnemonics.get(r)),o.push(s),this.mnemonics.set(r,o)}}return s}else{const s={enableMnemonics:t.enableMnemonics,useEventAsContext:t.useEventAsContext};if(t.getKeyBinding){const o=t.getKeyBinding(e);if(o){const a=o.getLabel();a&&(s.keybinding=a)}}const r=new X1e(t.context,e,s,this.menuStyles);if(t.enableMnemonics){const o=r.getMnemonic();if(o&&r.isEnabled()){let a=[];this.mnemonics.has(o)&&(a=this.mnemonics.get(o)),a.push(r),this.mnemonics.set(o,a)}}return r}}}class X1e extends gu{constructor(e,t,i,s){if(i.isMenu=!0,super(t,t,i),this.menuStyle=s,this.options=i,this.options.icon=i.icon!==void 0?i.icon:!1,this.options.label=i.label!==void 0?i.label:!0,this.cssClass="",this.options.label&&i.enableMnemonics){const r=this.action.label;if(r){const o=o$.exec(r);o&&(this.mnemonic=(o[1]?o[1]:o[3]).toLocaleLowerCase())}}this.runOnceToEnableMouseUp=new yi(()=>{this.element&&(this._register(re(this.element,Se.MOUSE_UP,r=>{if($t.stop(r,!0),Tc){if(new bd(nt(this.element),r).rightButton)return;this.onClick(r)}else setTimeout(()=>{this.onClick(r)},0)})),this._register(re(this.element,Se.CONTEXT_MENU,r=>{$t.stop(r,!0)})))},100),this._register(this.runOnceToEnableMouseUp)}render(e){super.render(e),this.element&&(this.container=e,this.item=_e(this.element,xe("a.action-menu-item")),this._action.id===Ts.ID?this.item.setAttribute("role","presentation"):(this.item.setAttribute("role","menuitem"),this.mnemonic&&this.item.setAttribute("aria-keyshortcuts",`${this.mnemonic}`)),this.check=_e(this.item,xe("span.menu-item-check"+ot.asCSSSelector(ye.menuSelection))),this.check.setAttribute("role","none"),this.label=_e(this.item,xe("span.action-label")),this.options.label&&this.options.keybinding&&(_e(this.item,xe("span.keybinding")).textContent=this.options.keybinding),this.runOnceToEnableMouseUp.schedule(),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked(),this.applyStyle())}blur(){super.blur(),this.applyStyle()}focus(){var e;super.focus(),(e=this.item)==null||e.focus(),this.applyStyle()}updatePositionInSet(e,t){this.item&&(this.item.setAttribute("aria-posinset",`${e}`),this.item.setAttribute("aria-setsize",`${t}`))}updateLabel(){var e;if(this.label&&this.options.label){nr(this.label);let t=QX(this.action.label);if(t){const i=Ait(t);this.options.enableMnemonics||(t=i),this.label.setAttribute("aria-label",i.replace(/&&/g,"&"));const s=o$.exec(t);if(s){t=qk(t),y8.lastIndex=0;let r=y8.exec(t);for(;r&&r[1];)r=y8.exec(t);const o=a=>a.replace(/&amp;&amp;/g,"&amp;");r?this.label.append(RN(o(t.substr(0,r.index))," "),xe("u",{"aria-hidden":"true"},r[3]),f0e(o(t.substr(r.index+r[0].length))," ")):this.label.innerText=o(t).trim(),(e=this.item)==null||e.setAttribute("aria-keyshortcuts",(s[1]?s[1]:s[3]).toLocaleLowerCase())}else this.label.innerText=t.replace(/&&/g,"&").trim()}}}updateTooltip(){}updateClass(){this.cssClass&&this.item&&this.item.classList.remove(...this.cssClass.split(" ")),this.options.icon&&this.label?(this.cssClass=this.action.class||"",this.label.classList.add("icon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" ")),this.updateEnabled()):this.label&&this.label.classList.remove("icon")}updateEnabled(){this.action.enabled?(this.element&&(this.element.classList.remove("disabled"),this.element.removeAttribute("aria-disabled")),this.item&&(this.item.classList.remove("disabled"),this.item.removeAttribute("aria-disabled"),this.item.tabIndex=0)):(this.element&&(this.element.classList.add("disabled"),this.element.setAttribute("aria-disabled","true")),this.item&&(this.item.classList.add("disabled"),this.item.setAttribute("aria-disabled","true")))}updateChecked(){if(!this.item)return;const e=this.action.checked;this.item.classList.toggle("checked",!!e),e!==void 0?(this.item.setAttribute("role","menuitemcheckbox"),this.item.setAttribute("aria-checked",e?"true":"false")):(this.item.setAttribute("role","menuitem"),this.item.setAttribute("aria-checked",""))}getMnemonic(){return this.mnemonic}applyStyle(){const e=this.element&&this.element.classList.contains("focused"),t=e&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor,i=e&&this.menuStyle.selectionBackgroundColor?this.menuStyle.selectionBackgroundColor:void 0,s=e&&this.menuStyle.selectionBorderColor?`1px solid ${this.menuStyle.selectionBorderColor}`:"",r=e&&this.menuStyle.selectionBorderColor?"-1px":"";this.item&&(this.item.style.color=t??"",this.item.style.backgroundColor=i??"",this.item.style.outline=s,this.item.style.outlineOffset=r),this.check&&(this.check.style.color=t??"")}}class Vle extends X1e{constructor(e,t,i,s,r){super(e,e,s,r),this.submenuActions=t,this.parentData=i,this.submenuOptions=s,this.mysubmenu=null,this.submenuDisposables=this._register(new ue),this.mouseOver=!1,this.expandDirection=s&&s.expandDirection!==void 0?s.expandDirection:{horizontal:ZP.Right,vertical:a$.Below},this.showScheduler=new yi(()=>{this.mouseOver&&(this.cleanupExistingSubmenu(!1),this.createSubmenu(!1))},250),this.hideScheduler=new yi(()=>{this.element&&!Es(vr(),this.element)&&this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))},750)}render(e){super.render(e),this.element&&(this.item&&(this.item.classList.add("monaco-submenu-item"),this.item.tabIndex=0,this.item.setAttribute("aria-haspopup","true"),this.updateAriaExpanded("false"),this.submenuIndicator=_e(this.item,xe("span.submenu-indicator"+ot.asCSSSelector(ye.menuSubmenu))),this.submenuIndicator.setAttribute("aria-hidden","true")),this._register(re(this.element,Se.KEY_UP,t=>{const i=new Oi(t);(i.equals(17)||i.equals(3))&&($t.stop(t,!0),this.createSubmenu(!0))})),this._register(re(this.element,Se.KEY_DOWN,t=>{const i=new Oi(t);vr()===this.item&&(i.equals(17)||i.equals(3))&&$t.stop(t,!0)})),this._register(re(this.element,Se.MOUSE_OVER,t=>{this.mouseOver||(this.mouseOver=!0,this.showScheduler.schedule())})),this._register(re(this.element,Se.MOUSE_LEAVE,t=>{this.mouseOver=!1})),this._register(re(this.element,Se.FOCUS_OUT,t=>{this.element&&!Es(vr(),this.element)&&this.hideScheduler.schedule()})),this._register(this.parentData.parent.onScroll(()=>{this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))})))}updateEnabled(){}onClick(e){$t.stop(e,!0),this.cleanupExistingSubmenu(!1),this.createSubmenu(!0)}cleanupExistingSubmenu(e){if(this.parentData.submenu&&(e||this.parentData.submenu!==this.mysubmenu)){try{this.parentData.submenu.dispose()}catch{}this.parentData.submenu=void 0,this.updateAriaExpanded("false"),this.submenuContainer&&(this.submenuDisposables.clear(),this.submenuContainer=void 0)}}calculateSubmenuMenuLayout(e,t,i,s){const r={top:0,left:0};return r.left=L1(e.width,t.width,{position:s.horizontal===ZP.Right?0:1,offset:i.left,size:i.width}),r.left>=i.left&&r.left<i.left+i.width&&(i.left+10+t.width<=e.width&&(r.left=i.left+10),i.top+=10,i.height=0),r.top=L1(e.height,t.height,{position:0,offset:i.top,size:0}),r.top+t.height===i.top&&r.top+i.height+t.height<=e.height&&(r.top+=i.height),r}createSubmenu(e=!0){if(this.element)if(this.parentData.submenu)this.parentData.submenu.focus(!1);else{this.updateAriaExpanded("true"),this.submenuContainer=_e(this.element,xe("div.monaco-submenu")),this.submenuContainer.classList.add("menubar-menu-items-holder","context-view");const t=nt(this.parentData.parent.domNode).getComputedStyle(this.parentData.parent.domNode),i=parseFloat(t.paddingTop||"0")||0;this.submenuContainer.style.zIndex="1",this.submenuContainer.style.position="fixed",this.submenuContainer.style.top="0",this.submenuContainer.style.left="0",this.parentData.submenu=new Ny(this.submenuContainer,this.submenuActions.length?this.submenuActions:[new zz],this.submenuOptions,this.menuStyle);const s=this.element.getBoundingClientRect(),r={top:s.top-i,left:s.left,height:s.height+2*i,width:s.width},o=this.submenuContainer.getBoundingClientRect(),a=nt(this.element),{top:l,left:c}=this.calculateSubmenuMenuLayout(new _i(a.innerWidth,a.innerHeight),_i.lift(o),r,this.expandDirection);this.submenuContainer.style.left=`${c-o.left}px`,this.submenuContainer.style.top=`${l-o.top}px`,this.submenuDisposables.add(re(this.submenuContainer,Se.KEY_UP,d=>{new Oi(d).equals(15)&&($t.stop(d,!0),this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0))})),this.submenuDisposables.add(re(this.submenuContainer,Se.KEY_DOWN,d=>{new Oi(d).equals(15)&&$t.stop(d,!0)})),this.submenuDisposables.add(this.parentData.submenu.onDidCancel(()=>{this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0)})),this.parentData.submenu.focus(e),this.mysubmenu=this.parentData.submenu}}updateAriaExpanded(e){var t;this.item&&((t=this.item)==null||t.setAttribute("aria-expanded",e))}applyStyle(){super.applyStyle();const t=this.element&&this.element.classList.contains("focused")&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor;this.submenuIndicator&&(this.submenuIndicator.style.color=t??"")}dispose(){super.dispose(),this.hideScheduler.dispose(),this.mysubmenu&&(this.mysubmenu.dispose(),this.mysubmenu=null),this.submenuContainer&&(this.submenuContainer=void 0)}}class zle extends $S{constructor(e,t,i,s){super(e,t,i),this.menuStyles=s}render(e){super.render(e),this.label&&(this.label.style.borderBottomColor=this.menuStyles.separatorColor?`${this.menuStyles.separatorColor}`:"")}}function Ait(n){const e=o$,t=e.exec(n);if(!t)return n;const i=!t[1];return n.replace(e,i?"$2$3":"").trim()}function Ule(n){const e=a0e()[n.id];return`.codicon-${n.id}:before { content: '\\${e.toString(16)}'; }`}function Mit(n,e){let t=`
.monaco-menu {
	font-size: 13px;
	border-radius: 5px;
	min-width: 160px;
}

${Ule(ye.menuSelection)}
${Ule(ye.menuSubmenu)}

.monaco-menu .monaco-action-bar {
	text-align: right;
	overflow: hidden;
	white-space: nowrap;
}

.monaco-menu .monaco-action-bar .actions-container {
	display: flex;
	margin: 0 auto;
	padding: 0;
	width: 100%;
	justify-content: flex-end;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: inline-block;
}

.monaco-menu .monaco-action-bar.reverse .actions-container {
	flex-direction: row-reverse;
}

.monaco-menu .monaco-action-bar .action-item {
	cursor: pointer;
	display: inline-block;
	transition: transform 50ms ease;
	position: relative;  /* DO NOT REMOVE - this is the key to preventing the ghosting icon bug in Chrome 42 */
}

.monaco-menu .monaco-action-bar .action-item.disabled {
	cursor: default;
}

.monaco-menu .monaco-action-bar .action-item .icon,
.monaco-menu .monaco-action-bar .action-item .codicon {
	display: inline-block;
}

.monaco-menu .monaco-action-bar .action-item .codicon {
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar .action-label {
	font-size: 11px;
	margin-right: 4px;
}

.monaco-menu .monaco-action-bar .action-item.disabled .action-label,
.monaco-menu .monaco-action-bar .action-item.disabled .action-label:hover {
	color: var(--vscode-disabledForeground);
}

/* Vertical actions */

.monaco-menu .monaco-action-bar.vertical {
	text-align: left;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	display: block;
	border-bottom: 1px solid var(--vscode-menu-separatorBackground);
	padding-top: 1px;
	padding: 30px;
}

.monaco-menu .secondary-actions .monaco-action-bar .action-label {
	margin-left: 6px;
}

/* Action Items */
.monaco-menu .monaco-action-bar .action-item.select-container {
	overflow: hidden; /* somehow the dropdown overflows its container, we prevent it here to not push */
	flex: 1;
	max-width: 170px;
	min-width: 60px;
	display: flex;
	align-items: center;
	justify-content: center;
	margin-right: 10px;
}

.monaco-menu .monaco-action-bar.vertical {
	margin-left: 0;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	padding: 0;
	transform: none;
	display: flex;
}

.monaco-menu .monaco-action-bar.vertical .action-item.active {
	transform: none;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	flex: 1 1 auto;
	display: flex;
	height: 2em;
	align-items: center;
	position: relative;
	margin: 0 4px;
	border-radius: 4px;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item:hover .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-menu-item:focus .keybinding {
	opacity: unset;
}

.monaco-menu .monaco-action-bar.vertical .action-label {
	flex: 1 1 auto;
	text-decoration: none;
	padding: 0 1em;
	background: none;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .keybinding,
.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	display: inline-block;
	flex: 2 1 auto;
	padding: 0 1em;
	text-align: right;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon {
	font-size: 16px !important;
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon::before {
	margin-left: auto;
	margin-right: -20px;
}

.monaco-menu .monaco-action-bar.vertical .action-item.disabled .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-item.disabled .submenu-indicator {
	opacity: 0.4;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator) {
	display: inline-block;
	box-sizing: border-box;
	margin: 0;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	position: static;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .action-item .monaco-submenu {
	position: absolute;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	width: 100%;
	height: 0px !important;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator.text {
	padding: 0.7em 1em 0.1em 1em;
	font-weight: bold;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label:hover {
	color: inherit;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	position: absolute;
	visibility: hidden;
	width: 1em;
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item.checked .menu-item-check {
	visibility: visible;
	display: flex;
	align-items: center;
	justify-content: center;
}

/* Context Menu */

.context-view.monaco-menu-container {
	outline: 0;
	border: none;
	animation: fadeIn 0.083s linear;
	-webkit-app-region: no-drag;
}

.context-view.monaco-menu-container :focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical:focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical :focus {
	outline: 0;
}

.hc-black .context-view.monaco-menu-container,
.hc-light .context-view.monaco-menu-container,
:host-context(.hc-black) .context-view.monaco-menu-container,
:host-context(.hc-light) .context-view.monaco-menu-container {
	box-shadow: none;
}

.hc-black .monaco-menu .monaco-action-bar.vertical .action-item.focused,
.hc-light .monaco-menu .monaco-action-bar.vertical .action-item.focused,
:host-context(.hc-black) .monaco-menu .monaco-action-bar.vertical .action-item.focused,
:host-context(.hc-light) .monaco-menu .monaco-action-bar.vertical .action-item.focused {
	background: none;
}

/* Vertical Action Bar Styles */

.monaco-menu .monaco-action-bar.vertical {
	padding: 4px 0;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	height: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator),
.monaco-menu .monaco-action-bar.vertical .keybinding {
	font-size: inherit;
	padding: 0 2em;
	max-height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	font-size: inherit;
	width: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	font-size: inherit;
	margin: 5px 0 !important;
	padding: 0;
	border-radius: 0;
}

.linux .monaco-menu .monaco-action-bar.vertical .action-label.separator,
:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .action-label.separator {
	margin-left: 0;
	margin-right: 0;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	font-size: 60%;
	padding: 0 1.8em;
}

.linux .monaco-menu .monaco-action-bar.vertical .submenu-indicator,
:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
	mask-size: 10px 10px;
	-webkit-mask-size: 10px 10px;
}

.monaco-menu .action-item {
	cursor: default;
}`;if(e){t+=`
			/* Arrows */
			.monaco-scrollable-element > .scrollbar > .scra {
				cursor: pointer;
				font-size: 11px !important;
			}

			.monaco-scrollable-element > .visible {
				opacity: 1;

				/* Background rule added for IE9 - to allow clicks on dom node */
				background:rgba(0,0,0,0);

				transition: opacity 100ms linear;
			}
			.monaco-scrollable-element > .invisible {
				opacity: 0;
				pointer-events: none;
			}
			.monaco-scrollable-element > .invisible.fade {
				transition: opacity 800ms linear;
			}

			/* Scrollable Content Inset Shadow */
			.monaco-scrollable-element > .shadow {
				position: absolute;
				display: none;
			}
			.monaco-scrollable-element > .shadow.top {
				display: block;
				top: 0;
				left: 3px;
				height: 3px;
				width: 100%;
			}
			.monaco-scrollable-element > .shadow.left {
				display: block;
				top: 3px;
				left: 0;
				height: 100%;
				width: 3px;
			}
			.monaco-scrollable-element > .shadow.top-left-corner {
				display: block;
				top: 0;
				left: 0;
				height: 3px;
				width: 3px;
			}
		`;const i=n.scrollbarShadow;i&&(t+=`
				.monaco-scrollable-element > .shadow.top {
					box-shadow: ${i} 0 6px 6px -6px inset;
				}

				.monaco-scrollable-element > .shadow.left {
					box-shadow: ${i} 6px 0 6px -6px inset;
				}

				.monaco-scrollable-element > .shadow.top.left {
					box-shadow: ${i} 6px 6px 6px -6px inset;
				}
			`);const s=n.scrollbarSliderBackground;s&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider {
					background: ${s};
				}
			`);const r=n.scrollbarSliderHoverBackground;r&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider:hover {
					background: ${r};
				}
			`);const o=n.scrollbarSliderActiveBackground;o&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider.active {
					background: ${o};
				}
			`)}return t}class Pit{constructor(e,t,i,s){this.contextViewService=e,this.telemetryService=t,this.notificationService=i,this.keybindingService=s,this.focusToReturn=null,this.lastContainer=null,this.block=null,this.blockDisposable=null,this.options={blockMouse:!0}}configure(e){this.options=e}showContextMenu(e){const t=e.getActions();if(!t.length)return;this.focusToReturn=vr();let i;const s=Ns(e.domForShadowRoot)?e.domForShadowRoot:void 0;this.contextViewService.showContextView({getAnchor:()=>e.getAnchor(),canRelayout:!1,anchorAlignment:e.anchorAlignment,anchorAxisAlignment:e.anchorAxisAlignment,render:r=>{var d;this.lastContainer=r;const o=e.getMenuClassName?e.getMenuClassName():"";o&&(r.className+=" "+o),this.options.blockMouse&&(this.block=r.appendChild(xe(".context-view-block")),this.block.style.position="fixed",this.block.style.cursor="initial",this.block.style.left="0",this.block.style.top="0",this.block.style.width="100%",this.block.style.height="100%",this.block.style.zIndex="-1",(d=this.blockDisposable)==null||d.dispose(),this.blockDisposable=re(this.block,Se.MOUSE_DOWN,u=>u.stopPropagation()));const a=new ue,l=e.actionRunner||new u0;l.onWillRun(u=>this.onActionRun(u,!e.skipTelemetry),this,a),l.onDidRun(this.onDidActionRun,this,a),i=new Ny(r,t,{actionViewItemProvider:e.getActionViewItem,context:e.getActionsContext?e.getActionsContext():null,actionRunner:l,getKeyBinding:e.getKeyBinding?e.getKeyBinding:u=>this.keybindingService.lookupKeybinding(u.id)},Tit),i.onDidCancel(()=>this.contextViewService.hideContextView(!0),null,a),i.onDidBlur(()=>this.contextViewService.hideContextView(!0),null,a);const c=nt(r);return a.add(re(c,Se.BLUR,()=>this.contextViewService.hideContextView(!0))),a.add(re(c,Se.MOUSE_DOWN,u=>{if(u.defaultPrevented)return;const h=new bd(c,u);let f=h.target;if(!h.rightButton){for(;f;){if(f===r)return;f=f.parentElement}this.contextViewService.hideContextView(!0)}})),Ld(a,i)},focus:()=>{i==null||i.focus(!!e.autoSelectFirstItem)},onHide:r=>{var o,a,l;(o=e.onHide)==null||o.call(e,!!r),this.block&&(this.block.remove(),this.block=null),(a=this.blockDisposable)==null||a.dispose(),this.blockDisposable=null,this.lastContainer&&(vr()===this.lastContainer||Es(vr(),this.lastContainer))&&((l=this.focusToReturn)==null||l.focus()),this.lastContainer=null}},s,!!s)}onActionRun(e,t){t&&this.telemetryService.publicLog2("workbenchActionExecuted",{id:e.action.id,from:"contextMenu"}),this.contextViewService.hideContextView(!1)}onDidActionRun(e){e.error&&!Vc(e.error)&&this.notificationService.error(e.error)}}var Oit=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},IC=function(n,e){return function(t,i){e(t,i,n)}};let l$=class extends ee{get contextMenuHandler(){return this._contextMenuHandler||(this._contextMenuHandler=new Pit(this.contextViewService,this.telemetryService,this.notificationService,this.keybindingService)),this._contextMenuHandler}constructor(e,t,i,s,r,o){super(),this.telemetryService=e,this.notificationService=t,this.contextViewService=i,this.keybindingService=s,this.menuService=r,this.contextKeyService=o,this._contextMenuHandler=void 0,this._onDidShowContextMenu=this._store.add(new X),this.onDidShowContextMenu=this._onDidShowContextMenu.event,this._onDidHideContextMenu=this._store.add(new X)}configure(e){this.contextMenuHandler.configure(e)}showContextMenu(e){e=c$.transform(e,this.menuService,this.contextKeyService),this.contextMenuHandler.showContextMenu({...e,onHide:t=>{var i;(i=e.onHide)==null||i.call(e,t),this._onDidHideContextMenu.fire()}}),vg.getInstance().resetKeyStatus(),this._onDidShowContextMenu.fire()}};l$=Oit([IC(0,Hr),IC(1,jn),IC(2,hp),IC(3,hi),IC(4,Yl),IC(5,at)],l$);var c$;(function(n){function e(i){return i&&i.menuId instanceof ze}function t(i,s,r){if(!e(i))return i;const{menuId:o,menuActionOptions:a,contextKeyService:l}=i;return{...i,getActions:()=>{const c=[];if(o){const d=s.getMenuActions(o,l??r,a);Rit(d,c)}return i.getActions?Ts.join(i.getActions(),c):c}}}n.transform=t})(c$||(c$={}));var XP;(function(n){n[n.API=0]="API",n[n.USER=1]="USER"})(XP||(XP={}));var cQ=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},QP=function(n,e){return function(t,i){e(t,i,n)}};let d$=class{constructor(e){this._commandService=e}async open(e,t){if(!O3(e,mt.command))return!1;if(!(t!=null&&t.allowCommands)||(typeof e=="string"&&(e=Xe.parse(e)),Array.isArray(t.allowCommands)&&!t.allowCommands.includes(e.path)))return!0;let i=[];try{i=NU(decodeURIComponent(e.query))}catch{try{i=NU(e.query)}catch{}}return Array.isArray(i)||(i=[i]),await this._commandService.executeCommand(e.path,...i),!0}};d$=cQ([QP(0,Vi)],d$);let u$=class{constructor(e){this._editorService=e}async open(e,t){typeof e=="string"&&(e=Xe.parse(e));const{selection:i,uri:s}=aJe(e);return e=s,e.scheme===mt.file&&(e=UJe(e)),await this._editorService.openCodeEditor({resource:e,options:{selection:i,source:t!=null&&t.fromUserGesture?XP.USER:XP.API,...t==null?void 0:t.editorOptions}},this._editorService.getFocusedCodeEditor(),t==null?void 0:t.openToSide),!0}};u$=cQ([QP(0,ri)],u$);let h$=class{constructor(e,t){this._openers=new xo,this._validators=new xo,this._resolvers=new xo,this._resolvedUriTargets=new $s(i=>i.with({path:null,fragment:null,query:null}).toString()),this._externalOpeners=new xo,this._defaultExternalOpener={openExternal:async i=>(Pz(i,mt.http,mt.https)?j0e(i):Ei.location.href=i,!0)},this._openers.push({open:async(i,s)=>s!=null&&s.openExternal||Pz(i,mt.mailto,mt.http,mt.https,mt.vsls)?(await this._doOpenExternal(i,s),!0):!1}),this._openers.push(new d$(t)),this._openers.push(new u$(e))}registerOpener(e){return{dispose:this._openers.unshift(e)}}async open(e,t){const i=typeof e=="string"?Xe.parse(e):e,s=this._resolvedUriTargets.get(i)??e;for(const r of this._validators)if(!await r.shouldOpen(s,t))return!1;for(const r of this._openers)if(await r.open(e,t))return!0;return!1}async resolveExternalUri(e,t){for(const i of this._resolvers)try{const s=await i.resolveExternalUri(e,t);if(s)return this._resolvedUriTargets.has(s.resolved)||this._resolvedUriTargets.set(s.resolved,e),s}catch{}throw new Error("Could not resolve external URI: "+e.toString())}async _doOpenExternal(e,t){const i=typeof e=="string"?Xe.parse(e):e;let s;try{s=(await this.resolveExternalUri(i,t)).resolved}catch{s=i}let r;if(typeof e=="string"&&i.toString()===s.toString()?r=e:r=encodeURI(s.toString(!0)),t!=null&&t.allowContributedOpeners){const o=typeof(t==null?void 0:t.allowContributedOpeners)=="string"?t==null?void 0:t.allowContributedOpeners:void 0;for(const a of this._externalOpeners)if(await a.openExternal(r,{sourceUri:i,preferredOpenerId:o},xt.None))return!0}return this._defaultExternalOpener.openExternal(r,{sourceUri:i},xt.None)}dispose(){this._validators.clear()}};h$=cQ([QP(0,ri),QP(1,Vi)],h$);const wa=Wt("editorWorkerService");var Nn;(function(n){n[n.Hint=1]="Hint",n[n.Info=2]="Info",n[n.Warning=4]="Warning",n[n.Error=8]="Error"})(Nn||(Nn={}));(function(n){function e(o,a){return a-o}n.compare=e;const t=Object.create(null);t[n.Error]=v("sev.error","Error"),t[n.Warning]=v("sev.warning","Warning"),t[n.Info]=v("sev.info","Info");function i(o){return t[o]||""}n.toString=i;function s(o){switch(o){case Un.Error:return n.Error;case Un.Warning:return n.Warning;case Un.Info:return n.Info;case Un.Ignore:return n.Hint}}n.fromSeverity=s;function r(o){switch(o){case n.Error:return Un.Error;case n.Warning:return Un.Warning;case n.Info:return Un.Info;case n.Hint:return Un.Ignore}}n.toSeverity=r})(Nn||(Nn={}));var JP;(function(n){const e="";function t(s){return i(s,!0)}n.makeKey=t;function i(s,r){const o=[e];return s.source?o.push(s.source.replace("","\\")):o.push(e),s.code?typeof s.code=="string"?o.push(s.code.replace("","\\")):o.push(s.code.value.replace("","\\")):o.push(e),s.severity!==void 0&&s.severity!==null?o.push(Nn.toString(s.severity)):o.push(e),s.message&&r?o.push(s.message.replace("","\\")):o.push(e),s.startLineNumber!==void 0&&s.startLineNumber!==null?o.push(s.startLineNumber.toString()):o.push(e),s.startColumn!==void 0&&s.startColumn!==null?o.push(s.startColumn.toString()):o.push(e),s.endLineNumber!==void 0&&s.endLineNumber!==null?o.push(s.endLineNumber.toString()):o.push(e),s.endColumn!==void 0&&s.endColumn!==null?o.push(s.endColumn.toString()):o.push(e),o.push(e),o.join("")}n.makeKeyOptionalMessage=i})(JP||(JP={}));const Cf=Wt("markerService"),Q1e=B("editor.lineHighlightBackground",null,v("lineHighlight","Background color for the highlight of line at the cursor position.")),$le=B("editor.lineHighlightBorder",{dark:"#282828",light:"#eeeeee",hcDark:"#f38518",hcLight:Yt},v("lineHighlightBorderBox","Background color for the border around the line at the cursor position."));B("editor.rangeHighlightBackground",{dark:"#ffffff0b",light:"#fdff0033",hcDark:null,hcLight:null},v("rangeHighlight","Background color of highlighted ranges, like by quick open and find features. The color must not be opaque so as not to hide underlying decorations."),!0);B("editor.rangeHighlightBorder",{dark:null,light:null,hcDark:nn,hcLight:nn},v("rangeHighlightBorder","Background color of the border around highlighted ranges."));B("editor.symbolHighlightBackground",{dark:wg,light:wg,hcDark:null,hcLight:null},v("symbolHighlight","Background color of highlighted symbol, like for go to definition or go next/previous symbol. The color must not be opaque so as not to hide underlying decorations."),!0);B("editor.symbolHighlightBorder",{dark:null,light:null,hcDark:nn,hcLight:nn},v("symbolHighlightBorder","Background color of the border around highlighted symbols."));const kB=B("editorCursor.foreground",{dark:"#AEAFAD",light:ge.black,hcDark:ge.white,hcLight:"#0F4A85"},v("caret","Color of the editor cursor.")),dQ=B("editorCursor.background",null,v("editorCursorBackground","The background color of the editor cursor. Allows customizing the color of a character overlapped by a block cursor.")),J1e=B("editorMultiCursor.primary.foreground",kB,v("editorMultiCursorPrimaryForeground","Color of the primary editor cursor when multiple cursors are present.")),Fit=B("editorMultiCursor.primary.background",dQ,v("editorMultiCursorPrimaryBackground","The background color of the primary editor cursor when multiple cursors are present. Allows customizing the color of a character overlapped by a block cursor.")),eye=B("editorMultiCursor.secondary.foreground",kB,v("editorMultiCursorSecondaryForeground","Color of secondary editor cursors when multiple cursors are present.")),Bit=B("editorMultiCursor.secondary.background",dQ,v("editorMultiCursorSecondaryBackground","The background color of secondary editor cursors when multiple cursors are present. Allows customizing the color of a character overlapped by a block cursor.")),uQ=B("editorWhitespace.foreground",{dark:"#e3e4e229",light:"#33333333",hcDark:"#e3e4e229",hcLight:"#CCCCCC"},v("editorWhitespaces","Color of whitespace characters in the editor.")),Wit=B("editorLineNumber.foreground",{dark:"#858585",light:"#237893",hcDark:ge.white,hcLight:"#292929"},v("editorLineNumbers","Color of editor line numbers.")),Hit=B("editorIndentGuide.background",uQ,v("editorIndentGuides","Color of the editor indentation guides."),!1,v("deprecatedEditorIndentGuides","'editorIndentGuide.background' is deprecated. Use 'editorIndentGuide.background1' instead.")),Vit=B("editorIndentGuide.activeBackground",uQ,v("editorActiveIndentGuide","Color of the active editor indentation guides."),!1,v("deprecatedEditorActiveIndentGuide","'editorIndentGuide.activeBackground' is deprecated. Use 'editorIndentGuide.activeBackground1' instead.")),QN=B("editorIndentGuide.background1",Hit,v("editorIndentGuides1","Color of the editor indentation guides (1).")),zit=B("editorIndentGuide.background2","#00000000",v("editorIndentGuides2","Color of the editor indentation guides (2).")),Uit=B("editorIndentGuide.background3","#00000000",v("editorIndentGuides3","Color of the editor indentation guides (3).")),$it=B("editorIndentGuide.background4","#00000000",v("editorIndentGuides4","Color of the editor indentation guides (4).")),jit=B("editorIndentGuide.background5","#00000000",v("editorIndentGuides5","Color of the editor indentation guides (5).")),Kit=B("editorIndentGuide.background6","#00000000",v("editorIndentGuides6","Color of the editor indentation guides (6).")),JN=B("editorIndentGuide.activeBackground1",Vit,v("editorActiveIndentGuide1","Color of the active editor indentation guides (1).")),qit=B("editorIndentGuide.activeBackground2","#00000000",v("editorActiveIndentGuide2","Color of the active editor indentation guides (2).")),Git=B("editorIndentGuide.activeBackground3","#00000000",v("editorActiveIndentGuide3","Color of the active editor indentation guides (3).")),Yit=B("editorIndentGuide.activeBackground4","#00000000",v("editorActiveIndentGuide4","Color of the active editor indentation guides (4).")),Zit=B("editorIndentGuide.activeBackground5","#00000000",v("editorActiveIndentGuide5","Color of the active editor indentation guides (5).")),Xit=B("editorIndentGuide.activeBackground6","#00000000",v("editorActiveIndentGuide6","Color of the active editor indentation guides (6).")),Qit=B("editorActiveLineNumber.foreground",{dark:"#c6c6c6",light:"#0B216F",hcDark:nn,hcLight:nn},v("editorActiveLineNumber","Color of editor active line number"),!1,v("deprecatedEditorActiveLineNumber","Id is deprecated. Use 'editorLineNumber.activeForeground' instead."));B("editorLineNumber.activeForeground",Qit,v("editorActiveLineNumber","Color of editor active line number"));const Jit=B("editorLineNumber.dimmedForeground",null,v("editorDimmedLineNumber","Color of the final editor line when editor.renderFinalNewline is set to dimmed."));B("editorRuler.foreground",{dark:"#5A5A5A",light:ge.lightgrey,hcDark:ge.white,hcLight:"#292929"},v("editorRuler","Color of the editor rulers."));B("editorCodeLens.foreground",{dark:"#999999",light:"#919191",hcDark:"#999999",hcLight:"#292929"},v("editorCodeLensForeground","Foreground color of editor CodeLens"));B("editorBracketMatch.background",{dark:"#0064001a",light:"#0064001a",hcDark:"#0064001a",hcLight:"#0000"},v("editorBracketMatchBackground","Background color behind matching brackets"));B("editorBracketMatch.border",{dark:"#888",light:"#B9B9B9",hcDark:Yt,hcLight:Yt},v("editorBracketMatchBorder","Color for matching brackets boxes"));const ent=B("editorOverviewRuler.border",{dark:"#7f7f7f4d",light:"#7f7f7f4d",hcDark:"#7f7f7f4d",hcLight:"#666666"},v("editorOverviewRulerBorder","Color of the overview ruler border.")),tnt=B("editorOverviewRuler.background",null,v("editorOverviewRulerBackground","Background color of the editor overview ruler."));B("editorGutter.background",Ad,v("editorGutter","Background color of the editor gutter. The gutter contains the glyph margins and the line numbers."));B("editorUnnecessaryCode.border",{dark:null,light:null,hcDark:ge.fromHex("#fff").transparent(.8),hcLight:Yt},v("unnecessaryCodeBorder","Border color of unnecessary (unused) source code in the editor."));const int=B("editorUnnecessaryCode.opacity",{dark:ge.fromHex("#000a"),light:ge.fromHex("#0007"),hcDark:null,hcLight:null},v("unnecessaryCodeOpacity",`Opacity of unnecessary (unused) source code in the editor. For example, "#000000c0" will render the code with 75% opacity. For high contrast themes, use the  'editorUnnecessaryCode.border' theme color to underline unnecessary code instead of fading it out.`));B("editorGhostText.border",{dark:null,light:null,hcDark:ge.fromHex("#fff").transparent(.8),hcLight:ge.fromHex("#292929").transparent(.8)},v("editorGhostTextBorder","Border color of ghost text in the editor."));const nnt=B("editorGhostText.foreground",{dark:ge.fromHex("#ffffff56"),light:ge.fromHex("#0007"),hcDark:null,hcLight:null},v("editorGhostTextForeground","Foreground color of the ghost text in the editor."));B("editorGhostText.background",null,v("editorGhostTextBackground","Background color of the ghost text in the editor."));const snt=new ge(new Jt(0,122,204,.6)),tye=B("editorOverviewRuler.rangeHighlightForeground",snt,v("overviewRulerRangeHighlight","Overview ruler marker color for range highlights. The color must not be opaque so as not to hide underlying decorations."),!0),rnt=B("editorOverviewRuler.errorForeground",{dark:new ge(new Jt(255,18,18,.7)),light:new ge(new Jt(255,18,18,.7)),hcDark:new ge(new Jt(255,50,50,1)),hcLight:"#B5200D"},v("overviewRuleError","Overview ruler marker color for errors.")),ont=B("editorOverviewRuler.warningForeground",{dark:Jg,light:Jg,hcDark:qI,hcLight:qI},v("overviewRuleWarning","Overview ruler marker color for warnings.")),ant=B("editorOverviewRuler.infoForeground",{dark:af,light:af,hcDark:GI,hcLight:GI},v("overviewRuleInfo","Overview ruler marker color for infos.")),iye=B("editorBracketHighlight.foreground1",{dark:"#FFD700",light:"#0431FAFF",hcDark:"#FFD700",hcLight:"#0431FAFF"},v("editorBracketHighlightForeground1","Foreground color of brackets (1). Requires enabling bracket pair colorization.")),nye=B("editorBracketHighlight.foreground2",{dark:"#DA70D6",light:"#319331FF",hcDark:"#DA70D6",hcLight:"#319331FF"},v("editorBracketHighlightForeground2","Foreground color of brackets (2). Requires enabling bracket pair colorization.")),sye=B("editorBracketHighlight.foreground3",{dark:"#179FFF",light:"#7B3814FF",hcDark:"#87CEFA",hcLight:"#7B3814FF"},v("editorBracketHighlightForeground3","Foreground color of brackets (3). Requires enabling bracket pair colorization.")),rye=B("editorBracketHighlight.foreground4","#00000000",v("editorBracketHighlightForeground4","Foreground color of brackets (4). Requires enabling bracket pair colorization.")),oye=B("editorBracketHighlight.foreground5","#00000000",v("editorBracketHighlightForeground5","Foreground color of brackets (5). Requires enabling bracket pair colorization.")),aye=B("editorBracketHighlight.foreground6","#00000000",v("editorBracketHighlightForeground6","Foreground color of brackets (6). Requires enabling bracket pair colorization.")),lnt=B("editorBracketHighlight.unexpectedBracket.foreground",{dark:new ge(new Jt(255,18,18,.8)),light:new ge(new Jt(255,18,18,.8)),hcDark:"new Color(new RGBA(255, 50, 50, 1))",hcLight:"#B5200D"},v("editorBracketHighlightUnexpectedBracketForeground","Foreground color of unexpected brackets.")),cnt=B("editorBracketPairGuide.background1","#00000000",v("editorBracketPairGuide.background1","Background color of inactive bracket pair guides (1). Requires enabling bracket pair guides.")),dnt=B("editorBracketPairGuide.background2","#00000000",v("editorBracketPairGuide.background2","Background color of inactive bracket pair guides (2). Requires enabling bracket pair guides.")),unt=B("editorBracketPairGuide.background3","#00000000",v("editorBracketPairGuide.background3","Background color of inactive bracket pair guides (3). Requires enabling bracket pair guides.")),hnt=B("editorBracketPairGuide.background4","#00000000",v("editorBracketPairGuide.background4","Background color of inactive bracket pair guides (4). Requires enabling bracket pair guides.")),fnt=B("editorBracketPairGuide.background5","#00000000",v("editorBracketPairGuide.background5","Background color of inactive bracket pair guides (5). Requires enabling bracket pair guides.")),gnt=B("editorBracketPairGuide.background6","#00000000",v("editorBracketPairGuide.background6","Background color of inactive bracket pair guides (6). Requires enabling bracket pair guides.")),pnt=B("editorBracketPairGuide.activeBackground1","#00000000",v("editorBracketPairGuide.activeBackground1","Background color of active bracket pair guides (1). Requires enabling bracket pair guides.")),mnt=B("editorBracketPairGuide.activeBackground2","#00000000",v("editorBracketPairGuide.activeBackground2","Background color of active bracket pair guides (2). Requires enabling bracket pair guides.")),_nt=B("editorBracketPairGuide.activeBackground3","#00000000",v("editorBracketPairGuide.activeBackground3","Background color of active bracket pair guides (3). Requires enabling bracket pair guides.")),vnt=B("editorBracketPairGuide.activeBackground4","#00000000",v("editorBracketPairGuide.activeBackground4","Background color of active bracket pair guides (4). Requires enabling bracket pair guides.")),bnt=B("editorBracketPairGuide.activeBackground5","#00000000",v("editorBracketPairGuide.activeBackground5","Background color of active bracket pair guides (5). Requires enabling bracket pair guides.")),wnt=B("editorBracketPairGuide.activeBackground6","#00000000",v("editorBracketPairGuide.activeBackground6","Background color of active bracket pair guides (6). Requires enabling bracket pair guides."));B("editorUnicodeHighlight.border",Jg,v("editorUnicodeHighlight.border","Border color used to highlight unicode characters."));B("editorUnicodeHighlight.background",mXe,v("editorUnicodeHighlight.background","Background color used to highlight unicode characters."));zc((n,e)=>{const t=n.getColor(Ad),i=n.getColor(Q1e),s=i&&!i.isTransparent()?i:t;s&&e.addRule(`.monaco-editor .inputarea.ime-input { background-color: ${s}; }`)});function Cnt(n,e){const t=[],i=[];for(const s of n)e.has(s)||t.push(s);for(const s of e)n.has(s)||i.push(s);return{removed:t,added:i}}function ynt(n,e){const t=new Set;for(const i of e)n.has(i)&&t.add(i);return t}var Snt=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},jle=function(n,e){return function(t,i){e(t,i,n)}};let f$=class extends ee{constructor(e,t){super(),this._markerService=t,this._onDidChangeMarker=this._register(new X),this._markerDecorations=new $s,e.getModels().forEach(i=>this._onModelAdded(i)),this._register(e.onModelAdded(this._onModelAdded,this)),this._register(e.onModelRemoved(this._onModelRemoved,this)),this._register(this._markerService.onMarkerChanged(this._handleMarkerChange,this))}dispose(){super.dispose(),this._markerDecorations.forEach(e=>e.dispose()),this._markerDecorations.clear()}getMarker(e,t){const i=this._markerDecorations.get(e);return i&&i.getMarker(t)||null}_handleMarkerChange(e){e.forEach(t=>{const i=this._markerDecorations.get(t);i&&this._updateDecorations(i)})}_onModelAdded(e){const t=new xnt(e);this._markerDecorations.set(e.uri,t),this._updateDecorations(t)}_onModelRemoved(e){var i;const t=this._markerDecorations.get(e.uri);t&&(t.dispose(),this._markerDecorations.delete(e.uri)),(e.uri.scheme===mt.inMemory||e.uri.scheme===mt.internal||e.uri.scheme===mt.vscode)&&((i=this._markerService)==null||i.read({resource:e.uri}).map(s=>s.owner).forEach(s=>this._markerService.remove(s,[e.uri])))}_updateDecorations(e){const t=this._markerService.read({resource:e.model.uri,take:500});e.update(t)&&this._onDidChangeMarker.fire(e.model)}};f$=Snt([jle(0,Zi),jle(1,Cf)],f$);class xnt extends ee{constructor(e){super(),this.model=e,this._map=new SYe,this._register(Ye(()=>{this.model.deltaDecorations([...this._map.values()],[]),this._map.clear()}))}update(e){const{added:t,removed:i}=Cnt(new Set(this._map.keys()),new Set(e));if(t.length===0&&i.length===0)return!1;const s=i.map(a=>this._map.get(a)),r=t.map(a=>({range:this._createDecorationRange(this.model,a),options:this._createDecorationOption(a)})),o=this.model.deltaDecorations(s,r);for(const a of i)this._map.delete(a);for(let a=0;a<o.length;a++)this._map.set(t[a],o[a]);return!0}getMarker(e){return this._map.getKey(e.id)}_createDecorationRange(e,t){let i=M.lift(t);if(t.severity===Nn.Hint&&!this._hasMarkerTag(t,1)&&!this._hasMarkerTag(t,2)&&(i=i.setEndPosition(i.startLineNumber,i.startColumn+2)),i=e.validateRange(i),i.isEmpty()){const s=e.getLineLastNonWhitespaceColumn(i.startLineNumber)||e.getLineMaxColumn(i.startLineNumber);if(s===1||i.endColumn>=s)return i;const r=e.getWordAtPosition(i.getStartPosition());r&&(i=new M(i.startLineNumber,r.startColumn,i.endLineNumber,r.endColumn))}else if(t.endColumn===Number.MAX_VALUE&&t.startColumn===1&&i.startLineNumber===i.endLineNumber){const s=e.getLineFirstNonWhitespaceColumn(t.startLineNumber);s<i.endColumn&&(i=new M(i.startLineNumber,s,i.endLineNumber,i.endColumn),t.startColumn=s)}return i}_createDecorationOption(e){let t,i,s,r,o;switch(e.severity){case Nn.Hint:this._hasMarkerTag(e,2)?t=void 0:this._hasMarkerTag(e,1)?t="squiggly-unnecessary":t="squiggly-hint",s=0;break;case Nn.Info:t="squiggly-info",i=Dn(ant),s=10,o={color:Dn(BXe),position:1};break;case Nn.Warning:t="squiggly-warning",i=Dn(ont),s=20,o={color:Dn(WXe),position:1};break;case Nn.Error:default:t="squiggly-error",i=Dn(rnt),s=30,o={color:Dn(HXe),position:1};break}return e.tags&&(e.tags.indexOf(1)!==-1&&(r="squiggly-inline-unnecessary"),e.tags.indexOf(2)!==-1&&(r="squiggly-inline-deprecated")),{description:"marker-decoration",stickiness:1,className:t,showIfCollapsed:!0,overviewRuler:{color:i,position:Vl.Right},minimap:o,zIndex:s,inlineClassName:r}}_hasMarkerTag(e,t){return e.tags?e.tags.indexOf(t)>=0:!1}}const hQ=Wt("markerDecorationsService");class ms{static _nextVisibleColumn(e,t,i){return e===9?ms.nextRenderTabStop(t,i):N_(e)||oX(e)?t+2:t+1}static visibleColumnFromColumn(e,t,i){const s=Math.min(t-1,e.length),r=e.substring(0,s),o=new uP(r);let a=0;for(;!o.eol();){const l=dP(r,s,o.offset);o.nextGraphemeLength(),a=this._nextVisibleColumn(l,a,i)}return a}static columnFromVisibleColumn(e,t,i){if(t<=0)return 1;const s=e.length,r=new uP(e);let o=0,a=1;for(;!r.eol();){const l=dP(e,s,r.offset);r.nextGraphemeLength();const c=this._nextVisibleColumn(l,o,i),d=r.offset+1;if(c>=t){const u=t-o;return c-t<u?d:a}o=c,a=d}return s+1}static nextRenderTabStop(e,t){return e+t-e%t}static nextIndentTabStop(e,t){return e+t-e%t}static prevRenderTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}static prevIndentTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}}function Lnt(n,e,t){let i=0;for(let r=0;r<n.length;r++)n.charAt(r)==="	"?i=ms.nextIndentTabStop(i,e):i++;let s="";if(!t){const r=Math.floor(i/e);i=i%e;for(let o=0;o<r;o++)s+="	"}for(let r=0;r<i;r++)s+=" ";return s}function fQ(n,e,t){let i=lo(n);return i===-1&&(i=n.length),Lnt(n.substring(0,i),e,t)+n.substring(i)}class Kle{constructor(e,t,i,s){this.range=e,this.nestingLevel=t,this.nestingLevelOfEqualBracketType=i,this.isInvalid=s}}class knt{constructor(e,t,i,s,r,o){this.range=e,this.openingBracketRange=t,this.closingBracketRange=i,this.nestingLevel=s,this.nestingLevelOfEqualBracketType=r,this.bracketPairNode=o}get openingBracketInfo(){return this.bracketPairNode.openingBracket.bracketInfo}}class Ent extends knt{constructor(e,t,i,s,r,o,a){super(e,t,i,s,r,o),this.minVisibleColumnIndentation=a}}function Int(n,e,t,i){return n!==t?Xn(t-n,i):Xn(0,i-e)}const Lo=0;function eO(n){return n===0}const Ol=2**26;function Xn(n,e){return n*Ol+e}function Ic(n){const e=n,t=Math.floor(e/Ol),i=e-t*Ol;return new Rd(t,i)}function Dnt(n){return Math.floor(n/Ol)}function Tn(n,e){let t=n+e;return e>=Ol&&(t=t-n%Ol),t}function Nnt(n,e){return n.reduce((t,i)=>Tn(t,e(i)),Lo)}function lye(n,e){return n===e}function lD(n,e){const t=n,i=e;if(i-t<=0)return Lo;const r=Math.floor(t/Ol),o=Math.floor(i/Ol),a=i-o*Ol;if(r===o){const l=t-r*Ol;return Xn(0,a-l)}else return Xn(o-r,a)}function Ty(n,e){return n<e}function Ry(n,e){return n<=e}function mk(n,e){return n>=e}function D1(n){return Xn(n.lineNumber-1,n.column-1)}function jb(n,e){const t=n,i=Math.floor(t/Ol),s=t-i*Ol,r=e,o=Math.floor(r/Ol),a=r-o*Ol;return new M(i+1,s+1,o+1,a+1)}function Tnt(n){const e=mf(n);return Xn(e.length-1,e[e.length-1].length)}class Cg{static fromModelContentChanges(e){return e.map(i=>{const s=M.lift(i.range);return new Cg(D1(s.getStartPosition()),D1(s.getEndPosition()),Tnt(i.text))}).reverse()}constructor(e,t,i){this.startOffset=e,this.endOffset=t,this.newLength=i}toString(){return`[${Ic(this.startOffset)}...${Ic(this.endOffset)}) -> ${Ic(this.newLength)}`}}class Rnt{constructor(e){this.nextEditIdx=0,this.deltaOldToNewLineCount=0,this.deltaOldToNewColumnCount=0,this.deltaLineIdxInOld=-1,this.edits=e.map(t=>gQ.from(t))}getOffsetBeforeChange(e){return this.adjustNextEdit(e),this.translateCurToOld(e)}getDistanceToNextChange(e){this.adjustNextEdit(e);const t=this.edits[this.nextEditIdx],i=t?this.translateOldToCur(t.offsetObj):null;return i===null?null:lD(e,i)}translateOldToCur(e){return e.lineCount===this.deltaLineIdxInOld?Xn(e.lineCount+this.deltaOldToNewLineCount,e.columnCount+this.deltaOldToNewColumnCount):Xn(e.lineCount+this.deltaOldToNewLineCount,e.columnCount)}translateCurToOld(e){const t=Ic(e);return t.lineCount-this.deltaOldToNewLineCount===this.deltaLineIdxInOld?Xn(t.lineCount-this.deltaOldToNewLineCount,t.columnCount-this.deltaOldToNewColumnCount):Xn(t.lineCount-this.deltaOldToNewLineCount,t.columnCount)}adjustNextEdit(e){for(;this.nextEditIdx<this.edits.length;){const t=this.edits[this.nextEditIdx],i=this.translateOldToCur(t.endOffsetAfterObj);if(Ry(i,e)){this.nextEditIdx++;const s=Ic(i),r=Ic(this.translateOldToCur(t.endOffsetBeforeObj)),o=s.lineCount-r.lineCount;this.deltaOldToNewLineCount+=o;const a=this.deltaLineIdxInOld===t.endOffsetBeforeObj.lineCount?this.deltaOldToNewColumnCount:0,l=s.columnCount-r.columnCount;this.deltaOldToNewColumnCount=a+l,this.deltaLineIdxInOld=t.endOffsetBeforeObj.lineCount}else break}}}class gQ{static from(e){return new gQ(e.startOffset,e.endOffset,e.newLength)}constructor(e,t,i){this.endOffsetBeforeObj=Ic(t),this.endOffsetAfterObj=Ic(Tn(e,i)),this.offsetObj=Ic(e)}}const tA=[],ac=class ac{static create(e,t){if(e<=128&&t.length===0){let i=ac.cache[e];return i||(i=new ac(e,t),ac.cache[e]=i),i}return new ac(e,t)}static getEmpty(){return this.empty}constructor(e,t){this.items=e,this.additionalItems=t}add(e,t){const i=t.getKey(e);let s=i>>5;if(s===0){const o=1<<i|this.items;return o===this.items?this:ac.create(o,this.additionalItems)}s--;const r=this.additionalItems.slice(0);for(;r.length<s;)r.push(0);return r[s]|=1<<(i&31),ac.create(this.items,r)}merge(e){const t=this.items|e.items;if(this.additionalItems===tA&&e.additionalItems===tA)return t===this.items?this:t===e.items?e:ac.create(t,tA);const i=[];for(let s=0;s<Math.max(this.additionalItems.length,e.additionalItems.length);s++){const r=this.additionalItems[s]||0,o=e.additionalItems[s]||0;i.push(r|o)}return ac.create(t,i)}intersects(e){if(this.items&e.items)return!0;for(let t=0;t<Math.min(this.additionalItems.length,e.additionalItems.length);t++)if(this.additionalItems[t]&e.additionalItems[t])return!0;return!1}};ac.cache=new Array(129),ac.empty=ac.create(0,tA);let Ua=ac;const qle={getKey(n){return n}};class cye{constructor(){this.items=new Map}getKey(e){let t=this.items.get(e);return t===void 0&&(t=this.items.size,this.items.set(e,t)),t}}class pQ{get length(){return this._length}constructor(e){this._length=e}}class cD extends pQ{static create(e,t,i){let s=e.length;return t&&(s=Tn(s,t.length)),i&&(s=Tn(s,i.length)),new cD(s,e,t,i,t?t.missingOpeningBracketIds:Ua.getEmpty())}get kind(){return 2}get listHeight(){return 0}get childrenLength(){return 3}getChild(e){switch(e){case 0:return this.openingBracket;case 1:return this.child;case 2:return this.closingBracket}throw new Error("Invalid child index")}get children(){const e=[];return e.push(this.openingBracket),this.child&&e.push(this.child),this.closingBracket&&e.push(this.closingBracket),e}constructor(e,t,i,s,r){super(e),this.openingBracket=t,this.child=i,this.closingBracket=s,this.missingOpeningBracketIds=r}canBeReused(e){return!(this.closingBracket===null||e.intersects(this.missingOpeningBracketIds))}deepClone(){return new cD(this.length,this.openingBracket.deepClone(),this.child&&this.child.deepClone(),this.closingBracket&&this.closingBracket.deepClone(),this.missingOpeningBracketIds)}computeMinIndentation(e,t){return this.child?this.child.computeMinIndentation(Tn(e,this.openingBracket.length),t):Number.MAX_SAFE_INTEGER}}class cf extends pQ{static create23(e,t,i,s=!1){let r=e.length,o=e.missingOpeningBracketIds;if(e.listHeight!==t.listHeight)throw new Error("Invalid list heights");if(r=Tn(r,t.length),o=o.merge(t.missingOpeningBracketIds),i){if(e.listHeight!==i.listHeight)throw new Error("Invalid list heights");r=Tn(r,i.length),o=o.merge(i.missingOpeningBracketIds)}return s?new Ant(r,e.listHeight+1,e,t,i,o):new dD(r,e.listHeight+1,e,t,i,o)}static getEmpty(){return new Mnt(Lo,0,[],Ua.getEmpty())}get kind(){return 4}get missingOpeningBracketIds(){return this._missingOpeningBracketIds}constructor(e,t,i){super(e),this.listHeight=t,this._missingOpeningBracketIds=i,this.cachedMinIndentation=-1}throwIfImmutable(){}makeLastElementMutable(){this.throwIfImmutable();const e=this.childrenLength;if(e===0)return;const t=this.getChild(e-1),i=t.kind===4?t.toMutable():t;return t!==i&&this.setChild(e-1,i),i}makeFirstElementMutable(){if(this.throwIfImmutable(),this.childrenLength===0)return;const t=this.getChild(0),i=t.kind===4?t.toMutable():t;return t!==i&&this.setChild(0,i),i}canBeReused(e){if(e.intersects(this.missingOpeningBracketIds)||this.childrenLength===0)return!1;let t=this;for(;t.kind===4;){const i=t.childrenLength;if(i===0)throw new li;t=t.getChild(i-1)}return t.canBeReused(e)}handleChildrenChanged(){this.throwIfImmutable();const e=this.childrenLength;let t=this.getChild(0).length,i=this.getChild(0).missingOpeningBracketIds;for(let s=1;s<e;s++){const r=this.getChild(s);t=Tn(t,r.length),i=i.merge(r.missingOpeningBracketIds)}this._length=t,this._missingOpeningBracketIds=i,this.cachedMinIndentation=-1}computeMinIndentation(e,t){if(this.cachedMinIndentation!==-1)return this.cachedMinIndentation;let i=Number.MAX_SAFE_INTEGER,s=e;for(let r=0;r<this.childrenLength;r++){const o=this.getChild(r);o&&(i=Math.min(i,o.computeMinIndentation(s,t)),s=Tn(s,o.length))}return this.cachedMinIndentation=i,i}}class dD extends cf{get childrenLength(){return this._item3!==null?3:2}getChild(e){switch(e){case 0:return this._item1;case 1:return this._item2;case 2:return this._item3}throw new Error("Invalid child index")}setChild(e,t){switch(e){case 0:this._item1=t;return;case 1:this._item2=t;return;case 2:this._item3=t;return}throw new Error("Invalid child index")}get children(){return this._item3?[this._item1,this._item2,this._item3]:[this._item1,this._item2]}get item1(){return this._item1}get item2(){return this._item2}get item3(){return this._item3}constructor(e,t,i,s,r,o){super(e,t,o),this._item1=i,this._item2=s,this._item3=r}deepClone(){return new dD(this.length,this.listHeight,this._item1.deepClone(),this._item2.deepClone(),this._item3?this._item3.deepClone():null,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){if(this._item3)throw new Error("Cannot append to a full (2,3) tree node");this.throwIfImmutable(),this._item3=e,this.handleChildrenChanged()}unappendChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item3;return this._item3=null,this.handleChildrenChanged(),e}prependChildOfSameHeight(e){if(this._item3)throw new Error("Cannot prepend to a full (2,3) tree node");this.throwIfImmutable(),this._item3=this._item2,this._item2=this._item1,this._item1=e,this.handleChildrenChanged()}unprependChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item1;return this._item1=this._item2,this._item2=this._item3,this._item3=null,this.handleChildrenChanged(),e}toMutable(){return this}}class Ant extends dD{toMutable(){return new dD(this.length,this.listHeight,this.item1,this.item2,this.item3,this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}class tO extends cf{get childrenLength(){return this._children.length}getChild(e){return this._children[e]}setChild(e,t){this._children[e]=t}get children(){return this._children}constructor(e,t,i,s){super(e,t,s),this._children=i}deepClone(){const e=new Array(this._children.length);for(let t=0;t<this._children.length;t++)e[t]=this._children[t].deepClone();return new tO(this.length,this.listHeight,e,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){this.throwIfImmutable(),this._children.push(e),this.handleChildrenChanged()}unappendChild(){this.throwIfImmutable();const e=this._children.pop();return this.handleChildrenChanged(),e}prependChildOfSameHeight(e){this.throwIfImmutable(),this._children.unshift(e),this.handleChildrenChanged()}unprependChild(){this.throwIfImmutable();const e=this._children.shift();return this.handleChildrenChanged(),e}toMutable(){return this}}class Mnt extends tO{toMutable(){return new tO(this.length,this.listHeight,[...this.children],this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}const Pnt=[];class mQ extends pQ{get listHeight(){return 0}get childrenLength(){return 0}getChild(e){return null}get children(){return Pnt}deepClone(){return this}}class rb extends mQ{get kind(){return 0}get missingOpeningBracketIds(){return Ua.getEmpty()}canBeReused(e){return!0}computeMinIndentation(e,t){const i=Ic(e),s=(i.columnCount===0?i.lineCount:i.lineCount+1)+1,r=Dnt(Tn(e,this.length))+1;let o=Number.MAX_SAFE_INTEGER;for(let a=s;a<=r;a++){const l=t.getLineFirstNonWhitespaceColumn(a),c=t.getLineContent(a);if(l===0)continue;const d=ms.visibleColumnFromColumn(c,l,t.getOptions().tabSize);o=Math.min(o,d)}return o}}class iO extends mQ{static create(e,t,i){return new iO(e,t,i)}get kind(){return 1}get missingOpeningBracketIds(){return Ua.getEmpty()}constructor(e,t,i){super(e),this.bracketInfo=t,this.bracketIds=i}get text(){return this.bracketInfo.bracketText}get languageId(){return this.bracketInfo.languageId}canBeReused(e){return!1}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}}class Ont extends mQ{get kind(){return 3}constructor(e,t){super(t),this.missingOpeningBracketIds=e}canBeReused(e){return!e.intersects(this.missingOpeningBracketIds)}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}}let rm=class{constructor(e,t,i,s,r){this.length=e,this.kind=t,this.bracketId=i,this.bracketIds=s,this.astNode=r}};class dye{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.reader=new Fnt(this.textModel,this.bracketTokens),this._offset=Lo,this.didPeek=!1,this.peeked=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}get offset(){return this._offset}get length(){return Xn(this.textBufferLineCount-1,this.textBufferLastLineLength)}skip(e){this.didPeek=!1,this._offset=Tn(this._offset,e);const t=Ic(this._offset);this.reader.setPosition(t.lineCount,t.columnCount)}read(){let e;return this.peeked?(this.didPeek=!1,e=this.peeked):e=this.reader.read(),e&&(this._offset=Tn(this._offset,e.length)),e}peek(){return this.didPeek||(this.peeked=this.reader.read(),this.didPeek=!0),this.peeked}}class Fnt{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.lineIdx=0,this.line=null,this.lineCharOffset=0,this.lineTokens=null,this.lineTokenOffset=0,this.peekedToken=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}setPosition(e,t){e===this.lineIdx?(this.lineCharOffset=t,this.line!==null&&(this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset))):(this.lineIdx=e,this.lineCharOffset=t,this.line=null),this.peekedToken=null}read(){if(this.peekedToken){const r=this.peekedToken;return this.peekedToken=null,this.lineCharOffset+=r.length,r}if(this.lineIdx>this.textBufferLineCount-1||this.lineIdx===this.textBufferLineCount-1&&this.lineCharOffset>=this.textBufferLastLineLength)return null;this.line===null&&(this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.line=this.lineTokens.getLineContent(),this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset));const e=this.lineIdx,t=this.lineCharOffset;let i=0;for(;;){const r=this.lineTokens,o=r.getCount();let a=null;if(this.lineTokenOffset<o){const l=r.getMetadata(this.lineTokenOffset);for(;this.lineTokenOffset+1<o&&l===r.getMetadata(this.lineTokenOffset+1);)this.lineTokenOffset++;const c=ra.getTokenType(l)===0,d=ra.containsBalancedBrackets(l),u=r.getEndOffset(this.lineTokenOffset);if(d&&c&&this.lineCharOffset<u){const h=r.getLanguageId(this.lineTokenOffset),f=this.line.substring(this.lineCharOffset,u),g=this.bracketTokens.getSingleLanguageBracketTokens(h),p=g.regExpGlobal;if(p){p.lastIndex=0;const _=p.exec(f);_&&(a=g.getToken(_[0]),a&&(this.lineCharOffset+=_.index))}}if(i+=u-this.lineCharOffset,a)if(e!==this.lineIdx||t!==this.lineCharOffset){this.peekedToken=a;break}else return this.lineCharOffset+=a.length,a;else this.lineTokenOffset++,this.lineCharOffset=u}else if(this.lineIdx===this.textBufferLineCount-1||(this.lineIdx++,this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.lineTokenOffset=0,this.line=this.lineTokens.getLineContent(),this.lineCharOffset=0,i+=33,i>1e3))break;if(i>1500)break}const s=Int(e,t,this.lineIdx,this.lineCharOffset);return new rm(s,0,-1,Ua.getEmpty(),new rb(s))}}class Bnt{constructor(e,t){this.text=e,this._offset=Lo,this.idx=0;const i=t.getRegExpStr(),s=i?new RegExp(i+`|
`,"gi"):null,r=[];let o,a=0,l=0,c=0,d=0;const u=[];for(let g=0;g<60;g++)u.push(new rm(Xn(0,g),0,-1,Ua.getEmpty(),new rb(Xn(0,g))));const h=[];for(let g=0;g<60;g++)h.push(new rm(Xn(1,g),0,-1,Ua.getEmpty(),new rb(Xn(1,g))));if(s)for(s.lastIndex=0;(o=s.exec(e))!==null;){const g=o.index,p=o[0];if(p===`
`)a++,l=g+1;else{if(c!==g){let _;if(d===a){const w=g-c;if(w<u.length)_=u[w];else{const b=Xn(0,w);_=new rm(b,0,-1,Ua.getEmpty(),new rb(b))}}else{const w=a-d,b=g-l;if(w===1&&b<h.length)_=h[b];else{const y=Xn(w,b);_=new rm(y,0,-1,Ua.getEmpty(),new rb(y))}}r.push(_)}r.push(t.getToken(p)),c=g+p.length,d=a}}const f=e.length;if(c!==f){const g=d===a?Xn(0,f-c):Xn(a-d,f-l);r.push(new rm(g,0,-1,Ua.getEmpty(),new rb(g)))}this.length=Xn(a,f-l),this.tokens=r}get offset(){return this._offset}read(){return this.tokens[this.idx++]||null}peek(){return this.tokens[this.idx]||null}skip(e){throw new gje}}class _Q{static createFromLanguage(e,t){function i(r){return t.getKey(`${r.languageId}:::${r.bracketText}`)}const s=new Map;for(const r of e.bracketsNew.openingBrackets){const o=Xn(0,r.bracketText.length),a=i(r),l=Ua.getEmpty().add(a,qle);s.set(r.bracketText,new rm(o,1,a,l,iO.create(o,r,l)))}for(const r of e.bracketsNew.closingBrackets){const o=Xn(0,r.bracketText.length);let a=Ua.getEmpty();const l=r.getOpeningBrackets();for(const c of l)a=a.add(i(c),qle);s.set(r.bracketText,new rm(o,2,i(l[0]),a,iO.create(o,r,a)))}return new _Q(s)}constructor(e){this.map=e,this.hasRegExp=!1,this._regExpGlobal=null}getRegExpStr(){if(this.isEmpty)return null;{const e=[...this.map.keys()];return e.sort(),e.reverse(),e.map(t=>Wnt(t)).join("|")}}get regExpGlobal(){if(!this.hasRegExp){const e=this.getRegExpStr();this._regExpGlobal=e?new RegExp(e,"gi"):null,this.hasRegExp=!0}return this._regExpGlobal}getToken(e){return this.map.get(e.toLowerCase())}findClosingTokenText(e){for(const[t,i]of this.map)if(i.kind===2&&i.bracketIds.intersects(e))return t}get isEmpty(){return this.map.size===0}}function Wnt(n){let e=$l(n);return/^[\w ]+/.test(n)&&(e=`\\b${e}`),/[\w ]+$/.test(n)&&(e=`${e}\\b`),e}class uye{constructor(e,t){this.denseKeyProvider=e,this.getLanguageConfiguration=t,this.languageIdToBracketTokens=new Map}didLanguageChange(e){return this.languageIdToBracketTokens.has(e)}getSingleLanguageBracketTokens(e){let t=this.languageIdToBracketTokens.get(e);return t||(t=_Q.createFromLanguage(this.getLanguageConfiguration(e),this.denseKeyProvider),this.languageIdToBracketTokens.set(e,t)),t}}function Hnt(n){if(n.length===0)return null;if(n.length===1)return n[0];let e=0;function t(){if(e>=n.length)return null;const o=e,a=n[o].listHeight;for(e++;e<n.length&&n[e].listHeight===a;)e++;return e-o>=2?hye(o===0&&e===n.length?n:n.slice(o,e),!1):n[o]}let i=t(),s=t();if(!s)return i;for(let o=t();o;o=t())Gle(i,s)<=Gle(s,o)?(i=S8(i,s),s=o):s=S8(s,o);return S8(i,s)}function hye(n,e=!1){if(n.length===0)return null;if(n.length===1)return n[0];let t=n.length;for(;t>3;){const i=t>>1;for(let s=0;s<i;s++){const r=s<<1;n[s]=cf.create23(n[r],n[r+1],r+3===t?n[r+2]:null,e)}t=i}return cf.create23(n[0],n[1],t>=3?n[2]:null,e)}function Gle(n,e){return Math.abs(n.listHeight-e.listHeight)}function S8(n,e){return n.listHeight===e.listHeight?cf.create23(n,e,null,!1):n.listHeight>e.listHeight?Vnt(n,e):znt(e,n)}function Vnt(n,e){n=n.toMutable();let t=n;const i=[];let s;for(;;){if(e.listHeight===t.listHeight){s=e;break}if(t.kind!==4)throw new Error("unexpected");i.push(t),t=t.makeLastElementMutable()}for(let r=i.length-1;r>=0;r--){const o=i[r];s?o.childrenLength>=3?s=cf.create23(o.unappendChild(),s,null,!1):(o.appendChildOfSameHeight(s),s=void 0):o.handleChildrenChanged()}return s?cf.create23(n,s,null,!1):n}function znt(n,e){n=n.toMutable();let t=n;const i=[];for(;e.listHeight!==t.listHeight;){if(t.kind!==4)throw new Error("unexpected");i.push(t),t=t.makeFirstElementMutable()}let s=e;for(let r=i.length-1;r>=0;r--){const o=i[r];s?o.childrenLength>=3?s=cf.create23(s,o.unprependChild(),null,!1):(o.prependChildOfSameHeight(s),s=void 0):o.handleChildrenChanged()}return s?cf.create23(s,n,null,!1):n}class Unt{constructor(e){this.lastOffset=Lo,this.nextNodes=[e],this.offsets=[Lo],this.idxs=[]}readLongestNodeAt(e,t){if(Ty(e,this.lastOffset))throw new Error("Invalid offset");for(this.lastOffset=e;;){const i=HL(this.nextNodes);if(!i)return;const s=HL(this.offsets);if(Ty(e,s))return;if(Ty(s,e))if(Tn(s,i.length)<=e)this.nextNodeAfterCurrent();else{const r=x8(i);r!==-1?(this.nextNodes.push(i.getChild(r)),this.offsets.push(s),this.idxs.push(r)):this.nextNodeAfterCurrent()}else{if(t(i))return this.nextNodeAfterCurrent(),i;{const r=x8(i);if(r===-1){this.nextNodeAfterCurrent();return}else this.nextNodes.push(i.getChild(r)),this.offsets.push(s),this.idxs.push(r)}}}}nextNodeAfterCurrent(){for(;;){const e=HL(this.offsets),t=HL(this.nextNodes);if(this.nextNodes.pop(),this.offsets.pop(),this.idxs.length===0)break;const i=HL(this.nextNodes),s=x8(i,this.idxs[this.idxs.length-1]);if(s!==-1){this.nextNodes.push(i.getChild(s)),this.offsets.push(Tn(e,t.length)),this.idxs[this.idxs.length-1]=s;break}else this.idxs.pop()}}}function x8(n,e=-1){for(;;){if(e++,e>=n.childrenLength)return-1;if(n.getChild(e))return e}}function HL(n){return n.length>0?n[n.length-1]:void 0}function g$(n,e,t,i){return new $nt(n,e,t,i).parseDocument()}class $nt{constructor(e,t,i,s){if(this.tokenizer=e,this.createImmutableLists=s,this._itemsConstructed=0,this._itemsFromCache=0,i&&s)throw new Error("Not supported");this.oldNodeReader=i?new Unt(i):void 0,this.positionMapper=new Rnt(t)}parseDocument(){this._itemsConstructed=0,this._itemsFromCache=0;let e=this.parseList(Ua.getEmpty(),0);return e||(e=cf.getEmpty()),e}parseList(e,t){const i=[];for(;;){let r=this.tryReadChildFromCache(e);if(!r){const o=this.tokenizer.peek();if(!o||o.kind===2&&o.bracketIds.intersects(e))break;r=this.parseChild(e,t+1)}r.kind===4&&r.childrenLength===0||i.push(r)}return this.oldNodeReader?Hnt(i):hye(i,this.createImmutableLists)}tryReadChildFromCache(e){if(this.oldNodeReader){const t=this.positionMapper.getDistanceToNextChange(this.tokenizer.offset);if(t===null||!eO(t)){const i=this.oldNodeReader.readLongestNodeAt(this.positionMapper.getOffsetBeforeChange(this.tokenizer.offset),s=>t!==null&&!Ty(s.length,t)?!1:s.canBeReused(e));if(i)return this._itemsFromCache++,this.tokenizer.skip(i.length),i}}}parseChild(e,t){this._itemsConstructed++;const i=this.tokenizer.read();switch(i.kind){case 2:return new Ont(i.bracketIds,i.length);case 0:return i.astNode;case 1:{if(t>300)return new rb(i.length);const s=e.merge(i.bracketIds),r=this.parseList(s,t+1),o=this.tokenizer.peek();return o&&o.kind===2&&(o.bracketId===i.bracketId||o.bracketIds.intersects(i.bracketIds))?(this.tokenizer.read(),cD.create(i.astNode,r,o.astNode)):cD.create(i.astNode,r,null)}default:throw new Error("unexpected")}}}function nO(n,e){if(n.length===0)return e;if(e.length===0)return n;const t=new Gg(Yle(n)),i=Yle(e);i.push({modified:!1,lengthBefore:void 0,lengthAfter:void 0});let s=t.dequeue();function r(c){if(c===void 0){const u=t.takeWhile(h=>!0)||[];return s&&u.unshift(s),u}const d=[];for(;s&&!eO(c);){const[u,h]=s.splitAt(c);d.push(u),c=lD(u.lengthAfter,c),s=h??t.dequeue()}return eO(c)||d.push(new Em(!1,c,c)),d}const o=[];function a(c,d,u){if(o.length>0&&lye(o[o.length-1].endOffset,c)){const h=o[o.length-1];o[o.length-1]=new Cg(h.startOffset,d,Tn(h.newLength,u))}else o.push({startOffset:c,endOffset:d,newLength:u})}let l=Lo;for(const c of i){const d=r(c.lengthBefore);if(c.modified){const u=Nnt(d,f=>f.lengthBefore),h=Tn(l,u);a(l,h,c.lengthAfter),l=h}else for(const u of d){const h=l;l=Tn(l,u.lengthBefore),u.modified&&a(h,l,u.lengthAfter)}}return o}class Em{constructor(e,t,i){this.modified=e,this.lengthBefore=t,this.lengthAfter=i}splitAt(e){const t=lD(e,this.lengthAfter);return lye(t,Lo)?[this,void 0]:this.modified?[new Em(this.modified,this.lengthBefore,e),new Em(this.modified,Lo,t)]:[new Em(this.modified,e,e),new Em(this.modified,t,t)]}toString(){return`${this.modified?"M":"U"}:${Ic(this.lengthBefore)} -> ${Ic(this.lengthAfter)}`}}function Yle(n){const e=[];let t=Lo;for(const i of n){const s=lD(t,i.startOffset);eO(s)||e.push(new Em(!1,s,s));const r=lD(i.startOffset,i.endOffset);e.push(new Em(!0,r,i.newLength)),t=i.endOffset}return e}class jnt extends ee{didLanguageChange(e){return this.brackets.didLanguageChange(e)}constructor(e,t){if(super(),this.textModel=e,this.getLanguageConfiguration=t,this.didChangeEmitter=new X,this.denseKeyProvider=new cye,this.brackets=new uye(this.denseKeyProvider,this.getLanguageConfiguration),this.onDidChange=this.didChangeEmitter.event,this.queuedTextEditsForInitialAstWithoutTokens=[],this.queuedTextEdits=[],e.tokenization.hasTokens)e.tokenization.backgroundTokenizationState===2?(this.initialAstWithoutTokens=void 0,this.astWithTokens=this.parseDocumentFromTextBuffer([],void 0,!1)):(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer([],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens);else{const i=this.brackets.getSingleLanguageBracketTokens(this.textModel.getLanguageId()),s=new Bnt(this.textModel.getValue(),i);this.initialAstWithoutTokens=g$(s,[],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens}}handleDidChangeBackgroundTokenizationState(){if(this.textModel.tokenization.backgroundTokenizationState===2){const e=this.initialAstWithoutTokens===void 0;this.initialAstWithoutTokens=void 0,e||this.didChangeEmitter.fire()}}handleDidChangeTokens({ranges:e}){const t=e.map(i=>new Cg(Xn(i.fromLineNumber-1,0),Xn(i.toLineNumber,0),Xn(i.toLineNumber-i.fromLineNumber+1,0)));this.handleEdits(t,!0),this.initialAstWithoutTokens||this.didChangeEmitter.fire()}handleContentChanged(e){const t=Cg.fromModelContentChanges(e.changes);this.handleEdits(t,!1)}handleEdits(e,t){const i=nO(this.queuedTextEdits,e);this.queuedTextEdits=i,this.initialAstWithoutTokens&&!t&&(this.queuedTextEditsForInitialAstWithoutTokens=nO(this.queuedTextEditsForInitialAstWithoutTokens,e))}flushQueue(){this.queuedTextEdits.length>0&&(this.astWithTokens=this.parseDocumentFromTextBuffer(this.queuedTextEdits,this.astWithTokens,!1),this.queuedTextEdits=[]),this.queuedTextEditsForInitialAstWithoutTokens.length>0&&(this.initialAstWithoutTokens&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer(this.queuedTextEditsForInitialAstWithoutTokens,this.initialAstWithoutTokens,!1)),this.queuedTextEditsForInitialAstWithoutTokens=[])}parseDocumentFromTextBuffer(e,t,i){const s=t,r=new dye(this.textModel,this.brackets);return g$(r,e,s,i)}getBracketsInRange(e,t){this.flushQueue();const i=Xn(e.startLineNumber-1,e.startColumn-1),s=Xn(e.endLineNumber-1,e.endColumn-1);return new Wb(r=>{const o=this.initialAstWithoutTokens||this.astWithTokens;p$(o,Lo,o.length,i,s,r,0,0,new Map,t)})}getBracketPairsInRange(e,t){this.flushQueue();const i=D1(e.getStartPosition()),s=D1(e.getEndPosition());return new Wb(r=>{const o=this.initialAstWithoutTokens||this.astWithTokens,a=new Knt(r,t,this.textModel);m$(o,Lo,o.length,i,s,a,0,new Map)})}getFirstBracketAfter(e){this.flushQueue();const t=this.initialAstWithoutTokens||this.astWithTokens;return gye(t,Lo,t.length,D1(e))}getFirstBracketBefore(e){this.flushQueue();const t=this.initialAstWithoutTokens||this.astWithTokens;return fye(t,Lo,t.length,D1(e))}}function fye(n,e,t,i){if(n.kind===4||n.kind===2){const s=[];for(const r of n.children)t=Tn(e,r.length),s.push({nodeOffsetStart:e,nodeOffsetEnd:t}),e=t;for(let r=s.length-1;r>=0;r--){const{nodeOffsetStart:o,nodeOffsetEnd:a}=s[r];if(Ty(o,i)){const l=fye(n.children[r],o,a,i);if(l)return l}}return null}else{if(n.kind===3)return null;if(n.kind===1){const s=jb(e,t);return{bracketInfo:n.bracketInfo,range:s}}}return null}function gye(n,e,t,i){if(n.kind===4||n.kind===2){for(const s of n.children){if(t=Tn(e,s.length),Ty(i,t)){const r=gye(s,e,t,i);if(r)return r}e=t}return null}else{if(n.kind===3)return null;if(n.kind===1){const s=jb(e,t);return{bracketInfo:n.bracketInfo,range:s}}}return null}function p$(n,e,t,i,s,r,o,a,l,c,d=!1){if(o>200)return!0;e:for(;;)switch(n.kind){case 4:{const u=n.childrenLength;for(let h=0;h<u;h++){const f=n.getChild(h);if(f){if(t=Tn(e,f.length),Ry(e,s)&&mk(t,i)){if(mk(t,s)){n=f;continue e}if(!p$(f,e,t,i,s,r,o,0,l,c))return!1}e=t}}return!0}case 2:{const u=!c||!n.closingBracket||n.closingBracket.bracketInfo.closesColorized(n.openingBracket.bracketInfo);let h=0;if(l){let g=l.get(n.openingBracket.text);g===void 0&&(g=0),h=g,u&&(g++,l.set(n.openingBracket.text,g))}const f=n.childrenLength;for(let g=0;g<f;g++){const p=n.getChild(g);if(p){if(t=Tn(e,p.length),Ry(e,s)&&mk(t,i)){if(mk(t,s)&&p.kind!==1){n=p,u?(o++,a=h+1):a=h;continue e}if((u||p.kind!==1||!n.closingBracket)&&!p$(p,e,t,i,s,r,u?o+1:o,u?h+1:h,l,c,!n.closingBracket))return!1}e=t}}return l==null||l.set(n.openingBracket.text,h),!0}case 3:{const u=jb(e,t);return r(new Kle(u,o-1,0,!0))}case 1:{const u=jb(e,t);return r(new Kle(u,o-1,a-1,d))}case 0:return!0}}class Knt{constructor(e,t,i){this.push=e,this.includeMinIndentation=t,this.textModel=i}}function m$(n,e,t,i,s,r,o,a){var c;if(o>200)return!0;let l=!0;if(n.kind===2){let d=0;if(a){let f=a.get(n.openingBracket.text);f===void 0&&(f=0),d=f,f++,a.set(n.openingBracket.text,f)}const u=Tn(e,n.openingBracket.length);let h=-1;if(r.includeMinIndentation&&(h=n.computeMinIndentation(e,r.textModel)),l=r.push(new Ent(jb(e,t),jb(e,u),n.closingBracket?jb(Tn(u,((c=n.child)==null?void 0:c.length)||Lo),t):void 0,o,d,n,h)),e=u,l&&n.child){const f=n.child;if(t=Tn(e,f.length),Ry(e,s)&&mk(t,i)&&(l=m$(f,e,t,i,s,r,o+1,a),!l))return!1}a==null||a.set(n.openingBracket.text,d)}else{let d=e;for(const u of n.children){const h=d;if(d=Tn(d,u.length),Ry(h,s)&&Ry(i,d)&&(l=m$(u,h,d,i,s,r,o,a),!l))return!1}}return l}class qnt extends ee{get canBuildAST(){return this.textModel.getValueLength()<=5e6}constructor(e,t){super(),this.textModel=e,this.languageConfigurationService=t,this.bracketPairsTree=this._register(new As),this.onDidChangeEmitter=new X,this.onDidChange=this.onDidChangeEmitter.event,this.bracketsRequested=!1}handleLanguageConfigurationServiceChange(e){var t;(!e.languageId||(t=this.bracketPairsTree.value)!=null&&t.object.didLanguageChange(e.languageId))&&(this.bracketPairsTree.clear(),this.updateBracketPairsTree())}handleDidChangeOptions(e){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeLanguage(e){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeContent(e){var t;(t=this.bracketPairsTree.value)==null||t.object.handleContentChanged(e)}handleDidChangeBackgroundTokenizationState(){var e;(e=this.bracketPairsTree.value)==null||e.object.handleDidChangeBackgroundTokenizationState()}handleDidChangeTokens(e){var t;(t=this.bracketPairsTree.value)==null||t.object.handleDidChangeTokens(e)}updateBracketPairsTree(){if(this.bracketsRequested&&this.canBuildAST){if(!this.bracketPairsTree.value){const e=new ue;this.bracketPairsTree.value=Gnt(e.add(new jnt(this.textModel,t=>this.languageConfigurationService.getLanguageConfiguration(t))),e),e.add(this.bracketPairsTree.value.object.onDidChange(t=>this.onDidChangeEmitter.fire(t))),this.onDidChangeEmitter.fire()}}else this.bracketPairsTree.value&&(this.bracketPairsTree.clear(),this.onDidChangeEmitter.fire())}getBracketPairsInRange(e){var t;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)==null?void 0:t.object.getBracketPairsInRange(e,!1))||Wb.empty}getBracketPairsInRangeWithMinIndentation(e){var t;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)==null?void 0:t.object.getBracketPairsInRange(e,!0))||Wb.empty}getBracketsInRange(e,t=!1){var i;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((i=this.bracketPairsTree.value)==null?void 0:i.object.getBracketsInRange(e,t))||Wb.empty}findMatchingBracketUp(e,t,i){const s=this.textModel.validatePosition(t),r=this.textModel.getLanguageIdAtPosition(s.lineNumber,s.column);if(this.canBuildAST){const o=this.languageConfigurationService.getLanguageConfiguration(r).bracketsNew.getClosingBracketInfo(e);if(!o)return null;const a=this.getBracketPairsInRange(M.fromPositions(t,t)).findLast(l=>o.closes(l.openingBracketInfo));return a?a.openingBracketRange:null}else{const o=e.toLowerCase(),a=this.languageConfigurationService.getLanguageConfiguration(r).brackets;if(!a)return null;const l=a.textIsBracket[o];return l?iA(this._findMatchingBracketUp(l,s,L8(i))):null}}matchBracket(e,t){if(this.canBuildAST){const i=this.getBracketPairsInRange(M.fromPositions(e,e)).filter(s=>s.closingBracketRange!==void 0&&(s.openingBracketRange.containsPosition(e)||s.closingBracketRange.containsPosition(e))).findLastMaxBy(No(s=>s.openingBracketRange.containsPosition(e)?s.openingBracketRange:s.closingBracketRange,M.compareRangesUsingStarts));return i?[i.openingBracketRange,i.closingBracketRange]:null}else{const i=L8(t);return this._matchBracket(this.textModel.validatePosition(e),i)}}_establishBracketSearchOffsets(e,t,i,s){const r=t.getCount(),o=t.getLanguageId(s);let a=Math.max(0,e.column-1-i.maxBracketLength);for(let c=s-1;c>=0;c--){const d=t.getEndOffset(c);if(d<=a)break;if(uh(t.getStandardTokenType(c))||t.getLanguageId(c)!==o){a=d;break}}let l=Math.min(t.getLineContent().length,e.column-1+i.maxBracketLength);for(let c=s+1;c<r;c++){const d=t.getStartOffset(c);if(d>=l)break;if(uh(t.getStandardTokenType(c))||t.getLanguageId(c)!==o){l=d;break}}return{searchStartOffset:a,searchEndOffset:l}}_matchBracket(e,t){const i=e.lineNumber,s=this.textModel.tokenization.getLineTokens(i),r=this.textModel.getLineContent(i),o=s.findTokenIndexAtOffset(e.column-1);if(o<0)return null;const a=this.languageConfigurationService.getLanguageConfiguration(s.getLanguageId(o)).brackets;if(a&&!uh(s.getStandardTokenType(o))){let{searchStartOffset:l,searchEndOffset:c}=this._establishBracketSearchOffsets(e,s,a,o),d=null;for(;;){const u=nd.findNextBracketInRange(a.forwardRegex,i,r,l,c);if(!u)break;if(u.startColumn<=e.column&&e.column<=u.endColumn){const h=r.substring(u.startColumn-1,u.endColumn-1).toLowerCase(),f=this._matchFoundBracket(u,a.textIsBracket[h],a.textIsOpenBracket[h],t);if(f){if(f instanceof ig)return null;d=f}}l=u.endColumn-1}if(d)return d}if(o>0&&s.getStartOffset(o)===e.column-1){const l=o-1,c=this.languageConfigurationService.getLanguageConfiguration(s.getLanguageId(l)).brackets;if(c&&!uh(s.getStandardTokenType(l))){const{searchStartOffset:d,searchEndOffset:u}=this._establishBracketSearchOffsets(e,s,c,l),h=nd.findPrevBracketInRange(c.reversedRegex,i,r,d,u);if(h&&h.startColumn<=e.column&&e.column<=h.endColumn){const f=r.substring(h.startColumn-1,h.endColumn-1).toLowerCase(),g=this._matchFoundBracket(h,c.textIsBracket[f],c.textIsOpenBracket[f],t);if(g)return g instanceof ig?null:g}}}return null}_matchFoundBracket(e,t,i,s){if(!t)return null;const r=i?this._findMatchingBracketDown(t,e.getEndPosition(),s):this._findMatchingBracketUp(t,e.getStartPosition(),s);return r?r instanceof ig?r:[e,r]:null}_findMatchingBracketUp(e,t,i){const s=e.languageId,r=e.reversedRegex;let o=-1,a=0;const l=(c,d,u,h)=>{for(;;){if(i&&++a%100===0&&!i())return ig.INSTANCE;const f=nd.findPrevBracketInRange(r,c,d,u,h);if(!f)break;const g=d.substring(f.startColumn-1,f.endColumn-1).toLowerCase();if(e.isOpen(g)?o++:e.isClose(g)&&o--,o===0)return f;h=f.startColumn-1}return null};for(let c=t.lineNumber;c>=1;c--){const d=this.textModel.tokenization.getLineTokens(c),u=d.getCount(),h=this.textModel.getLineContent(c);let f=u-1,g=h.length,p=h.length;c===t.lineNumber&&(f=d.findTokenIndexAtOffset(t.column-1),g=t.column-1,p=t.column-1);let _=!0;for(;f>=0;f--){const w=d.getLanguageId(f)===s&&!uh(d.getStandardTokenType(f));if(w)_?g=d.getStartOffset(f):(g=d.getStartOffset(f),p=d.getEndOffset(f));else if(_&&g!==p){const b=l(c,h,g,p);if(b)return b}_=w}if(_&&g!==p){const w=l(c,h,g,p);if(w)return w}}return null}_findMatchingBracketDown(e,t,i){const s=e.languageId,r=e.forwardRegex;let o=1,a=0;const l=(d,u,h,f)=>{for(;;){if(i&&++a%100===0&&!i())return ig.INSTANCE;const g=nd.findNextBracketInRange(r,d,u,h,f);if(!g)break;const p=u.substring(g.startColumn-1,g.endColumn-1).toLowerCase();if(e.isOpen(p)?o++:e.isClose(p)&&o--,o===0)return g;h=g.endColumn-1}return null},c=this.textModel.getLineCount();for(let d=t.lineNumber;d<=c;d++){const u=this.textModel.tokenization.getLineTokens(d),h=u.getCount(),f=this.textModel.getLineContent(d);let g=0,p=0,_=0;d===t.lineNumber&&(g=u.findTokenIndexAtOffset(t.column-1),p=t.column-1,_=t.column-1);let w=!0;for(;g<h;g++){const b=u.getLanguageId(g)===s&&!uh(u.getStandardTokenType(g));if(b)w||(p=u.getStartOffset(g)),_=u.getEndOffset(g);else if(w&&p!==_){const y=l(d,f,p,_);if(y)return y}w=b}if(w&&p!==_){const b=l(d,f,p,_);if(b)return b}}return null}findPrevBracket(e){var o;const t=this.textModel.validatePosition(e);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),((o=this.bracketPairsTree.value)==null?void 0:o.object.getFirstBracketBefore(t))||null;let i=null,s=null,r=null;for(let a=t.lineNumber;a>=1;a--){const l=this.textModel.tokenization.getLineTokens(a),c=l.getCount(),d=this.textModel.getLineContent(a);let u=c-1,h=d.length,f=d.length;if(a===t.lineNumber){u=l.findTokenIndexAtOffset(t.column-1),h=t.column-1,f=t.column-1;const p=l.getLanguageId(u);i!==p&&(i=p,s=this.languageConfigurationService.getLanguageConfiguration(i).brackets,r=this.languageConfigurationService.getLanguageConfiguration(i).bracketsNew)}let g=!0;for(;u>=0;u--){const p=l.getLanguageId(u);if(i!==p){if(s&&r&&g&&h!==f){const w=nd.findPrevBracketInRange(s.reversedRegex,a,d,h,f);if(w)return this._toFoundBracket(r,w);g=!1}i=p,s=this.languageConfigurationService.getLanguageConfiguration(i).brackets,r=this.languageConfigurationService.getLanguageConfiguration(i).bracketsNew}const _=!!s&&!uh(l.getStandardTokenType(u));if(_)g?h=l.getStartOffset(u):(h=l.getStartOffset(u),f=l.getEndOffset(u));else if(r&&s&&g&&h!==f){const w=nd.findPrevBracketInRange(s.reversedRegex,a,d,h,f);if(w)return this._toFoundBracket(r,w)}g=_}if(r&&s&&g&&h!==f){const p=nd.findPrevBracketInRange(s.reversedRegex,a,d,h,f);if(p)return this._toFoundBracket(r,p)}}return null}findNextBracket(e){var a;const t=this.textModel.validatePosition(e);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),((a=this.bracketPairsTree.value)==null?void 0:a.object.getFirstBracketAfter(t))||null;const i=this.textModel.getLineCount();let s=null,r=null,o=null;for(let l=t.lineNumber;l<=i;l++){const c=this.textModel.tokenization.getLineTokens(l),d=c.getCount(),u=this.textModel.getLineContent(l);let h=0,f=0,g=0;if(l===t.lineNumber){h=c.findTokenIndexAtOffset(t.column-1),f=t.column-1,g=t.column-1;const _=c.getLanguageId(h);s!==_&&(s=_,r=this.languageConfigurationService.getLanguageConfiguration(s).brackets,o=this.languageConfigurationService.getLanguageConfiguration(s).bracketsNew)}let p=!0;for(;h<d;h++){const _=c.getLanguageId(h);if(s!==_){if(o&&r&&p&&f!==g){const b=nd.findNextBracketInRange(r.forwardRegex,l,u,f,g);if(b)return this._toFoundBracket(o,b);p=!1}s=_,r=this.languageConfigurationService.getLanguageConfiguration(s).brackets,o=this.languageConfigurationService.getLanguageConfiguration(s).bracketsNew}const w=!!r&&!uh(c.getStandardTokenType(h));if(w)p||(f=c.getStartOffset(h)),g=c.getEndOffset(h);else if(o&&r&&p&&f!==g){const b=nd.findNextBracketInRange(r.forwardRegex,l,u,f,g);if(b)return this._toFoundBracket(o,b)}p=w}if(o&&r&&p&&f!==g){const _=nd.findNextBracketInRange(r.forwardRegex,l,u,f,g);if(_)return this._toFoundBracket(o,_)}}return null}findEnclosingBrackets(e,t){const i=this.textModel.validatePosition(e);if(this.canBuildAST){const f=M.fromPositions(i),g=this.getBracketPairsInRange(M.fromPositions(i,i)).findLast(p=>p.closingBracketRange!==void 0&&p.range.strictContainsRange(f));return g?[g.openingBracketRange,g.closingBracketRange]:null}const s=L8(t),r=this.textModel.getLineCount(),o=new Map;let a=[];const l=(f,g)=>{if(!o.has(f)){const p=[];for(let _=0,w=g?g.brackets.length:0;_<w;_++)p[_]=0;o.set(f,p)}a=o.get(f)};let c=0;const d=(f,g,p,_,w)=>{for(;;){if(s&&++c%100===0&&!s())return ig.INSTANCE;const b=nd.findNextBracketInRange(f.forwardRegex,g,p,_,w);if(!b)break;const y=p.substring(b.startColumn-1,b.endColumn-1).toLowerCase(),S=f.textIsBracket[y];if(S&&(S.isOpen(y)?a[S.index]++:S.isClose(y)&&a[S.index]--,a[S.index]===-1))return this._matchFoundBracket(b,S,!1,s);_=b.endColumn-1}return null};let u=null,h=null;for(let f=i.lineNumber;f<=r;f++){const g=this.textModel.tokenization.getLineTokens(f),p=g.getCount(),_=this.textModel.getLineContent(f);let w=0,b=0,y=0;if(f===i.lineNumber){w=g.findTokenIndexAtOffset(i.column-1),b=i.column-1,y=i.column-1;const x=g.getLanguageId(w);u!==x&&(u=x,h=this.languageConfigurationService.getLanguageConfiguration(u).brackets,l(u,h))}let S=!0;for(;w<p;w++){const x=g.getLanguageId(w);if(u!==x){if(h&&S&&b!==y){const D=d(h,f,_,b,y);if(D)return iA(D);S=!1}u=x,h=this.languageConfigurationService.getLanguageConfiguration(u).brackets,l(u,h)}const E=!!h&&!uh(g.getStandardTokenType(w));if(E)S||(b=g.getStartOffset(w)),y=g.getEndOffset(w);else if(h&&S&&b!==y){const D=d(h,f,_,b,y);if(D)return iA(D)}S=E}if(h&&S&&b!==y){const x=d(h,f,_,b,y);if(x)return iA(x)}}return null}_toFoundBracket(e,t){if(!t)return null;let i=this.textModel.getValueInRange(t);i=i.toLowerCase();const s=e.getBracketInfo(i);return s?{range:t,bracketInfo:s}:null}}function Gnt(n,e){return{object:n,dispose:()=>e==null?void 0:e.dispose()}}function L8(n){if(typeof n>"u")return()=>!0;{const e=Date.now();return()=>Date.now()-e<=n}}const y4=class y4{constructor(){this._searchCanceledBrand=void 0}};y4.INSTANCE=new y4;let ig=y4;function iA(n){return n instanceof ig?null:n}class Ynt extends ee{constructor(e){super(),this.textModel=e,this.colorProvider=new pye,this.onDidChangeEmitter=new X,this.onDidChange=this.onDidChangeEmitter.event,this.colorizationOptions=e.getOptions().bracketPairColorizationOptions,this._register(e.bracketPairs.onDidChange(t=>{this.onDidChangeEmitter.fire()}))}handleDidChangeOptions(e){this.colorizationOptions=this.textModel.getOptions().bracketPairColorizationOptions}getDecorationsInRange(e,t,i,s){return s?[]:t===void 0?[]:this.colorizationOptions.enabled?this.textModel.bracketPairs.getBracketsInRange(e,!0).map(o=>({id:`bracket${o.range.toString()}-${o.nestingLevel}`,options:{description:"BracketPairColorization",inlineClassName:this.colorProvider.getInlineClassName(o,this.colorizationOptions.independentColorPoolPerBracketType)},ownerId:0,range:o.range})).toArray():[]}getAllDecorations(e,t){return e===void 0?[]:this.colorizationOptions.enabled?this.getDecorationsInRange(new M(1,1,this.textModel.getLineCount(),1),e,t):[]}}class pye{constructor(){this.unexpectedClosingBracketClassName="unexpected-closing-bracket"}getInlineClassName(e,t){return e.isInvalid?this.unexpectedClosingBracketClassName:this.getInlineClassNameOfLevel(t?e.nestingLevelOfEqualBracketType:e.nestingLevel)}getInlineClassNameOfLevel(e){return`bracket-highlighting-${e%30}`}}zc((n,e)=>{const t=[iye,nye,sye,rye,oye,aye],i=new pye;e.addRule(`.monaco-editor .${i.unexpectedClosingBracketClassName} { color: ${n.getColor(lnt)}; }`);const s=t.map(r=>n.getColor(r)).filter(r=>!!r).filter(r=>!r.isTransparent());for(let r=0;r<30;r++){const o=s[r%s.length];e.addRule(`.monaco-editor .${i.getInlineClassNameOfLevel(r)} { color: ${o}; }`)}});function nA(n){return n.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}class hr{get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}constructor(e,t,i,s){this.oldPosition=e,this.oldText=t,this.newPosition=i,this.newText=s}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${nA(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${nA(this.oldText)}")`:`(replace@${this.oldPosition} "${nA(this.oldText)}" with "${nA(this.newText)}")`}static _writeStringSize(e){return 4+2*e.length}static _writeString(e,t,i){const s=t.length;ou(e,s,i),i+=4;for(let r=0;r<s;r++)MGe(e,t.charCodeAt(r),i),i+=2;return i}static _readString(e,t){const i=ru(e,t);return t+=4,OGe(e,t,i)}writeSize(){return 8+hr._writeStringSize(this.oldText)+hr._writeStringSize(this.newText)}write(e,t){return ou(e,this.oldPosition,t),t+=4,ou(e,this.newPosition,t),t+=4,t=hr._writeString(e,this.oldText,t),t=hr._writeString(e,this.newText,t),t}static read(e,t,i){const s=ru(e,t);t+=4;const r=ru(e,t);t+=4;const o=hr._readString(e,t);t+=hr._writeStringSize(o);const a=hr._readString(e,t);return t+=hr._writeStringSize(a),i.push(new hr(s,o,r,a)),t}}function Znt(n,e){return n===null||n.length===0?e:new ph(n,e).compress()}class ph{constructor(e,t){this._prevEdits=e,this._currEdits=t,this._result=[],this._resultLen=0,this._prevLen=this._prevEdits.length,this._prevDeltaOffset=0,this._currLen=this._currEdits.length,this._currDeltaOffset=0}compress(){let e=0,t=0,i=this._getPrev(e),s=this._getCurr(t);for(;e<this._prevLen||t<this._currLen;){if(i===null){this._acceptCurr(s),s=this._getCurr(++t);continue}if(s===null){this._acceptPrev(i),i=this._getPrev(++e);continue}if(s.oldEnd<=i.newPosition){this._acceptCurr(s),s=this._getCurr(++t);continue}if(i.newEnd<=s.oldPosition){this._acceptPrev(i),i=this._getPrev(++e);continue}if(s.oldPosition<i.newPosition){const[c,d]=ph._splitCurr(s,i.newPosition-s.oldPosition);this._acceptCurr(c),s=d;continue}if(i.newPosition<s.oldPosition){const[c,d]=ph._splitPrev(i,s.oldPosition-i.newPosition);this._acceptPrev(c),i=d;continue}let a,l;if(s.oldEnd===i.newEnd)a=i,l=s,i=this._getPrev(++e),s=this._getCurr(++t);else if(s.oldEnd<i.newEnd){const[c,d]=ph._splitPrev(i,s.oldLength);a=c,l=s,i=d,s=this._getCurr(++t)}else{const[c,d]=ph._splitCurr(s,i.newLength);a=i,l=c,i=this._getPrev(++e),s=d}this._result[this._resultLen++]=new hr(a.oldPosition,a.oldText,l.newPosition,l.newText),this._prevDeltaOffset+=a.newLength-a.oldLength,this._currDeltaOffset+=l.newLength-l.oldLength}const r=ph._merge(this._result);return ph._removeNoOps(r)}_acceptCurr(e){this._result[this._resultLen++]=ph._rebaseCurr(this._prevDeltaOffset,e),this._currDeltaOffset+=e.newLength-e.oldLength}_getCurr(e){return e<this._currLen?this._currEdits[e]:null}_acceptPrev(e){this._result[this._resultLen++]=ph._rebasePrev(this._currDeltaOffset,e),this._prevDeltaOffset+=e.newLength-e.oldLength}_getPrev(e){return e<this._prevLen?this._prevEdits[e]:null}static _rebaseCurr(e,t){return new hr(t.oldPosition-e,t.oldText,t.newPosition,t.newText)}static _rebasePrev(e,t){return new hr(t.oldPosition,t.oldText,t.newPosition+e,t.newText)}static _splitPrev(e,t){const i=e.newText.substr(0,t),s=e.newText.substr(t);return[new hr(e.oldPosition,e.oldText,e.newPosition,i),new hr(e.oldEnd,"",e.newPosition+t,s)]}static _splitCurr(e,t){const i=e.oldText.substr(0,t),s=e.oldText.substr(t);return[new hr(e.oldPosition,i,e.newPosition,e.newText),new hr(e.oldPosition+t,s,e.newEnd,"")]}static _merge(e){if(e.length===0)return e;const t=[];let i=0,s=e[0];for(let r=1;r<e.length;r++){const o=e[r];s.oldEnd===o.oldPosition?s=new hr(s.oldPosition,s.oldText+o.oldText,s.newPosition,s.newText+o.newText):(t[i++]=s,s=o)}return t[i++]=s,t}static _removeNoOps(e){if(e.length===0)return e;const t=[];let i=0;for(let s=0;s<e.length;s++){const r=e[s];r.oldText!==r.newText&&(t[i++]=r)}return t}}function DC(n){return n.toString()}class Bs{static create(e,t){const i=e.getAlternativeVersionId(),s=_$(e);return new Bs(i,i,s,s,t,t,[])}constructor(e,t,i,s,r,o,a){this.beforeVersionId=e,this.afterVersionId=t,this.beforeEOL=i,this.afterEOL=s,this.beforeCursorState=r,this.afterCursorState=o,this.changes=a}append(e,t,i,s,r){t.length>0&&(this.changes=Znt(this.changes,t)),this.afterEOL=i,this.afterVersionId=s,this.afterCursorState=r}static _writeSelectionsSize(e){return 4+4*4*(e?e.length:0)}static _writeSelections(e,t,i){if(ou(e,t?t.length:0,i),i+=4,t)for(const s of t)ou(e,s.selectionStartLineNumber,i),i+=4,ou(e,s.selectionStartColumn,i),i+=4,ou(e,s.positionLineNumber,i),i+=4,ou(e,s.positionColumn,i),i+=4;return i}static _readSelections(e,t,i){const s=ru(e,t);t+=4;for(let r=0;r<s;r++){const o=ru(e,t);t+=4;const a=ru(e,t);t+=4;const l=ru(e,t);t+=4;const c=ru(e,t);t+=4,i.push(new $e(o,a,l,c))}return t}serialize(){let e=10+Bs._writeSelectionsSize(this.beforeCursorState)+Bs._writeSelectionsSize(this.afterCursorState)+4;for(const s of this.changes)e+=s.writeSize();const t=new Uint8Array(e);let i=0;ou(t,this.beforeVersionId,i),i+=4,ou(t,this.afterVersionId,i),i+=4,Qoe(t,this.beforeEOL,i),i+=1,Qoe(t,this.afterEOL,i),i+=1,i=Bs._writeSelections(t,this.beforeCursorState,i),i=Bs._writeSelections(t,this.afterCursorState,i),ou(t,this.changes.length,i),i+=4;for(const s of this.changes)i=s.write(t,i);return t.buffer}static deserialize(e){const t=new Uint8Array(e);let i=0;const s=ru(t,i);i+=4;const r=ru(t,i);i+=4;const o=Xoe(t,i);i+=1;const a=Xoe(t,i);i+=1;const l=[];i=Bs._readSelections(t,i,l);const c=[];i=Bs._readSelections(t,i,c);const d=ru(t,i);i+=4;const u=[];for(let h=0;h<d;h++)i=hr.read(t,i,u);return new Bs(s,r,o,a,l,c,u)}}class mye{get type(){return 0}get resource(){return Xe.isUri(this.model)?this.model:this.model.uri}constructor(e,t,i,s){this.label=e,this.code=t,this.model=i,this._data=Bs.create(i,s)}toString(){return(this._data instanceof Bs?this._data:Bs.deserialize(this._data)).changes.map(t=>t.toString()).join(", ")}matchesResource(e){return(Xe.isUri(this.model)?this.model:this.model.uri).toString()===e.toString()}setModel(e){this.model=e}canAppend(e){return this.model===e&&this._data instanceof Bs}append(e,t,i,s,r){this._data instanceof Bs&&this._data.append(e,t,i,s,r)}close(){this._data instanceof Bs&&(this._data=this._data.serialize())}open(){this._data instanceof Bs||(this._data=Bs.deserialize(this._data))}undo(){if(Xe.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof Bs&&(this._data=this._data.serialize());const e=Bs.deserialize(this._data);this.model._applyUndo(e.changes,e.beforeEOL,e.beforeVersionId,e.beforeCursorState)}redo(){if(Xe.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof Bs&&(this._data=this._data.serialize());const e=Bs.deserialize(this._data);this.model._applyRedo(e.changes,e.afterEOL,e.afterVersionId,e.afterCursorState)}heapSize(){return this._data instanceof Bs&&(this._data=this._data.serialize()),this._data.byteLength+168}}class Xnt{get resources(){return this._editStackElementsArr.map(e=>e.resource)}constructor(e,t,i){this.label=e,this.code=t,this.type=1,this._isOpen=!0,this._editStackElementsArr=i.slice(0),this._editStackElementsMap=new Map;for(const s of this._editStackElementsArr){const r=DC(s.resource);this._editStackElementsMap.set(r,s)}this._delegate=null}prepareUndoRedo(){if(this._delegate)return this._delegate.prepareUndoRedo(this)}matchesResource(e){const t=DC(e);return this._editStackElementsMap.has(t)}setModel(e){const t=DC(Xe.isUri(e)?e:e.uri);this._editStackElementsMap.has(t)&&this._editStackElementsMap.get(t).setModel(e)}canAppend(e){if(!this._isOpen)return!1;const t=DC(e.uri);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).canAppend(e):!1}append(e,t,i,s,r){const o=DC(e.uri);this._editStackElementsMap.get(o).append(e,t,i,s,r)}close(){this._isOpen=!1}open(){}undo(){this._isOpen=!1;for(const e of this._editStackElementsArr)e.undo()}redo(){for(const e of this._editStackElementsArr)e.redo()}heapSize(e){const t=DC(e);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).heapSize():0}split(){return this._editStackElementsArr}toString(){const e=[];for(const t of this._editStackElementsArr)e.push(`${Pc(t.resource)}: ${t}`);return`{${e.join(", ")}}`}}function _$(n){return n.getEOL()===`
`?0:1}function ng(n){return n?n instanceof mye||n instanceof Xnt:!1}class vQ{constructor(e,t){this._model=e,this._undoRedoService=t}pushStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);ng(e)&&e.close()}popStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);ng(e)&&e.open()}clear(){this._undoRedoService.removeElements(this._model.uri)}_getOrCreateEditStackElement(e,t){const i=this._undoRedoService.getLastElement(this._model.uri);if(ng(i)&&i.canAppend(this._model))return i;const s=new mye(v("edit","Typing"),"undoredo.textBufferEdit",this._model,e);return this._undoRedoService.pushElement(s,t),s}pushEOL(e){const t=this._getOrCreateEditStackElement(null,void 0);this._model.setEOL(e),t.append(this._model,[],_$(this._model),this._model.getAlternativeVersionId(),null)}pushEditOperation(e,t,i,s){const r=this._getOrCreateEditStackElement(e,s),o=this._model.applyEdits(t,!0),a=vQ._computeCursorState(i,o),l=o.map((c,d)=>({index:d,textChange:c.textChange}));return l.sort((c,d)=>c.textChange.oldPosition===d.textChange.oldPosition?c.index-d.index:c.textChange.oldPosition-d.textChange.oldPosition),r.append(this._model,l.map(c=>c.textChange),_$(this._model),this._model.getAlternativeVersionId(),a),a}static _computeCursorState(e,t){try{return e?e(t):null}catch(i){return pt(i),null}}}class _ye extends ee{constructor(){super(...arguments),this._isDisposed=!1}dispose(){super.dispose(),this._isDisposed=!0}assertNotDisposed(){if(this._isDisposed)throw new Error("TextModelPart is disposed!")}}function EB(n,e){let t=0,i=0;const s=n.length;for(;i<s;){const r=n.charCodeAt(i);if(r===32)t++;else if(r===9)t=t-t%e+e;else break;i++}return i===s?-1:t}var Kb;(function(n){n[n.Disabled=0]="Disabled",n[n.EnabledForActive=1]="EnabledForActive",n[n.Enabled=2]="Enabled"})(Kb||(Kb={}));class kb{constructor(e,t,i,s,r,o){if(this.visibleColumn=e,this.column=t,this.className=i,this.horizontalLine=s,this.forWrappedLinesAfterColumn=r,this.forWrappedLinesBeforeOrAtColumn=o,e!==-1==(t!==-1))throw new Error}}class iE{constructor(e,t){this.top=e,this.endColumn=t}}class Qnt extends _ye{constructor(e,t){super(),this.textModel=e,this.languageConfigurationService=t}getLanguageConfiguration(e){return this.languageConfigurationService.getLanguageConfiguration(e)}_computeIndentLevel(e){return EB(this.textModel.getLineContent(e+1),this.textModel.getOptions().tabSize)}getActiveIndentGuide(e,t,i){this.assertNotDisposed();const s=this.textModel.getLineCount();if(e<1||e>s)throw new li("Illegal value for lineNumber");const r=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,o=!!(r&&r.offSide);let a=-2,l=-1,c=-2,d=-1;const u=D=>{if(a!==-1&&(a===-2||a>D-1)){a=-1,l=-1;for(let N=D-2;N>=0;N--){const I=this._computeIndentLevel(N);if(I>=0){a=N,l=I;break}}}if(c===-2){c=-1,d=-1;for(let N=D;N<s;N++){const I=this._computeIndentLevel(N);if(I>=0){c=N,d=I;break}}}};let h=-2,f=-1,g=-2,p=-1;const _=D=>{if(h===-2){h=-1,f=-1;for(let N=D-2;N>=0;N--){const I=this._computeIndentLevel(N);if(I>=0){h=N,f=I;break}}}if(g!==-1&&(g===-2||g<D-1)){g=-1,p=-1;for(let N=D;N<s;N++){const I=this._computeIndentLevel(N);if(I>=0){g=N,p=I;break}}}};let w=0,b=!0,y=0,S=!0,x=0,E=0;for(let D=0;b||S;D++){const N=e-D,I=e+D;D>1&&(N<1||N<t)&&(b=!1),D>1&&(I>s||I>i)&&(S=!1),D>5e4&&(b=!1,S=!1);let H=-1;if(b&&N>=1){const G=this._computeIndentLevel(N-1);G>=0?(c=N-1,d=G,H=Math.ceil(G/this.textModel.getOptions().indentSize)):(u(N),H=this._getIndentLevelForWhitespaceLine(o,l,d))}let z=-1;if(S&&I<=s){const G=this._computeIndentLevel(I-1);G>=0?(h=I-1,f=G,z=Math.ceil(G/this.textModel.getOptions().indentSize)):(_(I),z=this._getIndentLevelForWhitespaceLine(o,f,p))}if(D===0){E=H;continue}if(D===1){if(I<=s&&z>=0&&E+1===z){b=!1,w=I,y=I,x=z;continue}if(N>=1&&H>=0&&H-1===E){S=!1,w=N,y=N,x=H;continue}if(w=e,y=e,x=E,x===0)return{startLineNumber:w,endLineNumber:y,indent:x}}b&&(H>=x?w=N:b=!1),S&&(z>=x?y=I:S=!1)}return{startLineNumber:w,endLineNumber:y,indent:x}}getLinesBracketGuides(e,t,i,s){var u;const r=[];for(let h=e;h<=t;h++)r.push([]);const o=!0,a=this.textModel.bracketPairs.getBracketPairsInRangeWithMinIndentation(new M(e,1,t,this.textModel.getLineMaxColumn(t))).toArray();let l;if(i&&a.length>0){const h=(e<=i.lineNumber&&i.lineNumber<=t?a:this.textModel.bracketPairs.getBracketPairsInRange(M.fromPositions(i)).toArray()).filter(f=>M.strictContainsPosition(f.range,i));l=(u=VI(h,f=>o))==null?void 0:u.range}const c=this.textModel.getOptions().bracketPairColorizationOptions.independentColorPoolPerBracketType,d=new vye;for(const h of a){if(!h.closingBracketRange)continue;const f=l&&h.range.equalsRange(l);if(!f&&!s.includeInactive)continue;const g=d.getInlineClassName(h.nestingLevel,h.nestingLevelOfEqualBracketType,c)+(s.highlightActive&&f?" "+d.activeClassName:""),p=h.openingBracketRange.getStartPosition(),_=h.closingBracketRange.getStartPosition(),w=s.horizontalGuides===Kb.Enabled||s.horizontalGuides===Kb.EnabledForActive&&f;if(h.range.startLineNumber===h.range.endLineNumber){w&&r[h.range.startLineNumber-e].push(new kb(-1,h.openingBracketRange.getEndPosition().column,g,new iE(!1,_.column),-1,-1));continue}const b=this.getVisibleColumnFromPosition(_),y=this.getVisibleColumnFromPosition(h.openingBracketRange.getStartPosition()),S=Math.min(y,b,h.minVisibleColumnIndentation+1);let x=!1;lo(this.textModel.getLineContent(h.closingBracketRange.startLineNumber))<h.closingBracketRange.startColumn-1&&(x=!0);const N=Math.max(p.lineNumber,e),I=Math.min(_.lineNumber,t),H=x?1:0;for(let z=N;z<I+H;z++)r[z-e].push(new kb(S,-1,g,null,z===p.lineNumber?p.column:-1,z===_.lineNumber?_.column:-1));w&&(p.lineNumber>=e&&y>S&&r[p.lineNumber-e].push(new kb(S,-1,g,new iE(!1,p.column),-1,-1)),_.lineNumber<=t&&b>S&&r[_.lineNumber-e].push(new kb(S,-1,g,new iE(!x,_.column),-1,-1)))}for(const h of r)h.sort((f,g)=>f.visibleColumn-g.visibleColumn);return r}getVisibleColumnFromPosition(e){return ms.visibleColumnFromColumn(this.textModel.getLineContent(e.lineNumber),e.column,this.textModel.getOptions().tabSize)+1}getLinesIndentGuides(e,t){this.assertNotDisposed();const i=this.textModel.getLineCount();if(e<1||e>i)throw new Error("Illegal value for startLineNumber");if(t<1||t>i)throw new Error("Illegal value for endLineNumber");const s=this.textModel.getOptions(),r=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,o=!!(r&&r.offSide),a=new Array(t-e+1);let l=-2,c=-1,d=-2,u=-1;for(let h=e;h<=t;h++){const f=h-e,g=this._computeIndentLevel(h-1);if(g>=0){l=h-1,c=g,a[f]=Math.ceil(g/s.indentSize);continue}if(l===-2){l=-1,c=-1;for(let p=h-2;p>=0;p--){const _=this._computeIndentLevel(p);if(_>=0){l=p,c=_;break}}}if(d!==-1&&(d===-2||d<h-1)){d=-1,u=-1;for(let p=h;p<i;p++){const _=this._computeIndentLevel(p);if(_>=0){d=p,u=_;break}}}a[f]=this._getIndentLevelForWhitespaceLine(o,c,u)}return a}_getIndentLevelForWhitespaceLine(e,t,i){const s=this.textModel.getOptions();return t===-1||i===-1?0:t<i?1+Math.floor(t/s.indentSize):t===i||e?Math.ceil(i/s.indentSize):1+Math.floor(i/s.indentSize)}}class vye{constructor(){this.activeClassName="indent-active"}getInlineClassName(e,t,i){return this.getInlineClassNameOfLevel(i?t:e)}getInlineClassNameOfLevel(e){return`bracket-indent-guide lvl-${e%30}`}}class Jnt{constructor(){this.spacesDiff=0,this.looksLikeAlignment=!1}}function est(n,e,t,i,s){s.spacesDiff=0,s.looksLikeAlignment=!1;let r;for(r=0;r<e&&r<i;r++){const h=n.charCodeAt(r),f=t.charCodeAt(r);if(h!==f)break}let o=0,a=0;for(let h=r;h<e;h++)n.charCodeAt(h)===32?o++:a++;let l=0,c=0;for(let h=r;h<i;h++)t.charCodeAt(h)===32?l++:c++;if(o>0&&a>0||l>0&&c>0)return;const d=Math.abs(a-c),u=Math.abs(o-l);if(d===0){s.spacesDiff=u,u>0&&0<=l-1&&l-1<n.length&&l<t.length&&t.charCodeAt(l)!==32&&n.charCodeAt(l-1)===32&&n.charCodeAt(n.length-1)===44&&(s.looksLikeAlignment=!0);return}if(u%d===0){s.spacesDiff=u/d;return}}function Zle(n,e,t){const i=Math.min(n.getLineCount(),1e4);let s=0,r=0,o="",a=0;const l=[2,4,6,8,3,5,7],c=8,d=[0,0,0,0,0,0,0,0,0],u=new Jnt;for(let g=1;g<=i;g++){const p=n.getLineLength(g),_=n.getLineContent(g),w=p<=65536;let b=!1,y=0,S=0,x=0;for(let D=0,N=p;D<N;D++){const I=w?_.charCodeAt(D):n.getLineCharCode(g,D);if(I===9)x++;else if(I===32)S++;else{b=!0,y=D;break}}if(!b||(x>0?s++:S>1&&r++,est(o,a,_,y,u),u.looksLikeAlignment&&!(t&&e===u.spacesDiff)))continue;const E=u.spacesDiff;E<=c&&d[E]++,o=_,a=y}let h=t;s!==r&&(h=s<r);let f=e;if(h){let g=h?0:.1*i;l.forEach(p=>{const _=d[p];_>g&&(g=_,f=p)}),f===4&&d[4]>0&&d[2]>0&&d[2]>=d[4]/2&&(f=2)}return{insertSpaces:h,tabSize:f}}function Jo(n){return(n.metadata&1)>>>0}function Ji(n,e){n.metadata=n.metadata&254|e<<0}function br(n){return(n.metadata&2)>>>1===1}function qi(n,e){n.metadata=n.metadata&253|(e?1:0)<<1}function bye(n){return(n.metadata&4)>>>2===1}function Xle(n,e){n.metadata=n.metadata&251|(e?1:0)<<2}function wye(n){return(n.metadata&64)>>>6===1}function Qle(n,e){n.metadata=n.metadata&191|(e?1:0)<<6}function tst(n){return(n.metadata&24)>>>3}function Jle(n,e){n.metadata=n.metadata&231|e<<3}function ist(n){return(n.metadata&32)>>>5===1}function ece(n,e){n.metadata=n.metadata&223|(e?1:0)<<5}class Cye{constructor(e,t,i){this.metadata=0,this.parent=this,this.left=this,this.right=this,Ji(this,1),this.start=t,this.end=i,this.delta=0,this.maxEnd=i,this.id=e,this.ownerId=0,this.options=null,Xle(this,!1),Qle(this,!1),Jle(this,1),ece(this,!1),this.cachedVersionId=0,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=i,this.range=null,qi(this,!1)}reset(e,t,i,s){this.start=t,this.end=i,this.maxEnd=i,this.cachedVersionId=e,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=i,this.range=s}setOptions(e){this.options=e;const t=this.options.className;Xle(this,t==="squiggly-error"||t==="squiggly-warning"||t==="squiggly-info"),Qle(this,this.options.glyphMarginClassName!==null),Jle(this,this.options.stickiness),ece(this,this.options.collapseOnReplaceEdit)}setCachedOffsets(e,t,i){this.cachedVersionId!==i&&(this.range=null),this.cachedVersionId=i,this.cachedAbsoluteStart=e,this.cachedAbsoluteEnd=t}detach(){this.parent=null,this.left=null,this.right=null}}const Ft=new Cye(null,0,0);Ft.parent=Ft;Ft.left=Ft;Ft.right=Ft;Ji(Ft,0);class k8{constructor(){this.root=Ft,this.requestNormalizeDelta=!1}intervalSearch(e,t,i,s,r,o){return this.root===Ft?[]:dst(this,e,t,i,s,r,o)}search(e,t,i,s){return this.root===Ft?[]:cst(this,e,t,i,s)}collectNodesFromOwner(e){return ast(this,e)}collectNodesPostOrder(){return lst(this)}insert(e){tce(this,e),this._normalizeDeltaIfNecessary()}delete(e){ice(this,e),this._normalizeDeltaIfNecessary()}resolveNode(e,t){const i=e;let s=0;for(;e!==this.root;)e===e.parent.right&&(s+=e.parent.delta),e=e.parent;const r=i.start+s,o=i.end+s;i.setCachedOffsets(r,o,t)}acceptReplace(e,t,i,s){const r=rst(this,e,e+t);for(let o=0,a=r.length;o<a;o++){const l=r[o];ice(this,l)}this._normalizeDeltaIfNecessary(),ost(this,e,e+t,i),this._normalizeDeltaIfNecessary();for(let o=0,a=r.length;o<a;o++){const l=r[o];l.start=l.cachedAbsoluteStart,l.end=l.cachedAbsoluteEnd,sst(l,e,e+t,i,s),l.maxEnd=l.end,tce(this,l)}this._normalizeDeltaIfNecessary()}_normalizeDeltaIfNecessary(){this.requestNormalizeDelta&&(this.requestNormalizeDelta=!1,nst(this))}}function nst(n){let e=n.root,t=0;for(;e!==Ft;){if(e.left!==Ft&&!br(e.left)){e=e.left;continue}if(e.right!==Ft&&!br(e.right)){t+=e.delta,e=e.right;continue}e.start=t+e.start,e.end=t+e.end,e.delta=0,F_(e),qi(e,!0),qi(e.left,!1),qi(e.right,!1),e===e.parent.right&&(t-=e.parent.delta),e=e.parent}qi(n.root,!1)}function NC(n,e,t,i){return n<t?!0:n>t||i===1?!1:i===2?!0:e}function sst(n,e,t,i,s){const r=tst(n),o=r===0||r===2,a=r===1||r===2,l=t-e,c=i,d=Math.min(l,c),u=n.start;let h=!1;const f=n.end;let g=!1;e<=u&&f<=t&&ist(n)&&(n.start=e,h=!0,n.end=e,g=!0);{const _=s?1:l>0?2:0;!h&&NC(u,o,e,_)&&(h=!0),!g&&NC(f,a,e,_)&&(g=!0)}if(d>0&&!s){const _=l>c?2:0;!h&&NC(u,o,e+d,_)&&(h=!0),!g&&NC(f,a,e+d,_)&&(g=!0)}{const _=s?1:0;!h&&NC(u,o,t,_)&&(n.start=e+c,h=!0),!g&&NC(f,a,t,_)&&(n.end=e+c,g=!0)}const p=c-l;h||(n.start=Math.max(0,u+p)),g||(n.end=Math.max(0,f+p)),n.start>n.end&&(n.end=n.start)}function rst(n,e,t){let i=n.root,s=0,r=0,o=0,a=0;const l=[];let c=0;for(;i!==Ft;){if(br(i)){qi(i.left,!1),qi(i.right,!1),i===i.parent.right&&(s-=i.parent.delta),i=i.parent;continue}if(!br(i.left)){if(r=s+i.maxEnd,r<e){qi(i,!0);continue}if(i.left!==Ft){i=i.left;continue}}if(o=s+i.start,o>t){qi(i,!0);continue}if(a=s+i.end,a>=e&&(i.setCachedOffsets(o,a,0),l[c++]=i),qi(i,!0),i.right!==Ft&&!br(i.right)){s+=i.delta,i=i.right;continue}}return qi(n.root,!1),l}function ost(n,e,t,i){let s=n.root,r=0,o=0,a=0;const l=i-(t-e);for(;s!==Ft;){if(br(s)){qi(s.left,!1),qi(s.right,!1),s===s.parent.right&&(r-=s.parent.delta),F_(s),s=s.parent;continue}if(!br(s.left)){if(o=r+s.maxEnd,o<e){qi(s,!0);continue}if(s.left!==Ft){s=s.left;continue}}if(a=r+s.start,a>t){s.start+=l,s.end+=l,s.delta+=l,(s.delta<-1073741824||s.delta>1073741824)&&(n.requestNormalizeDelta=!0),qi(s,!0);continue}if(qi(s,!0),s.right!==Ft&&!br(s.right)){r+=s.delta,s=s.right;continue}}qi(n.root,!1)}function ast(n,e){let t=n.root;const i=[];let s=0;for(;t!==Ft;){if(br(t)){qi(t.left,!1),qi(t.right,!1),t=t.parent;continue}if(t.left!==Ft&&!br(t.left)){t=t.left;continue}if(t.ownerId===e&&(i[s++]=t),qi(t,!0),t.right!==Ft&&!br(t.right)){t=t.right;continue}}return qi(n.root,!1),i}function lst(n){let e=n.root;const t=[];let i=0;for(;e!==Ft;){if(br(e)){qi(e.left,!1),qi(e.right,!1),e=e.parent;continue}if(e.left!==Ft&&!br(e.left)){e=e.left;continue}if(e.right!==Ft&&!br(e.right)){e=e.right;continue}t[i++]=e,qi(e,!0)}return qi(n.root,!1),t}function cst(n,e,t,i,s){let r=n.root,o=0,a=0,l=0;const c=[];let d=0;for(;r!==Ft;){if(br(r)){qi(r.left,!1),qi(r.right,!1),r===r.parent.right&&(o-=r.parent.delta),r=r.parent;continue}if(r.left!==Ft&&!br(r.left)){r=r.left;continue}a=o+r.start,l=o+r.end,r.setCachedOffsets(a,l,i);let u=!0;if(e&&r.ownerId&&r.ownerId!==e&&(u=!1),t&&bye(r)&&(u=!1),s&&!wye(r)&&(u=!1),u&&(c[d++]=r),qi(r,!0),r.right!==Ft&&!br(r.right)){o+=r.delta,r=r.right;continue}}return qi(n.root,!1),c}function dst(n,e,t,i,s,r,o){let a=n.root,l=0,c=0,d=0,u=0;const h=[];let f=0;for(;a!==Ft;){if(br(a)){qi(a.left,!1),qi(a.right,!1),a===a.parent.right&&(l-=a.parent.delta),a=a.parent;continue}if(!br(a.left)){if(c=l+a.maxEnd,c<e){qi(a,!0);continue}if(a.left!==Ft){a=a.left;continue}}if(d=l+a.start,d>t){qi(a,!0);continue}if(u=l+a.end,u>=e){a.setCachedOffsets(d,u,r);let g=!0;i&&a.ownerId&&a.ownerId!==i&&(g=!1),s&&bye(a)&&(g=!1),o&&!wye(a)&&(g=!1),g&&(h[f++]=a)}if(qi(a,!0),a.right!==Ft&&!br(a.right)){l+=a.delta,a=a.right;continue}}return qi(n.root,!1),h}function tce(n,e){if(n.root===Ft)return e.parent=Ft,e.left=Ft,e.right=Ft,Ji(e,0),n.root=e,n.root;ust(n,e),Wp(e.parent);let t=e;for(;t!==n.root&&Jo(t.parent)===1;)if(t.parent===t.parent.parent.left){const i=t.parent.parent.right;Jo(i)===1?(Ji(t.parent,0),Ji(i,0),Ji(t.parent.parent,1),t=t.parent.parent):(t===t.parent.right&&(t=t.parent,nE(n,t)),Ji(t.parent,0),Ji(t.parent.parent,1),sE(n,t.parent.parent))}else{const i=t.parent.parent.left;Jo(i)===1?(Ji(t.parent,0),Ji(i,0),Ji(t.parent.parent,1),t=t.parent.parent):(t===t.parent.left&&(t=t.parent,sE(n,t)),Ji(t.parent,0),Ji(t.parent.parent,1),nE(n,t.parent.parent))}return Ji(n.root,0),e}function ust(n,e){let t=0,i=n.root;const s=e.start,r=e.end;for(;;)if(fst(s,r,i.start+t,i.end+t)<0)if(i.left===Ft){e.start-=t,e.end-=t,e.maxEnd-=t,i.left=e;break}else i=i.left;else if(i.right===Ft){e.start-=t+i.delta,e.end-=t+i.delta,e.maxEnd-=t+i.delta,i.right=e;break}else t+=i.delta,i=i.right;e.parent=i,e.left=Ft,e.right=Ft,Ji(e,1)}function ice(n,e){let t,i;if(e.left===Ft?(t=e.right,i=e,t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(n.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta):e.right===Ft?(t=e.left,i=e):(i=hst(e.right),t=i.right,t.start+=i.delta,t.end+=i.delta,t.delta+=i.delta,(t.delta<-1073741824||t.delta>1073741824)&&(n.requestNormalizeDelta=!0),i.start+=e.delta,i.end+=e.delta,i.delta=e.delta,(i.delta<-1073741824||i.delta>1073741824)&&(n.requestNormalizeDelta=!0)),i===n.root){n.root=t,Ji(t,0),e.detach(),E8(),F_(t),n.root.parent=Ft;return}const s=Jo(i)===1;if(i===i.parent.left?i.parent.left=t:i.parent.right=t,i===e?t.parent=i.parent:(i.parent===e?t.parent=i:t.parent=i.parent,i.left=e.left,i.right=e.right,i.parent=e.parent,Ji(i,Jo(e)),e===n.root?n.root=i:e===e.parent.left?e.parent.left=i:e.parent.right=i,i.left!==Ft&&(i.left.parent=i),i.right!==Ft&&(i.right.parent=i)),e.detach(),s){Wp(t.parent),i!==e&&(Wp(i),Wp(i.parent)),E8();return}Wp(t),Wp(t.parent),i!==e&&(Wp(i),Wp(i.parent));let r;for(;t!==n.root&&Jo(t)===0;)t===t.parent.left?(r=t.parent.right,Jo(r)===1&&(Ji(r,0),Ji(t.parent,1),nE(n,t.parent),r=t.parent.right),Jo(r.left)===0&&Jo(r.right)===0?(Ji(r,1),t=t.parent):(Jo(r.right)===0&&(Ji(r.left,0),Ji(r,1),sE(n,r),r=t.parent.right),Ji(r,Jo(t.parent)),Ji(t.parent,0),Ji(r.right,0),nE(n,t.parent),t=n.root)):(r=t.parent.left,Jo(r)===1&&(Ji(r,0),Ji(t.parent,1),sE(n,t.parent),r=t.parent.left),Jo(r.left)===0&&Jo(r.right)===0?(Ji(r,1),t=t.parent):(Jo(r.left)===0&&(Ji(r.right,0),Ji(r,1),nE(n,r),r=t.parent.left),Ji(r,Jo(t.parent)),Ji(t.parent,0),Ji(r.left,0),sE(n,t.parent),t=n.root));Ji(t,0),E8()}function hst(n){for(;n.left!==Ft;)n=n.left;return n}function E8(){Ft.parent=Ft,Ft.delta=0,Ft.start=0,Ft.end=0}function nE(n,e){const t=e.right;t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(n.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta,e.right=t.left,t.left!==Ft&&(t.left.parent=e),t.parent=e.parent,e.parent===Ft?n.root=t:e===e.parent.left?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t,F_(e),F_(t)}function sE(n,e){const t=e.left;e.delta-=t.delta,(e.delta<-1073741824||e.delta>1073741824)&&(n.requestNormalizeDelta=!0),e.start-=t.delta,e.end-=t.delta,e.left=t.right,t.right!==Ft&&(t.right.parent=e),t.parent=e.parent,e.parent===Ft?n.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t,F_(e),F_(t)}function yye(n){let e=n.end;if(n.left!==Ft){const t=n.left.maxEnd;t>e&&(e=t)}if(n.right!==Ft){const t=n.right.maxEnd+n.delta;t>e&&(e=t)}return e}function F_(n){n.maxEnd=yye(n)}function Wp(n){for(;n!==Ft;){const e=yye(n);if(n.maxEnd===e)return;n.maxEnd=e,n=n.parent}}function fst(n,e,t,i){return n===t?e-i:n-t}class v${constructor(e,t){this.piece=e,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==yt)return bQ(this.right);let e=this;for(;e.parent!==yt&&e.parent.left!==e;)e=e.parent;return e.parent===yt?yt:e.parent}prev(){if(this.left!==yt)return Sye(this.left);let e=this;for(;e.parent!==yt&&e.parent.right!==e;)e=e.parent;return e.parent===yt?yt:e.parent}detach(){this.parent=null,this.left=null,this.right=null}}const yt=new v$(null,0);yt.parent=yt;yt.left=yt;yt.right=yt;yt.color=0;function bQ(n){for(;n.left!==yt;)n=n.left;return n}function Sye(n){for(;n.right!==yt;)n=n.right;return n}function wQ(n){return n===yt?0:n.size_left+n.piece.length+wQ(n.right)}function CQ(n){return n===yt?0:n.lf_left+n.piece.lineFeedCnt+CQ(n.right)}function I8(){yt.parent=yt}function rE(n,e){const t=e.right;t.size_left+=e.size_left+(e.piece?e.piece.length:0),t.lf_left+=e.lf_left+(e.piece?e.piece.lineFeedCnt:0),e.right=t.left,t.left!==yt&&(t.left.parent=e),t.parent=e.parent,e.parent===yt?n.root=t:e.parent.left===e?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t}function oE(n,e){const t=e.left;e.left=t.right,t.right!==yt&&(t.right.parent=e),t.parent=e.parent,e.size_left-=t.size_left+(t.piece?t.piece.length:0),e.lf_left-=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),e.parent===yt?n.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t}function sA(n,e){let t,i;if(e.left===yt?(i=e,t=i.right):e.right===yt?(i=e,t=i.left):(i=bQ(e.right),t=i.right),i===n.root){n.root=t,t.color=0,e.detach(),I8(),n.root.parent=yt;return}const s=i.color===1;if(i===i.parent.left?i.parent.left=t:i.parent.right=t,i===e?(t.parent=i.parent,_k(n,t)):(i.parent===e?t.parent=i:t.parent=i.parent,_k(n,t),i.left=e.left,i.right=e.right,i.parent=e.parent,i.color=e.color,e===n.root?n.root=i:e===e.parent.left?e.parent.left=i:e.parent.right=i,i.left!==yt&&(i.left.parent=i),i.right!==yt&&(i.right.parent=i),i.size_left=e.size_left,i.lf_left=e.lf_left,_k(n,i)),e.detach(),t.parent.left===t){const o=wQ(t),a=CQ(t);if(o!==t.parent.size_left||a!==t.parent.lf_left){const l=o-t.parent.size_left,c=a-t.parent.lf_left;t.parent.size_left=o,t.parent.lf_left=a,Vf(n,t.parent,l,c)}}if(_k(n,t.parent),s){I8();return}let r;for(;t!==n.root&&t.color===0;)t===t.parent.left?(r=t.parent.right,r.color===1&&(r.color=0,t.parent.color=1,rE(n,t.parent),r=t.parent.right),r.left.color===0&&r.right.color===0?(r.color=1,t=t.parent):(r.right.color===0&&(r.left.color=0,r.color=1,oE(n,r),r=t.parent.right),r.color=t.parent.color,t.parent.color=0,r.right.color=0,rE(n,t.parent),t=n.root)):(r=t.parent.left,r.color===1&&(r.color=0,t.parent.color=1,oE(n,t.parent),r=t.parent.left),r.left.color===0&&r.right.color===0?(r.color=1,t=t.parent):(r.left.color===0&&(r.right.color=0,r.color=1,rE(n,r),r=t.parent.left),r.color=t.parent.color,t.parent.color=0,r.left.color=0,oE(n,t.parent),t=n.root));t.color=0,I8()}function nce(n,e){for(_k(n,e);e!==n.root&&e.parent.color===1;)if(e.parent===e.parent.parent.left){const t=e.parent.parent.right;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.right&&(e=e.parent,rE(n,e)),e.parent.color=0,e.parent.parent.color=1,oE(n,e.parent.parent))}else{const t=e.parent.parent.left;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.left&&(e=e.parent,oE(n,e)),e.parent.color=0,e.parent.parent.color=1,rE(n,e.parent.parent))}n.root.color=0}function Vf(n,e,t,i){for(;e!==n.root&&e!==yt;)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=i),e=e.parent}function _k(n,e){let t=0,i=0;if(e!==n.root){for(;e!==n.root&&e===e.parent.right;)e=e.parent;if(e!==n.root)for(e=e.parent,t=wQ(e.left)-e.size_left,i=CQ(e.left)-e.lf_left,e.size_left+=t,e.lf_left+=i;e!==n.root&&(t!==0||i!==0);)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=i),e=e.parent}}const Pf=65535;function xye(n){let e;return n[n.length-1]<65536?e=new Uint16Array(n.length):e=new Uint32Array(n.length),e.set(n,0),e}class gst{constructor(e,t,i,s,r){this.lineStarts=e,this.cr=t,this.lf=i,this.crlf=s,this.isBasicASCII=r}}function Uf(n,e=!0){const t=[0];let i=1;for(let s=0,r=n.length;s<r;s++){const o=n.charCodeAt(s);o===13?s+1<r&&n.charCodeAt(s+1)===10?(t[i++]=s+2,s++):t[i++]=s+1:o===10&&(t[i++]=s+1)}return e?xye(t):t}function pst(n,e){n.length=0,n[0]=0;let t=1,i=0,s=0,r=0,o=!0;for(let l=0,c=e.length;l<c;l++){const d=e.charCodeAt(l);d===13?l+1<c&&e.charCodeAt(l+1)===10?(r++,n[t++]=l+2,l++):(i++,n[t++]=l+1):d===10?(s++,n[t++]=l+1):o&&d!==9&&(d<32||d>126)&&(o=!1)}const a=new gst(xye(n),i,s,r,o);return n.length=0,a}class Da{constructor(e,t,i,s,r){this.bufferIndex=e,this.start=t,this.end=i,this.lineFeedCnt=s,this.length=r}}class ob{constructor(e,t){this.buffer=e,this.lineStarts=t}}class mst{constructor(e,t){this._pieces=[],this._tree=e,this._BOM=t,this._index=0,e.root!==yt&&e.iterate(e.root,i=>(i!==yt&&this._pieces.push(i.piece),!0))}read(){return this._pieces.length===0?this._index===0?(this._index++,this._BOM):null:this._index>this._pieces.length-1?null:this._index===0?this._BOM+this._tree.getPieceContent(this._pieces[this._index++]):this._tree.getPieceContent(this._pieces[this._index++])}}class _st{constructor(e){this._limit=e,this._cache=[]}get(e){for(let t=this._cache.length-1;t>=0;t--){const i=this._cache[t];if(i.nodeStartOffset<=e&&i.nodeStartOffset+i.node.piece.length>=e)return i}return null}get2(e){for(let t=this._cache.length-1;t>=0;t--){const i=this._cache[t];if(i.nodeStartLineNumber&&i.nodeStartLineNumber<e&&i.nodeStartLineNumber+i.node.piece.lineFeedCnt>=e)return i}return null}set(e){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(e)}validate(e){let t=!1;const i=this._cache;for(let s=0;s<i.length;s++){const r=i[s];if(r.node.parent===null||r.nodeStartOffset>=e){i[s]=null,t=!0;continue}}if(t){const s=[];for(const r of i)r!==null&&s.push(r);this._cache=s}}}class vst{constructor(e,t,i){this.create(e,t,i)}create(e,t,i){this._buffers=[new ob("",[0])],this._lastChangeBufferPos={line:0,column:0},this.root=yt,this._lineCnt=1,this._length=0,this._EOL=t,this._EOLLength=t.length,this._EOLNormalized=i;let s=null;for(let r=0,o=e.length;r<o;r++)if(e[r].buffer.length>0){e[r].lineStarts||(e[r].lineStarts=Uf(e[r].buffer));const a=new Da(r+1,{line:0,column:0},{line:e[r].lineStarts.length-1,column:e[r].buffer.length-e[r].lineStarts[e[r].lineStarts.length-1]},e[r].lineStarts.length-1,e[r].buffer.length);this._buffers.push(e[r]),s=this.rbInsertRight(s,a)}this._searchCache=new _st(1),this._lastVisitedLine={lineNumber:0,value:""},this.computeBufferMetadata()}normalizeEOL(e){const t=Pf,i=t-Math.floor(t/3),s=i*2;let r="",o=0;const a=[];if(this.iterate(this.root,l=>{const c=this.getNodeContent(l),d=c.length;if(o<=i||o+d<s)return r+=c,o+=d,!0;const u=r.replace(/\r\n|\r|\n/g,e);return a.push(new ob(u,Uf(u))),r=c,o=d,!0}),o>0){const l=r.replace(/\r\n|\r|\n/g,e);a.push(new ob(l,Uf(l)))}this.create(a,e,!0)}getEOL(){return this._EOL}setEOL(e){this._EOL=e,this._EOLLength=this._EOL.length,this.normalizeEOL(e)}createSnapshot(e){return new mst(this,e)}getOffsetAt(e,t){let i=0,s=this.root;for(;s!==yt;)if(s.left!==yt&&s.lf_left+1>=e)s=s.left;else if(s.lf_left+s.piece.lineFeedCnt+1>=e){i+=s.size_left;const r=this.getAccumulatedValue(s,e-s.lf_left-2);return i+=r+t-1}else e-=s.lf_left+s.piece.lineFeedCnt,i+=s.size_left+s.piece.length,s=s.right;return i}getPositionAt(e){e=Math.floor(e),e=Math.max(0,e);let t=this.root,i=0;const s=e;for(;t!==yt;)if(t.size_left!==0&&t.size_left>=e)t=t.left;else if(t.size_left+t.piece.length>=e){const r=this.getIndexOf(t,e-t.size_left);if(i+=t.lf_left+r.index,r.index===0){const o=this.getOffsetAt(i+1,1),a=s-o;return new Y(i+1,a+1)}return new Y(i+1,r.remainder+1)}else if(e-=t.size_left+t.piece.length,i+=t.lf_left+t.piece.lineFeedCnt,t.right===yt){const r=this.getOffsetAt(i+1,1),o=s-e-r;return new Y(i+1,o+1)}else t=t.right;return new Y(1,1)}getValueInRange(e,t){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";const i=this.nodeAt2(e.startLineNumber,e.startColumn),s=this.nodeAt2(e.endLineNumber,e.endColumn),r=this.getValueInRange2(i,s);return t?t!==this._EOL||!this._EOLNormalized?r.replace(/\r\n|\r|\n/g,t):t===this.getEOL()&&this._EOLNormalized?r:r.replace(/\r\n|\r|\n/g,t):r}getValueInRange2(e,t){if(e.node===t.node){const a=e.node,l=this._buffers[a.piece.bufferIndex].buffer,c=this.offsetInBuffer(a.piece.bufferIndex,a.piece.start);return l.substring(c+e.remainder,c+t.remainder)}let i=e.node;const s=this._buffers[i.piece.bufferIndex].buffer,r=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);let o=s.substring(r+e.remainder,r+i.piece.length);for(i=i.next();i!==yt;){const a=this._buffers[i.piece.bufferIndex].buffer,l=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);if(i===t.node){o+=a.substring(l,l+t.remainder);break}else o+=a.substr(l,i.piece.length);i=i.next()}return o}getLinesContent(){const e=[];let t=0,i="",s=!1;return this.iterate(this.root,r=>{if(r===yt)return!0;const o=r.piece;let a=o.length;if(a===0)return!0;const l=this._buffers[o.bufferIndex].buffer,c=this._buffers[o.bufferIndex].lineStarts,d=o.start.line,u=o.end.line;let h=c[d]+o.start.column;if(s&&(l.charCodeAt(h)===10&&(h++,a--),e[t++]=i,i="",s=!1,a===0))return!0;if(d===u)return!this._EOLNormalized&&l.charCodeAt(h+a-1)===13?(s=!0,i+=l.substr(h,a-1)):i+=l.substr(h,a),!0;i+=this._EOLNormalized?l.substring(h,Math.max(h,c[d+1]-this._EOLLength)):l.substring(h,c[d+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=i;for(let f=d+1;f<u;f++)i=this._EOLNormalized?l.substring(c[f],c[f+1]-this._EOLLength):l.substring(c[f],c[f+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=i;return!this._EOLNormalized&&l.charCodeAt(c[u]+o.end.column-1)===13?(s=!0,o.end.column===0?t--:i=l.substr(c[u],o.end.column-1)):i=l.substr(c[u],o.end.column),!0}),s&&(e[t++]=i,i=""),e[t++]=i,e}getLength(){return this._length}getLineCount(){return this._lineCnt}getLineContent(e){return this._lastVisitedLine.lineNumber===e?this._lastVisitedLine.value:(this._lastVisitedLine.lineNumber=e,e===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(e):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(e,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,""),this._lastVisitedLine.value)}_getCharCode(e){if(e.remainder===e.node.piece.length){const t=e.node.next();if(!t)return 0;const i=this._buffers[t.piece.bufferIndex],s=this.offsetInBuffer(t.piece.bufferIndex,t.piece.start);return i.buffer.charCodeAt(s)}else{const t=this._buffers[e.node.piece.bufferIndex],s=this.offsetInBuffer(e.node.piece.bufferIndex,e.node.piece.start)+e.remainder;return t.buffer.charCodeAt(s)}}getLineCharCode(e,t){const i=this.nodeAt2(e,t+1);return this._getCharCode(i)}getLineLength(e){if(e===this.getLineCount()){const t=this.getOffsetAt(e,1);return this.getLength()-t}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this._EOLLength}findMatchesInNode(e,t,i,s,r,o,a,l,c,d,u){const h=this._buffers[e.piece.bufferIndex],f=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start),g=this.offsetInBuffer(e.piece.bufferIndex,r),p=this.offsetInBuffer(e.piece.bufferIndex,o);let _;const w={line:0,column:0};let b,y;t._wordSeparators?(b=h.buffer.substring(g,p),y=S=>S+g,t.reset(0)):(b=h.buffer,y=S=>S,t.reset(g));do if(_=t.next(b),_){if(y(_.index)>=p)return d;this.positionInBuffer(e,y(_.index)-f,w);const S=this.getLineFeedCnt(e.piece.bufferIndex,r,w),x=w.line===r.line?w.column-r.column+s:w.column+1,E=x+_[0].length;if(u[d++]=eb(new M(i+S,x,i+S,E),_,l),y(_.index)+_[0].length>=p||d>=c)return d}while(_);return d}findMatchesLineByLine(e,t,i,s){const r=[];let o=0;const a=new S1(t.wordSeparators,t.regex);let l=this.nodeAt2(e.startLineNumber,e.startColumn);if(l===null)return[];const c=this.nodeAt2(e.endLineNumber,e.endColumn);if(c===null)return[];let d=this.positionInBuffer(l.node,l.remainder);const u=this.positionInBuffer(c.node,c.remainder);if(l.node===c.node)return this.findMatchesInNode(l.node,a,e.startLineNumber,e.startColumn,d,u,t,i,s,o,r),r;let h=e.startLineNumber,f=l.node;for(;f!==c.node;){const p=this.getLineFeedCnt(f.piece.bufferIndex,d,f.piece.end);if(p>=1){const w=this._buffers[f.piece.bufferIndex].lineStarts,b=this.offsetInBuffer(f.piece.bufferIndex,f.piece.start),y=w[d.line+p],S=h===e.startLineNumber?e.startColumn:1;if(o=this.findMatchesInNode(f,a,h,S,d,this.positionInBuffer(f,y-b),t,i,s,o,r),o>=s)return r;h+=p}const _=h===e.startLineNumber?e.startColumn-1:0;if(h===e.endLineNumber){const w=this.getLineContent(h).substring(_,e.endColumn-1);return o=this._findMatchesInLine(t,a,w,e.endLineNumber,_,o,r,i,s),r}if(o=this._findMatchesInLine(t,a,this.getLineContent(h).substr(_),h,_,o,r,i,s),o>=s)return r;h++,l=this.nodeAt2(h,1),f=l.node,d=this.positionInBuffer(l.node,l.remainder)}if(h===e.endLineNumber){const p=h===e.startLineNumber?e.startColumn-1:0,_=this.getLineContent(h).substring(p,e.endColumn-1);return o=this._findMatchesInLine(t,a,_,e.endLineNumber,p,o,r,i,s),r}const g=h===e.startLineNumber?e.startColumn:1;return o=this.findMatchesInNode(c.node,a,h,g,d,u,t,i,s,o,r),r}_findMatchesInLine(e,t,i,s,r,o,a,l,c){const d=e.wordSeparators;if(!l&&e.simpleSearch){const h=e.simpleSearch,f=h.length,g=i.length;let p=-f;for(;(p=i.indexOf(h,p+f))!==-1;)if((!d||yX(d,i,g,p,f))&&(a[o++]=new HI(new M(s,p+1+r,s,p+1+f+r),null),o>=c))return o;return o}let u;t.reset(0);do if(u=t.next(i),u&&(a[o++]=eb(new M(s,u.index+1+r,s,u.index+1+u[0].length+r),u,l),o>=c))return o;while(u);return o}insert(e,t,i=!1){if(this._EOLNormalized=this._EOLNormalized&&i,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",this.root!==yt){const{node:s,remainder:r,nodeStartOffset:o}=this.nodeAt(e),a=s.piece,l=a.bufferIndex,c=this.positionInBuffer(s,r);if(s.piece.bufferIndex===0&&a.end.line===this._lastChangeBufferPos.line&&a.end.column===this._lastChangeBufferPos.column&&o+a.length===e&&t.length<Pf){this.appendToNode(s,t),this.computeBufferMetadata();return}if(o===e)this.insertContentToNodeLeft(t,s),this._searchCache.validate(e);else if(o+s.piece.length>e){const d=[];let u=new Da(a.bufferIndex,c,a.end,this.getLineFeedCnt(a.bufferIndex,c,a.end),this.offsetInBuffer(l,a.end)-this.offsetInBuffer(l,c));if(this.shouldCheckCRLF()&&this.endWithCR(t)&&this.nodeCharCodeAt(s,r)===10){const p={line:u.start.line+1,column:0};u=new Da(u.bufferIndex,p,u.end,this.getLineFeedCnt(u.bufferIndex,p,u.end),u.length-1),t+=`
`}if(this.shouldCheckCRLF()&&this.startWithLF(t))if(this.nodeCharCodeAt(s,r-1)===13){const p=this.positionInBuffer(s,r-1);this.deleteNodeTail(s,p),t="\r"+t,s.piece.length===0&&d.push(s)}else this.deleteNodeTail(s,c);else this.deleteNodeTail(s,c);const h=this.createNewPieces(t);u.length>0&&this.rbInsertRight(s,u);let f=s;for(let g=0;g<h.length;g++)f=this.rbInsertRight(f,h[g]);this.deleteNodes(d)}else this.insertContentToNodeRight(t,s)}else{const s=this.createNewPieces(t);let r=this.rbInsertLeft(null,s[0]);for(let o=1;o<s.length;o++)r=this.rbInsertRight(r,s[o])}this.computeBufferMetadata()}delete(e,t){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",t<=0||this.root===yt)return;const i=this.nodeAt(e),s=this.nodeAt(e+t),r=i.node,o=s.node;if(r===o){const h=this.positionInBuffer(r,i.remainder),f=this.positionInBuffer(r,s.remainder);if(i.nodeStartOffset===e){if(t===r.piece.length){const g=r.next();sA(this,r),this.validateCRLFWithPrevNode(g),this.computeBufferMetadata();return}this.deleteNodeHead(r,f),this._searchCache.validate(e),this.validateCRLFWithPrevNode(r),this.computeBufferMetadata();return}if(i.nodeStartOffset+r.piece.length===e+t){this.deleteNodeTail(r,h),this.validateCRLFWithNextNode(r),this.computeBufferMetadata();return}this.shrinkNode(r,h,f),this.computeBufferMetadata();return}const a=[],l=this.positionInBuffer(r,i.remainder);this.deleteNodeTail(r,l),this._searchCache.validate(e),r.piece.length===0&&a.push(r);const c=this.positionInBuffer(o,s.remainder);this.deleteNodeHead(o,c),o.piece.length===0&&a.push(o);const d=r.next();for(let h=d;h!==yt&&h!==o;h=h.next())a.push(h);const u=r.piece.length===0?r.prev():r;this.deleteNodes(a),this.validateCRLFWithNextNode(u),this.computeBufferMetadata()}insertContentToNodeLeft(e,t){const i=[];if(this.shouldCheckCRLF()&&this.endWithCR(e)&&this.startWithLF(t)){const o=t.piece,a={line:o.start.line+1,column:0},l=new Da(o.bufferIndex,a,o.end,this.getLineFeedCnt(o.bufferIndex,a,o.end),o.length-1);t.piece=l,e+=`
`,Vf(this,t,-1,-1),t.piece.length===0&&i.push(t)}const s=this.createNewPieces(e);let r=this.rbInsertLeft(t,s[s.length-1]);for(let o=s.length-2;o>=0;o--)r=this.rbInsertLeft(r,s[o]);this.validateCRLFWithPrevNode(r),this.deleteNodes(i)}insertContentToNodeRight(e,t){this.adjustCarriageReturnFromNext(e,t)&&(e+=`
`);const i=this.createNewPieces(e),s=this.rbInsertRight(t,i[0]);let r=s;for(let o=1;o<i.length;o++)r=this.rbInsertRight(r,i[o]);this.validateCRLFWithPrevNode(s)}positionInBuffer(e,t,i){const s=e.piece,r=e.piece.bufferIndex,o=this._buffers[r].lineStarts,l=o[s.start.line]+s.start.column+t;let c=s.start.line,d=s.end.line,u=0,h=0,f=0;for(;c<=d&&(u=c+(d-c)/2|0,f=o[u],u!==d);)if(h=o[u+1],l<f)d=u-1;else if(l>=h)c=u+1;else break;return i?(i.line=u,i.column=l-f,null):{line:u,column:l-f}}getLineFeedCnt(e,t,i){if(i.column===0)return i.line-t.line;const s=this._buffers[e].lineStarts;if(i.line===s.length-1)return i.line-t.line;const r=s[i.line+1],o=s[i.line]+i.column;if(r>o+1)return i.line-t.line;const a=o-1;return this._buffers[e].buffer.charCodeAt(a)===13?i.line-t.line+1:i.line-t.line}offsetInBuffer(e,t){return this._buffers[e].lineStarts[t.line]+t.column}deleteNodes(e){for(let t=0;t<e.length;t++)sA(this,e[t])}createNewPieces(e){if(e.length>Pf){const d=[];for(;e.length>Pf;){const h=e.charCodeAt(Pf-1);let f;h===13||h>=55296&&h<=56319?(f=e.substring(0,Pf-1),e=e.substring(Pf-1)):(f=e.substring(0,Pf),e=e.substring(Pf));const g=Uf(f);d.push(new Da(this._buffers.length,{line:0,column:0},{line:g.length-1,column:f.length-g[g.length-1]},g.length-1,f.length)),this._buffers.push(new ob(f,g))}const u=Uf(e);return d.push(new Da(this._buffers.length,{line:0,column:0},{line:u.length-1,column:e.length-u[u.length-1]},u.length-1,e.length)),this._buffers.push(new ob(e,u)),d}let t=this._buffers[0].buffer.length;const i=Uf(e,!1);let s=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===t&&t!==0&&this.startWithLF(e)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},s=this._lastChangeBufferPos;for(let d=0;d<i.length;d++)i[d]+=t+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(i.slice(1)),this._buffers[0].buffer+="_"+e,t+=1}else{if(t!==0)for(let d=0;d<i.length;d++)i[d]+=t;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(i.slice(1)),this._buffers[0].buffer+=e}const r=this._buffers[0].buffer.length,o=this._buffers[0].lineStarts.length-1,a=r-this._buffers[0].lineStarts[o],l={line:o,column:a},c=new Da(0,s,l,this.getLineFeedCnt(0,s,l),r-t);return this._lastChangeBufferPos=l,[c]}getLineRawContent(e,t=0){let i=this.root,s="";const r=this._searchCache.get2(e);if(r){i=r.node;const o=this.getAccumulatedValue(i,e-r.nodeStartLineNumber-1),a=this._buffers[i.piece.bufferIndex].buffer,l=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);if(r.nodeStartLineNumber+i.piece.lineFeedCnt===e)s=a.substring(l+o,l+i.piece.length);else{const c=this.getAccumulatedValue(i,e-r.nodeStartLineNumber);return a.substring(l+o,l+c-t)}}else{let o=0;const a=e;for(;i!==yt;)if(i.left!==yt&&i.lf_left>=e-1)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt>e-1){const l=this.getAccumulatedValue(i,e-i.lf_left-2),c=this.getAccumulatedValue(i,e-i.lf_left-1),d=this._buffers[i.piece.bufferIndex].buffer,u=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);return o+=i.size_left,this._searchCache.set({node:i,nodeStartOffset:o,nodeStartLineNumber:a-(e-1-i.lf_left)}),d.substring(u+l,u+c-t)}else if(i.lf_left+i.piece.lineFeedCnt===e-1){const l=this.getAccumulatedValue(i,e-i.lf_left-2),c=this._buffers[i.piece.bufferIndex].buffer,d=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);s=c.substring(d+l,d+i.piece.length);break}else e-=i.lf_left+i.piece.lineFeedCnt,o+=i.size_left+i.piece.length,i=i.right}for(i=i.next();i!==yt;){const o=this._buffers[i.piece.bufferIndex].buffer;if(i.piece.lineFeedCnt>0){const a=this.getAccumulatedValue(i,0),l=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);return s+=o.substring(l,l+a-t),s}else{const a=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);s+=o.substr(a,i.piece.length)}i=i.next()}return s}computeBufferMetadata(){let e=this.root,t=1,i=0;for(;e!==yt;)t+=e.lf_left+e.piece.lineFeedCnt,i+=e.size_left+e.piece.length,e=e.right;this._lineCnt=t,this._length=i,this._searchCache.validate(this._length)}getIndexOf(e,t){const i=e.piece,s=this.positionInBuffer(e,t),r=s.line-i.start.line;if(this.offsetInBuffer(i.bufferIndex,i.end)-this.offsetInBuffer(i.bufferIndex,i.start)===t){const o=this.getLineFeedCnt(e.piece.bufferIndex,i.start,s);if(o!==r)return{index:o,remainder:0}}return{index:r,remainder:s.column}}getAccumulatedValue(e,t){if(t<0)return 0;const i=e.piece,s=this._buffers[i.bufferIndex].lineStarts,r=i.start.line+t+1;return r>i.end.line?s[i.end.line]+i.end.column-s[i.start.line]-i.start.column:s[r]-s[i.start.line]-i.start.column}deleteNodeTail(e,t){const i=e.piece,s=i.lineFeedCnt,r=this.offsetInBuffer(i.bufferIndex,i.end),o=t,a=this.offsetInBuffer(i.bufferIndex,o),l=this.getLineFeedCnt(i.bufferIndex,i.start,o),c=l-s,d=a-r,u=i.length+d;e.piece=new Da(i.bufferIndex,i.start,o,l,u),Vf(this,e,d,c)}deleteNodeHead(e,t){const i=e.piece,s=i.lineFeedCnt,r=this.offsetInBuffer(i.bufferIndex,i.start),o=t,a=this.getLineFeedCnt(i.bufferIndex,o,i.end),l=this.offsetInBuffer(i.bufferIndex,o),c=a-s,d=r-l,u=i.length+d;e.piece=new Da(i.bufferIndex,o,i.end,a,u),Vf(this,e,d,c)}shrinkNode(e,t,i){const s=e.piece,r=s.start,o=s.end,a=s.length,l=s.lineFeedCnt,c=t,d=this.getLineFeedCnt(s.bufferIndex,s.start,c),u=this.offsetInBuffer(s.bufferIndex,t)-this.offsetInBuffer(s.bufferIndex,r);e.piece=new Da(s.bufferIndex,s.start,c,d,u),Vf(this,e,u-a,d-l);const h=new Da(s.bufferIndex,i,o,this.getLineFeedCnt(s.bufferIndex,i,o),this.offsetInBuffer(s.bufferIndex,o)-this.offsetInBuffer(s.bufferIndex,i)),f=this.rbInsertRight(e,h);this.validateCRLFWithPrevNode(f)}appendToNode(e,t){this.adjustCarriageReturnFromNext(t,e)&&(t+=`
`);const i=this.shouldCheckCRLF()&&this.startWithLF(t)&&this.endWithCR(e),s=this._buffers[0].buffer.length;this._buffers[0].buffer+=t;const r=Uf(t,!1);for(let f=0;f<r.length;f++)r[f]+=s;if(i){const f=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:s-f}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(r.slice(1));const o=this._buffers[0].lineStarts.length-1,a=this._buffers[0].buffer.length-this._buffers[0].lineStarts[o],l={line:o,column:a},c=e.piece.length+t.length,d=e.piece.lineFeedCnt,u=this.getLineFeedCnt(0,e.piece.start,l),h=u-d;e.piece=new Da(e.piece.bufferIndex,e.piece.start,l,u,c),this._lastChangeBufferPos=l,Vf(this,e,t.length,h)}nodeAt(e){let t=this.root;const i=this._searchCache.get(e);if(i)return{node:i.node,nodeStartOffset:i.nodeStartOffset,remainder:e-i.nodeStartOffset};let s=0;for(;t!==yt;)if(t.size_left>e)t=t.left;else if(t.size_left+t.piece.length>=e){s+=t.size_left;const r={node:t,remainder:e-t.size_left,nodeStartOffset:s};return this._searchCache.set(r),r}else e-=t.size_left+t.piece.length,s+=t.size_left+t.piece.length,t=t.right;return null}nodeAt2(e,t){let i=this.root,s=0;for(;i!==yt;)if(i.left!==yt&&i.lf_left>=e-1)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt>e-1){const r=this.getAccumulatedValue(i,e-i.lf_left-2),o=this.getAccumulatedValue(i,e-i.lf_left-1);return s+=i.size_left,{node:i,remainder:Math.min(r+t-1,o),nodeStartOffset:s}}else if(i.lf_left+i.piece.lineFeedCnt===e-1){const r=this.getAccumulatedValue(i,e-i.lf_left-2);if(r+t-1<=i.piece.length)return{node:i,remainder:r+t-1,nodeStartOffset:s};t-=i.piece.length-r;break}else e-=i.lf_left+i.piece.lineFeedCnt,s+=i.size_left+i.piece.length,i=i.right;for(i=i.next();i!==yt;){if(i.piece.lineFeedCnt>0){const r=this.getAccumulatedValue(i,0),o=this.offsetOfNode(i);return{node:i,remainder:Math.min(t-1,r),nodeStartOffset:o}}else if(i.piece.length>=t-1){const r=this.offsetOfNode(i);return{node:i,remainder:t-1,nodeStartOffset:r}}else t-=i.piece.length;i=i.next()}return null}nodeCharCodeAt(e,t){if(e.piece.lineFeedCnt<1)return-1;const i=this._buffers[e.piece.bufferIndex],s=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start)+t;return i.buffer.charCodeAt(s)}offsetOfNode(e){if(!e)return 0;let t=e.size_left;for(;e!==this.root;)e.parent.right===e&&(t+=e.parent.size_left+e.parent.piece.length),e=e.parent;return t}shouldCheckCRLF(){return!(this._EOLNormalized&&this._EOL===`
`)}startWithLF(e){if(typeof e=="string")return e.charCodeAt(0)===10;if(e===yt||e.piece.lineFeedCnt===0)return!1;const t=e.piece,i=this._buffers[t.bufferIndex].lineStarts,s=t.start.line,r=i[s]+t.start.column;return s===i.length-1||i[s+1]>r+1?!1:this._buffers[t.bufferIndex].buffer.charCodeAt(r)===10}endWithCR(e){return typeof e=="string"?e.charCodeAt(e.length-1)===13:e===yt||e.piece.lineFeedCnt===0?!1:this.nodeCharCodeAt(e,e.piece.length-1)===13}validateCRLFWithPrevNode(e){if(this.shouldCheckCRLF()&&this.startWithLF(e)){const t=e.prev();this.endWithCR(t)&&this.fixCRLF(t,e)}}validateCRLFWithNextNode(e){if(this.shouldCheckCRLF()&&this.endWithCR(e)){const t=e.next();this.startWithLF(t)&&this.fixCRLF(e,t)}}fixCRLF(e,t){const i=[],s=this._buffers[e.piece.bufferIndex].lineStarts;let r;e.piece.end.column===0?r={line:e.piece.end.line-1,column:s[e.piece.end.line]-s[e.piece.end.line-1]-1}:r={line:e.piece.end.line,column:e.piece.end.column-1};const o=e.piece.length-1,a=e.piece.lineFeedCnt-1;e.piece=new Da(e.piece.bufferIndex,e.piece.start,r,a,o),Vf(this,e,-1,-1),e.piece.length===0&&i.push(e);const l={line:t.piece.start.line+1,column:0},c=t.piece.length-1,d=this.getLineFeedCnt(t.piece.bufferIndex,l,t.piece.end);t.piece=new Da(t.piece.bufferIndex,l,t.piece.end,d,c),Vf(this,t,-1,-1),t.piece.length===0&&i.push(t);const u=this.createNewPieces(`\r
`);this.rbInsertRight(e,u[0]);for(let h=0;h<i.length;h++)sA(this,i[h])}adjustCarriageReturnFromNext(e,t){if(this.shouldCheckCRLF()&&this.endWithCR(e)){const i=t.next();if(this.startWithLF(i)){if(e+=`
`,i.piece.length===1)sA(this,i);else{const s=i.piece,r={line:s.start.line+1,column:0},o=s.length-1,a=this.getLineFeedCnt(s.bufferIndex,r,s.end);i.piece=new Da(s.bufferIndex,r,s.end,a,o),Vf(this,i,-1,-1)}return!0}}return!1}iterate(e,t){if(e===yt)return t(yt);const i=this.iterate(e.left,t);return i&&t(e)&&this.iterate(e.right,t)}getNodeContent(e){if(e===yt)return"";const t=this._buffers[e.piece.bufferIndex],i=e.piece,s=this.offsetInBuffer(i.bufferIndex,i.start),r=this.offsetInBuffer(i.bufferIndex,i.end);return t.buffer.substring(s,r)}getPieceContent(e){const t=this._buffers[e.bufferIndex],i=this.offsetInBuffer(e.bufferIndex,e.start),s=this.offsetInBuffer(e.bufferIndex,e.end);return t.buffer.substring(i,s)}rbInsertRight(e,t){const i=new v$(t,1);if(i.left=yt,i.right=yt,i.parent=yt,i.size_left=0,i.lf_left=0,this.root===yt)this.root=i,i.color=0;else if(e.right===yt)e.right=i,i.parent=e;else{const r=bQ(e.right);r.left=i,i.parent=r}return nce(this,i),i}rbInsertLeft(e,t){const i=new v$(t,1);if(i.left=yt,i.right=yt,i.parent=yt,i.size_left=0,i.lf_left=0,this.root===yt)this.root=i,i.color=0;else if(e.left===yt)e.left=i,i.parent=e;else{const s=Sye(e.left);s.right=i,i.parent=s}return nce(this,i),i}}class Ay extends ee{constructor(e,t,i,s,r,o,a){super(),this._onDidChangeContent=this._register(new X),this._BOM=t,this._mightContainNonBasicASCII=!o,this._mightContainRTL=s,this._mightContainUnusualLineTerminators=r,this._pieceTree=new vst(e,i,a)}mightContainRTL(){return this._mightContainRTL}mightContainUnusualLineTerminators(){return this._mightContainUnusualLineTerminators}resetMightContainUnusualLineTerminators(){this._mightContainUnusualLineTerminators=!1}mightContainNonBasicASCII(){return this._mightContainNonBasicASCII}getBOM(){return this._BOM}getEOL(){return this._pieceTree.getEOL()}createSnapshot(e){return this._pieceTree.createSnapshot(e?this._BOM:"")}getOffsetAt(e,t){return this._pieceTree.getOffsetAt(e,t)}getPositionAt(e){return this._pieceTree.getPositionAt(e)}getRangeAt(e,t){const i=e+t,s=this.getPositionAt(e),r=this.getPositionAt(i);return new M(s.lineNumber,s.column,r.lineNumber,r.column)}getValueInRange(e,t=0){if(e.isEmpty())return"";const i=this._getEndOfLine(t);return this._pieceTree.getValueInRange(e,i)}getValueLengthInRange(e,t=0){if(e.isEmpty())return 0;if(e.startLineNumber===e.endLineNumber)return e.endColumn-e.startColumn;const i=this.getOffsetAt(e.startLineNumber,e.startColumn),s=this.getOffsetAt(e.endLineNumber,e.endColumn);let r=0;const o=this._getEndOfLine(t),a=this.getEOL();if(o.length!==a.length){const l=o.length-a.length,c=e.endLineNumber-e.startLineNumber;r=l*c}return s-i+r}getCharacterCountInRange(e,t=0){if(this._mightContainNonBasicASCII){let i=0;const s=e.startLineNumber,r=e.endLineNumber;for(let o=s;o<=r;o++){const a=this.getLineContent(o),l=o===s?e.startColumn-1:0,c=o===r?e.endColumn-1:a.length;for(let d=l;d<c;d++)ks(a.charCodeAt(d))?(i=i+1,d=d+1):i=i+1}return i+=this._getEndOfLine(t).length*(r-s),i}return this.getValueLengthInRange(e,t)}getLength(){return this._pieceTree.getLength()}getLineCount(){return this._pieceTree.getLineCount()}getLinesContent(){return this._pieceTree.getLinesContent()}getLineContent(e){return this._pieceTree.getLineContent(e)}getLineCharCode(e,t){return this._pieceTree.getLineCharCode(e,t)}getLineLength(e){return this._pieceTree.getLineLength(e)}getLineFirstNonWhitespaceColumn(e){const t=lo(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){const t=Nu(this.getLineContent(e));return t===-1?0:t+2}_getEndOfLine(e){switch(e){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(e){this._pieceTree.setEOL(e)}applyEdits(e,t,i){let s=this._mightContainRTL,r=this._mightContainUnusualLineTerminators,o=this._mightContainNonBasicASCII,a=!0,l=[];for(let p=0;p<e.length;p++){const _=e[p];a&&_._isTracked&&(a=!1);const w=_.range;if(_.text){let E=!0;o||(E=!MN(_.text),o=E),!s&&E&&(s=DS(_.text)),!r&&E&&(r=_0e(_.text))}let b="",y=0,S=0,x=0;if(_.text){let E;[y,S,x,E]=M_(_.text);const D=this.getEOL();E===0||E===(D===`\r
`?2:1)?b=_.text:b=_.text.replace(/\r\n|\r|\n/g,D)}l[p]={sortIndex:p,identifier:_.identifier||null,range:w,rangeOffset:this.getOffsetAt(w.startLineNumber,w.startColumn),rangeLength:this.getValueLengthInRange(w),text:b,eolCount:y,firstLineLength:S,lastLineLength:x,forceMoveMarkers:!!_.forceMoveMarkers,isAutoWhitespaceEdit:_.isAutoWhitespaceEdit||!1}}l.sort(Ay._sortOpsAscending);let c=!1;for(let p=0,_=l.length-1;p<_;p++){const w=l[p].range.getEndPosition(),b=l[p+1].range.getStartPosition();if(b.isBeforeOrEqual(w)){if(b.isBefore(w))throw new Error("Overlapping ranges are not allowed!");c=!0}}a&&(l=this._reduceOperations(l));const d=i||t?Ay._getInverseEditRanges(l):[],u=[];if(t)for(let p=0;p<l.length;p++){const _=l[p],w=d[p];if(_.isAutoWhitespaceEdit&&_.range.isEmpty())for(let b=w.startLineNumber;b<=w.endLineNumber;b++){let y="";b===w.startLineNumber&&(y=this.getLineContent(_.range.startLineNumber),lo(y)!==-1)||u.push({lineNumber:b,oldContent:y})}}let h=null;if(i){let p=0;h=[];for(let _=0;_<l.length;_++){const w=l[_],b=d[_],y=this.getValueInRange(w.range),S=w.rangeOffset+p;p+=w.text.length-y.length,h[_]={sortIndex:w.sortIndex,identifier:w.identifier,range:b,text:y,textChange:new hr(w.rangeOffset,y,S,w.text)}}c||h.sort((_,w)=>_.sortIndex-w.sortIndex)}this._mightContainRTL=s,this._mightContainUnusualLineTerminators=r,this._mightContainNonBasicASCII=o;const f=this._doApplyEdits(l);let g=null;if(t&&u.length>0){u.sort((p,_)=>_.lineNumber-p.lineNumber),g=[];for(let p=0,_=u.length;p<_;p++){const w=u[p].lineNumber;if(p>0&&u[p-1].lineNumber===w)continue;const b=u[p].oldContent,y=this.getLineContent(w);y.length===0||y===b||lo(y)!==-1||g.push(w)}}return this._onDidChangeContent.fire(),new EYe(h,f,g)}_reduceOperations(e){return e.length<1e3?e:[this._toSingleEditOperation(e)]}_toSingleEditOperation(e){let t=!1;const i=e[0].range,s=e[e.length-1].range,r=new M(i.startLineNumber,i.startColumn,s.endLineNumber,s.endColumn);let o=i.startLineNumber,a=i.startColumn;const l=[];for(let f=0,g=e.length;f<g;f++){const p=e[f],_=p.range;t=t||p.forceMoveMarkers,l.push(this.getValueInRange(new M(o,a,_.startLineNumber,_.startColumn))),p.text.length>0&&l.push(p.text),o=_.endLineNumber,a=_.endColumn}const c=l.join(""),[d,u,h]=M_(c);return{sortIndex:0,identifier:e[0].identifier,range:r,rangeOffset:this.getOffsetAt(r.startLineNumber,r.startColumn),rangeLength:this.getValueLengthInRange(r,0),text:c,eolCount:d,firstLineLength:u,lastLineLength:h,forceMoveMarkers:t,isAutoWhitespaceEdit:!1}}_doApplyEdits(e){e.sort(Ay._sortOpsDescending);const t=[];for(let i=0;i<e.length;i++){const s=e[i],r=s.range.startLineNumber,o=s.range.startColumn,a=s.range.endLineNumber,l=s.range.endColumn;if(r===a&&o===l&&s.text.length===0)continue;s.text?(this._pieceTree.delete(s.rangeOffset,s.rangeLength),this._pieceTree.insert(s.rangeOffset,s.text,!0)):this._pieceTree.delete(s.rangeOffset,s.rangeLength);const c=new M(r,o,a,l);t.push({range:c,rangeLength:s.rangeLength,text:s.text,rangeOffset:s.rangeOffset,forceMoveMarkers:s.forceMoveMarkers})}return t}findMatchesLineByLine(e,t,i,s){return this._pieceTree.findMatchesLineByLine(e,t,i,s)}static _getInverseEditRanges(e){const t=[];let i=0,s=0,r=null;for(let o=0,a=e.length;o<a;o++){const l=e[o];let c,d;r?r.range.endLineNumber===l.range.startLineNumber?(c=i,d=s+(l.range.startColumn-r.range.endColumn)):(c=i+(l.range.startLineNumber-r.range.endLineNumber),d=l.range.startColumn):(c=l.range.startLineNumber,d=l.range.startColumn);let u;if(l.text.length>0){const h=l.eolCount+1;h===1?u=new M(c,d,c,d+l.firstLineLength):u=new M(c,d,c+h-1,l.lastLineLength+1)}else u=new M(c,d,c,d);i=u.endLineNumber,s=u.endColumn,t.push(u),r=l}return t}static _sortOpsAscending(e,t){const i=M.compareRangesUsingEnds(e.range,t.range);return i===0?e.sortIndex-t.sortIndex:i}static _sortOpsDescending(e,t){const i=M.compareRangesUsingEnds(e.range,t.range);return i===0?t.sortIndex-e.sortIndex:-i}}class bst{constructor(e,t,i,s,r,o,a,l,c){this._chunks=e,this._bom=t,this._cr=i,this._lf=s,this._crlf=r,this._containsRTL=o,this._containsUnusualLineTerminators=a,this._isBasicASCII=l,this._normalizeEOL=c}_getEOL(e){const t=this._cr+this._lf+this._crlf,i=this._cr+this._crlf;return t===0?e===1?`
`:`\r
`:i>t/2?`\r
`:`
`}create(e){const t=this._getEOL(e),i=this._chunks;if(this._normalizeEOL&&(t===`\r
`&&(this._cr>0||this._lf>0)||t===`
`&&(this._cr>0||this._crlf>0)))for(let r=0,o=i.length;r<o;r++){const a=i[r].buffer.replace(/\r\n|\r|\n/g,t),l=Uf(a);i[r]=new ob(a,l)}const s=new Ay(i,this._bom,t,this._containsRTL,this._containsUnusualLineTerminators,this._isBasicASCII,this._normalizeEOL);return{textBuffer:s,disposable:s}}}class Lye{constructor(){this.chunks=[],this.BOM="",this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.containsUnusualLineTerminators=!1,this.isBasicASCII=!0}acceptChunk(e){if(e.length===0)return;this.chunks.length===0&&aX(e)&&(this.BOM=pKe,e=e.substr(1));const t=e.charCodeAt(e.length-1);t===13||t>=55296&&t<=56319?(this._acceptChunk1(e.substr(0,e.length-1),!1),this._hasPreviousChar=!0,this._previousChar=t):(this._acceptChunk1(e,!1),this._hasPreviousChar=!1,this._previousChar=t)}_acceptChunk1(e,t){!t&&e.length===0||(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+e):this._acceptChunk2(e))}_acceptChunk2(e){const t=pst(this._tmpLineStarts,e);this.chunks.push(new ob(e,t.lineStarts)),this.cr+=t.cr,this.lf+=t.lf,this.crlf+=t.crlf,t.isBasicASCII||(this.isBasicASCII=!1,this.containsRTL||(this.containsRTL=DS(e)),this.containsUnusualLineTerminators||(this.containsUnusualLineTerminators=_0e(e)))}finish(e=!0){return this._finish(),new bst(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.containsUnusualLineTerminators,this.isBasicASCII,e)}_finish(){if(this.chunks.length===0&&this._acceptChunk1("",!0),this._hasPreviousChar){this._hasPreviousChar=!1;const e=this.chunks[this.chunks.length-1];e.buffer+=String.fromCharCode(this._previousChar);const t=Uf(e.buffer);e.lineStarts=t,this._previousChar===13&&this.cr++}}}class wst{constructor(e){this._default=e,this._store=[]}get(e){return e<this._store.length?this._store[e]:this._default}set(e,t){for(;e>=this._store.length;)this._store[this._store.length]=this._default;this._store[e]=t}replace(e,t,i){if(e>=this._store.length)return;if(t===0){this.insert(e,i);return}else if(i===0){this.delete(e,t);return}const s=this._store.slice(0,e),r=this._store.slice(e+t),o=Cst(i,this._default);this._store=s.concat(o,r)}delete(e,t){t===0||e>=this._store.length||this._store.splice(e,t)}insert(e,t){if(t===0||e>=this._store.length)return;const i=[];for(let s=0;s<t;s++)i[s]=this._default;this._store=T3(this._store,e,i)}}function Cst(n,e){const t=[];for(let i=0;i<n;i++)t[i]=e;return t}class yst{get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._startLineNumber+this._tokens.length-1}constructor(e,t){this._startLineNumber=e,this._tokens=t}getLineTokens(e){return this._tokens[e-this._startLineNumber]}appendLineTokens(e){this._tokens.push(e)}}class b${constructor(){this._tokens=[]}add(e,t){if(this._tokens.length>0){const i=this._tokens[this._tokens.length-1];if(i.endLineNumber+1===e){i.appendLineTokens(t);return}}this._tokens.push(new yst(e,[t]))}finalize(){return this._tokens}}class Sst{constructor(e,t){this.tokenizationSupport=t,this.initialState=this.tokenizationSupport.getInitialState(),this.store=new w$(e)}getStartState(e){return this.store.getStartState(e,this.initialState)}getFirstInvalidLine(){return this.store.getFirstInvalidLine(this.initialState)}}class xst extends Sst{constructor(e,t,i,s){super(e,t),this._textModel=i,this._languageIdCodec=s}updateTokensUntilLine(e,t){const i=this._textModel.getLanguageId();for(;;){const s=this.getFirstInvalidLine();if(!s||s.lineNumber>t)break;const r=this._textModel.getLineContent(s.lineNumber),o=VL(this._languageIdCodec,i,this.tokenizationSupport,r,!0,s.startState);e.add(s.lineNumber,o.tokens),this.store.setEndState(s.lineNumber,o.endState)}}getTokenTypeIfInsertingCharacter(e,t){const i=this.getStartState(e.lineNumber);if(!i)return 0;const s=this._textModel.getLanguageId(),r=this._textModel.getLineContent(e.lineNumber),o=r.substring(0,e.column-1)+t+r.substring(e.column-1),a=VL(this._languageIdCodec,s,this.tokenizationSupport,o,!0,i),l=new Ks(a.tokens,o,this._languageIdCodec);if(l.getCount()===0)return 0;const c=l.findTokenIndexAtOffset(e.column-1);return l.getStandardTokenType(c)}tokenizeLineWithEdit(e,t,i){const s=e.lineNumber,r=e.column,o=this.getStartState(s);if(!o)return null;const a=this._textModel.getLineContent(s),l=a.substring(0,r-1)+i+a.substring(r-1+t),c=this._textModel.getLanguageIdAtPosition(s,0),d=VL(this._languageIdCodec,c,this.tokenizationSupport,l,!0,o);return new Ks(d.tokens,l,this._languageIdCodec)}hasAccurateTokensForLine(e){const t=this.store.getFirstInvalidEndStateLineNumberOrMax();return e<t}isCheapToTokenize(e){const t=this.store.getFirstInvalidEndStateLineNumberOrMax();return e<t||e===t&&this._textModel.getLineLength(e)<2048}tokenizeHeuristically(e,t,i){if(i<=this.store.getFirstInvalidEndStateLineNumberOrMax())return{heuristicTokens:!1};if(t<=this.store.getFirstInvalidEndStateLineNumberOrMax())return this.updateTokensUntilLine(e,i),{heuristicTokens:!1};let s=this.guessStartState(t);const r=this._textModel.getLanguageId();for(let o=t;o<=i;o++){const a=this._textModel.getLineContent(o),l=VL(this._languageIdCodec,r,this.tokenizationSupport,a,!0,s);e.add(o,l.tokens),s=l.endState}return{heuristicTokens:!0}}guessStartState(e){let t=this._textModel.getLineFirstNonWhitespaceColumn(e);const i=[];let s=null;for(let a=e-1;t>1&&a>=1;a--){const l=this._textModel.getLineFirstNonWhitespaceColumn(a);if(l!==0&&l<t&&(i.push(this._textModel.getLineContent(a)),t=l,s=this.getStartState(a),s))break}s||(s=this.tokenizationSupport.getInitialState()),i.reverse();const r=this._textModel.getLanguageId();let o=s;for(const a of i)o=VL(this._languageIdCodec,r,this.tokenizationSupport,a,!1,o).endState;return o}}class w${constructor(e){this.lineCount=e,this._tokenizationStateStore=new Lst,this._invalidEndStatesLineNumbers=new kst,this._invalidEndStatesLineNumbers.addRange(new At(1,e+1))}getEndState(e){return this._tokenizationStateStore.getEndState(e)}setEndState(e,t){if(!t)throw new li("Cannot set null/undefined state");this._invalidEndStatesLineNumbers.delete(e);const i=this._tokenizationStateStore.setEndState(e,t);return i&&e<this.lineCount&&this._invalidEndStatesLineNumbers.addRange(new At(e+1,e+2)),i}acceptChange(e,t){this.lineCount+=t-e.length,this._tokenizationStateStore.acceptChange(e,t),this._invalidEndStatesLineNumbers.addRangeAndResize(new At(e.startLineNumber,e.endLineNumberExclusive),t)}acceptChanges(e){for(const t of e){const[i]=M_(t.text);this.acceptChange(new wt(t.range.startLineNumber,t.range.endLineNumber+1),i+1)}}invalidateEndStateRange(e){this._invalidEndStatesLineNumbers.addRange(new At(e.startLineNumber,e.endLineNumberExclusive))}getFirstInvalidEndStateLineNumber(){return this._invalidEndStatesLineNumbers.min}getFirstInvalidEndStateLineNumberOrMax(){return this.getFirstInvalidEndStateLineNumber()||Number.MAX_SAFE_INTEGER}allStatesValid(){return this._invalidEndStatesLineNumbers.min===null}getStartState(e,t){return e===1?t:this.getEndState(e-1)}getFirstInvalidLine(e){const t=this.getFirstInvalidEndStateLineNumber();if(t===null)return null;const i=this.getStartState(t,e);if(!i)throw new li("Start state must be defined");return{lineNumber:t,startState:i}}}class Lst{constructor(){this._lineEndStates=new wst(null)}getEndState(e){return this._lineEndStates.get(e)}setEndState(e,t){const i=this._lineEndStates.get(e);return i&&i.equals(t)?!1:(this._lineEndStates.set(e,t),!0)}acceptChange(e,t){let i=e.length;t>0&&i>0&&(i--,t--),this._lineEndStates.replace(e.startLineNumber,i,t)}}class kst{constructor(){this._ranges=[]}get min(){return this._ranges.length===0?null:this._ranges[0].start}delete(e){const t=this._ranges.findIndex(i=>i.contains(e));if(t!==-1){const i=this._ranges[t];i.start===e?i.endExclusive===e+1?this._ranges.splice(t,1):this._ranges[t]=new At(e+1,i.endExclusive):i.endExclusive===e+1?this._ranges[t]=new At(i.start,e):this._ranges.splice(t,1,new At(i.start,e),new At(e+1,i.endExclusive))}}addRange(e){At.addRange(e,this._ranges)}addRangeAndResize(e,t){let i=0;for(;!(i>=this._ranges.length||e.start<=this._ranges[i].endExclusive);)i++;let s=i;for(;!(s>=this._ranges.length||e.endExclusive<this._ranges[s].start);)s++;const r=t-e.length;for(let o=s;o<this._ranges.length;o++)this._ranges[o]=this._ranges[o].delta(r);if(i===s){const o=new At(e.start,e.start+t);o.isEmpty||this._ranges.splice(i,0,o)}else{const o=Math.min(e.start,this._ranges[i].start),a=Math.max(e.endExclusive,this._ranges[s-1].endExclusive),l=new At(o,a+r);l.isEmpty?this._ranges.splice(i,s-i):this._ranges.splice(i,s-i,l)}}toString(){return this._ranges.map(e=>e.toString()).join(" + ")}}function VL(n,e,t,i,s,r){let o=null;if(t)try{o=t.tokenizeEncoded(i,s,r.clone())}catch(a){pt(a)}return o||(o=vB(n.encodeLanguageId(e),r)),Ks.convertToEndOffset(o.tokens,i.length),o}class Est{constructor(e,t){this._tokenizerWithStateStore=e,this._backgroundTokenStore=t,this._isDisposed=!1,this._isScheduled=!1}dispose(){this._isDisposed=!0}handleChanges(){this._beginBackgroundTokenization()}_beginBackgroundTokenization(){this._isScheduled||!this._tokenizerWithStateStore._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._isScheduled=!0,x0e(e=>{this._isScheduled=!1,this._backgroundTokenizeWithDeadline(e)}))}_backgroundTokenizeWithDeadline(e){const t=Date.now()+e.timeRemaining(),i=()=>{this._isDisposed||!this._tokenizerWithStateStore._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._backgroundTokenizeForAtLeast1ms(),Date.now()<t?Uwe(i):this._beginBackgroundTokenization())};i()}_backgroundTokenizeForAtLeast1ms(){const e=this._tokenizerWithStateStore._textModel.getLineCount(),t=new b$,i=js.create(!1);do if(i.elapsed()>1||this._tokenizeOneInvalidLine(t)>=e)break;while(this._hasLinesToTokenize());this._backgroundTokenStore.setTokens(t.finalize()),this.checkFinished()}_hasLinesToTokenize(){return this._tokenizerWithStateStore?!this._tokenizerWithStateStore.store.allStatesValid():!1}_tokenizeOneInvalidLine(e){var i;const t=(i=this._tokenizerWithStateStore)==null?void 0:i.getFirstInvalidLine();return t?(this._tokenizerWithStateStore.updateTokensUntilLine(e,t.lineNumber),t.lineNumber):this._tokenizerWithStateStore._textModel.getLineCount()+1}checkFinished(){this._isDisposed||this._tokenizerWithStateStore.store.allStatesValid()&&this._backgroundTokenStore.backgroundTokenizationFinished()}requestTokens(e,t){this._tokenizerWithStateStore.store.invalidateEndStateRange(new wt(e,t))}}class Ist{constructor(){this._onDidChangeVisibleRanges=new X,this.onDidChangeVisibleRanges=this._onDidChangeVisibleRanges.event,this._views=new Set}attachView(){const e=new Dst(t=>{this._onDidChangeVisibleRanges.fire({view:e,state:t})});return this._views.add(e),e}detachView(e){this._views.delete(e),this._onDidChangeVisibleRanges.fire({view:e,state:void 0})}}class Dst{constructor(e){this.handleStateChange=e}setVisibleLines(e,t){const i=e.map(s=>new wt(s.startLineNumber,s.endLineNumber+1));this.handleStateChange({visibleLineRanges:i,stabilized:t})}}class Nst extends ee{get lineRanges(){return this._lineRanges}constructor(e){super(),this._refreshTokens=e,this.runner=this._register(new yi(()=>this.update(),50)),this._computedLineRanges=[],this._lineRanges=[]}update(){dn(this._computedLineRanges,this._lineRanges,(e,t)=>e.equals(t))||(this._computedLineRanges=this._lineRanges,this._refreshTokens())}handleStateChange(e){this._lineRanges=e.visibleLineRanges,e.stabilized?(this.runner.cancel(),this.update()):this.runner.schedule()}}class kye extends ee{get backgroundTokenizationState(){return this._backgroundTokenizationState}constructor(e,t,i){super(),this._languageIdCodec=e,this._textModel=t,this.getLanguageId=i,this._backgroundTokenizationState=1,this._onDidChangeBackgroundTokenizationState=this._register(new X),this.onDidChangeBackgroundTokenizationState=this._onDidChangeBackgroundTokenizationState.event,this._onDidChangeTokens=this._register(new X),this.onDidChangeTokens=this._onDidChangeTokens.event}tokenizeIfCheap(e){this.isCheapToTokenize(e)&&this.forceTokenization(e)}}class sce extends kye{constructor(e,t,i,s){super(t,i,s),this._treeSitterService=e,this._tokenizationSupport=null,this._initialize()}_initialize(){const e=this.getLanguageId();(!this._tokenizationSupport||this._lastLanguageId!==e)&&(this._lastLanguageId=e,this._tokenizationSupport=PV.get(e))}getLineTokens(e){const t=this._textModel.getLineContent(e);if(this._tokenizationSupport){const i=this._tokenizationSupport.tokenizeEncoded(e,this._textModel);if(i)return new Ks(i,t,this._languageIdCodec)}return Ks.createEmpty(t,this._languageIdCodec)}resetTokenization(e=!0){e&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]}),this._initialize()}handleDidChangeAttached(){}handleDidChangeContent(e){e.isFlush&&this.resetTokenization(!1)}forceTokenization(e){}hasAccurateTokensForLine(e){return!0}isCheapToTokenize(e){return!0}getTokenTypeIfInsertingCharacter(e,t,i){return 0}tokenizeLineWithEdit(e,t,i){return null}get hasTokens(){return this._treeSitterService.getParseResult(this._textModel)!==void 0}}const Eye=Wt("treeSitterParserService"),$f=new Uint32Array(0).buffer;class Sh{static deleteBeginning(e,t){return e===null||e===$f?e:Sh.delete(e,0,t)}static deleteEnding(e,t){if(e===null||e===$f)return e;const i=cg(e),s=i[i.length-2];return Sh.delete(e,t,s)}static delete(e,t,i){if(e===null||e===$f||t===i)return e;const s=cg(e),r=s.length>>>1;if(t===0&&s[s.length-2]===i)return $f;const o=Ks.findIndexInTokensArray(s,t),a=o>0?s[o-1<<1]:0,l=s[o<<1];if(i<l){const f=i-t;for(let g=o;g<r;g++)s[g<<1]-=f;return e}let c,d;a!==t?(s[o<<1]=t,c=o+1<<1,d=t):(c=o<<1,d=a);const u=i-t;for(let f=o+1;f<r;f++){const g=s[f<<1]-u;g>d&&(s[c++]=g,s[c++]=s[(f<<1)+1],d=g)}if(c===s.length)return e;const h=new Uint32Array(c);return h.set(s.subarray(0,c),0),h.buffer}static append(e,t){if(t===$f)return e;if(e===$f)return t;if(e===null)return e;if(t===null)return null;const i=cg(e),s=cg(t),r=s.length>>>1,o=new Uint32Array(i.length+s.length);o.set(i,0);let a=i.length;const l=i[i.length-2];for(let c=0;c<r;c++)o[a++]=s[c<<1]+l,o[a++]=s[(c<<1)+1];return o.buffer}static insert(e,t,i){if(e===null||e===$f)return e;const s=cg(e),r=s.length>>>1;let o=Ks.findIndexInTokensArray(s,t);o>0&&s[o-1<<1]===t&&o--;for(let a=o;a<r;a++)s[a<<1]+=i;return e}}function cg(n){return n instanceof Uint32Array?n:new Uint32Array(n)}class uD{constructor(e){this._lineTokens=[],this._len=0,this._languageIdCodec=e}flush(){this._lineTokens=[],this._len=0}get hasTokens(){return this._lineTokens.length>0}getTokens(e,t,i){let s=null;if(t<this._len&&(s=this._lineTokens[t]),s!==null&&s!==$f)return new Ks(cg(s),i,this._languageIdCodec);const r=new Uint32Array(2);return r[0]=i.length,r[1]=rce(this._languageIdCodec.encodeLanguageId(e)),new Ks(r,i,this._languageIdCodec)}static _massageTokens(e,t,i){const s=i?cg(i):null;if(t===0){let r=!1;if(s&&s.length>1&&(r=ra.getLanguageId(s[1])!==e),!r)return $f}if(!s||s.length===0){const r=new Uint32Array(2);return r[0]=t,r[1]=rce(e),r.buffer}return s[s.length-2]=t,s.byteOffset===0&&s.byteLength===s.buffer.byteLength?s.buffer:s}_ensureLine(e){for(;e>=this._len;)this._lineTokens[this._len]=null,this._len++}_deleteLines(e,t){t!==0&&(e+t>this._len&&(t=this._len-e),this._lineTokens.splice(e,t),this._len-=t)}_insertLines(e,t){if(t===0)return;const i=[];for(let s=0;s<t;s++)i[s]=null;this._lineTokens=T3(this._lineTokens,e,i),this._len+=t}setTokens(e,t,i,s,r){const o=uD._massageTokens(this._languageIdCodec.encodeLanguageId(e),i,s);this._ensureLine(t);const a=this._lineTokens[t];return this._lineTokens[t]=o,r?!uD._equals(a,o):!1}static _equals(e,t){if(!e||!t)return!e&&!t;const i=cg(e),s=cg(t);if(i.length!==s.length)return!1;for(let r=0,o=i.length;r<o;r++)if(i[r]!==s[r])return!1;return!0}acceptEdit(e,t,i){this._acceptDeleteRange(e),this._acceptInsertText(new Y(e.startLineNumber,e.startColumn),t,i)}_acceptDeleteRange(e){const t=e.startLineNumber-1;if(t>=this._len)return;if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._lineTokens[t]=Sh.delete(this._lineTokens[t],e.startColumn-1,e.endColumn-1);return}this._lineTokens[t]=Sh.deleteEnding(this._lineTokens[t],e.startColumn-1);const i=e.endLineNumber-1;let s=null;i<this._len&&(s=Sh.deleteBeginning(this._lineTokens[i],e.endColumn-1)),this._lineTokens[t]=Sh.append(this._lineTokens[t],s),this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t,i){if(t===0&&i===0)return;const s=e.lineNumber-1;if(!(s>=this._len)){if(t===0){this._lineTokens[s]=Sh.insert(this._lineTokens[s],e.column-1,i);return}this._lineTokens[s]=Sh.deleteEnding(this._lineTokens[s],e.column-1),this._lineTokens[s]=Sh.insert(this._lineTokens[s],e.column-1,i),this._insertLines(e.lineNumber,t)}}setMultilineTokens(e,t){if(e.length===0)return{changes:[]};const i=[];for(let s=0,r=e.length;s<r;s++){const o=e[s];let a=0,l=0,c=!1;for(let d=o.startLineNumber;d<=o.endLineNumber;d++)c?(this.setTokens(t.getLanguageId(),d-1,t.getLineLength(d),o.getLineTokens(d),!1),l=d):this.setTokens(t.getLanguageId(),d-1,t.getLineLength(d),o.getLineTokens(d),!0)&&(c=!0,a=d,l=d);c&&i.push({fromLineNumber:a,toLineNumber:l})}return{changes:i}}}function rce(n){return(n<<0|0|0|32768|2<<24|1024)>>>0}class yQ{constructor(e){this._pieces=[],this._isComplete=!1,this._languageIdCodec=e}flush(){this._pieces=[],this._isComplete=!1}isEmpty(){return this._pieces.length===0}set(e,t){this._pieces=e||[],this._isComplete=t}setPartial(e,t){let i=e;if(t.length>0){const r=t[0].getRange(),o=t[t.length-1].getRange();if(!r||!o)return e;i=e.plusRange(r).plusRange(o)}let s=null;for(let r=0,o=this._pieces.length;r<o;r++){const a=this._pieces[r];if(a.endLineNumber<i.startLineNumber)continue;if(a.startLineNumber>i.endLineNumber){s=s||{index:r};break}if(a.removeTokens(i),a.isEmpty()){this._pieces.splice(r,1),r--,o--;continue}if(a.endLineNumber<i.startLineNumber)continue;if(a.startLineNumber>i.endLineNumber){s=s||{index:r};continue}const[l,c]=a.split(i);if(l.isEmpty()){s=s||{index:r};continue}c.isEmpty()||(this._pieces.splice(r,1,l,c),r++,o++,s=s||{index:r})}return s=s||{index:this._pieces.length},t.length>0&&(this._pieces=T3(this._pieces,s.index,t)),i}isComplete(){return this._isComplete}addSparseTokens(e,t){if(t.getLineContent().length===0)return t;const i=this._pieces;if(i.length===0)return t;const s=yQ._findFirstPieceWithLine(i,e),r=i[s].getLineTokens(e);if(!r)return t;const o=t.getCount(),a=r.getCount();let l=0;const c=[];let d=0,u=0;const h=(f,g)=>{f!==u&&(u=f,c[d++]=f,c[d++]=g)};for(let f=0;f<a;f++){const g=r.getStartCharacter(f),p=r.getEndCharacter(f),_=r.getMetadata(f),w=((_&1?2048:0)|(_&2?4096:0)|(_&4?8192:0)|(_&8?16384:0)|(_&16?16744448:0)|(_&32?4278190080:0))>>>0,b=~w>>>0;for(;l<o&&t.getEndOffset(l)<=g;)h(t.getEndOffset(l),t.getMetadata(l)),l++;for(l<o&&t.getStartOffset(l)<g&&h(g,t.getMetadata(l));l<o&&t.getEndOffset(l)<p;)h(t.getEndOffset(l),t.getMetadata(l)&b|_&w),l++;if(l<o)h(p,t.getMetadata(l)&b|_&w),t.getEndOffset(l)===p&&l++;else{const y=Math.min(Math.max(0,l-1),o-1);h(p,t.getMetadata(y)&b|_&w)}}for(;l<o;)h(t.getEndOffset(l),t.getMetadata(l)),l++;return new Ks(new Uint32Array(c),t.getLineContent(),this._languageIdCodec)}static _findFirstPieceWithLine(e,t){let i=0,s=e.length-1;for(;i<s;){let r=i+Math.floor((s-i)/2);if(e[r].endLineNumber<t)i=r+1;else if(e[r].startLineNumber>t)s=r-1;else{for(;r>i&&e[r-1].startLineNumber<=t&&t<=e[r-1].endLineNumber;)r--;return r}}return i}acceptEdit(e,t,i,s,r){for(const o of this._pieces)o.acceptEdit(e,t,i,s,r)}}var Tst=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},D8=function(n,e){return function(t,i){e(t,i,n)}},R2;let C$=R2=class extends _ye{constructor(e,t,i,s,r,o,a){super(),this._textModel=e,this._bracketPairsTextModelPart=t,this._languageId=i,this._attachedViews=s,this._languageService=r,this._languageConfigurationService=o,this._treeSitterService=a,this._semanticTokens=new yQ(this._languageService.languageIdCodec),this._onDidChangeLanguage=this._register(new X),this.onDidChangeLanguage=this._onDidChangeLanguage.event,this._onDidChangeLanguageConfiguration=this._register(new X),this.onDidChangeLanguageConfiguration=this._onDidChangeLanguageConfiguration.event,this._onDidChangeTokens=this._register(new X),this.onDidChangeTokens=this._onDidChangeTokens.event,this._tokensDisposables=this._register(new ue),this._register(this._languageConfigurationService.onDidChange(l=>{l.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})})),this._register(Ee.filter(PV.onDidChange,l=>l.changedLanguages.includes(this._languageId))(()=>{this.createPreferredTokenProvider()})),this.createPreferredTokenProvider()}createGrammarTokens(){return this._register(new oce(this._languageService.languageIdCodec,this._textModel,()=>this._languageId,this._attachedViews))}createTreeSitterTokens(){return this._register(new sce(this._treeSitterService,this._languageService.languageIdCodec,this._textModel,()=>this._languageId))}createTokens(e){var i;const t=this._tokens!==void 0;(i=this._tokens)==null||i.dispose(),this._tokens=e?this.createTreeSitterTokens():this.createGrammarTokens(),this._tokensDisposables.clear(),this._tokensDisposables.add(this._tokens.onDidChangeTokens(s=>{this._emitModelTokensChangedEvent(s)})),this._tokensDisposables.add(this._tokens.onDidChangeBackgroundTokenizationState(s=>{this._bracketPairsTextModelPart.handleDidChangeBackgroundTokenizationState()})),t&&this._tokens.resetTokenization()}createPreferredTokenProvider(){PV.get(this._languageId)?this._tokens instanceof sce||this.createTokens(!0):this._tokens instanceof oce||this.createTokens(!1)}handleLanguageConfigurationServiceChange(e){e.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})}handleDidChangeContent(e){if(e.isFlush)this._semanticTokens.flush();else if(!e.isEolChange)for(const t of e.changes){const[i,s,r]=M_(t.text);this._semanticTokens.acceptEdit(t.range,i,s,r,t.text.length>0?t.text.charCodeAt(0):0)}this._tokens.handleDidChangeContent(e)}handleDidChangeAttached(){this._tokens.handleDidChangeAttached()}getLineTokens(e){this.validateLineNumber(e);const t=this._tokens.getLineTokens(e);return this._semanticTokens.addSparseTokens(e,t)}_emitModelTokensChangedEvent(e){this._textModel._isDisposing()||(this._bracketPairsTextModelPart.handleDidChangeTokens(e),this._onDidChangeTokens.fire(e))}validateLineNumber(e){if(e<1||e>this._textModel.getLineCount())throw new li("Illegal value for lineNumber")}get hasTokens(){return this._tokens.hasTokens}resetTokenization(){this._tokens.resetTokenization()}get backgroundTokenizationState(){return this._tokens.backgroundTokenizationState}forceTokenization(e){this.validateLineNumber(e),this._tokens.forceTokenization(e)}hasAccurateTokensForLine(e){return this.validateLineNumber(e),this._tokens.hasAccurateTokensForLine(e)}isCheapToTokenize(e){return this.validateLineNumber(e),this._tokens.isCheapToTokenize(e)}tokenizeIfCheap(e){this.validateLineNumber(e),this._tokens.tokenizeIfCheap(e)}getTokenTypeIfInsertingCharacter(e,t,i){return this._tokens.getTokenTypeIfInsertingCharacter(e,t,i)}tokenizeLineWithEdit(e,t,i){return this._tokens.tokenizeLineWithEdit(e,t,i)}setSemanticTokens(e,t){this._semanticTokens.set(e,t),this._emitModelTokensChangedEvent({semanticTokensApplied:e!==null,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]})}hasCompleteSemanticTokens(){return this._semanticTokens.isComplete()}hasSomeSemanticTokens(){return!this._semanticTokens.isEmpty()}setPartialSemanticTokens(e,t){if(this.hasCompleteSemanticTokens())return;const i=this._textModel.validateRange(this._semanticTokens.setPartial(e,t));this._emitModelTokensChangedEvent({semanticTokensApplied:!0,ranges:[{fromLineNumber:i.startLineNumber,toLineNumber:i.endLineNumber}]})}getWordAtPosition(e){this.assertNotDisposed();const t=this._textModel.validatePosition(e),i=this._textModel.getLineContent(t.lineNumber),s=this.getLineTokens(t.lineNumber),r=s.findTokenIndexAtOffset(t.column-1),[o,a]=R2._findLanguageBoundaries(s,r),l=DI(t.column,this.getLanguageConfiguration(s.getLanguageId(r)).getWordDefinition(),i.substring(o,a),o);if(l&&l.startColumn<=e.column&&e.column<=l.endColumn)return l;if(r>0&&o===t.column-1){const[c,d]=R2._findLanguageBoundaries(s,r-1),u=DI(t.column,this.getLanguageConfiguration(s.getLanguageId(r-1)).getWordDefinition(),i.substring(c,d),c);if(u&&u.startColumn<=e.column&&e.column<=u.endColumn)return u}return null}getLanguageConfiguration(e){return this._languageConfigurationService.getLanguageConfiguration(e)}static _findLanguageBoundaries(e,t){const i=e.getLanguageId(t);let s=0;for(let o=t;o>=0&&e.getLanguageId(o)===i;o--)s=e.getStartOffset(o);let r=e.getLineContent().length;for(let o=t,a=e.getCount();o<a&&e.getLanguageId(o)===i;o++)r=e.getEndOffset(o);return[s,r]}getWordUntilPosition(e){const t=this.getWordAtPosition(e);return t?{word:t.word.substr(0,e.column-t.startColumn),startColumn:t.startColumn,endColumn:e.column}:{word:"",startColumn:e.column,endColumn:e.column}}getLanguageId(){return this._languageId}getLanguageIdAtPosition(e,t){const i=this._textModel.validatePosition(new Y(e,t)),s=this.getLineTokens(i.lineNumber);return s.getLanguageId(s.findTokenIndexAtOffset(i.column-1))}setLanguageId(e,t="api"){if(this._languageId===e)return;const i={oldLanguage:this._languageId,newLanguage:e,source:t};this._languageId=e,this._bracketPairsTextModelPart.handleDidChangeLanguage(i),this._tokens.resetTokenization(),this.createPreferredTokenProvider(),this._onDidChangeLanguage.fire(i),this._onDidChangeLanguageConfiguration.fire({})}};C$=R2=Tst([D8(4,un),D8(5,vn),D8(6,Eye)],C$);class oce extends kye{constructor(e,t,i,s){super(e,t,i),this._tokenizer=null,this._defaultBackgroundTokenizer=null,this._backgroundTokenizer=this._register(new As),this._tokens=new uD(this._languageIdCodec),this._debugBackgroundTokenizer=this._register(new As),this._attachedViewStates=this._register(new ZZ),this._register(In.onDidChange(r=>{const o=this.getLanguageId();r.changedLanguages.indexOf(o)!==-1&&this.resetTokenization()})),this.resetTokenization(),this._register(s.onDidChangeVisibleRanges(({view:r,state:o})=>{if(o){let a=this._attachedViewStates.get(r);a||(a=new Nst(()=>this.refreshRanges(a.lineRanges)),this._attachedViewStates.set(r,a)),a.handleStateChange(o)}else this._attachedViewStates.deleteAndDispose(r)}))}resetTokenization(e=!0){var r;this._tokens.flush(),(r=this._debugBackgroundTokens)==null||r.flush(),this._debugBackgroundStates&&(this._debugBackgroundStates=new w$(this._textModel.getLineCount())),e&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]});const t=()=>{if(this._textModel.isTooLargeForTokenization())return[null,null];const o=In.get(this.getLanguageId());if(!o)return[null,null];let a;try{a=o.getInitialState()}catch(l){return pt(l),[null,null]}return[o,a]},[i,s]=t();if(i&&s?this._tokenizer=new xst(this._textModel.getLineCount(),i,this._textModel,this._languageIdCodec):this._tokenizer=null,this._backgroundTokenizer.clear(),this._defaultBackgroundTokenizer=null,this._tokenizer){const o={setTokens:a=>{this.setTokens(a)},backgroundTokenizationFinished:()=>{if(this._backgroundTokenizationState===2)return;const a=2;this._backgroundTokenizationState=a,this._onDidChangeBackgroundTokenizationState.fire()},setEndState:(a,l)=>{var d;if(!this._tokenizer)return;const c=this._tokenizer.store.getFirstInvalidEndStateLineNumber();c!==null&&a>=c&&((d=this._tokenizer)==null||d.store.setEndState(a,l))}};i&&i.createBackgroundTokenizer&&!i.backgroundTokenizerShouldOnlyVerifyTokens&&(this._backgroundTokenizer.value=i.createBackgroundTokenizer(this._textModel,o)),!this._backgroundTokenizer.value&&!this._textModel.isTooLargeForTokenization()&&(this._backgroundTokenizer.value=this._defaultBackgroundTokenizer=new Est(this._tokenizer,o),this._defaultBackgroundTokenizer.handleChanges()),i!=null&&i.backgroundTokenizerShouldOnlyVerifyTokens&&i.createBackgroundTokenizer?(this._debugBackgroundTokens=new uD(this._languageIdCodec),this._debugBackgroundStates=new w$(this._textModel.getLineCount()),this._debugBackgroundTokenizer.clear(),this._debugBackgroundTokenizer.value=i.createBackgroundTokenizer(this._textModel,{setTokens:a=>{var l;(l=this._debugBackgroundTokens)==null||l.setMultilineTokens(a,this._textModel)},backgroundTokenizationFinished(){},setEndState:(a,l)=>{var c;(c=this._debugBackgroundStates)==null||c.setEndState(a,l)}})):(this._debugBackgroundTokens=void 0,this._debugBackgroundStates=void 0,this._debugBackgroundTokenizer.value=void 0)}this.refreshAllVisibleLineTokens()}handleDidChangeAttached(){var e;(e=this._defaultBackgroundTokenizer)==null||e.handleChanges()}handleDidChangeContent(e){var t,i,s;if(e.isFlush)this.resetTokenization(!1);else if(!e.isEolChange){for(const r of e.changes){const[o,a]=M_(r.text);this._tokens.acceptEdit(r.range,o,a),(t=this._debugBackgroundTokens)==null||t.acceptEdit(r.range,o,a)}(i=this._debugBackgroundStates)==null||i.acceptChanges(e.changes),this._tokenizer&&this._tokenizer.store.acceptChanges(e.changes),(s=this._defaultBackgroundTokenizer)==null||s.handleChanges()}}setTokens(e){const{changes:t}=this._tokens.setMultilineTokens(e,this._textModel);return t.length>0&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:t}),{changes:t}}refreshAllVisibleLineTokens(){const e=wt.joinMany([...this._attachedViewStates].map(([t,i])=>i.lineRanges));this.refreshRanges(e)}refreshRanges(e){for(const t of e)this.refreshRange(t.startLineNumber,t.endLineNumberExclusive-1)}refreshRange(e,t){var o,a;if(!this._tokenizer)return;e=Math.max(1,Math.min(this._textModel.getLineCount(),e)),t=Math.min(this._textModel.getLineCount(),t);const i=new b$,{heuristicTokens:s}=this._tokenizer.tokenizeHeuristically(i,e,t),r=this.setTokens(i.finalize());if(s)for(const l of r.changes)(o=this._backgroundTokenizer.value)==null||o.requestTokens(l.fromLineNumber,l.toLineNumber+1);(a=this._defaultBackgroundTokenizer)==null||a.checkFinished()}forceTokenization(e){var i,s;const t=new b$;(i=this._tokenizer)==null||i.updateTokensUntilLine(t,e),this.setTokens(t.finalize()),(s=this._defaultBackgroundTokenizer)==null||s.checkFinished()}hasAccurateTokensForLine(e){return this._tokenizer?this._tokenizer.hasAccurateTokensForLine(e):!0}isCheapToTokenize(e){return this._tokenizer?this._tokenizer.isCheapToTokenize(e):!0}getLineTokens(e){var s;const t=this._textModel.getLineContent(e),i=this._tokens.getTokens(this._textModel.getLanguageId(),e-1,t);if(this._debugBackgroundTokens&&this._debugBackgroundStates&&this._tokenizer&&this._debugBackgroundStates.getFirstInvalidEndStateLineNumberOrMax()>e&&this._tokenizer.store.getFirstInvalidEndStateLineNumberOrMax()>e){const r=this._debugBackgroundTokens.getTokens(this._textModel.getLanguageId(),e-1,t);!i.equals(r)&&((s=this._debugBackgroundTokenizer.value)!=null&&s.reportMismatchingTokens)&&this._debugBackgroundTokenizer.value.reportMismatchingTokens(e)}return i}getTokenTypeIfInsertingCharacter(e,t,i){if(!this._tokenizer)return 0;const s=this._textModel.validatePosition(new Y(e,t));return this.forceTokenization(s.lineNumber),this._tokenizer.getTokenTypeIfInsertingCharacter(s,i)}tokenizeLineWithEdit(e,t,i){if(!this._tokenizer)return null;const s=this._textModel.validatePosition(e);return this.forceTokenization(s.lineNumber),this._tokenizer.tokenizeLineWithEdit(s,t,i)}get hasTokens(){return this._tokens.hasTokens}}class Rst{constructor(){this.changeType=1}}class Vu{static applyInjectedText(e,t){if(!t||t.length===0)return e;let i="",s=0;for(const r of t)i+=e.substring(s,r.column-1),s=r.column-1,i+=r.options.content;return i+=e.substring(s),i}static fromDecorations(e){const t=[];for(const i of e)i.options.before&&i.options.before.content.length>0&&t.push(new Vu(i.ownerId,i.range.startLineNumber,i.range.startColumn,i.options.before,0)),i.options.after&&i.options.after.content.length>0&&t.push(new Vu(i.ownerId,i.range.endLineNumber,i.range.endColumn,i.options.after,1));return t.sort((i,s)=>i.lineNumber===s.lineNumber?i.column===s.column?i.order-s.order:i.column-s.column:i.lineNumber-s.lineNumber),t}constructor(e,t,i,s,r){this.ownerId=e,this.lineNumber=t,this.column=i,this.options=s,this.order=r}}class ace{constructor(e,t,i){this.changeType=2,this.lineNumber=e,this.detail=t,this.injectedText=i}}class Ast{constructor(e,t){this.changeType=3,this.fromLineNumber=e,this.toLineNumber=t}}class Mst{constructor(e,t,i,s){this.changeType=4,this.injectedTexts=s,this.fromLineNumber=e,this.toLineNumber=t,this.detail=i}}class Pst{constructor(){this.changeType=5}}class My{constructor(e,t,i,s){this.changes=e,this.versionId=t,this.isUndoing=i,this.isRedoing=s,this.resultingSelection=null}containsEvent(e){for(let t=0,i=this.changes.length;t<i;t++)if(this.changes[t].changeType===e)return!0;return!1}static merge(e,t){const i=[].concat(e.changes).concat(t.changes),s=t.versionId,r=e.isUndoing||t.isUndoing,o=e.isRedoing||t.isRedoing;return new My(i,s,r,o)}}class Iye{constructor(e){this.changes=e}}class qb{constructor(e,t){this.rawContentChangedEvent=e,this.contentChangedEvent=t}merge(e){const t=My.merge(this.rawContentChangedEvent,e.rawContentChangedEvent),i=qb._mergeChangeEvents(this.contentChangedEvent,e.contentChangedEvent);return new qb(t,i)}static _mergeChangeEvents(e,t){const i=[].concat(e.changes).concat(t.changes),s=t.eol,r=t.versionId,o=e.isUndoing||t.isUndoing,a=e.isRedoing||t.isRedoing,l=e.isFlush||t.isFlush,c=e.isEolChange&&t.isEolChange;return{changes:i,eol:s,isEolChange:c,versionId:r,isUndoing:o,isRedoing:a,isFlush:l}}}var Ost=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},rA=function(n,e){return function(t,i){e(t,i,n)}},jv;function Fst(n){const e=new Lye;return e.acceptChunk(n),e.finish()}function Bst(n){const e=new Lye;let t;for(;typeof(t=n.read())=="string";)e.acceptChunk(t);return e.finish()}function lce(n,e){let t;return typeof n=="string"?t=Fst(n):LYe(n)?t=Bst(n):t=n,t.create(e)}let oA=0;const Wst=999,Hst=1e4;class Vst{constructor(e){this._source=e,this._eos=!1}read(){if(this._eos)return null;const e=[];let t=0,i=0;do{const s=this._source.read();if(s===null)return this._eos=!0,t===0?null:e.join("");if(s.length>0&&(e[t++]=s,i+=s.length),i>=64*1024)return e.join("")}while(!0)}}const zL=()=>{throw new Error("Invalid change accessor")};var pu;let yu=(pu=class extends ee{static resolveOptions(e,t){if(t.detectIndentation){const i=Zle(e,t.tabSize,t.insertSpaces);return new y2({tabSize:i.tabSize,indentSize:"tabSize",insertSpaces:i.insertSpaces,trimAutoWhitespace:t.trimAutoWhitespace,defaultEOL:t.defaultEOL,bracketPairColorizationOptions:t.bracketPairColorizationOptions})}return new y2(t)}get onDidChangeLanguage(){return this._tokenizationTextModelPart.onDidChangeLanguage}get onDidChangeLanguageConfiguration(){return this._tokenizationTextModelPart.onDidChangeLanguageConfiguration}get onDidChangeTokens(){return this._tokenizationTextModelPart.onDidChangeTokens}onDidChangeContent(e){return this._eventEmitter.slowEvent(t=>e(t.contentChangedEvent))}onDidChangeContentOrInjectedText(e){return Ld(this._eventEmitter.fastEvent(t=>e(t)),this._onDidChangeInjectedText.event(t=>e(t)))}_isDisposing(){return this.__isDisposing}get tokenization(){return this._tokenizationTextModelPart}get bracketPairs(){return this._bracketPairs}get guides(){return this._guidesTextModelPart}constructor(e,t,i,s=null,r,o,a,l){super(),this._undoRedoService=r,this._languageService=o,this._languageConfigurationService=a,this.instantiationService=l,this._onWillDispose=this._register(new X),this.onWillDispose=this._onWillDispose.event,this._onDidChangeDecorations=this._register(new qst(g=>this.handleBeforeFireDecorationsChangedEvent(g))),this.onDidChangeDecorations=this._onDidChangeDecorations.event,this._onDidChangeOptions=this._register(new X),this.onDidChangeOptions=this._onDidChangeOptions.event,this._onDidChangeAttached=this._register(new X),this.onDidChangeAttached=this._onDidChangeAttached.event,this._onDidChangeInjectedText=this._register(new X),this._eventEmitter=this._register(new Gst),this._languageSelectionListener=this._register(new As),this._deltaDecorationCallCnt=0,this._attachedViews=new Ist,oA++,this.id="$model"+oA,this.isForSimpleWidget=i.isForSimpleWidget,typeof s>"u"||s===null?this._associatedResource=Xe.parse("inmemory://model/"+oA):this._associatedResource=s,this._attachedEditorCount=0;const{textBuffer:c,disposable:d}=lce(e,i.defaultEOL);this._buffer=c,this._bufferDisposable=d,this._options=jv.resolveOptions(this._buffer,i);const u=typeof t=="string"?t:t.languageId;typeof t!="string"&&(this._languageSelectionListener.value=t.onDidChange(()=>this._setLanguage(t.languageId))),this._bracketPairs=this._register(new qnt(this,this._languageConfigurationService)),this._guidesTextModelPart=this._register(new Qnt(this,this._languageConfigurationService)),this._decorationProvider=this._register(new Ynt(this)),this._tokenizationTextModelPart=this.instantiationService.createInstance(C$,this,this._bracketPairs,u,this._attachedViews);const h=this._buffer.getLineCount(),f=this._buffer.getValueLengthInRange(new M(1,1,h,this._buffer.getLineLength(h)+1),0);i.largeFileOptimizations?(this._isTooLargeForTokenization=f>jv.LARGE_FILE_SIZE_THRESHOLD||h>jv.LARGE_FILE_LINE_COUNT_THRESHOLD,this._isTooLargeForHeapOperation=f>jv.LARGE_FILE_HEAP_OPERATION_THRESHOLD):(this._isTooLargeForTokenization=!1,this._isTooLargeForHeapOperation=!1),this._isTooLargeForSyncing=f>jv._MODEL_SYNC_LIMIT,this._versionId=1,this._alternativeVersionId=1,this._initialUndoRedoSnapshot=null,this._isDisposed=!1,this.__isDisposing=!1,this._instanceId=v0e(oA),this._lastDecorationId=0,this._decorations=Object.create(null),this._decorationsTree=new cce,this._commandManager=new vQ(this,this._undoRedoService),this._isUndoing=!1,this._isRedoing=!1,this._trimAutoWhitespaceLines=null,this._register(this._decorationProvider.onDidChange(()=>{this._onDidChangeDecorations.beginDeferredEmit(),this._onDidChangeDecorations.fire(),this._onDidChangeDecorations.endDeferredEmit()})),this._languageService.requestRichLanguageFeatures(u),this._register(this._languageConfigurationService.onDidChange(g=>{this._bracketPairs.handleLanguageConfigurationServiceChange(g),this._tokenizationTextModelPart.handleLanguageConfigurationServiceChange(g)}))}dispose(){this.__isDisposing=!0,this._onWillDispose.fire(),this._tokenizationTextModelPart.dispose(),this._isDisposed=!0,super.dispose(),this._bufferDisposable.dispose(),this.__isDisposing=!1;const e=new Ay([],"",`
`,!1,!1,!0,!0);e.dispose(),this._buffer=e,this._bufferDisposable=ee.None}_assertNotDisposed(){if(this._isDisposed)throw new li("Model is disposed!")}_emitContentChangedEvent(e,t){this.__isDisposing||(this._tokenizationTextModelPart.handleDidChangeContent(t),this._bracketPairs.handleDidChangeContent(t),this._eventEmitter.fire(new qb(e,t)))}setValue(e){if(this._assertNotDisposed(),e==null)throw Ec();const{textBuffer:t,disposable:i}=lce(e,this._options.defaultEOL);this._setValueFromTextBuffer(t,i)}_createContentChanged2(e,t,i,s,r,o,a,l){return{changes:[{range:e,rangeOffset:t,rangeLength:i,text:s}],eol:this._buffer.getEOL(),isEolChange:l,versionId:this.getVersionId(),isUndoing:r,isRedoing:o,isFlush:a}}_setValueFromTextBuffer(e,t){this._assertNotDisposed();const i=this.getFullModelRange(),s=this.getValueLengthInRange(i),r=this.getLineCount(),o=this.getLineMaxColumn(r);this._buffer=e,this._bufferDisposable.dispose(),this._bufferDisposable=t,this._increaseVersionId(),this._decorations=Object.create(null),this._decorationsTree=new cce,this._commandManager.clear(),this._trimAutoWhitespaceLines=null,this._emitContentChangedEvent(new My([new Rst],this._versionId,!1,!1),this._createContentChanged2(new M(1,1,r,o),0,s,this.getValue(),!1,!1,!0,!1))}setEOL(e){this._assertNotDisposed();const t=e===1?`\r
`:`
`;if(this._buffer.getEOL()===t)return;const i=this.getFullModelRange(),s=this.getValueLengthInRange(i),r=this.getLineCount(),o=this.getLineMaxColumn(r);this._onBeforeEOLChange(),this._buffer.setEOL(t),this._increaseVersionId(),this._onAfterEOLChange(),this._emitContentChangedEvent(new My([new Pst],this._versionId,!1,!1),this._createContentChanged2(new M(1,1,r,o),0,s,this.getValue(),!1,!1,!1,!0))}_onBeforeEOLChange(){this._decorationsTree.ensureAllNodesHaveRanges(this)}_onAfterEOLChange(){const e=this.getVersionId(),t=this._decorationsTree.collectNodesPostOrder();for(let i=0,s=t.length;i<s;i++){const r=t[i],o=r.range,a=r.cachedAbsoluteStart-r.start,l=this._buffer.getOffsetAt(o.startLineNumber,o.startColumn),c=this._buffer.getOffsetAt(o.endLineNumber,o.endColumn);r.cachedAbsoluteStart=l,r.cachedAbsoluteEnd=c,r.cachedVersionId=e,r.start=l-a,r.end=c-a,F_(r)}}onBeforeAttached(){return this._attachedEditorCount++,this._attachedEditorCount===1&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.attachView()}onBeforeDetached(e){this._attachedEditorCount--,this._attachedEditorCount===0&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.detachView(e)}isAttachedToEditor(){return this._attachedEditorCount>0}getAttachedEditorCount(){return this._attachedEditorCount}isTooLargeForSyncing(){return this._isTooLargeForSyncing}isTooLargeForTokenization(){return this._isTooLargeForTokenization}isTooLargeForHeapOperation(){return this._isTooLargeForHeapOperation}isDisposed(){return this._isDisposed}isDominatedByLongLines(){if(this._assertNotDisposed(),this.isTooLargeForTokenization())return!1;let e=0,t=0;const i=this._buffer.getLineCount();for(let s=1;s<=i;s++){const r=this._buffer.getLineLength(s);r>=Hst?t+=r:e+=r}return t>e}get uri(){return this._associatedResource}getOptions(){return this._assertNotDisposed(),this._options}getFormattingOptions(){return{tabSize:this._options.indentSize,insertSpaces:this._options.insertSpaces}}updateOptions(e){this._assertNotDisposed();const t=typeof e.tabSize<"u"?e.tabSize:this._options.tabSize,i=typeof e.indentSize<"u"?e.indentSize:this._options.originalIndentSize,s=typeof e.insertSpaces<"u"?e.insertSpaces:this._options.insertSpaces,r=typeof e.trimAutoWhitespace<"u"?e.trimAutoWhitespace:this._options.trimAutoWhitespace,o=typeof e.bracketColorizationOptions<"u"?e.bracketColorizationOptions:this._options.bracketPairColorizationOptions,a=new y2({tabSize:t,indentSize:i,insertSpaces:s,defaultEOL:this._options.defaultEOL,trimAutoWhitespace:r,bracketPairColorizationOptions:o});if(this._options.equals(a))return;const l=this._options.createChangeEvent(a);this._options=a,this._bracketPairs.handleDidChangeOptions(l),this._decorationProvider.handleDidChangeOptions(l),this._onDidChangeOptions.fire(l)}detectIndentation(e,t){this._assertNotDisposed();const i=Zle(this._buffer,t,e);this.updateOptions({insertSpaces:i.insertSpaces,tabSize:i.tabSize,indentSize:i.tabSize})}normalizeIndentation(e){return this._assertNotDisposed(),fQ(e,this._options.indentSize,this._options.insertSpaces)}getVersionId(){return this._assertNotDisposed(),this._versionId}mightContainRTL(){return this._buffer.mightContainRTL()}mightContainUnusualLineTerminators(){return this._buffer.mightContainUnusualLineTerminators()}removeUnusualLineTerminators(e=null){const t=this.findMatches(m0e.source,!1,!0,!1,null,!1,1073741824);this._buffer.resetMightContainUnusualLineTerminators(),this.pushEditOperations(e,t.map(i=>({range:i.range,text:null})),()=>null)}mightContainNonBasicASCII(){return this._buffer.mightContainNonBasicASCII()}getAlternativeVersionId(){return this._assertNotDisposed(),this._alternativeVersionId}getInitialUndoRedoSnapshot(){return this._assertNotDisposed(),this._initialUndoRedoSnapshot}getOffsetAt(e){this._assertNotDisposed();const t=this._validatePosition(e.lineNumber,e.column,0);return this._buffer.getOffsetAt(t.lineNumber,t.column)}getPositionAt(e){this._assertNotDisposed();const t=Math.min(this._buffer.getLength(),Math.max(0,e));return this._buffer.getPositionAt(t)}_increaseVersionId(){this._versionId=this._versionId+1,this._alternativeVersionId=this._versionId}_overwriteVersionId(e){this._versionId=e}_overwriteAlternativeVersionId(e){this._alternativeVersionId=e}_overwriteInitialUndoRedoSnapshot(e){this._initialUndoRedoSnapshot=e}getValue(e,t=!1){if(this._assertNotDisposed(),this.isTooLargeForHeapOperation())throw new li("Operation would exceed heap memory limits");const i=this.getFullModelRange(),s=this.getValueInRange(i,e);return t?this._buffer.getBOM()+s:s}createSnapshot(e=!1){return new Vst(this._buffer.createSnapshot(e))}getValueLength(e,t=!1){this._assertNotDisposed();const i=this.getFullModelRange(),s=this.getValueLengthInRange(i,e);return t?this._buffer.getBOM().length+s:s}getValueInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueInRange(this.validateRange(e),t)}getValueLengthInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueLengthInRange(this.validateRange(e),t)}getCharacterCountInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getCharacterCountInRange(this.validateRange(e),t)}getLineCount(){return this._assertNotDisposed(),this._buffer.getLineCount()}getLineContent(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new li("Illegal value for lineNumber");return this._buffer.getLineContent(e)}getLineLength(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new li("Illegal value for lineNumber");return this._buffer.getLineLength(e)}getLinesContent(){if(this._assertNotDisposed(),this.isTooLargeForHeapOperation())throw new li("Operation would exceed heap memory limits");return this._buffer.getLinesContent()}getEOL(){return this._assertNotDisposed(),this._buffer.getEOL()}getEndOfLineSequence(){return this._assertNotDisposed(),this._buffer.getEOL()===`
`?0:1}getLineMinColumn(e){return this._assertNotDisposed(),1}getLineMaxColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new li("Illegal value for lineNumber");return this._buffer.getLineLength(e)+1}getLineFirstNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new li("Illegal value for lineNumber");return this._buffer.getLineFirstNonWhitespaceColumn(e)}getLineLastNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new li("Illegal value for lineNumber");return this._buffer.getLineLastNonWhitespaceColumn(e)}_validateRangeRelaxedNoAllocations(e){const t=this._buffer.getLineCount(),i=e.startLineNumber,s=e.startColumn;let r=Math.floor(typeof i=="number"&&!isNaN(i)?i:1),o=Math.floor(typeof s=="number"&&!isNaN(s)?s:1);if(r<1)r=1,o=1;else if(r>t)r=t,o=this.getLineMaxColumn(r);else if(o<=1)o=1;else{const u=this.getLineMaxColumn(r);o>=u&&(o=u)}const a=e.endLineNumber,l=e.endColumn;let c=Math.floor(typeof a=="number"&&!isNaN(a)?a:1),d=Math.floor(typeof l=="number"&&!isNaN(l)?l:1);if(c<1)c=1,d=1;else if(c>t)c=t,d=this.getLineMaxColumn(c);else if(d<=1)d=1;else{const u=this.getLineMaxColumn(c);d>=u&&(d=u)}return i===r&&s===o&&a===c&&l===d&&e instanceof M&&!(e instanceof $e)?e:new M(r,o,c,d)}_isValidPosition(e,t,i){if(typeof e!="number"||typeof t!="number"||isNaN(e)||isNaN(t)||e<1||t<1||(e|0)!==e||(t|0)!==t)return!1;const s=this._buffer.getLineCount();if(e>s)return!1;if(t===1)return!0;const r=this.getLineMaxColumn(e);if(t>r)return!1;if(i===1){const o=this._buffer.getLineCharCode(e,t-2);if(ks(o))return!1}return!0}_validatePosition(e,t,i){const s=Math.floor(typeof e=="number"&&!isNaN(e)?e:1),r=Math.floor(typeof t=="number"&&!isNaN(t)?t:1),o=this._buffer.getLineCount();if(s<1)return new Y(1,1);if(s>o)return new Y(o,this.getLineMaxColumn(o));if(r<=1)return new Y(s,1);const a=this.getLineMaxColumn(s);if(r>=a)return new Y(s,a);if(i===1){const l=this._buffer.getLineCharCode(s,r-2);if(ks(l))return new Y(s,r-1)}return new Y(s,r)}validatePosition(e){return this._assertNotDisposed(),e instanceof Y&&this._isValidPosition(e.lineNumber,e.column,1)?e:this._validatePosition(e.lineNumber,e.column,1)}_isValidRange(e,t){const i=e.startLineNumber,s=e.startColumn,r=e.endLineNumber,o=e.endColumn;if(!this._isValidPosition(i,s,0)||!this._isValidPosition(r,o,0))return!1;if(t===1){const a=s>1?this._buffer.getLineCharCode(i,s-2):0,l=o>1&&o<=this._buffer.getLineLength(r)?this._buffer.getLineCharCode(r,o-2):0,c=ks(a),d=ks(l);return!c&&!d}return!0}validateRange(e){if(this._assertNotDisposed(),e instanceof M&&!(e instanceof $e)&&this._isValidRange(e,1))return e;const i=this._validatePosition(e.startLineNumber,e.startColumn,0),s=this._validatePosition(e.endLineNumber,e.endColumn,0),r=i.lineNumber,o=i.column,a=s.lineNumber,l=s.column;{const c=o>1?this._buffer.getLineCharCode(r,o-2):0,d=l>1&&l<=this._buffer.getLineLength(a)?this._buffer.getLineCharCode(a,l-2):0,u=ks(c),h=ks(d);return!u&&!h?new M(r,o,a,l):r===a&&o===l?new M(r,o-1,a,l-1):u&&h?new M(r,o-1,a,l+1):u?new M(r,o-1,a,l):new M(r,o,a,l+1)}}modifyPosition(e,t){this._assertNotDisposed();const i=this.getOffsetAt(e)+t;return this.getPositionAt(Math.min(this._buffer.getLength(),Math.max(0,i)))}getFullModelRange(){this._assertNotDisposed();const e=this.getLineCount();return new M(1,1,e,this.getLineMaxColumn(e))}findMatchesLineByLine(e,t,i,s){return this._buffer.findMatchesLineByLine(e,t,i,s)}findMatches(e,t,i,s,r,o,a=Wst){this._assertNotDisposed();let l=null;t!==null&&(Array.isArray(t)||(t=[t]),t.every(u=>M.isIRange(u))&&(l=t.map(u=>this.validateRange(u)))),l===null&&(l=[this.getFullModelRange()]),l=l.sort((u,h)=>u.startLineNumber-h.startLineNumber||u.startColumn-h.startColumn);const c=[];c.push(l.reduce((u,h)=>M.areIntersecting(u,h)?u.plusRange(h):(c.push(u),h)));let d;if(!i&&e.indexOf(`
`)<0){const h=new $v(e,i,s,r).parseSearchRequest();if(!h)return[];d=f=>this.findMatchesLineByLine(f,h,o,a)}else d=u=>HR.findMatches(this,new $v(e,i,s,r),u,o,a);return c.map(d).reduce((u,h)=>u.concat(h),[])}findNextMatch(e,t,i,s,r,o){this._assertNotDisposed();const a=this.validatePosition(t);if(!i&&e.indexOf(`
`)<0){const c=new $v(e,i,s,r).parseSearchRequest();if(!c)return null;const d=this.getLineCount();let u=new M(a.lineNumber,a.column,d,this.getLineMaxColumn(d)),h=this.findMatchesLineByLine(u,c,o,1);return HR.findNextMatch(this,new $v(e,i,s,r),a,o),h.length>0||(u=new M(1,1,a.lineNumber,this.getLineMaxColumn(a.lineNumber)),h=this.findMatchesLineByLine(u,c,o,1),h.length>0)?h[0]:null}return HR.findNextMatch(this,new $v(e,i,s,r),a,o)}findPreviousMatch(e,t,i,s,r,o){this._assertNotDisposed();const a=this.validatePosition(t);return HR.findPreviousMatch(this,new $v(e,i,s,r),a,o)}pushStackElement(){this._commandManager.pushStackElement()}popStackElement(){this._commandManager.popStackElement()}pushEOL(e){if((this.getEOL()===`
`?0:1)!==e)try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEOL(e)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_validateEditOperation(e){return e instanceof i8?e:new i8(e.identifier||null,this.validateRange(e.range),e.text,e.forceMoveMarkers||!1,e.isAutoWhitespaceEdit||!1,e._isTracked||!1)}_validateEditOperations(e){const t=[];for(let i=0,s=e.length;i<s;i++)t[i]=this._validateEditOperation(e[i]);return t}pushEditOperations(e,t,i,s){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._pushEditOperations(e,this._validateEditOperations(t),i,s)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_pushEditOperations(e,t,i,s){if(this._options.trimAutoWhitespace&&this._trimAutoWhitespaceLines){const r=t.map(a=>({range:this.validateRange(a.range),text:a.text}));let o=!0;if(e)for(let a=0,l=e.length;a<l;a++){const c=e[a];let d=!1;for(let u=0,h=r.length;u<h;u++){const f=r[u].range,g=f.startLineNumber>c.endLineNumber,p=c.startLineNumber>f.endLineNumber;if(!g&&!p){d=!0;break}}if(!d){o=!1;break}}if(o)for(let a=0,l=this._trimAutoWhitespaceLines.length;a<l;a++){const c=this._trimAutoWhitespaceLines[a],d=this.getLineMaxColumn(c);let u=!0;for(let h=0,f=r.length;h<f;h++){const g=r[h].range,p=r[h].text;if(!(c<g.startLineNumber||c>g.endLineNumber)&&!(c===g.startLineNumber&&g.startColumn===d&&g.isEmpty()&&p&&p.length>0&&p.charAt(0)===`
`)&&!(c===g.startLineNumber&&g.startColumn===1&&g.isEmpty()&&p&&p.length>0&&p.charAt(p.length-1)===`
`)){u=!1;break}}if(u){const h=new M(c,1,c,d);t.push(new i8(null,h,null,!1,!1,!1))}}this._trimAutoWhitespaceLines=null}return this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEditOperation(e,t,i,s)}_applyUndo(e,t,i,s){const r=e.map(o=>{const a=this.getPositionAt(o.newPosition),l=this.getPositionAt(o.newEnd);return{range:new M(a.lineNumber,a.column,l.lineNumber,l.column),text:o.oldText}});this._applyUndoRedoEdits(r,t,!0,!1,i,s)}_applyRedo(e,t,i,s){const r=e.map(o=>{const a=this.getPositionAt(o.oldPosition),l=this.getPositionAt(o.oldEnd);return{range:new M(a.lineNumber,a.column,l.lineNumber,l.column),text:o.newText}});this._applyUndoRedoEdits(r,t,!1,!0,i,s)}_applyUndoRedoEdits(e,t,i,s,r,o){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._isUndoing=i,this._isRedoing=s,this.applyEdits(e,!1),this.setEOL(t),this._overwriteAlternativeVersionId(r)}finally{this._isUndoing=!1,this._isRedoing=!1,this._eventEmitter.endDeferredEmit(o),this._onDidChangeDecorations.endDeferredEmit()}}applyEdits(e,t=!1){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit();const i=this._validateEditOperations(e);return this._doApplyEdits(i,t)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_doApplyEdits(e,t){const i=this._buffer.getLineCount(),s=this._buffer.applyEdits(e,this._options.trimAutoWhitespace,t),r=this._buffer.getLineCount(),o=s.changes;if(this._trimAutoWhitespaceLines=s.trimAutoWhitespaceLineNumbers,o.length!==0){for(let c=0,d=o.length;c<d;c++){const u=o[c];this._decorationsTree.acceptReplace(u.rangeOffset,u.rangeLength,u.text.length,u.forceMoveMarkers)}const a=[];this._increaseVersionId();let l=i;for(let c=0,d=o.length;c<d;c++){const u=o[c],[h]=M_(u.text);this._onDidChangeDecorations.fire();const f=u.range.startLineNumber,g=u.range.endLineNumber,p=g-f,_=h,w=Math.min(p,_),b=_-p,y=r-l-b+f,S=y,x=y+_,E=this._decorationsTree.getInjectedTextInInterval(this,this.getOffsetAt(new Y(S,1)),this.getOffsetAt(new Y(x,this.getLineMaxColumn(x))),0),D=Vu.fromDecorations(E),N=new Gg(D);for(let I=w;I>=0;I--){const H=f+I,z=y+I;N.takeFromEndWhile(J=>J.lineNumber>z);const G=N.takeFromEndWhile(J=>J.lineNumber===z);a.push(new ace(H,this.getLineContent(z),G))}if(w<p){const I=f+w;a.push(new Ast(I+1,g))}if(w<_){const I=new Gg(D),H=f+w,z=_-w,G=r-l-z+H+1,J=[],j=[];for(let ne=0;ne<z;ne++){const oe=G+ne;j[ne]=this.getLineContent(oe),I.takeWhile(ve=>ve.lineNumber<oe),J[ne]=I.takeWhile(ve=>ve.lineNumber===oe)}a.push(new Mst(H+1,f+_,j,J))}l+=b}this._emitContentChangedEvent(new My(a,this.getVersionId(),this._isUndoing,this._isRedoing),{changes:o,eol:this._buffer.getEOL(),isEolChange:!1,versionId:this.getVersionId(),isUndoing:this._isUndoing,isRedoing:this._isRedoing,isFlush:!1})}return s.reverseEdits===null?void 0:s.reverseEdits}undo(){return this._undoRedoService.undo(this.uri)}canUndo(){return this._undoRedoService.canUndo(this.uri)}redo(){return this._undoRedoService.redo(this.uri)}canRedo(){return this._undoRedoService.canRedo(this.uri)}handleBeforeFireDecorationsChangedEvent(e){if(e===null||e.size===0)return;const i=Array.from(e).map(s=>new ace(s,this.getLineContent(s),this._getInjectedTextInLine(s)));this._onDidChangeInjectedText.fire(new Iye(i))}changeDecorations(e,t=0){this._assertNotDisposed();try{return this._onDidChangeDecorations.beginDeferredEmit(),this._changeDecorations(t,e)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_changeDecorations(e,t){const i={addDecoration:(r,o)=>this._deltaDecorationsImpl(e,[],[{range:r,options:o}])[0],changeDecoration:(r,o)=>{this._changeDecorationImpl(r,o)},changeDecorationOptions:(r,o)=>{this._changeDecorationOptionsImpl(r,uce(o))},removeDecoration:r=>{this._deltaDecorationsImpl(e,[r],[])},deltaDecorations:(r,o)=>r.length===0&&o.length===0?[]:this._deltaDecorationsImpl(e,r,o)};let s=null;try{s=t(i)}catch(r){pt(r)}return i.addDecoration=zL,i.changeDecoration=zL,i.changeDecorationOptions=zL,i.removeDecoration=zL,i.deltaDecorations=zL,s}deltaDecorations(e,t,i=0){if(this._assertNotDisposed(),e||(e=[]),e.length===0&&t.length===0)return[];try{return this._deltaDecorationCallCnt++,this._deltaDecorationCallCnt>1&&(console.warn("Invoking deltaDecorations recursively could lead to leaking decorations."),pt(new Error("Invoking deltaDecorations recursively could lead to leaking decorations."))),this._onDidChangeDecorations.beginDeferredEmit(),this._deltaDecorationsImpl(i,e,t)}finally{this._onDidChangeDecorations.endDeferredEmit(),this._deltaDecorationCallCnt--}}_getTrackedRange(e){return this.getDecorationRange(e)}_setTrackedRange(e,t,i){const s=e?this._decorations[e]:null;if(!s)return t?this._deltaDecorationsImpl(0,[],[{range:t,options:dce[i]}],!0)[0]:null;if(!t)return this._decorationsTree.delete(s),delete this._decorations[s.id],null;const r=this._validateRangeRelaxedNoAllocations(t),o=this._buffer.getOffsetAt(r.startLineNumber,r.startColumn),a=this._buffer.getOffsetAt(r.endLineNumber,r.endColumn);return this._decorationsTree.delete(s),s.reset(this.getVersionId(),o,a,r),s.setOptions(dce[i]),this._decorationsTree.insert(s),s.id}removeAllDecorationsWithOwnerId(e){if(this._isDisposed)return;const t=this._decorationsTree.collectNodesFromOwner(e);for(let i=0,s=t.length;i<s;i++){const r=t[i];this._decorationsTree.delete(r),delete this._decorations[r.id]}}getDecorationOptions(e){const t=this._decorations[e];return t?t.options:null}getDecorationRange(e){const t=this._decorations[e];return t?this._decorationsTree.getNodeRange(this,t):null}getLineDecorations(e,t=0,i=!1){return e<1||e>this.getLineCount()?[]:this.getLinesDecorations(e,e,t,i)}getLinesDecorations(e,t,i=0,s=!1,r=!1){const o=this.getLineCount(),a=Math.min(o,Math.max(1,e)),l=Math.min(o,Math.max(1,t)),c=this.getLineMaxColumn(l),d=new M(a,1,l,c),u=this._getDecorationsInRange(d,i,s,r);return wV(u,this._decorationProvider.getDecorationsInRange(d,i,s)),u}getDecorationsInRange(e,t=0,i=!1,s=!1,r=!1){const o=this.validateRange(e),a=this._getDecorationsInRange(o,t,i,r);return wV(a,this._decorationProvider.getDecorationsInRange(o,t,i,s)),a}getOverviewRulerDecorations(e=0,t=!1){return this._decorationsTree.getAll(this,e,t,!0,!1)}getInjectedTextDecorations(e=0){return this._decorationsTree.getAllInjectedText(this,e)}_getInjectedTextInLine(e){const t=this._buffer.getOffsetAt(e,1),i=t+this._buffer.getLineLength(e),s=this._decorationsTree.getInjectedTextInInterval(this,t,i,0);return Vu.fromDecorations(s).filter(r=>r.lineNumber===e)}getAllDecorations(e=0,t=!1){let i=this._decorationsTree.getAll(this,e,t,!1,!1);return i=i.concat(this._decorationProvider.getAllDecorations(e,t)),i}getAllMarginDecorations(e=0){return this._decorationsTree.getAll(this,e,!1,!1,!0)}_getDecorationsInRange(e,t,i,s){const r=this._buffer.getOffsetAt(e.startLineNumber,e.startColumn),o=this._buffer.getOffsetAt(e.endLineNumber,e.endColumn);return this._decorationsTree.getAllInInterval(this,r,o,t,i,s)}getRangeAt(e,t){return this._buffer.getRangeAt(e,t-e)}_changeDecorationImpl(e,t){const i=this._decorations[e];if(!i)return;if(i.options.after){const a=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(a.endLineNumber)}if(i.options.before){const a=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(a.startLineNumber)}const s=this._validateRangeRelaxedNoAllocations(t),r=this._buffer.getOffsetAt(s.startLineNumber,s.startColumn),o=this._buffer.getOffsetAt(s.endLineNumber,s.endColumn);this._decorationsTree.delete(i),i.reset(this.getVersionId(),r,o,s),this._decorationsTree.insert(i),this._onDidChangeDecorations.checkAffectedAndFire(i.options),i.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(s.endLineNumber),i.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(s.startLineNumber)}_changeDecorationOptionsImpl(e,t){const i=this._decorations[e];if(!i)return;const s=!!(i.options.overviewRuler&&i.options.overviewRuler.color),r=!!(t.overviewRuler&&t.overviewRuler.color);if(this._onDidChangeDecorations.checkAffectedAndFire(i.options),this._onDidChangeDecorations.checkAffectedAndFire(t),i.options.after||t.after){const l=this._decorationsTree.getNodeRange(this,i);this._onDidChangeDecorations.recordLineAffectedByInjectedText(l.endLineNumber)}if(i.options.before||t.before){const l=this._decorationsTree.getNodeRange(this,i);this._onDidChangeDecorations.recordLineAffectedByInjectedText(l.startLineNumber)}const o=s!==r,a=Ust(t)!==A2(i);o||a?(this._decorationsTree.delete(i),i.setOptions(t),this._decorationsTree.insert(i)):i.setOptions(t)}_deltaDecorationsImpl(e,t,i,s=!1){const r=this.getVersionId(),o=t.length;let a=0;const l=i.length;let c=0;this._onDidChangeDecorations.beginDeferredEmit();try{const d=new Array(l);for(;a<o||c<l;){let u=null;if(a<o){do u=this._decorations[t[a++]];while(!u&&a<o);if(u){if(u.options.after){const h=this._decorationsTree.getNodeRange(this,u);this._onDidChangeDecorations.recordLineAffectedByInjectedText(h.endLineNumber)}if(u.options.before){const h=this._decorationsTree.getNodeRange(this,u);this._onDidChangeDecorations.recordLineAffectedByInjectedText(h.startLineNumber)}this._decorationsTree.delete(u),s||this._onDidChangeDecorations.checkAffectedAndFire(u.options)}}if(c<l){if(!u){const w=++this._lastDecorationId,b=`${this._instanceId};${w}`;u=new Cye(b,0,0),this._decorations[b]=u}const h=i[c],f=this._validateRangeRelaxedNoAllocations(h.range),g=uce(h.options),p=this._buffer.getOffsetAt(f.startLineNumber,f.startColumn),_=this._buffer.getOffsetAt(f.endLineNumber,f.endColumn);u.ownerId=e,u.reset(r,p,_,f),u.setOptions(g),u.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(f.endLineNumber),u.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(f.startLineNumber),s||this._onDidChangeDecorations.checkAffectedAndFire(g),this._decorationsTree.insert(u),d[c]=u.id,c++}else u&&delete this._decorations[u.id]}return d}finally{this._onDidChangeDecorations.endDeferredEmit()}}getLanguageId(){return this.tokenization.getLanguageId()}setLanguage(e,t){typeof e=="string"?(this._languageSelectionListener.clear(),this._setLanguage(e,t)):(this._languageSelectionListener.value=e.onDidChange(()=>this._setLanguage(e.languageId,t)),this._setLanguage(e.languageId,t))}_setLanguage(e,t){this.tokenization.setLanguageId(e,t),this._languageService.requestRichLanguageFeatures(e)}getLanguageIdAtPosition(e,t){return this.tokenization.getLanguageIdAtPosition(e,t)}getWordAtPosition(e){return this._tokenizationTextModelPart.getWordAtPosition(e)}getWordUntilPosition(e){return this._tokenizationTextModelPart.getWordUntilPosition(e)}normalizePosition(e,t){return e}getLineIndentColumn(e){return zst(this.getLineContent(e))+1}},jv=pu,pu._MODEL_SYNC_LIMIT=50*1024*1024,pu.LARGE_FILE_SIZE_THRESHOLD=20*1024*1024,pu.LARGE_FILE_LINE_COUNT_THRESHOLD=300*1e3,pu.LARGE_FILE_HEAP_OPERATION_THRESHOLD=256*1024*1024,pu.DEFAULT_CREATION_OPTIONS={isForSimpleWidget:!1,tabSize:Tr.tabSize,indentSize:Tr.indentSize,insertSpaces:Tr.insertSpaces,detectIndentation:!1,defaultEOL:1,trimAutoWhitespace:Tr.trimAutoWhitespace,largeFileOptimizations:Tr.largeFileOptimizations,bracketPairColorizationOptions:Tr.bracketPairColorizationOptions},pu);yu=jv=Ost([rA(4,DX),rA(5,un),rA(6,vn),rA(7,Ze)],yu);function zst(n){let e=0;for(const t of n)if(t===" "||t==="	")e++;else break;return e}function N8(n){return!!(n.options.overviewRuler&&n.options.overviewRuler.color)}function Ust(n){return!!n.after||!!n.before}function A2(n){return!!n.options.after||!!n.options.before}class cce{constructor(){this._decorationsTree0=new k8,this._decorationsTree1=new k8,this._injectedTextDecorationsTree=new k8}ensureAllNodesHaveRanges(e){this.getAll(e,0,!1,!1,!1)}_ensureNodesHaveRanges(e,t){for(const i of t)i.range===null&&(i.range=e.getRangeAt(i.cachedAbsoluteStart,i.cachedAbsoluteEnd));return t}getAllInInterval(e,t,i,s,r,o){const a=e.getVersionId(),l=this._intervalSearch(t,i,s,r,a,o);return this._ensureNodesHaveRanges(e,l)}_intervalSearch(e,t,i,s,r,o){const a=this._decorationsTree0.intervalSearch(e,t,i,s,r,o),l=this._decorationsTree1.intervalSearch(e,t,i,s,r,o),c=this._injectedTextDecorationsTree.intervalSearch(e,t,i,s,r,o);return a.concat(l).concat(c)}getInjectedTextInInterval(e,t,i,s){const r=e.getVersionId(),o=this._injectedTextDecorationsTree.intervalSearch(t,i,s,!1,r,!1);return this._ensureNodesHaveRanges(e,o).filter(a=>a.options.showIfCollapsed||!a.range.isEmpty())}getAllInjectedText(e,t){const i=e.getVersionId(),s=this._injectedTextDecorationsTree.search(t,!1,i,!1);return this._ensureNodesHaveRanges(e,s).filter(r=>r.options.showIfCollapsed||!r.range.isEmpty())}getAll(e,t,i,s,r){const o=e.getVersionId(),a=this._search(t,i,s,o,r);return this._ensureNodesHaveRanges(e,a)}_search(e,t,i,s,r){if(i)return this._decorationsTree1.search(e,t,s,r);{const o=this._decorationsTree0.search(e,t,s,r),a=this._decorationsTree1.search(e,t,s,r),l=this._injectedTextDecorationsTree.search(e,t,s,r);return o.concat(a).concat(l)}}collectNodesFromOwner(e){const t=this._decorationsTree0.collectNodesFromOwner(e),i=this._decorationsTree1.collectNodesFromOwner(e),s=this._injectedTextDecorationsTree.collectNodesFromOwner(e);return t.concat(i).concat(s)}collectNodesPostOrder(){const e=this._decorationsTree0.collectNodesPostOrder(),t=this._decorationsTree1.collectNodesPostOrder(),i=this._injectedTextDecorationsTree.collectNodesPostOrder();return e.concat(t).concat(i)}insert(e){A2(e)?this._injectedTextDecorationsTree.insert(e):N8(e)?this._decorationsTree1.insert(e):this._decorationsTree0.insert(e)}delete(e){A2(e)?this._injectedTextDecorationsTree.delete(e):N8(e)?this._decorationsTree1.delete(e):this._decorationsTree0.delete(e)}getNodeRange(e,t){const i=e.getVersionId();return t.cachedVersionId!==i&&this._resolveNode(t,i),t.range===null&&(t.range=e.getRangeAt(t.cachedAbsoluteStart,t.cachedAbsoluteEnd)),t.range}_resolveNode(e,t){A2(e)?this._injectedTextDecorationsTree.resolveNode(e,t):N8(e)?this._decorationsTree1.resolveNode(e,t):this._decorationsTree0.resolveNode(e,t)}acceptReplace(e,t,i,s){this._decorationsTree0.acceptReplace(e,t,i,s),this._decorationsTree1.acceptReplace(e,t,i,s),this._injectedTextDecorationsTree.acceptReplace(e,t,i,s)}}function rh(n){return n.replace(/[^a-z0-9\-_]/gi," ")}class Dye{constructor(e){this.color=e.color||"",this.darkColor=e.darkColor||""}}class $st extends Dye{constructor(e){super(e),this._resolvedColor=null,this.position=typeof e.position=="number"?e.position:Vl.Center}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=null}_resolveColor(e,t){if(typeof e=="string")return e;const i=e?t.getColor(e.id):null;return i?i.toString():""}}class jst{constructor(e){this.position=(e==null?void 0:e.position)??Td.Center,this.persistLane=e==null?void 0:e.persistLane}}class Kst extends Dye{constructor(e){super(e),this.position=e.position,this.sectionHeaderStyle=e.sectionHeaderStyle??null,this.sectionHeaderText=e.sectionHeaderText??null}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=void 0}_resolveColor(e,t){return typeof e=="string"?ge.fromHex(e):t.getColor(e.id)}}class B_{static from(e){return e instanceof B_?e:new B_(e)}constructor(e){this.content=e.content||"",this.inlineClassName=e.inlineClassName||null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.attachedData=e.attachedData||null,this.cursorStops=e.cursorStops||null}}class _t{static register(e){return new _t(e)}static createDynamic(e){return new _t(e)}constructor(e){this.description=e.description,this.blockClassName=e.blockClassName?rh(e.blockClassName):null,this.blockDoesNotCollapse=e.blockDoesNotCollapse??null,this.blockIsAfterEnd=e.blockIsAfterEnd??null,this.blockPadding=e.blockPadding??null,this.stickiness=e.stickiness||0,this.zIndex=e.zIndex||0,this.className=e.className?rh(e.className):null,this.shouldFillLineOnLineBreak=e.shouldFillLineOnLineBreak??null,this.hoverMessage=e.hoverMessage||null,this.glyphMarginHoverMessage=e.glyphMarginHoverMessage||null,this.lineNumberHoverMessage=e.lineNumberHoverMessage||null,this.isWholeLine=e.isWholeLine||!1,this.showIfCollapsed=e.showIfCollapsed||!1,this.collapseOnReplaceEdit=e.collapseOnReplaceEdit||!1,this.overviewRuler=e.overviewRuler?new $st(e.overviewRuler):null,this.minimap=e.minimap?new Kst(e.minimap):null,this.glyphMargin=e.glyphMarginClassName?new jst(e.glyphMargin):null,this.glyphMarginClassName=e.glyphMarginClassName?rh(e.glyphMarginClassName):null,this.linesDecorationsClassName=e.linesDecorationsClassName?rh(e.linesDecorationsClassName):null,this.lineNumberClassName=e.lineNumberClassName?rh(e.lineNumberClassName):null,this.linesDecorationsTooltip=e.linesDecorationsTooltip?rKe(e.linesDecorationsTooltip):null,this.firstLineDecorationClassName=e.firstLineDecorationClassName?rh(e.firstLineDecorationClassName):null,this.marginClassName=e.marginClassName?rh(e.marginClassName):null,this.inlineClassName=e.inlineClassName?rh(e.inlineClassName):null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.beforeContentClassName=e.beforeContentClassName?rh(e.beforeContentClassName):null,this.afterContentClassName=e.afterContentClassName?rh(e.afterContentClassName):null,this.after=e.after?B_.from(e.after):null,this.before=e.before?B_.from(e.before):null,this.hideInCommentTokens=e.hideInCommentTokens??!1,this.hideInStringTokens=e.hideInStringTokens??!1}}_t.EMPTY=_t.register({description:"empty"});const dce=[_t.register({description:"tracked-range-always-grows-when-typing-at-edges",stickiness:0}),_t.register({description:"tracked-range-never-grows-when-typing-at-edges",stickiness:1}),_t.register({description:"tracked-range-grows-only-when-typing-before",stickiness:2}),_t.register({description:"tracked-range-grows-only-when-typing-after",stickiness:3})];function uce(n){return n instanceof _t?n:_t.createDynamic(n)}class qst extends ee{constructor(e){super(),this.handleBeforeFire=e,this._actual=this._register(new X),this.event=this._actual.event,this._affectedInjectedTextLines=null,this._deferredCnt=0,this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._affectsGlyphMargin=!1,this._affectsLineNumber=!1}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(){var e;this._deferredCnt--,this._deferredCnt===0&&(this._shouldFireDeferred&&this.doFire(),(e=this._affectedInjectedTextLines)==null||e.clear(),this._affectedInjectedTextLines=null)}recordLineAffectedByInjectedText(e){this._affectedInjectedTextLines||(this._affectedInjectedTextLines=new Set),this._affectedInjectedTextLines.add(e)}checkAffectedAndFire(e){var t,i;this._affectsMinimap||(this._affectsMinimap=!!((t=e.minimap)!=null&&t.position)),this._affectsOverviewRuler||(this._affectsOverviewRuler=!!((i=e.overviewRuler)!=null&&i.color)),this._affectsGlyphMargin||(this._affectsGlyphMargin=!!e.glyphMarginClassName),this._affectsLineNumber||(this._affectsLineNumber=!!e.lineNumberClassName),this.tryFire()}fire(){this._affectsMinimap=!0,this._affectsOverviewRuler=!0,this._affectsGlyphMargin=!0,this.tryFire()}tryFire(){this._deferredCnt===0?this.doFire():this._shouldFireDeferred=!0}doFire(){this.handleBeforeFire(this._affectedInjectedTextLines);const e={affectsMinimap:this._affectsMinimap,affectsOverviewRuler:this._affectsOverviewRuler,affectsGlyphMargin:this._affectsGlyphMargin,affectsLineNumber:this._affectsLineNumber};this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._affectsGlyphMargin=!1,this._actual.fire(e)}}class Gst extends ee{constructor(){super(),this._fastEmitter=this._register(new X),this.fastEvent=this._fastEmitter.event,this._slowEmitter=this._register(new X),this.slowEvent=this._slowEmitter.event,this._deferredCnt=0,this._deferredEvent=null}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(e=null){if(this._deferredCnt--,this._deferredCnt===0&&this._deferredEvent!==null){this._deferredEvent.rawContentChangedEvent.resultingSelection=e;const t=this._deferredEvent;this._deferredEvent=null,this._fastEmitter.fire(t),this._slowEmitter.fire(t)}}fire(e){if(this._deferredCnt>0){this._deferredEvent?this._deferredEvent=this._deferredEvent.merge(e):this._deferredEvent=e;return}this._fastEmitter.fire(e),this._slowEmitter.fire(e)}}var Yst=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},aA=function(n,e){return function(t,i){e(t,i,n)}},ZC;function Iv(n){return n.toString()}let Zst=class{constructor(e,t,i){this.model=e,this._modelEventListeners=new ue,this.model=e,this._modelEventListeners.add(e.onWillDispose(()=>t(e))),this._modelEventListeners.add(e.onDidChangeLanguage(s=>i(e,s)))}dispose(){this._modelEventListeners.dispose()}};const Xst=Po||Bt?1:2;class Qst{constructor(e,t,i,s,r,o,a,l){this.uri=e,this.initialUndoRedoSnapshot=t,this.time=i,this.sharesUndoRedoStack=s,this.heapSize=r,this.sha1=o,this.versionId=a,this.alternativeVersionId=l}}var iw;let y$=(iw=class extends ee{constructor(e,t,i,s){super(),this._configurationService=e,this._resourcePropertiesService=t,this._undoRedoService=i,this._instantiationService=s,this._onModelAdded=this._register(new X),this.onModelAdded=this._onModelAdded.event,this._onModelRemoved=this._register(new X),this.onModelRemoved=this._onModelRemoved.event,this._onModelModeChanged=this._register(new X),this.onModelLanguageChanged=this._onModelModeChanged.event,this._modelCreationOptionsByLanguageAndResource=Object.create(null),this._models={},this._disposedModels=new Map,this._disposedModelsHeapSize=0,this._register(this._configurationService.onDidChangeConfiguration(r=>this._updateModelOptions(r))),this._updateModelOptions(void 0)}static _readModelOptions(e,t){var h;let i=Tr.tabSize;if(e.editor&&typeof e.editor.tabSize<"u"){const f=parseInt(e.editor.tabSize,10);isNaN(f)||(i=f),i<1&&(i=1)}let s="tabSize";if(e.editor&&typeof e.editor.indentSize<"u"&&e.editor.indentSize!=="tabSize"){const f=parseInt(e.editor.indentSize,10);isNaN(f)||(s=Math.max(f,1))}let r=Tr.insertSpaces;e.editor&&typeof e.editor.insertSpaces<"u"&&(r=e.editor.insertSpaces==="false"?!1:!!e.editor.insertSpaces);let o=Xst;const a=e.eol;a===`\r
`?o=2:a===`
`&&(o=1);let l=Tr.trimAutoWhitespace;e.editor&&typeof e.editor.trimAutoWhitespace<"u"&&(l=e.editor.trimAutoWhitespace==="false"?!1:!!e.editor.trimAutoWhitespace);let c=Tr.detectIndentation;e.editor&&typeof e.editor.detectIndentation<"u"&&(c=e.editor.detectIndentation==="false"?!1:!!e.editor.detectIndentation);let d=Tr.largeFileOptimizations;e.editor&&typeof e.editor.largeFileOptimizations<"u"&&(d=e.editor.largeFileOptimizations==="false"?!1:!!e.editor.largeFileOptimizations);let u=Tr.bracketPairColorizationOptions;return(h=e.editor)!=null&&h.bracketPairColorization&&typeof e.editor.bracketPairColorization=="object"&&(u={enabled:!!e.editor.bracketPairColorization.enabled,independentColorPoolPerBracketType:!!e.editor.bracketPairColorization.independentColorPoolPerBracketType}),{isForSimpleWidget:t,tabSize:i,indentSize:s,insertSpaces:r,detectIndentation:c,defaultEOL:o,trimAutoWhitespace:l,largeFileOptimizations:d,bracketPairColorizationOptions:u}}_getEOL(e,t){if(e)return this._resourcePropertiesService.getEOL(e,t);const i=this._configurationService.getValue("files.eol",{overrideIdentifier:t});return i&&typeof i=="string"&&i!=="auto"?i:Ka===3||Ka===2?`
`:`\r
`}_shouldRestoreUndoStack(){const e=this._configurationService.getValue("files.restoreUndoStack");return typeof e=="boolean"?e:!0}getCreationOptions(e,t,i){const s=typeof e=="string"?e:e.languageId;let r=this._modelCreationOptionsByLanguageAndResource[s+t];if(!r){const o=this._configurationService.getValue("editor",{overrideIdentifier:s,resource:t}),a=this._getEOL(t,s);r=ZC._readModelOptions({editor:o,eol:a},i),this._modelCreationOptionsByLanguageAndResource[s+t]=r}return r}_updateModelOptions(e){const t=this._modelCreationOptionsByLanguageAndResource;this._modelCreationOptionsByLanguageAndResource=Object.create(null);const i=Object.keys(this._models);for(let s=0,r=i.length;s<r;s++){const o=i[s],a=this._models[o],l=a.model.getLanguageId(),c=a.model.uri;if(e&&!e.affectsConfiguration("editor",{overrideIdentifier:l,resource:c})&&!e.affectsConfiguration("files.eol",{overrideIdentifier:l,resource:c}))continue;const d=t[l+c],u=this.getCreationOptions(l,c,a.model.isForSimpleWidget);ZC._setModelOptionsForModel(a.model,u,d)}}static _setModelOptionsForModel(e,t,i){i&&i.defaultEOL!==t.defaultEOL&&e.getLineCount()===1&&e.setEOL(t.defaultEOL===1?0:1),!(i&&i.detectIndentation===t.detectIndentation&&i.insertSpaces===t.insertSpaces&&i.tabSize===t.tabSize&&i.indentSize===t.indentSize&&i.trimAutoWhitespace===t.trimAutoWhitespace&&Ga(i.bracketPairColorizationOptions,t.bracketPairColorizationOptions))&&(t.detectIndentation?(e.detectIndentation(t.insertSpaces,t.tabSize),e.updateOptions({trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions})):e.updateOptions({insertSpaces:t.insertSpaces,tabSize:t.tabSize,indentSize:t.indentSize,trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions}))}_insertDisposedModel(e){this._disposedModels.set(Iv(e.uri),e),this._disposedModelsHeapSize+=e.heapSize}_removeDisposedModel(e){const t=this._disposedModels.get(Iv(e));return t&&(this._disposedModelsHeapSize-=t.heapSize),this._disposedModels.delete(Iv(e)),t}_ensureDisposedModelsHeapSize(e){if(this._disposedModelsHeapSize>e){const t=[];for(this._disposedModels.forEach(i=>{i.sharesUndoRedoStack||t.push(i)}),t.sort((i,s)=>i.time-s.time);t.length>0&&this._disposedModelsHeapSize>e;){const i=t.shift();this._removeDisposedModel(i.uri),i.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(i.initialUndoRedoSnapshot)}}}_createModelData(e,t,i,s){const r=this.getCreationOptions(t,i,s),o=this._instantiationService.createInstance(yu,e,t,r,i);if(i&&this._disposedModels.has(Iv(i))){const c=this._removeDisposedModel(i),d=this._undoRedoService.getElements(i),u=this._getSHA1Computer(),h=u.canComputeSHA1(o)?u.computeSHA1(o)===c.sha1:!1;if(h||c.sharesUndoRedoStack){for(const f of d.past)ng(f)&&f.matchesResource(i)&&f.setModel(o);for(const f of d.future)ng(f)&&f.matchesResource(i)&&f.setModel(o);this._undoRedoService.setElementsValidFlag(i,!0,f=>ng(f)&&f.matchesResource(i)),h&&(o._overwriteVersionId(c.versionId),o._overwriteAlternativeVersionId(c.alternativeVersionId),o._overwriteInitialUndoRedoSnapshot(c.initialUndoRedoSnapshot))}else c.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(c.initialUndoRedoSnapshot)}const a=Iv(o.uri);if(this._models[a])throw new Error("ModelService: Cannot add model because it already exists!");const l=new Zst(o,c=>this._onWillDispose(c),(c,d)=>this._onDidChangeLanguage(c,d));return this._models[a]=l,l}createModel(e,t,i,s=!1){let r;return t?r=this._createModelData(e,t,i,s):r=this._createModelData(e,Ro,i,s),this._onModelAdded.fire(r.model),r.model}getModels(){const e=[],t=Object.keys(this._models);for(let i=0,s=t.length;i<s;i++){const r=t[i];e.push(this._models[r].model)}return e}getModel(e){const t=Iv(e),i=this._models[t];return i?i.model:null}_schemaShouldMaintainUndoRedoElements(e){return e.scheme===mt.file||e.scheme===mt.vscodeRemote||e.scheme===mt.vscodeUserData||e.scheme===mt.vscodeNotebookCell||e.scheme==="fake-fs"}_onWillDispose(e){const t=Iv(e.uri),i=this._models[t],s=this._undoRedoService.getUriComparisonKey(e.uri)!==e.uri.toString();let r=!1,o=0;if(s||this._shouldRestoreUndoStack()&&this._schemaShouldMaintainUndoRedoElements(e.uri)){const c=this._undoRedoService.getElements(e.uri);if(c.past.length>0||c.future.length>0){for(const d of c.past)ng(d)&&d.matchesResource(e.uri)&&(r=!0,o+=d.heapSize(e.uri),d.setModel(e.uri));for(const d of c.future)ng(d)&&d.matchesResource(e.uri)&&(r=!0,o+=d.heapSize(e.uri),d.setModel(e.uri))}}const a=ZC.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK,l=this._getSHA1Computer();if(r)if(!s&&(o>a||!l.canComputeSHA1(e))){const c=i.model.getInitialUndoRedoSnapshot();c!==null&&this._undoRedoService.restoreSnapshot(c)}else this._ensureDisposedModelsHeapSize(a-o),this._undoRedoService.setElementsValidFlag(e.uri,!1,c=>ng(c)&&c.matchesResource(e.uri)),this._insertDisposedModel(new Qst(e.uri,i.model.getInitialUndoRedoSnapshot(),Date.now(),s,o,l.computeSHA1(e),e.getVersionId(),e.getAlternativeVersionId()));else if(!s){const c=i.model.getInitialUndoRedoSnapshot();c!==null&&this._undoRedoService.restoreSnapshot(c)}delete this._models[t],i.dispose(),delete this._modelCreationOptionsByLanguageAndResource[e.getLanguageId()+e.uri],this._onModelRemoved.fire(e)}_onDidChangeLanguage(e,t){const i=t.oldLanguage,s=e.getLanguageId(),r=this.getCreationOptions(i,e.uri,e.isForSimpleWidget),o=this.getCreationOptions(s,e.uri,e.isForSimpleWidget);ZC._setModelOptionsForModel(e,o,r),this._onModelModeChanged.fire({model:e,oldLanguageId:i})}_getSHA1Computer(){return new S$}},ZC=iw,iw.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK=20*1024*1024,iw);y$=ZC=Yst([aA(0,Tt),aA(1,LCe),aA(2,DX),aA(3,Ze)],y$);const S4=class S4{canComputeSHA1(e){return e.getValueLength()<=S4.MAX_MODEL_SIZE}computeSHA1(e){const t=new Bz,i=e.createSnapshot();let s;for(;s=i.read();)t.update(s);return t.digest()}};S4.MAX_MODEL_SIZE=10*1024*1024;let S$=S4;var x$;(function(n){n[n.PRESERVE=0]="PRESERVE",n[n.LAST=1]="LAST"})(x$||(x$={}));const j0={Quickaccess:"workbench.contributions.quickaccess"};class Jst{constructor(){this.providers=[],this.defaultProvider=void 0}registerQuickAccessProvider(e){return e.prefix.length===0?this.defaultProvider=e:this.providers.push(e),this.providers.sort((t,i)=>i.prefix.length-t.prefix.length),Ye(()=>{this.providers.splice(this.providers.indexOf(e),1),this.defaultProvider===e&&(this.defaultProvider=void 0)})}getQuickAccessProviders(){return Id([this.defaultProvider,...this.providers])}getQuickAccessProvider(e){return e&&this.providers.find(i=>e.startsWith(i.prefix))||void 0||this.defaultProvider}}_n.add(j0.Quickaccess,new Jst);const ert={ctrlCmd:!1,alt:!1};var jS;(function(n){n[n.Blur=1]="Blur",n[n.Gesture=2]="Gesture",n[n.Other=3]="Other"})(jS||(jS={}));var cu;(function(n){n[n.NONE=0]="NONE",n[n.FIRST=1]="FIRST",n[n.SECOND=2]="SECOND",n[n.LAST=3]="LAST"})(cu||(cu={}));var ji;(function(n){n[n.First=1]="First",n[n.Second=2]="Second",n[n.Last=3]="Last",n[n.Next=4]="Next",n[n.Previous=5]="Previous",n[n.NextPage=6]="NextPage",n[n.PreviousPage=7]="PreviousPage",n[n.NextSeparator=8]="NextSeparator",n[n.PreviousSeparator=9]="PreviousSeparator"})(ji||(ji={}));var sO;(function(n){n[n.Title=1]="Title",n[n.Inline=2]="Inline"})(sO||(sO={}));const Uc=Wt("quickInputService");var trt=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},hce=function(n,e){return function(t,i){e(t,i,n)}};let L$=class extends ee{constructor(e,t){super(),this.quickInputService=e,this.instantiationService=t,this.registry=_n.as(j0.Quickaccess),this.mapProviderToDescriptor=new Map,this.lastAcceptedPickerValues=new Map,this.visibleQuickAccess=void 0}show(e="",t){this.doShowOrPick(e,!1,t)}doShowOrPick(e,t,i){var g,p;const[s,r]=this.getOrInstantiateProvider(e,i==null?void 0:i.enabledProviderPrefixes),o=this.visibleQuickAccess,a=o==null?void 0:o.descriptor;if(o&&r&&a===r){e!==r.prefix&&!(i!=null&&i.preserveValue)&&(o.picker.value=e),this.adjustValueSelection(o.picker,r,i);return}if(r&&!(i!=null&&i.preserveValue)){let _;if(o&&a&&a!==r){const w=o.value.substr(a.prefix.length);w&&(_=`${r.prefix}${w}`)}if(!_){const w=s==null?void 0:s.defaultFilterValue;w===x$.LAST?_=this.lastAcceptedPickerValues.get(r):typeof w=="string"&&(_=`${r.prefix}${w}`)}typeof _=="string"&&(e=_)}const l=(g=o==null?void 0:o.picker)==null?void 0:g.valueSelection,c=(p=o==null?void 0:o.picker)==null?void 0:p.value,d=new ue,u=d.add(this.quickInputService.createQuickPick({useSeparators:!0}));u.value=e,this.adjustValueSelection(u,r,i),u.placeholder=(i==null?void 0:i.placeholder)??(r==null?void 0:r.placeholder),u.quickNavigate=i==null?void 0:i.quickNavigateConfiguration,u.hideInput=!!u.quickNavigate&&!o,(typeof(i==null?void 0:i.itemActivation)=="number"||i!=null&&i.quickNavigateConfiguration)&&(u.itemActivation=(i==null?void 0:i.itemActivation)??cu.SECOND),u.contextKey=r==null?void 0:r.contextKey,u.filterValue=_=>_.substring(r?r.prefix.length:0);let h;t&&(h=new Ex,d.add(Ee.once(u.onWillAccept)(_=>{_.veto(),u.hide()}))),d.add(this.registerPickerListeners(u,s,r,e,i));const f=d.add(new mn);if(s&&d.add(s.provide(u,f.token,i==null?void 0:i.providerOptions)),Ee.once(u.onDidHide)(()=>{u.selectedItems.length===0&&f.cancel(),d.dispose(),h==null||h.complete(u.selectedItems.slice(0))}),u.show(),l&&c===e&&(u.valueSelection=l),t)return h==null?void 0:h.p}adjustValueSelection(e,t,i){let s;i!=null&&i.preserveValue?s=[e.value.length,e.value.length]:s=[(t==null?void 0:t.prefix.length)??0,e.value.length],e.valueSelection=s}registerPickerListeners(e,t,i,s,r){const o=new ue,a=this.visibleQuickAccess={picker:e,descriptor:i,value:s};return o.add(Ye(()=>{a===this.visibleQuickAccess&&(this.visibleQuickAccess=void 0)})),o.add(e.onDidChangeValue(l=>{const[c]=this.getOrInstantiateProvider(l,r==null?void 0:r.enabledProviderPrefixes);c!==t?this.show(l,{enabledProviderPrefixes:r==null?void 0:r.enabledProviderPrefixes,preserveValue:!0,providerOptions:r==null?void 0:r.providerOptions}):a.value=l})),i&&o.add(e.onDidAccept(()=>{this.lastAcceptedPickerValues.set(i,e.value)})),o}getOrInstantiateProvider(e,t){const i=this.registry.getQuickAccessProvider(e);if(!i||t&&!(t!=null&&t.includes(i.prefix)))return[void 0,void 0];let s=this.mapProviderToDescriptor.get(i);return s||(s=this.instantiationService.createInstance(i.ctor),this.mapProviderToDescriptor.set(i,s)),[s,i]}};L$=trt([hce(0,Uc),hce(1,Ze)],L$);class Hx extends Xl{constructor(e){super(),this._onChange=this._register(new X),this.onChange=this._onChange.event,this._onKeyDown=this._register(new X),this.onKeyDown=this._onKeyDown.event,this._opts=e,this._checked=this._opts.isChecked;const t=["monaco-custom-toggle"];this._opts.icon&&(this._icon=this._opts.icon,t.push(...ot.asClassNameArray(this._icon))),this._opts.actionClassName&&t.push(...this._opts.actionClassName.split(" ")),this._checked&&t.push("checked"),this.domNode=document.createElement("div"),this._hover=this._register(Gu().setupManagedHover(e.hoverDelegate??Vo("mouse"),this.domNode,this._opts.title)),this.domNode.classList.add(...t),this._opts.notFocusable||(this.domNode.tabIndex=0),this.domNode.setAttribute("role","checkbox"),this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.setAttribute("aria-label",this._opts.title),this.applyStyles(),this.onclick(this.domNode,i=>{this.enabled&&(this.checked=!this._checked,this._onChange.fire(!1),i.preventDefault())}),this._register(this.ignoreGesture(this.domNode)),this.onkeydown(this.domNode,i=>{if(i.keyCode===10||i.keyCode===3){this.checked=!this._checked,this._onChange.fire(!0),i.preventDefault(),i.stopPropagation();return}this._onKeyDown.fire(i)})}get enabled(){return this.domNode.getAttribute("aria-disabled")!=="true"}focus(){this.domNode.focus()}get checked(){return this._checked}set checked(e){this._checked=e,this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.classList.toggle("checked",this._checked),this.applyStyles()}width(){return 22}applyStyles(){this.domNode&&(this.domNode.style.borderColor=this._checked&&this._opts.inputActiveOptionBorder||"",this.domNode.style.color=this._checked&&this._opts.inputActiveOptionForeground||"inherit",this.domNode.style.backgroundColor=this._checked&&this._opts.inputActiveOptionBackground||"")}enable(){this.domNode.setAttribute("aria-disabled",String(!1))}disable(){this.domNode.setAttribute("aria-disabled",String(!0))}}var irt=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};class Nye{constructor(e){this.nodes=e}toString(){return this.nodes.map(e=>typeof e=="string"?e:e.label).join("")}}irt([Kn],Nye.prototype,"toString",null);const nrt=/\[([^\]]+)\]\(((?:https?:\/\/|command:|file:)[^\)\s]+)(?: (["'])(.+?)(\3))?\)/gi;function srt(n){const e=[];let t=0,i;for(;i=nrt.exec(n);){i.index-t>0&&e.push(n.substring(t,i.index));const[,s,r,,o]=i;o?e.push({label:s,href:r,title:o}):e.push({label:s,href:r}),t=i.index+i[0].length}return t<n.length&&e.push(n.substring(t)),new Nye(e)}const T8={},rrt=new JX("quick-input-button-icon-");function ort(n){if(!n)return;let e;const t=n.dark.toString();return T8[t]?e=T8[t]:(e=rrt.nextId(),mP(`.${e}, .hc-light .${e}`,`background-image: ${Qg(n.light||n.dark)}`),mP(`.vs-dark .${e}, .hc-black .${e}`,`background-image: ${Qg(n.dark)}`),T8[t]=e),e}function aE(n,e,t){let i=n.iconClass||ort(n.iconPath);return n.alwaysVisible&&(i=i?`${i} always-visible`:"always-visible"),{id:e,label:"",tooltip:n.tooltip||"",class:i,enabled:!0,run:t}}function art(n,e,t){sr(e);const i=srt(n);let s=0;for(const r of i.nodes)if(typeof r=="string")e.append(...Ym(r));else{let o=r.title;!o&&r.href.startsWith("command:")?o=v("executeCommand","Click to execute command '{0}'",r.href.substring(8)):o||(o=r.href);const a=xe("a",{href:r.href,title:o,tabIndex:s++},r.label);a.style.textDecoration="underline";const l=f=>{Lqe(f)&&$t.stop(f,!0),t.callback(r.href)},c=t.disposables.add(new zt(a,Se.CLICK)).event,d=t.disposables.add(new zt(a,Se.KEY_DOWN)).event,u=Ee.chain(d,f=>f.filter(g=>{const p=new Oi(g);return p.equals(10)||p.equals(3)}));t.disposables.add(Br.addTarget(a));const h=t.disposables.add(new zt(a,Hi.Tap)).event;Ee.any(c,h,u)(l,null,t.disposables),e.appendChild(a)}}var lrt=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},fce=function(n,e){return function(t,i){e(t,i,n)}};const Tye="inQuickInput",crt=new Re(Tye,!1,v("inQuickInput","Whether keyboard focus is inside the quick input control")),drt=he.has(Tye),Rye="quickInputType",urt=new Re(Rye,void 0,v("quickInputType","The type of the currently visible quick input")),Aye="cursorAtEndOfQuickInputBox",hrt=new Re(Aye,!1,v("cursorAtEndOfQuickInputBox","Whether the cursor in the quick input is at the end of the input box")),frt=he.has(Aye),k$={iconClass:ot.asClassName(ye.quickInputBack),tooltip:v("quickInput.back","Back"),handle:-1},x4=class x4 extends ee{constructor(e){super(),this.ui=e,this._widgetUpdated=!1,this.visible=!1,this._enabled=!0,this._busy=!1,this._ignoreFocusOut=!1,this._leftButtons=[],this._rightButtons=[],this._inlineButtons=[],this.buttonsUpdated=!1,this._toggles=[],this.togglesUpdated=!1,this.noValidationMessage=x4.noPromptMessage,this._severity=Un.Ignore,this.onDidTriggerButtonEmitter=this._register(new X),this.onDidHideEmitter=this._register(new X),this.onWillHideEmitter=this._register(new X),this.onDisposeEmitter=this._register(new X),this.visibleDisposables=this._register(new ue),this.onDidHide=this.onDidHideEmitter.event}get title(){return this._title}set title(e){this._title=e,this.update()}get description(){return this._description}set description(e){this._description=e,this.update()}get step(){return this._steps}set step(e){this._steps=e,this.update()}get totalSteps(){return this._totalSteps}set totalSteps(e){this._totalSteps=e,this.update()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this.update()}get contextKey(){return this._contextKey}set contextKey(e){this._contextKey=e,this.update()}get busy(){return this._busy}set busy(e){this._busy=e,this.update()}get ignoreFocusOut(){return this._ignoreFocusOut}set ignoreFocusOut(e){const t=this._ignoreFocusOut!==e&&!Bu;this._ignoreFocusOut=e&&!Bu,t&&this.update()}get titleButtons(){return this._leftButtons.length?[...this._leftButtons,this._rightButtons]:this._rightButtons}get buttons(){return[...this._leftButtons,...this._rightButtons,...this._inlineButtons]}set buttons(e){this._leftButtons=e.filter(t=>t===k$),this._rightButtons=e.filter(t=>t!==k$&&t.location!==sO.Inline),this._inlineButtons=e.filter(t=>t.location===sO.Inline),this.buttonsUpdated=!0,this.update()}get toggles(){return this._toggles}set toggles(e){this._toggles=e??[],this.togglesUpdated=!0,this.update()}get validationMessage(){return this._validationMessage}set validationMessage(e){this._validationMessage=e,this.update()}get severity(){return this._severity}set severity(e){this._severity=e,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.onDidTriggerButton(e=>{this.buttons.indexOf(e)!==-1&&this.onDidTriggerButtonEmitter.fire(e)})),this.ui.show(this),this.visible=!0,this._lastValidationMessage=void 0,this._lastSeverity=void 0,this.buttons.length&&(this.buttonsUpdated=!0),this.toggles.length&&(this.togglesUpdated=!0),this.update())}hide(){this.visible&&this.ui.hide()}didHide(e=jS.Other){this.visible=!1,this.visibleDisposables.clear(),this.onDidHideEmitter.fire({reason:e})}willHide(e=jS.Other){this.onWillHideEmitter.fire({reason:e})}update(){var s;if(!this.visible)return;const e=this.getTitle();e&&this.ui.title.textContent!==e?this.ui.title.textContent=e:!e&&this.ui.title.innerHTML!=="&nbsp;"&&(this.ui.title.innerText="");const t=this.getDescription();if(this.ui.description1.textContent!==t&&(this.ui.description1.textContent=t),this.ui.description2.textContent!==t&&(this.ui.description2.textContent=t),this._widgetUpdated&&(this._widgetUpdated=!1,this._widget?sr(this.ui.widget,this._widget):sr(this.ui.widget)),this.busy&&!this.busyDelay&&(this.busyDelay=new Fd,this.busyDelay.setIfNotSet(()=>{this.visible&&this.ui.progressBar.infinite()},800)),!this.busy&&this.busyDelay&&(this.ui.progressBar.stop(),this.busyDelay.cancel(),this.busyDelay=void 0),this.buttonsUpdated){this.buttonsUpdated=!1,this.ui.leftActionBar.clear();const r=this._leftButtons.map((l,c)=>aE(l,`id-${c}`,async()=>this.onDidTriggerButtonEmitter.fire(l)));this.ui.leftActionBar.push(r,{icon:!0,label:!1}),this.ui.rightActionBar.clear();const o=this._rightButtons.map((l,c)=>aE(l,`id-${c}`,async()=>this.onDidTriggerButtonEmitter.fire(l)));this.ui.rightActionBar.push(o,{icon:!0,label:!1}),this.ui.inlineActionBar.clear();const a=this._inlineButtons.map((l,c)=>aE(l,`id-${c}`,async()=>this.onDidTriggerButtonEmitter.fire(l)));this.ui.inlineActionBar.push(a,{icon:!0,label:!1})}if(this.togglesUpdated){this.togglesUpdated=!1;const r=((s=this.toggles)==null?void 0:s.filter(o=>o instanceof Hx))??[];this.ui.inputBox.toggles=r}this.ui.ignoreFocusOut=this.ignoreFocusOut,this.ui.setEnabled(this.enabled),this.ui.setContextKey(this.contextKey);const i=this.validationMessage||this.noValidationMessage;this._lastValidationMessage!==i&&(this._lastValidationMessage=i,sr(this.ui.message),art(i,this.ui.message,{callback:r=>{this.ui.linkOpenerDelegate(r)},disposables:this.visibleDisposables})),this._lastSeverity!==this.severity&&(this._lastSeverity=this.severity,this.showMessageDecoration(this.severity))}getTitle(){return this.title&&this.step?`${this.title} (${this.getSteps()})`:this.title?this.title:this.step?this.getSteps():""}getDescription(){return this.description||""}getSteps(){return this.step&&this.totalSteps?v("quickInput.steps","{0}/{1}",this.step,this.totalSteps):this.step?String(this.step):""}showMessageDecoration(e){if(this.ui.inputBox.showDecoration(e),e!==Un.Ignore){const t=this.ui.inputBox.stylesForType(e);this.ui.message.style.color=t.foreground?`${t.foreground}`:"",this.ui.message.style.backgroundColor=t.background?`${t.background}`:"",this.ui.message.style.border=t.border?`1px solid ${t.border}`:"",this.ui.message.style.marginBottom="-2px"}else this.ui.message.style.color="",this.ui.message.style.backgroundColor="",this.ui.message.style.border="",this.ui.message.style.marginBottom=""}dispose(){this.hide(),this.onDisposeEmitter.fire(),super.dispose()}};x4.noPromptMessage=v("inputModeEntry","Press 'Enter' to confirm your input or 'Escape' to cancel");let rO=x4;const L4=class L4 extends rO{constructor(){super(...arguments),this._value="",this.onDidChangeValueEmitter=this._register(new X),this.onWillAcceptEmitter=this._register(new X),this.onDidAcceptEmitter=this._register(new X),this.onDidCustomEmitter=this._register(new X),this._items=[],this.itemsUpdated=!1,this._canSelectMany=!1,this._canAcceptInBackground=!1,this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._matchOnLabelMode="fuzzy",this._sortByLabel=!0,this._keepScrollPosition=!1,this._itemActivation=cu.FIRST,this._activeItems=[],this.activeItemsUpdated=!1,this.activeItemsToConfirm=[],this.onDidChangeActiveEmitter=this._register(new X),this._selectedItems=[],this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=[],this.onDidChangeSelectionEmitter=this._register(new X),this.onDidTriggerItemButtonEmitter=this._register(new X),this.onDidTriggerSeparatorButtonEmitter=this._register(new X),this.valueSelectionUpdated=!0,this._ok="default",this._customButton=!1,this._focusEventBufferer=new TN,this.type="quickPick",this.filterValue=e=>e,this.onDidChangeValue=this.onDidChangeValueEmitter.event,this.onWillAccept=this.onWillAcceptEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event,this.onDidChangeActive=this.onDidChangeActiveEmitter.event,this.onDidChangeSelection=this.onDidChangeSelectionEmitter.event,this.onDidTriggerItemButton=this.onDidTriggerItemButtonEmitter.event,this.onDidTriggerSeparatorButton=this.onDidTriggerSeparatorButtonEmitter.event}get quickNavigate(){return this._quickNavigate}set quickNavigate(e){this._quickNavigate=e,this.update()}get value(){return this._value}set value(e){this.doSetValue(e)}doSetValue(e,t){this._value!==e&&(this._value=e,t||this.update(),this.visible&&this.ui.list.filter(this.filterValue(this._value))&&this.trySelectFirst(),this.onDidChangeValueEmitter.fire(this._value))}set ariaLabel(e){this._ariaLabel=e,this.update()}get ariaLabel(){return this._ariaLabel}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update()}get items(){return this._items}get scrollTop(){return this.ui.list.scrollTop}set scrollTop(e){this.ui.list.scrollTop=e}set items(e){this._items=e,this.itemsUpdated=!0,this.update()}get canSelectMany(){return this._canSelectMany}set canSelectMany(e){this._canSelectMany=e,this.update()}get canAcceptInBackground(){return this._canAcceptInBackground}set canAcceptInBackground(e){this._canAcceptInBackground=e}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(e){this._matchOnDescription=e,this.update()}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(e){this._matchOnDetail=e,this.update()}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(e){this._matchOnLabel=e,this.update()}get matchOnLabelMode(){return this._matchOnLabelMode}set matchOnLabelMode(e){this._matchOnLabelMode=e,this.update()}get sortByLabel(){return this._sortByLabel}set sortByLabel(e){this._sortByLabel=e,this.update()}get keepScrollPosition(){return this._keepScrollPosition}set keepScrollPosition(e){this._keepScrollPosition=e}get itemActivation(){return this._itemActivation}set itemActivation(e){this._itemActivation=e}get activeItems(){return this._activeItems}set activeItems(e){this._activeItems=e,this.activeItemsUpdated=!0,this.update()}get selectedItems(){return this._selectedItems}set selectedItems(e){this._selectedItems=e,this.selectedItemsUpdated=!0,this.update()}get keyMods(){return this._quickNavigate?ert:this.ui.keyMods}get valueSelection(){const e=this.ui.inputBox.getSelection();if(e)return[e.start,e.end]}set valueSelection(e){this._valueSelection=e,this.valueSelectionUpdated=!0,this.update()}get customButton(){return this._customButton}set customButton(e){this._customButton=e,this.update()}get customLabel(){return this._customButtonLabel}set customLabel(e){this._customButtonLabel=e,this.update()}get customHover(){return this._customButtonHover}set customHover(e){this._customButtonHover=e,this.update()}get ok(){return this._ok}set ok(e){this._ok=e,this.update()}get hideInput(){return!!this._hideInput}set hideInput(e){this._hideInput=e,this.update()}trySelectFirst(){this.canSelectMany||this.ui.list.focus(ji.First)}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange(e=>{this.doSetValue(e,!0)})),this.visibleDisposables.add(this.ui.onDidAccept(()=>{this.canSelectMany?this.ui.list.getCheckedElements().length||(this._selectedItems=[],this.onDidChangeSelectionEmitter.fire(this.selectedItems)):this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems)),this.handleAccept(!1)})),this.visibleDisposables.add(this.ui.onDidCustom(()=>{this.onDidCustomEmitter.fire()})),this.visibleDisposables.add(this._focusEventBufferer.wrapEvent(this.ui.list.onDidChangeFocus,(e,t)=>t)(e=>{this.activeItemsUpdated||this.activeItemsToConfirm!==this._activeItems&&dn(e,this._activeItems,(t,i)=>t===i)||(this._activeItems=e,this.onDidChangeActiveEmitter.fire(e))})),this.visibleDisposables.add(this.ui.list.onDidChangeSelection(({items:e,event:t})=>{if(this.canSelectMany){e.length&&this.ui.list.setSelectedElements([]);return}this.selectedItemsToConfirm!==this._selectedItems&&dn(e,this._selectedItems,(i,s)=>i===s)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e),e.length&&this.handleAccept(gX(t)&&t.button===1))})),this.visibleDisposables.add(this.ui.list.onChangedCheckedElements(e=>{!this.canSelectMany||!this.visible||this.selectedItemsToConfirm!==this._selectedItems&&dn(e,this._selectedItems,(t,i)=>t===i)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e))})),this.visibleDisposables.add(this.ui.list.onButtonTriggered(e=>this.onDidTriggerItemButtonEmitter.fire(e))),this.visibleDisposables.add(this.ui.list.onSeparatorButtonTriggered(e=>this.onDidTriggerSeparatorButtonEmitter.fire(e))),this.visibleDisposables.add(this.registerQuickNavigation()),this.valueSelectionUpdated=!0),super.show()}handleAccept(e){let t=!1;this.onWillAcceptEmitter.fire({veto:()=>t=!0}),t||this.onDidAcceptEmitter.fire({inBackground:e})}registerQuickNavigation(){return re(this.ui.container,Se.KEY_UP,e=>{if(this.canSelectMany||!this._quickNavigate)return;const t=new Oi(e),i=t.keyCode;this._quickNavigate.keybindings.some(o=>{const a=o.getChords();return a.length>1?!1:a[0].shiftKey&&i===4?!(t.ctrlKey||t.altKey||t.metaKey):!!(a[0].altKey&&i===6||a[0].ctrlKey&&i===5||a[0].metaKey&&i===57)})&&(this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!1)),this._quickNavigate=void 0)})}update(){if(!this.visible)return;const e=this.keepScrollPosition?this.scrollTop:0,t=!!this.description,i={title:!!this.title||!!this.step||!!this.titleButtons.length,description:t,checkAll:this.canSelectMany&&!this._hideCheckAll,checkBox:this.canSelectMany,inputBox:!this._hideInput,progressBar:!this._hideInput||t,visibleCount:!0,count:this.canSelectMany&&!this._hideCountBadge,ok:this.ok==="default"?this.canSelectMany:this.ok,list:!0,message:!!this.validationMessage,customButton:this.customButton};this.ui.setVisibilities(i),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||"");let s=this.ariaLabel;!s&&i.inputBox&&(s=this.placeholder||L4.DEFAULT_ARIA_LABEL,this.title&&(s+=` - ${this.title}`)),this.ui.list.ariaLabel!==s&&(this.ui.list.ariaLabel=s??null),this.ui.list.matchOnDescription=this.matchOnDescription,this.ui.list.matchOnDetail=this.matchOnDetail,this.ui.list.matchOnLabel=this.matchOnLabel,this.ui.list.matchOnLabelMode=this.matchOnLabelMode,this.ui.list.sortByLabel=this.sortByLabel,this.itemsUpdated&&(this.itemsUpdated=!1,this._focusEventBufferer.bufferEvents(()=>{switch(this.ui.list.setElements(this.items),this.ui.list.shouldLoop=!this.canSelectMany,this.ui.list.filter(this.filterValue(this.ui.inputBox.value)),this._itemActivation){case cu.NONE:this._itemActivation=cu.FIRST;break;case cu.SECOND:this.ui.list.focus(ji.Second),this._itemActivation=cu.FIRST;break;case cu.LAST:this.ui.list.focus(ji.Last),this._itemActivation=cu.FIRST;break;default:this.trySelectFirst();break}})),this.ui.container.classList.contains("show-checkboxes")!==!!this.canSelectMany&&(this.canSelectMany?this.ui.list.clearFocus():this.trySelectFirst()),this.activeItemsUpdated&&(this.activeItemsUpdated=!1,this.activeItemsToConfirm=this._activeItems,this.ui.list.setFocusedElements(this.activeItems),this.activeItemsToConfirm===this._activeItems&&(this.activeItemsToConfirm=null)),this.selectedItemsUpdated&&(this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=this._selectedItems,this.canSelectMany?this.ui.list.setCheckedElements(this.selectedItems):this.ui.list.setSelectedElements(this.selectedItems),this.selectedItemsToConfirm===this._selectedItems&&(this.selectedItemsToConfirm=null)),this.ui.customButton.label=this.customLabel||"",this.ui.customButton.element.title=this.customHover||"",i.inputBox||(this.ui.list.domFocus(),this.canSelectMany&&this.ui.list.focus(ji.First)),this.keepScrollPosition&&(this.scrollTop=e)}focus(e){this.ui.list.focus(e),this.canSelectMany&&this.ui.list.domFocus()}accept(e){e&&!this._canAcceptInBackground||this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(e??!1))}};L4.DEFAULT_ARIA_LABEL=v("quickInputBox.ariaLabel","Type to narrow down results.");let oO=L4,grt=class extends rO{constructor(){super(...arguments),this._value="",this.valueSelectionUpdated=!0,this._password=!1,this.onDidValueChangeEmitter=this._register(new X),this.onDidAcceptEmitter=this._register(new X),this.type="inputBox",this.onDidChangeValue=this.onDidValueChangeEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event}get value(){return this._value}set value(e){this._value=e||"",this.update()}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update()}get password(){return this._password}set password(e){this._password=e,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange(e=>{e!==this.value&&(this._value=e,this.onDidValueChangeEmitter.fire(e))})),this.visibleDisposables.add(this.ui.onDidAccept(()=>this.onDidAcceptEmitter.fire())),this.valueSelectionUpdated=!0),super.show()}update(){if(!this.visible)return;this.ui.container.classList.remove("hidden-input");const e={title:!!this.title||!!this.step||!!this.titleButtons.length,description:!!this.description||!!this.step,inputBox:!0,message:!0,progressBar:!0};this.ui.setVisibilities(e),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||""),this.ui.inputBox.password!==this.password&&(this.ui.inputBox.password=this.password)}},E$=class extends OS{constructor(e,t){super("element",!1,i=>this.getOverrideOptions(i),e,t)}getOverrideOptions(e){const t=(Ns(e.content)?e.content.textContent??"":typeof e.content=="string"?e.content:e.content.value).includes(`
`);return{persistence:{hideOnKeyDown:!1},appearance:{showHoverHint:t,skipFadeInAnimation:!0}}}};E$=lrt([fce(0,Tt),fce(1,wf)],E$);ge.white.toString(),ge.white.toString();class aO extends ee{get onDidClick(){return this._onDidClick.event}constructor(e,t){super(),this._label="",this._onDidClick=this._register(new X),this._onDidEscape=this._register(new X),this.options=t,this._element=document.createElement("a"),this._element.classList.add("monaco-button"),this._element.tabIndex=0,this._element.setAttribute("role","button"),this._element.classList.toggle("secondary",!!t.secondary);const i=t.secondary?t.buttonSecondaryBackground:t.buttonBackground,s=t.secondary?t.buttonSecondaryForeground:t.buttonForeground;this._element.style.color=s||"",this._element.style.backgroundColor=i||"",t.supportShortLabel&&(this._labelShortElement=document.createElement("div"),this._labelShortElement.classList.add("monaco-button-label-short"),this._element.appendChild(this._labelShortElement),this._labelElement=document.createElement("div"),this._labelElement.classList.add("monaco-button-label"),this._element.appendChild(this._labelElement),this._element.classList.add("monaco-text-button-with-short-label")),typeof t.title=="string"&&this.setTitle(t.title),typeof t.ariaLabel=="string"&&this._element.setAttribute("aria-label",t.ariaLabel),e.appendChild(this._element),this._register(Br.addTarget(this._element)),[Se.CLICK,Hi.Tap].forEach(r=>{this._register(re(this._element,r,o=>{if(!this.enabled){$t.stop(o);return}this._onDidClick.fire(o)}))}),this._register(re(this._element,Se.KEY_DOWN,r=>{const o=new Oi(r);let a=!1;this.enabled&&(o.equals(3)||o.equals(10))?(this._onDidClick.fire(r),a=!0):o.equals(9)&&(this._onDidEscape.fire(r),this._element.blur(),a=!0),a&&$t.stop(o,!0)})),this._register(re(this._element,Se.MOUSE_OVER,r=>{this._element.classList.contains("disabled")||this.updateBackground(!0)})),this._register(re(this._element,Se.MOUSE_OUT,r=>{this.updateBackground(!1)})),this.focusTracker=this._register(Hu(this._element)),this._register(this.focusTracker.onDidFocus(()=>{this.enabled&&this.updateBackground(!0)})),this._register(this.focusTracker.onDidBlur(()=>{this.enabled&&this.updateBackground(!1)}))}dispose(){super.dispose(),this._element.remove()}getContentElements(e){const t=[];for(let i of Ym(e))if(typeof i=="string"){if(i=i.trim(),i==="")continue;const s=document.createElement("span");s.textContent=i,t.push(s)}else t.push(i);return t}updateBackground(e){let t;this.options.secondary?t=e?this.options.buttonSecondaryHoverBackground:this.options.buttonSecondaryBackground:t=e?this.options.buttonHoverBackground:this.options.buttonBackground,t&&(this._element.style.backgroundColor=t)}get element(){return this._element}set label(e){var s;if(this._label===e||Mu(this._label)&&Mu(e)&&jJe(this._label,e))return;this._element.classList.add("monaco-text-button");const t=this.options.supportShortLabel?this._labelElement:this._element;if(Mu(e)){const r=_B(e,{inline:!0});r.dispose();const o=(s=r.element.querySelector("p"))==null?void 0:s.innerHTML;if(o){const a=T0e(o,{ADD_TAGS:["b","i","u","code","span"],ALLOWED_ATTR:["class"],RETURN_TRUSTED_TYPE:!0});t.innerHTML=a}else sr(t)}else this.options.supportIcons?sr(t,...this.getContentElements(e)):t.textContent=e;let i="";typeof this.options.title=="string"?i=this.options.title:this.options.title&&(i=iet(e)),this.setTitle(i),typeof this.options.ariaLabel=="string"?this._element.setAttribute("aria-label",this.options.ariaLabel):this.options.ariaLabel&&this._element.setAttribute("aria-label",i),this._label=e}get label(){return this._label}set icon(e){this._element.classList.add(...ot.asClassNameArray(e))}set enabled(e){e?(this._element.classList.remove("disabled"),this._element.setAttribute("aria-disabled",String(!1)),this._element.tabIndex=0):(this._element.classList.add("disabled"),this._element.setAttribute("aria-disabled",String(!0)))}get enabled(){return!this._element.classList.contains("disabled")}setTitle(e){!this._hover&&e!==""?this._hover=this._register(Gu().setupManagedHover(this.options.hoverDelegate??Vo("mouse"),this._element,e)):this._hover&&this._hover.update(e)}}class I${constructor(e,t,i){this.options=t,this.styles=i,this.count=0,this.element=_e(e,xe(".monaco-count-badge")),this.countFormat=this.options.countFormat||"{0}",this.titleFormat=this.options.titleFormat||"",this.setCount(this.options.count||0)}setCount(e){this.count=e,this.render()}setTitleFormat(e){this.titleFormat=e,this.render()}render(){this.element.textContent=a0(this.countFormat,this.count),this.element.title=a0(this.titleFormat,this.count),this.element.style.backgroundColor=this.styles.badgeBackground??"",this.element.style.color=this.styles.badgeForeground??"",this.styles.badgeBorder&&(this.element.style.border=`1px solid ${this.styles.badgeBorder}`)}}const gce="done",pce="active",R8="infinite",A8="infinite-long-running",mce="discrete",k4=class k4 extends ee{constructor(e,t){super(),this.progressSignal=this._register(new As),this.workedVal=0,this.showDelayedScheduler=this._register(new yi(()=>za(this.element),0)),this.longRunningScheduler=this._register(new yi(()=>this.infiniteLongRunning(),k4.LONG_RUNNING_INFINITE_THRESHOLD)),this.create(e,t)}create(e,t){this.element=document.createElement("div"),this.element.classList.add("monaco-progress-container"),this.element.setAttribute("role","progressbar"),this.element.setAttribute("aria-valuemin","0"),e.appendChild(this.element),this.bit=document.createElement("div"),this.bit.classList.add("progress-bit"),this.bit.style.backgroundColor=(t==null?void 0:t.progressBarBackground)||"#0E70C0",this.element.appendChild(this.bit)}off(){this.bit.style.width="inherit",this.bit.style.opacity="1",this.element.classList.remove(pce,R8,A8,mce),this.workedVal=0,this.totalWork=void 0,this.longRunningScheduler.cancel(),this.progressSignal.clear()}stop(){return this.doDone(!1)}doDone(e){return this.element.classList.add(gce),this.element.classList.contains(R8)?(this.bit.style.opacity="0",e?setTimeout(()=>this.off(),200):this.off()):(this.bit.style.width="inherit",e?setTimeout(()=>this.off(),200):this.off()),this}infinite(){return this.bit.style.width="2%",this.bit.style.opacity="1",this.element.classList.remove(mce,gce,A8),this.element.classList.add(pce,R8),this.longRunningScheduler.schedule(),this}infiniteLongRunning(){this.element.classList.add(A8)}getContainer(){return this.element}};k4.LONG_RUNNING_INFINITE_THRESHOLD=1e4;let D$=k4;const prt=v("caseDescription","Match Case"),mrt=v("wordsDescription","Match Whole Word"),_rt=v("regexDescription","Use Regular Expression");class Mye extends Hx{constructor(e){super({icon:ye.caseSensitive,title:prt+e.appendTitle,isChecked:e.isChecked,hoverDelegate:e.hoverDelegate??Vo("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class Pye extends Hx{constructor(e){super({icon:ye.wholeWord,title:mrt+e.appendTitle,isChecked:e.isChecked,hoverDelegate:e.hoverDelegate??Vo("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class Oye extends Hx{constructor(e){super({icon:ye.regex,title:_rt+e.appendTitle,isChecked:e.isChecked,hoverDelegate:e.hoverDelegate??Vo("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class vrt{constructor(e,t=0,i=e.length,s=t-1){this.items=e,this.start=t,this.end=i,this.index=s}current(){return this.index===this.start-1||this.index===this.end?null:this.items[this.index]}next(){return this.index=Math.min(this.index+1,this.end),this.current()}previous(){return this.index=Math.max(this.index-1,this.start-1),this.current()}first(){return this.index=this.start,this.current()}last(){return this.index=this.end-1,this.current()}}class brt{constructor(e=[],t=10){this._initialize(e),this._limit=t,this._onChange()}getHistory(){return this._elements}add(e){this._history.delete(e),this._history.add(e),this._onChange()}next(){return this._navigator.next()}previous(){return this._currentPosition()!==0?this._navigator.previous():null}current(){return this._navigator.current()}first(){return this._navigator.first()}last(){return this._navigator.last()}isLast(){return this._currentPosition()>=this._elements.length-1}isNowhere(){return this._navigator.current()===null}has(e){return this._history.has(e)}_onChange(){this._reduceToLimit();const e=this._elements;this._navigator=new vrt(e,0,e.length,e.length)}_reduceToLimit(){const e=this._elements;e.length>this._limit&&this._initialize(e.slice(e.length-this._limit))}_currentPosition(){const e=this._navigator.current();return e?this._elements.indexOf(e):-1}_initialize(e){this._history=new Set;for(const t of e)this._history.add(t)}get _elements(){const e=[];return this._history.forEach(t=>e.push(t)),e}}const UL=xe;class wrt extends Xl{constructor(e,t,i){super(),this.state="idle",this.maxHeight=Number.POSITIVE_INFINITY,this._onDidChange=this._register(new X),this.onDidChange=this._onDidChange.event,this._onDidHeightChange=this._register(new X),this.onDidHeightChange=this._onDidHeightChange.event,this.contextViewProvider=t,this.options=i,this.message=null,this.placeholder=this.options.placeholder||"",this.tooltip=this.options.tooltip??(this.placeholder||""),this.ariaLabel=this.options.ariaLabel||"",this.options.validationOptions&&(this.validation=this.options.validationOptions.validation),this.element=_e(e,UL(".monaco-inputbox.idle"));const s=this.options.flexibleHeight?"textarea":"input",r=_e(this.element,UL(".ibwrapper"));if(this.input=_e(r,UL(s+".input.empty")),this.input.setAttribute("autocorrect","off"),this.input.setAttribute("autocapitalize","off"),this.input.setAttribute("spellcheck","false"),this.onfocus(this.input,()=>this.element.classList.add("synthetic-focus")),this.onblur(this.input,()=>this.element.classList.remove("synthetic-focus")),this.options.flexibleHeight){this.maxHeight=typeof this.options.flexibleMaxHeight=="number"?this.options.flexibleMaxHeight:Number.POSITIVE_INFINITY,this.mirror=_e(r,UL("div.mirror")),this.mirror.innerText="",this.scrollableElement=new l1e(this.element,{vertical:1}),this.options.flexibleWidth&&(this.input.setAttribute("wrap","off"),this.mirror.style.whiteSpace="pre",this.mirror.style.wordWrap="initial"),_e(e,this.scrollableElement.getDomNode()),this._register(this.scrollableElement),this._register(this.scrollableElement.onScroll(l=>this.input.scrollTop=l.scrollTop));const o=this._register(new zt(e.ownerDocument,"selectionchange")),a=Ee.filter(o.event,()=>{const l=e.ownerDocument.getSelection();return(l==null?void 0:l.anchorNode)===r});this._register(a(this.updateScrollDimensions,this)),this._register(this.onDidHeightChange(this.updateScrollDimensions,this))}else this.input.type=this.options.type||"text",this.input.setAttribute("wrap","off");this.ariaLabel&&this.input.setAttribute("aria-label",this.ariaLabel),this.placeholder&&!this.options.showPlaceholderOnFocus&&this.setPlaceHolder(this.placeholder),this.tooltip&&this.setTooltip(this.tooltip),this.oninput(this.input,()=>this.onValueChange()),this.onblur(this.input,()=>this.onBlur()),this.onfocus(this.input,()=>this.onFocus()),this._register(this.ignoreGesture(this.input)),setTimeout(()=>this.updateMirror(),0),this.options.actions&&(this.actionbar=this._register(new Ul(this.element)),this.actionbar.push(this.options.actions,{icon:!0,label:!1})),this.applyStyles()}onBlur(){this._hideMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder","")}onFocus(){this._showMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder",this.placeholder||"")}setPlaceHolder(e){this.placeholder=e,this.input.setAttribute("placeholder",e)}setTooltip(e){this.tooltip=e,this.hover?this.hover.update(e):this.hover=this._register(Gu().setupManagedHover(Vo("mouse"),this.input,e))}get inputElement(){return this.input}get value(){return this.input.value}set value(e){this.input.value!==e&&(this.input.value=e,this.onValueChange())}get height(){return typeof this.cachedHeight=="number"?this.cachedHeight:_g(this.element)}focus(){this.input.focus()}blur(){this.input.blur()}hasFocus(){return z3(this.input)}select(e=null){this.input.select(),e&&(this.input.setSelectionRange(e.start,e.end),e.end===this.input.value.length&&(this.input.scrollLeft=this.input.scrollWidth))}isSelectionAtEnd(){return this.input.selectionEnd===this.input.value.length&&this.input.selectionStart===this.input.selectionEnd}getSelection(){const e=this.input.selectionStart;if(e===null)return null;const t=this.input.selectionEnd??e;return{start:e,end:t}}enable(){this.input.removeAttribute("disabled")}disable(){this.blur(),this.input.disabled=!0,this._hideMessage()}set paddingRight(e){this.input.style.width=`calc(100% - ${e}px)`,this.mirror&&(this.mirror.style.paddingRight=e+"px")}updateScrollDimensions(){if(typeof this.cachedContentHeight!="number"||typeof this.cachedHeight!="number"||!this.scrollableElement)return;const e=this.cachedContentHeight,t=this.cachedHeight,i=this.input.scrollTop;this.scrollableElement.setScrollDimensions({scrollHeight:e,height:t}),this.scrollableElement.setScrollPosition({scrollTop:i})}showMessage(e,t){if(this.state==="open"&&Ga(this.message,e))return;this.message=e,this.element.classList.remove("idle"),this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add(this.classForType(e.type));const i=this.stylesForType(this.message.type);this.element.style.border=`1px solid ${Rg(i.border,"transparent")}`,this.message.content&&(this.hasFocus()||t)&&this._showMessage()}hideMessage(){this.message=null,this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add("idle"),this._hideMessage(),this.applyStyles()}validate(){let e=null;return this.validation&&(e=this.validation(this.value),e?(this.inputElement.setAttribute("aria-invalid","true"),this.showMessage(e)):this.inputElement.hasAttribute("aria-invalid")&&(this.inputElement.removeAttribute("aria-invalid"),this.hideMessage())),e==null?void 0:e.type}stylesForType(e){const t=this.options.inputBoxStyles;switch(e){case 1:return{border:t.inputValidationInfoBorder,background:t.inputValidationInfoBackground,foreground:t.inputValidationInfoForeground};case 2:return{border:t.inputValidationWarningBorder,background:t.inputValidationWarningBackground,foreground:t.inputValidationWarningForeground};default:return{border:t.inputValidationErrorBorder,background:t.inputValidationErrorBackground,foreground:t.inputValidationErrorForeground}}}classForType(e){switch(e){case 1:return"info";case 2:return"warning";default:return"error"}}_showMessage(){if(!this.contextViewProvider||!this.message)return;let e;const t=()=>e.style.width=Pa(this.element)+"px";this.contextViewProvider.showContextView({getAnchor:()=>this.element,anchorAlignment:1,render:s=>{if(!this.message)return null;e=_e(s,UL(".monaco-inputbox-container")),t();const r={inline:!0,className:"monaco-inputbox-message"},o=this.message.formatContent?cJe(this.message.content,r):lJe(this.message.content,r);o.classList.add(this.classForType(this.message.type));const a=this.stylesForType(this.message.type);return o.style.backgroundColor=a.background??"",o.style.color=a.foreground??"",o.style.border=a.border?`1px solid ${a.border}`:"",_e(e,o),null},onHide:()=>{this.state="closed"},layout:t});let i;this.message.type===3?i=v("alertErrorMessage","Error: {0}",this.message.content):this.message.type===2?i=v("alertWarningMessage","Warning: {0}",this.message.content):i=v("alertInfoMessage","Info: {0}",this.message.content),Bo(i),this.state="open"}_hideMessage(){this.contextViewProvider&&(this.state==="open"&&this.contextViewProvider.hideContextView(),this.state="idle")}onValueChange(){this._onDidChange.fire(this.value),this.validate(),this.updateMirror(),this.input.classList.toggle("empty",!this.value),this.state==="open"&&this.contextViewProvider&&this.contextViewProvider.layout()}updateMirror(){if(!this.mirror)return;const e=this.value,i=e.charCodeAt(e.length-1)===10?" ":"";(e+i).replace(/\u000c/g,"")?this.mirror.textContent=e+i:this.mirror.innerText="",this.layout()}applyStyles(){const e=this.options.inputBoxStyles,t=e.inputBackground??"",i=e.inputForeground??"",s=e.inputBorder??"";this.element.style.backgroundColor=t,this.element.style.color=i,this.input.style.backgroundColor="inherit",this.input.style.color=i,this.element.style.border=`1px solid ${Rg(s,"transparent")}`}layout(){if(!this.mirror)return;const e=this.cachedContentHeight;this.cachedContentHeight=_g(this.mirror),e!==this.cachedContentHeight&&(this.cachedHeight=Math.min(this.cachedContentHeight,this.maxHeight),this.input.style.height=this.cachedHeight+"px",this._onDidHeightChange.fire(this.cachedContentHeight))}insertAtCursor(e){const t=this.inputElement,i=t.selectionStart,s=t.selectionEnd,r=t.value;i!==null&&s!==null&&(this.value=r.substr(0,i)+e+r.substr(s),t.setSelectionRange(i+1,i+1),this.layout())}dispose(){var e;this._hideMessage(),this.message=null,(e=this.actionbar)==null||e.dispose(),super.dispose()}}class Fye extends wrt{constructor(e,t,i){const s=v({key:"history.inputbox.hint.suffix.noparens",comment:['Text is the suffix of an input field placeholder coming after the action the input field performs, this will be used when the input field ends in a closing parenthesis ")", for example "Filter (e.g. text, !exclude)". The character inserted into the final string is  to represent the up and down arrow keys.']}," or {0} for history",""),r=v({key:"history.inputbox.hint.suffix.inparens",comment:['Text is the suffix of an input field placeholder coming after the action the input field performs, this will be used when the input field does NOT end in a closing parenthesis (eg. "Find"). The character inserted into the final string is  to represent the up and down arrow keys.']}," ({0} for history)","");super(e,t,i),this._onDidFocus=this._register(new X),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new X),this.onDidBlur=this._onDidBlur.event,this.history=new brt(i.history,100);const o=()=>{if(i.showHistoryHint&&i.showHistoryHint()&&!this.placeholder.endsWith(s)&&!this.placeholder.endsWith(r)&&this.history.getHistory().length){const a=this.placeholder.endsWith(")")?s:r,l=this.placeholder+a;i.showPlaceholderOnFocus&&!z3(this.input)?this.placeholder=l:this.setPlaceHolder(l)}};this.observer=new MutationObserver((a,l)=>{a.forEach(c=>{c.target.textContent||o()})}),this.observer.observe(this.input,{attributeFilter:["class"]}),this.onfocus(this.input,()=>o()),this.onblur(this.input,()=>{const a=l=>{if(this.placeholder.endsWith(l)){const c=this.placeholder.slice(0,this.placeholder.length-l.length);return i.showPlaceholderOnFocus?this.placeholder=c:this.setPlaceHolder(c),!0}else return!1};a(r)||a(s)})}dispose(){super.dispose(),this.observer&&(this.observer.disconnect(),this.observer=void 0)}addToHistory(e){this.value&&(e||this.value!==this.getCurrentValue())&&this.history.add(this.value)}isAtLastInHistory(){return this.history.isLast()}isNowhereInHistory(){return this.history.isNowhere()}showNextValue(){this.history.has(this.value)||this.addToHistory();let e=this.getNextValue();e&&(e=e===this.value?this.getNextValue():e),this.value=e??"",lf(this.value?this.value:v("clearedInput","Cleared Input"))}showPreviousValue(){this.history.has(this.value)||this.addToHistory();let e=this.getPreviousValue();e&&(e=e===this.value?this.getPreviousValue():e),e&&(this.value=e,lf(this.value))}setPlaceHolder(e){super.setPlaceHolder(e),this.setTooltip(e)}onBlur(){super.onBlur(),this._onDidBlur.fire()}onFocus(){super.onFocus(),this._onDidFocus.fire()}getCurrentValue(){let e=this.history.current();return e||(e=this.history.last(),this.history.next()),e}getPreviousValue(){return this.history.previous()||this.history.first()}getNextValue(){return this.history.next()}}const Crt=v("defaultLabel","input");class Bye extends Xl{constructor(e,t,i){super(),this.fixFocusOnOptionClickEnabled=!0,this.imeSessionInProgress=!1,this.additionalTogglesDisposables=this._register(new As),this.additionalToggles=[],this._onDidOptionChange=this._register(new X),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new X),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new X),this.onMouseDown=this._onMouseDown.event,this._onInput=this._register(new X),this._onKeyUp=this._register(new X),this._onCaseSensitiveKeyDown=this._register(new X),this.onCaseSensitiveKeyDown=this._onCaseSensitiveKeyDown.event,this._onRegexKeyDown=this._register(new X),this.onRegexKeyDown=this._onRegexKeyDown.event,this._lastHighlightFindOptions=0,this.placeholder=i.placeholder||"",this.validation=i.validation,this.label=i.label||Crt,this.showCommonFindToggles=!!i.showCommonFindToggles;const s=i.appendCaseSensitiveLabel||"",r=i.appendWholeWordsLabel||"",o=i.appendRegexLabel||"",a=i.history||[],l=!!i.flexibleHeight,c=!!i.flexibleWidth,d=i.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new Fye(this.domNode,t,{placeholder:this.placeholder||"",ariaLabel:this.label||"",validationOptions:{validation:this.validation},history:a,showHistoryHint:i.showHistoryHint,flexibleHeight:l,flexibleWidth:c,flexibleMaxHeight:d,inputBoxStyles:i.inputBoxStyles}));const u=this._register(US());if(this.showCommonFindToggles){this.regex=this._register(new Oye({appendTitle:o,isChecked:!1,hoverDelegate:u,...i.toggleStyles})),this._register(this.regex.onChange(f=>{this._onDidOptionChange.fire(f),!f&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.regex.onKeyDown(f=>{this._onRegexKeyDown.fire(f)})),this.wholeWords=this._register(new Pye({appendTitle:r,isChecked:!1,hoverDelegate:u,...i.toggleStyles})),this._register(this.wholeWords.onChange(f=>{this._onDidOptionChange.fire(f),!f&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this.caseSensitive=this._register(new Mye({appendTitle:s,isChecked:!1,hoverDelegate:u,...i.toggleStyles})),this._register(this.caseSensitive.onChange(f=>{this._onDidOptionChange.fire(f),!f&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.caseSensitive.onKeyDown(f=>{this._onCaseSensitiveKeyDown.fire(f)}));const h=[this.caseSensitive.domNode,this.wholeWords.domNode,this.regex.domNode];this.onkeydown(this.domNode,f=>{if(f.equals(15)||f.equals(17)||f.equals(9)){const g=h.indexOf(this.domNode.ownerDocument.activeElement);if(g>=0){let p=-1;f.equals(17)?p=(g+1)%h.length:f.equals(15)&&(g===0?p=h.length-1:p=g-1),f.equals(9)?(h[g].blur(),this.inputBox.focus()):p>=0&&h[p].focus(),$t.stop(f,!0)}}})}this.controls=document.createElement("div"),this.controls.className="controls",this.controls.style.display=this.showCommonFindToggles?"":"none",this.caseSensitive&&this.controls.append(this.caseSensitive.domNode),this.wholeWords&&this.controls.appendChild(this.wholeWords.domNode),this.regex&&this.controls.appendChild(this.regex.domNode),this.setAdditionalToggles(i==null?void 0:i.additionalToggles),this.controls&&this.domNode.appendChild(this.controls),e==null||e.appendChild(this.domNode),this._register(re(this.inputBox.inputElement,"compositionstart",h=>{this.imeSessionInProgress=!0})),this._register(re(this.inputBox.inputElement,"compositionend",h=>{this.imeSessionInProgress=!1,this._onInput.fire()})),this.onkeydown(this.inputBox.inputElement,h=>this._onKeyDown.fire(h)),this.onkeyup(this.inputBox.inputElement,h=>this._onKeyUp.fire(h)),this.oninput(this.inputBox.inputElement,h=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,h=>this._onMouseDown.fire(h))}get onDidChange(){return this.inputBox.onDidChange}layout(e){this.inputBox.layout(),this.updateInputBoxPadding(e.collapsedFindWidget)}enable(){var e,t,i;this.domNode.classList.remove("disabled"),this.inputBox.enable(),(e=this.regex)==null||e.enable(),(t=this.wholeWords)==null||t.enable(),(i=this.caseSensitive)==null||i.enable();for(const s of this.additionalToggles)s.enable()}disable(){var e,t,i;this.domNode.classList.add("disabled"),this.inputBox.disable(),(e=this.regex)==null||e.disable(),(t=this.wholeWords)==null||t.disable(),(i=this.caseSensitive)==null||i.disable();for(const s of this.additionalToggles)s.disable()}setFocusInputOnOptionClick(e){this.fixFocusOnOptionClickEnabled=e}setEnabled(e){e?this.enable():this.disable()}setAdditionalToggles(e){for(const t of this.additionalToggles)t.domNode.remove();this.additionalToggles=[],this.additionalTogglesDisposables.value=new ue;for(const t of e??[])this.additionalTogglesDisposables.value.add(t),this.controls.appendChild(t.domNode),this.additionalTogglesDisposables.value.add(t.onChange(i=>{this._onDidOptionChange.fire(i),!i&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus()})),this.additionalToggles.push(t);this.additionalToggles.length>0&&(this.controls.style.display=""),this.updateInputBoxPadding()}updateInputBoxPadding(e=!1){var t,i,s;e?this.inputBox.paddingRight=0:this.inputBox.paddingRight=(((t=this.caseSensitive)==null?void 0:t.width())??0)+(((i=this.wholeWords)==null?void 0:i.width())??0)+(((s=this.regex)==null?void 0:s.width())??0)+this.additionalToggles.reduce((r,o)=>r+o.width(),0)}getValue(){return this.inputBox.value}setValue(e){this.inputBox.value!==e&&(this.inputBox.value=e)}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getCaseSensitive(){var e;return((e=this.caseSensitive)==null?void 0:e.checked)??!1}setCaseSensitive(e){this.caseSensitive&&(this.caseSensitive.checked=e)}getWholeWords(){var e;return((e=this.wholeWords)==null?void 0:e.checked)??!1}setWholeWords(e){this.wholeWords&&(this.wholeWords.checked=e)}getRegex(){var e;return((e=this.regex)==null?void 0:e.checked)??!1}setRegex(e){this.regex&&(this.regex.checked=e,this.validate())}focusOnCaseSensitive(){var e;(e=this.caseSensitive)==null||e.focus()}highlightFindOptions(){this.domNode.classList.remove("highlight-"+this._lastHighlightFindOptions),this._lastHighlightFindOptions=1-this._lastHighlightFindOptions,this.domNode.classList.add("highlight-"+this._lastHighlightFindOptions)}validate(){this.inputBox.validate()}showMessage(e){this.inputBox.showMessage(e)}clearMessage(){this.inputBox.hideMessage()}}const yrt=xe;class Srt extends ee{constructor(e,t,i){super(),this.parent=e,this.onKeyDown=r=>Cn(this.findInput.inputBox.inputElement,Se.KEY_DOWN,r),this.onDidChange=r=>this.findInput.onDidChange(r),this.container=_e(this.parent,yrt(".quick-input-box")),this.findInput=this._register(new Bye(this.container,void 0,{label:"",inputBoxStyles:t,toggleStyles:i}));const s=this.findInput.inputBox.inputElement;s.role="combobox",s.ariaHasPopup="menu",s.ariaAutoComplete="list",s.ariaExpanded="true"}get value(){return this.findInput.getValue()}set value(e){this.findInput.setValue(e)}select(e=null){this.findInput.inputBox.select(e)}getSelection(){return this.findInput.inputBox.getSelection()}isSelectionAtEnd(){return this.findInput.inputBox.isSelectionAtEnd()}get placeholder(){return this.findInput.inputBox.inputElement.getAttribute("placeholder")||""}set placeholder(e){this.findInput.inputBox.setPlaceHolder(e)}get password(){return this.findInput.inputBox.inputElement.type==="password"}set password(e){this.findInput.inputBox.inputElement.type=e?"password":"text"}set enabled(e){this.findInput.inputBox.inputElement.toggleAttribute("readonly",!e)}set toggles(e){this.findInput.setAdditionalToggles(e)}setAttribute(e,t){this.findInput.inputBox.inputElement.setAttribute(e,t)}showDecoration(e){e===Un.Ignore?this.findInput.clearMessage():this.findInput.showMessage({type:e===Un.Info?1:e===Un.Warning?2:3,content:""})}stylesForType(e){return this.findInput.inputBox.stylesForType(e===Un.Info?1:e===Un.Warning?2:3)}setFocus(){this.findInput.focus()}layout(){this.findInput.inputBox.layout()}}class xrt{get templateId(){return this.renderer.templateId}constructor(e,t){this.renderer=e,this.modelProvider=t}renderTemplate(e){return{data:this.renderer.renderTemplate(e),disposable:ee.None}}renderElement(e,t,i,s){var l;if((l=i.disposable)==null||l.dispose(),!i.data)return;const r=this.modelProvider();if(r.isResolved(e))return this.renderer.renderElement(r.get(e),e,i.data,s);const o=new mn,a=r.resolve(e,o.token);i.disposable={dispose:()=>o.cancel()},this.renderer.renderPlaceholder(e,i.data),a.then(c=>this.renderer.renderElement(c,e,i.data,s))}disposeTemplate(e){e.disposable&&(e.disposable.dispose(),e.disposable=void 0),e.data&&(this.renderer.disposeTemplate(e.data),e.data=void 0)}}class Lrt{constructor(e,t){this.modelProvider=e,this.accessibilityProvider=t}getWidgetAriaLabel(){return this.accessibilityProvider.getWidgetAriaLabel()}getAriaLabel(e){const t=this.modelProvider();return t.isResolved(e)?this.accessibilityProvider.getAriaLabel(t.get(e)):null}}function krt(n,e){return{...e,accessibilityProvider:e.accessibilityProvider&&new Lrt(n,e.accessibilityProvider)}}class Ert{constructor(e,t,i,s,r={}){const o=()=>this.model,a=s.map(l=>new xrt(l,o));this.list=new Ql(e,t,i,a,krt(o,r))}updateOptions(e){this.list.updateOptions(e)}getHTMLElement(){return this.list.getHTMLElement()}get onDidFocus(){return this.list.onDidFocus}get widget(){return this.list}get onDidDispose(){return this.list.onDidDispose}get onMouseDblClick(){return Ee.map(this.list.onMouseDblClick,({element:e,index:t,browserEvent:i})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:i}))}get onPointer(){return Ee.map(this.list.onPointer,({element:e,index:t,browserEvent:i})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:i}))}get onDidChangeSelection(){return Ee.map(this.list.onDidChangeSelection,({elements:e,indexes:t,browserEvent:i})=>({elements:e.map(s=>this._model.get(s)),indexes:t,browserEvent:i}))}get model(){return this._model}set model(e){this._model=e,this.list.splice(0,this.list.length,ta(e.length))}getFocus(){return this.list.getFocus()}getSelection(){return this.list.getSelection()}getSelectedElements(){return this.getSelection().map(e=>this.model.get(e))}style(e){this.list.style(e)}dispose(){this.list.dispose()}}var Vx=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const Irt=!1;var lO;(function(n){n.North="north",n.South="south",n.East="east",n.West="west"})(lO||(lO={}));let Drt=4;const Nrt=new X;let Trt=300;const Rrt=new X;class SQ{constructor(e){this.el=e,this.disposables=new ue}get onPointerMove(){return this.disposables.add(new zt(nt(this.el),"mousemove")).event}get onPointerUp(){return this.disposables.add(new zt(nt(this.el),"mouseup")).event}dispose(){this.disposables.dispose()}}Vx([Kn],SQ.prototype,"onPointerMove",null);Vx([Kn],SQ.prototype,"onPointerUp",null);class xQ{get onPointerMove(){return this.disposables.add(new zt(this.el,Hi.Change)).event}get onPointerUp(){return this.disposables.add(new zt(this.el,Hi.End)).event}constructor(e){this.el=e,this.disposables=new ue}dispose(){this.disposables.dispose()}}Vx([Kn],xQ.prototype,"onPointerMove",null);Vx([Kn],xQ.prototype,"onPointerUp",null);class cO{get onPointerMove(){return this.factory.onPointerMove}get onPointerUp(){return this.factory.onPointerUp}constructor(e){this.factory=e}dispose(){}}Vx([Kn],cO.prototype,"onPointerMove",null);Vx([Kn],cO.prototype,"onPointerUp",null);const _ce="pointer-events-disabled";class Dr extends ee{get state(){return this._state}get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}set state(e){this._state!==e&&(this.el.classList.toggle("disabled",e===0),this.el.classList.toggle("minimum",e===1),this.el.classList.toggle("maximum",e===2),this._state=e,this.onDidEnablementChange.fire(e))}set orthogonalStartSash(e){if(this._orthogonalStartSash!==e){if(this.orthogonalStartDragHandleDisposables.clear(),this.orthogonalStartSashDisposables.clear(),e){const t=i=>{this.orthogonalStartDragHandleDisposables.clear(),i!==0&&(this._orthogonalStartDragHandle=_e(this.el,xe(".orthogonal-drag-handle.start")),this.orthogonalStartDragHandleDisposables.add(Ye(()=>this._orthogonalStartDragHandle.remove())),this.orthogonalStartDragHandleDisposables.add(new zt(this._orthogonalStartDragHandle,"mouseenter")).event(()=>Dr.onMouseEnter(e),void 0,this.orthogonalStartDragHandleDisposables),this.orthogonalStartDragHandleDisposables.add(new zt(this._orthogonalStartDragHandle,"mouseleave")).event(()=>Dr.onMouseLeave(e),void 0,this.orthogonalStartDragHandleDisposables))};this.orthogonalStartSashDisposables.add(e.onDidEnablementChange.event(t,this)),t(e.state)}this._orthogonalStartSash=e}}set orthogonalEndSash(e){if(this._orthogonalEndSash!==e){if(this.orthogonalEndDragHandleDisposables.clear(),this.orthogonalEndSashDisposables.clear(),e){const t=i=>{this.orthogonalEndDragHandleDisposables.clear(),i!==0&&(this._orthogonalEndDragHandle=_e(this.el,xe(".orthogonal-drag-handle.end")),this.orthogonalEndDragHandleDisposables.add(Ye(()=>this._orthogonalEndDragHandle.remove())),this.orthogonalEndDragHandleDisposables.add(new zt(this._orthogonalEndDragHandle,"mouseenter")).event(()=>Dr.onMouseEnter(e),void 0,this.orthogonalEndDragHandleDisposables),this.orthogonalEndDragHandleDisposables.add(new zt(this._orthogonalEndDragHandle,"mouseleave")).event(()=>Dr.onMouseLeave(e),void 0,this.orthogonalEndDragHandleDisposables))};this.orthogonalEndSashDisposables.add(e.onDidEnablementChange.event(t,this)),t(e.state)}this._orthogonalEndSash=e}}constructor(e,t,i){super(),this.hoverDelay=Trt,this.hoverDelayer=this._register(new Rc(this.hoverDelay)),this._state=3,this.onDidEnablementChange=this._register(new X),this._onDidStart=this._register(new X),this._onDidChange=this._register(new X),this._onDidReset=this._register(new X),this._onDidEnd=this._register(new X),this.orthogonalStartSashDisposables=this._register(new ue),this.orthogonalStartDragHandleDisposables=this._register(new ue),this.orthogonalEndSashDisposables=this._register(new ue),this.orthogonalEndDragHandleDisposables=this._register(new ue),this.onDidStart=this._onDidStart.event,this.onDidChange=this._onDidChange.event,this.onDidReset=this._onDidReset.event,this.onDidEnd=this._onDidEnd.event,this.linkedSash=void 0,this.el=_e(e,xe(".monaco-sash")),i.orthogonalEdge&&this.el.classList.add(`orthogonal-edge-${i.orthogonalEdge}`),Bt&&this.el.classList.add("mac");const s=this._register(new zt(this.el,"mousedown")).event;this._register(s(u=>this.onPointerStart(u,new SQ(e)),this));const r=this._register(new zt(this.el,"dblclick")).event;this._register(r(this.onPointerDoublePress,this));const o=this._register(new zt(this.el,"mouseenter")).event;this._register(o(()=>Dr.onMouseEnter(this)));const a=this._register(new zt(this.el,"mouseleave")).event;this._register(a(()=>Dr.onMouseLeave(this))),this._register(Br.addTarget(this.el));const l=this._register(new zt(this.el,Hi.Start)).event;this._register(l(u=>this.onPointerStart(u,new xQ(this.el)),this));const c=this._register(new zt(this.el,Hi.Tap)).event;let d;this._register(c(u=>{if(d){clearTimeout(d),d=void 0,this.onPointerDoublePress(u);return}clearTimeout(d),d=setTimeout(()=>d=void 0,250)},this)),typeof i.size=="number"?(this.size=i.size,i.orientation===0?this.el.style.width=`${this.size}px`:this.el.style.height=`${this.size}px`):(this.size=Drt,this._register(Nrt.event(u=>{this.size=u,this.layout()}))),this._register(Rrt.event(u=>this.hoverDelay=u)),this.layoutProvider=t,this.orthogonalStartSash=i.orthogonalStartSash,this.orthogonalEndSash=i.orthogonalEndSash,this.orientation=i.orientation||0,this.orientation===1?(this.el.classList.add("horizontal"),this.el.classList.remove("vertical")):(this.el.classList.remove("horizontal"),this.el.classList.add("vertical")),this.el.classList.toggle("debug",Irt),this.layout()}onPointerStart(e,t){$t.stop(e);let i=!1;if(!e.__orthogonalSashEvent){const g=this.getOrthogonalSash(e);g&&(i=!0,e.__orthogonalSashEvent=!0,g.onPointerStart(e,new cO(t)))}if(this.linkedSash&&!e.__linkedSashEvent&&(e.__linkedSashEvent=!0,this.linkedSash.onPointerStart(e,new cO(t))),!this.state)return;const s=this.el.ownerDocument.getElementsByTagName("iframe");for(const g of s)g.classList.add(_ce);const r=e.pageX,o=e.pageY,a=e.altKey,l={startX:r,currentX:r,startY:o,currentY:o,altKey:a};this.el.classList.add("active"),this._onDidStart.fire(l);const c=jl(this.el),d=()=>{let g="";i?g="all-scroll":this.orientation===1?this.state===1?g="s-resize":this.state===2?g="n-resize":g=Bt?"row-resize":"ns-resize":this.state===1?g="e-resize":this.state===2?g="w-resize":g=Bt?"col-resize":"ew-resize",c.textContent=`* { cursor: ${g} !important; }`},u=new ue;d(),i||this.onDidEnablementChange.event(d,null,u);const h=g=>{$t.stop(g,!1);const p={startX:r,currentX:g.pageX,startY:o,currentY:g.pageY,altKey:a};this._onDidChange.fire(p)},f=g=>{$t.stop(g,!1),c.remove(),this.el.classList.remove("active"),this._onDidEnd.fire(),u.dispose();for(const p of s)p.classList.remove(_ce)};t.onPointerMove(h,null,u),t.onPointerUp(f,null,u),u.add(t)}onPointerDoublePress(e){const t=this.getOrthogonalSash(e);t&&t._onDidReset.fire(),this.linkedSash&&this.linkedSash._onDidReset.fire(),this._onDidReset.fire()}static onMouseEnter(e,t=!1){e.el.classList.contains("active")?(e.hoverDelayer.cancel(),e.el.classList.add("hover")):e.hoverDelayer.trigger(()=>e.el.classList.add("hover"),e.hoverDelay).then(void 0,()=>{}),!t&&e.linkedSash&&Dr.onMouseEnter(e.linkedSash,!0)}static onMouseLeave(e,t=!1){e.hoverDelayer.cancel(),e.el.classList.remove("hover"),!t&&e.linkedSash&&Dr.onMouseLeave(e.linkedSash,!0)}clearSashHoverState(){Dr.onMouseLeave(this)}layout(){if(this.orientation===0){const e=this.layoutProvider;this.el.style.left=e.getVerticalSashLeft(this)-this.size/2+"px",e.getVerticalSashTop&&(this.el.style.top=e.getVerticalSashTop(this)+"px"),e.getVerticalSashHeight&&(this.el.style.height=e.getVerticalSashHeight(this)+"px")}else{const e=this.layoutProvider;this.el.style.top=e.getHorizontalSashTop(this)-this.size/2+"px",e.getHorizontalSashLeft&&(this.el.style.left=e.getHorizontalSashLeft(this)+"px"),e.getHorizontalSashWidth&&(this.el.style.width=e.getHorizontalSashWidth(this)+"px")}}getOrthogonalSash(e){const t=e.initialTarget??e.target;if(!(!t||!Ns(t))&&t.classList.contains("orthogonal-drag-handle"))return t.classList.contains("start")?this.orthogonalStartSash:this.orthogonalEndSash}dispose(){super.dispose(),this.el.remove()}}const Art={separatorBorder:ge.transparent};class Wye{set size(e){this._size=e}get size(){return this._size}get visible(){return typeof this._cachedVisibleSize>"u"}setVisible(e,t){var i,s;if(e!==this.visible){e?(this.size=wo(this._cachedVisibleSize,this.viewMinimumSize,this.viewMaximumSize),this._cachedVisibleSize=void 0):(this._cachedVisibleSize=typeof t=="number"?t:this.size,this.size=0),this.container.classList.toggle("visible",e);try{(s=(i=this.view).setVisible)==null||s.call(i,e)}catch(r){console.error("Splitview: Failed to set visible view"),console.error(r)}}}get minimumSize(){return this.visible?this.view.minimumSize:0}get viewMinimumSize(){return this.view.minimumSize}get maximumSize(){return this.visible?this.view.maximumSize:0}get viewMaximumSize(){return this.view.maximumSize}get priority(){return this.view.priority}get proportionalLayout(){return this.view.proportionalLayout??!0}get snap(){return!!this.view.snap}set enabled(e){this.container.style.pointerEvents=e?"":"none"}constructor(e,t,i,s){this.container=e,this.view=t,this.disposable=s,this._cachedVisibleSize=void 0,typeof i=="number"?(this._size=i,this._cachedVisibleSize=void 0,e.classList.add("visible")):(this._size=0,this._cachedVisibleSize=i.cachedVisibleSize)}layout(e,t){this.layoutContainer(e);try{this.view.layout(this.size,e,t)}catch(i){console.error("Splitview: Failed to layout view"),console.error(i)}}dispose(){this.disposable.dispose()}}class Mrt extends Wye{layoutContainer(e){this.container.style.top=`${e}px`,this.container.style.height=`${this.size}px`}}class Prt extends Wye{layoutContainer(e){this.container.style.left=`${e}px`,this.container.style.width=`${this.size}px`}}var jf;(function(n){n[n.Idle=0]="Idle",n[n.Busy=1]="Busy"})(jf||(jf={}));var dO;(function(n){n.Distribute={type:"distribute"};function e(s){return{type:"split",index:s}}n.Split=e;function t(s){return{type:"auto",index:s}}n.Auto=t;function i(s){return{type:"invisible",cachedVisibleSize:s}}n.Invisible=i})(dO||(dO={}));class Hye extends ee{get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}get startSnappingEnabled(){return this._startSnappingEnabled}get endSnappingEnabled(){return this._endSnappingEnabled}set orthogonalStartSash(e){for(const t of this.sashItems)t.sash.orthogonalStartSash=e;this._orthogonalStartSash=e}set orthogonalEndSash(e){for(const t of this.sashItems)t.sash.orthogonalEndSash=e;this._orthogonalEndSash=e}set startSnappingEnabled(e){this._startSnappingEnabled!==e&&(this._startSnappingEnabled=e,this.updateSashEnablement())}set endSnappingEnabled(e){this._endSnappingEnabled!==e&&(this._endSnappingEnabled=e,this.updateSashEnablement())}constructor(e,t={}){super(),this.size=0,this._contentSize=0,this.proportions=void 0,this.viewItems=[],this.sashItems=[],this.state=jf.Idle,this._onDidSashChange=this._register(new X),this._onDidSashReset=this._register(new X),this._startSnappingEnabled=!0,this._endSnappingEnabled=!0,this.onDidSashChange=this._onDidSashChange.event,this.onDidSashReset=this._onDidSashReset.event,this.orientation=t.orientation??0,this.inverseAltBehavior=t.inverseAltBehavior??!1,this.proportionalLayout=t.proportionalLayout??!0,this.getSashOrthogonalSize=t.getSashOrthogonalSize,this.el=document.createElement("div"),this.el.classList.add("monaco-split-view2"),this.el.classList.add(this.orientation===0?"vertical":"horizontal"),e.appendChild(this.el),this.sashContainer=_e(this.el,xe(".sash-container")),this.viewContainer=xe(".split-view-container"),this.scrollable=this._register(new Px({forceIntegerValues:!0,smoothScrollDuration:125,scheduleAtNextAnimationFrame:s=>il(nt(this.el),s)})),this.scrollableElement=this._register(new hB(this.viewContainer,{vertical:this.orientation===0?t.scrollbarVisibility??1:2,horizontal:this.orientation===1?t.scrollbarVisibility??1:2},this.scrollable));const i=this._register(new zt(this.viewContainer,"scroll")).event;this._register(i(s=>{const r=this.scrollableElement.getScrollPosition(),o=Math.abs(this.viewContainer.scrollLeft-r.scrollLeft)<=1?void 0:this.viewContainer.scrollLeft,a=Math.abs(this.viewContainer.scrollTop-r.scrollTop)<=1?void 0:this.viewContainer.scrollTop;(o!==void 0||a!==void 0)&&this.scrollableElement.setScrollPosition({scrollLeft:o,scrollTop:a})})),this.onDidScroll=this.scrollableElement.onScroll,this._register(this.onDidScroll(s=>{s.scrollTopChanged&&(this.viewContainer.scrollTop=s.scrollTop),s.scrollLeftChanged&&(this.viewContainer.scrollLeft=s.scrollLeft)})),_e(this.el,this.scrollableElement.getDomNode()),this.style(t.styles||Art),t.descriptor&&(this.size=t.descriptor.size,t.descriptor.views.forEach((s,r)=>{const o=ro(s.visible)||s.visible?s.size:{type:"invisible",cachedVisibleSize:s.size},a=s.view;this.doAddView(a,o,r,!0)}),this._contentSize=this.viewItems.reduce((s,r)=>s+r.size,0),this.saveProportions())}style(e){e.separatorBorder.isTransparent()?(this.el.classList.remove("separator-border"),this.el.style.removeProperty("--separator-border")):(this.el.classList.add("separator-border"),this.el.style.setProperty("--separator-border",e.separatorBorder.toString()))}addView(e,t,i=this.viewItems.length,s){this.doAddView(e,t,i,s)}layout(e,t){const i=Math.max(this.size,this._contentSize);if(this.size=e,this.layoutContext=t,this.proportions){let s=0;for(let r=0;r<this.viewItems.length;r++){const o=this.viewItems[r],a=this.proportions[r];typeof a=="number"?s+=a:e-=o.size}for(let r=0;r<this.viewItems.length;r++){const o=this.viewItems[r],a=this.proportions[r];typeof a=="number"&&s>0&&(o.size=wo(Math.round(a*e/s),o.minimumSize,o.maximumSize))}}else{const s=ta(this.viewItems.length),r=s.filter(a=>this.viewItems[a].priority===1),o=s.filter(a=>this.viewItems[a].priority===2);this.resize(this.viewItems.length-1,e-i,void 0,r,o)}this.distributeEmptySpace(),this.layoutViews()}saveProportions(){this.proportionalLayout&&this._contentSize>0&&(this.proportions=this.viewItems.map(e=>e.proportionalLayout&&e.visible?e.size/this._contentSize:void 0))}onSashStart({sash:e,start:t,alt:i}){for(const a of this.viewItems)a.enabled=!1;const s=this.sashItems.findIndex(a=>a.sash===e),r=Ld(re(this.el.ownerDocument.body,"keydown",a=>o(this.sashDragState.current,a.altKey)),re(this.el.ownerDocument.body,"keyup",()=>o(this.sashDragState.current,!1))),o=(a,l)=>{const c=this.viewItems.map(g=>g.size);let d=Number.NEGATIVE_INFINITY,u=Number.POSITIVE_INFINITY;if(this.inverseAltBehavior&&(l=!l),l)if(s===this.sashItems.length-1){const p=this.viewItems[s];d=(p.minimumSize-p.size)/2,u=(p.maximumSize-p.size)/2}else{const p=this.viewItems[s+1];d=(p.size-p.maximumSize)/2,u=(p.size-p.minimumSize)/2}let h,f;if(!l){const g=ta(s,-1),p=ta(s+1,this.viewItems.length),_=g.reduce((N,I)=>N+(this.viewItems[I].minimumSize-c[I]),0),w=g.reduce((N,I)=>N+(this.viewItems[I].viewMaximumSize-c[I]),0),b=p.length===0?Number.POSITIVE_INFINITY:p.reduce((N,I)=>N+(c[I]-this.viewItems[I].minimumSize),0),y=p.length===0?Number.NEGATIVE_INFINITY:p.reduce((N,I)=>N+(c[I]-this.viewItems[I].viewMaximumSize),0),S=Math.max(_,y),x=Math.min(b,w),E=this.findFirstSnapIndex(g),D=this.findFirstSnapIndex(p);if(typeof E=="number"){const N=this.viewItems[E],I=Math.floor(N.viewMinimumSize/2);h={index:E,limitDelta:N.visible?S-I:S+I,size:N.size}}if(typeof D=="number"){const N=this.viewItems[D],I=Math.floor(N.viewMinimumSize/2);f={index:D,limitDelta:N.visible?x+I:x-I,size:N.size}}}this.sashDragState={start:a,current:a,index:s,sizes:c,minDelta:d,maxDelta:u,alt:l,snapBefore:h,snapAfter:f,disposable:r}};o(t,i)}onSashChange({current:e}){const{index:t,start:i,sizes:s,alt:r,minDelta:o,maxDelta:a,snapBefore:l,snapAfter:c}=this.sashDragState;this.sashDragState.current=e;const d=e-i,u=this.resize(t,d,s,void 0,void 0,o,a,l,c);if(r){const h=t===this.sashItems.length-1,f=this.viewItems.map(y=>y.size),g=h?t:t+1,p=this.viewItems[g],_=p.size-p.maximumSize,w=p.size-p.minimumSize,b=h?t-1:t+1;this.resize(b,-u,f,void 0,void 0,_,w)}this.distributeEmptySpace(),this.layoutViews()}onSashEnd(e){this._onDidSashChange.fire(e),this.sashDragState.disposable.dispose(),this.saveProportions();for(const t of this.viewItems)t.enabled=!0}onViewChange(e,t){const i=this.viewItems.indexOf(e);i<0||i>=this.viewItems.length||(t=typeof t=="number"?t:e.size,t=wo(t,e.minimumSize,e.maximumSize),this.inverseAltBehavior&&i>0?(this.resize(i-1,Math.floor((e.size-t)/2)),this.distributeEmptySpace(),this.layoutViews()):(e.size=t,this.relayout([i],void 0)))}resizeView(e,t){if(!(e<0||e>=this.viewItems.length)){if(this.state!==jf.Idle)throw new Error("Cant modify splitview");this.state=jf.Busy;try{const i=ta(this.viewItems.length).filter(a=>a!==e),s=[...i.filter(a=>this.viewItems[a].priority===1),e],r=i.filter(a=>this.viewItems[a].priority===2),o=this.viewItems[e];t=Math.round(t),t=wo(t,o.minimumSize,Math.min(o.maximumSize,this.size)),o.size=t,this.relayout(s,r)}finally{this.state=jf.Idle}}}distributeViewSizes(){const e=[];let t=0;for(const a of this.viewItems)a.maximumSize-a.minimumSize>0&&(e.push(a),t+=a.size);const i=Math.floor(t/e.length);for(const a of e)a.size=wo(i,a.minimumSize,a.maximumSize);const s=ta(this.viewItems.length),r=s.filter(a=>this.viewItems[a].priority===1),o=s.filter(a=>this.viewItems[a].priority===2);this.relayout(r,o)}getViewSize(e){return e<0||e>=this.viewItems.length?-1:this.viewItems[e].size}doAddView(e,t,i=this.viewItems.length,s){if(this.state!==jf.Idle)throw new Error("Cant modify splitview");this.state=jf.Busy;try{const r=xe(".split-view-view");i===this.viewItems.length?this.viewContainer.appendChild(r):this.viewContainer.insertBefore(r,this.viewContainer.children.item(i));const o=e.onDidChange(h=>this.onViewChange(d,h)),a=Ye(()=>r.remove()),l=Ld(o,a);let c;typeof t=="number"?c=t:(t.type==="auto"&&(this.areViewsDistributed()?t={type:"distribute"}:t={type:"split",index:t.index}),t.type==="split"?c=this.getViewSize(t.index)/2:t.type==="invisible"?c={cachedVisibleSize:t.cachedVisibleSize}:c=e.minimumSize);const d=this.orientation===0?new Mrt(r,e,c,l):new Prt(r,e,c,l);if(this.viewItems.splice(i,0,d),this.viewItems.length>1){const h={orthogonalStartSash:this.orthogonalStartSash,orthogonalEndSash:this.orthogonalEndSash},f=this.orientation===0?new Dr(this.sashContainer,{getHorizontalSashTop:N=>this.getSashPosition(N),getHorizontalSashWidth:this.getSashOrthogonalSize},{...h,orientation:1}):new Dr(this.sashContainer,{getVerticalSashLeft:N=>this.getSashPosition(N),getVerticalSashHeight:this.getSashOrthogonalSize},{...h,orientation:0}),g=this.orientation===0?N=>({sash:f,start:N.startY,current:N.currentY,alt:N.altKey}):N=>({sash:f,start:N.startX,current:N.currentX,alt:N.altKey}),_=Ee.map(f.onDidStart,g)(this.onSashStart,this),b=Ee.map(f.onDidChange,g)(this.onSashChange,this),S=Ee.map(f.onDidEnd,()=>this.sashItems.findIndex(N=>N.sash===f))(this.onSashEnd,this),x=f.onDidReset(()=>{const N=this.sashItems.findIndex(J=>J.sash===f),I=ta(N,-1),H=ta(N+1,this.viewItems.length),z=this.findFirstSnapIndex(I),G=this.findFirstSnapIndex(H);typeof z=="number"&&!this.viewItems[z].visible||typeof G=="number"&&!this.viewItems[G].visible||this._onDidSashReset.fire(N)}),E=Ld(_,b,S,x,f),D={sash:f,disposable:E};this.sashItems.splice(i-1,0,D)}r.appendChild(e.element);let u;typeof t!="number"&&t.type==="split"&&(u=[t.index]),s||this.relayout([i],u),!s&&typeof t!="number"&&t.type==="distribute"&&this.distributeViewSizes()}finally{this.state=jf.Idle}}relayout(e,t){const i=this.viewItems.reduce((s,r)=>s+r.size,0);this.resize(this.viewItems.length-1,this.size-i,void 0,e,t),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()}resize(e,t,i=this.viewItems.map(d=>d.size),s,r,o=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,l,c){if(e<0||e>=this.viewItems.length)return 0;const d=ta(e,-1),u=ta(e+1,this.viewItems.length);if(r)for(const D of r)D9(d,D),D9(u,D);if(s)for(const D of s)TR(d,D),TR(u,D);const h=d.map(D=>this.viewItems[D]),f=d.map(D=>i[D]),g=u.map(D=>this.viewItems[D]),p=u.map(D=>i[D]),_=d.reduce((D,N)=>D+(this.viewItems[N].minimumSize-i[N]),0),w=d.reduce((D,N)=>D+(this.viewItems[N].maximumSize-i[N]),0),b=u.length===0?Number.POSITIVE_INFINITY:u.reduce((D,N)=>D+(i[N]-this.viewItems[N].minimumSize),0),y=u.length===0?Number.NEGATIVE_INFINITY:u.reduce((D,N)=>D+(i[N]-this.viewItems[N].maximumSize),0),S=Math.max(_,y,o),x=Math.min(b,w,a);let E=!1;if(l){const D=this.viewItems[l.index],N=t>=l.limitDelta;E=N!==D.visible,D.setVisible(N,l.size)}if(!E&&c){const D=this.viewItems[c.index],N=t<c.limitDelta;E=N!==D.visible,D.setVisible(N,c.size)}if(E)return this.resize(e,t,i,s,r,o,a);t=wo(t,S,x);for(let D=0,N=t;D<h.length;D++){const I=h[D],H=wo(f[D]+N,I.minimumSize,I.maximumSize),z=H-f[D];N-=z,I.size=H}for(let D=0,N=t;D<g.length;D++){const I=g[D],H=wo(p[D]-N,I.minimumSize,I.maximumSize),z=H-p[D];N+=z,I.size=H}return t}distributeEmptySpace(e){const t=this.viewItems.reduce((a,l)=>a+l.size,0);let i=this.size-t;const s=ta(this.viewItems.length-1,-1),r=s.filter(a=>this.viewItems[a].priority===1),o=s.filter(a=>this.viewItems[a].priority===2);for(const a of o)D9(s,a);for(const a of r)TR(s,a);typeof e=="number"&&TR(s,e);for(let a=0;i!==0&&a<s.length;a++){const l=this.viewItems[s[a]],c=wo(l.size+i,l.minimumSize,l.maximumSize),d=c-l.size;i-=d,l.size=c}}layoutViews(){this._contentSize=this.viewItems.reduce((t,i)=>t+i.size,0);let e=0;for(const t of this.viewItems)t.layout(e,this.layoutContext),e+=t.size;this.sashItems.forEach(t=>t.sash.layout()),this.updateSashEnablement(),this.updateScrollableElement()}updateScrollableElement(){this.orientation===0?this.scrollableElement.setScrollDimensions({height:this.size,scrollHeight:this._contentSize}):this.scrollableElement.setScrollDimensions({width:this.size,scrollWidth:this._contentSize})}updateSashEnablement(){let e=!1;const t=this.viewItems.map(l=>e=l.size-l.minimumSize>0||e);e=!1;const i=this.viewItems.map(l=>e=l.maximumSize-l.size>0||e),s=[...this.viewItems].reverse();e=!1;const r=s.map(l=>e=l.size-l.minimumSize>0||e).reverse();e=!1;const o=s.map(l=>e=l.maximumSize-l.size>0||e).reverse();let a=0;for(let l=0;l<this.sashItems.length;l++){const{sash:c}=this.sashItems[l],d=this.viewItems[l];a+=d.size;const u=!(t[l]&&o[l+1]),h=!(i[l]&&r[l+1]);if(u&&h){const f=ta(l,-1),g=ta(l+1,this.viewItems.length),p=this.findFirstSnapIndex(f),_=this.findFirstSnapIndex(g),w=typeof p=="number"&&!this.viewItems[p].visible,b=typeof _=="number"&&!this.viewItems[_].visible;w&&r[l]&&(a>0||this.startSnappingEnabled)?c.state=1:b&&t[l]&&(a<this._contentSize||this.endSnappingEnabled)?c.state=2:c.state=0}else u&&!h?c.state=1:!u&&h?c.state=2:c.state=3}}getSashPosition(e){let t=0;for(let i=0;i<this.sashItems.length;i++)if(t+=this.viewItems[i].size,this.sashItems[i].sash===e)return t;return 0}findFirstSnapIndex(e){for(const t of e){const i=this.viewItems[t];if(i.visible&&i.snap)return t}for(const t of e){const i=this.viewItems[t];if(i.visible&&i.maximumSize-i.minimumSize>0)return;if(!i.visible&&i.snap)return t}}areViewsDistributed(){let e,t;for(const i of this.viewItems)if(e=e===void 0?i.size:Math.min(e,i.size),t=t===void 0?i.size:Math.max(t,i.size),t-e>2)return!1;return!0}dispose(){var e;(e=this.sashDragState)==null||e.disposable.dispose(),Ti(this.viewItems),this.viewItems=[],this.sashItems.forEach(t=>t.disposable.dispose()),this.sashItems=[],super.dispose()}}const E4=class E4{constructor(e,t,i){this.columns=e,this.getColumnSize=i,this.templateId=E4.TemplateId,this.renderedTemplates=new Set;const s=new Map(t.map(r=>[r.templateId,r]));this.renderers=[];for(const r of e){const o=s.get(r.templateId);if(!o)throw new Error(`Table cell renderer for template id ${r.templateId} not found.`);this.renderers.push(o)}}renderTemplate(e){const t=_e(e,xe(".monaco-table-tr")),i=[],s=[];for(let o=0;o<this.columns.length;o++){const a=this.renderers[o],l=_e(t,xe(".monaco-table-td",{"data-col-index":o}));l.style.width=`${this.getColumnSize(o)}px`,i.push(l),s.push(a.renderTemplate(l))}const r={container:e,cellContainers:i,cellTemplateData:s};return this.renderedTemplates.add(r),r}renderElement(e,t,i,s){for(let r=0;r<this.columns.length;r++){const a=this.columns[r].project(e);this.renderers[r].renderElement(a,t,i.cellTemplateData[r],s)}}disposeElement(e,t,i,s){for(let r=0;r<this.columns.length;r++){const o=this.renderers[r];if(o.disposeElement){const l=this.columns[r].project(e);o.disposeElement(l,t,i.cellTemplateData[r],s)}}}disposeTemplate(e){for(let t=0;t<this.columns.length;t++)this.renderers[t].disposeTemplate(e.cellTemplateData[t]);nr(e.container),this.renderedTemplates.delete(e)}layoutColumn(e,t){for(const{cellContainers:i}of this.renderedTemplates)i[e].style.width=`${t}px`}};E4.TemplateId="row";let uO=E4;function Ort(n){return{getHeight(e){return n.getHeight(e)},getTemplateId(){return uO.TemplateId}}}class Frt extends ee{get minimumSize(){return this.column.minimumWidth??120}get maximumSize(){return this.column.maximumWidth??Number.POSITIVE_INFINITY}get onDidChange(){return this.column.onDidChangeWidthConstraints??Ee.None}constructor(e,t){super(),this.column=e,this.index=t,this._onDidLayout=new X,this.onDidLayout=this._onDidLayout.event,this.element=xe(".monaco-table-th",{"data-col-index":t},e.label),e.tooltip&&this._register(Gu().setupManagedHover(Vo("mouse"),this.element,e.tooltip))}layout(e){this._onDidLayout.fire([this.index,e])}}const I4=class I4{get onDidChangeFocus(){return this.list.onDidChangeFocus}get onDidChangeSelection(){return this.list.onDidChangeSelection}get onDidScroll(){return this.list.onDidScroll}get onMouseDblClick(){return this.list.onMouseDblClick}get onPointer(){return this.list.onPointer}get onDidFocus(){return this.list.onDidFocus}get scrollTop(){return this.list.scrollTop}set scrollTop(e){this.list.scrollTop=e}get scrollHeight(){return this.list.scrollHeight}get renderHeight(){return this.list.renderHeight}get onDidDispose(){return this.list.onDidDispose}constructor(e,t,i,s,r,o){this.virtualDelegate=i,this.columns=s,this.domId=`table_id_${++I4.InstanceCount}`,this.disposables=new ue,this.cachedWidth=0,this.cachedHeight=0,this.domNode=_e(t,xe(`.monaco-table.${this.domId}`));const a=s.map((d,u)=>this.disposables.add(new Frt(d,u))),l={size:a.reduce((d,u)=>d+u.column.weight,0),views:a.map(d=>({size:d.column.weight,view:d}))};this.splitview=this.disposables.add(new Hye(this.domNode,{orientation:1,scrollbarVisibility:2,getSashOrthogonalSize:()=>this.cachedHeight,descriptor:l})),this.splitview.el.style.height=`${i.headerRowHeight}px`,this.splitview.el.style.lineHeight=`${i.headerRowHeight}px`;const c=new uO(s,r,d=>this.splitview.getViewSize(d));this.list=this.disposables.add(new Ql(e,this.domNode,Ort(i),[c],o)),Ee.any(...a.map(d=>d.onDidLayout))(([d,u])=>c.layoutColumn(d,u),null,this.disposables),this.splitview.onDidSashReset(d=>{const u=s.reduce((f,g)=>f+g.weight,0),h=s[d].weight/u*this.cachedWidth;this.splitview.resizeView(d,h)},null,this.disposables),this.styleElement=jl(this.domNode),this.style(lit)}updateOptions(e){this.list.updateOptions(e)}splice(e,t,i=[]){this.list.splice(e,t,i)}getHTMLElement(){return this.domNode}style(e){const t=[];t.push(`.monaco-table.${this.domId} > .monaco-split-view2 .monaco-sash.vertical::before {
			top: ${this.virtualDelegate.headerRowHeight+1}px;
			height: calc(100% - ${this.virtualDelegate.headerRowHeight}px);
		}`),this.styleElement.textContent=t.join(`
`),this.list.style(e)}getSelectedElements(){return this.list.getSelectedElements()}getSelection(){return this.list.getSelection()}getFocus(){return this.list.getFocus()}dispose(){this.disposables.dispose()}};I4.InstanceCount=0;let N$=I4;var Cl;(function(n){n[n.Expanded=0]="Expanded",n[n.Collapsed=1]="Collapsed",n[n.PreserveOrExpanded=2]="PreserveOrExpanded",n[n.PreserveOrCollapsed=3]="PreserveOrCollapsed"})(Cl||(Cl={}));var Eb;(function(n){n[n.Unknown=0]="Unknown",n[n.Twistie=1]="Twistie",n[n.Element=2]="Element",n[n.Filter=3]="Filter"})(Eb||(Eb={}));class Dl extends Error{constructor(e,t){super(`TreeError [${e}] ${t}`)}}class LQ{constructor(e){this.fn=e,this._map=new WeakMap}map(e){let t=this._map.get(e);return t||(t=this.fn(e),this._map.set(e,t)),t}}function kQ(n){return typeof n=="object"&&"visibility"in n&&"data"in n}function hD(n){switch(n){case!0:return 1;case!1:return 0;default:return n}}function M8(n){return typeof n.collapsible=="boolean"}class Brt{constructor(e,t,i,s={}){this.user=e,this.list=t,this.rootRef=[],this.eventBufferer=new TN,this._onDidChangeCollapseState=new X,this.onDidChangeCollapseState=this.eventBufferer.wrapEvent(this._onDidChangeCollapseState.event),this._onDidChangeRenderNodeCount=new X,this.onDidChangeRenderNodeCount=this.eventBufferer.wrapEvent(this._onDidChangeRenderNodeCount.event),this._onDidSplice=new X,this.onDidSplice=this._onDidSplice.event,this.refilterDelayer=new Rc(y0e),this.collapseByDefault=typeof s.collapseByDefault>"u"?!1:s.collapseByDefault,this.allowNonCollapsibleParents=s.allowNonCollapsibleParents??!1,this.filter=s.filter,this.autoExpandSingleChildren=typeof s.autoExpandSingleChildren>"u"?!1:s.autoExpandSingleChildren,this.root={parent:void 0,element:i,children:[],depth:0,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:!1,collapsed:!1,renderNodeCount:0,visibility:1,visible:!0,filterData:void 0}}splice(e,t,i=qt.empty(),s={}){if(e.length===0)throw new Dl(this.user,"Invalid tree location");s.diffIdentityProvider?this.spliceSmart(s.diffIdentityProvider,e,t,i,s):this.spliceSimple(e,t,i,s)}spliceSmart(e,t,i,s=qt.empty(),r,o=r.diffDepth??0){const{parentNode:a}=this.getParentNodeWithListIndex(t);if(!a.lastDiffIds)return this.spliceSimple(t,i,s,r);const l=[...s],c=t[t.length-1],d=new Oh({getElements:()=>a.lastDiffIds},{getElements:()=>[...a.children.slice(0,c),...l,...a.children.slice(c+i)].map(p=>e.getId(p.element).toString())}).ComputeDiff(!1);if(d.quitEarly)return a.lastDiffIds=void 0,this.spliceSimple(t,i,l,r);const u=t.slice(0,-1),h=(p,_,w)=>{if(o>0)for(let b=0;b<w;b++)p--,_--,this.spliceSmart(e,[...u,p,0],Number.MAX_SAFE_INTEGER,l[_].children,r,o-1)};let f=Math.min(a.children.length,c+i),g=l.length;for(const p of d.changes.sort((_,w)=>w.originalStart-_.originalStart))h(f,g,f-(p.originalStart+p.originalLength)),f=p.originalStart,g=p.modifiedStart-c,this.spliceSimple([...u,f],p.originalLength,qt.slice(l,g,g+p.modifiedLength),r);h(f,g,f)}spliceSimple(e,t,i=qt.empty(),{onDidCreateNode:s,onDidDeleteNode:r,diffIdentityProvider:o}){const{parentNode:a,listIndex:l,revealed:c,visible:d}=this.getParentNodeWithListIndex(e),u=[],h=qt.map(i,x=>this.createTreeNode(x,a,a.visible?1:0,c,u,s)),f=e[e.length-1];let g=0;for(let x=f;x>=0&&x<a.children.length;x--){const E=a.children[x];if(E.visible){g=E.visibleChildIndex;break}}const p=[];let _=0,w=0;for(const x of h)p.push(x),w+=x.renderNodeCount,x.visible&&(x.visibleChildIndex=g+_++);const b=goe(a.children,f,t,p);o?a.lastDiffIds?goe(a.lastDiffIds,f,t,p.map(x=>o.getId(x.element).toString())):a.lastDiffIds=a.children.map(x=>o.getId(x.element).toString()):a.lastDiffIds=void 0;let y=0;for(const x of b)x.visible&&y++;if(y!==0)for(let x=f+p.length;x<a.children.length;x++){const E=a.children[x];E.visible&&(E.visibleChildIndex-=y)}if(a.visibleChildrenCount+=_-y,c&&d){const x=b.reduce((E,D)=>E+(D.visible?D.renderNodeCount:0),0);this._updateAncestorsRenderNodeCount(a,w-x),this.list.splice(l,x,u)}if(b.length>0&&r){const x=E=>{r(E),E.children.forEach(x)};b.forEach(x)}this._onDidSplice.fire({insertedNodes:p,deletedNodes:b});let S=a;for(;S;){if(S.visibility===2){this.refilterDelayer.trigger(()=>this.refilter());break}S=S.parent}}rerender(e){if(e.length===0)throw new Dl(this.user,"Invalid tree location");const{node:t,listIndex:i,revealed:s}=this.getTreeNodeWithListIndex(e);t.visible&&s&&this.list.splice(i,1,[t])}has(e){return this.hasTreeNode(e)}getListIndex(e){const{listIndex:t,visible:i,revealed:s}=this.getTreeNodeWithListIndex(e);return i&&s?t:-1}getListRenderCount(e){return this.getTreeNode(e).renderNodeCount}isCollapsible(e){return this.getTreeNode(e).collapsible}setCollapsible(e,t){const i=this.getTreeNode(e);typeof t>"u"&&(t=!i.collapsible);const s={collapsible:t};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,s))}isCollapsed(e){return this.getTreeNode(e).collapsed}setCollapsed(e,t,i){const s=this.getTreeNode(e);typeof t>"u"&&(t=!s.collapsed);const r={collapsed:t,recursive:i||!1};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,r))}_setCollapseState(e,t){const{node:i,listIndex:s,revealed:r}=this.getTreeNodeWithListIndex(e),o=this._setListNodeCollapseState(i,s,r,t);if(i!==this.root&&this.autoExpandSingleChildren&&o&&!M8(t)&&i.collapsible&&!i.collapsed&&!t.recursive){let a=-1;for(let l=0;l<i.children.length;l++)if(i.children[l].visible)if(a>-1){a=-1;break}else a=l;a>-1&&this._setCollapseState([...e,a],t)}return o}_setListNodeCollapseState(e,t,i,s){const r=this._setNodeCollapseState(e,s,!1);if(!i||!e.visible||!r)return r;const o=e.renderNodeCount,a=this.updateNodeAfterCollapseChange(e),l=o-(t===-1?0:1);return this.list.splice(t+1,l,a.slice(1)),r}_setNodeCollapseState(e,t,i){let s;if(e===this.root?s=!1:(M8(t)?(s=e.collapsible!==t.collapsible,e.collapsible=t.collapsible):e.collapsible?(s=e.collapsed!==t.collapsed,e.collapsed=t.collapsed):s=!1,s&&this._onDidChangeCollapseState.fire({node:e,deep:i})),!M8(t)&&t.recursive)for(const r of e.children)s=this._setNodeCollapseState(r,t,!0)||s;return s}expandTo(e){this.eventBufferer.bufferEvents(()=>{let t=this.getTreeNode(e);for(;t.parent;)t=t.parent,e=e.slice(0,e.length-1),t.collapsed&&this._setCollapseState(e,{collapsed:!1,recursive:!1})})}refilter(){const e=this.root.renderNodeCount,t=this.updateNodeAfterFilterChange(this.root);this.list.splice(0,e,t),this.refilterDelayer.cancel()}createTreeNode(e,t,i,s,r,o){const a={parent:t,element:e.element,children:[],depth:t.depth+1,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:typeof e.collapsible=="boolean"?e.collapsible:typeof e.collapsed<"u",collapsed:typeof e.collapsed>"u"?this.collapseByDefault:e.collapsed,renderNodeCount:1,visibility:1,visible:!0,filterData:void 0},l=this._filterNode(a,i);a.visibility=l,s&&r.push(a);const c=e.children||qt.empty(),d=s&&l!==0&&!a.collapsed;let u=0,h=1;for(const f of c){const g=this.createTreeNode(f,a,l,d,r,o);a.children.push(g),h+=g.renderNodeCount,g.visible&&(g.visibleChildIndex=u++)}return this.allowNonCollapsibleParents||(a.collapsible=a.collapsible||a.children.length>0),a.visibleChildrenCount=u,a.visible=l===2?u>0:l===1,a.visible?a.collapsed||(a.renderNodeCount=h):(a.renderNodeCount=0,s&&r.pop()),o==null||o(a),a}updateNodeAfterCollapseChange(e){const t=e.renderNodeCount,i=[];return this._updateNodeAfterCollapseChange(e,i),this._updateAncestorsRenderNodeCount(e.parent,i.length-t),i}_updateNodeAfterCollapseChange(e,t){if(e.visible===!1)return 0;if(t.push(e),e.renderNodeCount=1,!e.collapsed)for(const i of e.children)e.renderNodeCount+=this._updateNodeAfterCollapseChange(i,t);return this._onDidChangeRenderNodeCount.fire(e),e.renderNodeCount}updateNodeAfterFilterChange(e){const t=e.renderNodeCount,i=[];return this._updateNodeAfterFilterChange(e,e.visible?1:0,i),this._updateAncestorsRenderNodeCount(e.parent,i.length-t),i}_updateNodeAfterFilterChange(e,t,i,s=!0){let r;if(e!==this.root){if(r=this._filterNode(e,t),r===0)return e.visible=!1,e.renderNodeCount=0,!1;s&&i.push(e)}const o=i.length;e.renderNodeCount=e===this.root?0:1;let a=!1;if(!e.collapsed||r!==0){let l=0;for(const c of e.children)a=this._updateNodeAfterFilterChange(c,r,i,s&&!e.collapsed)||a,c.visible&&(c.visibleChildIndex=l++);e.visibleChildrenCount=l}else e.visibleChildrenCount=0;return e!==this.root&&(e.visible=r===2?a:r===1,e.visibility=r),e.visible?e.collapsed||(e.renderNodeCount+=i.length-o):(e.renderNodeCount=0,s&&i.pop()),this._onDidChangeRenderNodeCount.fire(e),e.visible}_updateAncestorsRenderNodeCount(e,t){if(t!==0)for(;e;)e.renderNodeCount+=t,this._onDidChangeRenderNodeCount.fire(e),e=e.parent}_filterNode(e,t){const i=this.filter?this.filter.filter(e.element,t):1;return typeof i=="boolean"?(e.filterData=void 0,i?1:0):kQ(i)?(e.filterData=i.data,hD(i.visibility)):(e.filterData=void 0,hD(i))}hasTreeNode(e,t=this.root){if(!e||e.length===0)return!0;const[i,...s]=e;return i<0||i>t.children.length?!1:this.hasTreeNode(s,t.children[i])}getTreeNode(e,t=this.root){if(!e||e.length===0)return t;const[i,...s]=e;if(i<0||i>t.children.length)throw new Dl(this.user,"Invalid tree location");return this.getTreeNode(s,t.children[i])}getTreeNodeWithListIndex(e){if(e.length===0)return{node:this.root,listIndex:-1,revealed:!0,visible:!1};const{parentNode:t,listIndex:i,revealed:s,visible:r}=this.getParentNodeWithListIndex(e),o=e[e.length-1];if(o<0||o>t.children.length)throw new Dl(this.user,"Invalid tree location");const a=t.children[o];return{node:a,listIndex:i,revealed:s,visible:r&&a.visible}}getParentNodeWithListIndex(e,t=this.root,i=0,s=!0,r=!0){const[o,...a]=e;if(o<0||o>t.children.length)throw new Dl(this.user,"Invalid tree location");for(let l=0;l<o;l++)i+=t.children[l].renderNodeCount;return s=s&&!t.collapsed,r=r&&t.visible,a.length===0?{parentNode:t,listIndex:i,revealed:s,visible:r}:this.getParentNodeWithListIndex(a,t.children[o],i+1,s,r)}getNode(e=[]){return this.getTreeNode(e)}getNodeLocation(e){const t=[];let i=e;for(;i.parent;)t.push(i.parent.children.indexOf(i)),i=i.parent;return t.reverse()}getParentNodeLocation(e){if(e.length!==0)return e.length===1?[]:GUe(e)[0]}getFirstElementChild(e){const t=this.getTreeNode(e);if(t.children.length!==0)return t.children[0].element}}class Wrt extends ZN{constructor(e){super(e.elements.map(t=>t.element)),this.data=e}}function P8(n){return n instanceof ZN?new Wrt(n):n}class Hrt{constructor(e,t){this.modelProvider=e,this.dnd=t,this.autoExpandDisposable=ee.None,this.disposables=new ue}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(i=>i.element),t)}onDragStart(e,t){var i,s;(s=(i=this.dnd).onDragStart)==null||s.call(i,P8(e),t)}onDragOver(e,t,i,s,r,o=!0){const a=this.dnd.onDragOver(P8(e),t&&t.element,i,s,r),l=this.autoExpandNode!==t;if(l&&(this.autoExpandDisposable.dispose(),this.autoExpandNode=t),typeof t>"u")return a;if(l&&typeof a!="boolean"&&a.autoExpand&&(this.autoExpandDisposable=T_(()=>{const f=this.modelProvider(),g=f.getNodeLocation(t);f.isCollapsed(g)&&f.setCollapsed(g,!1),this.autoExpandNode=void 0},500,this.disposables)),typeof a=="boolean"||!a.accept||typeof a.bubble>"u"||a.feedback){if(!o){const f=typeof a=="boolean"?a:a.accept,g=typeof a=="boolean"?void 0:a.effect;return{accept:f,effect:g,feedback:[i]}}return a}if(a.bubble===1){const f=this.modelProvider(),g=f.getNodeLocation(t),p=f.getParentNodeLocation(g),_=f.getNode(p),w=p&&f.getListIndex(p);return this.onDragOver(e,_,w,s,r,!1)}const c=this.modelProvider(),d=c.getNodeLocation(t),u=c.getListIndex(d),h=c.getListRenderCount(d);return{...a,feedback:ta(u,u+h)}}drop(e,t,i,s,r){this.autoExpandDisposable.dispose(),this.autoExpandNode=void 0,this.dnd.drop(P8(e),t&&t.element,i,s,r)}onDragEnd(e){var t,i;(i=(t=this.dnd).onDragEnd)==null||i.call(t,e)}dispose(){this.disposables.dispose(),this.dnd.dispose()}}function Vrt(n,e){return e&&{...e,identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(t.element)}},dnd:e.dnd&&new Hrt(n,e.dnd),multipleSelectionController:e.multipleSelectionController&&{isSelectionSingleChangeEvent(t){return e.multipleSelectionController.isSelectionSingleChangeEvent({...t,element:t.element})},isSelectionRangeChangeEvent(t){return e.multipleSelectionController.isSelectionRangeChangeEvent({...t,element:t.element})}},accessibilityProvider:e.accessibilityProvider&&{...e.accessibilityProvider,getSetSize(t){const i=n(),s=i.getNodeLocation(t),r=i.getParentNodeLocation(s);return i.getNode(r).visibleChildrenCount},getPosInSet(t){return t.visibleChildIndex+1},isChecked:e.accessibilityProvider&&e.accessibilityProvider.isChecked?t=>e.accessibilityProvider.isChecked(t.element):void 0,getRole:e.accessibilityProvider&&e.accessibilityProvider.getRole?t=>e.accessibilityProvider.getRole(t.element):()=>"treeitem",getAriaLabel(t){return e.accessibilityProvider.getAriaLabel(t.element)},getWidgetAriaLabel(){return e.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:e.accessibilityProvider&&e.accessibilityProvider.getWidgetRole?()=>e.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:e.accessibilityProvider&&e.accessibilityProvider.getAriaLevel?t=>e.accessibilityProvider.getAriaLevel(t.element):t=>t.depth,getActiveDescendantId:e.accessibilityProvider.getActiveDescendantId&&(t=>e.accessibilityProvider.getActiveDescendantId(t.element))},keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{...e.keyboardNavigationLabelProvider,getKeyboardNavigationLabel(t){return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t.element)}}}}class EQ{constructor(e){this.delegate=e}getHeight(e){return this.delegate.getHeight(e.element)}getTemplateId(e){return this.delegate.getTemplateId(e.element)}hasDynamicHeight(e){return!!this.delegate.hasDynamicHeight&&this.delegate.hasDynamicHeight(e.element)}setDynamicHeight(e,t){var i,s;(s=(i=this.delegate).setDynamicHeight)==null||s.call(i,e.element,t)}}var KS;(function(n){n.None="none",n.OnHover="onHover",n.Always="always"})(KS||(KS={}));class zrt{get elements(){return this._elements}constructor(e,t=[]){this._elements=t,this.disposables=new ue,this.onDidChange=Ee.forEach(e,i=>this._elements=i,this.disposables)}dispose(){this.disposables.dispose()}}const WE=class WE{constructor(e,t,i,s,r,o={}){var a;this.renderer=e,this.modelProvider=t,this.activeNodes=s,this.renderedIndentGuides=r,this.renderedElements=new Map,this.renderedNodes=new Map,this.indent=WE.DefaultIndent,this.hideTwistiesOfChildlessElements=!1,this.shouldRenderIndentGuides=!1,this.activeIndentNodes=new Set,this.indentGuidesDisposable=ee.None,this.disposables=new ue,this.templateId=e.templateId,this.updateOptions(o),Ee.map(i,l=>l.node)(this.onDidChangeNodeTwistieState,this,this.disposables),(a=e.onDidChangeTwistieState)==null||a.call(e,this.onDidChangeTwistieState,this,this.disposables)}updateOptions(e={}){if(typeof e.indent<"u"){const t=wo(e.indent,0,40);if(t!==this.indent){this.indent=t;for(const[i,s]of this.renderedNodes)this.renderTreeElement(i,s)}}if(typeof e.renderIndentGuides<"u"){const t=e.renderIndentGuides!==KS.None;if(t!==this.shouldRenderIndentGuides){this.shouldRenderIndentGuides=t;for(const[i,s]of this.renderedNodes)this._renderIndentGuides(i,s);if(this.indentGuidesDisposable.dispose(),t){const i=new ue;this.activeNodes.onDidChange(this._onDidChangeActiveNodes,this,i),this.indentGuidesDisposable=i,this._onDidChangeActiveNodes(this.activeNodes.elements)}}}typeof e.hideTwistiesOfChildlessElements<"u"&&(this.hideTwistiesOfChildlessElements=e.hideTwistiesOfChildlessElements)}renderTemplate(e){const t=_e(e,xe(".monaco-tl-row")),i=_e(t,xe(".monaco-tl-indent")),s=_e(t,xe(".monaco-tl-twistie")),r=_e(t,xe(".monaco-tl-contents")),o=this.renderer.renderTemplate(r);return{container:e,indent:i,twistie:s,indentGuidesDisposable:ee.None,templateData:o}}renderElement(e,t,i,s){this.renderedNodes.set(e,i),this.renderedElements.set(e.element,e),this.renderTreeElement(e,i),this.renderer.renderElement(e,t,i.templateData,s)}disposeElement(e,t,i,s){var r,o;i.indentGuidesDisposable.dispose(),(o=(r=this.renderer).disposeElement)==null||o.call(r,e,t,i.templateData,s),typeof s=="number"&&(this.renderedNodes.delete(e),this.renderedElements.delete(e.element))}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}onDidChangeTwistieState(e){const t=this.renderedElements.get(e);t&&this.onDidChangeNodeTwistieState(t)}onDidChangeNodeTwistieState(e){const t=this.renderedNodes.get(e);t&&(this._onDidChangeActiveNodes(this.activeNodes.elements),this.renderTreeElement(e,t))}renderTreeElement(e,t){const i=WE.DefaultIndent+(e.depth-1)*this.indent;t.twistie.style.paddingLeft=`${i}px`,t.indent.style.width=`${i+this.indent-16}px`,e.collapsible?t.container.setAttribute("aria-expanded",String(!e.collapsed)):t.container.removeAttribute("aria-expanded"),t.twistie.classList.remove(...ot.asClassNameArray(ye.treeItemExpanded));let s=!1;this.renderer.renderTwistie&&(s=this.renderer.renderTwistie(e.element,t.twistie)),e.collapsible&&(!this.hideTwistiesOfChildlessElements||e.visibleChildrenCount>0)?(s||t.twistie.classList.add(...ot.asClassNameArray(ye.treeItemExpanded)),t.twistie.classList.add("collapsible"),t.twistie.classList.toggle("collapsed",e.collapsed)):t.twistie.classList.remove("collapsible","collapsed"),this._renderIndentGuides(e,t)}_renderIndentGuides(e,t){if(nr(t.indent),t.indentGuidesDisposable.dispose(),!this.shouldRenderIndentGuides)return;const i=new ue,s=this.modelProvider();for(;;){const r=s.getNodeLocation(e),o=s.getParentNodeLocation(r);if(!o)break;const a=s.getNode(o),l=xe(".indent-guide",{style:`width: ${this.indent}px`});this.activeIndentNodes.has(a)&&l.classList.add("active"),t.indent.childElementCount===0?t.indent.appendChild(l):t.indent.insertBefore(l,t.indent.firstElementChild),this.renderedIndentGuides.add(a,l),i.add(Ye(()=>this.renderedIndentGuides.delete(a,l))),e=a}t.indentGuidesDisposable=i}_onDidChangeActiveNodes(e){if(!this.shouldRenderIndentGuides)return;const t=new Set,i=this.modelProvider();e.forEach(s=>{const r=i.getNodeLocation(s);try{const o=i.getParentNodeLocation(r);s.collapsible&&s.children.length>0&&!s.collapsed?t.add(s):o&&t.add(i.getNode(o))}catch{}}),this.activeIndentNodes.forEach(s=>{t.has(s)||this.renderedIndentGuides.forEach(s,r=>r.classList.remove("active"))}),t.forEach(s=>{this.activeIndentNodes.has(s)||this.renderedIndentGuides.forEach(s,r=>r.classList.add("active"))}),this.activeIndentNodes=t}dispose(){this.renderedNodes.clear(),this.renderedElements.clear(),this.indentGuidesDisposable.dispose(),Ti(this.disposables)}};WE.DefaultIndent=8;let T$=WE;class Urt{get totalCount(){return this._totalCount}get matchCount(){return this._matchCount}constructor(e,t,i){this.tree=e,this.keyboardNavigationLabelProvider=t,this._filter=i,this._totalCount=0,this._matchCount=0,this._pattern="",this._lowercasePattern="",this.disposables=new ue,e.onWillRefilter(this.reset,this,this.disposables)}filter(e,t){let i=1;if(this._filter){const o=this._filter.filter(e,t);if(typeof o=="boolean"?i=o?1:0:kQ(o)?i=hD(o.visibility):i=o,i===0)return!1}if(this._totalCount++,!this._pattern)return this._matchCount++,{data:Au.Default,visibility:i};const s=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e),r=Array.isArray(s)?s:[s];for(const o of r){const a=o&&o.toString();if(typeof a>"u")return{data:Au.Default,visibility:i};let l;if(this.tree.findMatchType===b0.Contiguous){const c=a.toLowerCase().indexOf(this._lowercasePattern);if(c>-1){l=[Number.MAX_SAFE_INTEGER,0];for(let d=this._lowercasePattern.length;d>0;d--)l.push(c+d-1)}}else l=p0(this._pattern,this._lowercasePattern,0,a,a.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});if(l)return this._matchCount++,r.length===1?{data:l,visibility:i}:{data:{label:a,score:l},visibility:i}}return this.tree.findMode===yg.Filter?typeof this.tree.options.defaultFindVisibility=="number"?this.tree.options.defaultFindVisibility:this.tree.options.defaultFindVisibility?this.tree.options.defaultFindVisibility(e):2:{data:Au.Default,visibility:i}}reset(){this._totalCount=0,this._matchCount=0}dispose(){Ti(this.disposables)}}var yg;(function(n){n[n.Highlight=0]="Highlight",n[n.Filter=1]="Filter"})(yg||(yg={}));var b0;(function(n){n[n.Fuzzy=0]="Fuzzy",n[n.Contiguous=1]="Contiguous"})(b0||(b0={}));let $rt=class{get pattern(){return this._pattern}get mode(){return this._mode}set mode(e){e!==this._mode&&(this._mode=e,this.widget&&(this.widget.mode=this._mode),this.tree.refilter(),this.render(),this._onDidChangeMode.fire(e))}get matchType(){return this._matchType}set matchType(e){e!==this._matchType&&(this._matchType=e,this.widget&&(this.widget.matchType=this._matchType),this.tree.refilter(),this.render(),this._onDidChangeMatchType.fire(e))}constructor(e,t,i,s,r,o={}){this.tree=e,this.view=i,this.filter=s,this.contextViewProvider=r,this.options=o,this._pattern="",this.width=0,this._onDidChangeMode=new X,this.onDidChangeMode=this._onDidChangeMode.event,this._onDidChangeMatchType=new X,this.onDidChangeMatchType=this._onDidChangeMatchType.event,this._onDidChangePattern=new X,this._onDidChangeOpenState=new X,this.onDidChangeOpenState=this._onDidChangeOpenState.event,this.enabledDisposables=new ue,this.disposables=new ue,this._mode=e.options.defaultFindMode??yg.Highlight,this._matchType=e.options.defaultFindMatchType??b0.Fuzzy,t.onDidSplice(this.onDidSpliceModel,this,this.disposables)}updateOptions(e={}){e.defaultFindMode!==void 0&&(this.mode=e.defaultFindMode),e.defaultFindMatchType!==void 0&&(this.matchType=e.defaultFindMatchType)}onDidSpliceModel(){!this.widget||this.pattern.length===0||(this.tree.refilter(),this.render())}render(){var t,i,s;const e=this.filter.totalCount>0&&this.filter.matchCount===0;this.pattern&&e?(Bo(v("replFindNoResults","No results")),this.tree.options.showNotFoundMessage??!0?(t=this.widget)==null||t.showMessage({type:2,content:v("not found","No elements found.")}):(i=this.widget)==null||i.showMessage({type:2})):((s=this.widget)==null||s.clearMessage(),this.pattern&&Bo(v("replFindResults","{0} results",this.filter.matchCount)))}shouldAllowFocus(e){return!this.widget||!this.pattern||this.filter.totalCount>0&&this.filter.matchCount<=1?!0:!Au.isDefault(e.filterData)}layout(e){var t;this.width=e,(t=this.widget)==null||t.layout(e)}dispose(){this._history=void 0,this._onDidChangePattern.dispose(),this.enabledDisposables.dispose(),this.disposables.dispose()}};function jrt(n,e){return n.position===e.position&&Vye(n,e)}function Vye(n,e){return n.node.element===e.node.element&&n.startIndex===e.startIndex&&n.height===e.height&&n.endIndex===e.endIndex}class Krt{constructor(e=[]){this.stickyNodes=e}get count(){return this.stickyNodes.length}equal(e){return dn(this.stickyNodes,e.stickyNodes,jrt)}lastNodePartiallyVisible(){if(this.count===0)return!1;const e=this.stickyNodes[this.count-1];if(this.count===1)return e.position!==0;const t=this.stickyNodes[this.count-2];return t.position+t.height!==e.position}animationStateChanged(e){if(!dn(this.stickyNodes,e.stickyNodes,Vye)||this.count===0)return!1;const t=this.stickyNodes[this.count-1],i=e.stickyNodes[e.count-1];return t.position!==i.position}}class qrt{constrainStickyScrollNodes(e,t,i){for(let s=0;s<e.length;s++){const r=e[s];if(r.position+r.height>i||s>=t)return e.slice(0,s)}return e}}let vce=class extends ee{constructor(e,t,i,s,r,o={}){super(),this.tree=e,this.model=t,this.view=i,this.treeDelegate=r,this.maxWidgetViewRatio=.4;const a=this.validateStickySettings(o);this.stickyScrollMaxItemCount=a.stickyScrollMaxItemCount,this.stickyScrollDelegate=o.stickyScrollDelegate??new qrt,this._widget=this._register(new Grt(i.getScrollableElement(),i,e,s,r,o.accessibilityProvider)),this.onDidChangeHasFocus=this._widget.onDidChangeHasFocus,this.onContextMenu=this._widget.onContextMenu,this._register(i.onDidScroll(()=>this.update())),this._register(i.onDidChangeContentHeight(()=>this.update())),this._register(e.onDidChangeCollapseState(()=>this.update())),this.update()}get height(){return this._widget.height}getNodeAtHeight(e){let t;if(e===0?t=this.view.firstVisibleIndex:t=this.view.indexAt(e+this.view.scrollTop),!(t<0||t>=this.view.length))return this.view.element(t)}update(){const e=this.getNodeAtHeight(0);if(!e||this.tree.scrollTop===0){this._widget.setState(void 0);return}const t=this.findStickyState(e);this._widget.setState(t)}findStickyState(e){const t=[];let i=e,s=0,r=this.getNextStickyNode(i,void 0,s);for(;r&&(t.push(r),s+=r.height,!(t.length<=this.stickyScrollMaxItemCount&&(i=this.getNextVisibleNode(r),!i)));)r=this.getNextStickyNode(i,r.node,s);const o=this.constrainStickyNodes(t);return o.length?new Krt(o):void 0}getNextVisibleNode(e){return this.getNodeAtHeight(e.position+e.height)}getNextStickyNode(e,t,i){const s=this.getAncestorUnderPrevious(e,t);if(s&&!(s===e&&(!this.nodeIsUncollapsedParent(e)||this.nodeTopAlignsWithStickyNodesBottom(e,i))))return this.createStickyScrollNode(s,i)}nodeTopAlignsWithStickyNodesBottom(e,t){const i=this.getNodeIndex(e),s=this.view.getElementTop(i),r=t;return this.view.scrollTop===s-r}createStickyScrollNode(e,t){const i=this.treeDelegate.getHeight(e),{startIndex:s,endIndex:r}=this.getNodeRange(e),o=this.calculateStickyNodePosition(r,t,i);return{node:e,position:o,height:i,startIndex:s,endIndex:r}}getAncestorUnderPrevious(e,t=void 0){let i=e,s=this.getParentNode(i);for(;s;){if(s===t)return i;i=s,s=this.getParentNode(i)}if(t===void 0)return i}calculateStickyNodePosition(e,t,i){let s=this.view.getRelativeTop(e);if(s===null&&this.view.firstVisibleIndex===e&&e+1<this.view.length){const c=this.treeDelegate.getHeight(this.view.element(e)),d=this.view.getRelativeTop(e+1);s=d?d-c/this.view.renderHeight:null}if(s===null)return t;const r=this.view.element(e),o=this.treeDelegate.getHeight(r),l=s*this.view.renderHeight+o;return t+i>l&&t<=l?l-i:t}constrainStickyNodes(e){if(e.length===0)return[];const t=this.view.renderHeight*this.maxWidgetViewRatio,i=e[e.length-1];if(e.length<=this.stickyScrollMaxItemCount&&i.position+i.height<=t)return e;const s=this.stickyScrollDelegate.constrainStickyScrollNodes(e,this.stickyScrollMaxItemCount,t);if(!s.length)return[];const r=s[s.length-1];if(s.length>this.stickyScrollMaxItemCount||r.position+r.height>t)throw new Error("stickyScrollDelegate violates constraints");return s}getParentNode(e){const t=this.model.getNodeLocation(e),i=this.model.getParentNodeLocation(t);return i?this.model.getNode(i):void 0}nodeIsUncollapsedParent(e){const t=this.model.getNodeLocation(e);return this.model.getListRenderCount(t)>1}getNodeIndex(e){const t=this.model.getNodeLocation(e);return this.model.getListIndex(t)}getNodeRange(e){const t=this.model.getNodeLocation(e),i=this.model.getListIndex(t);if(i<0)throw new Error("Node not found in tree");const s=this.model.getListRenderCount(t),r=i+s-1;return{startIndex:i,endIndex:r}}nodePositionTopBelowWidget(e){const t=[];let i=this.getParentNode(e);for(;i;)t.push(i),i=this.getParentNode(i);let s=0;for(let r=0;r<t.length&&r<this.stickyScrollMaxItemCount;r++)s+=this.treeDelegate.getHeight(t[r]);return s}domFocus(){this._widget.domFocus()}focusedLast(){return this._widget.focusedLast()}updateOptions(e={}){if(!e.stickyScrollMaxItemCount)return;const t=this.validateStickySettings(e);this.stickyScrollMaxItemCount!==t.stickyScrollMaxItemCount&&(this.stickyScrollMaxItemCount=t.stickyScrollMaxItemCount,this.update())}validateStickySettings(e){let t=7;return typeof e.stickyScrollMaxItemCount=="number"&&(t=Math.max(e.stickyScrollMaxItemCount,1)),{stickyScrollMaxItemCount:t}}},Grt=class{constructor(e,t,i,s,r,o){this.view=t,this.tree=i,this.treeRenderers=s,this.treeDelegate=r,this.accessibilityProvider=o,this._previousElements=[],this._previousStateDisposables=new ue,this._rootDomNode=xe(".monaco-tree-sticky-container.empty"),e.appendChild(this._rootDomNode);const a=xe(".monaco-tree-sticky-container-shadow");this._rootDomNode.appendChild(a),this.stickyScrollFocus=new Yrt(this._rootDomNode,t),this.onDidChangeHasFocus=this.stickyScrollFocus.onDidChangeHasFocus,this.onContextMenu=this.stickyScrollFocus.onContextMenu}get height(){if(!this._previousState)return 0;const e=this._previousState.stickyNodes[this._previousState.count-1];return e.position+e.height}setState(e){const t=!!this._previousState&&this._previousState.count>0,i=!!e&&e.count>0;if(!t&&!i||t&&i&&this._previousState.equal(e))return;if(t!==i&&this.setVisible(i),!i){this._previousState=void 0,this._previousElements=[],this._previousStateDisposables.clear();return}const s=e.stickyNodes[e.count-1];if(this._previousState&&e.animationStateChanged(this._previousState))this._previousElements[this._previousState.count-1].style.top=`${s.position}px`;else{this._previousStateDisposables.clear();const r=Array(e.count);for(let o=e.count-1;o>=0;o--){const a=e.stickyNodes[o],{element:l,disposable:c}=this.createElement(a,o,e.count);r[o]=l,this._rootDomNode.appendChild(l),this._previousStateDisposables.add(c)}this.stickyScrollFocus.updateElements(r,e),this._previousElements=r}this._previousState=e,this._rootDomNode.style.height=`${s.position+s.height}px`}createElement(e,t,i){const s=e.startIndex,r=document.createElement("div");r.style.top=`${e.position}px`,this.tree.options.setRowHeight!==!1&&(r.style.height=`${e.height}px`),this.tree.options.setRowLineHeight!==!1&&(r.style.lineHeight=`${e.height}px`),r.classList.add("monaco-tree-sticky-row"),r.classList.add("monaco-list-row"),r.setAttribute("data-index",`${s}`),r.setAttribute("data-parity",s%2===0?"even":"odd"),r.setAttribute("id",this.view.getElementID(s));const o=this.setAccessibilityAttributes(r,e.node.element,t,i),a=this.treeDelegate.getTemplateId(e.node),l=this.treeRenderers.find(h=>h.templateId===a);if(!l)throw new Error(`No renderer found for template id ${a}`);let c=e.node;c===this.tree.getNode(this.tree.getNodeLocation(e.node))&&(c=new Proxy(e.node,{}));const d=l.renderTemplate(r);l.renderElement(c,e.startIndex,d,e.height);const u=Ye(()=>{o.dispose(),l.disposeElement(c,e.startIndex,d,e.height),l.disposeTemplate(d),r.remove()});return{element:r,disposable:u}}setAccessibilityAttributes(e,t,i,s){if(!this.accessibilityProvider)return ee.None;this.accessibilityProvider.getSetSize&&e.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(t,i,s))),this.accessibilityProvider.getPosInSet&&e.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(t,i))),this.accessibilityProvider.getRole&&e.setAttribute("role",this.accessibilityProvider.getRole(t)??"treeitem");const r=this.accessibilityProvider.getAriaLabel(t),o=r&&typeof r!="string"?r:Sc(r),a=gt(c=>{const d=c.readObservable(o);d?e.setAttribute("aria-label",d):e.removeAttribute("aria-label")});typeof r=="string"||r&&e.setAttribute("aria-label",r.get());const l=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(t);return typeof l=="number"&&e.setAttribute("aria-level",`${l}`),e.setAttribute("aria-selected",String(!1)),a}setVisible(e){this._rootDomNode.classList.toggle("empty",!e),e||this.stickyScrollFocus.updateElements([],void 0)}domFocus(){this.stickyScrollFocus.domFocus()}focusedLast(){return this.stickyScrollFocus.focusedLast()}dispose(){this.stickyScrollFocus.dispose(),this._previousStateDisposables.dispose(),this._rootDomNode.remove()}};class Yrt extends ee{get domHasFocus(){return this._domHasFocus}set domHasFocus(e){e!==this._domHasFocus&&(this._onDidChangeHasFocus.fire(e),this._domHasFocus=e)}constructor(e,t){super(),this.container=e,this.view=t,this.focusedIndex=-1,this.elements=[],this._onDidChangeHasFocus=new X,this.onDidChangeHasFocus=this._onDidChangeHasFocus.event,this._onContextMenu=new X,this.onContextMenu=this._onContextMenu.event,this._domHasFocus=!1,this._register(re(this.container,"focus",()=>this.onFocus())),this._register(re(this.container,"blur",()=>this.onBlur())),this._register(this.view.onDidFocus(()=>this.toggleStickyScrollFocused(!1))),this._register(this.view.onKeyDown(i=>this.onKeyDown(i))),this._register(this.view.onMouseDown(i=>this.onMouseDown(i))),this._register(this.view.onContextMenu(i=>this.handleContextMenu(i)))}handleContextMenu(e){const t=e.browserEvent.target;if(!oD(t)&&!eE(t)){this.focusedLast()&&this.view.domFocus();return}if(!tg(e.browserEvent)){if(!this.state)throw new Error("Context menu should not be triggered when state is undefined");const o=this.state.stickyNodes.findIndex(a=>{var l;return a.node.element===((l=e.element)==null?void 0:l.element)});if(o===-1)throw new Error("Context menu should not be triggered when element is not in sticky scroll widget");this.container.focus(),this.setFocus(o);return}if(!this.state||this.focusedIndex<0)throw new Error("Context menu key should not be triggered when focus is not in sticky scroll widget");const s=this.state.stickyNodes[this.focusedIndex].node.element,r=this.elements[this.focusedIndex];this._onContextMenu.fire({element:s,anchor:r,browserEvent:e.browserEvent,isStickyScroll:!0})}onKeyDown(e){if(this.domHasFocus&&this.state){if(e.key==="ArrowUp")this.setFocusedElement(Math.max(0,this.focusedIndex-1)),e.preventDefault(),e.stopPropagation();else if(e.key==="ArrowDown"||e.key==="ArrowRight"){if(this.focusedIndex>=this.state.count-1){const t=this.state.stickyNodes[this.state.count-1].startIndex+1;this.view.domFocus(),this.view.setFocus([t]),this.scrollNodeUnderWidget(t,this.state)}else this.setFocusedElement(this.focusedIndex+1);e.preventDefault(),e.stopPropagation()}}}onMouseDown(e){const t=e.browserEvent.target;!oD(t)&&!eE(t)||(e.browserEvent.preventDefault(),e.browserEvent.stopPropagation())}updateElements(e,t){if(t&&t.count===0)throw new Error("Sticky scroll state must be undefined when there are no sticky nodes");if(t&&t.count!==e.length)throw new Error("Sticky scroll focus received illigel state");const i=this.focusedIndex;if(this.removeFocus(),this.elements=e,this.state=t,t){const s=wo(i,0,t.count-1);this.setFocus(s)}else this.domHasFocus&&this.view.domFocus();this.container.tabIndex=t?0:-1}setFocusedElement(e){const t=this.state;if(!t)throw new Error("Cannot set focus when state is undefined");if(this.setFocus(e),!(e<t.count-1)&&t.lastNodePartiallyVisible()){const i=t.stickyNodes[e];this.scrollNodeUnderWidget(i.endIndex+1,t)}}scrollNodeUnderWidget(e,t){const i=t.stickyNodes[t.count-1],s=t.count>1?t.stickyNodes[t.count-2]:void 0,r=this.view.getElementTop(e),o=s?s.position+s.height+i.height:i.height;this.view.scrollTop=r-o}domFocus(){if(!this.state)throw new Error("Cannot focus when state is undefined");this.container.focus()}focusedLast(){return this.state?this.view.getHTMLElement().classList.contains("sticky-scroll-focused"):!1}removeFocus(){this.focusedIndex!==-1&&(this.toggleElementFocus(this.elements[this.focusedIndex],!1),this.focusedIndex=-1)}setFocus(e){if(0>e)throw new Error("addFocus() can not remove focus");if(!this.state&&e>=0)throw new Error("Cannot set focus index when state is undefined");if(this.state&&e>=this.state.count)throw new Error("Cannot set focus index to an index that does not exist");const t=this.focusedIndex;t>=0&&this.toggleElementFocus(this.elements[t],!1),e>=0&&this.toggleElementFocus(this.elements[e],!0),this.focusedIndex=e}toggleElementFocus(e,t){this.toggleElementActiveFocus(e,t&&this.domHasFocus),this.toggleElementPassiveFocus(e,t)}toggleCurrentElementActiveFocus(e){this.focusedIndex!==-1&&this.toggleElementActiveFocus(this.elements[this.focusedIndex],e)}toggleElementActiveFocus(e,t){e.classList.toggle("focused",t)}toggleElementPassiveFocus(e,t){e.classList.toggle("passive-focused",t)}toggleStickyScrollFocused(e){this.view.getHTMLElement().classList.toggle("sticky-scroll-focused",e)}onFocus(){if(!this.state||this.elements.length===0)throw new Error("Cannot focus when state is undefined or elements are empty");this.domHasFocus=!0,this.toggleStickyScrollFocused(!0),this.toggleCurrentElementActiveFocus(!0),this.focusedIndex===-1&&this.setFocus(0)}onBlur(){this.domHasFocus=!1,this.toggleCurrentElementActiveFocus(!1)}dispose(){this.toggleStickyScrollFocused(!1),this._onDidChangeHasFocus.fire(!1),super.dispose()}}function lA(n){let e=Eb.Unknown;return U9(n.browserEvent.target,"monaco-tl-twistie","monaco-tl-row")?e=Eb.Twistie:U9(n.browserEvent.target,"monaco-tl-contents","monaco-tl-row")?e=Eb.Element:U9(n.browserEvent.target,"monaco-tree-type-filter","monaco-list")&&(e=Eb.Filter),{browserEvent:n.browserEvent,element:n.element?n.element.element:null,target:e}}function Zrt(n){const e=oD(n.browserEvent.target);return{element:n.element?n.element.element:null,browserEvent:n.browserEvent,anchor:n.anchor,isStickyScroll:e}}function M2(n,e){e(n),n.children.forEach(t=>M2(t,e))}class O8{get nodeSet(){return this._nodeSet||(this._nodeSet=this.createNodeSet()),this._nodeSet}constructor(e,t){this.getFirstViewElementWithTrait=e,this.identityProvider=t,this.nodes=[],this._onDidChange=new X,this.onDidChange=this._onDidChange.event}set(e,t){!(t!=null&&t.__forceEvent)&&dn(this.nodes,e)||this._set(e,!1,t)}_set(e,t,i){if(this.nodes=[...e],this.elements=void 0,this._nodeSet=void 0,!t){const s=this;this._onDidChange.fire({get elements(){return s.get()},browserEvent:i})}}get(){return this.elements||(this.elements=this.nodes.map(e=>e.element)),[...this.elements]}getNodes(){return this.nodes}has(e){return this.nodeSet.has(e)}onDidModelSplice({insertedNodes:e,deletedNodes:t}){if(!this.identityProvider){const l=this.createNodeSet(),c=d=>l.delete(d);t.forEach(d=>M2(d,c)),this.set([...l.values()]);return}const i=new Set,s=l=>i.add(this.identityProvider.getId(l.element).toString());t.forEach(l=>M2(l,s));const r=new Map,o=l=>r.set(this.identityProvider.getId(l.element).toString(),l);e.forEach(l=>M2(l,o));const a=[];for(const l of this.nodes){const c=this.identityProvider.getId(l.element).toString();if(!i.has(c))a.push(l);else{const u=r.get(c);u&&u.visible&&a.push(u)}}if(this.nodes.length>0&&a.length===0){const l=this.getFirstViewElementWithTrait();l&&a.push(l)}this._set(a,!0)}createNodeSet(){const e=new Set;for(const t of this.nodes)e.add(t);return e}}class Xrt extends j1e{constructor(e,t,i){super(e),this.tree=t,this.stickyScrollProvider=i}onViewPointer(e){if(V1e(e.browserEvent.target)||Xm(e.browserEvent.target)||pk(e.browserEvent.target)||e.browserEvent.isHandledByList)return;const t=e.element;if(!t)return super.onViewPointer(e);if(this.isSelectionRangeChangeEvent(e)||this.isSelectionSingleChangeEvent(e))return super.onViewPointer(e);const i=e.browserEvent.target,s=i.classList.contains("monaco-tl-twistie")||i.classList.contains("monaco-icon-label")&&i.classList.contains("folder-icon")&&e.browserEvent.offsetX<16,r=eE(e.browserEvent.target);let o=!1;if(r?o=!0:typeof this.tree.expandOnlyOnTwistieClick=="function"?o=this.tree.expandOnlyOnTwistieClick(t.element):o=!!this.tree.expandOnlyOnTwistieClick,r)this.handleStickyScrollMouseEvent(e,t);else{if(o&&!s&&e.browserEvent.detail!==2)return super.onViewPointer(e);if(!this.tree.expandOnDoubleClick&&e.browserEvent.detail===2)return super.onViewPointer(e)}if(t.collapsible&&(!r||s)){const a=this.tree.getNodeLocation(t),l=e.browserEvent.altKey;if(this.tree.setFocus([a]),this.tree.toggleCollapsed(a,l),s){e.browserEvent.isHandledByList=!0;return}}r||super.onViewPointer(e)}handleStickyScrollMouseEvent(e,t){if(iit(e.browserEvent.target)||nit(e.browserEvent.target))return;const i=this.stickyScrollProvider();if(!i)throw new Error("Sticky scroll controller not found");const s=this.list.indexOf(t),r=this.list.getElementTop(s),o=i.nodePositionTopBelowWidget(t);this.tree.scrollTop=r-o,this.list.domFocus(),this.list.setFocus([s]),this.list.setSelection([s])}onDoubleClick(e){e.browserEvent.target.classList.contains("monaco-tl-twistie")||!this.tree.expandOnDoubleClick||e.browserEvent.isHandledByList||super.onDoubleClick(e)}onMouseDown(e){const t=e.browserEvent.target;if(!oD(t)&&!eE(t)){super.onMouseDown(e);return}}onContextMenu(e){const t=e.browserEvent.target;if(!oD(t)&&!eE(t)){super.onContextMenu(e);return}}}class Qrt extends Ql{constructor(e,t,i,s,r,o,a,l){super(e,t,i,s,l),this.focusTrait=r,this.selectionTrait=o,this.anchorTrait=a}createMouseController(e){return new Xrt(this,e.tree,e.stickyScrollProvider)}splice(e,t,i=[]){if(super.splice(e,t,i),i.length===0)return;const s=[],r=[];let o;i.forEach((a,l)=>{this.focusTrait.has(a)&&s.push(e+l),this.selectionTrait.has(a)&&r.push(e+l),this.anchorTrait.has(a)&&(o=e+l)}),s.length>0&&super.setFocus(qg([...super.getFocus(),...s])),r.length>0&&super.setSelection(qg([...super.getSelection(),...r])),typeof o=="number"&&super.setAnchor(o)}setFocus(e,t,i=!1){super.setFocus(e,t),i||this.focusTrait.set(e.map(s=>this.element(s)),t)}setSelection(e,t,i=!1){super.setSelection(e,t),i||this.selectionTrait.set(e.map(s=>this.element(s)),t)}setAnchor(e,t=!1){super.setAnchor(e),t||(typeof e>"u"?this.anchorTrait.set([]):this.anchorTrait.set([this.element(e)]))}}class zye{get onDidScroll(){return this.view.onDidScroll}get onDidChangeFocus(){return this.eventBufferer.wrapEvent(this.focus.onDidChange)}get onDidChangeSelection(){return this.eventBufferer.wrapEvent(this.selection.onDidChange)}get onMouseDblClick(){return Ee.filter(Ee.map(this.view.onMouseDblClick,lA),e=>e.target!==Eb.Filter)}get onMouseOver(){return Ee.map(this.view.onMouseOver,lA)}get onMouseOut(){return Ee.map(this.view.onMouseOut,lA)}get onContextMenu(){var e;return Ee.any(Ee.filter(Ee.map(this.view.onContextMenu,Zrt),t=>!t.isStickyScroll),((e=this.stickyScrollController)==null?void 0:e.onContextMenu)??Ee.None)}get onPointer(){return Ee.map(this.view.onPointer,lA)}get onKeyDown(){return this.view.onKeyDown}get onDidFocus(){return this.view.onDidFocus}get onDidChangeModel(){return Ee.signal(this.model.onDidSplice)}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get findMode(){var e;return((e=this.findController)==null?void 0:e.mode)??yg.Highlight}set findMode(e){this.findController&&(this.findController.mode=e)}get findMatchType(){var e;return((e=this.findController)==null?void 0:e.matchType)??b0.Fuzzy}set findMatchType(e){this.findController&&(this.findController.matchType=e)}get expandOnDoubleClick(){return typeof this._options.expandOnDoubleClick>"u"?!0:this._options.expandOnDoubleClick}get expandOnlyOnTwistieClick(){return typeof this._options.expandOnlyOnTwistieClick>"u"?!0:this._options.expandOnlyOnTwistieClick}get onDidDispose(){return this.view.onDidDispose}constructor(e,t,i,s,r={}){this._user=e,this._options=r,this.eventBufferer=new TN,this.onDidChangeFindOpenState=Ee.None,this.onDidChangeStickyScrollFocused=Ee.None,this.disposables=new ue,this._onWillRefilter=new X,this.onWillRefilter=this._onWillRefilter.event,this._onDidUpdateOptions=new X,this.treeDelegate=new EQ(i);const o=new Coe,a=new Coe,l=this.disposables.add(new zrt(a.event)),c=new CX;this.renderers=s.map(g=>new T$(g,()=>this.model,o.event,l,c,r));for(const g of this.renderers)this.disposables.add(g);let d;r.keyboardNavigationLabelProvider&&(d=new Urt(this,r.keyboardNavigationLabelProvider,r.filter),r={...r,filter:d},this.disposables.add(d)),this.focus=new O8(()=>this.view.getFocusedElements()[0],r.identityProvider),this.selection=new O8(()=>this.view.getSelectedElements()[0],r.identityProvider),this.anchor=new O8(()=>this.view.getAnchorElement(),r.identityProvider),this.view=new Qrt(e,t,this.treeDelegate,this.renderers,this.focus,this.selection,this.anchor,{...Vrt(()=>this.model,r),tree:this,stickyScrollProvider:()=>this.stickyScrollController}),this.model=this.createModel(e,this.view,r),o.input=this.model.onDidChangeCollapseState;const u=Ee.forEach(this.model.onDidSplice,g=>{this.eventBufferer.bufferEvents(()=>{this.focus.onDidModelSplice(g),this.selection.onDidModelSplice(g)})},this.disposables);u(()=>null,null,this.disposables);const h=this.disposables.add(new X),f=this.disposables.add(new Rc(0));if(this.disposables.add(Ee.any(u,this.focus.onDidChange,this.selection.onDidChange)(()=>{f.trigger(()=>{const g=new Set;for(const p of this.focus.getNodes())g.add(p);for(const p of this.selection.getNodes())g.add(p);h.fire([...g.values()])})})),a.input=h.event,r.keyboardSupport!==!1){const g=Ee.chain(this.view.onKeyDown,p=>p.filter(_=>!Xm(_.target)).map(_=>new Oi(_)));Ee.chain(g,p=>p.filter(_=>_.keyCode===15))(this.onLeftArrow,this,this.disposables),Ee.chain(g,p=>p.filter(_=>_.keyCode===17))(this.onRightArrow,this,this.disposables),Ee.chain(g,p=>p.filter(_=>_.keyCode===10))(this.onSpace,this,this.disposables)}if((r.findWidgetEnabled??!0)&&r.keyboardNavigationLabelProvider&&r.contextViewProvider){const g=this.options.findWidgetStyles?{styles:this.options.findWidgetStyles}:void 0;this.findController=new $rt(this,this.model,this.view,d,r.contextViewProvider,g),this.focusNavigationFilter=p=>this.findController.shouldAllowFocus(p),this.onDidChangeFindOpenState=this.findController.onDidChangeOpenState,this.disposables.add(this.findController),this.onDidChangeFindMode=this.findController.onDidChangeMode,this.onDidChangeFindMatchType=this.findController.onDidChangeMatchType}else this.onDidChangeFindMode=Ee.None,this.onDidChangeFindMatchType=Ee.None;r.enableStickyScroll&&(this.stickyScrollController=new vce(this,this.model,this.view,this.renderers,this.treeDelegate,r),this.onDidChangeStickyScrollFocused=this.stickyScrollController.onDidChangeHasFocus),this.styleElement=jl(this.view.getHTMLElement()),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===KS.Always)}updateOptions(e={}){var t;this._options={...this._options,...e};for(const i of this.renderers)i.updateOptions(e);this.view.updateOptions(this._options),(t=this.findController)==null||t.updateOptions(e),this.updateStickyScroll(e),this._onDidUpdateOptions.fire(this._options),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===KS.Always)}get options(){return this._options}updateStickyScroll(e){var t;!this.stickyScrollController&&this._options.enableStickyScroll?(this.stickyScrollController=new vce(this,this.model,this.view,this.renderers,this.treeDelegate,this._options),this.onDidChangeStickyScrollFocused=this.stickyScrollController.onDidChangeHasFocus):this.stickyScrollController&&!this._options.enableStickyScroll&&(this.onDidChangeStickyScrollFocused=Ee.None,this.stickyScrollController.dispose(),this.stickyScrollController=void 0),(t=this.stickyScrollController)==null||t.updateOptions(e)}getHTMLElement(){return this.view.getHTMLElement()}get scrollTop(){return this.view.scrollTop}set scrollTop(e){this.view.scrollTop=e}get scrollHeight(){return this.view.scrollHeight}get renderHeight(){return this.view.renderHeight}get ariaLabel(){return this.view.ariaLabel}set ariaLabel(e){this.view.ariaLabel=e}domFocus(){var e;(e=this.stickyScrollController)!=null&&e.focusedLast()?this.stickyScrollController.domFocus():this.view.domFocus()}layout(e,t){var i;this.view.layout(e,t),L_(t)&&((i=this.findController)==null||i.layout(t))}style(e){const t=`.${this.view.domId}`,i=[];e.treeIndentGuidesStroke&&(i.push(`.monaco-list${t}:hover .monaco-tl-indent > .indent-guide, .monaco-list${t}.always .monaco-tl-indent > .indent-guide  { border-color: ${e.treeInactiveIndentGuidesStroke}; }`),i.push(`.monaco-list${t} .monaco-tl-indent > .indent-guide.active { border-color: ${e.treeIndentGuidesStroke}; }`));const s=e.treeStickyScrollBackground??e.listBackground;s&&(i.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container { background-color: ${s}; }`),i.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container .monaco-tree-sticky-row { background-color: ${s}; }`)),e.treeStickyScrollBorder&&i.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container { border-bottom: 1px solid ${e.treeStickyScrollBorder}; }`),e.treeStickyScrollShadow&&i.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container .monaco-tree-sticky-container-shadow { box-shadow: ${e.treeStickyScrollShadow} 0 6px 6px -6px inset; height: 3px; }`),e.listFocusForeground&&(i.push(`.monaco-list${t}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused { color: ${e.listFocusForeground}; }`),i.push(`.monaco-list${t}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused { color: inherit; }`));const r=Rg(e.listFocusAndSelectionOutline,Rg(e.listSelectionOutline,e.listFocusOutline??""));r&&(i.push(`.monaco-list${t}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused.selected { outline: 1px solid ${r}; outline-offset: -1px;}`),i.push(`.monaco-list${t}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused.selected { outline: inherit;}`)),e.listFocusOutline&&(i.push(`.monaco-list${t}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }`),i.push(`.monaco-list${t}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused { outline: inherit; }`),i.push(`.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.passive-focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }`),i.push(`.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused.sticky-scroll-focused .monaco-list-rows .monaco-list-row.focused { outline: inherit; }`),i.push(`.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused:not(.sticky-scroll-focused) .monaco-tree-sticky-container .monaco-list-rows .monaco-list-row.focused { outline: inherit; }`)),this.styleElement.textContent=i.join(`
`),this.view.style(e)}getParentElement(e){const t=this.model.getParentNodeLocation(e);return this.model.getNode(t).element}getFirstElementChild(e){return this.model.getFirstElementChild(e)}getNode(e){return this.model.getNode(e)}getNodeLocation(e){return this.model.getNodeLocation(e)}collapse(e,t=!1){return this.model.setCollapsed(e,!0,t)}expand(e,t=!1){return this.model.setCollapsed(e,!1,t)}toggleCollapsed(e,t=!1){return this.model.setCollapsed(e,void 0,t)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}refilter(){this._onWillRefilter.fire(void 0),this.model.refilter()}setSelection(e,t){this.eventBufferer.bufferEvents(()=>{const i=e.map(r=>this.model.getNode(r));this.selection.set(i,t);const s=e.map(r=>this.model.getListIndex(r)).filter(r=>r>-1);this.view.setSelection(s,t,!0)})}getSelection(){return this.selection.get()}setFocus(e,t){this.eventBufferer.bufferEvents(()=>{const i=e.map(r=>this.model.getNode(r));this.focus.set(i,t);const s=e.map(r=>this.model.getListIndex(r)).filter(r=>r>-1);this.view.setFocus(s,t,!0)})}focusNext(e=1,t=!1,i,s=tg(i)&&i.altKey?void 0:this.focusNavigationFilter){this.view.focusNext(e,t,i,s)}focusPrevious(e=1,t=!1,i,s=tg(i)&&i.altKey?void 0:this.focusNavigationFilter){this.view.focusPrevious(e,t,i,s)}focusNextPage(e,t=tg(e)&&e.altKey?void 0:this.focusNavigationFilter){return this.view.focusNextPage(e,t)}focusPreviousPage(e,t=tg(e)&&e.altKey?void 0:this.focusNavigationFilter){return this.view.focusPreviousPage(e,t,()=>{var i;return((i=this.stickyScrollController)==null?void 0:i.height)??0})}focusLast(e,t=tg(e)&&e.altKey?void 0:this.focusNavigationFilter){this.view.focusLast(e,t)}focusFirst(e,t=tg(e)&&e.altKey?void 0:this.focusNavigationFilter){this.view.focusFirst(e,t)}getFocus(){return this.focus.get()}reveal(e,t){this.model.expandTo(e);const i=this.model.getListIndex(e);if(i!==-1)if(!this.stickyScrollController)this.view.reveal(i,t);else{const s=this.stickyScrollController.nodePositionTopBelowWidget(this.getNode(e));this.view.reveal(i,t,s)}}onLeftArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const i=t[0],s=this.model.getNodeLocation(i);if(!this.model.setCollapsed(s,!0)){const o=this.model.getParentNodeLocation(s);if(!o)return;const a=this.model.getListIndex(o);this.view.reveal(a),this.view.setFocus([a])}}onRightArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const i=t[0],s=this.model.getNodeLocation(i);if(!this.model.setCollapsed(s,!1)){if(!i.children.some(l=>l.visible))return;const[o]=this.view.getFocus(),a=o+1;this.view.reveal(a),this.view.setFocus([a])}}onSpace(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const i=t[0],s=this.model.getNodeLocation(i),r=e.browserEvent.altKey;this.model.setCollapsed(s,void 0,r)}dispose(){var e;Ti(this.disposables),(e=this.stickyScrollController)==null||e.dispose(),this.view.dispose()}}class IQ{constructor(e,t,i={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.nodesByIdentity=new Map,this.model=new Brt(e,t,null,i),this.onDidSplice=this.model.onDidSplice,this.onDidChangeCollapseState=this.model.onDidChangeCollapseState,this.onDidChangeRenderNodeCount=this.model.onDidChangeRenderNodeCount,i.sorter&&(this.sorter={compare(s,r){return i.sorter.compare(s.element,r.element)}}),this.identityProvider=i.identityProvider}setChildren(e,t=qt.empty(),i={}){const s=this.getElementLocation(e);this._setChildren(s,this.preserveCollapseState(t),i)}_setChildren(e,t=qt.empty(),i){const s=new Set,r=new Set,o=l=>{var d;if(l.element===null)return;const c=l;if(s.add(c.element),this.nodes.set(c.element,c),this.identityProvider){const u=this.identityProvider.getId(c.element).toString();r.add(u),this.nodesByIdentity.set(u,c)}(d=i.onDidCreateNode)==null||d.call(i,c)},a=l=>{var d;if(l.element===null)return;const c=l;if(s.has(c.element)||this.nodes.delete(c.element),this.identityProvider){const u=this.identityProvider.getId(c.element).toString();r.has(u)||this.nodesByIdentity.delete(u)}(d=i.onDidDeleteNode)==null||d.call(i,c)};this.model.splice([...e,0],Number.MAX_VALUE,t,{...i,onDidCreateNode:o,onDidDeleteNode:a})}preserveCollapseState(e=qt.empty()){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),qt.map(e,t=>{let i=this.nodes.get(t.element);if(!i&&this.identityProvider){const o=this.identityProvider.getId(t.element).toString();i=this.nodesByIdentity.get(o)}if(!i){let o;return typeof t.collapsed>"u"?o=void 0:t.collapsed===Cl.Collapsed||t.collapsed===Cl.PreserveOrCollapsed?o=!0:t.collapsed===Cl.Expanded||t.collapsed===Cl.PreserveOrExpanded?o=!1:o=!!t.collapsed,{...t,children:this.preserveCollapseState(t.children),collapsed:o}}const s=typeof t.collapsible=="boolean"?t.collapsible:i.collapsible;let r;return typeof t.collapsed>"u"||t.collapsed===Cl.PreserveOrCollapsed||t.collapsed===Cl.PreserveOrExpanded?r=i.collapsed:t.collapsed===Cl.Collapsed?r=!0:t.collapsed===Cl.Expanded?r=!1:r=!!t.collapsed,{...t,collapsible:s,collapsed:r,children:this.preserveCollapseState(t.children)}})}rerender(e){const t=this.getElementLocation(e);this.model.rerender(t)}getFirstElementChild(e=null){const t=this.getElementLocation(e);return this.model.getFirstElementChild(t)}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getElementLocation(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getElementLocation(e);return this.model.getListRenderCount(t)}isCollapsible(e){const t=this.getElementLocation(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const i=this.getElementLocation(e);return this.model.setCollapsible(i,t)}isCollapsed(e){const t=this.getElementLocation(e);return this.model.isCollapsed(t)}setCollapsed(e,t,i){const s=this.getElementLocation(e);return this.model.setCollapsed(s,t,i)}expandTo(e){const t=this.getElementLocation(e);this.model.expandTo(t)}refilter(){this.model.refilter()}getNode(e=null){if(e===null)return this.model.getNode(this.model.rootRef);const t=this.nodes.get(e);if(!t)throw new Dl(this.user,`Tree element not found: ${e}`);return t}getNodeLocation(e){return e.element}getParentNodeLocation(e){if(e===null)throw new Dl(this.user,"Invalid getParentNodeLocation call");const t=this.nodes.get(e);if(!t)throw new Dl(this.user,`Tree element not found: ${e}`);const i=this.model.getNodeLocation(t),s=this.model.getParentNodeLocation(i);return this.model.getNode(s).element}getElementLocation(e){if(e===null)return[];const t=this.nodes.get(e);if(!t)throw new Dl(this.user,`Tree element not found: ${e}`);return this.model.getNodeLocation(t)}}function P2(n){const e=[n.element],t=n.incompressible||!1;return{element:{elements:e,incompressible:t},children:qt.map(qt.from(n.children),P2),collapsible:n.collapsible,collapsed:n.collapsed}}function O2(n){const e=[n.element],t=n.incompressible||!1;let i,s;for(;[s,i]=qt.consume(qt.from(n.children),2),!(s.length!==1||s[0].incompressible);)n=s[0],e.push(n.element);return{element:{elements:e,incompressible:t},children:qt.map(qt.concat(s,i),O2),collapsible:n.collapsible,collapsed:n.collapsed}}function R$(n,e=0){let t;return e<n.element.elements.length-1?t=[R$(n,e+1)]:t=qt.map(qt.from(n.children),i=>R$(i,0)),e===0&&n.element.incompressible?{element:n.element.elements[e],children:t,incompressible:!0,collapsible:n.collapsible,collapsed:n.collapsed}:{element:n.element.elements[e],children:t,collapsible:n.collapsible,collapsed:n.collapsed}}function bce(n){return R$(n,0)}function Uye(n,e,t){return n.element===e?{...n,children:t}:{...n,children:qt.map(qt.from(n.children),i=>Uye(i,e,t))}}const Jrt=n=>({getId(e){return e.elements.map(t=>n.getId(t).toString()).join("\0")}});class eot{get onDidSplice(){return this.model.onDidSplice}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get onDidChangeRenderNodeCount(){return this.model.onDidChangeRenderNodeCount}constructor(e,t,i={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.model=new IQ(e,t,i),this.enabled=typeof i.compressionEnabled>"u"?!0:i.compressionEnabled,this.identityProvider=i.identityProvider}setChildren(e,t=qt.empty(),i){const s=i.diffIdentityProvider&&Jrt(i.diffIdentityProvider);if(e===null){const g=qt.map(t,this.enabled?O2:P2);this._setChildren(null,g,{diffIdentityProvider:s,diffDepth:1/0});return}const r=this.nodes.get(e);if(!r)throw new Dl(this.user,"Unknown compressed tree node");const o=this.model.getNode(r),a=this.model.getParentNodeLocation(r),l=this.model.getNode(a),c=bce(o),d=Uye(c,e,t),u=(this.enabled?O2:P2)(d),h=i.diffIdentityProvider?(g,p)=>i.diffIdentityProvider.getId(g)===i.diffIdentityProvider.getId(p):void 0;if(dn(u.element.elements,o.element.elements,h)){this._setChildren(r,u.children||qt.empty(),{diffIdentityProvider:s,diffDepth:1});return}const f=l.children.map(g=>g===o?u:g);this._setChildren(l.element,f,{diffIdentityProvider:s,diffDepth:o.depth-l.depth})}isCompressionEnabled(){return this.enabled}setCompressionEnabled(e){if(e===this.enabled)return;this.enabled=e;const i=this.model.getNode().children,s=qt.map(i,bce),r=qt.map(s,e?O2:P2);this._setChildren(null,r,{diffIdentityProvider:this.identityProvider,diffDepth:1/0})}_setChildren(e,t,i){const s=new Set,r=a=>{for(const l of a.element.elements)s.add(l),this.nodes.set(l,a.element)},o=a=>{for(const l of a.element.elements)s.has(l)||this.nodes.delete(l)};this.model.setChildren(e,t,{...i,onDidCreateNode:r,onDidDeleteNode:o})}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getCompressedNode(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getCompressedNode(e);return this.model.getListRenderCount(t)}getNode(e){if(typeof e>"u")return this.model.getNode();const t=this.getCompressedNode(e);return this.model.getNode(t)}getNodeLocation(e){const t=this.model.getNodeLocation(e);return t===null?null:t.elements[t.elements.length-1]}getParentNodeLocation(e){const t=this.getCompressedNode(e),i=this.model.getParentNodeLocation(t);return i===null?null:i.elements[i.elements.length-1]}getFirstElementChild(e){const t=this.getCompressedNode(e);return this.model.getFirstElementChild(t)}isCollapsible(e){const t=this.getCompressedNode(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const i=this.getCompressedNode(e);return this.model.setCollapsible(i,t)}isCollapsed(e){const t=this.getCompressedNode(e);return this.model.isCollapsed(t)}setCollapsed(e,t,i){const s=this.getCompressedNode(e);return this.model.setCollapsed(s,t,i)}expandTo(e){const t=this.getCompressedNode(e);this.model.expandTo(t)}rerender(e){const t=this.getCompressedNode(e);this.model.rerender(t)}refilter(){this.model.refilter()}getCompressedNode(e){if(e===null)return null;const t=this.nodes.get(e);if(!t)throw new Dl(this.user,`Tree element not found: ${e}`);return t}}const tot=n=>n[n.length-1];class DQ{get element(){return this.node.element===null?null:this.unwrapper(this.node.element)}get children(){return this.node.children.map(e=>new DQ(this.unwrapper,e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e,t){this.unwrapper=e,this.node=t}}function iot(n,e){return{splice(t,i,s){e.splice(t,i,s.map(r=>n.map(r)))},updateElementHeight(t,i){e.updateElementHeight(t,i)}}}function not(n,e){return{...e,identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(n(t))}},sorter:e.sorter&&{compare(t,i){return e.sorter.compare(t.elements[0],i.elements[0])}},filter:e.filter&&{filter(t,i){return e.filter.filter(n(t),i)}}}}class sot{get onDidSplice(){return Ee.map(this.model.onDidSplice,({insertedNodes:e,deletedNodes:t})=>({insertedNodes:e.map(i=>this.nodeMapper.map(i)),deletedNodes:t.map(i=>this.nodeMapper.map(i))}))}get onDidChangeCollapseState(){return Ee.map(this.model.onDidChangeCollapseState,({node:e,deep:t})=>({node:this.nodeMapper.map(e),deep:t}))}get onDidChangeRenderNodeCount(){return Ee.map(this.model.onDidChangeRenderNodeCount,e=>this.nodeMapper.map(e))}constructor(e,t,i={}){this.rootRef=null,this.elementMapper=i.elementMapper||tot;const s=r=>this.elementMapper(r.elements);this.nodeMapper=new LQ(r=>new DQ(s,r)),this.model=new eot(e,iot(this.nodeMapper,t),not(s,i))}setChildren(e,t=qt.empty(),i={}){this.model.setChildren(e,t,i)}isCompressionEnabled(){return this.model.isCompressionEnabled()}setCompressionEnabled(e){this.model.setCompressionEnabled(e)}has(e){return this.model.has(e)}getListIndex(e){return this.model.getListIndex(e)}getListRenderCount(e){return this.model.getListRenderCount(e)}getNode(e){return this.nodeMapper.map(this.model.getNode(e))}getNodeLocation(e){return e.element}getParentNodeLocation(e){return this.model.getParentNodeLocation(e)}getFirstElementChild(e){const t=this.model.getFirstElementChild(e);return t===null||typeof t>"u"?t:this.elementMapper(t.elements)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}setCollapsed(e,t,i){return this.model.setCollapsed(e,t,i)}expandTo(e){return this.model.expandTo(e)}rerender(e){return this.model.rerender(e)}refilter(){return this.model.refilter()}getCompressedTreeNode(e=null){return this.model.getNode(e)}}var rot=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};class NQ extends zye{get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}constructor(e,t,i,s,r={}){super(e,t,i,s,r),this.user=e}setChildren(e,t=qt.empty(),i){this.model.setChildren(e,t,i)}rerender(e){if(e===void 0){this.view.rerender();return}this.model.rerender(e)}hasElement(e){return this.model.has(e)}createModel(e,t,i){return new IQ(e,t,i)}}class $ye{get compressedTreeNodeProvider(){return this._compressedTreeNodeProvider()}constructor(e,t,i){this._compressedTreeNodeProvider=e,this.stickyScrollDelegate=t,this.renderer=i,this.templateId=i.templateId,i.onDidChangeTwistieState&&(this.onDidChangeTwistieState=i.onDidChangeTwistieState)}renderTemplate(e){return{compressedTreeNode:void 0,data:this.renderer.renderTemplate(e)}}renderElement(e,t,i,s){let r=this.stickyScrollDelegate.getCompressedNode(e);r||(r=this.compressedTreeNodeProvider.getCompressedTreeNode(e.element)),r.element.elements.length===1?(i.compressedTreeNode=void 0,this.renderer.renderElement(e,t,i.data,s)):(i.compressedTreeNode=r,this.renderer.renderCompressedElements(r,t,i.data,s))}disposeElement(e,t,i,s){var r,o,a,l;i.compressedTreeNode?(o=(r=this.renderer).disposeCompressedElements)==null||o.call(r,i.compressedTreeNode,t,i.data,s):(l=(a=this.renderer).disposeElement)==null||l.call(a,e,t,i.data,s)}disposeTemplate(e){this.renderer.disposeTemplate(e.data)}renderTwistie(e,t){return this.renderer.renderTwistie?this.renderer.renderTwistie(e,t):!1}}rot([Kn],$ye.prototype,"compressedTreeNodeProvider",null);class oot{constructor(e){this.modelProvider=e,this.compressedStickyNodes=new Map}getCompressedNode(e){return this.compressedStickyNodes.get(e)}constrainStickyScrollNodes(e,t,i){if(this.compressedStickyNodes.clear(),e.length===0)return[];for(let s=0;s<e.length;s++){const r=e[s],o=r.position+r.height;if(s+1<e.length&&o+e[s+1].height>i||s>=t-1&&t<e.length){const l=e.slice(0,s),c=e.slice(s),d=this.compressStickyNodes(c);return[...l,d]}}return e}compressStickyNodes(e){if(e.length===0)throw new Error("Can't compress empty sticky nodes");const t=this.modelProvider();if(!t.isCompressionEnabled())return e[0];const i=[];for(let c=0;c<e.length;c++){const d=e[c],u=t.getCompressedTreeNode(d.node.element);if(u.element){if(c!==0&&u.element.incompressible)break;i.push(...u.element.elements)}}if(i.length<2)return e[0];const s=e[e.length-1],r={elements:i,incompressible:!1},o={...s.node,children:[],element:r},a=new Proxy(e[0].node,{}),l={node:a,startIndex:e[0].startIndex,endIndex:s.endIndex,position:e[0].position,height:e[0].height};return this.compressedStickyNodes.set(a,o),l}}function aot(n,e){return e&&{...e,keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{getKeyboardNavigationLabel(t){let i;try{i=n().getCompressedTreeNode(t)}catch{return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t)}return i.element.elements.length===1?e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t):e.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(i.element.elements)}}}}class jye extends NQ{constructor(e,t,i,s,r={}){const o=()=>this,a=new oot(()=>this.model),l=s.map(c=>new $ye(o,a,c));super(e,t,i,l,{...aot(o,r),stickyScrollDelegate:a})}setChildren(e,t=qt.empty(),i){this.model.setChildren(e,t,i)}createModel(e,t,i){return new sot(e,t,i)}updateOptions(e={}){super.updateOptions(e),typeof e.compressionEnabled<"u"&&this.model.setCompressionEnabled(e.compressionEnabled)}getCompressedTreeNode(e=null){return this.model.getCompressedTreeNode(e)}}function F8(n){return{...n,children:[],refreshPromise:void 0,stale:!0,slow:!1,forceExpanded:!1}}function A$(n,e){return e.parent?e.parent===n?!0:A$(n,e.parent):!1}function lot(n,e){return n===e||A$(n,e)||A$(e,n)}class TQ{get element(){return this.node.element.element}get children(){return this.node.children.map(e=>new TQ(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e){this.node=e}}class cot{constructor(e,t,i){this.renderer=e,this.nodeMapper=t,this.onDidChangeTwistieState=i,this.renderedNodes=new Map,this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,i,s){this.renderer.renderElement(this.nodeMapper.map(e),t,i.templateData,s)}renderTwistie(e,t){return e.slow?(t.classList.add(...ot.asClassNameArray(ye.treeItemLoading)),!0):(t.classList.remove(...ot.asClassNameArray(ye.treeItemLoading)),!1)}disposeElement(e,t,i,s){var r,o;(o=(r=this.renderer).disposeElement)==null||o.call(r,this.nodeMapper.map(e),t,i.templateData,s)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear()}}function wce(n){return{browserEvent:n.browserEvent,elements:n.elements.map(e=>e.element)}}function Cce(n){return{browserEvent:n.browserEvent,element:n.element&&n.element.element,target:n.target}}class dot extends ZN{constructor(e){super(e.elements.map(t=>t.element)),this.data=e}}function B8(n){return n instanceof ZN?new dot(n):n}class uot{constructor(e){this.dnd=e}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(i=>i.element),t)}onDragStart(e,t){var i,s;(s=(i=this.dnd).onDragStart)==null||s.call(i,B8(e),t)}onDragOver(e,t,i,s,r,o=!0){return this.dnd.onDragOver(B8(e),t&&t.element,i,s,r)}drop(e,t,i,s,r){this.dnd.drop(B8(e),t&&t.element,i,s,r)}onDragEnd(e){var t,i;(i=(t=this.dnd).onDragEnd)==null||i.call(t,e)}dispose(){this.dnd.dispose()}}function Kye(n){return n&&{...n,collapseByDefault:!0,identityProvider:n.identityProvider&&{getId(e){return n.identityProvider.getId(e.element)}},dnd:n.dnd&&new uot(n.dnd),multipleSelectionController:n.multipleSelectionController&&{isSelectionSingleChangeEvent(e){return n.multipleSelectionController.isSelectionSingleChangeEvent({...e,element:e.element})},isSelectionRangeChangeEvent(e){return n.multipleSelectionController.isSelectionRangeChangeEvent({...e,element:e.element})}},accessibilityProvider:n.accessibilityProvider&&{...n.accessibilityProvider,getPosInSet:void 0,getSetSize:void 0,getRole:n.accessibilityProvider.getRole?e=>n.accessibilityProvider.getRole(e.element):()=>"treeitem",isChecked:n.accessibilityProvider.isChecked?e=>{var t;return!!((t=n.accessibilityProvider)!=null&&t.isChecked(e.element))}:void 0,getAriaLabel(e){return n.accessibilityProvider.getAriaLabel(e.element)},getWidgetAriaLabel(){return n.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:n.accessibilityProvider.getWidgetRole?()=>n.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:n.accessibilityProvider.getAriaLevel&&(e=>n.accessibilityProvider.getAriaLevel(e.element)),getActiveDescendantId:n.accessibilityProvider.getActiveDescendantId&&(e=>n.accessibilityProvider.getActiveDescendantId(e.element))},filter:n.filter&&{filter(e,t){return n.filter.filter(e.element,t)}},keyboardNavigationLabelProvider:n.keyboardNavigationLabelProvider&&{...n.keyboardNavigationLabelProvider,getKeyboardNavigationLabel(e){return n.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e.element)}},sorter:void 0,expandOnlyOnTwistieClick:typeof n.expandOnlyOnTwistieClick>"u"?void 0:typeof n.expandOnlyOnTwistieClick!="function"?n.expandOnlyOnTwistieClick:e=>n.expandOnlyOnTwistieClick(e.element),defaultFindVisibility:e=>e.hasChildren&&e.stale?1:typeof n.defaultFindVisibility=="number"?n.defaultFindVisibility:typeof n.defaultFindVisibility>"u"?2:n.defaultFindVisibility(e.element)}}function M$(n,e){e(n),n.children.forEach(t=>M$(t,e))}class qye{get onDidScroll(){return this.tree.onDidScroll}get onDidChangeFocus(){return Ee.map(this.tree.onDidChangeFocus,wce)}get onDidChangeSelection(){return Ee.map(this.tree.onDidChangeSelection,wce)}get onMouseDblClick(){return Ee.map(this.tree.onMouseDblClick,Cce)}get onPointer(){return Ee.map(this.tree.onPointer,Cce)}get onDidFocus(){return this.tree.onDidFocus}get onDidChangeModel(){return this.tree.onDidChangeModel}get onDidChangeCollapseState(){return this.tree.onDidChangeCollapseState}get onDidChangeFindOpenState(){return this.tree.onDidChangeFindOpenState}get onDidChangeStickyScrollFocused(){return this.tree.onDidChangeStickyScrollFocused}get onDidDispose(){return this.tree.onDidDispose}constructor(e,t,i,s,r,o={}){this.user=e,this.dataSource=r,this.nodes=new Map,this.subTreeRefreshPromises=new Map,this.refreshPromises=new Map,this._onDidRender=new X,this._onDidChangeNodeSlowState=new X,this.nodeMapper=new LQ(a=>new TQ(a)),this.disposables=new ue,this.identityProvider=o.identityProvider,this.autoExpandSingleChildren=typeof o.autoExpandSingleChildren>"u"?!1:o.autoExpandSingleChildren,this.sorter=o.sorter,this.getDefaultCollapseState=a=>o.collapseByDefault?o.collapseByDefault(a)?Cl.PreserveOrCollapsed:Cl.PreserveOrExpanded:void 0,this.tree=this.createTree(e,t,i,s,o),this.onDidChangeFindMode=this.tree.onDidChangeFindMode,this.onDidChangeFindMatchType=this.tree.onDidChangeFindMatchType,this.root=F8({element:void 0,parent:null,hasChildren:!0,defaultCollapseState:void 0}),this.identityProvider&&(this.root={...this.root,id:null}),this.nodes.set(null,this.root),this.tree.onDidChangeCollapseState(this._onDidChangeCollapseState,this,this.disposables)}createTree(e,t,i,s,r){const o=new EQ(i),a=s.map(c=>new cot(c,this.nodeMapper,this._onDidChangeNodeSlowState.event)),l=Kye(r)||{};return new NQ(e,t,o,a,l)}updateOptions(e={}){this.tree.updateOptions(e)}getHTMLElement(){return this.tree.getHTMLElement()}get scrollTop(){return this.tree.scrollTop}set scrollTop(e){this.tree.scrollTop=e}get scrollHeight(){return this.tree.scrollHeight}get renderHeight(){return this.tree.renderHeight}domFocus(){this.tree.domFocus()}layout(e,t){this.tree.layout(e,t)}style(e){this.tree.style(e)}getInput(){return this.root.element}async setInput(e,t){this.refreshPromises.forEach(s=>s.cancel()),this.refreshPromises.clear(),this.root.element=e;const i=t&&{viewState:t,focus:[],selection:[]};await this._updateChildren(e,!0,!1,i),i&&(this.tree.setFocus(i.focus),this.tree.setSelection(i.selection)),t&&typeof t.scrollTop=="number"&&(this.scrollTop=t.scrollTop)}async _updateChildren(e=this.root.element,t=!0,i=!1,s,r){if(typeof this.root.element>"u")throw new Dl(this.user,"Tree input not set");this.root.refreshPromise&&(await this.root.refreshPromise,await Ee.toPromise(this._onDidRender.event));const o=this.getDataNode(e);if(await this.refreshAndRenderNode(o,t,s,r),i)try{this.tree.rerender(o)}catch{}}rerender(e){if(e===void 0||e===this.root.element){this.tree.rerender();return}const t=this.getDataNode(e);this.tree.rerender(t)}getNode(e=this.root.element){const t=this.getDataNode(e),i=this.tree.getNode(t===this.root?null:t);return this.nodeMapper.map(i)}collapse(e,t=!1){const i=this.getDataNode(e);return this.tree.collapse(i===this.root?null:i,t)}async expand(e,t=!1){if(typeof this.root.element>"u")throw new Dl(this.user,"Tree input not set");this.root.refreshPromise&&(await this.root.refreshPromise,await Ee.toPromise(this._onDidRender.event));const i=this.getDataNode(e);if(this.tree.hasElement(i)&&!this.tree.isCollapsible(i)||(i.refreshPromise&&(await this.root.refreshPromise,await Ee.toPromise(this._onDidRender.event)),i!==this.root&&!i.refreshPromise&&!this.tree.isCollapsed(i)))return!1;const s=this.tree.expand(i===this.root?null:i,t);return i.refreshPromise&&(await this.root.refreshPromise,await Ee.toPromise(this._onDidRender.event)),s}setSelection(e,t){const i=e.map(s=>this.getDataNode(s));this.tree.setSelection(i,t)}getSelection(){return this.tree.getSelection().map(t=>t.element)}setFocus(e,t){const i=e.map(s=>this.getDataNode(s));this.tree.setFocus(i,t)}getFocus(){return this.tree.getFocus().map(t=>t.element)}reveal(e,t){this.tree.reveal(this.getDataNode(e),t)}getParentElement(e){const t=this.tree.getParentElement(this.getDataNode(e));return t&&t.element}getFirstElementChild(e=this.root.element){const t=this.getDataNode(e),i=this.tree.getFirstElementChild(t===this.root?null:t);return i&&i.element}getDataNode(e){const t=this.nodes.get(e===this.root.element?null:e);if(!t)throw new Dl(this.user,`Data tree node not found: ${e}`);return t}async refreshAndRenderNode(e,t,i,s){await this.refreshNode(e,t,i),!this.disposables.isDisposed&&this.render(e,i,s)}async refreshNode(e,t,i){let s;if(this.subTreeRefreshPromises.forEach((r,o)=>{!s&&lot(o,e)&&(s=r.then(()=>this.refreshNode(e,t,i)))}),s)return s;if(e!==this.root&&this.tree.getNode(e).collapsed){e.hasChildren=!!this.dataSource.hasChildren(e.element),e.stale=!0,this.setChildren(e,[],t,i);return}return this.doRefreshSubTree(e,t,i)}async doRefreshSubTree(e,t,i){let s;e.refreshPromise=new Promise(r=>s=r),this.subTreeRefreshPromises.set(e,e.refreshPromise),e.refreshPromise.finally(()=>{e.refreshPromise=void 0,this.subTreeRefreshPromises.delete(e)});try{const r=await this.doRefreshNode(e,t,i);e.stale=!1,await Rz.settled(r.map(o=>this.doRefreshSubTree(o,t,i)))}finally{s()}}async doRefreshNode(e,t,i){e.hasChildren=!!this.dataSource.hasChildren(e.element);let s;if(!e.hasChildren)s=Promise.resolve(qt.empty());else{const r=this.doGetChildren(e);if(poe(r))s=Promise.resolve(r);else{const o=Xg(800);o.then(()=>{e.slow=!0,this._onDidChangeNodeSlowState.fire(e)},a=>null),s=r.finally(()=>o.cancel())}}try{const r=await s;return this.setChildren(e,r,t,i)}catch(r){if(e!==this.root&&this.tree.hasElement(e)&&this.tree.collapse(e),Vc(r))return[];throw r}finally{e.slow&&(e.slow=!1,this._onDidChangeNodeSlowState.fire(e))}}doGetChildren(e){let t=this.refreshPromises.get(e);if(t)return t;const i=this.dataSource.getChildren(e.element);return poe(i)?this.processChildren(i):(t=Ds(async()=>this.processChildren(await i)),this.refreshPromises.set(e,t),t.finally(()=>{this.refreshPromises.delete(e)}))}_onDidChangeCollapseState({node:e,deep:t}){e.element!==null&&!e.collapsed&&e.element.stale&&(t?this.collapse(e.element.element):this.refreshAndRenderNode(e.element,!1).catch(pt))}setChildren(e,t,i,s){const r=[...t];if(e.children.length===0&&r.length===0)return[];const o=new Map,a=new Map;for(const d of e.children)o.set(d.element,d),this.identityProvider&&a.set(d.id,{node:d,collapsed:this.tree.hasElement(d)&&this.tree.isCollapsed(d)});const l=[],c=r.map(d=>{const u=!!this.dataSource.hasChildren(d);if(!this.identityProvider){const p=F8({element:d,parent:e,hasChildren:u,defaultCollapseState:this.getDefaultCollapseState(d)});return u&&p.defaultCollapseState===Cl.PreserveOrExpanded&&l.push(p),p}const h=this.identityProvider.getId(d).toString(),f=a.get(h);if(f){const p=f.node;return o.delete(p.element),this.nodes.delete(p.element),this.nodes.set(d,p),p.element=d,p.hasChildren=u,i?f.collapsed?(p.children.forEach(_=>M$(_,w=>this.nodes.delete(w.element))),p.children.splice(0,p.children.length),p.stale=!0):l.push(p):u&&!f.collapsed&&l.push(p),p}const g=F8({element:d,parent:e,id:h,hasChildren:u,defaultCollapseState:this.getDefaultCollapseState(d)});return s&&s.viewState.focus&&s.viewState.focus.indexOf(h)>-1&&s.focus.push(g),s&&s.viewState.selection&&s.viewState.selection.indexOf(h)>-1&&s.selection.push(g),(s&&s.viewState.expanded&&s.viewState.expanded.indexOf(h)>-1||u&&g.defaultCollapseState===Cl.PreserveOrExpanded)&&l.push(g),g});for(const d of o.values())M$(d,u=>this.nodes.delete(u.element));for(const d of c)this.nodes.set(d.element,d);return e.children.splice(0,e.children.length,...c),e!==this.root&&this.autoExpandSingleChildren&&c.length===1&&l.length===0&&(c[0].forceExpanded=!0,l.push(c[0])),l}render(e,t,i){const s=e.children.map(o=>this.asTreeElement(o,t)),r=i&&{...i,diffIdentityProvider:i.diffIdentityProvider&&{getId(o){return i.diffIdentityProvider.getId(o.element)}}};this.tree.setChildren(e===this.root?null:e,s,r),e!==this.root&&this.tree.setCollapsible(e,e.hasChildren),this._onDidRender.fire()}asTreeElement(e,t){if(e.stale)return{element:e,collapsible:e.hasChildren,collapsed:!0};let i;return t&&t.viewState.expanded&&e.id&&t.viewState.expanded.indexOf(e.id)>-1?i=!1:e.forceExpanded?(i=!1,e.forceExpanded=!1):i=e.defaultCollapseState,{element:e,children:e.hasChildren?qt.map(e.children,s=>this.asTreeElement(s,t)):[],collapsible:e.hasChildren,collapsed:i}}processChildren(e){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),e}dispose(){this.disposables.dispose(),this.tree.dispose()}}class RQ{get element(){return{elements:this.node.element.elements.map(e=>e.element),incompressible:this.node.element.incompressible}}get children(){return this.node.children.map(e=>new RQ(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e){this.node=e}}class hot{constructor(e,t,i,s){this.renderer=e,this.nodeMapper=t,this.compressibleNodeMapperProvider=i,this.onDidChangeTwistieState=s,this.renderedNodes=new Map,this.disposables=[],this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,i,s){this.renderer.renderElement(this.nodeMapper.map(e),t,i.templateData,s)}renderCompressedElements(e,t,i,s){this.renderer.renderCompressedElements(this.compressibleNodeMapperProvider().map(e),t,i.templateData,s)}renderTwistie(e,t){return e.slow?(t.classList.add(...ot.asClassNameArray(ye.treeItemLoading)),!0):(t.classList.remove(...ot.asClassNameArray(ye.treeItemLoading)),!1)}disposeElement(e,t,i,s){var r,o;(o=(r=this.renderer).disposeElement)==null||o.call(r,this.nodeMapper.map(e),t,i.templateData,s)}disposeCompressedElements(e,t,i,s){var r,o;(o=(r=this.renderer).disposeCompressedElements)==null||o.call(r,this.compressibleNodeMapperProvider().map(e),t,i.templateData,s)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear(),this.disposables=Ti(this.disposables)}}function fot(n){const e=n&&Kye(n);return e&&{...e,keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{...e.keyboardNavigationLabelProvider,getCompressedNodeKeyboardNavigationLabel(t){return n.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(t.map(i=>i.element))}}}}class got extends qye{constructor(e,t,i,s,r,o,a={}){super(e,t,i,r,o,a),this.compressionDelegate=s,this.compressibleNodeMapper=new LQ(l=>new RQ(l)),this.filter=a.filter}createTree(e,t,i,s,r){const o=new EQ(i),a=s.map(c=>new hot(c,this.nodeMapper,()=>this.compressibleNodeMapper,this._onDidChangeNodeSlowState.event)),l=fot(r)||{};return new jye(e,t,o,a,l)}asTreeElement(e,t){return{incompressible:this.compressionDelegate.isIncompressible(e.element),...super.asTreeElement(e,t)}}updateOptions(e={}){this.tree.updateOptions(e)}render(e,t,i){if(!this.identityProvider)return super.render(e,t);const s=f=>this.identityProvider.getId(f).toString(),r=f=>{const g=new Set;for(const p of f){const _=this.tree.getCompressedTreeNode(p===this.root?null:p);if(_.element)for(const w of _.element.elements)g.add(s(w.element))}return g},o=r(this.tree.getSelection()),a=r(this.tree.getFocus());super.render(e,t,i);const l=this.getSelection();let c=!1;const d=this.getFocus();let u=!1;const h=f=>{const g=f.element;if(g)for(let p=0;p<g.elements.length;p++){const _=s(g.elements[p].element),w=g.elements[g.elements.length-1].element;o.has(_)&&l.indexOf(w)===-1&&(l.push(w),c=!0),a.has(_)&&d.indexOf(w)===-1&&(d.push(w),u=!0)}f.children.forEach(h)};h(this.tree.getCompressedTreeNode(e===this.root?null:e)),c&&this.setSelection(l),u&&this.setFocus(d)}processChildren(e){return this.filter&&(e=qt.filter(e,t=>{const i=this.filter.filter(t,1),s=pot(i);if(s===2)throw new Error("Recursive tree visibility not supported in async data compressed trees");return s===1})),super.processChildren(e)}}function pot(n){return typeof n=="boolean"?n?1:0:kQ(n)?hD(n.visibility):hD(n)}class mot extends zye{constructor(e,t,i,s,r,o={}){super(e,t,i,s,o),this.user=e,this.dataSource=r,this.identityProvider=o.identityProvider}createModel(e,t,i){return new IQ(e,t,i)}}new Re("isMac",Bt,v("isMac","Whether the operating system is macOS"));new Re("isLinux",Po,v("isLinux","Whether the operating system is Linux"));const IB=new Re("isWindows",wr,v("isWindows","Whether the operating system is Windows")),Gye=new Re("isWeb",B0,v("isWeb","Whether the platform is a web browser"));new Re("isMacNative",Bt&&!B0,v("isMacNative","Whether the operating system is macOS on a non-browser platform"));new Re("isIOS",Bu,v("isIOS","Whether the operating system is iOS"));new Re("isMobile",zwe,v("isMobile","Whether the platform is a mobile web browser"));new Re("isDevelopment",!1,!0);new Re("productQualityType","",v("productQualityType","Quality type of VS Code"));const Yye="inputFocus",Zye=new Re(Yye,!1,v("inputFocus","Whether keyboard focus is inside an input box"));var gp=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Gi=function(n,e){return function(t,i){e(t,i,n)}};const $c=Wt("listService");class _ot{get lastFocusedList(){return this._lastFocusedWidget}constructor(){this.disposables=new ue,this.lists=[],this._lastFocusedWidget=void 0,this._hasCreatedStyleController=!1}setLastFocusedList(e){var t,i;e!==this._lastFocusedWidget&&((t=this._lastFocusedWidget)==null||t.getHTMLElement().classList.remove("last-focused"),this._lastFocusedWidget=e,(i=this._lastFocusedWidget)==null||i.getHTMLElement().classList.add("last-focused"))}register(e,t){if(this._hasCreatedStyleController||(this._hasCreatedStyleController=!0,new K1e(jl(),"").style(U0)),this.lists.some(s=>s.widget===e))throw new Error("Cannot register the same widget multiple times");const i={widget:e,extraContextKeys:t};return this.lists.push(i),z3(e.getHTMLElement())&&this.setLastFocusedList(e),Ld(e.onDidFocus(()=>this.setLastFocusedList(e)),Ye(()=>this.lists.splice(this.lists.indexOf(i),1)),e.onDidDispose(()=>{this.lists=this.lists.filter(s=>s!==i),this._lastFocusedWidget===e&&this.setLastFocusedList(void 0)}))}dispose(){this.disposables.dispose()}}const fD=new Re("listScrollAtBoundary","none");he.or(fD.isEqualTo("top"),fD.isEqualTo("both"));he.or(fD.isEqualTo("bottom"),fD.isEqualTo("both"));const Xye=new Re("listFocus",!0),Qye=new Re("treestickyScrollFocused",!1),DB=new Re("listSupportsMultiselect",!0),Jye=he.and(Xye,he.not(Yye),Qye.negate()),AQ=new Re("listHasSelectionOrFocus",!1),MQ=new Re("listDoubleSelection",!1),PQ=new Re("listMultiSelection",!1),NB=new Re("listSelectionNavigation",!1),vot=new Re("listSupportsFind",!0),OQ=new Re("treeElementCanCollapse",!1),bot=new Re("treeElementHasParent",!1),FQ=new Re("treeElementCanExpand",!1),wot=new Re("treeElementHasChild",!1),Cot=new Re("treeFindOpen",!1),eSe="listTypeNavigationMode",tSe="listAutomaticKeyboardNavigation";function TB(n,e){const t=n.createScoped(e.getHTMLElement());return Xye.bindTo(t),t}function RB(n,e){const t=fD.bindTo(n),i=()=>{const s=e.scrollTop===0,r=e.scrollHeight-e.renderHeight-e.scrollTop<1;s&&r?t.set("both"):s?t.set("top"):r?t.set("bottom"):t.set("none")};return i(),e.onDidScroll(i)}const K0="workbench.list.multiSelectModifier",F2="workbench.list.openMode",Dc="workbench.list.horizontalScrolling",BQ="workbench.list.defaultFindMode",WQ="workbench.list.typeNavigationMode",hO="workbench.list.keyboardNavigation",zu="workbench.list.scrollByPage",HQ="workbench.list.defaultFindMatchType",gD="workbench.tree.indent",fO="workbench.tree.renderIndentGuides",Uu="workbench.list.smoothScrolling",df="workbench.list.mouseWheelScrollSensitivity",uf="workbench.list.fastScrollSensitivity",gO="workbench.tree.expandMode",pO="workbench.tree.enableStickyScroll",mO="workbench.tree.stickyScrollMaxItemCount";function hf(n){return n.getValue(K0)==="alt"}class yot extends ee{constructor(e){super(),this.configurationService=e,this.useAltAsMultipleSelectionModifier=hf(e),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(e=>{e.affectsConfiguration(K0)&&(this.useAltAsMultipleSelectionModifier=hf(this.configurationService))}))}isSelectionSingleChangeEvent(e){return this.useAltAsMultipleSelectionModifier?e.browserEvent.altKey:U1e(e)}isSelectionRangeChangeEvent(e){return $1e(e)}}function AB(n,e){const t=n.get(Tt),i=n.get(hi),s=new ue;return[{...e,keyboardNavigationDelegate:{mightProducePrintableCharacter(o){return i.mightProducePrintableCharacter(o)}},smoothScrolling:!!t.getValue(Uu),mouseWheelScrollSensitivity:t.getValue(df),fastScrollSensitivity:t.getValue(uf),multipleSelectionController:e.multipleSelectionController??s.add(new yot(t)),keyboardNavigationEventFilter:Lot(i),scrollByPage:!!t.getValue(zu)},s]}let yce=class extends Ql{constructor(e,t,i,s,r,o,a,l,c){const d=typeof r.horizontalScrolling<"u"?r.horizontalScrolling:!!l.getValue(Dc),[u,h]=c.invokeFunction(AB,r);super(e,t,i,s,{keyboardSupport:!1,...u,horizontalScrolling:d}),this.disposables.add(h),this.contextKeyService=TB(o,this),this.disposables.add(RB(this.contextKeyService,this)),this.listSupportsMultiSelect=DB.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(r.multipleSelectionSupport!==!1),NB.bindTo(this.contextKeyService).set(!!r.selectionNavigation),this.listHasSelectionOrFocus=AQ.bindTo(this.contextKeyService),this.listDoubleSelection=MQ.bindTo(this.contextKeyService),this.listMultiSelection=PQ.bindTo(this.contextKeyService),this.horizontalScrolling=r.horizontalScrolling,this._useAltAsMultipleSelectionModifier=hf(l),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),this.updateStyles(r.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const g=this.getSelection(),p=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(g.length>0||p.length>0),this.listMultiSelection.set(g.length>1),this.listDoubleSelection.set(g.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const g=this.getSelection(),p=this.getFocus();this.listHasSelectionOrFocus.set(g.length>0||p.length>0)})),this.disposables.add(l.onDidChangeConfiguration(g=>{g.affectsConfiguration(K0)&&(this._useAltAsMultipleSelectionModifier=hf(l));let p={};if(g.affectsConfiguration(Dc)&&this.horizontalScrolling===void 0){const _=!!l.getValue(Dc);p={...p,horizontalScrolling:_}}if(g.affectsConfiguration(zu)){const _=!!l.getValue(zu);p={...p,scrollByPage:_}}if(g.affectsConfiguration(Uu)){const _=!!l.getValue(Uu);p={...p,smoothScrolling:_}}if(g.affectsConfiguration(df)){const _=l.getValue(df);p={...p,mouseWheelScrollSensitivity:_}}if(g.affectsConfiguration(uf)){const _=l.getValue(uf);p={...p,fastScrollSensitivity:_}}Object.keys(p).length>0&&this.updateOptions(p)})),this.navigator=new iSe(this,{configurationService:l,...r}),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles!==void 0&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?$0(e):U0)}};yce=gp([Gi(5,at),Gi(6,$c),Gi(7,Tt),Gi(8,Ze)],yce);let Sce=class extends Ert{constructor(e,t,i,s,r,o,a,l,c){const d=typeof r.horizontalScrolling<"u"?r.horizontalScrolling:!!l.getValue(Dc),[u,h]=c.invokeFunction(AB,r);super(e,t,i,s,{keyboardSupport:!1,...u,horizontalScrolling:d}),this.disposables=new ue,this.disposables.add(h),this.contextKeyService=TB(o,this),this.disposables.add(RB(this.contextKeyService,this.widget)),this.horizontalScrolling=r.horizontalScrolling,this.listSupportsMultiSelect=DB.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(r.multipleSelectionSupport!==!1),NB.bindTo(this.contextKeyService).set(!!r.selectionNavigation),this._useAltAsMultipleSelectionModifier=hf(l),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),this.updateStyles(r.overrideStyles),this.disposables.add(l.onDidChangeConfiguration(g=>{g.affectsConfiguration(K0)&&(this._useAltAsMultipleSelectionModifier=hf(l));let p={};if(g.affectsConfiguration(Dc)&&this.horizontalScrolling===void 0){const _=!!l.getValue(Dc);p={...p,horizontalScrolling:_}}if(g.affectsConfiguration(zu)){const _=!!l.getValue(zu);p={...p,scrollByPage:_}}if(g.affectsConfiguration(Uu)){const _=!!l.getValue(Uu);p={...p,smoothScrolling:_}}if(g.affectsConfiguration(df)){const _=l.getValue(df);p={...p,mouseWheelScrollSensitivity:_}}if(g.affectsConfiguration(uf)){const _=l.getValue(uf);p={...p,fastScrollSensitivity:_}}Object.keys(p).length>0&&this.updateOptions(p)})),this.navigator=new iSe(this,{configurationService:l,...r}),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles!==void 0&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?$0(e):U0)}dispose(){this.disposables.dispose(),super.dispose()}};Sce=gp([Gi(5,at),Gi(6,$c),Gi(7,Tt),Gi(8,Ze)],Sce);let xce=class extends N${constructor(e,t,i,s,r,o,a,l,c,d){const u=typeof o.horizontalScrolling<"u"?o.horizontalScrolling:!!c.getValue(Dc),[h,f]=d.invokeFunction(AB,o);super(e,t,i,s,r,{keyboardSupport:!1,...h,horizontalScrolling:u}),this.disposables.add(f),this.contextKeyService=TB(a,this),this.disposables.add(RB(this.contextKeyService,this)),this.listSupportsMultiSelect=DB.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(o.multipleSelectionSupport!==!1),NB.bindTo(this.contextKeyService).set(!!o.selectionNavigation),this.listHasSelectionOrFocus=AQ.bindTo(this.contextKeyService),this.listDoubleSelection=MQ.bindTo(this.contextKeyService),this.listMultiSelection=PQ.bindTo(this.contextKeyService),this.horizontalScrolling=o.horizontalScrolling,this._useAltAsMultipleSelectionModifier=hf(c),this.disposables.add(this.contextKeyService),this.disposables.add(l.register(this)),this.updateStyles(o.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const p=this.getSelection(),_=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(p.length>0||_.length>0),this.listMultiSelection.set(p.length>1),this.listDoubleSelection.set(p.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const p=this.getSelection(),_=this.getFocus();this.listHasSelectionOrFocus.set(p.length>0||_.length>0)})),this.disposables.add(c.onDidChangeConfiguration(p=>{p.affectsConfiguration(K0)&&(this._useAltAsMultipleSelectionModifier=hf(c));let _={};if(p.affectsConfiguration(Dc)&&this.horizontalScrolling===void 0){const w=!!c.getValue(Dc);_={..._,horizontalScrolling:w}}if(p.affectsConfiguration(zu)){const w=!!c.getValue(zu);_={..._,scrollByPage:w}}if(p.affectsConfiguration(Uu)){const w=!!c.getValue(Uu);_={..._,smoothScrolling:w}}if(p.affectsConfiguration(df)){const w=c.getValue(df);_={..._,mouseWheelScrollSensitivity:w}}if(p.affectsConfiguration(uf)){const w=c.getValue(uf);_={..._,fastScrollSensitivity:w}}Object.keys(_).length>0&&this.updateOptions(_)})),this.navigator=new Sot(this,{configurationService:c,...o}),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles!==void 0&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?$0(e):U0)}dispose(){this.disposables.dispose(),super.dispose()}};xce=gp([Gi(6,at),Gi(7,$c),Gi(8,Tt),Gi(9,Ze)],xce);class VQ extends ee{constructor(e,t){super(),this.widget=e,this._onDidOpen=this._register(new X),this.onDidOpen=this._onDidOpen.event,this._register(Ee.filter(this.widget.onDidChangeSelection,i=>tg(i.browserEvent))(i=>this.onSelectionFromKeyboard(i))),this._register(this.widget.onPointer(i=>this.onPointer(i.element,i.browserEvent))),this._register(this.widget.onMouseDblClick(i=>this.onMouseDblClick(i.element,i.browserEvent))),typeof(t==null?void 0:t.openOnSingleClick)!="boolean"&&(t!=null&&t.configurationService)?(this.openOnSingleClick=(t==null?void 0:t.configurationService.getValue(F2))!=="doubleClick",this._register(t==null?void 0:t.configurationService.onDidChangeConfiguration(i=>{i.affectsConfiguration(F2)&&(this.openOnSingleClick=(t==null?void 0:t.configurationService.getValue(F2))!=="doubleClick")}))):this.openOnSingleClick=(t==null?void 0:t.openOnSingleClick)??!0}onSelectionFromKeyboard(e){if(e.elements.length!==1)return;const t=e.browserEvent,i=typeof t.preserveFocus=="boolean"?t.preserveFocus:!0,s=typeof t.pinned=="boolean"?t.pinned:!i;this._open(this.getSelectedElement(),i,s,!1,e.browserEvent)}onPointer(e,t){if(!this.openOnSingleClick||t.detail===2)return;const s=t.button===1,r=!0,o=s,a=t.ctrlKey||t.metaKey||t.altKey;this._open(e,r,o,a,t)}onMouseDblClick(e,t){if(!t)return;const i=t.target;if(i.classList.contains("monaco-tl-twistie")||i.classList.contains("monaco-icon-label")&&i.classList.contains("folder-icon")&&t.offsetX<16)return;const r=!1,o=!0,a=t.ctrlKey||t.metaKey||t.altKey;this._open(e,r,o,a,t)}_open(e,t,i,s,r){e&&this._onDidOpen.fire({editorOptions:{preserveFocus:t,pinned:i,revealIfVisible:!0},sideBySide:s,element:e,browserEvent:r})}}class iSe extends VQ{constructor(e,t){super(e,t),this.widget=e}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class Sot extends VQ{constructor(e,t){super(e,t)}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class xot extends VQ{constructor(e,t){super(e,t)}getSelectedElement(){return this.widget.getSelection()[0]??void 0}}function Lot(n){let e=!1;return t=>{if(t.toKeyCodeChord().isModifierKey())return!1;if(e)return e=!1,!1;const i=n.softDispatch(t,t.target);return i.kind===1?(e=!0,!1):(e=!1,i.kind===0)}}let P$=class extends NQ{constructor(e,t,i,s,r,o,a,l,c){const{options:d,getTypeNavigationMode:u,disposable:h}=o.invokeFunction(eT,r);super(e,t,i,s,d),this.disposables.add(h),this.internals=new w0(this,r,u,r.overrideStyles,a,l,c),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};P$=gp([Gi(5,Ze),Gi(6,at),Gi(7,$c),Gi(8,Tt)],P$);let Lce=class extends jye{constructor(e,t,i,s,r,o,a,l,c){const{options:d,getTypeNavigationMode:u,disposable:h}=o.invokeFunction(eT,r);super(e,t,i,s,d),this.disposables.add(h),this.internals=new w0(this,r,u,r.overrideStyles,a,l,c),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};Lce=gp([Gi(5,Ze),Gi(6,at),Gi(7,$c),Gi(8,Tt)],Lce);let kce=class extends mot{constructor(e,t,i,s,r,o,a,l,c,d){const{options:u,getTypeNavigationMode:h,disposable:f}=a.invokeFunction(eT,o);super(e,t,i,s,r,u),this.disposables.add(f),this.internals=new w0(this,o,h,o.overrideStyles,l,c,d),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles!==void 0&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};kce=gp([Gi(6,Ze),Gi(7,at),Gi(8,$c),Gi(9,Tt)],kce);let O$=class extends qye{get onDidOpen(){return this.internals.onDidOpen}constructor(e,t,i,s,r,o,a,l,c,d){const{options:u,getTypeNavigationMode:h,disposable:f}=a.invokeFunction(eT,o);super(e,t,i,s,r,u),this.disposables.add(f),this.internals=new w0(this,o,h,o.overrideStyles,l,c,d),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};O$=gp([Gi(6,Ze),Gi(7,at),Gi(8,$c),Gi(9,Tt)],O$);let Ece=class extends got{constructor(e,t,i,s,r,o,a,l,c,d,u){const{options:h,getTypeNavigationMode:f,disposable:g}=l.invokeFunction(eT,a);super(e,t,i,s,r,o,h),this.disposables.add(g),this.internals=new w0(this,a,f,a.overrideStyles,c,d,u),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};Ece=gp([Gi(7,Ze),Gi(8,at),Gi(9,$c),Gi(10,Tt)],Ece);function nSe(n){const e=n.getValue(BQ);if(e==="highlight")return yg.Highlight;if(e==="filter")return yg.Filter;const t=n.getValue(hO);if(t==="simple"||t==="highlight")return yg.Highlight;if(t==="filter")return yg.Filter}function sSe(n){const e=n.getValue(HQ);if(e==="fuzzy")return b0.Fuzzy;if(e==="contiguous")return b0.Contiguous}function eT(n,e){const t=n.get(Tt),i=n.get(hp),s=n.get(at),r=n.get(Ze),o=()=>{const h=s.getContextKeyValue(eSe);if(h==="automatic")return Fh.Automatic;if(h==="trigger"||s.getContextKeyValue(tSe)===!1)return Fh.Trigger;const g=t.getValue(WQ);if(g==="automatic")return Fh.Automatic;if(g==="trigger")return Fh.Trigger},a=e.horizontalScrolling!==void 0?e.horizontalScrolling:!!t.getValue(Dc),[l,c]=r.invokeFunction(AB,e),d=e.paddingBottom,u=e.renderIndentGuides!==void 0?e.renderIndentGuides:t.getValue(fO);return{getTypeNavigationMode:o,disposable:c,options:{keyboardSupport:!1,...l,indent:typeof t.getValue(gD)=="number"?t.getValue(gD):void 0,renderIndentGuides:u,smoothScrolling:!!t.getValue(Uu),defaultFindMode:nSe(t),defaultFindMatchType:sSe(t),horizontalScrolling:a,scrollByPage:!!t.getValue(zu),paddingBottom:d,hideTwistiesOfChildlessElements:e.hideTwistiesOfChildlessElements,expandOnlyOnTwistieClick:e.expandOnlyOnTwistieClick??t.getValue(gO)==="doubleClick",contextViewProvider:i,findWidgetStyles:Dit,enableStickyScroll:!!t.getValue(pO),stickyScrollMaxItemCount:Number(t.getValue(mO))}}}let w0=class{get onDidOpen(){return this.navigator.onDidOpen}constructor(e,t,i,s,r,o,a){this.tree=e,this.disposables=[],this.contextKeyService=TB(r,e),this.disposables.push(RB(this.contextKeyService,e)),this.listSupportsMultiSelect=DB.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(t.multipleSelectionSupport!==!1),NB.bindTo(this.contextKeyService).set(!!t.selectionNavigation),this.listSupportFindWidget=vot.bindTo(this.contextKeyService),this.listSupportFindWidget.set(t.findWidgetEnabled??!0),this.hasSelectionOrFocus=AQ.bindTo(this.contextKeyService),this.hasDoubleSelection=MQ.bindTo(this.contextKeyService),this.hasMultiSelection=PQ.bindTo(this.contextKeyService),this.treeElementCanCollapse=OQ.bindTo(this.contextKeyService),this.treeElementHasParent=bot.bindTo(this.contextKeyService),this.treeElementCanExpand=FQ.bindTo(this.contextKeyService),this.treeElementHasChild=wot.bindTo(this.contextKeyService),this.treeFindOpen=Cot.bindTo(this.contextKeyService),this.treeStickyScrollFocused=Qye.bindTo(this.contextKeyService),this._useAltAsMultipleSelectionModifier=hf(a),this.updateStyleOverrides(s);const c=()=>{const u=e.getFocus()[0];if(!u)return;const h=e.getNode(u);this.treeElementCanCollapse.set(h.collapsible&&!h.collapsed),this.treeElementHasParent.set(!!e.getParentElement(u)),this.treeElementCanExpand.set(h.collapsible&&h.collapsed),this.treeElementHasChild.set(!!e.getFirstElementChild(u))},d=new Set;d.add(eSe),d.add(tSe),this.disposables.push(this.contextKeyService,o.register(e),e.onDidChangeSelection(()=>{const u=e.getSelection(),h=e.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.hasSelectionOrFocus.set(u.length>0||h.length>0),this.hasMultiSelection.set(u.length>1),this.hasDoubleSelection.set(u.length===2)})}),e.onDidChangeFocus(()=>{const u=e.getSelection(),h=e.getFocus();this.hasSelectionOrFocus.set(u.length>0||h.length>0),c()}),e.onDidChangeCollapseState(c),e.onDidChangeModel(c),e.onDidChangeFindOpenState(u=>this.treeFindOpen.set(u)),e.onDidChangeStickyScrollFocused(u=>this.treeStickyScrollFocused.set(u)),a.onDidChangeConfiguration(u=>{let h={};if(u.affectsConfiguration(K0)&&(this._useAltAsMultipleSelectionModifier=hf(a)),u.affectsConfiguration(gD)){const f=a.getValue(gD);h={...h,indent:f}}if(u.affectsConfiguration(fO)&&t.renderIndentGuides===void 0){const f=a.getValue(fO);h={...h,renderIndentGuides:f}}if(u.affectsConfiguration(Uu)){const f=!!a.getValue(Uu);h={...h,smoothScrolling:f}}if(u.affectsConfiguration(BQ)||u.affectsConfiguration(hO)){const f=nSe(a);h={...h,defaultFindMode:f}}if(u.affectsConfiguration(WQ)||u.affectsConfiguration(hO)){const f=i();h={...h,typeNavigationMode:f}}if(u.affectsConfiguration(HQ)){const f=sSe(a);h={...h,defaultFindMatchType:f}}if(u.affectsConfiguration(Dc)&&t.horizontalScrolling===void 0){const f=!!a.getValue(Dc);h={...h,horizontalScrolling:f}}if(u.affectsConfiguration(zu)){const f=!!a.getValue(zu);h={...h,scrollByPage:f}}if(u.affectsConfiguration(gO)&&t.expandOnlyOnTwistieClick===void 0&&(h={...h,expandOnlyOnTwistieClick:a.getValue(gO)==="doubleClick"}),u.affectsConfiguration(pO)){const f=a.getValue(pO);h={...h,enableStickyScroll:f}}if(u.affectsConfiguration(mO)){const f=Math.max(1,a.getValue(mO));h={...h,stickyScrollMaxItemCount:f}}if(u.affectsConfiguration(df)){const f=a.getValue(df);h={...h,mouseWheelScrollSensitivity:f}}if(u.affectsConfiguration(uf)){const f=a.getValue(uf);h={...h,fastScrollSensitivity:f}}Object.keys(h).length>0&&e.updateOptions(h)}),this.contextKeyService.onDidChangeContext(u=>{u.affectsSome(d)&&e.updateOptions({typeNavigationMode:i()})})),this.navigator=new xot(e,{configurationService:a,...t}),this.disposables.push(this.navigator)}updateOptions(e){e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyleOverrides(e){this.tree.style(e?$0(e):U0)}dispose(){this.disposables=Ti(this.disposables)}};w0=gp([Gi(4,at),Gi(5,$c),Gi(6,Tt)],w0);const kot=_n.as(Bd.Configuration);kot.registerConfiguration({id:"workbench",order:7,title:v("workbenchConfigurationTitle","Workbench"),type:"object",properties:{[K0]:{type:"string",enum:["ctrlCmd","alt"],markdownEnumDescriptions:[v("multiSelectModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),v("multiSelectModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],default:"ctrlCmd",description:v({key:"multiSelectModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add an item in trees and lists to a multi-selection with the mouse (for example in the explorer, open editors and scm view). The 'Open to Side' mouse gestures - if supported - will adapt such that they do not conflict with the multiselect modifier.")},[F2]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:v({key:"openModeModifier",comment:["`singleClick` and `doubleClick` refers to a value the setting can take and should not be localized."]},"Controls how to open items in trees and lists using the mouse (if supported). Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[Dc]:{type:"boolean",default:!1,description:v("horizontalScrolling setting","Controls whether lists and trees support horizontal scrolling in the workbench. Warning: turning on this setting has a performance implication.")},[zu]:{type:"boolean",default:!1,description:v("list.scrollByPage","Controls whether clicks in the scrollbar scroll page by page.")},[gD]:{type:"number",default:8,minimum:4,maximum:40,description:v("tree indent setting","Controls tree indentation in pixels.")},[fO]:{type:"string",enum:["none","onHover","always"],default:"onHover",description:v("render tree indent guides","Controls whether the tree should render indent guides.")},[Uu]:{type:"boolean",default:!1,description:v("list smoothScrolling setting","Controls whether lists and trees have smooth scrolling.")},[df]:{type:"number",default:1,markdownDescription:v("Mouse Wheel Scroll Sensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")},[uf]:{type:"number",default:5,markdownDescription:v("Fast Scroll Sensitivity","Scrolling speed multiplier when pressing `Alt`.")},[BQ]:{type:"string",enum:["highlight","filter"],enumDescriptions:[v("defaultFindModeSettingKey.highlight","Highlight elements when searching. Further up and down navigation will traverse only the highlighted elements."),v("defaultFindModeSettingKey.filter","Filter elements when searching.")],default:"highlight",description:v("defaultFindModeSettingKey","Controls the default find mode for lists and trees in the workbench.")},[hO]:{type:"string",enum:["simple","highlight","filter"],enumDescriptions:[v("keyboardNavigationSettingKey.simple","Simple keyboard navigation focuses elements which match the keyboard input. Matching is done only on prefixes."),v("keyboardNavigationSettingKey.highlight","Highlight keyboard navigation highlights elements which match the keyboard input. Further up and down navigation will traverse only the highlighted elements."),v("keyboardNavigationSettingKey.filter","Filter keyboard navigation will filter out and hide all the elements which do not match the keyboard input.")],default:"highlight",description:v("keyboardNavigationSettingKey","Controls the keyboard navigation style for lists and trees in the workbench. Can be simple, highlight and filter."),deprecated:!0,deprecationMessage:v("keyboardNavigationSettingKeyDeprecated","Please use 'workbench.list.defaultFindMode' and	'workbench.list.typeNavigationMode' instead.")},[HQ]:{type:"string",enum:["fuzzy","contiguous"],enumDescriptions:[v("defaultFindMatchTypeSettingKey.fuzzy","Use fuzzy matching when searching."),v("defaultFindMatchTypeSettingKey.contiguous","Use contiguous matching when searching.")],default:"fuzzy",description:v("defaultFindMatchTypeSettingKey","Controls the type of matching used when searching lists and trees in the workbench.")},[gO]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:v("expand mode","Controls how tree folders are expanded when clicking the folder names. Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[pO]:{type:"boolean",default:!0,description:v("sticky scroll","Controls whether sticky scrolling is enabled in trees.")},[mO]:{type:"number",minimum:1,default:7,markdownDescription:v("sticky scroll maximum items","Controls the number of sticky elements displayed in the tree when {0} is enabled.","`#workbench.tree.enableStickyScroll#`")},[WQ]:{type:"string",enum:["automatic","trigger"],default:"automatic",markdownDescription:v("typeNavigationMode2","Controls how type navigation works in lists and trees in the workbench. When set to `trigger`, type navigation begins once the `list.triggerTypeNavigation` command is run.")}}});class Qm extends ee{constructor(e,t){super(),this.options=t,this.text="",this.title="",this.highlights=[],this.didEverRender=!1,this.supportIcons=(t==null?void 0:t.supportIcons)??!1,this.domNode=_e(e,xe("span.monaco-highlighted-label"))}get element(){return this.domNode}set(e,t=[],i="",s){e||(e=""),s&&(e=Qm.escapeNewLines(e,t)),!(this.didEverRender&&this.text===e&&this.title===i&&Ga(this.highlights,t))&&(this.text=e,this.title=i,this.highlights=t,this.render())}render(){var i,s,r;const e=[];let t=0;for(const o of this.highlights){if(o.end===o.start)continue;if(t<o.start){const c=this.text.substring(t,o.start);this.supportIcons?e.push(...Ym(c)):e.push(c),t=o.start}const a=this.text.substring(t,o.end),l=xe("span.highlight",void 0,...this.supportIcons?Ym(a):[a]);o.extraClasses&&l.classList.add(...o.extraClasses),e.push(l),t=o.end}if(t<this.text.length){const o=this.text.substring(t);this.supportIcons?e.push(...Ym(o)):e.push(o)}if(sr(this.domNode,...e),(s=(i=this.options)==null?void 0:i.hoverDelegate)!=null&&s.showNativeHover)this.domNode.title=this.title;else if(!this.customHover&&this.title!==""){const o=((r=this.options)==null?void 0:r.hoverDelegate)??Vo("mouse");this.customHover=this._register(Gu().setupManagedHover(o,this.domNode,this.title))}else this.customHover&&this.customHover.update(this.title);this.didEverRender=!0}static escapeNewLines(e,t){let i=0,s=0;return e.replace(/\r\n|\r|\n/g,(r,o)=>{s=r===`\r
`?-1:0,o+=i;for(const a of t)a.end<=o||(a.start>=o&&(a.start+=s),a.end>=o&&(a.end+=s));return i+=s,""})}}class $L{constructor(e){this._element=e}get element(){return this._element}set textContent(e){this.disposed||e===this._textContent||(this._textContent=e,this._element.textContent=e)}set classNames(e){this.disposed||Ga(e,this._classNames)||(this._classNames=e,this._element.classList.value="",this._element.classList.add(...e))}set empty(e){this.disposed||e===this._empty||(this._empty=e,this._element.style.marginLeft=e?"0":"")}dispose(){this.disposed=!0}}class _O extends ee{constructor(e,t){super(),this.customHovers=new Map,this.creationOptions=t,this.domNode=this._register(new $L(_e(e,xe(".monaco-icon-label")))),this.labelContainer=_e(this.domNode.element,xe(".monaco-icon-label-container")),this.nameContainer=_e(this.labelContainer,xe("span.monaco-icon-name-container")),t!=null&&t.supportHighlights||t!=null&&t.supportIcons?this.nameNode=this._register(new Dot(this.nameContainer,!!t.supportIcons)):this.nameNode=new Eot(this.nameContainer),this.hoverDelegate=(t==null?void 0:t.hoverDelegate)??Vo("mouse")}get element(){return this.domNode.element}setLabel(e,t,i){const s=["monaco-icon-label"],r=["monaco-icon-label-container"];let o="";i&&(i.extraClasses&&s.push(...i.extraClasses),i.italic&&s.push("italic"),i.strikethrough&&s.push("strikethrough"),i.disabledCommand&&r.push("disabled"),i.title&&(typeof i.title=="string"?o+=i.title:o+=e));const a=this.domNode.element.querySelector(".monaco-icon-label-iconpath");if(i!=null&&i.iconPath){let l;!a||!Ns(a)?(l=xe(".monaco-icon-label-iconpath"),this.domNode.element.prepend(l)):l=a,l.style.backgroundImage=Qg(i==null?void 0:i.iconPath)}else a&&a.remove();if(this.domNode.classNames=s,this.domNode.element.setAttribute("aria-label",o),this.labelContainer.classList.value="",this.labelContainer.classList.add(...r),this.setupHover(i!=null&&i.descriptionTitle?this.labelContainer:this.element,i==null?void 0:i.title),this.nameNode.setLabel(e,i),t||this.descriptionNode){const l=this.getOrCreateDescriptionNode();l instanceof Qm?(l.set(t||"",i?i.descriptionMatches:void 0,void 0,i==null?void 0:i.labelEscapeNewLines),this.setupHover(l.element,i==null?void 0:i.descriptionTitle)):(l.textContent=t&&(i!=null&&i.labelEscapeNewLines)?Qm.escapeNewLines(t,[]):t||"",this.setupHover(l.element,(i==null?void 0:i.descriptionTitle)||""),l.empty=!t)}if(i!=null&&i.suffix||this.suffixNode){const l=this.getOrCreateSuffixNode();l.textContent=(i==null?void 0:i.suffix)??""}}setupHover(e,t){const i=this.customHovers.get(e);if(i&&(i.dispose(),this.customHovers.delete(e)),!t){e.removeAttribute("title");return}if(this.hoverDelegate.showNativeHover)(function(r,o){ca(o)?r.title=QX(o):o!=null&&o.markdownNotSupportedFallback?r.title=o.markdownNotSupportedFallback:r.removeAttribute("title")})(e,t);else{const s=Gu().setupManagedHover(this.hoverDelegate,e,t);s&&this.customHovers.set(e,s)}}dispose(){super.dispose();for(const e of this.customHovers.values())e.dispose();this.customHovers.clear()}getOrCreateSuffixNode(){if(!this.suffixNode){const e=this._register(new $L(Iqe(this.nameContainer,xe("span.monaco-icon-suffix-container"))));this.suffixNode=this._register(new $L(_e(e.element,xe("span.label-suffix"))))}return this.suffixNode}getOrCreateDescriptionNode(){var e;if(!this.descriptionNode){const t=this._register(new $L(_e(this.labelContainer,xe("span.monaco-icon-description-container"))));(e=this.creationOptions)!=null&&e.supportDescriptionHighlights?this.descriptionNode=this._register(new Qm(_e(t.element,xe("span.label-description")),{supportIcons:!!this.creationOptions.supportIcons})):this.descriptionNode=this._register(new $L(_e(t.element,xe("span.label-description"))))}return this.descriptionNode}}class Eot{constructor(e){this.container=e,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&Ga(this.options,t)))if(this.label=e,this.options=t,typeof e=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=_e(this.container,xe("a.label-name",{id:t==null?void 0:t.domId}))),this.singleLabel.textContent=e;else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;for(let i=0;i<e.length;i++){const s=e[i],r=(t==null?void 0:t.domId)&&`${t==null?void 0:t.domId}_${i}`;_e(this.container,xe("a.label-name",{id:r,"data-icon-label-count":e.length,"data-icon-label-index":i,role:"treeitem"},s)),i<e.length-1&&_e(this.container,xe("span.label-separator",void 0,(t==null?void 0:t.separator)||"/"))}}}}function Iot(n,e,t){if(!t)return;let i=0;return n.map(s=>{const r={start:i,end:i+s.length},o=t.map(a=>Ir.intersect(r,a)).filter(a=>!Ir.isEmpty(a)).map(({start:a,end:l})=>({start:a-i,end:l-i}));return i=r.end+e.length,o})}class Dot extends ee{constructor(e,t){super(),this.container=e,this.supportIcons=t,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&Ga(this.options,t)))if(this.label=e,this.options=t,typeof e=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=this._register(new Qm(_e(this.container,xe("a.label-name",{id:t==null?void 0:t.domId})),{supportIcons:this.supportIcons}))),this.singleLabel.set(e,t==null?void 0:t.matches,void 0,t==null?void 0:t.labelEscapeNewLines);else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;const i=(t==null?void 0:t.separator)||"/",s=Iot(e,i,t==null?void 0:t.matches);for(let r=0;r<e.length;r++){const o=e[r],a=s?s[r]:void 0,l=(t==null?void 0:t.domId)&&`${t==null?void 0:t.domId}_${r}`,c=xe("a.label-name",{id:l,"data-icon-label-count":e.length,"data-icon-label-index":r,role:"treeitem"});this._register(new Qm(_e(this.container,c),{supportIcons:this.supportIcons})).set(o,a,void 0,t==null?void 0:t.labelEscapeNewLines),r<e.length-1&&_e(c,xe("span.label-separator",void 0,i))}}}}const cA=xe,rSe={keybindingLabelBackground:void 0,keybindingLabelForeground:void 0,keybindingLabelBorder:void 0,keybindingLabelBottomBorder:void 0,keybindingLabelShadow:void 0};class zx extends ee{constructor(e,t,i){super(),this.os=t,this.keyElements=new Set,this.options=i||Object.create(null);const s=this.options.keybindingLabelForeground;this.domNode=_e(e,cA(".monaco-keybinding")),s&&(this.domNode.style.color=s),this.hover=this._register(Gu().setupManagedHover(Vo("mouse"),this.domNode,"")),this.didEverRender=!1,e.appendChild(this.domNode)}get element(){return this.domNode}set(e,t){this.didEverRender&&this.keybinding===e&&zx.areSame(this.matches,t)||(this.keybinding=e,this.matches=t,this.render())}render(){if(this.clear(),this.keybinding){const e=this.keybinding.getChords();e[0]&&this.renderChord(this.domNode,e[0],this.matches?this.matches.firstPart:null);for(let i=1;i<e.length;i++)_e(this.domNode,cA("span.monaco-keybinding-key-chord-separator",void 0," ")),this.renderChord(this.domNode,e[i],this.matches?this.matches.chordPart:null);const t=this.options.disableTitle??!1?void 0:this.keybinding.getAriaLabel()||void 0;this.hover.update(t),this.domNode.setAttribute("aria-label",t||"")}else this.options&&this.options.renderUnboundKeybindings&&this.renderUnbound(this.domNode);this.didEverRender=!0}clear(){nr(this.domNode),this.keyElements.clear()}renderChord(e,t,i){const s=sQ.modifierLabels[this.os];t.ctrlKey&&this.renderKey(e,s.ctrlKey,!!(i!=null&&i.ctrlKey),s.separator),t.shiftKey&&this.renderKey(e,s.shiftKey,!!(i!=null&&i.shiftKey),s.separator),t.altKey&&this.renderKey(e,s.altKey,!!(i!=null&&i.altKey),s.separator),t.metaKey&&this.renderKey(e,s.metaKey,!!(i!=null&&i.metaKey),s.separator);const r=t.keyLabel;r&&this.renderKey(e,r,!!(i!=null&&i.keyCode),"")}renderKey(e,t,i,s){_e(e,this.createKeyElement(t,i?".highlight":"")),s&&_e(e,cA("span.monaco-keybinding-key-separator",void 0,s))}renderUnbound(e){_e(e,this.createKeyElement(v("unbound","Unbound")))}createKeyElement(e,t=""){const i=cA("span.monaco-keybinding-key"+t,void 0,e);return this.keyElements.add(i),this.options.keybindingLabelBackground&&(i.style.backgroundColor=this.options.keybindingLabelBackground),this.options.keybindingLabelBorder&&(i.style.borderColor=this.options.keybindingLabelBorder),this.options.keybindingLabelBottomBorder&&(i.style.borderBottomColor=this.options.keybindingLabelBottomBorder),this.options.keybindingLabelShadow&&(i.style.boxShadow=`inset 0 -1px 0 ${this.options.keybindingLabelShadow}`),i}static areSame(e,t){return e===t||!e&&!t?!0:!!e&&!!t&&Ga(e.firstPart,t.firstPart)&&Ga(e.chordPart,t.chordPart)}}const Ice=new Wu(()=>{const n=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return{collator:n,collatorIsNumeric:n.resolvedOptions().numeric}});function Not(n,e,t=!1){const i=n||"",s=e||"",r=Ice.value.collator.compare(i,s);return Ice.value.collatorIsNumeric&&r===0&&i!==s?i<s?-1:1:r}function Tot(n,e,t){const i=n.toLowerCase(),s=e.toLowerCase(),r=Rot(n,e,t);if(r)return r;const o=i.endsWith(t),a=s.endsWith(t);if(o!==a)return o?-1:1;const l=Not(i,s);return l!==0?l:i.localeCompare(s)}function Rot(n,e,t){const i=n.toLowerCase(),s=e.toLowerCase(),r=i.startsWith(t),o=s.startsWith(t);if(r!==o)return r?-1:1;if(r&&o){if(i.length<s.length)return-1;if(i.length>s.length)return 1}return 0}var MB=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},F$=function(n,e){return function(t,i){e(t,i,n)}},B$;const Yd=xe;class oSe{constructor(e,t,i){this.index=e,this.hasCheckbox=t,this._hidden=!1,this._init=new Wu(()=>{const s=i.label??"",r=fk(s).text.trim(),o=i.ariaLabel||[s,this.saneDescription,this.saneDetail].map(a=>BJe(a)).filter(a=>!!a).join(", ");return{saneLabel:s,saneSortLabel:r,saneAriaLabel:o}}),this._saneDescription=i.description,this._saneTooltip=i.tooltip}get saneLabel(){return this._init.value.saneLabel}get saneSortLabel(){return this._init.value.saneSortLabel}get saneAriaLabel(){return this._init.value.saneAriaLabel}get element(){return this._element}set element(e){this._element=e}get hidden(){return this._hidden}set hidden(e){this._hidden=e}get saneDescription(){return this._saneDescription}set saneDescription(e){this._saneDescription=e}get saneDetail(){return this._saneDetail}set saneDetail(e){this._saneDetail=e}get saneTooltip(){return this._saneTooltip}set saneTooltip(e){this._saneTooltip=e}get labelHighlights(){return this._labelHighlights}set labelHighlights(e){this._labelHighlights=e}get descriptionHighlights(){return this._descriptionHighlights}set descriptionHighlights(e){this._descriptionHighlights=e}get detailHighlights(){return this._detailHighlights}set detailHighlights(e){this._detailHighlights=e}}class cr extends oSe{constructor(e,t,i,s,r,o){var a,l,c;super(e,t,r),this.fireButtonTriggered=i,this._onChecked=s,this.item=r,this._separator=o,this._checked=!1,this.onChecked=t?Ee.map(Ee.filter(this._onChecked.event,d=>d.element===this),d=>d.checked):Ee.None,this._saneDetail=r.detail,this._labelHighlights=(a=r.highlights)==null?void 0:a.label,this._descriptionHighlights=(l=r.highlights)==null?void 0:l.description,this._detailHighlights=(c=r.highlights)==null?void 0:c.detail}get separator(){return this._separator}set separator(e){this._separator=e}get checked(){return this._checked}set checked(e){e!==this._checked&&(this._checked=e,this._onChecked.fire({element:this,checked:e}))}get checkboxDisabled(){return!!this.item.disabled}}var xh;(function(n){n[n.NONE=0]="NONE",n[n.MOUSE_HOVER=1]="MOUSE_HOVER",n[n.ACTIVE_ITEM=2]="ACTIVE_ITEM"})(xh||(xh={}));class Kv extends oSe{constructor(e,t,i){super(e,!1,i),this.fireSeparatorButtonTriggered=t,this.separator=i,this.children=new Array,this.focusInsideSeparator=xh.NONE}}class Aot{getHeight(e){return e instanceof Kv?30:e.saneDetail?44:22}getTemplateId(e){return e instanceof cr?vO.ID:bO.ID}}class Mot{getWidgetAriaLabel(){return v("quickInput","Quick Input")}getAriaLabel(e){var t;return(t=e.separator)!=null&&t.label?`${e.saneAriaLabel}, ${e.separator.label}`:e.saneAriaLabel}getWidgetRole(){return"listbox"}getRole(e){return e.hasCheckbox?"checkbox":"option"}isChecked(e){if(!(!e.hasCheckbox||!(e instanceof cr)))return{get value(){return e.checked},onDidChange:t=>e.onChecked(()=>t())}}}class aSe{constructor(e){this.hoverDelegate=e}renderTemplate(e){const t=Object.create(null);t.toDisposeElement=new ue,t.toDisposeTemplate=new ue,t.entry=_e(e,Yd(".quick-input-list-entry"));const i=_e(t.entry,Yd("label.quick-input-list-label"));t.toDisposeTemplate.add(Cn(i,Se.CLICK,c=>{t.checkbox.offsetParent||c.preventDefault()})),t.checkbox=_e(i,Yd("input.quick-input-list-checkbox")),t.checkbox.type="checkbox";const s=_e(i,Yd(".quick-input-list-rows")),r=_e(s,Yd(".quick-input-list-row")),o=_e(s,Yd(".quick-input-list-row"));t.label=new _O(r,{supportHighlights:!0,supportDescriptionHighlights:!0,supportIcons:!0,hoverDelegate:this.hoverDelegate}),t.toDisposeTemplate.add(t.label),t.icon=pX(t.label.element,Yd(".quick-input-list-icon"));const a=_e(r,Yd(".quick-input-list-entry-keybinding"));t.keybinding=new zx(a,Ka),t.toDisposeTemplate.add(t.keybinding);const l=_e(o,Yd(".quick-input-list-label-meta"));return t.detail=new _O(l,{supportHighlights:!0,supportIcons:!0,hoverDelegate:this.hoverDelegate}),t.toDisposeTemplate.add(t.detail),t.separator=_e(t.entry,Yd(".quick-input-list-separator")),t.actionBar=new Ul(t.entry,this.hoverDelegate?{hoverDelegate:this.hoverDelegate}:void 0),t.actionBar.domNode.classList.add("quick-input-list-entry-action-bar"),t.toDisposeTemplate.add(t.actionBar),t}disposeTemplate(e){e.toDisposeElement.dispose(),e.toDisposeTemplate.dispose()}disposeElement(e,t,i){i.toDisposeElement.clear(),i.actionBar.clear()}}var nw;let vO=(nw=class extends aSe{constructor(e,t){super(e),this.themeService=t,this._itemsWithSeparatorsFrequency=new Map}get templateId(){return B$.ID}renderTemplate(e){const t=super.renderTemplate(e);return t.toDisposeTemplate.add(Cn(t.checkbox,Se.CHANGE,i=>{t.element.checked=t.checkbox.checked})),t}renderElement(e,t,i){var h;const s=e.element;i.element=s,s.element=i.entry??void 0;const r=s.item;i.checkbox.checked=s.checked,i.toDisposeElement.add(s.onChecked(f=>i.checkbox.checked=f)),i.checkbox.disabled=s.checkboxDisabled;const{labelHighlights:o,descriptionHighlights:a,detailHighlights:l}=s;if(r.iconPath){const f=AS(this.themeService.getColorTheme().type)?r.iconPath.dark:r.iconPath.light??r.iconPath.dark,g=Xe.revive(f);i.icon.className="quick-input-list-icon",i.icon.style.backgroundImage=Qg(g)}else i.icon.style.backgroundImage="",i.icon.className=r.iconClass?`quick-input-list-icon ${r.iconClass}`:"";let c;!s.saneTooltip&&s.saneDescription&&(c={markdown:{value:s.saneDescription,supportThemeIcons:!0},markdownNotSupportedFallback:s.saneDescription});const d={matches:o||[],descriptionTitle:c,descriptionMatches:a||[],labelEscapeNewLines:!0};if(d.extraClasses=r.iconClasses,d.italic=r.italic,d.strikethrough=r.strikethrough,i.entry.classList.remove("quick-input-list-separator-as-item"),i.label.setLabel(s.saneLabel,s.saneDescription,d),i.keybinding.set(r.keybinding),s.saneDetail){let f;s.saneTooltip||(f={markdown:{value:s.saneDetail,supportThemeIcons:!0},markdownNotSupportedFallback:s.saneDetail}),i.detail.element.style.display="",i.detail.setLabel(s.saneDetail,void 0,{matches:l,title:f,labelEscapeNewLines:!0})}else i.detail.element.style.display="none";(h=s.separator)!=null&&h.label?(i.separator.textContent=s.separator.label,i.separator.style.display="",this.addItemWithSeparator(s)):i.separator.style.display="none",i.entry.classList.toggle("quick-input-list-separator-border",!!s.separator);const u=r.buttons;u&&u.length?(i.actionBar.push(u.map((f,g)=>aE(f,`id-${g}`,()=>s.fireButtonTriggered({button:f,item:s.item}))),{icon:!0,label:!1}),i.entry.classList.add("has-actions")):i.entry.classList.remove("has-actions")}disposeElement(e,t,i){this.removeItemWithSeparator(e.element),super.disposeElement(e,t,i)}isItemWithSeparatorVisible(e){return this._itemsWithSeparatorsFrequency.has(e)}addItemWithSeparator(e){this._itemsWithSeparatorsFrequency.set(e,(this._itemsWithSeparatorsFrequency.get(e)||0)+1)}removeItemWithSeparator(e){const t=this._itemsWithSeparatorsFrequency.get(e)||0;t>1?this._itemsWithSeparatorsFrequency.set(e,t-1):this._itemsWithSeparatorsFrequency.delete(e)}},B$=nw,nw.ID="quickpickitem",nw);vO=B$=MB([F$(1,ws)],vO);const D4=class D4 extends aSe{constructor(){super(...arguments),this._visibleSeparatorsFrequency=new Map}get templateId(){return D4.ID}get visibleSeparators(){return[...this._visibleSeparatorsFrequency.keys()]}isSeparatorVisible(e){return this._visibleSeparatorsFrequency.has(e)}renderTemplate(e){const t=super.renderTemplate(e);return t.checkbox.style.display="none",t}renderElement(e,t,i){const s=e.element;i.element=s,s.element=i.entry??void 0,s.element.classList.toggle("focus-inside",!!s.focusInsideSeparator);const r=s.separator,{labelHighlights:o,descriptionHighlights:a,detailHighlights:l}=s;i.icon.style.backgroundImage="",i.icon.className="";let c;!s.saneTooltip&&s.saneDescription&&(c={markdown:{value:s.saneDescription,supportThemeIcons:!0},markdownNotSupportedFallback:s.saneDescription});const d={matches:o||[],descriptionTitle:c,descriptionMatches:a||[],labelEscapeNewLines:!0};if(i.entry.classList.add("quick-input-list-separator-as-item"),i.label.setLabel(s.saneLabel,s.saneDescription,d),s.saneDetail){let h;s.saneTooltip||(h={markdown:{value:s.saneDetail,supportThemeIcons:!0},markdownNotSupportedFallback:s.saneDetail}),i.detail.element.style.display="",i.detail.setLabel(s.saneDetail,void 0,{matches:l,title:h,labelEscapeNewLines:!0})}else i.detail.element.style.display="none";i.separator.style.display="none",i.entry.classList.add("quick-input-list-separator-border");const u=r.buttons;u&&u.length?(i.actionBar.push(u.map((h,f)=>aE(h,`id-${f}`,()=>s.fireSeparatorButtonTriggered({button:h,separator:s.separator}))),{icon:!0,label:!1}),i.entry.classList.add("has-actions")):i.entry.classList.remove("has-actions"),this.addSeparator(s)}disposeElement(e,t,i){var s;this.removeSeparator(e.element),this.isSeparatorVisible(e.element)||(s=e.element.element)==null||s.classList.remove("focus-inside"),super.disposeElement(e,t,i)}addSeparator(e){this._visibleSeparatorsFrequency.set(e,(this._visibleSeparatorsFrequency.get(e)||0)+1)}removeSeparator(e){const t=this._visibleSeparatorsFrequency.get(e)||0;t>1?this._visibleSeparatorsFrequency.set(e,t-1):this._visibleSeparatorsFrequency.delete(e)}};D4.ID="quickpickseparator";let bO=D4,pD=class extends ee{constructor(e,t,i,s,r,o){super(),this.parent=e,this.hoverDelegate=t,this.linkOpenerDelegate=i,this.accessibilityService=o,this._onKeyDown=new X,this._onLeave=new X,this.onLeave=this._onLeave.event,this._visibleCountObservable=Nt("VisibleCount",0),this.onChangedVisibleCount=Ee.fromObservable(this._visibleCountObservable,this._store),this._allVisibleCheckedObservable=Nt("AllVisibleChecked",!1),this.onChangedAllVisibleChecked=Ee.fromObservable(this._allVisibleCheckedObservable,this._store),this._checkedCountObservable=Nt("CheckedCount",0),this.onChangedCheckedCount=Ee.fromObservable(this._checkedCountObservable,this._store),this._checkedElementsObservable=XU({equalsFn:dn},new Array),this.onChangedCheckedElements=Ee.fromObservable(this._checkedElementsObservable,this._store),this._onButtonTriggered=new X,this.onButtonTriggered=this._onButtonTriggered.event,this._onSeparatorButtonTriggered=new X,this.onSeparatorButtonTriggered=this._onSeparatorButtonTriggered.event,this._elementChecked=new X,this._elementCheckedEventBufferer=new TN,this._hasCheckboxes=!1,this._inputElements=new Array,this._elementTree=new Array,this._itemElements=new Array,this._elementDisposable=this._register(new ue),this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._matchOnLabelMode="fuzzy",this._sortByLabel=!0,this._shouldLoop=!0,this._container=_e(this.parent,Yd(".quick-input-list")),this._separatorRenderer=new bO(t),this._itemRenderer=r.createInstance(vO,t),this._tree=this._register(r.createInstance(P$,"QuickInput",this._container,new Aot,[this._itemRenderer,this._separatorRenderer],{filter:{filter(a){return a.hidden?0:a instanceof Kv?2:1}},sorter:{compare:(a,l)=>{if(!this.sortByLabel||!this._lastQueryString)return 0;const c=this._lastQueryString.toLowerCase();return Oot(a,l,c)}},accessibilityProvider:new Mot,setRowLineHeight:!1,multipleSelectionSupport:!1,hideTwistiesOfChildlessElements:!0,renderIndentGuides:KS.None,findWidgetEnabled:!1,indent:0,horizontalScrolling:!1,allowNonCollapsibleParents:!0,alwaysConsumeMouseWheel:!0})),this._tree.getHTMLElement().id=s,this._registerListeners()}get onDidChangeFocus(){return Ee.map(this._tree.onDidChangeFocus,e=>e.elements.filter(t=>t instanceof cr).map(t=>t.item),this._store)}get onDidChangeSelection(){return Ee.map(this._tree.onDidChangeSelection,e=>({items:e.elements.filter(t=>t instanceof cr).map(t=>t.item),event:e.browserEvent}),this._store)}get displayed(){return this._container.style.display!=="none"}set displayed(e){this._container.style.display=e?"":"none"}get scrollTop(){return this._tree.scrollTop}set scrollTop(e){this._tree.scrollTop=e}get ariaLabel(){return this._tree.ariaLabel}set ariaLabel(e){this._tree.ariaLabel=e??""}set enabled(e){this._tree.getHTMLElement().style.pointerEvents=e?"":"none"}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(e){this._matchOnDescription=e}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(e){this._matchOnDetail=e}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(e){this._matchOnLabel=e}get matchOnLabelMode(){return this._matchOnLabelMode}set matchOnLabelMode(e){this._matchOnLabelMode=e}get sortByLabel(){return this._sortByLabel}set sortByLabel(e){this._sortByLabel=e}get shouldLoop(){return this._shouldLoop}set shouldLoop(e){this._shouldLoop=e}_registerListeners(){this._registerOnKeyDown(),this._registerOnContainerClick(),this._registerOnMouseMiddleClick(),this._registerOnTreeModelChanged(),this._registerOnElementChecked(),this._registerOnContextMenu(),this._registerHoverListeners(),this._registerSelectionChangeListener(),this._registerSeparatorActionShowingListeners()}_registerOnKeyDown(){this._register(this._tree.onKeyDown(e=>{const t=new Oi(e);switch(t.keyCode){case 10:this.toggleCheckbox();break}this._onKeyDown.fire(t)}))}_registerOnContainerClick(){this._register(re(this._container,Se.CLICK,e=>{(e.x||e.y)&&this._onLeave.fire()}))}_registerOnMouseMiddleClick(){this._register(re(this._container,Se.AUXCLICK,e=>{e.button===1&&this._onLeave.fire()}))}_registerOnTreeModelChanged(){this._register(this._tree.onDidChangeModel(()=>{const e=this._itemElements.filter(t=>!t.hidden).length;this._visibleCountObservable.set(e,void 0),this._hasCheckboxes&&this._updateCheckedObservables()}))}_registerOnElementChecked(){this._register(this._elementCheckedEventBufferer.wrapEvent(this._elementChecked.event,(e,t)=>t)(e=>this._updateCheckedObservables()))}_registerOnContextMenu(){this._register(this._tree.onContextMenu(e=>{e.element&&(e.browserEvent.preventDefault(),this._tree.setSelection([e.element]))}))}_registerHoverListeners(){const e=this._register(new S0e(this.hoverDelegate.delay));this._register(this._tree.onMouseOver(async t=>{var i;if(Woe(t.browserEvent.target)){e.cancel();return}if(!(!Woe(t.browserEvent.relatedTarget)&&Es(t.browserEvent.relatedTarget,(i=t.element)==null?void 0:i.element)))try{await e.trigger(async()=>{t.element instanceof cr&&this.showHover(t.element)})}catch(s){if(!Vc(s))throw s}})),this._register(this._tree.onMouseOut(t=>{var i;Es(t.browserEvent.relatedTarget,(i=t.element)==null?void 0:i.element)||e.cancel()}))}_registerSeparatorActionShowingListeners(){this._register(this._tree.onDidChangeFocus(e=>{const t=e.elements[0]?this._tree.getParentElement(e.elements[0]):null;for(const i of this._separatorRenderer.visibleSeparators){const s=i===t;!!(i.focusInsideSeparator&xh.ACTIVE_ITEM)!==s&&(s?i.focusInsideSeparator|=xh.ACTIVE_ITEM:i.focusInsideSeparator&=~xh.ACTIVE_ITEM,this._tree.rerender(i))}})),this._register(this._tree.onMouseOver(e=>{const t=e.element?this._tree.getParentElement(e.element):null;for(const i of this._separatorRenderer.visibleSeparators){if(i!==t)continue;!!(i.focusInsideSeparator&xh.MOUSE_HOVER)||(i.focusInsideSeparator|=xh.MOUSE_HOVER,this._tree.rerender(i))}})),this._register(this._tree.onMouseOut(e=>{const t=e.element?this._tree.getParentElement(e.element):null;for(const i of this._separatorRenderer.visibleSeparators){if(i!==t)continue;!!(i.focusInsideSeparator&xh.MOUSE_HOVER)&&(i.focusInsideSeparator&=~xh.MOUSE_HOVER,this._tree.rerender(i))}}))}_registerSelectionChangeListener(){this._register(this._tree.onDidChangeSelection(e=>{const t=e.elements.filter(i=>i instanceof cr);t.length!==e.elements.length&&(e.elements.length===1&&e.elements[0]instanceof Kv&&(this._tree.setFocus([e.elements[0].children[0]]),this._tree.reveal(e.elements[0],0)),this._tree.setSelection(t))}))}setAllVisibleChecked(e){this._elementCheckedEventBufferer.bufferEvents(()=>{this._itemElements.forEach(t=>{!t.hidden&&!t.checkboxDisabled&&(t.checked=e)})})}setElements(e){this._elementDisposable.clear(),this._lastQueryString=void 0,this._inputElements=e,this._hasCheckboxes=this.parent.classList.contains("show-checkboxes");let t;this._itemElements=new Array,this._elementTree=e.reduce((i,s,r)=>{let o;if(s.type==="separator"){if(!s.buttons)return i;t=new Kv(r,a=>this._onSeparatorButtonTriggered.fire(a),s),o=t}else{const a=r>0?e[r-1]:void 0;let l;a&&a.type==="separator"&&!a.buttons&&(t=void 0,l=a);const c=new cr(r,this._hasCheckboxes,d=>this._onButtonTriggered.fire(d),this._elementChecked,s,l);if(this._itemElements.push(c),t)return t.children.push(c),i;o=c}return i.push(o),i},new Array),this._setElementsToTree(this._elementTree),this.accessibilityService.isScreenReaderOptimized()&&setTimeout(()=>{const i=this._tree.getHTMLElement().querySelector(".monaco-list-row.focused"),s=i==null?void 0:i.parentNode;if(i&&s){const r=i.nextSibling;i.remove(),s.insertBefore(i,r)}},0)}setFocusedElements(e){const t=e.map(i=>this._itemElements.find(s=>s.item===i)).filter(i=>!!i).filter(i=>!i.hidden);if(this._tree.setFocus(t),e.length>0){const i=this._tree.getFocus()[0];i&&this._tree.reveal(i)}}getActiveDescendant(){return this._tree.getHTMLElement().getAttribute("aria-activedescendant")}setSelectedElements(e){const t=e.map(i=>this._itemElements.find(s=>s.item===i)).filter(i=>!!i);this._tree.setSelection(t)}getCheckedElements(){return this._itemElements.filter(e=>e.checked).map(e=>e.item)}setCheckedElements(e){this._elementCheckedEventBufferer.bufferEvents(()=>{const t=new Set;for(const i of e)t.add(i);for(const i of this._itemElements)i.checked=t.has(i.item)})}focus(e){var t;if(this._itemElements.length)switch(e===ji.Second&&this._itemElements.length<2&&(e=ji.First),e){case ji.First:this._tree.scrollTop=0,this._tree.focusFirst(void 0,i=>i.element instanceof cr);break;case ji.Second:{this._tree.scrollTop=0;let i=!1;this._tree.focusFirst(void 0,s=>s.element instanceof cr?i?!0:(i=!i,!1):!1);break}case ji.Last:this._tree.scrollTop=this._tree.scrollHeight,this._tree.focusLast(void 0,i=>i.element instanceof cr);break;case ji.Next:{const i=this._tree.getFocus();this._tree.focusNext(void 0,this._shouldLoop,void 0,r=>r.element instanceof cr?(this._tree.reveal(r.element),!0):!1);const s=this._tree.getFocus();i.length&&i[0]===s[0]&&i[0]===this._itemElements[this._itemElements.length-1]&&this._onLeave.fire();break}case ji.Previous:{const i=this._tree.getFocus();this._tree.focusPrevious(void 0,this._shouldLoop,void 0,r=>{if(!(r.element instanceof cr))return!1;const o=this._tree.getParentElement(r.element);return o===null||o.children[0]!==r.element?this._tree.reveal(r.element):this._tree.reveal(o),!0});const s=this._tree.getFocus();i.length&&i[0]===s[0]&&i[0]===this._itemElements[0]&&this._onLeave.fire();break}case ji.NextPage:this._tree.focusNextPage(void 0,i=>i.element instanceof cr?(this._tree.reveal(i.element),!0):!1);break;case ji.PreviousPage:this._tree.focusPreviousPage(void 0,i=>{if(!(i.element instanceof cr))return!1;const s=this._tree.getParentElement(i.element);return s===null||s.children[0]!==i.element?this._tree.reveal(i.element):this._tree.reveal(s),!0});break;case ji.NextSeparator:{let i=!1;const s=this._tree.getFocus()[0];this._tree.focusNext(void 0,!0,void 0,o=>{if(i)return!0;if(o.element instanceof Kv)i=!0,this._separatorRenderer.isSeparatorVisible(o.element)?this._tree.reveal(o.element.children[0]):this._tree.reveal(o.element,0);else if(o.element instanceof cr){if(o.element.separator)return this._itemRenderer.isItemWithSeparatorVisible(o.element)?this._tree.reveal(o.element):this._tree.reveal(o.element,0),!0;if(o.element===this._elementTree[0])return this._tree.reveal(o.element,0),!0}return!1});const r=this._tree.getFocus()[0];s===r&&(this._tree.scrollTop=this._tree.scrollHeight,this._tree.focusLast(void 0,o=>o.element instanceof cr));break}case ji.PreviousSeparator:{let i,s=!!((t=this._tree.getFocus()[0])!=null&&t.separator);this._tree.focusPrevious(void 0,!0,void 0,r=>{if(r.element instanceof Kv)s?i||(this._separatorRenderer.isSeparatorVisible(r.element)?this._tree.reveal(r.element):this._tree.reveal(r.element,0),i=r.element.children[0]):s=!0;else if(r.element instanceof cr&&!i){if(r.element.separator)this._itemRenderer.isItemWithSeparatorVisible(r.element)?this._tree.reveal(r.element):this._tree.reveal(r.element,0),i=r.element;else if(r.element===this._elementTree[0])return this._tree.reveal(r.element,0),!0}return!1}),i&&this._tree.setFocus([i]);break}}}clearFocus(){this._tree.setFocus([])}domFocus(){this._tree.domFocus()}layout(e){this._tree.getHTMLElement().style.maxHeight=e?`${Math.floor(e/44)*44+6}px`:"",this._tree.layout()}filter(e){if(this._lastQueryString=e,!(this._sortByLabel||this._matchOnLabel||this._matchOnDescription||this._matchOnDetail))return this._tree.layout(),!1;const t=e;if(e=e.trim(),!e||!(this.matchOnLabel||this.matchOnDescription||this.matchOnDetail))this._itemElements.forEach(i=>{i.labelHighlights=void 0,i.descriptionHighlights=void 0,i.detailHighlights=void 0,i.hidden=!1;const s=i.index&&this._inputElements[i.index-1];i.item&&(i.separator=s&&s.type==="separator"&&!s.buttons?s:void 0)});else{let i;this._itemElements.forEach(s=>{let r;this.matchOnLabelMode==="fuzzy"?r=this.matchOnLabel?m8(e,fk(s.saneLabel))??void 0:void 0:r=this.matchOnLabel?Pot(t,fk(s.saneLabel))??void 0:void 0;const o=this.matchOnDescription?m8(e,fk(s.saneDescription||""))??void 0:void 0,a=this.matchOnDetail?m8(e,fk(s.saneDetail||""))??void 0:void 0;if(r||o||a?(s.labelHighlights=r,s.descriptionHighlights=o,s.detailHighlights=a,s.hidden=!1):(s.labelHighlights=void 0,s.descriptionHighlights=void 0,s.detailHighlights=void 0,s.hidden=s.item?!s.item.alwaysShow:!0),s.item?s.separator=void 0:s.separator&&(s.hidden=!0),!this.sortByLabel){const l=s.index&&this._inputElements[s.index-1]||void 0;(l==null?void 0:l.type)==="separator"&&!l.buttons&&(i=l),i&&!s.hidden&&(s.separator=i,i=void 0)}})}return this._setElementsToTree(this._sortByLabel&&e?this._itemElements:this._elementTree),this._tree.layout(),!0}toggleCheckbox(){this._elementCheckedEventBufferer.bufferEvents(()=>{const e=this._tree.getFocus().filter(i=>i instanceof cr),t=this._allVisibleChecked(e);for(const i of e)i.checkboxDisabled||(i.checked=!t)})}style(e){this._tree.style(e)}toggleHover(){const e=this._tree.getFocus()[0];if(!(e!=null&&e.saneTooltip)||!(e instanceof cr))return;if(this._lastHover&&!this._lastHover.isDisposed){this._lastHover.dispose();return}this.showHover(e);const t=new ue;t.add(this._tree.onDidChangeFocus(i=>{i.elements[0]instanceof cr&&this.showHover(i.elements[0])})),this._lastHover&&t.add(this._lastHover),this._elementDisposable.add(t)}_setElementsToTree(e){const t=new Array;for(const i of e)i instanceof Kv?t.push({element:i,collapsible:!1,collapsed:!1,children:i.children.map(s=>({element:s,collapsible:!1,collapsed:!1}))}):t.push({element:i,collapsible:!1,collapsed:!1});this._tree.setChildren(null,t)}_allVisibleChecked(e,t=!0){for(let i=0,s=e.length;i<s;i++){const r=e[i];if(!r.hidden)if(r.checked)t=!0;else return!1}return t}_updateCheckedObservables(){pn(e=>{this._allVisibleCheckedObservable.set(this._allVisibleChecked(this._itemElements,!1),e);const t=this._itemElements.filter(i=>i.checked).length;this._checkedCountObservable.set(t,e),this._checkedElementsObservable.set(this.getCheckedElements(),e)})}showHover(e){var t,i,s;this._lastHover&&!this._lastHover.isDisposed&&((i=(t=this.hoverDelegate).onDidHideHover)==null||i.call(t),(s=this._lastHover)==null||s.dispose()),!(!e.element||!e.saneTooltip)&&(this._lastHover=this.hoverDelegate.showHover({content:e.saneTooltip,target:e.element,linkHandler:r=>{this.linkOpenerDelegate(r)},appearance:{showPointer:!0},container:this._container,position:{hoverPosition:1}},!1))}};MB([Kn],pD.prototype,"onDidChangeFocus",null);MB([Kn],pD.prototype,"onDidChangeSelection",null);pD=MB([F$(4,Ze),F$(5,al)],pD);function Pot(n,e){const{text:t,iconOffsets:i}=e;if(!i||i.length===0)return Dce(n,t);const s=RN(t," "),r=t.length-s.length,o=Dce(n,s);if(o)for(const a of o){const l=i[a.start+r]+r;a.start+=l,a.end+=l}return o}function Dce(n,e){const t=e.toLowerCase().indexOf(n.toLowerCase());return t!==-1?[{start:t,end:t+n.length}]:null}function Oot(n,e,t){const i=n.labelHighlights||[],s=e.labelHighlights||[];return i.length&&!s.length?-1:!i.length&&s.length?1:i.length===0&&s.length===0?0:Tot(n.saneSortLabel,e.saneSortLabel,t)}const lSe={weight:200,when:he.and(he.equals(Rye,"quickPick"),drt),metadata:{description:v("quickPick","Used while in the context of the quick pick. If you change one keybinding for this command, you should change all of the other keybindings (modifier variants) of this command as well.")}};function Oa(n,e={}){Fo.registerCommandAndKeybindingRule({...lSe,...n,secondary:Fot(n.primary,n.secondary??[],e)})}const wO=Bt?256:2048;function Fot(n,e,t={}){return t.withAltMod&&e.push(512+n),t.withCtrlMod&&(e.push(wO+n),t.withAltMod&&e.push(512+wO+n)),t.withCmdMod&&Bt&&(e.push(2048+n),t.withCtrlMod&&e.push(2304+n),t.withAltMod&&(e.push(2560+n),t.withCtrlMod&&e.push(2816+n))),e}function yl(n,e){return t=>{const i=t.get(Uc).currentQuickInput;if(i)return e&&i.quickNavigate?i.focus(e):i.focus(n)}}Oa({id:"quickInput.pageNext",primary:12,handler:yl(ji.NextPage)},{withAltMod:!0,withCtrlMod:!0,withCmdMod:!0});Oa({id:"quickInput.pagePrevious",primary:11,handler:yl(ji.PreviousPage)},{withAltMod:!0,withCtrlMod:!0,withCmdMod:!0});Oa({id:"quickInput.first",primary:wO+14,handler:yl(ji.First)},{withAltMod:!0,withCmdMod:!0});Oa({id:"quickInput.last",primary:wO+13,handler:yl(ji.Last)},{withAltMod:!0,withCmdMod:!0});Oa({id:"quickInput.next",primary:18,handler:yl(ji.Next)},{withCtrlMod:!0});Oa({id:"quickInput.previous",primary:16,handler:yl(ji.Previous)},{withCtrlMod:!0});const Nce=v("quickInput.nextSeparatorWithQuickAccessFallback","If we're in quick access mode, this will navigate to the next item. If we are not in quick access mode, this will navigate to the next separator."),Tce=v("quickInput.previousSeparatorWithQuickAccessFallback","If we're in quick access mode, this will navigate to the previous item. If we are not in quick access mode, this will navigate to the previous separator.");Bt?(Oa({id:"quickInput.nextSeparatorWithQuickAccessFallback",primary:2066,handler:yl(ji.NextSeparator,ji.Next),metadata:{description:Nce}}),Oa({id:"quickInput.nextSeparator",primary:2578,secondary:[2322],handler:yl(ji.NextSeparator)},{withCtrlMod:!0}),Oa({id:"quickInput.previousSeparatorWithQuickAccessFallback",primary:2064,handler:yl(ji.PreviousSeparator,ji.Previous),metadata:{description:Tce}}),Oa({id:"quickInput.previousSeparator",primary:2576,secondary:[2320],handler:yl(ji.PreviousSeparator)},{withCtrlMod:!0})):(Oa({id:"quickInput.nextSeparatorWithQuickAccessFallback",primary:530,handler:yl(ji.NextSeparator,ji.Next),metadata:{description:Nce}}),Oa({id:"quickInput.nextSeparator",primary:2578,handler:yl(ji.NextSeparator)}),Oa({id:"quickInput.previousSeparatorWithQuickAccessFallback",primary:528,handler:yl(ji.PreviousSeparator,ji.Previous),metadata:{description:Tce}}),Oa({id:"quickInput.previousSeparator",primary:2576,handler:yl(ji.PreviousSeparator)}));Oa({id:"quickInput.acceptInBackground",when:he.and(lSe.when,he.or(Zye.negate(),frt)),primary:17,weight:250,handler:n=>{const e=n.get(Uc).currentQuickInput;e==null||e.accept(!0)}},{withAltMod:!0,withCtrlMod:!0,withCmdMod:!0});var Bot=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},W8=function(n,e){return function(t,i){e(t,i,n)}},W$;const Na=xe;var sw;let H$=(sw=class extends ee{get currentQuickInput(){return this.controller??void 0}get container(){return this._container}constructor(e,t,i,s){super(),this.options=e,this.layoutService=t,this.instantiationService=i,this.contextKeyService=s,this.enabled=!0,this.onDidAcceptEmitter=this._register(new X),this.onDidCustomEmitter=this._register(new X),this.onDidTriggerButtonEmitter=this._register(new X),this.keyMods={ctrlCmd:!1,alt:!1},this.controller=null,this.onShowEmitter=this._register(new X),this.onShow=this.onShowEmitter.event,this.onHideEmitter=this._register(new X),this.onHide=this.onHideEmitter.event,this.inQuickInputContext=crt.bindTo(this.contextKeyService),this.quickInputTypeContext=urt.bindTo(this.contextKeyService),this.endOfQuickInputBoxContext=hrt.bindTo(this.contextKeyService),this.idPrefix=e.idPrefix,this._container=e.container,this.styles=e.styles,this._register(Ee.runAndSubscribe(H3,({window:r,disposables:o})=>this.registerKeyModsListeners(r,o),{window:Ei,disposables:this._store})),this._register(uqe(r=>{this.ui&&nt(this.ui.container)===r&&(this.reparentUI(this.layoutService.mainContainer),this.layout(this.layoutService.mainContainerDimension,this.layoutService.mainContainerOffset.quickPickTop))}))}registerKeyModsListeners(e,t){const i=s=>{this.keyMods.ctrlCmd=s.ctrlKey||s.metaKey,this.keyMods.alt=s.altKey};for(const s of[Se.KEY_DOWN,Se.KEY_UP,Se.MOUSE_DOWN])t.add(re(e,s,i,!0))}getUI(e){if(this.ui)return e&&nt(this._container)!==nt(this.layoutService.activeContainer)&&(this.reparentUI(this.layoutService.activeContainer),this.layout(this.layoutService.activeContainerDimension,this.layoutService.activeContainerOffset.quickPickTop)),this.ui;const t=_e(this._container,Na(".quick-input-widget.show-file-icons"));t.tabIndex=-1,t.style.display="none";const i=jl(t),s=_e(t,Na(".quick-input-titlebar")),r=this._register(new Ul(s,{hoverDelegate:this.options.hoverDelegate}));r.domNode.classList.add("quick-input-left-action-bar");const o=_e(s,Na(".quick-input-title")),a=this._register(new Ul(s,{hoverDelegate:this.options.hoverDelegate}));a.domNode.classList.add("quick-input-right-action-bar");const l=_e(t,Na(".quick-input-header")),c=_e(l,Na("input.quick-input-check-all"));c.type="checkbox",c.setAttribute("aria-label",v("quickInput.checkAll","Toggle all checkboxes")),this._register(Cn(c,Se.CHANGE,j=>{const ne=c.checked;G.setAllVisibleChecked(ne)})),this._register(re(c,Se.CLICK,j=>{(j.x||j.y)&&f.setFocus()}));const d=_e(l,Na(".quick-input-description")),u=_e(l,Na(".quick-input-and-message")),h=_e(u,Na(".quick-input-filter")),f=this._register(new Srt(h,this.styles.inputBox,this.styles.toggle));f.setAttribute("aria-describedby",`${this.idPrefix}message`);const g=_e(h,Na(".quick-input-visible-count"));g.setAttribute("aria-live","polite"),g.setAttribute("aria-atomic","true");const p=new I$(g,{countFormat:v({key:"quickInput.visibleCount",comment:["This tells the user how many items are shown in a list of items to select from. The items can be anything. Currently not visible, but read by screen readers."]},"{0} Results")},this.styles.countBadge),_=_e(h,Na(".quick-input-count"));_.setAttribute("aria-live","polite");const w=new I$(_,{countFormat:v({key:"quickInput.countSelected",comment:["This tells the user how many items are selected in a list of items to select from. The items can be anything."]},"{0} Selected")},this.styles.countBadge),b=this._register(new Ul(l,{hoverDelegate:this.options.hoverDelegate}));b.domNode.classList.add("quick-input-inline-action-bar");const y=_e(l,Na(".quick-input-action")),S=this._register(new aO(y,this.styles.button));S.label=v("ok","OK"),this._register(S.onDidClick(j=>{this.onDidAcceptEmitter.fire()}));const x=_e(l,Na(".quick-input-action")),E=this._register(new aO(x,{...this.styles.button,supportIcons:!0}));E.label=v("custom","Custom"),this._register(E.onDidClick(j=>{this.onDidCustomEmitter.fire()}));const D=_e(u,Na(`#${this.idPrefix}message.quick-input-message`)),N=this._register(new D$(t,this.styles.progressBar));N.getContainer().classList.add("quick-input-progress");const I=_e(t,Na(".quick-input-html-widget"));I.tabIndex=-1;const H=_e(t,Na(".quick-input-description")),z=this.idPrefix+"list",G=this._register(this.instantiationService.createInstance(pD,t,this.options.hoverDelegate,this.options.linkOpenerDelegate,z));f.setAttribute("aria-controls",z),this._register(G.onDidChangeFocus(()=>{f.setAttribute("aria-activedescendant",G.getActiveDescendant()??"")})),this._register(G.onChangedAllVisibleChecked(j=>{c.checked=j})),this._register(G.onChangedVisibleCount(j=>{p.setCount(j)})),this._register(G.onChangedCheckedCount(j=>{w.setCount(j)})),this._register(G.onLeave(()=>{setTimeout(()=>{this.controller&&(f.setFocus(),this.controller instanceof oO&&this.controller.canSelectMany&&G.clearFocus())},0)}));const J=Hu(t);return this._register(J),this._register(re(t,Se.FOCUS,j=>{const ne=this.getUI();if(Es(j.relatedTarget,ne.inputContainer)){const oe=ne.inputBox.isSelectionAtEnd();this.endOfQuickInputBoxContext.get()!==oe&&this.endOfQuickInputBoxContext.set(oe)}Es(j.relatedTarget,ne.container)||(this.inQuickInputContext.set(!0),this.previousFocusElement=Ns(j.relatedTarget)?j.relatedTarget:void 0)},!0)),this._register(J.onDidBlur(()=>{!this.getUI().ignoreFocusOut&&!this.options.ignoreFocusOut()&&this.hide(jS.Blur),this.inQuickInputContext.set(!1),this.endOfQuickInputBoxContext.set(!1),this.previousFocusElement=void 0})),this._register(f.onKeyDown(j=>{const ne=this.getUI().inputBox.isSelectionAtEnd();this.endOfQuickInputBoxContext.get()!==ne&&this.endOfQuickInputBoxContext.set(ne)})),this._register(re(t,Se.FOCUS,j=>{f.setFocus()})),this._register(Cn(t,Se.KEY_DOWN,j=>{if(!Es(j.target,I))switch(j.keyCode){case 3:$t.stop(j,!0),this.enabled&&this.onDidAcceptEmitter.fire();break;case 9:$t.stop(j,!0),this.hide(jS.Gesture);break;case 2:if(!j.altKey&&!j.ctrlKey&&!j.metaKey){const ne=[".quick-input-list .monaco-action-bar .always-visible",".quick-input-list-entry:hover .monaco-action-bar",".monaco-list-row.focused .monaco-action-bar"];if(t.classList.contains("show-checkboxes")?ne.push("input"):ne.push("input[type=text]"),this.getUI().list.displayed&&ne.push(".monaco-list"),this.getUI().message&&ne.push(".quick-input-message a"),this.getUI().widget){if(Es(j.target,this.getUI().widget))break;ne.push(".quick-input-html-widget")}const oe=t.querySelectorAll(ne.join(", "));j.shiftKey&&j.target===oe[0]?($t.stop(j,!0),G.clearFocus()):!j.shiftKey&&Es(j.target,oe[oe.length-1])&&($t.stop(j,!0),oe[0].focus())}break;case 10:j.ctrlKey&&($t.stop(j,!0),this.getUI().list.toggleHover());break}})),this.ui={container:t,styleSheet:i,leftActionBar:r,titleBar:s,title:o,description1:H,description2:d,widget:I,rightActionBar:a,inlineActionBar:b,checkAll:c,inputContainer:u,filterContainer:h,inputBox:f,visibleCountContainer:g,visibleCount:p,countContainer:_,count:w,okContainer:y,ok:S,message:D,customButtonContainer:x,customButton:E,list:G,progressBar:N,onDidAccept:this.onDidAcceptEmitter.event,onDidCustom:this.onDidCustomEmitter.event,onDidTriggerButton:this.onDidTriggerButtonEmitter.event,ignoreFocusOut:!1,keyMods:this.keyMods,show:j=>this.show(j),hide:()=>this.hide(),setVisibilities:j=>this.setVisibilities(j),setEnabled:j=>this.setEnabled(j),setContextKey:j=>this.options.setContextKey(j),linkOpenerDelegate:j=>this.options.linkOpenerDelegate(j)},this.updateStyles(),this.ui}reparentUI(e){this.ui&&(this._container=e,_e(this._container,this.ui.container))}pick(e,t={},i=xt.None){return new Promise((s,r)=>{let o=d=>{var u;o=s,(u=t.onKeyMods)==null||u.call(t,a.keyMods),s(d)};if(i.isCancellationRequested){o(void 0);return}const a=this.createQuickPick({useSeparators:!0});let l;const c=[a,a.onDidAccept(()=>{if(a.canSelectMany)o(a.selectedItems.slice()),a.hide();else{const d=a.activeItems[0];d&&(o(d),a.hide())}}),a.onDidChangeActive(d=>{const u=d[0];u&&t.onDidFocus&&t.onDidFocus(u)}),a.onDidChangeSelection(d=>{if(!a.canSelectMany){const u=d[0];u&&(o(u),a.hide())}}),a.onDidTriggerItemButton(d=>t.onDidTriggerItemButton&&t.onDidTriggerItemButton({...d,removeItem:()=>{const u=a.items.indexOf(d.item);if(u!==-1){const h=a.items.slice(),f=h.splice(u,1),g=a.activeItems.filter(_=>_!==f[0]),p=a.keepScrollPosition;a.keepScrollPosition=!0,a.items=h,g&&(a.activeItems=g),a.keepScrollPosition=p}}})),a.onDidTriggerSeparatorButton(d=>{var u;return(u=t.onDidTriggerSeparatorButton)==null?void 0:u.call(t,d)}),a.onDidChangeValue(d=>{l&&!d&&(a.activeItems.length!==1||a.activeItems[0]!==l)&&(a.activeItems=[l])}),i.onCancellationRequested(()=>{a.hide()}),a.onDidHide(()=>{Ti(c),o(void 0)})];a.title=t.title,t.value&&(a.value=t.value),a.canSelectMany=!!t.canPickMany,a.placeholder=t.placeHolder,a.ignoreFocusOut=!!t.ignoreFocusLost,a.matchOnDescription=!!t.matchOnDescription,a.matchOnDetail=!!t.matchOnDetail,a.matchOnLabel=t.matchOnLabel===void 0||t.matchOnLabel,a.quickNavigate=t.quickNavigate,a.hideInput=!!t.hideInput,a.contextKey=t.contextKey,a.busy=!0,Promise.all([e,t.activeItem]).then(([d,u])=>{l=u,a.busy=!1,a.items=d,a.canSelectMany&&(a.selectedItems=d.filter(h=>h.type!=="separator"&&h.picked)),l&&(a.activeItems=[l])}),a.show(),Promise.resolve(e).then(void 0,d=>{r(d),a.hide()})})}createQuickPick(e={useSeparators:!1}){const t=this.getUI(!0);return new oO(t)}createInputBox(){const e=this.getUI(!0);return new grt(e)}show(e){const t=this.getUI(!0);this.onShowEmitter.fire();const i=this.controller;this.controller=e,i==null||i.didHide(),this.setEnabled(!0),t.leftActionBar.clear(),t.title.textContent="",t.description1.textContent="",t.description2.textContent="",sr(t.widget),t.rightActionBar.clear(),t.inlineActionBar.clear(),t.checkAll.checked=!1,t.inputBox.placeholder="",t.inputBox.password=!1,t.inputBox.showDecoration(Un.Ignore),t.visibleCount.setCount(0),t.count.setCount(0),sr(t.message),t.progressBar.stop(),t.list.setElements([]),t.list.matchOnDescription=!1,t.list.matchOnDetail=!1,t.list.matchOnLabel=!0,t.list.sortByLabel=!0,t.ignoreFocusOut=!1,t.inputBox.toggles=void 0;const s=this.options.backKeybindingLabel();k$.tooltip=s?v("quickInput.backWithKeybinding","Back ({0})",s):v("quickInput.back","Back"),t.container.style.display="",this.updateLayout(),t.inputBox.setFocus(),this.quickInputTypeContext.set(e.type)}isVisible(){return!!this.ui&&this.ui.container.style.display!=="none"}setVisibilities(e){const t=this.getUI();t.title.style.display=e.title?"":"none",t.description1.style.display=e.description&&(e.inputBox||e.checkAll)?"":"none",t.description2.style.display=e.description&&!(e.inputBox||e.checkAll)?"":"none",t.checkAll.style.display=e.checkAll?"":"none",t.inputContainer.style.display=e.inputBox?"":"none",t.filterContainer.style.display=e.inputBox?"":"none",t.visibleCountContainer.style.display=e.visibleCount?"":"none",t.countContainer.style.display=e.count?"":"none",t.okContainer.style.display=e.ok?"":"none",t.customButtonContainer.style.display=e.customButton?"":"none",t.message.style.display=e.message?"":"none",t.progressBar.getContainer().style.display=e.progressBar?"":"none",t.list.displayed=!!e.list,t.container.classList.toggle("show-checkboxes",!!e.checkBox),t.container.classList.toggle("hidden-input",!e.inputBox&&!e.description),this.updateLayout()}setEnabled(e){if(e!==this.enabled){this.enabled=e;for(const t of this.getUI().leftActionBar.viewItems)t.action.enabled=e;for(const t of this.getUI().rightActionBar.viewItems)t.action.enabled=e;this.getUI().checkAll.disabled=!e,this.getUI().inputBox.enabled=e,this.getUI().ok.enabled=e,this.getUI().list.enabled=e}}hide(e){var r;const t=this.controller;if(!t)return;t.willHide(e);const i=(r=this.ui)==null?void 0:r.container,s=i&&!H0e(i);if(this.controller=null,this.onHideEmitter.fire(),i&&(i.style.display="none"),!s){let o=this.previousFocusElement;for(;o&&!o.offsetParent;)o=o.parentElement??void 0;o!=null&&o.offsetParent?(o.focus(),this.previousFocusElement=void 0):this.options.returnFocus()}t.didHide(e)}layout(e,t){this.dimension=e,this.titleBarOffset=t,this.updateLayout()}updateLayout(){if(this.ui&&this.isVisible()){this.ui.container.style.top=`${this.titleBarOffset}px`;const e=this.ui.container.style,t=Math.min(this.dimension.width*.62,W$.MAX_WIDTH);e.width=t+"px",e.marginLeft="-"+t/2+"px",this.ui.inputBox.layout(),this.ui.list.layout(this.dimension&&this.dimension.height*.4)}}applyStyles(e){this.styles=e,this.updateStyles()}updateStyles(){if(this.ui){const{quickInputTitleBackground:e,quickInputBackground:t,quickInputForeground:i,widgetBorder:s,widgetShadow:r}=this.styles.widget;this.ui.titleBar.style.backgroundColor=e??"",this.ui.container.style.backgroundColor=t??"",this.ui.container.style.color=i??"",this.ui.container.style.border=s?`1px solid ${s}`:"",this.ui.container.style.boxShadow=r?`0 0 8px 2px ${r}`:"",this.ui.list.style(this.styles.list);const o=[];this.styles.pickerGroup.pickerGroupBorder&&o.push(`.quick-input-list .quick-input-list-entry { border-top-color:  ${this.styles.pickerGroup.pickerGroupBorder}; }`),this.styles.pickerGroup.pickerGroupForeground&&o.push(`.quick-input-list .quick-input-list-separator { color:  ${this.styles.pickerGroup.pickerGroupForeground}; }`),this.styles.pickerGroup.pickerGroupForeground&&o.push(".quick-input-list .quick-input-list-separator-as-item { color: var(--vscode-descriptionForeground); }"),(this.styles.keybindingLabel.keybindingLabelBackground||this.styles.keybindingLabel.keybindingLabelBorder||this.styles.keybindingLabel.keybindingLabelBottomBorder||this.styles.keybindingLabel.keybindingLabelShadow||this.styles.keybindingLabel.keybindingLabelForeground)&&(o.push(".quick-input-list .monaco-keybinding > .monaco-keybinding-key {"),this.styles.keybindingLabel.keybindingLabelBackground&&o.push(`background-color: ${this.styles.keybindingLabel.keybindingLabelBackground};`),this.styles.keybindingLabel.keybindingLabelBorder&&o.push(`border-color: ${this.styles.keybindingLabel.keybindingLabelBorder};`),this.styles.keybindingLabel.keybindingLabelBottomBorder&&o.push(`border-bottom-color: ${this.styles.keybindingLabel.keybindingLabelBottomBorder};`),this.styles.keybindingLabel.keybindingLabelShadow&&o.push(`box-shadow: inset 0 -1px 0 ${this.styles.keybindingLabel.keybindingLabelShadow};`),this.styles.keybindingLabel.keybindingLabelForeground&&o.push(`color: ${this.styles.keybindingLabel.keybindingLabelForeground};`),o.push("}"));const a=o.join(`
`);a!==this.ui.styleSheet.textContent&&(this.ui.styleSheet.textContent=a)}}},W$=sw,sw.MAX_WIDTH=600,sw);H$=W$=Bot([W8(1,tv),W8(2,Ze),W8(3,at)],H$);var Wot=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},jL=function(n,e){return function(t,i){e(t,i,n)}};let V$=class extends IZe{get controller(){return this._controller||(this._controller=this._register(this.createController())),this._controller}get hasController(){return!!this._controller}get currentQuickInput(){return this.controller.currentQuickInput}get quickAccess(){return this._quickAccess||(this._quickAccess=this._register(this.instantiationService.createInstance(L$))),this._quickAccess}constructor(e,t,i,s,r){super(i),this.instantiationService=e,this.contextKeyService=t,this.layoutService=s,this.configurationService=r,this._onShow=this._register(new X),this._onHide=this._register(new X),this.contexts=new Map}createController(e=this.layoutService,t){const i={idPrefix:"quickInput_",container:e.activeContainer,ignoreFocusOut:()=>!1,backKeybindingLabel:()=>{},setContextKey:r=>this.setContextKey(r),linkOpenerDelegate:r=>{this.instantiationService.invokeFunction(o=>{o.get(ba).open(r,{allowCommands:!0,fromUserGesture:!0})})},returnFocus:()=>e.focus(),styles:this.computeStyles(),hoverDelegate:this._register(this.instantiationService.createInstance(E$))},s=this._register(this.instantiationService.createInstance(H$,{...i,...t}));return s.layout(e.activeContainerDimension,e.activeContainerOffset.quickPickTop),this._register(e.onDidLayoutActiveContainer(r=>{nt(e.activeContainer)===nt(s.container)&&s.layout(r,e.activeContainerOffset.quickPickTop)})),this._register(e.onDidChangeActiveContainer(()=>{s.isVisible()||s.layout(e.activeContainerDimension,e.activeContainerOffset.quickPickTop)})),this._register(s.onShow(()=>{this.resetContextKeys(),this._onShow.fire()})),this._register(s.onHide(()=>{this.resetContextKeys(),this._onHide.fire()})),s}setContextKey(e){let t;e&&(t=this.contexts.get(e),t||(t=new Re(e,!1).bindTo(this.contextKeyService),this.contexts.set(e,t))),!(t&&t.get())&&(this.resetContextKeys(),t==null||t.set(!0))}resetContextKeys(){this.contexts.forEach(e=>{e.get()&&e.reset()})}pick(e,t,i=xt.None){return this.controller.pick(e,t,i)}createQuickPick(e={useSeparators:!1}){return this.controller.createQuickPick(e)}createInputBox(){return this.controller.createInputBox()}updateStyles(){this.hasController&&this.controller.applyStyles(this.computeStyles())}computeStyles(){return{widget:{quickInputBackground:Me(sle),quickInputForeground:Me($Qe),quickInputTitleBackground:Me(jQe),widgetBorder:Me(ZCe),widgetShadow:Me(Ax)},inputBox:YP,toggle:GP,countBadge:G1e,button:Eit,progressBar:Iit,keybindingLabel:kit,list:$0({listBackground:sle,listFocusBackground:XI,listFocusForeground:ZI,listInactiveFocusForeground:ZI,listInactiveSelectionIconForeground:zX,listInactiveFocusBackground:XI,listFocusOutline:nn,listInactiveFocusOutline:nn}),pickerGroup:{pickerGroupBorder:Me(KQe),pickerGroupForeground:Me(o1e)}}}};V$=Wot([jL(0,Ze),jL(1,at),jL(2,ws),jL(3,tv),jL(4,Tt)],V$);var cSe=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},ab=function(n,e){return function(t,i){e(t,i,n)}};let z$=class extends V${constructor(e,t,i,s,r,o){super(t,i,s,new lU(e.getContainerDomNode(),r),o),this.host=void 0;const a=mD.get(e);if(a){const l=a.widget;this.host={_serviceBrand:void 0,get mainContainer(){return l.getDomNode()},getContainer(){return l.getDomNode()},whenContainerStylesLoaded(){},get containers(){return[l.getDomNode()]},get activeContainer(){return l.getDomNode()},get mainContainerDimension(){return e.getLayoutInfo()},get activeContainerDimension(){return e.getLayoutInfo()},get onDidLayoutMainContainer(){return e.onDidLayoutChange},get onDidLayoutActiveContainer(){return e.onDidLayoutChange},get onDidLayoutContainer(){return Ee.map(e.onDidLayoutChange,c=>({container:l.getDomNode(),dimension:c}))},get onDidChangeActiveContainer(){return Ee.None},get onDidAddContainer(){return Ee.None},get mainContainerOffset(){return{top:0,quickPickTop:0}},get activeContainerOffset(){return{top:0,quickPickTop:0}},focus:()=>e.focus()}}else this.host=void 0}createController(){return super.createController(this.host)}};z$=cSe([ab(1,Ze),ab(2,at),ab(3,ws),ab(4,ri),ab(5,Tt)],z$);let U$=class{get activeService(){const e=this.codeEditorService.getFocusedCodeEditor();if(!e)throw new Error("Quick input service needs a focused editor to work.");let t=this.mapEditorToService.get(e);if(!t){const i=t=this.instantiationService.createInstance(z$,e);this.mapEditorToService.set(e,t),E_(e.onDidDispose)(()=>{i.dispose(),this.mapEditorToService.delete(e)})}return t}get currentQuickInput(){return this.activeService.currentQuickInput}get quickAccess(){return this.activeService.quickAccess}constructor(e,t){this.instantiationService=e,this.codeEditorService=t,this.mapEditorToService=new Map}pick(e,t,i=xt.None){return this.activeService.pick(e,t,i)}createQuickPick(e={useSeparators:!1}){return this.activeService.createQuickPick(e)}createInputBox(){return this.activeService.createInputBox()}};U$=cSe([ab(0,Ze),ab(1,ri)],U$);const N4=class N4{static get(e){return e.getContribution(N4.ID)}constructor(e){this.editor=e,this.widget=new $$(this.editor)}dispose(){this.widget.dispose()}};N4.ID="editor.controller.quickInput";let mD=N4;const T4=class T4{constructor(e){this.codeEditor=e,this.domNode=document.createElement("div"),this.codeEditor.addOverlayWidget(this)}getId(){return T4.ID}getDomNode(){return this.domNode}getPosition(){return{preference:2}}dispose(){this.codeEditor.removeOverlayWidget(this)}};T4.ID="editor.contrib.quickInputWidget";let $$=T4;Xt(mD.ID,mD,4);class Hot{constructor(e,t,i,s,r){this._parsedThemeRuleBrand=void 0,this.token=e,this.index=t,this.fontStyle=i,this.foreground=s,this.background=r}}function Vot(n){if(!n||!Array.isArray(n))return[];const e=[];let t=0;for(let i=0,s=n.length;i<s;i++){const r=n[i];let o=-1;if(typeof r.fontStyle=="string"){o=0;const c=r.fontStyle.split(" ");for(let d=0,u=c.length;d<u;d++)switch(c[d]){case"italic":o=o|1;break;case"bold":o=o|2;break;case"underline":o=o|4;break;case"strikethrough":o=o|8;break}}let a=null;typeof r.foreground=="string"&&(a=r.foreground);let l=null;typeof r.background=="string"&&(l=r.background),e[t++]=new Hot(r.token||"",i,o,a,l)}return e}function zot(n,e){n.sort((d,u)=>{const h=qot(d.token,u.token);return h!==0?h:d.index-u.index});let t=0,i="000000",s="ffffff";for(;n.length>=1&&n[0].token==="";){const d=n.shift();d.fontStyle!==-1&&(t=d.fontStyle),d.foreground!==null&&(i=d.foreground),d.background!==null&&(s=d.background)}const r=new $ot;for(const d of e)r.getId(d);const o=r.getId(i),a=r.getId(s),l=new zQ(t,o,a),c=new UQ(l);for(let d=0,u=n.length;d<u;d++){const h=n[d];c.insert(h.token,h.fontStyle,r.getId(h.foreground),r.getId(h.background))}return new dSe(r,c)}const Uot=/^#?([0-9A-Fa-f]{6})([0-9A-Fa-f]{2})?$/;class $ot{constructor(){this._lastColorId=0,this._id2color=[],this._color2id=new Map}getId(e){if(e===null)return 0;const t=e.match(Uot);if(!t)throw new Error("Illegal value for token color: "+e);e=t[1].toUpperCase();let i=this._color2id.get(e);return i||(i=++this._lastColorId,this._color2id.set(e,i),this._id2color[i]=ge.fromHex("#"+e),i)}getColorMap(){return this._id2color.slice(0)}}class dSe{static createFromRawTokenTheme(e,t){return this.createFromParsedTokenTheme(Vot(e),t)}static createFromParsedTokenTheme(e,t){return zot(e,t)}constructor(e,t){this._colorMap=e,this._root=t,this._cache=new Map}getColorMap(){return this._colorMap.getColorMap()}_match(e){return this._root.match(e)}match(e,t){let i=this._cache.get(t);if(typeof i>"u"){const s=this._match(t),r=Kot(t);i=(s.metadata|r<<8)>>>0,this._cache.set(t,i)}return(i|e<<0)>>>0}}const jot=/\b(comment|string|regex|regexp)\b/;function Kot(n){const e=n.match(jot);if(!e)return 0;switch(e[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"regexp":return 3}throw new Error("Unexpected match for standard token type!")}function qot(n,e){return n<e?-1:n>e?1:0}class zQ{constructor(e,t,i){this._themeTrieElementRuleBrand=void 0,this._fontStyle=e,this._foreground=t,this._background=i,this.metadata=(this._fontStyle<<11|this._foreground<<15|this._background<<24)>>>0}clone(){return new zQ(this._fontStyle,this._foreground,this._background)}acceptOverwrite(e,t,i){e!==-1&&(this._fontStyle=e),t!==0&&(this._foreground=t),i!==0&&(this._background=i),this.metadata=(this._fontStyle<<11|this._foreground<<15|this._background<<24)>>>0}}class UQ{constructor(e){this._themeTrieElementBrand=void 0,this._mainRule=e,this._children=new Map}match(e){if(e==="")return this._mainRule;const t=e.indexOf(".");let i,s;t===-1?(i=e,s=""):(i=e.substring(0,t),s=e.substring(t+1));const r=this._children.get(i);return typeof r<"u"?r.match(s):this._mainRule}insert(e,t,i,s){if(e===""){this._mainRule.acceptOverwrite(t,i,s);return}const r=e.indexOf(".");let o,a;r===-1?(o=e,a=""):(o=e.substring(0,r),a=e.substring(r+1));let l=this._children.get(o);typeof l>"u"&&(l=new UQ(this._mainRule.clone()),this._children.set(o,l)),l.insert(a,t,i,s)}}function Got(n){const e=[];for(let t=1,i=n.length;t<i;t++){const s=n[t];e[t]=`.mtk${t} { color: ${s}; }`}return e.push(".mtki { font-style: italic; }"),e.push(".mtkb { font-weight: bold; }"),e.push(".mtku { text-decoration: underline; text-underline-position: under; }"),e.push(".mtks { text-decoration: line-through; }"),e.push(".mtks.mtku { text-decoration: underline line-through; text-underline-position: under; }"),e.join(`
`)}const Yot={base:"vs",inherit:!1,rules:[{token:"",foreground:"000000",background:"fffffe"},{token:"invalid",foreground:"cd3131"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"001188"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"delimiter.xml",foreground:"0000FF"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"FF0000"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"FF0000"},{token:"attribute.value",foreground:"0451A5"},{token:"attribute.value.number",foreground:"098658"},{token:"attribute.value.unit",foreground:"098658"},{token:"attribute.value.html",foreground:"0000FF"},{token:"attribute.value.xml",foreground:"0000FF"},{token:"string",foreground:"A31515"},{token:"string.html",foreground:"0000FF"},{token:"string.sql",foreground:"FF0000"},{token:"string.yaml",foreground:"0451A5"},{token:"keyword",foreground:"0000FF"},{token:"keyword.json",foreground:"0451A5"},{token:"keyword.flow",foreground:"AF00DB"},{token:"keyword.flow.scss",foreground:"0000FF"},{token:"operator.scss",foreground:"666666"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[Ad]:"#FFFFFE",[bf]:"#000000",[GCe]:"#E5EBF1",[QN]:"#D3D3D3",[JN]:"#939393",[OX]:"#ADD6FF4D"}},Zot={base:"vs-dark",inherit:!1,rules:[{token:"",foreground:"D4D4D4",background:"1E1E1E"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"74B0DF"},{token:"variable.predefined",foreground:"4864AA"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"B5CEA8"},{token:"number.hex",foreground:"5BB498"},{token:"regexp",foreground:"B46695"},{token:"annotation",foreground:"cc6666"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"DCDCDC"},{token:"delimiter.html",foreground:"808080"},{token:"delimiter.xml",foreground:"808080"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"A79873"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"DD6A6F"},{token:"metatag.content.html",foreground:"9CDCFE"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key.json",foreground:"9CDCFE"},{token:"string.value.json",foreground:"CE9178"},{token:"attribute.name",foreground:"9CDCFE"},{token:"attribute.value",foreground:"CE9178"},{token:"attribute.value.number.css",foreground:"B5CEA8"},{token:"attribute.value.unit.css",foreground:"B5CEA8"},{token:"attribute.value.hex.css",foreground:"D4D4D4"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"keyword.json",foreground:"CE9178"},{token:"keyword.flow.scss",foreground:"569CD6"},{token:"operator.scss",foreground:"909090"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[Ad]:"#1E1E1E",[bf]:"#D4D4D4",[GCe]:"#3A3D41",[QN]:"#404040",[JN]:"#707070",[OX]:"#ADD6FF26"}},Xot={base:"hc-black",inherit:!1,rules:[{token:"",foreground:"FFFFFF",background:"000000"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"1AEBFF"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"FFFFFF"},{token:"regexp",foreground:"C0C0C0"},{token:"annotation",foreground:"569CD6"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"FFFF00"},{token:"delimiter.html",foreground:"FFFF00"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta",foreground:"D4D4D4"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"569CD6"},{token:"metatag.content.html",foreground:"1AEBFF"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key",foreground:"9CDCFE"},{token:"string.value",foreground:"CE9178"},{token:"attribute.name",foreground:"569CD6"},{token:"attribute.value",foreground:"3FF23F"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[Ad]:"#000000",[bf]:"#FFFFFF",[QN]:"#FFFFFF",[JN]:"#FFFFFF"}},Qot={base:"hc-light",inherit:!1,rules:[{token:"",foreground:"292929",background:"FFFFFF"},{token:"invalid",foreground:"B5200D"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"264F70"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"B5200D"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"264F78"},{token:"attribute.value",foreground:"0451A5"},{token:"string",foreground:"A31515"},{token:"string.sql",foreground:"B5200D"},{token:"keyword",foreground:"0000FF"},{token:"keyword.flow",foreground:"AF00DB"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[Ad]:"#FFFFFF",[bf]:"#292929",[QN]:"#292929",[JN]:"#292929"}},Jot={IconContribution:"base.contributions.icons"};var Rce;(function(n){function e(t,i){let s=t.defaults;for(;ot.isThemeIcon(s);){const r=q0.getIcon(s.id);if(!r)return;s=r.defaults}return s}n.getDefinition=e})(Rce||(Rce={}));var Ace;(function(n){function e(i){return{weight:i.weight,style:i.style,src:i.src.map(s=>({format:s.format,location:s.location.toString()}))}}n.toJSONObject=e;function t(i){const s=r=>ca(r)?r:void 0;if(i&&Array.isArray(i.src)&&i.src.every(r=>ca(r.format)&&ca(r.location)))return{weight:s(i.weight),style:s(i.style),src:i.src.map(r=>({format:r.format,location:Xe.parse(r.location)}))}}n.fromJSONObject=t})(Ace||(Ace={}));class eat{constructor(){this._onDidChange=new X,this.onDidChange=this._onDidChange.event,this.iconSchema={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:v("iconDefinition.fontId","The id of the font to use. If not set, the font that is defined first is used.")},fontCharacter:{type:"string",description:v("iconDefinition.fontCharacter","The font character associated with the icon definition.")}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}},this.iconReferenceSchema={type:"string",pattern:`^${ot.iconNameExpression}$`,enum:[],enumDescriptions:[]},this.iconsById={},this.iconFontsById={}}registerIcon(e,t,i,s){const r=this.iconsById[e];if(r){if(i&&!r.description){r.description=i,this.iconSchema.properties[e].markdownDescription=`${i} $(${e})`;const l=this.iconReferenceSchema.enum.indexOf(e);l!==-1&&(this.iconReferenceSchema.enumDescriptions[l]=i),this._onDidChange.fire()}return r}const o={id:e,description:i,defaults:t,deprecationMessage:s};this.iconsById[e]=o;const a={$ref:"#/definitions/icons"};return s&&(a.deprecationMessage=s),i&&(a.markdownDescription=`${i}: $(${e})`),this.iconSchema.properties[e]=a,this.iconReferenceSchema.enum.push(e),this.iconReferenceSchema.enumDescriptions.push(i||""),this._onDidChange.fire(),{id:e}}getIcons(){return Object.keys(this.iconsById).map(e=>this.iconsById[e])}getIcon(e){return this.iconsById[e]}getIconSchema(){return this.iconSchema}toString(){const e=(r,o)=>r.id.localeCompare(o.id),t=r=>{for(;ot.isThemeIcon(r.defaults);)r=this.iconsById[r.defaults.id];return`codicon codicon-${r?r.id:""}`},i=[];i.push("| preview     | identifier                        | default codicon ID                | description"),i.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");const s=Object.keys(this.iconsById).map(r=>this.iconsById[r]);for(const r of s.filter(o=>!!o.description).sort(e))i.push(`|<i class="${t(r)}"></i>|${r.id}|${ot.isThemeIcon(r.defaults)?r.defaults.id:r.id}|${r.description||""}|`);i.push("| preview     | identifier                        "),i.push("| ----------- | --------------------------------- |");for(const r of s.filter(o=>!ot.isThemeIcon(o.defaults)).sort(e))i.push(`|<i class="${t(r)}"></i>|${r.id}|`);return i.join(`
`)}}const q0=new eat;_n.add(Jot.IconContribution,q0);function Xi(n,e,t,i){return q0.registerIcon(n,e,t,i)}function uSe(){return q0}function tat(){const n=a0e();for(const e in n){const t="\\"+n[e].toString(16);q0.registerIcon(e,{fontCharacter:t})}}tat();const hSe="vscode://schemas/icons",fSe=_n.as(tB.JSONContribution);fSe.registerSchema(hSe,q0.getIconSchema());const Mce=new yi(()=>fSe.notifySchemaChanged(hSe),200);q0.onDidChange(()=>{Mce.isScheduled()||Mce.schedule()});const gSe=Xi("widget-close",ye.close,v("widgetClose","Icon for the close action in widgets."));Xi("goto-previous-location",ye.arrowUp,v("previousChangeIcon","Icon for goto previous editor location."));Xi("goto-next-location",ye.arrowDown,v("nextChangeIcon","Icon for goto next editor location."));ot.modify(ye.sync,"spin");ot.modify(ye.loading,"spin");function iat(n){const e=new ue,t=e.add(new X),i=uSe();return e.add(i.onDidChange(()=>t.fire())),n&&e.add(n.onDidProductIconThemeChange(()=>t.fire())),{dispose:()=>e.dispose(),onDidChange:t.event,getCSS(){const s=n?n.getProductIconTheme():new pSe,r={},o=[],a=[];for(const l of i.getIcons()){const c=s.getIcon(l);if(!c)continue;const d=c.font,u=`--vscode-icon-${l.id}-font-family`,h=`--vscode-icon-${l.id}-content`;d?(r[d.id]=d.definition,a.push(`${u}: ${j9(d.id)};`,`${h}: '${c.fontCharacter}';`),o.push(`.codicon-${l.id}:before { content: '${c.fontCharacter}'; font-family: ${j9(d.id)}; }`)):(a.push(`${h}: '${c.fontCharacter}'; ${u}: 'codicon';`),o.push(`.codicon-${l.id}:before { content: '${c.fontCharacter}'; }`))}for(const l in r){const c=r[l],d=c.weight?`font-weight: ${c.weight};`:"",u=c.style?`font-style: ${c.style};`:"",h=c.src.map(f=>`${Qg(f.location)} format('${f.format}')`).join(", ");o.push(`@font-face { src: ${h}; font-family: ${j9(l)};${d}${u} font-display: block; }`)}return o.push(`:root { ${a.join(" ")} }`),o.join(`
`)}}}class pSe{getIcon(e){const t=uSe();let i=e.defaults;for(;ot.isThemeIcon(i);){const s=t.getIcon(i.id);if(!s)return;i=s.defaults}return i}}const dg="vs",Py="vs-dark",Gb="hc-black",Yb="hc-light",mSe=_n.as(zCe.ColorContribution),nat=_n.as(kCe.ThemingContribution);class _Se{constructor(e,t){this.semanticHighlighting=!1,this.themeData=t;const i=t.base;e.length>0?(B2(e)?this.id=e:this.id=i+" "+e,this.themeName=e):(this.id=i,this.themeName=i),this.colors=null,this.defaultColors=Object.create(null),this._tokenTheme=null}get base(){return this.themeData.base}notifyBaseUpdated(){this.themeData.inherit&&(this.colors=null,this._tokenTheme=null)}getColors(){if(!this.colors){const e=new Map;for(const t in this.themeData.colors)e.set(t,ge.fromHex(this.themeData.colors[t]));if(this.themeData.inherit){const t=j$(this.themeData.base);for(const i in t.colors)e.has(i)||e.set(i,ge.fromHex(t.colors[i]))}this.colors=e}return this.colors}getColor(e,t){const i=this.getColors().get(e);if(i)return i;if(t!==!1)return this.getDefault(e)}getDefault(e){let t=this.defaultColors[e];return t||(t=mSe.resolveDefaultColor(e,this),this.defaultColors[e]=t,t)}defines(e){return this.getColors().has(e)}get type(){switch(this.base){case dg:return yc.LIGHT;case Gb:return yc.HIGH_CONTRAST_DARK;case Yb:return yc.HIGH_CONTRAST_LIGHT;default:return yc.DARK}}get tokenTheme(){if(!this._tokenTheme){let e=[],t=[];if(this.themeData.inherit){const r=j$(this.themeData.base);e=r.rules,r.encodedTokensColors&&(t=r.encodedTokensColors)}const i=this.themeData.colors["editor.foreground"],s=this.themeData.colors["editor.background"];if(i||s){const r={token:""};i&&(r.foreground=i),s&&(r.background=s),e.push(r)}e=e.concat(this.themeData.rules),this.themeData.encodedTokensColors&&(t=this.themeData.encodedTokensColors),this._tokenTheme=dSe.createFromRawTokenTheme(e,t)}return this._tokenTheme}getTokenStyleMetadata(e,t,i){const r=this.tokenTheme._match([e].concat(t).join(".")).metadata,o=ra.getForeground(r),a=ra.getFontStyle(r);return{foreground:o,italic:!!(a&1),bold:!!(a&2),underline:!!(a&4),strikethrough:!!(a&8)}}}function B2(n){return n===dg||n===Py||n===Gb||n===Yb}function j$(n){switch(n){case dg:return Yot;case Py:return Zot;case Gb:return Xot;case Yb:return Qot}}function dA(n){const e=j$(n);return new _Se(n,e)}class sat extends ee{constructor(){super(),this._onColorThemeChange=this._register(new X),this.onDidColorThemeChange=this._onColorThemeChange.event,this._onProductIconThemeChange=this._register(new X),this.onDidProductIconThemeChange=this._onProductIconThemeChange.event,this._environment=Object.create(null),this._builtInProductIconTheme=new pSe,this._autoDetectHighContrast=!0,this._knownThemes=new Map,this._knownThemes.set(dg,dA(dg)),this._knownThemes.set(Py,dA(Py)),this._knownThemes.set(Gb,dA(Gb)),this._knownThemes.set(Yb,dA(Yb));const e=this._register(iat(this));this._codiconCSS=e.getCSS(),this._themeCSS="",this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._globalStyleElement=null,this._styleElements=[],this._colorMapOverride=null,this.setTheme(dg),this._onOSSchemeChanged(),this._register(e.onDidChange(()=>{this._codiconCSS=e.getCSS(),this._updateCSS()})),w0e(Ei,"(forced-colors: active)",()=>{this._onOSSchemeChanged()})}registerEditorContainer(e){return pP(e)?this._registerShadowDomContainer(e):this._registerRegularEditorContainer()}_registerRegularEditorContainer(){return this._globalStyleElement||(this._globalStyleElement=jl(void 0,e=>{e.className="monaco-colors",e.textContent=this._allCSS}),this._styleElements.push(this._globalStyleElement)),ee.None}_registerShadowDomContainer(e){const t=jl(e,i=>{i.className="monaco-colors",i.textContent=this._allCSS});return this._styleElements.push(t),{dispose:()=>{for(let i=0;i<this._styleElements.length;i++)if(this._styleElements[i]===t){this._styleElements.splice(i,1);return}}}}defineTheme(e,t){if(!/^[a-z0-9\-]+$/i.test(e))throw new Error("Illegal theme name!");if(!B2(t.base)&&!B2(e))throw new Error("Illegal theme base!");this._knownThemes.set(e,new _Se(e,t)),B2(e)&&this._knownThemes.forEach(i=>{i.base===e&&i.notifyBaseUpdated()}),this._theme.themeName===e&&this.setTheme(e)}getColorTheme(){return this._theme}setColorMapOverride(e){this._colorMapOverride=e,this._updateThemeOrColorMap()}setTheme(e){let t;this._knownThemes.has(e)?t=this._knownThemes.get(e):t=this._knownThemes.get(dg),this._updateActualTheme(t)}_updateActualTheme(e){!e||this._theme===e||(this._theme=e,this._updateThemeOrColorMap())}_onOSSchemeChanged(){if(this._autoDetectHighContrast){const e=Ei.matchMedia("(forced-colors: active)").matches;if(e!==Tu(this._theme.type)){let t;AS(this._theme.type)?t=e?Gb:Py:t=e?Yb:dg,this._updateActualTheme(this._knownThemes.get(t))}}}setAutoDetectHighContrast(e){this._autoDetectHighContrast=e,this._onOSSchemeChanged()}_updateThemeOrColorMap(){const e=[],t={},i={addRule:o=>{t[o]||(e.push(o),t[o]=!0)}};nat.getThemingParticipants().forEach(o=>o(this._theme,i,this._environment));const s=[];for(const o of mSe.getColors()){const a=this._theme.getColor(o.id,!0);a&&s.push(`${AX(o.id)}: ${a.toString()};`)}i.addRule(`.monaco-editor, .monaco-diff-editor, .monaco-component { ${s.join(`
`)} }`);const r=this._colorMapOverride||this._theme.tokenTheme.getColorMap();i.addRule(Got(r)),this._themeCSS=e.join(`
`),this._updateCSS(),In.setColorMap(r),this._onColorThemeChange.fire(this._theme)}_updateCSS(){this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._styleElements.forEach(e=>e.textContent=this._allCSS)}getFileIconTheme(){return{hasFileIcons:!1,hasFolderIcons:!1,hidesExplorerArrows:!1}}getProductIconTheme(){return this._builtInProductIconTheme}}const Jl=Wt("themeService");var rat=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},H8=function(n,e){return function(t,i){e(t,i,n)}};let K$=class extends ee{constructor(e,t,i){super(),this._contextKeyService=e,this._layoutService=t,this._configurationService=i,this._accessibilitySupport=0,this._onDidChangeScreenReaderOptimized=new X,this._onDidChangeReducedMotion=new X,this._onDidChangeLinkUnderline=new X,this._accessibilityModeEnabledContext=UN.bindTo(this._contextKeyService);const s=()=>this._accessibilityModeEnabledContext.set(this.isScreenReaderOptimized());this._register(this._configurationService.onDidChangeConfiguration(o=>{o.affectsConfiguration("editor.accessibilitySupport")&&(s(),this._onDidChangeScreenReaderOptimized.fire()),o.affectsConfiguration("workbench.reduceMotion")&&(this._configMotionReduced=this._configurationService.getValue("workbench.reduceMotion"),this._onDidChangeReducedMotion.fire())})),s(),this._register(this.onDidChangeScreenReaderOptimized(()=>s()));const r=Ei.matchMedia("(prefers-reduced-motion: reduce)");this._systemMotionReduced=r.matches,this._configMotionReduced=this._configurationService.getValue("workbench.reduceMotion"),this._linkUnderlinesEnabled=this._configurationService.getValue("accessibility.underlineLinks"),this.initReducedMotionListeners(r),this.initLinkUnderlineListeners()}initReducedMotionListeners(e){this._register(re(e,"change",()=>{this._systemMotionReduced=e.matches,this._configMotionReduced==="auto"&&this._onDidChangeReducedMotion.fire()}));const t=()=>{const i=this.isMotionReduced();this._layoutService.mainContainer.classList.toggle("reduce-motion",i),this._layoutService.mainContainer.classList.toggle("enable-motion",!i)};t(),this._register(this.onDidChangeReducedMotion(()=>t()))}initLinkUnderlineListeners(){this._register(this._configurationService.onDidChangeConfiguration(t=>{if(t.affectsConfiguration("accessibility.underlineLinks")){const i=this._configurationService.getValue("accessibility.underlineLinks");this._linkUnderlinesEnabled=i,this._onDidChangeLinkUnderline.fire()}}));const e=()=>{const t=this._linkUnderlinesEnabled;this._layoutService.mainContainer.classList.toggle("underline-links",t)};e(),this._register(this.onDidChangeLinkUnderlines(()=>e()))}onDidChangeLinkUnderlines(e){return this._onDidChangeLinkUnderline.event(e)}get onDidChangeScreenReaderOptimized(){return this._onDidChangeScreenReaderOptimized.event}isScreenReaderOptimized(){const e=this._configurationService.getValue("editor.accessibilitySupport");return e==="on"||e==="auto"&&this._accessibilitySupport===2}get onDidChangeReducedMotion(){return this._onDidChangeReducedMotion.event}isMotionReduced(){const e=this._configMotionReduced;return e==="on"||e==="auto"&&this._systemMotionReduced}getAccessibilitySupport(){return this._accessibilitySupport}};K$=rat([H8(0,at),H8(1,tv),H8(2,Tt)],K$);var PB=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Qh=function(n,e){return function(t,i){e(t,i,n)}},XC,vk;let q$=class{constructor(e,t,i){this._commandService=e,this._keybindingService=t,this._hiddenStates=new G$(i)}createMenu(e,t,i){return new CO(e,this._hiddenStates,{emitEventsForSubmenuChanges:!1,eventDebounceDelay:50,...i},this._commandService,this._keybindingService,t)}getMenuActions(e,t,i){const s=new CO(e,this._hiddenStates,{emitEventsForSubmenuChanges:!1,eventDebounceDelay:50,...i},this._commandService,this._keybindingService,t),r=s.getActions(i);return s.dispose(),r}resetHiddenStates(e){this._hiddenStates.reset(e)}};q$=PB([Qh(0,Vi),Qh(1,hi),Qh(2,Wd)],q$);var rw;let G$=(rw=class{constructor(e){this._storageService=e,this._disposables=new ue,this._onDidChange=new X,this.onDidChange=this._onDidChange.event,this._ignoreChangeEvent=!1,this._hiddenByDefaultCache=new Map;try{const t=e.get(XC._key,0,"{}");this._data=JSON.parse(t)}catch{this._data=Object.create(null)}this._disposables.add(e.onDidChangeValue(0,XC._key,this._disposables)(()=>{if(!this._ignoreChangeEvent)try{const t=e.get(XC._key,0,"{}");this._data=JSON.parse(t)}catch(t){console.log("FAILED to read storage after UPDATE",t)}this._onDidChange.fire()}))}dispose(){this._onDidChange.dispose(),this._disposables.dispose()}_isHiddenByDefault(e,t){return this._hiddenByDefaultCache.get(`${e.id}/${t}`)??!1}setDefaultState(e,t,i){this._hiddenByDefaultCache.set(`${e.id}/${t}`,i)}isHidden(e,t){var r;const i=this._isHiddenByDefault(e,t),s=((r=this._data[e.id])==null?void 0:r.includes(t))??!1;return i?!s:s}updateHidden(e,t,i){this._isHiddenByDefault(e,t)&&(i=!i);const r=this._data[e.id];if(i)r?r.indexOf(t)<0&&r.push(t):this._data[e.id]=[t];else if(r){const o=r.indexOf(t);o>=0&&YUe(r,o),r.length===0&&delete this._data[e.id]}this._persist()}reset(e){if(e===void 0)this._data=Object.create(null),this._persist();else{for(const{id:t}of e)this._data[t]&&delete this._data[t];this._persist()}}_persist(){try{this._ignoreChangeEvent=!0;const e=JSON.stringify(this._data);this._storageService.store(XC._key,e,0,0)}finally{this._ignoreChangeEvent=!1}}},XC=rw,rw._key="menu.hiddenCommands",rw);G$=XC=PB([Qh(0,Wd)],G$);class lE{constructor(e,t){this._id=e,this._collectContextKeysForSubmenus=t,this._menuGroups=[],this._allMenuIds=new Set,this._structureContextKeys=new Set,this._preconditionContextKeys=new Set,this._toggledContextKeys=new Set,this.refresh()}get allMenuIds(){return this._allMenuIds}get structureContextKeys(){return this._structureContextKeys}get preconditionContextKeys(){return this._preconditionContextKeys}get toggledContextKeys(){return this._toggledContextKeys}refresh(){this._menuGroups.length=0,this._allMenuIds.clear(),this._structureContextKeys.clear(),this._preconditionContextKeys.clear(),this._toggledContextKeys.clear();const e=this._sort(Us.getMenuItems(this._id));let t;for(const i of e){const s=i.group||"";(!t||t[0]!==s)&&(t=[s,[]],this._menuGroups.push(t)),t[1].push(i),this._collectContextKeysAndSubmenuIds(i)}this._allMenuIds.add(this._id)}_sort(e){return e}_collectContextKeysAndSubmenuIds(e){if(lE._fillInKbExprKeys(e.when,this._structureContextKeys),Sy(e)){if(e.command.precondition&&lE._fillInKbExprKeys(e.command.precondition,this._preconditionContextKeys),e.command.toggled){const t=e.command.toggled.condition||e.command.toggled;lE._fillInKbExprKeys(t,this._toggledContextKeys)}}else this._collectContextKeysForSubmenus&&(Us.getMenuItems(e.submenu).forEach(this._collectContextKeysAndSubmenuIds,this),this._allMenuIds.add(e.submenu))}static _fillInKbExprKeys(e,t){if(e)for(const i of e.keys())t.add(i)}}let Y$=vk=class extends lE{constructor(e,t,i,s,r,o){super(e,i),this._hiddenStates=t,this._commandService=s,this._keybindingService=r,this._contextKeyService=o,this.refresh()}createActionGroups(e){const t=[];for(const i of this._menuGroups){const[s,r]=i;let o;for(const a of r)if(this._contextKeyService.contextMatchesRules(a.when)){const l=Sy(a);l&&this._hiddenStates.setDefaultState(this._id,a.command.id,!!a.isHiddenByDefault);const c=oat(this._id,l?a.command:a,this._hiddenStates);if(l){const d=vSe(this._commandService,this._keybindingService,a.command.id,a.when);(o??(o=[])).push(new Za(a.command,a.alt,e,c,d,this._contextKeyService,this._commandService))}else{const d=new vk(a.submenu,this._hiddenStates,this._collectContextKeysForSubmenus,this._commandService,this._keybindingService,this._contextKeyService).createActionGroups(e),u=Ts.join(...d.map(h=>h[1]));u.length>0&&(o??(o=[])).push(new xy(a,c,u))}}o&&o.length>0&&t.push([s,o])}return t}_sort(e){return e.sort(vk._compareMenuItems)}static _compareMenuItems(e,t){const i=e.group,s=t.group;if(i!==s){if(i){if(!s)return-1}else return 1;if(i==="navigation")return-1;if(s==="navigation")return 1;const a=i.localeCompare(s);if(a!==0)return a}const r=e.order||0,o=t.order||0;return r<o?-1:r>o?1:vk._compareTitles(Sy(e)?e.command.title:e.title,Sy(t)?t.command.title:t.title)}static _compareTitles(e,t){const i=typeof e=="string"?e:e.original,s=typeof t=="string"?t:t.original;return i.localeCompare(s)}};Y$=vk=PB([Qh(3,Vi),Qh(4,hi),Qh(5,at)],Y$);let CO=class{constructor(e,t,i,s,r,o){this._disposables=new ue,this._menuInfo=new Y$(e,t,i.emitEventsForSubmenuChanges,s,r,o);const a=new yi(()=>{this._menuInfo.refresh(),this._onDidChange.fire({menu:this,isStructuralChange:!0,isEnablementChange:!0,isToggleChange:!0})},i.eventDebounceDelay);this._disposables.add(a),this._disposables.add(Us.onDidChangeMenu(u=>{for(const h of this._menuInfo.allMenuIds)if(u.has(h)){a.schedule();break}}));const l=this._disposables.add(new ue),c=u=>{let h=!1,f=!1,g=!1;for(const p of u)if(h=h||p.isStructuralChange,f=f||p.isEnablementChange,g=g||p.isToggleChange,h&&f&&g)break;return{menu:this,isStructuralChange:h,isEnablementChange:f,isToggleChange:g}},d=()=>{l.add(o.onDidChangeContext(u=>{const h=u.affectsSome(this._menuInfo.structureContextKeys),f=u.affectsSome(this._menuInfo.preconditionContextKeys),g=u.affectsSome(this._menuInfo.toggledContextKeys);(h||f||g)&&this._onDidChange.fire({menu:this,isStructuralChange:h,isEnablementChange:f,isToggleChange:g})})),l.add(t.onDidChange(u=>{this._onDidChange.fire({menu:this,isStructuralChange:!0,isEnablementChange:!1,isToggleChange:!1})}))};this._onDidChange=new Xwe({onWillAddFirstListener:d,onDidRemoveLastListener:l.clear.bind(l),delay:i.eventDebounceDelay,merge:c}),this.onDidChange=this._onDidChange.event}getActions(e){return this._menuInfo.createActionGroups(e)}dispose(){this._disposables.dispose(),this._onDidChange.dispose()}};CO=PB([Qh(3,Vi),Qh(4,hi),Qh(5,at)],CO);function oat(n,e,t){const i=lGe(e)?e.submenu.id:e.id,s=typeof e.title=="string"?e.title:e.title.value,r=Ub({id:`hide/${n.id}/${i}`,label:v("hide.label","Hide '{0}'",s),run(){t.updateHidden(n,i,!0)}}),o=Ub({id:`toggle/${n.id}/${i}`,label:s,get checked(){return!t.isHidden(n,i)},run(){t.updateHidden(n,i,!!this.checked)}});return{hide:r,toggle:o,get isHidden(){return!o.checked}}}function vSe(n,e,t,i=void 0,s=!0){return Ub({id:`configureKeybinding/${t}`,label:v("configure keybinding","Configure Keybinding"),enabled:s,run(){const o=!!!e.lookupKeybinding(t)&&i?i.serialize():void 0;n.executeCommand("workbench.action.openGlobalKeybindings",`@command:${t}`+(o?` +when:${o}`:""))}})}var aat=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Pce=function(n,e){return function(t,i){e(t,i,n)}},Z$;const Oce="application/vnd.code.resources";var ow;let X$=(ow=class extends ee{constructor(e,t){super(),this.layoutService=e,this.logService=t,this.mapTextToType=new Map,this.findText="",this.resources=[],this.resourcesStateHash=void 0,(Yg||C0e)&&this.installWebKitWriteTextWorkaround(),this._register(Ee.runAndSubscribe(H3,({window:i,disposables:s})=>{s.add(re(i.document,"copy",()=>this.clearResourcesState()))},{window:Ei,disposables:this._store}))}installWebKitWriteTextWorkaround(){const e=()=>{const t=new Ex;this.webKitPendingClipboardWritePromise&&!this.webKitPendingClipboardWritePromise.isSettled&&this.webKitPendingClipboardWritePromise.cancel(),this.webKitPendingClipboardWritePromise=t,ck().navigator.clipboard.write([new ClipboardItem({"text/plain":t.p})]).catch(async i=>{(!(i instanceof Error)||i.name!=="NotAllowedError"||!t.isRejected)&&this.logService.error(i)})};this._register(Ee.runAndSubscribe(this.layoutService.onDidAddContainer,({container:t,disposables:i})=>{i.add(re(t,"click",e)),i.add(re(t,"keydown",e))},{container:this.layoutService.mainContainer,disposables:this._store}))}async writeText(e,t){if(this.clearResourcesState(),t){this.mapTextToType.set(t,e);return}if(this.webKitPendingClipboardWritePromise)return this.webKitPendingClipboardWritePromise.complete(e);try{return await ck().navigator.clipboard.writeText(e)}catch(i){console.error(i)}this.fallbackWriteText(e)}fallbackWriteText(e){const t=Ix(),i=t.activeElement,s=t.body.appendChild(xe("textarea",{"aria-hidden":!0}));s.style.height="1px",s.style.width="1px",s.style.position="absolute",s.value=e,s.focus(),s.select(),t.execCommand("copy"),Ns(i)&&i.focus(),s.remove()}async readText(e){if(e)return this.mapTextToType.get(e)||"";try{return await ck().navigator.clipboard.readText()}catch(t){console.error(t)}return""}async readFindText(){return this.findText}async writeFindText(e){this.findText=e}async readResources(){try{const t=await ck().navigator.clipboard.read();for(const i of t)if(i.types.includes(`web ${Oce}`)){const s=await i.getType(`web ${Oce}`);return JSON.parse(await s.text()).map(o=>Xe.from(o))}}catch{}const e=await this.computeResourcesStateHash();return this.resourcesStateHash!==e&&this.clearResourcesState(),this.resources}async computeResourcesStateHash(){if(this.resources.length===0)return;const e=await this.readText();return B3(e.substring(0,Z$.MAX_RESOURCE_STATE_SOURCE_LENGTH))}clearInternalState(){this.clearResourcesState()}clearResourcesState(){this.resources=[],this.resourcesStateHash=void 0}},Z$=ow,ow.MAX_RESOURCE_STATE_SOURCE_LENGTH=1e3,ow);X$=Z$=aat([Pce(0,tv),Pce(1,Cr)],X$);const pp=Wt("clipboardService");var lat=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},cat=function(n,e){return function(t,i){e(t,i,n)}};const cE="data-keybinding-context";let $Q=class{constructor(e,t){this._id=e,this._parent=t,this._value=Object.create(null),this._value._contextId=e}get value(){return{...this._value}}setValue(e,t){return this._value[e]!==t?(this._value[e]=t,!0):!1}removeValue(e){return e in this._value?(delete this._value[e],!0):!1}getValue(e){const t=this._value[e];return typeof t>"u"&&this._parent?this._parent.getValue(e):t}};const R4=class R4 extends $Q{constructor(){super(-1,null)}setValue(e,t){return!1}removeValue(e){return!1}getValue(e){}};R4.INSTANCE=new R4;let qS=R4;const HE=class HE extends $Q{constructor(e,t,i){super(e,null),this._configurationService=t,this._values=Iy.forConfigKeys(),this._listener=this._configurationService.onDidChangeConfiguration(s=>{if(s.source===7){const r=Array.from(this._values,([o])=>o);this._values.clear(),i.fire(new Bce(r))}else{const r=[];for(const o of s.affectedKeys){const a=`config.${o}`,l=this._values.findSuperstr(a);l!==void 0&&(r.push(...qt.map(l,([c])=>c)),this._values.deleteSuperstr(a)),this._values.has(a)&&(r.push(a),this._values.delete(a))}i.fire(new Bce(r))}})}dispose(){this._listener.dispose()}getValue(e){if(e.indexOf(HE._keyPrefix)!==0)return super.getValue(e);if(this._values.has(e))return this._values.get(e);const t=e.substr(HE._keyPrefix.length),i=this._configurationService.getValue(t);let s;switch(typeof i){case"number":case"boolean":case"string":s=i;break;default:Array.isArray(i)?s=JSON.stringify(i):s=i}return this._values.set(e,s),s}setValue(e,t){return super.setValue(e,t)}removeValue(e){return super.removeValue(e)}};HE._keyPrefix="config.";let Q$=HE;class dat{constructor(e,t,i){this._service=e,this._key=t,this._defaultValue=i,this.reset()}set(e){this._service.setContext(this._key,e)}reset(){typeof this._defaultValue>"u"?this._service.removeContext(this._key):this._service.setContext(this._key,this._defaultValue)}get(){return this._service.getContextKeyValue(this._key)}}class Fce{constructor(e){this.key=e}affectsSome(e){return e.has(this.key)}allKeysContainedIn(e){return this.affectsSome(e)}}class Bce{constructor(e){this.keys=e}affectsSome(e){for(const t of this.keys)if(e.has(t))return!0;return!1}allKeysContainedIn(e){return this.keys.every(t=>e.has(t))}}class uat{constructor(e){this.events=e}affectsSome(e){for(const t of this.events)if(t.affectsSome(e))return!0;return!1}allKeysContainedIn(e){return this.events.every(t=>t.allKeysContainedIn(e))}}function hat(n,e){return n.allKeysContainedIn(new Set(Object.keys(e)))}class bSe extends ee{constructor(e){super(),this._onDidChangeContext=this._register(new o0({merge:t=>new uat(t)})),this.onDidChangeContext=this._onDidChangeContext.event,this._isDisposed=!1,this._myContextId=e}createKey(e,t){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new dat(this,e,t)}bufferChangeEvents(e){this._onDidChangeContext.pause();try{e()}finally{this._onDidChangeContext.resume()}}createScoped(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new fat(this,e)}contextMatchesRules(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");const t=this.getContextValuesContainer(this._myContextId);return e?e.evaluate(t):!0}getContextKeyValue(e){if(!this._isDisposed)return this.getContextValuesContainer(this._myContextId).getValue(e)}setContext(e,t){if(this._isDisposed)return;const i=this.getContextValuesContainer(this._myContextId);i&&i.setValue(e,t)&&this._onDidChangeContext.fire(new Fce(e))}removeContext(e){this._isDisposed||this.getContextValuesContainer(this._myContextId).removeValue(e)&&this._onDidChangeContext.fire(new Fce(e))}getContext(e){return this._isDisposed?qS.INSTANCE:this.getContextValuesContainer(gat(e))}dispose(){super.dispose(),this._isDisposed=!0}}let J$=class extends bSe{constructor(e){super(0),this._contexts=new Map,this._lastContextId=0;const t=this._register(new Q$(this._myContextId,e,this._onDidChangeContext));this._contexts.set(this._myContextId,t)}getContextValuesContainer(e){return this._isDisposed?qS.INSTANCE:this._contexts.get(e)||qS.INSTANCE}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ContextKeyService has been disposed");const t=++this._lastContextId;return this._contexts.set(t,new $Q(t,this.getContextValuesContainer(e))),t}disposeContext(e){this._isDisposed||this._contexts.delete(e)}};J$=lat([cat(0,Tt)],J$);class fat extends bSe{constructor(e,t){if(super(e.createChildContext()),this._parentChangeListener=this._register(new As),this._parent=e,this._updateParentChangeListener(),this._domNode=t,this._domNode.hasAttribute(cE)){let i="";this._domNode.classList&&(i=Array.from(this._domNode.classList.values()).join(", ")),console.error(`Element already has context attribute${i?": "+i:""}`)}this._domNode.setAttribute(cE,String(this._myContextId))}_updateParentChangeListener(){this._parentChangeListener.value=this._parent.onDidChangeContext(e=>{const i=this._parent.getContextValuesContainer(this._myContextId).value;hat(e,i)||this._onDidChangeContext.fire(e)})}dispose(){this._isDisposed||(this._parent.disposeContext(this._myContextId),this._domNode.removeAttribute(cE),super.dispose())}getContextValuesContainer(e){return this._isDisposed?qS.INSTANCE:this._parent.getContextValuesContainer(e)}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ScopedContextKeyService has been disposed");return this._parent.createChildContext(e)}disposeContext(e){this._isDisposed||this._parent.disposeContext(e)}}function gat(n){for(;n;){if(n.hasAttribute(cE)){const e=n.getAttribute(cE);return e?parseInt(e,10):NaN}n=n.parentElement}return 0}function pat(n,e,t){n.get(at).createKey(String(e),mat(t))}function mat(n){return Fwe(n,e=>{if(typeof e=="object"&&e.$mid===1)return Xe.revive(e).toString();if(e instanceof Xe)return e.toString()})}Gt.registerCommand("_setContext",pat);Gt.registerCommand({id:"getContextKeyInfo",handler(){return[...Re.all()].sort((n,e)=>n.key.localeCompare(e.key))},metadata:{description:v("getContextKeyInfo","A command that returns information about context keys"),args:[]}});Gt.registerCommand("_generateContextKeyInfo",function(){const n=[],e=new Set;for(const t of Re.all())e.has(t.key)||(e.add(t.key),n.push(t));n.sort((t,i)=>t.key.localeCompare(i.key)),console.log(JSON.stringify(n,void 0,2))});let _at=class{constructor(e,t){this.key=e,this.data=t,this.incoming=new Map,this.outgoing=new Map}};class Wce{constructor(e){this._hashFn=e,this._nodes=new Map}roots(){const e=[];for(const t of this._nodes.values())t.outgoing.size===0&&e.push(t);return e}insertEdge(e,t){const i=this.lookupOrInsertNode(e),s=this.lookupOrInsertNode(t);i.outgoing.set(s.key,s),s.incoming.set(i.key,i)}removeNode(e){const t=this._hashFn(e);this._nodes.delete(t);for(const i of this._nodes.values())i.outgoing.delete(t),i.incoming.delete(t)}lookupOrInsertNode(e){const t=this._hashFn(e);let i=this._nodes.get(t);return i||(i=new _at(t,e),this._nodes.set(t,i)),i}isEmpty(){return this._nodes.size===0}toString(){const e=[];for(const[t,i]of this._nodes)e.push(`${t}
	(-> incoming)[${[...i.incoming.keys()].join(", ")}]
	(outgoing ->)[${[...i.outgoing.keys()].join(",")}]
`);return e.join(`
`)}findCycleSlow(){for(const[e,t]of this._nodes){const i=new Set([e]),s=this._findCycle(t,i);if(s)return s}}_findCycle(e,t){for(const[i,s]of e.outgoing){if(t.has(i))return[...t,i].join(" -> ");t.add(i);const r=this._findCycle(s,t);if(r)return r;t.delete(i)}}}class Ux{constructor(...e){this._entries=new Map;for(const[t,i]of e)this.set(t,i)}set(e,t){const i=this._entries.get(e);return this._entries.set(e,t),i}get(e){return this._entries.get(e)}}const vat=!1;class Hce extends Error{constructor(e){super("cyclic dependency between services"),this.message=e.findCycleSlow()??`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}}class yO{constructor(e=new Ux,t=!1,i,s=vat){this._services=e,this._strict=t,this._parent=i,this._enableTracing=s,this._isDisposed=!1,this._servicesToMaybeDispose=new Set,this._children=new Set,this._activeInstantiations=new Set,this._services.set(Ze,this),this._globalGraph=s?(i==null?void 0:i._globalGraph)??new Wce(r=>r):void 0}dispose(){if(!this._isDisposed){this._isDisposed=!0,Ti(this._children),this._children.clear();for(const e of this._servicesToMaybeDispose)M3(e)&&e.dispose();this._servicesToMaybeDispose.clear()}}_throwIfDisposed(){if(this._isDisposed)throw new Error("InstantiationService has been disposed")}createChild(e,t){this._throwIfDisposed();const i=this,s=new class extends yO{dispose(){i._children.delete(s),super.dispose()}}(e,this._strict,this,this._enableTracing);return this._children.add(s),t==null||t.add(s),s}invokeFunction(e,...t){this._throwIfDisposed();const i=dE.traceInvocation(this._enableTracing,e);let s=!1;try{return e({get:o=>{if(s)throw YZ("service accessor is only valid during the invocation of its target method");const a=this._getOrCreateServiceInstance(o,i);if(!a)throw new Error(`[invokeFunction] unknown service '${o}'`);return a}},...t)}finally{s=!0,i.stop()}}createInstance(e,...t){this._throwIfDisposed();let i,s;return e instanceof Dh?(i=dE.traceCreation(this._enableTracing,e.ctor),s=this._createInstance(e.ctor,e.staticArguments.concat(t),i)):(i=dE.traceCreation(this._enableTracing,e),s=this._createInstance(e,t,i)),i.stop(),s}_createInstance(e,t=[],i){const s=wu.getServiceDependencies(e).sort((a,l)=>a.index-l.index),r=[];for(const a of s){const l=this._getOrCreateServiceInstance(a.id,i);l||this._throwIfStrict(`[createInstance] ${e.name} depends on UNKNOWN service ${a.id}.`,!1),r.push(l)}const o=s.length>0?s[0].index:t.length;if(t.length!==o){console.trace(`[createInstance] First service dependency of ${e.name} at position ${o+1} conflicts with ${t.length} static arguments`);const a=o-t.length;a>0?t=t.concat(new Array(a)):t=t.slice(0,o)}return Reflect.construct(e,t.concat(r))}_setCreatedServiceInstance(e,t){if(this._services.get(e)instanceof Dh)this._services.set(e,t);else if(this._parent)this._parent._setCreatedServiceInstance(e,t);else throw new Error("illegalState - setting UNKNOWN service instance")}_getServiceInstanceOrDescriptor(e){const t=this._services.get(e);return!t&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):t}_getOrCreateServiceInstance(e,t){this._globalGraph&&this._globalGraphImplicitDependency&&this._globalGraph.insertEdge(this._globalGraphImplicitDependency,String(e));const i=this._getServiceInstanceOrDescriptor(e);return i instanceof Dh?this._safeCreateAndCacheServiceInstance(e,i,t.branch(e,!0)):(t.branch(e,!1),i)}_safeCreateAndCacheServiceInstance(e,t,i){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,t,i)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,t,i){var l;const s=new Wce(c=>c.id.toString());let r=0;const o=[{id:e,desc:t,_trace:i}],a=new Set;for(;o.length;){const c=o.pop();if(!a.has(String(c.id))){if(a.add(String(c.id)),s.lookupOrInsertNode(c),r++>1e3)throw new Hce(s);for(const d of wu.getServiceDependencies(c.desc.ctor)){const u=this._getServiceInstanceOrDescriptor(d.id);if(u||this._throwIfStrict(`[createInstance] ${e} depends on ${d.id} which is NOT registered.`,!0),(l=this._globalGraph)==null||l.insertEdge(String(c.id),String(d.id)),u instanceof Dh){const h={id:d.id,desc:u,_trace:c._trace.branch(d.id,!0)};s.insertEdge(c,h),o.push(h)}}}}for(;;){const c=s.roots();if(c.length===0){if(!s.isEmpty())throw new Hce(s);break}for(const{data:d}of c){if(this._getServiceInstanceOrDescriptor(d.id)instanceof Dh){const h=this._createServiceInstanceWithOwner(d.id,d.desc.ctor,d.desc.staticArguments,d.desc.supportsDelayedInstantiation,d._trace);this._setCreatedServiceInstance(d.id,h)}s.removeNode(d)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,t,i=[],s,r){if(this._services.get(e)instanceof Dh)return this._createServiceInstance(e,t,i,s,r,this._servicesToMaybeDispose);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,t,i,s,r);throw new Error(`illegalState - creating UNKNOWN service instance ${t.name}`)}_createServiceInstance(e,t,i=[],s,r,o){if(s){const a=new yO(void 0,this._strict,this,this._enableTracing);a._globalGraphImplicitDependency=String(e);const l=new Map,c=new PKe(()=>{const d=a._createInstance(t,i,r);for(const[u,h]of l){const f=d[u];if(typeof f=="function")for(const g of h)g.disposable=f.apply(d,g.listener)}return l.clear(),o.add(d),d});return new Proxy(Object.create(null),{get(d,u){if(!c.isInitialized&&typeof u=="string"&&(u.startsWith("onDid")||u.startsWith("onWill"))){let g=l.get(u);return g||(g=new xo,l.set(u,g)),(_,w,b)=>{if(c.isInitialized)return c.value[u](_,w,b);{const y={listener:[_,w,b],disposable:void 0},S=g.push(y);return Ye(()=>{var E;S(),(E=y.disposable)==null||E.dispose()})}}}if(u in d)return d[u];const h=c.value;let f=h[u];return typeof f!="function"||(f=f.bind(h),d[u]=f),f},set(d,u,h){return c.value[u]=h,!0},getPrototypeOf(d){return t.prototype}})}else{const a=this._createInstance(t,i,r);return o.add(a),a}}_throwIfStrict(e,t){if(t&&console.warn(e),this._strict)throw new Error(e)}}const vl=class vl{static traceInvocation(e,t){return e?new vl(2,t.name||new Error().stack.split(`
`).slice(3,4).join(`
`)):vl._None}static traceCreation(e,t){return e?new vl(1,t.name):vl._None}constructor(e,t){this.type=e,this.name=t,this._start=Date.now(),this._dep=[]}branch(e,t){const i=new vl(3,e.toString());return this._dep.push([e,t,i]),i}stop(){const e=Date.now()-this._start;vl._totals+=e;let t=!1;function i(r,o){const a=[],l=new Array(r+1).join("	");for(const[c,d,u]of o._dep)if(d&&u){t=!0,a.push(`${l}CREATES -> ${c}`);const h=i(r+1,u);h&&a.push(h)}else a.push(`${l}uses -> ${c}`);return a.join(`
`)}const s=[`${this.type===1?"CREATE":"CALL"} ${this.name}`,`${i(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${vl._totals.toFixed(2)}ms)`];(e>2||t)&&vl.all.add(s.join(`
`))}};vl.all=new Set,vl._None=new class extends vl{constructor(){super(0,null)}stop(){}branch(){return this}},vl._totals=0;let dE=vl;const bat=new Set([mt.inMemory,mt.vscodeSourceControl,mt.walkThrough,mt.walkThroughSnippet,mt.vscodeChatCodeBlock]);class wat{constructor(){this._byResource=new $s,this._byOwner=new Map}set(e,t,i){let s=this._byResource.get(e);s||(s=new Map,this._byResource.set(e,s)),s.set(t,i);let r=this._byOwner.get(t);r||(r=new $s,this._byOwner.set(t,r)),r.set(e,i)}get(e,t){const i=this._byResource.get(e);return i==null?void 0:i.get(t)}delete(e,t){let i=!1,s=!1;const r=this._byResource.get(e);r&&(i=r.delete(t));const o=this._byOwner.get(t);if(o&&(s=o.delete(e)),i!==s)throw new Error("illegal state");return i&&s}values(e){var t,i;return typeof e=="string"?((t=this._byOwner.get(e))==null?void 0:t.values())??qt.empty():Xe.isUri(e)?((i=this._byResource.get(e))==null?void 0:i.values())??qt.empty():qt.map(qt.concat(...this._byOwner.values()),s=>s[1])}}class Cat{constructor(e){this.errors=0,this.infos=0,this.warnings=0,this.unknowns=0,this._data=new $s,this._service=e,this._subscription=e.onMarkerChanged(this._update,this)}dispose(){this._subscription.dispose()}_update(e){for(const t of e){const i=this._data.get(t);i&&this._substract(i);const s=this._resourceStats(t);this._add(s),this._data.set(t,s)}}_resourceStats(e){const t={errors:0,warnings:0,infos:0,unknowns:0};if(bat.has(e.scheme))return t;for(const{severity:i}of this._service.read({resource:e}))i===Nn.Error?t.errors+=1:i===Nn.Warning?t.warnings+=1:i===Nn.Info?t.infos+=1:t.unknowns+=1;return t}_substract(e){this.errors-=e.errors,this.warnings-=e.warnings,this.infos-=e.infos,this.unknowns-=e.unknowns}_add(e){this.errors+=e.errors,this.warnings+=e.warnings,this.infos+=e.infos,this.unknowns+=e.unknowns}}class jp{constructor(){this._onMarkerChanged=new Xwe({delay:0,merge:jp._merge}),this.onMarkerChanged=this._onMarkerChanged.event,this._data=new wat,this._stats=new Cat(this)}dispose(){this._stats.dispose(),this._onMarkerChanged.dispose()}remove(e,t){for(const i of t||[])this.changeOne(e,i,[])}changeOne(e,t,i){if(Rwe(i))this._data.delete(t,e)&&this._onMarkerChanged.fire([t]);else{const s=[];for(const r of i){const o=jp._toMarker(e,t,r);o&&s.push(o)}this._data.set(t,e,s),this._onMarkerChanged.fire([t])}}static _toMarker(e,t,i){let{code:s,severity:r,message:o,source:a,startLineNumber:l,startColumn:c,endLineNumber:d,endColumn:u,relatedInformation:h,tags:f}=i;if(o)return l=l>0?l:1,c=c>0?c:1,d=d>=l?d:l,u=u>0?u:c,{resource:t,owner:e,code:s,severity:r,message:o,source:a,startLineNumber:l,startColumn:c,endLineNumber:d,endColumn:u,relatedInformation:h,tags:f}}changeAll(e,t){const i=[],s=this._data.values(e);if(s)for(const r of s){const o=qt.first(r);o&&(i.push(o.resource),this._data.delete(o.resource,e))}if(ao(t)){const r=new $s;for(const{resource:o,marker:a}of t){const l=jp._toMarker(e,o,a);if(!l)continue;const c=r.get(o);c?c.push(l):(r.set(o,[l]),i.push(o))}for(const[o,a]of r)this._data.set(o,e,a)}i.length>0&&this._onMarkerChanged.fire(i)}read(e=Object.create(null)){let{owner:t,resource:i,severities:s,take:r}=e;if((!r||r<0)&&(r=-1),t&&i){const o=this._data.get(i,t);if(o){const a=[];for(const l of o)if(jp._accept(l,s)){const c=a.push(l);if(r>0&&c===r)break}return a}else return[]}else if(!t&&!i){const o=[];for(const a of this._data.values())for(const l of a)if(jp._accept(l,s)){const c=o.push(l);if(r>0&&c===r)return o}return o}else{const o=this._data.values(i??t),a=[];for(const l of o)for(const c of l)if(jp._accept(c,s)){const d=a.push(c);if(r>0&&d===r)return a}return a}}static _accept(e,t){return t===void 0||(t&e.severity)===e.severity}static _merge(e){const t=new $s;for(const i of e)for(const s of i)t.set(s,!0);return Array.from(t.keys())}}class yat extends ee{get configurationModel(){return this._configurationModel}constructor(e){super(),this.logService=e,this._configurationModel=tr.createEmptyModel(this.logService)}reload(){return this.resetConfigurationModel(),this.configurationModel}getConfigurationDefaultOverrides(){return{}}resetConfigurationModel(){this._configurationModel=tr.createEmptyModel(this.logService);const e=_n.as(Bd.Configuration).getConfigurationProperties();this.updateConfigurationModel(Object.keys(e),e)}updateConfigurationModel(e,t){const i=this.getConfigurationDefaultOverrides();for(const s of e){const r=i[s],o=t[s];r!==void 0?this._configurationModel.setValue(s,r):o?this._configurationModel.setValue(s,o.default):this._configurationModel.removeValue(s)}}}const ov=Wt("accessibilitySignalService"),oi=class oi{static register(e){return new oi(e.fileName)}constructor(e){this.fileName=e}};oi.error=oi.register({fileName:"error.mp3"}),oi.warning=oi.register({fileName:"warning.mp3"}),oi.success=oi.register({fileName:"success.mp3"}),oi.foldedArea=oi.register({fileName:"foldedAreas.mp3"}),oi.break=oi.register({fileName:"break.mp3"}),oi.quickFixes=oi.register({fileName:"quickFixes.mp3"}),oi.taskCompleted=oi.register({fileName:"taskCompleted.mp3"}),oi.taskFailed=oi.register({fileName:"taskFailed.mp3"}),oi.terminalBell=oi.register({fileName:"terminalBell.mp3"}),oi.diffLineInserted=oi.register({fileName:"diffLineInserted.mp3"}),oi.diffLineDeleted=oi.register({fileName:"diffLineDeleted.mp3"}),oi.diffLineModified=oi.register({fileName:"diffLineModified.mp3"}),oi.chatRequestSent=oi.register({fileName:"chatRequestSent.mp3"}),oi.chatResponseReceived1=oi.register({fileName:"chatResponseReceived1.mp3"}),oi.chatResponseReceived2=oi.register({fileName:"chatResponseReceived2.mp3"}),oi.chatResponseReceived3=oi.register({fileName:"chatResponseReceived3.mp3"}),oi.chatResponseReceived4=oi.register({fileName:"chatResponseReceived4.mp3"}),oi.clear=oi.register({fileName:"clear.mp3"}),oi.save=oi.register({fileName:"save.mp3"}),oi.format=oi.register({fileName:"format.mp3"}),oi.voiceRecordingStarted=oi.register({fileName:"voiceRecordingStarted.mp3"}),oi.voiceRecordingStopped=oi.register({fileName:"voiceRecordingStopped.mp3"}),oi.progress=oi.register({fileName:"progress.mp3"});let an=oi;class Sat{constructor(e){this.randomOneOf=e}}const It=class It{constructor(e,t,i,s,r,o){this.sound=e,this.name=t,this.legacySoundSettingsKey=i,this.settingsKey=s,this.legacyAnnouncementSettingsKey=r,this.announcementMessage=o}static register(e){const t=new Sat("randomOneOf"in e.sound?e.sound.randomOneOf:[e.sound]),i=new It(t,e.name,e.legacySoundSettingsKey,e.settingsKey,e.legacyAnnouncementSettingsKey,e.announcementMessage);return It._signals.add(i),i}};It._signals=new Set,It.errorAtPosition=It.register({name:v("accessibilitySignals.positionHasError.name","Error at Position"),sound:an.error,announcementMessage:v("accessibility.signals.positionHasError","Error"),settingsKey:"accessibility.signals.positionHasError",delaySettingsKey:"accessibility.signalOptions.delays.errorAtPosition"}),It.warningAtPosition=It.register({name:v("accessibilitySignals.positionHasWarning.name","Warning at Position"),sound:an.warning,announcementMessage:v("accessibility.signals.positionHasWarning","Warning"),settingsKey:"accessibility.signals.positionHasWarning",delaySettingsKey:"accessibility.signalOptions.delays.warningAtPosition"}),It.errorOnLine=It.register({name:v("accessibilitySignals.lineHasError.name","Error on Line"),sound:an.error,legacySoundSettingsKey:"audioCues.lineHasError",legacyAnnouncementSettingsKey:"accessibility.alert.error",announcementMessage:v("accessibility.signals.lineHasError","Error on Line"),settingsKey:"accessibility.signals.lineHasError"}),It.warningOnLine=It.register({name:v("accessibilitySignals.lineHasWarning.name","Warning on Line"),sound:an.warning,legacySoundSettingsKey:"audioCues.lineHasWarning",legacyAnnouncementSettingsKey:"accessibility.alert.warning",announcementMessage:v("accessibility.signals.lineHasWarning","Warning on Line"),settingsKey:"accessibility.signals.lineHasWarning"}),It.foldedArea=It.register({name:v("accessibilitySignals.lineHasFoldedArea.name","Folded Area on Line"),sound:an.foldedArea,legacySoundSettingsKey:"audioCues.lineHasFoldedArea",legacyAnnouncementSettingsKey:"accessibility.alert.foldedArea",announcementMessage:v("accessibility.signals.lineHasFoldedArea","Folded"),settingsKey:"accessibility.signals.lineHasFoldedArea"}),It.break=It.register({name:v("accessibilitySignals.lineHasBreakpoint.name","Breakpoint on Line"),sound:an.break,legacySoundSettingsKey:"audioCues.lineHasBreakpoint",legacyAnnouncementSettingsKey:"accessibility.alert.breakpoint",announcementMessage:v("accessibility.signals.lineHasBreakpoint","Breakpoint"),settingsKey:"accessibility.signals.lineHasBreakpoint"}),It.inlineSuggestion=It.register({name:v("accessibilitySignals.lineHasInlineSuggestion.name","Inline Suggestion on Line"),sound:an.quickFixes,legacySoundSettingsKey:"audioCues.lineHasInlineSuggestion",settingsKey:"accessibility.signals.lineHasInlineSuggestion"}),It.terminalQuickFix=It.register({name:v("accessibilitySignals.terminalQuickFix.name","Terminal Quick Fix"),sound:an.quickFixes,legacySoundSettingsKey:"audioCues.terminalQuickFix",legacyAnnouncementSettingsKey:"accessibility.alert.terminalQuickFix",announcementMessage:v("accessibility.signals.terminalQuickFix","Quick Fix"),settingsKey:"accessibility.signals.terminalQuickFix"}),It.onDebugBreak=It.register({name:v("accessibilitySignals.onDebugBreak.name","Debugger Stopped on Breakpoint"),sound:an.break,legacySoundSettingsKey:"audioCues.onDebugBreak",legacyAnnouncementSettingsKey:"accessibility.alert.onDebugBreak",announcementMessage:v("accessibility.signals.onDebugBreak","Breakpoint"),settingsKey:"accessibility.signals.onDebugBreak"}),It.noInlayHints=It.register({name:v("accessibilitySignals.noInlayHints","No Inlay Hints on Line"),sound:an.error,legacySoundSettingsKey:"audioCues.noInlayHints",legacyAnnouncementSettingsKey:"accessibility.alert.noInlayHints",announcementMessage:v("accessibility.signals.noInlayHints","No Inlay Hints"),settingsKey:"accessibility.signals.noInlayHints"}),It.taskCompleted=It.register({name:v("accessibilitySignals.taskCompleted","Task Completed"),sound:an.taskCompleted,legacySoundSettingsKey:"audioCues.taskCompleted",legacyAnnouncementSettingsKey:"accessibility.alert.taskCompleted",announcementMessage:v("accessibility.signals.taskCompleted","Task Completed"),settingsKey:"accessibility.signals.taskCompleted"}),It.taskFailed=It.register({name:v("accessibilitySignals.taskFailed","Task Failed"),sound:an.taskFailed,legacySoundSettingsKey:"audioCues.taskFailed",legacyAnnouncementSettingsKey:"accessibility.alert.taskFailed",announcementMessage:v("accessibility.signals.taskFailed","Task Failed"),settingsKey:"accessibility.signals.taskFailed"}),It.terminalCommandFailed=It.register({name:v("accessibilitySignals.terminalCommandFailed","Terminal Command Failed"),sound:an.error,legacySoundSettingsKey:"audioCues.terminalCommandFailed",legacyAnnouncementSettingsKey:"accessibility.alert.terminalCommandFailed",announcementMessage:v("accessibility.signals.terminalCommandFailed","Command Failed"),settingsKey:"accessibility.signals.terminalCommandFailed"}),It.terminalCommandSucceeded=It.register({name:v("accessibilitySignals.terminalCommandSucceeded","Terminal Command Succeeded"),sound:an.success,announcementMessage:v("accessibility.signals.terminalCommandSucceeded","Command Succeeded"),settingsKey:"accessibility.signals.terminalCommandSucceeded"}),It.terminalBell=It.register({name:v("accessibilitySignals.terminalBell","Terminal Bell"),sound:an.terminalBell,legacySoundSettingsKey:"audioCues.terminalBell",legacyAnnouncementSettingsKey:"accessibility.alert.terminalBell",announcementMessage:v("accessibility.signals.terminalBell","Terminal Bell"),settingsKey:"accessibility.signals.terminalBell"}),It.notebookCellCompleted=It.register({name:v("accessibilitySignals.notebookCellCompleted","Notebook Cell Completed"),sound:an.taskCompleted,legacySoundSettingsKey:"audioCues.notebookCellCompleted",legacyAnnouncementSettingsKey:"accessibility.alert.notebookCellCompleted",announcementMessage:v("accessibility.signals.notebookCellCompleted","Notebook Cell Completed"),settingsKey:"accessibility.signals.notebookCellCompleted"}),It.notebookCellFailed=It.register({name:v("accessibilitySignals.notebookCellFailed","Notebook Cell Failed"),sound:an.taskFailed,legacySoundSettingsKey:"audioCues.notebookCellFailed",legacyAnnouncementSettingsKey:"accessibility.alert.notebookCellFailed",announcementMessage:v("accessibility.signals.notebookCellFailed","Notebook Cell Failed"),settingsKey:"accessibility.signals.notebookCellFailed"}),It.diffLineInserted=It.register({name:v("accessibilitySignals.diffLineInserted","Diff Line Inserted"),sound:an.diffLineInserted,legacySoundSettingsKey:"audioCues.diffLineInserted",settingsKey:"accessibility.signals.diffLineInserted"}),It.diffLineDeleted=It.register({name:v("accessibilitySignals.diffLineDeleted","Diff Line Deleted"),sound:an.diffLineDeleted,legacySoundSettingsKey:"audioCues.diffLineDeleted",settingsKey:"accessibility.signals.diffLineDeleted"}),It.diffLineModified=It.register({name:v("accessibilitySignals.diffLineModified","Diff Line Modified"),sound:an.diffLineModified,legacySoundSettingsKey:"audioCues.diffLineModified",settingsKey:"accessibility.signals.diffLineModified"}),It.chatRequestSent=It.register({name:v("accessibilitySignals.chatRequestSent","Chat Request Sent"),sound:an.chatRequestSent,legacySoundSettingsKey:"audioCues.chatRequestSent",legacyAnnouncementSettingsKey:"accessibility.alert.chatRequestSent",announcementMessage:v("accessibility.signals.chatRequestSent","Chat Request Sent"),settingsKey:"accessibility.signals.chatRequestSent"}),It.chatResponseReceived=It.register({name:v("accessibilitySignals.chatResponseReceived","Chat Response Received"),legacySoundSettingsKey:"audioCues.chatResponseReceived",sound:{randomOneOf:[an.chatResponseReceived1,an.chatResponseReceived2,an.chatResponseReceived3,an.chatResponseReceived4]},settingsKey:"accessibility.signals.chatResponseReceived"}),It.progress=It.register({name:v("accessibilitySignals.progress","Progress"),sound:an.progress,legacySoundSettingsKey:"audioCues.chatResponsePending",legacyAnnouncementSettingsKey:"accessibility.alert.progress",announcementMessage:v("accessibility.signals.progress","Progress"),settingsKey:"accessibility.signals.progress"}),It.clear=It.register({name:v("accessibilitySignals.clear","Clear"),sound:an.clear,legacySoundSettingsKey:"audioCues.clear",legacyAnnouncementSettingsKey:"accessibility.alert.clear",announcementMessage:v("accessibility.signals.clear","Clear"),settingsKey:"accessibility.signals.clear"}),It.save=It.register({name:v("accessibilitySignals.save","Save"),sound:an.save,legacySoundSettingsKey:"audioCues.save",legacyAnnouncementSettingsKey:"accessibility.alert.save",announcementMessage:v("accessibility.signals.save","Save"),settingsKey:"accessibility.signals.save"}),It.format=It.register({name:v("accessibilitySignals.format","Format"),sound:an.format,legacySoundSettingsKey:"audioCues.format",legacyAnnouncementSettingsKey:"accessibility.alert.format",announcementMessage:v("accessibility.signals.format","Format"),settingsKey:"accessibility.signals.format"}),It.voiceRecordingStarted=It.register({name:v("accessibilitySignals.voiceRecordingStarted","Voice Recording Started"),sound:an.voiceRecordingStarted,legacySoundSettingsKey:"audioCues.voiceRecordingStarted",settingsKey:"accessibility.signals.voiceRecordingStarted"}),It.voiceRecordingStopped=It.register({name:v("accessibilitySignals.voiceRecordingStopped","Voice Recording Stopped"),sound:an.voiceRecordingStopped,legacySoundSettingsKey:"audioCues.voiceRecordingStopped",settingsKey:"accessibility.signals.voiceRecordingStopped"});let Ll=It;class xat extends ee{constructor(e,t=[]){super(),this.logger=new dGe([e,...t]),this._register(e.onDidChangeLogLevel(i=>this.setLevel(i)))}get onDidChangeLogLevel(){return this.logger.onDidChangeLogLevel}setLevel(e){this.logger.setLevel(e)}getLevel(){return this.logger.getLevel()}trace(e,...t){this.logger.trace(e,...t)}debug(e,...t){this.logger.debug(e,...t)}info(e,...t){this.logger.info(e,...t)}warn(e,...t){this.logger.warn(e,...t)}error(e,...t){this.logger.error(e,...t)}}const wSe=[];function $x(n){wSe.push(n)}function Lat(){return wSe.slice(0)}class kat{getParseResult(e){}}var yf=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Jn=function(n,e){return function(t,i){e(t,i,n)}};class Eat{constructor(e){this.disposed=!1,this.model=e,this._onWillDispose=new X}get textEditorModel(){return this.model}dispose(){this.disposed=!0,this._onWillDispose.fire()}}let ej=class{constructor(e){this.modelService=e}createModelReference(e){const t=this.modelService.getModel(e);return t?Promise.resolve(new mje(new Eat(t))):Promise.reject(new Error("Model not found"))}};ej=yf([Jn(0,Zi)],ej);const A4=class A4{show(){return A4.NULL_PROGRESS_RUNNER}async showWhile(e,t){await e}};A4.NULL_PROGRESS_RUNNER={done:()=>{},total:()=>{},worked:()=>{}};let tj=A4;class Iat{withProgress(e,t,i){return t({report:()=>{}})}}class Dat{constructor(){this.isExtensionDevelopment=!1,this.isBuilt=!1}}class Nat{async confirm(e){return{confirmed:this.doConfirm(e.message,e.detail),checkboxChecked:!1}}doConfirm(e,t){let i=e;return t&&(i=i+`

`+t),Ei.confirm(i)}async prompt(e){var s;let t;if(this.doConfirm(e.message,e.detail)){const r=[...e.buttons??[]];e.cancelButton&&typeof e.cancelButton!="string"&&typeof e.cancelButton!="boolean"&&r.push(e.cancelButton),t=await((s=r[0])==null?void 0:s.run({checkboxChecked:!1}))}return{result:t}}async error(e,t){await this.prompt({type:Un.Error,message:e,detail:t})}}const VE=class VE{info(e){return this.notify({severity:Un.Info,message:e})}warn(e){return this.notify({severity:Un.Warning,message:e})}error(e){return this.notify({severity:Un.Error,message:e})}notify(e){switch(e.severity){case Un.Error:console.error(e.message);break;case Un.Warning:console.warn(e.message);break;default:console.log(e.message);break}return VE.NO_OP}prompt(e,t,i,s){return VE.NO_OP}status(e,t){return ee.None}};VE.NO_OP=new RZe;let ij=VE,nj=class{constructor(e){this._onWillExecuteCommand=new X,this._onDidExecuteCommand=new X,this.onDidExecuteCommand=this._onDidExecuteCommand.event,this._instantiationService=e}executeCommand(e,...t){const i=Gt.getCommand(e);if(!i)return Promise.reject(new Error(`command '${e}' not found`));try{this._onWillExecuteCommand.fire({commandId:e,args:t});const s=this._instantiationService.invokeFunction.apply(this._instantiationService,[i.handler,...t]);return this._onDidExecuteCommand.fire({commandId:e,args:t}),Promise.resolve(s)}catch(s){return Promise.reject(s)}}};nj=yf([Jn(0,Ze)],nj);let GS=class extends Xet{constructor(e,t,i,s,r,o){super(e,t,i,s,r),this._cachedResolver=null,this._dynamicKeybindings=[],this._domNodeListeners=[];const a=f=>{const g=new ue;g.add(re(f,Se.KEY_DOWN,p=>{const _=new Oi(p);this._dispatch(_,_.target)&&(_.preventDefault(),_.stopPropagation())})),g.add(re(f,Se.KEY_UP,p=>{const _=new Oi(p);this._singleModifierDispatch(_,_.target)&&_.preventDefault()})),this._domNodeListeners.push(new Tat(f,g))},l=f=>{for(let g=0;g<this._domNodeListeners.length;g++){const p=this._domNodeListeners[g];p.domNode===f&&(this._domNodeListeners.splice(g,1),p.dispose())}},c=f=>{f.getOption(61)||a(f.getContainerDomNode())},d=f=>{f.getOption(61)||l(f.getContainerDomNode())};this._register(o.onCodeEditorAdd(c)),this._register(o.onCodeEditorRemove(d)),o.listCodeEditors().forEach(c);const u=f=>{a(f.getContainerDomNode())},h=f=>{l(f.getContainerDomNode())};this._register(o.onDiffEditorAdd(u)),this._register(o.onDiffEditorRemove(h)),o.listDiffEditors().forEach(u)}addDynamicKeybinding(e,t,i,s){return Ld(Gt.registerCommand(e,i),this.addDynamicKeybindings([{keybinding:t,command:e,when:s}]))}addDynamicKeybindings(e){const t=e.map(i=>({keybinding:Nz(i.keybinding,Ka),command:i.command??null,commandArgs:i.commandArgs,when:i.when,weight1:1e3,weight2:0,extensionId:null,isBuiltinExtension:!1}));return this._dynamicKeybindings=this._dynamicKeybindings.concat(t),this.updateResolver(),Ye(()=>{for(let i=0;i<this._dynamicKeybindings.length;i++)if(this._dynamicKeybindings[i]===t[0]){this._dynamicKeybindings.splice(i,t.length),this.updateResolver();return}})}updateResolver(){this._cachedResolver=null,this._onDidUpdateKeybindings.fire()}_getResolver(){if(!this._cachedResolver){const e=this._toNormalizedKeybindingItems(Fo.getDefaultKeybindings(),!0),t=this._toNormalizedKeybindingItems(this._dynamicKeybindings,!1);this._cachedResolver=new Jk(e,t,i=>this._log(i))}return this._cachedResolver}_documentHasFocus(){return Ei.document.hasFocus()}_toNormalizedKeybindingItems(e,t){const i=[];let s=0;for(const r of e){const o=r.when||void 0,a=r.keybinding;if(!a)i[s++]=new Ile(void 0,r.command,r.commandArgs,o,t,null,!1);else{const l=iD.resolveKeybinding(a,Ka);for(const c of l)i[s++]=new Ile(c,r.command,r.commandArgs,o,t,null,!1)}}return i}resolveKeyboardEvent(e){const t=new Zg(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,e.keyCode);return new iD([t],Ka)}};GS=yf([Jn(0,at),Jn(1,Vi),Jn(2,Hr),Jn(3,jn),Jn(4,Cr),Jn(5,ri)],GS);class Tat extends ee{constructor(e,t){super(),this.domNode=e,this._register(t)}}function Vce(n){return n&&typeof n=="object"&&(!n.overrideIdentifier||typeof n.overrideIdentifier=="string")&&(!n.resource||n.resource instanceof Xe)}let SO=class{constructor(e){this.logService=e,this._onDidChangeConfiguration=new X,this.onDidChangeConfiguration=this._onDidChangeConfiguration.event;const t=new yat(e);this._configuration=new bB(t.reload(),tr.createEmptyModel(e),tr.createEmptyModel(e),tr.createEmptyModel(e),tr.createEmptyModel(e),tr.createEmptyModel(e),new $s,tr.createEmptyModel(e),new $s,e),t.dispose()}getValue(e,t){const i=typeof e=="string"?e:void 0,s=Vce(e)?e:Vce(t)?t:{};return this._configuration.getValue(i,s,void 0)}updateValues(e){const t={data:this._configuration.toData()},i=[];for(const s of e){const[r,o]=s;this.getValue(r)!==o&&(this._configuration.updateValue(r,o),i.push(r))}if(i.length>0){const s=new Ket({keys:i,overrides:[]},t,this._configuration,void 0,this.logService);s.source=8,this._onDidChangeConfiguration.fire(s)}return Promise.resolve()}updateValue(e,t,i,s){return this.updateValues([[e,t]])}inspect(e,t={}){return this._configuration.inspect(e,t,void 0)}};SO=yf([Jn(0,Cr)],SO);let sj=class{constructor(e,t,i){this.configurationService=e,this.modelService=t,this.languageService=i,this._onDidChangeConfiguration=new X,this.configurationService.onDidChangeConfiguration(s=>{this._onDidChangeConfiguration.fire({affectedKeys:s.affectedKeys,affectsConfiguration:(r,o)=>s.affectsConfiguration(o)})})}getValue(e,t,i){const s=Y.isIPosition(t)?t:null,r=s?typeof i=="string"?i:void 0:typeof t=="string"?t:void 0,o=e?this.getLanguage(e,s):void 0;return typeof r>"u"?this.configurationService.getValue({resource:e,overrideIdentifier:o}):this.configurationService.getValue(r,{resource:e,overrideIdentifier:o})}getLanguage(e,t){const i=this.modelService.getModel(e);return i?t?i.getLanguageIdAtPosition(t.lineNumber,t.column):i.getLanguageId():this.languageService.guessLanguageIdByFilepathOrFirstLine(e)}};sj=yf([Jn(0,Tt),Jn(1,Zi),Jn(2,un)],sj);let rj=class{constructor(e){this.configurationService=e}getEOL(e,t){const i=this.configurationService.getValue("files.eol",{overrideIdentifier:t,resource:e});return i&&typeof i=="string"&&i!=="auto"?i:Po||Bt?`
`:`\r
`}};rj=yf([Jn(0,Tt)],rj);class Rat{publicLog2(){}}const zE=class zE{constructor(){const e=Xe.from({scheme:zE.SCHEME,authority:"model",path:"/"});this.workspace={id:D1e,folders:[new utt({uri:e,name:"",index:0})]}}getWorkspace(){return this.workspace}getWorkspaceFolder(e){return e&&e.scheme===zE.SCHEME?this.workspace.folders[0]:null}};zE.SCHEME="inmemory";let oj=zE;function xO(n,e,t){if(!e||!(n instanceof SO))return;const i=[];Object.keys(e).forEach(s=>{Vet(s)&&i.push([`editor.${s}`,e[s]]),t&&zet(s)&&i.push([`diffEditor.${s}`,e[s]])}),i.length>0&&n.updateValues(i)}let aj=class{constructor(e){this._modelService=e}hasPreviewHandler(){return!1}async apply(e,t){const i=Array.isArray(e)?e:nQ.convert(e),s=new Map;for(const a of i){if(!(a instanceof Zm))throw new Error("bad edit - only text edits are supported");const l=this._modelService.getModel(a.resource);if(!l)throw new Error("bad edit - model not found");if(typeof a.versionId=="number"&&l.getVersionId()!==a.versionId)throw new Error("bad state - model changed in the meantime");let c=s.get(l);c||(c=[],s.set(l,c)),c.push(gn.replaceMove(M.lift(a.textEdit.range),a.textEdit.text))}let r=0,o=0;for(const[a,l]of s)a.pushStackElement(),a.pushEditOperations([],l,()=>[]),a.pushStackElement(),o+=1,r+=l.length;return{ariaSummary:a0(KU.bulkEditServiceSummary,r,o),isApplied:r>0}}};aj=yf([Jn(0,Zi)],aj);class Aat{getUriLabel(e,t){return e.scheme==="file"?e.fsPath:e.path}getUriBasenameLabel(e){return Pc(e)}}let lj=class extends Oet{constructor(e,t){super(e),this._codeEditorService=t}showContextView(e,t,i){if(!t){const s=this._codeEditorService.getFocusedCodeEditor()||this._codeEditorService.getActiveCodeEditor();s&&(t=s.getContainerDomNode())}return super.showContextView(e,t,i)}};lj=yf([Jn(0,tv),Jn(1,ri)],lj);class Mat{constructor(){this._neverEmitter=new X,this.onDidChangeTrust=this._neverEmitter.event}isWorkspaceTrusted(){return!0}}class Pat extends QU{constructor(){super()}}class Oat extends xat{constructor(){super(new cGe)}}let cj=class extends l${constructor(e,t,i,s,r,o){super(e,t,i,s,r,o),this.configure({blockMouse:!1})}};cj=yf([Jn(0,Hr),Jn(1,jn),Jn(2,hp),Jn(3,hi),Jn(4,Yl),Jn(5,at)],cj);const dj={amdModuleId:"vs/editor/common/services/editorSimpleWorker",esmModuleLocation:void 0,label:"editorWorkerService"};let uj=class extends sU{constructor(e,t,i,s,r){super(dj,e,t,i,s,r)}};uj=yf([Jn(0,Zi),Jn(1,iB),Jn(2,Cr),Jn(3,vn),Jn(4,Be)],uj);class Fat{async playSignal(e,t){}}jt(Cr,Oat,0);jt(Tt,SO,0);jt(iB,sj,0);jt(LCe,rj,0);jt(m0,oj,0);jt(VS,Aat,0);jt(Hr,Rat,0);jt(WN,Nat,0);jt(NX,Dat,0);jt(jn,ij,0);jt(Cf,jp,0);jt(un,Pat,0);jt(Jl,sat,0);jt(Zi,y$,0);jt(hQ,f$,0);jt(at,J$,0);jt(I1e,Iat,0);jt(nv,tj,0);jt(Wd,xit,0);jt(wa,uj,0);jt($N,aj,0);jt(N1e,Mat,0);jt(_a,ej,0);jt(al,K$,0);jt($c,_ot,0);jt(Vi,nj,0);jt(hi,GS,0);jt(Uc,U$,0);jt(hp,lj,0);jt(ba,h$,0);jt(pp,X$,0);jt(ol,cj,0);jt(Yl,q$,0);jt(ov,Fat,0);jt(Eye,kat,0);var ct;(function(n){const e=new Ux;for(const[l,c]of eae())e.set(l,c);const t=new yO(e,!0);e.set(Ze,t);function i(l){s||o({});const c=e.get(l);if(!c)throw new Error("Missing service "+l);return c instanceof Dh?t.invokeFunction(d=>d.get(l)):c}n.get=i;let s=!1;const r=new X;function o(l){if(s)return t;s=!0;for(const[d,u]of eae())e.get(d)||e.set(d,u);for(const d in l)if(l.hasOwnProperty(d)){const u=Wt(d);e.get(u)instanceof Dh&&e.set(u,l[d])}const c=Lat();for(const d of c)try{t.createInstance(d)}catch(u){pt(u)}return r.fire(),t}n.initialize=o;function a(l){if(s)return l();const c=new ue,d=c.add(r.event(()=>{d.dispose(),c.add(l())}));return c}n.withServices=a})(ct||(ct={}));function Bat(n,e){return new Wat(n,e)}class Wat extends EP{constructor(e,t){const i={amdModuleId:dj.amdModuleId,esmModuleLocation:dj.esmModuleLocation,label:t.label};super(i,t.keepIdleModels||!1,e),this._foreignModuleId=t.moduleId,this._foreignModuleCreateData=t.createData||null,this._foreignModuleHost=t.host||null,this._foreignProxy=null}fhr(e,t){if(!this._foreignModuleHost||typeof this._foreignModuleHost[e]!="function")return Promise.reject(new Error("Missing method "+e+" or missing main thread foreign host."));try{return Promise.resolve(this._foreignModuleHost[e].apply(this._foreignModuleHost,t))}catch(i){return Promise.reject(i)}}_getForeignProxy(){return this._foreignProxy||(this._foreignProxy=this._getProxy().then(e=>{const t=this._foreignModuleHost?yV(this._foreignModuleHost):[];return e.$loadForeignModule(this._foreignModuleId,this._foreignModuleCreateData,t).then(i=>{this._foreignModuleCreateData=null;const s=(a,l)=>e.$fmr(a,l),r=(a,l)=>function(){const c=Array.prototype.slice.call(arguments,0);return l(a,c)},o={};for(const a of i)o[a]=r(a,s);return o})})),this._foreignProxy}getProxy(){return this._getForeignProxy()}withSyncedResources(e){return this.workerWithSyncedResources(e).then(t=>this.getProxy())}}const tT={ICodeEditor:"vs.editor.ICodeEditor",IDiffEditor:"vs.editor.IDiffEditor"};class ko{constructor(e,t,i,s){this.startColumn=e,this.endColumn=t,this.className=i,this.type=s,this._lineDecorationBrand=void 0}static _equals(e,t){return e.startColumn===t.startColumn&&e.endColumn===t.endColumn&&e.className===t.className&&e.type===t.type}static equalsArr(e,t){const i=e.length,s=t.length;if(i!==s)return!1;for(let r=0;r<i;r++)if(!ko._equals(e[r],t[r]))return!1;return!0}static extractWrapped(e,t,i){if(e.length===0)return e;const s=t+1,r=i+1,o=i-t,a=[];let l=0;for(const c of e)c.endColumn<=s||c.startColumn>=r||(a[l++]=new ko(Math.max(1,c.startColumn-s+1),Math.min(o+1,c.endColumn-s+1),c.className,c.type));return a}static filter(e,t,i,s){if(e.length===0)return[];const r=[];let o=0;for(let a=0,l=e.length;a<l;a++){const c=e[a],d=c.range;if(d.endLineNumber<t||d.startLineNumber>t||d.isEmpty()&&(c.type===0||c.type===3))continue;const u=d.startLineNumber===t?d.startColumn:i,h=d.endLineNumber===t?d.endColumn:s;r[o++]=new ko(u,h,c.inlineClassName,c.type)}return r}static _typeCompare(e,t){const i=[2,0,1,3];return i[e]-i[t]}static compare(e,t){if(e.startColumn!==t.startColumn)return e.startColumn-t.startColumn;if(e.endColumn!==t.endColumn)return e.endColumn-t.endColumn;const i=ko._typeCompare(e.type,t.type);return i!==0?i:e.className!==t.className?e.className<t.className?-1:1:0}}class zce{constructor(e,t,i,s){this.startOffset=e,this.endOffset=t,this.className=i,this.metadata=s}}class LO{constructor(){this.stopOffsets=[],this.classNames=[],this.metadata=[],this.count=0}static _metadata(e){let t=0;for(let i=0,s=e.length;i<s;i++)t|=e[i];return t}consumeLowerThan(e,t,i){for(;this.count>0&&this.stopOffsets[0]<e;){let s=0;for(;s+1<this.count&&this.stopOffsets[s]===this.stopOffsets[s+1];)s++;i.push(new zce(t,this.stopOffsets[s],this.classNames.join(" "),LO._metadata(this.metadata))),t=this.stopOffsets[s]+1,this.stopOffsets.splice(0,s+1),this.classNames.splice(0,s+1),this.metadata.splice(0,s+1),this.count-=s+1}return this.count>0&&t<e&&(i.push(new zce(t,e-1,this.classNames.join(" "),LO._metadata(this.metadata))),t=e),t}insert(e,t,i){if(this.count===0||this.stopOffsets[this.count-1]<=e)this.stopOffsets.push(e),this.classNames.push(t),this.metadata.push(i);else for(let s=0;s<this.count;s++)if(this.stopOffsets[s]>=e){this.stopOffsets.splice(s,0,e),this.classNames.splice(s,0,t),this.metadata.splice(s,0,i);break}this.count++}}class Hat{static normalize(e,t){if(t.length===0)return[];const i=[],s=new LO;let r=0;for(let o=0,a=t.length;o<a;o++){const l=t[o];let c=l.startColumn,d=l.endColumn;const u=l.className,h=l.type===1?2:l.type===2?4:0;if(c>1){const p=e.charCodeAt(c-2);ks(p)&&c--}if(d>1){const p=e.charCodeAt(d-2);ks(p)&&d--}const f=c-1,g=d-2;r=s.consumeLowerThan(f,r,i),s.count===0&&(r=f),s.insert(g,u,h)}return s.consumeLowerThan(1073741824,r,i),i}}class Vs{constructor(e,t,i,s){this.endIndex=e,this.type=t,this.metadata=i,this.containsRTL=s,this._linePartBrand=void 0}isWhitespace(){return!!(this.metadata&1)}isPseudoAfter(){return!!(this.metadata&4)}}class CSe{constructor(e,t){this.startOffset=e,this.endOffset=t}equals(e){return this.startOffset===e.startOffset&&this.endOffset===e.endOffset}}class av{constructor(e,t,i,s,r,o,a,l,c,d,u,h,f,g,p,_,w,b,y){this.useMonospaceOptimizations=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=i,this.continuesWithWrappedLine=s,this.isBasicASCII=r,this.containsRTL=o,this.fauxIndentLength=a,this.lineTokens=l,this.lineDecorations=c.sort(ko.compare),this.tabSize=d,this.startVisibleColumn=u,this.spaceWidth=h,this.stopRenderingLineAfter=p,this.renderWhitespace=_==="all"?4:_==="boundary"?1:_==="selection"?2:_==="trailing"?3:0,this.renderControlCharacters=w,this.fontLigatures=b,this.selectionsOnLine=y&&y.sort((E,D)=>E.startOffset<D.startOffset?-1:1);const S=Math.abs(g-h),x=Math.abs(f-h);S<x?(this.renderSpaceWidth=g,this.renderSpaceCharCode=11825):(this.renderSpaceWidth=f,this.renderSpaceCharCode=183)}sameSelection(e){if(this.selectionsOnLine===null)return e===null;if(e===null||e.length!==this.selectionsOnLine.length)return!1;for(let t=0;t<this.selectionsOnLine.length;t++)if(!this.selectionsOnLine[t].equals(e[t]))return!1;return!0}equals(e){return this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineContent===e.lineContent&&this.continuesWithWrappedLine===e.continuesWithWrappedLine&&this.isBasicASCII===e.isBasicASCII&&this.containsRTL===e.containsRTL&&this.fauxIndentLength===e.fauxIndentLength&&this.tabSize===e.tabSize&&this.startVisibleColumn===e.startVisibleColumn&&this.spaceWidth===e.spaceWidth&&this.renderSpaceWidth===e.renderSpaceWidth&&this.renderSpaceCharCode===e.renderSpaceCharCode&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.fontLigatures===e.fontLigatures&&ko.equalsArr(this.lineDecorations,e.lineDecorations)&&this.lineTokens.equals(e.lineTokens)&&this.sameSelection(e.selectionsOnLine)}}class ySe{constructor(e,t){this.partIndex=e,this.charIndex=t}}class Nh{static getPartIndex(e){return(e&4294901760)>>>16}static getCharIndex(e){return(e&65535)>>>0}constructor(e,t){this.length=e,this._data=new Uint32Array(this.length),this._horizontalOffset=new Uint32Array(this.length)}setColumnInfo(e,t,i,s){const r=(t<<16|i<<0)>>>0;this._data[e-1]=r,this._horizontalOffset[e-1]=s}getHorizontalOffset(e){return this._horizontalOffset.length===0?0:this._horizontalOffset[e-1]}charOffsetToPartData(e){return this.length===0?0:e<0?this._data[0]:e>=this.length?this._data[this.length-1]:this._data[e]}getDomPosition(e){const t=this.charOffsetToPartData(e-1),i=Nh.getPartIndex(t),s=Nh.getCharIndex(t);return new ySe(i,s)}getColumn(e,t){return this.partDataToCharOffset(e.partIndex,t,e.charIndex)+1}partDataToCharOffset(e,t,i){if(this.length===0)return 0;const s=(e<<16|i<<0)>>>0;let r=0,o=this.length-1;for(;r+1<o;){const p=r+o>>>1,_=this._data[p];if(_===s)return p;_>s?o=p:r=p}if(r===o)return r;const a=this._data[r],l=this._data[o];if(a===s)return r;if(l===s)return o;const c=Nh.getPartIndex(a),d=Nh.getCharIndex(a),u=Nh.getPartIndex(l);let h;c!==u?h=t:h=Nh.getCharIndex(l);const f=i-d,g=h-i;return f<=g?r:o}}class hj{constructor(e,t,i){this._renderLineOutputBrand=void 0,this.characterMapping=e,this.containsRTL=t,this.containsForeignElements=i}}function iT(n,e){if(n.lineContent.length===0){if(n.lineDecorations.length>0){e.appendString("<span>");let t=0,i=0,s=0;for(const o of n.lineDecorations)(o.type===1||o.type===2)&&(e.appendString('<span class="'),e.appendString(o.className),e.appendString('"></span>'),o.type===1&&(s|=1,t++),o.type===2&&(s|=2,i++));e.appendString("</span>");const r=new Nh(1,t+i);return r.setColumnInfo(1,t,0,0),new hj(r,!1,s)}return e.appendString("<span><span></span></span>"),new hj(new Nh(0,0),!1,0)}return Yat(Uat(n),e)}class Vat{constructor(e,t,i,s){this.characterMapping=e,this.html=t,this.containsRTL=i,this.containsForeignElements=s}}function OB(n){const e=new Tx(1e4),t=iT(n,e);return new Vat(t.characterMapping,e.build(),t.containsRTL,t.containsForeignElements)}class zat{constructor(e,t,i,s,r,o,a,l,c,d,u,h,f,g,p,_){this.fontIsMonospace=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=i,this.len=s,this.isOverflowing=r,this.overflowingCharCount=o,this.parts=a,this.containsForeignElements=l,this.fauxIndentLength=c,this.tabSize=d,this.startVisibleColumn=u,this.containsRTL=h,this.spaceWidth=f,this.renderSpaceCharCode=g,this.renderWhitespace=p,this.renderControlCharacters=_}}function Uat(n){const e=n.lineContent;let t,i,s;n.stopRenderingLineAfter!==-1&&n.stopRenderingLineAfter<e.length?(t=!0,i=e.length-n.stopRenderingLineAfter,s=n.stopRenderingLineAfter):(t=!1,i=0,s=e.length);let r=$at(e,n.containsRTL,n.lineTokens,n.fauxIndentLength,s);n.renderControlCharacters&&!n.isBasicASCII&&(r=Kat(e,r)),(n.renderWhitespace===4||n.renderWhitespace===1||n.renderWhitespace===2&&n.selectionsOnLine||n.renderWhitespace===3&&!n.continuesWithWrappedLine)&&(r=qat(n,e,s,r));let o=0;if(n.lineDecorations.length>0){for(let a=0,l=n.lineDecorations.length;a<l;a++){const c=n.lineDecorations[a];c.type===3||c.type===1?o|=1:c.type===2&&(o|=2)}r=Gat(e,s,r,n.lineDecorations)}return n.containsRTL||(r=jat(e,r,!n.isBasicASCII||n.fontLigatures)),new zat(n.useMonospaceOptimizations,n.canUseHalfwidthRightwardsArrow,e,s,t,i,r,o,n.fauxIndentLength,n.tabSize,n.startVisibleColumn,n.containsRTL,n.spaceWidth,n.renderSpaceCharCode,n.renderWhitespace,n.renderControlCharacters)}function $at(n,e,t,i,s){const r=[];let o=0;i>0&&(r[o++]=new Vs(i,"",0,!1));let a=i;for(let l=0,c=t.getCount();l<c;l++){const d=t.getEndOffset(l);if(d<=i)continue;const u=t.getClassName(l);if(d>=s){const f=e?DS(n.substring(a,s)):!1;r[o++]=new Vs(s,u,0,f);break}const h=e?DS(n.substring(a,d)):!1;r[o++]=new Vs(d,u,0,h),a=d}return r}function jat(n,e,t){let i=0;const s=[];let r=0;if(t)for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.endIndex;if(i+50<c){const d=l.type,u=l.metadata,h=l.containsRTL;let f=-1,g=i;for(let p=i;p<c;p++)n.charCodeAt(p)===32&&(f=p),f!==-1&&p-g>=50&&(s[r++]=new Vs(f+1,d,u,h),g=f+1,f=-1);g!==c&&(s[r++]=new Vs(c,d,u,h))}else s[r++]=l;i=c}else for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.endIndex,d=c-i;if(d>50){const u=l.type,h=l.metadata,f=l.containsRTL,g=Math.ceil(d/50);for(let p=1;p<g;p++){const _=i+p*50;s[r++]=new Vs(_,u,h,f)}s[r++]=new Vs(c,u,h,f)}else s[r++]=l;i=c}return s}function SSe(n){return n<32?n!==9:n===127||n>=8234&&n<=8238||n>=8294&&n<=8297||n>=8206&&n<=8207||n===1564}function Kat(n,e){const t=[];let i=new Vs(0,"",0,!1),s=0;for(const r of e){const o=r.endIndex;for(;s<o;s++){const a=n.charCodeAt(s);SSe(a)&&(s>i.endIndex&&(i=new Vs(s,r.type,r.metadata,r.containsRTL),t.push(i)),i=new Vs(s+1,"mtkcontrol",r.metadata,!1),t.push(i))}s>i.endIndex&&(i=new Vs(o,r.type,r.metadata,r.containsRTL),t.push(i))}return t}function qat(n,e,t,i){const s=n.continuesWithWrappedLine,r=n.fauxIndentLength,o=n.tabSize,a=n.startVisibleColumn,l=n.useMonospaceOptimizations,c=n.selectionsOnLine,d=n.renderWhitespace===1,u=n.renderWhitespace===3,h=n.renderSpaceWidth!==n.spaceWidth,f=[];let g=0,p=0,_=i[p].type,w=i[p].containsRTL,b=i[p].endIndex;const y=i.length;let S=!1,x=lo(e),E;x===-1?(S=!0,x=t,E=t):E=Nu(e);let D=!1,N=0,I=c&&c[N],H=a%o;for(let G=r;G<t;G++){const J=e.charCodeAt(G);I&&G>=I.endOffset&&(N++,I=c&&c[N]);let j;if(G<x||G>E)j=!0;else if(J===9)j=!0;else if(J===32)if(d)if(D)j=!0;else{const ne=G+1<t?e.charCodeAt(G+1):0;j=ne===32||ne===9}else j=!0;else j=!1;if(j&&c&&(j=!!I&&I.startOffset<=G&&I.endOffset>G),j&&u&&(j=S||G>E),j&&w&&G>=x&&G<=E&&(j=!1),D){if(!j||!l&&H>=o){if(h){const ne=g>0?f[g-1].endIndex:r;for(let oe=ne+1;oe<=G;oe++)f[g++]=new Vs(oe,"mtkw",1,!1)}else f[g++]=new Vs(G,"mtkw",1,!1);H=H%o}}else(G===b||j&&G>r)&&(f[g++]=new Vs(G,_,0,w),H=H%o);for(J===9?H=o:N_(J)?H+=2:H++,D=j;G===b&&(p++,p<y);)_=i[p].type,w=i[p].containsRTL,b=i[p].endIndex}let z=!1;if(D)if(s&&d){const G=t>0?e.charCodeAt(t-1):0,J=t>1?e.charCodeAt(t-2):0;G===32&&J!==32&&J!==9||(z=!0)}else z=!0;if(z)if(h){const G=g>0?f[g-1].endIndex:r;for(let J=G+1;J<=t;J++)f[g++]=new Vs(J,"mtkw",1,!1)}else f[g++]=new Vs(t,"mtkw",1,!1);else f[g++]=new Vs(t,_,0,w);return f}function Gat(n,e,t,i){i.sort(ko.compare);const s=Hat.normalize(n,i),r=s.length;let o=0;const a=[];let l=0,c=0;for(let u=0,h=t.length;u<h;u++){const f=t[u],g=f.endIndex,p=f.type,_=f.metadata,w=f.containsRTL;for(;o<r&&s[o].startOffset<g;){const b=s[o];if(b.startOffset>c&&(c=b.startOffset,a[l++]=new Vs(c,p,_,w)),b.endOffset+1<=g)c=b.endOffset+1,a[l++]=new Vs(c,p+" "+b.className,_|b.metadata,w),o++;else{c=g,a[l++]=new Vs(c,p+" "+b.className,_|b.metadata,w);break}}g>c&&(c=g,a[l++]=new Vs(c,p,_,w))}const d=t[t.length-1].endIndex;if(o<r&&s[o].startOffset===d)for(;o<r&&s[o].startOffset===d;){const u=s[o];a[l++]=new Vs(c,u.className,u.metadata,!1),o++}return a}function Yat(n,e){const t=n.fontIsMonospace,i=n.canUseHalfwidthRightwardsArrow,s=n.containsForeignElements,r=n.lineContent,o=n.len,a=n.isOverflowing,l=n.overflowingCharCount,c=n.parts,d=n.fauxIndentLength,u=n.tabSize,h=n.startVisibleColumn,f=n.containsRTL,g=n.spaceWidth,p=n.renderSpaceCharCode,_=n.renderWhitespace,w=n.renderControlCharacters,b=new Nh(o+1,c.length);let y=!1,S=0,x=h,E=0,D=0,N=0;f?e.appendString('<span dir="ltr">'):e.appendString("<span>");for(let I=0,H=c.length;I<H;I++){const z=c[I],G=z.endIndex,J=z.type,j=z.containsRTL,ne=_!==0&&z.isWhitespace(),oe=ne&&!t&&(J==="mtkw"||!s),ve=S===G&&z.isPseudoAfter();if(E=0,e.appendString("<span "),j&&e.appendString('style="unicode-bidi:isolate" '),e.appendString('class="'),e.appendString(oe?"mtkz":J),e.appendASCIICharCode(34),ne){let te=0;{let ce=S,Ie=x;for(;ce<G;ce++){const it=(r.charCodeAt(ce)===9?u-Ie%u:1)|0;te+=it,ce>=d&&(Ie+=it)}}for(oe&&(e.appendString(' style="width:'),e.appendString(String(g*te)),e.appendString('px"')),e.appendASCIICharCode(62);S<G;S++){b.setColumnInfo(S+1,I-N,E,D),N=0;const ce=r.charCodeAt(S);let Ie,Ce;if(ce===9){Ie=u-x%u|0,Ce=Ie,!i||Ce>1?e.appendCharCode(8594):e.appendCharCode(65515);for(let it=2;it<=Ce;it++)e.appendCharCode(160)}else Ie=2,Ce=1,e.appendCharCode(p),e.appendCharCode(8204);E+=Ie,D+=Ce,S>=d&&(x+=Ce)}}else for(e.appendASCIICharCode(62);S<G;S++){b.setColumnInfo(S+1,I-N,E,D),N=0;const te=r.charCodeAt(S);let ce=1,Ie=1;switch(te){case 9:ce=u-x%u,Ie=ce;for(let Ce=1;Ce<=ce;Ce++)e.appendCharCode(160);break;case 32:e.appendCharCode(160);break;case 60:e.appendString("&lt;");break;case 62:e.appendString("&gt;");break;case 38:e.appendString("&amp;");break;case 0:w?e.appendCharCode(9216):e.appendString("&#00;");break;case 65279:case 8232:case 8233:case 133:e.appendCharCode(65533);break;default:N_(te)&&Ie++,w&&te<32?e.appendCharCode(9216+te):w&&te===127?e.appendCharCode(9249):w&&SSe(te)?(e.appendString("[U+"),e.appendString(Zat(te)),e.appendString("]"),ce=8,Ie=ce):e.appendCharCode(te)}E+=ce,D+=Ie,S>=d&&(x+=Ie)}ve?N++:N=0,S>=o&&!y&&z.isPseudoAfter()&&(y=!0,b.setColumnInfo(S+1,I,E,D)),e.appendString("</span>")}return y||b.setColumnInfo(o+1,c.length-1,E,D),a&&(e.appendString('<span class="mtkoverflow">'),e.appendString(v("showMore","Show more ({0})",Xat(l))),e.appendString("</span>")),e.appendString("</span>"),new hj(b,f,s)}function Zat(n){return n.toString(16).toUpperCase().padStart(4,"0")}function Xat(n){return n<1024?v("overflow.chars","{0} chars",n):n<1024*1024?`${(n/1024).toFixed(1)} KB`:`${(n/1024/1024).toFixed(1)} MB`}class Uce{constructor(e,t,i,s){this._viewportBrand=void 0,this.top=e|0,this.left=t|0,this.width=i|0,this.height=s|0}}class Qat{constructor(e,t){this.tabSize=e,this.data=t}}class jQ{constructor(e,t,i,s,r,o,a){this._viewLineDataBrand=void 0,this.content=e,this.continuesWithWrappedLine=t,this.minColumn=i,this.maxColumn=s,this.startVisibleColumn=r,this.tokens=o,this.inlineDecorations=a}}class ql{constructor(e,t,i,s,r,o,a,l,c,d){this.minColumn=e,this.maxColumn=t,this.content=i,this.continuesWithWrappedLine=s,this.isBasicASCII=ql.isBasicASCII(i,o),this.containsRTL=ql.containsRTL(i,this.isBasicASCII,r),this.tokens=a,this.inlineDecorations=l,this.tabSize=c,this.startVisibleColumn=d}static isBasicASCII(e,t){return t?MN(e):!0}static containsRTL(e,t,i){return!t&&i?DS(e):!1}}class uE{constructor(e,t,i){this.range=e,this.inlineClassName=t,this.type=i}}class Jat{constructor(e,t,i,s){this.startOffset=e,this.endOffset=t,this.inlineClassName=i,this.inlineClassNameAffectsLetterSpacing=s}toInlineDecoration(e){return new uE(new M(e,this.startOffset+1,e,this.endOffset+1),this.inlineClassName,this.inlineClassNameAffectsLetterSpacing?3:0)}}class xSe{constructor(e,t){this._viewModelDecorationBrand=void 0,this.range=e,this.options=t}}class _D{constructor(e,t,i){this.color=e,this.zIndex=t,this.data=i}static compareByRenderingProps(e,t){return e.zIndex===t.zIndex?e.color<t.color?-1:e.color>t.color?1:0:e.zIndex-t.zIndex}static equals(e,t){return e.color===t.color&&e.zIndex===t.zIndex&&dn(e.data,t.data)}static equalsArr(e,t){return dn(e,t,_D.equals)}}function elt(n){return Array.isArray(n)}function tlt(n){return!elt(n)}function LSe(n){return typeof n=="string"}function $ce(n){return!LSe(n)}function lb(n){return!n}function Mg(n,e){return n.ignoreCase&&e?e.toLowerCase():e}function jce(n){return n.replace(/[&<>'"_]/g,"-")}function ilt(n,e){console.log(`${n.languageId}: ${e}`)}function en(n,e){return new Error(`${n.languageId}: ${e}`)}function om(n,e,t,i,s){const r=/\$((\$)|(#)|(\d\d?)|[sS](\d\d?)|@(\w+))/g;let o=null;return e.replace(r,function(a,l,c,d,u,h,f,g,p){return lb(c)?lb(d)?!lb(u)&&u<i.length?Mg(n,i[u]):!lb(f)&&n&&typeof n[f]=="string"?n[f]:(o===null&&(o=s.split("."),o.unshift(s)),!lb(h)&&h<o.length?Mg(n,o[h]):""):Mg(n,t):"$"})}function nlt(n,e,t){const i=/\$[sS](\d\d?)/g;let s=null;return e.replace(i,function(r,o){return s===null&&(s=t.split("."),s.unshift(t)),!lb(o)&&o<s.length?Mg(n,s[o]):""})}function uA(n,e){let t=e;for(;t&&t.length>0;){const i=n.tokenizer[t];if(i)return i;const s=t.lastIndexOf(".");s<0?t=null:t=t.substr(0,s)}return null}function slt(n,e){let t=e;for(;t&&t.length>0;){if(n.stateNames[t])return!0;const s=t.lastIndexOf(".");s<0?t=null:t=t.substr(0,s)}return!1}var rlt=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},olt=function(n,e){return function(t,i){e(t,i,n)}},fj;const kSe=5,M4=class M4{static create(e,t){return this._INSTANCE.create(e,t)}constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}create(e,t){if(e!==null&&e.depth>=this._maxCacheDepth)return new Oy(e,t);let i=Oy.getStackElementId(e);i.length>0&&(i+="|"),i+=t;let s=this._entries[i];return s||(s=new Oy(e,t),this._entries[i]=s,s)}};M4._INSTANCE=new M4(kSe);let vD=M4;class Oy{constructor(e,t){this.parent=e,this.state=t,this.depth=(this.parent?this.parent.depth:0)+1}static getStackElementId(e){let t="";for(;e!==null;)t.length>0&&(t+="|"),t+=e.state,e=e.parent;return t}static _equals(e,t){for(;e!==null&&t!==null;){if(e===t)return!0;if(e.state!==t.state)return!1;e=e.parent,t=t.parent}return e===null&&t===null}equals(e){return Oy._equals(this,e)}push(e){return vD.create(this,e)}pop(){return this.parent}popall(){let e=this;for(;e.parent;)e=e.parent;return e}switchTo(e){return vD.create(this.parent,e)}}class N1{constructor(e,t){this.languageId=e,this.state=t}equals(e){return this.languageId===e.languageId&&this.state.equals(e.state)}clone(){return this.state.clone()===this.state?this:new N1(this.languageId,this.state)}}const P4=class P4{static create(e,t){return this._INSTANCE.create(e,t)}constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}create(e,t){if(t!==null)return new hE(e,t);if(e!==null&&e.depth>=this._maxCacheDepth)return new hE(e,t);const i=Oy.getStackElementId(e);let s=this._entries[i];return s||(s=new hE(e,null),this._entries[i]=s,s)}};P4._INSTANCE=new P4(kSe);let am=P4;class hE{constructor(e,t){this.stack=e,this.embeddedLanguageData=t}clone(){return(this.embeddedLanguageData?this.embeddedLanguageData.clone():null)===this.embeddedLanguageData?this:am.create(this.stack,this.embeddedLanguageData)}equals(e){return!(e instanceof hE)||!this.stack.equals(e.stack)?!1:this.embeddedLanguageData===null&&e.embeddedLanguageData===null?!0:this.embeddedLanguageData===null||e.embeddedLanguageData===null?!1:this.embeddedLanguageData.equals(e.embeddedLanguageData)}}class alt{constructor(){this._tokens=[],this._languageId=null,this._lastTokenType=null,this._lastTokenLanguage=null}enterLanguage(e){this._languageId=e}emit(e,t){this._lastTokenType===t&&this._lastTokenLanguage===this._languageId||(this._lastTokenType=t,this._lastTokenLanguage=this._languageId,this._tokens.push(new TI(e,t,this._languageId)))}nestedLanguageTokenize(e,t,i,s){const r=i.languageId,o=i.state,a=In.get(r);if(!a)return this.enterLanguage(r),this.emit(s,""),o;const l=a.tokenize(e,t,o);if(s!==0)for(const c of l.tokens)this._tokens.push(new TI(c.offset+s,c.type,c.language));else this._tokens=this._tokens.concat(l.tokens);return this._lastTokenType=null,this._lastTokenLanguage=null,this._languageId=null,l.endState}finalize(e){return new eX(this._tokens,e)}}class kO{constructor(e,t){this._languageService=e,this._theme=t,this._prependTokens=null,this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0}enterLanguage(e){this._currentLanguageId=this._languageService.languageIdCodec.encodeLanguageId(e)}emit(e,t){const i=this._theme.match(this._currentLanguageId,t)|1024;this._lastTokenMetadata!==i&&(this._lastTokenMetadata=i,this._tokens.push(e),this._tokens.push(i))}static _merge(e,t,i){const s=e!==null?e.length:0,r=t.length,o=i!==null?i.length:0;if(s===0&&r===0&&o===0)return new Uint32Array(0);if(s===0&&r===0)return i;if(r===0&&o===0)return e;const a=new Uint32Array(s+r+o);e!==null&&a.set(e);for(let l=0;l<r;l++)a[s+l]=t[l];return i!==null&&a.set(i,s+r),a}nestedLanguageTokenize(e,t,i,s){const r=i.languageId,o=i.state,a=In.get(r);if(!a)return this.enterLanguage(r),this.emit(s,""),o;const l=a.tokenizeEncoded(e,t,o);if(s!==0)for(let c=0,d=l.tokens.length;c<d;c+=2)l.tokens[c]+=s;return this._prependTokens=kO._merge(this._prependTokens,this._tokens,l.tokens),this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0,l.endState}finalize(e){return new P3(kO._merge(this._prependTokens,this._tokens,null),e)}}let bD=fj=class extends ee{constructor(e,t,i,s,r){super(),this._configurationService=r,this._languageService=e,this._standaloneThemeService=t,this._languageId=i,this._lexer=s,this._embeddedLanguages=Object.create(null),this.embeddedLoaded=Promise.resolve(void 0);let o=!1;this._register(In.onDidChange(a=>{if(o)return;let l=!1;for(let c=0,d=a.changedLanguages.length;c<d;c++){const u=a.changedLanguages[c];if(this._embeddedLanguages[u]){l=!0;break}}l&&(o=!0,In.handleChange([this._languageId]),o=!1)})),this._maxTokenizationLineLength=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:this._languageId}),this._register(this._configurationService.onDidChangeConfiguration(a=>{a.affectsConfiguration("editor.maxTokenizationLineLength")&&(this._maxTokenizationLineLength=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:this._languageId}))}))}getLoadStatus(){const e=[];for(const t in this._embeddedLanguages){const i=In.get(t);if(i){if(i instanceof fj){const s=i.getLoadStatus();s.loaded===!1&&e.push(s.promise)}continue}In.isResolved(t)||e.push(In.getOrCreate(t))}return e.length===0?{loaded:!0}:{loaded:!1,promise:Promise.all(e).then(t=>{})}}getInitialState(){const e=vD.create(null,this._lexer.start);return am.create(e,null)}tokenize(e,t,i){if(e.length>=this._maxTokenizationLineLength)return tQ(this._languageId,i);const s=new alt,r=this._tokenize(e,t,i,s);return s.finalize(r)}tokenizeEncoded(e,t,i){if(e.length>=this._maxTokenizationLineLength)return vB(this._languageService.languageIdCodec.encodeLanguageId(this._languageId),i);const s=new kO(this._languageService,this._standaloneThemeService.getColorTheme().tokenTheme),r=this._tokenize(e,t,i,s);return s.finalize(r)}_tokenize(e,t,i,s){return i.embeddedLanguageData?this._nestedTokenize(e,t,i,0,s):this._myTokenize(e,t,i,0,s)}_findLeavingNestedLanguageOffset(e,t){let i=this._lexer.tokenizer[t.stack.state];if(!i&&(i=uA(this._lexer,t.stack.state),!i))throw en(this._lexer,"tokenizer state is not defined: "+t.stack.state);let s=-1,r=!1;for(const o of i){if(!$ce(o.action)||o.action.nextEmbedded!=="@pop")continue;r=!0;let a=o.resolveRegex(t.stack.state);const l=a.source;if(l.substr(0,4)==="^(?:"&&l.substr(l.length-1,1)===")"){const d=(a.ignoreCase?"i":"")+(a.unicode?"u":"");a=new RegExp(l.substr(4,l.length-5),d)}const c=e.search(a);c===-1||c!==0&&o.matchOnlyAtLineStart||(s===-1||c<s)&&(s=c)}if(!r)throw en(this._lexer,'no rule containing nextEmbedded: "@pop" in tokenizer embedded state: '+t.stack.state);return s}_nestedTokenize(e,t,i,s,r){const o=this._findLeavingNestedLanguageOffset(e,i);if(o===-1){const c=r.nestedLanguageTokenize(e,t,i.embeddedLanguageData,s);return am.create(i.stack,new N1(i.embeddedLanguageData.languageId,c))}const a=e.substring(0,o);a.length>0&&r.nestedLanguageTokenize(a,!1,i.embeddedLanguageData,s);const l=e.substring(o);return this._myTokenize(l,t,i,s+o,r)}_safeRuleName(e){return e?e.name:"(unknown)"}_myTokenize(e,t,i,s,r){r.enterLanguage(this._languageId);const o=e.length,a=t&&this._lexer.includeLF?e+`
`:e,l=a.length;let c=i.embeddedLanguageData,d=i.stack,u=0,h=null,f=!0;for(;f||u<l;){const g=u,p=d.depth,_=h?h.groups.length:0,w=d.state;let b=null,y=null,S=null,x=null,E=null;if(h){b=h.matches;const I=h.groups.shift();y=I.matched,S=I.action,x=h.rule,h.groups.length===0&&(h=null)}else{if(!f&&u>=l)break;f=!1;let I=this._lexer.tokenizer[w];if(!I&&(I=uA(this._lexer,w),!I))throw en(this._lexer,"tokenizer state is not defined: "+w);const H=a.substr(u);for(const z of I)if((u===0||!z.matchOnlyAtLineStart)&&(b=H.match(z.resolveRegex(w)),b)){y=b[0],S=z.action;break}}if(b||(b=[""],y=""),S||(u<l&&(b=[a.charAt(u)],y=b[0]),S=this._lexer.defaultToken),y===null)break;for(u+=y.length;tlt(S)&&$ce(S)&&S.test;)S=S.test(y,b,w,u===l);let D=null;if(typeof S=="string"||Array.isArray(S))D=S;else if(S.group)D=S.group;else if(S.token!==null&&S.token!==void 0){if(S.tokenSubst?D=om(this._lexer,S.token,y,b,w):D=S.token,S.nextEmbedded)if(S.nextEmbedded==="@pop"){if(!c)throw en(this._lexer,"cannot pop embedded language if not inside one");c=null}else{if(c)throw en(this._lexer,"cannot enter embedded language from within an embedded language");E=om(this._lexer,S.nextEmbedded,y,b,w)}if(S.goBack&&(u=Math.max(0,u-S.goBack)),S.switchTo&&typeof S.switchTo=="string"){let I=om(this._lexer,S.switchTo,y,b,w);if(I[0]==="@"&&(I=I.substr(1)),uA(this._lexer,I))d=d.switchTo(I);else throw en(this._lexer,"trying to switch to a state '"+I+"' that is undefined in rule: "+this._safeRuleName(x))}else{if(S.transform&&typeof S.transform=="function")throw en(this._lexer,"action.transform not supported");if(S.next)if(S.next==="@push"){if(d.depth>=this._lexer.maxStack)throw en(this._lexer,"maximum tokenizer stack size reached: ["+d.state+","+d.parent.state+",...]");d=d.push(w)}else if(S.next==="@pop"){if(d.depth<=1)throw en(this._lexer,"trying to pop an empty stack in rule: "+this._safeRuleName(x));d=d.pop()}else if(S.next==="@popall")d=d.popall();else{let I=om(this._lexer,S.next,y,b,w);if(I[0]==="@"&&(I=I.substr(1)),uA(this._lexer,I))d=d.push(I);else throw en(this._lexer,"trying to set a next state '"+I+"' that is undefined in rule: "+this._safeRuleName(x))}}S.log&&typeof S.log=="string"&&ilt(this._lexer,this._lexer.languageId+": "+om(this._lexer,S.log,y,b,w))}if(D===null)throw en(this._lexer,"lexer rule has no well-defined action in rule: "+this._safeRuleName(x));const N=I=>{const H=this._languageService.getLanguageIdByLanguageName(I)||this._languageService.getLanguageIdByMimeType(I)||I,z=this._getNestedEmbeddedLanguageData(H);if(u<l){const G=e.substr(u);return this._nestedTokenize(G,t,am.create(d,z),s+u,r)}else return am.create(d,z)};if(Array.isArray(D)){if(h&&h.groups.length>0)throw en(this._lexer,"groups cannot be nested: "+this._safeRuleName(x));if(b.length!==D.length+1)throw en(this._lexer,"matched number of groups does not match the number of actions in rule: "+this._safeRuleName(x));let I=0;for(let H=1;H<b.length;H++)I+=b[H].length;if(I!==y.length)throw en(this._lexer,"with groups, all characters should be matched in consecutive groups in rule: "+this._safeRuleName(x));h={rule:x,matches:b,groups:[]};for(let H=0;H<D.length;H++)h.groups[H]={action:D[H],matched:b[H+1]};u-=y.length;continue}else{if(D==="@rematch"&&(u-=y.length,y="",b=null,D="",E!==null))return N(E);if(y.length===0){if(l===0||p!==d.depth||w!==d.state||(h?h.groups.length:0)!==_)continue;throw en(this._lexer,"no progress in tokenizer in rule: "+this._safeRuleName(x))}let I=null;if(LSe(D)&&D.indexOf("@brackets")===0){const H=D.substr(9),z=llt(this._lexer,y);if(!z)throw en(this._lexer,"@brackets token returned but no bracket defined as: "+y);I=jce(z.token+H)}else{const H=D===""?"":D+this._lexer.tokenPostfix;I=jce(H)}g<o&&r.emit(g+s,I)}if(E!==null)return N(E)}return am.create(d,c)}_getNestedEmbeddedLanguageData(e){if(!this._languageService.isRegisteredLanguageId(e))return new N1(e,HS);e!==this._languageId&&(this._languageService.requestBasicLanguageFeatures(e),In.getOrCreate(e),this._embeddedLanguages[e]=!0);const t=In.get(e);return t?new N1(e,t.getInitialState()):new N1(e,HS)}};bD=fj=rlt([olt(4,Tt)],bD);function llt(n,e){if(!e)return null;e=Mg(n,e);const t=n.brackets;for(const i of t){if(i.open===e)return{token:i.token,bracketType:1};if(i.close===e)return{token:i.token,bracketType:-1}}return null}const V8=up("standaloneColorizer",{createHTML:n=>n});class KQ{static colorizeElement(e,t,i,s){s=s||{};const r=s.theme||"vs",o=s.mimeType||i.getAttribute("lang")||i.getAttribute("data-lang");if(!o)return console.error("Mode not detected"),Promise.resolve();const a=t.getLanguageIdByMimeType(o)||o;e.setTheme(r);const l=i.firstChild?i.firstChild.nodeValue:"";i.className+=" "+r;const c=d=>{const u=(V8==null?void 0:V8.createHTML(d))??d;i.innerHTML=u};return this.colorize(t,l||"",a,s).then(c,d=>console.error(d))}static async colorize(e,t,i,s){const r=e.languageIdCodec;let o=4;s&&typeof s.tabSize=="number"&&(o=s.tabSize),aX(t)&&(t=t.substr(1));const a=mf(t);if(!e.isRegisteredLanguageId(i))return Kce(a,o,r);const l=await In.getOrCreate(i);return l?clt(a,o,l,r):Kce(a,o,r)}static colorizeLine(e,t,i,s,r=4){const o=ql.isBasicASCII(e,t),a=ql.containsRTL(e,o,i);return OB(new av(!1,!0,e,!1,o,a,0,s,[],r,0,0,0,0,-1,"none",!1,!1,null)).html}static colorizeModelLine(e,t,i=4){const s=e.getLineContent(t);e.tokenization.forceTokenization(t);const o=e.tokenization.getLineTokens(t).inflate();return this.colorizeLine(s,e.mightContainNonBasicASCII(),e.mightContainRTL(),o,i)}}function clt(n,e,t,i){return new Promise((s,r)=>{const o=()=>{const a=dlt(n,e,t,i);if(t instanceof bD){const l=t.getLoadStatus();if(l.loaded===!1){l.promise.then(o,r);return}}s(a)};o()})}function Kce(n,e,t){let i=[];const r=new Uint32Array(2);r[0]=0,r[1]=33587200;for(let o=0,a=n.length;o<a;o++){const l=n[o];r[0]=l.length;const c=new Ks(r,l,t),d=ql.isBasicASCII(l,!0),u=ql.containsRTL(l,d,!0),h=OB(new av(!1,!0,l,!1,d,u,0,c,[],e,0,0,0,0,-1,"none",!1,!1,null));i=i.concat(h.html),i.push("<br/>")}return i.join("")}function dlt(n,e,t,i){let s=[],r=t.getInitialState();for(let o=0,a=n.length;o<a;o++){const l=n[o],c=t.tokenizeEncoded(l,!0,r);Ks.convertToEndOffset(c.tokens,l.length);const d=new Ks(c.tokens,l,i),u=ql.isBasicASCII(l,!0),h=ql.containsRTL(l,u,!0),f=OB(new av(!1,!0,l,!1,u,h,0,d.inflate(),[],e,0,0,0,0,-1,"none",!1,!1,null));s=s.concat(f.html),s.push("<br/>"),r=c.endState}return s.join("")}var ult=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},hlt=function(n,e){return function(t,i){e(t,i,n)}},tS;let EO=(tS=class{constructor(e,t){}dispose(){}},tS.ID="editor.contrib.markerDecorations",tS);EO=ult([hlt(1,hQ)],EO);Xt(EO.ID,EO,0);class ESe extends ee{constructor(e,t){super(),this._onDidChange=this._register(new X),this.onDidChange=this._onDidChange.event,this._referenceDomElement=e,this._width=-1,this._height=-1,this._resizeObserver=null,this.measureReferenceDomElement(!1,t)}dispose(){this.stopObserving(),super.dispose()}getWidth(){return this._width}getHeight(){return this._height}startObserving(){if(!this._resizeObserver&&this._referenceDomElement){let e=null;const t=()=>{e?this.observe({width:e.width,height:e.height}):this.observe()};let i=!1,s=!1;const r=()=>{if(i&&!s)try{i=!1,s=!0,t()}finally{il(nt(this._referenceDomElement),()=>{s=!1,r()})}};this._resizeObserver=new ResizeObserver(o=>{o&&o[0]&&o[0].contentRect?e={width:o[0].contentRect.width,height:o[0].contentRect.height}:e=null,i=!0,r()}),this._resizeObserver.observe(this._referenceDomElement)}}stopObserving(){this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null)}observe(e){this.measureReferenceDomElement(!0,e)}measureReferenceDomElement(e,t){let i=0,s=0;t?(i=t.width,s=t.height):this._referenceDomElement&&(i=this._referenceDomElement.clientWidth,s=this._referenceDomElement.clientHeight),i=Math.max(5,i),s=Math.max(5,s),(this._width!==i||this._height!==s)&&(this._width=i,this._height=s,e&&this._onDidChange.fire())}}const J1=class J1{constructor(e,t){this.key=e,this.migrate=t}apply(e){const t=J1._read(e,this.key),i=r=>J1._read(e,r),s=(r,o)=>J1._write(e,r,o);this.migrate(t,i,s)}static _read(e,t){if(typeof e>"u")return;const i=t.indexOf(".");if(i>=0){const s=t.substring(0,i);return this._read(e[s],t.substring(i+1))}return e[t]}static _write(e,t,i){const s=t.indexOf(".");if(s>=0){const r=t.substring(0,s);e[r]=e[r]||{},this._write(e[r],t.substring(s+1),i);return}e[t]=i}};J1.items=[];let wD=J1;function Yu(n,e){wD.items.push(new wD(n,e))}function ll(n,e){Yu(n,(t,i,s)=>{if(typeof t<"u"){for(const[r,o]of e)if(t===r){s(n,o);return}}})}function flt(n){wD.items.forEach(e=>e.apply(n))}ll("wordWrap",[[!0,"on"],[!1,"off"]]);ll("lineNumbers",[[!0,"on"],[!1,"off"]]);ll("cursorBlinking",[["visible","solid"]]);ll("renderWhitespace",[[!0,"boundary"],[!1,"none"]]);ll("renderLineHighlight",[[!0,"line"],[!1,"none"]]);ll("acceptSuggestionOnEnter",[[!0,"on"],[!1,"off"]]);ll("tabCompletion",[[!1,"off"],[!0,"onlySnippets"]]);ll("hover",[[!0,{enabled:!0}],[!1,{enabled:!1}]]);ll("parameterHints",[[!0,{enabled:!0}],[!1,{enabled:!1}]]);ll("autoIndent",[[!1,"advanced"],[!0,"full"]]);ll("matchBrackets",[[!0,"always"],[!1,"never"]]);ll("renderFinalNewline",[[!0,"on"],[!1,"off"]]);ll("cursorSmoothCaretAnimation",[[!0,"on"],[!1,"off"]]);ll("occurrencesHighlight",[[!0,"singleFile"],[!1,"off"]]);ll("wordBasedSuggestions",[[!0,"matchingDocuments"],[!1,"off"]]);Yu("autoClosingBrackets",(n,e,t)=>{n===!1&&(t("autoClosingBrackets","never"),typeof e("autoClosingQuotes")>"u"&&t("autoClosingQuotes","never"),typeof e("autoSurround")>"u"&&t("autoSurround","never"))});Yu("renderIndentGuides",(n,e,t)=>{typeof n<"u"&&(t("renderIndentGuides",void 0),typeof e("guides.indentation")>"u"&&t("guides.indentation",!!n))});Yu("highlightActiveIndentGuide",(n,e,t)=>{typeof n<"u"&&(t("highlightActiveIndentGuide",void 0),typeof e("guides.highlightActiveIndentation")>"u"&&t("guides.highlightActiveIndentation",!!n))});const glt={method:"showMethods",function:"showFunctions",constructor:"showConstructors",deprecated:"showDeprecated",field:"showFields",variable:"showVariables",class:"showClasses",struct:"showStructs",interface:"showInterfaces",module:"showModules",property:"showProperties",event:"showEvents",operator:"showOperators",unit:"showUnits",value:"showValues",constant:"showConstants",enum:"showEnums",enumMember:"showEnumMembers",keyword:"showKeywords",text:"showWords",color:"showColors",file:"showFiles",reference:"showReferences",folder:"showFolders",typeParameter:"showTypeParameters",snippet:"showSnippets"};Yu("suggest.filteredTypes",(n,e,t)=>{if(n&&typeof n=="object"){for(const i of Object.entries(glt))n[i[0]]===!1&&typeof e(`suggest.${i[1]}`)>"u"&&t(`suggest.${i[1]}`,!1);t("suggest.filteredTypes",void 0)}});Yu("quickSuggestions",(n,e,t)=>{if(typeof n=="boolean"){const i=n?"on":"off";t("quickSuggestions",{comments:i,strings:i,other:i})}});Yu("experimental.stickyScroll.enabled",(n,e,t)=>{typeof n=="boolean"&&(t("experimental.stickyScroll.enabled",void 0),typeof e("stickyScroll.enabled")>"u"&&t("stickyScroll.enabled",n))});Yu("experimental.stickyScroll.maxLineCount",(n,e,t)=>{typeof n=="number"&&(t("experimental.stickyScroll.maxLineCount",void 0),typeof e("stickyScroll.maxLineCount")>"u"&&t("stickyScroll.maxLineCount",n))});Yu("codeActionsOnSave",(n,e,t)=>{if(n&&typeof n=="object"){let i=!1;const s={};for(const r of Object.entries(n))typeof r[1]=="boolean"?(i=!0,s[r[0]]=r[1]?"explicit":"never"):s[r[0]]=r[1];i&&t("codeActionsOnSave",s)}});Yu("codeActionWidget.includeNearbyQuickfixes",(n,e,t)=>{typeof n=="boolean"&&(t("codeActionWidget.includeNearbyQuickfixes",void 0),typeof e("codeActionWidget.includeNearbyQuickFixes")>"u"&&t("codeActionWidget.includeNearbyQuickFixes",n))});Yu("lightbulb.enabled",(n,e,t)=>{typeof n=="boolean"&&t("lightbulb.enabled",n?void 0:"off")});class plt{constructor(){this._tabFocus=!1,this._onDidChangeTabFocus=new X,this.onDidChangeTabFocus=this._onDidChangeTabFocus.event}getTabFocusMode(){return this._tabFocus}setTabFocusMode(e){this._tabFocus=e,this._onDidChangeTabFocus.fire(this._tabFocus)}}const YS=new plt;var mlt=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},_lt=function(n,e){return function(t,i){e(t,i,n)}};let gj=class extends ee{constructor(e,t,i,s,r){super(),this._accessibilityService=r,this._onDidChange=this._register(new X),this.onDidChange=this._onDidChange.event,this._onDidChangeFast=this._register(new X),this.onDidChangeFast=this._onDidChangeFast.event,this._isDominatedByLongLines=!1,this._viewLineCount=1,this._lineNumbersDigitCount=1,this._reservedHeight=0,this._glyphMarginDecorationLaneCount=1,this._computeOptionsMemory=new Gwe,this.isSimpleWidget=e,this.contextMenuId=t,this._containerObserver=this._register(new ESe(s,i.dimension)),this._targetWindowId=nt(s).vscodeWindowId,this._rawOptions=qce(i),this._validatedOptions=lm.validateOptions(this._rawOptions),this.options=this._computeOptions(),this.options.get(13)&&this._containerObserver.startObserving(),this._register(vc.onDidChangeZoomLevel(()=>this._recomputeOptions())),this._register(YS.onDidChangeTabFocus(()=>this._recomputeOptions())),this._register(this._containerObserver.onDidChange(()=>this._recomputeOptions())),this._register(Vz.onDidChange(()=>this._recomputeOptions())),this._register(BI.getInstance(nt(s)).onDidChange(()=>this._recomputeOptions())),this._register(this._accessibilityService.onDidChangeScreenReaderOptimized(()=>this._recomputeOptions()))}_recomputeOptions(){const e=this._computeOptions(),t=lm.checkEquals(this.options,e);t!==null&&(this.options=e,this._onDidChangeFast.fire(t),this._onDidChange.fire(t))}_computeOptions(){const e=this._readEnvConfiguration(),t=zb.createFromValidatedSettings(this._validatedOptions,e.pixelRatio,this.isSimpleWidget),i=this._readFontInfo(t),s={memory:this._computeOptionsMemory,outerWidth:e.outerWidth,outerHeight:e.outerHeight-this._reservedHeight,fontInfo:i,extraEditorClassName:e.extraEditorClassName,isDominatedByLongLines:this._isDominatedByLongLines,viewLineCount:this._viewLineCount,lineNumbersDigitCount:this._lineNumbersDigitCount,emptySelectionClipboard:e.emptySelectionClipboard,pixelRatio:e.pixelRatio,tabFocusMode:YS.getTabFocusMode(),accessibilitySupport:e.accessibilitySupport,glyphMarginDecorationLaneCount:this._glyphMarginDecorationLaneCount};return lm.computeOptions(this._validatedOptions,s)}_readEnvConfiguration(){return{extraEditorClassName:blt(),outerWidth:this._containerObserver.getWidth(),outerHeight:this._containerObserver.getHeight(),emptySelectionClipboard:Vb||Tc,pixelRatio:BI.getInstance(Boe(this._targetWindowId,!0).window).value,accessibilitySupport:this._accessibilityService.isScreenReaderOptimized()?2:this._accessibilityService.getAccessibilitySupport()}}_readFontInfo(e){return Vz.readFontInfo(Boe(this._targetWindowId,!0).window,e)}getRawOptions(){return this._rawOptions}updateOptions(e){const t=qce(e);lm.applyUpdate(this._rawOptions,t)&&(this._validatedOptions=lm.validateOptions(this._rawOptions),this._recomputeOptions())}observeContainer(e){this._containerObserver.observe(e)}setIsDominatedByLongLines(e){this._isDominatedByLongLines!==e&&(this._isDominatedByLongLines=e,this._recomputeOptions())}setModelLineCount(e){const t=vlt(e);this._lineNumbersDigitCount!==t&&(this._lineNumbersDigitCount=t,this._recomputeOptions())}setViewLineCount(e){this._viewLineCount!==e&&(this._viewLineCount=e,this._recomputeOptions())}setReservedHeight(e){this._reservedHeight!==e&&(this._reservedHeight=e,this._recomputeOptions())}setGlyphMarginDecorationLaneCount(e){this._glyphMarginDecorationLaneCount!==e&&(this._glyphMarginDecorationLaneCount=e,this._recomputeOptions())}};gj=mlt([_lt(4,al)],gj);function vlt(n){let e=0;for(;n;)n=Math.floor(n/10),e++;return e||1}function blt(){let n="";return!Yg&&!C0e&&(n+="no-user-select "),Yg&&(n+="no-minimap-shadow ",n+="enable-user-select "),Bt&&(n+="mac "),n}class wlt{constructor(){this._values=[]}_read(e){return this._values[e]}get(e){return this._values[e]}_write(e,t){this._values[e]=t}}class Clt{constructor(){this._values=[]}_read(e){if(e>=this._values.length)throw new Error("Cannot read uninitialized value");return this._values[e]}get(e){return this._read(e)}_write(e,t){this._values[e]=t}}class lm{static validateOptions(e){const t=new wlt;for(const i of b1){const s=i.name==="_never_"?void 0:e[i.name];t._write(i.id,i.validate(s))}return t}static computeOptions(e,t){const i=new Clt;for(const s of b1)i._write(s.id,s.compute(t,i,e._read(s.id)));return i}static _deepEquals(e,t){if(typeof e!="object"||typeof t!="object"||!e||!t)return e===t;if(Array.isArray(e)||Array.isArray(t))return Array.isArray(e)&&Array.isArray(t)?dn(e,t):!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const i in e)if(!lm._deepEquals(e[i],t[i]))return!1;return!0}static checkEquals(e,t){const i=[];let s=!1;for(const r of b1){const o=!lm._deepEquals(e._read(r.id),t._read(r.id));i[r.id]=o,o&&(s=!0)}return s?new qwe(i):null}static applyUpdate(e,t){let i=!1;for(const s of b1)if(t.hasOwnProperty(s.name)){const r=s.applyUpdate(e[s.name],t[s.name]);e[s.name]=r.newValue,i=i||r.didChange}return i}}function qce(n){const e=eg(n);return flt(e),e}var Im;(function(n){const e={total:0,min:Number.MAX_VALUE,max:0},t={...e},i={...e},s={...e};let r=0;const o={keydown:0,input:0,render:0};function a(){w(),performance.mark("inputlatency/start"),performance.mark("keydown/start"),o.keydown=1,queueMicrotask(l)}n.onKeyDown=a;function l(){o.keydown===1&&(performance.mark("keydown/end"),o.keydown=2)}function c(){performance.mark("input/start"),o.input=1,_()}n.onBeforeInput=c;function d(){o.input===0&&c(),queueMicrotask(u)}n.onInput=d;function u(){o.input===1&&(performance.mark("input/end"),o.input=2)}function h(){w()}n.onKeyUp=h;function f(){w()}n.onSelectionChange=f;function g(){o.keydown===2&&o.input===2&&o.render===0&&(performance.mark("render/start"),o.render=1,queueMicrotask(p),_())}n.onRenderStart=g;function p(){o.render===1&&(performance.mark("render/end"),o.render=2)}function _(){setTimeout(w)}function w(){o.keydown===2&&o.input===2&&o.render===2&&(performance.mark("inputlatency/end"),performance.measure("keydown","keydown/start","keydown/end"),performance.measure("input","input/start","input/end"),performance.measure("render","render/start","render/end"),performance.measure("inputlatency","inputlatency/start","inputlatency/end"),b("keydown",e),b("input",t),b("render",i),b("inputlatency",s),r++,y())}function b(D,N){const I=performance.getEntriesByName(D)[0].duration;N.total+=I,N.min=Math.min(N.min,I),N.max=Math.max(N.max,I)}function y(){performance.clearMarks("keydown/start"),performance.clearMarks("keydown/end"),performance.clearMarks("input/start"),performance.clearMarks("input/end"),performance.clearMarks("render/start"),performance.clearMarks("render/end"),performance.clearMarks("inputlatency/start"),performance.clearMarks("inputlatency/end"),performance.clearMeasures("keydown"),performance.clearMeasures("input"),performance.clearMeasures("render"),performance.clearMeasures("inputlatency"),o.keydown=0,o.input=0,o.render=0}function S(){if(r===0)return;const D={keydown:x(e),input:x(t),render:x(i),total:x(s),sampleCount:r};return E(e),E(t),E(i),E(s),r=0,D}n.getAndClearMeasurements=S;function x(D){return{average:D.total/r,max:D.max,min:D.min}}function E(D){D.total=0,D.min=Number.MAX_VALUE,D.max=0}})(Im||(Im={}));class FB{constructor(e,t){this.x=e,this.y=t,this._pageCoordinatesBrand=void 0}toClientCoordinates(e){return new ISe(this.x-e.scrollX,this.y-e.scrollY)}}class ISe{constructor(e,t){this.clientX=e,this.clientY=t,this._clientCoordinatesBrand=void 0}toPageCoordinates(e){return new FB(this.clientX+e.scrollX,this.clientY+e.scrollY)}}class ylt{constructor(e,t,i,s){this.x=e,this.y=t,this.width=i,this.height=s,this._editorPagePositionBrand=void 0}}class Slt{constructor(e,t){this.x=e,this.y=t,this._positionRelativeToEditorBrand=void 0}}function qQ(n){const e=Fn(n);return new ylt(e.left,e.top,e.width,e.height)}function GQ(n,e,t){const i=e.width/n.offsetWidth,s=e.height/n.offsetHeight,r=(t.x-e.x)/i,o=(t.y-e.y)/s;return new Slt(r,o)}class W_ extends bd{constructor(e,t,i){super(nt(i),e),this._editorMouseEventBrand=void 0,this.isFromPointerCapture=t,this.pos=new FB(this.posx,this.posy),this.editorPos=qQ(i),this.relativePos=GQ(i,this.editorPos,this.pos)}}class xlt{constructor(e){this._editorViewDomNode=e}_create(e){return new W_(e,!1,this._editorViewDomNode)}onContextMenu(e,t){return re(e,"contextmenu",i=>{t(this._create(i))})}onMouseUp(e,t){return re(e,"mouseup",i=>{t(this._create(i))})}onMouseDown(e,t){return re(e,Se.MOUSE_DOWN,i=>{t(this._create(i))})}onPointerDown(e,t){return re(e,Se.POINTER_DOWN,i=>{t(this._create(i),i.pointerId)})}onMouseLeave(e,t){return re(e,Se.MOUSE_LEAVE,i=>{t(this._create(i))})}onMouseMove(e,t){return re(e,"mousemove",i=>t(this._create(i)))}}class Llt{constructor(e){this._editorViewDomNode=e}_create(e){return new W_(e,!1,this._editorViewDomNode)}onPointerUp(e,t){return re(e,"pointerup",i=>{t(this._create(i))})}onPointerDown(e,t){return re(e,Se.POINTER_DOWN,i=>{t(this._create(i),i.pointerId)})}onPointerLeave(e,t){return re(e,Se.POINTER_LEAVE,i=>{t(this._create(i))})}onPointerMove(e,t){return re(e,"pointermove",i=>t(this._create(i)))}}class klt extends ee{constructor(e){super(),this._editorViewDomNode=e,this._globalPointerMoveMonitor=this._register(new Mx),this._keydownListener=null}startMonitoring(e,t,i,s,r){this._keydownListener=Cn(e.ownerDocument,"keydown",o=>{o.toKeyCodeChord().isModifierKey()||this._globalPointerMoveMonitor.stopMonitoring(!0,o.browserEvent)},!0),this._globalPointerMoveMonitor.startMonitoring(e,t,i,o=>{s(new W_(o,!0,this._editorViewDomNode))},o=>{this._keydownListener.dispose(),r(o)})}stopMonitoring(){this._globalPointerMoveMonitor.stopMonitoring(!0)}}const O4=class O4{constructor(e){this._editor=e,this._instanceId=++O4._idPool,this._counter=0,this._rules=new Map,this._garbageCollectionScheduler=new yi(()=>this.garbageCollect(),1e3)}createClassNameRef(e){const t=this.getOrCreateRule(e);return t.increaseRefCount(),{className:t.className,dispose:()=>{t.decreaseRefCount(),this._garbageCollectionScheduler.schedule()}}}getOrCreateRule(e){const t=this.computeUniqueKey(e);let i=this._rules.get(t);if(!i){const s=this._counter++;i=new Elt(t,`dyn-rule-${this._instanceId}-${s}`,pP(this._editor.getContainerDomNode())?this._editor.getContainerDomNode():void 0,e),this._rules.set(t,i)}return i}computeUniqueKey(e){return JSON.stringify(e)}garbageCollect(){for(const e of this._rules.values())e.hasReferences()||(this._rules.delete(e.key),e.dispose())}};O4._idPool=0;let IO=O4;class Elt{constructor(e,t,i,s){this.key=e,this.className=t,this.properties=s,this._referenceCount=0,this._styleElementDisposables=new ue,this._styleElement=jl(i,void 0,this._styleElementDisposables),this._styleElement.textContent=this.getCssText(this.className,this.properties)}getCssText(e,t){let i=`.${e} {`;for(const s in t){const r=t[s];let o;typeof r=="object"?o=Me(r.id):o=r;const a=Ilt(s);i+=`
	${a}: ${o};`}return i+=`
}`,i}dispose(){this._styleElementDisposables.dispose(),this._styleElement=void 0}increaseRefCount(){this._referenceCount++}decreaseRefCount(){this._referenceCount--}hasReferences(){return this._referenceCount>0}}function Ilt(n){return n.replace(/(^[A-Z])/,([e])=>e.toLowerCase()).replace(/([A-Z])/g,([e])=>`-${e.toLowerCase()}`)}class nT extends ee{constructor(){super(),this._shouldRender=!0}shouldRender(){return this._shouldRender}forceShouldRender(){this._shouldRender=!0}setShouldRender(){this._shouldRender=!0}onDidRender(){this._shouldRender=!1}onCompositionStart(e){return!1}onCompositionEnd(e){return!1}onConfigurationChanged(e){return!1}onCursorStateChanged(e){return!1}onDecorationsChanged(e){return!1}onFlushed(e){return!1}onFocusChanged(e){return!1}onLanguageConfigurationChanged(e){return!1}onLineMappingChanged(e){return!1}onLinesChanged(e){return!1}onLinesDeleted(e){return!1}onLinesInserted(e){return!1}onRevealRangeRequest(e){return!1}onScrollChanged(e){return!1}onThemeChanged(e){return!1}onTokensChanged(e){return!1}onTokensColorsChanged(e){return!1}onZonesChanged(e){return!1}handleEvents(e){let t=!1;for(let i=0,s=e.length;i<s;i++){const r=e[i];switch(r.type){case 0:this.onCompositionStart(r)&&(t=!0);break;case 1:this.onCompositionEnd(r)&&(t=!0);break;case 2:this.onConfigurationChanged(r)&&(t=!0);break;case 3:this.onCursorStateChanged(r)&&(t=!0);break;case 4:this.onDecorationsChanged(r)&&(t=!0);break;case 5:this.onFlushed(r)&&(t=!0);break;case 6:this.onFocusChanged(r)&&(t=!0);break;case 7:this.onLanguageConfigurationChanged(r)&&(t=!0);break;case 8:this.onLineMappingChanged(r)&&(t=!0);break;case 9:this.onLinesChanged(r)&&(t=!0);break;case 10:this.onLinesDeleted(r)&&(t=!0);break;case 11:this.onLinesInserted(r)&&(t=!0);break;case 12:this.onRevealRangeRequest(r)&&(t=!0);break;case 13:this.onScrollChanged(r)&&(t=!0);break;case 15:this.onTokensChanged(r)&&(t=!0);break;case 14:this.onThemeChanged(r)&&(t=!0);break;case 16:this.onTokensColorsChanged(r)&&(t=!0);break;case 17:this.onZonesChanged(r)&&(t=!0);break;default:console.info("View received unknown event: "),console.info(r)}}t&&(this._shouldRender=!0)}}class cl extends nT{constructor(e){super(),this._context=e,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}}class $u{static write(e,t){e.setAttribute("data-mprt",String(t))}static read(e){const t=e.getAttribute("data-mprt");return t===null?0:parseInt(t,10)}static collect(e,t){const i=[];let s=0;for(;e&&e!==e.ownerDocument.body&&e!==t;)e.nodeType===e.ELEMENT_NODE&&(i[s++]=this.read(e)),e=e.parentElement;const r=new Uint8Array(s);for(let o=0;o<s;o++)r[o]=i[s-o-1];return r}}class Dlt{constructor(e,t){this._restrictedRenderingContextBrand=void 0,this._viewLayout=e,this.viewportData=t,this.scrollWidth=this._viewLayout.getScrollWidth(),this.scrollHeight=this._viewLayout.getScrollHeight(),this.visibleRange=this.viewportData.visibleRange,this.bigNumbersDelta=this.viewportData.bigNumbersDelta;const i=this._viewLayout.getCurrentViewport();this.scrollTop=i.top,this.scrollLeft=i.left,this.viewportWidth=i.width,this.viewportHeight=i.height}getScrolledTopFromAbsoluteTop(e){return e-this.scrollTop}getVerticalOffsetForLineNumber(e,t){return this._viewLayout.getVerticalOffsetForLineNumber(e,t)}getVerticalOffsetAfterLineNumber(e,t){return this._viewLayout.getVerticalOffsetAfterLineNumber(e,t)}getDecorationsInViewport(){return this.viewportData.getDecorationsInViewport()}}class Nlt extends Dlt{constructor(e,t,i){super(e,t),this._renderingContextBrand=void 0,this._viewLines=i}linesVisibleRangesForRange(e,t){return this._viewLines.linesVisibleRangesForRange(e,t)}visibleRangeForPosition(e){return this._viewLines.visibleRangeForPosition(e)}}class Tlt{constructor(e,t,i,s){this.outsideRenderedLine=e,this.lineNumber=t,this.ranges=i,this.continuesOnNextLine=s}}class BB{static from(e){const t=new Array(e.length);for(let i=0,s=e.length;i<s;i++){const r=e[i];t[i]=new BB(r.left,r.width)}return t}constructor(e,t){this._horizontalRangeBrand=void 0,this.left=Math.round(e),this.width=Math.round(t)}toString(){return`[${this.left},${this.width}]`}}class Zb{constructor(e,t){this._floatHorizontalRangeBrand=void 0,this.left=e,this.width=t}toString(){return`[${this.left},${this.width}]`}static compare(e,t){return e.left-t.left}}class Rlt{constructor(e,t){this.outsideRenderedLine=e,this.originalLeft=t,this.left=Math.round(this.originalLeft)}}class Gce{constructor(e,t){this.outsideRenderedLine=e,this.ranges=t}}class W2{static _createRange(){return this._handyReadyRange||(this._handyReadyRange=document.createRange()),this._handyReadyRange}static _detachRange(e,t){e.selectNodeContents(t)}static _readClientRects(e,t,i,s,r){const o=this._createRange();try{return o.setStart(e,t),o.setEnd(i,s),o.getClientRects()}catch{return null}finally{this._detachRange(o,r)}}static _mergeAdjacentRanges(e){if(e.length===1)return e;e.sort(Zb.compare);const t=[];let i=0,s=e[0];for(let r=1,o=e.length;r<o;r++){const a=e[r];s.left+s.width+.9>=a.left?s.width=Math.max(s.width,a.left+a.width-s.left):(t[i++]=s,s=a)}return t[i++]=s,t}static _createHorizontalRangesFromClientRects(e,t,i){if(!e||e.length===0)return null;const s=[];for(let r=0,o=e.length;r<o;r++){const a=e[r];s[r]=new Zb(Math.max(0,(a.left-t)/i),a.width/i)}return this._mergeAdjacentRanges(s)}static readHorizontalRanges(e,t,i,s,r,o){const l=e.children.length-1;if(0>l)return null;if(t=Math.min(l,Math.max(0,t)),s=Math.min(l,Math.max(0,s)),t===s&&i===r&&i===0&&!e.children[t].firstChild){const h=e.children[t].getClientRects();return o.markDidDomLayout(),this._createHorizontalRangesFromClientRects(h,o.clientRectDeltaLeft,o.clientRectScale)}t!==s&&s>0&&r===0&&(s--,r=1073741824);let c=e.children[t].firstChild,d=e.children[s].firstChild;if((!c||!d)&&(!c&&i===0&&t>0&&(c=e.children[t-1].firstChild,i=1073741824),!d&&r===0&&s>0&&(d=e.children[s-1].firstChild,r=1073741824)),!c||!d)return null;i=Math.min(c.textContent.length,Math.max(0,i)),r=Math.min(d.textContent.length,Math.max(0,r));const u=this._readClientRects(c,i,d,r,o.endNode);return o.markDidDomLayout(),this._createHorizontalRangesFromClientRects(u,o.clientRectDeltaLeft,o.clientRectScale)}}const Alt=function(){return Eu?!0:!(Po||Tc||Yg)}();let Fy=!0;class Yce{constructor(e,t){this.themeType=t;const i=e.options,s=i.get(50);i.get(38)==="off"?this.renderWhitespace=i.get(100):this.renderWhitespace="none",this.renderControlCharacters=i.get(95),this.spaceWidth=s.spaceWidth,this.middotWidth=s.middotWidth,this.wsmiddotWidth=s.wsmiddotWidth,this.useMonospaceOptimizations=s.isMonospace&&!i.get(33),this.canUseHalfwidthRightwardsArrow=s.canUseHalfwidthRightwardsArrow,this.lineHeight=i.get(67),this.stopRenderingLineAfter=i.get(118),this.fontLigatures=i.get(51)}equals(e){return this.themeType===e.themeType&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.fontLigatures===e.fontLigatures}}const F4=class F4{constructor(e){this._options=e,this._isMaybeInvalid=!0,this._renderedViewLine=null}getDomNode(){return this._renderedViewLine&&this._renderedViewLine.domNode?this._renderedViewLine.domNode.domNode:null}setDomNode(e){if(this._renderedViewLine)this._renderedViewLine.domNode=ui(e);else throw new Error("I have no rendered view line to set the dom node to...")}onContentChanged(){this._isMaybeInvalid=!0}onTokensChanged(){this._isMaybeInvalid=!0}onDecorationsChanged(){this._isMaybeInvalid=!0}onOptionsChanged(e){this._isMaybeInvalid=!0,this._options=e}onSelectionChanged(){return Tu(this._options.themeType)||this._options.renderWhitespace==="selection"?(this._isMaybeInvalid=!0,!0):!1}renderLine(e,t,i,s,r){if(this._isMaybeInvalid===!1)return!1;this._isMaybeInvalid=!1;const o=s.getViewLineRenderingData(e),a=this._options,l=ko.filter(o.inlineDecorations,e,o.minColumn,o.maxColumn);let c=null;if(Tu(a.themeType)||this._options.renderWhitespace==="selection"){const f=s.selections;for(const g of f){if(g.endLineNumber<e||g.startLineNumber>e)continue;const p=g.startLineNumber===e?g.startColumn:o.minColumn,_=g.endLineNumber===e?g.endColumn:o.maxColumn;p<_&&(Tu(a.themeType)&&l.push(new ko(p,_,"inline-selected-text",0)),this._options.renderWhitespace==="selection"&&(c||(c=[]),c.push(new CSe(p-1,_-1))))}}const d=new av(a.useMonospaceOptimizations,a.canUseHalfwidthRightwardsArrow,o.content,o.continuesWithWrappedLine,o.isBasicASCII,o.containsRTL,o.minColumn-1,o.tokens,l,o.tabSize,o.startVisibleColumn,a.spaceWidth,a.middotWidth,a.wsmiddotWidth,a.stopRenderingLineAfter,a.renderWhitespace,a.renderControlCharacters,a.fontLigatures!==k_.OFF,c);if(this._renderedViewLine&&this._renderedViewLine.input.equals(d))return!1;r.appendString('<div style="top:'),r.appendString(String(t)),r.appendString("px;height:"),r.appendString(String(i)),r.appendString('px;" class="'),r.appendString(F4.CLASS_NAME),r.appendString('">');const u=iT(d,r);r.appendString("</div>");let h=null;return Fy&&Alt&&o.isBasicASCII&&a.useMonospaceOptimizations&&u.containsForeignElements===0&&(h=new hA(this._renderedViewLine?this._renderedViewLine.domNode:null,d,u.characterMapping)),h||(h=NSe(this._renderedViewLine?this._renderedViewLine.domNode:null,d,u.characterMapping,u.containsRTL,u.containsForeignElements)),this._renderedViewLine=h,!0}layoutLine(e,t,i){this._renderedViewLine&&this._renderedViewLine.domNode&&(this._renderedViewLine.domNode.setTop(t),this._renderedViewLine.domNode.setHeight(i))}getWidth(e){return this._renderedViewLine?this._renderedViewLine.getWidth(e):0}getWidthIsFast(){return this._renderedViewLine?this._renderedViewLine.getWidthIsFast():!0}needsMonospaceFontCheck(){return this._renderedViewLine?this._renderedViewLine instanceof hA:!1}monospaceAssumptionsAreValid(){return this._renderedViewLine&&this._renderedViewLine instanceof hA?this._renderedViewLine.monospaceAssumptionsAreValid():Fy}onMonospaceAssumptionsInvalidated(){this._renderedViewLine&&this._renderedViewLine instanceof hA&&(this._renderedViewLine=this._renderedViewLine.toSlowRenderedLine())}getVisibleRangesForRange(e,t,i,s){if(!this._renderedViewLine)return null;t=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,t)),i=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,i));const r=this._renderedViewLine.input.stopRenderingLineAfter;if(r!==-1&&t>r+1&&i>r+1)return new Gce(!0,[new Zb(this.getWidth(s),0)]);r!==-1&&t>r+1&&(t=r+1),r!==-1&&i>r+1&&(i=r+1);const o=this._renderedViewLine.getVisibleRangesForRange(e,t,i,s);return o&&o.length>0?new Gce(!1,o):null}getColumnOfNodeOffset(e,t){return this._renderedViewLine?this._renderedViewLine.getColumnOfNodeOffset(e,t):1}};F4.CLASS_NAME="view-line";let ug=F4;class hA{constructor(e,t,i){this._cachedWidth=-1,this.domNode=e,this.input=t;const s=Math.floor(t.lineContent.length/300);if(s>0){this._keyColumnPixelOffsetCache=new Float32Array(s);for(let r=0;r<s;r++)this._keyColumnPixelOffsetCache[r]=-1}else this._keyColumnPixelOffsetCache=null;this._characterMapping=i,this._charWidth=t.spaceWidth}getWidth(e){if(!this.domNode||this.input.lineContent.length<300){const t=this._characterMapping.getHorizontalOffset(this._characterMapping.length);return Math.round(this._charWidth*t)}return this._cachedWidth===-1&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth,e==null||e.markDidDomLayout()),this._cachedWidth}getWidthIsFast(){return this.input.lineContent.length<300||this._cachedWidth!==-1}monospaceAssumptionsAreValid(){if(!this.domNode)return Fy;if(this.input.lineContent.length<300){const e=this.getWidth(null),t=this.domNode.domNode.firstChild.offsetWidth;Math.abs(e-t)>=2&&(console.warn("monospace assumptions have been violated, therefore disabling monospace optimizations!"),Fy=!1)}return Fy}toSlowRenderedLine(){return NSe(this.domNode,this.input,this._characterMapping,!1,0)}getVisibleRangesForRange(e,t,i,s){const r=this._getColumnPixelOffset(e,t,s),o=this._getColumnPixelOffset(e,i,s);return[new Zb(r,o-r)]}_getColumnPixelOffset(e,t,i){if(t<=300){const c=this._characterMapping.getHorizontalOffset(t);return this._charWidth*c}const s=Math.floor((t-1)/300)-1,r=(s+1)*300+1;let o=-1;if(this._keyColumnPixelOffsetCache&&(o=this._keyColumnPixelOffsetCache[s],o===-1&&(o=this._actualReadPixelOffset(e,r,i),this._keyColumnPixelOffsetCache[s]=o)),o===-1){const c=this._characterMapping.getHorizontalOffset(t);return this._charWidth*c}const a=this._characterMapping.getHorizontalOffset(r),l=this._characterMapping.getHorizontalOffset(t);return o+this._charWidth*(l-a)}_getReadingTarget(e){return e.domNode.firstChild}_actualReadPixelOffset(e,t,i){if(!this.domNode)return-1;const s=this._characterMapping.getDomPosition(t),r=W2.readHorizontalRanges(this._getReadingTarget(this.domNode),s.partIndex,s.charIndex,s.partIndex,s.charIndex,i);return!r||r.length===0?-1:r[0].left}getColumnOfNodeOffset(e,t){return YQ(this._characterMapping,e,t)}}class DSe{constructor(e,t,i,s,r){if(this.domNode=e,this.input=t,this._characterMapping=i,this._isWhitespaceOnly=/^\s*$/.test(t.lineContent),this._containsForeignElements=r,this._cachedWidth=-1,this._pixelOffsetCache=null,!s||this._characterMapping.length===0){this._pixelOffsetCache=new Float32Array(Math.max(2,this._characterMapping.length+1));for(let o=0,a=this._characterMapping.length;o<=a;o++)this._pixelOffsetCache[o]=-1}}_getReadingTarget(e){return e.domNode.firstChild}getWidth(e){return this.domNode?(this._cachedWidth===-1&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth,e==null||e.markDidDomLayout()),this._cachedWidth):0}getWidthIsFast(){return this._cachedWidth!==-1}getVisibleRangesForRange(e,t,i,s){if(!this.domNode)return null;if(this._pixelOffsetCache!==null){const r=this._readPixelOffset(this.domNode,e,t,s);if(r===-1)return null;const o=this._readPixelOffset(this.domNode,e,i,s);return o===-1?null:[new Zb(r,o-r)]}return this._readVisibleRangesForRange(this.domNode,e,t,i,s)}_readVisibleRangesForRange(e,t,i,s,r){if(i===s){const o=this._readPixelOffset(e,t,i,r);return o===-1?null:[new Zb(o,0)]}else return this._readRawVisibleRangesForRange(e,i,s,r)}_readPixelOffset(e,t,i,s){if(this._characterMapping.length===0){if(this._containsForeignElements===0||this._containsForeignElements===2)return 0;if(this._containsForeignElements===1)return this.getWidth(s);const r=this._getReadingTarget(e);return r.firstChild?(s.markDidDomLayout(),r.firstChild.offsetWidth):0}if(this._pixelOffsetCache!==null){const r=this._pixelOffsetCache[i];if(r!==-1)return r;const o=this._actualReadPixelOffset(e,t,i,s);return this._pixelOffsetCache[i]=o,o}return this._actualReadPixelOffset(e,t,i,s)}_actualReadPixelOffset(e,t,i,s){if(this._characterMapping.length===0){const l=W2.readHorizontalRanges(this._getReadingTarget(e),0,0,0,0,s);return!l||l.length===0?-1:l[0].left}if(i===this._characterMapping.length&&this._isWhitespaceOnly&&this._containsForeignElements===0)return this.getWidth(s);const r=this._characterMapping.getDomPosition(i),o=W2.readHorizontalRanges(this._getReadingTarget(e),r.partIndex,r.charIndex,r.partIndex,r.charIndex,s);if(!o||o.length===0)return-1;const a=o[0].left;if(this.input.isBasicASCII){const l=this._characterMapping.getHorizontalOffset(i),c=Math.round(this.input.spaceWidth*l);if(Math.abs(c-a)<=1)return c}return a}_readRawVisibleRangesForRange(e,t,i,s){if(t===1&&i===this._characterMapping.length)return[new Zb(0,this.getWidth(s))];const r=this._characterMapping.getDomPosition(t),o=this._characterMapping.getDomPosition(i);return W2.readHorizontalRanges(this._getReadingTarget(e),r.partIndex,r.charIndex,o.partIndex,o.charIndex,s)}getColumnOfNodeOffset(e,t){return YQ(this._characterMapping,e,t)}}class Mlt extends DSe{_readVisibleRangesForRange(e,t,i,s,r){const o=super._readVisibleRangesForRange(e,t,i,s,r);if(!o||o.length===0||i===s||i===1&&s===this._characterMapping.length)return o;if(!this.input.containsRTL){const a=this._readPixelOffset(e,t,s,r);if(a!==-1){const l=o[o.length-1];l.left<a&&(l.width=a-l.left)}}return o}}const NSe=function(){return Vb?Plt:Olt}();function Plt(n,e,t,i,s){return new Mlt(n,e,t,i,s)}function Olt(n,e,t,i,s){return new DSe(n,e,t,i,s)}function YQ(n,e,t){const i=e.textContent.length;let s=-1;for(;e;)e=e.previousSibling,s++;return n.getColumn(new ySe(s,t),i)}class CD{static whitespaceVisibleColumn(e,t,i){const s=e.length;let r=0,o=-1,a=-1;for(let l=0;l<s;l++){if(l===t)return[o,a,r];switch(r%i===0&&(o=l,a=r),e.charCodeAt(l)){case 32:r+=1;break;case 9:r=ms.nextRenderTabStop(r,i);break;default:return[-1,-1,-1]}}return t===s?[o,a,r]:[-1,-1,-1]}static atomicPosition(e,t,i,s){const r=e.length,[o,a,l]=CD.whitespaceVisibleColumn(e,t,i);if(l===-1)return-1;let c;switch(s){case 0:c=!0;break;case 1:c=!1;break;case 2:if(l%i===0)return t;c=l%i<=i/2;break}if(c){if(o===-1)return-1;let h=a;for(let f=o;f<r;++f){if(h===a+i)return o;switch(e.charCodeAt(f)){case 32:h+=1;break;case 9:h=ms.nextRenderTabStop(h,i);break;default:return-1}}return h===a+i?o:-1}const d=ms.nextRenderTabStop(l,i);let u=l;for(let h=t;h<r;h++){if(u===d)return h;switch(e.charCodeAt(h)){case 32:u+=1;break;case 9:u=ms.nextRenderTabStop(u,i);break;default:return-1}}return u===d?r:-1}}class Hp{constructor(e=null){this.hitTarget=e,this.type=0}}class TSe{get hitTarget(){return this.spanNode}constructor(e,t,i){this.position=e,this.spanNode=t,this.injectedText=i,this.type=1}}var cb;(function(n){function e(t,i,s){const r=t.getPositionFromDOMInfo(i,s);return r?new TSe(r,i,null):new Hp(i)}n.createFromDOMInfo=e})(cb||(cb={}));class Flt{constructor(e,t){this.lastViewCursorsRenderData=e,this.lastTextareaPosition=t}}class Jr{static _deduceRage(e,t=null){return!t&&e?new M(e.lineNumber,e.column,e.lineNumber,e.column):t??null}static createUnknown(e,t,i){return{type:0,element:e,mouseColumn:t,position:i,range:this._deduceRage(i)}}static createTextarea(e,t){return{type:1,element:e,mouseColumn:t,position:null,range:null}}static createMargin(e,t,i,s,r,o){return{type:e,element:t,mouseColumn:i,position:s,range:r,detail:o}}static createViewZone(e,t,i,s,r){return{type:e,element:t,mouseColumn:i,position:s,range:this._deduceRage(s),detail:r}}static createContentText(e,t,i,s,r){return{type:6,element:e,mouseColumn:t,position:i,range:this._deduceRage(i,s),detail:r}}static createContentEmpty(e,t,i,s){return{type:7,element:e,mouseColumn:t,position:i,range:this._deduceRage(i),detail:s}}static createContentWidget(e,t,i){return{type:9,element:e,mouseColumn:t,position:null,range:null,detail:i}}static createScrollbar(e,t,i){return{type:11,element:e,mouseColumn:t,position:i,range:this._deduceRage(i)}}static createOverlayWidget(e,t,i){return{type:12,element:e,mouseColumn:t,position:null,range:null,detail:i}}static createOutsideEditor(e,t,i,s){return{type:13,element:null,mouseColumn:e,position:t,range:this._deduceRage(t),outsidePosition:i,outsideDistance:s}}static _typeToString(e){return e===1?"TEXTAREA":e===2?"GUTTER_GLYPH_MARGIN":e===3?"GUTTER_LINE_NUMBERS":e===4?"GUTTER_LINE_DECORATIONS":e===5?"GUTTER_VIEW_ZONE":e===6?"CONTENT_TEXT":e===7?"CONTENT_EMPTY":e===8?"CONTENT_VIEW_ZONE":e===9?"CONTENT_WIDGET":e===10?"OVERVIEW_RULER":e===11?"SCROLLBAR":e===12?"OVERLAY_WIDGET":"UNKNOWN"}static toString(e){return this._typeToString(e.type)+": "+e.position+" - "+e.range+" - "+JSON.stringify(e.detail)}}class _o{static isTextArea(e){return e.length===2&&e[0]===3&&e[1]===7}static isChildOfViewLines(e){return e.length>=4&&e[0]===3&&e[3]===8}static isStrictChildOfViewLines(e){return e.length>4&&e[0]===3&&e[3]===8}static isChildOfScrollableElement(e){return e.length>=2&&e[0]===3&&e[1]===6}static isChildOfMinimap(e){return e.length>=2&&e[0]===3&&e[1]===9}static isChildOfContentWidgets(e){return e.length>=4&&e[0]===3&&e[3]===1}static isChildOfOverflowGuard(e){return e.length>=1&&e[0]===3}static isChildOfOverflowingContentWidgets(e){return e.length>=1&&e[0]===2}static isChildOfOverlayWidgets(e){return e.length>=2&&e[0]===3&&e[1]===4}static isChildOfOverflowingOverlayWidgets(e){return e.length>=1&&e[0]===5}}class ZS{constructor(e,t,i){this.viewModel=e.viewModel;const s=e.configuration.options;this.layoutInfo=s.get(146),this.viewDomNode=t.viewDomNode,this.lineHeight=s.get(67),this.stickyTabStops=s.get(117),this.typicalHalfwidthCharacterWidth=s.get(50).typicalHalfwidthCharacterWidth,this.lastRenderData=i,this._context=e,this._viewHelper=t}getZoneAtCoord(e){return ZS.getZoneAtCoord(this._context,e)}static getZoneAtCoord(e,t){const i=e.viewLayout.getWhitespaceAtVerticalOffset(t);if(i){const s=i.verticalOffset+i.height/2,r=e.viewModel.getLineCount();let o=null,a,l=null;return i.afterLineNumber!==r&&(l=new Y(i.afterLineNumber+1,1)),i.afterLineNumber>0&&(o=new Y(i.afterLineNumber,e.viewModel.getLineMaxColumn(i.afterLineNumber))),l===null?a=o:o===null?a=l:t<s?a=o:a=l,{viewZoneId:i.id,afterLineNumber:i.afterLineNumber,positionBefore:o,positionAfter:l,position:a}}return null}getFullLineRangeAtCoord(e){if(this._context.viewLayout.isAfterLines(e)){const s=this._context.viewModel.getLineCount(),r=this._context.viewModel.getLineMaxColumn(s);return{range:new M(s,r,s,r),isAfterLines:!0}}const t=this._context.viewLayout.getLineNumberAtVerticalOffset(e),i=this._context.viewModel.getLineMaxColumn(t);return{range:new M(t,1,t,i),isAfterLines:!1}}getLineNumberAtVerticalOffset(e){return this._context.viewLayout.getLineNumberAtVerticalOffset(e)}isAfterLines(e){return this._context.viewLayout.isAfterLines(e)}isInTopPadding(e){return this._context.viewLayout.isInTopPadding(e)}isInBottomPadding(e){return this._context.viewLayout.isInBottomPadding(e)}getVerticalOffsetForLineNumber(e){return this._context.viewLayout.getVerticalOffsetForLineNumber(e)}findAttribute(e,t){return ZS._findAttribute(e,t,this._viewHelper.viewDomNode)}static _findAttribute(e,t,i){for(;e&&e!==e.ownerDocument.body;){if(e.hasAttribute&&e.hasAttribute(t))return e.getAttribute(t);if(e===i)return null;e=e.parentNode}return null}getLineWidth(e){return this._viewHelper.getLineWidth(e)}visibleRangeForPosition(e,t){return this._viewHelper.visibleRangeForPosition(e,t)}getPositionFromDOMInfo(e,t){return this._viewHelper.getPositionFromDOMInfo(e,t)}getCurrentScrollTop(){return this._context.viewLayout.getCurrentScrollTop()}getCurrentScrollLeft(){return this._context.viewLayout.getCurrentScrollLeft()}}class Blt{constructor(e,t,i,s){this.editorPos=t,this.pos=i,this.relativePos=s,this.mouseVerticalOffset=Math.max(0,e.getCurrentScrollTop()+this.relativePos.y),this.mouseContentHorizontalOffset=e.getCurrentScrollLeft()+this.relativePos.x-e.layoutInfo.contentLeft,this.isInMarginArea=this.relativePos.x<e.layoutInfo.contentLeft&&this.relativePos.x>=e.layoutInfo.glyphMarginLeft,this.isInContentArea=!this.isInMarginArea,this.mouseColumn=Math.max(0,Qr._getMouseColumn(this.mouseContentHorizontalOffset,e.typicalHalfwidthCharacterWidth))}}class Wlt extends Blt{get target(){return this._useHitTestTarget?this.hitTestResult.value.hitTarget:this._eventTarget}get targetPath(){return this._targetPathCacheElement!==this.target&&(this._targetPathCacheElement=this.target,this._targetPathCacheValue=$u.collect(this.target,this._ctx.viewDomNode)),this._targetPathCacheValue}constructor(e,t,i,s,r){super(e,t,i,s),this.hitTestResult=new Wu(()=>Qr.doHitTest(this._ctx,this)),this._targetPathCacheElement=null,this._targetPathCacheValue=new Uint8Array(0),this._ctx=e,this._eventTarget=r;const o=!!this._eventTarget;this._useHitTestTarget=!o}toString(){return`pos(${this.pos.x},${this.pos.y}), editorPos(${this.editorPos.x},${this.editorPos.y}), relativePos(${this.relativePos.x},${this.relativePos.y}), mouseVerticalOffset: ${this.mouseVerticalOffset}, mouseContentHorizontalOffset: ${this.mouseContentHorizontalOffset}
	target: ${this.target?this.target.outerHTML:null}`}get wouldBenefitFromHitTestTargetSwitch(){return!this._useHitTestTarget&&this.hitTestResult.value.hitTarget!==null&&this.target!==this.hitTestResult.value.hitTarget}switchToHitTestTarget(){this._useHitTestTarget=!0}_getMouseColumn(e=null){return e&&e.column<this._ctx.viewModel.getLineMaxColumn(e.lineNumber)?ms.visibleColumnFromColumn(this._ctx.viewModel.getLineContent(e.lineNumber),e.column,this._ctx.viewModel.model.getOptions().tabSize)+1:this.mouseColumn}fulfillUnknown(e=null){return Jr.createUnknown(this.target,this._getMouseColumn(e),e)}fulfillTextarea(){return Jr.createTextarea(this.target,this._getMouseColumn())}fulfillMargin(e,t,i,s){return Jr.createMargin(e,this.target,this._getMouseColumn(t),t,i,s)}fulfillViewZone(e,t,i){return Jr.createViewZone(e,this.target,this._getMouseColumn(t),t,i)}fulfillContentText(e,t,i){return Jr.createContentText(this.target,this._getMouseColumn(e),e,t,i)}fulfillContentEmpty(e,t){return Jr.createContentEmpty(this.target,this._getMouseColumn(e),e,t)}fulfillContentWidget(e){return Jr.createContentWidget(this.target,this._getMouseColumn(),e)}fulfillScrollbar(e){return Jr.createScrollbar(this.target,this._getMouseColumn(e),e)}fulfillOverlayWidget(e){return Jr.createOverlayWidget(this.target,this._getMouseColumn(),e)}}const Zce={isAfterLines:!0};function z8(n){return{isAfterLines:!1,horizontalDistanceToText:n}}class Qr{constructor(e,t){this._context=e,this._viewHelper=t}mouseTargetIsWidget(e){const t=e.target,i=$u.collect(t,this._viewHelper.viewDomNode);return!!(_o.isChildOfContentWidgets(i)||_o.isChildOfOverflowingContentWidgets(i)||_o.isChildOfOverlayWidgets(i)||_o.isChildOfOverflowingOverlayWidgets(i))}createMouseTarget(e,t,i,s,r){const o=new ZS(this._context,this._viewHelper,e),a=new Wlt(o,t,i,s,r);try{const l=Qr._createMouseTarget(o,a);if(l.type===6&&o.stickyTabStops&&l.position!==null){const c=Qr._snapToSoftTabBoundary(l.position,o.viewModel),d=M.fromPositions(c,c).plusRange(l.range);return a.fulfillContentText(c,d,l.detail)}return l}catch{return a.fulfillUnknown()}}static _createMouseTarget(e,t){if(t.target===null)return t.fulfillUnknown();const i=t;let s=null;return!_o.isChildOfOverflowGuard(t.targetPath)&&!_o.isChildOfOverflowingContentWidgets(t.targetPath)&&!_o.isChildOfOverflowingOverlayWidgets(t.targetPath)&&(s=s||t.fulfillUnknown()),s=s||Qr._hitTestContentWidget(e,i),s=s||Qr._hitTestOverlayWidget(e,i),s=s||Qr._hitTestMinimap(e,i),s=s||Qr._hitTestScrollbarSlider(e,i),s=s||Qr._hitTestViewZone(e,i),s=s||Qr._hitTestMargin(e,i),s=s||Qr._hitTestViewCursor(e,i),s=s||Qr._hitTestTextArea(e,i),s=s||Qr._hitTestViewLines(e,i),s=s||Qr._hitTestScrollbar(e,i),s||t.fulfillUnknown()}static _hitTestContentWidget(e,t){if(_o.isChildOfContentWidgets(t.targetPath)||_o.isChildOfOverflowingContentWidgets(t.targetPath)){const i=e.findAttribute(t.target,"widgetId");return i?t.fulfillContentWidget(i):t.fulfillUnknown()}return null}static _hitTestOverlayWidget(e,t){if(_o.isChildOfOverlayWidgets(t.targetPath)||_o.isChildOfOverflowingOverlayWidgets(t.targetPath)){const i=e.findAttribute(t.target,"widgetId");return i?t.fulfillOverlayWidget(i):t.fulfillUnknown()}return null}static _hitTestViewCursor(e,t){if(t.target){const i=e.lastRenderData.lastViewCursorsRenderData;for(const s of i)if(t.target===s.domNode)return t.fulfillContentText(s.position,null,{mightBeForeignElement:!1,injectedText:null})}if(t.isInContentArea){const i=e.lastRenderData.lastViewCursorsRenderData,s=t.mouseContentHorizontalOffset,r=t.mouseVerticalOffset;for(const o of i){if(s<o.contentLeft||s>o.contentLeft+o.width)continue;const a=e.getVerticalOffsetForLineNumber(o.position.lineNumber);if(a<=r&&r<=a+o.height)return t.fulfillContentText(o.position,null,{mightBeForeignElement:!1,injectedText:null})}}return null}static _hitTestViewZone(e,t){const i=e.getZoneAtCoord(t.mouseVerticalOffset);if(i){const s=t.isInContentArea?8:5;return t.fulfillViewZone(s,i.position,i)}return null}static _hitTestTextArea(e,t){return _o.isTextArea(t.targetPath)?e.lastRenderData.lastTextareaPosition?t.fulfillContentText(e.lastRenderData.lastTextareaPosition,null,{mightBeForeignElement:!1,injectedText:null}):t.fulfillTextarea():null}static _hitTestMargin(e,t){if(t.isInMarginArea){const i=e.getFullLineRangeAtCoord(t.mouseVerticalOffset),s=i.range.getStartPosition();let r=Math.abs(t.relativePos.x);const o={isAfterLines:i.isAfterLines,glyphMarginLeft:e.layoutInfo.glyphMarginLeft,glyphMarginWidth:e.layoutInfo.glyphMarginWidth,lineNumbersWidth:e.layoutInfo.lineNumbersWidth,offsetX:r};if(r-=e.layoutInfo.glyphMarginLeft,r<=e.layoutInfo.glyphMarginWidth){const a=e.viewModel.coordinatesConverter.convertViewPositionToModelPosition(i.range.getStartPosition()),l=e.viewModel.glyphLanes.getLanesAtLine(a.lineNumber);return o.glyphMarginLane=l[Math.floor(r/e.lineHeight)],t.fulfillMargin(2,s,i.range,o)}return r-=e.layoutInfo.glyphMarginWidth,r<=e.layoutInfo.lineNumbersWidth?t.fulfillMargin(3,s,i.range,o):(r-=e.layoutInfo.lineNumbersWidth,t.fulfillMargin(4,s,i.range,o))}return null}static _hitTestViewLines(e,t){if(!_o.isChildOfViewLines(t.targetPath))return null;if(e.isInTopPadding(t.mouseVerticalOffset))return t.fulfillContentEmpty(new Y(1,1),Zce);if(e.isAfterLines(t.mouseVerticalOffset)||e.isInBottomPadding(t.mouseVerticalOffset)){const s=e.viewModel.getLineCount(),r=e.viewModel.getLineMaxColumn(s);return t.fulfillContentEmpty(new Y(s,r),Zce)}if(_o.isStrictChildOfViewLines(t.targetPath)){const s=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset);if(e.viewModel.getLineLength(s)===0){const o=e.getLineWidth(s),a=z8(t.mouseContentHorizontalOffset-o);return t.fulfillContentEmpty(new Y(s,1),a)}const r=e.getLineWidth(s);if(t.mouseContentHorizontalOffset>=r){const o=z8(t.mouseContentHorizontalOffset-r),a=new Y(s,e.viewModel.getLineMaxColumn(s));return t.fulfillContentEmpty(a,o)}}const i=t.hitTestResult.value;return i.type===1?Qr.createMouseTargetFromHitTestPosition(e,t,i.spanNode,i.position,i.injectedText):t.wouldBenefitFromHitTestTargetSwitch?(t.switchToHitTestTarget(),this._createMouseTarget(e,t)):t.fulfillUnknown()}static _hitTestMinimap(e,t){if(_o.isChildOfMinimap(t.targetPath)){const i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),s=e.viewModel.getLineMaxColumn(i);return t.fulfillScrollbar(new Y(i,s))}return null}static _hitTestScrollbarSlider(e,t){if(_o.isChildOfScrollableElement(t.targetPath)&&t.target&&t.target.nodeType===1){const i=t.target.className;if(i&&/\b(slider|scrollbar)\b/.test(i)){const s=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),r=e.viewModel.getLineMaxColumn(s);return t.fulfillScrollbar(new Y(s,r))}}return null}static _hitTestScrollbar(e,t){if(_o.isChildOfScrollableElement(t.targetPath)){const i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),s=e.viewModel.getLineMaxColumn(i);return t.fulfillScrollbar(new Y(i,s))}return null}getMouseColumn(e){const t=this._context.configuration.options,i=t.get(146),s=this._context.viewLayout.getCurrentScrollLeft()+e.x-i.contentLeft;return Qr._getMouseColumn(s,t.get(50).typicalHalfwidthCharacterWidth)}static _getMouseColumn(e,t){return e<0?1:Math.round(e/t)+1}static createMouseTargetFromHitTestPosition(e,t,i,s,r){const o=s.lineNumber,a=s.column,l=e.getLineWidth(o);if(t.mouseContentHorizontalOffset>l){const w=z8(t.mouseContentHorizontalOffset-l);return t.fulfillContentEmpty(s,w)}const c=e.visibleRangeForPosition(o,a);if(!c)return t.fulfillUnknown(s);const d=c.left;if(Math.abs(t.mouseContentHorizontalOffset-d)<1)return t.fulfillContentText(s,null,{mightBeForeignElement:!!r,injectedText:r});const u=[];if(u.push({offset:c.left,column:a}),a>1){const w=e.visibleRangeForPosition(o,a-1);w&&u.push({offset:w.left,column:a-1})}const h=e.viewModel.getLineMaxColumn(o);if(a<h){const w=e.visibleRangeForPosition(o,a+1);w&&u.push({offset:w.left,column:a+1})}u.sort((w,b)=>w.offset-b.offset);const f=t.pos.toClientCoordinates(nt(e.viewDomNode)),g=i.getBoundingClientRect(),p=g.left<=f.clientX&&f.clientX<=g.right;let _=null;for(let w=1;w<u.length;w++){const b=u[w-1],y=u[w];if(b.offset<=t.mouseContentHorizontalOffset&&t.mouseContentHorizontalOffset<=y.offset){_=new M(o,b.column,o,y.column);const S=Math.abs(b.offset-t.mouseContentHorizontalOffset),x=Math.abs(y.offset-t.mouseContentHorizontalOffset);s=S<x?new Y(o,b.column):new Y(o,y.column);break}}return t.fulfillContentText(s,_,{mightBeForeignElement:!p||!!r,injectedText:r})}static _doHitTestWithCaretRangeFromPoint(e,t){const i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),s=e.getVerticalOffsetForLineNumber(i),r=s+e.lineHeight;if(!(i===e.viewModel.getLineCount()&&t.mouseVerticalOffset>r)){const a=Math.floor((s+r)/2);let l=t.pos.y+(a-t.mouseVerticalOffset);l<=t.editorPos.y&&(l=t.editorPos.y+1),l>=t.editorPos.y+t.editorPos.height&&(l=t.editorPos.y+t.editorPos.height-1);const c=new FB(t.pos.x,l),d=this._actualDoHitTestWithCaretRangeFromPoint(e,c.toClientCoordinates(nt(e.viewDomNode)));if(d.type===1)return d}return this._actualDoHitTestWithCaretRangeFromPoint(e,t.pos.toClientCoordinates(nt(e.viewDomNode)))}static _actualDoHitTestWithCaretRangeFromPoint(e,t){const i=d0(e.viewDomNode);let s;if(i?typeof i.caretRangeFromPoint>"u"?s=Hlt(i,t.clientX,t.clientY):s=i.caretRangeFromPoint(t.clientX,t.clientY):s=e.viewDomNode.ownerDocument.caretRangeFromPoint(t.clientX,t.clientY),!s||!s.startContainer)return new Hp;const r=s.startContainer;if(r.nodeType===r.TEXT_NODE){const o=r.parentNode,a=o?o.parentNode:null,l=a?a.parentNode:null;return(l&&l.nodeType===l.ELEMENT_NODE?l.className:null)===ug.CLASS_NAME?cb.createFromDOMInfo(e,o,s.startOffset):new Hp(r.parentNode)}else if(r.nodeType===r.ELEMENT_NODE){const o=r.parentNode,a=o?o.parentNode:null;return(a&&a.nodeType===a.ELEMENT_NODE?a.className:null)===ug.CLASS_NAME?cb.createFromDOMInfo(e,r,r.textContent.length):new Hp(r)}return new Hp}static _doHitTestWithCaretPositionFromPoint(e,t){const i=e.viewDomNode.ownerDocument.caretPositionFromPoint(t.clientX,t.clientY);if(i.offsetNode.nodeType===i.offsetNode.TEXT_NODE){const s=i.offsetNode.parentNode,r=s?s.parentNode:null,o=r?r.parentNode:null;return(o&&o.nodeType===o.ELEMENT_NODE?o.className:null)===ug.CLASS_NAME?cb.createFromDOMInfo(e,i.offsetNode.parentNode,i.offset):new Hp(i.offsetNode.parentNode)}if(i.offsetNode.nodeType===i.offsetNode.ELEMENT_NODE){const s=i.offsetNode.parentNode,r=s&&s.nodeType===s.ELEMENT_NODE?s.className:null,o=s?s.parentNode:null,a=o&&o.nodeType===o.ELEMENT_NODE?o.className:null;if(r===ug.CLASS_NAME){const l=i.offsetNode.childNodes[Math.min(i.offset,i.offsetNode.childNodes.length-1)];if(l)return cb.createFromDOMInfo(e,l,0)}else if(a===ug.CLASS_NAME)return cb.createFromDOMInfo(e,i.offsetNode,0)}return new Hp(i.offsetNode)}static _snapToSoftTabBoundary(e,t){const i=t.getLineContent(e.lineNumber),{tabSize:s}=t.model.getOptions(),r=CD.atomicPosition(i,e.column-1,s,2);return r!==-1?new Y(e.lineNumber,r+1):e}static doHitTest(e,t){let i=new Hp;if(typeof e.viewDomNode.ownerDocument.caretRangeFromPoint=="function"?i=this._doHitTestWithCaretRangeFromPoint(e,t):e.viewDomNode.ownerDocument.caretPositionFromPoint&&(i=this._doHitTestWithCaretPositionFromPoint(e,t.pos.toClientCoordinates(nt(e.viewDomNode)))),i.type===1){const s=e.viewModel.getInjectedTextAt(i.position),r=e.viewModel.normalizePosition(i.position,2);(s||!r.equals(i.position))&&(i=new TSe(r,i.spanNode,s))}return i}}function Hlt(n,e,t){const i=document.createRange();let s=n.elementFromPoint(e,t);if(s!==null){for(;s&&s.firstChild&&s.firstChild.nodeType!==s.firstChild.TEXT_NODE&&s.lastChild&&s.lastChild.firstChild;)s=s.lastChild;const r=s.getBoundingClientRect(),o=nt(s),a=o.getComputedStyle(s,null).getPropertyValue("font-style"),l=o.getComputedStyle(s,null).getPropertyValue("font-variant"),c=o.getComputedStyle(s,null).getPropertyValue("font-weight"),d=o.getComputedStyle(s,null).getPropertyValue("font-size"),u=o.getComputedStyle(s,null).getPropertyValue("line-height"),h=o.getComputedStyle(s,null).getPropertyValue("font-family"),f=`${a} ${l} ${c} ${d}/${u} ${h}`,g=s.innerText;let p=r.left,_=0,w;if(e>r.left+r.width)_=g.length;else{const b=pj.getInstance();for(let y=0;y<g.length+1;y++){if(w=b.getCharWidth(g.charAt(y),f)/2,p+=w,e<p){_=y;break}p+=w}}i.setStart(s.firstChild,_),i.setEnd(s.firstChild,_)}return i}const mb=class mb{static getInstance(){return mb._INSTANCE||(mb._INSTANCE=new mb),mb._INSTANCE}constructor(){this._cache={},this._canvas=document.createElement("canvas")}getCharWidth(e,t){const i=e+t;if(this._cache[i])return this._cache[i];const s=this._canvas.getContext("2d");s.font=t;const o=s.measureText(e).width;return this._cache[i]=o,o}};mb._INSTANCE=null;let pj=mb;class ZQ extends nT{constructor(e,t,i){super(),this._mouseLeaveMonitor=null,this._context=e,this.viewController=t,this.viewHelper=i,this.mouseTargetFactory=new Qr(this._context,i),this._mouseDownOperation=this._register(new Vlt(this._context,this.viewController,this.viewHelper,this.mouseTargetFactory,(o,a)=>this._createMouseTarget(o,a),o=>this._getMouseColumn(o))),this.lastMouseLeaveTime=-1,this._height=this._context.configuration.options.get(146).height;const s=new xlt(this.viewHelper.viewDomNode);this._register(s.onContextMenu(this.viewHelper.viewDomNode,o=>this._onContextMenu(o,!0))),this._register(s.onMouseMove(this.viewHelper.viewDomNode,o=>{this._onMouseMove(o),this._mouseLeaveMonitor||(this._mouseLeaveMonitor=re(this.viewHelper.viewDomNode.ownerDocument,"mousemove",a=>{this.viewHelper.viewDomNode.contains(a.target)||this._onMouseLeave(new W_(a,!1,this.viewHelper.viewDomNode))}))})),this._register(s.onMouseUp(this.viewHelper.viewDomNode,o=>this._onMouseUp(o))),this._register(s.onMouseLeave(this.viewHelper.viewDomNode,o=>this._onMouseLeave(o)));let r=0;this._register(s.onPointerDown(this.viewHelper.viewDomNode,(o,a)=>{r=a})),this._register(re(this.viewHelper.viewDomNode,Se.POINTER_UP,o=>{this._mouseDownOperation.onPointerUp()})),this._register(s.onMouseDown(this.viewHelper.viewDomNode,o=>this._onMouseDown(o,r))),this._setupMouseWheelZoomListener(),this._context.addEventHandler(this)}_setupMouseWheelZoomListener(){const e=PP.INSTANCE;let t=0,i=vc.getZoomLevel(),s=!1,r=0;const o=l=>{if(this.viewController.emitMouseWheel(l),!this._context.configuration.options.get(76))return;const c=new c0(l);if(e.acceptStandardWheelEvent(c),e.isPhysicalMouseWheel()){if(a(l)){const d=vc.getZoomLevel(),u=c.deltaY>0?1:-1;vc.setZoomLevel(d+u),c.preventDefault(),c.stopPropagation()}}else Date.now()-t>50&&(i=vc.getZoomLevel(),s=a(l),r=0),t=Date.now(),r+=c.deltaY,s&&(vc.setZoomLevel(i+r/5),c.preventDefault(),c.stopPropagation())};this._register(re(this.viewHelper.viewDomNode,Se.MOUSE_WHEEL,o,{capture:!0,passive:!1}));function a(l){return Bt?(l.metaKey||l.ctrlKey)&&!l.shiftKey&&!l.altKey:l.ctrlKey&&!l.metaKey&&!l.shiftKey&&!l.altKey}}dispose(){this._context.removeEventHandler(this),this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),super.dispose()}onConfigurationChanged(e){if(e.hasChanged(146)){const t=this._context.configuration.options.get(146).height;this._height!==t&&(this._height=t,this._mouseDownOperation.onHeightChanged())}return!1}onCursorStateChanged(e){return this._mouseDownOperation.onCursorStateChanged(e),!1}onFocusChanged(e){return!1}getTargetAtClientPoint(e,t){const s=new ISe(e,t).toPageCoordinates(nt(this.viewHelper.viewDomNode)),r=qQ(this.viewHelper.viewDomNode);if(s.y<r.y||s.y>r.y+r.height||s.x<r.x||s.x>r.x+r.width)return null;const o=GQ(this.viewHelper.viewDomNode,r,s);return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),r,s,o,null)}_createMouseTarget(e,t){let i=e.target;if(!this.viewHelper.viewDomNode.contains(i)){const s=d0(this.viewHelper.viewDomNode);s&&(i=s.elementsFromPoint(e.posx,e.posy).find(r=>this.viewHelper.viewDomNode.contains(r)))}return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),e.editorPos,e.pos,e.relativePos,t?i:null)}_getMouseColumn(e){return this.mouseTargetFactory.getMouseColumn(e.relativePos)}_onContextMenu(e,t){this.viewController.emitContextMenu({event:e,target:this._createMouseTarget(e,t)})}_onMouseMove(e){this.mouseTargetFactory.mouseTargetIsWidget(e)||e.preventDefault(),!(this._mouseDownOperation.isActive()||e.timestamp<this.lastMouseLeaveTime)&&this.viewController.emitMouseMove({event:e,target:this._createMouseTarget(e,!0)})}_onMouseLeave(e){this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),this.lastMouseLeaveTime=new Date().getTime(),this.viewController.emitMouseLeave({event:e,target:null})}_onMouseUp(e){this.viewController.emitMouseUp({event:e,target:this._createMouseTarget(e,!0)})}_onMouseDown(e,t){const i=this._createMouseTarget(e,!0),s=i.type===6||i.type===7,r=i.type===2||i.type===3||i.type===4,o=i.type===3,a=this._context.configuration.options.get(110),l=i.type===8||i.type===5,c=i.type===9;let d=e.leftButton||e.middleButton;Bt&&e.leftButton&&e.ctrlKey&&(d=!1);const u=()=>{e.preventDefault(),this.viewHelper.focusTextArea()};if(d&&(s||o&&a))u(),this._mouseDownOperation.start(i.type,e,t);else if(r)e.preventDefault();else if(l){const h=i.detail;d&&this.viewHelper.shouldSuppressMouseDownOnViewZone(h.viewZoneId)&&(u(),this._mouseDownOperation.start(i.type,e,t),e.preventDefault())}else c&&this.viewHelper.shouldSuppressMouseDownOnWidget(i.detail)&&(u(),e.preventDefault());this.viewController.emitMouseDown({event:e,target:i})}}class Vlt extends ee{constructor(e,t,i,s,r,o){super(),this._context=e,this._viewController=t,this._viewHelper=i,this._mouseTargetFactory=s,this._createMouseTarget=r,this._getMouseColumn=o,this._mouseMoveMonitor=this._register(new klt(this._viewHelper.viewDomNode)),this._topBottomDragScrolling=this._register(new zlt(this._context,this._viewHelper,this._mouseTargetFactory,(a,l,c)=>this._dispatchMouse(a,l,c))),this._mouseState=new mj,this._currentSelection=new $e(1,1,1,1),this._isActive=!1,this._lastMouseEvent=null}dispose(){super.dispose()}isActive(){return this._isActive}_onMouseDownThenMove(e){this._lastMouseEvent=e,this._mouseState.setModifiers(e);const t=this._findMousePosition(e,!1);t&&(this._mouseState.isDragAndDrop?this._viewController.emitMouseDrag({event:e,target:t}):t.type===13&&(t.outsidePosition==="above"||t.outsidePosition==="below")?this._topBottomDragScrolling.start(t,e):(this._topBottomDragScrolling.stop(),this._dispatchMouse(t,!0,1)))}start(e,t,i){this._lastMouseEvent=t,this._mouseState.setStartedOnLineNumbers(e===3),this._mouseState.setStartButtons(t),this._mouseState.setModifiers(t);const s=this._findMousePosition(t,!0);if(!s||!s.position)return;this._mouseState.trySetCount(t.detail,s.position),t.detail=this._mouseState.count;const r=this._context.configuration.options;if(!r.get(92)&&r.get(35)&&!r.get(22)&&!this._mouseState.altKey&&t.detail<2&&!this._isActive&&!this._currentSelection.isEmpty()&&s.type===6&&s.position&&this._currentSelection.containsPosition(s.position)){this._mouseState.isDragAndDrop=!0,this._isActive=!0,this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,i,t.buttons,o=>this._onMouseDownThenMove(o),o=>{const a=this._findMousePosition(this._lastMouseEvent,!1);tg(o)?this._viewController.emitMouseDropCanceled():this._viewController.emitMouseDrop({event:this._lastMouseEvent,target:a?this._createMouseTarget(this._lastMouseEvent,!0):null}),this._stop()});return}this._mouseState.isDragAndDrop=!1,this._dispatchMouse(s,t.shiftKey,1),this._isActive||(this._isActive=!0,this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,i,t.buttons,o=>this._onMouseDownThenMove(o),()=>this._stop()))}_stop(){this._isActive=!1,this._topBottomDragScrolling.stop()}onHeightChanged(){this._mouseMoveMonitor.stopMonitoring()}onPointerUp(){this._mouseMoveMonitor.stopMonitoring()}onCursorStateChanged(e){this._currentSelection=e.selections[0]}_getPositionOutsideEditor(e){const t=e.editorPos,i=this._context.viewModel,s=this._context.viewLayout,r=this._getMouseColumn(e);if(e.posy<t.y){const a=t.y-e.posy,l=Math.max(s.getCurrentScrollTop()-a,0),c=ZS.getZoneAtCoord(this._context,l);if(c){const u=this._helpPositionJumpOverViewZone(c);if(u)return Jr.createOutsideEditor(r,u,"above",a)}const d=s.getLineNumberAtVerticalOffset(l);return Jr.createOutsideEditor(r,new Y(d,1),"above",a)}if(e.posy>t.y+t.height){const a=e.posy-t.y-t.height,l=s.getCurrentScrollTop()+e.relativePos.y,c=ZS.getZoneAtCoord(this._context,l);if(c){const u=this._helpPositionJumpOverViewZone(c);if(u)return Jr.createOutsideEditor(r,u,"below",a)}const d=s.getLineNumberAtVerticalOffset(l);return Jr.createOutsideEditor(r,new Y(d,i.getLineMaxColumn(d)),"below",a)}const o=s.getLineNumberAtVerticalOffset(s.getCurrentScrollTop()+e.relativePos.y);if(e.posx<t.x){const a=t.x-e.posx;return Jr.createOutsideEditor(r,new Y(o,1),"left",a)}if(e.posx>t.x+t.width){const a=e.posx-t.x-t.width;return Jr.createOutsideEditor(r,new Y(o,i.getLineMaxColumn(o)),"right",a)}return null}_findMousePosition(e,t){const i=this._getPositionOutsideEditor(e);if(i)return i;const s=this._createMouseTarget(e,t);if(!s.position)return null;if(s.type===8||s.type===5){const o=this._helpPositionJumpOverViewZone(s.detail);if(o)return Jr.createViewZone(s.type,s.element,s.mouseColumn,o,s.detail)}return s}_helpPositionJumpOverViewZone(e){const t=new Y(this._currentSelection.selectionStartLineNumber,this._currentSelection.selectionStartColumn),i=e.positionBefore,s=e.positionAfter;return i&&s?i.isBefore(t)?i:s:null}_dispatchMouse(e,t,i){e.position&&this._viewController.dispatchMouse({position:e.position,mouseColumn:e.mouseColumn,startedOnLineNumbers:this._mouseState.startedOnLineNumbers,revealType:i,inSelectionMode:t,mouseDownCount:this._mouseState.count,altKey:this._mouseState.altKey,ctrlKey:this._mouseState.ctrlKey,metaKey:this._mouseState.metaKey,shiftKey:this._mouseState.shiftKey,leftButton:this._mouseState.leftButton,middleButton:this._mouseState.middleButton,onInjectedText:e.type===6&&e.detail.injectedText!==null})}}class zlt extends ee{constructor(e,t,i,s){super(),this._context=e,this._viewHelper=t,this._mouseTargetFactory=i,this._dispatchMouse=s,this._operation=null}dispose(){super.dispose(),this.stop()}start(e,t){this._operation?this._operation.setPosition(e,t):this._operation=new Ult(this._context,this._viewHelper,this._mouseTargetFactory,this._dispatchMouse,e,t)}stop(){this._operation&&(this._operation.dispose(),this._operation=null)}}class Ult extends ee{constructor(e,t,i,s,r,o){super(),this._context=e,this._viewHelper=t,this._mouseTargetFactory=i,this._dispatchMouse=s,this._position=r,this._mouseEvent=o,this._lastTime=Date.now(),this._animationFrameDisposable=il(nt(o.browserEvent),()=>this._execute())}dispose(){this._animationFrameDisposable.dispose(),super.dispose()}setPosition(e,t){this._position=e,this._mouseEvent=t}_tick(){const e=Date.now(),t=e-this._lastTime;return this._lastTime=e,t}_getScrollSpeed(){const e=this._context.configuration.options.get(67),t=this._context.configuration.options.get(146).height/e,i=this._position.outsideDistance/e;return i<=1.5?Math.max(30,t*(1+i)):i<=3?Math.max(60,t*(2+i)):Math.max(200,t*(7+i))}_execute(){const e=this._context.configuration.options.get(67),t=this._getScrollSpeed(),i=this._tick(),s=t*(i/1e3)*e,r=this._position.outsidePosition==="above"?-s:s;this._context.viewModel.viewLayout.deltaScrollNow(0,r),this._viewHelper.renderNow();const o=this._context.viewLayout.getLinesViewportData(),a=this._position.outsidePosition==="above"?o.startLineNumber:o.endLineNumber;let l;{const c=qQ(this._viewHelper.viewDomNode),d=this._context.configuration.options.get(146).horizontalScrollbarHeight,u=new FB(this._mouseEvent.pos.x,c.y+c.height-d-.1),h=GQ(this._viewHelper.viewDomNode,c,u);l=this._mouseTargetFactory.createMouseTarget(this._viewHelper.getLastRenderData(),c,u,h,null)}(!l.position||l.position.lineNumber!==a)&&(this._position.outsidePosition==="above"?l=Jr.createOutsideEditor(this._position.mouseColumn,new Y(a,1),"above",this._position.outsideDistance):l=Jr.createOutsideEditor(this._position.mouseColumn,new Y(a,this._context.viewModel.getLineMaxColumn(a)),"below",this._position.outsideDistance)),this._dispatchMouse(l,!0,2),this._animationFrameDisposable=il(nt(l.element),()=>this._execute())}}const B4=class B4{get altKey(){return this._altKey}get ctrlKey(){return this._ctrlKey}get metaKey(){return this._metaKey}get shiftKey(){return this._shiftKey}get leftButton(){return this._leftButton}get middleButton(){return this._middleButton}get startedOnLineNumbers(){return this._startedOnLineNumbers}constructor(){this._altKey=!1,this._ctrlKey=!1,this._metaKey=!1,this._shiftKey=!1,this._leftButton=!1,this._middleButton=!1,this._startedOnLineNumbers=!1,this._lastMouseDownPosition=null,this._lastMouseDownPositionEqualCount=0,this._lastMouseDownCount=0,this._lastSetMouseDownCountTime=0,this.isDragAndDrop=!1}get count(){return this._lastMouseDownCount}setModifiers(e){this._altKey=e.altKey,this._ctrlKey=e.ctrlKey,this._metaKey=e.metaKey,this._shiftKey=e.shiftKey}setStartButtons(e){this._leftButton=e.leftButton,this._middleButton=e.middleButton}setStartedOnLineNumbers(e){this._startedOnLineNumbers=e}trySetCount(e,t){const i=new Date().getTime();i-this._lastSetMouseDownCountTime>B4.CLEAR_MOUSE_DOWN_COUNT_TIME&&(e=1),this._lastSetMouseDownCountTime=i,e>this._lastMouseDownCount+1&&(e=this._lastMouseDownCount+1),this._lastMouseDownPosition&&this._lastMouseDownPosition.equals(t)?this._lastMouseDownPositionEqualCount++:this._lastMouseDownPositionEqualCount=1,this._lastMouseDownPosition=t,this._lastMouseDownCount=Math.min(e,this._lastMouseDownPositionEqualCount)}};B4.CLEAR_MOUSE_DOWN_COUNT_TIME=400;let mj=B4;const ey=class ey{constructor(e,t,i,s,r){this.value=e,this.selectionStart=t,this.selectionEnd=i,this.selection=s,this.newlineCountBeforeSelection=r}toString(){return`[ <${this.value}>, selectionStart: ${this.selectionStart}, selectionEnd: ${this.selectionEnd}]`}static readFromTextArea(e,t){const i=e.getValue(),s=e.getSelectionStart(),r=e.getSelectionEnd();let o;if(t){const a=i.substring(0,s),l=t.value.substring(0,t.selectionStart);a===l&&(o=t.newlineCountBeforeSelection)}return new ey(i,s,r,null,o)}collapseSelection(){return this.selectionStart===this.value.length?this:new ey(this.value,this.value.length,this.value.length,null,void 0)}writeToTextArea(e,t,i){t.setValue(e,this.value),i&&t.setSelectionRange(e,this.selectionStart,this.selectionEnd)}deduceEditorPosition(e){var s,r,o,a;if(e<=this.selectionStart){const l=this.value.substring(e,this.selectionStart);return this._finishDeduceEditorPosition(((s=this.selection)==null?void 0:s.getStartPosition())??null,l,-1)}if(e>=this.selectionEnd){const l=this.value.substring(this.selectionEnd,e);return this._finishDeduceEditorPosition(((r=this.selection)==null?void 0:r.getEndPosition())??null,l,1)}const t=this.value.substring(this.selectionStart,e);if(t.indexOf("")===-1)return this._finishDeduceEditorPosition(((o=this.selection)==null?void 0:o.getStartPosition())??null,t,1);const i=this.value.substring(e,this.selectionEnd);return this._finishDeduceEditorPosition(((a=this.selection)==null?void 0:a.getEndPosition())??null,i,-1)}_finishDeduceEditorPosition(e,t,i){let s=0,r=-1;for(;(r=t.indexOf(`
`,r+1))!==-1;)s++;return[e,i*t.length,s]}static deduceInput(e,t,i){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};const s=Math.min(D_(e.value,t.value),e.selectionStart,t.selectionStart),r=Math.min(cP(e.value,t.value),e.value.length-e.selectionEnd,t.value.length-t.selectionEnd);e.value.substring(s,e.value.length-r);const o=t.value.substring(s,t.value.length-r),a=e.selectionStart-s,l=e.selectionEnd-s,c=t.selectionStart-s,d=t.selectionEnd-s;if(c===d){const h=e.selectionStart-s;return{text:o,replacePrevCharCnt:h,replaceNextCharCnt:0,positionDelta:0}}const u=l-a;return{text:o,replacePrevCharCnt:u,replaceNextCharCnt:0,positionDelta:0}}static deduceAndroidCompositionInput(e,t){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};if(e.value===t.value)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:t.selectionEnd-e.selectionEnd};const i=Math.min(D_(e.value,t.value),e.selectionEnd),s=Math.min(cP(e.value,t.value),e.value.length-e.selectionEnd),r=e.value.substring(i,e.value.length-s),o=t.value.substring(i,t.value.length-s);e.selectionStart-i;const a=e.selectionEnd-i;t.selectionStart-i;const l=t.selectionEnd-i;return{text:o,replacePrevCharCnt:a,replaceNextCharCnt:r.length-a,positionDelta:l-o.length}}};ey.EMPTY=new ey("",0,0,null,void 0);let eo=ey;class T1{static _getPageOfLine(e,t){return Math.floor((e-1)/t)}static _getRangeForPage(e,t){const i=e*t,s=i+1,r=i+t;return new M(s,1,r+1,1)}static fromEditorSelection(e,t,i,s){const o=T1._getPageOfLine(t.startLineNumber,i),a=T1._getRangeForPage(o,i),l=T1._getPageOfLine(t.endLineNumber,i),c=T1._getRangeForPage(l,i);let d=a.intersectRanges(new M(1,1,t.startLineNumber,t.startColumn));if(s&&e.getValueLengthInRange(d,1)>500){const w=e.modifyPosition(d.getEndPosition(),-500);d=M.fromPositions(w,d.getEndPosition())}const u=e.getValueInRange(d,1),h=e.getLineCount(),f=e.getLineMaxColumn(h);let g=c.intersectRanges(new M(t.endLineNumber,t.endColumn,h,f));if(s&&e.getValueLengthInRange(g,1)>500){const w=e.modifyPosition(g.getStartPosition(),500);g=M.fromPositions(g.getStartPosition(),w)}const p=e.getValueInRange(g,1);let _;if(o===l||o+1===l)_=e.getValueInRange(t,1);else{const w=a.intersectRanges(t),b=c.intersectRanges(t);_=e.getValueInRange(w,1)+""+e.getValueInRange(b,1)}return s&&_.length>2*500&&(_=_.substring(0,500)+""+_.substring(_.length-500,_.length)),new eo(u+_+p,u.length,u.length+_.length,t,d.endLineNumber-d.startLineNumber)}}var $lt=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Xce=function(n,e){return function(t,i){e(t,i,n)}},DO;(function(n){n.Tap="-monaco-textarea-synthetic-tap"})(DO||(DO={}));const _j={forceCopyWithSyntaxHighlighting:!1},W4=class W4{constructor(){this._lastState=null}set(e,t){this._lastState={lastCopiedValue:e,data:t}}get(e){return this._lastState&&this._lastState.lastCopiedValue===e?this._lastState.data:(this._lastState=null,null)}};W4.INSTANCE=new W4;let yD=W4;class jlt{constructor(){this._lastTypeTextLength=0}handleCompositionUpdate(e){e=e||"";const t={text:e,replacePrevCharCnt:this._lastTypeTextLength,replaceNextCharCnt:0,positionDelta:0};return this._lastTypeTextLength=e.length,t}}let vj=class extends ee{get textAreaState(){return this._textAreaState}constructor(e,t,i,s,r,o){super(),this._host=e,this._textArea=t,this._OS=i,this._browser=s,this._accessibilityService=r,this._logService=o,this._onFocus=this._register(new X),this.onFocus=this._onFocus.event,this._onBlur=this._register(new X),this.onBlur=this._onBlur.event,this._onKeyDown=this._register(new X),this.onKeyDown=this._onKeyDown.event,this._onKeyUp=this._register(new X),this.onKeyUp=this._onKeyUp.event,this._onCut=this._register(new X),this.onCut=this._onCut.event,this._onPaste=this._register(new X),this.onPaste=this._onPaste.event,this._onType=this._register(new X),this.onType=this._onType.event,this._onCompositionStart=this._register(new X),this.onCompositionStart=this._onCompositionStart.event,this._onCompositionUpdate=this._register(new X),this.onCompositionUpdate=this._onCompositionUpdate.event,this._onCompositionEnd=this._register(new X),this.onCompositionEnd=this._onCompositionEnd.event,this._onSelectionChangeRequest=this._register(new X),this.onSelectionChangeRequest=this._onSelectionChangeRequest.event,this._asyncFocusGainWriteScreenReaderContent=this._register(new As),this._asyncTriggerCut=this._register(new yi(()=>this._onCut.fire(),0)),this._textAreaState=eo.EMPTY,this._selectionChangeListener=null,this._accessibilityService.isScreenReaderOptimized()&&this.writeNativeTextAreaContent("ctor"),this._register(Ee.runAndSubscribe(this._accessibilityService.onDidChangeScreenReaderOptimized,()=>{this._accessibilityService.isScreenReaderOptimized()&&!this._asyncFocusGainWriteScreenReaderContent.value?this._asyncFocusGainWriteScreenReaderContent.value=this._register(new yi(()=>this.writeNativeTextAreaContent("asyncFocusGain"),0)):this._asyncFocusGainWriteScreenReaderContent.clear()})),this._hasFocus=!1,this._currentComposition=null;let a=null;this._register(this._textArea.onKeyDown(l=>{const c=new Oi(l);(c.keyCode===114||this._currentComposition&&c.keyCode===1)&&c.stopPropagation(),c.equals(9)&&c.preventDefault(),a=c,this._onKeyDown.fire(c)})),this._register(this._textArea.onKeyUp(l=>{const c=new Oi(l);this._onKeyUp.fire(c)})),this._register(this._textArea.onCompositionStart(l=>{const c=new jlt;if(this._currentComposition){this._currentComposition=c;return}if(this._currentComposition=c,this._OS===2&&a&&a.equals(114)&&this._textAreaState.selectionStart===this._textAreaState.selectionEnd&&this._textAreaState.selectionStart>0&&this._textAreaState.value.substr(this._textAreaState.selectionStart-1,1)===l.data&&(a.code==="ArrowRight"||a.code==="ArrowLeft")){c.handleCompositionUpdate("x"),this._onCompositionStart.fire({data:l.data});return}if(this._browser.isAndroid){this._onCompositionStart.fire({data:l.data});return}this._onCompositionStart.fire({data:l.data})})),this._register(this._textArea.onCompositionUpdate(l=>{const c=this._currentComposition;if(!c)return;if(this._browser.isAndroid){const u=eo.readFromTextArea(this._textArea,this._textAreaState),h=eo.deduceAndroidCompositionInput(this._textAreaState,u);this._textAreaState=u,this._onType.fire(h),this._onCompositionUpdate.fire(l);return}const d=c.handleCompositionUpdate(l.data);this._textAreaState=eo.readFromTextArea(this._textArea,this._textAreaState),this._onType.fire(d),this._onCompositionUpdate.fire(l)})),this._register(this._textArea.onCompositionEnd(l=>{const c=this._currentComposition;if(!c)return;if(this._currentComposition=null,this._browser.isAndroid){const u=eo.readFromTextArea(this._textArea,this._textAreaState),h=eo.deduceAndroidCompositionInput(this._textAreaState,u);this._textAreaState=u,this._onType.fire(h),this._onCompositionEnd.fire();return}const d=c.handleCompositionUpdate(l.data);this._textAreaState=eo.readFromTextArea(this._textArea,this._textAreaState),this._onType.fire(d),this._onCompositionEnd.fire()})),this._register(this._textArea.onInput(l=>{if(this._textArea.setIgnoreSelectionChangeTime("received input event"),this._currentComposition)return;const c=eo.readFromTextArea(this._textArea,this._textAreaState),d=eo.deduceInput(this._textAreaState,c,this._OS===2);d.replacePrevCharCnt===0&&d.text.length===1&&(ks(d.text.charCodeAt(0))||d.text.charCodeAt(0)===127)||(this._textAreaState=c,(d.text!==""||d.replacePrevCharCnt!==0||d.replaceNextCharCnt!==0||d.positionDelta!==0)&&this._onType.fire(d))})),this._register(this._textArea.onCut(l=>{this._textArea.setIgnoreSelectionChangeTime("received cut event"),this._ensureClipboardGetsEditorSelection(l),this._asyncTriggerCut.schedule()})),this._register(this._textArea.onCopy(l=>{this._ensureClipboardGetsEditorSelection(l)})),this._register(this._textArea.onPaste(l=>{if(this._textArea.setIgnoreSelectionChangeTime("received paste event"),l.preventDefault(),!l.clipboardData)return;let[c,d]=bj.getTextData(l.clipboardData);c&&(d=d||yD.INSTANCE.get(c),this._onPaste.fire({text:c,metadata:d}))})),this._register(this._textArea.onFocus(()=>{const l=this._hasFocus;this._setHasFocus(!0),this._accessibilityService.isScreenReaderOptimized()&&this._browser.isSafari&&!l&&this._hasFocus&&(this._asyncFocusGainWriteScreenReaderContent.value||(this._asyncFocusGainWriteScreenReaderContent.value=new yi(()=>this.writeNativeTextAreaContent("asyncFocusGain"),0)),this._asyncFocusGainWriteScreenReaderContent.value.schedule())})),this._register(this._textArea.onBlur(()=>{this._currentComposition&&(this._currentComposition=null,this.writeNativeTextAreaContent("blurWithoutCompositionEnd"),this._onCompositionEnd.fire()),this._setHasFocus(!1)})),this._register(this._textArea.onSyntheticTap(()=>{this._browser.isAndroid&&this._currentComposition&&(this._currentComposition=null,this.writeNativeTextAreaContent("tapWithoutCompositionEnd"),this._onCompositionEnd.fire())}))}_installSelectionChangeListener(){let e=0;return re(this._textArea.ownerDocument,"selectionchange",t=>{if(Im.onSelectionChange(),!this._hasFocus||this._currentComposition||!this._browser.isChrome)return;const i=Date.now(),s=i-e;if(e=i,s<5)return;const r=i-this._textArea.getIgnoreSelectionChangeTime();if(this._textArea.resetSelectionChangeTime(),r<100||!this._textAreaState.selection)return;const o=this._textArea.getValue();if(this._textAreaState.value!==o)return;const a=this._textArea.getSelectionStart(),l=this._textArea.getSelectionEnd();if(this._textAreaState.selectionStart===a&&this._textAreaState.selectionEnd===l)return;const c=this._textAreaState.deduceEditorPosition(a),d=this._host.deduceModelPosition(c[0],c[1],c[2]),u=this._textAreaState.deduceEditorPosition(l),h=this._host.deduceModelPosition(u[0],u[1],u[2]),f=new $e(d.lineNumber,d.column,h.lineNumber,h.column);this._onSelectionChangeRequest.fire(f)})}dispose(){super.dispose(),this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null)}focusTextArea(){this._setHasFocus(!0),this.refreshFocusState()}isFocused(){return this._hasFocus}refreshFocusState(){this._setHasFocus(this._textArea.hasFocus())}_setHasFocus(e){this._hasFocus!==e&&(this._hasFocus=e,this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null),this._hasFocus&&(this._selectionChangeListener=this._installSelectionChangeListener()),this._hasFocus&&this.writeNativeTextAreaContent("focusgain"),this._hasFocus?this._onFocus.fire():this._onBlur.fire())}_setAndWriteTextAreaState(e,t){this._hasFocus||(t=t.collapseSelection()),t.writeToTextArea(e,this._textArea,this._hasFocus),this._textAreaState=t}writeNativeTextAreaContent(e){!this._accessibilityService.isScreenReaderOptimized()&&e==="render"||this._currentComposition||(this._logService.trace(`writeTextAreaState(reason: ${e})`),this._setAndWriteTextAreaState(e,this._host.getScreenReaderContent()))}_ensureClipboardGetsEditorSelection(e){const t=this._host.getDataToCopy(),i={version:1,isFromEmptySelection:t.isFromEmptySelection,multicursorText:t.multicursorText,mode:t.mode};yD.INSTANCE.set(this._browser.isFirefox?t.text.replace(/\r\n/g,`
`):t.text,i),e.preventDefault(),e.clipboardData&&bj.setTextData(e.clipboardData,t.text,t.html,i)}};vj=$lt([Xce(4,al),Xce(5,Cr)],vj);const bj={getTextData(n){const e=n.getData(On.text);let t=null;const i=n.getData("vscode-editor-data");if(typeof i=="string")try{t=JSON.parse(i),t.version!==1&&(t=null)}catch{}return e.length===0&&t===null&&n.files.length>0?[Array.prototype.slice.call(n.files,0).map(r=>r.name).join(`
`),null]:[e,t]},setTextData(n,e,t,i){n.setData(On.text,e),typeof t=="string"&&n.setData("text/html",t),n.setData("vscode-editor-data",JSON.stringify(i))}};class Klt extends ee{get ownerDocument(){return this._actual.ownerDocument}constructor(e){super(),this._actual=e,this.onKeyDown=this._register(new zt(this._actual,"keydown")).event,this.onKeyUp=this._register(new zt(this._actual,"keyup")).event,this.onCompositionStart=this._register(new zt(this._actual,"compositionstart")).event,this.onCompositionUpdate=this._register(new zt(this._actual,"compositionupdate")).event,this.onCompositionEnd=this._register(new zt(this._actual,"compositionend")).event,this.onBeforeInput=this._register(new zt(this._actual,"beforeinput")).event,this.onInput=this._register(new zt(this._actual,"input")).event,this.onCut=this._register(new zt(this._actual,"cut")).event,this.onCopy=this._register(new zt(this._actual,"copy")).event,this.onPaste=this._register(new zt(this._actual,"paste")).event,this.onFocus=this._register(new zt(this._actual,"focus")).event,this.onBlur=this._register(new zt(this._actual,"blur")).event,this._onSyntheticTap=this._register(new X),this.onSyntheticTap=this._onSyntheticTap.event,this._ignoreSelectionChangeTime=0,this._register(this.onKeyDown(()=>Im.onKeyDown())),this._register(this.onBeforeInput(()=>Im.onBeforeInput())),this._register(this.onInput(()=>Im.onInput())),this._register(this.onKeyUp(()=>Im.onKeyUp())),this._register(re(this._actual,DO.Tap,()=>this._onSyntheticTap.fire()))}hasFocus(){const e=d0(this._actual);return e?e.activeElement===this._actual:this._actual.isConnected?vr()===this._actual:!1}setIgnoreSelectionChangeTime(e){this._ignoreSelectionChangeTime=Date.now()}getIgnoreSelectionChangeTime(){return this._ignoreSelectionChangeTime}resetSelectionChangeTime(){this._ignoreSelectionChangeTime=0}getValue(){return this._actual.value}setValue(e,t){const i=this._actual;i.value!==t&&(this.setIgnoreSelectionChangeTime("setValue"),i.value=t)}getSelectionStart(){return this._actual.selectionDirection==="backward"?this._actual.selectionEnd:this._actual.selectionStart}getSelectionEnd(){return this._actual.selectionDirection==="backward"?this._actual.selectionStart:this._actual.selectionEnd}setSelectionRange(e,t,i){const s=this._actual;let r=null;const o=d0(s);o?r=o.activeElement:r=vr();const a=nt(r),l=r===s,c=s.selectionStart,d=s.selectionEnd;if(l&&c===t&&d===i){Tc&&a.parent!==a&&s.focus();return}if(l){this.setIgnoreSelectionChangeTime("setSelectionRange"),s.setSelectionRange(t,i),Tc&&a.parent!==a&&s.focus();return}try{const u=kqe(s);this.setIgnoreSelectionChangeTime("setSelectionRange"),s.focus(),s.setSelectionRange(t,i),Eqe(s,u)}catch{}}}class qlt extends ZQ{constructor(e,t,i){super(e,t,i),this._register(Br.addTarget(this.viewHelper.linesContentDomNode)),this._register(re(this.viewHelper.linesContentDomNode,Hi.Tap,r=>this.onTap(r))),this._register(re(this.viewHelper.linesContentDomNode,Hi.Change,r=>this.onChange(r))),this._register(re(this.viewHelper.linesContentDomNode,Hi.Contextmenu,r=>this._onContextMenu(new W_(r,!1,this.viewHelper.viewDomNode),!1))),this._lastPointerType="mouse",this._register(re(this.viewHelper.linesContentDomNode,"pointerdown",r=>{const o=r.pointerType;if(o==="mouse"){this._lastPointerType="mouse";return}else o==="touch"?this._lastPointerType="touch":this._lastPointerType="pen"}));const s=new Llt(this.viewHelper.viewDomNode);this._register(s.onPointerMove(this.viewHelper.viewDomNode,r=>this._onMouseMove(r))),this._register(s.onPointerUp(this.viewHelper.viewDomNode,r=>this._onMouseUp(r))),this._register(s.onPointerLeave(this.viewHelper.viewDomNode,r=>this._onMouseLeave(r))),this._register(s.onPointerDown(this.viewHelper.viewDomNode,(r,o)=>this._onMouseDown(r,o)))}onTap(e){!e.initialTarget||!this.viewHelper.linesContentDomNode.contains(e.initialTarget)||(e.preventDefault(),this.viewHelper.focusTextArea(),this._dispatchGesture(e,!1))}onChange(e){this._lastPointerType==="touch"&&this._context.viewModel.viewLayout.deltaScrollNow(-e.translationX,-e.translationY),this._lastPointerType==="pen"&&this._dispatchGesture(e,!0)}_dispatchGesture(e,t){const i=this._createMouseTarget(new W_(e,!1,this.viewHelper.viewDomNode),!1);i.position&&this.viewController.dispatchMouse({position:i.position,mouseColumn:i.position.column,startedOnLineNumbers:!1,revealType:1,mouseDownCount:e.tapCount,inSelectionMode:t,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,leftButton:!1,middleButton:!1,onInjectedText:i.type===6&&i.detail.injectedText!==null})}_onMouseDown(e,t){e.browserEvent.pointerType!=="touch"&&super._onMouseDown(e,t)}}class Glt extends ZQ{constructor(e,t,i){super(e,t,i),this._register(Br.addTarget(this.viewHelper.linesContentDomNode)),this._register(re(this.viewHelper.linesContentDomNode,Hi.Tap,s=>this.onTap(s))),this._register(re(this.viewHelper.linesContentDomNode,Hi.Change,s=>this.onChange(s))),this._register(re(this.viewHelper.linesContentDomNode,Hi.Contextmenu,s=>this._onContextMenu(new W_(s,!1,this.viewHelper.viewDomNode),!1)))}onTap(e){e.preventDefault(),this.viewHelper.focusTextArea();const t=this._createMouseTarget(new W_(e,!1,this.viewHelper.viewDomNode),!1);if(t.position){const i=document.createEvent("CustomEvent");i.initEvent(DO.Tap,!1,!0),this.viewHelper.dispatchTextAreaEvent(i),this.viewController.moveTo(t.position,1)}}onChange(e){this._context.viewModel.viewLayout.deltaScrollNow(-e.translationX,-e.translationY)}}class Ylt extends ee{constructor(e,t,i){super(),(Bu||v$e&&zwe)&&lX.pointerEvents?this.handler=this._register(new qlt(e,t,i)):Ei.TouchEvent?this.handler=this._register(new Glt(e,t,i)):this.handler=this._register(new ZQ(e,t,i))}getTargetAtClientPoint(e,t){return this.handler.getTargetAtClientPoint(e,t)}}class G0 extends nT{}const H4=class H4 extends G0{constructor(e){super(),this._context=e,this._readConfig(),this._lastCursorModelPosition=new Y(1,1),this._renderResult=null,this._activeLineNumber=1,this._context.addEventHandler(this)}_readConfig(){const e=this._context.configuration.options;this._lineHeight=e.get(67);const t=e.get(68);this._renderLineNumbers=t.renderType,this._renderCustomLineNumbers=t.renderFn,this._renderFinalNewline=e.get(96);const i=e.get(146);this._lineNumbersLeft=i.lineNumbersLeft,this._lineNumbersWidth=i.lineNumbersWidth}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return this._readConfig(),!0}onCursorStateChanged(e){const t=e.selections[0].getPosition();this._lastCursorModelPosition=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(t);let i=!1;return this._activeLineNumber!==t.lineNumber&&(this._activeLineNumber=t.lineNumber,i=!0),(this._renderLineNumbers===2||this._renderLineNumbers===3)&&(i=!0),i}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}onDecorationsChanged(e){return e.affectsLineNumber}_getLineRenderLineNumber(e){const t=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new Y(e,1));if(t.column!==1)return"";const i=t.lineNumber;if(this._renderCustomLineNumbers)return this._renderCustomLineNumbers(i);if(this._renderLineNumbers===2){const s=Math.abs(this._lastCursorModelPosition.lineNumber-i);return s===0?'<span class="relative-current-line-number">'+i+"</span>":String(s)}if(this._renderLineNumbers===3){if(this._lastCursorModelPosition.lineNumber===i||i%10===0)return String(i);const s=this._context.viewModel.getLineCount();return i===s?String(i):""}return String(i)}prepareRender(e){if(this._renderLineNumbers===0){this._renderResult=null;return}const t=Po?this._lineHeight%2===0?" lh-even":" lh-odd":"",i=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber,r=this._context.viewModel.getDecorationsInViewport(e.visibleRange).filter(c=>!!c.options.lineNumberClassName);r.sort((c,d)=>M.compareRangesUsingEnds(c.range,d.range));let o=0;const a=this._context.viewModel.getLineCount(),l=[];for(let c=i;c<=s;c++){const d=c-i;let u=this._getLineRenderLineNumber(c),h="";for(;o<r.length&&r[o].range.endLineNumber<c;)o++;for(let f=o;f<r.length;f++){const{range:g,options:p}=r[f];g.startLineNumber<=c&&(h+=" "+p.lineNumberClassName)}if(!u&&!h){l[d]="";continue}c===a&&this._context.viewModel.getLineLength(c)===0&&(this._renderFinalNewline==="off"&&(u=""),this._renderFinalNewline==="dimmed"&&(h+=" dimmed-line-number")),c===this._activeLineNumber&&(h+=" active-line-number"),l[d]=`<div class="${H4.CLASS_NAME}${t}${h}" style="left:${this._lineNumbersLeft}px;width:${this._lineNumbersWidth}px;">${u}</div>`}this._renderResult=l}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}};H4.CLASS_NAME="line-numbers";let NO=H4;zc((n,e)=>{const t=n.getColor(Wit),i=n.getColor(Jit);i?e.addRule(`.monaco-editor .line-numbers.dimmed-line-number { color: ${i}; }`):t&&e.addRule(`.monaco-editor .line-numbers.dimmed-line-number { color: ${t.transparent(.4)}; }`)});const ty=class ty extends cl{constructor(e){super(e);const t=this._context.configuration.options,i=t.get(146);this._canUseLayerHinting=!t.get(32),this._contentLeft=i.contentLeft,this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,this._domNode=ui(document.createElement("div")),this._domNode.setClassName(ty.OUTER_CLASS_NAME),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._glyphMarginBackgroundDomNode=ui(document.createElement("div")),this._glyphMarginBackgroundDomNode.setClassName(ty.CLASS_NAME),this._domNode.appendChild(this._glyphMarginBackgroundDomNode)}dispose(){super.dispose()}getDomNode(){return this._domNode}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(146);return this._canUseLayerHinting=!t.get(32),this._contentLeft=i.contentLeft,this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollTopChanged}prepareRender(e){}render(e){this._domNode.setLayerHinting(this._canUseLayerHinting),this._domNode.setContain("strict");const t=e.scrollTop-e.bigNumbersDelta;this._domNode.setTop(-t);const i=Math.min(e.scrollHeight,1e6);this._domNode.setHeight(i),this._domNode.setWidth(this._contentLeft),this._glyphMarginBackgroundDomNode.setLeft(this._glyphMarginLeft),this._glyphMarginBackgroundDomNode.setWidth(this._glyphMarginWidth),this._glyphMarginBackgroundDomNode.setHeight(i)}};ty.CLASS_NAME="glyph-margin",ty.OUTER_CLASS_NAME="margin";let TO=ty;const By="monaco-mouse-cursor-text";var Zlt=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Qce=function(n,e){return function(t,i){e(t,i,n)}};class Xlt{constructor(e,t,i,s,r){this._context=e,this.modelLineNumber=t,this.distanceToModelLineStart=i,this.widthOfHiddenLineTextBefore=s,this.distanceToModelLineEnd=r,this._visibleTextAreaBrand=void 0,this.startPosition=null,this.endPosition=null,this.visibleTextareaStart=null,this.visibleTextareaEnd=null,this._previousPresentation=null}prepareRender(e){const t=new Y(this.modelLineNumber,this.distanceToModelLineStart+1),i=new Y(this.modelLineNumber,this._context.viewModel.model.getLineMaxColumn(this.modelLineNumber)-this.distanceToModelLineEnd);this.startPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(t),this.endPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(i),this.startPosition.lineNumber===this.endPosition.lineNumber?(this.visibleTextareaStart=e.visibleRangeForPosition(this.startPosition),this.visibleTextareaEnd=e.visibleRangeForPosition(this.endPosition)):(this.visibleTextareaStart=null,this.visibleTextareaEnd=null)}definePresentation(e){return this._previousPresentation||(e?this._previousPresentation=e:this._previousPresentation={foreground:1,italic:!1,bold:!1,underline:!1,strikethrough:!1}),this._previousPresentation}}const U8=Tc;let wj=class extends cl{constructor(e,t,i,s,r){super(e),this._keybindingService=s,this._instantiationService=r,this._primaryCursorPosition=new Y(1,1),this._primaryCursorVisibleRange=null,this._viewController=t,this._visibleRangeProvider=i,this._scrollLeft=0,this._scrollTop=0;const o=this._context.configuration.options,a=o.get(146);this._setAccessibilityOptions(o),this._contentLeft=a.contentLeft,this._contentWidth=a.contentWidth,this._contentHeight=a.height,this._fontInfo=o.get(50),this._lineHeight=o.get(67),this._emptySelectionClipboard=o.get(37),this._copyWithSyntaxHighlighting=o.get(25),this._visibleTextArea=null,this._selections=[new $e(1,1,1,1)],this._modelSelections=[new $e(1,1,1,1)],this._lastRenderPosition=null,this.textArea=ui(document.createElement("textarea")),$u.write(this.textArea,7),this.textArea.setClassName(`inputarea ${By}`),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off");const{tabSize:l}=this._context.viewModel.model.getOptions();this.textArea.domNode.style.tabSize=`${l*this._fontInfo.spaceWidth}px`,this.textArea.setAttribute("autocorrect","off"),this.textArea.setAttribute("autocapitalize","off"),this.textArea.setAttribute("autocomplete","off"),this.textArea.setAttribute("spellcheck","false"),this.textArea.setAttribute("aria-label",this._getAriaLabel(o)),this.textArea.setAttribute("aria-required",o.get(5)?"true":"false"),this.textArea.setAttribute("tabindex",String(o.get(125))),this.textArea.setAttribute("role","textbox"),this.textArea.setAttribute("aria-roledescription",v("editor","editor")),this.textArea.setAttribute("aria-multiline","true"),this.textArea.setAttribute("aria-autocomplete",o.get(92)?"none":"both"),this._ensureReadOnlyAttribute(),this.textAreaCover=ui(document.createElement("div")),this.textAreaCover.setPosition("absolute");const c={getLineCount:()=>this._context.viewModel.getLineCount(),getLineMaxColumn:h=>this._context.viewModel.getLineMaxColumn(h),getValueInRange:(h,f)=>this._context.viewModel.getValueInRange(h,f),getValueLengthInRange:(h,f)=>this._context.viewModel.getValueLengthInRange(h,f),modifyPosition:(h,f)=>this._context.viewModel.modifyPosition(h,f)},d={getDataToCopy:()=>{const h=this._context.viewModel.getPlainTextToCopy(this._modelSelections,this._emptySelectionClipboard,wr),f=this._context.viewModel.model.getEOL(),g=this._emptySelectionClipboard&&this._modelSelections.length===1&&this._modelSelections[0].isEmpty(),p=Array.isArray(h)?h:null,_=Array.isArray(h)?h.join(f):h;let w,b=null;if(_j.forceCopyWithSyntaxHighlighting||this._copyWithSyntaxHighlighting&&_.length<65536){const y=this._context.viewModel.getRichTextToCopy(this._modelSelections,this._emptySelectionClipboard);y&&(w=y.html,b=y.mode)}return{isFromEmptySelection:g,multicursorText:p,text:_,html:w,mode:b}},getScreenReaderContent:()=>{if(this._accessibilitySupport===1){const h=this._selections[0];if(Bt&&h.isEmpty()){const g=h.getStartPosition();let p=this._getWordBeforePosition(g);if(p.length===0&&(p=this._getCharacterBeforePosition(g)),p.length>0)return new eo(p,p.length,p.length,M.fromPositions(g),0)}if(Bt&&!h.isEmpty()&&c.getValueLengthInRange(h,0)<500){const g=c.getValueInRange(h,0);return new eo(g,0,g.length,h,0)}if(Yg&&!h.isEmpty()){const g="vscode-placeholder";return new eo(g,0,g.length,null,void 0)}return eo.EMPTY}if(Eoe){const h=this._selections[0];if(h.isEmpty()){const f=h.getStartPosition(),[g,p]=this._getAndroidWordAtPosition(f);if(g.length>0)return new eo(g,p,p,M.fromPositions(f),0)}return eo.EMPTY}return T1.fromEditorSelection(c,this._selections[0],this._accessibilityPageSize,this._accessibilitySupport===0)},deduceModelPosition:(h,f,g)=>this._context.viewModel.deduceModelPositionRelativeToViewPosition(h,f,g)},u=this._register(new Klt(this.textArea.domNode));this._textAreaInput=this._register(this._instantiationService.createInstance(vj,d,u,Ka,{isAndroid:Eoe,isChrome:PN,isFirefox:Tc,isSafari:Yg})),this._register(this._textAreaInput.onKeyDown(h=>{this._viewController.emitKeyDown(h)})),this._register(this._textAreaInput.onKeyUp(h=>{this._viewController.emitKeyUp(h)})),this._register(this._textAreaInput.onPaste(h=>{let f=!1,g=null,p=null;h.metadata&&(f=this._emptySelectionClipboard&&!!h.metadata.isFromEmptySelection,g=typeof h.metadata.multicursorText<"u"?h.metadata.multicursorText:null,p=h.metadata.mode),this._viewController.paste(h.text,f,g,p)})),this._register(this._textAreaInput.onCut(()=>{this._viewController.cut()})),this._register(this._textAreaInput.onType(h=>{h.replacePrevCharCnt||h.replaceNextCharCnt||h.positionDelta?this._viewController.compositionType(h.text,h.replacePrevCharCnt,h.replaceNextCharCnt,h.positionDelta):this._viewController.type(h.text)})),this._register(this._textAreaInput.onSelectionChangeRequest(h=>{this._viewController.setSelection(h)})),this._register(this._textAreaInput.onCompositionStart(h=>{const f=this.textArea.domNode,g=this._modelSelections[0],{distanceToModelLineStart:p,widthOfHiddenTextBefore:_}=(()=>{const b=f.value.substring(0,Math.min(f.selectionStart,f.selectionEnd)),y=b.lastIndexOf(`
`),S=b.substring(y+1),x=S.lastIndexOf("	"),E=S.length-x-1,D=g.getStartPosition(),N=Math.min(D.column-1,E),I=D.column-1-N,H=S.substring(0,S.length-N),{tabSize:z}=this._context.viewModel.model.getOptions(),G=Qlt(this.textArea.domNode.ownerDocument,H,this._fontInfo,z);return{distanceToModelLineStart:I,widthOfHiddenTextBefore:G}})(),{distanceToModelLineEnd:w}=(()=>{const b=f.value.substring(Math.max(f.selectionStart,f.selectionEnd)),y=b.indexOf(`
`),S=y===-1?b:b.substring(0,y),x=S.indexOf("	"),E=x===-1?S.length:S.length-x-1,D=g.getEndPosition(),N=Math.min(this._context.viewModel.model.getLineMaxColumn(D.lineNumber)-D.column,E);return{distanceToModelLineEnd:this._context.viewModel.model.getLineMaxColumn(D.lineNumber)-D.column-N}})();this._context.viewModel.revealRange("keyboard",!0,M.fromPositions(this._selections[0].getStartPosition()),0,1),this._visibleTextArea=new Xlt(this._context,g.startLineNumber,p,_,w),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off"),this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render(),this.textArea.setClassName(`inputarea ${By} ime-input`),this._viewController.compositionStart(),this._context.viewModel.onCompositionStart()})),this._register(this._textAreaInput.onCompositionUpdate(h=>{this._visibleTextArea&&(this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render())})),this._register(this._textAreaInput.onCompositionEnd(()=>{this._visibleTextArea=null,this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off"),this._render(),this.textArea.setClassName(`inputarea ${By}`),this._viewController.compositionEnd(),this._context.viewModel.onCompositionEnd()})),this._register(this._textAreaInput.onFocus(()=>{this._context.viewModel.setHasFocus(!0)})),this._register(this._textAreaInput.onBlur(()=>{this._context.viewModel.setHasFocus(!1)})),this._register(Qk.onDidChange(()=>{this._ensureReadOnlyAttribute()}))}writeScreenReaderContent(e){this._textAreaInput.writeNativeTextAreaContent(e)}dispose(){super.dispose()}_getAndroidWordAtPosition(e){const t='`~!@#$%^&*()-=+[{]}\\|;:",.<>/?',i=this._context.viewModel.getLineContent(e.lineNumber),s=Mc(t,[]);let r=!0,o=e.column,a=!0,l=e.column,c=0;for(;c<50&&(r||a);){if(r&&o<=1&&(r=!1),r){const d=i.charCodeAt(o-2);s.get(d)!==0?r=!1:o--}if(a&&l>i.length&&(a=!1),a){const d=i.charCodeAt(l-1);s.get(d)!==0?a=!1:l++}c++}return[i.substring(o-1,l-1),e.column-o]}_getWordBeforePosition(e){const t=this._context.viewModel.getLineContent(e.lineNumber),i=Mc(this._context.configuration.options.get(132),[]);let s=e.column,r=0;for(;s>1;){const o=t.charCodeAt(s-2);if(i.get(o)!==0||r>50)return t.substring(s-1,e.column-1);r++,s--}return t.substring(0,e.column-1)}_getCharacterBeforePosition(e){if(e.column>1){const i=this._context.viewModel.getLineContent(e.lineNumber).charAt(e.column-2);if(!ks(i.charCodeAt(0)))return i}return""}_getAriaLabel(e){var i,s,r;if(e.get(2)===1){const o=(i=this._keybindingService.lookupKeybinding("editor.action.toggleScreenReaderAccessibilityMode"))==null?void 0:i.getAriaLabel(),a=(s=this._keybindingService.lookupKeybinding("workbench.action.showCommands"))==null?void 0:s.getAriaLabel(),l=(r=this._keybindingService.lookupKeybinding("workbench.action.openGlobalKeybindings"))==null?void 0:r.getAriaLabel(),c=v("accessibilityModeOff","The editor is not accessible at this time.");return o?v("accessibilityOffAriaLabel","{0} To enable screen reader optimized mode, use {1}",c,o):a?v("accessibilityOffAriaLabelNoKb","{0} To enable screen reader optimized mode, open the quick pick with {1} and run the command Toggle Screen Reader Accessibility Mode, which is currently not triggerable via keyboard.",c,a):l?v("accessibilityOffAriaLabelNoKbs","{0} Please assign a keybinding for the command Toggle Screen Reader Accessibility Mode by accessing the keybindings editor with {1} and run it.",c,l):c}return e.get(4)}_setAccessibilityOptions(e){this._accessibilitySupport=e.get(2);const t=e.get(3);this._accessibilitySupport===2&&t===Ku.accessibilityPageSize.defaultValue?this._accessibilityPageSize=500:this._accessibilityPageSize=t;const s=e.get(146).wrappingColumn;if(s!==-1&&this._accessibilitySupport!==1){const r=e.get(50);this._textAreaWrapping=!0,this._textAreaWidth=Math.round(s*r.typicalHalfwidthCharacterWidth)}else this._textAreaWrapping=!1,this._textAreaWidth=U8?0:1}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(146);this._setAccessibilityOptions(t),this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,this._contentHeight=i.height,this._fontInfo=t.get(50),this._lineHeight=t.get(67),this._emptySelectionClipboard=t.get(37),this._copyWithSyntaxHighlighting=t.get(25),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off");const{tabSize:s}=this._context.viewModel.model.getOptions();return this.textArea.domNode.style.tabSize=`${s*this._fontInfo.spaceWidth}px`,this.textArea.setAttribute("aria-label",this._getAriaLabel(t)),this.textArea.setAttribute("aria-required",t.get(5)?"true":"false"),this.textArea.setAttribute("tabindex",String(t.get(125))),(e.hasChanged(34)||e.hasChanged(92))&&this._ensureReadOnlyAttribute(),e.hasChanged(2)&&this._textAreaInput.writeNativeTextAreaContent("strategy changed"),!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),this._modelSelections=e.modelSelections.slice(0),this._textAreaInput.writeNativeTextAreaContent("selection changed"),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return this._scrollLeft=e.scrollLeft,this._scrollTop=e.scrollTop,!0}onZonesChanged(e){return!0}isFocused(){return this._textAreaInput.isFocused()}focusTextArea(){this._textAreaInput.focusTextArea()}getLastRenderData(){return this._lastRenderPosition}setAriaOptions(e){e.activeDescendant?(this.textArea.setAttribute("aria-haspopup","true"),this.textArea.setAttribute("aria-autocomplete","list"),this.textArea.setAttribute("aria-activedescendant",e.activeDescendant)):(this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),this.textArea.removeAttribute("aria-activedescendant")),e.role&&this.textArea.setAttribute("role",e.role)}_ensureReadOnlyAttribute(){const e=this._context.configuration.options;!Qk.enabled||e.get(34)&&e.get(92)?this.textArea.setAttribute("readonly","true"):this.textArea.removeAttribute("readonly")}prepareRender(e){var t;this._primaryCursorPosition=new Y(this._selections[0].positionLineNumber,this._selections[0].positionColumn),this._primaryCursorVisibleRange=e.visibleRangeForPosition(this._primaryCursorPosition),(t=this._visibleTextArea)==null||t.prepareRender(e)}render(e){this._textAreaInput.writeNativeTextAreaContent("render"),this._render()}_render(){if(this._visibleTextArea){const i=this._visibleTextArea.visibleTextareaStart,s=this._visibleTextArea.visibleTextareaEnd,r=this._visibleTextArea.startPosition,o=this._visibleTextArea.endPosition;if(r&&o&&i&&s&&s.left>=this._scrollLeft&&i.left<=this._scrollLeft+this._contentWidth){const a=this._context.viewLayout.getVerticalOffsetForLineNumber(this._primaryCursorPosition.lineNumber)-this._scrollTop,l=this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));let c=this._visibleTextArea.widthOfHiddenLineTextBefore,d=this._contentLeft+i.left-this._scrollLeft,u=s.left-i.left+1;if(d<this._contentLeft){const w=this._contentLeft-d;d+=w,c+=w,u-=w}u>this._contentWidth&&(u=this._contentWidth);const h=this._context.viewModel.getViewLineData(r.lineNumber),f=h.tokens.findTokenIndexAtOffset(r.column-1),g=h.tokens.findTokenIndexAtOffset(o.column-1),p=f===g,_=this._visibleTextArea.definePresentation(p?h.tokens.getPresentation(f):null);this.textArea.domNode.scrollTop=l*this._lineHeight,this.textArea.domNode.scrollLeft=c,this._doRender({lastRenderPosition:null,top:a,left:d,width:u,height:this._lineHeight,useCover:!1,color:(In.getColorMap()||[])[_.foreground],italic:_.italic,bold:_.bold,underline:_.underline,strikethrough:_.strikethrough})}return}if(!this._primaryCursorVisibleRange){this._renderAtTopLeft();return}const e=this._contentLeft+this._primaryCursorVisibleRange.left-this._scrollLeft;if(e<this._contentLeft||e>this._contentLeft+this._contentWidth){this._renderAtTopLeft();return}const t=this._context.viewLayout.getVerticalOffsetForLineNumber(this._selections[0].positionLineNumber)-this._scrollTop;if(t<0||t>this._contentHeight){this._renderAtTopLeft();return}if(Bt||this._accessibilitySupport===2){this._doRender({lastRenderPosition:this._primaryCursorPosition,top:t,left:this._textAreaWrapping?this._contentLeft:e,width:this._textAreaWidth,height:this._lineHeight,useCover:!1}),this.textArea.domNode.scrollLeft=this._primaryCursorVisibleRange.left;const i=this._textAreaInput.textAreaState.newlineCountBeforeSelection??this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));this.textArea.domNode.scrollTop=i*this._lineHeight;return}this._doRender({lastRenderPosition:this._primaryCursorPosition,top:t,left:this._textAreaWrapping?this._contentLeft:e,width:this._textAreaWidth,height:U8?0:1,useCover:!1})}_newlinecount(e){let t=0,i=-1;do{if(i=e.indexOf(`
`,i+1),i===-1)break;t++}while(!0);return t}_renderAtTopLeft(){this._doRender({lastRenderPosition:null,top:0,left:0,width:this._textAreaWidth,height:U8?0:1,useCover:!0})}_doRender(e){this._lastRenderPosition=e.lastRenderPosition;const t=this.textArea,i=this.textAreaCover;rr(t,this._fontInfo),t.setTop(e.top),t.setLeft(e.left),t.setWidth(e.width),t.setHeight(e.height),t.setColor(e.color?ge.Format.CSS.formatHex(e.color):""),t.setFontStyle(e.italic?"italic":""),e.bold&&t.setFontWeight("bold"),t.setTextDecoration(`${e.underline?" underline":""}${e.strikethrough?" line-through":""}`),i.setTop(e.useCover?e.top:0),i.setLeft(e.useCover?e.left:0),i.setWidth(e.useCover?e.width:0),i.setHeight(e.useCover?e.height:0);const s=this._context.configuration.options;s.get(57)?i.setClassName("monaco-editor-background textAreaCover "+TO.OUTER_CLASS_NAME):s.get(68).renderType!==0?i.setClassName("monaco-editor-background textAreaCover "+NO.CLASS_NAME):i.setClassName("monaco-editor-background textAreaCover")}};wj=Zlt([Qce(3,hi),Qce(4,Ze)],wj);function Qlt(n,e,t,i){if(e.length===0)return 0;const s=n.createElement("div");s.style.position="absolute",s.style.top="-50000px",s.style.width="50000px";const r=n.createElement("span");rr(r,t),r.style.whiteSpace="pre",r.style.tabSize=`${i*t.spaceWidth}px`,r.append(e),s.appendChild(r),n.body.appendChild(s);const o=r.offsetWidth;return s.remove(),o}const Jlt=()=>!0,ect=()=>!1,tct=n=>n===" "||n==="	";class TC{static shouldRecreate(e){return e.hasChanged(146)||e.hasChanged(132)||e.hasChanged(37)||e.hasChanged(77)||e.hasChanged(79)||e.hasChanged(80)||e.hasChanged(6)||e.hasChanged(7)||e.hasChanged(11)||e.hasChanged(9)||e.hasChanged(10)||e.hasChanged(14)||e.hasChanged(129)||e.hasChanged(50)||e.hasChanged(92)||e.hasChanged(131)}constructor(e,t,i,s){this.languageConfigurationService=s,this._cursorMoveConfigurationBrand=void 0,this._languageId=e;const r=i.options,o=r.get(146),a=r.get(50);this.readOnly=r.get(92),this.tabSize=t.tabSize,this.indentSize=t.indentSize,this.insertSpaces=t.insertSpaces,this.stickyTabStops=r.get(117),this.lineHeight=a.lineHeight,this.typicalHalfwidthCharacterWidth=a.typicalHalfwidthCharacterWidth,this.pageSize=Math.max(1,Math.floor(o.height/this.lineHeight)-2),this.useTabStops=r.get(129),this.wordSeparators=r.get(132),this.emptySelectionClipboard=r.get(37),this.copyWithSyntaxHighlighting=r.get(25),this.multiCursorMergeOverlapping=r.get(77),this.multiCursorPaste=r.get(79),this.multiCursorLimit=r.get(80),this.autoClosingBrackets=r.get(6),this.autoClosingComments=r.get(7),this.autoClosingQuotes=r.get(11),this.autoClosingDelete=r.get(9),this.autoClosingOvertype=r.get(10),this.autoSurround=r.get(14),this.autoIndent=r.get(12),this.wordSegmenterLocales=r.get(131),this.surroundingPairs={},this._electricChars=null,this.shouldAutoCloseBefore={quote:this._getShouldAutoClose(e,this.autoClosingQuotes,!0),comment:this._getShouldAutoClose(e,this.autoClosingComments,!1),bracket:this._getShouldAutoClose(e,this.autoClosingBrackets,!1)},this.autoClosingPairs=this.languageConfigurationService.getLanguageConfiguration(e).getAutoClosingPairs();const l=this.languageConfigurationService.getLanguageConfiguration(e).getSurroundingPairs();if(l)for(const d of l)this.surroundingPairs[d.open]=d.close;const c=this.languageConfigurationService.getLanguageConfiguration(e).comments;this.blockCommentStartToken=(c==null?void 0:c.blockCommentStartToken)??null}get electricChars(){var e;if(!this._electricChars){this._electricChars={};const t=(e=this.languageConfigurationService.getLanguageConfiguration(this._languageId).electricCharacter)==null?void 0:e.getElectricCharacters();if(t)for(const i of t)this._electricChars[i]=!0}return this._electricChars}onElectricCharacter(e,t,i){const s=xb(t,i-1),r=this.languageConfigurationService.getLanguageConfiguration(s.languageId).electricCharacter;return r?r.onElectricCharacter(e,s,i-s.firstCharOffset):null}normalizeIndentation(e){return fQ(e,this.indentSize,this.insertSpaces)}_getShouldAutoClose(e,t,i){switch(t){case"beforeWhitespace":return tct;case"languageDefined":return this._getLanguageDefinedShouldAutoClose(e,i);case"always":return Jlt;case"never":return ect}}_getLanguageDefinedShouldAutoClose(e,t){const i=this.languageConfigurationService.getLanguageConfiguration(e).getAutoCloseBeforeSet(t);return s=>i.indexOf(s)!==-1}visibleColumnFromColumn(e,t){return ms.visibleColumnFromColumn(e.getLineContent(t.lineNumber),t.column,this.tabSize)}columnFromVisibleColumn(e,t,i){const s=ms.columnFromVisibleColumn(e.getLineContent(t),i,this.tabSize),r=e.getLineMinColumn(t);if(s<r)return r;const o=e.getLineMaxColumn(t);return s>o?o:s}}let ni=class RSe{static fromModelState(e){return new ict(e)}static fromViewState(e){return new nct(e)}static fromModelSelection(e){const t=$e.liftSelection(e),i=new Qs(M.fromPositions(t.getSelectionStart()),0,0,t.getPosition(),0);return RSe.fromModelState(i)}static fromModelSelections(e){const t=[];for(let i=0,s=e.length;i<s;i++)t[i]=this.fromModelSelection(e[i]);return t}constructor(e,t){this._cursorStateBrand=void 0,this.modelState=e,this.viewState=t}equals(e){return this.viewState.equals(e.viewState)&&this.modelState.equals(e.modelState)}};class ict{constructor(e){this.modelState=e,this.viewState=null}}class nct{constructor(e){this.modelState=null,this.viewState=e}}class Qs{constructor(e,t,i,s,r){this.selectionStart=e,this.selectionStartKind=t,this.selectionStartLeftoverVisibleColumns=i,this.position=s,this.leftoverVisibleColumns=r,this._singleCursorStateBrand=void 0,this.selection=Qs._computeSelection(this.selectionStart,this.position)}equals(e){return this.selectionStartLeftoverVisibleColumns===e.selectionStartLeftoverVisibleColumns&&this.leftoverVisibleColumns===e.leftoverVisibleColumns&&this.selectionStartKind===e.selectionStartKind&&this.position.equals(e.position)&&this.selectionStart.equalsRange(e.selectionStart)}hasSelection(){return!this.selection.isEmpty()||!this.selectionStart.isEmpty()}move(e,t,i,s){return e?new Qs(this.selectionStart,this.selectionStartKind,this.selectionStartLeftoverVisibleColumns,new Y(t,i),s):new Qs(new M(t,i,t,i),0,s,new Y(t,i),s)}static _computeSelection(e,t){return e.isEmpty()||!t.isBeforeOrEqual(e.getStartPosition())?$e.fromPositions(e.getStartPosition(),t):$e.fromPositions(e.getEndPosition(),t)}}class fa{constructor(e,t,i){this._editOperationResultBrand=void 0,this.type=e,this.commands=t,this.shouldPushStackElementBefore=i.shouldPushStackElementBefore,this.shouldPushStackElementAfter=i.shouldPushStackElementAfter}}function H_(n){return n==="'"||n==='"'||n==="`"}class db{static columnSelect(e,t,i,s,r,o){const a=Math.abs(r-i)+1,l=i>r,c=s>o,d=s<o,u=[];for(let h=0;h<a;h++){const f=i+(l?-h:h),g=e.columnFromVisibleColumn(t,f,s),p=e.columnFromVisibleColumn(t,f,o),_=e.visibleColumnFromColumn(t,new Y(f,g)),w=e.visibleColumnFromColumn(t,new Y(f,p));d&&(_>o||w<s)||c&&(w>s||_<o)||u.push(new Qs(new M(f,g,f,g),0,0,new Y(f,p),0))}if(u.length===0)for(let h=0;h<a;h++){const f=i+(l?-h:h),g=t.getLineMaxColumn(f);u.push(new Qs(new M(f,g,f,g),0,0,new Y(f,g),0))}return{viewStates:u,reversed:l,fromLineNumber:i,fromVisualColumn:s,toLineNumber:r,toVisualColumn:o}}static columnSelectLeft(e,t,i){let s=i.toViewVisualColumn;return s>0&&s--,db.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,i.toViewLineNumber,s)}static columnSelectRight(e,t,i){let s=0;const r=Math.min(i.fromViewLineNumber,i.toViewLineNumber),o=Math.max(i.fromViewLineNumber,i.toViewLineNumber);for(let l=r;l<=o;l++){const c=t.getLineMaxColumn(l),d=e.visibleColumnFromColumn(t,new Y(l,c));s=Math.max(s,d)}let a=i.toViewVisualColumn;return a<s&&a++,this.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,i.toViewLineNumber,a)}static columnSelectUp(e,t,i,s){const r=s?e.pageSize:1,o=Math.max(1,i.toViewLineNumber-r);return this.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,o,i.toViewVisualColumn)}static columnSelectDown(e,t,i,s){const r=s?e.pageSize:1,o=Math.min(t.getLineCount(),i.toViewLineNumber+r);return this.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,o,i.toViewVisualColumn)}}class mr{constructor(e,t,i=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=i}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const s=t.getInverseEditOperations()[0].range;return $e.fromPositions(s.getEndPosition())}}class sct{constructor(e,t){this._range=e,this._text=t}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const s=t.getInverseEditOperations()[0].range;return $e.fromRange(s,0)}}class H2{constructor(e,t,i=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=i}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const s=t.getInverseEditOperations()[0].range;return $e.fromPositions(s.getStartPosition())}}class RO{constructor(e,t,i,s,r=!1){this._range=e,this._text=t,this._columnDeltaOffset=s,this._lineNumberDeltaOffset=i,this.insertsAutoWhitespace=r}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const s=t.getInverseEditOperations()[0].range;return $e.fromPositions(s.getEndPosition().delta(this._lineNumberDeltaOffset,this._columnDeltaOffset))}}class XQ{constructor(e,t,i,s=!1){this._range=e,this._text=t,this._initialSelection=i,this._forceMoveMarkers=s,this._selectionId=null}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text,this._forceMoveMarkers),this._selectionId=t.trackSelection(this._initialSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}class $8{constructor(e,t,i){this._cursorPositionBrand=void 0,this.lineNumber=e,this.column=t,this.leftoverVisibleColumns=i}}class pi{static leftPosition(e,t){if(t.column>e.getLineMinColumn(t.lineNumber))return t.delta(void 0,-p0e(e.getLineContent(t.lineNumber),t.column-1));if(t.lineNumber>1){const i=t.lineNumber-1;return new Y(i,e.getLineMaxColumn(i))}else return t}static leftPositionAtomicSoftTabs(e,t,i){if(t.column<=e.getLineIndentColumn(t.lineNumber)){const s=e.getLineMinColumn(t.lineNumber),r=e.getLineContent(t.lineNumber),o=CD.atomicPosition(r,t.column-1,i,0);if(o!==-1&&o+1>=s)return new Y(t.lineNumber,o+1)}return this.leftPosition(e,t)}static left(e,t,i){const s=e.stickyTabStops?pi.leftPositionAtomicSoftTabs(t,i,e.tabSize):pi.leftPosition(t,i);return new $8(s.lineNumber,s.column,0)}static moveLeft(e,t,i,s,r){let o,a;if(i.hasSelection()&&!s)o=i.selection.startLineNumber,a=i.selection.startColumn;else{const l=i.position.delta(void 0,-(r-1)),c=t.normalizePosition(pi.clipPositionColumn(l,t),0),d=pi.left(e,t,c);o=d.lineNumber,a=d.column}return i.move(s,o,a,0)}static clipPositionColumn(e,t){return new Y(e.lineNumber,pi.clipRange(e.column,t.getLineMinColumn(e.lineNumber),t.getLineMaxColumn(e.lineNumber)))}static clipRange(e,t,i){return e<t?t:e>i?i:e}static rightPosition(e,t,i){return i<e.getLineMaxColumn(t)?i=i+rX(e.getLineContent(t),i-1):t<e.getLineCount()&&(t=t+1,i=e.getLineMinColumn(t)),new Y(t,i)}static rightPositionAtomicSoftTabs(e,t,i,s,r){if(i<e.getLineIndentColumn(t)){const o=e.getLineContent(t),a=CD.atomicPosition(o,i-1,s,1);if(a!==-1)return new Y(t,a+1)}return this.rightPosition(e,t,i)}static right(e,t,i){const s=e.stickyTabStops?pi.rightPositionAtomicSoftTabs(t,i.lineNumber,i.column,e.tabSize,e.indentSize):pi.rightPosition(t,i.lineNumber,i.column);return new $8(s.lineNumber,s.column,0)}static moveRight(e,t,i,s,r){let o,a;if(i.hasSelection()&&!s)o=i.selection.endLineNumber,a=i.selection.endColumn;else{const l=i.position.delta(void 0,r-1),c=t.normalizePosition(pi.clipPositionColumn(l,t),1),d=pi.right(e,t,c);o=d.lineNumber,a=d.column}return i.move(s,o,a,0)}static vertical(e,t,i,s,r,o,a,l){const c=ms.visibleColumnFromColumn(t.getLineContent(i),s,e.tabSize)+r,d=t.getLineCount(),u=i===1&&s===1,h=i===d&&s===t.getLineMaxColumn(i),f=o<i?u:h;if(i=o,i<1?(i=1,a?s=t.getLineMinColumn(i):s=Math.min(t.getLineMaxColumn(i),s)):i>d?(i=d,a?s=t.getLineMaxColumn(i):s=Math.min(t.getLineMaxColumn(i),s)):s=e.columnFromVisibleColumn(t,i,c),f?r=0:r=c-ms.visibleColumnFromColumn(t.getLineContent(i),s,e.tabSize),l!==void 0){const g=new Y(i,s),p=t.normalizePosition(g,l);r=r+(s-p.column),i=p.lineNumber,s=p.column}return new $8(i,s,r)}static down(e,t,i,s,r,o,a){return this.vertical(e,t,i,s,r,i+o,a,4)}static moveDown(e,t,i,s,r){let o,a;i.hasSelection()&&!s?(o=i.selection.endLineNumber,a=i.selection.endColumn):(o=i.position.lineNumber,a=i.position.column);let l=0,c;do if(c=pi.down(e,t,o+l,a,i.leftoverVisibleColumns,r,!0),t.normalizePosition(new Y(c.lineNumber,c.column),2).lineNumber>o)break;while(l++<10&&o+l<t.getLineCount());return i.move(s,c.lineNumber,c.column,c.leftoverVisibleColumns)}static translateDown(e,t,i){const s=i.selection,r=pi.down(e,t,s.selectionStartLineNumber,s.selectionStartColumn,i.selectionStartLeftoverVisibleColumns,1,!1),o=pi.down(e,t,s.positionLineNumber,s.positionColumn,i.leftoverVisibleColumns,1,!1);return new Qs(new M(r.lineNumber,r.column,r.lineNumber,r.column),0,r.leftoverVisibleColumns,new Y(o.lineNumber,o.column),o.leftoverVisibleColumns)}static up(e,t,i,s,r,o,a){return this.vertical(e,t,i,s,r,i-o,a,3)}static moveUp(e,t,i,s,r){let o,a;i.hasSelection()&&!s?(o=i.selection.startLineNumber,a=i.selection.startColumn):(o=i.position.lineNumber,a=i.position.column);const l=pi.up(e,t,o,a,i.leftoverVisibleColumns,r,!0);return i.move(s,l.lineNumber,l.column,l.leftoverVisibleColumns)}static translateUp(e,t,i){const s=i.selection,r=pi.up(e,t,s.selectionStartLineNumber,s.selectionStartColumn,i.selectionStartLeftoverVisibleColumns,1,!1),o=pi.up(e,t,s.positionLineNumber,s.positionColumn,i.leftoverVisibleColumns,1,!1);return new Qs(new M(r.lineNumber,r.column,r.lineNumber,r.column),0,r.leftoverVisibleColumns,new Y(o.lineNumber,o.column),o.leftoverVisibleColumns)}static _isBlankLine(e,t){return e.getLineFirstNonWhitespaceColumn(t)===0}static moveToPrevBlankLine(e,t,i,s){let r=i.position.lineNumber;for(;r>1&&this._isBlankLine(t,r);)r--;for(;r>1&&!this._isBlankLine(t,r);)r--;return i.move(s,r,t.getLineMinColumn(r),0)}static moveToNextBlankLine(e,t,i,s){const r=t.getLineCount();let o=i.position.lineNumber;for(;o<r&&this._isBlankLine(t,o);)o++;for(;o<r&&!this._isBlankLine(t,o);)o++;return i.move(s,o,t.getLineMinColumn(o),0)}static moveToBeginningOfLine(e,t,i,s){const r=i.position.lineNumber,o=t.getLineMinColumn(r),a=t.getLineFirstNonWhitespaceColumn(r)||o;let l;return i.position.column===a?l=o:l=a,i.move(s,r,l,0)}static moveToEndOfLine(e,t,i,s,r){const o=i.position.lineNumber,a=t.getLineMaxColumn(o);return i.move(s,o,a,r?1073741824-a:0)}static moveToBeginningOfBuffer(e,t,i,s){return i.move(s,1,1,0)}static moveToEndOfBuffer(e,t,i,s){const r=t.getLineCount(),o=t.getLineMaxColumn(r);return i.move(s,r,o,0)}}class C0{static deleteRight(e,t,i,s){const r=[];let o=e!==3;for(let a=0,l=s.length;a<l;a++){const c=s[a];let d=c;if(d.isEmpty()){const u=c.getPosition(),h=pi.right(t,i,u);d=new M(h.lineNumber,h.column,u.lineNumber,u.column)}if(d.isEmpty()){r[a]=null;continue}d.startLineNumber!==d.endLineNumber&&(o=!0),r[a]=new mr(d,"")}return[o,r]}static isAutoClosingPairDelete(e,t,i,s,r,o,a){if(t==="never"&&i==="never"||e==="never")return!1;for(let l=0,c=o.length;l<c;l++){const d=o[l],u=d.getPosition();if(!d.isEmpty())return!1;const h=r.getLineContent(u.lineNumber);if(u.column<2||u.column>=h.length+1)return!1;const f=h.charAt(u.column-2),g=s.get(f);if(!g)return!1;if(H_(f)){if(i==="never")return!1}else if(t==="never")return!1;const p=h.charAt(u.column-1);let _=!1;for(const w of g)w.open===f&&w.close===p&&(_=!0);if(!_)return!1;if(e==="auto"){let w=!1;for(let b=0,y=a.length;b<y;b++){const S=a[b];if(u.lineNumber===S.startLineNumber&&u.column===S.startColumn){w=!0;break}}if(!w)return!1}}return!0}static _runAutoClosingPairDelete(e,t,i){const s=[];for(let r=0,o=i.length;r<o;r++){const a=i[r].getPosition(),l=new M(a.lineNumber,a.column-1,a.lineNumber,a.column+1);s[r]=new mr(l,"")}return[!0,s]}static deleteLeft(e,t,i,s,r){if(this.isAutoClosingPairDelete(t.autoClosingDelete,t.autoClosingBrackets,t.autoClosingQuotes,t.autoClosingPairs.autoClosingPairsOpenByEnd,i,s,r))return this._runAutoClosingPairDelete(t,i,s);const o=[];let a=e!==2;for(let l=0,c=s.length;l<c;l++){const d=C0.getDeleteRange(s[l],i,t);if(d.isEmpty()){o[l]=null;continue}d.startLineNumber!==d.endLineNumber&&(a=!0),o[l]=new mr(d,"")}return[a,o]}static getDeleteRange(e,t,i){if(!e.isEmpty())return e;const s=e.getPosition();if(i.useTabStops&&s.column>1){const r=t.getLineContent(s.lineNumber),o=lo(r),a=o===-1?r.length+1:o+1;if(s.column<=a){const l=i.visibleColumnFromColumn(t,s),c=ms.prevIndentTabStop(l,i.indentSize),d=i.columnFromVisibleColumn(t,s.lineNumber,c);return new M(s.lineNumber,d,s.lineNumber,s.column)}}return M.fromPositions(C0.getPositionAfterDeleteLeft(s,t),s)}static getPositionAfterDeleteLeft(e,t){if(e.column>1){const i=vKe(e.column-1,t.getLineContent(e.lineNumber));return e.with(void 0,i+1)}else if(e.lineNumber>1){const i=e.lineNumber-1;return new Y(i,t.getLineMaxColumn(i))}else return e}static cut(e,t,i){const s=[];let r=null;i.sort((o,a)=>Y.compare(o.getStartPosition(),a.getEndPosition()));for(let o=0,a=i.length;o<a;o++){const l=i[o];if(l.isEmpty())if(e.emptySelectionClipboard){const c=l.getPosition();let d,u,h,f;c.lineNumber<t.getLineCount()?(d=c.lineNumber,u=1,h=c.lineNumber+1,f=1):c.lineNumber>1&&(r==null?void 0:r.endLineNumber)!==c.lineNumber?(d=c.lineNumber-1,u=t.getLineMaxColumn(c.lineNumber-1),h=c.lineNumber,f=t.getLineMaxColumn(c.lineNumber)):(d=c.lineNumber,u=1,h=c.lineNumber,f=t.getLineMaxColumn(c.lineNumber));const g=new M(d,u,h,f);r=g,g.isEmpty()?s[o]=null:s[o]=new mr(g,"")}else s[o]=null;else s[o]=new mr(l,"")}return new fa(0,s,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}}class di{static _createWord(e,t,i,s,r){return{start:s,end:r,wordType:t,nextCharClass:i}}static _createIntlWord(e,t){return{start:e.index,end:e.index+e.segment.length,wordType:1,nextCharClass:t}}static _findPreviousWordOnLine(e,t,i){const s=t.getLineContent(i.lineNumber);return this._doFindPreviousWordOnLine(s,e,i)}static _doFindPreviousWordOnLine(e,t,i){let s=0;const r=t.findPrevIntlWordBeforeOrAtOffset(e,i.column-2);for(let o=i.column-2;o>=0;o--){const a=e.charCodeAt(o),l=t.get(a);if(r&&o===r.index)return this._createIntlWord(r,l);if(l===0){if(s===2)return this._createWord(e,s,l,o+1,this._findEndOfWord(e,t,s,o+1));s=1}else if(l===2){if(s===1)return this._createWord(e,s,l,o+1,this._findEndOfWord(e,t,s,o+1));s=2}else if(l===1&&s!==0)return this._createWord(e,s,l,o+1,this._findEndOfWord(e,t,s,o+1))}return s!==0?this._createWord(e,s,1,0,this._findEndOfWord(e,t,s,0)):null}static _findEndOfWord(e,t,i,s){const r=t.findNextIntlWordAtOrAfterOffset(e,s),o=e.length;for(let a=s;a<o;a++){const l=e.charCodeAt(a),c=t.get(l);if(r&&a===r.index+r.segment.length||c===1||i===1&&c===2||i===2&&c===0)return a}return o}static _findNextWordOnLine(e,t,i){const s=t.getLineContent(i.lineNumber);return this._doFindNextWordOnLine(s,e,i)}static _doFindNextWordOnLine(e,t,i){let s=0;const r=e.length,o=t.findNextIntlWordAtOrAfterOffset(e,i.column-1);for(let a=i.column-1;a<r;a++){const l=e.charCodeAt(a),c=t.get(l);if(o&&a===o.index)return this._createIntlWord(o,c);if(c===0){if(s===2)return this._createWord(e,s,c,this._findStartOfWord(e,t,s,a-1),a);s=1}else if(c===2){if(s===1)return this._createWord(e,s,c,this._findStartOfWord(e,t,s,a-1),a);s=2}else if(c===1&&s!==0)return this._createWord(e,s,c,this._findStartOfWord(e,t,s,a-1),a)}return s!==0?this._createWord(e,s,1,this._findStartOfWord(e,t,s,r-1),r):null}static _findStartOfWord(e,t,i,s){const r=t.findPrevIntlWordBeforeOrAtOffset(e,s);for(let o=s;o>=0;o--){const a=e.charCodeAt(o),l=t.get(a);if(r&&o===r.index)return o;if(l===1||i===1&&l===2||i===2&&l===0)return o+1}return 0}static moveWordLeft(e,t,i,s,r){let o=i.lineNumber,a=i.column;a===1&&o>1&&(o=o-1,a=t.getLineMaxColumn(o));let l=di._findPreviousWordOnLine(e,t,new Y(o,a));if(s===0)return new Y(o,l?l.start+1:1);if(s===1)return!r&&l&&l.wordType===2&&l.end-l.start===1&&l.nextCharClass===0&&(l=di._findPreviousWordOnLine(e,t,new Y(o,l.start+1))),new Y(o,l?l.start+1:1);if(s===3){for(;l&&l.wordType===2;)l=di._findPreviousWordOnLine(e,t,new Y(o,l.start+1));return new Y(o,l?l.start+1:1)}return l&&a<=l.end+1&&(l=di._findPreviousWordOnLine(e,t,new Y(o,l.start+1))),new Y(o,l?l.end+1:1)}static _moveWordPartLeft(e,t){const i=t.lineNumber,s=e.getLineMaxColumn(i);if(t.column===1)return i>1?new Y(i-1,e.getLineMaxColumn(i-1)):t;const r=e.getLineContent(i);for(let o=t.column-1;o>1;o--){const a=r.charCodeAt(o-2),l=r.charCodeAt(o-1);if(a===95&&l!==95)return new Y(i,o);if(a===45&&l!==45)return new Y(i,o);if((Cm(a)||PR(a))&&Ih(l))return new Y(i,o);if(Ih(a)&&Ih(l)&&o+1<s){const c=r.charCodeAt(o);if(Cm(c)||PR(c))return new Y(i,o)}}return new Y(i,1)}static moveWordRight(e,t,i,s){let r=i.lineNumber,o=i.column,a=!1;o===t.getLineMaxColumn(r)&&r<t.getLineCount()&&(a=!0,r=r+1,o=1);let l=di._findNextWordOnLine(e,t,new Y(r,o));if(s===2)l&&l.wordType===2&&l.end-l.start===1&&l.nextCharClass===0&&(l=di._findNextWordOnLine(e,t,new Y(r,l.end+1))),l?o=l.end+1:o=t.getLineMaxColumn(r);else if(s===3){for(a&&(o=0);l&&(l.wordType===2||l.start+1<=o);)l=di._findNextWordOnLine(e,t,new Y(r,l.end+1));l?o=l.start+1:o=t.getLineMaxColumn(r)}else l&&!a&&o>=l.start+1&&(l=di._findNextWordOnLine(e,t,new Y(r,l.end+1))),l?o=l.start+1:o=t.getLineMaxColumn(r);return new Y(r,o)}static _moveWordPartRight(e,t){const i=t.lineNumber,s=e.getLineMaxColumn(i);if(t.column===s)return i<e.getLineCount()?new Y(i+1,1):t;const r=e.getLineContent(i);for(let o=t.column+1;o<s;o++){const a=r.charCodeAt(o-2),l=r.charCodeAt(o-1);if(a!==95&&l===95)return new Y(i,o);if(a!==45&&l===45)return new Y(i,o);if((Cm(a)||PR(a))&&Ih(l))return new Y(i,o);if(Ih(a)&&Ih(l)&&o+1<s){const c=r.charCodeAt(o);if(Cm(c)||PR(c))return new Y(i,o)}}return new Y(i,s)}static _deleteWordLeftWhitespace(e,t){const i=e.getLineContent(t.lineNumber),s=t.column-2,r=Nu(i,s);return r+1<s?new M(t.lineNumber,r+2,t.lineNumber,t.column):null}static deleteWordLeft(e,t){const i=e.wordSeparators,s=e.model,r=e.selection,o=e.whitespaceHeuristics;if(!r.isEmpty())return r;if(C0.isAutoClosingPairDelete(e.autoClosingDelete,e.autoClosingBrackets,e.autoClosingQuotes,e.autoClosingPairs.autoClosingPairsOpenByEnd,e.model,[e.selection],e.autoClosedCharacters)){const u=e.selection.getPosition();return new M(u.lineNumber,u.column-1,u.lineNumber,u.column+1)}const a=new Y(r.positionLineNumber,r.positionColumn);let l=a.lineNumber,c=a.column;if(l===1&&c===1)return null;if(o){const u=this._deleteWordLeftWhitespace(s,a);if(u)return u}let d=di._findPreviousWordOnLine(i,s,a);return t===0?d?c=d.start+1:c>1?c=1:(l--,c=s.getLineMaxColumn(l)):(d&&c<=d.end+1&&(d=di._findPreviousWordOnLine(i,s,new Y(l,d.start+1))),d?c=d.end+1:c>1?c=1:(l--,c=s.getLineMaxColumn(l))),new M(l,c,a.lineNumber,a.column)}static deleteInsideWord(e,t,i){if(!i.isEmpty())return i;const s=new Y(i.positionLineNumber,i.positionColumn),r=this._deleteInsideWordWhitespace(t,s);return r||this._deleteInsideWordDetermineDeleteRange(e,t,s)}static _charAtIsWhitespace(e,t){const i=e.charCodeAt(t);return i===32||i===9}static _deleteInsideWordWhitespace(e,t){const i=e.getLineContent(t.lineNumber),s=i.length;if(s===0)return null;let r=Math.max(t.column-2,0);if(!this._charAtIsWhitespace(i,r))return null;let o=Math.min(t.column-1,s-1);if(!this._charAtIsWhitespace(i,o))return null;for(;r>0&&this._charAtIsWhitespace(i,r-1);)r--;for(;o+1<s&&this._charAtIsWhitespace(i,o+1);)o++;return new M(t.lineNumber,r+1,t.lineNumber,o+2)}static _deleteInsideWordDetermineDeleteRange(e,t,i){const s=t.getLineContent(i.lineNumber),r=s.length;if(r===0)return i.lineNumber>1?new M(i.lineNumber-1,t.getLineMaxColumn(i.lineNumber-1),i.lineNumber,1):i.lineNumber<t.getLineCount()?new M(i.lineNumber,1,i.lineNumber+1,1):new M(i.lineNumber,1,i.lineNumber,1);const o=u=>u.start+1<=i.column&&i.column<=u.end+1,a=(u,h)=>(u=Math.min(u,i.column),h=Math.max(h,i.column),new M(i.lineNumber,u,i.lineNumber,h)),l=u=>{let h=u.start+1,f=u.end+1,g=!1;for(;f-1<r&&this._charAtIsWhitespace(s,f-1);)g=!0,f++;if(!g)for(;h>1&&this._charAtIsWhitespace(s,h-2);)h--;return a(h,f)},c=di._findPreviousWordOnLine(e,t,i);if(c&&o(c))return l(c);const d=di._findNextWordOnLine(e,t,i);return d&&o(d)?l(d):c&&d?a(c.end+1,d.start+1):c?a(c.start+1,c.end+1):d?a(d.start+1,d.end+1):a(1,r+1)}static _deleteWordPartLeft(e,t){if(!t.isEmpty())return t;const i=t.getPosition(),s=di._moveWordPartLeft(e,i);return new M(i.lineNumber,i.column,s.lineNumber,s.column)}static _findFirstNonWhitespaceChar(e,t){const i=e.length;for(let s=t;s<i;s++){const r=e.charAt(s);if(r!==" "&&r!=="	")return s}return i}static _deleteWordRightWhitespace(e,t){const i=e.getLineContent(t.lineNumber),s=t.column-1,r=this._findFirstNonWhitespaceChar(i,s);return s+1<r?new M(t.lineNumber,t.column,t.lineNumber,r+1):null}static deleteWordRight(e,t){const i=e.wordSeparators,s=e.model,r=e.selection,o=e.whitespaceHeuristics;if(!r.isEmpty())return r;const a=new Y(r.positionLineNumber,r.positionColumn);let l=a.lineNumber,c=a.column;const d=s.getLineCount(),u=s.getLineMaxColumn(l);if(l===d&&c===u)return null;if(o){const f=this._deleteWordRightWhitespace(s,a);if(f)return f}let h=di._findNextWordOnLine(i,s,a);return t===2?h?c=h.end+1:c<u||l===d?c=u:(l++,h=di._findNextWordOnLine(i,s,new Y(l,1)),h?c=h.start+1:c=s.getLineMaxColumn(l)):(h&&c>=h.start+1&&(h=di._findNextWordOnLine(i,s,new Y(l,h.end+1))),h?c=h.start+1:c<u||l===d?c=u:(l++,h=di._findNextWordOnLine(i,s,new Y(l,1)),h?c=h.start+1:c=s.getLineMaxColumn(l))),new M(l,c,a.lineNumber,a.column)}static _deleteWordPartRight(e,t){if(!t.isEmpty())return t;const i=t.getPosition(),s=di._moveWordPartRight(e,i);return new M(i.lineNumber,i.column,s.lineNumber,s.column)}static _createWordAtPosition(e,t,i){const s=new M(t,i.start+1,t,i.end+1);return{word:e.getValueInRange(s),startColumn:s.startColumn,endColumn:s.endColumn}}static getWordAtPosition(e,t,i,s){const r=Mc(t,i),o=di._findPreviousWordOnLine(r,e,s);if(o&&o.wordType===1&&o.start<=s.column-1&&s.column-1<=o.end)return di._createWordAtPosition(e,s.lineNumber,o);const a=di._findNextWordOnLine(r,e,s);return a&&a.wordType===1&&a.start<=s.column-1&&s.column-1<=a.end?di._createWordAtPosition(e,s.lineNumber,a):null}static word(e,t,i,s,r){const o=Mc(e.wordSeparators,e.wordSegmenterLocales),a=di._findPreviousWordOnLine(o,t,r),l=di._findNextWordOnLine(o,t,r);if(!s){let f,g;return a&&a.wordType===1&&a.start<=r.column-1&&r.column-1<=a.end?(f=a.start+1,g=a.end+1):l&&l.wordType===1&&l.start<=r.column-1&&r.column-1<=l.end?(f=l.start+1,g=l.end+1):(a?f=a.end+1:f=1,l?g=l.start+1:g=t.getLineMaxColumn(r.lineNumber)),new Qs(new M(r.lineNumber,f,r.lineNumber,g),1,0,new Y(r.lineNumber,g),0)}let c,d;a&&a.wordType===1&&a.start<r.column-1&&r.column-1<a.end?(c=a.start+1,d=a.end+1):l&&l.wordType===1&&l.start<r.column-1&&r.column-1<l.end?(c=l.start+1,d=l.end+1):(c=r.column,d=r.column);const u=r.lineNumber;let h;if(i.selectionStart.containsPosition(r))h=i.selectionStart.endColumn;else if(r.isBeforeOrEqual(i.selectionStart.getStartPosition())){h=c;const f=new Y(u,h);i.selectionStart.containsPosition(f)&&(h=i.selectionStart.endColumn)}else{h=d;const f=new Y(u,h);i.selectionStart.containsPosition(f)&&(h=i.selectionStart.startColumn)}return i.move(!0,u,h,0)}}class WB extends di{static deleteWordPartLeft(e){const t=fA([di.deleteWordLeft(e,0),di.deleteWordLeft(e,2),di._deleteWordPartLeft(e.model,e.selection)]);return t.sort(M.compareRangesUsingEnds),t[2]}static deleteWordPartRight(e){const t=fA([di.deleteWordRight(e,0),di.deleteWordRight(e,2),di._deleteWordPartRight(e.model,e.selection)]);return t.sort(M.compareRangesUsingStarts),t[0]}static moveWordPartLeft(e,t,i,s){const r=fA([di.moveWordLeft(e,t,i,0,s),di.moveWordLeft(e,t,i,2,s),di._moveWordPartLeft(t,i)]);return r.sort(Y.compare),r[2]}static moveWordPartRight(e,t,i){const s=fA([di.moveWordRight(e,t,i,0),di.moveWordRight(e,t,i,2),di._moveWordPartRight(t,i)]);return s.sort(Y.compare),s[0]}}function fA(n){return n.filter(e=>!!e)}class Xs{static addCursorDown(e,t,i){const s=[];let r=0;for(let o=0,a=t.length;o<a;o++){const l=t[o];s[r++]=new ni(l.modelState,l.viewState),i?s[r++]=ni.fromModelState(pi.translateDown(e.cursorConfig,e.model,l.modelState)):s[r++]=ni.fromViewState(pi.translateDown(e.cursorConfig,e,l.viewState))}return s}static addCursorUp(e,t,i){const s=[];let r=0;for(let o=0,a=t.length;o<a;o++){const l=t[o];s[r++]=new ni(l.modelState,l.viewState),i?s[r++]=ni.fromModelState(pi.translateUp(e.cursorConfig,e.model,l.modelState)):s[r++]=ni.fromViewState(pi.translateUp(e.cursorConfig,e,l.viewState))}return s}static moveToBeginningOfLine(e,t,i){const s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r];s[r]=this._moveToLineStart(e,a,i)}return s}static _moveToLineStart(e,t,i){const s=t.viewState.position.column,r=t.modelState.position.column,o=s===r,a=t.viewState.position.lineNumber,l=e.getLineFirstNonWhitespaceColumn(a);return!o&&!(s===l)?this._moveToLineStartByView(e,t,i):this._moveToLineStartByModel(e,t,i)}static _moveToLineStartByView(e,t,i){return ni.fromViewState(pi.moveToBeginningOfLine(e.cursorConfig,e,t.viewState,i))}static _moveToLineStartByModel(e,t,i){return ni.fromModelState(pi.moveToBeginningOfLine(e.cursorConfig,e.model,t.modelState,i))}static moveToEndOfLine(e,t,i,s){const r=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];r[o]=this._moveToLineEnd(e,l,i,s)}return r}static _moveToLineEnd(e,t,i,s){const r=t.viewState.position,o=e.getLineMaxColumn(r.lineNumber),a=r.column===o,l=t.modelState.position,c=e.model.getLineMaxColumn(l.lineNumber),d=o-r.column===c-l.column;return a||d?this._moveToLineEndByModel(e,t,i,s):this._moveToLineEndByView(e,t,i,s)}static _moveToLineEndByView(e,t,i,s){return ni.fromViewState(pi.moveToEndOfLine(e.cursorConfig,e,t.viewState,i,s))}static _moveToLineEndByModel(e,t,i,s){return ni.fromModelState(pi.moveToEndOfLine(e.cursorConfig,e.model,t.modelState,i,s))}static expandLineSelection(e,t){const i=[];for(let s=0,r=t.length;s<r;s++){const o=t[s],a=o.modelState.selection.startLineNumber,l=e.model.getLineCount();let c=o.modelState.selection.endLineNumber,d;c===l?d=e.model.getLineMaxColumn(l):(c++,d=1),i[s]=ni.fromModelState(new Qs(new M(a,1,a,1),0,0,new Y(c,d),0))}return i}static moveToBeginningOfBuffer(e,t,i){const s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r];s[r]=ni.fromModelState(pi.moveToBeginningOfBuffer(e.cursorConfig,e.model,a.modelState,i))}return s}static moveToEndOfBuffer(e,t,i){const s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r];s[r]=ni.fromModelState(pi.moveToEndOfBuffer(e.cursorConfig,e.model,a.modelState,i))}return s}static selectAll(e,t){const i=e.model.getLineCount(),s=e.model.getLineMaxColumn(i);return ni.fromModelState(new Qs(new M(1,1,1,1),0,0,new Y(i,s),0))}static line(e,t,i,s,r){const o=e.model.validatePosition(s),a=r?e.coordinatesConverter.validateViewPosition(new Y(r.lineNumber,r.column),o):e.coordinatesConverter.convertModelPositionToViewPosition(o);if(!i){const c=e.model.getLineCount();let d=o.lineNumber+1,u=1;return d>c&&(d=c,u=e.model.getLineMaxColumn(d)),ni.fromModelState(new Qs(new M(o.lineNumber,1,d,u),2,0,new Y(d,u),0))}const l=t.modelState.selectionStart.getStartPosition().lineNumber;if(o.lineNumber<l)return ni.fromViewState(t.viewState.move(!0,a.lineNumber,1,0));if(o.lineNumber>l){const c=e.getLineCount();let d=a.lineNumber+1,u=1;return d>c&&(d=c,u=e.getLineMaxColumn(d)),ni.fromViewState(t.viewState.move(!0,d,u,0))}else{const c=t.modelState.selectionStart.getEndPosition();return ni.fromModelState(t.modelState.move(!0,c.lineNumber,c.column,0))}}static word(e,t,i,s){const r=e.model.validatePosition(s);return ni.fromModelState(di.word(e.cursorConfig,e.model,t.modelState,i,r))}static cancelSelection(e,t){if(!t.modelState.hasSelection())return new ni(t.modelState,t.viewState);const i=t.viewState.position.lineNumber,s=t.viewState.position.column;return ni.fromViewState(new Qs(new M(i,s,i,s),0,0,new Y(i,s),0))}static moveTo(e,t,i,s,r){if(i){if(t.modelState.selectionStartKind===1)return this.word(e,t,i,s);if(t.modelState.selectionStartKind===2)return this.line(e,t,i,s,r)}const o=e.model.validatePosition(s),a=r?e.coordinatesConverter.validateViewPosition(new Y(r.lineNumber,r.column),o):e.coordinatesConverter.convertModelPositionToViewPosition(o);return ni.fromViewState(t.viewState.move(i,a.lineNumber,a.column,0))}static simpleMove(e,t,i,s,r,o){switch(i){case 0:return o===4?this._moveHalfLineLeft(e,t,s):this._moveLeft(e,t,s,r);case 1:return o===4?this._moveHalfLineRight(e,t,s):this._moveRight(e,t,s,r);case 2:return o===2?this._moveUpByViewLines(e,t,s,r):this._moveUpByModelLines(e,t,s,r);case 3:return o===2?this._moveDownByViewLines(e,t,s,r):this._moveDownByModelLines(e,t,s,r);case 4:return o===2?t.map(a=>ni.fromViewState(pi.moveToPrevBlankLine(e.cursorConfig,e,a.viewState,s))):t.map(a=>ni.fromModelState(pi.moveToPrevBlankLine(e.cursorConfig,e.model,a.modelState,s)));case 5:return o===2?t.map(a=>ni.fromViewState(pi.moveToNextBlankLine(e.cursorConfig,e,a.viewState,s))):t.map(a=>ni.fromModelState(pi.moveToNextBlankLine(e.cursorConfig,e.model,a.modelState,s)));case 6:return this._moveToViewMinColumn(e,t,s);case 7:return this._moveToViewFirstNonWhitespaceColumn(e,t,s);case 8:return this._moveToViewCenterColumn(e,t,s);case 9:return this._moveToViewMaxColumn(e,t,s);case 10:return this._moveToViewLastNonWhitespaceColumn(e,t,s);default:return null}}static viewportMove(e,t,i,s,r){const o=e.getCompletelyVisibleViewRange(),a=e.coordinatesConverter.convertViewRangeToModelRange(o);switch(i){case 11:{const l=this._firstLineNumberInRange(e.model,a,r),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],s,l,c)]}case 13:{const l=this._lastLineNumberInRange(e.model,a,r),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],s,l,c)]}case 12:{const l=Math.round((a.startLineNumber+a.endLineNumber)/2),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],s,l,c)]}case 14:{const l=[];for(let c=0,d=t.length;c<d;c++){const u=t[c];l[c]=this.findPositionInViewportIfOutside(e,u,o,s)}return l}default:return null}}static findPositionInViewportIfOutside(e,t,i,s){const r=t.viewState.position.lineNumber;if(i.startLineNumber<=r&&r<=i.endLineNumber-1)return new ni(t.modelState,t.viewState);{let o;r>i.endLineNumber-1?o=i.endLineNumber-1:r<i.startLineNumber?o=i.startLineNumber:o=r;const a=pi.vertical(e.cursorConfig,e,r,t.viewState.position.column,t.viewState.leftoverVisibleColumns,o,!1);return ni.fromViewState(t.viewState.move(s,a.lineNumber,a.column,a.leftoverVisibleColumns))}}static _firstLineNumberInRange(e,t,i){let s=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(s)&&s++,Math.min(t.endLineNumber,s+i-1)}static _lastLineNumberInRange(e,t,i){let s=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(s)&&s++,Math.max(s,t.endLineNumber-i+1)}static _moveLeft(e,t,i,s){return t.map(r=>ni.fromViewState(pi.moveLeft(e.cursorConfig,e,r.viewState,i,s)))}static _moveHalfLineLeft(e,t,i){const s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.viewState.position.lineNumber,c=Math.round(e.getLineLength(l)/2);s[r]=ni.fromViewState(pi.moveLeft(e.cursorConfig,e,a.viewState,i,c))}return s}static _moveRight(e,t,i,s){return t.map(r=>ni.fromViewState(pi.moveRight(e.cursorConfig,e,r.viewState,i,s)))}static _moveHalfLineRight(e,t,i){const s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.viewState.position.lineNumber,c=Math.round(e.getLineLength(l)/2);s[r]=ni.fromViewState(pi.moveRight(e.cursorConfig,e,a.viewState,i,c))}return s}static _moveDownByViewLines(e,t,i,s){const r=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];r[o]=ni.fromViewState(pi.moveDown(e.cursorConfig,e,l.viewState,i,s))}return r}static _moveDownByModelLines(e,t,i,s){const r=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];r[o]=ni.fromModelState(pi.moveDown(e.cursorConfig,e.model,l.modelState,i,s))}return r}static _moveUpByViewLines(e,t,i,s){const r=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];r[o]=ni.fromViewState(pi.moveUp(e.cursorConfig,e,l.viewState,i,s))}return r}static _moveUpByModelLines(e,t,i,s){const r=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];r[o]=ni.fromModelState(pi.moveUp(e.cursorConfig,e.model,l.modelState,i,s))}return r}static _moveToViewPosition(e,t,i,s,r){return ni.fromViewState(t.viewState.move(i,s,r,0))}static _moveToModelPosition(e,t,i,s,r){return ni.fromModelState(t.modelState.move(i,s,r,0))}static _moveToViewMinColumn(e,t,i){const s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.viewState.position.lineNumber,c=e.getLineMinColumn(l);s[r]=this._moveToViewPosition(e,a,i,l,c)}return s}static _moveToViewFirstNonWhitespaceColumn(e,t,i){const s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.viewState.position.lineNumber,c=e.getLineFirstNonWhitespaceColumn(l);s[r]=this._moveToViewPosition(e,a,i,l,c)}return s}static _moveToViewCenterColumn(e,t,i){const s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.viewState.position.lineNumber,c=Math.round((e.getLineMaxColumn(l)+e.getLineMinColumn(l))/2);s[r]=this._moveToViewPosition(e,a,i,l,c)}return s}static _moveToViewMaxColumn(e,t,i){const s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.viewState.position.lineNumber,c=e.getLineMaxColumn(l);s[r]=this._moveToViewPosition(e,a,i,l,c)}return s}static _moveToViewLastNonWhitespaceColumn(e,t,i){const s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.viewState.position.lineNumber,c=e.getLineLastNonWhitespaceColumn(l);s[r]=this._moveToViewPosition(e,a,i,l,c)}return s}}var AO;(function(n){const e=function(i){if(!zs(i))return!1;const s=i;return!(!ca(s.to)||!ro(s.select)&&!Pwe(s.select)||!ro(s.by)&&!ca(s.by)||!ro(s.value)&&!L_(s.value))};n.metadata={description:"Move cursor to a logical position in the view",args:[{name:"Cursor move argument object",description:`Property-value pairs that can be passed through this argument:
					* 'to': A mandatory logical position value providing where to move the cursor.
						\`\`\`
						'left', 'right', 'up', 'down', 'prevBlankLine', 'nextBlankLine',
						'wrappedLineStart', 'wrappedLineEnd', 'wrappedLineColumnCenter'
						'wrappedLineFirstNonWhitespaceCharacter', 'wrappedLineLastNonWhitespaceCharacter'
						'viewPortTop', 'viewPortCenter', 'viewPortBottom', 'viewPortIfOutside'
						\`\`\`
					* 'by': Unit to move. Default is computed based on 'to' value.
						\`\`\`
						'line', 'wrappedLine', 'character', 'halfLine'
						\`\`\`
					* 'value': Number of units to move. Default is '1'.
					* 'select': If 'true' makes the selection. Default is 'false'.
				`,constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["left","right","up","down","prevBlankLine","nextBlankLine","wrappedLineStart","wrappedLineEnd","wrappedLineColumnCenter","wrappedLineFirstNonWhitespaceCharacter","wrappedLineLastNonWhitespaceCharacter","viewPortTop","viewPortCenter","viewPortBottom","viewPortIfOutside"]},by:{type:"string",enum:["line","wrappedLine","character","halfLine"]},value:{type:"number",default:1},select:{type:"boolean",default:!1}}}}]},n.RawDirection={Left:"left",Right:"right",Up:"up",Down:"down",PrevBlankLine:"prevBlankLine",NextBlankLine:"nextBlankLine",WrappedLineStart:"wrappedLineStart",WrappedLineFirstNonWhitespaceCharacter:"wrappedLineFirstNonWhitespaceCharacter",WrappedLineColumnCenter:"wrappedLineColumnCenter",WrappedLineEnd:"wrappedLineEnd",WrappedLineLastNonWhitespaceCharacter:"wrappedLineLastNonWhitespaceCharacter",ViewPortTop:"viewPortTop",ViewPortCenter:"viewPortCenter",ViewPortBottom:"viewPortBottom",ViewPortIfOutside:"viewPortIfOutside"},n.RawUnit={Line:"line",WrappedLine:"wrappedLine",Character:"character",HalfLine:"halfLine"};function t(i){if(!i.to)return null;let s;switch(i.to){case n.RawDirection.Left:s=0;break;case n.RawDirection.Right:s=1;break;case n.RawDirection.Up:s=2;break;case n.RawDirection.Down:s=3;break;case n.RawDirection.PrevBlankLine:s=4;break;case n.RawDirection.NextBlankLine:s=5;break;case n.RawDirection.WrappedLineStart:s=6;break;case n.RawDirection.WrappedLineFirstNonWhitespaceCharacter:s=7;break;case n.RawDirection.WrappedLineColumnCenter:s=8;break;case n.RawDirection.WrappedLineEnd:s=9;break;case n.RawDirection.WrappedLineLastNonWhitespaceCharacter:s=10;break;case n.RawDirection.ViewPortTop:s=11;break;case n.RawDirection.ViewPortBottom:s=13;break;case n.RawDirection.ViewPortCenter:s=12;break;case n.RawDirection.ViewPortIfOutside:s=14;break;default:return null}let r=0;switch(i.by){case n.RawUnit.Line:r=1;break;case n.RawUnit.WrappedLine:r=2;break;case n.RawUnit.Character:r=3;break;case n.RawUnit.HalfLine:r=4;break}return{direction:s,unit:r,select:!!i.select,value:i.value||1}}n.parse=t})(AO||(AO={}));class QQ{constructor(e,t,i){this._indentRulesSupport=t,this._indentationLineProcessor=new ASe(e,i)}shouldIncrease(e,t){const i=this._indentationLineProcessor.getProcessedLine(e,t);return this._indentRulesSupport.shouldIncrease(i)}shouldDecrease(e,t){const i=this._indentationLineProcessor.getProcessedLine(e,t);return this._indentRulesSupport.shouldDecrease(i)}shouldIgnore(e,t){const i=this._indentationLineProcessor.getProcessedLine(e,t);return this._indentRulesSupport.shouldIgnore(i)}shouldIndentNextLine(e,t){const i=this._indentationLineProcessor.getProcessedLine(e,t);return this._indentRulesSupport.shouldIndentNextLine(i)}}class JQ{constructor(e,t){this.model=e,this.indentationLineProcessor=new ASe(e,t)}getProcessedTokenContextAroundRange(e){const t=this._getProcessedTokensBeforeRange(e),i=this._getProcessedTokensAfterRange(e),s=this._getProcessedPreviousLineTokens(e);return{beforeRangeProcessedTokens:t,afterRangeProcessedTokens:i,previousLineProcessedTokens:s}}_getProcessedTokensBeforeRange(e){this.model.tokenization.forceTokenization(e.startLineNumber);const t=this.model.tokenization.getLineTokens(e.startLineNumber),i=xb(t,e.startColumn-1);let s;if(eJ(this.model,e.getStartPosition())){const o=e.startColumn-1-i.firstCharOffset,a=i.firstCharOffset,l=a+o;s=t.sliceAndInflate(a,l,0)}else{const o=e.startColumn-1;s=t.sliceAndInflate(0,o,0)}return this.indentationLineProcessor.getProcessedTokens(s)}_getProcessedTokensAfterRange(e){const t=e.isEmpty()?e.getStartPosition():e.getEndPosition();this.model.tokenization.forceTokenization(t.lineNumber);const i=this.model.tokenization.getLineTokens(t.lineNumber),s=xb(i,t.column-1),r=t.column-1-s.firstCharOffset,o=s.firstCharOffset+r,a=s.firstCharOffset+s.getLineLength(),l=i.sliceAndInflate(o,a,0);return this.indentationLineProcessor.getProcessedTokens(l)}_getProcessedPreviousLineTokens(e){const t=f=>{this.model.tokenization.forceTokenization(f);const g=this.model.tokenization.getLineTokens(f),p=this.model.getLineMaxColumn(f)-1;return xb(g,p)};this.model.tokenization.forceTokenization(e.startLineNumber);const i=this.model.tokenization.getLineTokens(e.startLineNumber),s=xb(i,e.startColumn-1),r=Ks.createEmpty("",s.languageIdCodec),o=e.startLineNumber-1;if(o===0||!(s.firstCharOffset===0))return r;const c=t(o);if(!(s.languageId===c.languageId))return r;const u=c.toIViewLineTokens();return this.indentationLineProcessor.getProcessedTokens(u)}}class ASe{constructor(e,t){this.model=e,this.languageConfigurationService=t}getProcessedLine(e,t){var o,a;const i=(l,c)=>{const d=Ni(l);return c+l.substring(d.length)};(a=(o=this.model.tokenization).forceTokenization)==null||a.call(o,e);const s=this.model.tokenization.getLineTokens(e);let r=this.getProcessedTokens(s).getLineContent();return t!==void 0&&(r=i(r,t)),r}getProcessedTokens(e){const t=l=>l===2||l===3||l===1,i=e.getLanguageId(0),r=this.languageConfigurationService.getLanguageConfiguration(i).bracketsNew.getBracketRegExp({global:!0}),o=[];return e.forEach(l=>{const c=e.getStandardTokenType(l);let d=e.getTokenText(l);t(c)&&(d=d.replace(r,""));const u=e.getMetadata(l);o.push({text:d,metadata:u})}),Ks.createFromTextAndMetadata(o,e.languageIdCodec)}}function eJ(n,e){n.tokenization.forceTokenization(e.lineNumber);const t=n.tokenization.getLineTokens(e.lineNumber),i=xb(t,e.column-1),s=i.firstCharOffset===0,r=t.getLanguageId(0)===i.languageId;return!s&&!r}function Wy(n,e,t,i){e.tokenization.forceTokenization(t.startLineNumber);const s=e.getLanguageIdAtPosition(t.startLineNumber,t.startColumn),r=i.getLanguageConfiguration(s);if(!r)return null;const a=new JQ(e,i).getProcessedTokenContextAroundRange(t),l=a.previousLineProcessedTokens.getLineContent(),c=a.beforeRangeProcessedTokens.getLineContent(),d=a.afterRangeProcessedTokens.getLineContent(),u=r.onEnter(n,l,c,d);if(!u)return null;const h=u.indentAction;let f=u.appendText;const g=u.removeText||0;f?h===os.Indent&&(f="	"+f):h===os.Indent||h===os.IndentOutdent?f="	":f="";let p=gCe(e,t.startLineNumber,t.startColumn);return g&&(p=p.substring(0,p.length-g)),{indentAction:h,appendText:f,removeText:g,indentation:p}}var rct=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},oct=function(n,e){return function(t,i){e(t,i,n)}},V2;const j8=Object.create(null);function Dv(n,e){if(e<=0)return"";j8[n]||(j8[n]=["",n]);const t=j8[n];for(let i=t.length;i<=e;i++)t[i]=t[i-1]+n;return t[e]}let Oc=V2=class{static unshiftIndent(e,t,i,s,r){const o=ms.visibleColumnFromColumn(e,t,i);if(r){const a=Dv(" ",s),c=ms.prevIndentTabStop(o,s)/s;return Dv(a,c)}else{const a="	",c=ms.prevRenderTabStop(o,i)/i;return Dv(a,c)}}static shiftIndent(e,t,i,s,r){const o=ms.visibleColumnFromColumn(e,t,i);if(r){const a=Dv(" ",s),c=ms.nextIndentTabStop(o,s)/s;return Dv(a,c)}else{const a="	",c=ms.nextRenderTabStop(o,i)/i;return Dv(a,c)}}constructor(e,t,i){this._languageConfigurationService=i,this._opts=t,this._selection=e,this._selectionId=null,this._useLastEditRangeForCursorEndPosition=!1,this._selectionStartColumnStaysPut=!1}_addEditOperation(e,t,i){this._useLastEditRangeForCursorEndPosition?e.addTrackedEditOperation(t,i):e.addEditOperation(t,i)}getEditOperations(e,t){const i=this._selection.startLineNumber;let s=this._selection.endLineNumber;this._selection.endColumn===1&&i!==s&&(s=s-1);const{tabSize:r,indentSize:o,insertSpaces:a}=this._opts,l=i===s;if(this._opts.useTabStops){this._selection.isEmpty()&&/^\s*$/.test(e.getLineContent(i))&&(this._useLastEditRangeForCursorEndPosition=!0);let c=0,d=0;for(let u=i;u<=s;u++,c=d){d=0;const h=e.getLineContent(u);let f=lo(h);if(this._opts.isUnshift&&(h.length===0||f===0)||!l&&!this._opts.isUnshift&&h.length===0)continue;if(f===-1&&(f=h.length),u>1&&ms.visibleColumnFromColumn(h,f+1,r)%o!==0&&e.tokenization.isCheapToTokenize(u-1)){const _=Wy(this._opts.autoIndent,e,new M(u-1,e.getLineMaxColumn(u-1),u-1,e.getLineMaxColumn(u-1)),this._languageConfigurationService);if(_){if(d=c,_.appendText)for(let w=0,b=_.appendText.length;w<b&&d<o&&_.appendText.charCodeAt(w)===32;w++)d++;_.removeText&&(d=Math.max(0,d-_.removeText));for(let w=0;w<d&&!(f===0||h.charCodeAt(f-1)!==32);w++)f--}}if(this._opts.isUnshift&&f===0)continue;let g;this._opts.isUnshift?g=V2.unshiftIndent(h,f+1,r,o,a):g=V2.shiftIndent(h,f+1,r,o,a),this._addEditOperation(t,new M(u,1,u,f+1),g),u===i&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn<=f+1)}}else{!this._opts.isUnshift&&this._selection.isEmpty()&&e.getLineLength(i)===0&&(this._useLastEditRangeForCursorEndPosition=!0);const c=a?Dv(" ",o):"	";for(let d=i;d<=s;d++){const u=e.getLineContent(d);let h=lo(u);if(!(this._opts.isUnshift&&(u.length===0||h===0))&&!(!l&&!this._opts.isUnshift&&u.length===0)&&(h===-1&&(h=u.length),!(this._opts.isUnshift&&h===0)))if(this._opts.isUnshift){h=Math.min(h,o);for(let f=0;f<h;f++)if(u.charCodeAt(f)===9){h=f+1;break}this._addEditOperation(t,new M(d,1,d,h+1),"")}else this._addEditOperation(t,new M(d,1,d,1),c),d===i&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn===1)}}this._selectionId=t.trackSelection(this._selection)}computeCursorState(e,t){if(this._useLastEditRangeForCursorEndPosition){const s=t.getInverseEditOperations()[0];return new $e(s.range.endLineNumber,s.range.endColumn,s.range.endLineNumber,s.range.endColumn)}const i=t.getTrackedSelection(this._selectionId);if(this._selectionStartColumnStaysPut){const s=this._selection.startColumn;return i.startColumn<=s?i:i.getDirection()===0?new $e(i.startLineNumber,s,i.endLineNumber,i.endColumn):new $e(i.endLineNumber,i.endColumn,i.startLineNumber,s)}return i}};Oc=V2=rct([oct(2,vn)],Oc);class act{constructor(e,t,i){this._range=e,this._charBeforeSelection=t,this._charAfterSelection=i}getEditOperations(e,t){t.addTrackedEditOperation(new M(this._range.startLineNumber,this._range.startColumn,this._range.startLineNumber,this._range.startColumn),this._charBeforeSelection),t.addTrackedEditOperation(new M(this._range.endLineNumber,this._range.endColumn,this._range.endLineNumber,this._range.endColumn),this._charAfterSelection)}computeCursorState(e,t){const i=t.getInverseEditOperations(),s=i[0].range,r=i[1].range;return new $e(s.endLineNumber,s.endColumn,r.endLineNumber,r.endColumn-this._charAfterSelection.length)}}class lct{constructor(e,t,i){this._position=e,this._text=t,this._charAfter=i}getEditOperations(e,t){t.addTrackedEditOperation(new M(this._position.lineNumber,this._position.column,this._position.lineNumber,this._position.column),this._text+this._charAfter)}computeCursorState(e,t){const s=t.getInverseEditOperations()[0].range;return new $e(s.endLineNumber,s.startColumn,s.endLineNumber,s.endColumn-this._charAfter.length)}}function cct(n,e,t){const i=n.tokenization.getLanguageIdAtPosition(e,0);if(e>1){let s,r=-1;for(s=e-1;s>=1;s--){if(n.tokenization.getLanguageIdAtPosition(s,0)!==i)return r;const o=n.getLineContent(s);if(t.shouldIgnore(s)||/^\s+$/.test(o)||o===""){r=s;continue}return s}}return-1}function SD(n,e,t,i=!0,s){if(n<4)return null;const r=s.getLanguageConfiguration(e.tokenization.getLanguageId()).indentRulesSupport;if(!r)return null;const o=new QQ(e,r,s);if(t<=1)return{indentation:"",action:null};for(let l=t-1;l>0&&e.getLineContent(l)==="";l--)if(l===1)return{indentation:"",action:null};const a=cct(e,t,o);if(a<0)return null;if(a<1)return{indentation:"",action:null};if(o.shouldIncrease(a)||o.shouldIndentNextLine(a)){const l=e.getLineContent(a);return{indentation:Ni(l),action:os.Indent,line:a}}else if(o.shouldDecrease(a)){const l=e.getLineContent(a);return{indentation:Ni(l),action:null,line:a}}else{if(a===1)return{indentation:Ni(e.getLineContent(a)),action:null,line:a};const l=a-1,c=r.getIndentMetadata(e.getLineContent(l));if(!(c&3)&&c&4){let d=0;for(let u=l-1;u>0;u--)if(!o.shouldIndentNextLine(u)){d=u;break}return{indentation:Ni(e.getLineContent(d+1)),action:null,line:d+1}}if(i)return{indentation:Ni(e.getLineContent(a)),action:null,line:a};for(let d=a;d>0;d--){if(o.shouldIncrease(d))return{indentation:Ni(e.getLineContent(d)),action:os.Indent,line:d};if(o.shouldIndentNextLine(d)){let u=0;for(let h=d-1;h>0;h--)if(!o.shouldIndentNextLine(d)){u=h;break}return{indentation:Ni(e.getLineContent(u+1)),action:null,line:u+1}}else if(o.shouldDecrease(d))return{indentation:Ni(e.getLineContent(d)),action:null,line:d}}return{indentation:Ni(e.getLineContent(1)),action:null,line:1}}}function fE(n,e,t,i,s,r){if(n<4)return null;const o=r.getLanguageConfiguration(t);if(!o)return null;const a=r.getLanguageConfiguration(t).indentRulesSupport;if(!a)return null;const l=new QQ(e,a,r),c=SD(n,e,i,void 0,r);if(c){const d=c.line;if(d!==void 0){let u=!0;for(let h=d;h<i-1;h++)if(!/^\s*$/.test(e.getLineContent(h))){u=!1;break}if(u){const h=o.onEnter(n,"",e.getLineContent(d),"");if(h){let f=Ni(e.getLineContent(d));return h.removeText&&(f=f.substring(0,f.length-h.removeText)),h.indentAction===os.Indent||h.indentAction===os.IndentOutdent?f=s.shiftIndent(f):h.indentAction===os.Outdent&&(f=s.unshiftIndent(f)),l.shouldDecrease(i)&&(f=s.unshiftIndent(f)),h.appendText&&(f+=h.appendText),Ni(f)}}}return l.shouldDecrease(i)?c.action===os.Indent?c.indentation:s.unshiftIndent(c.indentation):c.action===os.Indent?s.shiftIndent(c.indentation):c.indentation}return null}function dct(n,e,t,i,s){if(n<4)return null;const r=e.getLanguageIdAtPosition(t.startLineNumber,t.startColumn),o=s.getLanguageConfiguration(r).indentRulesSupport;if(!o)return null;e.tokenization.forceTokenization(t.startLineNumber);const l=new JQ(e,s).getProcessedTokenContextAroundRange(t),c=l.afterRangeProcessedTokens,d=l.beforeRangeProcessedTokens,u=Ni(d.getLineContent()),h=hct(e,t.startLineNumber,d),f=eJ(e,t.getStartPosition()),g=e.getLineContent(t.startLineNumber),p=Ni(g),_=SD(n,h,t.startLineNumber+1,void 0,s);if(!_){const b=f?p:u;return{beforeEnter:b,afterEnter:b}}let w=f?p:_.indentation;return _.action===os.Indent&&(w=i.shiftIndent(w)),o.shouldDecrease(c.getLineContent())&&(w=i.unshiftIndent(w)),{beforeEnter:f?p:u,afterEnter:w}}function uct(n,e,t,i,s,r){const o=n.autoIndent;if(o<4||eJ(e,t.getStartPosition()))return null;const l=e.getLanguageIdAtPosition(t.startLineNumber,t.startColumn),c=r.getLanguageConfiguration(l).indentRulesSupport;if(!c)return null;const u=new JQ(e,r).getProcessedTokenContextAroundRange(t),h=u.beforeRangeProcessedTokens.getLineContent(),f=u.afterRangeProcessedTokens.getLineContent(),g=h+f,p=h+i+f;if(!c.shouldDecrease(g)&&c.shouldDecrease(p)){const w=SD(o,e,t.startLineNumber,!1,r);if(!w)return null;let b=w.indentation;return w.action!==os.Indent&&(b=s.unshiftIndent(b)),b}const _=t.startLineNumber-1;if(_>0){const w=e.getLineContent(_);if(c.shouldIndentNextLine(w)&&c.shouldIncrease(p)){const b=SD(o,e,t.startLineNumber,!1,r),y=b==null?void 0:b.indentation;if(y!==void 0){const S=e.getLineContent(t.startLineNumber),x=Ni(S),D=s.shiftIndent(y)===x,N=/^\s*$/.test(g),I=n.autoClosingPairs.autoClosingPairsOpenByEnd.get(i),z=I&&I.length>0&&N;if(D&&z)return y}}}return null}function MSe(n,e,t){const i=t.getLanguageConfiguration(n.getLanguageId()).indentRulesSupport;return!i||e<1||e>n.getLineCount()?null:i.getIndentMetadata(n.getLineContent(e))}function hct(n,e,t){return{tokenization:{getLineTokens:s=>s===e?t:n.tokenization.getLineTokens(s),getLanguageId:()=>n.getLanguageId(),getLanguageIdAtPosition:(s,r)=>n.getLanguageIdAtPosition(s,r)},getLineContent:s=>s===e?t.getLineContent():n.getLineContent(s)}}class fct{static getEdits(e,t,i,s,r){if(!r&&this._isAutoIndentType(e,t,i)){const o=[];for(const l of i){const c=this._findActualIndentationForSelection(e,t,l,s);if(c===null)return;o.push({selection:l,indentation:c})}const a=Cj.getAutoClosingPairClose(e,t,i,s,!1);return this._getIndentationAndAutoClosingPairEdits(e,t,o,s,a)}}static _isAutoIndentType(e,t,i){if(e.autoIndent<4)return!1;for(let s=0,r=i.length;s<r;s++)if(!t.tokenization.isCheapToTokenize(i[s].getEndPosition().lineNumber))return!1;return!0}static _findActualIndentationForSelection(e,t,i,s){const r=uct(e,t,i,s,{shiftIndent:a=>nJ(e,a),unshiftIndent:a=>MO(e,a)},e.languageConfigurationService);if(r===null)return null;const o=gCe(t,i.startLineNumber,i.startColumn);return r===e.normalizeIndentation(o)?null:r}static _getIndentationAndAutoClosingPairEdits(e,t,i,s,r){const o=i.map(({selection:l,indentation:c})=>{if(r!==null){const d=this._getEditFromIndentationAndSelection(e,t,c,l,s,!1);return new xct(d,l,s,r)}else{const d=this._getEditFromIndentationAndSelection(e,t,c,l,s,!0);return qv(d.range,d.text,!1)}}),a={shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1};return new fa(4,o,a)}static _getEditFromIndentationAndSelection(e,t,i,s,r,o=!0){const a=s.startLineNumber,l=t.getLineFirstNonWhitespaceColumn(a);let c=e.normalizeIndentation(i);if(l!==0){const u=t.getLineContent(a);c+=u.substring(l-1,s.startColumn-1)}return c+=o?r:"",{range:new M(a,1,s.endLineNumber,s.endColumn),text:c}}}class gct{static getEdits(e,t,i,s,r,o){if(PSe(t,i,s,r,o))return this._runAutoClosingOvertype(e,s,o)}static _runAutoClosingOvertype(e,t,i){const s=[];for(let r=0,o=t.length;r<o;r++){const l=t[r].getPosition(),c=new M(l.lineNumber,l.column,l.lineNumber,l.column+1);s[r]=new mr(c,i)}return new fa(4,s,{shouldPushStackElementBefore:VB(e,4),shouldPushStackElementAfter:!1})}}class pct{static getEdits(e,t,i,s,r){if(PSe(e,t,i,s,r)){const o=i.map(a=>new mr(new M(a.positionLineNumber,a.positionColumn,a.positionLineNumber,a.positionColumn+1),"",!1));return new fa(4,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}}}class Cj{static getEdits(e,t,i,s,r,o){if(!o){const a=this.getAutoClosingPairClose(e,t,i,s,r);if(a!==null)return this._runAutoClosingOpenCharType(i,s,r,a)}}static _runAutoClosingOpenCharType(e,t,i,s){const r=[];for(let o=0,a=e.length;o<a;o++){const l=e[o];r[o]=new Sct(l,t,!i,s)}return new fa(4,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}static getAutoClosingPairClose(e,t,i,s,r){for(const g of i)if(!g.isEmpty())return null;const o=i.map(g=>{const p=g.getPosition();return r?{lineNumber:p.lineNumber,beforeColumn:p.column-s.length,afterColumn:p.column}:{lineNumber:p.lineNumber,beforeColumn:p.column,afterColumn:p.column}}),a=this._findAutoClosingPairOpen(e,t,o.map(g=>new Y(g.lineNumber,g.beforeColumn)),s);if(!a)return null;let l,c;if(H_(s)?(l=e.autoClosingQuotes,c=e.shouldAutoCloseBefore.quote):(e.blockCommentStartToken?a.open.includes(e.blockCommentStartToken):!1)?(l=e.autoClosingComments,c=e.shouldAutoCloseBefore.comment):(l=e.autoClosingBrackets,c=e.shouldAutoCloseBefore.bracket),l==="never")return null;const u=this._findContainedAutoClosingPair(e,a),h=u?u.close:"";let f=!0;for(const g of o){const{lineNumber:p,beforeColumn:_,afterColumn:w}=g,b=t.getLineContent(p),y=b.substring(0,_-1),S=b.substring(w-1);if(S.startsWith(h)||(f=!1),S.length>0){const N=S.charAt(0);if(!this._isBeforeClosingBrace(e,S)&&!c(N))return null}if(a.open.length===1&&(s==="'"||s==='"')&&l!=="always"){const N=Mc(e.wordSeparators,[]);if(y.length>0){const I=y.charCodeAt(y.length-1);if(N.get(I)===0)return null}}if(!t.tokenization.isCheapToTokenize(p))return null;t.tokenization.forceTokenization(p);const x=t.tokenization.getLineTokens(p),E=xb(x,_-1);if(!a.shouldAutoClose(E,_-E.firstCharOffset))return null;const D=a.findNeutralCharacter();if(D){const N=t.tokenization.getTokenTypeIfInsertingCharacter(p,_,D);if(!a.isOK(N))return null}}return f?a.close.substring(0,a.close.length-h.length):a.close}static _findContainedAutoClosingPair(e,t){if(t.open.length<=1)return null;const i=t.close.charAt(t.close.length-1),s=e.autoClosingPairs.autoClosingPairsCloseByEnd.get(i)||[];let r=null;for(const o of s)o.open!==t.open&&t.open.includes(o.open)&&t.close.endsWith(o.close)&&(!r||o.open.length>r.open.length)&&(r=o);return r}static _findAutoClosingPairOpen(e,t,i,s){const r=e.autoClosingPairs.autoClosingPairsOpenByEnd.get(s);if(!r)return null;let o=null;for(const a of r)if(o===null||a.open.length>o.open.length){let l=!0;for(const c of i)if(t.getValueInRange(new M(c.lineNumber,c.column-a.open.length+1,c.lineNumber,c.column))+s!==a.open){l=!1;break}l&&(o=a)}return o}static _isBeforeClosingBrace(e,t){const i=t.charAt(0),s=e.autoClosingPairs.autoClosingPairsOpenByStart.get(i)||[],r=e.autoClosingPairs.autoClosingPairsCloseByStart.get(i)||[],o=s.some(l=>t.startsWith(l.open)),a=r.some(l=>t.startsWith(l.close));return!o&&a}}class mct{static getEdits(e,t,i,s,r){if(!r&&this._isSurroundSelectionType(e,t,i,s))return this._runSurroundSelectionType(e,i,s)}static _runSurroundSelectionType(e,t,i){const s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=e.surroundingPairs[i];s[r]=new act(a,i,l)}return new fa(0,s,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _isSurroundSelectionType(e,t,i,s){if(!OSe(e,s)||!e.surroundingPairs.hasOwnProperty(s))return!1;const r=H_(s);for(const o of i){if(o.isEmpty())return!1;let a=!0;for(let l=o.startLineNumber;l<=o.endLineNumber;l++){const c=t.getLineContent(l),d=l===o.startLineNumber?o.startColumn-1:0,u=l===o.endLineNumber?o.endColumn-1:c.length,h=c.substring(d,u);if(/[^ \t]/.test(h)){a=!1;break}}if(a)return!1;if(r&&o.startLineNumber===o.endLineNumber&&o.startColumn+1===o.endColumn){const l=t.getValueInRange(o);if(H_(l))return!1}}return!0}}class _ct{static getEdits(e,t,i,s,r,o){if(!o&&this._isTypeInterceptorElectricChar(t,i,s)){const a=this._typeInterceptorElectricChar(e,t,i,s[0],r);if(a)return a}}static _isTypeInterceptorElectricChar(e,t,i){return!!(i.length===1&&t.tokenization.isCheapToTokenize(i[0].getEndPosition().lineNumber))}static _typeInterceptorElectricChar(e,t,i,s,r){if(!t.electricChars.hasOwnProperty(r)||!s.isEmpty())return null;const o=s.getPosition();i.tokenization.forceTokenization(o.lineNumber);const a=i.tokenization.getLineTokens(o.lineNumber);let l;try{l=t.onElectricCharacter(r,a,o.column)}catch(c){return pt(c),null}if(!l)return null;if(l.matchOpenBracket){const c=(a.getLineContent()+r).lastIndexOf(l.matchOpenBracket)+1,d=i.bracketPairs.findMatchingBracketUp(l.matchOpenBracket,{lineNumber:o.lineNumber,column:c},500);if(d){if(d.startLineNumber===o.lineNumber)return null;const u=i.getLineContent(d.startLineNumber),h=Ni(u),f=t.normalizeIndentation(h),g=i.getLineContent(o.lineNumber),p=i.getLineFirstNonWhitespaceColumn(o.lineNumber)||o.column,_=g.substring(p-1,o.column-1),w=f+_+r,b=new M(o.lineNumber,1,o.lineNumber,o.column),y=new mr(b,w);return new fa(iJ(w,e),[y],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!0})}}return null}}class vct{static getEdits(e,t,i){const s=[];for(let o=0,a=t.length;o<a;o++)s[o]=new mr(t[o],i);const r=iJ(i,e);return new fa(r,s,{shouldPushStackElementBefore:VB(e,r),shouldPushStackElementAfter:!1})}}class HB{static getEdits(e,t,i,s,r){if(!r&&s===`
`){const o=[];for(let a=0,l=i.length;a<l;a++)o[a]=this._enter(e,t,!1,i[a]);return new fa(4,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}}static _enter(e,t,i,s){if(e.autoIndent===0)return qv(s,`
`,i);if(!t.tokenization.isCheapToTokenize(s.getStartPosition().lineNumber)||e.autoIndent===1){const l=t.getLineContent(s.startLineNumber),c=Ni(l).substring(0,s.startColumn-1);return qv(s,`
`+e.normalizeIndentation(c),i)}const r=Wy(e.autoIndent,t,s,e.languageConfigurationService);if(r){if(r.indentAction===os.None)return qv(s,`
`+e.normalizeIndentation(r.indentation+r.appendText),i);if(r.indentAction===os.Indent)return qv(s,`
`+e.normalizeIndentation(r.indentation+r.appendText),i);if(r.indentAction===os.IndentOutdent){const l=e.normalizeIndentation(r.indentation),c=e.normalizeIndentation(r.indentation+r.appendText),d=`
`+c+`
`+l;return i?new H2(s,d,!0):new RO(s,d,-1,c.length-l.length,!0)}else if(r.indentAction===os.Outdent){const l=MO(e,r.indentation);return qv(s,`
`+e.normalizeIndentation(l+r.appendText),i)}}const o=t.getLineContent(s.startLineNumber),a=Ni(o).substring(0,s.startColumn-1);if(e.autoIndent>=4){const l=dct(e.autoIndent,t,s,{unshiftIndent:c=>MO(e,c),shiftIndent:c=>nJ(e,c),normalizeIndentation:c=>e.normalizeIndentation(c)},e.languageConfigurationService);if(l){let c=e.visibleColumnFromColumn(t,s.getEndPosition());const d=s.endColumn,u=t.getLineContent(s.endLineNumber),h=lo(u);if(h>=0?s=s.setEndPosition(s.endLineNumber,Math.max(s.endColumn,h+1)):s=s.setEndPosition(s.endLineNumber,t.getLineMaxColumn(s.endLineNumber)),i)return new H2(s,`
`+e.normalizeIndentation(l.afterEnter),!0);{let f=0;return d<=h+1&&(e.insertSpaces||(c=Math.ceil(c/e.indentSize)),f=Math.min(c+1-e.normalizeIndentation(l.afterEnter).length-1,0)),new RO(s,`
`+e.normalizeIndentation(l.afterEnter),0,f,!0)}}}return qv(s,`
`+e.normalizeIndentation(a),i)}static lineInsertBefore(e,t,i){if(t===null||i===null)return[];const s=[];for(let r=0,o=i.length;r<o;r++){let a=i[r].positionLineNumber;if(a===1)s[r]=new H2(new M(1,1,1,1),`
`);else{a--;const l=t.getLineMaxColumn(a);s[r]=this._enter(e,t,!1,new M(a,l,a,l))}}return s}static lineInsertAfter(e,t,i){if(t===null||i===null)return[];const s=[];for(let r=0,o=i.length;r<o;r++){const a=i[r].positionLineNumber,l=t.getLineMaxColumn(a);s[r]=this._enter(e,t,!1,new M(a,l,a,l))}return s}static lineBreakInsert(e,t,i){const s=[];for(let r=0,o=i.length;r<o;r++)s[r]=this._enter(e,t,!0,i[r]);return s}}class bct{static getEdits(e,t,i,s,r,o){const a=this._distributePasteToCursors(e,i,s,r,o);return a?(i=i.sort(M.compareRangesUsingStarts),this._distributedPaste(e,t,i,a)):this._simplePaste(e,t,i,s,r)}static _distributePasteToCursors(e,t,i,s,r){if(s||t.length===1)return null;if(r&&r.length===t.length)return r;if(e.multiCursorPaste==="spread"){i.charCodeAt(i.length-1)===10&&(i=i.substring(0,i.length-1)),i.charCodeAt(i.length-1)===13&&(i=i.substring(0,i.length-1));const o=mf(i);if(o.length===t.length)return o}return null}static _distributedPaste(e,t,i,s){const r=[];for(let o=0,a=i.length;o<a;o++)r[o]=new mr(i[o],s[o]);return new fa(0,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _simplePaste(e,t,i,s,r){const o=[];for(let a=0,l=i.length;a<l;a++){const c=i[a],d=c.getPosition();if(r&&!c.isEmpty()&&(r=!1),r&&s.indexOf(`
`)!==s.length-1&&(r=!1),r){const u=new M(d.lineNumber,1,d.lineNumber,1);o[a]=new XQ(u,s,c,!0)}else o[a]=new mr(c,s)}return new fa(0,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}}class wct{static getEdits(e,t,i,s,r,o,a,l){const c=s.map(d=>this._compositionType(i,d,r,o,a,l));return new fa(4,c,{shouldPushStackElementBefore:VB(e,4),shouldPushStackElementAfter:!1})}static _compositionType(e,t,i,s,r,o){if(!t.isEmpty())return null;const a=t.getPosition(),l=Math.max(1,a.column-s),c=Math.min(e.getLineMaxColumn(a.lineNumber),a.column+r),d=new M(a.lineNumber,l,a.lineNumber,c);return e.getValueInRange(d)===i&&o===0?null:new RO(d,i,0,o)}}class Cct{static getEdits(e,t,i){const s=[];for(let o=0,a=t.length;o<a;o++)s[o]=new mr(t[o],i);const r=iJ(i,e);return new fa(r,s,{shouldPushStackElementBefore:VB(e,r),shouldPushStackElementAfter:!1})}}class yct{static getCommands(e,t,i){const s=[];for(let r=0,o=i.length;r<o;r++){const a=i[r];if(a.isEmpty()){const l=t.getLineContent(a.startLineNumber);if(/^\s*$/.test(l)&&t.tokenization.isCheapToTokenize(a.startLineNumber)){let c=this._goodIndentForLine(e,t,a.startLineNumber);c=c||"	";const d=e.normalizeIndentation(c);if(!l.startsWith(d)){s[r]=new mr(new M(a.startLineNumber,1,a.startLineNumber,l.length+1),d,!0);continue}}s[r]=this._replaceJumpToNextIndent(e,t,a,!0)}else{if(a.startLineNumber===a.endLineNumber){const l=t.getLineMaxColumn(a.startLineNumber);if(a.startColumn!==1||a.endColumn!==l){s[r]=this._replaceJumpToNextIndent(e,t,a,!1);continue}}s[r]=new Oc(a,{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService)}}return s}static _goodIndentForLine(e,t,i){let s=null,r="";const o=SD(e.autoIndent,t,i,!1,e.languageConfigurationService);if(o)s=o.action,r=o.indentation;else if(i>1){let a;for(a=i-1;a>=1;a--){const d=t.getLineContent(a);if(Nu(d)>=0)break}if(a<1)return null;const l=t.getLineMaxColumn(a),c=Wy(e.autoIndent,t,new M(a,l,a,l),e.languageConfigurationService);c&&(r=c.indentation+c.appendText)}return s&&(s===os.Indent&&(r=nJ(e,r)),s===os.Outdent&&(r=MO(e,r)),r=e.normalizeIndentation(r)),r||null}static _replaceJumpToNextIndent(e,t,i,s){let r="";const o=i.getStartPosition();if(e.insertSpaces){const a=e.visibleColumnFromColumn(t,o),l=e.indentSize,c=l-a%l;for(let d=0;d<c;d++)r+=" "}else r="	";return new mr(i,r,s)}}class tJ extends RO{constructor(e,t,i,s,r,o){super(e,t,i,s),this._openCharacter=r,this._closeCharacter=o,this.closeCharacterRange=null,this.enclosingRange=null}_computeCursorStateWithRange(e,t,i){return this.closeCharacterRange=new M(t.startLineNumber,t.endColumn-this._closeCharacter.length,t.endLineNumber,t.endColumn),this.enclosingRange=new M(t.startLineNumber,t.endColumn-this._openCharacter.length-this._closeCharacter.length,t.endLineNumber,t.endColumn),super.computeCursorState(e,i)}}class Sct extends tJ{constructor(e,t,i,s){const r=(i?t:"")+s,o=0,a=-s.length;super(e,r,o,a,t,s)}computeCursorState(e,t){const s=t.getInverseEditOperations()[0].range;return this._computeCursorStateWithRange(e,s,t)}}class xct extends tJ{constructor(e,t,i,s){const r=i+s,o=0,a=i.length;super(t,r,o,a,i,s),this._autoIndentationEdit=e,this._autoClosingEdit={range:t,text:r}}getEditOperations(e,t){t.addTrackedEditOperation(this._autoIndentationEdit.range,this._autoIndentationEdit.text),t.addTrackedEditOperation(this._autoClosingEdit.range,this._autoClosingEdit.text)}computeCursorState(e,t){const i=t.getInverseEditOperations();if(i.length!==2)throw new Error("There should be two inverse edit operations!");const s=i[0].range,r=i[1].range,o=s.plusRange(r);return this._computeCursorStateWithRange(e,o,t)}}function iJ(n,e){return n===" "?e===5||e===6?6:5:4}function VB(n,e){return ede(n)&&!ede(e)?!0:n===5?!1:Jce(n)!==Jce(e)}function Jce(n){return n===6||n===5?"space":n}function ede(n){return n===4||n===5||n===6}function PSe(n,e,t,i,s){if(n.autoClosingOvertype==="never"||!n.autoClosingPairs.autoClosingPairsCloseSingleChar.has(s))return!1;for(let r=0,o=t.length;r<o;r++){const a=t[r];if(!a.isEmpty())return!1;const l=a.getPosition(),c=e.getLineContent(l.lineNumber);if(c.charAt(l.column-1)!==s)return!1;const u=H_(s);if((l.column>2?c.charCodeAt(l.column-2):0)===92&&u)return!1;if(n.autoClosingOvertype==="auto"){let f=!1;for(let g=0,p=i.length;g<p;g++){const _=i[g];if(l.lineNumber===_.startLineNumber&&l.column===_.startColumn){f=!0;break}}if(!f)return!1}}return!0}function qv(n,e,t){return t?new H2(n,e,!0):new mr(n,e,!0)}function nJ(n,e,t){return t=t||1,Oc.shiftIndent(e,e.length+t,n.tabSize,n.indentSize,n.insertSpaces)}function MO(n,e,t){return t=t||1,Oc.unshiftIndent(e,e.length+t,n.tabSize,n.indentSize,n.insertSpaces)}function OSe(n,e){return H_(e)?n.autoSurround==="quotes"||n.autoSurround==="languageDefined":n.autoSurround==="brackets"||n.autoSurround==="languageDefined"}class cm{static indent(e,t,i){if(t===null||i===null)return[];const s=[];for(let r=0,o=i.length;r<o;r++)s[r]=new Oc(i[r],{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService);return s}static outdent(e,t,i){const s=[];for(let r=0,o=i.length;r<o;r++)s[r]=new Oc(i[r],{isUnshift:!0,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService);return s}static paste(e,t,i,s,r,o){return bct.getEdits(e,t,i,s,r,o)}static tab(e,t,i){return yct.getCommands(e,t,i)}static compositionType(e,t,i,s,r,o,a,l){return wct.getEdits(e,t,i,s,r,o,a,l)}static compositionEndWithInterceptors(e,t,i,s,r,o){if(!s)return null;let a=null;for(const h of s)if(a===null)a=h.insertedText;else if(a!==h.insertedText)return null;if(!a||a.length!==1)return null;const l=a;let c=!1;for(const h of s)if(h.deletedText.length!==0){c=!0;break}if(c){if(!OSe(t,l)||!t.surroundingPairs.hasOwnProperty(l))return null;const h=H_(l);for(const p of s)if(p.deletedSelectionStart!==0||p.deletedSelectionEnd!==p.deletedText.length||/^[ \t]+$/.test(p.deletedText)||h&&H_(p.deletedText))return null;const f=[];for(const p of r){if(!p.isEmpty())return null;f.push(p.getPosition())}if(f.length!==s.length)return null;const g=[];for(let p=0,_=f.length;p<_;p++)g.push(new lct(f[p],s[p].deletedText,t.surroundingPairs[l]));return new fa(4,g,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}const d=pct.getEdits(t,i,r,o,l);if(d!==void 0)return d;const u=Cj.getEdits(t,i,r,l,!0,!1);return u!==void 0?u:null}static typeWithInterceptors(e,t,i,s,r,o,a){const l=HB.getEdits(i,s,r,a,e);if(l!==void 0)return l;const c=fct.getEdits(i,s,r,a,e);if(c!==void 0)return c;const d=gct.getEdits(t,i,s,r,o,a);if(d!==void 0)return d;const u=Cj.getEdits(i,s,r,a,!1,e);if(u!==void 0)return u;const h=mct.getEdits(i,s,r,a,e);if(h!==void 0)return h;const f=_ct.getEdits(t,i,s,r,a,e);return f!==void 0?f:vct.getEdits(t,r,a)}static typeWithoutInterceptors(e,t,i,s,r){return Cct.getEdits(e,s,r)}}class Lct{constructor(e,t,i,s,r,o){this.deletedText=e,this.deletedSelectionStart=t,this.deletedSelectionEnd=i,this.insertedText=s,this.insertedSelectionStart=r,this.insertedSelectionEnd=o}}var F;(function(n){n.editorSimpleInput=new Re("editorSimpleInput",!1,!0),n.editorTextFocus=new Re("editorTextFocus",!1,v("editorTextFocus","Whether the editor text has focus (cursor is blinking)")),n.focus=new Re("editorFocus",!1,v("editorFocus","Whether the editor or an editor widget has focus (e.g. focus is in the find widget)")),n.textInputFocus=new Re("textInputFocus",!1,v("textInputFocus","Whether an editor or a rich text input has focus (cursor is blinking)")),n.readOnly=new Re("editorReadonly",!1,v("editorReadonly","Whether the editor is read-only")),n.inDiffEditor=new Re("inDiffEditor",!1,v("inDiffEditor","Whether the context is a diff editor")),n.isEmbeddedDiffEditor=new Re("isEmbeddedDiffEditor",!1,v("isEmbeddedDiffEditor","Whether the context is an embedded diff editor")),n.inMultiDiffEditor=new Re("inMultiDiffEditor",!1,v("inMultiDiffEditor","Whether the context is a multi diff editor")),n.multiDiffEditorAllCollapsed=new Re("multiDiffEditorAllCollapsed",void 0,v("multiDiffEditorAllCollapsed","Whether all files in multi diff editor are collapsed")),n.hasChanges=new Re("diffEditorHasChanges",!1,v("diffEditorHasChanges","Whether the diff editor has changes")),n.comparingMovedCode=new Re("comparingMovedCode",!1,v("comparingMovedCode","Whether a moved code block is selected for comparison")),n.accessibleDiffViewerVisible=new Re("accessibleDiffViewerVisible",!1,v("accessibleDiffViewerVisible","Whether the accessible diff viewer is visible")),n.diffEditorRenderSideBySideInlineBreakpointReached=new Re("diffEditorRenderSideBySideInlineBreakpointReached",!1,v("diffEditorRenderSideBySideInlineBreakpointReached","Whether the diff editor render side by side inline breakpoint is reached")),n.diffEditorInlineMode=new Re("diffEditorInlineMode",!1,v("diffEditorInlineMode","Whether inline mode is active")),n.diffEditorOriginalWritable=new Re("diffEditorOriginalWritable",!1,v("diffEditorOriginalWritable","Whether modified is writable in the diff editor")),n.diffEditorModifiedWritable=new Re("diffEditorModifiedWritable",!1,v("diffEditorModifiedWritable","Whether modified is writable in the diff editor")),n.diffEditorOriginalUri=new Re("diffEditorOriginalUri","",v("diffEditorOriginalUri","The uri of the original document")),n.diffEditorModifiedUri=new Re("diffEditorModifiedUri","",v("diffEditorModifiedUri","The uri of the modified document")),n.columnSelection=new Re("editorColumnSelection",!1,v("editorColumnSelection","Whether `editor.columnSelection` is enabled")),n.writable=n.readOnly.toNegated(),n.hasNonEmptySelection=new Re("editorHasSelection",!1,v("editorHasSelection","Whether the editor has text selected")),n.hasOnlyEmptySelection=n.hasNonEmptySelection.toNegated(),n.hasMultipleSelections=new Re("editorHasMultipleSelections",!1,v("editorHasMultipleSelections","Whether the editor has multiple selections")),n.hasSingleSelection=n.hasMultipleSelections.toNegated(),n.tabMovesFocus=new Re("editorTabMovesFocus",!1,v("editorTabMovesFocus","Whether `Tab` will move focus out of the editor")),n.tabDoesNotMoveFocus=n.tabMovesFocus.toNegated(),n.isInEmbeddedEditor=new Re("isInEmbeddedEditor",!1,!0),n.canUndo=new Re("canUndo",!1,!0),n.canRedo=new Re("canRedo",!1,!0),n.hoverVisible=new Re("editorHoverVisible",!1,v("editorHoverVisible","Whether the editor hover is visible")),n.hoverFocused=new Re("editorHoverFocused",!1,v("editorHoverFocused","Whether the editor hover is focused")),n.stickyScrollFocused=new Re("stickyScrollFocused",!1,v("stickyScrollFocused","Whether the sticky scroll is focused")),n.stickyScrollVisible=new Re("stickyScrollVisible",!1,v("stickyScrollVisible","Whether the sticky scroll is visible")),n.standaloneColorPickerVisible=new Re("standaloneColorPickerVisible",!1,v("standaloneColorPickerVisible","Whether the standalone color picker is visible")),n.standaloneColorPickerFocused=new Re("standaloneColorPickerFocused",!1,v("standaloneColorPickerFocused","Whether the standalone color picker is focused")),n.inCompositeEditor=new Re("inCompositeEditor",void 0,v("inCompositeEditor","Whether the editor is part of a larger editor (e.g. notebooks)")),n.notInCompositeEditor=n.inCompositeEditor.toNegated(),n.languageId=new Re("editorLangId","",v("editorLangId","The language identifier of the editor")),n.hasCompletionItemProvider=new Re("editorHasCompletionItemProvider",!1,v("editorHasCompletionItemProvider","Whether the editor has a completion item provider")),n.hasCodeActionsProvider=new Re("editorHasCodeActionsProvider",!1,v("editorHasCodeActionsProvider","Whether the editor has a code actions provider")),n.hasCodeLensProvider=new Re("editorHasCodeLensProvider",!1,v("editorHasCodeLensProvider","Whether the editor has a code lens provider")),n.hasDefinitionProvider=new Re("editorHasDefinitionProvider",!1,v("editorHasDefinitionProvider","Whether the editor has a definition provider")),n.hasDeclarationProvider=new Re("editorHasDeclarationProvider",!1,v("editorHasDeclarationProvider","Whether the editor has a declaration provider")),n.hasImplementationProvider=new Re("editorHasImplementationProvider",!1,v("editorHasImplementationProvider","Whether the editor has an implementation provider")),n.hasTypeDefinitionProvider=new Re("editorHasTypeDefinitionProvider",!1,v("editorHasTypeDefinitionProvider","Whether the editor has a type definition provider")),n.hasHoverProvider=new Re("editorHasHoverProvider",!1,v("editorHasHoverProvider","Whether the editor has a hover provider")),n.hasDocumentHighlightProvider=new Re("editorHasDocumentHighlightProvider",!1,v("editorHasDocumentHighlightProvider","Whether the editor has a document highlight provider")),n.hasDocumentSymbolProvider=new Re("editorHasDocumentSymbolProvider",!1,v("editorHasDocumentSymbolProvider","Whether the editor has a document symbol provider")),n.hasReferenceProvider=new Re("editorHasReferenceProvider",!1,v("editorHasReferenceProvider","Whether the editor has a reference provider")),n.hasRenameProvider=new Re("editorHasRenameProvider",!1,v("editorHasRenameProvider","Whether the editor has a rename provider")),n.hasSignatureHelpProvider=new Re("editorHasSignatureHelpProvider",!1,v("editorHasSignatureHelpProvider","Whether the editor has a signature help provider")),n.hasInlayHintsProvider=new Re("editorHasInlayHintsProvider",!1,v("editorHasInlayHintsProvider","Whether the editor has an inline hints provider")),n.hasDocumentFormattingProvider=new Re("editorHasDocumentFormattingProvider",!1,v("editorHasDocumentFormattingProvider","Whether the editor has a document formatting provider")),n.hasDocumentSelectionFormattingProvider=new Re("editorHasDocumentSelectionFormattingProvider",!1,v("editorHasDocumentSelectionFormattingProvider","Whether the editor has a document selection formatting provider")),n.hasMultipleDocumentFormattingProvider=new Re("editorHasMultipleDocumentFormattingProvider",!1,v("editorHasMultipleDocumentFormattingProvider","Whether the editor has multiple document formatting providers")),n.hasMultipleDocumentSelectionFormattingProvider=new Re("editorHasMultipleDocumentSelectionFormattingProvider",!1,v("editorHasMultipleDocumentSelectionFormattingProvider","Whether the editor has multiple document selection formatting providers"))})(F||(F={}));const ci=0;class Mn extends vs{runEditorCommand(e,t,i){const s=t._getViewModel();s&&this.runCoreEditorCommand(s,i||{})}}var dr;(function(n){const e=function(i){if(!zs(i))return!1;const s=i;return!(!ca(s.to)||!ro(s.by)&&!ca(s.by)||!ro(s.value)&&!L_(s.value)||!ro(s.revealCursor)&&!Pwe(s.revealCursor))};n.metadata={description:"Scroll editor in the given direction",args:[{name:"Editor scroll argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'to': A mandatory direction value.\n						```\n						'up', 'down'\n						```\n					* 'by': Unit to move. Default is computed based on 'to' value.\n						```\n						'line', 'wrappedLine', 'page', 'halfPage', 'editor'\n						```\n					* 'value': Number of units to move. Default is '1'.\n					* 'revealCursor': If 'true' reveals the cursor if it is outside view port.\n				",constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["up","down"]},by:{type:"string",enum:["line","wrappedLine","page","halfPage","editor"]},value:{type:"number",default:1},revealCursor:{type:"boolean"}}}}]},n.RawDirection={Up:"up",Right:"right",Down:"down",Left:"left"},n.RawUnit={Line:"line",WrappedLine:"wrappedLine",Page:"page",HalfPage:"halfPage",Editor:"editor",Column:"column"};function t(i){let s;switch(i.to){case n.RawDirection.Up:s=1;break;case n.RawDirection.Right:s=2;break;case n.RawDirection.Down:s=3;break;case n.RawDirection.Left:s=4;break;default:return null}let r;switch(i.by){case n.RawUnit.Line:r=1;break;case n.RawUnit.WrappedLine:r=2;break;case n.RawUnit.Page:r=3;break;case n.RawUnit.HalfPage:r=4;break;case n.RawUnit.Editor:r=5;break;case n.RawUnit.Column:r=6;break;default:r=2}const o=Math.floor(i.value||1),a=!!i.revealCursor;return{direction:s,unit:r,value:o,revealCursor:a,select:!!i.select}}n.parse=t})(dr||(dr={}));var R1;(function(n){const e=function(t){if(!zs(t))return!1;const i=t;return!(!L_(i.lineNumber)&&!ca(i.lineNumber)||!ro(i.at)&&!ca(i.at))};n.metadata={description:"Reveal the given line at the given logical position",args:[{name:"Reveal line argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'lineNumber': A mandatory line number value.\n					* 'at': Logical position at which line has to be revealed.\n						```\n						'top', 'center', 'bottom'\n						```\n				",constraint:e,schema:{type:"object",required:["lineNumber"],properties:{lineNumber:{type:["number","string"]},at:{type:"string",enum:["top","center","bottom"]}}}}]},n.RawAtArgument={Top:"top",Center:"center",Bottom:"bottom"}})(R1||(R1={}));class yj{constructor(e){e.addImplementation(1e4,"code-editor",(t,i)=>{const s=t.get(ri).getFocusedCodeEditor();return s&&s.hasTextFocus()?this._runEditorCommand(t,s,i):!1}),e.addImplementation(1e3,"generic-dom-input-textarea",(t,i)=>{const s=vr();return s&&["input","textarea"].indexOf(s.tagName.toLowerCase())>=0?(this.runDOMCommand(s),!0):!1}),e.addImplementation(0,"generic-dom",(t,i)=>{const s=t.get(ri).getActiveCodeEditor();return s?(s.focus(),this._runEditorCommand(t,s,i)):!1})}_runEditorCommand(e,t,i){const s=this.runEditorCommand(e,t,i);return s||!0}}var Fs;(function(n){class e extends Mn{constructor(b){super(b),this._inSelectionMode=b.inSelectionMode}runCoreEditorCommand(b,y){if(!y.position)return;b.model.pushStackElement(),b.setCursorStates(y.source,3,[Xs.moveTo(b,b.getPrimaryCursorState(),this._inSelectionMode,y.position,y.viewPosition)])&&y.revealType!==2&&b.revealAllCursors(y.source,!0,!0)}}n.MoveTo=Te(new e({id:"_moveTo",inSelectionMode:!1,precondition:void 0})),n.MoveToSelect=Te(new e({id:"_moveToSelect",inSelectionMode:!0,precondition:void 0}));class t extends Mn{runCoreEditorCommand(b,y){b.model.pushStackElement();const S=this._getColumnSelectResult(b,b.getPrimaryCursorState(),b.getCursorColumnSelectData(),y);S!==null&&(b.setCursorStates(y.source,3,S.viewStates.map(x=>ni.fromViewState(x))),b.setCursorColumnSelectData({isReal:!0,fromViewLineNumber:S.fromLineNumber,fromViewVisualColumn:S.fromVisualColumn,toViewLineNumber:S.toLineNumber,toViewVisualColumn:S.toVisualColumn}),S.reversed?b.revealTopMostCursor(y.source):b.revealBottomMostCursor(y.source))}}n.ColumnSelect=Te(new class extends t{constructor(){super({id:"columnSelect",precondition:void 0})}_getColumnSelectResult(w,b,y,S){if(typeof S.position>"u"||typeof S.viewPosition>"u"||typeof S.mouseColumn>"u")return null;const x=w.model.validatePosition(S.position),E=w.coordinatesConverter.validateViewPosition(new Y(S.viewPosition.lineNumber,S.viewPosition.column),x),D=S.doColumnSelect?y.fromViewLineNumber:E.lineNumber,N=S.doColumnSelect?y.fromViewVisualColumn:S.mouseColumn-1;return db.columnSelect(w.cursorConfig,w,D,N,E.lineNumber,S.mouseColumn-1)}}),n.CursorColumnSelectLeft=Te(new class extends t{constructor(){super({id:"cursorColumnSelectLeft",precondition:void 0,kbOpts:{weight:ci,kbExpr:F.textInputFocus,primary:3599,linux:{primary:0}}})}_getColumnSelectResult(w,b,y,S){return db.columnSelectLeft(w.cursorConfig,w,y)}}),n.CursorColumnSelectRight=Te(new class extends t{constructor(){super({id:"cursorColumnSelectRight",precondition:void 0,kbOpts:{weight:ci,kbExpr:F.textInputFocus,primary:3601,linux:{primary:0}}})}_getColumnSelectResult(w,b,y,S){return db.columnSelectRight(w.cursorConfig,w,y)}});class i extends t{constructor(b){super(b),this._isPaged=b.isPaged}_getColumnSelectResult(b,y,S,x){return db.columnSelectUp(b.cursorConfig,b,S,this._isPaged)}}n.CursorColumnSelectUp=Te(new i({isPaged:!1,id:"cursorColumnSelectUp",precondition:void 0,kbOpts:{weight:ci,kbExpr:F.textInputFocus,primary:3600,linux:{primary:0}}})),n.CursorColumnSelectPageUp=Te(new i({isPaged:!0,id:"cursorColumnSelectPageUp",precondition:void 0,kbOpts:{weight:ci,kbExpr:F.textInputFocus,primary:3595,linux:{primary:0}}}));class s extends t{constructor(b){super(b),this._isPaged=b.isPaged}_getColumnSelectResult(b,y,S,x){return db.columnSelectDown(b.cursorConfig,b,S,this._isPaged)}}n.CursorColumnSelectDown=Te(new s({isPaged:!1,id:"cursorColumnSelectDown",precondition:void 0,kbOpts:{weight:ci,kbExpr:F.textInputFocus,primary:3602,linux:{primary:0}}})),n.CursorColumnSelectPageDown=Te(new s({isPaged:!0,id:"cursorColumnSelectPageDown",precondition:void 0,kbOpts:{weight:ci,kbExpr:F.textInputFocus,primary:3596,linux:{primary:0}}}));class r extends Mn{constructor(){super({id:"cursorMove",precondition:void 0,metadata:AO.metadata})}runCoreEditorCommand(b,y){const S=AO.parse(y);S&&this._runCursorMove(b,y.source,S)}_runCursorMove(b,y,S){b.model.pushStackElement(),b.setCursorStates(y,3,r._move(b,b.getCursorStates(),S)),b.revealAllCursors(y,!0)}static _move(b,y,S){const x=S.select,E=S.value;switch(S.direction){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:return Xs.simpleMove(b,y,S.direction,x,E,S.unit);case 11:case 13:case 12:case 14:return Xs.viewportMove(b,y,S.direction,x,E);default:return null}}}n.CursorMoveImpl=r,n.CursorMove=Te(new r);class o extends Mn{constructor(b){super(b),this._staticArgs=b.args}runCoreEditorCommand(b,y){let S=this._staticArgs;this._staticArgs.value===-1&&(S={direction:this._staticArgs.direction,unit:this._staticArgs.unit,select:this._staticArgs.select,value:y.pageSize||b.cursorConfig.pageSize}),b.model.pushStackElement(),b.setCursorStates(y.source,3,Xs.simpleMove(b,b.getCursorStates(),S.direction,S.select,S.value,S.unit)),b.revealAllCursors(y.source,!0)}}n.CursorLeft=Te(new o({args:{direction:0,unit:0,select:!1,value:1},id:"cursorLeft",precondition:void 0,kbOpts:{weight:ci,kbExpr:F.textInputFocus,primary:15,mac:{primary:15,secondary:[288]}}})),n.CursorLeftSelect=Te(new o({args:{direction:0,unit:0,select:!0,value:1},id:"cursorLeftSelect",precondition:void 0,kbOpts:{weight:ci,kbExpr:F.textInputFocus,primary:1039}})),n.CursorRight=Te(new o({args:{direction:1,unit:0,select:!1,value:1},id:"cursorRight",precondition:void 0,kbOpts:{weight:ci,kbExpr:F.textInputFocus,primary:17,mac:{primary:17,secondary:[292]}}})),n.CursorRightSelect=Te(new o({args:{direction:1,unit:0,select:!0,value:1},id:"cursorRightSelect",precondition:void 0,kbOpts:{weight:ci,kbExpr:F.textInputFocus,primary:1041}})),n.CursorUp=Te(new o({args:{direction:2,unit:2,select:!1,value:1},id:"cursorUp",precondition:void 0,kbOpts:{weight:ci,kbExpr:F.textInputFocus,primary:16,mac:{primary:16,secondary:[302]}}})),n.CursorUpSelect=Te(new o({args:{direction:2,unit:2,select:!0,value:1},id:"cursorUpSelect",precondition:void 0,kbOpts:{weight:ci,kbExpr:F.textInputFocus,primary:1040,secondary:[3088],mac:{primary:1040},linux:{primary:1040}}})),n.CursorPageUp=Te(new o({args:{direction:2,unit:2,select:!1,value:-1},id:"cursorPageUp",precondition:void 0,kbOpts:{weight:ci,kbExpr:F.textInputFocus,primary:11}})),n.CursorPageUpSelect=Te(new o({args:{direction:2,unit:2,select:!0,value:-1},id:"cursorPageUpSelect",precondition:void 0,kbOpts:{weight:ci,kbExpr:F.textInputFocus,primary:1035}})),n.CursorDown=Te(new o({args:{direction:3,unit:2,select:!1,value:1},id:"cursorDown",precondition:void 0,kbOpts:{weight:ci,kbExpr:F.textInputFocus,primary:18,mac:{primary:18,secondary:[300]}}})),n.CursorDownSelect=Te(new o({args:{direction:3,unit:2,select:!0,value:1},id:"cursorDownSelect",precondition:void 0,kbOpts:{weight:ci,kbExpr:F.textInputFocus,primary:1042,secondary:[3090],mac:{primary:1042},linux:{primary:1042}}})),n.CursorPageDown=Te(new o({args:{direction:3,unit:2,select:!1,value:-1},id:"cursorPageDown",precondition:void 0,kbOpts:{weight:ci,kbExpr:F.textInputFocus,primary:12}})),n.CursorPageDownSelect=Te(new o({args:{direction:3,unit:2,select:!0,value:-1},id:"cursorPageDownSelect",precondition:void 0,kbOpts:{weight:ci,kbExpr:F.textInputFocus,primary:1036}})),n.CreateCursor=Te(new class extends Mn{constructor(){super({id:"createCursor",precondition:void 0})}runCoreEditorCommand(w,b){if(!b.position)return;let y;b.wholeLine?y=Xs.line(w,w.getPrimaryCursorState(),!1,b.position,b.viewPosition):y=Xs.moveTo(w,w.getPrimaryCursorState(),!1,b.position,b.viewPosition);const S=w.getCursorStates();if(S.length>1){const x=y.modelState?y.modelState.position:null,E=y.viewState?y.viewState.position:null;for(let D=0,N=S.length;D<N;D++){const I=S[D];if(!(x&&!I.modelState.selection.containsPosition(x))&&!(E&&!I.viewState.selection.containsPosition(E))){S.splice(D,1),w.model.pushStackElement(),w.setCursorStates(b.source,3,S);return}}}S.push(y),w.model.pushStackElement(),w.setCursorStates(b.source,3,S)}}),n.LastCursorMoveToSelect=Te(new class extends Mn{constructor(){super({id:"_lastCursorMoveToSelect",precondition:void 0})}runCoreEditorCommand(w,b){if(!b.position)return;const y=w.getLastAddedCursorIndex(),S=w.getCursorStates(),x=S.slice(0);x[y]=Xs.moveTo(w,S[y],!0,b.position,b.viewPosition),w.model.pushStackElement(),w.setCursorStates(b.source,3,x)}});class a extends Mn{constructor(b){super(b),this._inSelectionMode=b.inSelectionMode}runCoreEditorCommand(b,y){b.model.pushStackElement(),b.setCursorStates(y.source,3,Xs.moveToBeginningOfLine(b,b.getCursorStates(),this._inSelectionMode)),b.revealAllCursors(y.source,!0)}}n.CursorHome=Te(new a({inSelectionMode:!1,id:"cursorHome",precondition:void 0,kbOpts:{weight:ci,kbExpr:F.textInputFocus,primary:14,mac:{primary:14,secondary:[2063]}}})),n.CursorHomeSelect=Te(new a({inSelectionMode:!0,id:"cursorHomeSelect",precondition:void 0,kbOpts:{weight:ci,kbExpr:F.textInputFocus,primary:1038,mac:{primary:1038,secondary:[3087]}}}));class l extends Mn{constructor(b){super(b),this._inSelectionMode=b.inSelectionMode}runCoreEditorCommand(b,y){b.model.pushStackElement(),b.setCursorStates(y.source,3,this._exec(b.getCursorStates())),b.revealAllCursors(y.source,!0)}_exec(b){const y=[];for(let S=0,x=b.length;S<x;S++){const E=b[S],D=E.modelState.position.lineNumber;y[S]=ni.fromModelState(E.modelState.move(this._inSelectionMode,D,1,0))}return y}}n.CursorLineStart=Te(new l({inSelectionMode:!1,id:"cursorLineStart",precondition:void 0,kbOpts:{weight:ci,kbExpr:F.textInputFocus,primary:0,mac:{primary:287}}})),n.CursorLineStartSelect=Te(new l({inSelectionMode:!0,id:"cursorLineStartSelect",precondition:void 0,kbOpts:{weight:ci,kbExpr:F.textInputFocus,primary:0,mac:{primary:1311}}}));class c extends Mn{constructor(b){super(b),this._inSelectionMode=b.inSelectionMode}runCoreEditorCommand(b,y){b.model.pushStackElement(),b.setCursorStates(y.source,3,Xs.moveToEndOfLine(b,b.getCursorStates(),this._inSelectionMode,y.sticky||!1)),b.revealAllCursors(y.source,!0)}}n.CursorEnd=Te(new c({inSelectionMode:!1,id:"cursorEnd",precondition:void 0,kbOpts:{args:{sticky:!1},weight:ci,kbExpr:F.textInputFocus,primary:13,mac:{primary:13,secondary:[2065]}},metadata:{description:"Go to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:v("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}})),n.CursorEndSelect=Te(new c({inSelectionMode:!0,id:"cursorEndSelect",precondition:void 0,kbOpts:{args:{sticky:!1},weight:ci,kbExpr:F.textInputFocus,primary:1037,mac:{primary:1037,secondary:[3089]}},metadata:{description:"Select to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:v("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}}));class d extends Mn{constructor(b){super(b),this._inSelectionMode=b.inSelectionMode}runCoreEditorCommand(b,y){b.model.pushStackElement(),b.setCursorStates(y.source,3,this._exec(b,b.getCursorStates())),b.revealAllCursors(y.source,!0)}_exec(b,y){const S=[];for(let x=0,E=y.length;x<E;x++){const D=y[x],N=D.modelState.position.lineNumber,I=b.model.getLineMaxColumn(N);S[x]=ni.fromModelState(D.modelState.move(this._inSelectionMode,N,I,0))}return S}}n.CursorLineEnd=Te(new d({inSelectionMode:!1,id:"cursorLineEnd",precondition:void 0,kbOpts:{weight:ci,kbExpr:F.textInputFocus,primary:0,mac:{primary:291}}})),n.CursorLineEndSelect=Te(new d({inSelectionMode:!0,id:"cursorLineEndSelect",precondition:void 0,kbOpts:{weight:ci,kbExpr:F.textInputFocus,primary:0,mac:{primary:1315}}}));class u extends Mn{constructor(b){super(b),this._inSelectionMode=b.inSelectionMode}runCoreEditorCommand(b,y){b.model.pushStackElement(),b.setCursorStates(y.source,3,Xs.moveToBeginningOfBuffer(b,b.getCursorStates(),this._inSelectionMode)),b.revealAllCursors(y.source,!0)}}n.CursorTop=Te(new u({inSelectionMode:!1,id:"cursorTop",precondition:void 0,kbOpts:{weight:ci,kbExpr:F.textInputFocus,primary:2062,mac:{primary:2064}}})),n.CursorTopSelect=Te(new u({inSelectionMode:!0,id:"cursorTopSelect",precondition:void 0,kbOpts:{weight:ci,kbExpr:F.textInputFocus,primary:3086,mac:{primary:3088}}}));class h extends Mn{constructor(b){super(b),this._inSelectionMode=b.inSelectionMode}runCoreEditorCommand(b,y){b.model.pushStackElement(),b.setCursorStates(y.source,3,Xs.moveToEndOfBuffer(b,b.getCursorStates(),this._inSelectionMode)),b.revealAllCursors(y.source,!0)}}n.CursorBottom=Te(new h({inSelectionMode:!1,id:"cursorBottom",precondition:void 0,kbOpts:{weight:ci,kbExpr:F.textInputFocus,primary:2061,mac:{primary:2066}}})),n.CursorBottomSelect=Te(new h({inSelectionMode:!0,id:"cursorBottomSelect",precondition:void 0,kbOpts:{weight:ci,kbExpr:F.textInputFocus,primary:3085,mac:{primary:3090}}}));class f extends Mn{constructor(){super({id:"editorScroll",precondition:void 0,metadata:dr.metadata})}determineScrollMethod(b){const y=[6],S=[1,2,3,4,5,6],x=[4,2],E=[1,3];return y.includes(b.unit)&&x.includes(b.direction)?this._runHorizontalEditorScroll.bind(this):S.includes(b.unit)&&E.includes(b.direction)?this._runVerticalEditorScroll.bind(this):null}runCoreEditorCommand(b,y){const S=dr.parse(y);if(!S)return;const x=this.determineScrollMethod(S);x&&x(b,y.source,S)}_runVerticalEditorScroll(b,y,S){const x=this._computeDesiredScrollTop(b,S);if(S.revealCursor){const E=b.getCompletelyVisibleViewRangeAtScrollTop(x);b.setCursorStates(y,3,[Xs.findPositionInViewportIfOutside(b,b.getPrimaryCursorState(),E,S.select)])}b.viewLayout.setScrollPosition({scrollTop:x},0)}_computeDesiredScrollTop(b,y){if(y.unit===1){const E=b.viewLayout.getFutureViewport(),D=b.getCompletelyVisibleViewRangeAtScrollTop(E.top),N=b.coordinatesConverter.convertViewRangeToModelRange(D);let I;y.direction===1?I=Math.max(1,N.startLineNumber-y.value):I=Math.min(b.model.getLineCount(),N.startLineNumber+y.value);const H=b.coordinatesConverter.convertModelPositionToViewPosition(new Y(I,1));return b.viewLayout.getVerticalOffsetForLineNumber(H.lineNumber)}if(y.unit===5){let E=0;return y.direction===3&&(E=b.model.getLineCount()-b.cursorConfig.pageSize),b.viewLayout.getVerticalOffsetForLineNumber(E)}let S;y.unit===3?S=b.cursorConfig.pageSize*y.value:y.unit===4?S=Math.round(b.cursorConfig.pageSize/2)*y.value:S=y.value;const x=(y.direction===1?-1:1)*S;return b.viewLayout.getCurrentScrollTop()+x*b.cursorConfig.lineHeight}_runHorizontalEditorScroll(b,y,S){const x=this._computeDesiredScrollLeft(b,S);b.viewLayout.setScrollPosition({scrollLeft:x},0)}_computeDesiredScrollLeft(b,y){const S=(y.direction===4?-1:1)*y.value;return b.viewLayout.getCurrentScrollLeft()+S*b.cursorConfig.typicalHalfwidthCharacterWidth}}n.EditorScrollImpl=f,n.EditorScroll=Te(new f),n.ScrollLineUp=Te(new class extends Mn{constructor(){super({id:"scrollLineUp",precondition:void 0,kbOpts:{weight:ci,kbExpr:F.textInputFocus,primary:2064,mac:{primary:267}}})}runCoreEditorCommand(w,b){n.EditorScroll.runCoreEditorCommand(w,{to:dr.RawDirection.Up,by:dr.RawUnit.WrappedLine,value:1,revealCursor:!1,select:!1,source:b.source})}}),n.ScrollPageUp=Te(new class extends Mn{constructor(){super({id:"scrollPageUp",precondition:void 0,kbOpts:{weight:ci,kbExpr:F.textInputFocus,primary:2059,win:{primary:523},linux:{primary:523}}})}runCoreEditorCommand(w,b){n.EditorScroll.runCoreEditorCommand(w,{to:dr.RawDirection.Up,by:dr.RawUnit.Page,value:1,revealCursor:!1,select:!1,source:b.source})}}),n.ScrollEditorTop=Te(new class extends Mn{constructor(){super({id:"scrollEditorTop",precondition:void 0,kbOpts:{weight:ci,kbExpr:F.textInputFocus}})}runCoreEditorCommand(w,b){n.EditorScroll.runCoreEditorCommand(w,{to:dr.RawDirection.Up,by:dr.RawUnit.Editor,value:1,revealCursor:!1,select:!1,source:b.source})}}),n.ScrollLineDown=Te(new class extends Mn{constructor(){super({id:"scrollLineDown",precondition:void 0,kbOpts:{weight:ci,kbExpr:F.textInputFocus,primary:2066,mac:{primary:268}}})}runCoreEditorCommand(w,b){n.EditorScroll.runCoreEditorCommand(w,{to:dr.RawDirection.Down,by:dr.RawUnit.WrappedLine,value:1,revealCursor:!1,select:!1,source:b.source})}}),n.ScrollPageDown=Te(new class extends Mn{constructor(){super({id:"scrollPageDown",precondition:void 0,kbOpts:{weight:ci,kbExpr:F.textInputFocus,primary:2060,win:{primary:524},linux:{primary:524}}})}runCoreEditorCommand(w,b){n.EditorScroll.runCoreEditorCommand(w,{to:dr.RawDirection.Down,by:dr.RawUnit.Page,value:1,revealCursor:!1,select:!1,source:b.source})}}),n.ScrollEditorBottom=Te(new class extends Mn{constructor(){super({id:"scrollEditorBottom",precondition:void 0,kbOpts:{weight:ci,kbExpr:F.textInputFocus}})}runCoreEditorCommand(w,b){n.EditorScroll.runCoreEditorCommand(w,{to:dr.RawDirection.Down,by:dr.RawUnit.Editor,value:1,revealCursor:!1,select:!1,source:b.source})}}),n.ScrollLeft=Te(new class extends Mn{constructor(){super({id:"scrollLeft",precondition:void 0,kbOpts:{weight:ci,kbExpr:F.textInputFocus}})}runCoreEditorCommand(w,b){n.EditorScroll.runCoreEditorCommand(w,{to:dr.RawDirection.Left,by:dr.RawUnit.Column,value:2,revealCursor:!1,select:!1,source:b.source})}}),n.ScrollRight=Te(new class extends Mn{constructor(){super({id:"scrollRight",precondition:void 0,kbOpts:{weight:ci,kbExpr:F.textInputFocus}})}runCoreEditorCommand(w,b){n.EditorScroll.runCoreEditorCommand(w,{to:dr.RawDirection.Right,by:dr.RawUnit.Column,value:2,revealCursor:!1,select:!1,source:b.source})}});class g extends Mn{constructor(b){super(b),this._inSelectionMode=b.inSelectionMode}runCoreEditorCommand(b,y){y.position&&(b.model.pushStackElement(),b.setCursorStates(y.source,3,[Xs.word(b,b.getPrimaryCursorState(),this._inSelectionMode,y.position)]),y.revealType!==2&&b.revealAllCursors(y.source,!0,!0))}}n.WordSelect=Te(new g({inSelectionMode:!1,id:"_wordSelect",precondition:void 0})),n.WordSelectDrag=Te(new g({inSelectionMode:!0,id:"_wordSelectDrag",precondition:void 0})),n.LastCursorWordSelect=Te(new class extends Mn{constructor(){super({id:"lastCursorWordSelect",precondition:void 0})}runCoreEditorCommand(w,b){if(!b.position)return;const y=w.getLastAddedCursorIndex(),S=w.getCursorStates(),x=S.slice(0),E=S[y];x[y]=Xs.word(w,E,E.modelState.hasSelection(),b.position),w.model.pushStackElement(),w.setCursorStates(b.source,3,x)}});class p extends Mn{constructor(b){super(b),this._inSelectionMode=b.inSelectionMode}runCoreEditorCommand(b,y){y.position&&(b.model.pushStackElement(),b.setCursorStates(y.source,3,[Xs.line(b,b.getPrimaryCursorState(),this._inSelectionMode,y.position,y.viewPosition)]),y.revealType!==2&&b.revealAllCursors(y.source,!1,!0))}}n.LineSelect=Te(new p({inSelectionMode:!1,id:"_lineSelect",precondition:void 0})),n.LineSelectDrag=Te(new p({inSelectionMode:!0,id:"_lineSelectDrag",precondition:void 0}));class _ extends Mn{constructor(b){super(b),this._inSelectionMode=b.inSelectionMode}runCoreEditorCommand(b,y){if(!y.position)return;const S=b.getLastAddedCursorIndex(),x=b.getCursorStates(),E=x.slice(0);E[S]=Xs.line(b,x[S],this._inSelectionMode,y.position,y.viewPosition),b.model.pushStackElement(),b.setCursorStates(y.source,3,E)}}n.LastCursorLineSelect=Te(new _({inSelectionMode:!1,id:"lastCursorLineSelect",precondition:void 0})),n.LastCursorLineSelectDrag=Te(new _({inSelectionMode:!0,id:"lastCursorLineSelectDrag",precondition:void 0})),n.CancelSelection=Te(new class extends Mn{constructor(){super({id:"cancelSelection",precondition:F.hasNonEmptySelection,kbOpts:{weight:ci,kbExpr:F.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(w,b){w.model.pushStackElement(),w.setCursorStates(b.source,3,[Xs.cancelSelection(w,w.getPrimaryCursorState())]),w.revealAllCursors(b.source,!0)}}),n.RemoveSecondaryCursors=Te(new class extends Mn{constructor(){super({id:"removeSecondaryCursors",precondition:F.hasMultipleSelections,kbOpts:{weight:ci+1,kbExpr:F.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(w,b){w.model.pushStackElement(),w.setCursorStates(b.source,3,[w.getPrimaryCursorState()]),w.revealAllCursors(b.source,!0),lf(v("removedCursor","Removed secondary cursors"))}}),n.RevealLine=Te(new class extends Mn{constructor(){super({id:"revealLine",precondition:void 0,metadata:R1.metadata})}runCoreEditorCommand(w,b){const y=b,S=y.lineNumber||0;let x=typeof S=="number"?S+1:parseInt(S)+1;x<1&&(x=1);const E=w.model.getLineCount();x>E&&(x=E);const D=new M(x,1,x,w.model.getLineMaxColumn(x));let N=0;if(y.at)switch(y.at){case R1.RawAtArgument.Top:N=3;break;case R1.RawAtArgument.Center:N=1;break;case R1.RawAtArgument.Bottom:N=4;break}const I=w.coordinatesConverter.convertModelRangeToViewRange(D);w.revealRange(b.source,!1,I,N,0)}}),n.SelectAll=new class extends yj{constructor(){super(gGe)}runDOMCommand(w){Tc&&(w.focus(),w.select()),w.ownerDocument.execCommand("selectAll")}runEditorCommand(w,b,y){const S=b._getViewModel();S&&this.runCoreEditorCommand(S,y)}runCoreEditorCommand(w,b){w.model.pushStackElement(),w.setCursorStates("keyboard",3,[Xs.selectAll(w,w.getPrimaryCursorState())])}},n.SetSelection=Te(new class extends Mn{constructor(){super({id:"setSelection",precondition:void 0})}runCoreEditorCommand(w,b){b.selection&&(w.model.pushStackElement(),w.setCursorStates(b.source,3,[ni.fromModelSelection(b.selection)]))}})})(Fs||(Fs={}));const kct=he.and(F.textInputFocus,F.columnSelection);function jx(n,e){Fo.registerKeybindingRule({id:n,primary:e,when:kct,weight:ci+1})}jx(Fs.CursorColumnSelectLeft.id,1039);jx(Fs.CursorColumnSelectRight.id,1041);jx(Fs.CursorColumnSelectUp.id,1040);jx(Fs.CursorColumnSelectPageUp.id,1035);jx(Fs.CursorColumnSelectDown.id,1042);jx(Fs.CursorColumnSelectPageDown.id,1036);function tde(n){return n.register(),n}var Hy;(function(n){class e extends vs{runEditorCommand(i,s,r){const o=s._getViewModel();o&&this.runCoreEditingCommand(s,o,r||{})}}n.CoreEditingCommand=e,n.LineBreakInsert=Te(new class extends e{constructor(){super({id:"lineBreakInsert",precondition:F.writable,kbOpts:{weight:ci,kbExpr:F.textInputFocus,primary:0,mac:{primary:301}}})}runCoreEditingCommand(t,i,s){t.pushUndoStop(),t.executeCommands(this.id,HB.lineBreakInsert(i.cursorConfig,i.model,i.getCursorStates().map(r=>r.modelState.selection)))}}),n.Outdent=Te(new class extends e{constructor(){super({id:"outdent",precondition:F.writable,kbOpts:{weight:ci,kbExpr:he.and(F.editorTextFocus,F.tabDoesNotMoveFocus),primary:1026}})}runCoreEditingCommand(t,i,s){t.pushUndoStop(),t.executeCommands(this.id,cm.outdent(i.cursorConfig,i.model,i.getCursorStates().map(r=>r.modelState.selection))),t.pushUndoStop()}}),n.Tab=Te(new class extends e{constructor(){super({id:"tab",precondition:F.writable,kbOpts:{weight:ci,kbExpr:he.and(F.editorTextFocus,F.tabDoesNotMoveFocus),primary:2}})}runCoreEditingCommand(t,i,s){t.pushUndoStop(),t.executeCommands(this.id,cm.tab(i.cursorConfig,i.model,i.getCursorStates().map(r=>r.modelState.selection))),t.pushUndoStop()}}),n.DeleteLeft=Te(new class extends e{constructor(){super({id:"deleteLeft",precondition:void 0,kbOpts:{weight:ci,kbExpr:F.textInputFocus,primary:1,secondary:[1025],mac:{primary:1,secondary:[1025,294,257]}}})}runCoreEditingCommand(t,i,s){const[r,o]=C0.deleteLeft(i.getPrevEditOperationType(),i.cursorConfig,i.model,i.getCursorStates().map(a=>a.modelState.selection),i.getCursorAutoClosedCharacters());r&&t.pushUndoStop(),t.executeCommands(this.id,o),i.setPrevEditOperationType(2)}}),n.DeleteRight=Te(new class extends e{constructor(){super({id:"deleteRight",precondition:void 0,kbOpts:{weight:ci,kbExpr:F.textInputFocus,primary:20,mac:{primary:20,secondary:[290,276]}}})}runCoreEditingCommand(t,i,s){const[r,o]=C0.deleteRight(i.getPrevEditOperationType(),i.cursorConfig,i.model,i.getCursorStates().map(a=>a.modelState.selection));r&&t.pushUndoStop(),t.executeCommands(this.id,o),i.setPrevEditOperationType(3)}}),n.Undo=new class extends yj{constructor(){super(tCe)}runDOMCommand(t){t.ownerDocument.execCommand("undo")}runEditorCommand(t,i,s){if(!(!i.hasModel()||i.getOption(92)===!0))return i.getModel().undo()}},n.Redo=new class extends yj{constructor(){super(iCe)}runDOMCommand(t){t.ownerDocument.execCommand("redo")}runEditorCommand(t,i,s){if(!(!i.hasModel()||i.getOption(92)===!0))return i.getModel().redo()}}})(Hy||(Hy={}));class ide extends Q3{constructor(e,t,i){super({id:e,precondition:void 0,metadata:i}),this._handlerId=t}runCommand(e,t){const i=e.get(ri).getFocusedCodeEditor();i&&i.trigger("keyboard",this._handlerId,t)}}function Y0(n,e){tde(new ide("default:"+n,n)),tde(new ide(n,n,e))}Y0("type",{description:"Type",args:[{name:"args",schema:{type:"object",required:["text"],properties:{text:{type:"string"}}}}]});Y0("replacePreviousChar");Y0("compositionType");Y0("compositionStart");Y0("compositionEnd");Y0("paste");Y0("cut");class Ect{constructor(e,t,i,s){this.configuration=e,this.viewModel=t,this.userInputEvents=i,this.commandDelegate=s}paste(e,t,i,s){this.commandDelegate.paste(e,t,i,s)}type(e){this.commandDelegate.type(e)}compositionType(e,t,i,s){this.commandDelegate.compositionType(e,t,i,s)}compositionStart(){this.commandDelegate.startComposition()}compositionEnd(){this.commandDelegate.endComposition()}cut(){this.commandDelegate.cut()}setSelection(e){Fs.SetSelection.runCoreEditorCommand(this.viewModel,{source:"keyboard",selection:e})}_validateViewColumn(e){const t=this.viewModel.getLineMinColumn(e.lineNumber);return e.column<t?new Y(e.lineNumber,t):e}_hasMulticursorModifier(e){switch(this.configuration.options.get(78)){case"altKey":return e.altKey;case"ctrlKey":return e.ctrlKey;case"metaKey":return e.metaKey;default:return!1}}_hasNonMulticursorModifier(e){switch(this.configuration.options.get(78)){case"altKey":return e.ctrlKey||e.metaKey;case"ctrlKey":return e.altKey||e.metaKey;case"metaKey":return e.ctrlKey||e.altKey;default:return!1}}dispatchMouse(e){const t=this.configuration.options,i=Po&&t.get(108),s=t.get(22);e.middleButton&&!i?this._columnSelect(e.position,e.mouseColumn,e.inSelectionMode):e.startedOnLineNumbers?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelect(e.position,e.revealType):this._createCursor(e.position,!0):e.inSelectionMode?this._lineSelectDrag(e.position,e.revealType):this._lineSelect(e.position,e.revealType):e.mouseDownCount>=4?this._selectAll():e.mouseDownCount===3?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelectDrag(e.position,e.revealType):this._lastCursorLineSelect(e.position,e.revealType):e.inSelectionMode?this._lineSelectDrag(e.position,e.revealType):this._lineSelect(e.position,e.revealType):e.mouseDownCount===2?e.onInjectedText||(this._hasMulticursorModifier(e)?this._lastCursorWordSelect(e.position,e.revealType):e.inSelectionMode?this._wordSelectDrag(e.position,e.revealType):this._wordSelect(e.position,e.revealType)):this._hasMulticursorModifier(e)?this._hasNonMulticursorModifier(e)||(e.shiftKey?this._columnSelect(e.position,e.mouseColumn,!0):e.inSelectionMode?this._lastCursorMoveToSelect(e.position,e.revealType):this._createCursor(e.position,!1)):e.inSelectionMode?e.altKey?this._columnSelect(e.position,e.mouseColumn,!0):s?this._columnSelect(e.position,e.mouseColumn,!0):this._moveToSelect(e.position,e.revealType):this.moveTo(e.position,e.revealType)}_usualArgs(e,t){return e=this._validateViewColumn(e),{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,revealType:t}}moveTo(e,t){Fs.MoveTo.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_moveToSelect(e,t){Fs.MoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_columnSelect(e,t,i){e=this._validateViewColumn(e),Fs.ColumnSelect.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,mouseColumn:t,doColumnSelect:i})}_createCursor(e,t){e=this._validateViewColumn(e),Fs.CreateCursor.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,wholeLine:t})}_lastCursorMoveToSelect(e,t){Fs.LastCursorMoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_wordSelect(e,t){Fs.WordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_wordSelectDrag(e,t){Fs.WordSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lastCursorWordSelect(e,t){Fs.LastCursorWordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lineSelect(e,t){Fs.LineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lineSelectDrag(e,t){Fs.LineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lastCursorLineSelect(e,t){Fs.LastCursorLineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lastCursorLineSelectDrag(e,t){Fs.LastCursorLineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_selectAll(){Fs.SelectAll.runCoreEditorCommand(this.viewModel,{source:"mouse"})}_convertViewToModelPosition(e){return this.viewModel.coordinatesConverter.convertViewPositionToModelPosition(e)}emitKeyDown(e){this.userInputEvents.emitKeyDown(e)}emitKeyUp(e){this.userInputEvents.emitKeyUp(e)}emitContextMenu(e){this.userInputEvents.emitContextMenu(e)}emitMouseMove(e){this.userInputEvents.emitMouseMove(e)}emitMouseLeave(e){this.userInputEvents.emitMouseLeave(e)}emitMouseUp(e){this.userInputEvents.emitMouseUp(e)}emitMouseDown(e){this.userInputEvents.emitMouseDown(e)}emitMouseDrag(e){this.userInputEvents.emitMouseDrag(e)}emitMouseDrop(e){this.userInputEvents.emitMouseDrop(e)}emitMouseDropCanceled(){this.userInputEvents.emitMouseDropCanceled()}emitMouseWheel(e){this.userInputEvents.emitMouseWheel(e)}}class FSe{constructor(e){this._lineFactory=e,this._set(1,[])}flush(){this._set(1,[])}_set(e,t){this._lines=t,this._rendLineNumberStart=e}_get(){return{rendLineNumberStart:this._rendLineNumberStart,lines:this._lines}}getStartLineNumber(){return this._rendLineNumberStart}getEndLineNumber(){return this._rendLineNumberStart+this._lines.length-1}getCount(){return this._lines.length}getLine(e){const t=e-this._rendLineNumberStart;if(t<0||t>=this._lines.length)throw new li("Illegal value for lineNumber");return this._lines[t]}onLinesDeleted(e,t){if(this.getCount()===0)return null;const i=this.getStartLineNumber(),s=this.getEndLineNumber();if(t<i){const l=t-e+1;return this._rendLineNumberStart-=l,null}if(e>s)return null;let r=0,o=0;for(let l=i;l<=s;l++){const c=l-this._rendLineNumberStart;e<=l&&l<=t&&(o===0?(r=c,o=1):o++)}if(e<i){let l=0;t<i?l=t-e+1:l=i-e,this._rendLineNumberStart-=l}return this._lines.splice(r,o)}onLinesChanged(e,t){const i=e+t-1;if(this.getCount()===0)return!1;const s=this.getStartLineNumber(),r=this.getEndLineNumber();let o=!1;for(let a=e;a<=i;a++)a>=s&&a<=r&&(this._lines[a-this._rendLineNumberStart].onContentChanged(),o=!0);return o}onLinesInserted(e,t){if(this.getCount()===0)return null;const i=t-e+1,s=this.getStartLineNumber(),r=this.getEndLineNumber();if(e<=s)return this._rendLineNumberStart+=i,null;if(e>r)return null;if(i+e>r)return this._lines.splice(e-this._rendLineNumberStart,r-e+1);const o=[];for(let u=0;u<i;u++)o[u]=this._lineFactory.createLine();const a=e-this._rendLineNumberStart,l=this._lines.slice(0,a),c=this._lines.slice(a,this._lines.length-i),d=this._lines.slice(this._lines.length-i,this._lines.length);return this._lines=l.concat(o).concat(c),d}onTokensChanged(e){if(this.getCount()===0)return!1;const t=this.getStartLineNumber(),i=this.getEndLineNumber();let s=!1;for(let r=0,o=e.length;r<o;r++){const a=e[r];if(a.toLineNumber<t||a.fromLineNumber>i)continue;const l=Math.max(t,a.fromLineNumber),c=Math.min(i,a.toLineNumber);for(let d=l;d<=c;d++){const u=d-this._rendLineNumberStart;this._lines[u].onTokensChanged(),s=!0}}return s}}class BSe{constructor(e){this._lineFactory=e,this.domNode=this._createDomNode(),this._linesCollection=new FSe(this._lineFactory)}_createDomNode(){const e=ui(document.createElement("div"));return e.setClassName("view-layer"),e.setPosition("absolute"),e.domNode.setAttribute("role","presentation"),e.domNode.setAttribute("aria-hidden","true"),e}onConfigurationChanged(e){return!!e.hasChanged(146)}onFlushed(e){return this._linesCollection.flush(),!0}onLinesChanged(e){return this._linesCollection.onLinesChanged(e.fromLineNumber,e.count)}onLinesDeleted(e){const t=this._linesCollection.onLinesDeleted(e.fromLineNumber,e.toLineNumber);if(t)for(let i=0,s=t.length;i<s;i++){const r=t[i].getDomNode();r==null||r.remove()}return!0}onLinesInserted(e){const t=this._linesCollection.onLinesInserted(e.fromLineNumber,e.toLineNumber);if(t)for(let i=0,s=t.length;i<s;i++){const r=t[i].getDomNode();r==null||r.remove()}return!0}onScrollChanged(e){return e.scrollTopChanged}onTokensChanged(e){return this._linesCollection.onTokensChanged(e.ranges)}onZonesChanged(e){return!0}getStartLineNumber(){return this._linesCollection.getStartLineNumber()}getEndLineNumber(){return this._linesCollection.getEndLineNumber()}getVisibleLine(e){return this._linesCollection.getLine(e)}renderLines(e){const t=this._linesCollection._get(),i=new Sj(this.domNode.domNode,this._lineFactory,e),s={rendLineNumberStart:t.rendLineNumberStart,lines:t.lines,linesLength:t.lines.length},r=i.render(s,e.startLineNumber,e.endLineNumber,e.relativeVerticalOffset);this._linesCollection._set(r.rendLineNumberStart,r.lines)}}const Qf=class Qf{constructor(e,t,i){this._domNode=e,this._lineFactory=t,this._viewportData=i}render(e,t,i,s){const r={rendLineNumberStart:e.rendLineNumberStart,lines:e.lines.slice(0),linesLength:e.linesLength};if(r.rendLineNumberStart+r.linesLength-1<t||i<r.rendLineNumberStart){r.rendLineNumberStart=t,r.linesLength=i-t+1,r.lines=[];for(let o=t;o<=i;o++)r.lines[o-t]=this._lineFactory.createLine();return this._finishRendering(r,!0,s),r}if(this._renderUntouchedLines(r,Math.max(t-r.rendLineNumberStart,0),Math.min(i-r.rendLineNumberStart,r.linesLength-1),s,t),r.rendLineNumberStart>t){const o=t,a=Math.min(i,r.rendLineNumberStart-1);o<=a&&(this._insertLinesBefore(r,o,a,s,t),r.linesLength+=a-o+1)}else if(r.rendLineNumberStart<t){const o=Math.min(r.linesLength,t-r.rendLineNumberStart);o>0&&(this._removeLinesBefore(r,o),r.linesLength-=o)}if(r.rendLineNumberStart=t,r.rendLineNumberStart+r.linesLength-1<i){const o=r.rendLineNumberStart+r.linesLength,a=i;o<=a&&(this._insertLinesAfter(r,o,a,s,t),r.linesLength+=a-o+1)}else if(r.rendLineNumberStart+r.linesLength-1>i){const o=Math.max(0,i-r.rendLineNumberStart+1),l=r.linesLength-1-o+1;l>0&&(this._removeLinesAfter(r,l),r.linesLength-=l)}return this._finishRendering(r,!1,s),r}_renderUntouchedLines(e,t,i,s,r){const o=e.rendLineNumberStart,a=e.lines;for(let l=t;l<=i;l++){const c=o+l;a[l].layoutLine(c,s[c-r],this._viewportData.lineHeight)}}_insertLinesBefore(e,t,i,s,r){const o=[];let a=0;for(let l=t;l<=i;l++)o[a++]=this._lineFactory.createLine();e.lines=o.concat(e.lines)}_removeLinesBefore(e,t){for(let i=0;i<t;i++){const s=e.lines[i].getDomNode();s==null||s.remove()}e.lines.splice(0,t)}_insertLinesAfter(e,t,i,s,r){const o=[];let a=0;for(let l=t;l<=i;l++)o[a++]=this._lineFactory.createLine();e.lines=e.lines.concat(o)}_removeLinesAfter(e,t){const i=e.linesLength-t;for(let s=0;s<t;s++){const r=e.lines[i+s].getDomNode();r==null||r.remove()}e.lines.splice(i,t)}_finishRenderingNewLines(e,t,i,s){Qf._ttPolicy&&(i=Qf._ttPolicy.createHTML(i));const r=this._domNode.lastChild;t||!r?this._domNode.innerHTML=i:r.insertAdjacentHTML("afterend",i);let o=this._domNode.lastChild;for(let a=e.linesLength-1;a>=0;a--){const l=e.lines[a];s[a]&&(l.setDomNode(o),o=o.previousSibling)}}_finishRenderingInvalidLines(e,t,i){const s=document.createElement("div");Qf._ttPolicy&&(t=Qf._ttPolicy.createHTML(t)),s.innerHTML=t;for(let r=0;r<e.linesLength;r++){const o=e.lines[r];if(i[r]){const a=s.firstChild,l=o.getDomNode();l.parentNode.replaceChild(a,l),o.setDomNode(a)}}}_finishRendering(e,t,i){const s=Qf._sb,r=e.linesLength,o=e.lines,a=e.rendLineNumberStart,l=[];{s.reset();let c=!1;for(let d=0;d<r;d++){const u=o[d];l[d]=!1,!(u.getDomNode()||!u.renderLine(d+a,i[d],this._viewportData.lineHeight,this._viewportData,s))&&(l[d]=!0,c=!0)}c&&this._finishRenderingNewLines(e,t,s.build(),l)}{s.reset();let c=!1;const d=[];for(let u=0;u<r;u++){const h=o[u];d[u]=!1,!(l[u]||!h.renderLine(u+a,i[u],this._viewportData.lineHeight,this._viewportData,s))&&(d[u]=!0,c=!0)}c&&this._finishRenderingInvalidLines(e,s.build(),d)}}};Qf._ttPolicy=up("editorViewLayer",{createHTML:e=>e}),Qf._sb=new Tx(1e5);let Sj=Qf;class WSe extends cl{constructor(e){super(e),this._dynamicOverlays=[],this._isFocused=!1,this._visibleLines=new BSe({createLine:()=>new Ict(this._dynamicOverlays)}),this.domNode=this._visibleLines.domNode;const i=this._context.configuration.options.get(50);rr(this.domNode,i),this.domNode.setClassName("view-overlays")}shouldRender(){if(super.shouldRender())return!0;for(let e=0,t=this._dynamicOverlays.length;e<t;e++)if(this._dynamicOverlays[e].shouldRender())return!0;return!1}dispose(){super.dispose();for(let e=0,t=this._dynamicOverlays.length;e<t;e++)this._dynamicOverlays[e].dispose();this._dynamicOverlays=[]}getDomNode(){return this.domNode}addDynamicOverlay(e){this._dynamicOverlays.push(e)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e);const i=this._context.configuration.options.get(50);return rr(this.domNode,i),!0}onFlushed(e){return this._visibleLines.onFlushed(e)}onFocusChanged(e){return this._isFocused=e.isFocused,!0}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onScrollChanged(e){return this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._visibleLines.onZonesChanged(e)}prepareRender(e){const t=this._dynamicOverlays.filter(i=>i.shouldRender());for(let i=0,s=t.length;i<s;i++){const r=t[i];r.prepareRender(e),r.onDidRender()}}render(e){this._viewOverlaysRender(e),this.domNode.toggleClassName("focused",this._isFocused)}_viewOverlaysRender(e){this._visibleLines.renderLines(e.viewportData)}}class Ict{constructor(e){this._dynamicOverlays=e,this._domNode=null,this._renderedContent=null}getDomNode(){return this._domNode?this._domNode.domNode:null}setDomNode(e){this._domNode=ui(e)}onContentChanged(){}onTokensChanged(){}renderLine(e,t,i,s,r){let o="";for(let a=0,l=this._dynamicOverlays.length;a<l;a++){const c=this._dynamicOverlays[a];o+=c.render(s.startLineNumber,e)}return this._renderedContent===o?!1:(this._renderedContent=o,r.appendString('<div style="top:'),r.appendString(String(t)),r.appendString("px;height:"),r.appendString(String(i)),r.appendString('px;">'),r.appendString(o),r.appendString("</div>"),!0)}layoutLine(e,t,i){this._domNode&&(this._domNode.setTop(t),this._domNode.setHeight(i))}}class Dct extends WSe{constructor(e){super(e);const i=this._context.configuration.options.get(146);this._contentWidth=i.contentWidth,this.domNode.setHeight(0)}onConfigurationChanged(e){const i=this._context.configuration.options.get(146);return this._contentWidth=i.contentWidth,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollWidthChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e),this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth))}}class Nct extends WSe{constructor(e){super(e);const t=this._context.configuration.options,i=t.get(146);this._contentLeft=i.contentLeft,this.domNode.setClassName("margin-view-overlays"),this.domNode.setWidth(1),rr(this.domNode,t.get(50))}onConfigurationChanged(e){const t=this._context.configuration.options;rr(this.domNode,t.get(50));const i=t.get(146);return this._contentLeft=i.contentLeft,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollHeightChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e);const t=Math.min(e.scrollHeight,1e6);this.domNode.setHeight(t),this.domNode.setWidth(this._contentLeft)}}class zB{constructor(e){this.onKeyDown=null,this.onKeyUp=null,this.onContextMenu=null,this.onMouseMove=null,this.onMouseLeave=null,this.onMouseDown=null,this.onMouseUp=null,this.onMouseDrag=null,this.onMouseDrop=null,this.onMouseDropCanceled=null,this.onMouseWheel=null,this._coordinatesConverter=e}emitKeyDown(e){var t;(t=this.onKeyDown)==null||t.call(this,e)}emitKeyUp(e){var t;(t=this.onKeyUp)==null||t.call(this,e)}emitContextMenu(e){var t;(t=this.onContextMenu)==null||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseMove(e){var t;(t=this.onMouseMove)==null||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseLeave(e){var t;(t=this.onMouseLeave)==null||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDown(e){var t;(t=this.onMouseDown)==null||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseUp(e){var t;(t=this.onMouseUp)==null||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDrag(e){var t;(t=this.onMouseDrag)==null||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDrop(e){var t;(t=this.onMouseDrop)==null||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDropCanceled(){var e;(e=this.onMouseDropCanceled)==null||e.call(this)}emitMouseWheel(e){var t;(t=this.onMouseWheel)==null||t.call(this,e)}_convertViewToModelMouseEvent(e){return e.target?{event:e.event,target:this._convertViewToModelMouseTarget(e.target)}:e}_convertViewToModelMouseTarget(e){return zB.convertViewToModelMouseTarget(e,this._coordinatesConverter)}static convertViewToModelMouseTarget(e,t){const i={...e};return i.position&&(i.position=t.convertViewPositionToModelPosition(i.position)),i.range&&(i.range=t.convertViewRangeToModelRange(i.range)),(i.type===5||i.type===8)&&(i.detail=this.convertViewToModelViewZoneData(i.detail,t)),i}static convertViewToModelViewZoneData(e,t){return{viewZoneId:e.viewZoneId,positionBefore:e.positionBefore?t.convertViewPositionToModelPosition(e.positionBefore):e.positionBefore,positionAfter:e.positionAfter?t.convertViewPositionToModelPosition(e.positionAfter):e.positionAfter,position:t.convertViewPositionToModelPosition(e.position),afterLineNumber:t.convertViewPositionToModelPosition(new Y(e.afterLineNumber,1)).lineNumber}}}class Tct extends cl{constructor(e){super(e),this.blocks=[],this.contentWidth=-1,this.contentLeft=0,this.domNode=ui(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("blockDecorations-container"),this.update()}update(){let e=!1;const i=this._context.configuration.options.get(146),s=i.contentWidth-i.verticalScrollbarWidth;this.contentWidth!==s&&(this.contentWidth=s,e=!0);const r=i.contentLeft;return this.contentLeft!==r&&(this.contentLeft=r,e=!0),e}dispose(){super.dispose()}onConfigurationChanged(e){return this.update()}onScrollChanged(e){return e.scrollTopChanged||e.scrollLeftChanged}onDecorationsChanged(e){return!0}onZonesChanged(e){return!0}prepareRender(e){}render(e){let t=0;const i=e.getDecorationsInViewport();for(const s of i){if(!s.options.blockClassName)continue;let r=this.blocks[t];r||(r=this.blocks[t]=ui(document.createElement("div")),this.domNode.appendChild(r));let o,a;s.options.blockIsAfterEnd?(o=e.getVerticalOffsetAfterLineNumber(s.range.endLineNumber,!1),a=e.getVerticalOffsetAfterLineNumber(s.range.endLineNumber,!0)):(o=e.getVerticalOffsetForLineNumber(s.range.startLineNumber,!0),a=s.range.isEmpty()&&!s.options.blockDoesNotCollapse?e.getVerticalOffsetForLineNumber(s.range.startLineNumber,!1):e.getVerticalOffsetAfterLineNumber(s.range.endLineNumber,!0));const[l,c,d,u]=s.options.blockPadding??[0,0,0,0];r.setClassName("blockDecorations-block "+s.options.blockClassName),r.setLeft(this.contentLeft-u),r.setWidth(this.contentWidth+u+c),r.setTop(o-e.scrollTop-l),r.setHeight(a-o+l+d),t++}for(let s=t;s<this.blocks.length;s++)this.blocks[s].domNode.remove();this.blocks.length=t}}class Rct extends cl{constructor(e,t){super(e),this._viewDomNode=t,this._widgets={},this.domNode=ui(document.createElement("div")),$u.write(this.domNode,1),this.domNode.setClassName("contentWidgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this.overflowingContentWidgetsDomNode=ui(document.createElement("div")),$u.write(this.overflowingContentWidgetsDomNode,2),this.overflowingContentWidgetsDomNode.setClassName("overflowingContentWidgets")}dispose(){super.dispose(),this._widgets={}}onConfigurationChanged(e){const t=Object.keys(this._widgets);for(const i of t)this._widgets[i].onConfigurationChanged(e);return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLineMappingChanged(e){return this._updateAnchorsViewPositions(),!0}onLinesChanged(e){return this._updateAnchorsViewPositions(),!0}onLinesDeleted(e){return this._updateAnchorsViewPositions(),!0}onLinesInserted(e){return this._updateAnchorsViewPositions(),!0}onScrollChanged(e){return!0}onZonesChanged(e){return!0}_updateAnchorsViewPositions(){const e=Object.keys(this._widgets);for(const t of e)this._widgets[t].updateAnchorViewPosition()}addWidget(e){const t=new Act(this._context,this._viewDomNode,e);this._widgets[t.id]=t,t.allowEditorOverflow?this.overflowingContentWidgetsDomNode.appendChild(t.domNode):this.domNode.appendChild(t.domNode),this.setShouldRender()}setWidgetPosition(e,t,i,s,r){this._widgets[e.getId()].setPosition(t,i,s,r),this.setShouldRender()}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const i=this._widgets[t];delete this._widgets[t];const s=i.domNode.domNode;s.remove(),s.removeAttribute("monaco-visible-content-widget"),this.setShouldRender()}}shouldSuppressMouseDownOnWidget(e){return this._widgets.hasOwnProperty(e)?this._widgets[e].suppressMouseDown:!1}onBeforeRender(e){const t=Object.keys(this._widgets);for(const i of t)this._widgets[i].onBeforeRender(e)}prepareRender(e){const t=Object.keys(this._widgets);for(const i of t)this._widgets[i].prepareRender(e)}render(e){const t=Object.keys(this._widgets);for(const i of t)this._widgets[i].render(e)}}class Act{constructor(e,t,i){this._primaryAnchor=new KL(null,null),this._secondaryAnchor=new KL(null,null),this._context=e,this._viewDomNode=t,this._actual=i,this.domNode=ui(this._actual.getDomNode()),this.id=this._actual.getId(),this.allowEditorOverflow=this._actual.allowEditorOverflow||!1,this.suppressMouseDown=this._actual.suppressMouseDown||!1;const s=this._context.configuration.options,r=s.get(146);this._fixedOverflowWidgets=s.get(42),this._contentWidth=r.contentWidth,this._contentLeft=r.contentLeft,this._lineHeight=s.get(67),this._affinity=null,this._preference=[],this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1,this._maxWidth=this._getMaxWidth(),this._isVisible=!1,this._renderData=null,this.domNode.setPosition(this._fixedOverflowWidgets&&this.allowEditorOverflow?"fixed":"absolute"),this.domNode.setDisplay("none"),this.domNode.setVisibility("hidden"),this.domNode.setAttribute("widgetId",this.id),this.domNode.setMaxWidth(this._maxWidth)}onConfigurationChanged(e){const t=this._context.configuration.options;if(this._lineHeight=t.get(67),e.hasChanged(146)){const i=t.get(146);this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,this._maxWidth=this._getMaxWidth()}}updateAnchorViewPosition(){this._setPosition(this._affinity,this._primaryAnchor.modelPosition,this._secondaryAnchor.modelPosition)}_setPosition(e,t,i){this._affinity=e,this._primaryAnchor=s(t,this._context.viewModel,this._affinity),this._secondaryAnchor=s(i,this._context.viewModel,this._affinity);function s(r,o,a){if(!r)return new KL(null,null);const l=o.model.validatePosition(r);if(o.coordinatesConverter.modelPositionIsVisible(l)){const c=o.coordinatesConverter.convertModelPositionToViewPosition(l,a??void 0);return new KL(r,c)}return new KL(r,null)}}_getMaxWidth(){const e=this.domNode.domNode.ownerDocument,t=e.defaultView;return this.allowEditorOverflow?(t==null?void 0:t.innerWidth)||e.documentElement.offsetWidth||e.body.offsetWidth:this._contentWidth}setPosition(e,t,i,s){this._setPosition(s,e,t),this._preference=i,this._primaryAnchor.viewPosition&&this._preference&&this._preference.length>0?this.domNode.setDisplay("block"):this.domNode.setDisplay("none"),this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1}_layoutBoxInViewport(e,t,i,s){const r=e.top,o=r,a=e.top+e.height,l=s.viewportHeight-a,c=r-i,d=o>=i,u=a,h=l>=i;let f=e.left;return f+t>s.scrollLeft+s.viewportWidth&&(f=s.scrollLeft+s.viewportWidth-t),f<s.scrollLeft&&(f=s.scrollLeft),{fitsAbove:d,aboveTop:c,fitsBelow:h,belowTop:u,left:f}}_layoutHorizontalSegmentInPage(e,t,i,s){const a=Math.max(15,t.left-s),l=Math.min(t.left+t.width+s,e.width-15),d=this._viewDomNode.domNode.ownerDocument.defaultView;let u=t.left+i-((d==null?void 0:d.scrollX)??0);if(u+s>l){const h=u-(l-s);u-=h,i-=h}if(u<a){const h=u-a;u-=h,i-=h}return[i,u]}_layoutBoxInPage(e,t,i,s){const r=e.top-i,o=e.top+e.height,a=Fn(this._viewDomNode.domNode),l=this._viewDomNode.domNode.ownerDocument,c=l.defaultView,d=a.top+r-((c==null?void 0:c.scrollY)??0),u=a.top+o-((c==null?void 0:c.scrollY)??0),h=R_(l.body),[f,g]=this._layoutHorizontalSegmentInPage(h,a,e.left-s.scrollLeft+this._contentLeft,t),p=22,_=22,w=d>=p,b=u+i<=h.height-_;return this._fixedOverflowWidgets?{fitsAbove:w,aboveTop:Math.max(d,p),fitsBelow:b,belowTop:u,left:g}:{fitsAbove:w,aboveTop:r,fitsBelow:b,belowTop:o,left:f}}_prepareRenderWidgetAtExactPositionOverflowing(e){return new qL(e.top,e.left+this._contentLeft)}_getAnchorsCoordinates(e){var o,a;const t=r(this._primaryAnchor.viewPosition,this._affinity,this._lineHeight),i=((o=this._secondaryAnchor.viewPosition)==null?void 0:o.lineNumber)===((a=this._primaryAnchor.viewPosition)==null?void 0:a.lineNumber)?this._secondaryAnchor.viewPosition:null,s=r(i,this._affinity,this._lineHeight);return{primary:t,secondary:s};function r(l,c,d){if(!l)return null;const u=e.visibleRangeForPosition(l);if(!u)return null;const h=l.column===1&&c===3?0:u.left,f=e.getVerticalOffsetForLineNumber(l.lineNumber)-e.scrollTop;return new nde(f,h,d)}}_reduceAnchorCoordinates(e,t,i){if(!t)return e;const s=this._context.configuration.options.get(50);let r=t.left;return r<e.left?r=Math.max(r,e.left-i+s.typicalFullwidthCharacterWidth):r=Math.min(r,e.left+i-s.typicalFullwidthCharacterWidth),new nde(e.top,r,e.height)}_prepareRenderWidget(e){if(!this._preference||this._preference.length===0)return null;const{primary:t,secondary:i}=this._getAnchorsCoordinates(e);if(!t)return{kind:"offViewport",preserveFocus:this.domNode.domNode.contains(this.domNode.domNode.ownerDocument.activeElement)};if(this._cachedDomNodeOffsetWidth===-1||this._cachedDomNodeOffsetHeight===-1){let o=null;if(typeof this._actual.beforeRender=="function"&&(o=K8(this._actual.beforeRender,this._actual)),o)this._cachedDomNodeOffsetWidth=o.width,this._cachedDomNodeOffsetHeight=o.height;else{const l=this.domNode.domNode.getBoundingClientRect();this._cachedDomNodeOffsetWidth=Math.round(l.width),this._cachedDomNodeOffsetHeight=Math.round(l.height)}}const s=this._reduceAnchorCoordinates(t,i,this._cachedDomNodeOffsetWidth);let r;this.allowEditorOverflow?r=this._layoutBoxInPage(s,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,e):r=this._layoutBoxInViewport(s,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,e);for(let o=1;o<=2;o++)for(const a of this._preference)if(a===1){if(!r)return null;if(o===2||r.fitsAbove)return{kind:"inViewport",coordinate:new qL(r.aboveTop,r.left),position:1}}else if(a===2){if(!r)return null;if(o===2||r.fitsBelow)return{kind:"inViewport",coordinate:new qL(r.belowTop,r.left),position:2}}else return this.allowEditorOverflow?{kind:"inViewport",coordinate:this._prepareRenderWidgetAtExactPositionOverflowing(new qL(s.top,s.left)),position:0}:{kind:"inViewport",coordinate:new qL(s.top,s.left),position:0};return null}onBeforeRender(e){!this._primaryAnchor.viewPosition||!this._preference||this._primaryAnchor.viewPosition.lineNumber<e.startLineNumber||this._primaryAnchor.viewPosition.lineNumber>e.endLineNumber||this.domNode.setMaxWidth(this._maxWidth)}prepareRender(e){this._renderData=this._prepareRenderWidget(e)}render(e){var t;if(!this._renderData||this._renderData.kind==="offViewport"){this._isVisible&&(this.domNode.removeAttribute("monaco-visible-content-widget"),this._isVisible=!1,((t=this._renderData)==null?void 0:t.kind)==="offViewport"&&this._renderData.preserveFocus?this.domNode.setTop(-1e3):this.domNode.setVisibility("hidden")),typeof this._actual.afterRender=="function"&&K8(this._actual.afterRender,this._actual,null);return}this.allowEditorOverflow?(this.domNode.setTop(this._renderData.coordinate.top),this.domNode.setLeft(this._renderData.coordinate.left)):(this.domNode.setTop(this._renderData.coordinate.top+e.scrollTop-e.bigNumbersDelta),this.domNode.setLeft(this._renderData.coordinate.left)),this._isVisible||(this.domNode.setVisibility("inherit"),this.domNode.setAttribute("monaco-visible-content-widget","true"),this._isVisible=!0),typeof this._actual.afterRender=="function"&&K8(this._actual.afterRender,this._actual,this._renderData.position)}}class KL{constructor(e,t){this.modelPosition=e,this.viewPosition=t}}class qL{constructor(e,t){this.top=e,this.left=t,this._coordinateBrand=void 0}}class nde{constructor(e,t,i){this.top=e,this.left=t,this.height=i,this._anchorCoordinateBrand=void 0}}function K8(n,e,...t){try{return n.call(e,...t)}catch{return null}}class HSe extends G0{constructor(e){super(),this._context=e;const t=this._context.configuration.options,i=t.get(146);this._renderLineHighlight=t.get(97),this._renderLineHighlightOnlyWhenFocus=t.get(98),this._wordWrap=i.isViewportWrapping,this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,this._selectionIsEmpty=!0,this._focused=!1,this._cursorLineNumbers=[1],this._selections=[new $e(1,1,1,1)],this._renderData=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}_readFromSelections(){let e=!1;const t=new Set;for(const r of this._selections)t.add(r.positionLineNumber);const i=Array.from(t);i.sort((r,o)=>r-o),dn(this._cursorLineNumbers,i)||(this._cursorLineNumbers=i,e=!0);const s=this._selections.every(r=>r.isEmpty());return this._selectionIsEmpty!==s&&(this._selectionIsEmpty=s,e=!0),e}onThemeChanged(e){return this._readFromSelections()}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(146);return this._renderLineHighlight=t.get(97),this._renderLineHighlightOnlyWhenFocus=t.get(98),this._wordWrap=i.isViewportWrapping,this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,!0}onCursorStateChanged(e){return this._selections=e.selections,this._readFromSelections()}onFlushed(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollWidthChanged||e.scrollTopChanged}onZonesChanged(e){return!0}onFocusChanged(e){return this._renderLineHighlightOnlyWhenFocus?(this._focused=e.isFocused,!0):!1}prepareRender(e){if(!this._shouldRenderThis()){this._renderData=null;return}const t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,s=[];for(let o=t;o<=i;o++){const a=o-t;s[a]=""}if(this._wordWrap){const o=this._renderOne(e,!1);for(const a of this._cursorLineNumbers){const l=this._context.viewModel.coordinatesConverter,c=l.convertViewPositionToModelPosition(new Y(a,1)).lineNumber,d=l.convertModelPositionToViewPosition(new Y(c,1)).lineNumber,u=l.convertModelPositionToViewPosition(new Y(c,this._context.viewModel.model.getLineMaxColumn(c))).lineNumber,h=Math.max(d,t),f=Math.min(u,i);for(let g=h;g<=f;g++){const p=g-t;s[p]=o}}}const r=this._renderOne(e,!0);for(const o of this._cursorLineNumbers){if(o<t||o>i)continue;const a=o-t;s[a]=r}this._renderData=s}render(e,t){if(!this._renderData)return"";const i=t-e;return i>=this._renderData.length?"":this._renderData[i]}_shouldRenderInMargin(){return(this._renderLineHighlight==="gutter"||this._renderLineHighlight==="all")&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}_shouldRenderInContent(){return(this._renderLineHighlight==="line"||this._renderLineHighlight==="all")&&this._selectionIsEmpty&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}}class Mct extends HSe{_renderOne(e,t){return`<div class="${"current-line"+(this._shouldRenderInMargin()?" current-line-both":"")+(t?" current-line-exact":"")}" style="width:${Math.max(e.scrollWidth,this._contentWidth)}px;"></div>`}_shouldRenderThis(){return this._shouldRenderInContent()}_shouldRenderOther(){return this._shouldRenderInMargin()}}class Pct extends HSe{_renderOne(e,t){return`<div class="${"current-line"+(this._shouldRenderInMargin()?" current-line-margin":"")+(this._shouldRenderOther()?" current-line-margin-both":"")+(this._shouldRenderInMargin()&&t?" current-line-exact-margin":"")}" style="width:${this._contentLeft}px"></div>`}_shouldRenderThis(){return!0}_shouldRenderOther(){return this._shouldRenderInContent()}}zc((n,e)=>{const t=n.getColor(Q1e);if(t&&(e.addRule(`.monaco-editor .view-overlays .current-line { background-color: ${t}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { background-color: ${t}; border: none; }`)),!t||t.isTransparent()||n.defines($le)){const i=n.getColor($le);i&&(e.addRule(`.monaco-editor .view-overlays .current-line-exact { border: 2px solid ${i}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-exact-margin { border: 2px solid ${i}; }`),Tu(n.type)&&(e.addRule(".monaco-editor .view-overlays .current-line-exact { border-width: 1px; }"),e.addRule(".monaco-editor .margin-view-overlays .current-line-exact-margin { border-width: 1px; }")))}});class Oct extends G0{constructor(e){super(),this._context=e;const t=this._context.configuration.options;this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}prepareRender(e){const t=e.getDecorationsInViewport();let i=[],s=0;for(let l=0,c=t.length;l<c;l++){const d=t[l];d.options.className&&(i[s++]=d)}i=i.sort((l,c)=>{if(l.options.zIndex<c.options.zIndex)return-1;if(l.options.zIndex>c.options.zIndex)return 1;const d=l.options.className,u=c.options.className;return d<u?-1:d>u?1:M.compareRangesUsingStarts(l.range,c.range)});const r=e.visibleRange.startLineNumber,o=e.visibleRange.endLineNumber,a=[];for(let l=r;l<=o;l++){const c=l-r;a[c]=""}this._renderWholeLineDecorations(e,i,a),this._renderNormalDecorations(e,i,a),this._renderResult=a}_renderWholeLineDecorations(e,t,i){const s=e.visibleRange.startLineNumber,r=e.visibleRange.endLineNumber;for(let o=0,a=t.length;o<a;o++){const l=t[o];if(!l.options.isWholeLine)continue;const c='<div class="cdr '+l.options.className+'" style="left:0;width:100%;"></div>',d=Math.max(l.range.startLineNumber,s),u=Math.min(l.range.endLineNumber,r);for(let h=d;h<=u;h++){const f=h-s;i[f]+=c}}}_renderNormalDecorations(e,t,i){const s=e.visibleRange.startLineNumber;let r=null,o=!1,a=null,l=!1;for(let c=0,d=t.length;c<d;c++){const u=t[c];if(u.options.isWholeLine)continue;const h=u.options.className,f=!!u.options.showIfCollapsed;let g=u.range;if(f&&g.endColumn===1&&g.endLineNumber!==g.startLineNumber&&(g=new M(g.startLineNumber,g.startColumn,g.endLineNumber-1,this._context.viewModel.getLineMaxColumn(g.endLineNumber-1))),r===h&&o===f&&M.areIntersectingOrTouching(a,g)){a=M.plusRange(a,g);continue}r!==null&&this._renderNormalDecoration(e,a,r,l,o,s,i),r=h,o=f,a=g,l=u.options.shouldFillLineOnLineBreak??!1}r!==null&&this._renderNormalDecoration(e,a,r,l,o,s,i)}_renderNormalDecoration(e,t,i,s,r,o,a){const l=e.linesVisibleRangesForRange(t,i==="findMatch");if(l)for(let c=0,d=l.length;c<d;c++){const u=l[c];if(u.outsideRenderedLine)continue;const h=u.lineNumber-o;if(r&&u.ranges.length===1){const f=u.ranges[0];if(f.width<this._typicalHalfwidthCharacterWidth){const g=Math.round(f.left+f.width/2),p=Math.max(0,Math.round(g-this._typicalHalfwidthCharacterWidth/2));u.ranges[0]=new BB(p,this._typicalHalfwidthCharacterWidth)}}for(let f=0,g=u.ranges.length;f<g;f++){const p=s&&u.continuesOnNextLine&&g===1,_=u.ranges[f],w='<div class="cdr '+i+'" style="left:'+String(_.left)+"px;width:"+(p?"100%;":String(_.width)+"px;")+'"></div>';a[h]+=w}}}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}class Fct extends cl{constructor(e,t,i,s){super(e);const r=this._context.configuration.options,o=r.get(104),a=r.get(75),l=r.get(40),c=r.get(107),d={listenOnDomNode:i.domNode,className:"editor-scrollable "+oU(e.theme.type),useShadows:!1,lazyRender:!0,vertical:o.vertical,horizontal:o.horizontal,verticalHasArrows:o.verticalHasArrows,horizontalHasArrows:o.horizontalHasArrows,verticalScrollbarSize:o.verticalScrollbarSize,verticalSliderSize:o.verticalSliderSize,horizontalScrollbarSize:o.horizontalScrollbarSize,horizontalSliderSize:o.horizontalSliderSize,handleMouseWheel:o.handleMouseWheel,alwaysConsumeMouseWheel:o.alwaysConsumeMouseWheel,arrowSize:o.arrowSize,mouseWheelScrollSensitivity:a,fastScrollSensitivity:l,scrollPredominantAxis:c,scrollByPage:o.scrollByPage};this.scrollbar=this._register(new hB(t.domNode,d,this._context.viewLayout.getScrollable())),$u.write(this.scrollbar.getDomNode(),6),this.scrollbarDomNode=ui(this.scrollbar.getDomNode()),this.scrollbarDomNode.setPosition("absolute"),this._setLayout();const u=(h,f,g)=>{const p={};{const _=h.scrollTop;_&&(p.scrollTop=this._context.viewLayout.getCurrentScrollTop()+_,h.scrollTop=0)}if(g){const _=h.scrollLeft;_&&(p.scrollLeft=this._context.viewLayout.getCurrentScrollLeft()+_,h.scrollLeft=0)}this._context.viewModel.viewLayout.setScrollPosition(p,1)};this._register(re(i.domNode,"scroll",h=>u(i.domNode,!0,!0))),this._register(re(t.domNode,"scroll",h=>u(t.domNode,!0,!1))),this._register(re(s.domNode,"scroll",h=>u(s.domNode,!0,!1))),this._register(re(this.scrollbarDomNode.domNode,"scroll",h=>u(this.scrollbarDomNode.domNode,!0,!1)))}dispose(){super.dispose()}_setLayout(){const e=this._context.configuration.options,t=e.get(146);this.scrollbarDomNode.setLeft(t.contentLeft),e.get(73).side==="right"?this.scrollbarDomNode.setWidth(t.contentWidth+t.minimap.minimapWidth):this.scrollbarDomNode.setWidth(t.contentWidth),this.scrollbarDomNode.setHeight(t.height)}getOverviewRulerLayoutInfo(){return this.scrollbar.getOverviewRulerLayoutInfo()}getDomNode(){return this.scrollbarDomNode}delegateVerticalScrollbarPointerDown(e){this.scrollbar.delegateVerticalScrollbarPointerDown(e)}delegateScrollFromMouseWheelEvent(e){this.scrollbar.delegateScrollFromMouseWheelEvent(e)}onConfigurationChanged(e){if(e.hasChanged(104)||e.hasChanged(75)||e.hasChanged(40)){const t=this._context.configuration.options,i=t.get(104),s=t.get(75),r=t.get(40),o=t.get(107),a={vertical:i.vertical,horizontal:i.horizontal,verticalScrollbarSize:i.verticalScrollbarSize,horizontalScrollbarSize:i.horizontalScrollbarSize,scrollByPage:i.scrollByPage,handleMouseWheel:i.handleMouseWheel,mouseWheelScrollSensitivity:s,fastScrollSensitivity:r,scrollPredominantAxis:o};this.scrollbar.updateOptions(a)}return e.hasChanged(146)&&this._setLayout(),!0}onScrollChanged(e){return!0}onThemeChanged(e){return this.scrollbar.updateClassName("editor-scrollable "+oU(this._context.theme.type)),!0}prepareRender(e){}render(e){this.scrollbar.renderNow()}}class xj{constructor(e,t,i,s,r){this.startLineNumber=e,this.endLineNumber=t,this.className=i,this.tooltip=s,this._decorationToRenderBrand=void 0,this.zIndex=r??0}}class Bct{constructor(e,t,i){this.className=e,this.zIndex=t,this.tooltip=i}}class Wct{constructor(){this.decorations=[]}add(e){this.decorations.push(e)}getDecorations(){return this.decorations}}class VSe extends G0{_render(e,t,i){const s=[];for(let a=e;a<=t;a++){const l=a-e;s[l]=new Wct}if(i.length===0)return s;i.sort((a,l)=>a.className===l.className?a.startLineNumber===l.startLineNumber?a.endLineNumber-l.endLineNumber:a.startLineNumber-l.startLineNumber:a.className<l.className?-1:1);let r=null,o=0;for(let a=0,l=i.length;a<l;a++){const c=i[a],d=c.className,u=c.zIndex;let h=Math.max(c.startLineNumber,e)-e;const f=Math.min(c.endLineNumber,t)-e;r===d?(h=Math.max(o+1,h),o=Math.max(o,f)):(r=d,o=f);for(let g=h;g<=o;g++)s[g].add(new Bct(d,u,c.tooltip))}return s}}class Hct extends cl{constructor(e){super(e),this._widgets={},this._context=e;const t=this._context.configuration.options,i=t.get(146);this.domNode=ui(document.createElement("div")),this.domNode.setClassName("glyph-margin-widgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this._lineHeight=t.get(67),this._glyphMargin=t.get(57),this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,this._glyphMarginDecorationLaneCount=i.glyphMarginDecorationLaneCount,this._managedDomNodes=[],this._decorationGlyphsToRender=[]}dispose(){this._managedDomNodes=[],this._decorationGlyphsToRender=[],this._widgets={},super.dispose()}getWidgets(){return Object.values(this._widgets)}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(146);return this._lineHeight=t.get(67),this._glyphMargin=t.get(57),this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,this._glyphMarginDecorationLaneCount=i.glyphMarginDecorationLaneCount,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}addWidget(e){const t=ui(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:e.getPosition(),domNode:t,renderInfo:null},t.setPosition("absolute"),t.setDisplay("none"),t.setAttribute("widgetId",e.getId()),this.domNode.appendChild(t),this.setShouldRender()}setWidgetPosition(e,t){const i=this._widgets[e.getId()];return i.preference.lane===t.lane&&i.preference.zIndex===t.zIndex&&M.equalsRange(i.preference.range,t.range)?!1:(i.preference=t,this.setShouldRender(),!0)}removeWidget(e){const t=e.getId();if(this._widgets[t]){const s=this._widgets[t].domNode.domNode;delete this._widgets[t],s.remove(),this.setShouldRender()}}_collectDecorationBasedGlyphRenderRequest(e,t){var o;const i=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber,r=e.getDecorationsInViewport();for(const a of r){const l=a.options.glyphMarginClassName;if(!l)continue;const c=Math.max(a.range.startLineNumber,i),d=Math.min(a.range.endLineNumber,s),u=((o=a.options.glyphMargin)==null?void 0:o.position)??Td.Center,h=a.options.zIndex??0;for(let f=c;f<=d;f++){const g=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new Y(f,0)),p=this._context.viewModel.glyphLanes.getLanesAtLine(g.lineNumber).indexOf(u);t.push(new Vct(f,p,h,l))}}}_collectWidgetBasedGlyphRenderRequest(e,t){const i=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber;for(const r of Object.values(this._widgets)){const o=r.preference.range,{startLineNumber:a,endLineNumber:l}=this._context.viewModel.coordinatesConverter.convertModelRangeToViewRange(M.lift(o));if(!a||!l||l<i||a>s)continue;const c=Math.max(a,i),d=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new Y(c,0)),u=this._context.viewModel.glyphLanes.getLanesAtLine(d.lineNumber).indexOf(r.preference.lane);t.push(new zct(c,u,r.preference.zIndex,r))}}_collectSortedGlyphRenderRequests(e){const t=[];return this._collectDecorationBasedGlyphRenderRequest(e,t),this._collectWidgetBasedGlyphRenderRequest(e,t),t.sort((i,s)=>i.lineNumber===s.lineNumber?i.laneIndex===s.laneIndex?i.zIndex===s.zIndex?s.type===i.type?i.type===0&&s.type===0?i.className<s.className?-1:1:0:s.type-i.type:s.zIndex-i.zIndex:i.laneIndex-s.laneIndex:i.lineNumber-s.lineNumber),t}prepareRender(e){if(!this._glyphMargin){this._decorationGlyphsToRender=[];return}for(const s of Object.values(this._widgets))s.renderInfo=null;const t=new Gg(this._collectSortedGlyphRenderRequests(e)),i=[];for(;t.length>0;){const s=t.peek();if(!s)break;const r=t.takeWhile(a=>a.lineNumber===s.lineNumber&&a.laneIndex===s.laneIndex);if(!r||r.length===0)break;const o=r[0];if(o.type===0){const a=[];for(const l of r){if(l.zIndex!==o.zIndex||l.type!==o.type)break;(a.length===0||a[a.length-1]!==l.className)&&a.push(l.className)}i.push(o.accept(a.join(" ")))}else o.widget.renderInfo={lineNumber:o.lineNumber,laneIndex:o.laneIndex}}this._decorationGlyphsToRender=i}render(e){if(!this._glyphMargin){for(const i of Object.values(this._widgets))i.domNode.setDisplay("none");for(;this._managedDomNodes.length>0;){const i=this._managedDomNodes.pop();i==null||i.domNode.remove()}return}const t=Math.round(this._glyphMarginWidth/this._glyphMarginDecorationLaneCount);for(const i of Object.values(this._widgets))if(!i.renderInfo)i.domNode.setDisplay("none");else{const s=e.viewportData.relativeVerticalOffset[i.renderInfo.lineNumber-e.viewportData.startLineNumber],r=this._glyphMarginLeft+i.renderInfo.laneIndex*this._lineHeight;i.domNode.setDisplay("block"),i.domNode.setTop(s),i.domNode.setLeft(r),i.domNode.setWidth(t),i.domNode.setHeight(this._lineHeight)}for(let i=0;i<this._decorationGlyphsToRender.length;i++){const s=this._decorationGlyphsToRender[i],r=e.viewportData.relativeVerticalOffset[s.lineNumber-e.viewportData.startLineNumber],o=this._glyphMarginLeft+s.laneIndex*this._lineHeight;let a;i<this._managedDomNodes.length?a=this._managedDomNodes[i]:(a=ui(document.createElement("div")),this._managedDomNodes.push(a),this.domNode.appendChild(a)),a.setClassName("cgmr codicon "+s.combinedClassName),a.setPosition("absolute"),a.setTop(r),a.setLeft(o),a.setWidth(t),a.setHeight(this._lineHeight)}for(;this._managedDomNodes.length>this._decorationGlyphsToRender.length;){const i=this._managedDomNodes.pop();i==null||i.domNode.remove()}}}class Vct{constructor(e,t,i,s){this.lineNumber=e,this.laneIndex=t,this.zIndex=i,this.className=s,this.type=0}accept(e){return new Uct(this.lineNumber,this.laneIndex,e)}}class zct{constructor(e,t,i,s){this.lineNumber=e,this.laneIndex=t,this.zIndex=i,this.widget=s,this.type=1}}class Uct{constructor(e,t,i){this.lineNumber=e,this.laneIndex=t,this.combinedClassName=i}}class $ct extends G0{constructor(e){super(),this._context=e,this._primaryPosition=null;const t=this._context.configuration.options,i=t.get(147),s=t.get(50);this._spaceWidth=s.spaceWidth,this._maxIndentLeft=i.wrappingColumn===-1?-1:i.wrappingColumn*s.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(16),this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(147),s=t.get(50);return this._spaceWidth=s.spaceWidth,this._maxIndentLeft=i.wrappingColumn===-1?-1:i.wrappingColumn*s.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(16),!0}onCursorStateChanged(e){var s;const i=e.selections[0].getPosition();return(s=this._primaryPosition)!=null&&s.equals(i)?!1:(this._primaryPosition=i,!0)}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}onLanguageConfigurationChanged(e){return!0}prepareRender(e){var l,c;if(!this._bracketPairGuideOptions.indentation&&this._bracketPairGuideOptions.bracketPairs===!1){this._renderResult=null;return}const t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,s=e.scrollWidth,r=this._primaryPosition,o=this.getGuidesByLine(t,Math.min(i+1,this._context.viewModel.getLineCount()),r),a=[];for(let d=t;d<=i;d++){const u=d-t,h=o[u];let f="";const g=((l=e.visibleRangeForPosition(new Y(d,1)))==null?void 0:l.left)??0;for(const p of h){const _=p.column===-1?g+(p.visibleColumn-1)*this._spaceWidth:e.visibleRangeForPosition(new Y(d,p.column)).left;if(_>s||this._maxIndentLeft>0&&_>this._maxIndentLeft)break;const w=p.horizontalLine?p.horizontalLine.top?"horizontal-top":"horizontal-bottom":"vertical",b=p.horizontalLine?(((c=e.visibleRangeForPosition(new Y(d,p.horizontalLine.endColumn)))==null?void 0:c.left)??_+this._spaceWidth)-_:this._spaceWidth;f+=`<div class="core-guide ${p.className} ${w}" style="left:${_}px;width:${b}px"></div>`}a[u]=f}this._renderResult=a}getGuidesByLine(e,t,i){const s=this._bracketPairGuideOptions.bracketPairs!==!1?this._context.viewModel.getBracketGuidesInRangeByLine(e,t,i,{highlightActive:this._bracketPairGuideOptions.highlightActiveBracketPair,horizontalGuides:this._bracketPairGuideOptions.bracketPairsHorizontal===!0?Kb.Enabled:this._bracketPairGuideOptions.bracketPairsHorizontal==="active"?Kb.EnabledForActive:Kb.Disabled,includeInactive:this._bracketPairGuideOptions.bracketPairs===!0}):null,r=this._bracketPairGuideOptions.indentation?this._context.viewModel.getLinesIndentGuides(e,t):null;let o=0,a=0,l=0;if(this._bracketPairGuideOptions.highlightActiveIndentation!==!1&&i){const u=this._context.viewModel.getActiveIndentGuide(i.lineNumber,e,t);o=u.startLineNumber,a=u.endLineNumber,l=u.indent}const{indentSize:c}=this._context.viewModel.model.getOptions(),d=[];for(let u=e;u<=t;u++){const h=new Array;d.push(h);const f=s?s[u-e]:[],g=new Gg(f),p=r?r[u-e]:0;for(let _=1;_<=p;_++){const w=(_-1)*c+1,b=(this._bracketPairGuideOptions.highlightActiveIndentation==="always"||f.length===0)&&o<=u&&u<=a&&_===l;h.push(...g.takeWhile(S=>S.visibleColumn<w)||[]);const y=g.peek();(!y||y.visibleColumn!==w||y.horizontalLine)&&h.push(new kb(w,-1,`core-guide-indent lvl-${(_-1)%30}`+(b?" indent-active":""),null,-1,-1))}h.push(...g.takeWhile(_=>!0)||[])}return d}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}function RC(n){if(!(n&&n.isTransparent()))return n}zc((n,e)=>{const t=[{bracketColor:iye,guideColor:cnt,guideColorActive:pnt},{bracketColor:nye,guideColor:dnt,guideColorActive:mnt},{bracketColor:sye,guideColor:unt,guideColorActive:_nt},{bracketColor:rye,guideColor:hnt,guideColorActive:vnt},{bracketColor:oye,guideColor:fnt,guideColorActive:bnt},{bracketColor:aye,guideColor:gnt,guideColorActive:wnt}],i=new vye,s=[{indentColor:QN,indentColorActive:JN},{indentColor:zit,indentColorActive:qit},{indentColor:Uit,indentColorActive:Git},{indentColor:$it,indentColorActive:Yit},{indentColor:jit,indentColorActive:Zit},{indentColor:Kit,indentColorActive:Xit}],r=t.map(a=>{const l=n.getColor(a.bracketColor),c=n.getColor(a.guideColor),d=n.getColor(a.guideColorActive),u=RC(RC(c)??(l==null?void 0:l.transparent(.3))),h=RC(RC(d)??l);if(!(!u||!h))return{guideColor:u,guideColorActive:h}}).filter(Yh),o=s.map(a=>{const l=n.getColor(a.indentColor),c=n.getColor(a.indentColorActive),d=RC(l),u=RC(c);if(!(!d||!u))return{indentColor:d,indentColorActive:u}}).filter(Yh);if(r.length>0){for(let a=0;a<30;a++){const l=r[a%r.length];e.addRule(`.monaco-editor .${i.getInlineClassNameOfLevel(a).replace(/ /g,".")} { --guide-color: ${l.guideColor}; --guide-color-active: ${l.guideColorActive}; }`)}e.addRule(".monaco-editor .vertical { box-shadow: 1px 0 0 0 var(--guide-color) inset; }"),e.addRule(".monaco-editor .horizontal-top { border-top: 1px solid var(--guide-color); }"),e.addRule(".monaco-editor .horizontal-bottom { border-bottom: 1px solid var(--guide-color); }"),e.addRule(`.monaco-editor .vertical.${i.activeClassName} { box-shadow: 1px 0 0 0 var(--guide-color-active) inset; }`),e.addRule(`.monaco-editor .horizontal-top.${i.activeClassName} { border-top: 1px solid var(--guide-color-active); }`),e.addRule(`.monaco-editor .horizontal-bottom.${i.activeClassName} { border-bottom: 1px solid var(--guide-color-active); }`)}if(o.length>0){for(let a=0;a<30;a++){const l=o[a%o.length];e.addRule(`.monaco-editor .lines-content .core-guide-indent.lvl-${a} { --indent-color: ${l.indentColor}; --indent-color-active: ${l.indentColorActive}; }`)}e.addRule(".monaco-editor .lines-content .core-guide-indent { box-shadow: 1px 0 0 0 var(--indent-color) inset; }"),e.addRule(".monaco-editor .lines-content .core-guide-indent.indent-active { box-shadow: 1px 0 0 0 var(--indent-color-active) inset; }")}});class q8{get didDomLayout(){return this._didDomLayout}readClientRect(){if(!this._clientRectRead){this._clientRectRead=!0;const e=this._domNode.getBoundingClientRect();this.markDidDomLayout(),this._clientRectDeltaLeft=e.left,this._clientRectScale=e.width/this._domNode.offsetWidth}}get clientRectDeltaLeft(){return this._clientRectRead||this.readClientRect(),this._clientRectDeltaLeft}get clientRectScale(){return this._clientRectRead||this.readClientRect(),this._clientRectScale}constructor(e,t){this._domNode=e,this.endNode=t,this._didDomLayout=!1,this._clientRectDeltaLeft=0,this._clientRectScale=1,this._clientRectRead=!1}markDidDomLayout(){this._didDomLayout=!0}}class jct{constructor(){this._currentVisibleRange=new M(1,1,1,1)}getCurrentVisibleRange(){return this._currentVisibleRange}setCurrentVisibleRange(e){this._currentVisibleRange=e}}class Kct{constructor(e,t,i,s,r,o,a){this.minimalReveal=e,this.lineNumber=t,this.startColumn=i,this.endColumn=s,this.startScrollTop=r,this.stopScrollTop=o,this.scrollType=a,this.type="range",this.minLineNumber=t,this.maxLineNumber=t}}class qct{constructor(e,t,i,s,r){this.minimalReveal=e,this.selections=t,this.startScrollTop=i,this.stopScrollTop=s,this.scrollType=r,this.type="selections";let o=t[0].startLineNumber,a=t[0].endLineNumber;for(let l=1,c=t.length;l<c;l++){const d=t[l];o=Math.min(o,d.startLineNumber),a=Math.max(a,d.endLineNumber)}this.minLineNumber=o,this.maxLineNumber=a}}const V4=class V4 extends cl{constructor(e,t){super(e);const i=this._context.configuration,s=this._context.configuration.options,r=s.get(50),o=s.get(147);this._lineHeight=s.get(67),this._typicalHalfwidthCharacterWidth=r.typicalHalfwidthCharacterWidth,this._isViewportWrapping=o.isViewportWrapping,this._revealHorizontalRightPadding=s.get(101),this._cursorSurroundingLines=s.get(29),this._cursorSurroundingLinesStyle=s.get(30),this._canUseLayerHinting=!s.get(32),this._viewLineOptions=new Yce(i,this._context.theme.type),this._linesContent=t,this._textRangeRestingSpot=document.createElement("div"),this._visibleLines=new BSe({createLine:()=>new ug(this._viewLineOptions)}),this.domNode=this._visibleLines.domNode,$u.write(this.domNode,8),this.domNode.setClassName(`view-lines ${By}`),rr(this.domNode,r),this._maxLineWidth=0,this._asyncUpdateLineWidths=new yi(()=>{this._updateLineWidthsSlow()},200),this._asyncCheckMonospaceFontAssumptions=new yi(()=>{this._checkMonospaceFontAssumptions()},2e3),this._lastRenderedData=new jct,this._horizontalRevealRequest=null,this._stickyScrollEnabled=s.get(116).enabled,this._maxNumberStickyLines=s.get(116).maxLineCount}dispose(){this._asyncUpdateLineWidths.dispose(),this._asyncCheckMonospaceFontAssumptions.dispose(),super.dispose()}getDomNode(){return this.domNode}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e),e.hasChanged(147)&&(this._maxLineWidth=0);const t=this._context.configuration.options,i=t.get(50),s=t.get(147);return this._lineHeight=t.get(67),this._typicalHalfwidthCharacterWidth=i.typicalHalfwidthCharacterWidth,this._isViewportWrapping=s.isViewportWrapping,this._revealHorizontalRightPadding=t.get(101),this._cursorSurroundingLines=t.get(29),this._cursorSurroundingLinesStyle=t.get(30),this._canUseLayerHinting=!t.get(32),this._stickyScrollEnabled=t.get(116).enabled,this._maxNumberStickyLines=t.get(116).maxLineCount,rr(this.domNode,i),this._onOptionsMaybeChanged(),e.hasChanged(146)&&(this._maxLineWidth=0),!0}_onOptionsMaybeChanged(){const e=this._context.configuration,t=new Yce(e,this._context.theme.type);if(!this._viewLineOptions.equals(t)){this._viewLineOptions=t;const i=this._visibleLines.getStartLineNumber(),s=this._visibleLines.getEndLineNumber();for(let r=i;r<=s;r++)this._visibleLines.getVisibleLine(r).onOptionsChanged(this._viewLineOptions);return!0}return!1}onCursorStateChanged(e){const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();let s=!1;for(let r=t;r<=i;r++)s=this._visibleLines.getVisibleLine(r).onSelectionChanged()||s;return s}onDecorationsChanged(e){{const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let s=t;s<=i;s++)this._visibleLines.getVisibleLine(s).onDecorationsChanged()}return!0}onFlushed(e){const t=this._visibleLines.onFlushed(e);return this._maxLineWidth=0,t}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onRevealRangeRequest(e){const t=this._computeScrollTopToRevealRange(this._context.viewLayout.getFutureViewport(),e.source,e.minimalReveal,e.range,e.selections,e.verticalType);if(t===-1)return!1;let i=this._context.viewLayout.validateScrollPosition({scrollTop:t});e.revealHorizontal?e.range&&e.range.startLineNumber!==e.range.endLineNumber?i={scrollTop:i.scrollTop,scrollLeft:0}:e.range?this._horizontalRevealRequest=new Kct(e.minimalReveal,e.range.startLineNumber,e.range.startColumn,e.range.endColumn,this._context.viewLayout.getCurrentScrollTop(),i.scrollTop,e.scrollType):e.selections&&e.selections.length>0&&(this._horizontalRevealRequest=new qct(e.minimalReveal,e.selections,this._context.viewLayout.getCurrentScrollTop(),i.scrollTop,e.scrollType)):this._horizontalRevealRequest=null;const r=Math.abs(this._context.viewLayout.getCurrentScrollTop()-i.scrollTop)<=this._lineHeight?1:e.scrollType;return this._context.viewModel.viewLayout.setScrollPosition(i,r),!0}onScrollChanged(e){if(this._horizontalRevealRequest&&e.scrollLeftChanged&&(this._horizontalRevealRequest=null),this._horizontalRevealRequest&&e.scrollTopChanged){const t=Math.min(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop),i=Math.max(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop);(e.scrollTop<t||e.scrollTop>i)&&(this._horizontalRevealRequest=null)}return this.domNode.setWidth(e.scrollWidth),this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth),this._visibleLines.onZonesChanged(e)}onThemeChanged(e){return this._onOptionsMaybeChanged()}getPositionFromDOMInfo(e,t){const i=this._getViewLineDomNode(e);if(i===null)return null;const s=this._getLineNumberFor(i);if(s===-1||s<1||s>this._context.viewModel.getLineCount())return null;if(this._context.viewModel.getLineMaxColumn(s)===1)return new Y(s,1);const r=this._visibleLines.getStartLineNumber(),o=this._visibleLines.getEndLineNumber();if(s<r||s>o)return null;let a=this._visibleLines.getVisibleLine(s).getColumnOfNodeOffset(e,t);const l=this._context.viewModel.getLineMinColumn(s);return a<l&&(a=l),new Y(s,a)}_getViewLineDomNode(e){for(;e&&e.nodeType===1;){if(e.className===ug.CLASS_NAME)return e;e=e.parentElement}return null}_getLineNumberFor(e){const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let s=t;s<=i;s++){const r=this._visibleLines.getVisibleLine(s);if(e===r.getDomNode())return s}return-1}getLineWidth(e){const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();if(e<t||e>i)return-1;const s=new q8(this.domNode.domNode,this._textRangeRestingSpot),r=this._visibleLines.getVisibleLine(e).getWidth(s);return this._updateLineWidthsSlowIfDomDidLayout(s),r}linesVisibleRangesForRange(e,t){if(this.shouldRender())return null;const i=e.endLineNumber,s=M.intersectRanges(e,this._lastRenderedData.getCurrentVisibleRange());if(!s)return null;const r=[];let o=0;const a=new q8(this.domNode.domNode,this._textRangeRestingSpot);let l=0;t&&(l=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new Y(s.startLineNumber,1)).lineNumber);const c=this._visibleLines.getStartLineNumber(),d=this._visibleLines.getEndLineNumber();for(let u=s.startLineNumber;u<=s.endLineNumber;u++){if(u<c||u>d)continue;const h=u===s.startLineNumber?s.startColumn:1,f=u!==s.endLineNumber,g=f?this._context.viewModel.getLineMaxColumn(u):s.endColumn,p=this._visibleLines.getVisibleLine(u).getVisibleRangesForRange(u,h,g,a);if(p){if(t&&u<i){const _=l;l=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new Y(u+1,1)).lineNumber,_!==l&&(p.ranges[p.ranges.length-1].width+=this._typicalHalfwidthCharacterWidth)}r[o++]=new Tlt(p.outsideRenderedLine,u,BB.from(p.ranges),f)}}return this._updateLineWidthsSlowIfDomDidLayout(a),o===0?null:r}_visibleRangesForLineRange(e,t,i){if(this.shouldRender()||e<this._visibleLines.getStartLineNumber()||e>this._visibleLines.getEndLineNumber())return null;const s=new q8(this.domNode.domNode,this._textRangeRestingSpot),r=this._visibleLines.getVisibleLine(e).getVisibleRangesForRange(e,t,i,s);return this._updateLineWidthsSlowIfDomDidLayout(s),r}visibleRangeForPosition(e){const t=this._visibleRangesForLineRange(e.lineNumber,e.column,e.column);return t?new Rlt(t.outsideRenderedLine,t.ranges[0].left):null}_updateLineWidthsFast(){return this._updateLineWidths(!0)}_updateLineWidthsSlow(){this._updateLineWidths(!1)}_updateLineWidthsSlowIfDomDidLayout(e){e.didDomLayout&&(this._asyncUpdateLineWidths.isScheduled()||(this._asyncUpdateLineWidths.cancel(),this._updateLineWidthsSlow()))}_updateLineWidths(e){const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();let s=1,r=!0;for(let o=t;o<=i;o++){const a=this._visibleLines.getVisibleLine(o);if(e&&!a.getWidthIsFast()){r=!1;continue}s=Math.max(s,a.getWidth(null))}return r&&t===1&&i===this._context.viewModel.getLineCount()&&(this._maxLineWidth=0),this._ensureMaxLineWidth(s),r}_checkMonospaceFontAssumptions(){let e=-1,t=-1;const i=this._visibleLines.getStartLineNumber(),s=this._visibleLines.getEndLineNumber();for(let r=i;r<=s;r++){const o=this._visibleLines.getVisibleLine(r);if(o.needsMonospaceFontCheck()){const a=o.getWidth(null);a>t&&(t=a,e=r)}}if(e!==-1&&!this._visibleLines.getVisibleLine(e).monospaceAssumptionsAreValid())for(let r=i;r<=s;r++)this._visibleLines.getVisibleLine(r).onMonospaceAssumptionsInvalidated()}prepareRender(){throw new Error("Not supported")}render(){throw new Error("Not supported")}renderText(e){if(this._visibleLines.renderLines(e),this._lastRenderedData.setCurrentVisibleRange(e.visibleRange),this.domNode.setWidth(this._context.viewLayout.getScrollWidth()),this.domNode.setHeight(Math.min(this._context.viewLayout.getScrollHeight(),1e6)),this._horizontalRevealRequest){const i=this._horizontalRevealRequest;if(e.startLineNumber<=i.minLineNumber&&i.maxLineNumber<=e.endLineNumber){this._horizontalRevealRequest=null,this.onDidRender();const s=this._computeScrollLeftToReveal(i);s&&(this._isViewportWrapping||this._ensureMaxLineWidth(s.maxHorizontalOffset),this._context.viewModel.viewLayout.setScrollPosition({scrollLeft:s.scrollLeft},i.scrollType))}}if(this._updateLineWidthsFast()?this._asyncUpdateLineWidths.cancel():this._asyncUpdateLineWidths.schedule(),Po&&!this._asyncCheckMonospaceFontAssumptions.isScheduled()){const i=this._visibleLines.getStartLineNumber(),s=this._visibleLines.getEndLineNumber();for(let r=i;r<=s;r++)if(this._visibleLines.getVisibleLine(r).needsMonospaceFontCheck()){this._asyncCheckMonospaceFontAssumptions.schedule();break}}this._linesContent.setLayerHinting(this._canUseLayerHinting),this._linesContent.setContain("strict");const t=this._context.viewLayout.getCurrentScrollTop()-e.bigNumbersDelta;this._linesContent.setTop(-t),this._linesContent.setLeft(-this._context.viewLayout.getCurrentScrollLeft())}_ensureMaxLineWidth(e){const t=Math.ceil(e);this._maxLineWidth<t&&(this._maxLineWidth=t,this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth))}_computeScrollTopToRevealRange(e,t,i,s,r,o){const a=e.top,l=e.height,c=a+l;let d,u,h;if(r&&r.length>0){let w=r[0].startLineNumber,b=r[0].endLineNumber;for(let y=1,S=r.length;y<S;y++){const x=r[y];w=Math.min(w,x.startLineNumber),b=Math.max(b,x.endLineNumber)}d=!1,u=this._context.viewLayout.getVerticalOffsetForLineNumber(w),h=this._context.viewLayout.getVerticalOffsetForLineNumber(b)+this._lineHeight}else if(s)d=!0,u=this._context.viewLayout.getVerticalOffsetForLineNumber(s.startLineNumber),h=this._context.viewLayout.getVerticalOffsetForLineNumber(s.endLineNumber)+this._lineHeight;else return-1;const f=(t==="mouse"||i)&&this._cursorSurroundingLinesStyle==="default";let g=0,p=0;if(f)i||(g=this._lineHeight);else{const w=l/this._lineHeight,b=Math.max(this._cursorSurroundingLines,this._stickyScrollEnabled?this._maxNumberStickyLines:0),y=Math.min(w/2,b);g=y*this._lineHeight,p=Math.max(0,y-1)*this._lineHeight}i||(o===0||o===4)&&(p+=this._lineHeight),u-=g,h+=p;let _;if(h-u>l){if(!d)return-1;_=u}else if(o===5||o===6)if(o===6&&a<=u&&h<=c)_=a;else{const w=Math.max(5*this._lineHeight,l*.2),b=u-w,y=h-l;_=Math.max(y,b)}else if(o===1||o===2)if(o===2&&a<=u&&h<=c)_=a;else{const w=(u+h)/2;_=Math.max(0,w-l/2)}else _=this._computeMinimumScrolling(a,c,u,h,o===3,o===4);return _}_computeScrollLeftToReveal(e){const t=this._context.viewLayout.getCurrentViewport(),i=this._context.configuration.options.get(146),s=t.left,r=s+t.width-i.verticalScrollbarWidth;let o=1073741824,a=0;if(e.type==="range"){const c=this._visibleRangesForLineRange(e.lineNumber,e.startColumn,e.endColumn);if(!c)return null;for(const d of c.ranges)o=Math.min(o,Math.round(d.left)),a=Math.max(a,Math.round(d.left+d.width))}else for(const c of e.selections){if(c.startLineNumber!==c.endLineNumber)return null;const d=this._visibleRangesForLineRange(c.startLineNumber,c.startColumn,c.endColumn);if(!d)return null;for(const u of d.ranges)o=Math.min(o,Math.round(u.left)),a=Math.max(a,Math.round(u.left+u.width))}return e.minimalReveal||(o=Math.max(0,o-V4.HORIZONTAL_EXTRA_PX),a+=this._revealHorizontalRightPadding),e.type==="selections"&&a-o>t.width?null:{scrollLeft:this._computeMinimumScrolling(s,r,o,a),maxHorizontalOffset:a}}_computeMinimumScrolling(e,t,i,s,r,o){e=e|0,t=t|0,i=i|0,s=s|0,r=!!r,o=!!o;const a=t-e;if(s-i<a){if(r)return i;if(o)return Math.max(0,s-a);if(i<e)return i;if(s>t)return Math.max(0,s-a)}else return i;return e}};V4.HORIZONTAL_EXTRA_PX=30;let Lj=V4;class Gct extends VSe{constructor(e){super(),this._context=e;const i=this._context.configuration.options.get(146);this._decorationsLeft=i.decorationsLeft,this._decorationsWidth=i.decorationsWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const i=this._context.configuration.options.get(146);return this._decorationsLeft=i.decorationsLeft,this._decorationsWidth=i.decorationsWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport(),i=[];let s=0;for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.options.linesDecorationsClassName,c=a.options.zIndex;l&&(i[s++]=new xj(a.range.startLineNumber,a.range.endLineNumber,l,a.options.linesDecorationsTooltip??null,c));const d=a.options.firstLineDecorationClassName;d&&(i[s++]=new xj(a.range.startLineNumber,a.range.startLineNumber,d,a.options.linesDecorationsTooltip??null,c))}return i}prepareRender(e){const t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,s=this._render(t,i,this._getDecorations(e)),r=this._decorationsLeft.toString(),o=this._decorationsWidth.toString(),a='" style="left:'+r+"px;width:"+o+'px;"></div>',l=[];for(let c=t;c<=i;c++){const d=c-t,u=s[d].getDecorations();let h="";for(const f of u){let g='<div class="cldr '+f.className;f.tooltip!==null&&(g+='" title="'+f.tooltip),g+=a,h+=g}l[d]=h}this._renderResult=l}render(e,t){return this._renderResult?this._renderResult[t-e]:""}}class Yct extends VSe{constructor(e){super(),this._context=e,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport(),i=[];let s=0;for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.options.marginClassName,c=a.options.zIndex;l&&(i[s++]=new xj(a.range.startLineNumber,a.range.endLineNumber,l,null,c))}return i}prepareRender(e){const t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,s=this._render(t,i,this._getDecorations(e)),r=[];for(let o=t;o<=i;o++){const a=o-t,l=s[a].getDecorations();let c="";for(const d of l)c+='<div class="cmdr '+d.className+'" style=""></div>';r[a]=c}this._renderResult=r}render(e,t){return this._renderResult?this._renderResult[t-e]:""}}const Gp=class Gp{constructor(e,t,i,s){this._rgba8Brand=void 0,this.r=Gp._clamp(e),this.g=Gp._clamp(t),this.b=Gp._clamp(i),this.a=Gp._clamp(s)}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}static _clamp(e){return e<0?0:e>255?255:e|0}};Gp.Empty=new Gp(0,0,0,0);let Pg=Gp;const z4=class z4 extends ee{static getInstance(){return this._INSTANCE||(this._INSTANCE=new z4),this._INSTANCE}constructor(){super(),this._onDidChange=new X,this.onDidChange=this._onDidChange.event,this._updateColorMap(),this._register(In.onDidChange(e=>{e.changedColorMap&&this._updateColorMap()}))}_updateColorMap(){const e=In.getColorMap();if(!e){this._colors=[Pg.Empty],this._backgroundIsLight=!0;return}this._colors=[Pg.Empty];for(let i=1;i<e.length;i++){const s=e[i].rgba;this._colors[i]=new Pg(s.r,s.g,s.b,Math.round(s.a*255))}const t=e[2].getRelativeLuminance();this._backgroundIsLight=t>=.5,this._onDidChange.fire(void 0)}getColor(e){return(e<1||e>=this._colors.length)&&(e=2),this._colors[e]}backgroundIsLight(){return this._backgroundIsLight}};z4._INSTANCE=null;let PO=z4;const Zct=(()=>{const n=[];for(let e=32;e<=126;e++)n.push(e);return n.push(65533),n})(),Xct=(n,e)=>(n-=32,n<0||n>96?e<=2?(n+96)%96:95:n);class xD{constructor(e,t){this.scale=t,this._minimapCharRendererBrand=void 0,this.charDataNormal=xD.soften(e,12/15),this.charDataLight=xD.soften(e,50/60)}static soften(e,t){const i=new Uint8ClampedArray(e.length);for(let s=0,r=e.length;s<r;s++)i[s]=CP(e[s]*t);return i}renderChar(e,t,i,s,r,o,a,l,c,d,u){const h=1*this.scale,f=2*this.scale,g=u?1:f;if(t+h>e.width||i+g>e.height){console.warn("bad render request outside image data");return}const p=d?this.charDataLight:this.charDataNormal,_=Xct(s,c),w=e.width*4,b=a.r,y=a.g,S=a.b,x=r.r-b,E=r.g-y,D=r.b-S,N=Math.max(o,l),I=e.data;let H=_*h*f,z=i*w+t*4;for(let G=0;G<g;G++){let J=z;for(let j=0;j<h;j++){const ne=p[H++]/255*(o/255);I[J++]=b+x*ne,I[J++]=y+E*ne,I[J++]=S+D*ne,I[J++]=N}z+=w}}blockRenderChar(e,t,i,s,r,o,a,l){const c=1*this.scale,d=2*this.scale,u=l?1:d;if(t+c>e.width||i+u>e.height){console.warn("bad render request outside image data");return}const h=e.width*4,f=.5*(r/255),g=o.r,p=o.g,_=o.b,w=s.r-g,b=s.g-p,y=s.b-_,S=g+w*f,x=p+b*f,E=_+y*f,D=Math.max(r,a),N=e.data;let I=i*h+t*4;for(let H=0;H<u;H++){let z=I;for(let G=0;G<c;G++)N[z++]=S,N[z++]=x,N[z++]=E,N[z++]=D;I+=h}}}const sde={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15},rde=n=>{const e=new Uint8ClampedArray(n.length/2);for(let t=0;t<n.length;t+=2)e[t>>1]=sde[n[t]]<<4|sde[n[t+1]]&15;return e},ode={1:E_(()=>rde("0000511D6300CF609C709645A78432005642574171487021003C451900274D35D762755E8B629C5BA856AF57BA649530C167D1512A272A3F6038604460398526BCA2A968DB6F8957C768BE5FBE2FB467CF5D8D5B795DC7625B5DFF50DE64C466DB2FC47CD860A65E9A2EB96CB54CE06DA763AB2EA26860524D3763536601005116008177A8705E53AB738E6A982F88BAA35B5F5B626D9C636B449B737E5B7B678598869A662F6B5B8542706C704C80736A607578685B70594A49715A4522E792")),2:E_(()=>rde("000000000000000055394F383D2800008B8B1F210002000081B1CBCBCC820000847AAF6B9AAF2119BE08B8881AD60000A44FD07DCCF107015338130C00000000385972265F390B406E2437634B4B48031B12B8A0847000001E15B29A402F0000000000004B33460B00007A752C2A0000000000004D3900000084394B82013400ABA5CFC7AD9C0302A45A3E5A98AB000089A43382D97900008BA54AA087A70A0248A6A7AE6DBE0000BF6F94987EA40A01A06DCFA7A7A9030496C32F77891D0000A99FB1A0AFA80603B29AB9CA75930D010C0948354D3900000C0948354F37460D0028BE673D8400000000AF9D7B6E00002B007AA8933400007AA642675C2700007984CFB9C3985B768772A8A6B7B20000CAAECAAFC4B700009F94A6009F840009D09F9BA4CA9C0000CC8FC76DC87F0000C991C472A2000000A894A48CA7B501079BA2C9C69BA20000B19A5D3FA89000005CA6009DA2960901B0A7F0669FB200009D009E00B7890000DAD0F5D092820000D294D4C48BD10000B5A7A4A3B1A50402CAB6CBA6A2000000B5A7A4A3B1A8044FCDADD19D9CB00000B7778F7B8AAE0803C9AB5D3F5D3F00009EA09EA0BAB006039EA0989A8C7900009B9EF4D6B7C00000A9A7816CACA80000ABAC84705D3F000096DA635CDC8C00006F486F266F263D4784006124097B00374F6D2D6D2D6D4A3A95872322000000030000000000008D8939130000000000002E22A5C9CBC70600AB25C0B5C9B400061A2DB04CA67001082AA6BEBEBFC606002321DACBC19E03087AA08B6768380000282FBAC0B8CA7A88AD25BBA5A29900004C396C5894A6000040485A6E356E9442A32CD17EADA70000B4237923628600003E2DE9C1D7B500002F25BBA5A2990000231DB6AFB4A804023025C0B5CAB588062B2CBDBEC0C706882435A75CA20000002326BD6A82A908048B4B9A5A668000002423A09CB4BB060025259C9D8A7900001C1FCAB2C7C700002A2A9387ABA200002626A4A47D6E9D14333163A0C87500004B6F9C2D643A257049364936493647358A34438355497F1A0000A24C1D590000D38DFFBDD4CD3126"))};class gE{static create(e,t){if(this.lastCreated&&e===this.lastCreated.scale&&t===this.lastFontFamily)return this.lastCreated;let i;return ode[e]?i=new xD(ode[e](),e):i=gE.createFromSampleData(gE.createSampleData(t).data,e),this.lastFontFamily=t,this.lastCreated=i,i}static createSampleData(e){const t=document.createElement("canvas"),i=t.getContext("2d");t.style.height="16px",t.height=16,t.width=96*10,t.style.width=96*10+"px",i.fillStyle="#ffffff",i.font=`bold 16px ${e}`,i.textBaseline="middle";let s=0;for(const r of Zct)i.fillText(String.fromCharCode(r),s,16/2),s+=10;return i.getImageData(0,0,96*10,16)}static createFromSampleData(e,t){if(e.length!==61440)throw new Error("Unexpected source in MinimapCharRenderer");const s=gE._downsample(e,t);return new xD(s,t)}static _downsampleChar(e,t,i,s,r){const o=1*r,a=2*r;let l=s,c=0;for(let d=0;d<a;d++){const u=d/a*16,h=(d+1)/a*16;for(let f=0;f<o;f++){const g=f/o*10,p=(f+1)/o*10;let _=0,w=0;for(let y=u;y<h;y++){const S=t+Math.floor(y)*3840,x=1-(y-Math.floor(y));for(let E=g;E<p;E++){const D=1-(E-Math.floor(E)),N=S+Math.floor(E)*4,I=D*x;w+=I,_+=e[N]*e[N+3]/255*I}}const b=_/w;c=Math.max(c,b),i[l++]=CP(b)}}return c}static _downsample(e,t){const i=2*t*1*t,s=i*96,r=new Uint8ClampedArray(s);let o=0,a=0,l=0;for(let c=0;c<96;c++)l=Math.max(l,this._downsampleChar(e,a,r,o,t)),o+=i,a+=10*4;if(l>0){const c=255/l;for(let d=0;d<s;d++)r[d]*=c}return r}}const zSe=wr?'"Segoe WPC", "Segoe UI", sans-serif':Bt?"-apple-system, BlinkMacSystemFont, sans-serif":'system-ui, "Ubuntu", "Droid Sans", sans-serif',Qct=140,Jct=2;class Vy{constructor(e,t,i){const s=e.options,r=s.get(144),o=s.get(146),a=o.minimap,l=s.get(50),c=s.get(73);this.renderMinimap=a.renderMinimap,this.size=c.size,this.minimapHeightIsEditorHeight=a.minimapHeightIsEditorHeight,this.scrollBeyondLastLine=s.get(106),this.paddingTop=s.get(84).top,this.paddingBottom=s.get(84).bottom,this.showSlider=c.showSlider,this.autohide=c.autohide,this.pixelRatio=r,this.typicalHalfwidthCharacterWidth=l.typicalHalfwidthCharacterWidth,this.lineHeight=s.get(67),this.minimapLeft=a.minimapLeft,this.minimapWidth=a.minimapWidth,this.minimapHeight=o.height,this.canvasInnerWidth=a.minimapCanvasInnerWidth,this.canvasInnerHeight=a.minimapCanvasInnerHeight,this.canvasOuterWidth=a.minimapCanvasOuterWidth,this.canvasOuterHeight=a.minimapCanvasOuterHeight,this.isSampling=a.minimapIsSampling,this.editorHeight=o.height,this.fontScale=a.minimapScale,this.minimapLineHeight=a.minimapLineHeight,this.minimapCharWidth=1*this.fontScale,this.sectionHeaderFontFamily=zSe,this.sectionHeaderFontSize=c.sectionHeaderFontSize*r,this.sectionHeaderLetterSpacing=c.sectionHeaderLetterSpacing,this.sectionHeaderFontColor=Vy._getSectionHeaderColor(t,i.getColor(1)),this.charRenderer=E_(()=>gE.create(this.fontScale,l.fontFamily)),this.defaultBackgroundColor=i.getColor(2),this.backgroundColor=Vy._getMinimapBackground(t,this.defaultBackgroundColor),this.foregroundAlpha=Vy._getMinimapForegroundOpacity(t)}static _getMinimapBackground(e,t){const i=e.getColor(VXe);return i?new Pg(i.rgba.r,i.rgba.g,i.rgba.b,Math.round(255*i.rgba.a)):t}static _getMinimapForegroundOpacity(e){const t=e.getColor(zXe);return t?Pg._clamp(Math.round(255*t.rgba.a)):255}static _getSectionHeaderColor(e,t){const i=e.getColor(bf);return i?new Pg(i.rgba.r,i.rgba.g,i.rgba.b,Math.round(255*i.rgba.a)):t}equals(e){return this.renderMinimap===e.renderMinimap&&this.size===e.size&&this.minimapHeightIsEditorHeight===e.minimapHeightIsEditorHeight&&this.scrollBeyondLastLine===e.scrollBeyondLastLine&&this.paddingTop===e.paddingTop&&this.paddingBottom===e.paddingBottom&&this.showSlider===e.showSlider&&this.autohide===e.autohide&&this.pixelRatio===e.pixelRatio&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.lineHeight===e.lineHeight&&this.minimapLeft===e.minimapLeft&&this.minimapWidth===e.minimapWidth&&this.minimapHeight===e.minimapHeight&&this.canvasInnerWidth===e.canvasInnerWidth&&this.canvasInnerHeight===e.canvasInnerHeight&&this.canvasOuterWidth===e.canvasOuterWidth&&this.canvasOuterHeight===e.canvasOuterHeight&&this.isSampling===e.isSampling&&this.editorHeight===e.editorHeight&&this.fontScale===e.fontScale&&this.minimapLineHeight===e.minimapLineHeight&&this.minimapCharWidth===e.minimapCharWidth&&this.sectionHeaderFontSize===e.sectionHeaderFontSize&&this.sectionHeaderLetterSpacing===e.sectionHeaderLetterSpacing&&this.defaultBackgroundColor&&this.defaultBackgroundColor.equals(e.defaultBackgroundColor)&&this.backgroundColor&&this.backgroundColor.equals(e.backgroundColor)&&this.foregroundAlpha===e.foregroundAlpha}}class pE{constructor(e,t,i,s,r,o,a,l,c){this.scrollTop=e,this.scrollHeight=t,this.sliderNeeded=i,this._computedSliderRatio=s,this.sliderTop=r,this.sliderHeight=o,this.topPaddingLineCount=a,this.startLineNumber=l,this.endLineNumber=c}getDesiredScrollTopFromDelta(e){return Math.round(this.scrollTop+e/this._computedSliderRatio)}getDesiredScrollTopFromTouchLocation(e){return Math.round((e-this.sliderHeight/2)/this._computedSliderRatio)}intersectWithViewport(e){const t=Math.max(this.startLineNumber,e.startLineNumber),i=Math.min(this.endLineNumber,e.endLineNumber);return t>i?null:[t,i]}getYForLineNumber(e,t){return+(e-this.startLineNumber+this.topPaddingLineCount)*t}static create(e,t,i,s,r,o,a,l,c,d,u){const h=e.pixelRatio,f=e.minimapLineHeight,g=Math.floor(e.canvasInnerHeight/f),p=e.lineHeight;if(e.minimapHeightIsEditorHeight){let E=l*e.lineHeight+e.paddingTop+e.paddingBottom;e.scrollBeyondLastLine&&(E+=Math.max(0,r-e.lineHeight-e.paddingBottom));const D=Math.max(1,Math.floor(r*r/E)),N=Math.max(0,e.minimapHeight-D),I=N/(d-r),H=c*I,z=N>0,G=Math.floor(e.canvasInnerHeight/e.minimapLineHeight),J=Math.floor(e.paddingTop/e.lineHeight);return new pE(c,d,z,I,H,D,J,1,Math.min(a,G))}let _;if(o&&i!==a){const E=i-t+1;_=Math.floor(E*f/h)}else{const E=r/p;_=Math.floor(E*f/h)}const w=Math.floor(e.paddingTop/p);let b=Math.floor(e.paddingBottom/p);if(e.scrollBeyondLastLine){const E=r/p;b=Math.max(b,E-1)}let y;if(b>0){const E=r/p;y=(w+a+b-E-1)*f/h}else y=Math.max(0,(w+a)*f/h-_);y=Math.min(e.minimapHeight-_,y);const S=y/(d-r),x=c*S;if(g>=w+a+b){const E=y>0;return new pE(c,d,E,S,x,_,w,1,a)}else{let E;t>1?E=t+w:E=Math.max(1,c/p);let D,N=Math.max(1,Math.floor(E-x*h/f));N<w?(D=w-N+1,N=1):(D=0,N=Math.max(1,N-w)),u&&u.scrollHeight===d&&(u.scrollTop>c&&(N=Math.min(N,u.startLineNumber),D=Math.max(D,u.topPaddingLineCount)),u.scrollTop<c&&(N=Math.max(N,u.startLineNumber),D=Math.min(D,u.topPaddingLineCount)));const I=Math.min(a,N-D+g-1),H=(c-s)/p;let z;return c>=e.paddingTop?z=(t-N+D+H)*f/h:z=c/e.paddingTop*(D+H)*f/h,new pE(c,d,!0,S,z,_,D,N,I)}}}const U4=class U4{constructor(e){this.dy=e}onContentChanged(){this.dy=-1}onTokensChanged(){this.dy=-1}};U4.INVALID=new U4(-1);let OO=U4;class ade{constructor(e,t,i){this.renderedLayout=e,this._imageData=t,this._renderedLines=new FSe({createLine:()=>OO.INVALID}),this._renderedLines._set(e.startLineNumber,i)}linesEquals(e){if(!this.scrollEquals(e))return!1;const i=this._renderedLines._get().lines;for(let s=0,r=i.length;s<r;s++)if(i[s].dy===-1)return!1;return!0}scrollEquals(e){return this.renderedLayout.startLineNumber===e.startLineNumber&&this.renderedLayout.endLineNumber===e.endLineNumber}_get(){const e=this._renderedLines._get();return{imageData:this._imageData,rendLineNumberStart:e.rendLineNumberStart,lines:e.lines}}onLinesChanged(e,t){return this._renderedLines.onLinesChanged(e,t)}onLinesDeleted(e,t){this._renderedLines.onLinesDeleted(e,t)}onLinesInserted(e,t){this._renderedLines.onLinesInserted(e,t)}onTokensChanged(e){return this._renderedLines.onTokensChanged(e)}}class sJ{constructor(e,t,i,s){this._backgroundFillData=sJ._createBackgroundFillData(t,i,s),this._buffers=[e.createImageData(t,i),e.createImageData(t,i)],this._lastUsedBuffer=0}getBuffer(){this._lastUsedBuffer=1-this._lastUsedBuffer;const e=this._buffers[this._lastUsedBuffer];return e.data.set(this._backgroundFillData),e}static _createBackgroundFillData(e,t,i){const s=i.r,r=i.g,o=i.b,a=i.a,l=new Uint8ClampedArray(e*t*4);let c=0;for(let d=0;d<t;d++)for(let u=0;u<e;u++)l[c]=s,l[c+1]=r,l[c+2]=o,l[c+3]=a,c+=4;return l}}class LD{static compute(e,t,i){if(e.renderMinimap===0||!e.isSampling)return[null,[]];const{minimapLineCount:s}=wy.computeContainedMinimapLineCount({viewLineCount:t,scrollBeyondLastLine:e.scrollBeyondLastLine,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,height:e.editorHeight,lineHeight:e.lineHeight,pixelRatio:e.pixelRatio}),r=t/s,o=r/2;if(!i||i.minimapLines.length===0){const _=[];if(_[0]=1,s>1){for(let w=0,b=s-1;w<b;w++)_[w]=Math.round(w*r+o);_[s-1]=t}return[new LD(r,_),[]]}const a=i.minimapLines,l=a.length,c=[];let d=0,u=0,h=1;const f=10;let g=[],p=null;for(let _=0;_<s;_++){const w=Math.max(h,Math.round(_*r)),b=Math.max(w,Math.round((_+1)*r));for(;d<l&&a[d]<w;){if(g.length<f){const S=d+1+u;p&&p.type==="deleted"&&p._oldIndex===d-1?p.deleteToLineNumber++:(p={type:"deleted",_oldIndex:d,deleteFromLineNumber:S,deleteToLineNumber:S},g.push(p)),u--}d++}let y;if(d<l&&a[d]<=b)y=a[d],d++;else if(_===0?y=1:_+1===s?y=t:y=Math.round(_*r+o),g.length<f){const S=d+1+u;p&&p.type==="inserted"&&p._i===_-1?p.insertToLineNumber++:(p={type:"inserted",_i:_,insertFromLineNumber:S,insertToLineNumber:S},g.push(p)),u++}c[_]=y,h=y}if(g.length<f)for(;d<l;){const _=d+1+u;p&&p.type==="deleted"&&p._oldIndex===d-1?p.deleteToLineNumber++:(p={type:"deleted",_oldIndex:d,deleteFromLineNumber:_,deleteToLineNumber:_},g.push(p)),u--,d++}else g=[{type:"flush"}];return[new LD(r,c),g]}constructor(e,t){this.samplingRatio=e,this.minimapLines=t}modelLineToMinimapLine(e){return Math.min(this.minimapLines.length,Math.max(1,Math.round(e/this.samplingRatio)))}modelLineRangeToMinimapLineRange(e,t){let i=this.modelLineToMinimapLine(e)-1;for(;i>0&&this.minimapLines[i-1]>=e;)i--;let s=this.modelLineToMinimapLine(t)-1;for(;s+1<this.minimapLines.length&&this.minimapLines[s+1]<=t;)s++;if(i===s){const r=this.minimapLines[i];if(r<e||r>t)return null}return[i+1,s+1]}decorationLineRangeToMinimapLineRange(e,t){let i=this.modelLineToMinimapLine(e),s=this.modelLineToMinimapLine(t);return e!==t&&s===i&&(s===this.minimapLines.length?i>1&&i--:s++),[i,s]}onLinesDeleted(e){const t=e.toLineNumber-e.fromLineNumber+1;let i=this.minimapLines.length,s=0;for(let r=this.minimapLines.length-1;r>=0&&!(this.minimapLines[r]<e.fromLineNumber);r--)this.minimapLines[r]<=e.toLineNumber?(this.minimapLines[r]=Math.max(1,e.fromLineNumber-1),i=Math.min(i,r),s=Math.max(s,r)):this.minimapLines[r]-=t;return[i,s]}onLinesInserted(e){const t=e.toLineNumber-e.fromLineNumber+1;for(let i=this.minimapLines.length-1;i>=0&&!(this.minimapLines[i]<e.fromLineNumber);i--)this.minimapLines[i]+=t}}class edt extends cl{constructor(e){super(e),this._sectionHeaderCache=new vf(10,1.5),this.tokensColorTracker=PO.getInstance(),this._selections=[],this._minimapSelections=null,this.options=new Vy(this._context.configuration,this._context.theme,this.tokensColorTracker);const[t]=LD.compute(this.options,this._context.viewModel.getLineCount(),null);this._samplingState=t,this._shouldCheckSampling=!1,this._actual=new A1(e.theme,this)}dispose(){this._actual.dispose(),super.dispose()}getDomNode(){return this._actual.getDomNode()}_onOptionsMaybeChanged(){const e=new Vy(this._context.configuration,this._context.theme,this.tokensColorTracker);return this.options.equals(e)?!1:(this.options=e,this._recreateLineSampling(),this._actual.onDidChangeOptions(),!0)}onConfigurationChanged(e){return this._onOptionsMaybeChanged()}onCursorStateChanged(e){return this._selections=e.selections,this._minimapSelections=null,this._actual.onSelectionChanged()}onDecorationsChanged(e){return e.affectsMinimap?this._actual.onDecorationsChanged():!1}onFlushed(e){return this._samplingState&&(this._shouldCheckSampling=!0),this._actual.onFlushed()}onLinesChanged(e){if(this._samplingState){const t=this._samplingState.modelLineRangeToMinimapLineRange(e.fromLineNumber,e.fromLineNumber+e.count-1);return t?this._actual.onLinesChanged(t[0],t[1]-t[0]+1):!1}else return this._actual.onLinesChanged(e.fromLineNumber,e.count)}onLinesDeleted(e){if(this._samplingState){const[t,i]=this._samplingState.onLinesDeleted(e);return t<=i&&this._actual.onLinesChanged(t+1,i-t+1),this._shouldCheckSampling=!0,!0}else return this._actual.onLinesDeleted(e.fromLineNumber,e.toLineNumber)}onLinesInserted(e){return this._samplingState?(this._samplingState.onLinesInserted(e),this._shouldCheckSampling=!0,!0):this._actual.onLinesInserted(e.fromLineNumber,e.toLineNumber)}onScrollChanged(e){return this._actual.onScrollChanged()}onThemeChanged(e){return this._actual.onThemeChanged(),this._onOptionsMaybeChanged(),!0}onTokensChanged(e){if(this._samplingState){const t=[];for(const i of e.ranges){const s=this._samplingState.modelLineRangeToMinimapLineRange(i.fromLineNumber,i.toLineNumber);s&&t.push({fromLineNumber:s[0],toLineNumber:s[1]})}return t.length?this._actual.onTokensChanged(t):!1}else return this._actual.onTokensChanged(e.ranges)}onTokensColorsChanged(e){return this._onOptionsMaybeChanged(),this._actual.onTokensColorsChanged()}onZonesChanged(e){return this._actual.onZonesChanged()}prepareRender(e){this._shouldCheckSampling&&(this._shouldCheckSampling=!1,this._recreateLineSampling())}render(e){let t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber;this._samplingState&&(t=this._samplingState.modelLineToMinimapLine(t),i=this._samplingState.modelLineToMinimapLine(i));const s={viewportContainsWhitespaceGaps:e.viewportData.whitespaceViewportData.length>0,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,viewportStartLineNumber:t,viewportEndLineNumber:i,viewportStartLineNumberVerticalOffset:e.getVerticalOffsetForLineNumber(t),scrollTop:e.scrollTop,scrollLeft:e.scrollLeft,viewportWidth:e.viewportWidth,viewportHeight:e.viewportHeight};this._actual.render(s)}_recreateLineSampling(){this._minimapSelections=null;const e=!!this._samplingState,[t,i]=LD.compute(this.options,this._context.viewModel.getLineCount(),this._samplingState);if(this._samplingState=t,e&&this._samplingState)for(const s of i)switch(s.type){case"deleted":this._actual.onLinesDeleted(s.deleteFromLineNumber,s.deleteToLineNumber);break;case"inserted":this._actual.onLinesInserted(s.insertFromLineNumber,s.insertToLineNumber);break;case"flush":this._actual.onFlushed();break}}getLineCount(){return this._samplingState?this._samplingState.minimapLines.length:this._context.viewModel.getLineCount()}getRealLineCount(){return this._context.viewModel.getLineCount()}getLineContent(e){return this._samplingState?this._context.viewModel.getLineContent(this._samplingState.minimapLines[e-1]):this._context.viewModel.getLineContent(e)}getLineMaxColumn(e){return this._samplingState?this._context.viewModel.getLineMaxColumn(this._samplingState.minimapLines[e-1]):this._context.viewModel.getLineMaxColumn(e)}getMinimapLinesRenderingData(e,t,i){if(this._samplingState){const s=[];for(let r=0,o=t-e+1;r<o;r++)i[r]?s[r]=this._context.viewModel.getViewLineData(this._samplingState.minimapLines[e+r-1]):s[r]=null;return s}return this._context.viewModel.getMinimapLinesRenderingData(e,t,i).data}getSelections(){if(this._minimapSelections===null)if(this._samplingState){this._minimapSelections=[];for(const e of this._selections){const[t,i]=this._samplingState.decorationLineRangeToMinimapLineRange(e.startLineNumber,e.endLineNumber);this._minimapSelections.push(new $e(t,e.startColumn,i,e.endColumn))}}else this._minimapSelections=this._selections;return this._minimapSelections}getMinimapDecorationsInViewport(e,t){const i=this._getMinimapDecorationsInViewport(e,t).filter(s=>{var r;return!((r=s.options.minimap)!=null&&r.sectionHeaderStyle)});if(this._samplingState){const s=[];for(const r of i){if(!r.options.minimap)continue;const o=r.range,a=this._samplingState.modelLineToMinimapLine(o.startLineNumber),l=this._samplingState.modelLineToMinimapLine(o.endLineNumber);s.push(new xSe(new M(a,o.startColumn,l,o.endColumn),r.options))}return s}return i}getSectionHeaderDecorationsInViewport(e,t){const i=this.options.minimapLineHeight,r=this.options.sectionHeaderFontSize/i;return e=Math.floor(Math.max(1,e-r)),this._getMinimapDecorationsInViewport(e,t).filter(o=>{var a;return!!((a=o.options.minimap)!=null&&a.sectionHeaderStyle)})}_getMinimapDecorationsInViewport(e,t){let i;if(this._samplingState){const s=this._samplingState.minimapLines[e-1],r=this._samplingState.minimapLines[t-1];i=new M(s,1,r,this._context.viewModel.getLineMaxColumn(r))}else i=new M(e,1,t,this._context.viewModel.getLineMaxColumn(t));return this._context.viewModel.getMinimapDecorationsInRange(i)}getSectionHeaderText(e,t){var o;const i=(o=e.options.minimap)==null?void 0:o.sectionHeaderText;if(!i)return null;const s=this._sectionHeaderCache.get(i);if(s)return s;const r=t(i);return this._sectionHeaderCache.set(i,r),r}getOptions(){return this._context.viewModel.model.getOptions()}revealLineNumber(e){this._samplingState&&(e=this._samplingState.minimapLines[e-1]),this._context.viewModel.revealRange("mouse",!1,new M(e,1,e,1),1,0)}setScrollTop(e){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:e},1)}}class A1 extends ee{constructor(e,t){super(),this._renderDecorations=!1,this._gestureInProgress=!1,this._theme=e,this._model=t,this._lastRenderData=null,this._buffers=null,this._selectionColor=this._theme.getColor(nle),this._domNode=ui(document.createElement("div")),$u.write(this._domNode,9),this._domNode.setClassName(this._getMinimapDomNodeClassName()),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._shadow=ui(document.createElement("div")),this._shadow.setClassName("minimap-shadow-hidden"),this._domNode.appendChild(this._shadow),this._canvas=ui(document.createElement("canvas")),this._canvas.setPosition("absolute"),this._canvas.setLeft(0),this._domNode.appendChild(this._canvas),this._decorationsCanvas=ui(document.createElement("canvas")),this._decorationsCanvas.setPosition("absolute"),this._decorationsCanvas.setClassName("minimap-decorations-layer"),this._decorationsCanvas.setLeft(0),this._domNode.appendChild(this._decorationsCanvas),this._slider=ui(document.createElement("div")),this._slider.setPosition("absolute"),this._slider.setClassName("minimap-slider"),this._slider.setLayerHinting(!0),this._slider.setContain("strict"),this._domNode.appendChild(this._slider),this._sliderHorizontal=ui(document.createElement("div")),this._sliderHorizontal.setPosition("absolute"),this._sliderHorizontal.setClassName("minimap-slider-horizontal"),this._slider.appendChild(this._sliderHorizontal),this._applyLayout(),this._pointerDownListener=Cn(this._domNode.domNode,Se.POINTER_DOWN,i=>{if(i.preventDefault(),this._model.options.renderMinimap===0||!this._lastRenderData)return;if(this._model.options.size!=="proportional"){if(i.button===0&&this._lastRenderData){const c=Fn(this._slider.domNode),d=c.top+c.height/2;this._startSliderDragging(i,d,this._lastRenderData.renderedLayout)}return}const r=this._model.options.minimapLineHeight,o=this._model.options.canvasInnerHeight/this._model.options.canvasOuterHeight*i.offsetY;let l=Math.floor(o/r)+this._lastRenderData.renderedLayout.startLineNumber-this._lastRenderData.renderedLayout.topPaddingLineCount;l=Math.min(l,this._model.getLineCount()),this._model.revealLineNumber(l)}),this._sliderPointerMoveMonitor=new Mx,this._sliderPointerDownListener=Cn(this._slider.domNode,Se.POINTER_DOWN,i=>{i.preventDefault(),i.stopPropagation(),i.button===0&&this._lastRenderData&&this._startSliderDragging(i,i.pageY,this._lastRenderData.renderedLayout)}),this._gestureDisposable=Br.addTarget(this._domNode.domNode),this._sliderTouchStartListener=re(this._domNode.domNode,Hi.Start,i=>{i.preventDefault(),i.stopPropagation(),this._lastRenderData&&(this._slider.toggleClassName("active",!0),this._gestureInProgress=!0,this.scrollDueToTouchEvent(i))},{passive:!1}),this._sliderTouchMoveListener=re(this._domNode.domNode,Hi.Change,i=>{i.preventDefault(),i.stopPropagation(),this._lastRenderData&&this._gestureInProgress&&this.scrollDueToTouchEvent(i)},{passive:!1}),this._sliderTouchEndListener=Cn(this._domNode.domNode,Hi.End,i=>{i.preventDefault(),i.stopPropagation(),this._gestureInProgress=!1,this._slider.toggleClassName("active",!1)})}_startSliderDragging(e,t,i){if(!e.target||!(e.target instanceof Element))return;const s=e.pageX;this._slider.toggleClassName("active",!0);const r=(o,a)=>{const l=Fn(this._domNode.domNode),c=Math.min(Math.abs(a-s),Math.abs(a-l.left),Math.abs(a-l.left-l.width));if(wr&&c>Qct){this._model.setScrollTop(i.scrollTop);return}const d=o-t;this._model.setScrollTop(i.getDesiredScrollTopFromDelta(d))};e.pageY!==t&&r(e.pageY,s),this._sliderPointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,o=>r(o.pageY,o.pageX),()=>{this._slider.toggleClassName("active",!1)})}scrollDueToTouchEvent(e){const t=this._domNode.domNode.getBoundingClientRect().top,i=this._lastRenderData.renderedLayout.getDesiredScrollTopFromTouchLocation(e.pageY-t);this._model.setScrollTop(i)}dispose(){this._pointerDownListener.dispose(),this._sliderPointerMoveMonitor.dispose(),this._sliderPointerDownListener.dispose(),this._gestureDisposable.dispose(),this._sliderTouchStartListener.dispose(),this._sliderTouchMoveListener.dispose(),this._sliderTouchEndListener.dispose(),super.dispose()}_getMinimapDomNodeClassName(){const e=["minimap"];return this._model.options.showSlider==="always"?e.push("slider-always"):e.push("slider-mouseover"),this._model.options.autohide&&e.push("autohide"),e.join(" ")}getDomNode(){return this._domNode}_applyLayout(){this._domNode.setLeft(this._model.options.minimapLeft),this._domNode.setWidth(this._model.options.minimapWidth),this._domNode.setHeight(this._model.options.minimapHeight),this._shadow.setHeight(this._model.options.minimapHeight),this._canvas.setWidth(this._model.options.canvasOuterWidth),this._canvas.setHeight(this._model.options.canvasOuterHeight),this._canvas.domNode.width=this._model.options.canvasInnerWidth,this._canvas.domNode.height=this._model.options.canvasInnerHeight,this._decorationsCanvas.setWidth(this._model.options.canvasOuterWidth),this._decorationsCanvas.setHeight(this._model.options.canvasOuterHeight),this._decorationsCanvas.domNode.width=this._model.options.canvasInnerWidth,this._decorationsCanvas.domNode.height=this._model.options.canvasInnerHeight,this._slider.setWidth(this._model.options.minimapWidth)}_getBuffer(){return this._buffers||this._model.options.canvasInnerWidth>0&&this._model.options.canvasInnerHeight>0&&(this._buffers=new sJ(this._canvas.domNode.getContext("2d"),this._model.options.canvasInnerWidth,this._model.options.canvasInnerHeight,this._model.options.backgroundColor)),this._buffers?this._buffers.getBuffer():null}onDidChangeOptions(){this._lastRenderData=null,this._buffers=null,this._applyLayout(),this._domNode.setClassName(this._getMinimapDomNodeClassName())}onSelectionChanged(){return this._renderDecorations=!0,!0}onDecorationsChanged(){return this._renderDecorations=!0,!0}onFlushed(){return this._lastRenderData=null,!0}onLinesChanged(e,t){return this._lastRenderData?this._lastRenderData.onLinesChanged(e,t):!1}onLinesDeleted(e,t){var i;return(i=this._lastRenderData)==null||i.onLinesDeleted(e,t),!0}onLinesInserted(e,t){var i;return(i=this._lastRenderData)==null||i.onLinesInserted(e,t),!0}onScrollChanged(){return this._renderDecorations=!0,!0}onThemeChanged(){return this._selectionColor=this._theme.getColor(nle),this._renderDecorations=!0,!0}onTokensChanged(e){return this._lastRenderData?this._lastRenderData.onTokensChanged(e):!1}onTokensColorsChanged(){return this._lastRenderData=null,this._buffers=null,!0}onZonesChanged(){return this._lastRenderData=null,!0}render(e){if(this._model.options.renderMinimap===0){this._shadow.setClassName("minimap-shadow-hidden"),this._sliderHorizontal.setWidth(0),this._sliderHorizontal.setHeight(0);return}e.scrollLeft+e.viewportWidth>=e.scrollWidth?this._shadow.setClassName("minimap-shadow-hidden"):this._shadow.setClassName("minimap-shadow-visible");const i=pE.create(this._model.options,e.viewportStartLineNumber,e.viewportEndLineNumber,e.viewportStartLineNumberVerticalOffset,e.viewportHeight,e.viewportContainsWhitespaceGaps,this._model.getLineCount(),this._model.getRealLineCount(),e.scrollTop,e.scrollHeight,this._lastRenderData?this._lastRenderData.renderedLayout:null);this._slider.setDisplay(i.sliderNeeded?"block":"none"),this._slider.setTop(i.sliderTop),this._slider.setHeight(i.sliderHeight),this._sliderHorizontal.setLeft(0),this._sliderHorizontal.setWidth(this._model.options.minimapWidth),this._sliderHorizontal.setTop(0),this._sliderHorizontal.setHeight(i.sliderHeight),this.renderDecorations(i),this._lastRenderData=this.renderLines(i)}renderDecorations(e){if(this._renderDecorations){this._renderDecorations=!1;const t=this._model.getSelections();t.sort(M.compareRangesUsingStarts);const i=this._model.getMinimapDecorationsInViewport(e.startLineNumber,e.endLineNumber);i.sort((h,f)=>(h.options.zIndex||0)-(f.options.zIndex||0));const{canvasInnerWidth:s,canvasInnerHeight:r}=this._model.options,o=this._model.options.minimapLineHeight,a=this._model.options.minimapCharWidth,l=this._model.getOptions().tabSize,c=this._decorationsCanvas.domNode.getContext("2d");c.clearRect(0,0,s,r);const d=new lde(e.startLineNumber,e.endLineNumber,!1);this._renderSelectionLineHighlights(c,t,d,e,o),this._renderDecorationsLineHighlights(c,i,d,e,o);const u=new lde(e.startLineNumber,e.endLineNumber,null);this._renderSelectionsHighlights(c,t,u,e,o,l,a,s),this._renderDecorationsHighlights(c,i,u,e,o,l,a,s),this._renderSectionHeaders(e)}}_renderSelectionLineHighlights(e,t,i,s,r){if(!this._selectionColor||this._selectionColor.isTransparent())return;e.fillStyle=this._selectionColor.transparent(.5).toString();let o=0,a=0;for(const l of t){const c=s.intersectWithViewport(l);if(!c)continue;const[d,u]=c;for(let g=d;g<=u;g++)i.set(g,!0);const h=s.getYForLineNumber(d,r),f=s.getYForLineNumber(u,r);a>=h||(a>o&&e.fillRect(dh,o,e.canvas.width,a-o),o=h),a=f}a>o&&e.fillRect(dh,o,e.canvas.width,a-o)}_renderDecorationsLineHighlights(e,t,i,s,r){const o=new Map;for(let a=t.length-1;a>=0;a--){const l=t[a],c=l.options.minimap;if(!c||c.position!==1)continue;const d=s.intersectWithViewport(l.range);if(!d)continue;const[u,h]=d,f=c.getColor(this._theme.value);if(!f||f.isTransparent())continue;let g=o.get(f.toString());g||(g=f.transparent(.5).toString(),o.set(f.toString(),g)),e.fillStyle=g;for(let p=u;p<=h;p++){if(i.has(p))continue;i.set(p,!0);const _=s.getYForLineNumber(u,r);e.fillRect(dh,_,e.canvas.width,r)}}}_renderSelectionsHighlights(e,t,i,s,r,o,a,l){if(!(!this._selectionColor||this._selectionColor.isTransparent()))for(const c of t){const d=s.intersectWithViewport(c);if(!d)continue;const[u,h]=d;for(let f=u;f<=h;f++)this.renderDecorationOnLine(e,i,c,this._selectionColor,s,f,r,r,o,a,l)}}_renderDecorationsHighlights(e,t,i,s,r,o,a,l){for(const c of t){const d=c.options.minimap;if(!d)continue;const u=s.intersectWithViewport(c.range);if(!u)continue;const[h,f]=u,g=d.getColor(this._theme.value);if(!(!g||g.isTransparent()))for(let p=h;p<=f;p++)switch(d.position){case 1:this.renderDecorationOnLine(e,i,c.range,g,s,p,r,r,o,a,l);continue;case 2:{const _=s.getYForLineNumber(p,r);this.renderDecoration(e,g,2,_,Jct,r);continue}}}}renderDecorationOnLine(e,t,i,s,r,o,a,l,c,d,u){const h=r.getYForLineNumber(o,l);if(h+a<0||h>this._model.options.canvasInnerHeight)return;const{startLineNumber:f,endLineNumber:g}=i,p=f===o?i.startColumn:1,_=g===o?i.endColumn:this._model.getLineMaxColumn(o),w=this.getXOffsetForPosition(t,o,p,c,d,u),b=this.getXOffsetForPosition(t,o,_,c,d,u);this.renderDecoration(e,s,w,h,b-w,a)}getXOffsetForPosition(e,t,i,s,r,o){if(i===1)return dh;if((i-1)*r>=o)return o;let l=e.get(t);if(!l){const c=this._model.getLineContent(t);l=[dh];let d=dh;for(let u=1;u<c.length+1;u++){const h=c.charCodeAt(u-1),f=h===9?s*r:N_(h)?2*r:r,g=d+f;if(g>=o){l[u]=o;break}l[u]=g,d=g}e.set(t,l)}return i-1<l.length?l[i-1]:o}renderDecoration(e,t,i,s,r,o){e.fillStyle=t&&t.toString()||"",e.fillRect(i,s,r,o)}_renderSectionHeaders(e){var p;const t=this._model.options.minimapLineHeight,i=this._model.options.sectionHeaderFontSize,s=this._model.options.sectionHeaderLetterSpacing,r=i*1.5,{canvasInnerWidth:o}=this._model.options,a=this._model.options.backgroundColor,l=`rgb(${a.r} ${a.g} ${a.b} / .7)`,c=this._model.options.sectionHeaderFontColor,d=`rgb(${c.r} ${c.g} ${c.b})`,u=d,h=this._decorationsCanvas.domNode.getContext("2d");h.letterSpacing=s+"px",h.font="500 "+i+"px "+this._model.options.sectionHeaderFontFamily,h.strokeStyle=u,h.lineWidth=.2;const f=this._model.getSectionHeaderDecorationsInViewport(e.startLineNumber,e.endLineNumber);f.sort((_,w)=>_.range.startLineNumber-w.range.startLineNumber);const g=A1._fitSectionHeader.bind(null,h,o-dh);for(const _ of f){const w=e.getYForLineNumber(_.range.startLineNumber,t)+i,b=w-i,y=b+2,S=this._model.getSectionHeaderText(_,g);A1._renderSectionLabel(h,S,((p=_.options.minimap)==null?void 0:p.sectionHeaderStyle)===2,l,d,o,b,r,w,y)}}static _fitSectionHeader(e,t,i){if(!i)return i;const s="",r=e.measureText(i).width,o=e.measureText(s).width;if(r<=t||r<=o)return i;const a=i.length,l=r/i.length,c=Math.floor((t-o)/l)-1;let d=Math.ceil(c/2);for(;d>0&&/\s/.test(i[d-1]);)--d;return i.substring(0,d)+s+i.substring(a-(c-d))}static _renderSectionLabel(e,t,i,s,r,o,a,l,c,d){t&&(e.fillStyle=s,e.fillRect(0,a,o,l),e.fillStyle=r,e.fillText(t,dh,c)),i&&(e.beginPath(),e.moveTo(0,d),e.lineTo(o,d),e.closePath(),e.stroke())}renderLines(e){const t=e.startLineNumber,i=e.endLineNumber,s=this._model.options.minimapLineHeight;if(this._lastRenderData&&this._lastRenderData.linesEquals(e)){const ne=this._lastRenderData._get();return new ade(e,ne.imageData,ne.lines)}const r=this._getBuffer();if(!r)return null;const[o,a,l]=A1._renderUntouchedLines(r,e.topPaddingLineCount,t,i,s,this._lastRenderData),c=this._model.getMinimapLinesRenderingData(t,i,l),d=this._model.getOptions().tabSize,u=this._model.options.defaultBackgroundColor,h=this._model.options.backgroundColor,f=this._model.options.foregroundAlpha,g=this._model.tokensColorTracker,p=g.backgroundIsLight(),_=this._model.options.renderMinimap,w=this._model.options.charRenderer(),b=this._model.options.fontScale,y=this._model.options.minimapCharWidth,x=(_===1?2:3)*b,E=s>x?Math.floor((s-x)/2):0,D=h.a/255,N=new Pg(Math.round((h.r-u.r)*D+u.r),Math.round((h.g-u.g)*D+u.g),Math.round((h.b-u.b)*D+u.b),255);let I=e.topPaddingLineCount*s;const H=[];for(let ne=0,oe=i-t+1;ne<oe;ne++)l[ne]&&A1._renderLine(r,N,h.a,p,_,y,g,f,w,I,E,d,c[ne],b,s),H[ne]=new OO(I),I+=s;const z=o===-1?0:o,J=(a===-1?r.height:a)-z;return this._canvas.domNode.getContext("2d").putImageData(r,0,0,0,z,r.width,J),new ade(e,r,H)}static _renderUntouchedLines(e,t,i,s,r,o){const a=[];if(!o){for(let I=0,H=s-i+1;I<H;I++)a[I]=!0;return[-1,-1,a]}const l=o._get(),c=l.imageData.data,d=l.rendLineNumberStart,u=l.lines,h=u.length,f=e.width,g=e.data,p=(s-i+1)*r*f*4;let _=-1,w=-1,b=-1,y=-1,S=-1,x=-1,E=t*r;for(let I=i;I<=s;I++){const H=I-i,z=I-d,G=z>=0&&z<h?u[z].dy:-1;if(G===-1){a[H]=!0,E+=r;continue}const J=G*f*4,j=(G+r)*f*4,ne=E*f*4,oe=(E+r)*f*4;y===J&&x===ne?(y=j,x=oe):(b!==-1&&(g.set(c.subarray(b,y),S),_===-1&&b===0&&b===S&&(_=y),w===-1&&y===p&&b===S&&(w=b)),b=J,y=j,S=ne,x=oe),a[H]=!1,E+=r}b!==-1&&(g.set(c.subarray(b,y),S),_===-1&&b===0&&b===S&&(_=y),w===-1&&y===p&&b===S&&(w=b));const D=_===-1?-1:_/(f*4),N=w===-1?-1:w/(f*4);return[D,N,a]}static _renderLine(e,t,i,s,r,o,a,l,c,d,u,h,f,g,p){const _=f.content,w=f.tokens,b=e.width-o,y=p===1;let S=dh,x=0,E=0;for(let D=0,N=w.getCount();D<N;D++){const I=w.getEndOffset(D),H=w.getForeground(D),z=a.getColor(H);for(;x<I;x++){if(S>b)return;const G=_.charCodeAt(x);if(G===9){const J=h-(x+E)%h;E+=J-1,S+=J*o}else if(G===32)S+=o;else{const J=N_(G)?2:1;for(let j=0;j<J;j++)if(r===2?c.blockRenderChar(e,S,d+u,z,l,t,i,y):c.renderChar(e,S,d+u,G,z,l,t,i,g,s,y),S+=o,S>b)return}}}}}class lde{constructor(e,t,i){this._startLineNumber=e,this._endLineNumber=t,this._defaultValue=i,this._values=[];for(let s=0,r=this._endLineNumber-this._startLineNumber+1;s<r;s++)this._values[s]=i}has(e){return this.get(e)!==this._defaultValue}set(e,t){e<this._startLineNumber||e>this._endLineNumber||(this._values[e-this._startLineNumber]=t)}get(e){return e<this._startLineNumber||e>this._endLineNumber?this._defaultValue:this._values[e-this._startLineNumber]}}class tdt extends cl{constructor(e,t){super(e),this._viewDomNode=t;const s=this._context.configuration.options.get(146);this._widgets={},this._verticalScrollbarWidth=s.verticalScrollbarWidth,this._minimapWidth=s.minimap.minimapWidth,this._horizontalScrollbarHeight=s.horizontalScrollbarHeight,this._editorHeight=s.height,this._editorWidth=s.width,this._viewDomNodeRect={top:0,left:0,width:0,height:0},this._domNode=ui(document.createElement("div")),$u.write(this._domNode,4),this._domNode.setClassName("overlayWidgets"),this.overflowingOverlayWidgetsDomNode=ui(document.createElement("div")),$u.write(this.overflowingOverlayWidgetsDomNode,5),this.overflowingOverlayWidgetsDomNode.setClassName("overflowingOverlayWidgets")}dispose(){super.dispose(),this._widgets={}}getDomNode(){return this._domNode}onConfigurationChanged(e){const i=this._context.configuration.options.get(146);return this._verticalScrollbarWidth=i.verticalScrollbarWidth,this._minimapWidth=i.minimap.minimapWidth,this._horizontalScrollbarHeight=i.horizontalScrollbarHeight,this._editorHeight=i.height,this._editorWidth=i.width,!0}addWidget(e){const t=ui(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:null,domNode:t},t.setPosition("absolute"),t.setAttribute("widgetId",e.getId()),e.allowEditorOverflow?this.overflowingOverlayWidgetsDomNode.appendChild(t):this._domNode.appendChild(t),this.setShouldRender(),this._updateMaxMinWidth()}setWidgetPosition(e,t){const i=this._widgets[e.getId()],s=t?t.preference:null,r=t==null?void 0:t.stackOridinal;return i.preference===s&&i.stack===r?(this._updateMaxMinWidth(),!1):(i.preference=s,i.stack=r,this.setShouldRender(),this._updateMaxMinWidth(),!0)}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const s=this._widgets[t].domNode.domNode;delete this._widgets[t],s.remove(),this.setShouldRender(),this._updateMaxMinWidth()}}_updateMaxMinWidth(){var i,s;let e=0;const t=Object.keys(this._widgets);for(let r=0,o=t.length;r<o;r++){const a=t[r],c=(s=(i=this._widgets[a].widget).getMinContentWidthInPx)==null?void 0:s.call(i);typeof c<"u"&&(e=Math.max(e,c))}this._context.viewLayout.setOverlayWidgetsMinWidth(e)}_renderWidget(e,t){const i=e.domNode;if(e.preference===null){i.setTop("");return}const s=2*this._verticalScrollbarWidth+this._minimapWidth;if(e.preference===0||e.preference===1){if(e.preference===1){const r=i.domNode.clientHeight;i.setTop(this._editorHeight-r-2*this._horizontalScrollbarHeight)}else i.setTop(0);e.stack!==void 0?(i.setTop(t[e.preference]),t[e.preference]+=i.domNode.clientWidth):i.setRight(s)}else if(e.preference===2)i.domNode.style.right="50%",e.stack!==void 0?(i.setTop(t[2]),t[2]+=i.domNode.clientHeight):i.setTop(0);else{const{top:r,left:o}=e.preference;if(this._context.configuration.options.get(42)&&e.widget.allowEditorOverflow){const l=this._viewDomNodeRect;i.setTop(r+l.top),i.setLeft(o+l.left),i.setPosition("fixed")}else i.setTop(r),i.setLeft(o),i.setPosition("absolute")}}prepareRender(e){this._viewDomNodeRect=Fn(this._viewDomNode.domNode)}render(e){this._domNode.setWidth(this._editorWidth);const t=Object.keys(this._widgets),i=Array.from({length:3},()=>0);t.sort((s,r)=>(this._widgets[s].stack||0)-(this._widgets[r].stack||0));for(let s=0,r=t.length;s<r;s++){const o=t[s];this._renderWidget(this._widgets[o],i)}}}class idt{constructor(e,t){const i=e.options;this.lineHeight=i.get(67),this.pixelRatio=i.get(144),this.overviewRulerLanes=i.get(83),this.renderBorder=i.get(82);const s=t.getColor(ent);this.borderColor=s?s.toString():null,this.hideCursor=i.get(59);const r=t.getColor(kB);this.cursorColorSingle=r?r.transparent(.7).toString():null;const o=t.getColor(J1e);this.cursorColorPrimary=o?o.transparent(.7).toString():null;const a=t.getColor(eye);this.cursorColorSecondary=a?a.transparent(.7).toString():null,this.themeType=t.type;const l=i.get(73),c=l.enabled,d=l.side,u=t.getColor(tnt),h=In.getDefaultBackground();u?this.backgroundColor=u:c&&d==="right"?this.backgroundColor=h:this.backgroundColor=null;const g=i.get(146).overviewRuler;this.top=g.top,this.right=g.right,this.domWidth=g.width,this.domHeight=g.height,this.overviewRulerLanes===0?(this.canvasWidth=0,this.canvasHeight=0):(this.canvasWidth=this.domWidth*this.pixelRatio|0,this.canvasHeight=this.domHeight*this.pixelRatio|0);const[p,_]=this._initLanes(1,this.canvasWidth,this.overviewRulerLanes);this.x=p,this.w=_}_initLanes(e,t,i){const s=t-e;if(i>=3){const r=Math.floor(s/3),o=Math.floor(s/3),a=s-r-o,l=e,c=l+r,d=l+r+a;return[[0,l,c,l,d,l,c,l],[0,r,a,r+a,o,r+a+o,a+o,r+a+o]]}else if(i===2){const r=Math.floor(s/2),o=s-r,a=e,l=a+r;return[[0,a,a,a,l,a,a,a],[0,r,r,r,o,r+o,r+o,r+o]]}else{const r=e,o=s;return[[0,r,r,r,r,r,r,r],[0,o,o,o,o,o,o,o]]}}equals(e){return this.lineHeight===e.lineHeight&&this.pixelRatio===e.pixelRatio&&this.overviewRulerLanes===e.overviewRulerLanes&&this.renderBorder===e.renderBorder&&this.borderColor===e.borderColor&&this.hideCursor===e.hideCursor&&this.cursorColorSingle===e.cursorColorSingle&&this.cursorColorPrimary===e.cursorColorPrimary&&this.cursorColorSecondary===e.cursorColorSecondary&&this.themeType===e.themeType&&ge.equals(this.backgroundColor,e.backgroundColor)&&this.top===e.top&&this.right===e.right&&this.domWidth===e.domWidth&&this.domHeight===e.domHeight&&this.canvasWidth===e.canvasWidth&&this.canvasHeight===e.canvasHeight}}class ndt extends cl{constructor(e){super(e),this._actualShouldRender=0,this._renderedDecorations=[],this._renderedCursorPositions=[],this._domNode=ui(document.createElement("canvas")),this._domNode.setClassName("decorationsOverviewRuler"),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._domNode.setAttribute("aria-hidden","true"),this._updateSettings(!1),this._tokensColorTrackerListener=In.onDidChange(t=>{t.changedColorMap&&this._updateSettings(!0)}),this._cursorPositions=[{position:new Y(1,1),color:this._settings.cursorColorSingle}]}dispose(){super.dispose(),this._tokensColorTrackerListener.dispose()}_updateSettings(e){const t=new idt(this._context.configuration,this._context.theme);return this._settings&&this._settings.equals(t)?!1:(this._settings=t,this._domNode.setTop(this._settings.top),this._domNode.setRight(this._settings.right),this._domNode.setWidth(this._settings.domWidth),this._domNode.setHeight(this._settings.domHeight),this._domNode.domNode.width=this._settings.canvasWidth,this._domNode.domNode.height=this._settings.canvasHeight,e&&this._render(),!0)}_markRenderingIsNeeded(){return this._actualShouldRender=2,!0}_markRenderingIsMaybeNeeded(){return this._actualShouldRender=1,!0}onConfigurationChanged(e){return this._updateSettings(!1)?this._markRenderingIsNeeded():!1}onCursorStateChanged(e){this._cursorPositions=[];for(let t=0,i=e.selections.length;t<i;t++){let s=this._settings.cursorColorSingle;i>1&&(s=t===0?this._settings.cursorColorPrimary:this._settings.cursorColorSecondary),this._cursorPositions.push({position:e.selections[t].getPosition(),color:s})}return this._cursorPositions.sort((t,i)=>Y.compare(t.position,i.position)),this._markRenderingIsMaybeNeeded()}onDecorationsChanged(e){return e.affectsOverviewRuler?this._markRenderingIsMaybeNeeded():!1}onFlushed(e){return this._markRenderingIsNeeded()}onScrollChanged(e){return e.scrollHeightChanged?this._markRenderingIsNeeded():!1}onZonesChanged(e){return this._markRenderingIsNeeded()}onThemeChanged(e){return this._updateSettings(!1)?this._markRenderingIsNeeded():!1}getDomNode(){return this._domNode.domNode}prepareRender(e){}render(e){this._render(),this._actualShouldRender=0}_render(){const e=this._settings.backgroundColor;if(this._settings.overviewRulerLanes===0){this._domNode.setBackgroundColor(e?ge.Format.CSS.formatHexA(e):""),this._domNode.setDisplay("none");return}const t=this._context.viewModel.getAllOverviewRulerDecorations(this._context.theme);if(t.sort(_D.compareByRenderingProps),this._actualShouldRender===1&&!_D.equalsArr(this._renderedDecorations,t)&&(this._actualShouldRender=2),this._actualShouldRender===1&&!dn(this._renderedCursorPositions,this._cursorPositions,(g,p)=>g.position.lineNumber===p.position.lineNumber&&g.color===p.color)&&(this._actualShouldRender=2),this._actualShouldRender===1)return;this._renderedDecorations=t,this._renderedCursorPositions=this._cursorPositions,this._domNode.setDisplay("block");const i=this._settings.canvasWidth,s=this._settings.canvasHeight,r=this._settings.lineHeight,o=this._context.viewLayout,a=this._context.viewLayout.getScrollHeight(),l=s/a,c=6*this._settings.pixelRatio|0,d=c/2|0,u=this._domNode.domNode.getContext("2d");e?e.isOpaque()?(u.fillStyle=ge.Format.CSS.formatHexA(e),u.fillRect(0,0,i,s)):(u.clearRect(0,0,i,s),u.fillStyle=ge.Format.CSS.formatHexA(e),u.fillRect(0,0,i,s)):u.clearRect(0,0,i,s);const h=this._settings.x,f=this._settings.w;for(const g of t){const p=g.color,_=g.data;u.fillStyle=p;let w=0,b=0,y=0;for(let S=0,x=_.length/3;S<x;S++){const E=_[3*S],D=_[3*S+1],N=_[3*S+2];let I=o.getVerticalOffsetForLineNumber(D)*l|0,H=(o.getVerticalOffsetForLineNumber(N)+r)*l|0;if(H-I<c){let G=(I+H)/2|0;G<d?G=d:G+d>s&&(G=s-d),I=G-d,H=G+d}I>y+1||E!==w?(S!==0&&u.fillRect(h[w],b,f[w],y-b),w=E,b=I,y=H):H>y&&(y=H)}u.fillRect(h[w],b,f[w],y-b)}if(!this._settings.hideCursor){const g=2*this._settings.pixelRatio|0,p=g/2|0,_=this._settings.x[7],w=this._settings.w[7];let b=-100,y=-100,S=null;for(let x=0,E=this._cursorPositions.length;x<E;x++){const D=this._cursorPositions[x].color;if(!D)continue;const N=this._cursorPositions[x].position;let I=o.getVerticalOffsetForLineNumber(N.lineNumber)*l|0;I<p?I=p:I+p>s&&(I=s-p);const H=I-p,z=H+g;H>y+1||D!==S?(x!==0&&S&&u.fillRect(_,b,w,y-b),b=H,y=z):z>y&&(y=z),S=D,u.fillStyle=D}S&&u.fillRect(_,b,w,y-b)}this._settings.renderBorder&&this._settings.borderColor&&this._settings.overviewRulerLanes>0&&(u.beginPath(),u.lineWidth=1,u.strokeStyle=this._settings.borderColor,u.moveTo(0,0),u.lineTo(0,s),u.moveTo(1,0),u.lineTo(i,0),u.stroke())}}class cde{constructor(e,t,i){this._colorZoneBrand=void 0,this.from=e|0,this.to=t|0,this.colorId=i|0}static compare(e,t){return e.colorId===t.colorId?e.from===t.from?e.to-t.to:e.from-t.from:e.colorId-t.colorId}}class USe{constructor(e,t,i,s){this._overviewRulerZoneBrand=void 0,this.startLineNumber=e,this.endLineNumber=t,this.heightInLines=i,this.color=s,this._colorZone=null}static compare(e,t){return e.color===t.color?e.startLineNumber===t.startLineNumber?e.heightInLines===t.heightInLines?e.endLineNumber-t.endLineNumber:e.heightInLines-t.heightInLines:e.startLineNumber-t.startLineNumber:e.color<t.color?-1:1}setColorZone(e){this._colorZone=e}getColorZones(){return this._colorZone}}class sdt{constructor(e){this._getVerticalOffsetForLine=e,this._zones=[],this._colorZonesInvalid=!1,this._lineHeight=0,this._domWidth=0,this._domHeight=0,this._outerHeight=0,this._pixelRatio=1,this._lastAssignedId=0,this._color2Id=Object.create(null),this._id2Color=[]}getId2Color(){return this._id2Color}setZones(e){this._zones=e,this._zones.sort(USe.compare)}setLineHeight(e){return this._lineHeight===e?!1:(this._lineHeight=e,this._colorZonesInvalid=!0,!0)}setPixelRatio(e){this._pixelRatio=e,this._colorZonesInvalid=!0}getDOMWidth(){return this._domWidth}getCanvasWidth(){return this._domWidth*this._pixelRatio}setDOMWidth(e){return this._domWidth===e?!1:(this._domWidth=e,this._colorZonesInvalid=!0,!0)}getDOMHeight(){return this._domHeight}getCanvasHeight(){return this._domHeight*this._pixelRatio}setDOMHeight(e){return this._domHeight===e?!1:(this._domHeight=e,this._colorZonesInvalid=!0,!0)}getOuterHeight(){return this._outerHeight}setOuterHeight(e){return this._outerHeight===e?!1:(this._outerHeight=e,this._colorZonesInvalid=!0,!0)}resolveColorZones(){const e=this._colorZonesInvalid,t=Math.floor(this._lineHeight),i=Math.floor(this.getCanvasHeight()),s=Math.floor(this._outerHeight),r=i/s,o=Math.floor(4*this._pixelRatio/2),a=[];for(let l=0,c=this._zones.length;l<c;l++){const d=this._zones[l];if(!e){const S=d.getColorZones();if(S){a.push(S);continue}}const u=this._getVerticalOffsetForLine(d.startLineNumber),h=d.heightInLines===0?this._getVerticalOffsetForLine(d.endLineNumber)+t:u+d.heightInLines*t,f=Math.floor(r*u),g=Math.floor(r*h);let p=Math.floor((f+g)/2),_=g-p;_<o&&(_=o),p-_<0&&(p=_),p+_>i&&(p=i-_);const w=d.color;let b=this._color2Id[w];b||(b=++this._lastAssignedId,this._color2Id[w]=b,this._id2Color[b]=w);const y=new cde(p-_,p+_,b);d.setColorZone(y),a.push(y)}return this._colorZonesInvalid=!1,a.sort(cde.compare),a}}class rdt extends nT{constructor(e,t){super(),this._context=e;const i=this._context.configuration.options;this._domNode=ui(document.createElement("canvas")),this._domNode.setClassName(t),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._zoneManager=new sdt(s=>this._context.viewLayout.getVerticalOffsetForLineNumber(s)),this._zoneManager.setDOMWidth(0),this._zoneManager.setDOMHeight(0),this._zoneManager.setOuterHeight(this._context.viewLayout.getScrollHeight()),this._zoneManager.setLineHeight(i.get(67)),this._zoneManager.setPixelRatio(i.get(144)),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return e.hasChanged(67)&&(this._zoneManager.setLineHeight(t.get(67)),this._render()),e.hasChanged(144)&&(this._zoneManager.setPixelRatio(t.get(144)),this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render()),!0}onFlushed(e){return this._render(),!0}onScrollChanged(e){return e.scrollHeightChanged&&(this._zoneManager.setOuterHeight(e.scrollHeight),this._render()),!0}onZonesChanged(e){return this._render(),!0}getDomNode(){return this._domNode.domNode}setLayout(e){this._domNode.setTop(e.top),this._domNode.setRight(e.right);let t=!1;t=this._zoneManager.setDOMWidth(e.width)||t,t=this._zoneManager.setDOMHeight(e.height)||t,t&&(this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render())}setZones(e){this._zoneManager.setZones(e),this._render()}_render(){if(this._zoneManager.getOuterHeight()===0)return!1;const e=this._zoneManager.getCanvasWidth(),t=this._zoneManager.getCanvasHeight(),i=this._zoneManager.resolveColorZones(),s=this._zoneManager.getId2Color(),r=this._domNode.domNode.getContext("2d");return r.clearRect(0,0,e,t),i.length>0&&this._renderOneLane(r,i,s,e),!0}_renderOneLane(e,t,i,s){let r=0,o=0,a=0;for(const l of t){const c=l.colorId,d=l.from,u=l.to;c!==r?(e.fillRect(0,o,s,a-o),r=c,e.fillStyle=i[r],o=d,a=u):a>=d?a=Math.max(a,u):(e.fillRect(0,o,s,a-o),o=d,a=u)}e.fillRect(0,o,s,a-o)}}class odt extends cl{constructor(e){super(e),this.domNode=ui(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("view-rulers"),this._renderedRulers=[];const t=this._context.configuration.options;this._rulers=t.get(103),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth}dispose(){super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._rulers=t.get(103),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,!0}onScrollChanged(e){return e.scrollHeightChanged}prepareRender(e){}_ensureRulersCount(){const e=this._renderedRulers.length,t=this._rulers.length;if(e===t)return;if(e<t){const{tabSize:s}=this._context.viewModel.model.getOptions(),r=s;let o=t-e;for(;o>0;){const a=ui(document.createElement("div"));a.setClassName("view-ruler"),a.setWidth(r),this.domNode.appendChild(a),this._renderedRulers.push(a),o--}return}let i=e-t;for(;i>0;){const s=this._renderedRulers.pop();this.domNode.removeChild(s),i--}}render(e){this._ensureRulersCount();for(let t=0,i=this._rulers.length;t<i;t++){const s=this._renderedRulers[t],r=this._rulers[t];s.setBoxShadow(r.color?`1px 0 0 0 ${r.color} inset`:""),s.setHeight(Math.min(e.scrollHeight,1e6)),s.setLeft(r.column*this._typicalHalfwidthCharacterWidth)}}}class adt extends cl{constructor(e){super(e),this._scrollTop=0,this._width=0,this._updateWidth(),this._shouldShow=!1;const i=this._context.configuration.options.get(104);this._useShadows=i.useShadows,this._domNode=ui(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true")}dispose(){super.dispose()}_updateShouldShow(){const e=this._useShadows&&this._scrollTop>0;return this._shouldShow!==e?(this._shouldShow=e,!0):!1}getDomNode(){return this._domNode}_updateWidth(){const t=this._context.configuration.options.get(146);t.minimap.renderMinimap===0||t.minimap.minimapWidth>0&&t.minimap.minimapLeft===0?this._width=t.width:this._width=t.width-t.verticalScrollbarWidth}onConfigurationChanged(e){const i=this._context.configuration.options.get(104);return this._useShadows=i.useShadows,this._updateWidth(),this._updateShouldShow(),!0}onScrollChanged(e){return this._scrollTop=e.scrollTop,this._updateShouldShow()}prepareRender(e){}render(e){this._domNode.setWidth(this._width),this._domNode.setClassName(this._shouldShow?"scroll-decoration":"")}}class ldt{constructor(e){this.left=e.left,this.width=e.width,this.startStyle=null,this.endStyle=null}}class cdt{constructor(e,t){this.lineNumber=e,this.ranges=t}}function ddt(n){return new ldt(n)}function udt(n){return new cdt(n.lineNumber,n.ranges.map(ddt))}const Vn=class Vn extends G0{constructor(e){super(),this._previousFrameVisibleRangesWithStyle=[],this._context=e;const t=this._context.configuration.options;this._roundedSelection=t.get(102),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,this._selections=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._roundedSelection=t.get(102),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_visibleRangesHaveGaps(e){for(let t=0,i=e.length;t<i;t++)if(e[t].ranges.length>1)return!0;return!1}_enrichVisibleRangesWithStyle(e,t,i){const s=this._typicalHalfwidthCharacterWidth/4;let r=null,o=null;if(i&&i.length>0&&t.length>0){const a=t[0].lineNumber;if(a===e.startLineNumber)for(let c=0;!r&&c<i.length;c++)i[c].lineNumber===a&&(r=i[c].ranges[0]);const l=t[t.length-1].lineNumber;if(l===e.endLineNumber)for(let c=i.length-1;!o&&c>=0;c--)i[c].lineNumber===l&&(o=i[c].ranges[0]);r&&!r.startStyle&&(r=null),o&&!o.startStyle&&(o=null)}for(let a=0,l=t.length;a<l;a++){const c=t[a].ranges[0],d=c.left,u=c.left+c.width,h={top:0,bottom:0},f={top:0,bottom:0};if(a>0){const g=t[a-1].ranges[0].left,p=t[a-1].ranges[0].left+t[a-1].ranges[0].width;gA(d-g)<s?h.top=2:d>g&&(h.top=1),gA(u-p)<s?f.top=2:g<u&&u<p&&(f.top=1)}else r&&(h.top=r.startStyle.top,f.top=r.endStyle.top);if(a+1<l){const g=t[a+1].ranges[0].left,p=t[a+1].ranges[0].left+t[a+1].ranges[0].width;gA(d-g)<s?h.bottom=2:g<d&&d<p&&(h.bottom=1),gA(u-p)<s?f.bottom=2:u<p&&(f.bottom=1)}else o&&(h.bottom=o.startStyle.bottom,f.bottom=o.endStyle.bottom);c.startStyle=h,c.endStyle=f}}_getVisibleRangesWithStyle(e,t,i){const r=(t.linesVisibleRangesForRange(e,!0)||[]).map(udt);return!this._visibleRangesHaveGaps(r)&&this._roundedSelection&&this._enrichVisibleRangesWithStyle(t.visibleRange,r,i),r}_createSelectionPiece(e,t,i,s,r){return'<div class="cslr '+i+'" style="top:'+e.toString()+"px;bottom:"+t.toString()+"px;left:"+s.toString()+"px;width:"+r.toString()+'px;"></div>'}_actualRenderOneSelection(e,t,i,s){if(s.length===0)return;const r=!!s[0].ranges[0].startStyle,o=s[0].lineNumber,a=s[s.length-1].lineNumber;for(let l=0,c=s.length;l<c;l++){const d=s[l],u=d.lineNumber,h=u-t,f=i&&u===o?1:0,g=i&&u!==o&&u===a?1:0;let p="",_="";for(let w=0,b=d.ranges.length;w<b;w++){const y=d.ranges[w];if(r){const x=y.startStyle,E=y.endStyle;if(x.top===1||x.bottom===1){p+=this._createSelectionPiece(f,g,Vn.SELECTION_CLASS_NAME,y.left-Vn.ROUNDED_PIECE_WIDTH,Vn.ROUNDED_PIECE_WIDTH);let D=Vn.EDITOR_BACKGROUND_CLASS_NAME;x.top===1&&(D+=" "+Vn.SELECTION_TOP_RIGHT),x.bottom===1&&(D+=" "+Vn.SELECTION_BOTTOM_RIGHT),p+=this._createSelectionPiece(f,g,D,y.left-Vn.ROUNDED_PIECE_WIDTH,Vn.ROUNDED_PIECE_WIDTH)}if(E.top===1||E.bottom===1){p+=this._createSelectionPiece(f,g,Vn.SELECTION_CLASS_NAME,y.left+y.width,Vn.ROUNDED_PIECE_WIDTH);let D=Vn.EDITOR_BACKGROUND_CLASS_NAME;E.top===1&&(D+=" "+Vn.SELECTION_TOP_LEFT),E.bottom===1&&(D+=" "+Vn.SELECTION_BOTTOM_LEFT),p+=this._createSelectionPiece(f,g,D,y.left+y.width,Vn.ROUNDED_PIECE_WIDTH)}}let S=Vn.SELECTION_CLASS_NAME;if(r){const x=y.startStyle,E=y.endStyle;x.top===0&&(S+=" "+Vn.SELECTION_TOP_LEFT),x.bottom===0&&(S+=" "+Vn.SELECTION_BOTTOM_LEFT),E.top===0&&(S+=" "+Vn.SELECTION_TOP_RIGHT),E.bottom===0&&(S+=" "+Vn.SELECTION_BOTTOM_RIGHT)}_+=this._createSelectionPiece(f,g,S,y.left,y.width)}e[h][0]+=p,e[h][1]+=_}}prepareRender(e){const t=[],i=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber;for(let o=i;o<=s;o++){const a=o-i;t[a]=["",""]}const r=[];for(let o=0,a=this._selections.length;o<a;o++){const l=this._selections[o];if(l.isEmpty()){r[o]=null;continue}const c=this._getVisibleRangesWithStyle(l,e,this._previousFrameVisibleRangesWithStyle[o]);r[o]=c,this._actualRenderOneSelection(t,i,this._selections.length>1,c)}this._previousFrameVisibleRangesWithStyle=r,this._renderResult=t.map(([o,a])=>o+a)}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}};Vn.SELECTION_CLASS_NAME="selected-text",Vn.SELECTION_TOP_LEFT="top-left-radius",Vn.SELECTION_BOTTOM_LEFT="bottom-left-radius",Vn.SELECTION_TOP_RIGHT="top-right-radius",Vn.SELECTION_BOTTOM_RIGHT="bottom-right-radius",Vn.EDITOR_BACKGROUND_CLASS_NAME="monaco-editor-background",Vn.ROUNDED_PIECE_WIDTH=10;let kj=Vn;zc((n,e)=>{const t=n.getColor(bXe);t&&!t.isTransparent()&&e.addRule(`.monaco-editor .view-line span.inline-selected-text { color: ${t}; }`)});function gA(n){return n<0?-n:n}class dde{constructor(e,t,i,s,r,o,a){this.top=e,this.left=t,this.paddingLeft=i,this.width=s,this.height=r,this.textContent=o,this.textContentClassName=a}}var Sg;(function(n){n[n.Single=0]="Single",n[n.MultiPrimary=1]="MultiPrimary",n[n.MultiSecondary=2]="MultiSecondary"})(Sg||(Sg={}));class ude{constructor(e,t){this._context=e;const i=this._context.configuration.options,s=i.get(50);this._cursorStyle=i.get(28),this._lineHeight=i.get(67),this._typicalHalfwidthCharacterWidth=s.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(i.get(31),this._typicalHalfwidthCharacterWidth),this._isVisible=!0,this._domNode=ui(document.createElement("div")),this._domNode.setClassName(`cursor ${By}`),this._domNode.setHeight(this._lineHeight),this._domNode.setTop(0),this._domNode.setLeft(0),rr(this._domNode,s),this._domNode.setDisplay("none"),this._position=new Y(1,1),this._pluralityClass="",this.setPlurality(t),this._lastRenderedContent="",this._renderData=null}getDomNode(){return this._domNode}getPosition(){return this._position}setPlurality(e){switch(e){default:case Sg.Single:this._pluralityClass="";break;case Sg.MultiPrimary:this._pluralityClass="cursor-primary";break;case Sg.MultiSecondary:this._pluralityClass="cursor-secondary";break}}show(){this._isVisible||(this._domNode.setVisibility("inherit"),this._isVisible=!0)}hide(){this._isVisible&&(this._domNode.setVisibility("hidden"),this._isVisible=!1)}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(50);return this._cursorStyle=t.get(28),this._lineHeight=t.get(67),this._typicalHalfwidthCharacterWidth=i.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(t.get(31),this._typicalHalfwidthCharacterWidth),rr(this._domNode,i),!0}onCursorPositionChanged(e,t){return t?this._domNode.domNode.style.transitionProperty="none":this._domNode.domNode.style.transitionProperty="",this._position=e,!0}_getGraphemeAwarePosition(){const{lineNumber:e,column:t}=this._position,i=this._context.viewModel.getLineContent(e),[s,r]=hKe(i,t-1);return[new Y(e,s+1),i.substring(s,r)]}_prepareRender(e){let t="",i="";const[s,r]=this._getGraphemeAwarePosition();if(this._cursorStyle===er.Line||this._cursorStyle===er.LineThin){const h=e.visibleRangeForPosition(s);if(!h||h.outsideRenderedLine)return null;const f=nt(this._domNode.domNode);let g;this._cursorStyle===er.Line?(g=Hoe(f,this._lineCursorWidth>0?this._lineCursorWidth:2),g>2&&(t=r,i=this._getTokenClassName(s))):g=Hoe(f,1);let p=h.left,_=0;g>=2&&p>=1&&(_=1,p-=_);const w=e.getVerticalOffsetForLineNumber(s.lineNumber)-e.bigNumbersDelta;return new dde(w,p,_,g,this._lineHeight,t,i)}const o=e.linesVisibleRangesForRange(new M(s.lineNumber,s.column,s.lineNumber,s.column+r.length),!1);if(!o||o.length===0)return null;const a=o[0];if(a.outsideRenderedLine||a.ranges.length===0)return null;const l=a.ranges[0],c=r==="	"?this._typicalHalfwidthCharacterWidth:l.width<1?this._typicalHalfwidthCharacterWidth:l.width;this._cursorStyle===er.Block&&(t=r,i=this._getTokenClassName(s));let d=e.getVerticalOffsetForLineNumber(s.lineNumber)-e.bigNumbersDelta,u=this._lineHeight;return(this._cursorStyle===er.Underline||this._cursorStyle===er.UnderlineThin)&&(d+=this._lineHeight-2,u=2),new dde(d,l.left,0,c,u,t,i)}_getTokenClassName(e){const t=this._context.viewModel.getViewLineData(e.lineNumber),i=t.tokens.findTokenIndexAtOffset(e.column-1);return t.tokens.getClassName(i)}prepareRender(e){this._renderData=this._prepareRender(e)}render(e){return this._renderData?(this._lastRenderedContent!==this._renderData.textContent&&(this._lastRenderedContent=this._renderData.textContent,this._domNode.domNode.textContent=this._lastRenderedContent),this._domNode.setClassName(`cursor ${this._pluralityClass} ${By} ${this._renderData.textContentClassName}`),this._domNode.setDisplay("block"),this._domNode.setTop(this._renderData.top),this._domNode.setLeft(this._renderData.left),this._domNode.setPaddingLeft(this._renderData.paddingLeft),this._domNode.setWidth(this._renderData.width),this._domNode.setLineHeight(this._renderData.height),this._domNode.setHeight(this._renderData.height),{domNode:this._domNode.domNode,position:this._position,contentLeft:this._renderData.left,height:this._renderData.height,width:2}):(this._domNode.setDisplay("none"),null)}}const UE=class UE extends cl{constructor(e){super(e);const t=this._context.configuration.options;this._readOnly=t.get(92),this._cursorBlinking=t.get(26),this._cursorStyle=t.get(28),this._cursorSmoothCaretAnimation=t.get(27),this._selectionIsEmpty=!0,this._isComposingInput=!1,this._isVisible=!1,this._primaryCursor=new ude(this._context,Sg.Single),this._secondaryCursors=[],this._renderData=[],this._domNode=ui(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._updateDomClassName(),this._domNode.appendChild(this._primaryCursor.getDomNode()),this._startCursorBlinkAnimation=new Fd,this._cursorFlatBlinkInterval=new hX,this._blinkingEnabled=!1,this._editorHasFocus=!1,this._updateBlinking()}dispose(){super.dispose(),this._startCursorBlinkAnimation.dispose(),this._cursorFlatBlinkInterval.dispose()}getDomNode(){return this._domNode}onCompositionStart(e){return this._isComposingInput=!0,this._updateBlinking(),!0}onCompositionEnd(e){return this._isComposingInput=!1,this._updateBlinking(),!0}onConfigurationChanged(e){const t=this._context.configuration.options;this._readOnly=t.get(92),this._cursorBlinking=t.get(26),this._cursorStyle=t.get(28),this._cursorSmoothCaretAnimation=t.get(27),this._updateBlinking(),this._updateDomClassName(),this._primaryCursor.onConfigurationChanged(e);for(let i=0,s=this._secondaryCursors.length;i<s;i++)this._secondaryCursors[i].onConfigurationChanged(e);return!0}_onCursorPositionChanged(e,t,i){const s=this._secondaryCursors.length!==t.length||this._cursorSmoothCaretAnimation==="explicit"&&i!==3;if(this._primaryCursor.setPlurality(t.length?Sg.MultiPrimary:Sg.Single),this._primaryCursor.onCursorPositionChanged(e,s),this._updateBlinking(),this._secondaryCursors.length<t.length){const r=t.length-this._secondaryCursors.length;for(let o=0;o<r;o++){const a=new ude(this._context,Sg.MultiSecondary);this._domNode.domNode.insertBefore(a.getDomNode().domNode,this._primaryCursor.getDomNode().domNode.nextSibling),this._secondaryCursors.push(a)}}else if(this._secondaryCursors.length>t.length){const r=this._secondaryCursors.length-t.length;for(let o=0;o<r;o++)this._domNode.removeChild(this._secondaryCursors[0].getDomNode()),this._secondaryCursors.splice(0,1)}for(let r=0;r<t.length;r++)this._secondaryCursors[r].onCursorPositionChanged(t[r],s)}onCursorStateChanged(e){const t=[];for(let s=0,r=e.selections.length;s<r;s++)t[s]=e.selections[s].getPosition();this._onCursorPositionChanged(t[0],t.slice(1),e.reason);const i=e.selections[0].isEmpty();return this._selectionIsEmpty!==i&&(this._selectionIsEmpty=i,this._updateDomClassName()),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onFocusChanged(e){return this._editorHasFocus=e.isFocused,this._updateBlinking(),!1}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return!0}onTokensChanged(e){const t=i=>{for(let s=0,r=e.ranges.length;s<r;s++)if(e.ranges[s].fromLineNumber<=i.lineNumber&&i.lineNumber<=e.ranges[s].toLineNumber)return!0;return!1};if(t(this._primaryCursor.getPosition()))return!0;for(const i of this._secondaryCursors)if(t(i.getPosition()))return!0;return!1}onZonesChanged(e){return!0}_getCursorBlinking(){return this._isComposingInput||!this._editorHasFocus?0:this._readOnly?5:this._cursorBlinking}_updateBlinking(){this._startCursorBlinkAnimation.cancel(),this._cursorFlatBlinkInterval.cancel();const e=this._getCursorBlinking(),t=e===0,i=e===5;t?this._hide():this._show(),this._blinkingEnabled=!1,this._updateDomClassName(),!t&&!i&&(e===1?this._cursorFlatBlinkInterval.cancelAndSet(()=>{this._isVisible?this._hide():this._show()},UE.BLINK_INTERVAL,nt(this._domNode.domNode)):this._startCursorBlinkAnimation.setIfNotSet(()=>{this._blinkingEnabled=!0,this._updateDomClassName()},UE.BLINK_INTERVAL))}_updateDomClassName(){this._domNode.setClassName(this._getClassName())}_getClassName(){let e="cursors-layer";switch(this._selectionIsEmpty||(e+=" has-selection"),this._cursorStyle){case er.Line:e+=" cursor-line-style";break;case er.Block:e+=" cursor-block-style";break;case er.Underline:e+=" cursor-underline-style";break;case er.LineThin:e+=" cursor-line-thin-style";break;case er.BlockOutline:e+=" cursor-block-outline-style";break;case er.UnderlineThin:e+=" cursor-underline-thin-style";break;default:e+=" cursor-line-style"}if(this._blinkingEnabled)switch(this._getCursorBlinking()){case 1:e+=" cursor-blink";break;case 2:e+=" cursor-smooth";break;case 3:e+=" cursor-phase";break;case 4:e+=" cursor-expand";break;case 5:e+=" cursor-solid";break;default:e+=" cursor-solid"}else e+=" cursor-solid";return(this._cursorSmoothCaretAnimation==="on"||this._cursorSmoothCaretAnimation==="explicit")&&(e+=" cursor-smooth-caret-animation"),e}_show(){this._primaryCursor.show();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].show();this._isVisible=!0}_hide(){this._primaryCursor.hide();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].hide();this._isVisible=!1}prepareRender(e){this._primaryCursor.prepareRender(e);for(let t=0,i=this._secondaryCursors.length;t<i;t++)this._secondaryCursors[t].prepareRender(e)}render(e){const t=[];let i=0;const s=this._primaryCursor.render(e);s&&(t[i++]=s);for(let r=0,o=this._secondaryCursors.length;r<o;r++){const a=this._secondaryCursors[r].render(e);a&&(t[i++]=a)}this._renderData=t}getLastRenderData(){return this._renderData}};UE.BLINK_INTERVAL=500;let Ej=UE;zc((n,e)=>{const t=[{class:".cursor",foreground:kB,background:dQ},{class:".cursor-primary",foreground:J1e,background:Fit},{class:".cursor-secondary",foreground:eye,background:Bit}];for(const i of t){const s=n.getColor(i.foreground);if(s){let r=n.getColor(i.background);r||(r=s.opposite()),e.addRule(`.monaco-editor .cursors-layer ${i.class} { background-color: ${s}; border-color: ${s}; color: ${r}; }`),Tu(n.type)&&e.addRule(`.monaco-editor .cursors-layer.has-selection ${i.class} { border-left: 1px solid ${r}; border-right: 1px solid ${r}; }`)}}});const G8=()=>{throw new Error("Invalid change accessor")};class hdt extends cl{constructor(e){super(e);const t=this._context.configuration.options,i=t.get(146);this._lineHeight=t.get(67),this._contentWidth=i.contentWidth,this._contentLeft=i.contentLeft,this.domNode=ui(document.createElement("div")),this.domNode.setClassName("view-zones"),this.domNode.setPosition("absolute"),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.marginDomNode=ui(document.createElement("div")),this.marginDomNode.setClassName("margin-view-zones"),this.marginDomNode.setPosition("absolute"),this.marginDomNode.setAttribute("role","presentation"),this.marginDomNode.setAttribute("aria-hidden","true"),this._zones={}}dispose(){super.dispose(),this._zones={}}_recomputeWhitespacesProps(){const e=this._context.viewLayout.getWhitespaces(),t=new Map;for(const s of e)t.set(s.id,s);let i=!1;return this._context.viewModel.changeWhitespace(s=>{const r=Object.keys(this._zones);for(let o=0,a=r.length;o<a;o++){const l=r[o],c=this._zones[l],d=this._computeWhitespaceProps(c.delegate);c.isInHiddenArea=d.isInHiddenArea;const u=t.get(l);u&&(u.afterLineNumber!==d.afterViewLineNumber||u.height!==d.heightInPx)&&(s.changeOneWhitespace(l,d.afterViewLineNumber,d.heightInPx),this._safeCallOnComputedHeight(c.delegate,d.heightInPx),i=!0)}}),i}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(146);return this._lineHeight=t.get(67),this._contentWidth=i.contentWidth,this._contentLeft=i.contentLeft,e.hasChanged(67)&&this._recomputeWhitespacesProps(),!0}onLineMappingChanged(e){return this._recomputeWhitespacesProps()}onLinesDeleted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}onLinesInserted(e){return!0}_getZoneOrdinal(e){return e.ordinal??e.afterColumn??1e4}_computeWhitespaceProps(e){if(e.afterLineNumber===0)return{isInHiddenArea:!1,afterViewLineNumber:0,heightInPx:this._heightInPixels(e),minWidthInPx:this._minWidthInPixels(e)};let t;if(typeof e.afterColumn<"u")t=this._context.viewModel.model.validatePosition({lineNumber:e.afterLineNumber,column:e.afterColumn});else{const o=this._context.viewModel.model.validatePosition({lineNumber:e.afterLineNumber,column:1}).lineNumber;t=new Y(o,this._context.viewModel.model.getLineMaxColumn(o))}let i;t.column===this._context.viewModel.model.getLineMaxColumn(t.lineNumber)?i=this._context.viewModel.model.validatePosition({lineNumber:t.lineNumber+1,column:1}):i=this._context.viewModel.model.validatePosition({lineNumber:t.lineNumber,column:t.column+1});const s=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(t,e.afterColumnAffinity,!0),r=e.showInHiddenAreas||this._context.viewModel.coordinatesConverter.modelPositionIsVisible(i);return{isInHiddenArea:!r,afterViewLineNumber:s.lineNumber,heightInPx:r?this._heightInPixels(e):0,minWidthInPx:this._minWidthInPixels(e)}}changeViewZones(e){let t=!1;return this._context.viewModel.changeWhitespace(i=>{const s={addZone:r=>(t=!0,this._addZone(i,r)),removeZone:r=>{r&&(t=this._removeZone(i,r)||t)},layoutZone:r=>{r&&(t=this._layoutZone(i,r)||t)}};fdt(e,s),s.addZone=G8,s.removeZone=G8,s.layoutZone=G8}),t}_addZone(e,t){const i=this._computeWhitespaceProps(t),r={whitespaceId:e.insertWhitespace(i.afterViewLineNumber,this._getZoneOrdinal(t),i.heightInPx,i.minWidthInPx),delegate:t,isInHiddenArea:i.isInHiddenArea,isVisible:!1,domNode:ui(t.domNode),marginDomNode:t.marginDomNode?ui(t.marginDomNode):null};return this._safeCallOnComputedHeight(r.delegate,i.heightInPx),r.domNode.setPosition("absolute"),r.domNode.domNode.style.width="100%",r.domNode.setDisplay("none"),r.domNode.setAttribute("monaco-view-zone",r.whitespaceId),this.domNode.appendChild(r.domNode),r.marginDomNode&&(r.marginDomNode.setPosition("absolute"),r.marginDomNode.domNode.style.width="100%",r.marginDomNode.setDisplay("none"),r.marginDomNode.setAttribute("monaco-view-zone",r.whitespaceId),this.marginDomNode.appendChild(r.marginDomNode)),this._zones[r.whitespaceId]=r,this.setShouldRender(),r.whitespaceId}_removeZone(e,t){if(this._zones.hasOwnProperty(t)){const i=this._zones[t];return delete this._zones[t],e.removeWhitespace(i.whitespaceId),i.domNode.removeAttribute("monaco-visible-view-zone"),i.domNode.removeAttribute("monaco-view-zone"),i.domNode.domNode.remove(),i.marginDomNode&&(i.marginDomNode.removeAttribute("monaco-visible-view-zone"),i.marginDomNode.removeAttribute("monaco-view-zone"),i.marginDomNode.domNode.remove()),this.setShouldRender(),!0}return!1}_layoutZone(e,t){if(this._zones.hasOwnProperty(t)){const i=this._zones[t],s=this._computeWhitespaceProps(i.delegate);return i.isInHiddenArea=s.isInHiddenArea,e.changeOneWhitespace(i.whitespaceId,s.afterViewLineNumber,s.heightInPx),this._safeCallOnComputedHeight(i.delegate,s.heightInPx),this.setShouldRender(),!0}return!1}shouldSuppressMouseDownOnViewZone(e){return this._zones.hasOwnProperty(e)?!!this._zones[e].delegate.suppressMouseDown:!1}_heightInPixels(e){return typeof e.heightInPx=="number"?e.heightInPx:typeof e.heightInLines=="number"?this._lineHeight*e.heightInLines:this._lineHeight}_minWidthInPixels(e){return typeof e.minWidthInPx=="number"?e.minWidthInPx:0}_safeCallOnComputedHeight(e,t){if(typeof e.onComputedHeight=="function")try{e.onComputedHeight(t)}catch(i){pt(i)}}_safeCallOnDomNodeTop(e,t){if(typeof e.onDomNodeTop=="function")try{e.onDomNodeTop(t)}catch(i){pt(i)}}prepareRender(e){}render(e){const t=e.viewportData.whitespaceViewportData,i={};let s=!1;for(const o of t)this._zones[o.id].isInHiddenArea||(i[o.id]=o,s=!0);const r=Object.keys(this._zones);for(let o=0,a=r.length;o<a;o++){const l=r[o],c=this._zones[l];let d=0,u=0,h="none";i.hasOwnProperty(l)?(d=i[l].verticalOffset-e.bigNumbersDelta,u=i[l].height,h="block",c.isVisible||(c.domNode.setAttribute("monaco-visible-view-zone","true"),c.isVisible=!0),this._safeCallOnDomNodeTop(c.delegate,e.getScrolledTopFromAbsoluteTop(i[l].verticalOffset))):(c.isVisible&&(c.domNode.removeAttribute("monaco-visible-view-zone"),c.isVisible=!1),this._safeCallOnDomNodeTop(c.delegate,e.getScrolledTopFromAbsoluteTop(-1e6))),c.domNode.setTop(d),c.domNode.setHeight(u),c.domNode.setDisplay(h),c.marginDomNode&&(c.marginDomNode.setTop(d),c.marginDomNode.setHeight(u),c.marginDomNode.setDisplay(h))}s&&(this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth)),this.marginDomNode.setWidth(this._contentLeft))}}function fdt(n,e){try{return n(e)}catch(t){pt(t)}}class gdt extends G0{constructor(e){super(),this._context=e,this._options=new hde(this._context.configuration),this._selection=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=new hde(this._context.configuration);return this._options.equals(t)?e.hasChanged(146):(this._options=t,!0)}onCursorStateChanged(e){return this._selection=e.selections,this._options.renderWhitespace==="selection"}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}prepareRender(e){if(this._options.renderWhitespace==="none"){this._renderResult=null;return}const t=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber-t+1,r=new Array(s);for(let a=0;a<s;a++)r[a]=!0;const o=this._context.viewModel.getMinimapLinesRenderingData(e.viewportData.startLineNumber,e.viewportData.endLineNumber,r);this._renderResult=[];for(let a=e.viewportData.startLineNumber;a<=e.viewportData.endLineNumber;a++){const l=a-e.viewportData.startLineNumber,c=o.data[l];let d=null;if(this._options.renderWhitespace==="selection"){const u=this._selection;for(const h of u){if(h.endLineNumber<a||h.startLineNumber>a)continue;const f=h.startLineNumber===a?h.startColumn:c.minColumn,g=h.endLineNumber===a?h.endColumn:c.maxColumn;f<g&&(d||(d=[]),d.push(new CSe(f-1,g-1)))}}this._renderResult[l]=this._applyRenderWhitespace(e,a,d,c)}}_applyRenderWhitespace(e,t,i,s){if(this._options.renderWhitespace==="selection"&&!i||this._options.renderWhitespace==="trailing"&&s.continuesWithWrappedLine)return"";const r=this._context.theme.getColor(uQ),o=this._options.renderWithSVG,a=s.content,l=this._options.stopRenderingLineAfter===-1?a.length:Math.min(this._options.stopRenderingLineAfter,a.length),c=s.continuesWithWrappedLine,d=s.minColumn-1,u=this._options.renderWhitespace==="boundary",h=this._options.renderWhitespace==="trailing",f=this._options.lineHeight,g=this._options.middotWidth,p=this._options.wsmiddotWidth,_=this._options.spaceWidth,w=Math.abs(p-_),b=Math.abs(g-_),y=w<b?11825:183,S=this._options.canUseHalfwidthRightwardsArrow;let x="",E=!1,D=lo(a),N;D===-1?(E=!0,D=l,N=l):N=Nu(a);let I=0,H=i&&i[I],z=0;for(let G=d;G<l;G++){const J=a.charCodeAt(G);if(H&&G>=H.endOffset&&(I++,H=i&&i[I]),J!==9&&J!==32||h&&!E&&G<=N)continue;if(u&&G>=D&&G<=N&&J===32){const ne=G-1>=0?a.charCodeAt(G-1):0,oe=G+1<l?a.charCodeAt(G+1):0;if(ne!==32&&oe!==32)continue}if(u&&c&&G===l-1){const ne=G-1>=0?a.charCodeAt(G-1):0;if(J===32&&ne!==32&&ne!==9)continue}if(i&&(!H||H.startOffset>G||H.endOffset<=G))continue;const j=e.visibleRangeForPosition(new Y(t,G+1));j&&(o?(z=Math.max(z,j.left),J===9?x+=this._renderArrow(f,_,j.left):x+=`<circle cx="${(j.left+_/2).toFixed(2)}" cy="${(f/2).toFixed(2)}" r="${(_/7).toFixed(2)}" />`):J===9?x+=`<div class="mwh" style="left:${j.left}px;height:${f}px;">${S?"":""}</div>`:x+=`<div class="mwh" style="left:${j.left}px;height:${f}px;">${String.fromCharCode(y)}</div>`)}return o?(z=Math.round(z+_),`<svg style="bottom:0;position:absolute;width:${z}px;height:${f}px" viewBox="0 0 ${z} ${f}" xmlns="http://www.w3.org/2000/svg" fill="${r}">`+x+"</svg>"):x}_renderArrow(e,t,i){const s=t/7,r=t,o=e/2,a=i,l={x:0,y:s/2},c={x:100/125*r,y:l.y},d={x:c.x-.2*c.x,y:c.y+.2*c.x},u={x:d.x+.1*c.x,y:d.y+.1*c.x},h={x:u.x+.35*c.x,y:u.y-.35*c.x},f={x:h.x,y:-h.y},g={x:u.x,y:-u.y},p={x:d.x,y:-d.y},_={x:c.x,y:-c.y},w={x:l.x,y:-l.y};return`<path d="M ${[l,c,d,u,h,f,g,p,_,w].map(S=>`${(a+S.x).toFixed(2)} ${(o+S.y).toFixed(2)}`).join(" L ")}" />`}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}class hde{constructor(e){const t=e.options,i=t.get(50),s=t.get(38);s==="off"?(this.renderWhitespace="none",this.renderWithSVG=!1):s==="svg"?(this.renderWhitespace=t.get(100),this.renderWithSVG=!0):(this.renderWhitespace=t.get(100),this.renderWithSVG=!1),this.spaceWidth=i.spaceWidth,this.middotWidth=i.middotWidth,this.wsmiddotWidth=i.wsmiddotWidth,this.canUseHalfwidthRightwardsArrow=i.canUseHalfwidthRightwardsArrow,this.lineHeight=t.get(67),this.stopRenderingLineAfter=t.get(118)}equals(e){return this.renderWhitespace===e.renderWhitespace&&this.renderWithSVG===e.renderWithSVG&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter}}class pdt{constructor(e,t,i,s){this.selections=e,this.startLineNumber=t.startLineNumber|0,this.endLineNumber=t.endLineNumber|0,this.relativeVerticalOffset=t.relativeVerticalOffset,this.bigNumbersDelta=t.bigNumbersDelta|0,this.lineHeight=t.lineHeight|0,this.whitespaceViewportData=i,this._model=s,this.visibleRange=new M(t.startLineNumber,this._model.getLineMinColumn(t.startLineNumber),t.endLineNumber,this._model.getLineMaxColumn(t.endLineNumber))}getViewLineRenderingData(e){return this._model.getViewportViewLineRenderingData(this.visibleRange,e)}getDecorationsInViewport(){return this._model.getDecorationsInViewport(this.visibleRange)}}class mdt{get type(){return this._theme.type}get value(){return this._theme}constructor(e){this._theme=e}update(e){this._theme=e}getColor(e){return this._theme.getColor(e)}}class _dt{constructor(e,t,i){this.configuration=e,this.theme=new mdt(t),this.viewModel=i,this.viewLayout=i.viewLayout}addEventHandler(e){this.viewModel.addViewEventHandler(e)}removeEventHandler(e){this.viewModel.removeViewEventHandler(e)}}var vdt=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},bdt=function(n,e){return function(t,i){e(t,i,n)}};let Ij=class extends nT{constructor(e,t,i,s,r,o,a){super(),this._instantiationService=a,this._shouldRecomputeGlyphMarginLanes=!1,this._selections=[new $e(1,1,1,1)],this._renderAnimationFrame=null;const l=new Ect(t,s,r,e);this._context=new _dt(t,i,s),this._context.addEventHandler(this),this._viewParts=[],this._textAreaHandler=this._instantiationService.createInstance(wj,this._context,l,this._createTextAreaHandlerHelper()),this._viewParts.push(this._textAreaHandler),this._linesContent=ui(document.createElement("div")),this._linesContent.setClassName("lines-content monaco-editor-background"),this._linesContent.setPosition("absolute"),this.domNode=ui(document.createElement("div")),this.domNode.setClassName(this._getEditorClassName()),this.domNode.setAttribute("role","code"),this._overflowGuardContainer=ui(document.createElement("div")),$u.write(this._overflowGuardContainer,3),this._overflowGuardContainer.setClassName("overflow-guard"),this._scrollbar=new Fct(this._context,this._linesContent,this.domNode,this._overflowGuardContainer),this._viewParts.push(this._scrollbar),this._viewLines=new Lj(this._context,this._linesContent),this._viewZones=new hdt(this._context),this._viewParts.push(this._viewZones);const c=new ndt(this._context);this._viewParts.push(c);const d=new adt(this._context);this._viewParts.push(d);const u=new Dct(this._context);this._viewParts.push(u),u.addDynamicOverlay(new Mct(this._context)),u.addDynamicOverlay(new kj(this._context)),u.addDynamicOverlay(new $ct(this._context)),u.addDynamicOverlay(new Oct(this._context)),u.addDynamicOverlay(new gdt(this._context));const h=new Nct(this._context);this._viewParts.push(h),h.addDynamicOverlay(new Pct(this._context)),h.addDynamicOverlay(new Yct(this._context)),h.addDynamicOverlay(new Gct(this._context)),h.addDynamicOverlay(new NO(this._context)),this._glyphMarginWidgets=new Hct(this._context),this._viewParts.push(this._glyphMarginWidgets);const f=new TO(this._context);f.getDomNode().appendChild(this._viewZones.marginDomNode),f.getDomNode().appendChild(h.getDomNode()),f.getDomNode().appendChild(this._glyphMarginWidgets.domNode),this._viewParts.push(f),this._contentWidgets=new Rct(this._context,this.domNode),this._viewParts.push(this._contentWidgets),this._viewCursors=new Ej(this._context),this._viewParts.push(this._viewCursors),this._overlayWidgets=new tdt(this._context,this.domNode),this._viewParts.push(this._overlayWidgets);const g=new odt(this._context);this._viewParts.push(g);const p=new Tct(this._context);this._viewParts.push(p);const _=new edt(this._context);if(this._viewParts.push(_),c){const w=this._scrollbar.getOverviewRulerLayoutInfo();w.parent.insertBefore(c.getDomNode(),w.insertBefore)}this._linesContent.appendChild(u.getDomNode()),this._linesContent.appendChild(g.domNode),this._linesContent.appendChild(this._viewZones.domNode),this._linesContent.appendChild(this._viewLines.getDomNode()),this._linesContent.appendChild(this._contentWidgets.domNode),this._linesContent.appendChild(this._viewCursors.getDomNode()),this._overflowGuardContainer.appendChild(f.getDomNode()),this._overflowGuardContainer.appendChild(this._scrollbar.getDomNode()),this._overflowGuardContainer.appendChild(d.getDomNode()),this._overflowGuardContainer.appendChild(this._textAreaHandler.textArea),this._overflowGuardContainer.appendChild(this._textAreaHandler.textAreaCover),this._overflowGuardContainer.appendChild(this._overlayWidgets.getDomNode()),this._overflowGuardContainer.appendChild(_.getDomNode()),this._overflowGuardContainer.appendChild(p.domNode),this.domNode.appendChild(this._overflowGuardContainer),o?(o.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode.domNode),o.appendChild(this._overlayWidgets.overflowingOverlayWidgetsDomNode.domNode)):(this.domNode.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode),this.domNode.appendChild(this._overlayWidgets.overflowingOverlayWidgetsDomNode)),this._applyLayout(),this._pointerHandler=this._register(new Ylt(this._context,l,this._createPointerHandlerHelper()))}_computeGlyphMarginLanes(){const e=this._context.viewModel.model,t=this._context.viewModel.glyphLanes;let i=[],s=0;i=i.concat(e.getAllMarginDecorations().map(r=>{var a,l;const o=((a=r.options.glyphMargin)==null?void 0:a.position)??Td.Center;return s=Math.max(s,r.range.endLineNumber),{range:r.range,lane:o,persist:(l=r.options.glyphMargin)==null?void 0:l.persistLane}})),i=i.concat(this._glyphMarginWidgets.getWidgets().map(r=>{const o=e.validateRange(r.preference.range);return s=Math.max(s,o.endLineNumber),{range:o,lane:r.preference.lane}})),i.sort((r,o)=>M.compareRangesUsingStarts(r.range,o.range)),t.reset(s);for(const r of i)t.push(r.lane,r.range,r.persist);return t}_createPointerHandlerHelper(){return{viewDomNode:this.domNode.domNode,linesContentDomNode:this._linesContent.domNode,viewLinesDomNode:this._viewLines.getDomNode().domNode,focusTextArea:()=>{this.focus()},dispatchTextAreaEvent:e=>{this._textAreaHandler.textArea.domNode.dispatchEvent(e)},getLastRenderData:()=>{const e=this._viewCursors.getLastRenderData()||[],t=this._textAreaHandler.getLastRenderData();return new Flt(e,t)},renderNow:()=>{this.render(!0,!1)},shouldSuppressMouseDownOnViewZone:e=>this._viewZones.shouldSuppressMouseDownOnViewZone(e),shouldSuppressMouseDownOnWidget:e=>this._contentWidgets.shouldSuppressMouseDownOnWidget(e),getPositionFromDOMInfo:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getPositionFromDOMInfo(e,t)),visibleRangeForPosition:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(new Y(e,t))),getLineWidth:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getLineWidth(e))}}_createTextAreaHandlerHelper(){return{visibleRangeForPosition:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(e))}}_applyLayout(){const t=this._context.configuration.options.get(146);this.domNode.setWidth(t.width),this.domNode.setHeight(t.height),this._overflowGuardContainer.setWidth(t.width),this._overflowGuardContainer.setHeight(t.height),this._linesContent.setWidth(16777216),this._linesContent.setHeight(16777216)}_getEditorClassName(){const e=this._textAreaHandler.isFocused()?" focused":"";return this._context.configuration.options.get(143)+" "+oU(this._context.theme.type)+e}handleEvents(e){super.handleEvents(e),this._scheduleRender()}onConfigurationChanged(e){return this.domNode.setClassName(this._getEditorClassName()),this._applyLayout(),!1}onCursorStateChanged(e){return this._selections=e.selections,!1}onDecorationsChanged(e){return e.affectsGlyphMargin&&(this._shouldRecomputeGlyphMarginLanes=!0),!1}onFocusChanged(e){return this.domNode.setClassName(this._getEditorClassName()),!1}onThemeChanged(e){return this._context.theme.update(e.theme),this.domNode.setClassName(this._getEditorClassName()),!1}dispose(){this._renderAnimationFrame!==null&&(this._renderAnimationFrame.dispose(),this._renderAnimationFrame=null),this._contentWidgets.overflowingContentWidgetsDomNode.domNode.remove(),this._context.removeEventHandler(this),this._viewLines.dispose();for(const e of this._viewParts)e.dispose();super.dispose()}_scheduleRender(){var e;if(this._store.isDisposed)throw new li;if(this._renderAnimationFrame===null){const t=this._createCoordinatedRendering();this._renderAnimationFrame=Dj.INSTANCE.scheduleCoordinatedRendering({window:nt((e=this.domNode)==null?void 0:e.domNode),prepareRenderText:()=>{if(this._store.isDisposed)throw new li;try{return t.prepareRenderText()}finally{this._renderAnimationFrame=null}},renderText:()=>{if(this._store.isDisposed)throw new li;return t.renderText()},prepareRender:(i,s)=>{if(this._store.isDisposed)throw new li;return t.prepareRender(i,s)},render:(i,s)=>{if(this._store.isDisposed)throw new li;return t.render(i,s)}})}}_flushAccumulatedAndRenderNow(){const e=this._createCoordinatedRendering();Dm(()=>e.prepareRenderText());const t=Dm(()=>e.renderText());if(t){const[i,s]=t;Dm(()=>e.prepareRender(i,s)),Dm(()=>e.render(i,s))}}_getViewPartsToRender(){const e=[];let t=0;for(const i of this._viewParts)i.shouldRender()&&(e[t++]=i);return e}_createCoordinatedRendering(){return{prepareRenderText:()=>{if(this._shouldRecomputeGlyphMarginLanes){this._shouldRecomputeGlyphMarginLanes=!1;const e=this._computeGlyphMarginLanes();this._context.configuration.setGlyphMarginDecorationLaneCount(e.requiredLanes)}Im.onRenderStart()},renderText:()=>{if(!this.domNode.domNode.isConnected)return null;let e=this._getViewPartsToRender();if(!this._viewLines.shouldRender()&&e.length===0)return null;const t=this._context.viewLayout.getLinesViewportData();this._context.viewModel.setViewport(t.startLineNumber,t.endLineNumber,t.centeredLineNumber);const i=new pdt(this._selections,t,this._context.viewLayout.getWhitespaceViewportData(),this._context.viewModel);return this._contentWidgets.shouldRender()&&this._contentWidgets.onBeforeRender(i),this._viewLines.shouldRender()&&(this._viewLines.renderText(i),this._viewLines.onDidRender(),e=this._getViewPartsToRender()),[e,new Nlt(this._context.viewLayout,i,this._viewLines)]},prepareRender:(e,t)=>{for(const i of e)i.prepareRender(t)},render:(e,t)=>{for(const i of e)i.render(t),i.onDidRender()}}}delegateVerticalScrollbarPointerDown(e){this._scrollbar.delegateVerticalScrollbarPointerDown(e)}delegateScrollFromMouseWheelEvent(e){this._scrollbar.delegateScrollFromMouseWheelEvent(e)}restoreState(e){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:e.scrollTop,scrollLeft:e.scrollLeft},1),this._context.viewModel.visibleLinesStabilized()}getOffsetForColumn(e,t){const i=this._context.viewModel.model.validatePosition({lineNumber:e,column:t}),s=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(i);this._flushAccumulatedAndRenderNow();const r=this._viewLines.visibleRangeForPosition(new Y(s.lineNumber,s.column));return r?r.left:-1}getTargetAtClientPoint(e,t){const i=this._pointerHandler.getTargetAtClientPoint(e,t);return i?zB.convertViewToModelMouseTarget(i,this._context.viewModel.coordinatesConverter):null}createOverviewRuler(e){return new rdt(this._context,e)}change(e){this._viewZones.changeViewZones(e),this._scheduleRender()}render(e,t){if(t){this._viewLines.forceShouldRender();for(const i of this._viewParts)i.forceShouldRender()}e?this._flushAccumulatedAndRenderNow():this._scheduleRender()}writeScreenReaderContent(e){this._textAreaHandler.writeScreenReaderContent(e)}focus(){this._textAreaHandler.focusTextArea()}isFocused(){return this._textAreaHandler.isFocused()}setAriaOptions(e){this._textAreaHandler.setAriaOptions(e)}addContentWidget(e){this._contentWidgets.addWidget(e.widget),this.layoutContentWidget(e),this._scheduleRender()}layoutContentWidget(e){var t,i,s,r;this._contentWidgets.setWidgetPosition(e.widget,((t=e.position)==null?void 0:t.position)??null,((i=e.position)==null?void 0:i.secondaryPosition)??null,((s=e.position)==null?void 0:s.preference)??null,((r=e.position)==null?void 0:r.positionAffinity)??null),this._scheduleRender()}removeContentWidget(e){this._contentWidgets.removeWidget(e.widget),this._scheduleRender()}addOverlayWidget(e){this._overlayWidgets.addWidget(e.widget),this.layoutOverlayWidget(e),this._scheduleRender()}layoutOverlayWidget(e){this._overlayWidgets.setWidgetPosition(e.widget,e.position)&&this._scheduleRender()}removeOverlayWidget(e){this._overlayWidgets.removeWidget(e.widget),this._scheduleRender()}addGlyphMarginWidget(e){this._glyphMarginWidgets.addWidget(e.widget),this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender()}layoutGlyphMarginWidget(e){const t=e.position;this._glyphMarginWidgets.setWidgetPosition(e.widget,t)&&(this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender())}removeGlyphMarginWidget(e){this._glyphMarginWidgets.removeWidget(e.widget),this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender()}};Ij=vdt([bdt(6,Ze)],Ij);function Dm(n){try{return n()}catch(e){return pt(e),null}}const $4=class $4{constructor(){this._coordinatedRenderings=[],this._animationFrameRunners=new Map}scheduleCoordinatedRendering(e){return this._coordinatedRenderings.push(e),this._scheduleRender(e.window),{dispose:()=>{const t=this._coordinatedRenderings.indexOf(e);if(t!==-1&&(this._coordinatedRenderings.splice(t,1),this._coordinatedRenderings.length===0)){for(const[i,s]of this._animationFrameRunners)s.dispose();this._animationFrameRunners.clear()}}}}_scheduleRender(e){if(!this._animationFrameRunners.has(e)){const t=()=>{this._animationFrameRunners.delete(e),this._onRenderScheduled()};this._animationFrameRunners.set(e,gP(e,t,100))}}_onRenderScheduled(){const e=this._coordinatedRenderings.slice(0);this._coordinatedRenderings=[];for(const i of e)Dm(()=>i.prepareRenderText());const t=[];for(let i=0,s=e.length;i<s;i++){const r=e[i];t[i]=Dm(()=>r.renderText())}for(let i=0,s=e.length;i<s;i++){const r=e[i],o=t[i];if(!o)continue;const[a,l]=o;Dm(()=>r.prepareRender(a,l))}for(let i=0,s=e.length;i<s;i++){const r=e[i],o=t[i];if(!o)continue;const[a,l]=o;Dm(()=>r.render(a,l))}}};$4.INSTANCE=new $4;let Dj=$4;class mE{constructor(e,t,i,s,r){this.injectionOffsets=e,this.injectionOptions=t,this.breakOffsets=i,this.breakOffsetsVisibleColumn=s,this.wrappedTextIndentLength=r}getOutputLineCount(){return this.breakOffsets.length}getMinOutputOffset(e){return e>0?this.wrappedTextIndentLength:0}getLineLength(e){const t=e>0?this.breakOffsets[e-1]:0;let s=this.breakOffsets[e]-t;return e>0&&(s+=this.wrappedTextIndentLength),s}getMaxOutputOffset(e){return this.getLineLength(e)}translateToInputOffset(e,t){e>0&&(t=Math.max(0,t-this.wrappedTextIndentLength));let s=e===0?t:this.breakOffsets[e-1]+t;if(this.injectionOffsets!==null)for(let r=0;r<this.injectionOffsets.length&&s>this.injectionOffsets[r];r++)s<this.injectionOffsets[r]+this.injectionOptions[r].content.length?s=this.injectionOffsets[r]:s-=this.injectionOptions[r].content.length;return s}translateToOutputPosition(e,t=2){let i=e;if(this.injectionOffsets!==null)for(let s=0;s<this.injectionOffsets.length&&!(e<this.injectionOffsets[s]||t!==1&&e===this.injectionOffsets[s]);s++)i+=this.injectionOptions[s].content.length;return this.offsetInInputWithInjectionsToOutputPosition(i,t)}offsetInInputWithInjectionsToOutputPosition(e,t=2){let i=0,s=this.breakOffsets.length-1,r=0,o=0;for(;i<=s;){r=i+(s-i)/2|0;const l=this.breakOffsets[r];if(o=r>0?this.breakOffsets[r-1]:0,t===0)if(e<=o)s=r-1;else if(e>l)i=r+1;else break;else if(e<o)s=r-1;else if(e>=l)i=r+1;else break}let a=e-o;return r>0&&(a+=this.wrappedTextIndentLength),new pA(r,a)}normalizeOutputPosition(e,t,i){if(this.injectionOffsets!==null){const s=this.outputPositionToOffsetInInputWithInjections(e,t),r=this.normalizeOffsetInInputWithInjectionsAroundInjections(s,i);if(r!==s)return this.offsetInInputWithInjectionsToOutputPosition(r,i)}if(i===0){if(e>0&&t===this.getMinOutputOffset(e))return new pA(e-1,this.getMaxOutputOffset(e-1))}else if(i===1){const s=this.getOutputLineCount()-1;if(e<s&&t===this.getMaxOutputOffset(e))return new pA(e+1,this.getMinOutputOffset(e+1))}return new pA(e,t)}outputPositionToOffsetInInputWithInjections(e,t){return e>0&&(t=Math.max(0,t-this.wrappedTextIndentLength)),(e>0?this.breakOffsets[e-1]:0)+t}normalizeOffsetInInputWithInjectionsAroundInjections(e,t){const i=this.getInjectedTextAtOffset(e);if(!i)return e;if(t===2){if(e===i.offsetInInputWithInjections+i.length&&fde(this.injectionOptions[i.injectedTextIndex].cursorStops))return i.offsetInInputWithInjections+i.length;{let s=i.offsetInInputWithInjections;if(gde(this.injectionOptions[i.injectedTextIndex].cursorStops))return s;let r=i.injectedTextIndex-1;for(;r>=0&&this.injectionOffsets[r]===this.injectionOffsets[i.injectedTextIndex]&&!(fde(this.injectionOptions[r].cursorStops)||(s-=this.injectionOptions[r].content.length,gde(this.injectionOptions[r].cursorStops)));)r--;return s}}else if(t===1||t===4){let s=i.offsetInInputWithInjections+i.length,r=i.injectedTextIndex;for(;r+1<this.injectionOffsets.length&&this.injectionOffsets[r+1]===this.injectionOffsets[r];)s+=this.injectionOptions[r+1].content.length,r++;return s}else if(t===0||t===3){let s=i.offsetInInputWithInjections,r=i.injectedTextIndex;for(;r-1>=0&&this.injectionOffsets[r-1]===this.injectionOffsets[r];)s-=this.injectionOptions[r-1].content.length,r--;return s}X3()}getInjectedText(e,t){const i=this.outputPositionToOffsetInInputWithInjections(e,t),s=this.getInjectedTextAtOffset(i);return s?{options:this.injectionOptions[s.injectedTextIndex]}:null}getInjectedTextAtOffset(e){const t=this.injectionOffsets,i=this.injectionOptions;if(t!==null){let s=0;for(let r=0;r<t.length;r++){const o=i[r].content.length,a=t[r]+s,l=t[r]+s+o;if(a>e)break;if(e<=l)return{injectedTextIndex:r,offsetInInputWithInjections:a,length:o};s+=o}}}}function fde(n){return n==null?!0:n===wd.Right||n===wd.Both}function gde(n){return n==null?!0:n===wd.Left||n===wd.Both}class pA{constructor(e,t){this.outputLineIndex=e,this.outputOffset=t}toString(){return`${this.outputLineIndex}:${this.outputOffset}`}toPosition(e){return new Y(e+this.outputLineIndex,this.outputOffset+1)}}const Y8=up("domLineBreaksComputer",{createHTML:n=>n});class rJ{static create(e){return new rJ(new WeakRef(e))}constructor(e){this.targetWindow=e}createLineBreaksComputer(e,t,i,s,r){const o=[],a=[];return{addRequest:(l,c,d)=>{o.push(l),a.push(c)},finalize:()=>wdt(wm(this.targetWindow.deref()),o,e,t,i,s,r,a)}}}function wdt(n,e,t,i,s,r,o,a){function l(I){const H=a[I];if(H){const z=Vu.applyInjectedText(e[I],H),G=H.map(j=>j.options),J=H.map(j=>j.column-1);return new mE(J,G,[z.length],[],0)}else return null}if(s===-1){const I=[];for(let H=0,z=e.length;H<z;H++)I[H]=l(H);return I}const c=Math.round(s*t.typicalHalfwidthCharacterWidth),u=Math.round(i*(r===3?2:r===2?1:0)),h=Math.ceil(t.spaceWidth*u),f=document.createElement("div");rr(f,t);const g=new Tx(1e4),p=[],_=[],w=[],b=[],y=[];for(let I=0;I<e.length;I++){const H=Vu.applyInjectedText(e[I],a[I]);let z=0,G=0,J=c;if(r!==0)if(z=lo(H),z===-1)z=0;else{for(let ve=0;ve<z;ve++){const te=H.charCodeAt(ve)===9?i-G%i:1;G+=te}const oe=Math.ceil(t.spaceWidth*G);oe+t.typicalFullwidthCharacterWidth>c?(z=0,G=0):J=c-oe}const j=H.substr(z),ne=Cdt(j,G,i,J,g,h);p[I]=z,_[I]=G,w[I]=j,b[I]=ne[0],y[I]=ne[1]}const S=g.build(),x=(Y8==null?void 0:Y8.createHTML(S))??S;f.innerHTML=x,f.style.position="absolute",f.style.top="10000",o==="keepAll"?(f.style.wordBreak="keep-all",f.style.overflowWrap="anywhere"):(f.style.wordBreak="inherit",f.style.overflowWrap="break-word"),n.document.body.appendChild(f);const E=document.createRange(),D=Array.prototype.slice.call(f.children,0),N=[];for(let I=0;I<e.length;I++){const H=D[I],z=ydt(E,H,w[I],b[I]);if(z===null){N[I]=l(I);continue}const G=p[I],J=_[I]+u,j=y[I],ne=[];for(let ce=0,Ie=z.length;ce<Ie;ce++)ne[ce]=j[z[ce]];if(G!==0)for(let ce=0,Ie=z.length;ce<Ie;ce++)z[ce]+=G;let oe,ve;const te=a[I];te?(oe=te.map(ce=>ce.options),ve=te.map(ce=>ce.column-1)):(oe=null,ve=null),N[I]=new mE(ve,oe,z,ne,J)}return f.remove(),N}function Cdt(n,e,t,i,s,r){if(r!==0){const h=String(r);s.appendString('<div style="text-indent: -'),s.appendString(h),s.appendString("px; padding-left: "),s.appendString(h),s.appendString("px; box-sizing: border-box; width:")}else s.appendString('<div style="width:');s.appendString(String(i)),s.appendString('px;">');const o=n.length;let a=e,l=0;const c=[],d=[];let u=0<o?n.charCodeAt(0):0;s.appendString("<span>");for(let h=0;h<o;h++){h!==0&&h%16384===0&&s.appendString("</span><span>"),c[h]=l,d[h]=a;const f=u;u=h+1<o?n.charCodeAt(h+1):0;let g=1,p=1;switch(f){case 9:g=t-a%t,p=g;for(let _=1;_<=g;_++)_<g?s.appendCharCode(160):s.appendASCIICharCode(32);break;case 32:u===32?s.appendCharCode(160):s.appendASCIICharCode(32);break;case 60:s.appendString("&lt;");break;case 62:s.appendString("&gt;");break;case 38:s.appendString("&amp;");break;case 0:s.appendString("&#00;");break;case 65279:case 8232:case 8233:case 133:s.appendCharCode(65533);break;default:N_(f)&&p++,f<32?s.appendCharCode(9216+f):s.appendCharCode(f)}l+=g,a+=p}return s.appendString("</span>"),c[n.length]=l,d[n.length]=a,s.appendString("</div>"),[c,d]}function ydt(n,e,t,i){if(t.length<=1)return null;const s=Array.prototype.slice.call(e.children,0),r=[];try{Nj(n,s,i,0,null,t.length-1,null,r)}catch(o){return console.log(o),null}return r.length===0?null:(r.push(t.length),r)}function Nj(n,e,t,i,s,r,o,a){if(i===r||(s=s||Z8(n,e,t[i],t[i+1]),o=o||Z8(n,e,t[r],t[r+1]),Math.abs(s[0].top-o[0].top)<=.1))return;if(i+1===r){a.push(r);return}const l=i+(r-i)/2|0,c=Z8(n,e,t[l],t[l+1]);Nj(n,e,t,i,s,l,c,a),Nj(n,e,t,l,c,r,o,a)}function Z8(n,e,t,i){return n.setStart(e[t/16384|0].firstChild,t%16384),n.setEnd(e[i/16384|0].firstChild,i%16384),n.getClientRects()}class Sdt extends ee{constructor(){super(),this._editor=null,this._instantiationService=null,this._instances=this._register(new ZZ),this._pending=new Map,this._finishedInstantiation=[],this._finishedInstantiation[0]=!1,this._finishedInstantiation[1]=!1,this._finishedInstantiation[2]=!1,this._finishedInstantiation[3]=!1}initialize(e,t,i){this._editor=e,this._instantiationService=i;for(const s of t){if(this._pending.has(s.id)){pt(new Error(`Cannot have two contributions with the same id ${s.id}`));continue}this._pending.set(s.id,s)}this._instantiateSome(0),this._register(lk(nt(this._editor.getDomNode()),()=>{this._instantiateSome(1)})),this._register(lk(nt(this._editor.getDomNode()),()=>{this._instantiateSome(2)})),this._register(lk(nt(this._editor.getDomNode()),()=>{this._instantiateSome(3)},5e3))}saveViewState(){const e={};for(const[t,i]of this._instances)typeof i.saveViewState=="function"&&(e[t]=i.saveViewState());return e}restoreViewState(e){for(const[t,i]of this._instances)typeof i.restoreViewState=="function"&&i.restoreViewState(e[t])}get(e){return this._instantiateById(e),this._instances.get(e)||null}onBeforeInteractionEvent(){this._instantiateSome(2)}onAfterModelAttached(){var e;return lk(nt((e=this._editor)==null?void 0:e.getDomNode()),()=>{this._instantiateSome(1)},50)}_instantiateSome(e){if(this._finishedInstantiation[e])return;this._finishedInstantiation[e]=!0;const t=this._findPendingContributionsByInstantiation(e);for(const i of t)this._instantiateById(i.id)}_findPendingContributionsByInstantiation(e){const t=[];for(const[,i]of this._pending)i.instantiation===e&&t.push(i);return t}_instantiateById(e){const t=this._pending.get(e);if(t){if(this._pending.delete(e),!this._instantiationService||!this._editor)throw new Error("Cannot instantiate contributions before being initialized!");try{const i=this._instantiationService.createInstance(t.ctor,this._editor);this._instances.set(t.id,i),typeof i.restoreViewState=="function"&&t.instantiation!==0&&console.warn(`Editor contribution '${t.id}' should be eager instantiated because it uses saveViewState / restoreViewState.`)}catch(i){pt(i)}}}}class $Se{constructor(e,t,i,s,r,o,a){this.id=e,this.label=t,this.alias=i,this.metadata=s,this._precondition=r,this._run=o,this._contextKeyService=a}isSupported(){return this._contextKeyService.contextMatchesRules(this._precondition)}run(e){return this.isSupported()?this._run(e):Promise.resolve(void 0)}}class oJ{static create(e){return new oJ(e.get(135),e.get(134))}constructor(e,t){this.classifier=new xdt(e,t)}createLineBreaksComputer(e,t,i,s,r){const o=[],a=[],l=[];return{addRequest:(c,d,u)=>{o.push(c),a.push(d),l.push(u)},finalize:()=>{const c=e.typicalFullwidthCharacterWidth/e.typicalHalfwidthCharacterWidth,d=[];for(let u=0,h=o.length;u<h;u++){const f=a[u],g=l[u];g&&!g.injectionOptions&&!f?d[u]=Ldt(this.classifier,g,o[u],t,i,c,s,r):d[u]=kdt(this.classifier,o[u],f,t,i,c,s,r)}return Tj.length=0,Rj.length=0,d}}}}class xdt extends Rx{constructor(e,t){super(0);for(let i=0;i<e.length;i++)this.set(e.charCodeAt(i),1);for(let i=0;i<t.length;i++)this.set(t.charCodeAt(i),2)}get(e){return e>=0&&e<256?this._asciiMap[e]:e>=12352&&e<=12543||e>=13312&&e<=19903||e>=19968&&e<=40959?3:this._map.get(e)||this._defaultValue}}let Tj=[],Rj=[];function Ldt(n,e,t,i,s,r,o,a){if(s===-1)return null;const l=t.length;if(l<=1)return null;const c=a==="keepAll",d=e.breakOffsets,u=e.breakOffsetsVisibleColumn,h=jSe(t,i,s,r,o),f=s-h,g=Tj,p=Rj;let _=0,w=0,b=0,y=s;const S=d.length;let x=0;if(x>=0){let E=Math.abs(u[x]-y);for(;x+1<S;){const D=Math.abs(u[x+1]-y);if(D>=E)break;E=D,x++}}for(;x<S;){let E=x<0?0:d[x],D=x<0?0:u[x];w>E&&(E=w,D=b);let N=0,I=0,H=0,z=0;if(D<=y){let J=D,j=E===0?0:t.charCodeAt(E-1),ne=E===0?0:n.get(j),oe=!0;for(let ve=E;ve<l;ve++){const te=ve,ce=t.charCodeAt(ve);let Ie,Ce;if(ks(ce)?(ve++,Ie=0,Ce=2):(Ie=n.get(ce),Ce=_E(ce,J,i,r)),te>w&&Aj(j,ne,ce,Ie,c)&&(N=te,I=J),J+=Ce,J>y){te>w?(H=te,z=J-Ce):(H=ve+1,z=J),J-I>f&&(N=0),oe=!1;break}j=ce,ne=Ie}if(oe){_>0&&(g[_]=d[d.length-1],p[_]=u[d.length-1],_++);break}}if(N===0){let J=D,j=t.charCodeAt(E),ne=n.get(j),oe=!1;for(let ve=E-1;ve>=w;ve--){const te=ve+1,ce=t.charCodeAt(ve);if(ce===9){oe=!0;break}let Ie,Ce;if(l0(ce)?(ve--,Ie=0,Ce=2):(Ie=n.get(ce),Ce=N_(ce)?r:1),J<=y){if(H===0&&(H=te,z=J),J<=y-f)break;if(Aj(ce,Ie,j,ne,c)){N=te,I=J;break}}J-=Ce,j=ce,ne=Ie}if(N!==0){const ve=f-(z-I);if(ve<=i){const te=t.charCodeAt(H);let ce;ks(te)?ce=2:ce=_E(te,z,i,r),ve-ce<0&&(N=0)}}if(oe){x--;continue}}if(N===0&&(N=H,I=z),N<=w){const J=t.charCodeAt(w);ks(J)?(N=w+2,I=b+2):(N=w+1,I=b+_E(J,b,i,r))}for(w=N,g[_]=N,b=I,p[_]=I,_++,y=I+f;x<0||x<S&&u[x]<I;)x++;let G=Math.abs(u[x]-y);for(;x+1<S;){const J=Math.abs(u[x+1]-y);if(J>=G)break;G=J,x++}}return _===0?null:(g.length=_,p.length=_,Tj=e.breakOffsets,Rj=e.breakOffsetsVisibleColumn,e.breakOffsets=g,e.breakOffsetsVisibleColumn=p,e.wrappedTextIndentLength=h,e)}function kdt(n,e,t,i,s,r,o,a){const l=Vu.applyInjectedText(e,t);let c,d;if(t&&t.length>0?(c=t.map(I=>I.options),d=t.map(I=>I.column-1)):(c=null,d=null),s===-1)return c?new mE(d,c,[l.length],[],0):null;const u=l.length;if(u<=1)return c?new mE(d,c,[l.length],[],0):null;const h=a==="keepAll",f=jSe(l,i,s,r,o),g=s-f,p=[],_=[];let w=0,b=0,y=0,S=s,x=l.charCodeAt(0),E=n.get(x),D=_E(x,0,i,r),N=1;ks(x)&&(D+=1,x=l.charCodeAt(1),E=n.get(x),N++);for(let I=N;I<u;I++){const H=I,z=l.charCodeAt(I);let G,J;ks(z)?(I++,G=0,J=2):(G=n.get(z),J=_E(z,D,i,r)),Aj(x,E,z,G,h)&&(b=H,y=D),D+=J,D>S&&((b===0||D-y>g)&&(b=H,y=D-J),p[w]=b,_[w]=y,w++,S=y+g,b=0),x=z,E=G}return w===0&&(!t||t.length===0)?null:(p[w]=u,_[w]=D,new mE(d,c,p,_,f))}function _E(n,e,t,i){return n===9?t-e%t:N_(n)||n<32?i:1}function pde(n,e){return e-n%e}function Aj(n,e,t,i,s){return t!==32&&(e===2&&i!==2||e!==1&&i===1||!s&&e===3&&i!==2||!s&&i===3&&e!==1)}function jSe(n,e,t,i,s){let r=0;if(s!==0){const o=lo(n);if(o!==-1){for(let l=0;l<o;l++){const c=n.charCodeAt(l)===9?pde(r,e):1;r+=c}const a=s===3?2:s===2?1:0;for(let l=0;l<a;l++){const c=pde(r,e);r+=c}r+i>t&&(r=0)}}return r}class FO{constructor(e){this._selTrackedRange=null,this._trackSelection=!0,this._setState(e,new Qs(new M(1,1,1,1),0,0,new Y(1,1),0),new Qs(new M(1,1,1,1),0,0,new Y(1,1),0))}dispose(e){this._removeTrackedRange(e)}startTrackingSelection(e){this._trackSelection=!0,this._updateTrackedRange(e)}stopTrackingSelection(e){this._trackSelection=!1,this._removeTrackedRange(e)}_updateTrackedRange(e){this._trackSelection&&(this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,this.modelState.selection,0))}_removeTrackedRange(e){this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,null,0)}asCursorState(){return new ni(this.modelState,this.viewState)}readSelectionFromMarkers(e){const t=e.model._getTrackedRange(this._selTrackedRange);return this.modelState.selection.isEmpty()&&!t.isEmpty()?$e.fromRange(t.collapseToEnd(),this.modelState.selection.getDirection()):$e.fromRange(t,this.modelState.selection.getDirection())}ensureValidState(e){this._setState(e,this.modelState,this.viewState)}setState(e,t,i){this._setState(e,t,i)}static _validatePositionWithCache(e,t,i,s){return t.equals(i)?s:e.normalizePosition(t,2)}static _validateViewState(e,t){const i=t.position,s=t.selectionStart.getStartPosition(),r=t.selectionStart.getEndPosition(),o=e.normalizePosition(i,2),a=this._validatePositionWithCache(e,s,i,o),l=this._validatePositionWithCache(e,r,s,a);return i.equals(o)&&s.equals(a)&&r.equals(l)?t:new Qs(M.fromPositions(a,l),t.selectionStartKind,t.selectionStartLeftoverVisibleColumns+s.column-a.column,o,t.leftoverVisibleColumns+i.column-o.column)}_setState(e,t,i){if(i&&(i=FO._validateViewState(e.viewModel,i)),t){const s=e.model.validateRange(t.selectionStart),r=t.selectionStart.equalsRange(s)?t.selectionStartLeftoverVisibleColumns:0,o=e.model.validatePosition(t.position),a=t.position.equals(o)?t.leftoverVisibleColumns:0;t=new Qs(s,t.selectionStartKind,r,o,a)}else{if(!i)return;const s=e.model.validateRange(e.coordinatesConverter.convertViewRangeToModelRange(i.selectionStart)),r=e.model.validatePosition(e.coordinatesConverter.convertViewPositionToModelPosition(i.position));t=new Qs(s,i.selectionStartKind,i.selectionStartLeftoverVisibleColumns,r,i.leftoverVisibleColumns)}if(i){const s=e.coordinatesConverter.validateViewRange(i.selectionStart,t.selectionStart),r=e.coordinatesConverter.validateViewPosition(i.position,t.position);i=new Qs(s,t.selectionStartKind,t.selectionStartLeftoverVisibleColumns,r,t.leftoverVisibleColumns)}else{const s=e.coordinatesConverter.convertModelPositionToViewPosition(new Y(t.selectionStart.startLineNumber,t.selectionStart.startColumn)),r=e.coordinatesConverter.convertModelPositionToViewPosition(new Y(t.selectionStart.endLineNumber,t.selectionStart.endColumn)),o=new M(s.lineNumber,s.column,r.lineNumber,r.column),a=e.coordinatesConverter.convertModelPositionToViewPosition(t.position);i=new Qs(o,t.selectionStartKind,t.selectionStartLeftoverVisibleColumns,a,t.leftoverVisibleColumns)}this.modelState=t,this.viewState=i,this._updateTrackedRange(e)}}class mde{constructor(e){this.context=e,this.cursors=[new FO(e)],this.lastAddedCursorIndex=0}dispose(){for(const e of this.cursors)e.dispose(this.context)}startTrackingSelections(){for(const e of this.cursors)e.startTrackingSelection(this.context)}stopTrackingSelections(){for(const e of this.cursors)e.stopTrackingSelection(this.context)}updateContext(e){this.context=e}ensureValidState(){for(const e of this.cursors)e.ensureValidState(this.context)}readSelectionFromMarkers(){return this.cursors.map(e=>e.readSelectionFromMarkers(this.context))}getAll(){return this.cursors.map(e=>e.asCursorState())}getViewPositions(){return this.cursors.map(e=>e.viewState.position)}getTopMostViewPosition(){return OYe(this.cursors,No(e=>e.viewState.position,Y.compare)).viewState.position}getBottomMostViewPosition(){return PYe(this.cursors,No(e=>e.viewState.position,Y.compare)).viewState.position}getSelections(){return this.cursors.map(e=>e.modelState.selection)}getViewSelections(){return this.cursors.map(e=>e.viewState.selection)}setSelections(e){this.setStates(ni.fromModelSelections(e))}getPrimaryCursor(){return this.cursors[0].asCursorState()}setStates(e){e!==null&&(this.cursors[0].setState(this.context,e[0].modelState,e[0].viewState),this._setSecondaryStates(e.slice(1)))}_setSecondaryStates(e){const t=this.cursors.length-1,i=e.length;if(t<i){const s=i-t;for(let r=0;r<s;r++)this._addSecondaryCursor()}else if(t>i){const s=t-i;for(let r=0;r<s;r++)this._removeSecondaryCursor(this.cursors.length-2)}for(let s=0;s<i;s++)this.cursors[s+1].setState(this.context,e[s].modelState,e[s].viewState)}killSecondaryCursors(){this._setSecondaryStates([])}_addSecondaryCursor(){this.cursors.push(new FO(this.context)),this.lastAddedCursorIndex=this.cursors.length-1}getLastAddedCursorIndex(){return this.cursors.length===1||this.lastAddedCursorIndex===0?0:this.lastAddedCursorIndex}_removeSecondaryCursor(e){this.lastAddedCursorIndex>=e+1&&this.lastAddedCursorIndex--,this.cursors[e+1].dispose(this.context),this.cursors.splice(e+1,1)}normalize(){if(this.cursors.length===1)return;const e=this.cursors.slice(0),t=[];for(let i=0,s=e.length;i<s;i++)t.push({index:i,selection:e[i].modelState.selection});t.sort(No(i=>i.selection,M.compareRangesUsingStarts));for(let i=0;i<t.length-1;i++){const s=t[i],r=t[i+1],o=s.selection,a=r.selection;if(!this.context.cursorConfig.multiCursorMergeOverlapping)continue;let l;if(a.isEmpty()||o.isEmpty()?l=a.getStartPosition().isBeforeOrEqual(o.getEndPosition()):l=a.getStartPosition().isBefore(o.getEndPosition()),l){const c=s.index<r.index?i:i+1,d=s.index<r.index?i+1:i,u=t[d].index,h=t[c].index,f=t[d].selection,g=t[c].selection;if(!f.equalsSelection(g)){const p=f.plusRange(g),_=f.selectionStartLineNumber===f.startLineNumber&&f.selectionStartColumn===f.startColumn,w=g.selectionStartLineNumber===g.startLineNumber&&g.selectionStartColumn===g.startColumn;let b;u===this.lastAddedCursorIndex?(b=_,this.lastAddedCursorIndex=h):b=w;let y;b?y=new $e(p.startLineNumber,p.startColumn,p.endLineNumber,p.endColumn):y=new $e(p.endLineNumber,p.endColumn,p.startLineNumber,p.startColumn),t[c].selection=y;const S=ni.fromModelSelection(y);e[h].setState(this.context,S.modelState,S.viewState)}for(const p of t)p.index>u&&p.index--;e.splice(u,1),t.splice(d,1),this._removeSecondaryCursor(u-1),i--}}}}class _de{constructor(e,t,i,s){this._cursorContextBrand=void 0,this.model=e,this.viewModel=t,this.coordinatesConverter=i,this.cursorConfig=s}}class Edt{constructor(){this.type=0}}class Idt{constructor(){this.type=1}}class Ddt{constructor(e){this.type=2,this._source=e}hasChanged(e){return this._source.hasChanged(e)}}class Ndt{constructor(e,t,i){this.selections=e,this.modelSelections=t,this.reason=i,this.type=3}}class Nv{constructor(e){this.type=4,e?(this.affectsMinimap=e.affectsMinimap,this.affectsOverviewRuler=e.affectsOverviewRuler,this.affectsGlyphMargin=e.affectsGlyphMargin,this.affectsLineNumber=e.affectsLineNumber):(this.affectsMinimap=!0,this.affectsOverviewRuler=!0,this.affectsGlyphMargin=!0,this.affectsLineNumber=!0)}}class mA{constructor(){this.type=5}}class Tdt{constructor(e){this.type=6,this.isFocused=e}}class Rdt{constructor(){this.type=7}}class _A{constructor(){this.type=8}}class KSe{constructor(e,t){this.fromLineNumber=e,this.count=t,this.type=9}}class Mj{constructor(e,t){this.type=10,this.fromLineNumber=e,this.toLineNumber=t}}class Pj{constructor(e,t){this.type=11,this.fromLineNumber=e,this.toLineNumber=t}}class vE{constructor(e,t,i,s,r,o,a){this.source=e,this.minimalReveal=t,this.range=i,this.selections=s,this.verticalType=r,this.revealHorizontal=o,this.scrollType=a,this.type=12}}class Adt{constructor(e){this.type=13,this.scrollWidth=e.scrollWidth,this.scrollLeft=e.scrollLeft,this.scrollHeight=e.scrollHeight,this.scrollTop=e.scrollTop,this.scrollWidthChanged=e.scrollWidthChanged,this.scrollLeftChanged=e.scrollLeftChanged,this.scrollHeightChanged=e.scrollHeightChanged,this.scrollTopChanged=e.scrollTopChanged}}class Mdt{constructor(e){this.theme=e,this.type=14}}class Pdt{constructor(e){this.type=15,this.ranges=e}}class Odt{constructor(){this.type=16}}let Fdt=class{constructor(){this.type=17}};class Bdt extends ee{constructor(){super(),this._onEvent=this._register(new X),this.onEvent=this._onEvent.event,this._eventHandlers=[],this._viewEventQueue=null,this._isConsumingViewEventQueue=!1,this._collector=null,this._collectorCnt=0,this._outgoingEvents=[]}emitOutgoingEvent(e){this._addOutgoingEvent(e),this._emitOutgoingEvents()}_addOutgoingEvent(e){for(let t=0,i=this._outgoingEvents.length;t<i;t++){const s=this._outgoingEvents[t].kind===e.kind?this._outgoingEvents[t].attemptToMerge(e):null;if(s){this._outgoingEvents[t]=s;return}}this._outgoingEvents.push(e)}_emitOutgoingEvents(){for(;this._outgoingEvents.length>0;){if(this._collector||this._isConsumingViewEventQueue)return;const e=this._outgoingEvents.shift();e.isNoOp()||this._onEvent.fire(e)}}addViewEventHandler(e){for(let t=0,i=this._eventHandlers.length;t<i;t++)this._eventHandlers[t]===e&&console.warn("Detected duplicate listener in ViewEventDispatcher",e);this._eventHandlers.push(e)}removeViewEventHandler(e){for(let t=0;t<this._eventHandlers.length;t++)if(this._eventHandlers[t]===e){this._eventHandlers.splice(t,1);break}}beginEmitViewEvents(){return this._collectorCnt++,this._collectorCnt===1&&(this._collector=new Wdt),this._collector}endEmitViewEvents(){if(this._collectorCnt--,this._collectorCnt===0){const e=this._collector.outgoingEvents,t=this._collector.viewEvents;this._collector=null;for(const i of e)this._addOutgoingEvent(i);t.length>0&&this._emitMany(t)}this._emitOutgoingEvents()}emitSingleViewEvent(e){try{this.beginEmitViewEvents().emitViewEvent(e)}finally{this.endEmitViewEvents()}}_emitMany(e){this._viewEventQueue?this._viewEventQueue=this._viewEventQueue.concat(e):this._viewEventQueue=e,this._isConsumingViewEventQueue||this._consumeViewEventQueue()}_consumeViewEventQueue(){try{this._isConsumingViewEventQueue=!0,this._doConsumeQueue()}finally{this._isConsumingViewEventQueue=!1}}_doConsumeQueue(){for(;this._viewEventQueue;){const e=this._viewEventQueue;this._viewEventQueue=null;const t=this._eventHandlers.slice(0);for(const i of t)i.handleEvents(e)}}}class Wdt{constructor(){this.viewEvents=[],this.outgoingEvents=[]}emitViewEvent(e){this.viewEvents.push(e)}emitOutgoingEvent(e){this.outgoingEvents.push(e)}}class aJ{constructor(e,t,i,s){this.kind=0,this._oldContentWidth=e,this._oldContentHeight=t,this.contentWidth=i,this.contentHeight=s,this.contentWidthChanged=this._oldContentWidth!==this.contentWidth,this.contentHeightChanged=this._oldContentHeight!==this.contentHeight}isNoOp(){return!this.contentWidthChanged&&!this.contentHeightChanged}attemptToMerge(e){return e.kind!==this.kind?null:new aJ(this._oldContentWidth,this._oldContentHeight,e.contentWidth,e.contentHeight)}}class lJ{constructor(e,t){this.kind=1,this.oldHasFocus=e,this.hasFocus=t}isNoOp(){return this.oldHasFocus===this.hasFocus}attemptToMerge(e){return e.kind!==this.kind?null:new lJ(this.oldHasFocus,e.hasFocus)}}class cJ{constructor(e,t,i,s,r,o,a,l){this.kind=2,this._oldScrollWidth=e,this._oldScrollLeft=t,this._oldScrollHeight=i,this._oldScrollTop=s,this.scrollWidth=r,this.scrollLeft=o,this.scrollHeight=a,this.scrollTop=l,this.scrollWidthChanged=this._oldScrollWidth!==this.scrollWidth,this.scrollLeftChanged=this._oldScrollLeft!==this.scrollLeft,this.scrollHeightChanged=this._oldScrollHeight!==this.scrollHeight,this.scrollTopChanged=this._oldScrollTop!==this.scrollTop}isNoOp(){return!this.scrollWidthChanged&&!this.scrollLeftChanged&&!this.scrollHeightChanged&&!this.scrollTopChanged}attemptToMerge(e){return e.kind!==this.kind?null:new cJ(this._oldScrollWidth,this._oldScrollLeft,this._oldScrollHeight,this._oldScrollTop,e.scrollWidth,e.scrollLeft,e.scrollHeight,e.scrollTop)}}class Hdt{constructor(){this.kind=3}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}class Vdt{constructor(){this.kind=4}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}class BO{constructor(e,t,i,s,r,o,a){this.kind=6,this.oldSelections=e,this.selections=t,this.oldModelVersionId=i,this.modelVersionId=s,this.source=r,this.reason=o,this.reachedMaxCursorCount=a}static _selectionsAreEqual(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;const i=e.length,s=t.length;if(i!==s)return!1;for(let r=0;r<i;r++)if(!e[r].equalsSelection(t[r]))return!1;return!0}isNoOp(){return BO._selectionsAreEqual(this.oldSelections,this.selections)&&this.oldModelVersionId===this.modelVersionId}attemptToMerge(e){return e.kind!==this.kind?null:new BO(this.oldSelections,e.selections,this.oldModelVersionId,e.modelVersionId,e.source,e.reason,this.reachedMaxCursorCount||e.reachedMaxCursorCount)}}class zdt{constructor(){this.kind=5}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}class Udt{constructor(e){this.event=e,this.kind=7}isNoOp(){return!1}attemptToMerge(e){return null}}class $dt{constructor(e){this.event=e,this.kind=8}isNoOp(){return!1}attemptToMerge(e){return null}}class jdt{constructor(e){this.event=e,this.kind=9}isNoOp(){return!1}attemptToMerge(e){return null}}class Kdt{constructor(e){this.event=e,this.kind=10}isNoOp(){return!1}attemptToMerge(e){return null}}class qdt{constructor(e){this.event=e,this.kind=11}isNoOp(){return!1}attemptToMerge(e){return null}}class Gdt{constructor(e){this.event=e,this.kind=12}isNoOp(){return!1}attemptToMerge(e){return null}}class Ydt extends ee{constructor(e,t,i,s){super(),this._model=e,this._knownModelVersionId=this._model.getVersionId(),this._viewModel=t,this._coordinatesConverter=i,this.context=new _de(this._model,this._viewModel,this._coordinatesConverter,s),this._cursors=new mde(this.context),this._hasFocus=!1,this._isHandling=!1,this._compositionState=null,this._columnSelectData=null,this._autoClosedActions=[],this._prevEditOperationType=0}dispose(){this._cursors.dispose(),this._autoClosedActions=Ti(this._autoClosedActions),super.dispose()}updateConfiguration(e){this.context=new _de(this._model,this._viewModel,this._coordinatesConverter,e),this._cursors.updateContext(this.context)}onLineMappingChanged(e){this._knownModelVersionId===this._model.getVersionId()&&this.setStates(e,"viewModel",0,this.getCursorStates())}setHasFocus(e){this._hasFocus=e}_validateAutoClosedActions(){if(this._autoClosedActions.length>0){const e=this._cursors.getSelections();for(let t=0;t<this._autoClosedActions.length;t++){const i=this._autoClosedActions[t];i.isValid(e)||(i.dispose(),this._autoClosedActions.splice(t,1),t--)}}}getPrimaryCursorState(){return this._cursors.getPrimaryCursor()}getLastAddedCursorIndex(){return this._cursors.getLastAddedCursorIndex()}getCursorStates(){return this._cursors.getAll()}setStates(e,t,i,s){let r=!1;const o=this.context.cursorConfig.multiCursorLimit;s!==null&&s.length>o&&(s=s.slice(0,o),r=!0);const a=bE.from(this._model,this);return this._cursors.setStates(s),this._cursors.normalize(),this._columnSelectData=null,this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,t,i,a,r)}setCursorColumnSelectData(e){this._columnSelectData=e}revealAll(e,t,i,s,r,o){const a=this._cursors.getViewPositions();let l=null,c=null;a.length>1?c=this._cursors.getViewSelections():l=M.fromPositions(a[0],a[0]),e.emitViewEvent(new vE(t,i,l,c,s,r,o))}revealPrimary(e,t,i,s,r,o){const l=[this._cursors.getPrimaryCursor().viewState.selection];e.emitViewEvent(new vE(t,i,null,l,s,r,o))}saveState(){const e=[],t=this._cursors.getSelections();for(let i=0,s=t.length;i<s;i++){const r=t[i];e.push({inSelectionMode:!r.isEmpty(),selectionStart:{lineNumber:r.selectionStartLineNumber,column:r.selectionStartColumn},position:{lineNumber:r.positionLineNumber,column:r.positionColumn}})}return e}restoreState(e,t){const i=[];for(let s=0,r=t.length;s<r;s++){const o=t[s];let a=1,l=1;o.position&&o.position.lineNumber&&(a=o.position.lineNumber),o.position&&o.position.column&&(l=o.position.column);let c=a,d=l;o.selectionStart&&o.selectionStart.lineNumber&&(c=o.selectionStart.lineNumber),o.selectionStart&&o.selectionStart.column&&(d=o.selectionStart.column),i.push({selectionStartLineNumber:c,selectionStartColumn:d,positionLineNumber:a,positionColumn:l})}this.setStates(e,"restoreState",0,ni.fromModelSelections(i)),this.revealAll(e,"restoreState",!1,0,!0,1)}onModelContentChanged(e,t){if(t instanceof Iye){if(this._isHandling)return;this._isHandling=!0;try{this.setStates(e,"modelChange",0,this.getCursorStates())}finally{this._isHandling=!1}}else{const i=t.rawContentChangedEvent;if(this._knownModelVersionId=i.versionId,this._isHandling)return;const s=i.containsEvent(1);if(this._prevEditOperationType=0,s)this._cursors.dispose(),this._cursors=new mde(this.context),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,"model",1,null,!1);else if(this._hasFocus&&i.resultingSelection&&i.resultingSelection.length>0){const r=ni.fromModelSelections(i.resultingSelection);this.setStates(e,"modelChange",i.isUndoing?5:i.isRedoing?6:2,r)&&this.revealAll(e,"modelChange",!1,0,!0,0)}else{const r=this._cursors.readSelectionFromMarkers();this.setStates(e,"modelChange",2,ni.fromModelSelections(r))}}}getSelection(){return this._cursors.getPrimaryCursor().modelState.selection}getTopMostViewPosition(){return this._cursors.getTopMostViewPosition()}getBottomMostViewPosition(){return this._cursors.getBottomMostViewPosition()}getCursorColumnSelectData(){if(this._columnSelectData)return this._columnSelectData;const e=this._cursors.getPrimaryCursor(),t=e.viewState.selectionStart.getStartPosition(),i=e.viewState.position;return{isReal:!1,fromViewLineNumber:t.lineNumber,fromViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,t),toViewLineNumber:i.lineNumber,toViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,i)}}getSelections(){return this._cursors.getSelections()}setSelections(e,t,i,s){this.setStates(e,t,s,ni.fromModelSelections(i))}getPrevEditOperationType(){return this._prevEditOperationType}setPrevEditOperationType(e){this._prevEditOperationType=e}_pushAutoClosedAction(e,t){const i=[],s=[];for(let a=0,l=e.length;a<l;a++)i.push({range:e[a],options:{description:"auto-closed-character",inlineClassName:"auto-closed-character",stickiness:1}}),s.push({range:t[a],options:{description:"auto-closed-enclosing",stickiness:1}});const r=this._model.deltaDecorations([],i),o=this._model.deltaDecorations([],s);this._autoClosedActions.push(new vde(this._model,r,o))}_executeEditOperation(e){if(!e)return;e.shouldPushStackElementBefore&&this._model.pushStackElement();const t=Zdt.executeCommands(this._model,this._cursors.getSelections(),e.commands);if(t){this._interpretCommandResult(t);const i=[],s=[];for(let r=0;r<e.commands.length;r++){const o=e.commands[r];o instanceof tJ&&o.enclosingRange&&o.closeCharacterRange&&(i.push(o.closeCharacterRange),s.push(o.enclosingRange))}i.length>0&&this._pushAutoClosedAction(i,s),this._prevEditOperationType=e.type}e.shouldPushStackElementAfter&&this._model.pushStackElement()}_interpretCommandResult(e){(!e||e.length===0)&&(e=this._cursors.readSelectionFromMarkers()),this._columnSelectData=null,this._cursors.setSelections(e),this._cursors.normalize()}_emitStateChangedIfNecessary(e,t,i,s,r){const o=bE.from(this._model,this);if(o.equals(s))return!1;const a=this._cursors.getSelections(),l=this._cursors.getViewSelections();if(e.emitViewEvent(new Ndt(l,a,i)),!s||s.cursorState.length!==o.cursorState.length||o.cursorState.some((c,d)=>!c.modelState.equals(s.cursorState[d].modelState))){const c=s?s.cursorState.map(u=>u.modelState.selection):null,d=s?s.modelVersionId:0;e.emitOutgoingEvent(new BO(c,a,d,o.modelVersionId,t||"keyboard",i,r))}return!0}_findAutoClosingPairs(e){if(!e.length)return null;const t=[];for(let i=0,s=e.length;i<s;i++){const r=e[i];if(!r.text||r.text.indexOf(`
`)>=0)return null;const o=r.text.match(/([)\]}>'"`])([^)\]}>'"`]*)$/);if(!o)return null;const a=o[1],l=this.context.cursorConfig.autoClosingPairs.autoClosingPairsCloseSingleChar.get(a);if(!l||l.length!==1)return null;const c=l[0].open,d=r.text.length-o[2].length-1,u=r.text.lastIndexOf(c,d-1);if(u===-1)return null;t.push([u,d])}return t}executeEdits(e,t,i,s){let r=null;t==="snippet"&&(r=this._findAutoClosingPairs(i)),r&&(i[0]._isTracked=!0);const o=[],a=[],l=this._model.pushEditOperations(this.getSelections(),i,c=>{if(r)for(let u=0,h=r.length;u<h;u++){const[f,g]=r[u],p=c[u],_=p.range.startLineNumber,w=p.range.startColumn-1+f,b=p.range.startColumn-1+g;o.push(new M(_,b+1,_,b+2)),a.push(new M(_,w+1,_,b+2))}const d=s(c);return d&&(this._isHandling=!0),d});l&&(this._isHandling=!1,this.setSelections(e,t,l,0)),o.length>0&&this._pushAutoClosedAction(o,a)}_executeEdit(e,t,i,s=0){if(this.context.cursorConfig.readOnly)return;const r=bE.from(this._model,this);this._cursors.stopTrackingSelections(),this._isHandling=!0;try{this._cursors.ensureValidState(),e()}catch(o){pt(o)}this._isHandling=!1,this._cursors.startTrackingSelections(),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(t,i,s,r,!1)&&this.revealAll(t,i,!1,0,!0,0)}getAutoClosedCharacters(){return vde.getAllAutoClosedCharacters(this._autoClosedActions)}startComposition(e){this._compositionState=new wE(this._model,this.getSelections())}endComposition(e,t){const i=this._compositionState?this._compositionState.deduceOutcome(this._model,this.getSelections()):null;this._compositionState=null,this._executeEdit(()=>{t==="keyboard"&&this._executeEditOperation(cm.compositionEndWithInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,i,this.getSelections(),this.getAutoClosedCharacters()))},e,t)}type(e,t,i){this._executeEdit(()=>{if(i==="keyboard"){const s=t.length;let r=0;for(;r<s;){const o=rX(t,r),a=t.substr(r,o);this._executeEditOperation(cm.typeWithInterceptors(!!this._compositionState,this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),this.getAutoClosedCharacters(),a)),r+=o}}else this._executeEditOperation(cm.typeWithoutInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t))},e,i)}compositionType(e,t,i,s,r,o){if(t.length===0&&i===0&&s===0){if(r!==0){const a=this.getSelections().map(l=>{const c=l.getPosition();return new $e(c.lineNumber,c.column+r,c.lineNumber,c.column+r)});this.setSelections(e,o,a,0)}return}this._executeEdit(()=>{this._executeEditOperation(cm.compositionType(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t,i,s,r))},e,o)}paste(e,t,i,s,r){this._executeEdit(()=>{this._executeEditOperation(cm.paste(this.context.cursorConfig,this._model,this.getSelections(),t,i,s||[]))},e,r,4)}cut(e,t){this._executeEdit(()=>{this._executeEditOperation(C0.cut(this.context.cursorConfig,this._model,this.getSelections()))},e,t)}executeCommand(e,t,i){this._executeEdit(()=>{this._cursors.killSecondaryCursors(),this._executeEditOperation(new fa(0,[t],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,i)}executeCommands(e,t,i){this._executeEdit(()=>{this._executeEditOperation(new fa(0,t,{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,i)}}class bE{static from(e,t){return new bE(e.getVersionId(),t.getCursorStates())}constructor(e,t){this.modelVersionId=e,this.cursorState=t}equals(e){if(!e||this.modelVersionId!==e.modelVersionId||this.cursorState.length!==e.cursorState.length)return!1;for(let t=0,i=this.cursorState.length;t<i;t++)if(!this.cursorState[t].equals(e.cursorState[t]))return!1;return!0}}class vde{static getAllAutoClosedCharacters(e){let t=[];for(const i of e)t=t.concat(i.getAutoClosedCharactersRanges());return t}constructor(e,t,i){this._model=e,this._autoClosedCharactersDecorations=t,this._autoClosedEnclosingDecorations=i}dispose(){this._autoClosedCharactersDecorations=this._model.deltaDecorations(this._autoClosedCharactersDecorations,[]),this._autoClosedEnclosingDecorations=this._model.deltaDecorations(this._autoClosedEnclosingDecorations,[])}getAutoClosedCharactersRanges(){const e=[];for(let t=0;t<this._autoClosedCharactersDecorations.length;t++){const i=this._model.getDecorationRange(this._autoClosedCharactersDecorations[t]);i&&e.push(i)}return e}isValid(e){const t=[];for(let i=0;i<this._autoClosedEnclosingDecorations.length;i++){const s=this._model.getDecorationRange(this._autoClosedEnclosingDecorations[i]);if(s&&(t.push(s),s.startLineNumber!==s.endLineNumber))return!1}t.sort(M.compareRangesUsingStarts),e.sort(M.compareRangesUsingStarts);for(let i=0;i<e.length;i++)if(i>=t.length||!t[i].strictContainsRange(e[i]))return!1;return!0}}class Zdt{static executeCommands(e,t,i){const s={model:e,selectionsBefore:t,trackedRanges:[],trackedRangesDirection:[]},r=this._innerExecuteCommands(s,i);for(let o=0,a=s.trackedRanges.length;o<a;o++)s.model._setTrackedRange(s.trackedRanges[o],null,0);return r}static _innerExecuteCommands(e,t){if(this._arrayIsEmpty(t))return null;const i=this._getEditOperations(e,t);if(i.operations.length===0)return null;const s=i.operations,r=this._getLoserCursorMap(s);if(r.hasOwnProperty("0"))return console.warn("Ignoring commands"),null;const o=[];for(let c=0,d=s.length;c<d;c++)r.hasOwnProperty(s[c].identifier.major.toString())||o.push(s[c]);i.hadTrackedEditOperation&&o.length>0&&(o[0]._isTracked=!0);let a=e.model.pushEditOperations(e.selectionsBefore,o,c=>{const d=[];for(let f=0;f<e.selectionsBefore.length;f++)d[f]=[];for(const f of c)f.identifier&&d[f.identifier.major].push(f);const u=(f,g)=>f.identifier.minor-g.identifier.minor,h=[];for(let f=0;f<e.selectionsBefore.length;f++)d[f].length>0?(d[f].sort(u),h[f]=t[f].computeCursorState(e.model,{getInverseEditOperations:()=>d[f],getTrackedSelection:g=>{const p=parseInt(g,10),_=e.model._getTrackedRange(e.trackedRanges[p]);return e.trackedRangesDirection[p]===0?new $e(_.startLineNumber,_.startColumn,_.endLineNumber,_.endColumn):new $e(_.endLineNumber,_.endColumn,_.startLineNumber,_.startColumn)}})):h[f]=e.selectionsBefore[f];return h});a||(a=e.selectionsBefore);const l=[];for(const c in r)r.hasOwnProperty(c)&&l.push(parseInt(c,10));l.sort((c,d)=>d-c);for(const c of l)a.splice(c,1);return a}static _arrayIsEmpty(e){for(let t=0,i=e.length;t<i;t++)if(e[t])return!1;return!0}static _getEditOperations(e,t){let i=[],s=!1;for(let r=0,o=t.length;r<o;r++){const a=t[r];if(a){const l=this._getEditOperationsFromCommand(e,r,a);i=i.concat(l.operations),s=s||l.hadTrackedEditOperation}}return{operations:i,hadTrackedEditOperation:s}}static _getEditOperationsFromCommand(e,t,i){const s=[];let r=0;const o=(u,h,f=!1)=>{M.isEmpty(u)&&h===""||s.push({identifier:{major:t,minor:r++},range:u,text:h,forceMoveMarkers:f,isAutoWhitespaceEdit:i.insertsAutoWhitespace})};let a=!1;const d={addEditOperation:o,addTrackedEditOperation:(u,h,f)=>{a=!0,o(u,h,f)},trackSelection:(u,h)=>{const f=$e.liftSelection(u);let g;if(f.isEmpty())if(typeof h=="boolean")h?g=2:g=3;else{const w=e.model.getLineMaxColumn(f.startLineNumber);f.startColumn===w?g=2:g=3}else g=1;const p=e.trackedRanges.length,_=e.model._setTrackedRange(null,f,g);return e.trackedRanges[p]=_,e.trackedRangesDirection[p]=f.getDirection(),p.toString()}};try{i.getEditOperations(e.model,d)}catch(u){return pt(u),{operations:[],hadTrackedEditOperation:!1}}return{operations:s,hadTrackedEditOperation:a}}static _getLoserCursorMap(e){e=e.slice(0),e.sort((i,s)=>-M.compareRangesUsingEnds(i.range,s.range));const t={};for(let i=1;i<e.length;i++){const s=e[i-1],r=e[i];if(M.getStartPosition(s.range).isBefore(M.getEndPosition(r.range))){let o;s.identifier.major>r.identifier.major?o=s.identifier.major:o=r.identifier.major,t[o.toString()]=!0;for(let a=0;a<e.length;a++)e[a].identifier.major===o&&(e.splice(a,1),a<i&&i--,a--);i>0&&i--}}return t}}class Xdt{constructor(e,t,i){this.text=e,this.startSelection=t,this.endSelection=i}}class wE{static _capture(e,t){const i=[];for(const s of t){if(s.startLineNumber!==s.endLineNumber)return null;i.push(new Xdt(e.getLineContent(s.startLineNumber),s.startColumn-1,s.endColumn-1))}return i}constructor(e,t){this._original=wE._capture(e,t)}deduceOutcome(e,t){if(!this._original)return null;const i=wE._capture(e,t);if(!i||this._original.length!==i.length)return null;const s=[];for(let r=0,o=this._original.length;r<o;r++)s.push(wE._deduceOutcome(this._original[r],i[r]));return s}static _deduceOutcome(e,t){const i=Math.min(e.startSelection,t.startSelection,D_(e.text,t.text)),s=Math.min(e.text.length-e.endSelection,t.text.length-t.endSelection,cP(e.text,t.text)),r=e.text.substring(i,e.text.length-s),o=t.text.substring(i,t.text.length-s);return new Lct(r,e.startSelection-i,e.endSelection-i,o,t.startSelection-i,t.endSelection-i)}}class Qdt{constructor(){this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[]}insert(e){this._hasPending=!0,this._inserts.push(e)}change(e){this._hasPending=!0,this._changes.push(e)}remove(e){this._hasPending=!0,this._removes.push(e)}mustCommit(){return this._hasPending}commit(e){if(!this._hasPending)return;const t=this._inserts,i=this._changes,s=this._removes;this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[],e._commitPendingChanges(t,i,s)}}class Jdt{constructor(e,t,i,s,r){this.id=e,this.afterLineNumber=t,this.ordinal=i,this.height=s,this.minWidth=r,this.prefixSum=0}}var t_;let eut=(t_=class{constructor(e,t,i,s){this._instanceId=v0e(++t_.INSTANCE_COUNT),this._pendingChanges=new Qdt,this._lastWhitespaceId=0,this._arr=[],this._prefixSumValidIndex=-1,this._minWidth=-1,this._lineCount=e,this._lineHeight=t,this._paddingTop=i,this._paddingBottom=s}static findInsertionIndex(e,t,i){let s=0,r=e.length;for(;s<r;){const o=s+r>>>1;t===e[o].afterLineNumber?i<e[o].ordinal?r=o:s=o+1:t<e[o].afterLineNumber?r=o:s=o+1}return s}setLineHeight(e){this._checkPendingChanges(),this._lineHeight=e}setPadding(e,t){this._paddingTop=e,this._paddingBottom=t}onFlushed(e){this._checkPendingChanges(),this._lineCount=e}changeWhitespace(e){let t=!1;try{e({insertWhitespace:(s,r,o,a)=>{t=!0,s=s|0,r=r|0,o=o|0,a=a|0;const l=this._instanceId+ ++this._lastWhitespaceId;return this._pendingChanges.insert(new Jdt(l,s,r,o,a)),l},changeOneWhitespace:(s,r,o)=>{t=!0,r=r|0,o=o|0,this._pendingChanges.change({id:s,newAfterLineNumber:r,newHeight:o})},removeWhitespace:s=>{t=!0,this._pendingChanges.remove({id:s})}})}finally{this._pendingChanges.commit(this)}return t}_commitPendingChanges(e,t,i){if((e.length>0||i.length>0)&&(this._minWidth=-1),e.length+t.length+i.length<=1){for(const l of e)this._insertWhitespace(l);for(const l of t)this._changeOneWhitespace(l.id,l.newAfterLineNumber,l.newHeight);for(const l of i){const c=this._findWhitespaceIndex(l.id);c!==-1&&this._removeWhitespace(c)}return}const s=new Set;for(const l of i)s.add(l.id);const r=new Map;for(const l of t)r.set(l.id,l);const o=l=>{const c=[];for(const d of l)if(!s.has(d.id)){if(r.has(d.id)){const u=r.get(d.id);d.afterLineNumber=u.newAfterLineNumber,d.height=u.newHeight}c.push(d)}return c},a=o(this._arr).concat(o(e));a.sort((l,c)=>l.afterLineNumber===c.afterLineNumber?l.ordinal-c.ordinal:l.afterLineNumber-c.afterLineNumber),this._arr=a,this._prefixSumValidIndex=-1}_checkPendingChanges(){this._pendingChanges.mustCommit()&&this._pendingChanges.commit(this)}_insertWhitespace(e){const t=t_.findInsertionIndex(this._arr,e.afterLineNumber,e.ordinal);this._arr.splice(t,0,e),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,t-1)}_findWhitespaceIndex(e){const t=this._arr;for(let i=0,s=t.length;i<s;i++)if(t[i].id===e)return i;return-1}_changeOneWhitespace(e,t,i){const s=this._findWhitespaceIndex(e);if(s!==-1&&(this._arr[s].height!==i&&(this._arr[s].height=i,this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,s-1)),this._arr[s].afterLineNumber!==t)){const r=this._arr[s];this._removeWhitespace(s),r.afterLineNumber=t,this._insertWhitespace(r)}}_removeWhitespace(e){this._arr.splice(e,1),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,e-1)}onLinesDeleted(e,t){this._checkPendingChanges(),e=e|0,t=t|0,this._lineCount-=t-e+1;for(let i=0,s=this._arr.length;i<s;i++){const r=this._arr[i].afterLineNumber;e<=r&&r<=t?this._arr[i].afterLineNumber=e-1:r>t&&(this._arr[i].afterLineNumber-=t-e+1)}}onLinesInserted(e,t){this._checkPendingChanges(),e=e|0,t=t|0,this._lineCount+=t-e+1;for(let i=0,s=this._arr.length;i<s;i++){const r=this._arr[i].afterLineNumber;e<=r&&(this._arr[i].afterLineNumber+=t-e+1)}}getWhitespacesTotalHeight(){return this._checkPendingChanges(),this._arr.length===0?0:this.getWhitespacesAccumulatedHeight(this._arr.length-1)}getWhitespacesAccumulatedHeight(e){this._checkPendingChanges(),e=e|0;let t=Math.max(0,this._prefixSumValidIndex+1);t===0&&(this._arr[0].prefixSum=this._arr[0].height,t++);for(let i=t;i<=e;i++)this._arr[i].prefixSum=this._arr[i-1].prefixSum+this._arr[i].height;return this._prefixSumValidIndex=Math.max(this._prefixSumValidIndex,e),this._arr[e].prefixSum}getLinesTotalHeight(){this._checkPendingChanges();const e=this._lineHeight*this._lineCount,t=this.getWhitespacesTotalHeight();return e+t+this._paddingTop+this._paddingBottom}getWhitespaceAccumulatedHeightBeforeLineNumber(e){this._checkPendingChanges(),e=e|0;const t=this._findLastWhitespaceBeforeLineNumber(e);return t===-1?0:this.getWhitespacesAccumulatedHeight(t)}_findLastWhitespaceBeforeLineNumber(e){e=e|0;const t=this._arr;let i=0,s=t.length-1;for(;i<=s;){const o=(s-i|0)/2|0,a=i+o|0;if(t[a].afterLineNumber<e){if(a+1>=t.length||t[a+1].afterLineNumber>=e)return a;i=a+1|0}else s=a-1|0}return-1}_findFirstWhitespaceAfterLineNumber(e){e=e|0;const i=this._findLastWhitespaceBeforeLineNumber(e)+1;return i<this._arr.length?i:-1}getFirstWhitespaceIndexAfterLineNumber(e){return this._checkPendingChanges(),e=e|0,this._findFirstWhitespaceAfterLineNumber(e)}getVerticalOffsetForLineNumber(e,t=!1){this._checkPendingChanges(),e=e|0;let i;e>1?i=this._lineHeight*(e-1):i=0;const s=this.getWhitespaceAccumulatedHeightBeforeLineNumber(e-(t?1:0));return i+s+this._paddingTop}getVerticalOffsetAfterLineNumber(e,t=!1){this._checkPendingChanges(),e=e|0;const i=this._lineHeight*e,s=this.getWhitespaceAccumulatedHeightBeforeLineNumber(e+(t?1:0));return i+s+this._paddingTop}getWhitespaceMinWidth(){if(this._checkPendingChanges(),this._minWidth===-1){let e=0;for(let t=0,i=this._arr.length;t<i;t++)e=Math.max(e,this._arr[t].minWidth);this._minWidth=e}return this._minWidth}isAfterLines(e){this._checkPendingChanges();const t=this.getLinesTotalHeight();return e>t}isInTopPadding(e){return this._paddingTop===0?!1:(this._checkPendingChanges(),e<this._paddingTop)}isInBottomPadding(e){if(this._paddingBottom===0)return!1;this._checkPendingChanges();const t=this.getLinesTotalHeight();return e>=t-this._paddingBottom}getLineNumberAtOrAfterVerticalOffset(e){if(this._checkPendingChanges(),e=e|0,e<0)return 1;const t=this._lineCount|0,i=this._lineHeight;let s=1,r=t;for(;s<r;){const o=(s+r)/2|0,a=this.getVerticalOffsetForLineNumber(o)|0;if(e>=a+i)s=o+1;else{if(e>=a)return o;r=o}}return s>t?t:s}getLinesViewportData(e,t){this._checkPendingChanges(),e=e|0,t=t|0;const i=this._lineHeight,s=this.getLineNumberAtOrAfterVerticalOffset(e)|0,r=this.getVerticalOffsetForLineNumber(s)|0;let o=this._lineCount|0,a=this.getFirstWhitespaceIndexAfterLineNumber(s)|0;const l=this.getWhitespacesCount()|0;let c,d;a===-1?(a=l,d=o+1,c=0):(d=this.getAfterLineNumberForWhitespaceIndex(a)|0,c=this.getHeightForWhitespaceIndex(a)|0);let u=r,h=u;const f=5e5;let g=0;r>=f&&(g=Math.floor(r/f)*f,g=Math.floor(g/i)*i,h-=g);const p=[],_=e+(t-e)/2;let w=-1;for(let x=s;x<=o;x++){if(w===-1){const E=u,D=u+i;(E<=_&&_<D||E>_)&&(w=x)}for(u+=i,p[x-s]=h,h+=i;d===x;)h+=c,u+=c,a++,a>=l?d=o+1:(d=this.getAfterLineNumberForWhitespaceIndex(a)|0,c=this.getHeightForWhitespaceIndex(a)|0);if(u>=t){o=x;break}}w===-1&&(w=o);const b=this.getVerticalOffsetForLineNumber(o)|0;let y=s,S=o;return y<S&&r<e&&y++,y<S&&b+i>t&&S--,{bigNumbersDelta:g,startLineNumber:s,endLineNumber:o,relativeVerticalOffset:p,centeredLineNumber:w,completelyVisibleStartLineNumber:y,completelyVisibleEndLineNumber:S,lineHeight:this._lineHeight}}getVerticalOffsetForWhitespaceIndex(e){this._checkPendingChanges(),e=e|0;const t=this.getAfterLineNumberForWhitespaceIndex(e);let i;t>=1?i=this._lineHeight*t:i=0;let s;return e>0?s=this.getWhitespacesAccumulatedHeight(e-1):s=0,i+s+this._paddingTop}getWhitespaceIndexAtOrAfterVerticallOffset(e){this._checkPendingChanges(),e=e|0;let t=0,i=this.getWhitespacesCount()-1;if(i<0)return-1;const s=this.getVerticalOffsetForWhitespaceIndex(i),r=this.getHeightForWhitespaceIndex(i);if(e>=s+r)return-1;for(;t<i;){const o=Math.floor((t+i)/2),a=this.getVerticalOffsetForWhitespaceIndex(o),l=this.getHeightForWhitespaceIndex(o);if(e>=a+l)t=o+1;else{if(e>=a)return o;i=o}}return t}getWhitespaceAtVerticalOffset(e){this._checkPendingChanges(),e=e|0;const t=this.getWhitespaceIndexAtOrAfterVerticallOffset(e);if(t<0||t>=this.getWhitespacesCount())return null;const i=this.getVerticalOffsetForWhitespaceIndex(t);if(i>e)return null;const s=this.getHeightForWhitespaceIndex(t),r=this.getIdForWhitespaceIndex(t),o=this.getAfterLineNumberForWhitespaceIndex(t);return{id:r,afterLineNumber:o,verticalOffset:i,height:s}}getWhitespaceViewportData(e,t){this._checkPendingChanges(),e=e|0,t=t|0;const i=this.getWhitespaceIndexAtOrAfterVerticallOffset(e),s=this.getWhitespacesCount()-1;if(i<0)return[];const r=[];for(let o=i;o<=s;o++){const a=this.getVerticalOffsetForWhitespaceIndex(o),l=this.getHeightForWhitespaceIndex(o);if(a>=t)break;r.push({id:this.getIdForWhitespaceIndex(o),afterLineNumber:this.getAfterLineNumberForWhitespaceIndex(o),verticalOffset:a,height:l})}return r}getWhitespaces(){return this._checkPendingChanges(),this._arr.slice(0)}getWhitespacesCount(){return this._checkPendingChanges(),this._arr.length}getIdForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].id}getAfterLineNumberForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].afterLineNumber}getHeightForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].height}},t_.INSTANCE_COUNT=0,t_);const tut=125;class bk{constructor(e,t,i,s){e=e|0,t=t|0,i=i|0,s=s|0,e<0&&(e=0),t<0&&(t=0),i<0&&(i=0),s<0&&(s=0),this.width=e,this.contentWidth=t,this.scrollWidth=Math.max(e,t),this.height=i,this.contentHeight=s,this.scrollHeight=Math.max(i,s)}equals(e){return this.width===e.width&&this.contentWidth===e.contentWidth&&this.height===e.height&&this.contentHeight===e.contentHeight}}class iut extends ee{constructor(e,t){super(),this._onDidContentSizeChange=this._register(new X),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._dimensions=new bk(0,0,0,0),this._scrollable=this._register(new Px({forceIntegerValues:!0,smoothScrollDuration:e,scheduleAtNextAnimationFrame:t})),this.onDidScroll=this._scrollable.onScroll}getScrollable(){return this._scrollable}setSmoothScrollDuration(e){this._scrollable.setSmoothScrollDuration(e)}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}getScrollDimensions(){return this._dimensions}setScrollDimensions(e){if(this._dimensions.equals(e))return;const t=this._dimensions;this._dimensions=e,this._scrollable.setScrollDimensions({width:e.width,scrollWidth:e.scrollWidth,height:e.height,scrollHeight:e.scrollHeight},!0);const i=t.contentWidth!==e.contentWidth,s=t.contentHeight!==e.contentHeight;(i||s)&&this._onDidContentSizeChange.fire(new aJ(t.contentWidth,t.contentHeight,e.contentWidth,e.contentHeight))}getFutureScrollPosition(){return this._scrollable.getFutureScrollPosition()}getCurrentScrollPosition(){return this._scrollable.getCurrentScrollPosition()}setScrollPositionNow(e){this._scrollable.setScrollPositionNow(e)}setScrollPositionSmooth(e){this._scrollable.setScrollPositionSmooth(e)}hasPendingScrollAnimation(){return this._scrollable.hasPendingScrollAnimation()}}class nut extends ee{constructor(e,t,i){super(),this._configuration=e;const s=this._configuration.options,r=s.get(146),o=s.get(84);this._linesLayout=new eut(t,s.get(67),o.top,o.bottom),this._maxLineWidth=0,this._overlayWidgetsMinWidth=0,this._scrollable=this._register(new iut(0,i)),this._configureSmoothScrollDuration(),this._scrollable.setScrollDimensions(new bk(r.contentWidth,0,r.height,0)),this.onDidScroll=this._scrollable.onDidScroll,this.onDidContentSizeChange=this._scrollable.onDidContentSizeChange,this._updateHeight()}dispose(){super.dispose()}getScrollable(){return this._scrollable.getScrollable()}onHeightMaybeChanged(){this._updateHeight()}_configureSmoothScrollDuration(){this._scrollable.setSmoothScrollDuration(this._configuration.options.get(115)?tut:0)}onConfigurationChanged(e){const t=this._configuration.options;if(e.hasChanged(67)&&this._linesLayout.setLineHeight(t.get(67)),e.hasChanged(84)){const i=t.get(84);this._linesLayout.setPadding(i.top,i.bottom)}if(e.hasChanged(146)){const i=t.get(146),s=i.contentWidth,r=i.height,o=this._scrollable.getScrollDimensions(),a=o.contentWidth;this._scrollable.setScrollDimensions(new bk(s,o.contentWidth,r,this._getContentHeight(s,r,a)))}else this._updateHeight();e.hasChanged(115)&&this._configureSmoothScrollDuration()}onFlushed(e){this._linesLayout.onFlushed(e)}onLinesDeleted(e,t){this._linesLayout.onLinesDeleted(e,t)}onLinesInserted(e,t){this._linesLayout.onLinesInserted(e,t)}_getHorizontalScrollbarHeight(e,t){const s=this._configuration.options.get(104);return s.horizontal===2||e>=t?0:s.horizontalScrollbarSize}_getContentHeight(e,t,i){const s=this._configuration.options;let r=this._linesLayout.getLinesTotalHeight();return s.get(106)?r+=Math.max(0,t-s.get(67)-s.get(84).bottom):s.get(104).ignoreHorizontalScrollbarInContentHeight||(r+=this._getHorizontalScrollbarHeight(e,i)),r}_updateHeight(){const e=this._scrollable.getScrollDimensions(),t=e.width,i=e.height,s=e.contentWidth;this._scrollable.setScrollDimensions(new bk(t,e.contentWidth,i,this._getContentHeight(t,i,s)))}getCurrentViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getCurrentScrollPosition();return new Uce(t.scrollTop,t.scrollLeft,e.width,e.height)}getFutureViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getFutureScrollPosition();return new Uce(t.scrollTop,t.scrollLeft,e.width,e.height)}_computeContentWidth(){const e=this._configuration.options,t=this._maxLineWidth,i=e.get(147),s=e.get(50),r=e.get(146);if(i.isViewportWrapping){const o=e.get(73);return t>r.contentWidth+s.typicalHalfwidthCharacterWidth&&o.enabled&&o.side==="right"?t+r.verticalScrollbarWidth:t}else{const o=e.get(105)*s.typicalHalfwidthCharacterWidth,a=this._linesLayout.getWhitespaceMinWidth();return Math.max(t+o+r.verticalScrollbarWidth,a,this._overlayWidgetsMinWidth)}}setMaxLineWidth(e){this._maxLineWidth=e,this._updateContentWidth()}setOverlayWidgetsMinWidth(e){this._overlayWidgetsMinWidth=e,this._updateContentWidth()}_updateContentWidth(){const e=this._scrollable.getScrollDimensions();this._scrollable.setScrollDimensions(new bk(e.width,this._computeContentWidth(),e.height,e.contentHeight)),this._updateHeight()}saveState(){const e=this._scrollable.getFutureScrollPosition(),t=e.scrollTop,i=this._linesLayout.getLineNumberAtOrAfterVerticalOffset(t),s=this._linesLayout.getWhitespaceAccumulatedHeightBeforeLineNumber(i);return{scrollTop:t,scrollTopWithoutViewZones:t-s,scrollLeft:e.scrollLeft}}changeWhitespace(e){const t=this._linesLayout.changeWhitespace(e);return t&&this.onHeightMaybeChanged(),t}getVerticalOffsetForLineNumber(e,t=!1){return this._linesLayout.getVerticalOffsetForLineNumber(e,t)}getVerticalOffsetAfterLineNumber(e,t=!1){return this._linesLayout.getVerticalOffsetAfterLineNumber(e,t)}isAfterLines(e){return this._linesLayout.isAfterLines(e)}isInTopPadding(e){return this._linesLayout.isInTopPadding(e)}isInBottomPadding(e){return this._linesLayout.isInBottomPadding(e)}getLineNumberAtVerticalOffset(e){return this._linesLayout.getLineNumberAtOrAfterVerticalOffset(e)}getWhitespaceAtVerticalOffset(e){return this._linesLayout.getWhitespaceAtVerticalOffset(e)}getLinesViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getLinesViewportData(e.top,e.top+e.height)}getLinesViewportDataAtScrollTop(e){const t=this._scrollable.getScrollDimensions();return e+t.height>t.scrollHeight&&(e=t.scrollHeight-t.height),e<0&&(e=0),this._linesLayout.getLinesViewportData(e,e+t.height)}getWhitespaceViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getWhitespaceViewportData(e.top,e.top+e.height)}getWhitespaces(){return this._linesLayout.getWhitespaces()}getContentWidth(){return this._scrollable.getScrollDimensions().contentWidth}getScrollWidth(){return this._scrollable.getScrollDimensions().scrollWidth}getContentHeight(){return this._scrollable.getScrollDimensions().contentHeight}getScrollHeight(){return this._scrollable.getScrollDimensions().scrollHeight}getCurrentScrollLeft(){return this._scrollable.getCurrentScrollPosition().scrollLeft}getCurrentScrollTop(){return this._scrollable.getCurrentScrollPosition().scrollTop}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}setScrollPosition(e,t){t===1?this._scrollable.setScrollPositionNow(e):this._scrollable.setScrollPositionSmooth(e)}hasPendingScrollAnimation(){return this._scrollable.hasPendingScrollAnimation()}deltaScrollNow(e,t){const i=this._scrollable.getCurrentScrollPosition();this._scrollable.setScrollPositionNow({scrollLeft:i.scrollLeft+e,scrollTop:i.scrollTop+t})}}class sut{constructor(e,t,i,s,r){this.editorId=e,this.model=t,this.configuration=i,this._linesCollection=s,this._coordinatesConverter=r,this._decorationsCache=Object.create(null),this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}_clearCachedModelDecorationsResolver(){this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}dispose(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}reset(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onModelDecorationsChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onLineMappingChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}_getOrCreateViewModelDecoration(e){const t=e.id;let i=this._decorationsCache[t];if(!i){const s=e.range,r=e.options;let o;if(r.isWholeLine){const a=this._coordinatesConverter.convertModelPositionToViewPosition(new Y(s.startLineNumber,1),0,!1,!0),l=this._coordinatesConverter.convertModelPositionToViewPosition(new Y(s.endLineNumber,this.model.getLineMaxColumn(s.endLineNumber)),1);o=new M(a.lineNumber,a.column,l.lineNumber,l.column)}else o=this._coordinatesConverter.convertModelRangeToViewRange(s,1);i=new xSe(o,r),this._decorationsCache[t]=i}return i}getMinimapDecorationsInRange(e){return this._getDecorationsInRange(e,!0,!1).decorations}getDecorationsViewportData(e){let t=this._cachedModelDecorationsResolver!==null;return t=t&&e.equalsRange(this._cachedModelDecorationsResolverViewRange),t||(this._cachedModelDecorationsResolver=this._getDecorationsInRange(e,!1,!1),this._cachedModelDecorationsResolverViewRange=e),this._cachedModelDecorationsResolver}getInlineDecorationsOnLine(e,t=!1,i=!1){const s=new M(e,this._linesCollection.getViewLineMinColumn(e),e,this._linesCollection.getViewLineMaxColumn(e));return this._getDecorationsInRange(s,t,i).inlineDecorations[0]}_getDecorationsInRange(e,t,i){const s=this._linesCollection.getDecorationsInRange(e,this.editorId,tP(this.configuration.options),t,i),r=e.startLineNumber,o=e.endLineNumber,a=[];let l=0;const c=[];for(let d=r;d<=o;d++)c[d-r]=[];for(let d=0,u=s.length;d<u;d++){const h=s[d],f=h.options;if(!dJ(this.model,h))continue;const g=this._getOrCreateViewModelDecoration(h),p=g.range;if(a[l++]=g,f.inlineClassName){const _=new uE(p,f.inlineClassName,f.inlineClassNameAffectsLetterSpacing?3:0),w=Math.max(r,p.startLineNumber),b=Math.min(o,p.endLineNumber);for(let y=w;y<=b;y++)c[y-r].push(_)}if(f.beforeContentClassName&&r<=p.startLineNumber&&p.startLineNumber<=o){const _=new uE(new M(p.startLineNumber,p.startColumn,p.startLineNumber,p.startColumn),f.beforeContentClassName,1);c[p.startLineNumber-r].push(_)}if(f.afterContentClassName&&r<=p.endLineNumber&&p.endLineNumber<=o){const _=new uE(new M(p.endLineNumber,p.endColumn,p.endLineNumber,p.endColumn),f.afterContentClassName,2);c[p.endLineNumber-r].push(_)}}return{decorations:a,inlineDecorations:c}}}function dJ(n,e){return!(e.options.hideInCommentTokens&&uJ(n,e)||e.options.hideInStringTokens&&hJ(n,e))}function uJ(n,e){return qSe(n,e.range,t=>t===1)}function hJ(n,e){return qSe(n,e.range,t=>t===2)}function qSe(n,e,t){for(let i=e.startLineNumber;i<=e.endLineNumber;i++){const s=n.tokenization.getLineTokens(i),r=i===e.startLineNumber,o=i===e.endLineNumber;let a=r?s.findTokenIndexAtOffset(e.startColumn-1):0;for(;a<s.getCount()&&!(o&&s.getStartOffset(a)>e.endColumn-1);){if(!t(s.getStandardTokenType(a)))return!1;a++}}return!0}function X8(n,e){return n===null?e?WO.INSTANCE:HO.INSTANCE:new rut(n,e)}class rut{constructor(e,t){this._projectionData=e,this._isVisible=t}isVisible(){return this._isVisible}setVisible(e){return this._isVisible=e,this}getProjectionData(){return this._projectionData}getViewLineCount(){return this._isVisible?this._projectionData.getOutputLineCount():0}getViewLineContent(e,t,i){this._assertVisible();const s=i>0?this._projectionData.breakOffsets[i-1]:0,r=this._projectionData.breakOffsets[i];let o;if(this._projectionData.injectionOffsets!==null){const a=this._projectionData.injectionOffsets.map((c,d)=>new Vu(0,0,c+1,this._projectionData.injectionOptions[d],0));o=Vu.applyInjectedText(e.getLineContent(t),a).substring(s,r)}else o=e.getValueInRange({startLineNumber:t,startColumn:s+1,endLineNumber:t,endColumn:r+1});return i>0&&(o=bde(this._projectionData.wrappedTextIndentLength)+o),o}getViewLineLength(e,t,i){return this._assertVisible(),this._projectionData.getLineLength(i)}getViewLineMinColumn(e,t,i){return this._assertVisible(),this._projectionData.getMinOutputOffset(i)+1}getViewLineMaxColumn(e,t,i){return this._assertVisible(),this._projectionData.getMaxOutputOffset(i)+1}getViewLineData(e,t,i){const s=new Array;return this.getViewLinesData(e,t,i,1,0,[!0],s),s[0]}getViewLinesData(e,t,i,s,r,o,a){this._assertVisible();const l=this._projectionData,c=l.injectionOffsets,d=l.injectionOptions;let u=null;if(c){u=[];let f=0,g=0;for(let p=0;p<l.getOutputLineCount();p++){const _=new Array;u[p]=_;const w=p>0?l.breakOffsets[p-1]:0,b=l.breakOffsets[p];for(;g<c.length;){const y=d[g].content.length,S=c[g]+f,x=S+y;if(S>b)break;if(w<x){const E=d[g];if(E.inlineClassName){const D=p>0?l.wrappedTextIndentLength:0,N=D+Math.max(S-w,0),I=D+Math.min(x-w,b-w);N!==I&&_.push(new Jat(N,I,E.inlineClassName,E.inlineClassNameAffectsLetterSpacing))}}if(x<=b)f+=y,g++;else break}}}let h;c?h=e.tokenization.getLineTokens(t).withInserted(c.map((f,g)=>({offset:f,text:d[g].content,tokenMetadata:Ks.defaultTokenMetadata}))):h=e.tokenization.getLineTokens(t);for(let f=i;f<i+s;f++){const g=r+f-i;if(!o[g]){a[g]=null;continue}a[g]=this._getViewLineData(h,u?u[f]:null,f)}}_getViewLineData(e,t,i){this._assertVisible();const s=this._projectionData,r=i>0?s.wrappedTextIndentLength:0,o=i>0?s.breakOffsets[i-1]:0,a=s.breakOffsets[i],l=e.sliceAndInflate(o,a,r);let c=l.getLineContent();i>0&&(c=bde(s.wrappedTextIndentLength)+c);const d=this._projectionData.getMinOutputOffset(i)+1,u=c.length+1,h=i+1<this.getViewLineCount(),f=i===0?0:s.breakOffsetsVisibleColumn[i-1];return new jQ(c,h,d,u,f,l,t)}getModelColumnOfViewPosition(e,t){return this._assertVisible(),this._projectionData.translateToInputOffset(e,t-1)+1}getViewPositionOfModelPosition(e,t,i=2){return this._assertVisible(),this._projectionData.translateToOutputPosition(t-1,i).toPosition(e)}getViewLineNumberOfModelPosition(e,t){this._assertVisible();const i=this._projectionData.translateToOutputPosition(t-1);return e+i.outputLineIndex}normalizePosition(e,t,i){const s=t.lineNumber-e;return this._projectionData.normalizeOutputPosition(e,t.column-1,i).toPosition(s)}getInjectedTextAt(e,t){return this._projectionData.getInjectedText(e,t-1)}_assertVisible(){if(!this._isVisible)throw new Error("Not supported")}}const j4=class j4{constructor(){}isVisible(){return!0}setVisible(e){return e?this:HO.INSTANCE}getProjectionData(){return null}getViewLineCount(){return 1}getViewLineContent(e,t,i){return e.getLineContent(t)}getViewLineLength(e,t,i){return e.getLineLength(t)}getViewLineMinColumn(e,t,i){return e.getLineMinColumn(t)}getViewLineMaxColumn(e,t,i){return e.getLineMaxColumn(t)}getViewLineData(e,t,i){const s=e.tokenization.getLineTokens(t),r=s.getLineContent();return new jQ(r,!1,1,r.length+1,0,s.inflate(),null)}getViewLinesData(e,t,i,s,r,o,a){if(!o[r]){a[r]=null;return}a[r]=this.getViewLineData(e,t,0)}getModelColumnOfViewPosition(e,t){return t}getViewPositionOfModelPosition(e,t){return new Y(e,t)}getViewLineNumberOfModelPosition(e,t){return e}normalizePosition(e,t,i){return t}getInjectedTextAt(e,t){return null}};j4.INSTANCE=new j4;let WO=j4;const K4=class K4{constructor(){}isVisible(){return!1}setVisible(e){return e?WO.INSTANCE:this}getProjectionData(){return null}getViewLineCount(){return 0}getViewLineContent(e,t,i){throw new Error("Not supported")}getViewLineLength(e,t,i){throw new Error("Not supported")}getViewLineMinColumn(e,t,i){throw new Error("Not supported")}getViewLineMaxColumn(e,t,i){throw new Error("Not supported")}getViewLineData(e,t,i){throw new Error("Not supported")}getViewLinesData(e,t,i,s,r,o,a){throw new Error("Not supported")}getModelColumnOfViewPosition(e,t){throw new Error("Not supported")}getViewPositionOfModelPosition(e,t){throw new Error("Not supported")}getViewLineNumberOfModelPosition(e,t){throw new Error("Not supported")}normalizePosition(e,t,i){throw new Error("Not supported")}getInjectedTextAt(e,t){throw new Error("Not supported")}};K4.INSTANCE=new K4;let HO=K4;const Q8=[""];function bde(n){if(n>=Q8.length)for(let e=1;e<=n;e++)Q8[e]=out(e);return Q8[n]}function out(n){return new Array(n+1).join(" ")}class aut{constructor(e,t,i,s,r,o,a,l,c,d){this._editorId=e,this.model=t,this._validModelVersionId=-1,this._domLineBreaksComputerFactory=i,this._monospaceLineBreaksComputerFactory=s,this.fontInfo=r,this.tabSize=o,this.wrappingStrategy=a,this.wrappingColumn=l,this.wrappingIndent=c,this.wordBreak=d,this._constructLines(!0,null)}dispose(){this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[])}createCoordinatesConverter(){return new cut(this)}_constructLines(e,t){this.modelLineProjections=[],e&&(this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[]));const i=this.model.getLinesContent(),s=this.model.getInjectedTextDecorations(this._editorId),r=i.length,o=this.createLineBreaksComputer(),a=new Gg(Vu.fromDecorations(s));for(let p=0;p<r;p++){const _=a.takeWhile(w=>w.lineNumber===p+1);o.addRequest(i[p],_,t?t[p]:null)}const l=o.finalize(),c=[],d=this.hiddenAreasDecorationIds.map(p=>this.model.getDecorationRange(p)).sort(M.compareRangesUsingStarts);let u=1,h=0,f=-1,g=f+1<d.length?h+1:r+2;for(let p=0;p<r;p++){const _=p+1;_===g&&(f++,u=d[f].startLineNumber,h=d[f].endLineNumber,g=f+1<d.length?h+1:r+2);const w=_>=u&&_<=h,b=X8(l[p],!w);c[p]=b.getViewLineCount(),this.modelLineProjections[p]=b}this._validModelVersionId=this.model.getVersionId(),this.projectedModelLineLineCounts=new wZe(c)}getHiddenAreas(){return this.hiddenAreasDecorationIds.map(e=>this.model.getDecorationRange(e))}setHiddenAreas(e){const t=e.map(h=>this.model.validateRange(h)),i=lut(t),s=this.hiddenAreasDecorationIds.map(h=>this.model.getDecorationRange(h)).sort(M.compareRangesUsingStarts);if(i.length===s.length){let h=!1;for(let f=0;f<i.length;f++)if(!i[f].equalsRange(s[f])){h=!0;break}if(!h)return!1}const r=i.map(h=>({range:h,options:_t.EMPTY}));this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,r);const o=i;let a=1,l=0,c=-1,d=c+1<o.length?l+1:this.modelLineProjections.length+2,u=!1;for(let h=0;h<this.modelLineProjections.length;h++){const f=h+1;f===d&&(c++,a=o[c].startLineNumber,l=o[c].endLineNumber,d=c+1<o.length?l+1:this.modelLineProjections.length+2);let g=!1;if(f>=a&&f<=l?this.modelLineProjections[h].isVisible()&&(this.modelLineProjections[h]=this.modelLineProjections[h].setVisible(!1),g=!0):(u=!0,this.modelLineProjections[h].isVisible()||(this.modelLineProjections[h]=this.modelLineProjections[h].setVisible(!0),g=!0)),g){const p=this.modelLineProjections[h].getViewLineCount();this.projectedModelLineLineCounts.setValue(h,p)}}return u||this.setHiddenAreas([]),!0}modelPositionIsVisible(e,t){return e<1||e>this.modelLineProjections.length?!1:this.modelLineProjections[e-1].isVisible()}getModelLineViewLineCount(e){return e<1||e>this.modelLineProjections.length?1:this.modelLineProjections[e-1].getViewLineCount()}setTabSize(e){return this.tabSize===e?!1:(this.tabSize=e,this._constructLines(!1,null),!0)}setWrappingSettings(e,t,i,s,r){const o=this.fontInfo.equals(e),a=this.wrappingStrategy===t,l=this.wrappingColumn===i,c=this.wrappingIndent===s,d=this.wordBreak===r;if(o&&a&&l&&c&&d)return!1;const u=o&&a&&!l&&c&&d;this.fontInfo=e,this.wrappingStrategy=t,this.wrappingColumn=i,this.wrappingIndent=s,this.wordBreak=r;let h=null;if(u){h=[];for(let f=0,g=this.modelLineProjections.length;f<g;f++)h[f]=this.modelLineProjections[f].getProjectionData()}return this._constructLines(!1,h),!0}createLineBreaksComputer(){return(this.wrappingStrategy==="advanced"?this._domLineBreaksComputerFactory:this._monospaceLineBreaksComputerFactory).createLineBreaksComputer(this.fontInfo,this.tabSize,this.wrappingColumn,this.wrappingIndent,this.wordBreak)}onModelFlushed(){this._constructLines(!0,null)}onModelLinesDeleted(e,t,i){if(!e||e<=this._validModelVersionId)return null;const s=t===1?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,r=this.projectedModelLineLineCounts.getPrefixSum(i);return this.modelLineProjections.splice(t-1,i-t+1),this.projectedModelLineLineCounts.removeValues(t-1,i-t+1),new Mj(s,r)}onModelLinesInserted(e,t,i,s){if(!e||e<=this._validModelVersionId)return null;const r=t>2&&!this.modelLineProjections[t-2].isVisible(),o=t===1?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1;let a=0;const l=[],c=[];for(let d=0,u=s.length;d<u;d++){const h=X8(s[d],!r);l.push(h);const f=h.getViewLineCount();a+=f,c[d]=f}return this.modelLineProjections=this.modelLineProjections.slice(0,t-1).concat(l).concat(this.modelLineProjections.slice(t-1)),this.projectedModelLineLineCounts.insertValues(t-1,c),new Pj(o,o+a-1)}onModelLineChanged(e,t,i){if(e!==null&&e<=this._validModelVersionId)return[!1,null,null,null];const s=t-1,r=this.modelLineProjections[s].getViewLineCount(),o=this.modelLineProjections[s].isVisible(),a=X8(i,o);this.modelLineProjections[s]=a;const l=this.modelLineProjections[s].getViewLineCount();let c=!1,d=0,u=-1,h=0,f=-1,g=0,p=-1;r>l?(d=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,u=d+l-1,g=u+1,p=g+(r-l)-1,c=!0):r<l?(d=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,u=d+r-1,h=u+1,f=h+(l-r)-1,c=!0):(d=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,u=d+l-1),this.projectedModelLineLineCounts.setValue(s,l);const _=d<=u?new KSe(d,u-d+1):null,w=h<=f?new Pj(h,f):null,b=g<=p?new Mj(g,p):null;return[c,_,w,b]}acceptVersionId(e){this._validModelVersionId=e,this.modelLineProjections.length===1&&!this.modelLineProjections[0].isVisible()&&this.setHiddenAreas([])}getViewLineCount(){return this.projectedModelLineLineCounts.getTotalSum()}_toValidViewLineNumber(e){if(e<1)return 1;const t=this.getViewLineCount();return e>t?t:e|0}getActiveIndentGuide(e,t,i){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t),i=this._toValidViewLineNumber(i);const s=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),r=this.convertViewPositionToModelPosition(t,this.getViewLineMinColumn(t)),o=this.convertViewPositionToModelPosition(i,this.getViewLineMinColumn(i)),a=this.model.guides.getActiveIndentGuide(s.lineNumber,r.lineNumber,o.lineNumber),l=this.convertModelPositionToViewPosition(a.startLineNumber,1),c=this.convertModelPositionToViewPosition(a.endLineNumber,this.model.getLineMaxColumn(a.endLineNumber));return{startLineNumber:l.lineNumber,endLineNumber:c.lineNumber,indent:a.indent}}getViewLineInfo(e){e=this._toValidViewLineNumber(e);const t=this.projectedModelLineLineCounts.getIndexOf(e-1),i=t.index,s=t.remainder;return new wde(i+1,s)}getMinColumnOfViewLine(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getMaxColumnOfViewLine(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getModelStartPositionOfViewLine(e){const t=this.modelLineProjections[e.modelLineNumber-1],i=t.getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),s=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,i);return new Y(e.modelLineNumber,s)}getModelEndPositionOfViewLine(e){const t=this.modelLineProjections[e.modelLineNumber-1],i=t.getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),s=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,i);return new Y(e.modelLineNumber,s)}getViewLineInfosGroupedByModelRanges(e,t){const i=this.getViewLineInfo(e),s=this.getViewLineInfo(t),r=new Array;let o=this.getModelStartPositionOfViewLine(i),a=new Array;for(let l=i.modelLineNumber;l<=s.modelLineNumber;l++){const c=this.modelLineProjections[l-1];if(c.isVisible()){const d=l===i.modelLineNumber?i.modelLineWrappedLineIdx:0,u=l===s.modelLineNumber?s.modelLineWrappedLineIdx+1:c.getViewLineCount();for(let h=d;h<u;h++)a.push(new wde(l,h))}if(!c.isVisible()&&o){const d=new Y(l-1,this.model.getLineMaxColumn(l-1)+1),u=M.fromPositions(o,d);r.push(new Cde(u,a)),a=[],o=null}else c.isVisible()&&!o&&(o=new Y(l,1))}if(o){const l=M.fromPositions(o,this.getModelEndPositionOfViewLine(s));r.push(new Cde(l,a))}return r}getViewLinesBracketGuides(e,t,i,s){const r=i?this.convertViewPositionToModelPosition(i.lineNumber,i.column):null,o=[];for(const a of this.getViewLineInfosGroupedByModelRanges(e,t)){const l=a.modelRange.startLineNumber,c=this.model.guides.getLinesBracketGuides(l,a.modelRange.endLineNumber,r,s);for(const d of a.viewLines){const h=c[d.modelLineNumber-l].map(f=>{if(f.forWrappedLinesAfterColumn!==-1&&this.modelLineProjections[d.modelLineNumber-1].getViewPositionOfModelPosition(0,f.forWrappedLinesAfterColumn).lineNumber>=d.modelLineWrappedLineIdx||f.forWrappedLinesBeforeOrAtColumn!==-1&&this.modelLineProjections[d.modelLineNumber-1].getViewPositionOfModelPosition(0,f.forWrappedLinesBeforeOrAtColumn).lineNumber<d.modelLineWrappedLineIdx)return;if(!f.horizontalLine)return f;let g=-1;if(f.column!==-1){const w=this.modelLineProjections[d.modelLineNumber-1].getViewPositionOfModelPosition(0,f.column);if(w.lineNumber===d.modelLineWrappedLineIdx)g=w.column;else if(w.lineNumber<d.modelLineWrappedLineIdx)g=this.getMinColumnOfViewLine(d);else if(w.lineNumber>d.modelLineWrappedLineIdx)return}const p=this.convertModelPositionToViewPosition(d.modelLineNumber,f.horizontalLine.endColumn),_=this.modelLineProjections[d.modelLineNumber-1].getViewPositionOfModelPosition(0,f.horizontalLine.endColumn);return _.lineNumber===d.modelLineWrappedLineIdx?new kb(f.visibleColumn,g,f.className,new iE(f.horizontalLine.top,p.column),-1,-1):_.lineNumber<d.modelLineWrappedLineIdx||f.visibleColumn!==-1?void 0:new kb(f.visibleColumn,g,f.className,new iE(f.horizontalLine.top,this.getMaxColumnOfViewLine(d)),-1,-1)});o.push(h.filter(f=>!!f))}}return o}getViewLinesIndentGuides(e,t){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);const i=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),s=this.convertViewPositionToModelPosition(t,this.getViewLineMaxColumn(t));let r=[];const o=[],a=[],l=i.lineNumber-1,c=s.lineNumber-1;let d=null;for(let g=l;g<=c;g++){const p=this.modelLineProjections[g];if(p.isVisible()){const _=p.getViewLineNumberOfModelPosition(0,g===l?i.column:1),w=p.getViewLineNumberOfModelPosition(0,this.model.getLineMaxColumn(g+1)),b=w-_+1;let y=0;b>1&&p.getViewLineMinColumn(this.model,g+1,w)===1&&(y=_===0?1:2),o.push(b),a.push(y),d===null&&(d=new Y(g+1,0))}else d!==null&&(r=r.concat(this.model.guides.getLinesIndentGuides(d.lineNumber,g)),d=null)}d!==null&&(r=r.concat(this.model.guides.getLinesIndentGuides(d.lineNumber,s.lineNumber)),d=null);const u=t-e+1,h=new Array(u);let f=0;for(let g=0,p=r.length;g<p;g++){let _=r[g];const w=Math.min(u-f,o[g]),b=a[g];let y;b===2?y=0:b===1?y=1:y=w;for(let S=0;S<w;S++)S===y&&(_=0),h[f++]=_}return h}getViewLineContent(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineContent(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineLength(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineLength(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineMinColumn(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMinColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineMaxColumn(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMaxColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineData(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineData(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLinesData(e,t,i){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);const s=this.projectedModelLineLineCounts.getIndexOf(e-1);let r=e;const o=s.index,a=s.remainder,l=[];for(let c=o,d=this.model.getLineCount();c<d;c++){const u=this.modelLineProjections[c];if(!u.isVisible())continue;const h=c===o?a:0;let f=u.getViewLineCount()-h,g=!1;if(r+f>t&&(g=!0,f=t-r+1),u.getViewLinesData(this.model,c+1,h,f,r-e,i,l),r+=f,g)break}return l}validateViewPosition(e,t,i){e=this._toValidViewLineNumber(e);const s=this.projectedModelLineLineCounts.getIndexOf(e-1),r=s.index,o=s.remainder,a=this.modelLineProjections[r],l=a.getViewLineMinColumn(this.model,r+1,o),c=a.getViewLineMaxColumn(this.model,r+1,o);t<l&&(t=l),t>c&&(t=c);const d=a.getModelColumnOfViewPosition(o,t);return this.model.validatePosition(new Y(r+1,d)).equals(i)?new Y(e,t):this.convertModelPositionToViewPosition(i.lineNumber,i.column)}validateViewRange(e,t){const i=this.validateViewPosition(e.startLineNumber,e.startColumn,t.getStartPosition()),s=this.validateViewPosition(e.endLineNumber,e.endColumn,t.getEndPosition());return new M(i.lineNumber,i.column,s.lineNumber,s.column)}convertViewPositionToModelPosition(e,t){const i=this.getViewLineInfo(e),s=this.modelLineProjections[i.modelLineNumber-1].getModelColumnOfViewPosition(i.modelLineWrappedLineIdx,t);return this.model.validatePosition(new Y(i.modelLineNumber,s))}convertViewRangeToModelRange(e){const t=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),i=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);return new M(t.lineNumber,t.column,i.lineNumber,i.column)}convertModelPositionToViewPosition(e,t,i=2,s=!1,r=!1){const o=this.model.validatePosition(new Y(e,t)),a=o.lineNumber,l=o.column;let c=a-1,d=!1;if(r)for(;c<this.modelLineProjections.length&&!this.modelLineProjections[c].isVisible();)c++,d=!0;else for(;c>0&&!this.modelLineProjections[c].isVisible();)c--,d=!0;if(c===0&&!this.modelLineProjections[c].isVisible())return new Y(s?0:1,1);const u=1+this.projectedModelLineLineCounts.getPrefixSum(c);let h;return d?r?h=this.modelLineProjections[c].getViewPositionOfModelPosition(u,1,i):h=this.modelLineProjections[c].getViewPositionOfModelPosition(u,this.model.getLineMaxColumn(c+1),i):h=this.modelLineProjections[a-1].getViewPositionOfModelPosition(u,l,i),h}convertModelRangeToViewRange(e,t=0){if(e.isEmpty()){const i=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,t);return M.fromPositions(i)}else{const i=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,1),s=this.convertModelPositionToViewPosition(e.endLineNumber,e.endColumn,0);return new M(i.lineNumber,i.column,s.lineNumber,s.column)}}getViewLineNumberOfModelPosition(e,t){let i=e-1;if(this.modelLineProjections[i].isVisible()){const r=1+this.projectedModelLineLineCounts.getPrefixSum(i);return this.modelLineProjections[i].getViewLineNumberOfModelPosition(r,t)}for(;i>0&&!this.modelLineProjections[i].isVisible();)i--;if(i===0&&!this.modelLineProjections[i].isVisible())return 1;const s=1+this.projectedModelLineLineCounts.getPrefixSum(i);return this.modelLineProjections[i].getViewLineNumberOfModelPosition(s,this.model.getLineMaxColumn(i+1))}getDecorationsInRange(e,t,i,s,r){const o=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),a=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);if(a.lineNumber-o.lineNumber<=e.endLineNumber-e.startLineNumber)return this.model.getDecorationsInRange(new M(o.lineNumber,1,a.lineNumber,a.column),t,i,s,r);let l=[];const c=o.lineNumber-1,d=a.lineNumber-1;let u=null;for(let p=c;p<=d;p++)if(this.modelLineProjections[p].isVisible())u===null&&(u=new Y(p+1,p===c?o.column:1));else if(u!==null){const w=this.model.getLineMaxColumn(p);l=l.concat(this.model.getDecorationsInRange(new M(u.lineNumber,u.column,p,w),t,i,s)),u=null}u!==null&&(l=l.concat(this.model.getDecorationsInRange(new M(u.lineNumber,u.column,a.lineNumber,a.column),t,i,s)),u=null),l.sort((p,_)=>{const w=M.compareRangesUsingStarts(p.range,_.range);return w===0?p.id<_.id?-1:p.id>_.id?1:0:w});const h=[];let f=0,g=null;for(const p of l){const _=p.id;g!==_&&(g=_,h[f++]=p)}return h}getInjectedTextAt(e){const t=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[t.modelLineNumber-1].getInjectedTextAt(t.modelLineWrappedLineIdx,e.column)}normalizePosition(e,t){const i=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[i.modelLineNumber-1].normalizePosition(i.modelLineWrappedLineIdx,e,t)}getLineIndentColumn(e){const t=this.getViewLineInfo(e);return t.modelLineWrappedLineIdx===0?this.model.getLineIndentColumn(t.modelLineNumber):0}}function lut(n){if(n.length===0)return[];const e=n.slice();e.sort(M.compareRangesUsingStarts);const t=[];let i=e[0].startLineNumber,s=e[0].endLineNumber;for(let r=1,o=e.length;r<o;r++){const a=e[r];a.startLineNumber>s+1?(t.push(new M(i,1,s,1)),i=a.startLineNumber,s=a.endLineNumber):a.endLineNumber>s&&(s=a.endLineNumber)}return t.push(new M(i,1,s,1)),t}class wde{constructor(e,t){this.modelLineNumber=e,this.modelLineWrappedLineIdx=t}}class Cde{constructor(e,t){this.modelRange=e,this.viewLines=t}}class cut{constructor(e){this._lines=e}convertViewPositionToModelPosition(e){return this._lines.convertViewPositionToModelPosition(e.lineNumber,e.column)}convertViewRangeToModelRange(e){return this._lines.convertViewRangeToModelRange(e)}validateViewPosition(e,t){return this._lines.validateViewPosition(e.lineNumber,e.column,t)}validateViewRange(e,t){return this._lines.validateViewRange(e,t)}convertModelPositionToViewPosition(e,t,i,s){return this._lines.convertModelPositionToViewPosition(e.lineNumber,e.column,t,i,s)}convertModelRangeToViewRange(e,t){return this._lines.convertModelRangeToViewRange(e,t)}modelPositionIsVisible(e){return this._lines.modelPositionIsVisible(e.lineNumber,e.column)}getModelLineViewLineCount(e){return this._lines.getModelLineViewLineCount(e)}getViewLineNumberOfModelPosition(e,t){return this._lines.getViewLineNumberOfModelPosition(e,t)}}class dut{constructor(e){this.model=e}dispose(){}createCoordinatesConverter(){return new uut(this)}getHiddenAreas(){return[]}setHiddenAreas(e){return!1}setTabSize(e){return!1}setWrappingSettings(e,t,i,s){return!1}createLineBreaksComputer(){const e=[];return{addRequest:(t,i,s)=>{e.push(null)},finalize:()=>e}}onModelFlushed(){}onModelLinesDeleted(e,t,i){return new Mj(t,i)}onModelLinesInserted(e,t,i,s){return new Pj(t,i)}onModelLineChanged(e,t,i){return[!1,new KSe(t,1),null,null]}acceptVersionId(e){}getViewLineCount(){return this.model.getLineCount()}getActiveIndentGuide(e,t,i){return{startLineNumber:e,endLineNumber:e,indent:0}}getViewLinesBracketGuides(e,t,i){return new Array(t-e+1).fill([])}getViewLinesIndentGuides(e,t){const i=t-e+1,s=new Array(i);for(let r=0;r<i;r++)s[r]=0;return s}getViewLineContent(e){return this.model.getLineContent(e)}getViewLineLength(e){return this.model.getLineLength(e)}getViewLineMinColumn(e){return this.model.getLineMinColumn(e)}getViewLineMaxColumn(e){return this.model.getLineMaxColumn(e)}getViewLineData(e){const t=this.model.tokenization.getLineTokens(e),i=t.getLineContent();return new jQ(i,!1,1,i.length+1,0,t.inflate(),null)}getViewLinesData(e,t,i){const s=this.model.getLineCount();e=Math.min(Math.max(1,e),s),t=Math.min(Math.max(1,t),s);const r=[];for(let o=e;o<=t;o++){const a=o-e;r[a]=i[a]?this.getViewLineData(o):null}return r}getDecorationsInRange(e,t,i,s,r){return this.model.getDecorationsInRange(e,t,i,s,r)}normalizePosition(e,t){return this.model.normalizePosition(e,t)}getLineIndentColumn(e){return this.model.getLineIndentColumn(e)}getInjectedTextAt(e){return null}}class uut{constructor(e){this._lines=e}_validPosition(e){return this._lines.model.validatePosition(e)}_validRange(e){return this._lines.model.validateRange(e)}convertViewPositionToModelPosition(e){return this._validPosition(e)}convertViewRangeToModelRange(e){return this._validRange(e)}validateViewPosition(e,t){return this._validPosition(t)}validateViewRange(e,t){return this._validRange(t)}convertModelPositionToViewPosition(e){return this._validPosition(e)}convertModelRangeToViewRange(e){return this._validRange(e)}modelPositionIsVisible(e){const t=this._lines.model.getLineCount();return!(e.lineNumber<1||e.lineNumber>t)}getModelLineViewLineCount(e){return 1}getViewLineNumberOfModelPosition(e,t){return e}}const Tv=Td.Right;class hut{constructor(e){this.persist=0,this._requiredLanes=1,this.lanes=new Uint8Array(Math.ceil((e+1)*Tv/8))}reset(e){const t=Math.ceil((e+1)*Tv/8);this.lanes.length<t?this.lanes=new Uint8Array(t):this.lanes.fill(0),this._requiredLanes=1}get requiredLanes(){return this._requiredLanes}push(e,t,i){i&&(this.persist|=1<<e-1);for(let s=t.startLineNumber;s<=t.endLineNumber;s++){const r=Tv*s+(e-1);this.lanes[r>>>3]|=1<<r%8,this._requiredLanes=Math.max(this._requiredLanes,this.countAtLine(s))}}getLanesAtLine(e){const t=[];let i=Tv*e;for(let s=0;s<Tv;s++)(this.persist&1<<s||this.lanes[i>>>3]&1<<i%8)&&t.push(s+1),i++;return t.length?t:[Td.Center]}countAtLine(e){let t=Tv*e,i=0;for(let s=0;s<Tv;s++)(this.persist&1<<s||this.lanes[t>>>3]&1<<t%8)&&i++,t++;return i}}let fut=class extends ee{constructor(e,t,i,s,r,o,a,l,c,d){if(super(),this.languageConfigurationService=a,this._themeService=l,this._attachedView=c,this._transactionalTarget=d,this.hiddenAreasModel=new put,this.previousHiddenAreas=[],this._editorId=e,this._configuration=t,this.model=i,this._eventDispatcher=new Bdt,this.onEvent=this._eventDispatcher.onEvent,this.cursorConfig=new TC(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._updateConfigurationViewLineCount=this._register(new yi(()=>this._updateConfigurationViewLineCountNow(),0)),this._hasFocus=!1,this._viewportStart=fJ.create(this.model),this.glyphLanes=new hut(0),this.model.isTooLargeForTokenization())this._lines=new dut(this.model);else{const u=this._configuration.options,h=u.get(50),f=u.get(140),g=u.get(147),p=u.get(139),_=u.get(130);this._lines=new aut(this._editorId,this.model,s,r,h,this.model.getOptions().tabSize,f,g.wrappingColumn,p,_)}this.coordinatesConverter=this._lines.createCoordinatesConverter(),this._cursor=this._register(new Ydt(i,this,this.coordinatesConverter,this.cursorConfig)),this.viewLayout=this._register(new nut(this._configuration,this.getLineCount(),o)),this._register(this.viewLayout.onDidScroll(u=>{u.scrollTopChanged&&this._handleVisibleLinesChanged(),u.scrollTopChanged&&this._viewportStart.invalidate(),this._eventDispatcher.emitSingleViewEvent(new Adt(u)),this._eventDispatcher.emitOutgoingEvent(new cJ(u.oldScrollWidth,u.oldScrollLeft,u.oldScrollHeight,u.oldScrollTop,u.scrollWidth,u.scrollLeft,u.scrollHeight,u.scrollTop))})),this._register(this.viewLayout.onDidContentSizeChange(u=>{this._eventDispatcher.emitOutgoingEvent(u)})),this._decorations=new sut(this._editorId,this.model,this._configuration,this._lines,this.coordinatesConverter),this._registerModelEvents(),this._register(this._configuration.onDidChangeFast(u=>{try{const h=this._eventDispatcher.beginEmitViewEvents();this._onConfigurationChanged(h,u)}finally{this._eventDispatcher.endEmitViewEvents()}})),this._register(PO.getInstance().onDidChange(()=>{this._eventDispatcher.emitSingleViewEvent(new Odt)})),this._register(this._themeService.onDidColorThemeChange(u=>{this._invalidateDecorationsColorCache(),this._eventDispatcher.emitSingleViewEvent(new Mdt(u))})),this._updateConfigurationViewLineCountNow()}dispose(){super.dispose(),this._decorations.dispose(),this._lines.dispose(),this._viewportStart.dispose(),this._eventDispatcher.dispose()}createLineBreaksComputer(){return this._lines.createLineBreaksComputer()}addViewEventHandler(e){this._eventDispatcher.addViewEventHandler(e)}removeViewEventHandler(e){this._eventDispatcher.removeViewEventHandler(e)}_updateConfigurationViewLineCountNow(){this._configuration.setViewLineCount(this._lines.getViewLineCount())}getModelVisibleRanges(){const e=this.viewLayout.getLinesViewportData(),t=new M(e.startLineNumber,this.getLineMinColumn(e.startLineNumber),e.endLineNumber,this.getLineMaxColumn(e.endLineNumber));return this._toModelVisibleRanges(t)}visibleLinesStabilized(){const e=this.getModelVisibleRanges();this._attachedView.setVisibleLines(e,!0)}_handleVisibleLinesChanged(){const e=this.getModelVisibleRanges();this._attachedView.setVisibleLines(e,!1)}setHasFocus(e){this._hasFocus=e,this._cursor.setHasFocus(e),this._eventDispatcher.emitSingleViewEvent(new Tdt(e)),this._eventDispatcher.emitOutgoingEvent(new lJ(!e,e))}onCompositionStart(){this._eventDispatcher.emitSingleViewEvent(new Edt)}onCompositionEnd(){this._eventDispatcher.emitSingleViewEvent(new Idt)}_captureStableViewport(){if(this._viewportStart.isValid&&this.viewLayout.getCurrentScrollTop()>0){const e=new Y(this._viewportStart.viewLineNumber,this.getLineMinColumn(this._viewportStart.viewLineNumber)),t=this.coordinatesConverter.convertViewPositionToModelPosition(e);return new Sde(t,this._viewportStart.startLineDelta)}return new Sde(null,0)}_onConfigurationChanged(e,t){const i=this._captureStableViewport(),s=this._configuration.options,r=s.get(50),o=s.get(140),a=s.get(147),l=s.get(139),c=s.get(130);this._lines.setWrappingSettings(r,o,a.wrappingColumn,l,c)&&(e.emitViewEvent(new mA),e.emitViewEvent(new _A),e.emitViewEvent(new Nv(null)),this._cursor.onLineMappingChanged(e),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this._updateConfigurationViewLineCount.schedule()),t.hasChanged(92)&&(this._decorations.reset(),e.emitViewEvent(new Nv(null))),t.hasChanged(99)&&(this._decorations.reset(),e.emitViewEvent(new Nv(null))),e.emitViewEvent(new Ddt(t)),this.viewLayout.onConfigurationChanged(t),i.recoverViewportStart(this.coordinatesConverter,this.viewLayout),TC.shouldRecreate(t)&&(this.cursorConfig=new TC(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig))}_registerModelEvents(){this._register(this.model.onDidChangeContentOrInjectedText(e=>{try{const i=this._eventDispatcher.beginEmitViewEvents();let s=!1,r=!1;const o=e instanceof qb?e.rawContentChangedEvent.changes:e.changes,a=e instanceof qb?e.rawContentChangedEvent.versionId:null,l=this._lines.createLineBreaksComputer();for(const u of o)switch(u.changeType){case 4:{for(let h=0;h<u.detail.length;h++){const f=u.detail[h];let g=u.injectedTexts[h];g&&(g=g.filter(p=>!p.ownerId||p.ownerId===this._editorId)),l.addRequest(f,g,null)}break}case 2:{let h=null;u.injectedText&&(h=u.injectedText.filter(f=>!f.ownerId||f.ownerId===this._editorId)),l.addRequest(u.detail,h,null);break}}const c=l.finalize(),d=new Gg(c);for(const u of o)switch(u.changeType){case 1:{this._lines.onModelFlushed(),i.emitViewEvent(new mA),this._decorations.reset(),this.viewLayout.onFlushed(this.getLineCount()),s=!0;break}case 3:{const h=this._lines.onModelLinesDeleted(a,u.fromLineNumber,u.toLineNumber);h!==null&&(i.emitViewEvent(h),this.viewLayout.onLinesDeleted(h.fromLineNumber,h.toLineNumber)),s=!0;break}case 4:{const h=d.takeCount(u.detail.length),f=this._lines.onModelLinesInserted(a,u.fromLineNumber,u.toLineNumber,h);f!==null&&(i.emitViewEvent(f),this.viewLayout.onLinesInserted(f.fromLineNumber,f.toLineNumber)),s=!0;break}case 2:{const h=d.dequeue(),[f,g,p,_]=this._lines.onModelLineChanged(a,u.lineNumber,h);r=f,g&&i.emitViewEvent(g),p&&(i.emitViewEvent(p),this.viewLayout.onLinesInserted(p.fromLineNumber,p.toLineNumber)),_&&(i.emitViewEvent(_),this.viewLayout.onLinesDeleted(_.fromLineNumber,_.toLineNumber));break}case 5:break}a!==null&&this._lines.acceptVersionId(a),this.viewLayout.onHeightMaybeChanged(),!s&&r&&(i.emitViewEvent(new _A),i.emitViewEvent(new Nv(null)),this._cursor.onLineMappingChanged(i),this._decorations.onLineMappingChanged())}finally{this._eventDispatcher.endEmitViewEvents()}const t=this._viewportStart.isValid;if(this._viewportStart.invalidate(),this._configuration.setModelLineCount(this.model.getLineCount()),this._updateConfigurationViewLineCountNow(),!this._hasFocus&&this.model.getAttachedEditorCount()>=2&&t){const i=this.model._getTrackedRange(this._viewportStart.modelTrackedRange);if(i){const s=this.coordinatesConverter.convertModelPositionToViewPosition(i.getStartPosition()),r=this.viewLayout.getVerticalOffsetForLineNumber(s.lineNumber);this.viewLayout.setScrollPosition({scrollTop:r+this._viewportStart.startLineDelta},1)}}try{const i=this._eventDispatcher.beginEmitViewEvents();e instanceof qb&&i.emitOutgoingEvent(new Kdt(e.contentChangedEvent)),this._cursor.onModelContentChanged(i,e)}finally{this._eventDispatcher.endEmitViewEvents()}this._handleVisibleLinesChanged()})),this._register(this.model.onDidChangeTokens(e=>{const t=[];for(let i=0,s=e.ranges.length;i<s;i++){const r=e.ranges[i],o=this.coordinatesConverter.convertModelPositionToViewPosition(new Y(r.fromLineNumber,1)).lineNumber,a=this.coordinatesConverter.convertModelPositionToViewPosition(new Y(r.toLineNumber,this.model.getLineMaxColumn(r.toLineNumber))).lineNumber;t[i]={fromLineNumber:o,toLineNumber:a}}this._eventDispatcher.emitSingleViewEvent(new Pdt(t)),this._eventDispatcher.emitOutgoingEvent(new Gdt(e))})),this._register(this.model.onDidChangeLanguageConfiguration(e=>{this._eventDispatcher.emitSingleViewEvent(new Rdt),this.cursorConfig=new TC(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new jdt(e))})),this._register(this.model.onDidChangeLanguage(e=>{this.cursorConfig=new TC(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new $dt(e))})),this._register(this.model.onDidChangeOptions(e=>{if(this._lines.setTabSize(this.model.getOptions().tabSize)){try{const t=this._eventDispatcher.beginEmitViewEvents();t.emitViewEvent(new mA),t.emitViewEvent(new _A),t.emitViewEvent(new Nv(null)),this._cursor.onLineMappingChanged(t),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount())}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule()}this.cursorConfig=new TC(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new qdt(e))})),this._register(this.model.onDidChangeDecorations(e=>{this._decorations.onModelDecorationsChanged(),this._eventDispatcher.emitSingleViewEvent(new Nv(e)),this._eventDispatcher.emitOutgoingEvent(new Udt(e))}))}setHiddenAreas(e,t){var o;this.hiddenAreasModel.setHiddenAreas(t,e);const i=this.hiddenAreasModel.getMergedRanges();if(i===this.previousHiddenAreas)return;this.previousHiddenAreas=i;const s=this._captureStableViewport();let r=!1;try{const a=this._eventDispatcher.beginEmitViewEvents();r=this._lines.setHiddenAreas(i),r&&(a.emitViewEvent(new mA),a.emitViewEvent(new _A),a.emitViewEvent(new Nv(null)),this._cursor.onLineMappingChanged(a),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.onHeightMaybeChanged());const l=(o=s.viewportStartModelPosition)==null?void 0:o.lineNumber;l&&i.some(d=>d.startLineNumber<=l&&l<=d.endLineNumber)||s.recoverViewportStart(this.coordinatesConverter,this.viewLayout)}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule(),r&&this._eventDispatcher.emitOutgoingEvent(new Vdt)}getVisibleRangesPlusViewportAboveBelow(){const e=this._configuration.options.get(146),t=this._configuration.options.get(67),i=Math.max(20,Math.round(e.height/t)),s=this.viewLayout.getLinesViewportData(),r=Math.max(1,s.completelyVisibleStartLineNumber-i),o=Math.min(this.getLineCount(),s.completelyVisibleEndLineNumber+i);return this._toModelVisibleRanges(new M(r,this.getLineMinColumn(r),o,this.getLineMaxColumn(o)))}getVisibleRanges(){const e=this.getCompletelyVisibleViewRange();return this._toModelVisibleRanges(e)}getHiddenAreas(){return this._lines.getHiddenAreas()}_toModelVisibleRanges(e){const t=this.coordinatesConverter.convertViewRangeToModelRange(e),i=this._lines.getHiddenAreas();if(i.length===0)return[t];const s=[];let r=0,o=t.startLineNumber,a=t.startColumn;const l=t.endLineNumber,c=t.endColumn;for(let d=0,u=i.length;d<u;d++){const h=i[d].startLineNumber,f=i[d].endLineNumber;f<o||h>l||(o<h&&(s[r++]=new M(o,a,h-1,this.model.getLineMaxColumn(h-1))),o=f+1,a=1)}return(o<l||o===l&&a<c)&&(s[r++]=new M(o,a,l,c)),s}getCompletelyVisibleViewRange(){const e=this.viewLayout.getLinesViewportData(),t=e.completelyVisibleStartLineNumber,i=e.completelyVisibleEndLineNumber;return new M(t,this.getLineMinColumn(t),i,this.getLineMaxColumn(i))}getCompletelyVisibleViewRangeAtScrollTop(e){const t=this.viewLayout.getLinesViewportDataAtScrollTop(e),i=t.completelyVisibleStartLineNumber,s=t.completelyVisibleEndLineNumber;return new M(i,this.getLineMinColumn(i),s,this.getLineMaxColumn(s))}saveState(){const e=this.viewLayout.saveState(),t=e.scrollTop,i=this.viewLayout.getLineNumberAtVerticalOffset(t),s=this.coordinatesConverter.convertViewPositionToModelPosition(new Y(i,this.getLineMinColumn(i))),r=this.viewLayout.getVerticalOffsetForLineNumber(i)-t;return{scrollLeft:e.scrollLeft,firstPosition:s,firstPositionDeltaTop:r}}reduceRestoreState(e){if(typeof e.firstPosition>"u")return this._reduceRestoreStateCompatibility(e);const t=this.model.validatePosition(e.firstPosition),i=this.coordinatesConverter.convertModelPositionToViewPosition(t),s=this.viewLayout.getVerticalOffsetForLineNumber(i.lineNumber)-e.firstPositionDeltaTop;return{scrollLeft:e.scrollLeft,scrollTop:s}}_reduceRestoreStateCompatibility(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTopWithoutViewZones}}getTabSize(){return this.model.getOptions().tabSize}getLineCount(){return this._lines.getViewLineCount()}setViewport(e,t,i){this._viewportStart.update(this,e)}getActiveIndentGuide(e,t,i){return this._lines.getActiveIndentGuide(e,t,i)}getLinesIndentGuides(e,t){return this._lines.getViewLinesIndentGuides(e,t)}getBracketGuidesInRangeByLine(e,t,i,s){return this._lines.getViewLinesBracketGuides(e,t,i,s)}getLineContent(e){return this._lines.getViewLineContent(e)}getLineLength(e){return this._lines.getViewLineLength(e)}getLineMinColumn(e){return this._lines.getViewLineMinColumn(e)}getLineMaxColumn(e){return this._lines.getViewLineMaxColumn(e)}getLineFirstNonWhitespaceColumn(e){const t=lo(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){const t=Nu(this.getLineContent(e));return t===-1?0:t+2}getMinimapDecorationsInRange(e){return this._decorations.getMinimapDecorationsInRange(e)}getDecorationsInViewport(e){return this._decorations.getDecorationsViewportData(e).decorations}getInjectedTextAt(e){return this._lines.getInjectedTextAt(e)}getViewportViewLineRenderingData(e,t){const s=this._decorations.getDecorationsViewportData(e).inlineDecorations[t-e.startLineNumber];return this._getViewLineRenderingData(t,s)}getViewLineRenderingData(e){const t=this._decorations.getInlineDecorationsOnLine(e);return this._getViewLineRenderingData(e,t)}_getViewLineRenderingData(e,t){const i=this.model.mightContainRTL(),s=this.model.mightContainNonBasicASCII(),r=this.getTabSize(),o=this._lines.getViewLineData(e);return o.inlineDecorations&&(t=[...t,...o.inlineDecorations.map(a=>a.toInlineDecoration(e))]),new ql(o.minColumn,o.maxColumn,o.content,o.continuesWithWrappedLine,i,s,o.tokens,t,r,o.startVisibleColumn)}getViewLineData(e){return this._lines.getViewLineData(e)}getMinimapLinesRenderingData(e,t,i){const s=this._lines.getViewLinesData(e,t,i);return new Qat(this.getTabSize(),s)}getAllOverviewRulerDecorations(e){const t=this.model.getOverviewRulerDecorations(this._editorId,tP(this._configuration.options)),i=new gut;for(const s of t){const r=s.options,o=r.overviewRuler;if(!o)continue;const a=o.position;if(a===0)continue;const l=o.getColor(e.value),c=this.coordinatesConverter.getViewLineNumberOfModelPosition(s.range.startLineNumber,s.range.startColumn),d=this.coordinatesConverter.getViewLineNumberOfModelPosition(s.range.endLineNumber,s.range.endColumn);i.accept(l,r.zIndex,c,d,a)}return i.asArray}_invalidateDecorationsColorCache(){const e=this.model.getOverviewRulerDecorations();for(const t of e){const i=t.options.overviewRuler;i==null||i.invalidateCachedColor();const s=t.options.minimap;s==null||s.invalidateCachedColor()}}getValueInRange(e,t){const i=this.coordinatesConverter.convertViewRangeToModelRange(e);return this.model.getValueInRange(i,t)}getValueLengthInRange(e,t){const i=this.coordinatesConverter.convertViewRangeToModelRange(e);return this.model.getValueLengthInRange(i,t)}modifyPosition(e,t){const i=this.coordinatesConverter.convertViewPositionToModelPosition(e),s=this.model.modifyPosition(i,t);return this.coordinatesConverter.convertModelPositionToViewPosition(s)}deduceModelPositionRelativeToViewPosition(e,t,i){const s=this.coordinatesConverter.convertViewPositionToModelPosition(e);this.model.getEOL().length===2&&(t<0?t-=i:t+=i);const o=this.model.getOffsetAt(s)+t;return this.model.getPositionAt(o)}getPlainTextToCopy(e,t,i){const s=i?`\r
`:this.model.getEOL();e=e.slice(0),e.sort(M.compareRangesUsingStarts);let r=!1,o=!1;for(const l of e)l.isEmpty()?r=!0:o=!0;if(!o){if(!t)return"";const l=e.map(d=>d.startLineNumber);let c="";for(let d=0;d<l.length;d++)d>0&&l[d-1]===l[d]||(c+=this.model.getLineContent(l[d])+s);return c}if(r&&t){const l=[];let c=0;for(const d of e){const u=d.startLineNumber;d.isEmpty()?u!==c&&l.push(this.model.getLineContent(u)):l.push(this.model.getValueInRange(d,i?2:0)),c=u}return l.length===1?l[0]:l}const a=[];for(const l of e)l.isEmpty()||a.push(this.model.getValueInRange(l,i?2:0));return a.length===1?a[0]:a}getRichTextToCopy(e,t){const i=this.model.getLanguageId();if(i===Ro||e.length!==1)return null;let s=e[0];if(s.isEmpty()){if(!t)return null;const d=s.startLineNumber;s=new M(d,this.model.getLineMinColumn(d),d,this.model.getLineMaxColumn(d))}const r=this._configuration.options.get(50),o=this._getColorMap(),l=/[:;\\\/<>]/.test(r.fontFamily)||r.fontFamily===To.fontFamily;let c;return l?c=To.fontFamily:(c=r.fontFamily,c=c.replace(/"/g,"'"),/[,']/.test(c)||/[+ ]/.test(c)&&(c=`'${c}'`),c=`${c}, ${To.fontFamily}`),{mode:i,html:`<div style="color: ${o[1]};background-color: ${o[2]};font-family: ${c};font-weight: ${r.fontWeight};font-size: ${r.fontSize}px;line-height: ${r.lineHeight}px;white-space: pre;">`+this._getHTMLToCopy(s,o)+"</div>"}}_getHTMLToCopy(e,t){const i=e.startLineNumber,s=e.startColumn,r=e.endLineNumber,o=e.endColumn,a=this.getTabSize();let l="";for(let c=i;c<=r;c++){const d=this.model.tokenization.getLineTokens(c),u=d.getLineContent(),h=c===i?s-1:0,f=c===r?o-1:u.length;u===""?l+="<br>":l+=ket(u,d.inflate(),t,h,f,a,wr)}return l}_getColorMap(){const e=In.getColorMap(),t=["#000000"];if(e)for(let i=1,s=e.length;i<s;i++)t[i]=ge.Format.CSS.formatHex(e[i]);return t}getPrimaryCursorState(){return this._cursor.getPrimaryCursorState()}getLastAddedCursorIndex(){return this._cursor.getLastAddedCursorIndex()}getCursorStates(){return this._cursor.getCursorStates()}setCursorStates(e,t,i){return this._withViewEventsCollector(s=>this._cursor.setStates(s,e,t,i))}getCursorColumnSelectData(){return this._cursor.getCursorColumnSelectData()}getCursorAutoClosedCharacters(){return this._cursor.getAutoClosedCharacters()}setCursorColumnSelectData(e){this._cursor.setCursorColumnSelectData(e)}getPrevEditOperationType(){return this._cursor.getPrevEditOperationType()}setPrevEditOperationType(e){this._cursor.setPrevEditOperationType(e)}getSelection(){return this._cursor.getSelection()}getSelections(){return this._cursor.getSelections()}getPosition(){return this._cursor.getPrimaryCursorState().modelState.position}setSelections(e,t,i=0){this._withViewEventsCollector(s=>this._cursor.setSelections(s,e,t,i))}saveCursorState(){return this._cursor.saveState()}restoreCursorState(e){this._withViewEventsCollector(t=>this._cursor.restoreState(t,e))}_executeCursorEdit(e){if(this._cursor.context.cursorConfig.readOnly){this._eventDispatcher.emitOutgoingEvent(new zdt);return}this._withViewEventsCollector(e)}executeEdits(e,t,i){this._executeCursorEdit(s=>this._cursor.executeEdits(s,e,t,i))}startComposition(){this._executeCursorEdit(e=>this._cursor.startComposition(e))}endComposition(e){this._executeCursorEdit(t=>this._cursor.endComposition(t,e))}type(e,t){this._executeCursorEdit(i=>this._cursor.type(i,e,t))}compositionType(e,t,i,s,r){this._executeCursorEdit(o=>this._cursor.compositionType(o,e,t,i,s,r))}paste(e,t,i,s){this._executeCursorEdit(r=>this._cursor.paste(r,e,t,i,s))}cut(e){this._executeCursorEdit(t=>this._cursor.cut(t,e))}executeCommand(e,t){this._executeCursorEdit(i=>this._cursor.executeCommand(i,e,t))}executeCommands(e,t){this._executeCursorEdit(i=>this._cursor.executeCommands(i,e,t))}revealAllCursors(e,t,i=!1){this._withViewEventsCollector(s=>this._cursor.revealAll(s,e,i,0,t,0))}revealPrimaryCursor(e,t,i=!1){this._withViewEventsCollector(s=>this._cursor.revealPrimary(s,e,i,0,t,0))}revealTopMostCursor(e){const t=this._cursor.getTopMostViewPosition(),i=new M(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(s=>s.emitViewEvent(new vE(e,!1,i,null,0,!0,0)))}revealBottomMostCursor(e){const t=this._cursor.getBottomMostViewPosition(),i=new M(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(s=>s.emitViewEvent(new vE(e,!1,i,null,0,!0,0)))}revealRange(e,t,i,s,r){this._withViewEventsCollector(o=>o.emitViewEvent(new vE(e,!1,i,null,s,t,r)))}changeWhitespace(e){this.viewLayout.changeWhitespace(e)&&(this._eventDispatcher.emitSingleViewEvent(new Fdt),this._eventDispatcher.emitOutgoingEvent(new Hdt))}_withViewEventsCollector(e){return this._transactionalTarget.batchChanges(()=>{try{const t=this._eventDispatcher.beginEmitViewEvents();return e(t)}finally{this._eventDispatcher.endEmitViewEvents()}})}batchEvents(e){this._withViewEventsCollector(()=>{e()})}normalizePosition(e,t){return this._lines.normalizePosition(e,t)}getLineIndentColumn(e){return this._lines.getLineIndentColumn(e)}};class fJ{static create(e){const t=e._setTrackedRange(null,new M(1,1,1,1),1);return new fJ(e,1,!1,t,0)}get viewLineNumber(){return this._viewLineNumber}get isValid(){return this._isValid}get modelTrackedRange(){return this._modelTrackedRange}get startLineDelta(){return this._startLineDelta}constructor(e,t,i,s,r){this._model=e,this._viewLineNumber=t,this._isValid=i,this._modelTrackedRange=s,this._startLineDelta=r}dispose(){this._model._setTrackedRange(this._modelTrackedRange,null,1)}update(e,t){const i=e.coordinatesConverter.convertViewPositionToModelPosition(new Y(t,e.getLineMinColumn(t))),s=e.model._setTrackedRange(this._modelTrackedRange,new M(i.lineNumber,i.column,i.lineNumber,i.column),1),r=e.viewLayout.getVerticalOffsetForLineNumber(t),o=e.viewLayout.getCurrentScrollTop();this._viewLineNumber=t,this._isValid=!0,this._modelTrackedRange=s,this._startLineDelta=o-r}invalidate(){this._isValid=!1}}class gut{constructor(){this._asMap=Object.create(null),this.asArray=[]}accept(e,t,i,s,r){const o=this._asMap[e];if(o){const a=o.data,l=a[a.length-3],c=a[a.length-1];if(l===r&&c+1>=i){s>c&&(a[a.length-1]=s);return}a.push(r,i,s)}else{const a=new _D(e,t,[r,i,s]);this._asMap[e]=a,this.asArray.push(a)}}}class put{constructor(){this.hiddenAreas=new Map,this.shouldRecompute=!1,this.ranges=[]}setHiddenAreas(e,t){const i=this.hiddenAreas.get(e);i&&yde(i,t)||(this.hiddenAreas.set(e,t),this.shouldRecompute=!0)}getMergedRanges(){if(!this.shouldRecompute)return this.ranges;this.shouldRecompute=!1;const e=Array.from(this.hiddenAreas.values()).reduce((t,i)=>mut(t,i),[]);return yde(this.ranges,e)?this.ranges:(this.ranges=e,this.ranges)}}function mut(n,e){const t=[];let i=0,s=0;for(;i<n.length&&s<e.length;){const r=n[i],o=e[s];if(r.endLineNumber<o.startLineNumber-1)t.push(n[i++]);else if(o.endLineNumber<r.startLineNumber-1)t.push(e[s++]);else{const a=Math.min(r.startLineNumber,o.startLineNumber),l=Math.max(r.endLineNumber,o.endLineNumber);t.push(new M(a,1,l,1)),i++,s++}}for(;i<n.length;)t.push(n[i++]);for(;s<e.length;)t.push(e[s++]);return t}function yde(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].equalsRange(e[t]))return!1;return!0}class Sde{constructor(e,t){this.viewportStartModelPosition=e,this.startLineDelta=t}recoverViewportStart(e,t){if(!this.viewportStartModelPosition)return;const i=e.convertModelPositionToViewPosition(this.viewportStartModelPosition),s=t.getVerticalOffsetForLineNumber(i.lineNumber);t.setScrollPosition({scrollTop:s+this.startLineDelta},1)}}var _ut=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Of=function(n,e){return function(t,i){e(t,i,n)}},Gv,aw;let kD=(aw=class extends ee{get isSimpleWidget(){return this._configuration.isSimpleWidget}get contextMenuId(){return this._configuration.contextMenuId}constructor(e,t,i,s,r,o,a,l,c,d,u,h){super(),this.languageConfigurationService=u,this._deliveryQueue=yje(),this._contributions=this._register(new Sdt),this._onDidDispose=this._register(new X),this.onDidDispose=this._onDidDispose.event,this._onDidChangeModelContent=this._register(new X({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelContent=this._onDidChangeModelContent.event,this._onDidChangeModelLanguage=this._register(new X({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelLanguage=this._onDidChangeModelLanguage.event,this._onDidChangeModelLanguageConfiguration=this._register(new X({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelLanguageConfiguration=this._onDidChangeModelLanguageConfiguration.event,this._onDidChangeModelOptions=this._register(new X({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelOptions=this._onDidChangeModelOptions.event,this._onDidChangeModelDecorations=this._register(new X({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelDecorations=this._onDidChangeModelDecorations.event,this._onDidChangeModelTokens=this._register(new X({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelTokens=this._onDidChangeModelTokens.event,this._onDidChangeConfiguration=this._register(new X({deliveryQueue:this._deliveryQueue})),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._onWillChangeModel=this._register(new X({deliveryQueue:this._deliveryQueue})),this.onWillChangeModel=this._onWillChangeModel.event,this._onDidChangeModel=this._register(new X({deliveryQueue:this._deliveryQueue})),this.onDidChangeModel=this._onDidChangeModel.event,this._onDidChangeCursorPosition=this._register(new X({deliveryQueue:this._deliveryQueue})),this.onDidChangeCursorPosition=this._onDidChangeCursorPosition.event,this._onDidChangeCursorSelection=this._register(new X({deliveryQueue:this._deliveryQueue})),this.onDidChangeCursorSelection=this._onDidChangeCursorSelection.event,this._onDidAttemptReadOnlyEdit=this._register(new Yr(this._contributions,this._deliveryQueue)),this.onDidAttemptReadOnlyEdit=this._onDidAttemptReadOnlyEdit.event,this._onDidLayoutChange=this._register(new X({deliveryQueue:this._deliveryQueue})),this.onDidLayoutChange=this._onDidLayoutChange.event,this._editorTextFocus=this._register(new xde({deliveryQueue:this._deliveryQueue})),this.onDidFocusEditorText=this._editorTextFocus.onDidChangeToTrue,this.onDidBlurEditorText=this._editorTextFocus.onDidChangeToFalse,this._editorWidgetFocus=this._register(new xde({deliveryQueue:this._deliveryQueue})),this.onDidFocusEditorWidget=this._editorWidgetFocus.onDidChangeToTrue,this.onDidBlurEditorWidget=this._editorWidgetFocus.onDidChangeToFalse,this._onWillType=this._register(new Yr(this._contributions,this._deliveryQueue)),this.onWillType=this._onWillType.event,this._onDidType=this._register(new Yr(this._contributions,this._deliveryQueue)),this.onDidType=this._onDidType.event,this._onDidCompositionStart=this._register(new Yr(this._contributions,this._deliveryQueue)),this.onDidCompositionStart=this._onDidCompositionStart.event,this._onDidCompositionEnd=this._register(new Yr(this._contributions,this._deliveryQueue)),this.onDidCompositionEnd=this._onDidCompositionEnd.event,this._onDidPaste=this._register(new Yr(this._contributions,this._deliveryQueue)),this.onDidPaste=this._onDidPaste.event,this._onMouseUp=this._register(new Yr(this._contributions,this._deliveryQueue)),this.onMouseUp=this._onMouseUp.event,this._onMouseDown=this._register(new Yr(this._contributions,this._deliveryQueue)),this.onMouseDown=this._onMouseDown.event,this._onMouseDrag=this._register(new Yr(this._contributions,this._deliveryQueue)),this.onMouseDrag=this._onMouseDrag.event,this._onMouseDrop=this._register(new Yr(this._contributions,this._deliveryQueue)),this.onMouseDrop=this._onMouseDrop.event,this._onMouseDropCanceled=this._register(new Yr(this._contributions,this._deliveryQueue)),this.onMouseDropCanceled=this._onMouseDropCanceled.event,this._onDropIntoEditor=this._register(new Yr(this._contributions,this._deliveryQueue)),this.onDropIntoEditor=this._onDropIntoEditor.event,this._onContextMenu=this._register(new Yr(this._contributions,this._deliveryQueue)),this.onContextMenu=this._onContextMenu.event,this._onMouseMove=this._register(new Yr(this._contributions,this._deliveryQueue)),this.onMouseMove=this._onMouseMove.event,this._onMouseLeave=this._register(new Yr(this._contributions,this._deliveryQueue)),this.onMouseLeave=this._onMouseLeave.event,this._onMouseWheel=this._register(new Yr(this._contributions,this._deliveryQueue)),this.onMouseWheel=this._onMouseWheel.event,this._onKeyUp=this._register(new Yr(this._contributions,this._deliveryQueue)),this.onKeyUp=this._onKeyUp.event,this._onKeyDown=this._register(new Yr(this._contributions,this._deliveryQueue)),this.onKeyDown=this._onKeyDown.event,this._onDidContentSizeChange=this._register(new X({deliveryQueue:this._deliveryQueue})),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._onDidScrollChange=this._register(new X({deliveryQueue:this._deliveryQueue})),this.onDidScrollChange=this._onDidScrollChange.event,this._onDidChangeViewZones=this._register(new X({deliveryQueue:this._deliveryQueue})),this.onDidChangeViewZones=this._onDidChangeViewZones.event,this._onDidChangeHiddenAreas=this._register(new X({deliveryQueue:this._deliveryQueue})),this.onDidChangeHiddenAreas=this._onDidChangeHiddenAreas.event,this._updateCounter=0,this._onBeginUpdate=this._register(new X),this.onBeginUpdate=this._onBeginUpdate.event,this._onEndUpdate=this._register(new X),this.onEndUpdate=this._onEndUpdate.event,this._actions=new Map,this._bannerDomNode=null,this._dropIntoEditorDecorations=this.createDecorationsCollection(),r.willCreateCodeEditor();const f={...t};this._domElement=e,this._overflowWidgetsDomNode=f.overflowWidgetsDomNode,delete f.overflowWidgetsDomNode,this._id=++vut,this._decorationTypeKeysToIds={},this._decorationTypeSubtypes={},this._telemetryData=i.telemetryData,this._configuration=this._register(this._createConfiguration(i.isSimpleWidget||!1,i.contextMenuId??(i.isSimpleWidget?ze.SimpleEditorContext:ze.EditorContext),f,d)),this._register(this._configuration.onDidChange(_=>{this._onDidChangeConfiguration.fire(_);const w=this._configuration.options;if(_.hasChanged(146)){const b=w.get(146);this._onDidLayoutChange.fire(b)}})),this._contextKeyService=this._register(a.createScoped(this._domElement)),this._notificationService=c,this._codeEditorService=r,this._commandService=o,this._themeService=l,this._register(new wut(this,this._contextKeyService)),this._register(new Cut(this,this._contextKeyService,h)),this._instantiationService=this._register(s.createChild(new Ux([at,this._contextKeyService]))),this._modelData=null,this._focusTracker=new yut(e,this._overflowWidgetsDomNode),this._register(this._focusTracker.onChange(()=>{this._editorWidgetFocus.setValue(this._focusTracker.hasFocus())})),this._contentWidgets={},this._overlayWidgets={},this._glyphMarginWidgets={};let g;Array.isArray(i.contributions)?g=i.contributions:g=$b.getEditorContributions(),this._contributions.initialize(this,g,this._instantiationService);for(const _ of $b.getEditorActions()){if(this._actions.has(_.id)){pt(new Error(`Cannot have two actions with the same id ${_.id}`));continue}const w=new $Se(_.id,_.label,_.alias,_.metadata,_.precondition??void 0,b=>this._instantiationService.invokeFunction(y=>Promise.resolve(_.runEditorCommand(y,this,b))),this._contextKeyService);this._actions.set(w.id,w)}const p=()=>!this._configuration.options.get(92)&&this._configuration.options.get(36).enabled;this._register(new Mqe(this._domElement,{onDragOver:_=>{if(!p())return;const w=this.getTargetAtClientPoint(_.clientX,_.clientY);w!=null&&w.position&&this.showDropIndicatorAt(w.position)},onDrop:async _=>{if(!p()||(this.removeDropIndicator(),!_.dataTransfer))return;const w=this.getTargetAtClientPoint(_.clientX,_.clientY);w!=null&&w.position&&this._onDropIntoEditor.fire({position:w.position,event:_})},onDragLeave:()=>{this.removeDropIndicator()},onDragEnd:()=>{this.removeDropIndicator()}})),this._codeEditorService.addCodeEditor(this)}writeScreenReaderContent(e){var t;(t=this._modelData)==null||t.view.writeScreenReaderContent(e)}_createConfiguration(e,t,i,s){return new gj(e,t,i,this._domElement,s)}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return tT.ICodeEditor}dispose(){this._codeEditorService.removeCodeEditor(this),this._focusTracker.dispose(),this._actions.clear(),this._contentWidgets={},this._overlayWidgets={},this._removeDecorationTypes(),this._postDetachModelCleanup(this._detachModel()),this._onDidDispose.fire(),super.dispose()}invokeWithinContext(e){return this._instantiationService.invokeFunction(e)}updateOptions(e){this._configuration.updateOptions(e||{})}getOptions(){return this._configuration.options}getOption(e){return this._configuration.options.get(e)}getRawOptions(){return this._configuration.getRawOptions()}getOverflowWidgetsDomNode(){return this._overflowWidgetsDomNode}getConfiguredWordAtPosition(e){return this._modelData?di.getWordAtPosition(this._modelData.model,this._configuration.options.get(132),this._configuration.options.get(131),e):null}getValue(e=null){if(!this._modelData)return"";const t=!!(e&&e.preserveBOM);let i=0;return e&&e.lineEnding&&e.lineEnding===`
`?i=1:e&&e.lineEnding&&e.lineEnding===`\r
`&&(i=2),this._modelData.model.getValue(i,t)}setValue(e){try{if(this._beginUpdate(),!this._modelData)return;this._modelData.model.setValue(e)}finally{this._endUpdate()}}getModel(){return this._modelData?this._modelData.model:null}setModel(e=null){var t;try{this._beginUpdate();const i=e;if(this._modelData===null&&i===null||this._modelData&&this._modelData.model===i)return;const s={oldModelUrl:((t=this._modelData)==null?void 0:t.model.uri)||null,newModelUrl:(i==null?void 0:i.uri)||null};this._onWillChangeModel.fire(s);const r=this.hasTextFocus(),o=this._detachModel();this._attachModel(i),r&&this.hasModel()&&this.focus(),this._removeDecorationTypes(),this._onDidChangeModel.fire(s),this._postDetachModelCleanup(o),this._contributionsDisposable=this._contributions.onAfterModelAttached()}finally{this._endUpdate()}}_removeDecorationTypes(){if(this._decorationTypeKeysToIds={},this._decorationTypeSubtypes){for(const e in this._decorationTypeSubtypes){const t=this._decorationTypeSubtypes[e];for(const i in t)this._removeDecorationType(e+"-"+i)}this._decorationTypeSubtypes={}}}getVisibleRanges(){return this._modelData?this._modelData.viewModel.getVisibleRanges():[]}getVisibleRangesPlusViewportAboveBelow(){return this._modelData?this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow():[]}getWhitespaces(){return this._modelData?this._modelData.viewModel.viewLayout.getWhitespaces():[]}static _getVerticalOffsetAfterPosition(e,t,i,s){const r=e.model.validatePosition({lineNumber:t,column:i}),o=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(r);return e.viewModel.viewLayout.getVerticalOffsetAfterLineNumber(o.lineNumber,s)}getTopForLineNumber(e,t=!1){return this._modelData?Gv._getVerticalOffsetForPosition(this._modelData,e,1,t):-1}getTopForPosition(e,t){return this._modelData?Gv._getVerticalOffsetForPosition(this._modelData,e,t,!1):-1}static _getVerticalOffsetForPosition(e,t,i,s=!1){const r=e.model.validatePosition({lineNumber:t,column:i}),o=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(r);return e.viewModel.viewLayout.getVerticalOffsetForLineNumber(o.lineNumber,s)}getBottomForLineNumber(e,t=!1){if(!this._modelData)return-1;const i=this._modelData.model.getLineMaxColumn(e);return Gv._getVerticalOffsetAfterPosition(this._modelData,e,i,t)}setHiddenAreas(e,t){var i;(i=this._modelData)==null||i.viewModel.setHiddenAreas(e.map(s=>M.lift(s)),t)}getVisibleColumnFromPosition(e){if(!this._modelData)return e.column;const t=this._modelData.model.validatePosition(e),i=this._modelData.model.getOptions().tabSize;return ms.visibleColumnFromColumn(this._modelData.model.getLineContent(t.lineNumber),t.column,i)+1}getPosition(){return this._modelData?this._modelData.viewModel.getPosition():null}setPosition(e,t="api"){if(this._modelData){if(!Y.isIPosition(e))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(t,[{selectionStartLineNumber:e.lineNumber,selectionStartColumn:e.column,positionLineNumber:e.lineNumber,positionColumn:e.column}])}}_sendRevealRange(e,t,i,s){if(!this._modelData)return;if(!M.isIRange(e))throw new Error("Invalid arguments");const r=this._modelData.model.validateRange(e),o=this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(r);this._modelData.viewModel.revealRange("api",i,o,t,s)}revealLine(e,t=0){this._revealLine(e,0,t)}revealLineInCenter(e,t=0){this._revealLine(e,1,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._revealLine(e,2,t)}revealLineNearTop(e,t=0){this._revealLine(e,5,t)}_revealLine(e,t,i){if(typeof e!="number")throw new Error("Invalid arguments");this._sendRevealRange(new M(e,1,e,1),t,!1,i)}revealPosition(e,t=0){this._revealPosition(e,0,!0,t)}revealPositionInCenter(e,t=0){this._revealPosition(e,1,!0,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._revealPosition(e,2,!0,t)}revealPositionNearTop(e,t=0){this._revealPosition(e,5,!0,t)}_revealPosition(e,t,i,s){if(!Y.isIPosition(e))throw new Error("Invalid arguments");this._sendRevealRange(new M(e.lineNumber,e.column,e.lineNumber,e.column),t,i,s)}getSelection(){return this._modelData?this._modelData.viewModel.getSelection():null}getSelections(){return this._modelData?this._modelData.viewModel.getSelections():null}setSelection(e,t="api"){const i=$e.isISelection(e),s=M.isIRange(e);if(!i&&!s)throw new Error("Invalid arguments");if(i)this._setSelectionImpl(e,t);else if(s){const r={selectionStartLineNumber:e.startLineNumber,selectionStartColumn:e.startColumn,positionLineNumber:e.endLineNumber,positionColumn:e.endColumn};this._setSelectionImpl(r,t)}}_setSelectionImpl(e,t){if(!this._modelData)return;const i=new $e(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn);this._modelData.viewModel.setSelections(t,[i])}revealLines(e,t,i=0){this._revealLines(e,t,0,i)}revealLinesInCenter(e,t,i=0){this._revealLines(e,t,1,i)}revealLinesInCenterIfOutsideViewport(e,t,i=0){this._revealLines(e,t,2,i)}revealLinesNearTop(e,t,i=0){this._revealLines(e,t,5,i)}_revealLines(e,t,i,s){if(typeof e!="number"||typeof t!="number")throw new Error("Invalid arguments");this._sendRevealRange(new M(e,1,t,1),i,!1,s)}revealRange(e,t=0,i=!1,s=!0){this._revealRange(e,i?1:0,s,t)}revealRangeInCenter(e,t=0){this._revealRange(e,1,!0,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._revealRange(e,2,!0,t)}revealRangeNearTop(e,t=0){this._revealRange(e,5,!0,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._revealRange(e,6,!0,t)}revealRangeAtTop(e,t=0){this._revealRange(e,3,!0,t)}_revealRange(e,t,i,s){if(!M.isIRange(e))throw new Error("Invalid arguments");this._sendRevealRange(M.lift(e),t,i,s)}setSelections(e,t="api",i=0){if(this._modelData){if(!e||e.length===0)throw new Error("Invalid arguments");for(let s=0,r=e.length;s<r;s++)if(!$e.isISelection(e[s]))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(t,e,i)}}getContentWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getContentWidth():-1}getScrollWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollWidth():-1}getScrollLeft(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollLeft():-1}getContentHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getContentHeight():-1}getScrollHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollHeight():-1}getScrollTop(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollTop():-1}setScrollLeft(e,t=1){if(this._modelData){if(typeof e!="number")throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollLeft:e},t)}}setScrollTop(e,t=1){if(this._modelData){if(typeof e!="number")throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollTop:e},t)}}setScrollPosition(e,t=1){this._modelData&&this._modelData.viewModel.viewLayout.setScrollPosition(e,t)}hasPendingScrollAnimation(){return this._modelData?this._modelData.viewModel.viewLayout.hasPendingScrollAnimation():!1}saveViewState(){if(!this._modelData)return null;const e=this._contributions.saveViewState(),t=this._modelData.viewModel.saveCursorState(),i=this._modelData.viewModel.saveState();return{cursorState:t,viewState:i,contributionsState:e}}restoreViewState(e){if(!this._modelData||!this._modelData.hasRealView)return;const t=e;if(t&&t.cursorState&&t.viewState){const i=t.cursorState;Array.isArray(i)?i.length>0&&this._modelData.viewModel.restoreCursorState(i):this._modelData.viewModel.restoreCursorState([i]),this._contributions.restoreViewState(t.contributionsState||{});const s=this._modelData.viewModel.reduceRestoreState(t.viewState);this._modelData.view.restoreState(s)}}handleInitialized(){var e;(e=this._getViewModel())==null||e.visibleLinesStabilized()}getContribution(e){return this._contributions.get(e)}getActions(){return Array.from(this._actions.values())}getSupportedActions(){let e=this.getActions();return e=e.filter(t=>t.isSupported()),e}getAction(e){return this._actions.get(e)||null}trigger(e,t,i){i=i||{};try{switch(this._beginUpdate(),t){case"compositionStart":this._startComposition();return;case"compositionEnd":this._endComposition(e);return;case"type":{const r=i;this._type(e,r.text||"");return}case"replacePreviousChar":{const r=i;this._compositionType(e,r.text||"",r.replaceCharCnt||0,0,0);return}case"compositionType":{const r=i;this._compositionType(e,r.text||"",r.replacePrevCharCnt||0,r.replaceNextCharCnt||0,r.positionDelta||0);return}case"paste":{const r=i;this._paste(e,r.text||"",r.pasteOnNewLine||!1,r.multicursorText||null,r.mode||null,r.clipboardEvent);return}case"cut":this._cut(e);return}const s=this.getAction(t);if(s){Promise.resolve(s.run(i)).then(void 0,pt);return}if(!this._modelData||this._triggerEditorCommand(e,t,i))return;this._triggerCommand(t,i)}finally{this._endUpdate()}}_triggerCommand(e,t){this._commandService.executeCommand(e,t)}_startComposition(){this._modelData&&(this._modelData.viewModel.startComposition(),this._onDidCompositionStart.fire())}_endComposition(e){this._modelData&&(this._modelData.viewModel.endComposition(e),this._onDidCompositionEnd.fire())}_type(e,t){!this._modelData||t.length===0||(e==="keyboard"&&this._onWillType.fire(t),this._modelData.viewModel.type(t,e),e==="keyboard"&&this._onDidType.fire(t))}_compositionType(e,t,i,s,r){this._modelData&&this._modelData.viewModel.compositionType(t,i,s,r,e)}_paste(e,t,i,s,r,o){if(!this._modelData)return;const a=this._modelData.viewModel,l=a.getSelection().getStartPosition();a.paste(t,i,s,e);const c=a.getSelection().getStartPosition();e==="keyboard"&&this._onDidPaste.fire({clipboardEvent:o,range:new M(l.lineNumber,l.column,c.lineNumber,c.column),languageId:r})}_cut(e){this._modelData&&this._modelData.viewModel.cut(e)}_triggerEditorCommand(e,t,i){const s=$b.getEditorCommand(t);return s?(i=i||{},i.source=e,this._instantiationService.invokeFunction(r=>{Promise.resolve(s.runEditorCommand(r,this,i)).then(void 0,pt)}),!0):!1}_getViewModel(){return this._modelData?this._modelData.viewModel:null}pushUndoStop(){return!this._modelData||this._configuration.options.get(92)?!1:(this._modelData.model.pushStackElement(),!0)}popUndoStop(){return!this._modelData||this._configuration.options.get(92)?!1:(this._modelData.model.popStackElement(),!0)}executeEdits(e,t,i){if(!this._modelData||this._configuration.options.get(92))return!1;let s;return i?Array.isArray(i)?s=()=>i:s=i:s=()=>null,this._modelData.viewModel.executeEdits(e,t,s),!0}executeCommand(e,t){this._modelData&&this._modelData.viewModel.executeCommand(t,e)}executeCommands(e,t){this._modelData&&this._modelData.viewModel.executeCommands(t,e)}createDecorationsCollection(e){return new Sut(this,e)}changeDecorations(e){return this._modelData?this._modelData.model.changeDecorations(e,this._id):null}getLineDecorations(e){return this._modelData?this._modelData.model.getLineDecorations(e,this._id,tP(this._configuration.options)):null}getDecorationsInRange(e){return this._modelData?this._modelData.model.getDecorationsInRange(e,this._id,tP(this._configuration.options)):null}deltaDecorations(e,t){return this._modelData?e.length===0&&t.length===0?e:this._modelData.model.deltaDecorations(e,t,this._id):[]}removeDecorations(e){!this._modelData||e.length===0||this._modelData.model.changeDecorations(t=>{t.deltaDecorations(e,[])})}removeDecorationsByType(e){const t=this._decorationTypeKeysToIds[e];t&&this.changeDecorations(i=>i.deltaDecorations(t,[])),this._decorationTypeKeysToIds.hasOwnProperty(e)&&delete this._decorationTypeKeysToIds[e],this._decorationTypeSubtypes.hasOwnProperty(e)&&delete this._decorationTypeSubtypes[e]}getLayoutInfo(){return this._configuration.options.get(146)}createOverviewRuler(e){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.createOverviewRuler(e)}getContainerDomNode(){return this._domElement}getDomNode(){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.domNode.domNode}delegateVerticalScrollbarPointerDown(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.delegateVerticalScrollbarPointerDown(e)}delegateScrollFromMouseWheelEvent(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.delegateScrollFromMouseWheelEvent(e)}layout(e,t=!1){this._configuration.observeContainer(e),t||this.render()}focus(){!this._modelData||!this._modelData.hasRealView||this._modelData.view.focus()}hasTextFocus(){return!this._modelData||!this._modelData.hasRealView?!1:this._modelData.view.isFocused()}hasWidgetFocus(){return this._focusTracker&&this._focusTracker.hasFocus()}addContentWidget(e){const t={widget:e,position:e.getPosition()};this._contentWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a content widget with the same id:"+e.getId()),this._contentWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addContentWidget(t)}layoutContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const i=this._contentWidgets[t];i.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutContentWidget(i)}}removeContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const i=this._contentWidgets[t];delete this._contentWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeContentWidget(i)}}addOverlayWidget(e){const t={widget:e,position:e.getPosition()};this._overlayWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting an overlay widget with the same id."),this._overlayWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addOverlayWidget(t)}layoutOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const i=this._overlayWidgets[t];i.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutOverlayWidget(i)}}removeOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const i=this._overlayWidgets[t];delete this._overlayWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeOverlayWidget(i)}}addGlyphMarginWidget(e){const t={widget:e,position:e.getPosition()};this._glyphMarginWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a glyph margin widget with the same id."),this._glyphMarginWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addGlyphMarginWidget(t)}layoutGlyphMarginWidget(e){const t=e.getId();if(this._glyphMarginWidgets.hasOwnProperty(t)){const i=this._glyphMarginWidgets[t];i.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutGlyphMarginWidget(i)}}removeGlyphMarginWidget(e){const t=e.getId();if(this._glyphMarginWidgets.hasOwnProperty(t)){const i=this._glyphMarginWidgets[t];delete this._glyphMarginWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeGlyphMarginWidget(i)}}changeViewZones(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.change(e)}getTargetAtClientPoint(e,t){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.getTargetAtClientPoint(e,t)}getScrolledVisiblePosition(e){if(!this._modelData||!this._modelData.hasRealView)return null;const t=this._modelData.model.validatePosition(e),i=this._configuration.options,s=i.get(146),r=Gv._getVerticalOffsetForPosition(this._modelData,t.lineNumber,t.column)-this.getScrollTop(),o=this._modelData.view.getOffsetForColumn(t.lineNumber,t.column)+s.glyphMarginWidth+s.lineNumbersWidth+s.decorationsWidth-this.getScrollLeft();return{top:r,left:o,height:i.get(67)}}getOffsetForColumn(e,t){return!this._modelData||!this._modelData.hasRealView?-1:this._modelData.view.getOffsetForColumn(e,t)}render(e=!1){!this._modelData||!this._modelData.hasRealView||this._modelData.viewModel.batchEvents(()=>{this._modelData.view.render(!0,e)})}setAriaOptions(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.setAriaOptions(e)}applyFontInfo(e){rr(e,this._configuration.options.get(50))}setBanner(e,t){this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._bannerDomNode.remove(),this._bannerDomNode=e,this._configuration.setReservedHeight(e?t:0),this._bannerDomNode&&this._domElement.prepend(this._bannerDomNode)}_attachModel(e){if(!e){this._modelData=null;return}const t=[];this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._configuration.setIsDominatedByLongLines(e.isDominatedByLongLines()),this._configuration.setModelLineCount(e.getLineCount());const i=e.onBeforeAttached(),s=new fut(this._id,this._configuration,e,rJ.create(nt(this._domElement)),oJ.create(this._configuration.options),a=>il(nt(this._domElement),a),this.languageConfigurationService,this._themeService,i,{batchChanges:a=>{try{return this._beginUpdate(),a()}finally{this._endUpdate()}}});t.push(e.onWillDispose(()=>this.setModel(null))),t.push(s.onEvent(a=>{switch(a.kind){case 0:this._onDidContentSizeChange.fire(a);break;case 1:this._editorTextFocus.setValue(a.hasFocus);break;case 2:this._onDidScrollChange.fire(a);break;case 3:this._onDidChangeViewZones.fire();break;case 4:this._onDidChangeHiddenAreas.fire();break;case 5:this._onDidAttemptReadOnlyEdit.fire();break;case 6:{if(a.reachedMaxCursorCount){const u=this.getOption(80),h=v("cursors.maximum","The number of cursors has been limited to {0}. Consider using [find and replace](https://code.visualstudio.com/docs/editor/codebasics#_find-and-replace) for larger changes or increase the editor multi cursor limit setting.",u);this._notificationService.prompt(nB.Warning,h,[{label:"Find and Replace",run:()=>{this._commandService.executeCommand("editor.action.startFindReplaceAction")}},{label:v("goToSetting","Increase Multi Cursor Limit"),run:()=>{this._commandService.executeCommand("workbench.action.openSettings2",{query:"editor.multiCursorLimit"})}}])}const l=[];for(let u=0,h=a.selections.length;u<h;u++)l[u]=a.selections[u].getPosition();const c={position:l[0],secondaryPositions:l.slice(1),reason:a.reason,source:a.source};this._onDidChangeCursorPosition.fire(c);const d={selection:a.selections[0],secondarySelections:a.selections.slice(1),modelVersionId:a.modelVersionId,oldSelections:a.oldSelections,oldModelVersionId:a.oldModelVersionId,source:a.source,reason:a.reason};this._onDidChangeCursorSelection.fire(d);break}case 7:this._onDidChangeModelDecorations.fire(a.event);break;case 8:this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._onDidChangeModelLanguage.fire(a.event);break;case 9:this._onDidChangeModelLanguageConfiguration.fire(a.event);break;case 10:this._onDidChangeModelContent.fire(a.event);break;case 11:this._onDidChangeModelOptions.fire(a.event);break;case 12:this._onDidChangeModelTokens.fire(a.event);break}}));const[r,o]=this._createView(s);if(o){this._domElement.appendChild(r.domNode.domNode);let a=Object.keys(this._contentWidgets);for(let l=0,c=a.length;l<c;l++){const d=a[l];r.addContentWidget(this._contentWidgets[d])}a=Object.keys(this._overlayWidgets);for(let l=0,c=a.length;l<c;l++){const d=a[l];r.addOverlayWidget(this._overlayWidgets[d])}a=Object.keys(this._glyphMarginWidgets);for(let l=0,c=a.length;l<c;l++){const d=a[l];r.addGlyphMarginWidget(this._glyphMarginWidgets[d])}r.render(!1,!0),r.domNode.domNode.setAttribute("data-uri",e.uri.toString())}this._modelData=new but(e,s,r,o,t,i)}_createView(e){let t;this.isSimpleWidget?t={paste:(r,o,a,l)=>{this._paste("keyboard",r,o,a,l)},type:r=>{this._type("keyboard",r)},compositionType:(r,o,a,l)=>{this._compositionType("keyboard",r,o,a,l)},startComposition:()=>{this._startComposition()},endComposition:()=>{this._endComposition("keyboard")},cut:()=>{this._cut("keyboard")}}:t={paste:(r,o,a,l)=>{const c={text:r,pasteOnNewLine:o,multicursorText:a,mode:l};this._commandService.executeCommand("paste",c)},type:r=>{const o={text:r};this._commandService.executeCommand("type",o)},compositionType:(r,o,a,l)=>{if(a||l){const c={text:r,replacePrevCharCnt:o,replaceNextCharCnt:a,positionDelta:l};this._commandService.executeCommand("compositionType",c)}else{const c={text:r,replaceCharCnt:o};this._commandService.executeCommand("replacePreviousChar",c)}},startComposition:()=>{this._commandService.executeCommand("compositionStart",{})},endComposition:()=>{this._commandService.executeCommand("compositionEnd",{})},cut:()=>{this._commandService.executeCommand("cut",{})}};const i=new zB(e.coordinatesConverter);return i.onKeyDown=r=>this._onKeyDown.fire(r),i.onKeyUp=r=>this._onKeyUp.fire(r),i.onContextMenu=r=>this._onContextMenu.fire(r),i.onMouseMove=r=>this._onMouseMove.fire(r),i.onMouseLeave=r=>this._onMouseLeave.fire(r),i.onMouseDown=r=>this._onMouseDown.fire(r),i.onMouseUp=r=>this._onMouseUp.fire(r),i.onMouseDrag=r=>this._onMouseDrag.fire(r),i.onMouseDrop=r=>this._onMouseDrop.fire(r),i.onMouseDropCanceled=r=>this._onMouseDropCanceled.fire(r),i.onMouseWheel=r=>this._onMouseWheel.fire(r),[new Ij(t,this._configuration,this._themeService.getColorTheme(),e,i,this._overflowWidgetsDomNode,this._instantiationService),!0]}_postDetachModelCleanup(e){e==null||e.removeAllDecorationsWithOwnerId(this._id)}_detachModel(){var i;if((i=this._contributionsDisposable)==null||i.dispose(),this._contributionsDisposable=void 0,!this._modelData)return null;const e=this._modelData.model,t=this._modelData.hasRealView?this._modelData.view.domNode.domNode:null;return this._modelData.dispose(),this._modelData=null,this._domElement.removeAttribute("data-mode-id"),t&&this._domElement.contains(t)&&t.remove(),this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._bannerDomNode.remove(),e}_removeDecorationType(e){this._codeEditorService.removeDecorationType(e)}hasModel(){return this._modelData!==null}showDropIndicatorAt(e){const t=[{range:new M(e.lineNumber,e.column,e.lineNumber,e.column),options:Gv.dropIntoEditorDecorationOptions}];this._dropIntoEditorDecorations.set(t),this.revealPosition(e,1)}removeDropIndicator(){this._dropIntoEditorDecorations.clear()}setContextValue(e,t){this._contextKeyService.createKey(e,t)}_beginUpdate(){this._updateCounter++,this._updateCounter===1&&this._onBeginUpdate.fire()}_endUpdate(){this._updateCounter--,this._updateCounter===0&&this._onEndUpdate.fire()}},Gv=aw,aw.dropIntoEditorDecorationOptions=_t.register({description:"workbench-dnd-target",className:"dnd-target"}),aw);kD=Gv=_ut([Of(3,Ze),Of(4,ri),Of(5,Vi),Of(6,at),Of(7,ws),Of(8,jn),Of(9,al),Of(10,vn),Of(11,Be)],kD);let vut=0;class but{constructor(e,t,i,s,r,o){this.model=e,this.viewModel=t,this.view=i,this.hasRealView=s,this.listenersToRemove=r,this.attachedView=o}dispose(){Ti(this.listenersToRemove),this.model.onBeforeDetached(this.attachedView),this.hasRealView&&this.view.dispose(),this.viewModel.dispose()}}class xde extends ee{constructor(e){super(),this._emitterOptions=e,this._onDidChangeToTrue=this._register(new X(this._emitterOptions)),this.onDidChangeToTrue=this._onDidChangeToTrue.event,this._onDidChangeToFalse=this._register(new X(this._emitterOptions)),this.onDidChangeToFalse=this._onDidChangeToFalse.event,this._value=0}setValue(e){const t=e?2:1;this._value!==t&&(this._value=t,this._value===2?this._onDidChangeToTrue.fire():this._value===1&&this._onDidChangeToFalse.fire())}}class Yr extends X{constructor(e,t){super({deliveryQueue:t}),this._contributions=e}fire(e){this._contributions.onBeforeInteractionEvent(),super.fire(e)}}class wut extends ee{constructor(e,t){super(),this._editor=e,t.createKey("editorId",e.getId()),this._editorSimpleInput=F.editorSimpleInput.bindTo(t),this._editorFocus=F.focus.bindTo(t),this._textInputFocus=F.textInputFocus.bindTo(t),this._editorTextFocus=F.editorTextFocus.bindTo(t),this._tabMovesFocus=F.tabMovesFocus.bindTo(t),this._editorReadonly=F.readOnly.bindTo(t),this._inDiffEditor=F.inDiffEditor.bindTo(t),this._editorColumnSelection=F.columnSelection.bindTo(t),this._hasMultipleSelections=F.hasMultipleSelections.bindTo(t),this._hasNonEmptySelection=F.hasNonEmptySelection.bindTo(t),this._canUndo=F.canUndo.bindTo(t),this._canRedo=F.canRedo.bindTo(t),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromConfig())),this._register(this._editor.onDidChangeCursorSelection(()=>this._updateFromSelection())),this._register(this._editor.onDidFocusEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidFocusEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidChangeModel(()=>this._updateFromModel())),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromModel())),this._register(YS.onDidChangeTabFocus(i=>this._tabMovesFocus.set(i))),this._updateFromConfig(),this._updateFromSelection(),this._updateFromFocus(),this._updateFromModel(),this._editorSimpleInput.set(this._editor.isSimpleWidget)}_updateFromConfig(){const e=this._editor.getOptions();this._tabMovesFocus.set(YS.getTabFocusMode()),this._editorReadonly.set(e.get(92)),this._inDiffEditor.set(e.get(61)),this._editorColumnSelection.set(e.get(22))}_updateFromSelection(){const e=this._editor.getSelections();e?(this._hasMultipleSelections.set(e.length>1),this._hasNonEmptySelection.set(e.some(t=>!t.isEmpty()))):(this._hasMultipleSelections.reset(),this._hasNonEmptySelection.reset())}_updateFromFocus(){this._editorFocus.set(this._editor.hasWidgetFocus()&&!this._editor.isSimpleWidget),this._editorTextFocus.set(this._editor.hasTextFocus()&&!this._editor.isSimpleWidget),this._textInputFocus.set(this._editor.hasTextFocus())}_updateFromModel(){const e=this._editor.getModel();this._canUndo.set(!!(e&&e.canUndo())),this._canRedo.set(!!(e&&e.canRedo()))}}class Cut extends ee{constructor(e,t,i){super(),this._editor=e,this._contextKeyService=t,this._languageFeaturesService=i,this._langId=F.languageId.bindTo(t),this._hasCompletionItemProvider=F.hasCompletionItemProvider.bindTo(t),this._hasCodeActionsProvider=F.hasCodeActionsProvider.bindTo(t),this._hasCodeLensProvider=F.hasCodeLensProvider.bindTo(t),this._hasDefinitionProvider=F.hasDefinitionProvider.bindTo(t),this._hasDeclarationProvider=F.hasDeclarationProvider.bindTo(t),this._hasImplementationProvider=F.hasImplementationProvider.bindTo(t),this._hasTypeDefinitionProvider=F.hasTypeDefinitionProvider.bindTo(t),this._hasHoverProvider=F.hasHoverProvider.bindTo(t),this._hasDocumentHighlightProvider=F.hasDocumentHighlightProvider.bindTo(t),this._hasDocumentSymbolProvider=F.hasDocumentSymbolProvider.bindTo(t),this._hasReferenceProvider=F.hasReferenceProvider.bindTo(t),this._hasRenameProvider=F.hasRenameProvider.bindTo(t),this._hasSignatureHelpProvider=F.hasSignatureHelpProvider.bindTo(t),this._hasInlayHintsProvider=F.hasInlayHintsProvider.bindTo(t),this._hasDocumentFormattingProvider=F.hasDocumentFormattingProvider.bindTo(t),this._hasDocumentSelectionFormattingProvider=F.hasDocumentSelectionFormattingProvider.bindTo(t),this._hasMultipleDocumentFormattingProvider=F.hasMultipleDocumentFormattingProvider.bindTo(t),this._hasMultipleDocumentSelectionFormattingProvider=F.hasMultipleDocumentSelectionFormattingProvider.bindTo(t),this._isInEmbeddedEditor=F.isInEmbeddedEditor.bindTo(t);const s=()=>this._update();this._register(e.onDidChangeModel(s)),this._register(e.onDidChangeModelLanguage(s)),this._register(i.completionProvider.onDidChange(s)),this._register(i.codeActionProvider.onDidChange(s)),this._register(i.codeLensProvider.onDidChange(s)),this._register(i.definitionProvider.onDidChange(s)),this._register(i.declarationProvider.onDidChange(s)),this._register(i.implementationProvider.onDidChange(s)),this._register(i.typeDefinitionProvider.onDidChange(s)),this._register(i.hoverProvider.onDidChange(s)),this._register(i.documentHighlightProvider.onDidChange(s)),this._register(i.documentSymbolProvider.onDidChange(s)),this._register(i.referenceProvider.onDidChange(s)),this._register(i.renameProvider.onDidChange(s)),this._register(i.documentFormattingEditProvider.onDidChange(s)),this._register(i.documentRangeFormattingEditProvider.onDidChange(s)),this._register(i.signatureHelpProvider.onDidChange(s)),this._register(i.inlayHintsProvider.onDidChange(s)),s()}dispose(){super.dispose()}reset(){this._contextKeyService.bufferChangeEvents(()=>{this._langId.reset(),this._hasCompletionItemProvider.reset(),this._hasCodeActionsProvider.reset(),this._hasCodeLensProvider.reset(),this._hasDefinitionProvider.reset(),this._hasDeclarationProvider.reset(),this._hasImplementationProvider.reset(),this._hasTypeDefinitionProvider.reset(),this._hasHoverProvider.reset(),this._hasDocumentHighlightProvider.reset(),this._hasDocumentSymbolProvider.reset(),this._hasReferenceProvider.reset(),this._hasRenameProvider.reset(),this._hasDocumentFormattingProvider.reset(),this._hasDocumentSelectionFormattingProvider.reset(),this._hasSignatureHelpProvider.reset(),this._isInEmbeddedEditor.reset()})}_update(){const e=this._editor.getModel();if(!e){this.reset();return}this._contextKeyService.bufferChangeEvents(()=>{this._langId.set(e.getLanguageId()),this._hasCompletionItemProvider.set(this._languageFeaturesService.completionProvider.has(e)),this._hasCodeActionsProvider.set(this._languageFeaturesService.codeActionProvider.has(e)),this._hasCodeLensProvider.set(this._languageFeaturesService.codeLensProvider.has(e)),this._hasDefinitionProvider.set(this._languageFeaturesService.definitionProvider.has(e)),this._hasDeclarationProvider.set(this._languageFeaturesService.declarationProvider.has(e)),this._hasImplementationProvider.set(this._languageFeaturesService.implementationProvider.has(e)),this._hasTypeDefinitionProvider.set(this._languageFeaturesService.typeDefinitionProvider.has(e)),this._hasHoverProvider.set(this._languageFeaturesService.hoverProvider.has(e)),this._hasDocumentHighlightProvider.set(this._languageFeaturesService.documentHighlightProvider.has(e)),this._hasDocumentSymbolProvider.set(this._languageFeaturesService.documentSymbolProvider.has(e)),this._hasReferenceProvider.set(this._languageFeaturesService.referenceProvider.has(e)),this._hasRenameProvider.set(this._languageFeaturesService.renameProvider.has(e)),this._hasSignatureHelpProvider.set(this._languageFeaturesService.signatureHelpProvider.has(e)),this._hasInlayHintsProvider.set(this._languageFeaturesService.inlayHintsProvider.has(e)),this._hasDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.has(e)||this._languageFeaturesService.documentRangeFormattingEditProvider.has(e)),this._hasDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.has(e)),this._hasMultipleDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.all(e).length+this._languageFeaturesService.documentRangeFormattingEditProvider.all(e).length>1),this._hasMultipleDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.all(e).length>1),this._isInEmbeddedEditor.set(e.uri.scheme===mt.walkThroughSnippet||e.uri.scheme===mt.vscodeChatCodeBlock)})}}class yut extends ee{constructor(e,t){super(),this._onChange=this._register(new X),this.onChange=this._onChange.event,this._hadFocus=void 0,this._hasDomElementFocus=!1,this._domFocusTracker=this._register(Hu(e)),this._overflowWidgetsDomNodeHasFocus=!1,this._register(this._domFocusTracker.onDidFocus(()=>{this._hasDomElementFocus=!0,this._update()})),this._register(this._domFocusTracker.onDidBlur(()=>{this._hasDomElementFocus=!1,this._update()})),t&&(this._overflowWidgetsDomNode=this._register(Hu(t)),this._register(this._overflowWidgetsDomNode.onDidFocus(()=>{this._overflowWidgetsDomNodeHasFocus=!0,this._update()})),this._register(this._overflowWidgetsDomNode.onDidBlur(()=>{this._overflowWidgetsDomNodeHasFocus=!1,this._update()})))}_update(){const e=this._hasDomElementFocus||this._overflowWidgetsDomNodeHasFocus;this._hadFocus!==e&&(this._hadFocus=e,this._onChange.fire(void 0))}hasFocus(){return this._hadFocus??!1}}class Sut{get length(){return this._decorationIds.length}constructor(e,t){this._editor=e,this._decorationIds=[],this._isChangingDecorations=!1,Array.isArray(t)&&t.length>0&&this.set(t)}onDidChange(e,t,i){return this._editor.onDidChangeModelDecorations(s=>{this._isChangingDecorations||e.call(t,s)},i)}getRange(e){return!this._editor.hasModel()||e>=this._decorationIds.length?null:this._editor.getModel().getDecorationRange(this._decorationIds[e])}getRanges(){if(!this._editor.hasModel())return[];const e=this._editor.getModel(),t=[];for(const i of this._decorationIds){const s=e.getDecorationRange(i);s&&t.push(s)}return t}has(e){return this._decorationIds.includes(e.id)}clear(){this._decorationIds.length!==0&&this.set([])}set(e){try{this._isChangingDecorations=!0,this._editor.changeDecorations(t=>{this._decorationIds=t.deltaDecorations(this._decorationIds,e)})}finally{this._isChangingDecorations=!1}return this._decorationIds}append(e){let t=[];try{this._isChangingDecorations=!0,this._editor.changeDecorations(i=>{t=i.deltaDecorations([],e),this._decorationIds=this._decorationIds.concat(t)})}finally{this._isChangingDecorations=!1}return t}}const xut=encodeURIComponent("<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='"),Lut=encodeURIComponent("'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>");function J8(n){return xut+encodeURIComponent(n.toString())+Lut}const kut=encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" height="3" width="12"><g fill="'),Eut=encodeURIComponent('"><circle cx="1" cy="1" r="1"/><circle cx="5" cy="1" r="1"/><circle cx="9" cy="1" r="1"/></g></svg>');function Iut(n){return kut+encodeURIComponent(n.toString())+Eut}zc((n,e)=>{const t=n.getColor(aB);t&&e.addRule(`.monaco-editor .squiggly-error { background: url("data:image/svg+xml,${J8(t)}") repeat-x bottom left; }`);const i=n.getColor(Jg);i&&e.addRule(`.monaco-editor .squiggly-warning { background: url("data:image/svg+xml,${J8(i)}") repeat-x bottom left; }`);const s=n.getColor(af);s&&e.addRule(`.monaco-editor .squiggly-info { background: url("data:image/svg+xml,${J8(s)}") repeat-x bottom left; }`);const r=n.getColor(_Xe);r&&e.addRule(`.monaco-editor .squiggly-hint { background: url("data:image/svg+xml,${Iut(r)}") no-repeat bottom left; }`);const o=n.getColor(int);o&&e.addRule(`.monaco-editor.showUnused .squiggly-inline-unnecessary { opacity: ${o.rgba.a}; }`)});class ju{static capture(e){if(e.getScrollTop()===0||e.hasPendingScrollAnimation())return new ju(e.getScrollTop(),e.getContentHeight(),null,0,null);let t=null,i=0;const s=e.getVisibleRanges();if(s.length>0){t=s[0].getStartPosition();const r=e.getTopForPosition(t.lineNumber,t.column);i=e.getScrollTop()-r}return new ju(e.getScrollTop(),e.getContentHeight(),t,i,e.getPosition())}constructor(e,t,i,s,r){this._initialScrollTop=e,this._initialContentHeight=t,this._visiblePosition=i,this._visiblePositionScrollDelta=s,this._cursorPosition=r}restore(e){if(!(this._initialContentHeight===e.getContentHeight()&&this._initialScrollTop===e.getScrollTop())&&this._visiblePosition){const t=e.getTopForPosition(this._visiblePosition.lineNumber,this._visiblePosition.column);e.setScrollTop(t+this._visiblePositionScrollDelta)}}restoreRelativeVerticalPositionOfCursor(e){if(this._initialContentHeight===e.getContentHeight()&&this._initialScrollTop===e.getScrollTop())return;const t=e.getPosition();if(!this._cursorPosition||!t)return;const i=e.getTopForLineNumber(t.lineNumber)-e.getTopForLineNumber(this._cursorPosition.lineNumber);e.setScrollTop(e.getScrollTop()+i,1)}}function Dut(n,e,t,i){if(n.length===0)return e;if(e.length===0)return n;const s=[];let r=0,o=0;for(;r<n.length&&o<e.length;){const a=n[r],l=e[o],c=t(a),d=t(l);c<d?(s.push(a),r++):c>d?(s.push(l),o++):(s.push(i(a,l)),r++,o++)}for(;r<n.length;)s.push(n[r]),r++;for(;o<e.length;)s.push(e[o]),o++;return s}function VO(n,e){const t=new ue,i=n.createDecorationsCollection();return t.add(qN({debugName:()=>`Apply decorations from ${e.debugName}`},s=>{const r=e.read(s);i.set(r)})),t.add({dispose:()=>{i.clear()}}),t}function M1(n,e){return n.appendChild(e),Ye(()=>{e.remove()})}function Nut(n,e){return n.prepend(e),Ye(()=>{e.remove()})}class GSe extends ee{get width(){return this._width}get height(){return this._height}get automaticLayout(){return this._automaticLayout}constructor(e,t){super(),this._automaticLayout=!1,this.elementSizeObserver=this._register(new ESe(e,t)),this._width=Nt(this,this.elementSizeObserver.getWidth()),this._height=Nt(this,this.elementSizeObserver.getHeight()),this._register(this.elementSizeObserver.onDidChange(i=>pn(s=>{this._width.set(this.elementSizeObserver.getWidth(),s),this._height.set(this.elementSizeObserver.getHeight(),s)})))}observe(e){this.elementSizeObserver.observe(e)}setAutomaticLayout(e){this._automaticLayout=e,e?this.elementSizeObserver.startObserving():this.elementSizeObserver.stopObserving()}}function Lde(n,e,t){let i=e.get(),s=i,r=i;const o=Nt("animatedValue",i);let a=-1;const l=300;let c;t.add(GN({createEmptyChangeSummary:()=>({animate:!1}),handleChange:(u,h)=>(u.didChange(e)&&(h.animate=h.animate||u.change),!0)},(u,h)=>{c!==void 0&&(n.cancelAnimationFrame(c),c=void 0),s=r,i=e.read(u),a=Date.now()-(h.animate?0:l),d()}));function d(){const u=Date.now()-a;r=Math.floor(Tut(u,s,i-s,l)),u<l?c=n.requestAnimationFrame(d):r=i,o.set(r,void 0)}return o}function Tut(n,e,t,i){return n===i?e+t:t*(-Math.pow(2,-10*n/i)+1)+e}class gJ extends ee{constructor(e,t,i){super(),this._register(new Oj(e,i)),this._register(tp(i,{height:t.actualHeight,top:t.actualTop}))}}class P1{get afterLineNumber(){return this._afterLineNumber.get()}constructor(e,t){this._afterLineNumber=e,this.heightInPx=t,this.domNode=document.createElement("div"),this._actualTop=Nt(this,void 0),this._actualHeight=Nt(this,void 0),this.actualTop=this._actualTop,this.actualHeight=this._actualHeight,this.showInHiddenAreas=!0,this.onChange=this._afterLineNumber,this.onDomNodeTop=i=>{this._actualTop.set(i,void 0)},this.onComputedHeight=i=>{this._actualHeight.set(i,void 0)}}}const q4=class q4{constructor(e,t){this._editor=e,this._domElement=t,this._overlayWidgetId=`managedOverlayWidget-${q4._counter++}`,this._overlayWidget={getId:()=>this._overlayWidgetId,getDomNode:()=>this._domElement,getPosition:()=>null},this._editor.addOverlayWidget(this._overlayWidget)}dispose(){this._editor.removeOverlayWidget(this._overlayWidget)}};q4._counter=0;let Oj=q4;function tp(n,e){return gt(t=>{for(let[i,s]of Object.entries(e))s&&typeof s=="object"&&"read"in s&&(s=s.read(t)),typeof s=="number"&&(s=`${s}px`),i=i.replace(/[A-Z]/g,r=>"-"+r.toLowerCase()),n.style[i]=s})}function zO(n,e,t,i){const s=new ue,r=[];return s.add(da((o,a)=>{const l=e.read(o),c=new Map,d=new Map;t&&t(!0),n.changeViewZones(u=>{for(const h of r)u.removeZone(h),i==null||i.delete(h);r.length=0;for(const h of l){const f=u.addZone(h);h.setZoneId&&h.setZoneId(f),r.push(f),i==null||i.add(f),c.set(h,f)}}),t&&t(!1),a.add(GN({createEmptyChangeSummary(){return{zoneIds:[]}},handleChange(u,h){const f=d.get(u.changedObservable);return f!==void 0&&h.zoneIds.push(f),!0}},(u,h)=>{for(const f of l)f.onChange&&(d.set(f.onChange,c.get(f)),f.onChange.read(u));t&&t(!0),n.changeViewZones(f=>{for(const g of h.zoneIds)f.layoutZone(g)}),t&&t(!1)}))})),s.add({dispose(){t&&t(!0),n.changeViewZones(o=>{for(const a of r)o.removeZone(a)}),i==null||i.clear(),t&&t(!1)}}),s}class Rut extends mn{dispose(){super.dispose(!0)}}function kde(n,e){const t=VI(e,s=>s.original.startLineNumber<=n.lineNumber);if(!t)return M.fromPositions(n);if(t.original.endLineNumberExclusive<=n.lineNumber){const s=n.lineNumber-t.original.endLineNumberExclusive+t.modified.endLineNumberExclusive;return M.fromPositions(new Y(s,n.column))}if(!t.innerChanges)return M.fromPositions(new Y(t.modified.startLineNumber,1));const i=VI(t.innerChanges,s=>s.originalRange.getStartPosition().isBeforeOrEqual(n));if(!i){const s=n.lineNumber-t.original.startLineNumber+t.modified.startLineNumber;return M.fromPositions(new Y(s,n.column))}if(i.originalRange.containsPosition(n))return i.modifiedRange;{const s=Aut(i.originalRange.getEndPosition(),n);return M.fromPositions(s.addToPosition(i.modifiedRange.getEndPosition()))}}function Aut(n,e){return n.lineNumber===e.lineNumber?new Rd(0,e.column-n.column):new Rd(e.lineNumber-n.lineNumber,e.column-1)}function Mut(n,e){let t;return n.filter(i=>{const s=e(i,t);return t=i,s})}class UO{static create(e,t=void 0){return new Ede(e,e,t)}static createWithDisposable(e,t,i=void 0){const s=new ue;return s.add(t),s.add(e),new Ede(e,s,i)}}class Ede extends UO{constructor(e,t,i){super(),this.object=e,this._disposable=t,this._debugOwner=i,this._refCount=1,this._isDisposed=!1,this._owners=[],i&&this._addOwner(i)}_addOwner(e){e&&this._owners.push(e)}createNewRef(e){return this._refCount++,e&&this._addOwner(e),new Put(this,e)}dispose(){this._isDisposed||(this._isDisposed=!0,this._decreaseRefCount(this._debugOwner))}_decreaseRefCount(e){if(this._refCount--,this._refCount===0&&this._disposable.dispose(),e){const t=this._owners.indexOf(e);t!==-1&&this._owners.splice(t,1)}}}class Put extends UO{constructor(e,t){super(),this._base=e,this._debugOwner=t,this._isDisposed=!1}get object(){return this._base.object}createNewRef(e){return this._base.createNewRef(e)}dispose(){this._isDisposed||(this._isDisposed=!0,this._base._decreaseRefCount(this._debugOwner))}}var pJ=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},mJ=function(n,e){return function(t,i){e(t,i,n)}};const Out=Xi("diff-review-insert",ye.add,v("accessibleDiffViewerInsertIcon","Icon for 'Insert' in accessible diff viewer.")),Fut=Xi("diff-review-remove",ye.remove,v("accessibleDiffViewerRemoveIcon","Icon for 'Remove' in accessible diff viewer.")),But=Xi("diff-review-close",ye.close,v("accessibleDiffViewerCloseIcon","Icon for 'Close' in accessible diff viewer."));var iS;let Ib=(iS=class extends ee{constructor(e,t,i,s,r,o,a,l,c){super(),this._parentNode=e,this._visible=t,this._setVisible=i,this._canClose=s,this._width=r,this._height=o,this._diffs=a,this._models=l,this._instantiationService=c,this._state=sv(this,(d,u)=>{const h=this._visible.read(d);if(this._parentNode.style.visibility=h?"visible":"hidden",!h)return null;const f=u.add(this._instantiationService.createInstance(Fj,this._diffs,this._models,this._setVisible,this._canClose)),g=u.add(this._instantiationService.createInstance(Bj,this._parentNode,f,this._width,this._height,this._models));return{model:f,view:g}}).recomputeInitiallyAndOnChange(this._store)}next(){pn(e=>{const t=this._visible.get();this._setVisible(!0,e),t&&this._state.get().model.nextGroup(e)})}prev(){pn(e=>{this._setVisible(!0,e),this._state.get().model.previousGroup(e)})}close(){pn(e=>{this._setVisible(!1,e)})}},iS._ttPolicy=up("diffReview",{createHTML:e=>e}),iS);Ib=pJ([mJ(8,Ze)],Ib);let Fj=class extends ee{constructor(e,t,i,s,r){super(),this._diffs=e,this._models=t,this._setVisible=i,this.canClose=s,this._accessibilitySignalService=r,this._groups=Nt(this,[]),this._currentGroupIdx=Nt(this,0),this._currentElementIdx=Nt(this,0),this.groups=this._groups,this.currentGroup=this._currentGroupIdx.map((o,a)=>this._groups.read(a)[o]),this.currentGroupIndex=this._currentGroupIdx,this.currentElement=this._currentElementIdx.map((o,a)=>{var l;return(l=this.currentGroup.read(a))==null?void 0:l.lines[o]}),this._register(gt(o=>{const a=this._diffs.read(o);if(!a){this._groups.set([],void 0);return}const l=Wut(a,this._models.getOriginalModel().getLineCount(),this._models.getModifiedModel().getLineCount());pn(c=>{const d=this._models.getModifiedPosition();if(d){const u=l.findIndex(h=>(d==null?void 0:d.lineNumber)<h.range.modified.endLineNumberExclusive);u!==-1&&this._currentGroupIdx.set(u,c)}this._groups.set(l,c)})})),this._register(gt(o=>{const a=this.currentElement.read(o);(a==null?void 0:a.type)===yo.Deleted?this._accessibilitySignalService.playSignal(Ll.diffLineDeleted,{source:"accessibleDiffViewer.currentElementChanged"}):(a==null?void 0:a.type)===yo.Added&&this._accessibilitySignalService.playSignal(Ll.diffLineInserted,{source:"accessibleDiffViewer.currentElementChanged"})})),this._register(gt(o=>{const a=this.currentElement.read(o);if(a&&a.type!==yo.Header){const l=a.modifiedLineNumber??a.diff.modified.startLineNumber;this._models.modifiedSetSelection(M.fromPositions(new Y(l,1)))}}))}_goToGroupDelta(e,t){const i=this.groups.get();!i||i.length<=1||_0(t,s=>{this._currentGroupIdx.set(At.ofLength(i.length).clipCyclic(this._currentGroupIdx.get()+e),s),this._currentElementIdx.set(0,s)})}nextGroup(e){this._goToGroupDelta(1,e)}previousGroup(e){this._goToGroupDelta(-1,e)}_goToLineDelta(e){const t=this.currentGroup.get();!t||t.lines.length<=1||pn(i=>{this._currentElementIdx.set(At.ofLength(t.lines.length).clip(this._currentElementIdx.get()+e),i)})}goToNextLine(){this._goToLineDelta(1)}goToPreviousLine(){this._goToLineDelta(-1)}goToLine(e){const t=this.currentGroup.get();if(!t)return;const i=t.lines.indexOf(e);i!==-1&&pn(s=>{this._currentElementIdx.set(i,s)})}revealCurrentElementInEditor(){if(!this.canClose.get())return;this._setVisible(!1,void 0);const e=this.currentElement.get();e&&(e.type===yo.Deleted?this._models.originalReveal(M.fromPositions(new Y(e.originalLineNumber,1))):this._models.modifiedReveal(e.type!==yo.Header?M.fromPositions(new Y(e.modifiedLineNumber,1)):void 0))}close(){this.canClose.get()&&(this._setVisible(!1,void 0),this._models.modifiedFocus())}};Fj=pJ([mJ(4,ov)],Fj);const GL=3;function Wut(n,e,t){const i=[];for(const s of VZ(n,(r,o)=>o.modified.startLineNumber-r.modified.endLineNumberExclusive<2*GL)){const r=[];r.push(new Vut);const o=new wt(Math.max(1,s[0].original.startLineNumber-GL),Math.min(s[s.length-1].original.endLineNumberExclusive+GL,e+1)),a=new wt(Math.max(1,s[0].modified.startLineNumber-GL),Math.min(s[s.length-1].modified.endLineNumberExclusive+GL,t+1));Twe(s,(d,u)=>{const h=new wt(d?d.original.endLineNumberExclusive:o.startLineNumber,u?u.original.startLineNumber:o.endLineNumberExclusive),f=new wt(d?d.modified.endLineNumberExclusive:a.startLineNumber,u?u.modified.startLineNumber:a.endLineNumberExclusive);h.forEach(g=>{r.push(new $ut(g,f.startLineNumber+(g-h.startLineNumber)))}),u&&(u.original.forEach(g=>{r.push(new zut(u,g))}),u.modified.forEach(g=>{r.push(new Uut(u,g))}))});const l=s[0].modified.join(s[s.length-1].modified),c=s[0].original.join(s[s.length-1].original);i.push(new Hut(new so(l,c),r))}return i}var yo;(function(n){n[n.Header=0]="Header",n[n.Unchanged=1]="Unchanged",n[n.Deleted=2]="Deleted",n[n.Added=3]="Added"})(yo||(yo={}));class Hut{constructor(e,t){this.range=e,this.lines=t}}class Vut{constructor(){this.type=yo.Header}}class zut{constructor(e,t){this.diff=e,this.originalLineNumber=t,this.type=yo.Deleted,this.modifiedLineNumber=void 0}}class Uut{constructor(e,t){this.diff=e,this.modifiedLineNumber=t,this.type=yo.Added,this.originalLineNumber=void 0}}class $ut{constructor(e,t){this.originalLineNumber=e,this.modifiedLineNumber=t,this.type=yo.Unchanged}}let Bj=class extends ee{constructor(e,t,i,s,r,o){super(),this._element=e,this._model=t,this._width=i,this._height=s,this._models=r,this._languageService=o,this.domNode=this._element,this.domNode.className="monaco-component diff-review monaco-editor-background";const a=document.createElement("div");a.className="diff-review-actions",this._actionBar=this._register(new Ul(a)),this._register(gt(l=>{this._actionBar.clear(),this._model.canClose.read(l)&&this._actionBar.push(new Ya("diffreview.close",v("label.close","Close"),"close-diff-review "+ot.asClassName(But),!0,async()=>t.close()),{label:!1,icon:!0})})),this._content=document.createElement("div"),this._content.className="diff-review-content",this._content.setAttribute("role","code"),this._scrollbar=this._register(new VN(this._content,{})),sr(this.domNode,this._scrollbar.getDomNode(),a),this._register(gt(l=>{this._height.read(l),this._width.read(l),this._scrollbar.scanDomNode()})),this._register(Ye(()=>{sr(this.domNode)})),this._register(tp(this.domNode,{width:this._width,height:this._height})),this._register(tp(this._content,{width:this._width,height:this._height})),this._register(da((l,c)=>{this._model.currentGroup.read(l),this._render(c)})),this._register(Cn(this.domNode,"keydown",l=>{(l.equals(18)||l.equals(2066)||l.equals(530))&&(l.preventDefault(),this._model.goToNextLine()),(l.equals(16)||l.equals(2064)||l.equals(528))&&(l.preventDefault(),this._model.goToPreviousLine()),(l.equals(9)||l.equals(2057)||l.equals(521)||l.equals(1033))&&(l.preventDefault(),this._model.close()),(l.equals(10)||l.equals(3))&&(l.preventDefault(),this._model.revealCurrentElementInEditor())}))}_render(e){const t=this._models.getOriginalOptions(),i=this._models.getModifiedOptions(),s=document.createElement("div");s.className="diff-review-table",s.setAttribute("role","list"),s.setAttribute("aria-label",v("ariaLabel","Accessible Diff Viewer. Use arrow up and down to navigate.")),rr(s,i.get(50)),sr(this._content,s);const r=this._models.getOriginalModel(),o=this._models.getModifiedModel();if(!r||!o)return;const a=r.getOptions(),l=o.getOptions(),c=i.get(67),d=this._model.currentGroup.get();for(const u of(d==null?void 0:d.lines)||[]){if(!d)break;let h;if(u.type===yo.Header){const g=document.createElement("div");g.className="diff-review-row",g.setAttribute("role","listitem");const p=d.range,_=this._model.currentGroupIndex.get(),w=this._model.groups.get().length,b=E=>E===0?v("no_lines_changed","no lines changed"):E===1?v("one_line_changed","1 line changed"):v("more_lines_changed","{0} lines changed",E),y=b(p.original.length),S=b(p.modified.length);g.setAttribute("aria-label",v({key:"header",comment:["This is the ARIA label for a git diff header.","A git diff header looks like this: @@ -154,12 +159,39 @@.","That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.","Variables 0 and 1 refer to the diff index out of total number of diffs.","Variables 2 and 4 will be numbers (a line number).",'Variables 3 and 5 will be "no lines changed", "1 line changed" or "X lines changed", localized separately.']},"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}",_+1,w,p.original.startLineNumber,y,p.modified.startLineNumber,S));const x=document.createElement("div");x.className="diff-review-cell diff-review-summary",x.appendChild(document.createTextNode(`${_+1}/${w}: @@ -${p.original.startLineNumber},${p.original.length} +${p.modified.startLineNumber},${p.modified.length} @@`)),g.appendChild(x),h=g}else h=this._createRow(u,c,this._width.get(),t,r,a,i,o,l);s.appendChild(h);const f=Ke(g=>this._model.currentElement.read(g)===u);e.add(gt(g=>{const p=f.read(g);h.tabIndex=p?0:-1,p&&h.focus()})),e.add(re(h,"focus",()=>{this._model.goToLine(u)}))}this._scrollbar.scanDomNode()}_createRow(e,t,i,s,r,o,a,l,c){const d=s.get(146),u=d.glyphMarginWidth+d.lineNumbersWidth,h=a.get(146),f=10+h.glyphMarginWidth+h.lineNumbersWidth;let g="diff-review-row",p="";const _="diff-review-spacer";let w=null;switch(e.type){case yo.Added:g="diff-review-row line-insert",p=" char-insert",w=Out;break;case yo.Deleted:g="diff-review-row line-delete",p=" char-delete",w=Fut;break}const b=document.createElement("div");b.style.minWidth=i+"px",b.className=g,b.setAttribute("role","listitem"),b.ariaLevel="";const y=document.createElement("div");y.className="diff-review-cell",y.style.height=`${t}px`,b.appendChild(y);const S=document.createElement("span");S.style.width=u+"px",S.style.minWidth=u+"px",S.className="diff-review-line-number"+p,e.originalLineNumber!==void 0?S.appendChild(document.createTextNode(String(e.originalLineNumber))):S.innerText="",y.appendChild(S);const x=document.createElement("span");x.style.width=f+"px",x.style.minWidth=f+"px",x.style.paddingRight="10px",x.className="diff-review-line-number"+p,e.modifiedLineNumber!==void 0?x.appendChild(document.createTextNode(String(e.modifiedLineNumber))):x.innerText="",y.appendChild(x);const E=document.createElement("span");if(E.className=_,w){const I=document.createElement("span");I.className=ot.asClassName(w),I.innerText="",E.appendChild(I)}else E.innerText="";y.appendChild(E);let D;if(e.modifiedLineNumber!==void 0){let I=this._getLineHtml(l,a,c.tabSize,e.modifiedLineNumber,this._languageService.languageIdCodec);Ib._ttPolicy&&(I=Ib._ttPolicy.createHTML(I)),y.insertAdjacentHTML("beforeend",I),D=l.getLineContent(e.modifiedLineNumber)}else{let I=this._getLineHtml(r,s,o.tabSize,e.originalLineNumber,this._languageService.languageIdCodec);Ib._ttPolicy&&(I=Ib._ttPolicy.createHTML(I)),y.insertAdjacentHTML("beforeend",I),D=r.getLineContent(e.originalLineNumber)}D.length===0&&(D=v("blankLine","blank"));let N="";switch(e.type){case yo.Unchanged:e.originalLineNumber===e.modifiedLineNumber?N=v({key:"unchangedLine",comment:["The placeholders are contents of the line and should not be translated."]},"{0} unchanged line {1}",D,e.originalLineNumber):N=v("equalLine","{0} original line {1} modified line {2}",D,e.originalLineNumber,e.modifiedLineNumber);break;case yo.Added:N=v("insertLine","+ {0} modified line {1}",D,e.modifiedLineNumber);break;case yo.Deleted:N=v("deleteLine","- {0} original line {1}",D,e.originalLineNumber);break}return b.setAttribute("aria-label",N),b}_getLineHtml(e,t,i,s,r){const o=e.getLineContent(s),a=t.get(50),l=Ks.createEmpty(o,r),c=ql.isBasicASCII(o,e.mightContainNonBasicASCII()),d=ql.containsRTL(o,c,e.mightContainRTL());return OB(new av(a.isMonospace&&!t.get(33),a.canUseHalfwidthRightwardsArrow,o,!1,c,d,0,l,[],i,0,a.spaceWidth,a.middotWidth,a.wsmiddotWidth,t.get(118),t.get(100),t.get(95),t.get(51)!==k_.OFF,null)).html}};Bj=pJ([mJ(5,un)],Bj);class jut{constructor(e){this.editors=e}getOriginalModel(){return this.editors.original.getModel()}getOriginalOptions(){return this.editors.original.getOptions()}originalReveal(e){this.editors.original.revealRange(e),this.editors.original.setSelection(e),this.editors.original.focus()}getModifiedModel(){return this.editors.modified.getModel()}getModifiedOptions(){return this.editors.modified.getOptions()}modifiedReveal(e){e&&(this.editors.modified.revealRange(e),this.editors.modified.setSelection(e)),this.editors.modified.focus()}modifiedSetSelection(e){this.editors.modified.setSelection(e)}modifiedFocus(){this.editors.modified.focus()}getModifiedPosition(){return this.editors.modified.getPosition()??void 0}}B("diffEditor.move.border","#8b8b8b9c",v("diffEditor.move.border","The border color for text that got moved in the diff editor."));B("diffEditor.moveActive.border","#FFA500",v("diffEditor.moveActive.border","The active border color for text that got moved in the diff editor."));B("diffEditor.unchangedRegionShadow",{dark:"#000000",light:"#737373BF",hcDark:"#000000",hcLight:"#737373BF"},v("diffEditor.unchangedRegionShadow","The color of the shadow around unchanged region widgets."));const Kut=Xi("diff-insert",ye.add,v("diffInsertIcon","Line decoration for inserts in the diff editor.")),YSe=Xi("diff-remove",ye.remove,v("diffRemoveIcon","Line decoration for removals in the diff editor.")),$O=_t.register({className:"line-insert",description:"line-insert",isWholeLine:!0,linesDecorationsClassName:"insert-sign "+ot.asClassName(Kut),marginClassName:"gutter-insert"}),ED=_t.register({className:"line-delete",description:"line-delete",isWholeLine:!0,linesDecorationsClassName:"delete-sign "+ot.asClassName(YSe),marginClassName:"gutter-delete"}),Ide=_t.register({className:"line-insert",description:"line-insert",isWholeLine:!0,marginClassName:"gutter-insert"}),Dde=_t.register({className:"line-delete",description:"line-delete",isWholeLine:!0,marginClassName:"gutter-delete"}),jO=_t.register({className:"char-insert",description:"char-insert",shouldFillLineOnLineBreak:!0}),_J=_t.register({className:"char-insert",description:"char-insert",isWholeLine:!0}),vJ=_t.register({className:"char-insert diff-range-empty",description:"char-insert diff-range-empty"}),XS=_t.register({className:"char-delete",description:"char-delete",shouldFillLineOnLineBreak:!0}),bJ=_t.register({className:"char-delete",description:"char-delete",isWholeLine:!0}),wJ=_t.register({className:"char-delete diff-range-empty",description:"char-delete diff-range-empty"});var ZSe=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Wj=function(n,e){return function(t,i){e(t,i,n)}},Yv;const sT=Wt("diffProviderFactoryService");let Hj=class{constructor(e){this.instantiationService=e}createDiffProvider(e){return this.instantiationService.createInstance(Vj,e)}};Hj=ZSe([Wj(0,Ze)],Hj);jt(sT,Hj,1);var lw;let Vj=(lw=class{constructor(e,t,i){this.editorWorkerService=t,this.telemetryService=i,this.onDidChangeEventEmitter=new X,this.onDidChange=this.onDidChangeEventEmitter.event,this.diffAlgorithm="advanced",this.diffAlgorithmOnDidChangeSubscription=void 0,this.setOptions(e)}dispose(){var e;(e=this.diffAlgorithmOnDidChangeSubscription)==null||e.dispose()}async computeDiff(e,t,i,s){if(typeof this.diffAlgorithm!="string")return this.diffAlgorithm.computeDiff(e,t,i,s);if(e.isDisposed()||t.isDisposed())return{changes:[],identical:!0,quitEarly:!1,moves:[]};if(e.getLineCount()===1&&e.getLineMaxColumn(1)===1)return t.getLineCount()===1&&t.getLineMaxColumn(1)===1?{changes:[],identical:!0,quitEarly:!1,moves:[]}:{changes:[new zl(new wt(1,2),new wt(1,t.getLineCount()+1),[new xl(e.getFullModelRange(),t.getFullModelRange())])],identical:!1,quitEarly:!1,moves:[]};const r=JSON.stringify([e.uri.toString(),t.uri.toString()]),o=JSON.stringify([e.id,t.id,e.getAlternativeVersionId(),t.getAlternativeVersionId(),JSON.stringify(i)]),a=Yv.diffCache.get(r);if(a&&a.context===o)return a.result;const l=js.create(),c=await this.editorWorkerService.computeDiff(e.uri,t.uri,i,this.diffAlgorithm),d=l.elapsed();if(this.telemetryService.publicLog2("diffEditor.computeDiff",{timeMs:d,timedOut:(c==null?void 0:c.quitEarly)??!0,detectedMoves:i.computeMoves?(c==null?void 0:c.moves.length)??0:-1}),s.isCancellationRequested)return{changes:[],identical:!1,quitEarly:!0,moves:[]};if(!c)throw new Error("no diff result available");return Yv.diffCache.size>10&&Yv.diffCache.delete(Yv.diffCache.keys().next().value),Yv.diffCache.set(r,{result:c,context:o}),c}setOptions(e){var i;let t=!1;e.diffAlgorithm&&this.diffAlgorithm!==e.diffAlgorithm&&((i=this.diffAlgorithmOnDidChangeSubscription)==null||i.dispose(),this.diffAlgorithmOnDidChangeSubscription=void 0,this.diffAlgorithm=e.diffAlgorithm,typeof e.diffAlgorithm!="string"&&(this.diffAlgorithmOnDidChangeSubscription=e.diffAlgorithm.onDidChange(()=>this.onDidChangeEventEmitter.fire())),t=!0),t&&this.onDidChangeEventEmitter.fire()}},Yv=lw,lw.diffCache=new Map,lw);Vj=Yv=ZSe([Wj(1,wa),Wj(2,Hr)],Vj);function UB(){return DV&&!!DV.VSCODE_DEV}function XSe(n){if(UB()){const e=qut();return e.add(n),{dispose(){e.delete(n)}}}else return{dispose(){}}}function qut(){vA||(vA=new Set);const n=globalThis;return n.$hotReload_applyNewExports||(n.$hotReload_applyNewExports=e=>{const t={config:{mode:void 0},...e},i=[];for(const s of vA){const r=s(t);r&&i.push(r)}if(i.length>0)return s=>{let r=!1;for(const o of i)o(s)&&(r=!0);return r}}),vA}let vA;UB()&&XSe(({oldExports:n,newSrc:e,config:t})=>{if(t.mode==="patch-prototype")return i=>{var s,r;for(const o in i){const a=i[o];if(console.log(`[hot-reload] Patching prototype methods of '${o}'`,{exportedItem:a}),typeof a=="function"&&a.prototype){const l=n[o];if(l){for(const c of Object.getOwnPropertyNames(a.prototype)){const d=Object.getOwnPropertyDescriptor(a.prototype,c),u=Object.getOwnPropertyDescriptor(l.prototype,c);((s=d==null?void 0:d.value)==null?void 0:s.toString())!==((r=u==null?void 0:u.value)==null?void 0:r.toString())&&console.log(`[hot-reload] Patching prototype method '${o}.${c}'`),Object.defineProperty(l.prototype,c,d)}i[o]=l}}}return!0}});function Fa(n,e){return Gut([n],e),n}function Gut(n,e){UB()&&pr("reload",i=>XSe(({oldExports:s})=>{if([...Object.values(s)].some(r=>n.includes(r)))return r=>(i(void 0),!0)})).read(e)}var Yut=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Zut=function(n,e){return function(t,i){e(t,i,n)}};let zj=class extends ee{setActiveMovedText(e){this._activeMovedText.set(e,void 0)}constructor(e,t,i){super(),this.model=e,this._options=t,this._diffProviderFactoryService=i,this._isDiffUpToDate=Nt(this,!1),this.isDiffUpToDate=this._isDiffUpToDate,this._diff=Nt(this,void 0),this.diff=this._diff,this._unchangedRegions=Nt(this,void 0),this.unchangedRegions=Ke(this,a=>{var l;return this._options.hideUnchangedRegions.read(a)?((l=this._unchangedRegions.read(a))==null?void 0:l.regions)??[]:(pn(c=>{var d;for(const u of((d=this._unchangedRegions.get())==null?void 0:d.regions)||[])u.collapseAll(c)}),[])}),this.movedTextToCompare=Nt(this,void 0),this._activeMovedText=Nt(this,void 0),this._hoveredMovedText=Nt(this,void 0),this.activeMovedText=Ke(this,a=>this.movedTextToCompare.read(a)??this._hoveredMovedText.read(a)??this._activeMovedText.read(a)),this._cancellationTokenSource=new mn,this._diffProvider=Ke(this,a=>{const l=this._diffProviderFactoryService.createDiffProvider({diffAlgorithm:this._options.diffAlgorithm.read(a)}),c=pr("onDidChange",l.onDidChange);return{diffProvider:l,onChangeSignal:c}}),this._register(Ye(()=>this._cancellationTokenSource.cancel()));const s=Bx("contentChangedSignal"),r=this._register(new yi(()=>s.trigger(void 0),200));this._register(gt(a=>{const l=this._unchangedRegions.read(a);if(!l||l.regions.some(g=>g.isDragged.read(a)))return;const c=l.originalDecorationIds.map(g=>e.original.getDecorationRange(g)).map(g=>g?wt.fromRangeInclusive(g):void 0),d=l.modifiedDecorationIds.map(g=>e.modified.getDecorationRange(g)).map(g=>g?wt.fromRangeInclusive(g):void 0),u=l.regions.map((g,p)=>!c[p]||!d[p]?void 0:new Nm(c[p].startLineNumber,d[p].startLineNumber,c[p].length,g.visibleLineCountTop.read(a),g.visibleLineCountBottom.read(a))).filter(Yh),h=[];let f=!1;for(const g of VZ(u,(p,_)=>p.getHiddenModifiedRange(a).endLineNumberExclusive===_.getHiddenModifiedRange(a).startLineNumber))if(g.length>1){f=!0;const p=g.reduce((w,b)=>w+b.lineCount,0),_=new Nm(g[0].originalLineNumber,g[0].modifiedLineNumber,p,g[0].visibleLineCountTop.get(),g[g.length-1].visibleLineCountBottom.get());h.push(_)}else h.push(g[0]);if(f){const g=e.original.deltaDecorations(l.originalDecorationIds,h.map(_=>({range:_.originalUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}}))),p=e.modified.deltaDecorations(l.modifiedDecorationIds,h.map(_=>({range:_.modifiedUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}})));pn(_=>{this._unchangedRegions.set({regions:h,originalDecorationIds:g,modifiedDecorationIds:p},_)})}}));const o=(a,l,c)=>{const d=Nm.fromDiffs(a.changes,e.original.getLineCount(),e.modified.getLineCount(),this._options.hideUnchangedRegionsMinimumLineCount.read(c),this._options.hideUnchangedRegionsContextLineCount.read(c));let u;const h=this._unchangedRegions.get();if(h){const _=h.originalDecorationIds.map(S=>e.original.getDecorationRange(S)).map(S=>S?wt.fromRangeInclusive(S):void 0),w=h.modifiedDecorationIds.map(S=>e.modified.getDecorationRange(S)).map(S=>S?wt.fromRangeInclusive(S):void 0);let y=Mut(h.regions.map((S,x)=>{if(!_[x]||!w[x])return;const E=_[x].length;return new Nm(_[x].startLineNumber,w[x].startLineNumber,E,Math.min(S.visibleLineCountTop.get(),E),Math.min(S.visibleLineCountBottom.get(),E-S.visibleLineCountTop.get()))}).filter(Yh),(S,x)=>!x||S.modifiedLineNumber>=x.modifiedLineNumber+x.lineCount&&S.originalLineNumber>=x.originalLineNumber+x.lineCount).map(S=>new so(S.getHiddenOriginalRange(c),S.getHiddenModifiedRange(c)));y=so.clip(y,wt.ofLength(1,e.original.getLineCount()),wt.ofLength(1,e.modified.getLineCount())),u=so.inverse(y,e.original.getLineCount(),e.modified.getLineCount())}const f=[];if(u)for(const _ of d){const w=u.filter(b=>b.original.intersectsStrict(_.originalUnchangedRange)&&b.modified.intersectsStrict(_.modifiedUnchangedRange));f.push(..._.setVisibleRanges(w,l))}else f.push(...d);const g=e.original.deltaDecorations((h==null?void 0:h.originalDecorationIds)||[],f.map(_=>({range:_.originalUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}}))),p=e.modified.deltaDecorations((h==null?void 0:h.modifiedDecorationIds)||[],f.map(_=>({range:_.modifiedUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}})));this._unchangedRegions.set({regions:f,originalDecorationIds:g,modifiedDecorationIds:p},l)};this._register(e.modified.onDidChangeContent(a=>{if(this._diff.get()){const c=Cg.fromModelContentChanges(a.changes);this._lastDiff,e.original,e.modified}this._isDiffUpToDate.set(!1,void 0),r.schedule()})),this._register(e.original.onDidChangeContent(a=>{if(this._diff.get()){const c=Cg.fromModelContentChanges(a.changes);this._lastDiff,e.original,e.modified}this._isDiffUpToDate.set(!1,void 0),r.schedule()})),this._register(da(async(a,l)=>{this._options.hideUnchangedRegionsMinimumLineCount.read(a),this._options.hideUnchangedRegionsContextLineCount.read(a),r.cancel(),s.read(a);const c=this._diffProvider.read(a);c.onChangeSignal.read(a),Fa(CCe,a),Fa(iU,a),this._isDiffUpToDate.set(!1,void 0);let d=[];l.add(e.original.onDidChangeContent(f=>{const g=Cg.fromModelContentChanges(f.changes);d=nO(d,g)}));let u=[];l.add(e.modified.onDidChangeContent(f=>{const g=Cg.fromModelContentChanges(f.changes);u=nO(u,g)}));let h=await c.diffProvider.computeDiff(e.original,e.modified,{ignoreTrimWhitespace:this._options.ignoreTrimWhitespace.read(a),maxComputationTimeMs:this._options.maxComputationTimeMs.read(a),computeMoves:this._options.showMoves.read(a)},this._cancellationTokenSource.token);this._cancellationTokenSource.token.isCancellationRequested||e.original.isDisposed()||e.modified.isDisposed()||(h=Xut(h,e.original,e.modified),h=(e.original,e.modified,void 0)??h,h=(e.original,e.modified,void 0)??h,pn(f=>{o(h,f),this._lastDiff=h;const g=CJ.fromDiffResult(h);this._diff.set(g,f),this._isDiffUpToDate.set(!0,f);const p=this.movedTextToCompare.get();this.movedTextToCompare.set(p?this._lastDiff.moves.find(_=>_.lineRangeMapping.modified.intersect(p.lineRangeMapping.modified)):void 0,f)}))}))}ensureModifiedLineIsVisible(e,t,i){var r,o;if(((r=this.diff.get())==null?void 0:r.mappings.length)===0)return;const s=((o=this._unchangedRegions.get())==null?void 0:o.regions)||[];for(const a of s)if(a.getHiddenModifiedRange(void 0).contains(e)){a.showModifiedLine(e,t,i);return}}ensureOriginalLineIsVisible(e,t,i){var r,o;if(((r=this.diff.get())==null?void 0:r.mappings.length)===0)return;const s=((o=this._unchangedRegions.get())==null?void 0:o.regions)||[];for(const a of s)if(a.getHiddenOriginalRange(void 0).contains(e)){a.showOriginalLine(e,t,i);return}}async waitForDiff(){await W1e(this.isDiffUpToDate,e=>e)}serializeState(){const e=this._unchangedRegions.get();return{collapsedRegions:e==null?void 0:e.regions.map(t=>({range:t.getHiddenModifiedRange(void 0).serialize()}))}}restoreSerializedState(e){var s;const t=(s=e.collapsedRegions)==null?void 0:s.map(r=>wt.deserialize(r.range)),i=this._unchangedRegions.get();!i||!t||pn(r=>{for(const o of i.regions)for(const a of t)if(o.modifiedUnchangedRange.intersect(a)){o.setHiddenModifiedRange(a,r);break}})}};zj=Yut([Zut(2,sT)],zj);function Xut(n,e,t){return{changes:n.changes.map(i=>new zl(i.original,i.modified,i.innerChanges?i.innerChanges.map(s=>Qut(s,e,t)):void 0)),moves:n.moves,identical:n.identical,quitEarly:n.quitEarly}}function Qut(n,e,t){let i=n.originalRange,s=n.modifiedRange;return i.startColumn===1&&s.startColumn===1&&(i.endColumn!==1||s.endColumn!==1)&&i.endColumn===e.getLineMaxColumn(i.endLineNumber)&&s.endColumn===t.getLineMaxColumn(s.endLineNumber)&&i.endLineNumber<e.getLineCount()&&s.endLineNumber<t.getLineCount()&&(i=i.setEndPosition(i.endLineNumber+1,1),s=s.setEndPosition(s.endLineNumber+1,1)),new xl(i,s)}class CJ{static fromDiffResult(e){return new CJ(e.changes.map(t=>new QSe(t)),e.moves||[],e.identical,e.quitEarly)}constructor(e,t,i,s){this.mappings=e,this.movedTexts=t,this.identical=i,this.quitEarly=s}}class QSe{constructor(e){this.lineRangeMapping=e}}class Nm{static fromDiffs(e,t,i,s,r){const o=zl.inverse(e,t,i),a=[];for(const l of o){let c=l.original.startLineNumber,d=l.modified.startLineNumber,u=l.original.length;const h=c===1&&d===1,f=c+u===t+1&&d+u===i+1;(h||f)&&u>=r+s?(h&&!f&&(u-=r),f&&!h&&(c+=r,d+=r,u-=r),a.push(new Nm(c,d,u,0,0))):u>=r*2+s&&(c+=r,d+=r,u-=r*2,a.push(new Nm(c,d,u,0,0)))}return a}get originalUnchangedRange(){return wt.ofLength(this.originalLineNumber,this.lineCount)}get modifiedUnchangedRange(){return wt.ofLength(this.modifiedLineNumber,this.lineCount)}constructor(e,t,i,s,r){this.originalLineNumber=e,this.modifiedLineNumber=t,this.lineCount=i,this._visibleLineCountTop=Nt(this,0),this.visibleLineCountTop=this._visibleLineCountTop,this._visibleLineCountBottom=Nt(this,0),this.visibleLineCountBottom=this._visibleLineCountBottom,this._shouldHideControls=Ke(this,l=>this.visibleLineCountTop.read(l)+this.visibleLineCountBottom.read(l)===this.lineCount&&!this.isDragged.read(l)),this.isDragged=Nt(this,void 0);const o=Math.max(Math.min(s,this.lineCount),0),a=Math.max(Math.min(r,this.lineCount-s),0);$oe(s===o),$oe(r===a),this._visibleLineCountTop.set(o,void 0),this._visibleLineCountBottom.set(a,void 0)}setVisibleRanges(e,t){const i=[],s=new wc(e.map(l=>l.modified)).subtractFrom(this.modifiedUnchangedRange);let r=this.originalLineNumber,o=this.modifiedLineNumber;const a=this.modifiedLineNumber+this.lineCount;if(s.ranges.length===0)this.showAll(t),i.push(this);else{let l=0;for(const c of s.ranges){const d=l===s.ranges.length-1;l++;const u=(d?a:c.endLineNumberExclusive)-o,h=new Nm(r,o,u,0,0);h.setHiddenModifiedRange(c,t),i.push(h),r=h.originalUnchangedRange.endLineNumberExclusive,o=h.modifiedUnchangedRange.endLineNumberExclusive}}return i}shouldHideControls(e){return this._shouldHideControls.read(e)}getHiddenOriginalRange(e){return wt.ofLength(this.originalLineNumber+this._visibleLineCountTop.read(e),this.lineCount-this._visibleLineCountTop.read(e)-this._visibleLineCountBottom.read(e))}getHiddenModifiedRange(e){return wt.ofLength(this.modifiedLineNumber+this._visibleLineCountTop.read(e),this.lineCount-this._visibleLineCountTop.read(e)-this._visibleLineCountBottom.read(e))}setHiddenModifiedRange(e,t){const i=e.startLineNumber-this.modifiedLineNumber,s=this.modifiedLineNumber+this.lineCount-e.endLineNumberExclusive;this.setState(i,s,t)}getMaxVisibleLineCountTop(){return this.lineCount-this._visibleLineCountBottom.get()}getMaxVisibleLineCountBottom(){return this.lineCount-this._visibleLineCountTop.get()}showMoreAbove(e=10,t){const i=this.getMaxVisibleLineCountTop();this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get()+e,i),t)}showMoreBelow(e=10,t){const i=this.lineCount-this._visibleLineCountTop.get();this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get()+e,i),t)}showAll(e){this._visibleLineCountBottom.set(this.lineCount-this._visibleLineCountTop.get(),e)}showModifiedLine(e,t,i){const s=e+1-(this.modifiedLineNumber+this._visibleLineCountTop.get()),r=this.modifiedLineNumber-this._visibleLineCountBottom.get()+this.lineCount-e;t===0&&s<r||t===1?this._visibleLineCountTop.set(this._visibleLineCountTop.get()+s,i):this._visibleLineCountBottom.set(this._visibleLineCountBottom.get()+r,i)}showOriginalLine(e,t,i){const s=e-this.originalLineNumber,r=this.originalLineNumber+this.lineCount-e;t===0&&s<r||t===1?this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get()+r-s,this.getMaxVisibleLineCountTop()),i):this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get()+s-r,this.getMaxVisibleLineCountBottom()),i)}collapseAll(e){this._visibleLineCountTop.set(0,e),this._visibleLineCountBottom.set(0,e)}setState(e,t,i){e=Math.max(Math.min(e,this.lineCount),0),t=Math.max(Math.min(t,this.lineCount-e),0),this._visibleLineCountTop.set(e,i),this._visibleLineCountBottom.set(t,i)}}class Jut extends ee{get visibility(){return this._visibility}set visibility(e){this._visibility!==e&&(this._visibility=e,this._diffActions.style.visibility=e?"visible":"hidden")}constructor(e,t,i,s,r,o,a,l,c){super(),this._getViewZoneId=e,this._marginDomNode=t,this._modifiedEditor=i,this._diff=s,this._editor=r,this._viewLineCounts=o,this._originalTextModel=a,this._contextMenuService=l,this._clipboardService=c,this._visibility=!1,this._marginDomNode.style.zIndex="10",this._diffActions=document.createElement("div"),this._diffActions.className=ot.asClassName(ye.lightBulb)+" lightbulb-glyph",this._diffActions.style.position="absolute";const d=this._modifiedEditor.getOption(67);this._diffActions.style.right="0px",this._diffActions.style.visibility="hidden",this._diffActions.style.height=`${d}px`,this._diffActions.style.lineHeight=`${d}px`,this._marginDomNode.appendChild(this._diffActions);let u=0;const h=i.getOption(128)&&!Bu,f=(g,p)=>{this._contextMenuService.showContextMenu({domForShadowRoot:h?i.getDomNode()??void 0:void 0,getAnchor:()=>({x:g,y:p}),getActions:()=>{const _=[],w=s.modified.isEmpty;return _.push(new Ya("diff.clipboard.copyDeletedContent",w?s.original.length>1?v("diff.clipboard.copyDeletedLinesContent.label","Copy deleted lines"):v("diff.clipboard.copyDeletedLinesContent.single.label","Copy deleted line"):s.original.length>1?v("diff.clipboard.copyChangedLinesContent.label","Copy changed lines"):v("diff.clipboard.copyChangedLinesContent.single.label","Copy changed line"),void 0,!0,async()=>{const y=this._originalTextModel.getValueInRange(s.original.toExclusiveRange());await this._clipboardService.writeText(y)})),s.original.length>1&&_.push(new Ya("diff.clipboard.copyDeletedLineContent",w?v("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",s.original.startLineNumber+u):v("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",s.original.startLineNumber+u),void 0,!0,async()=>{let y=this._originalTextModel.getLineContent(s.original.startLineNumber+u);y===""&&(y=this._originalTextModel.getEndOfLineSequence()===0?`
`:`\r
`),await this._clipboardService.writeText(y)})),i.getOption(92)||_.push(new Ya("diff.inline.revertChange",v("diff.inline.revertChange.label","Revert this change"),void 0,!0,async()=>{this._editor.revert(this._diff)})),_},autoSelectFirstItem:!0})};this._register(Cn(this._diffActions,"mousedown",g=>{if(!g.leftButton)return;const{top:p,height:_}=Fn(this._diffActions),w=Math.floor(d/3);g.preventDefault(),f(g.posx,p+_+w)})),this._register(i.onMouseMove(g=>{(g.target.type===8||g.target.type===5)&&g.target.detail.viewZoneId===this._getViewZoneId()?(u=this._updateLightBulbPosition(this._marginDomNode,g.event.browserEvent.y,d),this.visibility=!0):this.visibility=!1})),this._register(i.onMouseDown(g=>{g.event.leftButton&&(g.target.type===8||g.target.type===5)&&g.target.detail.viewZoneId===this._getViewZoneId()&&(g.event.preventDefault(),u=this._updateLightBulbPosition(this._marginDomNode,g.event.browserEvent.y,d),f(g.event.posx,g.event.posy+d))}))}_updateLightBulbPosition(e,t,i){const{top:s}=Fn(e),r=t-s,o=Math.floor(r/i),a=o*i;if(this._diffActions.style.top=`${a}px`,this._viewLineCounts){let l=0;for(let c=0;c<this._viewLineCounts.length;c++)if(l+=this._viewLineCounts[c],o<l)return c}return o}}const Nde=up("diffEditorWidget",{createHTML:n=>n});function eht(n,e,t,i){rr(i,e.fontInfo);const s=t.length>0,r=new Tx(1e4);let o=0,a=0;const l=[];for(let h=0;h<n.lineTokens.length;h++){const f=h+1,g=n.lineTokens[h],p=n.lineBreakData[h],_=ko.filter(t,f,1,Number.MAX_SAFE_INTEGER);if(p){let w=0;for(const b of p.breakOffsets){const y=g.sliceAndInflate(w,b,0);o=Math.max(o,Tde(a,y,ko.extractWrapped(_,w,b),s,n.mightContainNonBasicASCII,n.mightContainRTL,e,r)),a++,w=b}l.push(p.breakOffsets.length)}else l.push(1),o=Math.max(o,Tde(a,g,_,s,n.mightContainNonBasicASCII,n.mightContainRTL,e,r)),a++}o+=e.scrollBeyondLastColumn;const c=r.build(),d=Nde?Nde.createHTML(c):c;i.innerHTML=d;const u=o*e.typicalHalfwidthCharacterWidth;return{heightInLines:a,minWidthInPx:u,viewLineCounts:l}}class tht{constructor(e,t,i,s){this.lineTokens=e,this.lineBreakData=t,this.mightContainNonBasicASCII=i,this.mightContainRTL=s}}class yJ{static fromEditor(e){var r;const t=e.getOptions(),i=t.get(50),s=t.get(146);return new yJ(((r=e.getModel())==null?void 0:r.getOptions().tabSize)||0,i,t.get(33),i.typicalHalfwidthCharacterWidth,t.get(105),t.get(67),s.decorationsWidth,t.get(118),t.get(100),t.get(95),t.get(51))}constructor(e,t,i,s,r,o,a,l,c,d,u){this.tabSize=e,this.fontInfo=t,this.disableMonospaceOptimizations=i,this.typicalHalfwidthCharacterWidth=s,this.scrollBeyondLastColumn=r,this.lineHeight=o,this.lineDecorationsWidth=a,this.stopRenderingLineAfter=l,this.renderWhitespace=c,this.renderControlCharacters=d,this.fontLigatures=u}}function Tde(n,e,t,i,s,r,o,a){a.appendString('<div class="view-line'),i||a.appendString(" char-delete"),a.appendString('" style="top:'),a.appendString(String(n*o.lineHeight)),a.appendString('px;width:1000000px;">');const l=e.getLineContent(),c=ql.isBasicASCII(l,s),d=ql.containsRTL(l,c,r),u=iT(new av(o.fontInfo.isMonospace&&!o.disableMonospaceOptimizations,o.fontInfo.canUseHalfwidthRightwardsArrow,l,!1,c,d,0,e,t,o.tabSize,0,o.fontInfo.spaceWidth,o.fontInfo.middotWidth,o.fontInfo.wsmiddotWidth,o.stopRenderingLineAfter,o.renderWhitespace,o.renderControlCharacters,o.fontLigatures!==k_.OFF,null),a);return a.appendString("</div>"),u.characterMapping.getHorizontalOffset(u.characterMapping.length)}var iht=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Rde=function(n,e){return function(t,i){e(t,i,n)}};let Uj=class extends ee{constructor(e,t,i,s,r,o,a,l,c,d){super(),this._targetWindow=e,this._editors=t,this._diffModel=i,this._options=s,this._diffEditorWidget=r,this._canIgnoreViewZoneUpdateEvent=o,this._origViewZonesToIgnore=a,this._modViewZonesToIgnore=l,this._clipboardService=c,this._contextMenuService=d,this._originalTopPadding=Nt(this,0),this._originalScrollOffset=Nt(this,0),this._originalScrollOffsetAnimated=Lde(this._targetWindow,this._originalScrollOffset,this._store),this._modifiedTopPadding=Nt(this,0),this._modifiedScrollOffset=Nt(this,0),this._modifiedScrollOffsetAnimated=Lde(this._targetWindow,this._modifiedScrollOffset,this._store);const u=Nt("invalidateAlignmentsState",0),h=this._register(new yi(()=>{u.set(u.get()+1,void 0)},0));this._register(this._editors.original.onDidChangeViewZones(y=>{this._canIgnoreViewZoneUpdateEvent()||h.schedule()})),this._register(this._editors.modified.onDidChangeViewZones(y=>{this._canIgnoreViewZoneUpdateEvent()||h.schedule()})),this._register(this._editors.original.onDidChangeConfiguration(y=>{(y.hasChanged(147)||y.hasChanged(67))&&h.schedule()})),this._register(this._editors.modified.onDidChangeConfiguration(y=>{(y.hasChanged(147)||y.hasChanged(67))&&h.schedule()}));const f=this._diffModel.map(y=>y?mi(this,y.model.original.onDidChangeTokens,()=>y.model.original.tokenization.backgroundTokenizationState===2):void 0).map((y,S)=>y==null?void 0:y.read(S)),g=Ke(y=>{const S=this._diffModel.read(y),x=S==null?void 0:S.diff.read(y);if(!S||!x)return null;u.read(y);const D=this._options.renderSideBySide.read(y);return Ade(this._editors.original,this._editors.modified,x.mappings,this._origViewZonesToIgnore,this._modViewZonesToIgnore,D)}),p=Ke(y=>{var E;const S=(E=this._diffModel.read(y))==null?void 0:E.movedTextToCompare.read(y);if(!S)return null;u.read(y);const x=S.changes.map(D=>new QSe(D));return Ade(this._editors.original,this._editors.modified,x,this._origViewZonesToIgnore,this._modViewZonesToIgnore,!0)});function _(){const y=document.createElement("div");return y.className="diagonal-fill",y}const w=this._register(new ue);this.viewZones=sv(this,(y,S)=>{var ce,Ie,Ce,it;w.clear();const x=g.read(y)||[],E=[],D=[],N=this._modifiedTopPadding.read(y);N>0&&D.push({afterLineNumber:0,domNode:document.createElement("div"),heightInPx:N,showInHiddenAreas:!0,suppressMouseDown:!0});const I=this._originalTopPadding.read(y);I>0&&E.push({afterLineNumber:0,domNode:document.createElement("div"),heightInPx:I,showInHiddenAreas:!0,suppressMouseDown:!0});const H=this._options.renderSideBySide.read(y),z=H||(ce=this._editors.modified._getViewModel())==null?void 0:ce.createLineBreaksComputer();if(z){const He=this._editors.original.getModel();for(const dt of x)if(dt.diff)for(let P=dt.originalRange.startLineNumber;P<dt.originalRange.endLineNumberExclusive;P++){if(P>He.getLineCount())return{orig:E,mod:D};z==null||z.addRequest(He.getLineContent(P),null,null)}}const G=(z==null?void 0:z.finalize())??[];let J=0;const j=this._editors.modified.getOption(67),ne=(Ie=this._diffModel.read(y))==null?void 0:Ie.movedTextToCompare.read(y),oe=((Ce=this._editors.original.getModel())==null?void 0:Ce.mightContainNonBasicASCII())??!1,ve=((it=this._editors.original.getModel())==null?void 0:it.mightContainRTL())??!1,te=yJ.fromEditor(this._editors.modified);for(const He of x)if(He.diff&&!H&&(!this._options.useTrueInlineDiffRendering.read(y)||!SJ(He.diff))){if(!He.originalRange.isEmpty){f.read(y);const P=document.createElement("div");P.classList.add("view-lines","line-delete","monaco-mouse-cursor-text");const $=this._editors.original.getModel();if(He.originalRange.endLineNumberExclusive-1>$.getLineCount())return{orig:E,mod:D};const Z=new tht(He.originalRange.mapToLineArray(qe=>$.tokenization.getLineTokens(qe)),He.originalRange.mapToLineArray(qe=>G[J++]),oe,ve),ae=[];for(const qe of He.diff.innerChanges||[])ae.push(new uE(qe.originalRange.delta(-(He.diff.original.startLineNumber-1)),XS.className,0));const Le=eht(Z,te,ae,P),Ae=document.createElement("div");if(Ae.className="inline-deleted-margin-view-zone",rr(Ae,te.fontInfo),this._options.renderIndicators.read(y))for(let qe=0;qe<Le.heightInLines;qe++){const vt=document.createElement("div");vt.className=`delete-sign ${ot.asClassName(YSe)}`,vt.setAttribute("style",`position:absolute;top:${qe*j}px;width:${te.lineDecorationsWidth}px;height:${j}px;right:0;`),Ae.appendChild(vt)}let Ue;w.add(new Jut(()=>wm(Ue),Ae,this._editors.modified,He.diff,this._diffEditorWidget,Le.viewLineCounts,this._editors.original.getModel(),this._contextMenuService,this._clipboardService));for(let qe=0;qe<Le.viewLineCounts.length;qe++){const vt=Le.viewLineCounts[qe];vt>1&&E.push({afterLineNumber:He.originalRange.startLineNumber+qe,domNode:_(),heightInPx:(vt-1)*j,showInHiddenAreas:!0,suppressMouseDown:!0})}D.push({afterLineNumber:He.modifiedRange.startLineNumber-1,domNode:P,heightInPx:Le.heightInLines*j,minWidthInPx:Le.minWidthInPx,marginDomNode:Ae,setZoneId(qe){Ue=qe},showInHiddenAreas:!0,suppressMouseDown:!0})}const dt=document.createElement("div");dt.className="gutter-delete",E.push({afterLineNumber:He.originalRange.endLineNumberExclusive-1,domNode:_(),heightInPx:He.modifiedHeightInPx,marginDomNode:dt,showInHiddenAreas:!0,suppressMouseDown:!0})}else{const dt=He.modifiedHeightInPx-He.originalHeightInPx;if(dt>0){if(ne!=null&&ne.lineRangeMapping.original.delta(-1).deltaLength(2).contains(He.originalRange.endLineNumberExclusive-1))continue;E.push({afterLineNumber:He.originalRange.endLineNumberExclusive-1,domNode:_(),heightInPx:dt,showInHiddenAreas:!0,suppressMouseDown:!0})}else{let P=function(){const Z=document.createElement("div");return Z.className="arrow-revert-change "+ot.asClassName(ye.arrowRight),S.add(re(Z,"mousedown",ae=>ae.stopPropagation())),S.add(re(Z,"click",ae=>{ae.stopPropagation(),r.revert(He.diff)})),xe("div",{},Z)};if(ne!=null&&ne.lineRangeMapping.modified.delta(-1).deltaLength(2).contains(He.modifiedRange.endLineNumberExclusive-1))continue;let $;He.diff&&He.diff.modified.isEmpty&&this._options.shouldRenderOldRevertArrows.read(y)&&($=P()),D.push({afterLineNumber:He.modifiedRange.endLineNumberExclusive-1,domNode:_(),heightInPx:-dt,marginDomNode:$,showInHiddenAreas:!0,suppressMouseDown:!0})}}for(const He of p.read(y)??[]){if(!(ne!=null&&ne.lineRangeMapping.original.intersect(He.originalRange))||!(ne!=null&&ne.lineRangeMapping.modified.intersect(He.modifiedRange)))continue;const dt=He.modifiedHeightInPx-He.originalHeightInPx;dt>0?E.push({afterLineNumber:He.originalRange.endLineNumberExclusive-1,domNode:_(),heightInPx:dt,showInHiddenAreas:!0,suppressMouseDown:!0}):D.push({afterLineNumber:He.modifiedRange.endLineNumberExclusive-1,domNode:_(),heightInPx:-dt,showInHiddenAreas:!0,suppressMouseDown:!0})}return{orig:E,mod:D}});let b=!1;this._register(this._editors.original.onDidScrollChange(y=>{y.scrollLeftChanged&&!b&&(b=!0,this._editors.modified.setScrollLeft(y.scrollLeft),b=!1)})),this._register(this._editors.modified.onDidScrollChange(y=>{y.scrollLeftChanged&&!b&&(b=!0,this._editors.original.setScrollLeft(y.scrollLeft),b=!1)})),this._originalScrollTop=mi(this._editors.original.onDidScrollChange,()=>this._editors.original.getScrollTop()),this._modifiedScrollTop=mi(this._editors.modified.onDidScrollChange,()=>this._editors.modified.getScrollTop()),this._register(gt(y=>{const S=this._originalScrollTop.read(y)-(this._originalScrollOffsetAnimated.get()-this._modifiedScrollOffsetAnimated.read(y))-(this._originalTopPadding.get()-this._modifiedTopPadding.read(y));S!==this._editors.modified.getScrollTop()&&this._editors.modified.setScrollTop(S,1)})),this._register(gt(y=>{const S=this._modifiedScrollTop.read(y)-(this._modifiedScrollOffsetAnimated.get()-this._originalScrollOffsetAnimated.read(y))-(this._modifiedTopPadding.get()-this._originalTopPadding.read(y));S!==this._editors.original.getScrollTop()&&this._editors.original.setScrollTop(S,1)})),this._register(gt(y=>{var E;const S=(E=this._diffModel.read(y))==null?void 0:E.movedTextToCompare.read(y);let x=0;if(S){const D=this._editors.original.getTopForLineNumber(S.lineRangeMapping.original.startLineNumber,!0)-this._originalTopPadding.get();x=this._editors.modified.getTopForLineNumber(S.lineRangeMapping.modified.startLineNumber,!0)-this._modifiedTopPadding.get()-D}x>0?(this._modifiedTopPadding.set(0,void 0),this._originalTopPadding.set(x,void 0)):x<0?(this._modifiedTopPadding.set(-x,void 0),this._originalTopPadding.set(0,void 0)):setTimeout(()=>{this._modifiedTopPadding.set(0,void 0),this._originalTopPadding.set(0,void 0)},400),this._editors.modified.hasTextFocus()?this._originalScrollOffset.set(this._modifiedScrollOffset.get()-x,void 0,!0):this._modifiedScrollOffset.set(this._originalScrollOffset.get()+x,void 0,!0)}))}};Uj=iht([Rde(8,pp),Rde(9,ol)],Uj);function Ade(n,e,t,i,s,r){const o=new Gg(Mde(n,i)),a=new Gg(Mde(e,s)),l=n.getOption(67),c=e.getOption(67),d=[];let u=0,h=0;function f(g,p){for(;;){let _=o.peek(),w=a.peek();if(_&&_.lineNumber>=g&&(_=void 0),w&&w.lineNumber>=p&&(w=void 0),!_&&!w)break;const b=_?_.lineNumber-u:Number.MAX_VALUE,y=w?w.lineNumber-h:Number.MAX_VALUE;b<y?(o.dequeue(),w={lineNumber:_.lineNumber-u+h,heightInPx:0}):b>y?(a.dequeue(),_={lineNumber:w.lineNumber-h+u,heightInPx:0}):(o.dequeue(),a.dequeue()),d.push({originalRange:wt.ofLength(_.lineNumber,1),modifiedRange:wt.ofLength(w.lineNumber,1),originalHeightInPx:l+_.heightInPx,modifiedHeightInPx:c+w.heightInPx,diff:void 0})}}for(const g of t){let y=function(S,x,E=!1){var z,G;if(S<b||x<w)return;if(_)_=!1;else if(!E&&(S===b||x===w))return;const D=new wt(b,S),N=new wt(w,x);if(D.isEmpty&&N.isEmpty)return;const I=((z=o.takeWhile(J=>J.lineNumber<S))==null?void 0:z.reduce((J,j)=>J+j.heightInPx,0))??0,H=((G=a.takeWhile(J=>J.lineNumber<x))==null?void 0:G.reduce((J,j)=>J+j.heightInPx,0))??0;d.push({originalRange:D,modifiedRange:N,originalHeightInPx:D.length*l+I,modifiedHeightInPx:N.length*c+H,diff:g.lineRangeMapping}),b=S,w=x};const p=g.lineRangeMapping;f(p.original.startLineNumber,p.modified.startLineNumber);let _=!0,w=p.modified.startLineNumber,b=p.original.startLineNumber;if(r)for(const S of p.innerChanges||[]){S.originalRange.startColumn>1&&S.modifiedRange.startColumn>1&&y(S.originalRange.startLineNumber,S.modifiedRange.startLineNumber);const x=n.getModel(),E=S.originalRange.endLineNumber<=x.getLineCount()?x.getLineMaxColumn(S.originalRange.endLineNumber):Number.MAX_SAFE_INTEGER;S.originalRange.endColumn<E&&y(S.originalRange.endLineNumber,S.modifiedRange.endLineNumber)}y(p.original.endLineNumberExclusive,p.modified.endLineNumberExclusive,!0),u=p.original.endLineNumberExclusive,h=p.modified.endLineNumberExclusive}return f(Number.MAX_VALUE,Number.MAX_VALUE),d}function Mde(n,e){const t=[],i=[],s=n.getOption(147).wrappingColumn!==-1,r=n._getViewModel().coordinatesConverter,o=n.getOption(67);if(s)for(let l=1;l<=n.getModel().getLineCount();l++){const c=r.getModelLineViewLineCount(l);c>1&&i.push({lineNumber:l,heightInPx:o*(c-1)})}for(const l of n.getWhitespaces()){if(e.has(l.id))continue;const c=l.afterLineNumber===0?0:r.convertViewPositionToModelPosition(new Y(l.afterLineNumber,1)).lineNumber;t.push({lineNumber:c,heightInPx:l.height})}return Dut(t,i,l=>l.lineNumber,(l,c)=>({lineNumber:l.lineNumber,heightInPx:l.heightInPx+c.heightInPx}))}function SJ(n){return n.innerChanges?n.innerChanges.every(e=>Pde(e.modifiedRange)&&Pde(e.originalRange)||e.originalRange.equalsRange(new M(1,1,1,1))):!1}function Pde(n){return n.startLineNumber===n.endLineNumber}const $E=class $E extends ee{constructor(e,t,i,s,r){super(),this._rootElement=e,this._diffModel=t,this._originalEditorLayoutInfo=i,this._modifiedEditorLayoutInfo=s,this._editors=r,this._originalScrollTop=mi(this,this._editors.original.onDidScrollChange,()=>this._editors.original.getScrollTop()),this._modifiedScrollTop=mi(this,this._editors.modified.onDidScrollChange,()=>this._editors.modified.getScrollTop()),this._viewZonesChanged=pr("onDidChangeViewZones",this._editors.modified.onDidChangeViewZones),this.width=Nt(this,0),this._modifiedViewZonesChangedSignal=pr("modified.onDidChangeViewZones",this._editors.modified.onDidChangeViewZones),this._originalViewZonesChangedSignal=pr("original.onDidChangeViewZones",this._editors.original.onDidChangeViewZones),this._state=sv(this,(d,u)=>{var D;this._element.replaceChildren();const h=this._diffModel.read(d),f=(D=h==null?void 0:h.diff.read(d))==null?void 0:D.movedTexts;if(!f||f.length===0){this.width.set(0,void 0);return}this._viewZonesChanged.read(d);const g=this._originalEditorLayoutInfo.read(d),p=this._modifiedEditorLayoutInfo.read(d);if(!g||!p){this.width.set(0,void 0);return}this._modifiedViewZonesChangedSignal.read(d),this._originalViewZonesChangedSignal.read(d);const _=f.map(N=>{function I(te,ce){const Ie=ce.getTopForLineNumber(te.startLineNumber,!0),Ce=ce.getTopForLineNumber(te.endLineNumberExclusive,!0);return(Ie+Ce)/2}const H=I(N.lineRangeMapping.original,this._editors.original),z=this._originalScrollTop.read(d),G=I(N.lineRangeMapping.modified,this._editors.modified),J=this._modifiedScrollTop.read(d),j=H-z,ne=G-J,oe=Math.min(H,G),ve=Math.max(H,G);return{range:new At(oe,ve),from:j,to:ne,fromWithoutScroll:H,toWithoutScroll:G,move:N}});_.sort(JUe(No(N=>N.fromWithoutScroll>N.toWithoutScroll,e$e),No(N=>N.fromWithoutScroll>N.toWithoutScroll?N.fromWithoutScroll:-N.toWithoutScroll,xd)));const w=xJ.compute(_.map(N=>N.range)),b=10,y=g.verticalScrollbarWidth,S=(w.getTrackCount()-1)*10+b*2,x=y+S+(p.contentLeft-$E.movedCodeBlockPadding);let E=0;for(const N of _){const I=w.getTrack(E),H=y+b+I*10,z=15,G=15,J=x,j=p.glyphMarginWidth+p.lineNumbersWidth,ne=18,oe=document.createElementNS("http://www.w3.org/2000/svg","rect");oe.classList.add("arrow-rectangle"),oe.setAttribute("x",`${J-j}`),oe.setAttribute("y",`${N.to-ne/2}`),oe.setAttribute("width",`${j}`),oe.setAttribute("height",`${ne}`),this._element.appendChild(oe);const ve=document.createElementNS("http://www.w3.org/2000/svg","g"),te=document.createElementNS("http://www.w3.org/2000/svg","path");te.setAttribute("d",`M 0 ${N.from} L ${H} ${N.from} L ${H} ${N.to} L ${J-G} ${N.to}`),te.setAttribute("fill","none"),ve.appendChild(te);const ce=document.createElementNS("http://www.w3.org/2000/svg","polygon");ce.classList.add("arrow"),u.add(gt(Ie=>{te.classList.toggle("currentMove",N.move===h.activeMovedText.read(Ie)),ce.classList.toggle("currentMove",N.move===h.activeMovedText.read(Ie))})),ce.setAttribute("points",`${J-G},${N.to-z/2} ${J},${N.to} ${J-G},${N.to+z/2}`),ve.appendChild(ce),this._element.appendChild(ve),E++}this.width.set(S,void 0)}),this._element=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._element.setAttribute("class","moved-blocks-lines"),this._rootElement.appendChild(this._element),this._register(Ye(()=>this._element.remove())),this._register(gt(d=>{const u=this._originalEditorLayoutInfo.read(d),h=this._modifiedEditorLayoutInfo.read(d);!u||!h||(this._element.style.left=`${u.width-u.verticalScrollbarWidth}px`,this._element.style.height=`${u.height}px`,this._element.style.width=`${u.verticalScrollbarWidth+u.contentLeft-$E.movedCodeBlockPadding+this.width.read(d)}px`)})),this._register(Wx(this._state));const o=Ke(d=>{const u=this._diffModel.read(d),h=u==null?void 0:u.diff.read(d);return h?h.movedTexts.map(f=>({move:f,original:new P1(Sc(f.lineRangeMapping.original.startLineNumber-1),18),modified:new P1(Sc(f.lineRangeMapping.modified.startLineNumber-1),18)})):[]});this._register(zO(this._editors.original,o.map(d=>d.map(u=>u.original)))),this._register(zO(this._editors.modified,o.map(d=>d.map(u=>u.modified)))),this._register(da((d,u)=>{const h=o.read(d);for(const f of h)u.add(new Ode(this._editors.original,f.original,f.move,"original",this._diffModel.get())),u.add(new Ode(this._editors.modified,f.modified,f.move,"modified",this._diffModel.get()))}));const a=pr("original.onDidFocusEditorWidget",d=>this._editors.original.onDidFocusEditorWidget(()=>setTimeout(()=>d(void 0),0))),l=pr("modified.onDidFocusEditorWidget",d=>this._editors.modified.onDidFocusEditorWidget(()=>setTimeout(()=>d(void 0),0)));let c="modified";this._register(GN({createEmptyChangeSummary:()=>{},handleChange:(d,u)=>(d.didChange(a)&&(c="original"),d.didChange(l)&&(c="modified"),!0)},d=>{a.read(d),l.read(d);const u=this._diffModel.read(d);if(!u)return;const h=u.diff.read(d);let f;if(h&&c==="original"){const g=this._editors.originalCursor.read(d);g&&(f=h.movedTexts.find(p=>p.lineRangeMapping.original.contains(g.lineNumber)))}if(h&&c==="modified"){const g=this._editors.modifiedCursor.read(d);g&&(f=h.movedTexts.find(p=>p.lineRangeMapping.modified.contains(g.lineNumber)))}f!==u.movedTextToCompare.get()&&u.movedTextToCompare.set(void 0,void 0),u.setActiveMovedText(f)}))}};$E.movedCodeBlockPadding=4;let zy=$E;class xJ{static compute(e){const t=[],i=[];for(const s of e){let r=t.findIndex(o=>!o.intersectsStrict(s));r===-1&&(t.length>=6?r=FYe(t,No(a=>a.intersectWithRangeLength(s),xd)):(r=t.length,t.push(new xX))),t[r].addRange(s),i.push(r)}return new xJ(t.length,i)}constructor(e,t){this._trackCount=e,this.trackPerLineIdx=t}getTrack(e){return this.trackPerLineIdx[e]}getTrackCount(){return this._trackCount}}class Ode extends gJ{constructor(e,t,i,s,r){const o=Pt("div.diff-hidden-lines-widget");super(e,t,o.root),this._editor=e,this._move=i,this._kind=s,this._diffModel=r,this._nodes=Pt("div.diff-moved-code-block",{style:{marginRight:"4px"}},[Pt("div.text-content@textContent"),Pt("div.action-bar@actionBar")]),o.root.appendChild(this._nodes.root);const a=mi(this._editor.onDidLayoutChange,()=>this._editor.getLayoutInfo());this._register(tp(this._nodes.root,{paddingRight:a.map(h=>h.verticalScrollbarWidth)}));let l;i.changes.length>0?l=this._kind==="original"?v("codeMovedToWithChanges","Code moved with changes to line {0}-{1}",this._move.lineRangeMapping.modified.startLineNumber,this._move.lineRangeMapping.modified.endLineNumberExclusive-1):v("codeMovedFromWithChanges","Code moved with changes from line {0}-{1}",this._move.lineRangeMapping.original.startLineNumber,this._move.lineRangeMapping.original.endLineNumberExclusive-1):l=this._kind==="original"?v("codeMovedTo","Code moved to line {0}-{1}",this._move.lineRangeMapping.modified.startLineNumber,this._move.lineRangeMapping.modified.endLineNumberExclusive-1):v("codeMovedFrom","Code moved from line {0}-{1}",this._move.lineRangeMapping.original.startLineNumber,this._move.lineRangeMapping.original.endLineNumberExclusive-1);const c=this._register(new Ul(this._nodes.actionBar,{highlightToggledItems:!0})),d=new Ya("",l,"",!1);c.push(d,{icon:!1,label:!0});const u=new Ya("","Compare",ot.asClassName(ye.compareChanges),!0,()=>{this._editor.focus(),this._diffModel.movedTextToCompare.set(this._diffModel.movedTextToCompare.get()===i?void 0:this._move,void 0)});this._register(gt(h=>{const f=this._diffModel.movedTextToCompare.read(h)===i;u.checked=f})),c.push(u,{icon:!1,label:!0})}}class nht extends ee{constructor(e,t,i,s){super(),this._editors=e,this._diffModel=t,this._options=i,this._decorations=Ke(this,r=>{const o=this._diffModel.read(r),a=o==null?void 0:o.diff.read(r);if(!a)return null;const l=this._diffModel.read(r).movedTextToCompare.read(r),c=this._options.renderIndicators.read(r),d=this._options.showEmptyDecorations.read(r),u=[],h=[];if(!l)for(const g of a.mappings)if(g.lineRangeMapping.original.isEmpty||u.push({range:g.lineRangeMapping.original.toInclusiveRange(),options:c?ED:Dde}),g.lineRangeMapping.modified.isEmpty||h.push({range:g.lineRangeMapping.modified.toInclusiveRange(),options:c?$O:Ide}),g.lineRangeMapping.modified.isEmpty||g.lineRangeMapping.original.isEmpty)g.lineRangeMapping.original.isEmpty||u.push({range:g.lineRangeMapping.original.toInclusiveRange(),options:bJ}),g.lineRangeMapping.modified.isEmpty||h.push({range:g.lineRangeMapping.modified.toInclusiveRange(),options:_J});else{const p=this._options.useTrueInlineDiffRendering.read(r)&&SJ(g.lineRangeMapping);for(const _ of g.lineRangeMapping.innerChanges||[])if(g.lineRangeMapping.original.contains(_.originalRange.startLineNumber)&&u.push({range:_.originalRange,options:_.originalRange.isEmpty()&&d?wJ:XS}),g.lineRangeMapping.modified.contains(_.modifiedRange.startLineNumber)&&h.push({range:_.modifiedRange,options:_.modifiedRange.isEmpty()&&d&&!p?vJ:jO}),p){const w=o.model.original.getValueInRange(_.originalRange);h.push({range:_.modifiedRange,options:{description:"deleted-text",before:{content:w,inlineClassName:"inline-deleted-text"},zIndex:1e5,showIfCollapsed:!0}})}}if(l)for(const g of l.changes){const p=g.original.toInclusiveRange();p&&u.push({range:p,options:c?ED:Dde});const _=g.modified.toInclusiveRange();_&&h.push({range:_,options:c?$O:Ide});for(const w of g.innerChanges||[])u.push({range:w.originalRange,options:XS}),h.push({range:w.modifiedRange,options:jO})}const f=this._diffModel.read(r).activeMovedText.read(r);for(const g of a.movedTexts)u.push({range:g.lineRangeMapping.original.toInclusiveRange(),options:{description:"moved",blockClassName:"movedOriginal"+(g===f?" currentMove":""),blockPadding:[zy.movedCodeBlockPadding,0,zy.movedCodeBlockPadding,zy.movedCodeBlockPadding]}}),h.push({range:g.lineRangeMapping.modified.toInclusiveRange(),options:{description:"moved",blockClassName:"movedModified"+(g===f?" currentMove":""),blockPadding:[4,0,4,4]}});return{originalDecorations:u,modifiedDecorations:h}}),this._register(VO(this._editors.original,this._decorations.map(r=>(r==null?void 0:r.originalDecorations)||[]))),this._register(VO(this._editors.modified,this._decorations.map(r=>(r==null?void 0:r.modifiedDecorations)||[])))}}class sht{resetSash(){this._sashRatio.set(void 0,void 0)}constructor(e,t){this._options=e,this.dimensions=t,this.sashLeft=KN(this,i=>{const s=this._sashRatio.read(i)??this._options.splitViewDefaultRatio.read(i);return this._computeSashLeft(s,i)},(i,s)=>{const r=this.dimensions.width.get();this._sashRatio.set(i/r,s)}),this._sashRatio=Nt(this,void 0)}_computeSashLeft(e,t){const i=this.dimensions.width.read(t),s=Math.floor(this._options.splitViewDefaultRatio.read(t)*i),r=this._options.enableSplitViewResizing.read(t)?Math.floor(e*i):s,o=100;return i<=o*2?s:r<o?o:r>i-o?i-o:r}}class JSe extends ee{constructor(e,t,i,s,r,o){super(),this._domNode=e,this._dimensions=t,this._enabled=i,this._boundarySashes=s,this.sashLeft=r,this._resetSash=o,this._sash=this._register(new Dr(this._domNode,{getVerticalSashTop:a=>0,getVerticalSashLeft:a=>this.sashLeft.get(),getVerticalSashHeight:a=>this._dimensions.height.get()},{orientation:0})),this._startSashPosition=void 0,this._register(this._sash.onDidStart(()=>{this._startSashPosition=this.sashLeft.get()})),this._register(this._sash.onDidChange(a=>{this.sashLeft.set(this._startSashPosition+(a.currentX-a.startX),void 0)})),this._register(this._sash.onDidEnd(()=>this._sash.layout())),this._register(this._sash.onDidReset(()=>this._resetSash())),this._register(gt(a=>{const l=this._boundarySashes.read(a);l&&(this._sash.orthogonalEndSash=l.bottom)})),this._register(gt(a=>{const l=this._enabled.read(a);this._sash.state=l?3:0,this.sashLeft.read(a),this._dimensions.height.read(a),this._sash.layout()}))}}class rht extends ee{constructor(e,t,i){super(),this._editor=e,this._domNode=t,this.itemProvider=i,this.scrollTop=mi(this,this._editor.onDidScrollChange,o=>this._editor.getScrollTop()),this.isScrollTopZero=this.scrollTop.map(o=>o===0),this.modelAttached=mi(this,this._editor.onDidChangeModel,o=>this._editor.hasModel()),this.editorOnDidChangeViewZones=pr("onDidChangeViewZones",this._editor.onDidChangeViewZones),this.editorOnDidContentSizeChange=pr("onDidContentSizeChange",this._editor.onDidContentSizeChange),this.domNodeSizeChanged=Bx("domNodeSizeChanged"),this.views=new Map,this._domNode.className="gutter monaco-editor";const s=this._domNode.appendChild(Pt("div.scroll-decoration",{role:"presentation",ariaHidden:"true",style:{width:"100%"}}).root),r=new ResizeObserver(()=>{pn(o=>{this.domNodeSizeChanged.trigger(o)})});r.observe(this._domNode),this._register(Ye(()=>r.disconnect())),this._register(gt(o=>{s.className=this.isScrollTopZero.read(o)?"":"scroll-decoration"})),this._register(gt(o=>this.render(o)))}dispose(){super.dispose(),sr(this._domNode)}render(e){if(!this.modelAttached.read(e))return;this.domNodeSizeChanged.read(e),this.editorOnDidChangeViewZones.read(e),this.editorOnDidContentSizeChange.read(e);const t=this.scrollTop.read(e),i=this._editor.getVisibleRanges(),s=new Set(this.views.keys()),r=At.ofStartAndLength(0,this._domNode.clientHeight);if(!r.isEmpty)for(const o of i){const a=new wt(o.startLineNumber,o.endLineNumber+1),l=this.itemProvider.getIntersectingGutterItems(a,e);pn(c=>{for(const d of l){if(!d.range.intersect(a))continue;s.delete(d.id);let u=this.views.get(d.id);if(u)u.item.set(d,c);else{const p=document.createElement("div");this._domNode.appendChild(p);const _=Nt("item",d),w=this.itemProvider.createView(_,p);u=new oht(_,w,p),this.views.set(d.id,u)}const h=d.range.startLineNumber<=this._editor.getModel().getLineCount()?this._editor.getTopForLineNumber(d.range.startLineNumber,!0)-t:this._editor.getBottomForLineNumber(d.range.startLineNumber-1,!1)-t,g=(d.range.endLineNumberExclusive===1?Math.max(h,this._editor.getTopForLineNumber(d.range.startLineNumber,!1)-t):Math.max(h,this._editor.getBottomForLineNumber(d.range.endLineNumberExclusive-1,!0)-t))-h;u.domNode.style.top=`${h}px`,u.domNode.style.height=`${g}px`,u.gutterItemView.layout(At.ofStartAndLength(h,g),r)}})}for(const o of s){const a=this.views.get(o);a.gutterItemView.dispose(),a.domNode.remove(),this.views.delete(o)}}}class oht{constructor(e,t,i){this.item=e,this.gutterItemView=t,this.domNode=i}}class exe extends u0{constructor(e){super(),this._getContext=e}runAction(e,t){const i=this._getContext();return super.runAction(e,i)}}class Fde extends vCe{constructor(e){super(),this._textModel=e}getValueOfRange(e){return this._textModel.getValueInRange(e)}get length(){const e=this._textModel.getLineCount(),t=this._textModel.getLineLength(e);return new Rd(e-1,t)}}class aht extends ee{constructor(e,t,i={orientation:0}){super(),this.submenuActionViewItems=[],this.hasSecondaryActions=!1,this._onDidChangeDropdownVisibility=this._register(new xje),this.onDidChangeDropdownVisibility=this._onDidChangeDropdownVisibility.event,this.disposables=this._register(new ue),i.hoverDelegate=i.hoverDelegate??this._register(US()),this.options=i,this.toggleMenuAction=this._register(new ID(()=>{var s;return(s=this.toggleMenuActionViewItem)==null?void 0:s.show()},i.toggleMenuTitle)),this.element=document.createElement("div"),this.element.className="monaco-toolbar",e.appendChild(this.element),this.actionBar=this._register(new Ul(this.element,{orientation:i.orientation,ariaLabel:i.ariaLabel,actionRunner:i.actionRunner,allowContextMenu:i.allowContextMenu,highlightToggledItems:i.highlightToggledItems,hoverDelegate:i.hoverDelegate,actionViewItemProvider:(s,r)=>{if(s.id===ID.ID)return this.toggleMenuActionViewItem=new qP(s,s.menuActions,t,{actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,keybindingProvider:this.options.getKeyBinding,classNames:ot.asClassNameArray(i.moreIcon??ye.toolBarMore),anchorAlignmentProvider:this.options.anchorAlignmentProvider,menuAsChild:!!this.options.renderDropdownAsChildElement,skipTelemetry:this.options.skipTelemetry,isMenu:!0,hoverDelegate:this.options.hoverDelegate}),this.toggleMenuActionViewItem.setActionContext(this.actionBar.context),this.disposables.add(this._onDidChangeDropdownVisibility.add(this.toggleMenuActionViewItem.onDidChangeVisibility)),this.toggleMenuActionViewItem;if(i.actionViewItemProvider){const o=i.actionViewItemProvider(s,r);if(o)return o}if(s instanceof NS){const o=new qP(s,s.actions,t,{actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,keybindingProvider:this.options.getKeyBinding,classNames:s.class,anchorAlignmentProvider:this.options.anchorAlignmentProvider,menuAsChild:!!this.options.renderDropdownAsChildElement,skipTelemetry:this.options.skipTelemetry,hoverDelegate:this.options.hoverDelegate});return o.setActionContext(this.actionBar.context),this.submenuActionViewItems.push(o),this.disposables.add(this._onDidChangeDropdownVisibility.add(o.onDidChangeVisibility)),o}}}))}set actionRunner(e){this.actionBar.actionRunner=e}get actionRunner(){return this.actionBar.actionRunner}getElement(){return this.element}getItemAction(e){return this.actionBar.getAction(e)}setActions(e,t){this.clear();const i=e?e.slice(0):[];this.hasSecondaryActions=!!(t&&t.length>0),this.hasSecondaryActions&&t&&(this.toggleMenuAction.menuActions=t.slice(0),i.push(this.toggleMenuAction)),i.forEach(s=>{this.actionBar.push(s,{icon:this.options.icon??!0,label:this.options.label??!1,keybinding:this.getKeybindingLabel(s)})})}getKeybindingLabel(e){var i,s;const t=(s=(i=this.options).getKeyBinding)==null?void 0:s.call(i,e);return(t==null?void 0:t.getLabel())??void 0}clear(){this.submenuActionViewItems=[],this.disposables.clear(),this.actionBar.clear()}dispose(){this.clear(),this.disposables.dispose(),super.dispose()}}const G4=class G4 extends Ya{constructor(e,t){t=t||v("moreActions","More Actions..."),super(G4.ID,t,void 0,!0),this._menuActions=[],this.toggleDropdownMenu=e}async run(){this.toggleDropdownMenu()}get menuActions(){return this._menuActions}set menuActions(e){this._menuActions=e}};G4.ID="toolbar.toggle.more";let ID=G4;var txe=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},fd=function(n,e){return function(t,i){e(t,i,n)}};let DD=class extends aht{constructor(e,t,i,s,r,o,a,l){super(e,r,{getKeyBinding:d=>o.lookupKeybinding(d.id)??void 0,...t,allowContextMenu:!0,skipTelemetry:typeof(t==null?void 0:t.telemetrySource)=="string"}),this._options=t,this._menuService=i,this._contextKeyService=s,this._contextMenuService=r,this._keybindingService=o,this._commandService=a,this._sessionDisposables=this._store.add(new ue);const c=t==null?void 0:t.telemetrySource;c&&this._store.add(this.actionBar.onDidRun(d=>l.publicLog2("workbenchActionExecuted",{id:d.action.id,from:c})))}setActions(e,t=[],i){var d,u,h;this._sessionDisposables.clear();const s=e.slice(),r=t.slice(),o=[];let a=0;const l=[];let c=!1;if(((d=this._options)==null?void 0:d.hiddenItemStrategy)!==-1)for(let f=0;f<s.length;f++){const g=s[f];!(g instanceof Za)&&!(g instanceof xy)||g.hideActions&&(o.push(g.hideActions.toggle),g.hideActions.toggle.checked&&a++,g.hideActions.isHidden&&(c=!0,s[f]=void 0,((u=this._options)==null?void 0:u.hiddenItemStrategy)!==0&&(l[f]=g)))}if(((h=this._options)==null?void 0:h.overflowBehavior)!==void 0){const f=ynt(new Set(this._options.overflowBehavior.exempted),qt.map(s,_=>_==null?void 0:_.id)),g=this._options.overflowBehavior.maxItems-f.size;let p=0;for(let _=0;_<s.length;_++){const w=s[_];w&&(p++,!f.has(w.id)&&p>=g&&(s[_]=void 0,l[_]=w))}}foe(s),foe(l),super.setActions(s,Ts.join(l,r)),(o.length>0||s.length>0)&&this._sessionDisposables.add(re(this.getElement(),"contextmenu",f=>{var b,y,S,x,E;const g=new bd(nt(this.getElement()),f),p=this.getItemAction(g.target);if(!p)return;g.preventDefault(),g.stopPropagation();const _=[];if(p instanceof Za&&p.menuKeybinding)_.push(p.menuKeybinding);else if(!(p instanceof xy||p instanceof ID)){const D=!!this._keybindingService.lookupKeybinding(p.id);_.push(vSe(this._commandService,this._keybindingService,p.id,void 0,D))}if(o.length>0){let D=!1;if(a===1&&((b=this._options)==null?void 0:b.hiddenItemStrategy)===0){D=!0;for(let N=0;N<o.length;N++)if(o[N].checked){o[N]=Ub({id:p.id,label:p.label,checked:!0,enabled:!1,run(){}});break}}if(!D&&(p instanceof Za||p instanceof xy)){if(!p.hideActions)return;_.push(p.hideActions.hide)}else _.push(Ub({id:"label",label:v("hide","Hide"),enabled:!1,run(){}}))}const w=Ts.join(_,o);(y=this._options)!=null&&y.resetMenu&&!i&&(i=[this._options.resetMenu]),c&&i&&(w.push(new Ts),w.push(Ub({id:"resetThisMenu",label:v("resetThisMenu","Reset Menu"),run:()=>this._menuService.resetHiddenStates(i)}))),w.length!==0&&this._contextMenuService.showContextMenu({getAnchor:()=>g,getActions:()=>w,menuId:(S=this._options)==null?void 0:S.contextMenu,menuActionOptions:{renderShortTitle:!0,...(x=this._options)==null?void 0:x.menuOptions},skipTelemetry:typeof((E=this._options)==null?void 0:E.telemetrySource)=="string",contextKeyService:this._contextKeyService})}))}};DD=txe([fd(2,Yl),fd(3,at),fd(4,ol),fd(5,hi),fd(6,Vi),fd(7,Hr)],DD);let KO=class extends DD{constructor(e,t,i,s,r,o,a,l,c){super(e,{resetMenu:t,...i},s,r,o,a,l,c),this._onDidChangeMenuItems=this._store.add(new X),this.onDidChangeMenuItems=this._onDidChangeMenuItems.event;const d=this._store.add(s.createMenu(t,r,{emitEventsForSubmenuChanges:!0})),u=()=>{var g,p,_;const h=[],f=[];LB(d,i==null?void 0:i.menuOptions,{primary:h,secondary:f},(g=i==null?void 0:i.toolbarOptions)==null?void 0:g.primaryGroup,(p=i==null?void 0:i.toolbarOptions)==null?void 0:p.shouldInlineSubmenu,(_=i==null?void 0:i.toolbarOptions)==null?void 0:_.useSeparatorsInPrimaryActions),e.classList.toggle("has-no-actions",h.length===0&&f.length===0),super.setActions(h,f)};this._store.add(d.onDidChange(()=>{u(),this._onDidChangeMenuItems.fire(this)})),u()}setActions(){throw new li("This toolbar is populated from a menu.")}};KO=txe([fd(3,Yl),fd(4,at),fd(5,ol),fd(6,hi),fd(7,Vi),fd(8,Hr)],KO);var ixe=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},z2=function(n,e){return function(t,i){e(t,i,n)}};const e6=[],bA=35;let $j=class extends ee{constructor(e,t,i,s,r,o,a,l,c){super(),this._diffModel=t,this._editors=i,this._options=s,this._sashLayout=r,this._boundarySashes=o,this._instantiationService=a,this._contextKeyService=l,this._menuService=c,this._menu=this._register(this._menuService.createMenu(ze.DiffEditorHunkToolbar,this._contextKeyService)),this._actions=mi(this,this._menu.onDidChange,()=>this._menu.getActions()),this._hasActions=this._actions.map(d=>d.length>0),this._showSash=Ke(this,d=>this._options.renderSideBySide.read(d)&&this._hasActions.read(d)),this.width=Ke(this,d=>this._hasActions.read(d)?bA:0),this.elements=Pt("div.gutter@gutter",{style:{position:"absolute",height:"100%",width:bA+"px"}},[]),this._currentDiff=Ke(this,d=>{var g;const u=this._diffModel.read(d);if(!u)return;const h=(g=u.diff.read(d))==null?void 0:g.mappings,f=this._editors.modifiedCursor.read(d);if(f)return h==null?void 0:h.find(p=>p.lineRangeMapping.modified.contains(f.lineNumber))}),this._selectedDiffs=Ke(this,d=>{const u=this._diffModel.read(d),h=u==null?void 0:u.diff.read(d);if(!h)return e6;const f=this._editors.modifiedSelections.read(d);if(f.every(w=>w.isEmpty()))return e6;const g=new wc(f.map(w=>wt.fromRangeInclusive(w))),_=h.mappings.filter(w=>w.lineRangeMapping.innerChanges&&g.intersects(w.lineRangeMapping.modified)).map(w=>({mapping:w,rangeMappings:w.lineRangeMapping.innerChanges.filter(b=>f.some(y=>M.areIntersecting(b.modifiedRange,y)))}));return _.length===0||_.every(w=>w.rangeMappings.length===0)?e6:_}),this._register(Nut(e,this.elements.root)),this._register(re(this.elements.root,"click",()=>{this._editors.modified.focus()})),this._register(tp(this.elements.root,{display:this._hasActions.map(d=>d?"block":"none")})),io(this,d=>this._showSash.read(d)?new JSe(e,this._sashLayout.dimensions,this._options.enableSplitViewResizing,this._boundarySashes,KN(this,h=>this._sashLayout.sashLeft.read(h)-bA,(h,f)=>this._sashLayout.sashLeft.set(h+bA,f)),()=>this._sashLayout.resetSash()):void 0).recomputeInitiallyAndOnChange(this._store),this._register(new rht(this._editors.modified,this.elements.root,{getIntersectingGutterItems:(d,u)=>{const h=this._diffModel.read(u);if(!h)return[];const f=h.diff.read(u);if(!f)return[];const g=this._selectedDiffs.read(u);if(g.length>0){const _=zl.fromRangeMappings(g.flatMap(w=>w.rangeMappings));return[new Bde(_,!0,ze.DiffEditorSelectionToolbar,void 0,h.model.original.uri,h.model.modified.uri)]}const p=this._currentDiff.read(u);return f.mappings.map(_=>new Bde(_.lineRangeMapping.withInnerChangesFromLineRanges(),_.lineRangeMapping===(p==null?void 0:p.lineRangeMapping),ze.DiffEditorHunkToolbar,void 0,h.model.original.uri,h.model.modified.uri))},createView:(d,u)=>this._instantiationService.createInstance(jj,d,u,this)})),this._register(re(this.elements.gutter,Se.MOUSE_WHEEL,d=>{this._editors.modified.getOption(104).handleMouseWheel&&this._editors.modified.delegateScrollFromMouseWheelEvent(d)},{passive:!1}))}computeStagedValue(e){const t=e.innerChanges??[],i=new Fde(this._editors.modifiedModel.get()),s=new Fde(this._editors.original.getModel());return new kX(t.map(a=>a.toTextEdit(i))).apply(s)}layout(e){this.elements.gutter.style.left=e+"px"}};$j=ixe([z2(6,Ze),z2(7,at),z2(8,Yl)],$j);class Bde{constructor(e,t,i,s,r,o){this.mapping=e,this.showAlways=t,this.menuId=i,this.rangeOverride=s,this.originalUri=r,this.modifiedUri=o}get id(){return this.mapping.modified.toString()}get range(){return this.rangeOverride??this.mapping.modified}}let jj=class extends ee{constructor(e,t,i,s){super(),this._item=e,this._elements=Pt("div.gutterItem",{style:{height:"20px",width:"34px"}},[Pt("div.background@background",{},[]),Pt("div.buttons@buttons",{},[])]),this._showAlways=this._item.map(this,o=>o.showAlways),this._menuId=this._item.map(this,o=>o.menuId),this._isSmall=Nt(this,!1),this._lastItemRange=void 0,this._lastViewRange=void 0;const r=this._register(s.createInstance(OS,"element",!0,{position:{hoverPosition:1}}));this._register(M1(t,this._elements.root)),this._register(gt(o=>{const a=this._showAlways.read(o);this._elements.root.classList.toggle("noTransition",!0),this._elements.root.classList.toggle("showAlways",a),setTimeout(()=>{this._elements.root.classList.toggle("noTransition",!1)},0)})),this._register(da((o,a)=>{this._elements.buttons.replaceChildren();const l=a.add(s.createInstance(KO,this._elements.buttons,this._menuId.read(o),{orientation:1,hoverDelegate:r,toolbarOptions:{primaryGroup:c=>c.startsWith("primary")},overflowBehavior:{maxItems:this._isSmall.read(o)?1:3},hiddenItemStrategy:0,actionRunner:new exe(()=>{const c=this._item.get(),d=c.mapping;return{mapping:d,originalWithModifiedChanges:i.computeStagedValue(d),originalUri:c.originalUri,modifiedUri:c.modifiedUri}}),menuOptions:{shouldForwardArgs:!0}}));a.add(l.onDidChangeMenuItems(()=>{this._lastItemRange&&this.layout(this._lastItemRange,this._lastViewRange)}))}))}layout(e,t){this._lastItemRange=e,this._lastViewRange=t;let i=this._elements.buttons.clientHeight;this._isSmall.set(this._item.get().mapping.original.startLineNumber===1&&e.length<30,void 0),i=this._elements.buttons.clientHeight;const s=e.length/2-i/2,r=i;let o=e.start+s;const a=At.tryCreate(r,t.endExclusive-r-i),l=At.tryCreate(e.start+r,e.endExclusive-i-r);l&&a&&l.start<l.endExclusive&&(o=a.clip(o),o=l.clip(o)),this._elements.buttons.style.top=`${o-e.start}px`}};jj=ixe([z2(3,Ze)],jj);function $a(n){return Kj.get(n)}const Yp=class Yp extends ee{static get(e){let t=Yp._map.get(e);if(!t){t=new Yp(e),Yp._map.set(e,t);const i=e.onDidDispose(()=>{const s=Yp._map.get(e);s&&(Yp._map.delete(e),s.dispose(),i.dispose())})}return t}_beginUpdate(){this._updateCounter++,this._updateCounter===1&&(this._currentTransaction=new Fx(()=>{}))}_endUpdate(){if(this._updateCounter--,this._updateCounter===0){const e=this._currentTransaction;this._currentTransaction=void 0,e.finish()}}constructor(e){var t;super(),this.editor=e,this._updateCounter=0,this._currentTransaction=void 0,this._model=Nt(this,this.editor.getModel()),this.model=this._model,this.isReadonly=mi(this,this.editor.onDidChangeConfiguration,()=>this.editor.getOption(92)),this._versionId=XU({owner:this,lazy:!0},((t=this.editor.getModel())==null?void 0:t.getVersionId())??null),this.versionId=this._versionId,this._selections=XU({owner:this,equalsFn:GU($P($e.selectionsEqual)),lazy:!0},this.editor.getSelections()??null),this.selections=this._selections,this.isFocused=mi(this,i=>{const s=this.editor.onDidFocusEditorWidget(i),r=this.editor.onDidBlurEditorWidget(i);return{dispose(){s.dispose(),r.dispose()}}},()=>this.editor.hasWidgetFocus()),this.value=KN(this,i=>{var s;return this.versionId.read(i),((s=this.model.read(i))==null?void 0:s.getValue())??""},(i,s)=>{const r=this.model.get();r!==null&&i!==r.getValue()&&r.setValue(i)}),this.valueIsEmpty=Ke(this,i=>{var s;return this.versionId.read(i),((s=this.editor.getModel())==null?void 0:s.getValueLength())===0}),this.cursorSelection=Il({owner:this,equalsFn:GU($e.selectionsEqual)},i=>{var s;return((s=this.selections.read(i))==null?void 0:s[0])??null}),this.onDidType=Bx(this),this.scrollTop=mi(this.editor.onDidScrollChange,()=>this.editor.getScrollTop()),this.scrollLeft=mi(this.editor.onDidScrollChange,()=>this.editor.getScrollLeft()),this.layoutInfo=mi(this.editor.onDidLayoutChange,()=>this.editor.getLayoutInfo()),this.layoutInfoContentLeft=this.layoutInfo.map(i=>i.contentLeft),this.layoutInfoDecorationsLeft=this.layoutInfo.map(i=>i.decorationsLeft),this.contentWidth=mi(this.editor.onDidContentSizeChange,()=>this.editor.getContentWidth()),this._overlayWidgetCounter=0,this._register(this.editor.onBeginUpdate(()=>this._beginUpdate())),this._register(this.editor.onEndUpdate(()=>this._endUpdate())),this._register(this.editor.onDidChangeModel(()=>{this._beginUpdate();try{this._model.set(this.editor.getModel(),this._currentTransaction),this._forceUpdate()}finally{this._endUpdate()}})),this._register(this.editor.onDidType(i=>{this._beginUpdate();try{this._forceUpdate(),this.onDidType.trigger(this._currentTransaction,i)}finally{this._endUpdate()}})),this._register(this.editor.onDidChangeModelContent(i=>{var s;this._beginUpdate();try{this._versionId.set(((s=this.editor.getModel())==null?void 0:s.getVersionId())??null,this._currentTransaction,i),this._forceUpdate()}finally{this._endUpdate()}})),this._register(this.editor.onDidChangeCursorSelection(i=>{this._beginUpdate();try{this._selections.set(this.editor.getSelections(),this._currentTransaction,i),this._forceUpdate()}finally{this._endUpdate()}}))}forceUpdate(e){this._beginUpdate();try{return this._forceUpdate(),e?e(this._currentTransaction):void 0}finally{this._endUpdate()}}_forceUpdate(){var e;this._beginUpdate();try{this._model.set(this.editor.getModel(),this._currentTransaction),this._versionId.set(((e=this.editor.getModel())==null?void 0:e.getVersionId())??null,this._currentTransaction,void 0),this._selections.set(this.editor.getSelections(),this._currentTransaction,void 0)}finally{this._endUpdate()}}getOption(e){return mi(this,t=>this.editor.onDidChangeConfiguration(i=>{i.hasChanged(e)&&t(void 0)}),()=>this.editor.getOption(e))}setDecorations(e){const t=new ue,i=this.editor.createDecorationsCollection();return t.add(qN({owner:this,debugName:()=>`Apply decorations from ${e.debugName}`},s=>{const r=e.read(s);i.set(r)})),t.add({dispose:()=>{i.clear()}}),t}createOverlayWidget(e){const t="observableOverlayWidget"+this._overlayWidgetCounter++,i={getDomNode:()=>e.domNode,getPosition:()=>e.position.get(),getId:()=>t,allowEditorOverflow:e.allowEditorOverflow,getMinContentWidthInPx:()=>e.minContentWidthInPx.get()};this.editor.addOverlayWidget(i);const s=gt(r=>{e.position.read(r),e.minContentWidthInPx.read(r),this.editor.layoutOverlayWidget(i)});return Ye(()=>{s.dispose(),this.editor.removeOverlayWidget(i)})}};Yp._map=new Map;let Kj=Yp;function qj(n,e){return Rtt({createEmptyChangeSummary:()=>({deltas:[],didChange:!1}),handleChange:(t,i)=>{if(t.didChange(n)){const s=t.change;s!==void 0&&i.deltas.push(s),i.didChange=!0}return!0}},(t,i)=>{const s=n.read(t);i.didChange&&e(s,i.deltas)})}function lht(n,e){const t=new ue,i=qj(n,(s,r)=>{t.clear(),e(s,r,t)});return{dispose(){i.dispose(),t.dispose()}}}var cht=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},dht=function(n,e){return function(t,i){e(t,i,n)}},U2,cw;let qO=(cw=class extends ee{static setBreadcrumbsSourceFactory(e){this._breadcrumbsSourceFactory.set(e,void 0)}get isUpdatingHiddenAreas(){return this._isUpdatingHiddenAreas}constructor(e,t,i,s){super(),this._editors=e,this._diffModel=t,this._options=i,this._instantiationService=s,this._modifiedOutlineSource=io(this,l=>{const c=this._editors.modifiedModel.read(l),d=U2._breadcrumbsSourceFactory.read(l);return!c||!d?void 0:d(c,this._instantiationService)}),this._isUpdatingHiddenAreas=!1,this._register(this._editors.original.onDidChangeCursorPosition(l=>{if(l.reason===1)return;const c=this._diffModel.get();pn(d=>{for(const u of this._editors.original.getSelections()||[])c==null||c.ensureOriginalLineIsVisible(u.getStartPosition().lineNumber,0,d),c==null||c.ensureOriginalLineIsVisible(u.getEndPosition().lineNumber,0,d)})})),this._register(this._editors.modified.onDidChangeCursorPosition(l=>{if(l.reason===1)return;const c=this._diffModel.get();pn(d=>{for(const u of this._editors.modified.getSelections()||[])c==null||c.ensureModifiedLineIsVisible(u.getStartPosition().lineNumber,0,d),c==null||c.ensureModifiedLineIsVisible(u.getEndPosition().lineNumber,0,d)})}));const r=this._diffModel.map((l,c)=>{var u;const d=(l==null?void 0:l.unchangedRegions.read(c))??[];return d.length===1&&d[0].modifiedLineNumber===1&&d[0].lineCount===((u=this._editors.modifiedModel.read(c))==null?void 0:u.getLineCount())?[]:d});this.viewZones=sv(this,(l,c)=>{const d=this._modifiedOutlineSource.read(l);if(!d)return{origViewZones:[],modViewZones:[]};const u=[],h=[],f=this._options.renderSideBySide.read(l),g=this._options.compactMode.read(l),p=r.read(l);for(let _=0;_<p.length;_++){const w=p[_];if(!w.shouldHideControls(l)&&!(g&&(_===0||_===p.length-1)))if(g){{const b=Ke(this,S=>w.getHiddenOriginalRange(S).startLineNumber-1),y=new P1(b,12);u.push(y),c.add(new Wde(this._editors.original,y,w,!f))}{const b=Ke(this,S=>w.getHiddenModifiedRange(S).startLineNumber-1),y=new P1(b,12);h.push(y),c.add(new Wde(this._editors.modified,y,w))}}else{{const b=Ke(this,S=>w.getHiddenOriginalRange(S).startLineNumber-1),y=new P1(b,24);u.push(y),c.add(new Hde(this._editors.original,y,w,w.originalUnchangedRange,!f,d,S=>this._diffModel.get().ensureModifiedLineIsVisible(S,2,void 0),this._options))}{const b=Ke(this,S=>w.getHiddenModifiedRange(S).startLineNumber-1),y=new P1(b,24);h.push(y),c.add(new Hde(this._editors.modified,y,w,w.modifiedUnchangedRange,!1,d,S=>this._diffModel.get().ensureModifiedLineIsVisible(S,2,void 0),this._options))}}}return{origViewZones:u,modViewZones:h}});const o={description:"unchanged lines",className:"diff-unchanged-lines",isWholeLine:!0},a={description:"Fold Unchanged",glyphMarginHoverMessage:new Rr(void 0,{isTrusted:!0,supportThemeIcons:!0}).appendMarkdown(v("foldUnchanged","Fold Unchanged Region")),glyphMarginClassName:"fold-unchanged "+ot.asClassName(ye.fold),zIndex:10001};this._register(VO(this._editors.original,Ke(this,l=>{const c=r.read(l),d=c.map(u=>({range:u.originalUnchangedRange.toInclusiveRange(),options:o}));for(const u of c)u.shouldHideControls(l)&&d.push({range:M.fromPositions(new Y(u.originalLineNumber,1)),options:a});return d}))),this._register(VO(this._editors.modified,Ke(this,l=>{const c=r.read(l),d=c.map(u=>({range:u.modifiedUnchangedRange.toInclusiveRange(),options:o}));for(const u of c)u.shouldHideControls(l)&&d.push({range:wt.ofLength(u.modifiedLineNumber,1).toInclusiveRange(),options:a});return d}))),this._register(gt(l=>{const c=r.read(l);this._isUpdatingHiddenAreas=!0;try{this._editors.original.setHiddenAreas(c.map(d=>d.getHiddenOriginalRange(l).toInclusiveRange()).filter(Yh)),this._editors.modified.setHiddenAreas(c.map(d=>d.getHiddenModifiedRange(l).toInclusiveRange()).filter(Yh))}finally{this._isUpdatingHiddenAreas=!1}})),this._register(this._editors.modified.onMouseUp(l=>{var c;if(!l.event.rightButton&&l.target.position&&((c=l.target.element)!=null&&c.className.includes("fold-unchanged"))){const d=l.target.position.lineNumber,u=this._diffModel.get();if(!u)return;const h=u.unchangedRegions.get().find(f=>f.modifiedUnchangedRange.includes(d));if(!h)return;h.collapseAll(void 0),l.event.stopPropagation(),l.event.preventDefault()}})),this._register(this._editors.original.onMouseUp(l=>{var c;if(!l.event.rightButton&&l.target.position&&((c=l.target.element)!=null&&c.className.includes("fold-unchanged"))){const d=l.target.position.lineNumber,u=this._diffModel.get();if(!u)return;const h=u.unchangedRegions.get().find(f=>f.originalUnchangedRange.includes(d));if(!h)return;h.collapseAll(void 0),l.event.stopPropagation(),l.event.preventDefault()}}))}},U2=cw,cw._breadcrumbsSourceFactory=Nt(U2,()=>({dispose(){},getBreadcrumbItems(e,t){return[]}})),cw);qO=U2=cht([dht(3,Ze)],qO);class Wde extends gJ{constructor(e,t,i,s=!1){const r=Pt("div.diff-hidden-lines-widget");super(e,t,r.root),this._unchangedRegion=i,this._hide=s,this._nodes=Pt("div.diff-hidden-lines-compact",[Pt("div.line-left",[]),Pt("div.text@text",[]),Pt("div.line-right",[])]),r.root.appendChild(this._nodes.root),this._hide&&this._nodes.root.replaceChildren(),this._register(gt(o=>{if(!this._hide){const a=this._unchangedRegion.getHiddenModifiedRange(o).length,l=v("hiddenLines","{0} hidden lines",a);this._nodes.text.innerText=l}}))}}class Hde extends gJ{constructor(e,t,i,s,r,o,a,l){const c=Pt("div.diff-hidden-lines-widget");super(e,t,c.root),this._editor=e,this._unchangedRegion=i,this._unchangedRegionRange=s,this._hide=r,this._modifiedOutlineSource=o,this._revealModifiedHiddenLine=a,this._options=l,this._nodes=Pt("div.diff-hidden-lines",[Pt("div.top@top",{title:v("diff.hiddenLines.top","Click or drag to show more above")}),Pt("div.center@content",{style:{display:"flex"}},[Pt("div@first",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexShrink:"0"}},[xe("a",{title:v("showUnchangedRegion","Show Unchanged Region"),role:"button",onclick:()=>{this._unchangedRegion.showAll(void 0)}},...Ym("$(unfold)"))]),Pt("div@others",{style:{display:"flex",justifyContent:"center",alignItems:"center"}})]),Pt("div.bottom@bottom",{title:v("diff.bottom","Click or drag to show more below"),role:"button"})]),c.root.appendChild(this._nodes.root),this._hide?sr(this._nodes.first):this._register(tp(this._nodes.first,{width:$a(this._editor).layoutInfoContentLeft})),this._register(gt(u=>{const h=this._unchangedRegion.visibleLineCountTop.read(u)+this._unchangedRegion.visibleLineCountBottom.read(u)===this._unchangedRegion.lineCount;this._nodes.bottom.classList.toggle("canMoveTop",!h),this._nodes.bottom.classList.toggle("canMoveBottom",this._unchangedRegion.visibleLineCountBottom.read(u)>0),this._nodes.top.classList.toggle("canMoveTop",this._unchangedRegion.visibleLineCountTop.read(u)>0),this._nodes.top.classList.toggle("canMoveBottom",!h);const f=this._unchangedRegion.isDragged.read(u),g=this._editor.getDomNode();g&&(g.classList.toggle("draggingUnchangedRegion",!!f),f==="top"?(g.classList.toggle("canMoveTop",this._unchangedRegion.visibleLineCountTop.read(u)>0),g.classList.toggle("canMoveBottom",!h)):f==="bottom"?(g.classList.toggle("canMoveTop",!h),g.classList.toggle("canMoveBottom",this._unchangedRegion.visibleLineCountBottom.read(u)>0)):(g.classList.toggle("canMoveTop",!1),g.classList.toggle("canMoveBottom",!1)))}));const d=this._editor;this._register(re(this._nodes.top,"mousedown",u=>{if(u.button!==0)return;this._nodes.top.classList.toggle("dragging",!0),this._nodes.root.classList.toggle("dragging",!0),u.preventDefault();const h=u.clientY;let f=!1;const g=this._unchangedRegion.visibleLineCountTop.get();this._unchangedRegion.isDragged.set("top",void 0);const p=nt(this._nodes.top),_=re(p,"mousemove",b=>{const S=b.clientY-h;f=f||Math.abs(S)>2;const x=Math.round(S/d.getOption(67)),E=Math.max(0,Math.min(g+x,this._unchangedRegion.getMaxVisibleLineCountTop()));this._unchangedRegion.visibleLineCountTop.set(E,void 0)}),w=re(p,"mouseup",b=>{f||this._unchangedRegion.showMoreAbove(this._options.hideUnchangedRegionsRevealLineCount.get(),void 0),this._nodes.top.classList.toggle("dragging",!1),this._nodes.root.classList.toggle("dragging",!1),this._unchangedRegion.isDragged.set(void 0,void 0),_.dispose(),w.dispose()})})),this._register(re(this._nodes.bottom,"mousedown",u=>{if(u.button!==0)return;this._nodes.bottom.classList.toggle("dragging",!0),this._nodes.root.classList.toggle("dragging",!0),u.preventDefault();const h=u.clientY;let f=!1;const g=this._unchangedRegion.visibleLineCountBottom.get();this._unchangedRegion.isDragged.set("bottom",void 0);const p=nt(this._nodes.bottom),_=re(p,"mousemove",b=>{const S=b.clientY-h;f=f||Math.abs(S)>2;const x=Math.round(S/d.getOption(67)),E=Math.max(0,Math.min(g-x,this._unchangedRegion.getMaxVisibleLineCountBottom())),D=this._unchangedRegionRange.endLineNumberExclusive>d.getModel().getLineCount()?d.getContentHeight():d.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);this._unchangedRegion.visibleLineCountBottom.set(E,void 0);const N=this._unchangedRegionRange.endLineNumberExclusive>d.getModel().getLineCount()?d.getContentHeight():d.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);d.setScrollTop(d.getScrollTop()+(N-D))}),w=re(p,"mouseup",b=>{if(this._unchangedRegion.isDragged.set(void 0,void 0),!f){const y=d.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);this._unchangedRegion.showMoreBelow(this._options.hideUnchangedRegionsRevealLineCount.get(),void 0);const S=d.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);d.setScrollTop(d.getScrollTop()+(S-y))}this._nodes.bottom.classList.toggle("dragging",!1),this._nodes.root.classList.toggle("dragging",!1),_.dispose(),w.dispose()})})),this._register(gt(u=>{const h=[];if(!this._hide){const f=i.getHiddenModifiedRange(u).length,g=v("hiddenLines","{0} hidden lines",f),p=xe("span",{title:v("diff.hiddenLines.expandAll","Double click to unfold")},g);p.addEventListener("dblclick",b=>{b.button===0&&(b.preventDefault(),this._unchangedRegion.showAll(void 0))}),h.push(p);const _=this._unchangedRegion.getHiddenModifiedRange(u),w=this._modifiedOutlineSource.getBreadcrumbItems(_,u);if(w.length>0){h.push(xe("span",void 0,"|"));for(let b=0;b<w.length;b++){const y=w[b],S=oP.toIcon(y.kind),x=Pt("div.breadcrumb-item",{style:{display:"flex",alignItems:"center"}},[g0(S),"",y.name,...b===w.length-1?[]:[g0(ye.chevronRight)]]).root;h.push(x),x.onclick=()=>{this._revealModifiedHiddenLine(y.startLineNumber)}}}}sr(this._nodes.others,...h)}))}}var uht=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},hht=function(n,e){return function(t,i){e(t,i,n)}},Zd,Eg;let ND=(Eg=class extends ee{constructor(e,t,i,s,r,o,a){super(),this._editors=e,this._rootElement=t,this._diffModel=i,this._rootWidth=s,this._rootHeight=r,this._modifiedEditorLayoutInfo=o,this._themeService=a,this.width=Zd.ENTIRE_DIFF_OVERVIEW_WIDTH;const l=mi(this._themeService.onDidColorThemeChange,()=>this._themeService.getColorTheme()),c=Ke(h=>{const f=l.read(h),g=f.getColor(NXe)||(f.getColor(IXe)||mU).transparent(2),p=f.getColor(TXe)||(f.getColor(DXe)||_U).transparent(2);return{insertColor:g,removeColor:p}}),d=ui(document.createElement("div"));d.setClassName("diffViewport"),d.setPosition("absolute");const u=Pt("div.diffOverview",{style:{position:"absolute",top:"0px",width:Zd.ENTIRE_DIFF_OVERVIEW_WIDTH+"px"}}).root;this._register(M1(u,d.domNode)),this._register(Cn(u,Se.POINTER_DOWN,h=>{this._editors.modified.delegateVerticalScrollbarPointerDown(h)})),this._register(re(u,Se.MOUSE_WHEEL,h=>{this._editors.modified.delegateScrollFromMouseWheelEvent(h)},{passive:!1})),this._register(M1(this._rootElement,u)),this._register(da((h,f)=>{const g=this._diffModel.read(h),p=this._editors.original.createOverviewRuler("original diffOverviewRuler");p&&(f.add(p),f.add(M1(u,p.getDomNode())));const _=this._editors.modified.createOverviewRuler("modified diffOverviewRuler");if(_&&(f.add(_),f.add(M1(u,_.getDomNode()))),!p||!_)return;const w=pr("viewZoneChanged",this._editors.original.onDidChangeViewZones),b=pr("viewZoneChanged",this._editors.modified.onDidChangeViewZones),y=pr("hiddenRangesChanged",this._editors.original.onDidChangeHiddenAreas),S=pr("hiddenRangesChanged",this._editors.modified.onDidChangeHiddenAreas);f.add(gt(x=>{var z;w.read(x),b.read(x),y.read(x),S.read(x);const E=c.read(x),D=(z=g==null?void 0:g.diff.read(x))==null?void 0:z.mappings;function N(G,J,j){const ne=j._getViewModel();return ne?G.filter(oe=>oe.length>0).map(oe=>{const ve=ne.coordinatesConverter.convertModelPositionToViewPosition(new Y(oe.startLineNumber,1)),te=ne.coordinatesConverter.convertModelPositionToViewPosition(new Y(oe.endLineNumberExclusive,1)),ce=te.lineNumber-ve.lineNumber;return new USe(ve.lineNumber,te.lineNumber,ce,J.toString())}):[]}const I=N((D||[]).map(G=>G.lineRangeMapping.original),E.removeColor,this._editors.original),H=N((D||[]).map(G=>G.lineRangeMapping.modified),E.insertColor,this._editors.modified);p==null||p.setZones(I),_==null||_.setZones(H)})),f.add(gt(x=>{const E=this._rootHeight.read(x),D=this._rootWidth.read(x),N=this._modifiedEditorLayoutInfo.read(x);if(N){const I=Zd.ENTIRE_DIFF_OVERVIEW_WIDTH-2*Zd.ONE_OVERVIEW_WIDTH;p.setLayout({top:0,height:E,right:I+Zd.ONE_OVERVIEW_WIDTH,width:Zd.ONE_OVERVIEW_WIDTH}),_.setLayout({top:0,height:E,right:0,width:Zd.ONE_OVERVIEW_WIDTH});const H=this._editors.modifiedScrollTop.read(x),z=this._editors.modifiedScrollHeight.read(x),G=this._editors.modified.getOption(104),J=new BS(G.verticalHasArrows?G.arrowSize:0,G.verticalScrollbarSize,0,N.height,z,H);d.setTop(J.getSliderPosition()),d.setHeight(J.getSliderSize())}else d.setTop(0),d.setHeight(0);u.style.height=E+"px",u.style.left=D-Zd.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",d.setWidth(Zd.ENTIRE_DIFF_OVERVIEW_WIDTH)}))}))}},Zd=Eg,Eg.ONE_OVERVIEW_WIDTH=15,Eg.ENTIRE_DIFF_OVERVIEW_WIDTH=Eg.ONE_OVERVIEW_WIDTH*2,Eg);ND=Zd=uht([hht(6,ws)],ND);const t6=[];class fht extends ee{constructor(e,t,i,s){super(),this._editors=e,this._diffModel=t,this._options=i,this._widget=s,this._selectedDiffs=Ke(this,r=>{const o=this._diffModel.read(r),a=o==null?void 0:o.diff.read(r);if(!a)return t6;const l=this._editors.modifiedSelections.read(r);if(l.every(h=>h.isEmpty()))return t6;const c=new wc(l.map(h=>wt.fromRangeInclusive(h))),u=a.mappings.filter(h=>h.lineRangeMapping.innerChanges&&c.intersects(h.lineRangeMapping.modified)).map(h=>({mapping:h,rangeMappings:h.lineRangeMapping.innerChanges.filter(f=>l.some(g=>M.areIntersecting(f.modifiedRange,g)))}));return u.length===0||u.every(h=>h.rangeMappings.length===0)?t6:u}),this._register(da((r,o)=>{if(!this._options.shouldRenderOldRevertArrows.read(r))return;const a=this._diffModel.read(r),l=a==null?void 0:a.diff.read(r);if(!a||!l||a.movedTextToCompare.read(r))return;const c=[],d=this._selectedDiffs.read(r),u=new Set(d.map(h=>h.mapping));if(d.length>0){const h=this._editors.modifiedSelections.read(r),f=o.add(new GO(h[h.length-1].positionLineNumber,this._widget,d.flatMap(g=>g.rangeMappings),!0));this._editors.modified.addGlyphMarginWidget(f),c.push(f)}for(const h of l.mappings)if(!u.has(h)&&!h.lineRangeMapping.modified.isEmpty&&h.lineRangeMapping.innerChanges){const f=o.add(new GO(h.lineRangeMapping.modified.startLineNumber,this._widget,h.lineRangeMapping,!1));this._editors.modified.addGlyphMarginWidget(f),c.push(f)}o.add(Ye(()=>{for(const h of c)this._editors.modified.removeGlyphMarginWidget(h)}))}))}}const Y4=class Y4 extends ee{getId(){return this._id}constructor(e,t,i,s){super(),this._lineNumber=e,this._widget=t,this._diffs=i,this._revertSelection=s,this._id=`revertButton${Y4.counter++}`,this._domNode=Pt("div.revertButton",{title:this._revertSelection?v("revertSelectedChanges","Revert Selected Changes"):v("revertChange","Revert Change")},[g0(ye.arrowRight)]).root,this._register(re(this._domNode,Se.MOUSE_DOWN,r=>{r.button!==2&&(r.stopPropagation(),r.preventDefault())})),this._register(re(this._domNode,Se.MOUSE_UP,r=>{r.stopPropagation(),r.preventDefault()})),this._register(re(this._domNode,Se.CLICK,r=>{this._diffs instanceof so?this._widget.revert(this._diffs):this._widget.revertRangeMappings(this._diffs),r.stopPropagation(),r.preventDefault()}))}getDomNode(){return this._domNode}getPosition(){return{lane:Td.Right,range:{startColumn:1,startLineNumber:this._lineNumber,endColumn:1,endLineNumber:this._lineNumber},zIndex:10001}}};Y4.counter=0;let GO=Y4;function ght(n,e,t){return Mtt({debugName:()=>`Configuration Key "${n}"`},i=>t.onDidChangeConfiguration(s=>{s.affectsConfiguration(n)&&i(s)}),()=>t.getValue(n)??e)}function eu(n,e,t){const i=n.bindTo(e);return qN({debugName:()=>`Set Context Key "${n.key}"`},s=>{i.set(t(s))})}var pht=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Vde=function(n,e){return function(t,i){e(t,i,n)}};let Gj=class extends ee{get onDidContentSizeChange(){return this._onDidContentSizeChange.event}constructor(e,t,i,s,r,o,a){super(),this.originalEditorElement=e,this.modifiedEditorElement=t,this._options=i,this._argCodeEditorWidgetOptions=s,this._createInnerEditor=r,this._instantiationService=o,this._keybindingService=a,this.original=this._register(this._createLeftHandSideEditor(this._options.editorOptions.get(),this._argCodeEditorWidgetOptions.originalEditor||{})),this.modified=this._register(this._createRightHandSideEditor(this._options.editorOptions.get(),this._argCodeEditorWidgetOptions.modifiedEditor||{})),this._onDidContentSizeChange=this._register(new X),this.modifiedScrollTop=mi(this,this.modified.onDidScrollChange,()=>this.modified.getScrollTop()),this.modifiedScrollHeight=mi(this,this.modified.onDidScrollChange,()=>this.modified.getScrollHeight()),this.modifiedObs=$a(this.modified),this.originalObs=$a(this.original),this.modifiedModel=this.modifiedObs.model,this.modifiedSelections=mi(this,this.modified.onDidChangeCursorSelection,()=>this.modified.getSelections()??[]),this.modifiedCursor=Il({owner:this,equalsFn:Y.equals},l=>{var c;return((c=this.modifiedSelections.read(l)[0])==null?void 0:c.getPosition())??new Y(1,1)}),this.originalCursor=mi(this,this.original.onDidChangeCursorPosition,()=>this.original.getPosition()??new Y(1,1)),this._argCodeEditorWidgetOptions=null,this._register(GN({createEmptyChangeSummary:()=>({}),handleChange:(l,c)=>(l.didChange(i.editorOptions)&&Object.assign(c,l.change.changedOptions),!0)},(l,c)=>{i.editorOptions.read(l),this._options.renderSideBySide.read(l),this.modified.updateOptions(this._adjustOptionsForRightHandSide(l,c)),this.original.updateOptions(this._adjustOptionsForLeftHandSide(l,c))}))}_createLeftHandSideEditor(e,t){const i=this._adjustOptionsForLeftHandSide(void 0,e),s=this._constructInnerEditor(this._instantiationService,this.originalEditorElement,i,t);return s.setContextValue("isInDiffLeftEditor",!0),s}_createRightHandSideEditor(e,t){const i=this._adjustOptionsForRightHandSide(void 0,e),s=this._constructInnerEditor(this._instantiationService,this.modifiedEditorElement,i,t);return s.setContextValue("isInDiffRightEditor",!0),s}_constructInnerEditor(e,t,i,s){const r=this._createInnerEditor(e,t,i,s);return this._register(r.onDidContentSizeChange(o=>{const a=this.original.getContentWidth()+this.modified.getContentWidth()+ND.ENTIRE_DIFF_OVERVIEW_WIDTH,l=Math.max(this.modified.getContentHeight(),this.original.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:l,contentWidth:a,contentHeightChanged:o.contentHeightChanged,contentWidthChanged:o.contentWidthChanged})})),r}_adjustOptionsForLeftHandSide(e,t){const i=this._adjustOptionsForSubEditor(t);return this._options.renderSideBySide.get()?(i.unicodeHighlight=this._options.editorOptions.get().unicodeHighlight||{},i.wordWrapOverride1=this._options.diffWordWrap.get()):(i.wordWrapOverride1="off",i.wordWrapOverride2="off",i.stickyScroll={enabled:!1},i.unicodeHighlight={nonBasicASCII:!1,ambiguousCharacters:!1,invisibleCharacters:!1}),i.glyphMargin=this._options.renderSideBySide.get(),t.originalAriaLabel&&(i.ariaLabel=t.originalAriaLabel),i.ariaLabel=this._updateAriaLabel(i.ariaLabel),i.readOnly=!this._options.originalEditable.get(),i.dropIntoEditor={enabled:!i.readOnly},i.extraEditorClassName="original-in-monaco-diff-editor",i}_adjustOptionsForRightHandSide(e,t){const i=this._adjustOptionsForSubEditor(t);return t.modifiedAriaLabel&&(i.ariaLabel=t.modifiedAriaLabel),i.ariaLabel=this._updateAriaLabel(i.ariaLabel),i.wordWrapOverride1=this._options.diffWordWrap.get(),i.revealHorizontalRightPadding=Ku.revealHorizontalRightPadding.defaultValue+ND.ENTIRE_DIFF_OVERVIEW_WIDTH,i.scrollbar.verticalHasArrows=!1,i.extraEditorClassName="modified-in-monaco-diff-editor",i}_adjustOptionsForSubEditor(e){const t={...e,dimension:{height:0,width:0}};return t.inDiffEditor=!0,t.automaticLayout=!1,t.scrollbar={...t.scrollbar||{}},t.folding=!1,t.codeLens=this._options.diffCodeLens.get(),t.fixedOverflowWidgets=!0,t.minimap={...t.minimap||{}},t.minimap.enabled=!1,this._options.hideUnchangedRegions.get()?t.stickyScroll={enabled:!1}:t.stickyScroll=this._options.editorOptions.get().stickyScroll,t}_updateAriaLabel(e){var i;e||(e="");const t=v("diff-aria-navigation-tip"," use {0} to open the accessibility help.",(i=this._keybindingService.lookupKeybinding("editor.action.accessibilityHelp"))==null?void 0:i.getAriaLabel());return this._options.accessibilityVerbose.get()?e+t:e?e.replaceAll(t,""):""}};Gj=pht([Vde(5,Ze),Vde(6,hi)],Gj);const Z4=class Z4 extends ee{constructor(){super(...arguments),this._id=++Z4.idCounter,this._onDidDispose=this._register(new X),this.onDidDispose=this._onDidDispose.event}getId(){return this.getEditorType()+":v2:"+this._id}getVisibleColumnFromPosition(e){return this._targetEditor.getVisibleColumnFromPosition(e)}getPosition(){return this._targetEditor.getPosition()}setPosition(e,t="api"){this._targetEditor.setPosition(e,t)}revealLine(e,t=0){this._targetEditor.revealLine(e,t)}revealLineInCenter(e,t=0){this._targetEditor.revealLineInCenter(e,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._targetEditor.revealLineInCenterIfOutsideViewport(e,t)}revealLineNearTop(e,t=0){this._targetEditor.revealLineNearTop(e,t)}revealPosition(e,t=0){this._targetEditor.revealPosition(e,t)}revealPositionInCenter(e,t=0){this._targetEditor.revealPositionInCenter(e,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._targetEditor.revealPositionInCenterIfOutsideViewport(e,t)}revealPositionNearTop(e,t=0){this._targetEditor.revealPositionNearTop(e,t)}getSelection(){return this._targetEditor.getSelection()}getSelections(){return this._targetEditor.getSelections()}setSelection(e,t="api"){this._targetEditor.setSelection(e,t)}setSelections(e,t="api"){this._targetEditor.setSelections(e,t)}revealLines(e,t,i=0){this._targetEditor.revealLines(e,t,i)}revealLinesInCenter(e,t,i=0){this._targetEditor.revealLinesInCenter(e,t,i)}revealLinesInCenterIfOutsideViewport(e,t,i=0){this._targetEditor.revealLinesInCenterIfOutsideViewport(e,t,i)}revealLinesNearTop(e,t,i=0){this._targetEditor.revealLinesNearTop(e,t,i)}revealRange(e,t=0,i=!1,s=!0){this._targetEditor.revealRange(e,t,i,s)}revealRangeInCenter(e,t=0){this._targetEditor.revealRangeInCenter(e,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._targetEditor.revealRangeInCenterIfOutsideViewport(e,t)}revealRangeNearTop(e,t=0){this._targetEditor.revealRangeNearTop(e,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._targetEditor.revealRangeNearTopIfOutsideViewport(e,t)}revealRangeAtTop(e,t=0){this._targetEditor.revealRangeAtTop(e,t)}getSupportedActions(){return this._targetEditor.getSupportedActions()}focus(){this._targetEditor.focus()}trigger(e,t,i){this._targetEditor.trigger(e,t,i)}createDecorationsCollection(e){return this._targetEditor.createDecorationsCollection(e)}changeDecorations(e){return this._targetEditor.changeDecorations(e)}};Z4.idCounter=0;let Yj=Z4;var mht=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},_ht=function(n,e){return function(t,i){e(t,i,n)}};let Zj=class{get editorOptions(){return this._options}constructor(e,t){this._accessibilityService=t,this._diffEditorWidth=Nt(this,0),this._screenReaderMode=mi(this,this._accessibilityService.onDidChangeScreenReaderOptimized,()=>this._accessibilityService.isScreenReaderOptimized()),this.couldShowInlineViewBecauseOfSize=Ke(this,s=>this._options.read(s).renderSideBySide&&this._diffEditorWidth.read(s)<=this._options.read(s).renderSideBySideInlineBreakpoint),this.renderOverviewRuler=Ke(this,s=>this._options.read(s).renderOverviewRuler),this.renderSideBySide=Ke(this,s=>this.compactMode.read(s)&&this.shouldRenderInlineViewInSmartMode.read(s)?!1:this._options.read(s).renderSideBySide&&!(this._options.read(s).useInlineViewWhenSpaceIsLimited&&this.couldShowInlineViewBecauseOfSize.read(s)&&!this._screenReaderMode.read(s))),this.readOnly=Ke(this,s=>this._options.read(s).readOnly),this.shouldRenderOldRevertArrows=Ke(this,s=>!(!this._options.read(s).renderMarginRevertIcon||!this.renderSideBySide.read(s)||this.readOnly.read(s)||this.shouldRenderGutterMenu.read(s))),this.shouldRenderGutterMenu=Ke(this,s=>this._options.read(s).renderGutterMenu),this.renderIndicators=Ke(this,s=>this._options.read(s).renderIndicators),this.enableSplitViewResizing=Ke(this,s=>this._options.read(s).enableSplitViewResizing),this.splitViewDefaultRatio=Ke(this,s=>this._options.read(s).splitViewDefaultRatio),this.ignoreTrimWhitespace=Ke(this,s=>this._options.read(s).ignoreTrimWhitespace),this.maxComputationTimeMs=Ke(this,s=>this._options.read(s).maxComputationTime),this.showMoves=Ke(this,s=>this._options.read(s).experimental.showMoves&&this.renderSideBySide.read(s)),this.isInEmbeddedEditor=Ke(this,s=>this._options.read(s).isInEmbeddedEditor),this.diffWordWrap=Ke(this,s=>this._options.read(s).diffWordWrap),this.originalEditable=Ke(this,s=>this._options.read(s).originalEditable),this.diffCodeLens=Ke(this,s=>this._options.read(s).diffCodeLens),this.accessibilityVerbose=Ke(this,s=>this._options.read(s).accessibilityVerbose),this.diffAlgorithm=Ke(this,s=>this._options.read(s).diffAlgorithm),this.showEmptyDecorations=Ke(this,s=>this._options.read(s).experimental.showEmptyDecorations),this.onlyShowAccessibleDiffViewer=Ke(this,s=>this._options.read(s).onlyShowAccessibleDiffViewer),this.compactMode=Ke(this,s=>this._options.read(s).compactMode),this.trueInlineDiffRenderingEnabled=Ke(this,s=>this._options.read(s).experimental.useTrueInlineView),this.useTrueInlineDiffRendering=Ke(this,s=>!this.renderSideBySide.read(s)&&this.trueInlineDiffRenderingEnabled.read(s)),this.hideUnchangedRegions=Ke(this,s=>this._options.read(s).hideUnchangedRegions.enabled),this.hideUnchangedRegionsRevealLineCount=Ke(this,s=>this._options.read(s).hideUnchangedRegions.revealLineCount),this.hideUnchangedRegionsContextLineCount=Ke(this,s=>this._options.read(s).hideUnchangedRegions.contextLineCount),this.hideUnchangedRegionsMinimumLineCount=Ke(this,s=>this._options.read(s).hideUnchangedRegions.minimumLineCount),this._model=Nt(this,void 0),this.shouldRenderInlineViewInSmartMode=this._model.map(this,s=>Btt(this,r=>{const o=s==null?void 0:s.diff.read(r);return o?vht(o,this.trueInlineDiffRenderingEnabled.read(r)):void 0})).flatten().map(this,s=>!!s),this.inlineViewHideOriginalLineNumbers=this.compactMode;const i={...e,...zde(e,lr)};this._options=Nt(this,i)}updateOptions(e){const t=zde(e,this._options.get()),i={...this._options.get(),...e,...t};this._options.set(i,void 0,{changedOptions:e})}setWidth(e){this._diffEditorWidth.set(e,void 0)}setModel(e){this._model.set(e,void 0)}};Zj=mht([_ht(1,al)],Zj);function vht(n,e){return n.mappings.every(t=>bht(t.lineRangeMapping)||wht(t.lineRangeMapping)||e&&SJ(t.lineRangeMapping))}function bht(n){return n.original.length===0}function wht(n){return n.modified.length===0}function zde(n,e){var t,i,s,r,o,a,l,c;return{enableSplitViewResizing:Ge(n.enableSplitViewResizing,e.enableSplitViewResizing),splitViewDefaultRatio:C$e(n.splitViewDefaultRatio,.5,.1,.9),renderSideBySide:Ge(n.renderSideBySide,e.renderSideBySide),renderMarginRevertIcon:Ge(n.renderMarginRevertIcon,e.renderMarginRevertIcon),maxComputationTime:Vv(n.maxComputationTime,e.maxComputationTime,0,1073741824),maxFileSize:Vv(n.maxFileSize,e.maxFileSize,0,1073741824),ignoreTrimWhitespace:Ge(n.ignoreTrimWhitespace,e.ignoreTrimWhitespace),renderIndicators:Ge(n.renderIndicators,e.renderIndicators),originalEditable:Ge(n.originalEditable,e.originalEditable),diffCodeLens:Ge(n.diffCodeLens,e.diffCodeLens),renderOverviewRuler:Ge(n.renderOverviewRuler,e.renderOverviewRuler),diffWordWrap:En(n.diffWordWrap,e.diffWordWrap,["off","on","inherit"]),diffAlgorithm:En(n.diffAlgorithm,e.diffAlgorithm,["legacy","advanced"],{smart:"legacy",experimental:"advanced"}),accessibilityVerbose:Ge(n.accessibilityVerbose,e.accessibilityVerbose),experimental:{showMoves:Ge((t=n.experimental)==null?void 0:t.showMoves,e.experimental.showMoves),showEmptyDecorations:Ge((i=n.experimental)==null?void 0:i.showEmptyDecorations,e.experimental.showEmptyDecorations),useTrueInlineView:Ge((s=n.experimental)==null?void 0:s.useTrueInlineView,e.experimental.useTrueInlineView)},hideUnchangedRegions:{enabled:Ge(((r=n.hideUnchangedRegions)==null?void 0:r.enabled)??((o=n.experimental)==null?void 0:o.collapseUnchangedRegions),e.hideUnchangedRegions.enabled),contextLineCount:Vv((a=n.hideUnchangedRegions)==null?void 0:a.contextLineCount,e.hideUnchangedRegions.contextLineCount,0,1073741824),minimumLineCount:Vv((l=n.hideUnchangedRegions)==null?void 0:l.minimumLineCount,e.hideUnchangedRegions.minimumLineCount,0,1073741824),revealLineCount:Vv((c=n.hideUnchangedRegions)==null?void 0:c.revealLineCount,e.hideUnchangedRegions.revealLineCount,0,1073741824)},isInEmbeddedEditor:Ge(n.isInEmbeddedEditor,e.isInEmbeddedEditor),onlyShowAccessibleDiffViewer:Ge(n.onlyShowAccessibleDiffViewer,e.onlyShowAccessibleDiffViewer),renderSideBySideInlineBreakpoint:Vv(n.renderSideBySideInlineBreakpoint,e.renderSideBySideInlineBreakpoint,0,1073741824),useInlineViewWhenSpaceIsLimited:Ge(n.useInlineViewWhenSpaceIsLimited,e.useInlineViewWhenSpaceIsLimited),renderGutterMenu:Ge(n.renderGutterMenu,e.renderGutterMenu),compactMode:Ge(n.compactMode,e.compactMode)}}var Cht=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},YL=function(n,e){return function(t,i){e(t,i,n)}};let ip=class extends Yj{get onDidContentSizeChange(){return this._editors.onDidContentSizeChange}constructor(e,t,i,s,r,o,a,l){super(),this._domElement=e,this._parentContextKeyService=s,this._parentInstantiationService=r,this._accessibilitySignalService=a,this._editorProgressService=l,this.elements=Pt("div.monaco-diff-editor.side-by-side",{style:{position:"relative",height:"100%"}},[Pt("div.editor.original@original",{style:{position:"absolute",height:"100%"}}),Pt("div.editor.modified@modified",{style:{position:"absolute",height:"100%"}}),Pt("div.accessibleDiffViewer@accessibleDiffViewer",{style:{position:"absolute",height:"100%"}})]),this._diffModelSrc=this._register(sD(this,void 0)),this._diffModel=Ke(this,S=>{var x;return(x=this._diffModelSrc.read(S))==null?void 0:x.object}),this.onDidChangeModel=Ee.fromObservableLight(this._diffModel),this._contextKeyService=this._register(this._parentContextKeyService.createScoped(this._domElement)),this._instantiationService=this._register(this._parentInstantiationService.createChild(new Ux([at,this._contextKeyService]))),this._boundarySashes=Nt(this,void 0),this._accessibleDiffViewerShouldBeVisible=Nt(this,!1),this._accessibleDiffViewerVisible=Ke(this,S=>this._options.onlyShowAccessibleDiffViewer.read(S)?!0:this._accessibleDiffViewerShouldBeVisible.read(S)),this._movedBlocksLinesPart=Nt(this,void 0),this._layoutInfo=Ke(this,S=>{var ve,te;const x=this._rootSizeObserver.width.read(S),E=this._rootSizeObserver.height.read(S);this._rootSizeObserver.automaticLayout?this.elements.root.style.height="100%":this.elements.root.style.height=E+"px";const D=this._sash.read(S),N=this._gutter.read(S),I=(N==null?void 0:N.width.read(S))??0,H=((ve=this._overviewRulerPart.read(S))==null?void 0:ve.width)??0;let z,G,J,j,ne;if(!!D){const ce=D.sashLeft.read(S),Ie=((te=this._movedBlocksLinesPart.read(S))==null?void 0:te.width.read(S))??0;z=0,G=ce-I-Ie,ne=ce-I,J=ce,j=x-J-H}else{ne=0;const ce=this._options.inlineViewHideOriginalLineNumbers.read(S);z=I,ce?G=0:G=Math.max(5,this._editors.originalObs.layoutInfoDecorationsLeft.read(S)),J=I+G,j=x-J-H}return this.elements.original.style.left=z+"px",this.elements.original.style.width=G+"px",this._editors.original.layout({width:G,height:E},!0),N==null||N.layout(ne),this.elements.modified.style.left=J+"px",this.elements.modified.style.width=j+"px",this._editors.modified.layout({width:j,height:E},!0),{modifiedEditor:this._editors.modified.getLayoutInfo(),originalEditor:this._editors.original.getLayoutInfo()}}),this._diffValue=this._diffModel.map((S,x)=>S==null?void 0:S.diff.read(x)),this.onDidUpdateDiff=Ee.fromObservableLight(this._diffValue),o.willCreateDiffEditor(),this._contextKeyService.createKey("isInDiffEditor",!0),this._domElement.appendChild(this.elements.root),this._register(Ye(()=>this.elements.root.remove())),this._rootSizeObserver=this._register(new GSe(this.elements.root,t.dimension)),this._rootSizeObserver.setAutomaticLayout(t.automaticLayout??!1),this._options=this._instantiationService.createInstance(Zj,t),this._register(gt(S=>{this._options.setWidth(this._rootSizeObserver.width.read(S))})),this._contextKeyService.createKey(F.isEmbeddedDiffEditor.key,!1),this._register(eu(F.isEmbeddedDiffEditor,this._contextKeyService,S=>this._options.isInEmbeddedEditor.read(S))),this._register(eu(F.comparingMovedCode,this._contextKeyService,S=>{var x;return!!((x=this._diffModel.read(S))!=null&&x.movedTextToCompare.read(S))})),this._register(eu(F.diffEditorRenderSideBySideInlineBreakpointReached,this._contextKeyService,S=>this._options.couldShowInlineViewBecauseOfSize.read(S))),this._register(eu(F.diffEditorInlineMode,this._contextKeyService,S=>!this._options.renderSideBySide.read(S))),this._register(eu(F.hasChanges,this._contextKeyService,S=>{var x,E;return(((E=(x=this._diffModel.read(S))==null?void 0:x.diff.read(S))==null?void 0:E.mappings.length)??0)>0})),this._editors=this._register(this._instantiationService.createInstance(Gj,this.elements.original,this.elements.modified,this._options,i,(S,x,E,D)=>this._createInnerEditor(S,x,E,D))),this._register(eu(F.diffEditorOriginalWritable,this._contextKeyService,S=>this._options.originalEditable.read(S))),this._register(eu(F.diffEditorModifiedWritable,this._contextKeyService,S=>!this._options.readOnly.read(S))),this._register(eu(F.diffEditorOriginalUri,this._contextKeyService,S=>{var x;return((x=this._diffModel.read(S))==null?void 0:x.model.original.uri.toString())??""})),this._register(eu(F.diffEditorModifiedUri,this._contextKeyService,S=>{var x;return((x=this._diffModel.read(S))==null?void 0:x.model.modified.uri.toString())??""})),this._overviewRulerPart=io(this,S=>this._options.renderOverviewRuler.read(S)?this._instantiationService.createInstance(Fa(ND,S),this._editors,this.elements.root,this._diffModel,this._rootSizeObserver.width,this._rootSizeObserver.height,this._layoutInfo.map(x=>x.modifiedEditor)):void 0).recomputeInitiallyAndOnChange(this._store);const c={height:this._rootSizeObserver.height,width:this._rootSizeObserver.width.map((S,x)=>{var E;return S-(((E=this._overviewRulerPart.read(x))==null?void 0:E.width)??0)})};this._sashLayout=new sht(this._options,c),this._sash=io(this,S=>{const x=this._options.renderSideBySide.read(S);return this.elements.root.classList.toggle("side-by-side",x),x?new JSe(this.elements.root,c,this._options.enableSplitViewResizing,this._boundarySashes,this._sashLayout.sashLeft,()=>this._sashLayout.resetSash()):void 0}).recomputeInitiallyAndOnChange(this._store);const d=io(this,S=>this._instantiationService.createInstance(Fa(qO,S),this._editors,this._diffModel,this._options)).recomputeInitiallyAndOnChange(this._store);io(this,S=>this._instantiationService.createInstance(Fa(nht,S),this._editors,this._diffModel,this._options,this)).recomputeInitiallyAndOnChange(this._store);const u=new Set,h=new Set;let f=!1;const g=io(this,S=>this._instantiationService.createInstance(Fa(Uj,S),nt(this._domElement),this._editors,this._diffModel,this._options,this,()=>f||d.get().isUpdatingHiddenAreas,u,h)).recomputeInitiallyAndOnChange(this._store),p=Ke(this,S=>{const x=g.read(S).viewZones.read(S).orig,E=d.read(S).viewZones.read(S).origViewZones;return x.concat(E)}),_=Ke(this,S=>{const x=g.read(S).viewZones.read(S).mod,E=d.read(S).viewZones.read(S).modViewZones;return x.concat(E)});this._register(zO(this._editors.original,p,S=>{f=S},u));let w;this._register(zO(this._editors.modified,_,S=>{f=S,f?w=ju.capture(this._editors.modified):(w==null||w.restore(this._editors.modified),w=void 0)},h)),this._accessibleDiffViewer=io(this,S=>this._instantiationService.createInstance(Fa(Ib,S),this.elements.accessibleDiffViewer,this._accessibleDiffViewerVisible,(x,E)=>this._accessibleDiffViewerShouldBeVisible.set(x,E),this._options.onlyShowAccessibleDiffViewer.map(x=>!x),this._rootSizeObserver.width,this._rootSizeObserver.height,this._diffModel.map((x,E)=>{var D;return(D=x==null?void 0:x.diff.read(E))==null?void 0:D.mappings.map(N=>N.lineRangeMapping)}),new jut(this._editors))).recomputeInitiallyAndOnChange(this._store);const b=this._accessibleDiffViewerVisible.map(S=>S?"hidden":"visible");this._register(tp(this.elements.modified,{visibility:b})),this._register(tp(this.elements.original,{visibility:b})),this._createDiffEditorContributions(),o.addDiffEditor(this),this._gutter=io(this,S=>this._options.shouldRenderGutterMenu.read(S)?this._instantiationService.createInstance(Fa($j,S),this.elements.root,this._diffModel,this._editors,this._options,this._sashLayout,this._boundarySashes):void 0),this._register(Wx(this._layoutInfo)),io(this,S=>new(Fa(zy,S))(this.elements.root,this._diffModel,this._layoutInfo.map(x=>x.originalEditor),this._layoutInfo.map(x=>x.modifiedEditor),this._editors)).recomputeInitiallyAndOnChange(this._store,S=>{this._movedBlocksLinesPart.set(S,void 0)}),this._register(Ee.runAndSubscribe(this._editors.modified.onDidChangeCursorPosition,S=>this._handleCursorPositionChange(S,!0))),this._register(Ee.runAndSubscribe(this._editors.original.onDidChangeCursorPosition,S=>this._handleCursorPositionChange(S,!1)));const y=this._diffModel.map(this,(S,x)=>{if(S)return S.diff.read(x)===void 0&&!S.isDiffUpToDate.read(x)});this._register(da((S,x)=>{if(y.read(S)===!0){const E=this._editorProgressService.show(!0,1e3);x.add(Ye(()=>E.done()))}})),this._register(da((S,x)=>{x.add(new(Fa(fht,S))(this._editors,this._diffModel,this._options,this))})),this._register(da((S,x)=>{const E=this._diffModel.read(S);if(E)for(const D of[E.model.original,E.model.modified])x.add(D.onWillDispose(N=>{pt(new li("TextModel got disposed before DiffEditorWidget model got reset")),this.setModel(null)}))})),this._register(gt(S=>{this._options.setModel(this._diffModel.read(S))}))}_createInnerEditor(e,t,i,s){return e.createInstance(kD,t,i,s)}_createDiffEditorContributions(){const e=$b.getDiffEditorContributions();for(const t of e)try{this._register(this._instantiationService.createInstance(t.ctor,this))}catch(i){pt(i)}}get _targetEditor(){return this._editors.modified}getEditorType(){return tT.IDiffEditor}layout(e){this._rootSizeObserver.observe(e)}hasTextFocus(){return this._editors.original.hasTextFocus()||this._editors.modified.hasTextFocus()}saveViewState(){var i;const e=this._editors.original.saveViewState(),t=this._editors.modified.saveViewState();return{original:e,modified:t,modelState:(i=this._diffModel.get())==null?void 0:i.serializeState()}}restoreViewState(e){var t;if(e&&e.original&&e.modified){const i=e;this._editors.original.restoreViewState(i.original),this._editors.modified.restoreViewState(i.modified),i.modelState&&((t=this._diffModel.get())==null||t.restoreSerializedState(i.modelState))}}handleInitialized(){this._editors.original.handleInitialized(),this._editors.modified.handleInitialized()}createViewModel(e){return this._instantiationService.createInstance(zj,e,this._options)}getModel(){var e;return((e=this._diffModel.get())==null?void 0:e.model)??null}setModel(e){const t=e?"model"in e?UO.create(e).createNewRef(this):UO.create(this.createViewModel(e),this):null;this.setDiffModel(t)}setDiffModel(e,t){const i=this._diffModel.get();!e&&i&&this._accessibleDiffViewer.get().close(),this._diffModel.get()!==(e==null?void 0:e.object)&&_0(t,s=>{var a;const r=e==null?void 0:e.object;mi.batchEventsGlobally(s,()=>{this._editors.original.setModel(r?r.model.original:null),this._editors.modified.setModel(r?r.model.modified:null)});const o=(a=this._diffModelSrc.get())==null?void 0:a.createNewRef(this);this._diffModelSrc.set(e==null?void 0:e.createNewRef(this),s),setTimeout(()=>{o==null||o.dispose()},0)})}updateOptions(e){this._options.updateOptions(e)}getContainerDomNode(){return this._domElement}getOriginalEditor(){return this._editors.original}getModifiedEditor(){return this._editors.modified}getLineChanges(){var t;const e=(t=this._diffModel.get())==null?void 0:t.diff.get();return e?yht(e):null}revert(e){const t=this._diffModel.get();!t||!t.isDiffUpToDate.get()||this._editors.modified.executeEdits("diffEditor",[{range:e.modified.toExclusiveRange(),text:t.model.original.getValueInRange(e.original.toExclusiveRange())}])}revertRangeMappings(e){const t=this._diffModel.get();if(!t||!t.isDiffUpToDate.get())return;const i=e.map(s=>({range:s.modifiedRange,text:t.model.original.getValueInRange(s.originalRange)}));this._editors.modified.executeEdits("diffEditor",i)}_goTo(e){this._editors.modified.setPosition(new Y(e.lineRangeMapping.modified.startLineNumber,1)),this._editors.modified.revealRangeInCenter(e.lineRangeMapping.modified.toExclusiveRange())}goToDiff(e){var r,o;const t=(o=(r=this._diffModel.get())==null?void 0:r.diff.get())==null?void 0:o.mappings;if(!t||t.length===0)return;const i=this._editors.modified.getPosition().lineNumber;let s;e==="next"?s=t.find(a=>a.lineRangeMapping.modified.startLineNumber>i)??t[0]:s=VI(t,a=>a.lineRangeMapping.modified.startLineNumber<i)??t[t.length-1],this._goTo(s),s.lineRangeMapping.modified.isEmpty?this._accessibilitySignalService.playSignal(Ll.diffLineDeleted,{source:"diffEditor.goToDiff"}):s.lineRangeMapping.original.isEmpty?this._accessibilitySignalService.playSignal(Ll.diffLineInserted,{source:"diffEditor.goToDiff"}):s&&this._accessibilitySignalService.playSignal(Ll.diffLineModified,{source:"diffEditor.goToDiff"})}revealFirstDiff(){const e=this._diffModel.get();e&&this.waitForDiff().then(()=>{var i;const t=(i=e.diff.get())==null?void 0:i.mappings;!t||t.length===0||this._goTo(t[0])})}accessibleDiffViewerNext(){this._accessibleDiffViewer.get().next()}accessibleDiffViewerPrev(){this._accessibleDiffViewer.get().prev()}async waitForDiff(){const e=this._diffModel.get();e&&await e.waitForDiff()}mapToOtherSide(){var o,a;const e=this._editors.modified.hasWidgetFocus(),t=e?this._editors.modified:this._editors.original,i=e?this._editors.original:this._editors.modified;let s;const r=t.getSelection();if(r){const l=(a=(o=this._diffModel.get())==null?void 0:o.diff.get())==null?void 0:a.mappings.map(c=>e?c.lineRangeMapping.flip():c.lineRangeMapping);if(l){const c=kde(r.getStartPosition(),l),d=kde(r.getEndPosition(),l);s=M.plusRange(c,d)}}return{destination:i,destinationSelection:s}}switchSide(){const{destination:e,destinationSelection:t}=this.mapToOtherSide();e.focus(),t&&e.setSelection(t)}exitCompareMove(){const e=this._diffModel.get();e&&e.movedTextToCompare.set(void 0,void 0)}collapseAllUnchangedRegions(){var t;const e=(t=this._diffModel.get())==null?void 0:t.unchangedRegions.get();e&&pn(i=>{for(const s of e)s.collapseAll(i)})}showAllUnchangedRegions(){var t;const e=(t=this._diffModel.get())==null?void 0:t.unchangedRegions.get();e&&pn(i=>{for(const s of e)s.showAll(i)})}_handleCursorPositionChange(e,t){var i,s;if((e==null?void 0:e.reason)===3){const r=(s=(i=this._diffModel.get())==null?void 0:i.diff.get())==null?void 0:s.mappings.find(o=>t?o.lineRangeMapping.modified.contains(e.position.lineNumber):o.lineRangeMapping.original.contains(e.position.lineNumber));r!=null&&r.lineRangeMapping.modified.isEmpty?this._accessibilitySignalService.playSignal(Ll.diffLineDeleted,{source:"diffEditor.cursorPositionChanged"}):r!=null&&r.lineRangeMapping.original.isEmpty?this._accessibilitySignalService.playSignal(Ll.diffLineInserted,{source:"diffEditor.cursorPositionChanged"}):r&&this._accessibilitySignalService.playSignal(Ll.diffLineModified,{source:"diffEditor.cursorPositionChanged"})}}};ip=Cht([YL(3,at),YL(4,Ze),YL(5,ri),YL(6,ov),YL(7,nv)],ip);function yht(n){return n.mappings.map(e=>{const t=e.lineRangeMapping;let i,s,r,o,a=t.innerChanges;return t.original.isEmpty?(i=t.original.startLineNumber-1,s=0,a=void 0):(i=t.original.startLineNumber,s=t.original.endLineNumberExclusive-1),t.modified.isEmpty?(r=t.modified.startLineNumber-1,o=0,a=void 0):(r=t.modified.startLineNumber,o=t.modified.endLineNumberExclusive-1),{originalStartLineNumber:i,originalEndLineNumber:s,modifiedStartLineNumber:r,modifiedEndLineNumber:o,charChanges:a==null?void 0:a.map(l=>({originalStartLineNumber:l.originalRange.startLineNumber,originalStartColumn:l.originalRange.startColumn,originalEndLineNumber:l.originalRange.endLineNumber,originalEndColumn:l.originalRange.endColumn,modifiedStartLineNumber:l.modifiedRange.startLineNumber,modifiedStartColumn:l.modifiedRange.startColumn,modifiedEndLineNumber:l.modifiedRange.endLineNumber,modifiedEndColumn:l.modifiedRange.endColumn}))}})}var LJ=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},$i=function(n,e){return function(t,i){e(t,i,n)}};let Sht=0,Ude=!1;function xht(n){if(!n){if(Ude)return;Ude=!0}Det(n||Ei.document.body)}let YO=class extends kD{constructor(e,t,i,s,r,o,a,l,c,d,u,h,f){const g={...t};g.ariaLabel=g.ariaLabel||$U.editorViewAccessibleLabel,super(e,g,{},i,s,r,o,c,d,u,h,f),l instanceof GS?this._standaloneKeybindingService=l:this._standaloneKeybindingService=null,xht(g.ariaContainerElement),Utt((p,_)=>i.createInstance(OS,p,_,{})),$tt(a)}addCommand(e,t,i){if(!this._standaloneKeybindingService)return console.warn("Cannot add command because the editor is configured with an unrecognized KeybindingService"),null;const s="DYNAMIC_"+ ++Sht,r=he.deserialize(i);return this._standaloneKeybindingService.addDynamicKeybinding(s,e,t,r),s}createContextKey(e,t){return this._contextKeyService.createKey(e,t)}addAction(e){if(typeof e.id!="string"||typeof e.label!="string"||typeof e.run!="function")throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");if(!this._standaloneKeybindingService)return console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),ee.None;const t=e.id,i=e.label,s=he.and(he.equals("editorId",this.getId()),he.deserialize(e.precondition)),r=e.keybindings,o=he.and(s,he.deserialize(e.keybindingContext)),a=e.contextMenuGroupId||null,l=e.contextMenuOrder||0,c=(f,...g)=>Promise.resolve(e.run(this,...g)),d=new ue,u=this.getId()+":"+t;if(d.add(Gt.registerCommand(u,c)),a){const f={command:{id:u,title:i},when:s,group:a,order:l};d.add(Us.appendMenuItem(ze.EditorContext,f))}if(Array.isArray(r))for(const f of r)d.add(this._standaloneKeybindingService.addDynamicKeybinding(u,f,c,o));const h=new $Se(u,i,i,void 0,s,(...f)=>Promise.resolve(e.run(this,...f)),this._contextKeyService);return this._actions.set(t,h),d.add(Ye(()=>{this._actions.delete(t)})),d}_triggerCommand(e,t){if(this._codeEditorService instanceof IP)try{this._codeEditorService.setActiveCodeEditor(this),super._triggerCommand(e,t)}finally{this._codeEditorService.setActiveCodeEditor(null)}else super._triggerCommand(e,t)}};YO=LJ([$i(2,Ze),$i(3,ri),$i(4,Vi),$i(5,at),$i(6,wf),$i(7,hi),$i(8,ws),$i(9,jn),$i(10,al),$i(11,vn),$i(12,Be)],YO);let Xj=class extends YO{constructor(e,t,i,s,r,o,a,l,c,d,u,h,f,g,p,_){const w={...t};xO(u,w,!1);const b=c.registerEditorContainer(e);typeof w.theme=="string"&&c.setTheme(w.theme),typeof w.autoDetectHighContrast<"u"&&c.setAutoDetectHighContrast(!!w.autoDetectHighContrast);const y=w.model;delete w.model,super(e,w,i,s,r,o,a,l,c,d,h,p,_),this._configurationService=u,this._standaloneThemeService=c,this._register(b);let S;if(typeof y>"u"){const x=g.getLanguageIdByMimeType(w.language)||w.language||Ro;S=nxe(f,g,w.value||"",x,void 0),this._ownsModel=!0}else S=y,this._ownsModel=!1;if(this._attachModel(S),S){const x={oldModelUrl:null,newModelUrl:S.uri};this._onDidChangeModel.fire(x)}}dispose(){super.dispose()}updateOptions(e){xO(this._configurationService,e,!1),typeof e.theme=="string"&&this._standaloneThemeService.setTheme(e.theme),typeof e.autoDetectHighContrast<"u"&&this._standaloneThemeService.setAutoDetectHighContrast(!!e.autoDetectHighContrast),super.updateOptions(e)}_postDetachModelCleanup(e){super._postDetachModelCleanup(e),e&&this._ownsModel&&(e.dispose(),this._ownsModel=!1)}};Xj=LJ([$i(2,Ze),$i(3,ri),$i(4,Vi),$i(5,at),$i(6,wf),$i(7,hi),$i(8,Jl),$i(9,jn),$i(10,Tt),$i(11,al),$i(12,Zi),$i(13,un),$i(14,vn),$i(15,Be)],Xj);let Qj=class extends ip{constructor(e,t,i,s,r,o,a,l,c,d,u,h){const f={...t};xO(l,f,!0);const g=o.registerEditorContainer(e);typeof f.theme=="string"&&o.setTheme(f.theme),typeof f.autoDetectHighContrast<"u"&&o.setAutoDetectHighContrast(!!f.autoDetectHighContrast),super(e,f,{},s,i,r,h,d),this._configurationService=l,this._standaloneThemeService=o,this._register(g)}dispose(){super.dispose()}updateOptions(e){xO(this._configurationService,e,!0),typeof e.theme=="string"&&this._standaloneThemeService.setTheme(e.theme),typeof e.autoDetectHighContrast<"u"&&this._standaloneThemeService.setAutoDetectHighContrast(!!e.autoDetectHighContrast),super.updateOptions(e)}_createInnerEditor(e,t,i){return e.createInstance(YO,t,i)}getOriginalEditor(){return super.getOriginalEditor()}getModifiedEditor(){return super.getModifiedEditor()}addCommand(e,t,i){return this.getModifiedEditor().addCommand(e,t,i)}createContextKey(e,t){return this.getModifiedEditor().createContextKey(e,t)}addAction(e){return this.getModifiedEditor().addAction(e)}};Qj=LJ([$i(2,Ze),$i(3,at),$i(4,ri),$i(5,Jl),$i(6,jn),$i(7,Tt),$i(8,ol),$i(9,nv),$i(10,pp),$i(11,ov)],Qj);function nxe(n,e,t,i,s){if(t=t||"",!i){const r=t.indexOf(`
`);let o=t;return r!==-1&&(o=t.substring(0,r)),$de(n,t,e.createByFilepathOrFirstLine(s||null,o),s)}return $de(n,t,e.createById(i),s)}function $de(n,e,t,i){return n.createModel(e,t,i)}var Lht=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},jde=function(n,e){return function(t,i){e(t,i,n)}};class kht{constructor(e,t){this.viewModel=e,this.deltaScrollVertical=t}getId(){return this.viewModel}}let ZO=class extends ee{constructor(e,t,i,s,r){super(),this._container=e,this._overflowWidgetsDomNode=t,this._workbenchUIElementFactory=i,this._instantiationService=s,this._viewModel=Nt(this,void 0),this._collapsed=Ke(this,l=>{var c;return(c=this._viewModel.read(l))==null?void 0:c.collapsed.read(l)}),this._editorContentHeight=Nt(this,500),this.contentHeight=Ke(this,l=>(this._collapsed.read(l)?0:this._editorContentHeight.read(l))+this._outerEditorHeight),this._modifiedContentWidth=Nt(this,0),this._modifiedWidth=Nt(this,0),this._originalContentWidth=Nt(this,0),this._originalWidth=Nt(this,0),this.maxScroll=Ke(this,l=>{const c=this._modifiedContentWidth.read(l)-this._modifiedWidth.read(l),d=this._originalContentWidth.read(l)-this._originalWidth.read(l);return c>d?{maxScroll:c,width:this._modifiedWidth.read(l)}:{maxScroll:d,width:this._originalWidth.read(l)}}),this._elements=Pt("div.multiDiffEntry",[Pt("div.header@header",[Pt("div.header-content",[Pt("div.collapse-button@collapseButton"),Pt("div.file-path",[Pt("div.title.modified.show-file-icons@primaryPath",[]),Pt("div.status.deleted@status",["R"]),Pt("div.title.original.show-file-icons@secondaryPath",[])]),Pt("div.actions@actions")])]),Pt("div.editorParent",[Pt("div.editorContainer@editor")])]),this.editor=this._register(this._instantiationService.createInstance(ip,this._elements.editor,{overflowWidgetsDomNode:this._overflowWidgetsDomNode},{})),this.isModifedFocused=$a(this.editor.getModifiedEditor()).isFocused,this.isOriginalFocused=$a(this.editor.getOriginalEditor()).isFocused,this.isFocused=Ke(this,l=>this.isModifedFocused.read(l)||this.isOriginalFocused.read(l)),this._resourceLabel=this._workbenchUIElementFactory.createResourceLabel?this._register(this._workbenchUIElementFactory.createResourceLabel(this._elements.primaryPath)):void 0,this._resourceLabel2=this._workbenchUIElementFactory.createResourceLabel?this._register(this._workbenchUIElementFactory.createResourceLabel(this._elements.secondaryPath)):void 0,this._dataStore=this._register(new ue),this._headerHeight=40,this._lastScrollTop=-1,this._isSettingScrollTop=!1;const o=new aO(this._elements.collapseButton,{});this._register(gt(l=>{o.element.className="",o.icon=this._collapsed.read(l)?ye.chevronRight:ye.chevronDown})),this._register(o.onDidClick(()=>{var l;(l=this._viewModel.get())==null||l.collapsed.set(!this._collapsed.get(),void 0)})),this._register(gt(l=>{this._elements.editor.style.display=this._collapsed.read(l)?"none":"block"})),this._register(this.editor.getModifiedEditor().onDidLayoutChange(l=>{const c=this.editor.getModifiedEditor().getLayoutInfo().contentWidth;this._modifiedWidth.set(c,void 0)})),this._register(this.editor.getOriginalEditor().onDidLayoutChange(l=>{const c=this.editor.getOriginalEditor().getLayoutInfo().contentWidth;this._originalWidth.set(c,void 0)})),this._register(this.editor.onDidContentSizeChange(l=>{gk(c=>{this._editorContentHeight.set(l.contentHeight,c),this._modifiedContentWidth.set(this.editor.getModifiedEditor().getContentWidth(),c),this._originalContentWidth.set(this.editor.getOriginalEditor().getContentWidth(),c)})})),this._register(this.editor.getOriginalEditor().onDidScrollChange(l=>{if(this._isSettingScrollTop||!l.scrollTopChanged||!this._data)return;const c=l.scrollTop-this._lastScrollTop;this._data.deltaScrollVertical(c)})),this._register(gt(l=>{var d;const c=(d=this._viewModel.read(l))==null?void 0:d.isActive.read(l);this._elements.root.classList.toggle("active",c)})),this._container.appendChild(this._elements.root),this._outerEditorHeight=this._headerHeight,this._contextKeyService=this._register(r.createScoped(this._elements.actions));const a=this._register(this._instantiationService.createChild(new Ux([at,this._contextKeyService])));this._register(a.createInstance(KO,this._elements.actions,ze.MultiDiffEditorFileToolbar,{actionRunner:this._register(new exe(()=>{var l;return(l=this._viewModel.get())==null?void 0:l.modifiedUri})),menuOptions:{shouldForwardArgs:!0},toolbarOptions:{primaryGroup:l=>l.startsWith("navigation")},actionViewItemProvider:(l,c)=>Z1e(a,l,c)}))}setScrollLeft(e){this._modifiedContentWidth.get()-this._modifiedWidth.get()>this._originalContentWidth.get()-this._originalWidth.get()?this.editor.getModifiedEditor().setScrollLeft(e):this.editor.getOriginalEditor().setScrollLeft(e)}setData(e){this._data=e;function t(s){return{...s,scrollBeyondLastLine:!1,hideUnchangedRegions:{enabled:!0},scrollbar:{vertical:"hidden",horizontal:"hidden",handleMouseWheel:!1,useShadows:!1},renderOverviewRuler:!1,fixedOverflowWidgets:!0,overviewRulerBorder:!1}}if(!e){gk(s=>{this._viewModel.set(void 0,s),this.editor.setDiffModel(null,s),this._dataStore.clear()});return}const i=e.viewModel.documentDiffItem;if(gk(s=>{var c,d;(c=this._resourceLabel)==null||c.setUri(e.viewModel.modifiedUri??e.viewModel.originalUri,{strikethrough:e.viewModel.modifiedUri===void 0});let r=!1,o=!1,a=!1,l="";e.viewModel.modifiedUri&&e.viewModel.originalUri&&e.viewModel.modifiedUri.path!==e.viewModel.originalUri.path?(l="R",r=!0):e.viewModel.modifiedUri?e.viewModel.originalUri||(l="A",a=!0):(l="D",o=!0),this._elements.status.classList.toggle("renamed",r),this._elements.status.classList.toggle("deleted",o),this._elements.status.classList.toggle("added",a),this._elements.status.innerText=l,(d=this._resourceLabel2)==null||d.setUri(r?e.viewModel.originalUri:void 0,{strikethrough:!0}),this._dataStore.clear(),this._viewModel.set(e.viewModel,s),this.editor.setDiffModel(e.viewModel.diffEditorViewModelRef,s),this.editor.updateOptions(t(i.options??{}))}),i.onOptionsDidChange&&this._dataStore.add(i.onOptionsDidChange(()=>{this.editor.updateOptions(t(i.options??{}))})),e.viewModel.isAlive.recomputeInitiallyAndOnChange(this._dataStore,s=>{s||this.setData(void 0)}),e.viewModel.documentDiffItem.contextKeys)for(const[s,r]of Object.entries(e.viewModel.documentDiffItem.contextKeys))this._contextKeyService.createKey(s,r)}render(e,t,i,s){this._elements.root.style.visibility="visible",this._elements.root.style.top=`${e.start}px`,this._elements.root.style.height=`${e.length}px`,this._elements.root.style.width=`${t}px`,this._elements.root.style.position="absolute";const r=e.length-this._headerHeight,o=Math.max(0,Math.min(s.start-e.start,r));this._elements.header.style.transform=`translateY(${o}px)`,gk(a=>{this.editor.layout({width:t-2*8-2*1,height:e.length-this._outerEditorHeight})});try{this._isSettingScrollTop=!0,this._lastScrollTop=i,this.editor.getOriginalEditor().setScrollTop(i)}finally{this._isSettingScrollTop=!1}this._elements.header.classList.toggle("shadow",o>0||i>0),this._elements.header.classList.toggle("collapsed",o===r)}hide(){this._elements.root.style.top="-100000px",this._elements.root.style.visibility="hidden"}};ZO=Lht([jde(3,Ze),jde(4,at)],ZO);class Eht{constructor(e){this._create=e,this._unused=new Set,this._used=new Set,this._itemData=new Map}getUnusedObj(e){let t;if(this._unused.size===0)t=this._create(e),this._itemData.set(t,e);else{const i=[...this._unused.values()];t=i.find(s=>this._itemData.get(s).getId()===e.getId())??i[0],this._unused.delete(t),this._itemData.set(t,e),t.setData(e)}return this._used.add(t),{object:t,dispose:()=>{this._used.delete(t),this._unused.size>5?t.dispose():this._unused.add(t)}}}dispose(){for(const e of this._used)e.dispose();for(const e of this._unused)e.dispose();this._used.clear(),this._unused.clear()}}var Iht=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Kde=function(n,e){return function(t,i){e(t,i,n)}};let Jj=class extends ee{constructor(e,t,i,s,r,o){super(),this._element=e,this._dimension=t,this._viewModel=i,this._workbenchUIElementFactory=s,this._parentContextKeyService=r,this._parentInstantiationService=o,this._scrollableElements=Pt("div.scrollContent",[Pt("div@content",{style:{overflow:"hidden"}}),Pt("div.monaco-editor@overflowWidgetsDomNode",{})]),this._scrollable=this._register(new Px({forceIntegerValues:!1,scheduleAtNextAnimationFrame:l=>il(nt(this._element),l),smoothScrollDuration:100})),this._scrollableElement=this._register(new hB(this._scrollableElements.root,{vertical:1,horizontal:1,useShadows:!1},this._scrollable)),this._elements=Pt("div.monaco-component.multiDiffEditor",{},[Pt("div",{},[this._scrollableElement.getDomNode()]),Pt("div.placeholder@placeholder",{},[Pt("div",[v("noChangedFiles","No Changed Files")])])]),this._sizeObserver=this._register(new GSe(this._element,void 0)),this._objectPool=this._register(new Eht(l=>{const c=this._instantiationService.createInstance(ZO,this._scrollableElements.content,this._scrollableElements.overflowWidgetsDomNode,this._workbenchUIElementFactory);return c.setData(l),c})),this.scrollTop=mi(this,this._scrollableElement.onScroll,()=>this._scrollableElement.getScrollPosition().scrollTop),this.scrollLeft=mi(this,this._scrollableElement.onScroll,()=>this._scrollableElement.getScrollPosition().scrollLeft),this._viewItemsInfo=sv(this,(l,c)=>{const d=this._viewModel.read(l);if(!d)return{items:[],getItem:g=>{throw new li}};const u=d.items.read(l),h=new Map;return{items:u.map(g=>{var w;const p=c.add(new Dht(g,this._objectPool,this.scrollLeft,b=>{this._scrollableElement.setScrollPosition({scrollTop:this._scrollableElement.getScrollPosition().scrollTop+b})})),_=(w=this._lastDocStates)==null?void 0:w[p.getKey()];return _&&pn(b=>{p.setViewState(_,b)}),h.set(g,p),p}),getItem:g=>h.get(g)}}),this._viewItems=this._viewItemsInfo.map(this,l=>l.items),this._spaceBetweenPx=0,this._totalHeight=this._viewItems.map(this,(l,c)=>l.reduce((d,u)=>d+u.contentHeight.read(c)+this._spaceBetweenPx,0)),this._contextKeyService=this._register(this._parentContextKeyService.createScoped(this._element)),this._instantiationService=this._register(this._parentInstantiationService.createChild(new Ux([at,this._contextKeyService]))),this._lastDocStates={},this._contextKeyService.createKey(F.inMultiDiffEditor.key,!0),this._register(da((l,c)=>{const d=this._viewModel.read(l);if(d&&d.contextKeys)for(const[u,h]of Object.entries(d.contextKeys)){const f=this._contextKeyService.createKey(u,void 0);f.set(h),c.add(Ye(()=>f.reset()))}}));const a=this._parentContextKeyService.createKey(F.multiDiffEditorAllCollapsed.key,!1);this._register(gt(l=>{const c=this._viewModel.read(l);if(c){const d=c.items.read(l).every(u=>u.collapsed.read(l));a.set(d)}})),this._register(gt(l=>{const c=this._dimension.read(l);this._sizeObserver.observe(c)})),this._register(gt(l=>{const c=this._viewItems.read(l);this._elements.placeholder.classList.toggle("visible",c.length===0)})),this._scrollableElements.content.style.position="relative",this._register(gt(l=>{const c=this._sizeObserver.height.read(l);this._scrollableElements.root.style.height=`${c}px`;const d=this._totalHeight.read(l);this._scrollableElements.content.style.height=`${d}px`;const u=this._sizeObserver.width.read(l);let h=u;const f=this._viewItems.read(l),g=LX(f,No(p=>p.maxScroll.read(l).maxScroll,xd));if(g){const p=g.maxScroll.read(l);h=u+p.maxScroll}this._scrollableElement.setScrollDimensions({width:u,height:c,scrollHeight:d,scrollWidth:h})})),e.replaceChildren(this._elements.root),this._register(Ye(()=>{e.replaceChildren()})),this._register(this._register(gt(l=>{gk(c=>{this.render(l)})})))}render(e){const t=this.scrollTop.read(e);let i=0,s=0,r=0;const o=this._sizeObserver.height.read(e),a=At.ofStartAndLength(t,o),l=this._sizeObserver.width.read(e);for(const c of this._viewItems.read(e)){const d=c.contentHeight.read(e),u=Math.min(d,o),h=At.ofStartAndLength(s,u),f=At.ofStartAndLength(r,d);if(f.isBefore(a))i-=d-u,c.hide();else if(f.isAfter(a))c.hide();else{const g=Math.max(0,Math.min(a.start-f.start,d-u));i-=g;const p=At.ofStartAndLength(t+i,o);c.render(h,g,l,p)}s+=u+this._spaceBetweenPx,r+=d+this._spaceBetweenPx}this._scrollableElements.content.style.transform=`translateY(${-(t+i)}px)`}};Jj=Iht([Kde(4,at),Kde(5,Ze)],Jj);class Dht extends ee{constructor(e,t,i,s){super(),this.viewModel=e,this._objectPool=t,this._scrollLeft=i,this._deltaScrollVertical=s,this._templateRef=this._register(sD(this,void 0)),this.contentHeight=Ke(this,r=>{var o,a;return((a=(o=this._templateRef.read(r))==null?void 0:o.object.contentHeight)==null?void 0:a.read(r))??this.viewModel.lastTemplateData.read(r).contentHeight}),this.maxScroll=Ke(this,r=>{var o;return((o=this._templateRef.read(r))==null?void 0:o.object.maxScroll.read(r))??{maxScroll:0,scrollWidth:0}}),this.template=Ke(this,r=>{var o;return(o=this._templateRef.read(r))==null?void 0:o.object}),this._isHidden=Nt(this,!1),this._isFocused=Ke(this,r=>{var o;return((o=this.template.read(r))==null?void 0:o.isFocused.read(r))??!1}),this.viewModel.setIsFocused(this._isFocused,void 0),this._register(gt(r=>{var a;const o=this._scrollLeft.read(r);(a=this._templateRef.read(r))==null||a.object.setScrollLeft(o)})),this._register(gt(r=>{const o=this._templateRef.read(r);!o||!this._isHidden.read(r)||o.object.isFocused.read(r)||this._clear()}))}dispose(){this._clear(),super.dispose()}toString(){var e;return`VirtualViewItem(${(e=this.viewModel.documentDiffItem.modified)==null?void 0:e.uri.toString()})`}getKey(){return this.viewModel.getKey()}setViewState(e,t){var o;this.viewModel.collapsed.set(e.collapsed,t),this._updateTemplateData(t);const i=this.viewModel.lastTemplateData.get(),s=(o=e.selections)==null?void 0:o.map($e.liftSelection);this.viewModel.lastTemplateData.set({...i,selections:s},t);const r=this._templateRef.get();r&&s&&r.object.editor.setSelections(s)}_updateTemplateData(e){const t=this._templateRef.get();t&&this.viewModel.lastTemplateData.set({contentHeight:t.object.contentHeight.get(),selections:t.object.editor.getSelections()??void 0},e)}_clear(){const e=this._templateRef.get();e&&pn(t=>{this._updateTemplateData(t),e.object.hide(),this._templateRef.set(void 0,t)})}hide(){this._isHidden.set(!0,void 0)}render(e,t,i,s){this._isHidden.set(!1,void 0);let r=this._templateRef.get();if(!r){r=this._objectPool.getUnusedObj(new kht(this.viewModel,this._deltaScrollVertical)),this._templateRef.set(r,void 0);const o=this.viewModel.lastTemplateData.get().selections;o&&r.object.editor.setSelections(o)}r.object.render(e,i,t,s)}}B("multiDiffEditor.headerBackground",{dark:"#262626",light:"tab.inactiveBackground",hcDark:"tab.inactiveBackground",hcLight:"tab.inactiveBackground"},v("multiDiffEditor.headerBackground","The background color of the diff editor's header"));B("multiDiffEditor.background",Ad,v("multiDiffEditor.background","The background color of the multi file diff editor"));B("multiDiffEditor.border",{dark:"sideBarSectionHeader.border",light:"#cccccc",hcDark:"sideBarSectionHeader.border",hcLight:"#cccccc"},v("multiDiffEditor.border","The border color of the multi file diff editor"));var Nht=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Tht=function(n,e){return function(t,i){e(t,i,n)}};let eK=class extends ee{constructor(e,t,i){super(),this._element=e,this._workbenchUIElementFactory=t,this._instantiationService=i,this._dimension=Nt(this,void 0),this._viewModel=Nt(this,void 0),this._widgetImpl=sv(this,(s,r)=>(Fa(ZO,s),r.add(this._instantiationService.createInstance(Fa(Jj,s),this._element,this._dimension,this._viewModel,this._workbenchUIElementFactory)))),this._register(Wx(this._widgetImpl))}};eK=Nht([Tht(2,Ze)],eK);function Rht(n,e,t){return ct.initialize(t||{}).createInstance(Xj,n,e)}function Aht(n){return ct.get(ri).onCodeEditorAdd(t=>{n(t)})}function Mht(n){return ct.get(ri).onDiffEditorAdd(t=>{n(t)})}function Pht(){return ct.get(ri).listCodeEditors()}function Oht(){return ct.get(ri).listDiffEditors()}function Fht(n,e,t){return ct.initialize(t||{}).createInstance(Qj,n,e)}function Bht(n,e){const t=ct.initialize(e||{});return new eK(n,{},t)}function Wht(n){if(typeof n.id!="string"||typeof n.run!="function")throw new Error("Invalid command descriptor, `id` and `run` are required properties!");return Gt.registerCommand(n.id,n.run)}function Hht(n){if(typeof n.id!="string"||typeof n.label!="string"||typeof n.run!="function")throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");const e=he.deserialize(n.precondition),t=(s,...r)=>vs.runEditorCommand(s,r,e,(o,a,l)=>Promise.resolve(n.run(a,...l))),i=new ue;if(i.add(Gt.registerCommand(n.id,t)),n.contextMenuGroupId){const s={command:{id:n.id,title:n.label},when:e,group:n.contextMenuGroupId,order:n.contextMenuOrder||0};i.add(Us.appendMenuItem(ze.EditorContext,s))}if(Array.isArray(n.keybindings)){const s=ct.get(hi);if(!(s instanceof GS))console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService");else{const r=he.and(e,he.deserialize(n.keybindingContext));i.add(s.addDynamicKeybindings(n.keybindings.map(o=>({keybinding:o,command:n.id,when:r}))))}}return i}function Vht(n){return sxe([n])}function sxe(n){const e=ct.get(hi);return e instanceof GS?e.addDynamicKeybindings(n.map(t=>({keybinding:t.keybinding,command:t.command,commandArgs:t.commandArgs,when:he.deserialize(t.when)}))):(console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),ee.None)}function zht(n,e,t){const i=ct.get(un),s=i.getLanguageIdByMimeType(e)||e;return nxe(ct.get(Zi),i,n,s,t)}function Uht(n,e){const t=ct.get(un),i=t.getLanguageIdByMimeType(e)||e||Ro;n.setLanguage(t.createById(i))}function $ht(n,e,t){n&&ct.get(Cf).changeOne(e,n.uri,t)}function jht(n){ct.get(Cf).changeAll(n,[])}function Kht(n){return ct.get(Cf).read(n)}function qht(n){return ct.get(Cf).onMarkerChanged(n)}function Ght(n){return ct.get(Zi).getModel(n)}function Yht(){return ct.get(Zi).getModels()}function Zht(n){return ct.get(Zi).onModelAdded(n)}function Xht(n){return ct.get(Zi).onModelRemoved(n)}function Qht(n){return ct.get(Zi).onModelLanguageChanged(t=>{n({model:t.model,oldLanguage:t.oldLanguageId})})}function Jht(n){return Bat(ct.get(Zi),n)}function eft(n,e){const t=ct.get(un),i=ct.get(Jl);return KQ.colorizeElement(i,t,n,e).then(()=>{i.registerEditorContainer(n)})}function tft(n,e,t){const i=ct.get(un);return ct.get(Jl).registerEditorContainer(Ei.document.body),KQ.colorize(i,n,e,t)}function ift(n,e,t=4){return ct.get(Jl).registerEditorContainer(Ei.document.body),KQ.colorizeModelLine(n,e,t)}function nft(n){const e=In.get(n);return e||{getInitialState:()=>HS,tokenize:(t,i,s)=>tQ(n,s)}}function sft(n,e){In.getOrCreate(e);const t=nft(e),i=mf(n),s=[];let r=t.getInitialState();for(let o=0,a=i.length;o<a;o++){const l=i[o],c=t.tokenize(l,!0,r);s[o]=c.tokens,r=c.endState}return s}function rft(n,e){ct.get(Jl).defineTheme(n,e)}function oft(n){ct.get(Jl).setTheme(n)}function aft(){Vz.clearAllFontInfos()}function lft(n,e){return Gt.registerCommand({id:n,handler:e})}function cft(n){return ct.get(ba).registerOpener({async open(t){return typeof t=="string"&&(t=Xe.parse(t)),n.open(t)}})}function dft(n){return ct.get(ri).registerCodeEditorOpenHandler(async(t,i,s)=>{var a;if(!i)return null;const r=(a=t.options)==null?void 0:a.selection;let o;return r&&typeof r.endLineNumber=="number"&&typeof r.endColumn=="number"?o=r:r&&(o={lineNumber:r.startLineNumber,column:r.startColumn}),await n.openCodeEditor(i,t.resource,o)?i:null})}function uft(){return{create:Rht,getEditors:Pht,getDiffEditors:Oht,onDidCreateEditor:Aht,onDidCreateDiffEditor:Mht,createDiffEditor:Fht,addCommand:Wht,addEditorAction:Hht,addKeybindingRule:Vht,addKeybindingRules:sxe,createModel:zht,setModelLanguage:Uht,setModelMarkers:$ht,getModelMarkers:Kht,removeAllMarkers:jht,onDidChangeMarkers:qht,getModels:Yht,getModel:Ght,onDidCreateModel:Zht,onWillDisposeModel:Xht,onDidChangeModelLanguage:Qht,createWebWorker:Jht,colorizeElement:eft,colorize:tft,colorizeModelLine:ift,tokenize:sft,defineTheme:rft,setTheme:oft,remeasureFonts:aft,registerCommand:lft,registerLinkOpener:cft,registerEditorOpener:dft,AccessibilitySupport:OV,ContentWidgetPositionPreference:zV,CursorChangeReason:UV,DefaultEndOfLine:$V,EditorAutoIndentStrategy:KV,EditorOption:qV,EndOfLinePreference:GV,EndOfLineSequence:YV,MinimapPosition:oz,MinimapSectionHeaderStyle:az,MouseTargetType:lz,OverlayWidgetPositionPreference:uz,OverviewRulerLane:hz,GlyphMarginLane:ZV,RenderLineNumbersType:pz,RenderMinimap:mz,ScrollbarVisibility:vz,ScrollType:_z,TextEditorCursorBlinkingStyle:xz,TextEditorCursorStyle:Lz,TrackedRangeStickiness:kz,WrappingIndent:Ez,InjectedTextCursorStops:JV,PositionAffinity:gz,ShowLightbulbIconMode:wz,ConfigurationChangedEvent:qwe,BareFontInfo:zb,FontInfo:Hz,TextModelResolvedOptions:y2,FindMatch:HI,ApplyUpdateResult:Kk,EditorZoom:vc,createMultiFileDiffEditor:Bht,EditorType:tT,EditorOptions:Ku}}function hft(n,e){if(!e||!Array.isArray(e))return!1;for(const t of e)if(!n(t))return!1;return!0}function wA(n,e){return typeof n=="boolean"?n:e}function qde(n,e){return typeof n=="string"?n:e}function fft(n){const e={};for(const t of n)e[t]=!0;return e}function Gde(n,e=!1){e&&(n=n.map(function(i){return i.toLowerCase()}));const t=fft(n);return e?function(i){return t[i.toLowerCase()]!==void 0&&t.hasOwnProperty(i.toLowerCase())}:function(i){return t[i]!==void 0&&t.hasOwnProperty(i)}}function tK(n,e,t){e=e.replace(/@@/g,"");let i=0,s;do s=!1,e=e.replace(/@(\w+)/g,function(o,a){s=!0;let l="";if(typeof n[a]=="string")l=n[a];else if(n[a]&&n[a]instanceof RegExp)l=n[a].source;else throw n[a]===void 0?en(n,"language definition does not contain attribute '"+a+"', used at: "+e):en(n,"attribute reference '"+a+"' must be a string, used at: "+e);return lb(l)?"":"(?:"+l+")"}),i++;while(s&&i<5);e=e.replace(/\x01/g,"@");const r=(n.ignoreCase?"i":"")+(n.unicode?"u":"");if(t&&e.match(/\$[sS](\d\d?)/g)){let a=null,l=null;return c=>(l&&a===c||(a=c,l=new RegExp(nlt(n,e,c),r)),l)}return new RegExp(e,r)}function gft(n,e,t,i){if(i<0)return n;if(i<e.length)return e[i];if(i>=100){i=i-100;const s=t.split(".");if(s.unshift(t),i<s.length)return s[i]}return null}function pft(n,e,t,i){let s=-1,r=t,o=t.match(/^\$(([sS]?)(\d\d?)|#)(.*)$/);o&&(o[3]&&(s=parseInt(o[3]),o[2]&&(s=s+100)),r=o[4]);let a="~",l=r;!r||r.length===0?(a="!=",l=""):/^\w*$/.test(l)?a="==":(o=r.match(/^(@|!@|~|!~|==|!=)(.*)$/),o&&(a=o[1],l=o[2]));let c;if((a==="~"||a==="!~")&&/^(\w|\|)*$/.test(l)){const d=Gde(l.split("|"),n.ignoreCase);c=function(u){return a==="~"?d(u):!d(u)}}else if(a==="@"||a==="!@"){const d=n[l];if(!d)throw en(n,"the @ match target '"+l+"' is not defined, in rule: "+e);if(!hft(function(h){return typeof h=="string"},d))throw en(n,"the @ match target '"+l+"' must be an array of strings, in rule: "+e);const u=Gde(d,n.ignoreCase);c=function(h){return a==="@"?u(h):!u(h)}}else if(a==="~"||a==="!~")if(l.indexOf("$")<0){const d=tK(n,"^"+l+"$",!1);c=function(u){return a==="~"?d.test(u):!d.test(u)}}else c=function(d,u,h,f){return tK(n,"^"+om(n,l,u,h,f)+"$",!1).test(d)};else if(l.indexOf("$")<0){const d=Mg(n,l);c=function(u){return a==="=="?u===d:u!==d}}else{const d=Mg(n,l);c=function(u,h,f,g,p){const _=om(n,d,h,f,g);return a==="=="?u===_:u!==_}}return s===-1?{name:t,value:i,test:function(d,u,h,f){return c(d,d,u,h,f)}}:{name:t,value:i,test:function(d,u,h,f){const g=gft(d,u,h,s);return c(g||"",d,u,h,f)}}}function iK(n,e,t){if(t){if(typeof t=="string")return t;if(t.token||t.token===""){if(typeof t.token!="string")throw en(n,"a 'token' attribute must be of type string, in rule: "+e);{const i={token:t.token};if(t.token.indexOf("$")>=0&&(i.tokenSubst=!0),typeof t.bracket=="string")if(t.bracket==="@open")i.bracket=1;else if(t.bracket==="@close")i.bracket=-1;else throw en(n,"a 'bracket' attribute must be either '@open' or '@close', in rule: "+e);if(t.next){if(typeof t.next!="string")throw en(n,"the next state must be a string value in rule: "+e);{let s=t.next;if(!/^(@pop|@push|@popall)$/.test(s)&&(s[0]==="@"&&(s=s.substr(1)),s.indexOf("$")<0&&!slt(n,om(n,s,"",[],""))))throw en(n,"the next state '"+t.next+"' is not defined in rule: "+e);i.next=s}}return typeof t.goBack=="number"&&(i.goBack=t.goBack),typeof t.switchTo=="string"&&(i.switchTo=t.switchTo),typeof t.log=="string"&&(i.log=t.log),typeof t.nextEmbedded=="string"&&(i.nextEmbedded=t.nextEmbedded,n.usesEmbedded=!0),i}}else if(Array.isArray(t)){const i=[];for(let s=0,r=t.length;s<r;s++)i[s]=iK(n,e,t[s]);return{group:i}}else if(t.cases){const i=[];for(const r in t.cases)if(t.cases.hasOwnProperty(r)){const o=iK(n,e,t.cases[r]);r==="@default"||r==="@"||r===""?i.push({test:void 0,value:o,name:r}):r==="@eos"?i.push({test:function(a,l,c,d){return d},value:o,name:r}):i.push(pft(n,e,r,o))}const s=n.defaultToken;return{test:function(r,o,a,l){for(const c of i)if(!c.test||c.test(r,o,a,l))return c.value;return s}}}else throw en(n,"an action must be a string, an object with a 'token' or 'cases' attribute, or an array of actions; in rule: "+e)}else return{token:""}}class mft{constructor(e){this.regex=new RegExp(""),this.action={token:""},this.matchOnlyAtLineStart=!1,this.name="",this.name=e}setRegex(e,t){let i;if(typeof t=="string")i=t;else if(t instanceof RegExp)i=t.source;else throw en(e,"rules must start with a match string or regular expression: "+this.name);this.matchOnlyAtLineStart=i.length>0&&i[0]==="^",this.name=this.name+": "+i,this.regex=tK(e,"^(?:"+(this.matchOnlyAtLineStart?i.substr(1):i)+")",!0)}setAction(e,t){this.action=iK(e,this.name,t)}resolveRegex(e){return this.regex instanceof RegExp?this.regex:this.regex(e)}}function rxe(n,e){if(!e||typeof e!="object")throw new Error("Monarch: expecting a language definition object");const t={languageId:n,includeLF:wA(e.includeLF,!1),noThrow:!1,maxStack:100,start:typeof e.start=="string"?e.start:null,ignoreCase:wA(e.ignoreCase,!1),unicode:wA(e.unicode,!1),tokenPostfix:qde(e.tokenPostfix,"."+n),defaultToken:qde(e.defaultToken,"source"),usesEmbedded:!1,stateNames:{},tokenizer:{},brackets:[]},i=e;i.languageId=n,i.includeLF=t.includeLF,i.ignoreCase=t.ignoreCase,i.unicode=t.unicode,i.noThrow=t.noThrow,i.usesEmbedded=t.usesEmbedded,i.stateNames=e.tokenizer,i.defaultToken=t.defaultToken;function s(o,a,l){for(const c of l){let d=c.include;if(d){if(typeof d!="string")throw en(t,"an 'include' attribute must be a string at: "+o);if(d[0]==="@"&&(d=d.substr(1)),!e.tokenizer[d])throw en(t,"include target '"+d+"' is not defined at: "+o);s(o+"."+d,a,e.tokenizer[d])}else{const u=new mft(o);if(Array.isArray(c)&&c.length>=1&&c.length<=3)if(u.setRegex(i,c[0]),c.length>=3)if(typeof c[1]=="string")u.setAction(i,{token:c[1],next:c[2]});else if(typeof c[1]=="object"){const h=c[1];h.next=c[2],u.setAction(i,h)}else throw en(t,"a next state as the last element of a rule can only be given if the action is either an object or a string, at: "+o);else u.setAction(i,c[1]);else{if(!c.regex)throw en(t,"a rule must either be an array, or an object with a 'regex' or 'include' field at: "+o);c.name&&typeof c.name=="string"&&(u.name=c.name),c.matchOnlyAtStart&&(u.matchOnlyAtLineStart=wA(c.matchOnlyAtLineStart,!1)),u.setRegex(i,c.regex),u.setAction(i,c.action)}a.push(u)}}}if(!e.tokenizer||typeof e.tokenizer!="object")throw en(t,"a language definition must define the 'tokenizer' attribute as an object");t.tokenizer=[];for(const o in e.tokenizer)if(e.tokenizer.hasOwnProperty(o)){t.start||(t.start=o);const a=e.tokenizer[o];t.tokenizer[o]=new Array,s("tokenizer."+o,t.tokenizer[o],a)}if(t.usesEmbedded=i.usesEmbedded,e.brackets){if(!Array.isArray(e.brackets))throw en(t,"the 'brackets' attribute must be defined as an array")}else e.brackets=[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.square"},{open:"(",close:")",token:"delimiter.parenthesis"},{open:"<",close:">",token:"delimiter.angle"}];const r=[];for(const o of e.brackets){let a=o;if(a&&Array.isArray(a)&&a.length===3&&(a={token:a[2],open:a[0],close:a[1]}),a.open===a.close)throw en(t,"open and close brackets in a 'brackets' attribute must be different: "+a.open+`
 hint: use the 'bracket' attribute if matching on equal brackets is required.`);if(typeof a.open=="string"&&typeof a.token=="string"&&typeof a.close=="string")r.push({token:a.token+t.tokenPostfix,open:Mg(t,a.open),close:Mg(t,a.close)});else throw en(t,"every element in the 'brackets' array must be a '{open,close,token}' object or array")}return t.brackets=r,t.noThrow=!0,t}function _ft(n){TS.registerLanguage(n)}function vft(){let n=[];return n=n.concat(TS.getLanguages()),n}function bft(n){return ct.get(un).languageIdCodec.encodeLanguageId(n)}function wft(n,e){return ct.withServices(()=>{const i=ct.get(un).onDidRequestRichLanguageFeatures(s=>{s===n&&(i.dispose(),e())});return i})}function Cft(n,e){return ct.withServices(()=>{const i=ct.get(un).onDidRequestBasicLanguageFeatures(s=>{s===n&&(i.dispose(),e())});return i})}function yft(n,e){if(!ct.get(un).isRegisteredLanguageId(n))throw new Error(`Cannot set configuration for unknown language ${n}`);return ct.get(vn).register(n,e,100)}class Sft{constructor(e,t){this._languageId=e,this._actual=t}dispose(){}getInitialState(){return this._actual.getInitialState()}tokenize(e,t,i){if(typeof this._actual.tokenize=="function")return TD.adaptTokenize(this._languageId,this._actual,e,i);throw new Error("Not supported!")}tokenizeEncoded(e,t,i){const s=this._actual.tokenizeEncoded(e,i);return new P3(s.tokens,s.endState)}}class TD{constructor(e,t,i,s){this._languageId=e,this._actual=t,this._languageService=i,this._standaloneThemeService=s}dispose(){}getInitialState(){return this._actual.getInitialState()}static _toClassicTokens(e,t){const i=[];let s=0;for(let r=0,o=e.length;r<o;r++){const a=e[r];let l=a.startIndex;r===0?l=0:l<s&&(l=s),i[r]=new TI(l,a.scopes,t),s=l}return i}static adaptTokenize(e,t,i,s){const r=t.tokenize(i,s),o=TD._toClassicTokens(r.tokens,e);let a;return r.endState.equals(s)?a=s:a=r.endState,new eX(o,a)}tokenize(e,t,i){return TD.adaptTokenize(this._languageId,this._actual,e,i)}_toBinaryTokens(e,t){const i=e.encodeLanguageId(this._languageId),s=this._standaloneThemeService.getColorTheme().tokenTheme,r=[];let o=0,a=0;for(let c=0,d=t.length;c<d;c++){const u=t[c],h=s.match(i,u.scopes)|1024;if(o>0&&r[o-1]===h)continue;let f=u.startIndex;c===0?f=0:f<a&&(f=a),r[o++]=f,r[o++]=h,a=f}const l=new Uint32Array(o);for(let c=0;c<o;c++)l[c]=r[c];return l}tokenizeEncoded(e,t,i){const s=this._actual.tokenize(e,i),r=this._toBinaryTokens(this._languageService.languageIdCodec,s.tokens);let o;return s.endState.equals(i)?o=i:o=s.endState,new P3(r,o)}}function xft(n){return typeof n.getInitialState=="function"}function Lft(n){return"tokenizeEncoded"in n}function oxe(n){return n&&typeof n.then=="function"}function kft(n){const e=ct.get(Jl);if(n){const t=[null];for(let i=1,s=n.length;i<s;i++)t[i]=ge.fromHex(n[i]);e.setColorMapOverride(t)}else e.setColorMapOverride(null)}function axe(n,e){return Lft(e)?new Sft(n,e):new TD(n,e,ct.get(un),ct.get(Jl))}function kJ(n,e){const t=new eKe(async()=>{const i=await Promise.resolve(e.create());return i?xft(i)?axe(n,i):new bD(ct.get(un),ct.get(Jl),n,rxe(n,i),ct.get(Tt)):null});return In.registerFactory(n,t)}function Eft(n,e){if(!ct.get(un).isRegisteredLanguageId(n))throw new Error(`Cannot set tokens provider for unknown language ${n}`);return oxe(e)?kJ(n,{create:()=>e}):In.register(n,axe(n,e))}function Ift(n,e){const t=i=>new bD(ct.get(un),ct.get(Jl),n,rxe(n,i),ct.get(Tt));return oxe(e)?kJ(n,{create:()=>e}):In.register(n,t(e))}function Dft(n,e){return ct.get(Be).referenceProvider.register(n,e)}function Nft(n,e){return ct.get(Be).renameProvider.register(n,e)}function Tft(n,e){return ct.get(Be).newSymbolNamesProvider.register(n,e)}function Rft(n,e){return ct.get(Be).signatureHelpProvider.register(n,e)}function Aft(n,e){return ct.get(Be).hoverProvider.register(n,{provideHover:async(i,s,r,o)=>{const a=i.getWordAtPosition(s);return Promise.resolve(e.provideHover(i,s,r,o)).then(l=>{if(l)return!l.range&&a&&(l.range=new M(s.lineNumber,a.startColumn,s.lineNumber,a.endColumn)),l.range||(l.range=new M(s.lineNumber,s.column,s.lineNumber,s.column)),l})}})}function Mft(n,e){return ct.get(Be).documentSymbolProvider.register(n,e)}function Pft(n,e){return ct.get(Be).documentHighlightProvider.register(n,e)}function Oft(n,e){return ct.get(Be).linkedEditingRangeProvider.register(n,e)}function Fft(n,e){return ct.get(Be).definitionProvider.register(n,e)}function Bft(n,e){return ct.get(Be).implementationProvider.register(n,e)}function Wft(n,e){return ct.get(Be).typeDefinitionProvider.register(n,e)}function Hft(n,e){return ct.get(Be).codeLensProvider.register(n,e)}function Vft(n,e,t){return ct.get(Be).codeActionProvider.register(n,{providedCodeActionKinds:t==null?void 0:t.providedCodeActionKinds,documentation:t==null?void 0:t.documentation,provideCodeActions:(s,r,o,a)=>{const c=ct.get(Cf).read({resource:s.uri}).filter(d=>M.areIntersectingOrTouching(d,r));return e.provideCodeActions(s,r,{markers:c,only:o.only,trigger:o.trigger},a)},resolveCodeAction:e.resolveCodeAction})}function zft(n,e){return ct.get(Be).documentFormattingEditProvider.register(n,e)}function Uft(n,e){return ct.get(Be).documentRangeFormattingEditProvider.register(n,e)}function $ft(n,e){return ct.get(Be).onTypeFormattingEditProvider.register(n,e)}function jft(n,e){return ct.get(Be).linkProvider.register(n,e)}function Kft(n,e){return ct.get(Be).completionProvider.register(n,e)}function qft(n,e){return ct.get(Be).colorProvider.register(n,e)}function Gft(n,e){return ct.get(Be).foldingRangeProvider.register(n,e)}function Yft(n,e){return ct.get(Be).declarationProvider.register(n,e)}function Zft(n,e){return ct.get(Be).selectionRangeProvider.register(n,e)}function Xft(n,e){return ct.get(Be).documentSemanticTokensProvider.register(n,e)}function Qft(n,e){return ct.get(Be).documentRangeSemanticTokensProvider.register(n,e)}function Jft(n,e){return ct.get(Be).inlineCompletionsProvider.register(n,e)}function egt(n,e){return ct.get(Be).inlineEditProvider.register(n,e)}function tgt(n,e){return ct.get(Be).inlayHintsProvider.register(n,e)}function igt(){return{register:_ft,getLanguages:vft,onLanguage:wft,onLanguageEncountered:Cft,getEncodedLanguageId:bft,setLanguageConfiguration:yft,setColorMap:kft,registerTokensProviderFactory:kJ,setTokensProvider:Eft,setMonarchTokensProvider:Ift,registerReferenceProvider:Dft,registerRenameProvider:Nft,registerNewSymbolNameProvider:Tft,registerCompletionItemProvider:Kft,registerSignatureHelpProvider:Rft,registerHoverProvider:Aft,registerDocumentSymbolProvider:Mft,registerDocumentHighlightProvider:Pft,registerLinkedEditingRangeProvider:Oft,registerDefinitionProvider:Fft,registerImplementationProvider:Bft,registerTypeDefinitionProvider:Wft,registerCodeLensProvider:Hft,registerCodeActionProvider:Vft,registerDocumentFormattingEditProvider:zft,registerDocumentRangeFormattingEditProvider:Uft,registerOnTypeFormattingEditProvider:$ft,registerLinkProvider:jft,registerColorProvider:qft,registerFoldingRangeProvider:Gft,registerDeclarationProvider:Yft,registerSelectionRangeProvider:Zft,registerDocumentSemanticTokensProvider:Xft,registerDocumentRangeSemanticTokensProvider:Qft,registerInlineCompletionsProvider:Jft,registerInlineEditProvider:egt,registerInlayHintsProvider:tgt,DocumentHighlightKind:jV,CompletionItemKind:WV,CompletionItemTag:HV,CompletionItemInsertTextRule:BV,SymbolKind:yz,SymbolTag:Sz,IndentAction:QV,CompletionTriggerKind:VV,SignatureHelpTriggerKind:Cz,InlayHintKind:ez,InlineCompletionTriggerKind:tz,InlineEditTriggerKind:iz,CodeActionTriggerType:FV,NewSymbolNameTag:cz,NewSymbolNameTriggerKind:dz,PartialAcceptTriggerKind:fz,HoverVerbosityAction:XV,FoldingRangeKind:I_,SelectedSuggestionInfo:c0e}}const EJ=Wt("IEditorCancelService"),lxe=new Re("cancellableOperation",!1,v("cancellableOperation","Whether the editor runs a cancellable operation, e.g. like 'Peek References'"));jt(EJ,class{constructor(){this._tokens=new WeakMap}add(n,e){let t=this._tokens.get(n);t||(t=n.invokeWithinContext(s=>{const r=lxe.bindTo(s.get(at)),o=new xo;return{key:r,tokens:o}}),this._tokens.set(n,t));let i;return t.key.set(!0),i=t.tokens.push(e),()=>{i&&(i(),t.key.set(!t.tokens.isEmpty()),i=void 0)}}cancel(n){const e=this._tokens.get(n);if(!e)return;const t=e.tokens.pop();t&&(t.cancel(),e.key.set(!e.tokens.isEmpty()))}},1);class ngt extends mn{constructor(e,t){super(t),this.editor=e,this._unregister=e.invokeWithinContext(i=>i.get(EJ).add(e,this))}dispose(){this._unregister(),super.dispose()}}Te(new class extends vs{constructor(){super({id:"editor.cancelOperation",kbOpts:{weight:100,primary:9},precondition:lxe})}runEditorCommand(n,e){n.get(EJ).cancel(e)}});let cxe=class nK{constructor(e,t){if(this.flags=t,this.flags&1){const i=e.getModel();this.modelVersionId=i?a0("{0}#{1}",i.uri.toString(),i.getVersionId()):null}else this.modelVersionId=null;this.flags&4?this.position=e.getPosition():this.position=null,this.flags&2?this.selection=e.getSelection():this.selection=null,this.flags&8?(this.scrollLeft=e.getScrollLeft(),this.scrollTop=e.getScrollTop()):(this.scrollLeft=-1,this.scrollTop=-1)}_equals(e){if(!(e instanceof nK))return!1;const t=e;return!(this.modelVersionId!==t.modelVersionId||this.scrollLeft!==t.scrollLeft||this.scrollTop!==t.scrollTop||!this.position&&t.position||this.position&&!t.position||this.position&&t.position&&!this.position.equals(t.position)||!this.selection&&t.selection||this.selection&&!t.selection||this.selection&&t.selection&&!this.selection.equalsRange(t.selection))}validate(e){return this._equals(new nK(e,this.flags))}};class V_ extends ngt{constructor(e,t,i,s){super(e,s),this._listener=new ue,t&4&&this._listener.add(e.onDidChangeCursorPosition(r=>{(!i||!M.containsPosition(i,r.position))&&this.cancel()})),t&2&&this._listener.add(e.onDidChangeCursorSelection(r=>{(!i||!M.containsRange(i,r.selection))&&this.cancel()})),t&8&&this._listener.add(e.onDidScrollChange(r=>this.cancel())),t&1&&(this._listener.add(e.onDidChangeModel(r=>this.cancel())),this._listener.add(e.onDidChangeModelContent(r=>this.cancel())))}dispose(){this._listener.dispose(),super.dispose()}}class IJ extends mn{constructor(e,t){super(t),this._listener=e.onDidChangeContent(()=>this.cancel())}dispose(){this._listener.dispose(),super.dispose()}}function ff(n){return n&&typeof n.getEditorType=="function"?n.getEditorType()===tT.ICodeEditor:!1}function DJ(n){return n&&typeof n.getEditorType=="function"?n.getEditorType()===tT.IDiffEditor:!1}function sgt(n){return!!n&&typeof n=="object"&&typeof n.onDidChangeActiveEditor=="function"}function dxe(n){return ff(n)?n:DJ(n)?n.getModifiedEditor():sgt(n)&&ff(n.activeCodeEditor)?n.activeCodeEditor:null}class QS{static _handleEolEdits(e,t){let i;const s=[];for(const r of t)typeof r.eol=="number"&&(i=r.eol),r.range&&typeof r.text=="string"&&s.push(r);return typeof i=="number"&&e.hasModel()&&e.getModel().pushEOL(i),s}static _isFullModelReplaceEdit(e,t){if(!e.hasModel())return!1;const i=e.getModel(),s=i.validateRange(t.range);return i.getFullModelRange().equalsRange(s)}static execute(e,t,i){i&&e.pushUndoStop();const s=ju.capture(e),r=QS._handleEolEdits(e,t);r.length===1&&QS._isFullModelReplaceEdit(e,r[0])?e.executeEdits("formatEditsCommand",r.map(o=>gn.replace(M.lift(o.range),o.text))):e.executeEdits("formatEditsCommand",r.map(o=>gn.replaceMove(M.lift(o.range),o.text))),i&&e.pushUndoStop(),s.restoreRelativeVerticalPositionOfCursor(e)}}class Yde{constructor(e){this.value=e,this._lower=e.toLowerCase()}static toKey(e){return typeof e=="string"?e.toLowerCase():e._lower}}class rgt{constructor(e){if(this._set=new Set,e)for(const t of e)this.add(t)}add(e){this._set.add(Yde.toKey(e))}has(e){return this._set.has(Yde.toKey(e))}}function uxe(n,e,t){const i=[],s=new rgt,r=n.ordered(t);for(const a of r)i.push(a),a.extensionId&&s.add(a.extensionId);const o=e.ordered(t);for(const a of o){if(a.extensionId){if(s.has(a.extensionId))continue;s.add(a.extensionId)}i.push({displayName:a.displayName,extensionId:a.extensionId,provideDocumentFormattingEdits(l,c,d){return a.provideDocumentRangeFormattingEdits(l,l.getFullModelRange(),c,d)}})}return i}const jE=class jE{static setFormatterSelector(e){return{dispose:jE._selectors.unshift(e)}}static async select(e,t,i,s){if(e.length===0)return;const r=qt.first(jE._selectors);if(r)return await r(e,t,i,s)}};jE._selectors=new xo;let RD=jE;async function hxe(n,e,t,i,s,r,o){const a=n.get(Ze),{documentRangeFormattingEditProvider:l}=n.get(Be),c=ff(e)?e.getModel():e,d=l.ordered(c),u=await RD.select(d,c,i,2);u&&(s.report(u),await a.invokeFunction(ogt,u,e,t,r,o))}async function ogt(n,e,t,i,s,r){var w,b;const o=n.get(wa),a=n.get(Cr),l=n.get(ov);let c,d;ff(t)?(c=t.getModel(),d=new V_(t,5,void 0,s)):(c=t,d=new IJ(t,s));const u=[];let h=0;for(const y of UZ(i).sort(M.compareRangesUsingStarts))h>0&&M.areIntersectingOrTouching(u[h-1],y)?u[h-1]=M.fromPositions(u[h-1].getStartPosition(),y.getEndPosition()):h=u.push(y);const f=async y=>{var x,E;a.trace("[format][provideDocumentRangeFormattingEdits] (request)",(x=e.extensionId)==null?void 0:x.value,y);const S=await e.provideDocumentRangeFormattingEdits(c,y,c.getFormattingOptions(),d.token)||[];return a.trace("[format][provideDocumentRangeFormattingEdits] (response)",(E=e.extensionId)==null?void 0:E.value,S),S},g=(y,S)=>{if(!y.length||!S.length)return!1;const x=y.reduce((E,D)=>M.plusRange(E,D.range),y[0].range);if(!S.some(E=>M.intersectRanges(x,E.range)))return!1;for(const E of y)for(const D of S)if(M.intersectRanges(E.range,D.range))return!0;return!1},p=[],_=[];try{if(typeof e.provideDocumentRangesFormattingEdits=="function"){a.trace("[format][provideDocumentRangeFormattingEdits] (request)",(w=e.extensionId)==null?void 0:w.value,u);const y=await e.provideDocumentRangesFormattingEdits(c,u,c.getFormattingOptions(),d.token)||[];a.trace("[format][provideDocumentRangeFormattingEdits] (response)",(b=e.extensionId)==null?void 0:b.value,y),_.push(y)}else{for(const y of u){if(d.token.isCancellationRequested)return!0;_.push(await f(y))}for(let y=0;y<u.length;++y)for(let S=y+1;S<u.length;++S){if(d.token.isCancellationRequested)return!0;if(g(_[y],_[S])){const x=M.plusRange(u[y],u[S]),E=await f(x);u.splice(S,1),u.splice(y,1),u.push(x),_.splice(S,1),_.splice(y,1),_.push(E),y=0,S=0}}}for(const y of _){if(d.token.isCancellationRequested)return!0;const S=await o.computeMoreMinimalEdits(c.uri,y);S&&p.push(...S)}}finally{d.dispose()}if(p.length===0)return!1;if(ff(t))QS.execute(t,p,!0),t.revealPositionInCenterIfOutsideViewport(t.getPosition(),1);else{const[{range:y}]=p,S=new $e(y.startLineNumber,y.startColumn,y.endLineNumber,y.endColumn);c.pushEditOperations([S],p.map(x=>({text:x.text,range:M.lift(x.range),forceMoveMarkers:!0})),x=>{for(const{range:E}of x)if(M.areIntersectingOrTouching(E,S))return[new $e(E.startLineNumber,E.startColumn,E.endLineNumber,E.endColumn)];return null})}return l.playSignal(Ll.format,{userGesture:r}),!0}async function agt(n,e,t,i,s,r){const o=n.get(Ze),a=n.get(Be),l=ff(e)?e.getModel():e,c=uxe(a.documentFormattingEditProvider,a.documentRangeFormattingEditProvider,l),d=await RD.select(c,l,t,1);d&&(i.report(d),await o.invokeFunction(lgt,d,e,t,s,r))}async function lgt(n,e,t,i,s,r){const o=n.get(wa),a=n.get(ov);let l,c;ff(t)?(l=t.getModel(),c=new V_(t,5,void 0,s)):(l=t,c=new IJ(t,s));let d;try{const u=await e.provideDocumentFormattingEdits(l,l.getFormattingOptions(),c.token);if(d=await o.computeMoreMinimalEdits(l.uri,u),c.token.isCancellationRequested)return!0}finally{c.dispose()}if(!d||d.length===0)return!1;if(ff(t))QS.execute(t,d,i!==2),i!==2&&t.revealPositionInCenterIfOutsideViewport(t.getPosition(),1);else{const[{range:u}]=d,h=new $e(u.startLineNumber,u.startColumn,u.endLineNumber,u.endColumn);l.pushEditOperations([h],d.map(f=>({text:f.text,range:M.lift(f.range),forceMoveMarkers:!0})),f=>{for(const{range:g}of f)if(M.areIntersectingOrTouching(g,h))return[new $e(g.startLineNumber,g.startColumn,g.endLineNumber,g.endColumn)];return null})}return a.playSignal(Ll.format,{userGesture:r}),!0}async function cgt(n,e,t,i,s,r){const o=e.documentRangeFormattingEditProvider.ordered(t);for(const a of o){const l=await Promise.resolve(a.provideDocumentRangeFormattingEdits(t,i,s,r)).catch(Wn);if(ao(l))return await n.computeMoreMinimalEdits(t.uri,l)}}async function dgt(n,e,t,i,s){const r=uxe(e.documentFormattingEditProvider,e.documentRangeFormattingEditProvider,t);for(const o of r){const a=await Promise.resolve(o.provideDocumentFormattingEdits(t,i,s)).catch(Wn);if(ao(a))return await n.computeMoreMinimalEdits(t.uri,a)}}function fxe(n,e,t,i,s,r,o){const a=e.onTypeFormattingEditProvider.ordered(t);return a.length===0||a[0].autoFormatTriggerCharacters.indexOf(s)<0?Promise.resolve(void 0):Promise.resolve(a[0].provideOnTypeFormattingEdits(t,i,s,r,o)).catch(Wn).then(l=>n.computeMoreMinimalEdits(t.uri,l))}Gt.registerCommand("_executeFormatRangeProvider",async function(n,...e){const[t,i,s]=e;si(Xe.isUri(t)),si(M.isIRange(i));const r=n.get(_a),o=n.get(wa),a=n.get(Be),l=await r.createModelReference(t);try{return cgt(o,a,l.object.textEditorModel,M.lift(i),s,xt.None)}finally{l.dispose()}});Gt.registerCommand("_executeFormatDocumentProvider",async function(n,...e){const[t,i]=e;si(Xe.isUri(t));const s=n.get(_a),r=n.get(wa),o=n.get(Be),a=await s.createModelReference(t);try{return dgt(r,o,a.object.textEditorModel,i,xt.None)}finally{a.dispose()}});Gt.registerCommand("_executeFormatOnTypeProvider",async function(n,...e){const[t,i,s,r]=e;si(Xe.isUri(t)),si(Y.isIPosition(i)),si(typeof s=="string");const o=n.get(_a),a=n.get(wa),l=n.get(Be),c=await o.createModelReference(t);try{return fxe(a,l,c.object.textEditorModel,Y.lift(i),s,r,xt.None)}finally{c.dispose()}});Ku.wrappingIndent.defaultValue=0;Ku.glyphMargin.defaultValue=!1;Ku.autoIndent.defaultValue=3;Ku.overviewRulerLanes.defaultValue=2;RD.setFormatterSelector((n,e,t)=>Promise.resolve(n[0]));const zo=d0e();zo.editor=uft();zo.languages=igt();const ugt=zo.CancellationTokenSource,hgt=zo.Emitter,fgt=zo.KeyCode,ggt=zo.KeyMod,pgt=zo.Position,mgt=zo.Range,_gt=zo.Selection,vgt=zo.SelectionDirection,$2=zo.MarkerSeverity,bgt=zo.MarkerTag,wgt=zo.Uri,Cgt=zo.Token,NJ=zo.editor,ygt=zo.languages,i6=globalThis.MonacoEnvironment;(i6!=null&&i6.globalAPI||typeof define=="function"&&define.amd)&&(globalThis.monaco=zo);typeof globalThis.require<"u"&&typeof globalThis.require.config=="function"&&globalThis.require.config({ignoreDuplicateModules:["vscode-languageserver-types","vscode-languageserver-types/main","vscode-languageserver-textdocument","vscode-languageserver-textdocument/main","vscode-nls","vscode-nls/vscode-nls","jsonc-parser","jsonc-parser/main","vscode-uri","vscode-uri/index","vs/basic-languages/typescript/typescript"]});const rT=Object.freeze(Object.defineProperty({__proto__:null,CancellationTokenSource:ugt,Emitter:hgt,KeyCode:fgt,KeyMod:ggt,MarkerSeverity:$2,MarkerTag:bgt,Position:pgt,Range:mgt,Selection:_gt,SelectionDirection:vgt,Token:Cgt,Uri:wgt,editor:NJ,languages:ygt},Symbol.toStringTag,{value:"Module"}));/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var Sgt=Object.defineProperty,xgt=Object.getOwnPropertyDescriptor,Lgt=Object.getOwnPropertyNames,kgt=Object.prototype.hasOwnProperty,Egt=(n,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Lgt(e))!kgt.call(n,s)&&s!==t&&Sgt(n,s,{get:()=>e[s],enumerable:!(i=xgt(e,s))||i.enumerable});return n},Igt=(n,e,t)=>(Egt(n,e,"default"),t),wk={};Igt(wk,rT);var gxe={},n6={},Dgt=class pxe{static getOrCreate(e){return n6[e]||(n6[e]=new pxe(e)),n6[e]}constructor(e){this._languageId=e,this._loadingTriggered=!1,this._lazyLoadPromise=new Promise((t,i)=>{this._lazyLoadPromiseResolve=t,this._lazyLoadPromiseReject=i})}load(){return this._loadingTriggered||(this._loadingTriggered=!0,gxe[this._languageId].loader().then(e=>this._lazyLoadPromiseResolve(e),e=>this._lazyLoadPromiseReject(e))),this._lazyLoadPromise}};function st(n){const e=n.id;gxe[e]=n,wk.languages.register(n);const t=Dgt.getOrCreate(e);wk.languages.registerTokensProviderFactory(e,{create:async()=>(await t.load()).language}),wk.languages.onLanguageEncountered(e,async()=>{const i=await t.load();wk.languages.setLanguageConfiguration(e,i.conf)})}st({id:"abap",extensions:[".abap"],aliases:["abap","ABAP"],loader:()=>Qe(()=>import("./abap-BrgZPUOV.js"),[])});st({id:"apex",extensions:[".cls"],aliases:["Apex","apex"],mimetypes:["text/x-apex-source","text/x-apex"],loader:()=>Qe(()=>import("./apex-DyP6w7ZV.js"),[])});st({id:"azcli",extensions:[".azcli"],aliases:["Azure CLI","azcli"],loader:()=>Qe(()=>import("./azcli-BaLxmfj-.js"),[])});st({id:"bat",extensions:[".bat",".cmd"],aliases:["Batch","bat"],loader:()=>Qe(()=>import("./bat-CFOPXBzS.js"),[])});st({id:"bicep",extensions:[".bicep"],aliases:["Bicep"],loader:()=>Qe(()=>import("./bicep-BfEKNvv3.js"),[])});st({id:"cameligo",extensions:[".mligo"],aliases:["Cameligo"],loader:()=>Qe(()=>import("./cameligo-BFG1Mk7z.js"),[])});st({id:"clojure",extensions:[".clj",".cljs",".cljc",".edn"],aliases:["clojure","Clojure"],loader:()=>Qe(()=>import("./clojure-DTECt2xU.js"),[])});st({id:"coffeescript",extensions:[".coffee"],aliases:["CoffeeScript","coffeescript","coffee"],mimetypes:["text/x-coffeescript","text/coffeescript"],loader:()=>Qe(()=>import("./coffee-CDGzqUPQ.js"),[])});st({id:"c",extensions:[".c",".h"],aliases:["C","c"],loader:()=>Qe(()=>import("./cpp-CLLBncYj.js"),[])});st({id:"cpp",extensions:[".cpp",".cc",".cxx",".hpp",".hh",".hxx"],aliases:["C++","Cpp","cpp"],loader:()=>Qe(()=>import("./cpp-CLLBncYj.js"),[])});st({id:"csharp",extensions:[".cs",".csx",".cake"],aliases:["C#","csharp"],loader:()=>Qe(()=>import("./csharp-dUCx_-0o.js"),[])});st({id:"csp",extensions:[".csp"],aliases:["CSP","csp"],loader:()=>Qe(()=>import("./csp-5Rap-vPy.js"),[])});st({id:"css",extensions:[".css"],aliases:["CSS","css"],mimetypes:["text/css"],loader:()=>Qe(()=>import("./css-D3h14YRZ.js"),[])});st({id:"cypher",extensions:[".cypher",".cyp"],aliases:["Cypher","OpenCypher"],loader:()=>Qe(()=>import("./cypher-DrQuvNYM.js"),[])});st({id:"dart",extensions:[".dart"],aliases:["Dart","dart"],mimetypes:["text/x-dart-source","text/x-dart"],loader:()=>Qe(()=>import("./dart-CFKIUWau.js"),[])});st({id:"dockerfile",extensions:[".dockerfile"],filenames:["Dockerfile"],aliases:["Dockerfile"],loader:()=>Qe(()=>import("./dockerfile-Zznr-cwX.js"),[])});st({id:"ecl",extensions:[".ecl"],aliases:["ECL","Ecl","ecl"],loader:()=>Qe(()=>import("./ecl-Ce3n6wWz.js"),[])});st({id:"elixir",extensions:[".ex",".exs"],aliases:["Elixir","elixir","ex"],loader:()=>Qe(()=>import("./elixir-deUWdS0T.js"),[])});st({id:"flow9",extensions:[".flow"],aliases:["Flow9","Flow","flow9","flow"],loader:()=>Qe(()=>import("./flow9-i9-g7ZhI.js"),[])});st({id:"fsharp",extensions:[".fs",".fsi",".ml",".mli",".fsx",".fsscript"],aliases:["F#","FSharp","fsharp"],loader:()=>Qe(()=>import("./fsharp-CzKuDChf.js"),[])});st({id:"freemarker2",extensions:[".ftl",".ftlh",".ftlx"],aliases:["FreeMarker2","Apache FreeMarker2"],loader:()=>Qe(()=>import("./freemarker2-BEsDsi6O.js"),[]).then(n=>n.TagAutoInterpolationDollar)});st({id:"freemarker2.tag-angle.interpolation-dollar",aliases:["FreeMarker2 (Angle/Dollar)","Apache FreeMarker2 (Angle/Dollar)"],loader:()=>Qe(()=>import("./freemarker2-BEsDsi6O.js"),[]).then(n=>n.TagAngleInterpolationDollar)});st({id:"freemarker2.tag-bracket.interpolation-dollar",aliases:["FreeMarker2 (Bracket/Dollar)","Apache FreeMarker2 (Bracket/Dollar)"],loader:()=>Qe(()=>import("./freemarker2-BEsDsi6O.js"),[]).then(n=>n.TagBracketInterpolationDollar)});st({id:"freemarker2.tag-angle.interpolation-bracket",aliases:["FreeMarker2 (Angle/Bracket)","Apache FreeMarker2 (Angle/Bracket)"],loader:()=>Qe(()=>import("./freemarker2-BEsDsi6O.js"),[]).then(n=>n.TagAngleInterpolationBracket)});st({id:"freemarker2.tag-bracket.interpolation-bracket",aliases:["FreeMarker2 (Bracket/Bracket)","Apache FreeMarker2 (Bracket/Bracket)"],loader:()=>Qe(()=>import("./freemarker2-BEsDsi6O.js"),[]).then(n=>n.TagBracketInterpolationBracket)});st({id:"freemarker2.tag-auto.interpolation-dollar",aliases:["FreeMarker2 (Auto/Dollar)","Apache FreeMarker2 (Auto/Dollar)"],loader:()=>Qe(()=>import("./freemarker2-BEsDsi6O.js"),[]).then(n=>n.TagAutoInterpolationDollar)});st({id:"freemarker2.tag-auto.interpolation-bracket",aliases:["FreeMarker2 (Auto/Bracket)","Apache FreeMarker2 (Auto/Bracket)"],loader:()=>Qe(()=>import("./freemarker2-BEsDsi6O.js"),[]).then(n=>n.TagAutoInterpolationBracket)});st({id:"go",extensions:[".go"],aliases:["Go"],loader:()=>Qe(()=>import("./go-Cphgjts3.js"),[])});st({id:"graphql",extensions:[".graphql",".gql"],aliases:["GraphQL","graphql","gql"],mimetypes:["application/graphql"],loader:()=>Qe(()=>import("./graphql-Cg7bfA9N.js"),[])});st({id:"handlebars",extensions:[".handlebars",".hbs"],aliases:["Handlebars","handlebars","hbs"],mimetypes:["text/x-handlebars-template"],loader:()=>Qe(()=>import("./handlebars-CDINSPdW.js"),[])});st({id:"hcl",extensions:[".tf",".tfvars",".hcl"],aliases:["Terraform","tf","HCL","hcl"],loader:()=>Qe(()=>import("./hcl-0cvrggvQ.js"),[])});st({id:"html",extensions:[".html",".htm",".shtml",".xhtml",".mdoc",".jsp",".asp",".aspx",".jshtm"],aliases:["HTML","htm","html","xhtml"],mimetypes:["text/html","text/x-jshtm","text/template","text/ng-template"],loader:()=>Qe(()=>import("./html-C8Wa1B3q.js"),[])});st({id:"ini",extensions:[".ini",".properties",".gitconfig"],filenames:["config",".gitattributes",".gitconfig",".editorconfig"],aliases:["Ini","ini"],loader:()=>Qe(()=>import("./ini-Drc7WvVn.js"),[])});st({id:"java",extensions:[".java",".jav"],aliases:["Java","java"],mimetypes:["text/x-java-source","text/x-java"],loader:()=>Qe(()=>import("./java-B_fMsGYe.js"),[])});st({id:"javascript",extensions:[".js",".es6",".jsx",".mjs",".cjs"],firstLine:"^#!.*\\bnode",filenames:["jakefile"],aliases:["JavaScript","javascript","js"],mimetypes:["text/javascript"],loader:()=>Qe(()=>import("./javascript-NhlEF-0a.js"),__vite__mapDeps([0,1]))});st({id:"julia",extensions:[".jl"],aliases:["julia","Julia"],loader:()=>Qe(()=>import("./julia-Bqgm2twL.js"),[])});st({id:"kotlin",extensions:[".kt",".kts"],aliases:["Kotlin","kotlin"],mimetypes:["text/x-kotlin-source","text/x-kotlin"],loader:()=>Qe(()=>import("./kotlin-BSkB5QuD.js"),[])});st({id:"less",extensions:[".less"],aliases:["Less","less"],mimetypes:["text/x-less","text/less"],loader:()=>Qe(()=>import("./less-BsTHnhdd.js"),[])});st({id:"lexon",extensions:[".lex"],aliases:["Lexon"],loader:()=>Qe(()=>import("./lexon-YWi4-JPR.js"),[])});st({id:"lua",extensions:[".lua"],aliases:["Lua","lua"],loader:()=>Qe(()=>import("./lua-nf6ki56Z.js"),[])});st({id:"liquid",extensions:[".liquid",".html.liquid"],aliases:["Liquid","liquid"],mimetypes:["application/liquid"],loader:()=>Qe(()=>import("./liquid-CY7y5Q-u.js"),[])});st({id:"m3",extensions:[".m3",".i3",".mg",".ig"],aliases:["Modula-3","Modula3","modula3","m3"],loader:()=>Qe(()=>import("./m3-Cpb6xl2v.js"),[])});st({id:"markdown",extensions:[".md",".markdown",".mdown",".mkdn",".mkd",".mdwn",".mdtxt",".mdtext"],aliases:["Markdown","markdown"],loader:()=>Qe(()=>import("./markdown-DSZPf7rp.js"),[])});st({id:"mdx",extensions:[".mdx"],aliases:["MDX","mdx"],loader:()=>Qe(()=>import("./mdx-Yap_yBWm.js"),[])});st({id:"mips",extensions:[".s"],aliases:["MIPS","MIPS-V"],mimetypes:["text/x-mips","text/mips","text/plaintext"],loader:()=>Qe(()=>import("./mips-B_c3zf-v.js"),[])});st({id:"msdax",extensions:[".dax",".msdax"],aliases:["DAX","MSDAX"],loader:()=>Qe(()=>import("./msdax-rUNN04Wq.js"),[])});st({id:"mysql",extensions:[],aliases:["MySQL","mysql"],loader:()=>Qe(()=>import("./mysql-DDwshQtU.js"),[])});st({id:"objective-c",extensions:[".m"],aliases:["Objective-C"],loader:()=>Qe(()=>import("./objective-c-B5zXfXm9.js"),[])});st({id:"pascal",extensions:[".pas",".p",".pp"],aliases:["Pascal","pas"],mimetypes:["text/x-pascal-source","text/x-pascal"],loader:()=>Qe(()=>import("./pascal-CXOwvkN_.js"),[])});st({id:"pascaligo",extensions:[".ligo"],aliases:["Pascaligo","ligo"],loader:()=>Qe(()=>import("./pascaligo-Bc-ZgV77.js"),[])});st({id:"perl",extensions:[".pl",".pm"],aliases:["Perl","pl"],loader:()=>Qe(()=>import("./perl-CwNk8-XU.js"),[])});st({id:"pgsql",extensions:[],aliases:["PostgreSQL","postgres","pg","postgre"],loader:()=>Qe(()=>import("./pgsql-tGk8EFnU.js"),[])});st({id:"php",extensions:[".php",".php4",".php5",".phtml",".ctp"],aliases:["PHP","php"],mimetypes:["application/x-php"],loader:()=>Qe(()=>import("./php-CpIb_Oan.js"),[])});st({id:"pla",extensions:[".pla"],loader:()=>Qe(()=>import("./pla-B03wrqEc.js"),[])});st({id:"postiats",extensions:[".dats",".sats",".hats"],aliases:["ATS","ATS/Postiats"],loader:()=>Qe(()=>import("./postiats-BKlk5iyT.js"),[])});st({id:"powerquery",extensions:[".pq",".pqm"],aliases:["PQ","M","Power Query","Power Query M"],loader:()=>Qe(()=>import("./powerquery-Bhzvs7bI.js"),[])});st({id:"powershell",extensions:[".ps1",".psm1",".psd1"],aliases:["PowerShell","powershell","ps","ps1"],loader:()=>Qe(()=>import("./powershell-Dd3NCNK9.js"),[])});st({id:"proto",extensions:[".proto"],aliases:["protobuf","Protocol Buffers"],loader:()=>Qe(()=>import("./protobuf-COyEY5Pt.js"),[])});st({id:"pug",extensions:[".jade",".pug"],aliases:["Pug","Jade","jade"],loader:()=>Qe(()=>import("./pug-BaJupSGV.js"),[])});st({id:"python",extensions:[".py",".rpy",".pyw",".cpy",".gyp",".gypi"],aliases:["Python","py"],firstLine:"^#!/.*\\bpython[0-9.-]*\\b",loader:()=>Qe(()=>import("./python-BP2V-Fnu.js"),[])});st({id:"qsharp",extensions:[".qs"],aliases:["Q#","qsharp"],loader:()=>Qe(()=>import("./qsharp-DXyYeYxl.js"),[])});st({id:"r",extensions:[".r",".rhistory",".rmd",".rprofile",".rt"],aliases:["R","r"],loader:()=>Qe(()=>import("./r-CdQndTaG.js"),[])});st({id:"razor",extensions:[".cshtml"],aliases:["Razor","razor"],mimetypes:["text/x-cshtml"],loader:()=>Qe(()=>import("./razor-B9q_KOko.js"),[])});st({id:"redis",extensions:[".redis"],aliases:["redis"],loader:()=>Qe(()=>import("./redis-CVwtpugi.js"),[])});st({id:"redshift",extensions:[],aliases:["Redshift","redshift"],loader:()=>Qe(()=>import("./redshift-25W9uPmb.js"),[])});st({id:"restructuredtext",extensions:[".rst"],aliases:["reStructuredText","restructuredtext"],loader:()=>Qe(()=>import("./restructuredtext-DfzH4Xui.js"),[])});st({id:"ruby",extensions:[".rb",".rbx",".rjs",".gemspec",".pp"],filenames:["rakefile","Gemfile"],aliases:["Ruby","rb"],loader:()=>Qe(()=>import("./ruby-Cp1zYvxS.js"),[])});st({id:"rust",extensions:[".rs",".rlib"],aliases:["Rust","rust"],loader:()=>Qe(()=>import("./rust-D5C2fndG.js"),[])});st({id:"sb",extensions:[".sb"],aliases:["Small Basic","sb"],loader:()=>Qe(()=>import("./sb-CDntyWJ8.js"),[])});st({id:"scala",extensions:[".scala",".sc",".sbt"],aliases:["Scala","scala","SBT","Sbt","sbt","Dotty","dotty"],mimetypes:["text/x-scala-source","text/x-scala","text/x-sbt","text/x-dotty"],loader:()=>Qe(()=>import("./scala-BoFRg7Ot.js"),[])});st({id:"scheme",extensions:[".scm",".ss",".sch",".rkt"],aliases:["scheme","Scheme"],loader:()=>Qe(()=>import("./scheme-Bio4gycK.js"),[])});st({id:"scss",extensions:[".scss"],aliases:["Sass","sass","scss"],mimetypes:["text/x-scss","text/scss"],loader:()=>Qe(()=>import("./scss-4Ik7cdeQ.js"),[])});st({id:"shell",extensions:[".sh",".bash"],aliases:["Shell","sh"],loader:()=>Qe(()=>import("./shell-CX-rkNHf.js"),[])});st({id:"sol",extensions:[".sol"],aliases:["sol","solidity","Solidity"],loader:()=>Qe(()=>import("./solidity-Tw7wswEv.js"),[])});st({id:"aes",extensions:[".aes"],aliases:["aes","sophia","Sophia"],loader:()=>Qe(()=>import("./sophia-C5WLch3f.js"),[])});st({id:"sparql",extensions:[".rq"],aliases:["sparql","SPARQL"],loader:()=>Qe(()=>import("./sparql-DHaeiCBh.js"),[])});st({id:"sql",extensions:[".sql"],aliases:["SQL"],loader:()=>Qe(()=>import("./sql-CCSDG5nI.js"),[])});st({id:"st",extensions:[".st",".iecst",".iecplc",".lc3lib",".TcPOU",".TcDUT",".TcGVL",".TcIO"],aliases:["StructuredText","scl","stl"],loader:()=>Qe(()=>import("./st-pnP8ivHi.js"),[])});st({id:"swift",aliases:["Swift","swift"],extensions:[".swift"],mimetypes:["text/swift"],loader:()=>Qe(()=>import("./swift-DwJ7jVG9.js"),[])});st({id:"systemverilog",extensions:[".sv",".svh"],aliases:["SV","sv","SystemVerilog","systemverilog"],loader:()=>Qe(()=>import("./systemverilog-B9Xyijhd.js"),[])});st({id:"verilog",extensions:[".v",".vh"],aliases:["V","v","Verilog","verilog"],loader:()=>Qe(()=>import("./systemverilog-B9Xyijhd.js"),[])});st({id:"tcl",extensions:[".tcl"],aliases:["tcl","Tcl","tcltk","TclTk","tcl/tk","Tcl/Tk"],loader:()=>Qe(()=>import("./tcl-DnHyzjbg.js"),[])});st({id:"twig",extensions:[".twig"],aliases:["Twig","twig"],mimetypes:["text/x-twig"],loader:()=>Qe(()=>import("./twig-CPajHgWi.js"),[])});st({id:"typescript",extensions:[".ts",".tsx",".cts",".mts"],aliases:["TypeScript","ts","typescript"],mimetypes:["text/typescript"],loader:()=>Qe(()=>import("./typescript-CnyvA8fK.js"),[])});st({id:"typespec",extensions:[".tsp"],aliases:["TypeSpec"],loader:()=>Qe(()=>import("./typespec-D-MeaMDU.js"),[])});st({id:"vb",extensions:[".vb"],aliases:["Visual Basic","vb"],loader:()=>Qe(()=>import("./vb-DgyLZaXg.js"),[])});st({id:"wgsl",extensions:[".wgsl"],aliases:["WebGPU Shading Language","WGSL","wgsl"],loader:()=>Qe(()=>import("./wgsl-BIv9DU6q.js"),[])});st({id:"xml",extensions:[".xml",".xsd",".dtd",".ascx",".csproj",".config",".props",".targets",".wxi",".wxl",".wxs",".xaml",".svg",".svgz",".opf",".xslt",".xsl"],firstLine:"(\\<\\?xml.*)|(\\<svg)|(\\<\\!doctype\\s+svg)",aliases:["XML","xml"],mimetypes:["text/xml","application/xml","application/xaml+xml","application/xml-dtd"],loader:()=>Qe(()=>import("./xml-1idHpC7j.js"),[])});st({id:"yaml",extensions:[".yaml",".yml"],aliases:["YAML","yaml","YML","yml"],mimetypes:["application/x-yaml","text/x-yaml"],loader:()=>Qe(()=>import("./yaml-DmAcRip2.js"),[])});/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var Ngt=Object.defineProperty,Tgt=Object.getOwnPropertyDescriptor,Rgt=Object.getOwnPropertyNames,Agt=Object.prototype.hasOwnProperty,Mgt=(n,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Rgt(e))!Agt.call(n,s)&&s!==t&&Ngt(n,s,{get:()=>e[s],enumerable:!(i=Tgt(e,s))||i.enumerable});return n},Pgt=(n,e,t)=>(Mgt(n,e,"default"),t),Kx={};Pgt(Kx,rT);var TJ=class{constructor(e,t,i){this._onDidChange=new Kx.Emitter,this._languageId=e,this.setOptions(t),this.setModeConfiguration(i)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get modeConfiguration(){return this._modeConfiguration}get diagnosticsOptions(){return this.options}get options(){return this._options}setOptions(e){this._options=e||Object.create(null),this._onDidChange.fire(this)}setDiagnosticsOptions(e){this.setOptions(e)}setModeConfiguration(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)}},RJ={validate:!0,lint:{compatibleVendorPrefixes:"ignore",vendorPrefix:"warning",duplicateProperties:"warning",emptyRules:"warning",importStatement:"ignore",boxModel:"ignore",universalSelector:"ignore",zeroUnits:"ignore",fontFaceProperties:"warning",hexColorLength:"error",argumentsInColorFunction:"error",unknownProperties:"warning",ieHack:"ignore",unknownVendorSpecificProperties:"ignore",propertyIgnoredDueToDisplay:"warning",important:"ignore",float:"ignore",idSelector:"ignore"},data:{useDefaultDataProvider:!0},format:{newlineBetweenSelectors:!0,newlineBetweenRules:!0,spaceAroundSelectorSeparator:!1,braceStyle:"collapse",maxPreserveNewLines:void 0,preserveNewLines:!0}},AJ={completionItems:!0,hovers:!0,documentSymbols:!0,definitions:!0,references:!0,documentHighlights:!0,rename:!0,colors:!0,foldingRanges:!0,diagnostics:!0,selectionRanges:!0,documentFormattingEdits:!0,documentRangeFormattingEdits:!0},mxe=new TJ("css",RJ,AJ),_xe=new TJ("scss",RJ,AJ),vxe=new TJ("less",RJ,AJ);Kx.languages.css={cssDefaults:mxe,lessDefaults:vxe,scssDefaults:_xe};function MJ(){return Qe(()=>import("./cssMode-CmknqZXT.js"),[])}Kx.languages.onLanguage("less",()=>{MJ().then(n=>n.setupMode(vxe))});Kx.languages.onLanguage("scss",()=>{MJ().then(n=>n.setupMode(_xe))});Kx.languages.onLanguage("css",()=>{MJ().then(n=>n.setupMode(mxe))});/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var Ogt=Object.defineProperty,Fgt=Object.getOwnPropertyDescriptor,Bgt=Object.getOwnPropertyNames,Wgt=Object.prototype.hasOwnProperty,Hgt=(n,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Bgt(e))!Wgt.call(n,s)&&s!==t&&Ogt(n,s,{get:()=>e[s],enumerable:!(i=Fgt(e,s))||i.enumerable});return n},Vgt=(n,e,t)=>(Hgt(n,e,"default"),t),$B={};Vgt($B,rT);var zgt=class{constructor(e,t,i){this._onDidChange=new $B.Emitter,this._languageId=e,this.setOptions(t),this.setModeConfiguration(i)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get options(){return this._options}get modeConfiguration(){return this._modeConfiguration}setOptions(e){this._options=e||Object.create(null),this._onDidChange.fire(this)}setModeConfiguration(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)}},Ugt={tabSize:4,insertSpaces:!1,wrapLineLength:120,unformatted:'default": "a, abbr, acronym, b, bdo, big, br, button, cite, code, dfn, em, i, img, input, kbd, label, map, object, q, samp, select, small, span, strong, sub, sup, textarea, tt, var',contentUnformatted:"pre",indentInnerHtml:!1,preserveNewLines:!0,maxPreserveNewLines:void 0,indentHandlebars:!1,endWithNewline:!1,extraLiners:"head, body, /html",wrapAttributes:"auto"},jB={format:Ugt,suggest:{},data:{useDefaultDataProvider:!0}};function KB(n){return{completionItems:!0,hovers:!0,documentSymbols:!0,links:!0,documentHighlights:!0,rename:!0,colors:!0,foldingRanges:!0,selectionRanges:!0,diagnostics:n===CE,documentFormattingEdits:n===CE,documentRangeFormattingEdits:n===CE}}var CE="html",Zde="handlebars",Xde="razor",bxe=qB(CE,jB,KB(CE)),$gt=bxe.defaults,wxe=qB(Zde,jB,KB(Zde)),jgt=wxe.defaults,Cxe=qB(Xde,jB,KB(Xde)),Kgt=Cxe.defaults;$B.languages.html={htmlDefaults:$gt,razorDefaults:Kgt,handlebarDefaults:jgt,htmlLanguageService:bxe,handlebarLanguageService:wxe,razorLanguageService:Cxe,registerHTMLLanguageService:qB};function qgt(){return Qe(()=>import("./htmlMode-BN9UOpNn.js"),[])}function qB(n,e=jB,t=KB(n)){const i=new zgt(n,e,t);let s;const r=$B.languages.onLanguage(n,async()=>{s=(await qgt()).setupMode(i)});return{defaults:i,dispose(){r.dispose(),s==null||s.dispose(),s=void 0}}}/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var Ggt=Object.defineProperty,Ygt=Object.getOwnPropertyDescriptor,Zgt=Object.getOwnPropertyNames,Xgt=Object.prototype.hasOwnProperty,Qgt=(n,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Zgt(e))!Xgt.call(n,s)&&s!==t&&Ggt(n,s,{get:()=>e[s],enumerable:!(i=Ygt(e,s))||i.enumerable});return n},Jgt=(n,e,t)=>(Qgt(n,e,"default"),t),oT={};Jgt(oT,rT);var ept=class{constructor(e,t,i){this._onDidChange=new oT.Emitter,this._languageId=e,this.setDiagnosticsOptions(t),this.setModeConfiguration(i)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get modeConfiguration(){return this._modeConfiguration}get diagnosticsOptions(){return this._diagnosticsOptions}setDiagnosticsOptions(e){this._diagnosticsOptions=e||Object.create(null),this._onDidChange.fire(this)}setModeConfiguration(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)}},tpt={validate:!0,allowComments:!0,schemas:[],enableSchemaRequest:!1,schemaRequest:"warning",schemaValidation:"warning",comments:"error",trailingCommas:"error"},ipt={documentFormattingEdits:!0,documentRangeFormattingEdits:!0,completionItems:!0,hovers:!0,documentSymbols:!0,tokens:!0,colors:!0,foldingRanges:!0,diagnostics:!0,selectionRanges:!0},yxe=new ept("json",tpt,ipt),npt=()=>Sxe().then(n=>n.getWorker());oT.languages.json={jsonDefaults:yxe,getWorker:npt};function Sxe(){return Qe(()=>import("./jsonMode-6zXKFLLq.js"),[])}oT.languages.register({id:"json",extensions:[".json",".bowerrc",".jshintrc",".jscsrc",".eslintrc",".babelrc",".har"],aliases:["JSON","json"],mimetypes:["application/json"]});oT.languages.onLanguage("json",()=>{Sxe().then(n=>n.setupMode(yxe))});/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var spt=Object.defineProperty,rpt=Object.getOwnPropertyDescriptor,opt=Object.getOwnPropertyNames,apt=Object.prototype.hasOwnProperty,lpt=(n,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of opt(e))!apt.call(n,s)&&s!==t&&spt(n,s,{get:()=>e[s],enumerable:!(i=rpt(e,s))||i.enumerable});return n},cpt=(n,e,t)=>(lpt(n,e,"default"),t),dpt="5.4.5",JS={};cpt(JS,rT);var xxe=(n=>(n[n.None=0]="None",n[n.CommonJS=1]="CommonJS",n[n.AMD=2]="AMD",n[n.UMD=3]="UMD",n[n.System=4]="System",n[n.ES2015=5]="ES2015",n[n.ESNext=99]="ESNext",n))(xxe||{}),Lxe=(n=>(n[n.None=0]="None",n[n.Preserve=1]="Preserve",n[n.React=2]="React",n[n.ReactNative=3]="ReactNative",n[n.ReactJSX=4]="ReactJSX",n[n.ReactJSXDev=5]="ReactJSXDev",n))(Lxe||{}),kxe=(n=>(n[n.CarriageReturnLineFeed=0]="CarriageReturnLineFeed",n[n.LineFeed=1]="LineFeed",n))(kxe||{}),Exe=(n=>(n[n.ES3=0]="ES3",n[n.ES5=1]="ES5",n[n.ES2015=2]="ES2015",n[n.ES2016=3]="ES2016",n[n.ES2017=4]="ES2017",n[n.ES2018=5]="ES2018",n[n.ES2019=6]="ES2019",n[n.ES2020=7]="ES2020",n[n.ESNext=99]="ESNext",n[n.JSON=100]="JSON",n[n.Latest=99]="Latest",n))(Exe||{}),Ixe=(n=>(n[n.Classic=1]="Classic",n[n.NodeJs=2]="NodeJs",n))(Ixe||{}),Dxe=class{constructor(n,e,t,i,s){this._onDidChange=new JS.Emitter,this._onDidExtraLibsChange=new JS.Emitter,this._extraLibs=Object.create(null),this._removedExtraLibs=Object.create(null),this._eagerModelSync=!1,this.setCompilerOptions(n),this.setDiagnosticsOptions(e),this.setWorkerOptions(t),this.setInlayHintsOptions(i),this.setModeConfiguration(s),this._onDidExtraLibsChangeTimeout=-1}get onDidChange(){return this._onDidChange.event}get onDidExtraLibsChange(){return this._onDidExtraLibsChange.event}get modeConfiguration(){return this._modeConfiguration}get workerOptions(){return this._workerOptions}get inlayHintsOptions(){return this._inlayHintsOptions}getExtraLibs(){return this._extraLibs}addExtraLib(n,e){let t;if(typeof e>"u"?t=`ts:extralib-${Math.random().toString(36).substring(2,15)}`:t=e,this._extraLibs[t]&&this._extraLibs[t].content===n)return{dispose:()=>{}};let i=1;return this._removedExtraLibs[t]&&(i=this._removedExtraLibs[t]+1),this._extraLibs[t]&&(i=this._extraLibs[t].version+1),this._extraLibs[t]={content:n,version:i},this._fireOnDidExtraLibsChangeSoon(),{dispose:()=>{let s=this._extraLibs[t];s&&s.version===i&&(delete this._extraLibs[t],this._removedExtraLibs[t]=i,this._fireOnDidExtraLibsChangeSoon())}}}setExtraLibs(n){for(const e in this._extraLibs)this._removedExtraLibs[e]=this._extraLibs[e].version;if(this._extraLibs=Object.create(null),n&&n.length>0)for(const e of n){const t=e.filePath||`ts:extralib-${Math.random().toString(36).substring(2,15)}`,i=e.content;let s=1;this._removedExtraLibs[t]&&(s=this._removedExtraLibs[t]+1),this._extraLibs[t]={content:i,version:s}}this._fireOnDidExtraLibsChangeSoon()}_fireOnDidExtraLibsChangeSoon(){this._onDidExtraLibsChangeTimeout===-1&&(this._onDidExtraLibsChangeTimeout=window.setTimeout(()=>{this._onDidExtraLibsChangeTimeout=-1,this._onDidExtraLibsChange.fire(void 0)},0))}getCompilerOptions(){return this._compilerOptions}setCompilerOptions(n){this._compilerOptions=n||Object.create(null),this._onDidChange.fire(void 0)}getDiagnosticsOptions(){return this._diagnosticsOptions}setDiagnosticsOptions(n){this._diagnosticsOptions=n||Object.create(null),this._onDidChange.fire(void 0)}setWorkerOptions(n){this._workerOptions=n||Object.create(null),this._onDidChange.fire(void 0)}setInlayHintsOptions(n){this._inlayHintsOptions=n||Object.create(null),this._onDidChange.fire(void 0)}setMaximumWorkerIdleTime(n){}setEagerModelSync(n){this._eagerModelSync=n}getEagerModelSync(){return this._eagerModelSync}setModeConfiguration(n){this._modeConfiguration=n||Object.create(null),this._onDidChange.fire(void 0)}},upt=dpt,Nxe={completionItems:!0,hovers:!0,documentSymbols:!0,definitions:!0,references:!0,documentHighlights:!0,rename:!0,diagnostics:!0,documentRangeFormattingEdits:!0,signatureHelp:!0,onTypeFormattingEdits:!0,codeActions:!0,inlayHints:!0},Txe=new Dxe({allowNonTsExtensions:!0,target:99},{noSemanticValidation:!1,noSyntaxValidation:!1,onlyVisible:!1},{},{},Nxe),Rxe=new Dxe({allowNonTsExtensions:!0,allowJs:!0,target:99},{noSemanticValidation:!0,noSyntaxValidation:!1,onlyVisible:!1},{},{},Nxe),hpt=()=>GB().then(n=>n.getTypeScriptWorker()),fpt=()=>GB().then(n=>n.getJavaScriptWorker());JS.languages.typescript={ModuleKind:xxe,JsxEmit:Lxe,NewLineKind:kxe,ScriptTarget:Exe,ModuleResolutionKind:Ixe,typescriptVersion:upt,typescriptDefaults:Txe,javascriptDefaults:Rxe,getTypeScriptWorker:hpt,getJavaScriptWorker:fpt};function GB(){return Qe(()=>import("./tsMode-CyZ9GnYo.js"),[])}JS.languages.onLanguage("typescript",()=>GB().then(n=>n.setupTypeScript(Txe)));JS.languages.onLanguage("javascript",()=>GB().then(n=>n.setupJavaScript(Rxe)));class gpt extends Ho{constructor(){super({id:"diffEditor.toggleCollapseUnchangedRegions",title:lt("toggleCollapseUnchangedRegions","Toggle Collapse Unchanged Regions"),icon:ye.map,toggled:he.has("config.diffEditor.hideUnchangedRegions.enabled"),precondition:he.has("isInDiffEditor"),menu:{when:he.has("isInDiffEditor"),id:ze.EditorTitle,order:22,group:"navigation"}})}run(e,...t){const i=e.get(Tt),s=!i.getValue("diffEditor.hideUnchangedRegions.enabled");i.updateValue("diffEditor.hideUnchangedRegions.enabled",s)}}class Axe extends Ho{constructor(){super({id:"diffEditor.toggleShowMovedCodeBlocks",title:lt("toggleShowMovedCodeBlocks","Toggle Show Moved Code Blocks"),precondition:he.has("isInDiffEditor")})}run(e,...t){const i=e.get(Tt),s=!i.getValue("diffEditor.experimental.showMoves");i.updateValue("diffEditor.experimental.showMoves",s)}}class Mxe extends Ho{constructor(){super({id:"diffEditor.toggleUseInlineViewWhenSpaceIsLimited",title:lt("toggleUseInlineViewWhenSpaceIsLimited","Toggle Use Inline View When Space Is Limited"),precondition:he.has("isInDiffEditor")})}run(e,...t){const i=e.get(Tt),s=!i.getValue("diffEditor.useInlineViewWhenSpaceIsLimited");i.updateValue("diffEditor.useInlineViewWhenSpaceIsLimited",s)}}const aT=lt("diffEditor","Diff Editor");class ppt extends qu{constructor(){super({id:"diffEditor.switchSide",title:lt("switchSide","Switch Side"),icon:ye.arrowSwap,precondition:he.has("isInDiffEditor"),f1:!0,category:aT})}runEditorCommand(e,t,i){const s=qx(e);if(s instanceof ip){if(i&&i.dryRun)return{destinationSelection:s.mapToOtherSide().destinationSelection};s.switchSide()}}}class mpt extends qu{constructor(){super({id:"diffEditor.exitCompareMove",title:lt("exitCompareMove","Exit Compare Move"),icon:ye.close,precondition:F.comparingMovedCode,f1:!1,category:aT,keybinding:{weight:1e4,primary:9}})}runEditorCommand(e,t,...i){const s=qx(e);s instanceof ip&&s.exitCompareMove()}}class _pt extends qu{constructor(){super({id:"diffEditor.collapseAllUnchangedRegions",title:lt("collapseAllUnchangedRegions","Collapse All Unchanged Regions"),icon:ye.fold,precondition:he.has("isInDiffEditor"),f1:!0,category:aT})}runEditorCommand(e,t,...i){const s=qx(e);s instanceof ip&&s.collapseAllUnchangedRegions()}}class vpt extends qu{constructor(){super({id:"diffEditor.showAllUnchangedRegions",title:lt("showAllUnchangedRegions","Show All Unchanged Regions"),icon:ye.unfold,precondition:he.has("isInDiffEditor"),f1:!0,category:aT})}runEditorCommand(e,t,...i){const s=qx(e);s instanceof ip&&s.showAllUnchangedRegions()}}class sK extends Ho{constructor(){super({id:"diffEditor.revert",title:lt("revert","Revert"),f1:!1,category:aT})}run(e,t){const i=bpt(e,t.originalUri,t.modifiedUri);i instanceof ip&&i.revertRangeMappings(t.mapping.innerChanges??[])}}const Pxe=lt("accessibleDiffViewer","Accessible Diff Viewer"),X4=class X4 extends Ho{constructor(){super({id:X4.id,title:lt("editor.action.accessibleDiffViewer.next","Go to Next Difference"),category:Pxe,precondition:he.has("isInDiffEditor"),keybinding:{primary:65,weight:100},f1:!0})}run(e){const t=qx(e);t==null||t.accessibleDiffViewerNext()}};X4.id="editor.action.accessibleDiffViewer.next";let AD=X4;const Q4=class Q4 extends Ho{constructor(){super({id:Q4.id,title:lt("editor.action.accessibleDiffViewer.prev","Go to Previous Difference"),category:Pxe,precondition:he.has("isInDiffEditor"),keybinding:{primary:1089,weight:100},f1:!0})}run(e){const t=qx(e);t==null||t.accessibleDiffViewerPrev()}};Q4.id="editor.action.accessibleDiffViewer.prev";let XO=Q4;function bpt(n,e,t){return n.get(ri).listDiffEditors().find(r=>{var l,c;const o=r.getModifiedEditor(),a=r.getOriginalEditor();return o&&((l=o.getModel())==null?void 0:l.uri.toString())===t.toString()&&a&&((c=a.getModel())==null?void 0:c.uri.toString())===e.toString()})||null}function qx(n){const t=n.get(ri).listDiffEditors(),i=vr();if(i)for(const s of t){const r=s.getContainerDomNode();if(wpt(r,i))return s}return null}function wpt(n,e){let t=e;for(;t;){if(t===n)return!0;t=t.parentElement}return!1}Bi(gpt);Bi(Axe);Bi(Mxe);Us.appendMenuItem(ze.EditorTitle,{command:{id:new Mxe().desc.id,title:v("useInlineViewWhenSpaceIsLimited","Use Inline View When Space Is Limited"),toggled:he.has("config.diffEditor.useInlineViewWhenSpaceIsLimited"),precondition:he.has("isInDiffEditor")},order:11,group:"1_diff",when:he.and(F.diffEditorRenderSideBySideInlineBreakpointReached,he.has("isInDiffEditor"))});Us.appendMenuItem(ze.EditorTitle,{command:{id:new Axe().desc.id,title:v("showMoves","Show Moved Code Blocks"),icon:ye.move,toggled:Dx.create("config.diffEditor.experimental.showMoves",!0),precondition:he.has("isInDiffEditor")},order:10,group:"1_diff",when:he.has("isInDiffEditor")});Bi(sK);for(const n of[{icon:ye.arrowRight,key:F.diffEditorInlineMode.toNegated()},{icon:ye.discard,key:F.diffEditorInlineMode}])Us.appendMenuItem(ze.DiffEditorHunkToolbar,{command:{id:new sK().desc.id,title:v("revertHunk","Revert Block"),icon:n.icon},when:he.and(F.diffEditorModifiedWritable,n.key),order:5,group:"primary"}),Us.appendMenuItem(ze.DiffEditorSelectionToolbar,{command:{id:new sK().desc.id,title:v("revertSelection","Revert Selection"),icon:n.icon},when:he.and(F.diffEditorModifiedWritable,n.key),order:5,group:"primary"});Bi(ppt);Bi(mpt);Bi(_pt);Bi(vpt);Us.appendMenuItem(ze.EditorTitle,{command:{id:AD.id,title:v("Open Accessible Diff Viewer","Open Accessible Diff Viewer"),precondition:he.has("isInDiffEditor")},order:10,group:"2_diff",when:he.and(F.accessibleDiffViewerVisible.negate(),he.has("isInDiffEditor"))});Gt.registerCommandAlias("editor.action.diffReview.next",AD.id);Bi(AD);Gt.registerCommandAlias("editor.action.diffReview.prev",XO.id);Bi(XO);var Cpt=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},ypt=function(n,e){return function(t,i){e(t,i,n)}},rK;const YB=new Re("selectionAnchorSet",!1);var dw;let z_=(dw=class{static get(e){return e.getContribution(rK.ID)}constructor(e,t){this.editor=e,this.selectionAnchorSetContextKey=YB.bindTo(t),this.modelChangeListener=e.onDidChangeModel(()=>this.selectionAnchorSetContextKey.reset())}setSelectionAnchor(){if(this.editor.hasModel()){const e=this.editor.getPosition();this.editor.changeDecorations(t=>{this.decorationId&&t.removeDecoration(this.decorationId),this.decorationId=t.addDecoration($e.fromPositions(e,e),{description:"selection-anchor",stickiness:1,hoverMessage:new Rr().appendText(v("selectionAnchor","Selection Anchor")),className:"selection-anchor"})}),this.selectionAnchorSetContextKey.set(!!this.decorationId),Bo(v("anchorSet","Anchor set at {0}:{1}",e.lineNumber,e.column))}}goToSelectionAnchor(){if(this.editor.hasModel()&&this.decorationId){const e=this.editor.getModel().getDecorationRange(this.decorationId);e&&this.editor.setPosition(e.getStartPosition())}}selectFromAnchorToCursor(){if(this.editor.hasModel()&&this.decorationId){const e=this.editor.getModel().getDecorationRange(this.decorationId);if(e){const t=this.editor.getPosition();this.editor.setSelection($e.fromPositions(e.getStartPosition(),t)),this.cancelSelectionAnchor()}}}cancelSelectionAnchor(){if(this.decorationId){const e=this.decorationId;this.editor.changeDecorations(t=>{t.removeDecoration(e),this.decorationId=void 0}),this.selectionAnchorSetContextKey.set(!1)}}dispose(){this.cancelSelectionAnchor(),this.modelChangeListener.dispose()}},rK=dw,dw.ID="editor.contrib.selectionAnchorController",dw);z_=rK=Cpt([ypt(1,at)],z_);class Spt extends Oe{constructor(){super({id:"editor.action.setSelectionAnchor",label:v("setSelectionAnchor","Set Selection Anchor"),alias:"Set Selection Anchor",precondition:void 0,kbOpts:{kbExpr:F.editorTextFocus,primary:as(2089,2080),weight:100}})}async run(e,t){var i;(i=z_.get(t))==null||i.setSelectionAnchor()}}class xpt extends Oe{constructor(){super({id:"editor.action.goToSelectionAnchor",label:v("goToSelectionAnchor","Go to Selection Anchor"),alias:"Go to Selection Anchor",precondition:YB})}async run(e,t){var i;(i=z_.get(t))==null||i.goToSelectionAnchor()}}class Lpt extends Oe{constructor(){super({id:"editor.action.selectFromAnchorToCursor",label:v("selectFromAnchorToCursor","Select from Anchor to Cursor"),alias:"Select from Anchor to Cursor",precondition:YB,kbOpts:{kbExpr:F.editorTextFocus,primary:as(2089,2089),weight:100}})}async run(e,t){var i;(i=z_.get(t))==null||i.selectFromAnchorToCursor()}}class kpt extends Oe{constructor(){super({id:"editor.action.cancelSelectionAnchor",label:v("cancelSelectionAnchor","Cancel Selection Anchor"),alias:"Cancel Selection Anchor",precondition:YB,kbOpts:{kbExpr:F.editorTextFocus,primary:9,weight:100}})}async run(e,t){var i;(i=z_.get(t))==null||i.cancelSelectionAnchor()}}Xt(z_.ID,z_,4);we(Spt);we(xpt);we(Lpt);we(kpt);const Ept=B("editorOverviewRuler.bracketMatchForeground","#A0A0A0",v("overviewRulerBracketMatchForeground","Overview ruler marker color for matching brackets."));class Ipt extends Oe{constructor(){super({id:"editor.action.jumpToBracket",label:v("smartSelect.jumpBracket","Go to Bracket"),alias:"Go to Bracket",precondition:void 0,kbOpts:{kbExpr:F.editorTextFocus,primary:3165,weight:100}})}run(e,t){var i;(i=y0.get(t))==null||i.jumpToBracket()}}class Dpt extends Oe{constructor(){super({id:"editor.action.selectToBracket",label:v("smartSelect.selectToBracket","Select to Bracket"),alias:"Select to Bracket",precondition:void 0,metadata:{description:lt("smartSelect.selectToBracketDescription","Select the text inside and including the brackets or curly braces"),args:[{name:"args",schema:{type:"object",properties:{selectBrackets:{type:"boolean",default:!0}}}}]}})}run(e,t,i){var r;let s=!0;i&&i.selectBrackets===!1&&(s=!1),(r=y0.get(t))==null||r.selectToBracket(s)}}class Npt extends Oe{constructor(){super({id:"editor.action.removeBrackets",label:v("smartSelect.removeBrackets","Remove Brackets"),alias:"Remove Brackets",precondition:void 0,kbOpts:{kbExpr:F.editorTextFocus,primary:2561,weight:100}})}run(e,t){var i;(i=y0.get(t))==null||i.removeBrackets(this.id)}}class Tpt{constructor(e,t,i){this.position=e,this.brackets=t,this.options=i}}const Zp=class Zp extends ee{static get(e){return e.getContribution(Zp.ID)}constructor(e){super(),this._editor=e,this._lastBracketsData=[],this._lastVersionId=0,this._decorations=this._editor.createDecorationsCollection(),this._updateBracketsSoon=this._register(new yi(()=>this._updateBrackets(),50)),this._matchBrackets=this._editor.getOption(72),this._updateBracketsSoon.schedule(),this._register(e.onDidChangeCursorPosition(t=>{this._matchBrackets!=="never"&&this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModelContent(t=>{this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModel(t=>{this._lastBracketsData=[],this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModelLanguageConfiguration(t=>{this._lastBracketsData=[],this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeConfiguration(t=>{t.hasChanged(72)&&(this._matchBrackets=this._editor.getOption(72),this._decorations.clear(),this._lastBracketsData=[],this._lastVersionId=0,this._updateBracketsSoon.schedule())})),this._register(e.onDidBlurEditorWidget(()=>{this._updateBracketsSoon.schedule()})),this._register(e.onDidFocusEditorWidget(()=>{this._updateBracketsSoon.schedule()}))}jumpToBracket(){if(!this._editor.hasModel())return;const e=this._editor.getModel(),t=this._editor.getSelections().map(i=>{const s=i.getStartPosition(),r=e.bracketPairs.matchBracket(s);let o=null;if(r)r[0].containsPosition(s)&&!r[1].containsPosition(s)?o=r[1].getStartPosition():r[1].containsPosition(s)&&(o=r[0].getStartPosition());else{const a=e.bracketPairs.findEnclosingBrackets(s);if(a)o=a[1].getStartPosition();else{const l=e.bracketPairs.findNextBracket(s);l&&l.range&&(o=l.range.getStartPosition())}}return o?new $e(o.lineNumber,o.column,o.lineNumber,o.column):new $e(s.lineNumber,s.column,s.lineNumber,s.column)});this._editor.setSelections(t),this._editor.revealRange(t[0])}selectToBracket(e){if(!this._editor.hasModel())return;const t=this._editor.getModel(),i=[];this._editor.getSelections().forEach(s=>{const r=s.getStartPosition();let o=t.bracketPairs.matchBracket(r);if(!o&&(o=t.bracketPairs.findEnclosingBrackets(r),!o)){const c=t.bracketPairs.findNextBracket(r);c&&c.range&&(o=t.bracketPairs.matchBracket(c.range.getStartPosition()))}let a=null,l=null;if(o){o.sort(M.compareRangesUsingStarts);const[c,d]=o;if(a=e?c.getStartPosition():c.getEndPosition(),l=e?d.getEndPosition():d.getStartPosition(),d.containsPosition(r)){const u=a;a=l,l=u}}a&&l&&i.push(new $e(a.lineNumber,a.column,l.lineNumber,l.column))}),i.length>0&&(this._editor.setSelections(i),this._editor.revealRange(i[0]))}removeBrackets(e){if(!this._editor.hasModel())return;const t=this._editor.getModel();this._editor.getSelections().forEach(i=>{const s=i.getPosition();let r=t.bracketPairs.matchBracket(s);r||(r=t.bracketPairs.findEnclosingBrackets(s)),r&&(this._editor.pushUndoStop(),this._editor.executeEdits(e,[{range:r[0],text:""},{range:r[1],text:""}]),this._editor.pushUndoStop())})}_updateBrackets(){if(this._matchBrackets==="never")return;this._recomputeBrackets();const e=[];let t=0;for(const i of this._lastBracketsData){const s=i.brackets;s&&(e[t++]={range:s[0],options:i.options},e[t++]={range:s[1],options:i.options})}this._decorations.set(e)}_recomputeBrackets(){if(!this._editor.hasModel()||!this._editor.hasWidgetFocus()){this._lastBracketsData=[],this._lastVersionId=0;return}const e=this._editor.getSelections();if(e.length>100){this._lastBracketsData=[],this._lastVersionId=0;return}const t=this._editor.getModel(),i=t.getVersionId();let s=[];this._lastVersionId===i&&(s=this._lastBracketsData);const r=[];let o=0;for(let u=0,h=e.length;u<h;u++){const f=e[u];f.isEmpty()&&(r[o++]=f.getStartPosition())}r.length>1&&r.sort(Y.compare);const a=[];let l=0,c=0;const d=s.length;for(let u=0,h=r.length;u<h;u++){const f=r[u];for(;c<d&&s[c].position.isBefore(f);)c++;if(c<d&&s[c].position.equals(f))a[l++]=s[c];else{let g=t.bracketPairs.matchBracket(f,20),p=Zp._DECORATION_OPTIONS_WITH_OVERVIEW_RULER;!g&&this._matchBrackets==="always"&&(g=t.bracketPairs.findEnclosingBrackets(f,20),p=Zp._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER),a[l++]=new Tpt(f,g,p)}}this._lastBracketsData=a,this._lastVersionId=i}};Zp.ID="editor.contrib.bracketMatchingController",Zp._DECORATION_OPTIONS_WITH_OVERVIEW_RULER=_t.register({description:"bracket-match-overview",stickiness:1,className:"bracket-match",overviewRuler:{color:Dn(Ept),position:Vl.Center}}),Zp._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER=_t.register({description:"bracket-match-no-overview",stickiness:1,className:"bracket-match"});let y0=Zp;Xt(y0.ID,y0,1);we(Dpt);we(Ipt);we(Npt);Us.appendMenuItem(ze.MenubarGoMenu,{group:"5_infile_nav",command:{id:"editor.action.jumpToBracket",title:v({key:"miGoToBracket",comment:["&& denotes a mnemonic"]},"Go to &&Bracket")},order:2});class Rpt{constructor(e,t){this._selection=e,this._isMovingLeft=t}getEditOperations(e,t){if(this._selection.startLineNumber!==this._selection.endLineNumber||this._selection.isEmpty())return;const i=this._selection.startLineNumber,s=this._selection.startColumn,r=this._selection.endColumn;if(!(this._isMovingLeft&&s===1)&&!(!this._isMovingLeft&&r===e.getLineMaxColumn(i)))if(this._isMovingLeft){const o=new M(i,s-1,i,s),a=e.getValueInRange(o);t.addEditOperation(o,null),t.addEditOperation(new M(i,r,i,r),a)}else{const o=new M(i,r,i,r+1),a=e.getValueInRange(o);t.addEditOperation(o,null),t.addEditOperation(new M(i,s,i,s),a)}}computeCursorState(e,t){return this._isMovingLeft?new $e(this._selection.startLineNumber,this._selection.startColumn-1,this._selection.endLineNumber,this._selection.endColumn-1):new $e(this._selection.startLineNumber,this._selection.startColumn+1,this._selection.endLineNumber,this._selection.endColumn+1)}}class Oxe extends Oe{constructor(e,t){super(t),this.left=e}run(e,t){if(!t.hasModel())return;const i=[],s=t.getSelections();for(const r of s)i.push(new Rpt(r,this.left));t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop()}}class Apt extends Oxe{constructor(){super(!0,{id:"editor.action.moveCarretLeftAction",label:v("caret.moveLeft","Move Selected Text Left"),alias:"Move Selected Text Left",precondition:F.writable})}}class Mpt extends Oxe{constructor(){super(!1,{id:"editor.action.moveCarretRightAction",label:v("caret.moveRight","Move Selected Text Right"),alias:"Move Selected Text Right",precondition:F.writable})}}we(Apt);we(Mpt);class Ppt extends Oe{constructor(){super({id:"editor.action.transposeLetters",label:v("transposeLetters.label","Transpose Letters"),alias:"Transpose Letters",precondition:F.writable,kbOpts:{kbExpr:F.textInputFocus,primary:0,mac:{primary:306},weight:100}})}run(e,t){if(!t.hasModel())return;const i=t.getModel(),s=[],r=t.getSelections();for(const o of r){if(!o.isEmpty())continue;const a=o.startLineNumber,l=o.startColumn,c=i.getLineMaxColumn(a);if(a===1&&(l===1||l===2&&c===2))continue;const d=l===c?o.getPosition():pi.rightPosition(i,o.getPosition().lineNumber,o.getPosition().column),u=pi.leftPosition(i,d),h=pi.leftPosition(i,u),f=i.getValueInRange(M.fromPositions(h,u)),g=i.getValueInRange(M.fromPositions(u,d)),p=M.fromPositions(h,d);s.push(new mr(p,g+f))}s.length>0&&(t.pushUndoStop(),t.executeCommands(this.id,s),t.pushUndoStop())}}we(Ppt);const ZB=function(){if(typeof crypto=="object"&&typeof crypto.randomUUID=="function")return crypto.randomUUID.bind(crypto);let n;typeof crypto=="object"&&typeof crypto.getRandomValues=="function"?n=crypto.getRandomValues.bind(crypto):n=function(i){for(let s=0;s<i.length;s++)i[s]=Math.floor(Math.random()*256);return i};const e=new Uint8Array(16),t=[];for(let i=0;i<256;i++)t.push(i.toString(16).padStart(2,"0"));return function(){n(e),e[6]=e[6]&15|64,e[8]=e[8]&63|128;let s=0,r="";return r+=t[e[s++]],r+=t[e[s++]],r+=t[e[s++]],r+=t[e[s++]],r+="-",r+=t[e[s++]],r+=t[e[s++]],r+="-",r+=t[e[s++]],r+=t[e[s++]],r+="-",r+=t[e[s++]],r+=t[e[s++]],r+="-",r+=t[e[s++]],r+=t[e[s++]],r+=t[e[s++]],r+=t[e[s++]],r+=t[e[s++]],r+=t[e[s++]],r}}();function PJ(n){return{asString:async()=>n,asFile:()=>{},value:typeof n=="string"?n:void 0}}function Opt(n,e,t){const i={id:ZB(),name:n,uri:e,data:t};return{asString:async()=>"",asFile:()=>i,value:void 0}}class Fxe{constructor(){this._entries=new Map}get size(){let e=0;for(const t of this._entries)e++;return e}has(e){return this._entries.has(this.toKey(e))}matches(e){const t=[...this._entries.keys()];return qt.some(this,([i,s])=>s.asFile())&&t.push("files"),Wxe(QO(e),t)}get(e){var t;return(t=this._entries.get(this.toKey(e)))==null?void 0:t[0]}append(e,t){const i=this._entries.get(e);i?i.push(t):this._entries.set(this.toKey(e),[t])}replace(e,t){this._entries.set(this.toKey(e),[t])}delete(e){this._entries.delete(this.toKey(e))}*[Symbol.iterator](){for(const[e,t]of this._entries)for(const i of t)yield[e,i]}toKey(e){return QO(e)}}function QO(n){return n.toLowerCase()}function Bxe(n,e){return Wxe(QO(n),e.map(QO))}function Wxe(n,e){if(n==="*/*")return e.length>0;if(e.includes(n))return!0;const t=n.match(/^([a-z]+)\/([a-z]+|\*)$/i);if(!t)return!1;const[i,s,r]=t;return r==="*"?e.some(o=>o.startsWith(s+"/")):!1}const XB=Object.freeze({create:n=>qg(n.map(e=>e.toString())).join(`\r
`),split:n=>n.split(`\r
`),parse:n=>XB.split(n).filter(e=>!e.startsWith("#"))}),bh=class bh{constructor(e){this.value=e}equals(e){return this.value===e.value}contains(e){return this.equals(e)||this.value===""||e.value.startsWith(this.value+bh.sep)}intersects(e){return this.contains(e)||e.contains(this)}append(...e){return new bh((this.value?[this.value,...e]:e).join(bh.sep))}};bh.sep=".",bh.None=new bh("@@none@@"),bh.Empty=new bh("");let cn=bh;const Qde={EDITORS:"CodeEditors",FILES:"CodeFiles"};class Fpt{}const Bpt={DragAndDropContribution:"workbench.contributions.dragAndDrop"};_n.add(Bpt.DragAndDropContribution,new Fpt);const KE=class KE{constructor(){}static getInstance(){return KE.INSTANCE}hasData(e){return e&&e===this.proto}getData(e){if(this.hasData(e))return this.data}};KE.INSTANCE=new KE;let oK=KE;function Hxe(n){const e=new Fxe;for(const t of n.items){const i=t.type;if(t.kind==="string"){const s=new Promise(r=>t.getAsString(r));e.append(i,PJ(s))}else if(t.kind==="file"){const s=t.getAsFile();s&&e.append(i,Wpt(s))}}return e}function Wpt(n){const e=n.path?Xe.parse(n.path):void 0;return Opt(n.name,e,async()=>new Uint8Array(await n.arrayBuffer()))}const Hpt=Object.freeze([Qde.EDITORS,Qde.FILES,rD.RESOURCES,rD.INTERNAL_URI_LIST]);function Vxe(n,e=!1){const t=Hxe(n),i=t.get(rD.INTERNAL_URI_LIST);if(i)t.replace(On.uriList,i);else if(e||!t.has(On.uriList)){const s=[];for(const r of n.items){const o=r.getAsFile();if(o){const a=o.path;try{a?s.push(Xe.file(a).toString()):s.push(Xe.parse(o.name,!0).toString())}catch{}}}s.length&&t.replace(On.uriList,PJ(XB.create(s)))}for(const s of Hpt)t.delete(s);return t}var OJ=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},MD=function(n,e){return function(t,i){e(t,i,n)}};class FJ{async provideDocumentPasteEdits(e,t,i,s,r){const o=await this.getEdit(i,r);if(o)return{edits:[{insertText:o.insertText,title:o.title,kind:o.kind,handledMimeType:o.handledMimeType,yieldTo:o.yieldTo}],dispose(){}}}async provideDocumentDropEdits(e,t,i,s){const r=await this.getEdit(i,s);if(r)return{edits:[{insertText:r.insertText,title:r.title,kind:r.kind,handledMimeType:r.handledMimeType,yieldTo:r.yieldTo}],dispose(){}}}}const qE=class qE extends FJ{constructor(){super(...arguments),this.kind=qE.kind,this.dropMimeTypes=[On.text],this.pasteMimeTypes=[On.text]}async getEdit(e,t){const i=e.get(On.text);if(!i||e.has(On.uriList))return;const s=await i.asString();return{handledMimeType:On.text,title:v("text.label","Insert Plain Text"),insertText:s,kind:this.kind}}};qE.id="text",qE.kind=new cn("text.plain");let S0=qE;class zxe extends FJ{constructor(){super(...arguments),this.kind=new cn("uri.absolute"),this.dropMimeTypes=[On.uriList],this.pasteMimeTypes=[On.uriList]}async getEdit(e,t){const i=await Uxe(e);if(!i.length||t.isCancellationRequested)return;let s=0;const r=i.map(({uri:a,originalText:l})=>a.scheme===mt.file?a.fsPath:(s++,l)).join(" ");let o;return s>0?o=i.length>1?v("defaultDropProvider.uriList.uris","Insert Uris"):v("defaultDropProvider.uriList.uri","Insert Uri"):o=i.length>1?v("defaultDropProvider.uriList.paths","Insert Paths"):v("defaultDropProvider.uriList.path","Insert Path"),{handledMimeType:On.uriList,insertText:r,title:o,kind:this.kind}}}let JO=class extends FJ{constructor(e){super(),this._workspaceContextService=e,this.kind=new cn("uri.relative"),this.dropMimeTypes=[On.uriList],this.pasteMimeTypes=[On.uriList]}async getEdit(e,t){const i=await Uxe(e);if(!i.length||t.isCancellationRequested)return;const s=Id(i.map(({uri:r})=>{const o=this._workspaceContextService.getWorkspaceFolder(r);return o?$Je(o.uri,r):void 0}));if(s.length)return{handledMimeType:On.uriList,insertText:s.join(" "),title:i.length>1?v("defaultDropProvider.uriList.relativePaths","Insert Relative Paths"):v("defaultDropProvider.uriList.relativePath","Insert Relative Path"),kind:this.kind}}};JO=OJ([MD(0,m0)],JO);class Vpt{constructor(){this.kind=new cn("html"),this.pasteMimeTypes=["text/html"],this._yieldTo=[{mimeType:On.text}]}async provideDocumentPasteEdits(e,t,i,s,r){var l;if(s.triggerKind!==AI.PasteAs&&!((l=s.only)!=null&&l.contains(this.kind)))return;const o=i.get("text/html"),a=await(o==null?void 0:o.asString());if(!(!a||r.isCancellationRequested))return{dispose(){},edits:[{insertText:a,yieldTo:this._yieldTo,title:v("pasteHtmlLabel","Insert HTML"),kind:this.kind}]}}}async function Uxe(n){const e=n.get(On.uriList);if(!e)return[];const t=await e.asString(),i=[];for(const s of XB.parse(t))try{i.push({uri:Xe.parse(s),originalText:s})}catch{}return i}let aK=class extends ee{constructor(e,t){super(),this._register(e.documentDropEditProvider.register("*",new S0)),this._register(e.documentDropEditProvider.register("*",new zxe)),this._register(e.documentDropEditProvider.register("*",new JO(t)))}};aK=OJ([MD(0,Be),MD(1,m0)],aK);let lK=class extends ee{constructor(e,t){super(),this._register(e.documentPasteEditProvider.register("*",new S0)),this._register(e.documentPasteEditProvider.register("*",new zxe)),this._register(e.documentPasteEditProvider.register("*",new JO(t))),this._register(e.documentPasteEditProvider.register("*",new Vpt))}};lK=OJ([MD(0,Be),MD(1,m0)],lK);const rd=class rd{constructor(){this.value="",this.pos=0}static isDigitCharacter(e){return e>=48&&e<=57}static isVariableCharacter(e){return e===95||e>=97&&e<=122||e>=65&&e<=90}text(e){this.value=e,this.pos=0}tokenText(e){return this.value.substr(e.pos,e.len)}next(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};const e=this.pos;let t=0,i=this.value.charCodeAt(e),s;if(s=rd._table[i],typeof s=="number")return this.pos+=1,{type:s,pos:e,len:1};if(rd.isDigitCharacter(i)){s=8;do t+=1,i=this.value.charCodeAt(e+t);while(rd.isDigitCharacter(i));return this.pos+=t,{type:s,pos:e,len:t}}if(rd.isVariableCharacter(i)){s=9;do i=this.value.charCodeAt(e+ ++t);while(rd.isVariableCharacter(i)||rd.isDigitCharacter(i));return this.pos+=t,{type:s,pos:e,len:t}}s=10;do t+=1,i=this.value.charCodeAt(e+t);while(!isNaN(i)&&typeof rd._table[i]>"u"&&!rd.isDigitCharacter(i)&&!rd.isVariableCharacter(i));return this.pos+=t,{type:s,pos:e,len:t}}};rd._table={36:0,58:1,44:2,123:3,125:4,92:5,47:6,124:7,43:11,45:12,63:13};let cK=rd;class Gx{constructor(){this._children=[]}appendChild(e){return e instanceof So&&this._children[this._children.length-1]instanceof So?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this}replace(e,t){const{parent:i}=e,s=i.children.indexOf(e),r=i.children.slice(0);r.splice(s,1,...t),i._children=r,function o(a,l){for(const c of a)c.parent=l,o(c.children,c)}(t,i)}get children(){return this._children}get rightMostDescendant(){return this._children.length>0?this._children[this._children.length-1].rightMostDescendant:this}get snippet(){let e=this;for(;;){if(!e)return;if(e instanceof lT)return e;e=e.parent}}toString(){return this.children.reduce((e,t)=>e+t.toString(),"")}len(){return 0}}class So extends Gx{constructor(e){super(),this.value=e}toString(){return this.value}len(){return this.value.length}clone(){return new So(this.value)}}class $xe extends Gx{}class pc extends $xe{static compareByIndex(e,t){return e.index===t.index?0:e.isFinalTabstop?1:t.isFinalTabstop||e.index<t.index?-1:e.index>t.index?1:0}constructor(e){super(),this.index=e}get isFinalTabstop(){return this.index===0}get choice(){return this._children.length===1&&this._children[0]instanceof Yx?this._children[0]:void 0}clone(){const e=new pc(this.index);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(t=>t.clone()),e}}class Yx extends Gx{constructor(){super(...arguments),this.options=[]}appendChild(e){return e instanceof So&&(e.parent=this,this.options.push(e)),this}toString(){return this.options[0].value}len(){return this.options[0].len()}clone(){const e=new Yx;return this.options.forEach(e.appendChild,e),e}}class BJ extends Gx{constructor(){super(...arguments),this.regexp=new RegExp("")}resolve(e){const t=this;let i=!1,s=e.replace(this.regexp,function(){return i=!0,t._replace(Array.prototype.slice.call(arguments,0,-2))});return!i&&this._children.some(r=>r instanceof du&&!!r.elseValue)&&(s=this._replace([])),s}_replace(e){let t="";for(const i of this._children)if(i instanceof du){let s=e[i.index]||"";s=i.resolve(s),t+=s}else t+=i.toString();return t}toString(){return""}clone(){const e=new BJ;return e.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),e._children=this.children.map(t=>t.clone()),e}}class du extends Gx{constructor(e,t,i,s){super(),this.index=e,this.shorthandName=t,this.ifValue=i,this.elseValue=s}resolve(e){return this.shorthandName==="upcase"?e?e.toLocaleUpperCase():"":this.shorthandName==="downcase"?e?e.toLocaleLowerCase():"":this.shorthandName==="capitalize"?e?e[0].toLocaleUpperCase()+e.substr(1):"":this.shorthandName==="pascalcase"?e?this._toPascalCase(e):"":this.shorthandName==="camelcase"?e?this._toCamelCase(e):"":e&&typeof this.ifValue=="string"?this.ifValue:!e&&typeof this.elseValue=="string"?this.elseValue:e||""}_toPascalCase(e){const t=e.match(/[a-z0-9]+/gi);return t?t.map(i=>i.charAt(0).toUpperCase()+i.substr(1)).join(""):e}_toCamelCase(e){const t=e.match(/[a-z0-9]+/gi);return t?t.map((i,s)=>s===0?i.charAt(0).toLowerCase()+i.substr(1):i.charAt(0).toUpperCase()+i.substr(1)).join(""):e}clone(){return new du(this.index,this.shorthandName,this.ifValue,this.elseValue)}}class PD extends $xe{constructor(e){super(),this.name=e}resolve(e){let t=e.resolve(this);return this.transform&&(t=this.transform.resolve(t||"")),t!==void 0?(this._children=[new So(t)],!0):!1}clone(){const e=new PD(this.name);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(t=>t.clone()),e}}function Jde(n,e){const t=[...n];for(;t.length>0;){const i=t.shift();if(!e(i))break;t.unshift(...i.children)}}class lT extends Gx{get placeholderInfo(){if(!this._placeholders){const e=[];let t;this.walk(function(i){return i instanceof pc&&(e.push(i),t=!t||t.index<i.index?i:t),!0}),this._placeholders={all:e,last:t}}return this._placeholders}get placeholders(){const{all:e}=this.placeholderInfo;return e}offset(e){let t=0,i=!1;return this.walk(s=>s===e?(i=!0,!1):(t+=s.len(),!0)),i?t:-1}fullLen(e){let t=0;return Jde([e],i=>(t+=i.len(),!0)),t}enclosingPlaceholders(e){const t=[];let{parent:i}=e;for(;i;)i instanceof pc&&t.push(i),i=i.parent;return t}resolveVariables(e){return this.walk(t=>(t instanceof PD&&t.resolve(e)&&(this._placeholders=void 0),!0)),this}appendChild(e){return this._placeholders=void 0,super.appendChild(e)}replace(e,t){return this._placeholders=void 0,super.replace(e,t)}clone(){const e=new lT;return this._children=this.children.map(t=>t.clone()),e}walk(e){Jde(this.children,e)}}class x0{constructor(){this._scanner=new cK,this._token={type:14,pos:0,len:0}}static escape(e){return e.replace(/\$|}|\\/g,"\\$&")}static guessNeedsClipboard(e){return/\${?CLIPBOARD/.test(e)}parse(e,t,i){const s=new lT;return this.parseFragment(e,s),this.ensureFinalTabstop(s,i??!1,t??!1),s}parseFragment(e,t){const i=t.children.length;for(this._scanner.text(e),this._token=this._scanner.next();this._parse(t););const s=new Map,r=[];t.walk(l=>(l instanceof pc&&(l.isFinalTabstop?s.set(0,void 0):!s.has(l.index)&&l.children.length>0?s.set(l.index,l.children):r.push(l)),!0));const o=(l,c)=>{const d=s.get(l.index);if(!d)return;const u=new pc(l.index);u.transform=l.transform;for(const h of d){const f=h.clone();u.appendChild(f),f instanceof pc&&s.has(f.index)&&!c.has(f.index)&&(c.add(f.index),o(f,c),c.delete(f.index))}t.replace(l,[u])},a=new Set;for(const l of r)o(l,a);return t.children.slice(i)}ensureFinalTabstop(e,t,i){(t||i&&e.placeholders.length>0)&&(e.placeholders.find(r=>r.index===0)||e.appendChild(new pc(0)))}_accept(e,t){if(e===void 0||this._token.type===e){const i=t?this._scanner.tokenText(this._token):!0;return this._token=this._scanner.next(),i}return!1}_backTo(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1}_until(e){const t=this._token;for(;this._token.type!==e;){if(this._token.type===14)return!1;if(this._token.type===5){const s=this._scanner.next();if(s.type!==0&&s.type!==4&&s.type!==5)return!1}this._token=this._scanner.next()}const i=this._scanner.value.substring(t.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),i}_parse(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)}_parseEscaped(e){let t;return(t=this._accept(5,!0))?(t=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||t,e.appendChild(new So(t)),!0):!1}_parseTabstopOrVariableName(e){let t;const i=this._token;return this._accept(0)&&(t=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(t)?new pc(Number(t)):new PD(t)),!0):this._backTo(i)}_parseComplexPlaceholder(e){let t;const i=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(8,!0))))return this._backTo(i);const r=new pc(Number(t));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(r),!0;if(!this._parse(r))return e.appendChild(new So("${"+t+":")),r.children.forEach(e.appendChild,e),!0}else if(r.index>0&&this._accept(7)){const o=new Yx;for(;;){if(this._parseChoiceElement(o)){if(this._accept(2))continue;if(this._accept(7)&&(r.appendChild(o),this._accept(4)))return e.appendChild(r),!0}return this._backTo(i),!1}}else return this._accept(6)?this._parseTransform(r)?(e.appendChild(r),!0):(this._backTo(i),!1):this._accept(4)?(e.appendChild(r),!0):this._backTo(i)}_parseChoiceElement(e){const t=this._token,i=[];for(;!(this._token.type===2||this._token.type===7);){let s;if((s=this._accept(5,!0))?s=this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||s:s=this._accept(void 0,!0),!s)return this._backTo(t),!1;i.push(s)}return i.length===0?(this._backTo(t),!1):(e.appendChild(new So(i.join(""))),!0)}_parseComplexVariable(e){let t;const i=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(9,!0))))return this._backTo(i);const r=new PD(t);if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(r),!0;if(!this._parse(r))return e.appendChild(new So("${"+t+":")),r.children.forEach(e.appendChild,e),!0}else return this._accept(6)?this._parseTransform(r)?(e.appendChild(r),!0):(this._backTo(i),!1):this._accept(4)?(e.appendChild(r),!0):this._backTo(i)}_parseTransform(e){const t=new BJ;let i="",s="";for(;!this._accept(6);){let r;if(r=this._accept(5,!0)){r=this._accept(6,!0)||r,i+=r;continue}if(this._token.type!==14){i+=this._accept(void 0,!0);continue}return!1}for(;!this._accept(6);){let r;if(r=this._accept(5,!0)){r=this._accept(5,!0)||this._accept(6,!0)||r,t.appendChild(new So(r));continue}if(!(this._parseFormatString(t)||this._parseAnything(t)))return!1}for(;!this._accept(4);){if(this._token.type!==14){s+=this._accept(void 0,!0);continue}return!1}try{t.regexp=new RegExp(i,s)}catch{return!1}return e.transform=t,!0}_parseFormatString(e){const t=this._token;if(!this._accept(0))return!1;let i=!1;this._accept(3)&&(i=!0);const s=this._accept(8,!0);if(s)if(i){if(this._accept(4))return e.appendChild(new du(Number(s))),!0;if(!this._accept(1))return this._backTo(t),!1}else return e.appendChild(new du(Number(s))),!0;else return this._backTo(t),!1;if(this._accept(6)){const r=this._accept(9,!0);return!r||!this._accept(4)?(this._backTo(t),!1):(e.appendChild(new du(Number(s),r)),!0)}else if(this._accept(11)){const r=this._until(4);if(r)return e.appendChild(new du(Number(s),void 0,r,void 0)),!0}else if(this._accept(12)){const r=this._until(4);if(r)return e.appendChild(new du(Number(s),void 0,void 0,r)),!0}else if(this._accept(13)){const r=this._until(1);if(r){const o=this._until(4);if(o)return e.appendChild(new du(Number(s),void 0,r,o)),!0}}else{const r=this._until(4);if(r)return e.appendChild(new du(Number(s),void 0,void 0,r)),!0}return this._backTo(t),!1}_parseAnything(e){return this._token.type!==14?(e.appendChild(new So(this._scanner.tokenText(this._token))),this._accept(void 0),!0):!1}}function jxe(n,e,t){var i,s;return(typeof t.insertText=="string"?t.insertText==="":t.insertText.snippet==="")?{edits:((i=t.additionalEdit)==null?void 0:i.edits)??[]}:{edits:[...e.map(r=>new Zm(n,{range:r,text:typeof t.insertText=="string"?x0.escape(t.insertText)+"$0":t.insertText.snippet,insertAsSnippet:!0})),...((s=t.additionalEdit)==null?void 0:s.edits)??[]]}}function Kxe(n){function e(o,a){return"mimeType"in o?o.mimeType===a.handledMimeType:!!a.kind&&o.kind.contains(a.kind)}const t=new Map;for(const o of n)for(const a of o.yieldTo??[])for(const l of n)if(l!==o&&e(a,l)){let c=t.get(o);c||(c=[],t.set(o,c)),c.push(l)}if(!t.size)return Array.from(n);const i=new Set,s=[];function r(o){if(!o.length)return[];const a=o[0];if(s.includes(a))return console.warn("Yield to cycle detected",a),o;if(i.has(a))return r(o.slice(1));let l=[];const c=t.get(a);return c&&(s.push(a),l=r(c),s.pop()),i.add(a),[...l,a,...r(o.slice(1))]}return r(Array.from(n))}var zpt=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Upt=function(n,e){return function(t,i){e(t,i,n)}};const $pt=_t.register({description:"inline-progress-widget",stickiness:1,showIfCollapsed:!0,after:{content:b0e,inlineClassName:"inline-editor-progress-decoration",inlineClassNameAffectsLetterSpacing:!0}}),J4=class J4 extends ee{constructor(e,t,i,s,r){super(),this.typeId=e,this.editor=t,this.range=i,this.delegate=r,this.allowEditorOverflow=!1,this.suppressMouseDown=!0,this.create(s),this.editor.addContentWidget(this),this.editor.layoutContentWidget(this)}create(e){this.domNode=xe(".inline-progress-widget"),this.domNode.role="button",this.domNode.title=e;const t=xe("span.icon");this.domNode.append(t),t.classList.add(...ot.asClassNameArray(ye.loading),"codicon-modifier-spin");const i=()=>{const s=this.editor.getOption(67);this.domNode.style.height=`${s}px`,this.domNode.style.width=`${Math.ceil(.8*s)}px`};i(),this._register(this.editor.onDidChangeConfiguration(s=>{(s.hasChanged(52)||s.hasChanged(67))&&i()})),this._register(re(this.domNode,Se.CLICK,s=>{this.delegate.cancel()}))}getId(){return J4.baseId+"."+this.typeId}getDomNode(){return this.domNode}getPosition(){return{position:{lineNumber:this.range.startLineNumber,column:this.range.startColumn},preference:[0]}}dispose(){super.dispose(),this.editor.removeContentWidget(this)}};J4.baseId="editor.widget.inlineProgressWidget";let dK=J4,eF=class extends ee{constructor(e,t,i){super(),this.id=e,this._editor=t,this._instantiationService=i,this._showDelay=500,this._showPromise=this._register(new As),this._currentWidget=this._register(new As),this._operationIdPool=0,this._currentDecorations=t.createDecorationsCollection()}dispose(){super.dispose(),this._currentDecorations.clear()}async showWhile(e,t,i,s,r){const o=this._operationIdPool++;this._currentOperation=o,this.clear(),this._showPromise.value=T_(()=>{const a=M.fromPositions(e);this._currentDecorations.set([{range:a,options:$pt}]).length>0&&(this._currentWidget.value=this._instantiationService.createInstance(dK,this.id,this._editor,a,t,s))},r??this._showDelay);try{return await i}finally{this._currentOperation===o&&(this.clear(),this._currentOperation=void 0)}}clear(){this._showPromise.clear(),this._currentDecorations.clear(),this._currentWidget.clear()}};eF=zpt([Upt(2,Ze)],eF);var jpt=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},eue=function(n,e){return function(t,i){e(t,i,n)}},j2,i_;let Xa=(i_=class{static get(e){return e.getContribution(j2.ID)}constructor(e,t,i){this._openerService=i,this._messageWidget=new As,this._messageListeners=new ue,this._mouseOverMessage=!1,this._editor=e,this._visible=j2.MESSAGE_VISIBLE.bindTo(t)}dispose(){var e;(e=this._message)==null||e.dispose(),this._messageListeners.dispose(),this._messageWidget.dispose(),this._visible.reset()}showMessage(e,t){Bo(Mu(e)?e.value:e),this._visible.set(!0),this._messageWidget.clear(),this._messageListeners.clear(),this._message=Mu(e)?_B(e,{actionHandler:{callback:s=>{this.closeMessage(),iQ(this._openerService,s,Mu(e)?e.isTrusted:void 0)},disposables:this._messageListeners}}):void 0,this._messageWidget.value=new tue(this._editor,t,typeof e=="string"?e:this._message.element),this._messageListeners.add(Ee.debounce(this._editor.onDidBlurEditorText,(s,r)=>r,0)(()=>{this._mouseOverMessage||this._messageWidget.value&&Es(vr(),this._messageWidget.value.getDomNode())||this.closeMessage()})),this._messageListeners.add(this._editor.onDidChangeCursorPosition(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidDispose(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidChangeModel(()=>this.closeMessage())),this._messageListeners.add(re(this._messageWidget.value.getDomNode(),Se.MOUSE_ENTER,()=>this._mouseOverMessage=!0,!0)),this._messageListeners.add(re(this._messageWidget.value.getDomNode(),Se.MOUSE_LEAVE,()=>this._mouseOverMessage=!1,!0));let i;this._messageListeners.add(this._editor.onMouseMove(s=>{s.target.position&&(i?i.containsPosition(s.target.position)||this.closeMessage():i=new M(t.lineNumber-3,1,s.target.position.lineNumber+3,1))}))}closeMessage(){this._visible.reset(),this._messageListeners.clear(),this._messageWidget.value&&this._messageListeners.add(tue.fadeOut(this._messageWidget.value))}},j2=i_,i_.ID="editor.contrib.messageController",i_.MESSAGE_VISIBLE=new Re("messageVisible",!1,v("messageVisible","Whether the editor is currently showing an inline message")),i_);Xa=j2=jpt([eue(1,at),eue(2,ba)],Xa);const Kpt=vs.bindToContribution(Xa.get);Te(new Kpt({id:"leaveEditorMessage",precondition:Xa.MESSAGE_VISIBLE,handler:n=>n.closeMessage(),kbOpts:{weight:130,primary:9}}));let tue=class{static fadeOut(e){const t=()=>{e.dispose(),clearTimeout(i),e.getDomNode().removeEventListener("animationend",t)},i=setTimeout(t,110);return e.getDomNode().addEventListener("animationend",t),e.getDomNode().classList.add("fadeOut"),{dispose:t}}constructor(e,{lineNumber:t,column:i},s){this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._editor=e,this._editor.revealLinesInCenterIfOutsideViewport(t,t,0),this._position={lineNumber:t,column:i},this._domNode=document.createElement("div"),this._domNode.classList.add("monaco-editor-overlaymessage"),this._domNode.style.marginLeft="-6px";const r=document.createElement("div");r.classList.add("anchor","top"),this._domNode.appendChild(r);const o=document.createElement("div");typeof s=="string"?(o.classList.add("message"),o.textContent=s):(s.classList.add("message"),o.appendChild(s)),this._domNode.appendChild(o);const a=document.createElement("div");a.classList.add("anchor","below"),this._domNode.appendChild(a),this._editor.addContentWidget(this),this._domNode.classList.add("fadeIn")}dispose(){this._editor.removeContentWidget(this)}getId(){return"messageoverlay"}getDomNode(){return this._domNode}getPosition(){return{position:this._position,preference:[1,2],positionAffinity:1}}afterRender(e){this._domNode.classList.toggle("below",e===2)}};Xt(Xa.ID,Xa,4);function s6(n,e){return e&&(n.stack||n.stacktrace)?v("stackTrace.format","{0}: {1}",nue(n),iue(n.stack)||iue(n.stacktrace)):nue(n)}function iue(n){return Array.isArray(n)?n.join(`
`):n}function nue(n){return n.code==="ERR_UNC_HOST_NOT_ALLOWED"?`${n.message}. Please update the 'security.allowedUNCHosts' setting if you want to allow this host.`:typeof n.code=="string"&&typeof n.errno=="number"&&typeof n.syscall=="string"?v("nodeExceptionMessage","A system error occurred ({0})",n.message):n.message||v("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}function tF(n=null,e=!1){if(!n)return v("error.defaultMessage","An unknown error occurred. Please consult the log for more details.");if(Array.isArray(n)){const t=Id(n),i=tF(t[0],e);return t.length>1?v("error.moreErrors","{0} ({1} errors in total)",i,t.length):i}if(ca(n))return n;if(n.detail){const t=n.detail;if(t.error)return s6(t.error,e);if(t.exception)return s6(t.exception,e)}return n.stack?s6(n,e):n.message?n.message:v("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}var qxe=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Uy=function(n,e){return function(t,i){e(t,i,n)}},uK,uw;let hK=(uw=class extends ee{constructor(e,t,i,s,r,o,a,l,c,d){super(),this.typeId=e,this.editor=t,this.showCommand=s,this.range=r,this.edits=o,this.onSelectNewEdit=a,this._contextMenuService=l,this._keybindingService=d,this.allowEditorOverflow=!0,this.suppressMouseDown=!0,this.create(),this.visibleContext=i.bindTo(c),this.visibleContext.set(!0),this._register(Ye(()=>this.visibleContext.reset())),this.editor.addContentWidget(this),this.editor.layoutContentWidget(this),this._register(Ye(()=>this.editor.removeContentWidget(this))),this._register(this.editor.onDidChangeCursorPosition(u=>{r.containsPosition(u.position)||this.dispose()})),this._register(Ee.runAndSubscribe(d.onDidUpdateKeybindings,()=>{this._updateButtonTitle()}))}_updateButtonTitle(){var t;const e=(t=this._keybindingService.lookupKeybinding(this.showCommand.id))==null?void 0:t.getLabel();this.button.element.title=this.showCommand.label+(e?` (${e})`:"")}create(){this.domNode=xe(".post-edit-widget"),this.button=this._register(new aO(this.domNode,{supportIcons:!0})),this.button.label="$(insert)",this._register(re(this.domNode,Se.CLICK,()=>this.showSelector()))}getId(){return uK.baseId+"."+this.typeId}getDomNode(){return this.domNode}getPosition(){return{position:this.range.getEndPosition(),preference:[2]}}showSelector(){this._contextMenuService.showContextMenu({getAnchor:()=>{const e=Fn(this.button.element);return{x:e.left+e.width,y:e.top+e.height}},getActions:()=>this.edits.allEdits.map((e,t)=>Ub({id:"",label:e.title,checked:t===this.edits.activeEditIndex,run:()=>{if(t!==this.edits.activeEditIndex)return this.onSelectNewEdit(t)}}))})}},uK=uw,uw.baseId="editor.widget.postEditWidget",uw);hK=uK=qxe([Uy(7,ol),Uy(8,at),Uy(9,hi)],hK);let iF=class extends ee{constructor(e,t,i,s,r,o,a){super(),this._id=e,this._editor=t,this._visibleContext=i,this._showCommand=s,this._instantiationService=r,this._bulkEditService=o,this._notificationService=a,this._currentWidget=this._register(new As),this._register(Ee.any(t.onDidChangeModel,t.onDidChangeModelContent)(()=>this.clear()))}async applyEditAndShowIfNeeded(e,t,i,s,r){const o=this._editor.getModel();if(!o||!e.length)return;const a=t.allEdits.at(t.activeEditIndex);if(!a)return;const l=async _=>{const w=this._editor.getModel();w&&(await w.undo(),this.applyEditAndShowIfNeeded(e,{activeEditIndex:_,allEdits:t.allEdits},i,s,r))},c=(_,w)=>{Vc(_)||(this._notificationService.error(w),i&&this.show(e[0],t,l))};let d;try{d=await s(a,r)}catch(_){return c(_,v("resolveError",`Error resolving edit '{0}':
{1}`,a.title,tF(_)))}if(r.isCancellationRequested)return;const u=jxe(o.uri,e,d),h=e[0],f=o.deltaDecorations([],[{range:h,options:{description:"paste-line-suffix",stickiness:0}}]);this._editor.focus();let g,p;try{g=await this._bulkEditService.apply(u,{editor:this._editor,token:r}),p=o.getDecorationRange(f[0])}catch(_){return c(_,v("applyError",`Error applying edit '{0}':
{1}`,a.title,tF(_)))}finally{o.deltaDecorations(f,[])}r.isCancellationRequested||i&&g.isApplied&&t.allEdits.length>1&&this.show(p??h,t,l)}show(e,t,i){this.clear(),this._editor.hasModel()&&(this._currentWidget.value=this._instantiationService.createInstance(hK,this._id,this._editor,this._visibleContext,this._showCommand,e,t,i))}clear(){this._currentWidget.clear()}tryShowSelector(){var e;(e=this._currentWidget.value)==null||e.showSelector()}};iF=qxe([Uy(4,Ze),Uy(5,$N),Uy(6,jn)],iF);var qpt=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},AC=function(n,e){return function(t,i){e(t,i,n)}},Zv;const Gxe="editor.changePasteType",WJ=new Re("pasteWidgetVisible",!1,v("pasteWidgetVisible","Whether the paste widget is showing")),r6="application/vnd.code.copyMetadata";var hw;let np=(hw=class extends ee{static get(e){return e.getContribution(Zv.ID)}constructor(e,t,i,s,r,o,a){super(),this._bulkEditService=i,this._clipboardService=s,this._languageFeaturesService=r,this._quickInputService=o,this._progressService=a,this._editor=e;const l=e.getContainerDomNode();this._register(re(l,"copy",c=>this.handleCopy(c))),this._register(re(l,"cut",c=>this.handleCopy(c))),this._register(re(l,"paste",c=>this.handlePaste(c),!0)),this._pasteProgressManager=this._register(new eF("pasteIntoEditor",e,t)),this._postPasteWidgetManager=this._register(t.createInstance(iF,"pasteIntoEditor",e,WJ,{id:Gxe,label:v("postPasteWidgetTitle","Show paste options...")}))}changePasteType(){this._postPasteWidgetManager.tryShowSelector()}pasteAs(e){this._editor.focus();try{this._pasteAsActionContext={preferred:e},Ix().execCommand("paste")}finally{this._pasteAsActionContext=void 0}}clearWidgets(){this._postPasteWidgetManager.clear()}isPasteAsEnabled(){return this._editor.getOption(85).enabled}async finishedPaste(){await this._currentPasteOperation}handleCopy(e){var p,_,w,b;if(!this._editor.hasTextFocus()||((_=(p=this._clipboardService).clearInternalState)==null||_.call(p),!e.clipboardData||!this.isPasteAsEnabled()))return;const t=this._editor.getModel(),i=this._editor.getSelections();if(!t||!(i!=null&&i.length))return;const s=this._editor.getOption(37);let r=i;const o=i.length===1&&i[0].isEmpty();if(o){if(!s)return;r=[new M(r[0].startLineNumber,1,r[0].startLineNumber,1+t.getLineLength(r[0].startLineNumber))]}const a=(w=this._editor._getViewModel())==null?void 0:w.getPlainTextToCopy(i,s,wr),c={multicursorText:Array.isArray(a)?a:null,pasteOnNewLine:o,mode:null},d=this._languageFeaturesService.documentPasteEditProvider.ordered(t).filter(y=>!!y.prepareDocumentPaste);if(!d.length){this.setCopyMetadata(e.clipboardData,{defaultPastePayload:c});return}const u=Hxe(e.clipboardData),h=d.flatMap(y=>y.copyMimeTypes??[]),f=ZB();this.setCopyMetadata(e.clipboardData,{id:f,providerCopyMimeTypes:h,defaultPastePayload:c});const g=Ds(async y=>{const S=Id(await Promise.all(d.map(async x=>{try{return await x.prepareDocumentPaste(t,r,u,y)}catch(E){console.error(E);return}})));S.reverse();for(const x of S)for(const[E,D]of x)u.replace(E,D);return u});(b=Zv._currentCopyOperation)==null||b.dataTransferPromise.cancel(),Zv._currentCopyOperation={handle:f,dataTransferPromise:g}}async handlePaste(e){var l,c,d;if(!e.clipboardData||!this._editor.hasTextFocus())return;(l=Xa.get(this._editor))==null||l.closeMessage(),(c=this._currentPasteOperation)==null||c.cancel(),this._currentPasteOperation=void 0;const t=this._editor.getModel(),i=this._editor.getSelections();if(!(i!=null&&i.length)||!t||this._editor.getOption(92)||!this.isPasteAsEnabled()&&!this._pasteAsActionContext)return;const s=this.fetchCopyMetadata(e),r=Vxe(e.clipboardData);r.delete(r6);const o=[...e.clipboardData.types,...(s==null?void 0:s.providerCopyMimeTypes)??[],On.uriList],a=this._languageFeaturesService.documentPasteEditProvider.ordered(t).filter(u=>{var f,g;const h=(f=this._pasteAsActionContext)==null?void 0:f.preferred;return h&&u.providedPasteEditKinds&&!this.providerMatchesPreference(u,h)?!1:(g=u.pasteMimeTypes)==null?void 0:g.some(p=>Bxe(p,o))});if(!a.length){(d=this._pasteAsActionContext)!=null&&d.preferred&&this.showPasteAsNoEditMessage(i,this._pasteAsActionContext.preferred);return}e.preventDefault(),e.stopImmediatePropagation(),this._pasteAsActionContext?this.showPasteAsPick(this._pasteAsActionContext.preferred,a,i,r,s):this.doPasteInline(a,i,r,s,e)}showPasteAsNoEditMessage(e,t){var i;(i=Xa.get(this._editor))==null||i.showMessage(v("pasteAsError","No paste edits for '{0}' found",t instanceof cn?t.value:t.providerId),e[0].getStartPosition())}doPasteInline(e,t,i,s,r){const o=this._editor;if(!o.hasModel())return;const a=new V_(o,3,void 0),l=Ds(async c=>{const d=this._editor;if(!d.hasModel())return;const u=d.getModel(),h=new ue,f=h.add(new mn(c));h.add(a.token.onCancellationRequested(()=>f.cancel()));const g=f.token;try{if(await this.mergeInDataFromCopy(i,s,g),g.isCancellationRequested)return;const p=e.filter(b=>this.isSupportedPasteProvider(b,i));if(!p.length||p.length===1&&p[0]instanceof S0)return this.applyDefaultPasteHandler(i,s,g,r);const _={triggerKind:AI.Automatic},w=await this.getPasteEdits(p,i,u,t,_,g);if(h.add(w),g.isCancellationRequested)return;if(w.edits.length===1&&w.edits[0].provider instanceof S0)return this.applyDefaultPasteHandler(i,s,g,r);if(w.edits.length){const b=d.getOption(85).showPasteSelector==="afterPaste";return this._postPasteWidgetManager.applyEditAndShowIfNeeded(t,{activeEditIndex:0,allEdits:w.edits},b,(y,S)=>new Promise((x,E)=>{(async()=>{var D,N;try{const I=(N=(D=y.provider).resolveDocumentPasteEdit)==null?void 0:N.call(D,y,S),H=new Ex,z=I&&await this._pasteProgressManager.showWhile(t[0].getEndPosition(),v("resolveProcess","Resolving paste edit. Click to cancel"),Promise.race([H.p,I]),{cancel:()=>(H.cancel(),E(new Dd))},0);return z&&(y.additionalEdit=z.additionalEdit),x(y)}catch(I){return E(I)}})()}),g)}await this.applyDefaultPasteHandler(i,s,g,r)}finally{h.dispose(),this._currentPasteOperation===l&&(this._currentPasteOperation=void 0)}});this._pasteProgressManager.showWhile(t[0].getEndPosition(),v("pasteIntoEditorProgress","Running paste handlers. Click to cancel and do basic paste"),l,{cancel:async()=>{try{if(l.cancel(),a.token.isCancellationRequested)return;await this.applyDefaultPasteHandler(i,s,a.token,r)}finally{a.dispose()}}}).then(()=>{a.dispose()}),this._currentPasteOperation=l}showPasteAsPick(e,t,i,s,r){const o=Ds(async a=>{const l=this._editor;if(!l.hasModel())return;const c=l.getModel(),d=new ue,u=d.add(new V_(l,3,void 0,a));try{if(await this.mergeInDataFromCopy(s,r,u.token),u.token.isCancellationRequested)return;let h=t.filter(w=>this.isSupportedPasteProvider(w,s,e));e&&(h=h.filter(w=>this.providerMatchesPreference(w,e)));const f={triggerKind:AI.PasteAs,only:e&&e instanceof cn?e:void 0};let g=d.add(await this.getPasteEdits(h,s,c,i,f,u.token));if(u.token.isCancellationRequested)return;if(e&&(g={edits:g.edits.filter(w=>e instanceof cn?e.contains(w.kind):e.providerId===w.provider.id),dispose:g.dispose}),!g.edits.length){f.only&&this.showPasteAsNoEditMessage(i,f.only);return}let p;if(e)p=g.edits.at(0);else{const w=await this._quickInputService.pick(g.edits.map(b=>{var y;return{label:b.title,description:(y=b.kind)==null?void 0:y.value,edit:b}}),{placeHolder:v("pasteAsPickerPlaceholder","Select Paste Action")});p=w==null?void 0:w.edit}if(!p)return;const _=jxe(c.uri,i,p);await this._bulkEditService.apply(_,{editor:this._editor})}finally{d.dispose(),this._currentPasteOperation===o&&(this._currentPasteOperation=void 0)}});this._progressService.withProgress({location:10,title:v("pasteAsProgress","Running paste handlers")},()=>o)}setCopyMetadata(e,t){e.setData(r6,JSON.stringify(t))}fetchCopyMetadata(e){if(!e.clipboardData)return;const t=e.clipboardData.getData(r6);if(t)try{return JSON.parse(t)}catch{return}const[i,s]=bj.getTextData(e.clipboardData);if(s)return{defaultPastePayload:{mode:s.mode,multicursorText:s.multicursorText??null,pasteOnNewLine:!!s.isFromEmptySelection}}}async mergeInDataFromCopy(e,t,i){var s;if(t!=null&&t.id&&((s=Zv._currentCopyOperation)==null?void 0:s.handle)===t.id){const r=await Zv._currentCopyOperation.dataTransferPromise;if(i.isCancellationRequested)return;for(const[o,a]of r)e.replace(o,a)}if(!e.has(On.uriList)){const r=await this._clipboardService.readResources();if(i.isCancellationRequested)return;r.length&&e.append(On.uriList,PJ(XB.create(r)))}}async getPasteEdits(e,t,i,s,r,o){const a=new ue,l=await ON(Promise.all(e.map(async d=>{var u,h;try{const f=await((u=d.provideDocumentPasteEdits)==null?void 0:u.call(d,i,s,t,r,o));return f&&a.add(f),(h=f==null?void 0:f.edits)==null?void 0:h.map(g=>({...g,provider:d}))}catch(f){Vc(f)||console.error(f);return}})),o),c=Id(l??[]).flat().filter(d=>!r.only||r.only.contains(d.kind));return{edits:Kxe(c),dispose:()=>a.dispose()}}async applyDefaultPasteHandler(e,t,i,s){const r=e.get(On.text)??e.get("text"),o=await(r==null?void 0:r.asString())??"";if(i.isCancellationRequested)return;const a={clipboardEvent:s,text:o,pasteOnNewLine:(t==null?void 0:t.defaultPastePayload.pasteOnNewLine)??!1,multicursorText:(t==null?void 0:t.defaultPastePayload.multicursorText)??null,mode:null};this._editor.trigger("keyboard","paste",a)}isSupportedPasteProvider(e,t,i){var s;return(s=e.pasteMimeTypes)!=null&&s.some(r=>t.matches(r))?!i||this.providerMatchesPreference(e,i):!1}providerMatchesPreference(e,t){return t instanceof cn?e.providedPasteEditKinds?e.providedPasteEditKinds.some(i=>t.contains(i)):!0:e.id===t.providerId}},Zv=hw,hw.ID="editor.contrib.copyPasteActionController",hw);np=Zv=qpt([AC(1,Ze),AC(2,$N),AC(3,pp),AC(4,Be),AC(5,Uc),AC(6,I1e)],np);const L0="9_cutcopypaste",Gpt=Eu||document.queryCommandSupported("cut"),Yxe=Eu||document.queryCommandSupported("copy"),Ypt=typeof navigator.clipboard>"u"||Tc?document.queryCommandSupported("paste"):!0;function HJ(n){return n.register(),n}const Zpt=Gpt?HJ(new Nx({id:"editor.action.clipboardCutAction",precondition:void 0,kbOpts:Eu?{primary:2102,win:{primary:2102,secondary:[1044]},weight:100}:void 0,menuOpts:[{menuId:ze.MenubarEditMenu,group:"2_ccp",title:v({key:"miCut",comment:["&& denotes a mnemonic"]},"Cu&&t"),order:1},{menuId:ze.EditorContext,group:L0,title:v("actions.clipboard.cutLabel","Cut"),when:F.writable,order:1},{menuId:ze.CommandPalette,group:"",title:v("actions.clipboard.cutLabel","Cut"),order:1},{menuId:ze.SimpleEditorContext,group:L0,title:v("actions.clipboard.cutLabel","Cut"),when:F.writable,order:1}]})):void 0,Xpt=Yxe?HJ(new Nx({id:"editor.action.clipboardCopyAction",precondition:void 0,kbOpts:Eu?{primary:2081,win:{primary:2081,secondary:[2067]},weight:100}:void 0,menuOpts:[{menuId:ze.MenubarEditMenu,group:"2_ccp",title:v({key:"miCopy",comment:["&& denotes a mnemonic"]},"&&Copy"),order:2},{menuId:ze.EditorContext,group:L0,title:v("actions.clipboard.copyLabel","Copy"),order:2},{menuId:ze.CommandPalette,group:"",title:v("actions.clipboard.copyLabel","Copy"),order:1},{menuId:ze.SimpleEditorContext,group:L0,title:v("actions.clipboard.copyLabel","Copy"),order:2}]})):void 0;Us.appendMenuItem(ze.MenubarEditMenu,{submenu:ze.MenubarCopy,title:lt("copy as","Copy As"),group:"2_ccp",order:3});Us.appendMenuItem(ze.EditorContext,{submenu:ze.EditorContextCopy,title:lt("copy as","Copy As"),group:L0,order:3});Us.appendMenuItem(ze.EditorContext,{submenu:ze.EditorContextShare,title:lt("share","Share"),group:"11_share",order:-1,when:he.and(he.notEquals("resourceScheme","output"),F.editorTextFocus)});Us.appendMenuItem(ze.ExplorerContext,{submenu:ze.ExplorerContextShare,title:lt("share","Share"),group:"11_share",order:-1});const o6=Ypt?HJ(new Nx({id:"editor.action.clipboardPasteAction",precondition:void 0,kbOpts:Eu?{primary:2100,win:{primary:2100,secondary:[1043]},linux:{primary:2100,secondary:[1043]},weight:100}:void 0,menuOpts:[{menuId:ze.MenubarEditMenu,group:"2_ccp",title:v({key:"miPaste",comment:["&& denotes a mnemonic"]},"&&Paste"),order:4},{menuId:ze.EditorContext,group:L0,title:v("actions.clipboard.pasteLabel","Paste"),when:F.writable,order:4},{menuId:ze.CommandPalette,group:"",title:v("actions.clipboard.pasteLabel","Paste"),order:1},{menuId:ze.SimpleEditorContext,group:L0,title:v("actions.clipboard.pasteLabel","Paste"),when:F.writable,order:4}]})):void 0;class Qpt extends Oe{constructor(){super({id:"editor.action.clipboardCopyWithSyntaxHighlightingAction",label:v("actions.clipboard.copyWithSyntaxHighlightingLabel","Copy With Syntax Highlighting"),alias:"Copy With Syntax Highlighting",precondition:void 0,kbOpts:{kbExpr:F.textInputFocus,primary:0,weight:100}})}run(e,t){!t.hasModel()||!t.getOption(37)&&t.getSelection().isEmpty()||(_j.forceCopyWithSyntaxHighlighting=!0,t.focus(),t.getContainerDomNode().ownerDocument.execCommand("copy"),_j.forceCopyWithSyntaxHighlighting=!1)}}function Zxe(n,e){n&&(n.addImplementation(1e4,"code-editor",(t,i)=>{const s=t.get(ri).getFocusedCodeEditor();if(s&&s.hasTextFocus()){const r=s.getOption(37),o=s.getSelection();return o&&o.isEmpty()&&!r||s.getContainerDomNode().ownerDocument.execCommand(e),!0}return!1}),n.addImplementation(0,"generic-dom",(t,i)=>(Ix().execCommand(e),!0)))}Zxe(Zpt,"cut");Zxe(Xpt,"copy");o6&&(o6.addImplementation(1e4,"code-editor",(n,e)=>{var r;const t=n.get(ri),i=n.get(pp),s=t.getFocusedCodeEditor();return s&&s.hasTextFocus()?s.getContainerDomNode().ownerDocument.execCommand("paste")?((r=np.get(s))==null?void 0:r.finishedPaste())??Promise.resolve():B0?(async()=>{const a=await i.readText();if(a!==""){const l=yD.INSTANCE.get(a);let c=!1,d=null,u=null;l&&(c=s.getOption(37)&&!!l.isFromEmptySelection,d=typeof l.multicursorText<"u"?l.multicursorText:null,u=l.mode),s.trigger("keyboard","paste",{text:a,pasteOnNewLine:c,multicursorText:d,mode:u})}})():!0:!1}),o6.addImplementation(0,"generic-dom",(n,e)=>(Ix().execCommand("paste"),!0)));Yxe&&we(Qpt);const tn=new class{constructor(){this.QuickFix=new cn("quickfix"),this.Refactor=new cn("refactor"),this.RefactorExtract=this.Refactor.append("extract"),this.RefactorInline=this.Refactor.append("inline"),this.RefactorMove=this.Refactor.append("move"),this.RefactorRewrite=this.Refactor.append("rewrite"),this.Notebook=new cn("notebook"),this.Source=new cn("source"),this.SourceOrganizeImports=this.Source.append("organizeImports"),this.SourceFixAll=this.Source.append("fixAll"),this.SurroundWith=this.Refactor.append("surround")}};var nl;(function(n){n.Refactor="refactor",n.RefactorPreview="refactor preview",n.Lightbulb="lightbulb",n.Default="other (default)",n.SourceAction="source action",n.QuickFix="quick fix action",n.FixAll="fix all",n.OrganizeImports="organize imports",n.AutoFix="auto fix",n.QuickFixHover="quick fix hover window",n.OnSave="save participants",n.ProblemsView="problems view"})(nl||(nl={}));function Jpt(n,e){return!(n.include&&!n.include.intersects(e)||n.excludes&&n.excludes.some(t=>Xxe(e,t,n.include))||!n.includeSourceActions&&tn.Source.contains(e))}function emt(n,e){const t=e.kind?new cn(e.kind):void 0;return!(n.include&&(!t||!n.include.contains(t))||n.excludes&&t&&n.excludes.some(i=>Xxe(t,i,n.include))||!n.includeSourceActions&&t&&tn.Source.contains(t)||n.onlyIncludePreferredActions&&!e.isPreferred)}function Xxe(n,e,t){return!(!e.contains(n)||t&&e.contains(t))}class Bh{static fromUser(e,t){return!e||typeof e!="object"?new Bh(t.kind,t.apply,!1):new Bh(Bh.getKindFromUser(e,t.kind),Bh.getApplyFromUser(e,t.apply),Bh.getPreferredUser(e))}static getApplyFromUser(e,t){switch(typeof e.apply=="string"?e.apply.toLowerCase():""){case"first":return"first";case"never":return"never";case"ifsingle":return"ifSingle";default:return t}}static getKindFromUser(e,t){return typeof e.kind=="string"?new cn(e.kind):t}static getPreferredUser(e){return typeof e.preferred=="boolean"?e.preferred:!1}constructor(e,t,i){this.kind=e,this.apply=t,this.preferred=i}}class tmt{constructor(e,t,i){this.action=e,this.provider=t,this.highlightRange=i}async resolve(e){var t;if((t=this.provider)!=null&&t.resolveCodeAction&&!this.action.edit){let i;try{i=await this.provider.resolveCodeAction(this.action,e)}catch(s){Wn(s)}i&&(this.action.edit=i.edit)}return this}}const Qxe="editor.action.codeAction",VJ="editor.action.quickFix",Jxe="editor.action.autoFix",eLe="editor.action.refactor",tLe="editor.action.sourceAction",fK="editor.action.organizeImports",gK="editor.action.fixAll";class yE extends ee{static codeActionsPreferredComparator(e,t){return e.isPreferred&&!t.isPreferred?-1:!e.isPreferred&&t.isPreferred?1:0}static codeActionsComparator({action:e},{action:t}){return e.isAI&&!t.isAI?1:!e.isAI&&t.isAI?-1:ao(e.diagnostics)?ao(t.diagnostics)?yE.codeActionsPreferredComparator(e,t):-1:ao(t.diagnostics)?1:yE.codeActionsPreferredComparator(e,t)}constructor(e,t,i){super(),this.documentation=t,this._register(i),this.allActions=[...e].sort(yE.codeActionsComparator),this.validActions=this.allActions.filter(({action:s})=>!s.disabled)}get hasAutoFix(){return this.validActions.some(({action:e})=>!!e.kind&&tn.QuickFix.contains(new cn(e.kind))&&!!e.isPreferred)}get hasAIFix(){return this.validActions.some(({action:e})=>!!e.isAI)}get allAIFixes(){return this.validActions.every(({action:e})=>!!e.isAI)}}const sue={actions:[],documentation:void 0};async function O1(n,e,t,i,s,r){var p;const o=i.filter||{},a={...o,excludes:[...o.excludes||[],tn.Notebook]},l={only:(p=o.include)==null?void 0:p.value,trigger:i.type},c=new IJ(e,r),d=i.type===2,u=imt(n,e,d?a:o),h=new ue,f=u.map(async _=>{try{s.report(_);const w=await _.provideCodeActions(e,t,l,c.token);if(w&&h.add(w),c.token.isCancellationRequested)return sue;const b=((w==null?void 0:w.actions)||[]).filter(S=>S&&emt(o,S)),y=smt(_,b,o.include);return{actions:b.map(S=>new tmt(S,_)),documentation:y}}catch(w){if(Vc(w))throw w;return Wn(w),sue}}),g=n.onDidChange(()=>{const _=n.all(e);dn(_,u)||c.cancel()});try{const _=await Promise.all(f),w=_.map(y=>y.actions).flat(),b=[...Id(_.map(y=>y.documentation)),...nmt(n,e,i,w)];return new yE(w,b,h)}finally{g.dispose(),c.dispose()}}function imt(n,e,t){return n.all(e).filter(i=>i.providedCodeActionKinds?i.providedCodeActionKinds.some(s=>Jpt(t,new cn(s))):!0)}function*nmt(n,e,t,i){var s,r,o;if(e&&i.length)for(const a of n.all(e))a._getAdditionalMenuItems&&(yield*(o=a._getAdditionalMenuItems)==null?void 0:o.call(a,{trigger:t.type,only:(r=(s=t.filter)==null?void 0:s.include)==null?void 0:r.value},i.map(l=>l.action)))}function smt(n,e,t){if(!n.documentation)return;const i=n.documentation.map(s=>({kind:new cn(s.kind),command:s.command}));if(t){let s;for(const r of i)r.kind.contains(t)&&(s?s.kind.contains(r.kind)&&(s=r):s=r);if(s)return s==null?void 0:s.command}for(const s of e)if(s.kind){for(const r of i)if(r.kind.contains(new cn(s.kind)))return r.command}}var Db;(function(n){n.OnSave="onSave",n.FromProblemsView="fromProblemsView",n.FromCodeActions="fromCodeActions",n.FromAILightbulb="fromAILightbulb"})(Db||(Db={}));async function rmt(n,e,t,i,s=xt.None){var c;const r=n.get($N),o=n.get(Vi),a=n.get(Hr),l=n.get(jn);if(a.publicLog2("codeAction.applyCodeAction",{codeActionTitle:e.action.title,codeActionKind:e.action.kind,codeActionIsPreferred:!!e.action.isPreferred,reason:t}),await e.resolve(s),!s.isCancellationRequested&&!((c=e.action.edit)!=null&&c.edits.length&&!(await r.apply(e.action.edit,{editor:i==null?void 0:i.editor,label:e.action.title,quotableLabel:e.action.title,code:"undoredo.codeAction",respectAutoSaveConfig:t!==Db.OnSave,showPreview:i==null?void 0:i.preview})).isApplied)&&e.action.command)try{await o.executeCommand(e.action.command.id,...e.action.command.arguments||[])}catch(d){const u=omt(d);l.error(typeof u=="string"?u:v("applyCodeActionFailed","An unknown error occurred while applying the code action"))}}function omt(n){return typeof n=="string"?n:n instanceof Error&&typeof n.message=="string"?n.message:void 0}Gt.registerCommand("_executeCodeActionProvider",async function(n,e,t,i,s){if(!(e instanceof Xe))throw Ec();const{codeActionProvider:r}=n.get(Be),o=n.get(Zi).getModel(e);if(!o)throw Ec();const a=$e.isISelection(t)?$e.liftSelection(t):M.isIRange(t)?o.validateRange(t):void 0;if(!a)throw Ec();const l=typeof i=="string"?new cn(i):void 0,c=await O1(r,o,a,{type:1,triggerAction:nl.Default,filter:{includeSourceActions:!0,include:l}},Cu.None,xt.None),d=[],u=Math.min(c.validActions.length,typeof s=="number"?s:0);for(let h=0;h<u;h++)d.push(c.validActions[h].resolve(xt.None));try{return await Promise.all(d),c.validActions.map(h=>h.action)}finally{setTimeout(()=>c.dispose(),100)}});var amt=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},lmt=function(n,e){return function(t,i){e(t,i,n)}},pK,fw;let mK=(fw=class{constructor(e){this.keybindingService=e}getResolver(){const e=new Wu(()=>this.keybindingService.getKeybindings().filter(t=>pK.codeActionCommands.indexOf(t.command)>=0).filter(t=>t.resolvedKeybinding).map(t=>{let i=t.commandArgs;return t.command===fK?i={kind:tn.SourceOrganizeImports.value}:t.command===gK&&(i={kind:tn.SourceFixAll.value}),{resolvedKeybinding:t.resolvedKeybinding,...Bh.fromUser(i,{kind:cn.None,apply:"never"})}}));return t=>{if(t.kind){const i=this.bestKeybindingForCodeAction(t,e.value);return i==null?void 0:i.resolvedKeybinding}}}bestKeybindingForCodeAction(e,t){if(!e.kind)return;const i=new cn(e.kind);return t.filter(s=>s.kind.contains(i)).filter(s=>s.preferred?e.isPreferred:!0).reduceRight((s,r)=>s?s.kind.contains(r.kind)?r:s:r,void 0)}},pK=fw,fw.codeActionCommands=[eLe,Qxe,tLe,fK,gK],fw);mK=pK=amt([lmt(0,hi)],mK);B("symbolIcon.arrayForeground",Mt,v("symbolIcon.arrayForeground","The foreground color for array symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));B("symbolIcon.booleanForeground",Mt,v("symbolIcon.booleanForeground","The foreground color for boolean symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));B("symbolIcon.classForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},v("symbolIcon.classForeground","The foreground color for class symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));B("symbolIcon.colorForeground",Mt,v("symbolIcon.colorForeground","The foreground color for color symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));B("symbolIcon.constantForeground",Mt,v("symbolIcon.constantForeground","The foreground color for constant symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));B("symbolIcon.constructorForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},v("symbolIcon.constructorForeground","The foreground color for constructor symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));B("symbolIcon.enumeratorForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},v("symbolIcon.enumeratorForeground","The foreground color for enumerator symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));B("symbolIcon.enumeratorMemberForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},v("symbolIcon.enumeratorMemberForeground","The foreground color for enumerator member symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));B("symbolIcon.eventForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},v("symbolIcon.eventForeground","The foreground color for event symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));B("symbolIcon.fieldForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},v("symbolIcon.fieldForeground","The foreground color for field symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));B("symbolIcon.fileForeground",Mt,v("symbolIcon.fileForeground","The foreground color for file symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));B("symbolIcon.folderForeground",Mt,v("symbolIcon.folderForeground","The foreground color for folder symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));B("symbolIcon.functionForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},v("symbolIcon.functionForeground","The foreground color for function symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));B("symbolIcon.interfaceForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},v("symbolIcon.interfaceForeground","The foreground color for interface symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));B("symbolIcon.keyForeground",Mt,v("symbolIcon.keyForeground","The foreground color for key symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));B("symbolIcon.keywordForeground",Mt,v("symbolIcon.keywordForeground","The foreground color for keyword symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));B("symbolIcon.methodForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},v("symbolIcon.methodForeground","The foreground color for method symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));B("symbolIcon.moduleForeground",Mt,v("symbolIcon.moduleForeground","The foreground color for module symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));B("symbolIcon.namespaceForeground",Mt,v("symbolIcon.namespaceForeground","The foreground color for namespace symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));B("symbolIcon.nullForeground",Mt,v("symbolIcon.nullForeground","The foreground color for null symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));B("symbolIcon.numberForeground",Mt,v("symbolIcon.numberForeground","The foreground color for number symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));B("symbolIcon.objectForeground",Mt,v("symbolIcon.objectForeground","The foreground color for object symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));B("symbolIcon.operatorForeground",Mt,v("symbolIcon.operatorForeground","The foreground color for operator symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));B("symbolIcon.packageForeground",Mt,v("symbolIcon.packageForeground","The foreground color for package symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));B("symbolIcon.propertyForeground",Mt,v("symbolIcon.propertyForeground","The foreground color for property symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));B("symbolIcon.referenceForeground",Mt,v("symbolIcon.referenceForeground","The foreground color for reference symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));B("symbolIcon.snippetForeground",Mt,v("symbolIcon.snippetForeground","The foreground color for snippet symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));B("symbolIcon.stringForeground",Mt,v("symbolIcon.stringForeground","The foreground color for string symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));B("symbolIcon.structForeground",Mt,v("symbolIcon.structForeground","The foreground color for struct symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));B("symbolIcon.textForeground",Mt,v("symbolIcon.textForeground","The foreground color for text symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));B("symbolIcon.typeParameterForeground",Mt,v("symbolIcon.typeParameterForeground","The foreground color for type parameter symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));B("symbolIcon.unitForeground",Mt,v("symbolIcon.unitForeground","The foreground color for unit symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));B("symbolIcon.variableForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},v("symbolIcon.variableForeground","The foreground color for variable symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));const iLe=Object.freeze({kind:cn.Empty,title:v("codeAction.widget.id.more","More Actions...")}),cmt=Object.freeze([{kind:tn.QuickFix,title:v("codeAction.widget.id.quickfix","Quick Fix")},{kind:tn.RefactorExtract,title:v("codeAction.widget.id.extract","Extract"),icon:ye.wrench},{kind:tn.RefactorInline,title:v("codeAction.widget.id.inline","Inline"),icon:ye.wrench},{kind:tn.RefactorRewrite,title:v("codeAction.widget.id.convert","Rewrite"),icon:ye.wrench},{kind:tn.RefactorMove,title:v("codeAction.widget.id.move","Move"),icon:ye.wrench},{kind:tn.SurroundWith,title:v("codeAction.widget.id.surround","Surround With"),icon:ye.surroundWith},{kind:tn.Source,title:v("codeAction.widget.id.source","Source Action"),icon:ye.symbolFile},iLe]);function dmt(n,e,t){if(!e)return n.map(r=>{var o;return{kind:"action",item:r,group:iLe,disabled:!!r.action.disabled,label:r.action.disabled||r.action.title,canPreview:!!((o=r.action.edit)!=null&&o.edits.length)}});const i=cmt.map(r=>({group:r,actions:[]}));for(const r of n){const o=r.action.kind?new cn(r.action.kind):cn.None;for(const a of i)if(a.group.kind.contains(o)){a.actions.push(r);break}}const s=[];for(const r of i)if(r.actions.length){s.push({kind:"header",group:r.group});for(const o of r.actions){const a=r.group;s.push({kind:"action",item:o,group:o.action.isAI?{title:a.title,kind:a.kind,icon:ye.sparkle}:a,label:o.action.title,disabled:!!o.action.disabled,keybinding:t(o.action)})}}return s}var umt=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},hmt=function(n,e){return function(t,i){e(t,i,n)}},QC;const rue=Xi("gutter-lightbulb",ye.lightBulb,v("gutterLightbulbWidget","Icon which spawns code actions menu from the gutter when there is no space in the editor.")),oue=Xi("gutter-lightbulb-auto-fix",ye.lightbulbAutofix,v("gutterLightbulbAutoFixWidget","Icon which spawns code actions menu from the gutter when there is no space in the editor and a quick fix is available.")),aue=Xi("gutter-lightbulb-sparkle",ye.lightbulbSparkle,v("gutterLightbulbAIFixWidget","Icon which spawns code actions menu from the gutter when there is no space in the editor and an AI fix is available.")),lue=Xi("gutter-lightbulb-aifix-auto-fix",ye.lightbulbSparkleAutofix,v("gutterLightbulbAIFixAutoFixWidget","Icon which spawns code actions menu from the gutter when there is no space in the editor and an AI fix and a quick fix is available.")),cue=Xi("gutter-lightbulb-sparkle-filled",ye.sparkleFilled,v("gutterLightbulbSparkleFilledWidget","Icon which spawns code actions menu from the gutter when there is no space in the editor and an AI fix and a quick fix is available."));var tu;(function(n){n.Hidden={type:0};class e{constructor(i,s,r,o){this.actions=i,this.trigger=s,this.editorPosition=r,this.widgetPosition=o,this.type=1}}n.Showing=e})(tu||(tu={}));var Ig;let OD=(Ig=class extends ee{constructor(e,t){super(),this._editor=e,this._keybindingService=t,this._onClick=this._register(new X),this.onClick=this._onClick.event,this._state=tu.Hidden,this._gutterState=tu.Hidden,this._iconClasses=[],this.lightbulbClasses=["codicon-"+rue.id,"codicon-"+lue.id,"codicon-"+oue.id,"codicon-"+aue.id,"codicon-"+cue.id],this.gutterDecoration=QC.GUTTER_DECORATION,this._domNode=xe("div.lightBulbWidget"),this._domNode.role="listbox",this._register(Br.ignoreTarget(this._domNode)),this._editor.addContentWidget(this),this._register(this._editor.onDidChangeModelContent(i=>{const s=this._editor.getModel();(this.state.type!==1||!s||this.state.editorPosition.lineNumber>=s.getLineCount())&&this.hide(),(this.gutterState.type!==1||!s||this.gutterState.editorPosition.lineNumber>=s.getLineCount())&&this.gutterHide()})),this._register(pqe(this._domNode,i=>{if(this.state.type!==1)return;this._editor.focus(),i.preventDefault();const{top:s,height:r}=Fn(this._domNode),o=this._editor.getOption(67);let a=Math.floor(o/3);this.state.widgetPosition.position!==null&&this.state.widgetPosition.position.lineNumber<this.state.editorPosition.lineNumber&&(a+=o),this._onClick.fire({x:i.posx,y:s+r+a,actions:this.state.actions,trigger:this.state.trigger})})),this._register(re(this._domNode,"mouseenter",i=>{(i.buttons&1)===1&&this.hide()})),this._register(Ee.runAndSubscribe(this._keybindingService.onDidUpdateKeybindings,()=>{var i,s;this._preferredKbLabel=((i=this._keybindingService.lookupKeybinding(Jxe))==null?void 0:i.getLabel())??void 0,this._quickFixKbLabel=((s=this._keybindingService.lookupKeybinding(VJ))==null?void 0:s.getLabel())??void 0,this._updateLightBulbTitleAndIcon()})),this._register(this._editor.onMouseDown(async i=>{if(!i.target.element||!this.lightbulbClasses.some(l=>i.target.element&&i.target.element.classList.contains(l))||this.gutterState.type!==1)return;this._editor.focus();const{top:s,height:r}=Fn(i.target.element),o=this._editor.getOption(67);let a=Math.floor(o/3);this.gutterState.widgetPosition.position!==null&&this.gutterState.widgetPosition.position.lineNumber<this.gutterState.editorPosition.lineNumber&&(a+=o),this._onClick.fire({x:i.event.posx,y:s+r+a,actions:this.gutterState.actions,trigger:this.gutterState.trigger})}))}dispose(){super.dispose(),this._editor.removeContentWidget(this),this._gutterDecorationID&&this._removeGutterDecoration(this._gutterDecorationID)}getId(){return"LightBulbWidget"}getDomNode(){return this._domNode}getPosition(){return this._state.type===1?this._state.widgetPosition:null}update(e,t,i){if(e.validActions.length<=0)return this.gutterHide(),this.hide();if(!this._editor.hasTextFocus())return this.gutterHide(),this.hide();if(!this._editor.getOptions().get(65).enabled)return this.gutterHide(),this.hide();const o=this._editor.getModel();if(!o)return this.gutterHide(),this.hide();const{lineNumber:a,column:l}=o.validatePosition(i),c=o.getOptions().tabSize,d=this._editor.getOptions().get(50),u=o.getLineContent(a),h=EB(u,c),f=d.spaceWidth*h>22,g=x=>x>2&&this._editor.getTopForLineNumber(x)===this._editor.getTopForLineNumber(x-1),p=this._editor.getLineDecorations(a);let _=!1;if(p)for(const x of p){const E=x.options.glyphMarginClassName;if(E&&!this.lightbulbClasses.some(D=>E.includes(D))){_=!0;break}}let w=a,b=1;if(!f){const x=E=>{const D=o.getLineContent(E);return/^\s*$|^\s+/.test(D)||D.length<=b};if(a>1&&!g(a-1)){const E=o.getLineCount(),D=a===E,N=a>1&&x(a-1),I=!D&&x(a+1),H=x(a),z=!I&&!N;if(!I&&!N&&!_)return this.gutterState=new tu.Showing(e,t,i,{position:{lineNumber:w,column:b},preference:QC._posPref}),this.renderGutterLightbub(),this.hide();N||D||N&&!H?w-=1:(I||z&&H)&&(w+=1)}else if(a===1&&(a===o.getLineCount()||!x(a+1)&&!x(a)))if(this.gutterState=new tu.Showing(e,t,i,{position:{lineNumber:w,column:b},preference:QC._posPref}),_)this.gutterHide();else return this.renderGutterLightbub(),this.hide();else if(a<o.getLineCount()&&!g(a+1))w+=1;else if(l*d.spaceWidth<22)return this.hide();b=/^\S\s*$/.test(o.getLineContent(w))?2:1}this.state=new tu.Showing(e,t,i,{position:{lineNumber:w,column:b},preference:QC._posPref}),this._gutterDecorationID&&(this._removeGutterDecoration(this._gutterDecorationID),this.gutterHide());const y=e.validActions,S=e.validActions[0].action.kind;if(y.length!==1||!S){this._editor.layoutContentWidget(this);return}this._editor.layoutContentWidget(this)}hide(){this.state!==tu.Hidden&&(this.state=tu.Hidden,this._editor.layoutContentWidget(this))}gutterHide(){this.gutterState!==tu.Hidden&&(this._gutterDecorationID&&this._removeGutterDecoration(this._gutterDecorationID),this.gutterState=tu.Hidden)}get state(){return this._state}set state(e){this._state=e,this._updateLightBulbTitleAndIcon()}get gutterState(){return this._gutterState}set gutterState(e){this._gutterState=e,this._updateGutterLightBulbTitleAndIcon()}_updateLightBulbTitleAndIcon(){if(this._domNode.classList.remove(...this._iconClasses),this._iconClasses=[],this.state.type!==1)return;let e,t=!1;this.state.actions.allAIFixes?(e=ye.sparkleFilled,this.state.actions.validActions.length===1&&(t=!0)):this.state.actions.hasAutoFix?this.state.actions.hasAIFix?e=ye.lightbulbSparkleAutofix:e=ye.lightbulbAutofix:this.state.actions.hasAIFix?e=ye.lightbulbSparkle:e=ye.lightBulb,this._updateLightbulbTitle(this.state.actions.hasAutoFix,t),this._iconClasses=ot.asClassNameArray(e),this._domNode.classList.add(...this._iconClasses)}_updateGutterLightBulbTitleAndIcon(){if(this.gutterState.type!==1)return;let e,t=!1;this.gutterState.actions.allAIFixes?(e=cue,this.gutterState.actions.validActions.length===1&&(t=!0)):this.gutterState.actions.hasAutoFix?this.gutterState.actions.hasAIFix?e=lue:e=oue:this.gutterState.actions.hasAIFix?e=aue:e=rue,this._updateLightbulbTitle(this.gutterState.actions.hasAutoFix,t);const i=_t.register({description:"codicon-gutter-lightbulb-decoration",glyphMarginClassName:ot.asClassName(e),glyphMargin:{position:Td.Left},stickiness:1});this.gutterDecoration=i}renderGutterLightbub(){const e=this._editor.getSelection();e&&(this._gutterDecorationID===void 0?this._addGutterDecoration(e.startLineNumber):this._updateGutterDecoration(this._gutterDecorationID,e.startLineNumber))}_addGutterDecoration(e){this._editor.changeDecorations(t=>{this._gutterDecorationID=t.addDecoration(new M(e,0,e,0),this.gutterDecoration)})}_removeGutterDecoration(e){this._editor.changeDecorations(t=>{t.removeDecoration(e),this._gutterDecorationID=void 0})}_updateGutterDecoration(e,t){this._editor.changeDecorations(i=>{i.changeDecoration(e,new M(t,0,t,0)),i.changeDecorationOptions(e,this.gutterDecoration)})}_updateLightbulbTitle(e,t){this.state.type===1&&(t?this.title=v("codeActionAutoRun","Run: {0}",this.state.actions.validActions[0].action.title):e&&this._preferredKbLabel?this.title=v("preferredcodeActionWithKb","Show Code Actions. Preferred Quick Fix Available ({0})",this._preferredKbLabel):!e&&this._quickFixKbLabel?this.title=v("codeActionWithKb","Show Code Actions ({0})",this._quickFixKbLabel):e||(this.title=v("codeAction","Show Code Actions")))}set title(e){this._domNode.title=e}},QC=Ig,Ig.GUTTER_DECORATION=_t.register({description:"codicon-gutter-lightbulb-decoration",glyphMarginClassName:ot.asClassName(ye.lightBulb),glyphMargin:{position:Td.Left},stickiness:1}),Ig.ID="editor.contrib.lightbulbWidget",Ig._posPref=[0],Ig);OD=QC=umt([hmt(1,hi)],OD);var nLe=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},_K=function(n,e){return function(t,i){e(t,i,n)}};const sLe="acceptSelectedCodeAction",rLe="previewSelectedCodeAction";class fmt{get templateId(){return"header"}renderTemplate(e){e.classList.add("group-header");const t=document.createElement("span");return e.append(t),{container:e,text:t}}renderElement(e,t,i){var s;i.text.textContent=((s=e.group)==null?void 0:s.title)??""}disposeTemplate(e){}}let vK=class{get templateId(){return"action"}constructor(e,t){this._supportsPreview=e,this._keybindingService=t}renderTemplate(e){e.classList.add(this.templateId);const t=document.createElement("div");t.className="icon",e.append(t);const i=document.createElement("span");i.className="title",e.append(i);const s=new zx(e,Ka);return{container:e,icon:t,text:i,keybinding:s}}renderElement(e,t,i){var o,a,l;if((o=e.group)!=null&&o.icon?(i.icon.className=ot.asClassName(e.group.icon),e.group.icon.color&&(i.icon.style.color=Me(e.group.icon.color.id))):(i.icon.className=ot.asClassName(ye.lightBulb),i.icon.style.color="var(--vscode-editorLightBulb-foreground)"),!e.item||!e.label)return;i.text.textContent=oLe(e.label),i.keybinding.set(e.keybinding),Nqe(!!e.keybinding,i.keybinding.element);const s=(a=this._keybindingService.lookupKeybinding(sLe))==null?void 0:a.getLabel(),r=(l=this._keybindingService.lookupKeybinding(rLe))==null?void 0:l.getLabel();i.container.classList.toggle("option-disabled",e.disabled),e.disabled?i.container.title=e.label:s&&r?this._supportsPreview&&e.canPreview?i.container.title=v({key:"label-preview",comment:['placeholders are keybindings, e.g "F2 to Apply, Shift+F2 to Preview"']},"{0} to Apply, {1} to Preview",s,r):i.container.title=v({key:"label",comment:['placeholder is a keybinding, e.g "F2 to Apply"']},"{0} to Apply",s):i.container.title=""}disposeTemplate(e){e.keybinding.dispose()}};vK=nLe([_K(1,hi)],vK);class gmt extends UIEvent{constructor(){super("acceptSelectedAction")}}class due extends UIEvent{constructor(){super("previewSelectedAction")}}function pmt(n){if(n.kind==="action")return n.label}let bK=class extends ee{constructor(e,t,i,s,r,o){super(),this._delegate=s,this._contextViewService=r,this._keybindingService=o,this._actionLineHeight=24,this._headerLineHeight=26,this.cts=this._register(new mn),this.domNode=document.createElement("div"),this.domNode.classList.add("actionList");const a={getHeight:l=>l.kind==="header"?this._headerLineHeight:this._actionLineHeight,getTemplateId:l=>l.kind};this._list=this._register(new Ql(e,this.domNode,a,[new vK(t,this._keybindingService),new fmt],{keyboardSupport:!1,typeNavigationEnabled:!0,keyboardNavigationLabelProvider:{getKeyboardNavigationLabel:pmt},accessibilityProvider:{getAriaLabel:l=>{if(l.kind==="action"){let c=l.label?oLe(l==null?void 0:l.label):"";return l.disabled&&(c=v({key:"customQuickFixWidget.labels",comment:["Action widget labels for accessibility."]},"{0}, Disabled Reason: {1}",c,l.disabled)),c}return null},getWidgetAriaLabel:()=>v({key:"customQuickFixWidget",comment:["An action widget option"]},"Action Widget"),getRole:l=>l.kind==="action"?"option":"separator",getWidgetRole:()=>"listbox"}})),this._list.style(U0),this._register(this._list.onMouseClick(l=>this.onListClick(l))),this._register(this._list.onMouseOver(l=>this.onListHover(l))),this._register(this._list.onDidChangeFocus(()=>this.onFocus())),this._register(this._list.onDidChangeSelection(l=>this.onListSelection(l))),this._allMenuItems=i,this._list.splice(0,this._list.length,this._allMenuItems),this._list.length&&this.focusNext()}focusCondition(e){return!e.disabled&&e.kind==="action"}hide(e){this._delegate.onHide(e),this.cts.cancel(),this._contextViewService.hideContextView()}layout(e){const t=this._allMenuItems.filter(l=>l.kind==="header").length,s=this._allMenuItems.length*this._actionLineHeight+t*this._headerLineHeight-t*this._actionLineHeight;this._list.layout(s);let r=e;if(this._allMenuItems.length>=50)r=380;else{const l=this._allMenuItems.map((c,d)=>{const u=this.domNode.ownerDocument.getElementById(this._list.getElementID(d));if(u){u.style.width="auto";const h=u.getBoundingClientRect().width;return u.style.width="",h}return 0});r=Math.max(...l,e)}const a=Math.min(s,this.domNode.ownerDocument.body.clientHeight*.7);return this._list.layout(a,r),this.domNode.style.height=`${a}px`,this._list.domFocus(),r}focusPrevious(){this._list.focusPrevious(1,!0,void 0,this.focusCondition)}focusNext(){this._list.focusNext(1,!0,void 0,this.focusCondition)}acceptSelected(e){const t=this._list.getFocus();if(t.length===0)return;const i=t[0],s=this._list.element(i);if(!this.focusCondition(s))return;const r=e?new due:new gmt;this._list.setSelection([i],r)}onListSelection(e){if(!e.elements.length)return;const t=e.elements[0];t.item&&this.focusCondition(t)?this._delegate.onSelect(t.item,e.browserEvent instanceof due):this._list.setSelection([])}onFocus(){var s,r;const e=this._list.getFocus();if(e.length===0)return;const t=e[0],i=this._list.element(t);(r=(s=this._delegate).onFocus)==null||r.call(s,i.item)}async onListHover(e){const t=e.element;if(t&&t.item&&this.focusCondition(t)){if(this._delegate.onHover&&!t.disabled&&t.kind==="action"){const i=await this._delegate.onHover(t.item,this.cts.token);t.canPreview=i?i.canPreview:void 0}e.index&&this._list.splice(e.index,1,[t])}this._list.setFocus(typeof e.index=="number"?[e.index]:[])}onListClick(e){e.element&&this.focusCondition(e.element)&&this._list.setFocus([])}};bK=nLe([_K(4,hp),_K(5,hi)],bK);function oLe(n){return n.replace(/\r\n|\r|\n/g," ")}var mmt=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},a6=function(n,e){return function(t,i){e(t,i,n)}};B("actionBar.toggledBackground",HN,v("actionBar.toggledBackground","Background color for toggled action items in action bar."));const k0={Visible:new Re("codeActionMenuVisible",!1,v("codeActionMenuVisible","Whether the action widget list is visible"))},Z0=Wt("actionWidgetService");let E0=class extends ee{get isVisible(){return k0.Visible.getValue(this._contextKeyService)||!1}constructor(e,t,i){super(),this._contextViewService=e,this._contextKeyService=t,this._instantiationService=i,this._list=this._register(new As)}show(e,t,i,s,r,o,a){const l=k0.Visible.bindTo(this._contextKeyService),c=this._instantiationService.createInstance(bK,e,t,i,s);this._contextViewService.showContextView({getAnchor:()=>r,render:d=>(l.set(!0),this._renderWidget(d,c,a??[])),onHide:d=>{l.reset(),this._onWidgetClosed(d)}},o,!1)}acceptSelected(e){var t;(t=this._list.value)==null||t.acceptSelected(e)}focusPrevious(){var e,t;(t=(e=this._list)==null?void 0:e.value)==null||t.focusPrevious()}focusNext(){var e,t;(t=(e=this._list)==null?void 0:e.value)==null||t.focusNext()}hide(e){var t;(t=this._list.value)==null||t.hide(e),this._list.clear()}_renderWidget(e,t,i){var f;const s=document.createElement("div");if(s.classList.add("action-widget"),e.appendChild(s),this._list.value=t,this._list.value)s.appendChild(this._list.value.domNode);else throw new Error("List has no value");const r=new ue,o=document.createElement("div"),a=e.appendChild(o);a.classList.add("context-view-block"),r.add(re(a,Se.MOUSE_DOWN,g=>g.stopPropagation()));const l=document.createElement("div"),c=e.appendChild(l);c.classList.add("context-view-pointerBlock"),r.add(re(c,Se.POINTER_MOVE,()=>c.remove())),r.add(re(c,Se.MOUSE_DOWN,()=>c.remove()));let d=0;if(i.length){const g=this._createActionBar(".action-widget-action-bar",i);g&&(s.appendChild(g.getContainer().parentElement),r.add(g),d=g.getContainer().offsetWidth)}const u=(f=this._list.value)==null?void 0:f.layout(d);s.style.width=`${u}px`;const h=r.add(Hu(e));return r.add(h.onDidBlur(()=>this.hide(!0))),r}_createActionBar(e,t){if(!t.length)return;const i=xe(e),s=new Ul(i);return s.push(t,{icon:!1,label:!0}),s}_onWidgetClosed(e){var t;(t=this._list.value)==null||t.hide(e)}};E0=mmt([a6(0,hp),a6(1,at),a6(2,Ze)],E0);jt(Z0,E0,1);const cT=1100;Bi(class extends Ho{constructor(){super({id:"hideCodeActionWidget",title:lt("hideCodeActionWidget.title","Hide action widget"),precondition:k0.Visible,keybinding:{weight:cT,primary:9,secondary:[1033]}})}run(n){n.get(Z0).hide(!0)}});Bi(class extends Ho{constructor(){super({id:"selectPrevCodeAction",title:lt("selectPrevCodeAction.title","Select previous action"),precondition:k0.Visible,keybinding:{weight:cT,primary:16,secondary:[2064],mac:{primary:16,secondary:[2064,302]}}})}run(n){const e=n.get(Z0);e instanceof E0&&e.focusPrevious()}});Bi(class extends Ho{constructor(){super({id:"selectNextCodeAction",title:lt("selectNextCodeAction.title","Select next action"),precondition:k0.Visible,keybinding:{weight:cT,primary:18,secondary:[2066],mac:{primary:18,secondary:[2066,300]}}})}run(n){const e=n.get(Z0);e instanceof E0&&e.focusNext()}});Bi(class extends Ho{constructor(){super({id:sLe,title:lt("acceptSelected.title","Accept selected action"),precondition:k0.Visible,keybinding:{weight:cT,primary:3,secondary:[2137]}})}run(n){const e=n.get(Z0);e instanceof E0&&e.acceptSelected()}});Bi(class extends Ho{constructor(){super({id:rLe,title:lt("previewSelected.title","Preview selected action"),precondition:k0.Visible,keybinding:{weight:cT,primary:2051}})}run(n){const e=n.get(Z0);e instanceof E0&&e.acceptSelected(!0)}});const aLe=new Re("supportedCodeAction",""),uue="_typescript.applyFixAllCodeAction";class _mt extends ee{constructor(e,t,i,s=250){super(),this._editor=e,this._markerService=t,this._signalChange=i,this._delay=s,this._autoTriggerTimer=this._register(new Fd),this._register(this._markerService.onMarkerChanged(r=>this._onMarkerChanges(r))),this._register(this._editor.onDidChangeCursorPosition(()=>this._tryAutoTrigger()))}trigger(e){const t=this._getRangeOfSelectionUnlessWhitespaceEnclosed(e);this._signalChange(t?{trigger:e,selection:t}:void 0)}_onMarkerChanges(e){const t=this._editor.getModel();t&&e.some(i=>tD(i,t.uri))&&this._tryAutoTrigger()}_tryAutoTrigger(){this._autoTriggerTimer.cancelAndSet(()=>{this.trigger({type:2,triggerAction:nl.Default})},this._delay)}_getRangeOfSelectionUnlessWhitespaceEnclosed(e){if(!this._editor.hasModel())return;const t=this._editor.getSelection();if(e.type===1)return t;const i=this._editor.getOption(65).enabled;if(i!==cd.Off){{if(i===cd.On)return t;if(i===cd.OnCode){if(!t.isEmpty())return t;const r=this._editor.getModel(),{lineNumber:o,column:a}=t.getPosition(),l=r.getLineContent(o);if(l.length===0)return;if(a===1){if(/\s/.test(l[0]))return}else if(a===r.getLineMaxColumn(o)){if(/\s/.test(l[l.length-1]))return}else if(/\s/.test(l[a-2])&&/\s/.test(l[a-1]))return}}return t}}}var ub;(function(n){n.Empty={type:0};class e{constructor(i,s,r){this.trigger=i,this.position=s,this._cancellablePromise=r,this.type=1,this.actions=r.catch(o=>{if(Vc(o))return lLe;throw o})}cancel(){this._cancellablePromise.cancel()}}n.Triggered=e})(ub||(ub={}));const lLe=Object.freeze({allActions:[],validActions:[],dispose:()=>{},documentation:[],hasAutoFix:!1,hasAIFix:!1,allAIFixes:!1});class vmt extends ee{constructor(e,t,i,s,r,o,a){super(),this._editor=e,this._registry=t,this._markerService=i,this._progressService=r,this._configurationService=o,this._telemetryService=a,this._codeActionOracle=this._register(new As),this._state=ub.Empty,this._onDidChangeState=this._register(new X),this.onDidChangeState=this._onDidChangeState.event,this._disposed=!1,this._supportedCodeActions=aLe.bindTo(s),this._register(this._editor.onDidChangeModel(()=>this._update())),this._register(this._editor.onDidChangeModelLanguage(()=>this._update())),this._register(this._registry.onDidChange(()=>this._update())),this._register(this._editor.onDidChangeConfiguration(l=>{l.hasChanged(65)&&this._update()})),this._update()}dispose(){this._disposed||(this._disposed=!0,super.dispose(),this.setState(ub.Empty,!0))}_settingEnabledNearbyQuickfixes(){var t;const e=(t=this._editor)==null?void 0:t.getModel();return this._configurationService?this._configurationService.getValue("editor.codeActionWidget.includeNearbyQuickFixes",{resource:e==null?void 0:e.uri}):!1}_update(){if(this._disposed)return;this._codeActionOracle.value=void 0,this.setState(ub.Empty);const e=this._editor.getModel();if(e&&this._registry.has(e)&&!this._editor.getOption(92)){const t=this._registry.all(e).flatMap(i=>i.providedCodeActionKinds??[]);this._supportedCodeActions.set(t.join(" ")),this._codeActionOracle.value=new _mt(this._editor,this._markerService,i=>{var l;if(!i){this.setState(ub.Empty);return}const s=i.selection.getStartPosition(),r=Ds(async c=>{var d,u,h,f,g,p,_,w,b,y;if(this._settingEnabledNearbyQuickfixes()&&i.trigger.type===1&&(i.trigger.triggerAction===nl.QuickFix||(u=(d=i.trigger.filter)==null?void 0:d.include)!=null&&u.contains(tn.QuickFix))){const S=await O1(this._registry,e,i.selection,i.trigger,Cu.None,c),x=[...S.allActions];if(c.isCancellationRequested)return lLe;const E=(h=S.validActions)==null?void 0:h.some(N=>N.action.kind?tn.QuickFix.contains(new cn(N.action.kind)):!1),D=this._markerService.read({resource:e.uri});if(E){for(const N of S.validActions)(g=(f=N.action.command)==null?void 0:f.arguments)!=null&&g.some(I=>typeof I=="string"&&I.includes(uue))&&(N.action.diagnostics=[...D.filter(I=>I.relatedInformation)]);return{validActions:S.validActions,allActions:x,documentation:S.documentation,hasAutoFix:S.hasAutoFix,hasAIFix:S.hasAIFix,allAIFixes:S.allAIFixes,dispose:()=>{S.dispose()}}}else if(!E&&D.length>0){const N=i.selection.getPosition();let I=N,H=Number.MAX_VALUE;const z=[...S.validActions];for(const J of D){const j=J.endColumn,ne=J.endLineNumber,oe=J.startLineNumber;if(ne===N.lineNumber||oe===N.lineNumber){I=new Y(ne,j);const ve={type:i.trigger.type,triggerAction:i.trigger.triggerAction,filter:{include:(p=i.trigger.filter)!=null&&p.include?(_=i.trigger.filter)==null?void 0:_.include:tn.QuickFix},autoApply:i.trigger.autoApply,context:{notAvailableMessage:((w=i.trigger.context)==null?void 0:w.notAvailableMessage)||"",position:I}},te=new $e(I.lineNumber,I.column,I.lineNumber,I.column),ce=await O1(this._registry,e,te,ve,Cu.None,c);if(ce.validActions.length!==0){for(const Ie of ce.validActions)(y=(b=Ie.action.command)==null?void 0:b.arguments)!=null&&y.some(Ce=>typeof Ce=="string"&&Ce.includes(uue))&&(Ie.action.diagnostics=[...D.filter(Ce=>Ce.relatedInformation)]);S.allActions.length===0&&x.push(...ce.allActions),Math.abs(N.column-j)<H?z.unshift(...ce.validActions):z.push(...ce.validActions)}H=Math.abs(N.column-j)}}const G=z.filter((J,j,ne)=>ne.findIndex(oe=>oe.action.title===J.action.title)===j);return G.sort((J,j)=>J.action.isPreferred&&!j.action.isPreferred?-1:!J.action.isPreferred&&j.action.isPreferred||J.action.isAI&&!j.action.isAI?1:!J.action.isAI&&j.action.isAI?-1:0),{validActions:G,allActions:x,documentation:S.documentation,hasAutoFix:S.hasAutoFix,hasAIFix:S.hasAIFix,allAIFixes:S.allAIFixes,dispose:()=>{S.dispose()}}}}if(i.trigger.type===1){const S=new js,x=await O1(this._registry,e,i.selection,i.trigger,Cu.None,c);return this._telemetryService&&this._telemetryService.publicLog2("codeAction.invokedDurations",{codeActions:x.validActions.length,duration:S.elapsed()}),x}return O1(this._registry,e,i.selection,i.trigger,Cu.None,c)});i.trigger.type===1&&((l=this._progressService)==null||l.showWhile(r,250));const o=new ub.Triggered(i.trigger,s,r);let a=!1;this._state.type===1&&(a=this._state.trigger.type===1&&o.type===1&&o.trigger.type===2&&this._state.position!==o.position),a?setTimeout(()=>{this.setState(o)},500):this.setState(o)},void 0),this._codeActionOracle.value.trigger({type:2,triggerAction:nl.Default})}else this._supportedCodeActions.reset()}trigger(e){var t;(t=this._codeActionOracle.value)==null||t.trigger(e)}setState(e,t){e!==this._state&&(this._state.type===1&&this._state.cancel(),this._state=e,!t&&!this._disposed&&this._onDidChangeState.fire(e))}}var bmt=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},oh=function(n,e){return function(t,i){e(t,i,n)}},JC;const wmt="quickfix-edit-highlight";var n_;let ex=(n_=class extends ee{static get(e){return e.getContribution(JC.ID)}constructor(e,t,i,s,r,o,a,l,c,d,u){super(),this._commandService=a,this._configurationService=l,this._actionWidgetService=c,this._instantiationService=d,this._telemetryService=u,this._activeCodeActions=this._register(new As),this._showDisabled=!1,this._disposed=!1,this._editor=e,this._model=this._register(new vmt(this._editor,r.codeActionProvider,t,i,o,l,this._telemetryService)),this._register(this._model.onDidChangeState(h=>this.update(h))),this._lightBulbWidget=new Wu(()=>{const h=this._editor.getContribution(OD.ID);return h&&this._register(h.onClick(f=>this.showCodeActionsFromLightbulb(f.actions,f))),h}),this._resolver=s.createInstance(mK),this._register(this._editor.onDidLayoutChange(()=>this._actionWidgetService.hide()))}dispose(){this._disposed=!0,super.dispose()}async showCodeActionsFromLightbulb(e,t){if(e.allAIFixes&&e.validActions.length===1){const i=e.validActions[0],s=i.action.command;s&&s.id==="inlineChat.start"&&s.arguments&&s.arguments.length>=1&&(s.arguments[0]={...s.arguments[0],autoSend:!1}),await this._applyCodeAction(i,!1,!1,Db.FromAILightbulb);return}await this.showCodeActionList(e,t,{includeDisabledActions:!1,fromLightbulb:!0})}showCodeActions(e,t,i){return this.showCodeActionList(t,i,{includeDisabledActions:!1,fromLightbulb:!1})}manualTriggerAtCurrentPosition(e,t,i,s){var o;if(!this._editor.hasModel())return;(o=Xa.get(this._editor))==null||o.closeMessage();const r=this._editor.getPosition();this._trigger({type:1,triggerAction:t,filter:i,autoApply:s,context:{notAvailableMessage:e,position:r}})}_trigger(e){return this._model.trigger(e)}async _applyCodeAction(e,t,i,s){try{await this._instantiationService.invokeFunction(rmt,e,s,{preview:i,editor:this._editor})}finally{t&&this._trigger({type:2,triggerAction:nl.QuickFix,filter:{}})}}hideLightBulbWidget(){var e,t;(e=this._lightBulbWidget.rawValue)==null||e.hide(),(t=this._lightBulbWidget.rawValue)==null||t.gutterHide()}async update(e){var s,r,o,a,l;if(e.type!==1){this.hideLightBulbWidget();return}let t;try{t=await e.actions}catch(c){pt(c);return}if(this._disposed)return;const i=this._editor.getSelection();if((i==null?void 0:i.startLineNumber)===e.position.lineNumber)if((s=this._lightBulbWidget.value)==null||s.update(t,e.trigger,e.position),e.trigger.type===1){if((r=e.trigger.filter)!=null&&r.include){const d=this.tryGetValidActionToApply(e.trigger,t);if(d){try{this.hideLightBulbWidget(),await this._applyCodeAction(d,!1,!1,Db.FromCodeActions)}finally{t.dispose()}return}if(e.trigger.context){const u=this.getInvalidActionThatWouldHaveBeenApplied(e.trigger,t);if(u&&u.action.disabled){(o=Xa.get(this._editor))==null||o.showMessage(u.action.disabled,e.trigger.context.position),t.dispose();return}}}const c=!!((a=e.trigger.filter)!=null&&a.include);if(e.trigger.context&&(!t.allActions.length||!c&&!t.validActions.length)){(l=Xa.get(this._editor))==null||l.showMessage(e.trigger.context.notAvailableMessage,e.trigger.context.position),this._activeCodeActions.value=t,t.dispose();return}this._activeCodeActions.value=t,this.showCodeActionList(t,this.toCoords(e.position),{includeDisabledActions:c,fromLightbulb:!1})}else this._actionWidgetService.isVisible?t.dispose():this._activeCodeActions.value=t}getInvalidActionThatWouldHaveBeenApplied(e,t){if(t.allActions.length&&(e.autoApply==="first"&&t.validActions.length===0||e.autoApply==="ifSingle"&&t.allActions.length===1))return t.allActions.find(({action:i})=>i.disabled)}tryGetValidActionToApply(e,t){if(t.validActions.length&&(e.autoApply==="first"&&t.validActions.length>0||e.autoApply==="ifSingle"&&t.validActions.length===1))return t.validActions[0]}async showCodeActionList(e,t,i){const s=this._editor.createDecorationsCollection(),r=this._editor.getDomNode();if(!r)return;const o=i.includeDisabledActions&&(this._showDisabled||e.validActions.length===0)?e.allActions:e.validActions;if(!o.length)return;const a=Y.isIPosition(t)?this.toCoords(t):t,l={onSelect:async(c,d)=>{this._applyCodeAction(c,!0,!!d,i.fromLightbulb?Db.FromAILightbulb:Db.FromCodeActions),this._actionWidgetService.hide(!1),s.clear()},onHide:c=>{var d;(d=this._editor)==null||d.focus(),s.clear()},onHover:async(c,d)=>{var f;if(d.isCancellationRequested)return;let u=!1;const h=c.action.kind;if(h){const g=new cn(h);u=[tn.RefactorExtract,tn.RefactorInline,tn.RefactorRewrite,tn.RefactorMove,tn.Source].some(_=>_.contains(g))}return{canPreview:u||!!((f=c.action.edit)!=null&&f.edits.length)}},onFocus:c=>{var d,u;if(c&&c.action){const h=c.action.ranges,f=c.action.diagnostics;if(s.clear(),h&&h.length>0){const g=f&&(f==null?void 0:f.length)>1?f.map(p=>({range:p,options:JC.DECORATION})):h.map(p=>({range:p,options:JC.DECORATION}));s.set(g)}else if(f&&f.length>0){const g=f.map(_=>({range:_,options:JC.DECORATION}));s.set(g);const p=f[0];if(p.startLineNumber&&p.startColumn){const _=(u=(d=this._editor.getModel())==null?void 0:d.getWordAtPosition({lineNumber:p.startLineNumber,column:p.startColumn}))==null?void 0:u.word;lf(v("editingNewSelection","Context: {0} at line {1} and column {2}.",_,p.startLineNumber,p.startColumn))}}}else s.clear()}};this._actionWidgetService.show("codeActionWidget",!0,dmt(o,this._shouldShowHeaders(),this._resolver.getResolver()),l,a,r,this._getActionBarActions(e,t,i))}toCoords(e){if(!this._editor.hasModel())return{x:0,y:0};this._editor.revealPosition(e,1),this._editor.render();const t=this._editor.getScrolledVisiblePosition(e),i=Fn(this._editor.getDomNode()),s=i.left+t.left,r=i.top+t.top+t.height;return{x:s,y:r}}_shouldShowHeaders(){var t;const e=(t=this._editor)==null?void 0:t.getModel();return this._configurationService.getValue("editor.codeActionWidget.showHeaders",{resource:e==null?void 0:e.uri})}_getActionBarActions(e,t,i){if(i.fromLightbulb)return[];const s=e.documentation.map(r=>({id:r.id,label:r.title,tooltip:r.tooltip??"",class:void 0,enabled:!0,run:()=>this._commandService.executeCommand(r.id,...r.arguments??[])}));return i.includeDisabledActions&&e.validActions.length>0&&e.allActions.length!==e.validActions.length&&s.push(this._showDisabled?{id:"hideMoreActions",label:v("hideMoreActions","Hide Disabled"),enabled:!0,tooltip:"",class:void 0,run:()=>(this._showDisabled=!1,this.showCodeActionList(e,t,i))}:{id:"showMoreActions",label:v("showMoreActions","Show Disabled"),enabled:!0,tooltip:"",class:void 0,run:()=>(this._showDisabled=!0,this.showCodeActionList(e,t,i))}),s}},JC=n_,n_.ID="editor.contrib.codeActionController",n_.DECORATION=_t.register({description:"quickfix-highlight",className:wmt}),n_);ex=JC=bmt([oh(1,Cf),oh(2,at),oh(3,Ze),oh(4,Be),oh(5,nv),oh(6,Vi),oh(7,Tt),oh(8,Z0),oh(9,Ze),oh(10,Hr)],ex);zc((n,e)=>{((s,r)=>{r&&e.addRule(`.monaco-editor ${s} { background-color: ${r}; }`)})(".quickfix-edit-highlight",n.getColor(wg));const i=n.getColor(Sm);i&&e.addRule(`.monaco-editor .quickfix-edit-highlight { border: 1px ${Tu(n.type)?"dotted":"solid"} ${i}; box-sizing: border-box; }`)});function dT(n){return he.regex(aLe.keys()[0],new RegExp("(\\s|^)"+$l(n.value)+"\\b"))}const zJ={type:"object",defaultSnippets:[{body:{kind:""}}],properties:{kind:{type:"string",description:v("args.schema.kind","Kind of the code action to run.")},apply:{type:"string",description:v("args.schema.apply","Controls when the returned actions are applied."),default:"ifSingle",enum:["first","ifSingle","never"],enumDescriptions:[v("args.schema.apply.first","Always apply the first returned code action."),v("args.schema.apply.ifSingle","Apply the first returned code action if it is the only one."),v("args.schema.apply.never","Do not apply the returned code actions.")]},preferred:{type:"boolean",default:!1,description:v("args.schema.preferred","Controls if only preferred code actions should be returned.")}}};function X0(n,e,t,i,s=nl.Default){if(n.hasModel()){const r=ex.get(n);r==null||r.manualTriggerAtCurrentPosition(e,s,t,i)}}class Cmt extends Oe{constructor(){super({id:VJ,label:v("quickfix.trigger.label","Quick Fix..."),alias:"Quick Fix...",precondition:he.and(F.writable,F.hasCodeActionsProvider),kbOpts:{kbExpr:F.textInputFocus,primary:2137,weight:100}})}run(e,t){return X0(t,v("editor.action.quickFix.noneMessage","No code actions available"),void 0,void 0,nl.QuickFix)}}class ymt extends vs{constructor(){super({id:Qxe,precondition:he.and(F.writable,F.hasCodeActionsProvider),metadata:{description:"Trigger a code action",args:[{name:"args",schema:zJ}]}})}runEditorCommand(e,t,i){const s=Bh.fromUser(i,{kind:cn.Empty,apply:"ifSingle"});return X0(t,typeof(i==null?void 0:i.kind)=="string"?s.preferred?v("editor.action.codeAction.noneMessage.preferred.kind","No preferred code actions for '{0}' available",i.kind):v("editor.action.codeAction.noneMessage.kind","No code actions for '{0}' available",i.kind):s.preferred?v("editor.action.codeAction.noneMessage.preferred","No preferred code actions available"):v("editor.action.codeAction.noneMessage","No code actions available"),{include:s.kind,includeSourceActions:!0,onlyIncludePreferredActions:s.preferred},s.apply)}}class Smt extends Oe{constructor(){super({id:eLe,label:v("refactor.label","Refactor..."),alias:"Refactor...",precondition:he.and(F.writable,F.hasCodeActionsProvider),kbOpts:{kbExpr:F.textInputFocus,primary:3120,mac:{primary:1328},weight:100},contextMenuOpts:{group:"1_modification",order:2,when:he.and(F.writable,dT(tn.Refactor))},metadata:{description:"Refactor...",args:[{name:"args",schema:zJ}]}})}run(e,t,i){const s=Bh.fromUser(i,{kind:tn.Refactor,apply:"never"});return X0(t,typeof(i==null?void 0:i.kind)=="string"?s.preferred?v("editor.action.refactor.noneMessage.preferred.kind","No preferred refactorings for '{0}' available",i.kind):v("editor.action.refactor.noneMessage.kind","No refactorings for '{0}' available",i.kind):s.preferred?v("editor.action.refactor.noneMessage.preferred","No preferred refactorings available"):v("editor.action.refactor.noneMessage","No refactorings available"),{include:tn.Refactor.contains(s.kind)?s.kind:cn.None,onlyIncludePreferredActions:s.preferred},s.apply,nl.Refactor)}}class xmt extends Oe{constructor(){super({id:tLe,label:v("source.label","Source Action..."),alias:"Source Action...",precondition:he.and(F.writable,F.hasCodeActionsProvider),contextMenuOpts:{group:"1_modification",order:2.1,when:he.and(F.writable,dT(tn.Source))},metadata:{description:"Source Action...",args:[{name:"args",schema:zJ}]}})}run(e,t,i){const s=Bh.fromUser(i,{kind:tn.Source,apply:"never"});return X0(t,typeof(i==null?void 0:i.kind)=="string"?s.preferred?v("editor.action.source.noneMessage.preferred.kind","No preferred source actions for '{0}' available",i.kind):v("editor.action.source.noneMessage.kind","No source actions for '{0}' available",i.kind):s.preferred?v("editor.action.source.noneMessage.preferred","No preferred source actions available"):v("editor.action.source.noneMessage","No source actions available"),{include:tn.Source.contains(s.kind)?s.kind:cn.None,includeSourceActions:!0,onlyIncludePreferredActions:s.preferred},s.apply,nl.SourceAction)}}class Lmt extends Oe{constructor(){super({id:fK,label:v("organizeImports.label","Organize Imports"),alias:"Organize Imports",precondition:he.and(F.writable,dT(tn.SourceOrganizeImports)),kbOpts:{kbExpr:F.textInputFocus,primary:1581,weight:100}})}run(e,t){return X0(t,v("editor.action.organize.noneMessage","No organize imports action available"),{include:tn.SourceOrganizeImports,includeSourceActions:!0},"ifSingle",nl.OrganizeImports)}}class kmt extends Oe{constructor(){super({id:gK,label:v("fixAll.label","Fix All"),alias:"Fix All",precondition:he.and(F.writable,dT(tn.SourceFixAll))})}run(e,t){return X0(t,v("fixAll.noneMessage","No fix all action available"),{include:tn.SourceFixAll,includeSourceActions:!0},"ifSingle",nl.FixAll)}}class Emt extends Oe{constructor(){super({id:Jxe,label:v("autoFix.label","Auto Fix..."),alias:"Auto Fix...",precondition:he.and(F.writable,dT(tn.QuickFix)),kbOpts:{kbExpr:F.textInputFocus,primary:1625,mac:{primary:2649},weight:100}})}run(e,t){return X0(t,v("editor.action.autoFix.noneMessage","No auto fixes available"),{include:tn.QuickFix,onlyIncludePreferredActions:!0},"ifSingle",nl.AutoFix)}}Xt(ex.ID,ex,3);Xt(OD.ID,OD,4);we(Cmt);we(Smt);we(xmt);we(Lmt);we(Emt);we(kmt);Te(new ymt);_n.as(Bd.Configuration).registerConfiguration({...jN,properties:{"editor.codeActionWidget.showHeaders":{type:"boolean",scope:5,description:v("showCodeActionHeaders","Enable/disable showing group headers in the Code Action menu."),default:!0}}});_n.as(Bd.Configuration).registerConfiguration({...jN,properties:{"editor.codeActionWidget.includeNearbyQuickFixes":{type:"boolean",scope:5,description:v("includeNearbyQuickFixes","Enable/disable showing nearest Quick Fix within a line when not currently on a diagnostic."),default:!0}}});_n.as(Bd.Configuration).registerConfiguration({...jN,properties:{"editor.codeActions.triggerOnFocusChange":{type:"boolean",scope:5,markdownDescription:v("triggerOnFocusChange","Enable triggering {0} when {1} is set to {2}. Code Actions must be set to {3} to be triggered for window and focus changes.","`#editor.codeActionsOnSave#`","`#files.autoSave#`","`afterDelay`","`always`"),default:!1}}});class wK{constructor(){this.lenses=[],this._disposables=new ue}dispose(){this._disposables.dispose()}get isDisposed(){return this._disposables.isDisposed}add(e,t){this._disposables.add(e);for(const i of e.lenses)this.lenses.push({symbol:i,provider:t})}}async function cLe(n,e,t){const i=n.ordered(e),s=new Map,r=new wK,o=i.map(async(a,l)=>{s.set(a,l);try{const c=await Promise.resolve(a.provideCodeLenses(e,t));c&&r.add(c,a)}catch(c){Wn(c)}});return await Promise.all(o),r.lenses=r.lenses.sort((a,l)=>a.symbol.range.startLineNumber<l.symbol.range.startLineNumber?-1:a.symbol.range.startLineNumber>l.symbol.range.startLineNumber?1:s.get(a.provider)<s.get(l.provider)?-1:s.get(a.provider)>s.get(l.provider)?1:a.symbol.range.startColumn<l.symbol.range.startColumn?-1:a.symbol.range.startColumn>l.symbol.range.startColumn?1:0),r}Gt.registerCommand("_executeCodeLensProvider",function(n,...e){let[t,i]=e;si(Xe.isUri(t)),si(typeof i=="number"||!i);const{codeLensProvider:s}=n.get(Be),r=n.get(Zi).getModel(t);if(!r)throw Ec();const o=[],a=new ue;return cLe(s,r,xt.None).then(l=>{a.add(l);const c=[];for(const d of l.lenses)i==null||d.symbol.command?o.push(d.symbol):i-- >0&&d.provider.resolveCodeLens&&c.push(Promise.resolve(d.provider.resolveCodeLens(r,d.symbol,xt.None)).then(u=>o.push(u||d.symbol)));return Promise.all(c)}).then(()=>o).finally(()=>{setTimeout(()=>a.dispose(),100)})});var Imt=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Dmt=function(n,e){return function(t,i){e(t,i,n)}};const dLe=Wt("ICodeLensCache");class hue{constructor(e,t){this.lineCount=e,this.data=t}}let CK=class{constructor(e){this._fakeProvider=new class{provideCodeLenses(){throw new Error("not supported")}},this._cache=new vf(20,.75);const t="codelens/cache";lk(Ei,()=>e.remove(t,1));const i="codelens/cache2",s=e.get(i,1,"{}");this._deserialize(s);const r=Ee.filter(e.onWillSaveState,o=>o.reason===aD.SHUTDOWN);Ee.once(r)(o=>{e.store(i,this._serialize(),1,1)})}put(e,t){const i=t.lenses.map(o=>{var a;return{range:o.symbol.range,command:o.symbol.command&&{id:"",title:(a=o.symbol.command)==null?void 0:a.title}}}),s=new wK;s.add({lenses:i,dispose:()=>{}},this._fakeProvider);const r=new hue(e.getLineCount(),s);this._cache.set(e.uri.toString(),r)}get(e){const t=this._cache.get(e.uri.toString());return t&&t.lineCount===e.getLineCount()?t.data:void 0}delete(e){this._cache.delete(e.uri.toString())}_serialize(){const e=Object.create(null);for(const[t,i]of this._cache){const s=new Set;for(const r of i.data.lenses)s.add(r.symbol.range.startLineNumber);e[t]={lineCount:i.lineCount,lines:[...s.values()]}}return JSON.stringify(e)}_deserialize(e){try{const t=JSON.parse(e);for(const i in t){const s=t[i],r=[];for(const a of s.lines)r.push({range:new M(a,1,a,11)});const o=new wK;o.add({lenses:r,dispose(){}},this._fakeProvider),this._cache.set(i,new hue(s.lineCount,o))}}catch{}}};CK=Imt([Dmt(0,Wd)],CK);jt(dLe,CK,1);class Nmt{constructor(e,t,i){this.afterColumn=1073741824,this.afterLineNumber=e,this.heightInPx=t,this._onHeight=i,this.suppressMouseDown=!0,this.domNode=document.createElement("div")}onComputedHeight(e){this._lastHeight===void 0?this._lastHeight=e:this._lastHeight!==e&&(this._lastHeight=e,this._onHeight())}isVisible(){return this._lastHeight!==0&&this.domNode.hasAttribute("monaco-visible-view-zone")}}const GE=class GE{constructor(e,t){this.allowEditorOverflow=!1,this.suppressMouseDown=!0,this._commands=new Map,this._isEmpty=!0,this._editor=e,this._id=`codelens.widget-${GE._idPool++}`,this.updatePosition(t),this._domNode=document.createElement("span"),this._domNode.className="codelens-decoration"}withCommands(e,t){this._commands.clear();const i=[];let s=!1;for(let r=0;r<e.length;r++){const o=e[r];if(o&&(s=!0,o.command)){const a=Ym(o.command.title.trim());if(o.command.id){const l=`c${GE._idPool++}`;i.push(xe("a",{id:l,title:o.command.tooltip,role:"button"},...a)),this._commands.set(l,o.command)}else i.push(xe("span",{title:o.command.tooltip},...a));r+1<e.length&&i.push(xe("span",void 0,"|"))}}s?(sr(this._domNode,...i),this._isEmpty&&t&&this._domNode.classList.add("fadein"),this._isEmpty=!1):sr(this._domNode,xe("span",void 0,"no commands"))}getCommand(e){return e.parentElement===this._domNode?this._commands.get(e.id):void 0}getId(){return this._id}getDomNode(){return this._domNode}updatePosition(e){const t=this._editor.getModel().getLineFirstNonWhitespaceColumn(e);this._widgetPosition={position:{lineNumber:e,column:t},preference:[1]}}getPosition(){return this._widgetPosition||null}};GE._idPool=0;let yK=GE;class l6{constructor(){this._removeDecorations=[],this._addDecorations=[],this._addDecorationsCallbacks=[]}addDecoration(e,t){this._addDecorations.push(e),this._addDecorationsCallbacks.push(t)}removeDecoration(e){this._removeDecorations.push(e)}commit(e){const t=e.deltaDecorations(this._removeDecorations,this._addDecorations);for(let i=0,s=t.length;i<s;i++)this._addDecorationsCallbacks[i](t[i])}}const fue=_t.register({collapseOnReplaceEdit:!0,description:"codelens"});class gue{constructor(e,t,i,s,r,o){this._isDisposed=!1,this._editor=t,this._data=e,this._decorationIds=[];let a;const l=[];this._data.forEach((c,d)=>{c.symbol.command&&l.push(c.symbol),i.addDecoration({range:c.symbol.range,options:fue},u=>this._decorationIds[d]=u),a?a=M.plusRange(a,c.symbol.range):a=M.lift(c.symbol.range)}),this._viewZone=new Nmt(a.startLineNumber-1,r,o),this._viewZoneId=s.addZone(this._viewZone),l.length>0&&(this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(l,!1))}_createContentWidgetIfNecessary(){this._contentWidget?this._editor.layoutContentWidget(this._contentWidget):(this._contentWidget=new yK(this._editor,this._viewZone.afterLineNumber+1),this._editor.addContentWidget(this._contentWidget))}dispose(e,t){this._decorationIds.forEach(e.removeDecoration,e),this._decorationIds=[],t==null||t.removeZone(this._viewZoneId),this._contentWidget&&(this._editor.removeContentWidget(this._contentWidget),this._contentWidget=void 0),this._isDisposed=!0}isDisposed(){return this._isDisposed}isValid(){return this._decorationIds.some((e,t)=>{const i=this._editor.getModel().getDecorationRange(e),s=this._data[t].symbol;return!!(i&&M.isEmpty(s.range)===i.isEmpty())})}updateCodeLensSymbols(e,t){this._decorationIds.forEach(t.removeDecoration,t),this._decorationIds=[],this._data=e,this._data.forEach((i,s)=>{t.addDecoration({range:i.symbol.range,options:fue},r=>this._decorationIds[s]=r)})}updateHeight(e,t){this._viewZone.heightInPx=e,t.layoutZone(this._viewZoneId),this._contentWidget&&this._editor.layoutContentWidget(this._contentWidget)}computeIfNecessary(e){if(!this._viewZone.isVisible())return null;for(let t=0;t<this._decorationIds.length;t++){const i=e.getDecorationRange(this._decorationIds[t]);i&&(this._data[t].symbol.range=i)}return this._data}updateCommands(e){this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(e,!0);for(let t=0;t<this._data.length;t++){const i=e[t];if(i){const{symbol:s}=this._data[t];s.command=i.command||s.command}}}getCommand(e){var t;return(t=this._contentWidget)==null?void 0:t.getCommand(e)}getLineNumber(){const e=this._editor.getModel().getDecorationRange(this._decorationIds[0]);return e?e.startLineNumber:-1}update(e){if(this.isValid()){const t=this._editor.getModel().getDecorationRange(this._decorationIds[0]);t&&(this._viewZone.afterLineNumber=t.startLineNumber-1,e.layoutZone(this._viewZoneId),this._contentWidget&&(this._contentWidget.updatePosition(t.startLineNumber),this._editor.layoutContentWidget(this._contentWidget)))}}}var Tmt=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},ZL=function(n,e){return function(t,i){e(t,i,n)}},nS;let FD=(nS=class{constructor(e,t,i,s,r,o){this._editor=e,this._languageFeaturesService=t,this._commandService=s,this._notificationService=r,this._codeLensCache=o,this._disposables=new ue,this._localToDispose=new ue,this._lenses=[],this._oldCodeLensModels=new ue,this._provideCodeLensDebounce=i.for(t.codeLensProvider,"CodeLensProvide",{min:250}),this._resolveCodeLensesDebounce=i.for(t.codeLensProvider,"CodeLensResolve",{min:250,salt:"resolve"}),this._resolveCodeLensesScheduler=new yi(()=>this._resolveCodeLensesInViewport(),this._resolveCodeLensesDebounce.default()),this._disposables.add(this._editor.onDidChangeModel(()=>this._onModelChange())),this._disposables.add(this._editor.onDidChangeModelLanguage(()=>this._onModelChange())),this._disposables.add(this._editor.onDidChangeConfiguration(a=>{(a.hasChanged(50)||a.hasChanged(19)||a.hasChanged(18))&&this._updateLensStyle(),a.hasChanged(17)&&this._onModelChange()})),this._disposables.add(t.codeLensProvider.onDidChange(this._onModelChange,this)),this._onModelChange(),this._updateLensStyle()}dispose(){var e;this._localDispose(),this._disposables.dispose(),this._oldCodeLensModels.dispose(),(e=this._currentCodeLensModel)==null||e.dispose()}_getLayoutInfo(){const e=Math.max(1.3,this._editor.getOption(67)/this._editor.getOption(52));let t=this._editor.getOption(19);return(!t||t<5)&&(t=this._editor.getOption(52)*.9|0),{fontSize:t,codeLensHeight:t*e|0}}_updateLensStyle(){const{codeLensHeight:e,fontSize:t}=this._getLayoutInfo(),i=this._editor.getOption(18),s=this._editor.getOption(50),{style:r}=this._editor.getContainerDomNode();r.setProperty("--vscode-editorCodeLens-lineHeight",`${e}px`),r.setProperty("--vscode-editorCodeLens-fontSize",`${t}px`),r.setProperty("--vscode-editorCodeLens-fontFeatureSettings",s.fontFeatureSettings),i&&(r.setProperty("--vscode-editorCodeLens-fontFamily",i),r.setProperty("--vscode-editorCodeLens-fontFamilyDefault",To.fontFamily)),this._editor.changeViewZones(o=>{for(const a of this._lenses)a.updateHeight(e,o)})}_localDispose(){var e,t,i;(e=this._getCodeLensModelPromise)==null||e.cancel(),this._getCodeLensModelPromise=void 0,(t=this._resolveCodeLensesPromise)==null||t.cancel(),this._resolveCodeLensesPromise=void 0,this._localToDispose.clear(),this._oldCodeLensModels.clear(),(i=this._currentCodeLensModel)==null||i.dispose()}_onModelChange(){this._localDispose();const e=this._editor.getModel();if(!e||!this._editor.getOption(17)||e.isTooLargeForTokenization())return;const t=this._codeLensCache.get(e);if(t&&this._renderCodeLensSymbols(t),!this._languageFeaturesService.codeLensProvider.has(e)){t&&T_(()=>{const s=this._codeLensCache.get(e);t===s&&(this._codeLensCache.delete(e),this._onModelChange())},30*1e3,this._localToDispose);return}for(const s of this._languageFeaturesService.codeLensProvider.all(e))if(typeof s.onDidChange=="function"){const r=s.onDidChange(()=>i.schedule());this._localToDispose.add(r)}const i=new yi(()=>{var r;const s=Date.now();(r=this._getCodeLensModelPromise)==null||r.cancel(),this._getCodeLensModelPromise=Ds(o=>cLe(this._languageFeaturesService.codeLensProvider,e,o)),this._getCodeLensModelPromise.then(o=>{this._currentCodeLensModel&&this._oldCodeLensModels.add(this._currentCodeLensModel),this._currentCodeLensModel=o,this._codeLensCache.put(e,o);const a=this._provideCodeLensDebounce.update(e,Date.now()-s);i.delay=a,this._renderCodeLensSymbols(o),this._resolveCodeLensesInViewportSoon()},pt)},this._provideCodeLensDebounce.get(e));this._localToDispose.add(i),this._localToDispose.add(Ye(()=>this._resolveCodeLensesScheduler.cancel())),this._localToDispose.add(this._editor.onDidChangeModelContent(()=>{var s;this._editor.changeDecorations(r=>{this._editor.changeViewZones(o=>{const a=[];let l=-1;this._lenses.forEach(d=>{!d.isValid()||l===d.getLineNumber()?a.push(d):(d.update(o),l=d.getLineNumber())});const c=new l6;a.forEach(d=>{d.dispose(c,o),this._lenses.splice(this._lenses.indexOf(d),1)}),c.commit(r)})}),i.schedule(),this._resolveCodeLensesScheduler.cancel(),(s=this._resolveCodeLensesPromise)==null||s.cancel(),this._resolveCodeLensesPromise=void 0})),this._localToDispose.add(this._editor.onDidFocusEditorText(()=>{i.schedule()})),this._localToDispose.add(this._editor.onDidBlurEditorText(()=>{i.cancel()})),this._localToDispose.add(this._editor.onDidScrollChange(s=>{s.scrollTopChanged&&this._lenses.length>0&&this._resolveCodeLensesInViewportSoon()})),this._localToDispose.add(this._editor.onDidLayoutChange(()=>{this._resolveCodeLensesInViewportSoon()})),this._localToDispose.add(Ye(()=>{if(this._editor.getModel()){const s=ju.capture(this._editor);this._editor.changeDecorations(r=>{this._editor.changeViewZones(o=>{this._disposeAllLenses(r,o)})}),s.restore(this._editor)}else this._disposeAllLenses(void 0,void 0)})),this._localToDispose.add(this._editor.onMouseDown(s=>{if(s.target.type!==9)return;let r=s.target.element;if((r==null?void 0:r.tagName)==="SPAN"&&(r=r.parentElement),(r==null?void 0:r.tagName)==="A")for(const o of this._lenses){const a=o.getCommand(r);if(a){this._commandService.executeCommand(a.id,...a.arguments||[]).catch(l=>this._notificationService.error(l));break}}})),i.schedule()}_disposeAllLenses(e,t){const i=new l6;for(const s of this._lenses)s.dispose(i,t);e&&i.commit(e),this._lenses.length=0}_renderCodeLensSymbols(e){if(!this._editor.hasModel())return;const t=this._editor.getModel().getLineCount(),i=[];let s;for(const a of e.lenses){const l=a.symbol.range.startLineNumber;l<1||l>t||(s&&s[s.length-1].symbol.range.startLineNumber===l?s.push(a):(s=[a],i.push(s)))}if(!i.length&&!this._lenses.length)return;const r=ju.capture(this._editor),o=this._getLayoutInfo();this._editor.changeDecorations(a=>{this._editor.changeViewZones(l=>{const c=new l6;let d=0,u=0;for(;u<i.length&&d<this._lenses.length;){const h=i[u][0].symbol.range.startLineNumber,f=this._lenses[d].getLineNumber();f<h?(this._lenses[d].dispose(c,l),this._lenses.splice(d,1)):f===h?(this._lenses[d].updateCodeLensSymbols(i[u],c),u++,d++):(this._lenses.splice(d,0,new gue(i[u],this._editor,c,l,o.codeLensHeight,()=>this._resolveCodeLensesInViewportSoon())),d++,u++)}for(;d<this._lenses.length;)this._lenses[d].dispose(c,l),this._lenses.splice(d,1);for(;u<i.length;)this._lenses.push(new gue(i[u],this._editor,c,l,o.codeLensHeight,()=>this._resolveCodeLensesInViewportSoon())),u++;c.commit(a)})}),r.restore(this._editor)}_resolveCodeLensesInViewportSoon(){this._editor.getModel()&&this._resolveCodeLensesScheduler.schedule()}_resolveCodeLensesInViewport(){var o;(o=this._resolveCodeLensesPromise)==null||o.cancel(),this._resolveCodeLensesPromise=void 0;const e=this._editor.getModel();if(!e)return;const t=[],i=[];if(this._lenses.forEach(a=>{const l=a.computeIfNecessary(e);l&&(t.push(l),i.push(a))}),t.length===0)return;const s=Date.now(),r=Ds(a=>{const l=t.map((c,d)=>{const u=new Array(c.length),h=c.map((f,g)=>!f.symbol.command&&typeof f.provider.resolveCodeLens=="function"?Promise.resolve(f.provider.resolveCodeLens(e,f.symbol,a)).then(p=>{u[g]=p},Wn):(u[g]=f.symbol,Promise.resolve(void 0)));return Promise.all(h).then(()=>{!a.isCancellationRequested&&!i[d].isDisposed()&&i[d].updateCommands(u)})});return Promise.all(l)});this._resolveCodeLensesPromise=r,this._resolveCodeLensesPromise.then(()=>{const a=this._resolveCodeLensesDebounce.update(e,Date.now()-s);this._resolveCodeLensesScheduler.delay=a,this._currentCodeLensModel&&this._codeLensCache.put(e,this._currentCodeLensModel),this._oldCodeLensModels.clear(),r===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)},a=>{pt(a),r===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)})}async getModel(){var e;return await this._getCodeLensModelPromise,await this._resolveCodeLensesPromise,(e=this._currentCodeLensModel)!=null&&e.isDisposed?void 0:this._currentCodeLensModel}},nS.ID="css.editor.codeLens",nS);FD=Tmt([ZL(1,Be),ZL(2,Zl),ZL(3,Vi),ZL(4,jn),ZL(5,dLe)],FD);Xt(FD.ID,FD,1);we(class extends Oe{constructor(){super({id:"codelens.showLensesInCurrentLine",precondition:F.hasCodeLensProvider,label:v("showLensOnLine","Show CodeLens Commands For Current Line"),alias:"Show CodeLens Commands For Current Line"})}async run(e,t){if(!t.hasModel())return;const i=e.get(Uc),s=e.get(Vi),r=e.get(jn),o=t.getSelection().positionLineNumber,a=t.getContribution(FD.ID);if(!a)return;const l=await a.getModel();if(!l)return;const c=[];for(const h of l.lenses)h.symbol.command&&h.symbol.range.startLineNumber===o&&c.push({label:h.symbol.command.title,command:h.symbol.command});if(c.length===0)return;const d=await i.pick(c,{canPickMany:!1,placeHolder:v("placeHolder","Select a command")});if(!d)return;let u=d.command;if(l.isDisposed){const h=await a.getModel(),f=h==null?void 0:h.lenses.find(g=>{var p;return g.symbol.range.startLineNumber===o&&((p=g.symbol.command)==null?void 0:p.title)===u.title});if(!f||!f.symbol.command)return;u=f.symbol.command}try{await s.executeCommand(u.id,...u.arguments||[])}catch(h){r.error(h)}}});var uLe=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},SK=function(n,e){return function(t,i){e(t,i,n)}};let BD=class{constructor(e){this._editorWorkerService=e}async provideDocumentColors(e,t){return this._editorWorkerService.computeDefaultDocumentColors(e.uri)}provideColorPresentations(e,t,i){const s=t.range,r=t.color,o=r.alpha,a=new ge(new Jt(Math.round(255*r.red),Math.round(255*r.green),Math.round(255*r.blue),o)),l=o?ge.Format.CSS.formatRGB(a):ge.Format.CSS.formatRGBA(a),c=o?ge.Format.CSS.formatHSL(a):ge.Format.CSS.formatHSLA(a),d=o?ge.Format.CSS.formatHex(a):ge.Format.CSS.formatHexA(a),u=[];return u.push({label:l,textEdit:{range:s,text:l}}),u.push({label:c,textEdit:{range:s,text:c}}),u.push({label:d,textEdit:{range:s,text:d}}),u}};BD=uLe([SK(0,wa)],BD);let xK=class extends ee{constructor(e,t){super(),this._register(e.colorProvider.register("*",new BD(t)))}};xK=uLe([SK(0,Be),SK(1,wa)],xK);$x(xK);async function hLe(n,e,t,i=!0){return UJ(new Rmt,n,e,t,i)}function fLe(n,e,t,i){return Promise.resolve(t.provideColorPresentations(n,e,i))}class Rmt{constructor(){}async compute(e,t,i,s){const r=await e.provideDocumentColors(t,i);if(Array.isArray(r))for(const o of r)s.push({colorInfo:o,provider:e});return Array.isArray(r)}}class Amt{constructor(){}async compute(e,t,i,s){const r=await e.provideDocumentColors(t,i);if(Array.isArray(r))for(const o of r)s.push({range:o.range,color:[o.color.red,o.color.green,o.color.blue,o.color.alpha]});return Array.isArray(r)}}class Mmt{constructor(e){this.colorInfo=e}async compute(e,t,i,s){const r=await e.provideColorPresentations(t,this.colorInfo,xt.None);return Array.isArray(r)&&s.push(...r),Array.isArray(r)}}async function UJ(n,e,t,i,s){let r=!1,o;const a=[],l=e.ordered(t);for(let c=l.length-1;c>=0;c--){const d=l[c];if(d instanceof BD)o=d;else try{await n.compute(d,t,i,a)&&(r=!0)}catch(u){Wn(u)}}return r?a:o&&s?(await n.compute(o,t,i,a),a):[]}function gLe(n,e){const{colorProvider:t}=n.get(Be),i=n.get(Zi).getModel(e);if(!i)throw Ec();const s=n.get(Tt).getValue("editor.defaultColorDecorators",{resource:e});return{model:i,colorProviderRegistry:t,isDefaultColorDecoratorsEnabled:s}}Gt.registerCommand("_executeDocumentColorProvider",function(n,...e){const[t]=e;if(!(t instanceof Xe))throw Ec();const{model:i,colorProviderRegistry:s,isDefaultColorDecoratorsEnabled:r}=gLe(n,t);return UJ(new Amt,s,i,xt.None,r)});Gt.registerCommand("_executeColorPresentationProvider",function(n,...e){const[t,i]=e,{uri:s,range:r}=i;if(!(s instanceof Xe)||!Array.isArray(t)||t.length!==4||!M.isIRange(r))throw Ec();const{model:o,colorProviderRegistry:a,isDefaultColorDecoratorsEnabled:l}=gLe(n,s),[c,d,u,h]=t;return UJ(new Mmt({range:r,color:{red:c,green:d,blue:u,alpha:h}}),a,o,xt.None,l)});var Pmt=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},c6=function(n,e){return function(t,i){e(t,i,n)}},LK;const pLe=Object.create({});var s_;let tx=(s_=class extends ee{constructor(e,t,i,s){super(),this._editor=e,this._configurationService=t,this._languageFeaturesService=i,this._localToDispose=this._register(new ue),this._decorationsIds=[],this._colorDatas=new Map,this._colorDecoratorIds=this._editor.createDecorationsCollection(),this._ruleFactory=new IO(this._editor),this._decoratorLimitReporter=new Omt,this._colorDecorationClassRefs=this._register(new ue),this._debounceInformation=s.for(i.colorProvider,"Document Colors",{min:LK.RECOMPUTE_TIME}),this._register(e.onDidChangeModel(()=>{this._isColorDecoratorsEnabled=this.isEnabled(),this.updateColors()})),this._register(e.onDidChangeModelLanguage(()=>this.updateColors())),this._register(i.colorProvider.onDidChange(()=>this.updateColors())),this._register(e.onDidChangeConfiguration(r=>{const o=this._isColorDecoratorsEnabled;this._isColorDecoratorsEnabled=this.isEnabled(),this._isDefaultColorDecoratorsEnabled=this._editor.getOption(148);const a=o!==this._isColorDecoratorsEnabled||r.hasChanged(21),l=r.hasChanged(148);(a||l)&&(this._isColorDecoratorsEnabled?this.updateColors():this.removeAllDecorations())})),this._timeoutTimer=null,this._computePromise=null,this._isColorDecoratorsEnabled=this.isEnabled(),this._isDefaultColorDecoratorsEnabled=this._editor.getOption(148),this.updateColors()}isEnabled(){const e=this._editor.getModel();if(!e)return!1;const t=e.getLanguageId(),i=this._configurationService.getValue(t);if(i&&typeof i=="object"){const s=i.colorDecorators;if(s&&s.enable!==void 0&&!s.enable)return s.enable}return this._editor.getOption(20)}static get(e){return e.getContribution(this.ID)}dispose(){this.stop(),this.removeAllDecorations(),super.dispose()}updateColors(){if(this.stop(),!this._isColorDecoratorsEnabled)return;const e=this._editor.getModel();!e||!this._languageFeaturesService.colorProvider.has(e)||(this._localToDispose.add(this._editor.onDidChangeModelContent(()=>{this._timeoutTimer||(this._timeoutTimer=new Fd,this._timeoutTimer.cancelAndSet(()=>{this._timeoutTimer=null,this.beginCompute()},this._debounceInformation.get(e)))})),this.beginCompute())}async beginCompute(){this._computePromise=Ds(async e=>{const t=this._editor.getModel();if(!t)return[];const i=new js(!1),s=await hLe(this._languageFeaturesService.colorProvider,t,e,this._isDefaultColorDecoratorsEnabled);return this._debounceInformation.update(t,i.elapsed()),s});try{const e=await this._computePromise;this.updateDecorations(e),this.updateColorDecorators(e),this._computePromise=null}catch(e){pt(e)}}stop(){this._timeoutTimer&&(this._timeoutTimer.cancel(),this._timeoutTimer=null),this._computePromise&&(this._computePromise.cancel(),this._computePromise=null),this._localToDispose.clear()}updateDecorations(e){const t=e.map(i=>({range:{startLineNumber:i.colorInfo.range.startLineNumber,startColumn:i.colorInfo.range.startColumn,endLineNumber:i.colorInfo.range.endLineNumber,endColumn:i.colorInfo.range.endColumn},options:_t.EMPTY}));this._editor.changeDecorations(i=>{this._decorationsIds=i.deltaDecorations(this._decorationsIds,t),this._colorDatas=new Map,this._decorationsIds.forEach((s,r)=>this._colorDatas.set(s,e[r]))})}updateColorDecorators(e){this._colorDecorationClassRefs.clear();const t=[],i=this._editor.getOption(21);for(let r=0;r<e.length&&t.length<i;r++){const{red:o,green:a,blue:l,alpha:c}=e[r].colorInfo.color,d=new Jt(Math.round(o*255),Math.round(a*255),Math.round(l*255),c),u=`rgba(${d.r}, ${d.g}, ${d.b}, ${d.a})`,h=this._colorDecorationClassRefs.add(this._ruleFactory.createClassNameRef({backgroundColor:u}));t.push({range:{startLineNumber:e[r].colorInfo.range.startLineNumber,startColumn:e[r].colorInfo.range.startColumn,endLineNumber:e[r].colorInfo.range.endLineNumber,endColumn:e[r].colorInfo.range.endColumn},options:{description:"colorDetector",before:{content:b0e,inlineClassName:`${h.className} colorpicker-color-decoration`,inlineClassNameAffectsLetterSpacing:!0,attachedData:pLe}}})}const s=i<e.length?i:!1;this._decoratorLimitReporter.update(e.length,s),this._colorDecoratorIds.set(t)}removeAllDecorations(){this._editor.removeDecorations(this._decorationsIds),this._decorationsIds=[],this._colorDecoratorIds.clear(),this._colorDecorationClassRefs.clear()}getColorData(e){const t=this._editor.getModel();if(!t)return null;const i=t.getDecorationsInRange(M.fromPositions(e,e)).filter(s=>this._colorDatas.has(s.id));return i.length===0?null:this._colorDatas.get(i[0].id)}isColorDecoration(e){return this._colorDecoratorIds.has(e)}},LK=s_,s_.ID="editor.contrib.colorDetector",s_.RECOMPUTE_TIME=1e3,s_);tx=LK=Pmt([c6(1,Tt),c6(2,Be),c6(3,Zl)],tx);class Omt{constructor(){this._onDidChange=new X,this._computed=0,this._limited=!1}update(e,t){(e!==this._computed||t!==this._limited)&&(this._computed=e,this._limited=t,this._onDidChange.fire())}}Xt(tx.ID,tx,1);class Fmt{get color(){return this._color}set color(e){this._color.equals(e)||(this._color=e,this._onDidChangeColor.fire(e))}get presentation(){return this.colorPresentations[this.presentationIndex]}get colorPresentations(){return this._colorPresentations}set colorPresentations(e){this._colorPresentations=e,this.presentationIndex>e.length-1&&(this.presentationIndex=0),this._onDidChangePresentation.fire(this.presentation)}constructor(e,t,i){this.presentationIndex=i,this._onColorFlushed=new X,this.onColorFlushed=this._onColorFlushed.event,this._onDidChangeColor=new X,this.onDidChangeColor=this._onDidChangeColor.event,this._onDidChangePresentation=new X,this.onDidChangePresentation=this._onDidChangePresentation.event,this.originalColor=e,this._color=e,this._colorPresentations=t}selectNextColorPresentation(){this.presentationIndex=(this.presentationIndex+1)%this.colorPresentations.length,this.flushColor(),this._onDidChangePresentation.fire(this.presentation)}guessColorPresentation(e,t){let i=-1;for(let s=0;s<this.colorPresentations.length;s++)if(t.toLowerCase()===this.colorPresentations[s].label){i=s;break}if(i===-1){const s=t.split("(")[0].toLowerCase();for(let r=0;r<this.colorPresentations.length;r++)if(this.colorPresentations[r].label.toLowerCase().startsWith(s)){i=r;break}}i!==-1&&i!==this.presentationIndex&&(this.presentationIndex=i,this._onDidChangePresentation.fire(this.presentation))}flushColor(){this._onColorFlushed.fire(this._color)}}const Nl=xe;class Bmt extends ee{constructor(e,t,i,s=!1){super(),this.model=t,this.showingStandaloneColorPicker=s,this._closeButton=null,this._domNode=Nl(".colorpicker-header"),_e(e,this._domNode),this._pickedColorNode=_e(this._domNode,Nl(".picked-color")),_e(this._pickedColorNode,Nl("span.codicon.codicon-color-mode")),this._pickedColorPresentation=_e(this._pickedColorNode,document.createElement("span")),this._pickedColorPresentation.classList.add("picked-color-presentation");const r=v("clickToToggleColorOptions","Click to toggle color options (rgb/hsl/hex)");this._pickedColorNode.setAttribute("title",r),this._originalColorNode=_e(this._domNode,Nl(".original-color")),this._originalColorNode.style.backgroundColor=ge.Format.CSS.format(this.model.originalColor)||"",this.backgroundColor=i.getColorTheme().getColor(AP)||ge.white,this._register(i.onDidColorThemeChange(o=>{this.backgroundColor=o.getColor(AP)||ge.white})),this._register(re(this._pickedColorNode,Se.CLICK,()=>this.model.selectNextColorPresentation())),this._register(re(this._originalColorNode,Se.CLICK,()=>{this.model.color=this.model.originalColor,this.model.flushColor()})),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this._register(t.onDidChangePresentation(this.onDidChangePresentation,this)),this._pickedColorNode.style.backgroundColor=ge.Format.CSS.format(t.color)||"",this._pickedColorNode.classList.toggle("light",t.color.rgba.a<.5?this.backgroundColor.isLighter():t.color.isLighter()),this.onDidChangeColor(this.model.color),this.showingStandaloneColorPicker&&(this._domNode.classList.add("standalone-colorpicker"),this._closeButton=this._register(new Wmt(this._domNode)))}get closeButton(){return this._closeButton}get pickedColorNode(){return this._pickedColorNode}get originalColorNode(){return this._originalColorNode}onDidChangeColor(e){this._pickedColorNode.style.backgroundColor=ge.Format.CSS.format(e)||"",this._pickedColorNode.classList.toggle("light",e.rgba.a<.5?this.backgroundColor.isLighter():e.isLighter()),this.onDidChangePresentation()}onDidChangePresentation(){this._pickedColorPresentation.textContent=this.model.presentation?this.model.presentation.label:""}}class Wmt extends ee{constructor(e){super(),this._onClicked=this._register(new X),this.onClicked=this._onClicked.event,this._button=document.createElement("div"),this._button.classList.add("close-button"),_e(e,this._button);const t=document.createElement("div");t.classList.add("close-button-inner-div"),_e(this._button,t),_e(t,Nl(".button"+ot.asCSSSelector(Xi("color-picker-close",ye.close,v("closeIcon","Icon to close the color picker"))))).classList.add("close-icon"),this._register(re(this._button,Se.CLICK,()=>{this._onClicked.fire()}))}}class Hmt extends ee{constructor(e,t,i,s=!1){super(),this.model=t,this.pixelRatio=i,this._insertButton=null,this._domNode=Nl(".colorpicker-body"),_e(e,this._domNode),this._saturationBox=new Vmt(this._domNode,this.model,this.pixelRatio),this._register(this._saturationBox),this._register(this._saturationBox.onDidChange(this.onDidSaturationValueChange,this)),this._register(this._saturationBox.onColorFlushed(this.flushColor,this)),this._opacityStrip=new zmt(this._domNode,this.model,s),this._register(this._opacityStrip),this._register(this._opacityStrip.onDidChange(this.onDidOpacityChange,this)),this._register(this._opacityStrip.onColorFlushed(this.flushColor,this)),this._hueStrip=new Umt(this._domNode,this.model,s),this._register(this._hueStrip),this._register(this._hueStrip.onDidChange(this.onDidHueChange,this)),this._register(this._hueStrip.onColorFlushed(this.flushColor,this)),s&&(this._insertButton=this._register(new $mt(this._domNode)),this._domNode.classList.add("standalone-colorpicker"))}flushColor(){this.model.flushColor()}onDidSaturationValueChange({s:e,v:t}){const i=this.model.color.hsva;this.model.color=new ge(new zh(i.h,e,t,i.a))}onDidOpacityChange(e){const t=this.model.color.hsva;this.model.color=new ge(new zh(t.h,t.s,t.v,e))}onDidHueChange(e){const t=this.model.color.hsva,i=(1-e)*360;this.model.color=new ge(new zh(i===360?0:i,t.s,t.v,t.a))}get domNode(){return this._domNode}get saturationBox(){return this._saturationBox}get enterButton(){return this._insertButton}layout(){this._saturationBox.layout(),this._opacityStrip.layout(),this._hueStrip.layout()}}class Vmt extends ee{constructor(e,t,i){super(),this.model=t,this.pixelRatio=i,this._onDidChange=new X,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new X,this.onColorFlushed=this._onColorFlushed.event,this._domNode=Nl(".saturation-wrap"),_e(e,this._domNode),this._canvas=document.createElement("canvas"),this._canvas.className="saturation-box",_e(this._domNode,this._canvas),this.selection=Nl(".saturation-selection"),_e(this._domNode,this.selection),this.layout(),this._register(re(this._domNode,Se.POINTER_DOWN,s=>this.onPointerDown(s))),this._register(this.model.onDidChangeColor(this.onDidChangeColor,this)),this.monitor=null}get domNode(){return this._domNode}onPointerDown(e){if(!e.target||!(e.target instanceof Element))return;this.monitor=this._register(new Mx);const t=Fn(this._domNode);e.target!==this.selection&&this.onDidChangePosition(e.offsetX,e.offsetY),this.monitor.startMonitoring(e.target,e.pointerId,e.buttons,s=>this.onDidChangePosition(s.pageX-t.left,s.pageY-t.top),()=>null);const i=re(e.target.ownerDocument,Se.POINTER_UP,()=>{this._onColorFlushed.fire(),i.dispose(),this.monitor&&(this.monitor.stopMonitoring(!0),this.monitor=null)},!0)}onDidChangePosition(e,t){const i=Math.max(0,Math.min(1,e/this.width)),s=Math.max(0,Math.min(1,1-t/this.height));this.paintSelection(i,s),this._onDidChange.fire({s:i,v:s})}layout(){this.width=this._domNode.offsetWidth,this.height=this._domNode.offsetHeight,this._canvas.width=this.width*this.pixelRatio,this._canvas.height=this.height*this.pixelRatio,this.paint();const e=this.model.color.hsva;this.paintSelection(e.s,e.v)}paint(){const e=this.model.color.hsva,t=new ge(new zh(e.h,1,1,1)),i=this._canvas.getContext("2d"),s=i.createLinearGradient(0,0,this._canvas.width,0);s.addColorStop(0,"rgba(255, 255, 255, 1)"),s.addColorStop(.5,"rgba(255, 255, 255, 0.5)"),s.addColorStop(1,"rgba(255, 255, 255, 0)");const r=i.createLinearGradient(0,0,0,this._canvas.height);r.addColorStop(0,"rgba(0, 0, 0, 0)"),r.addColorStop(1,"rgba(0, 0, 0, 1)"),i.rect(0,0,this._canvas.width,this._canvas.height),i.fillStyle=ge.Format.CSS.format(t),i.fill(),i.fillStyle=s,i.fill(),i.fillStyle=r,i.fill()}paintSelection(e,t){this.selection.style.left=`${e*this.width}px`,this.selection.style.top=`${this.height-t*this.height}px`}onDidChangeColor(e){if(this.monitor&&this.monitor.isMonitoring())return;this.paint();const t=e.hsva;this.paintSelection(t.s,t.v)}}class mLe extends ee{constructor(e,t,i=!1){super(),this.model=t,this._onDidChange=new X,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new X,this.onColorFlushed=this._onColorFlushed.event,i?(this.domNode=_e(e,Nl(".standalone-strip")),this.overlay=_e(this.domNode,Nl(".standalone-overlay"))):(this.domNode=_e(e,Nl(".strip")),this.overlay=_e(this.domNode,Nl(".overlay"))),this.slider=_e(this.domNode,Nl(".slider")),this.slider.style.top="0px",this._register(re(this.domNode,Se.POINTER_DOWN,s=>this.onPointerDown(s))),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this.layout()}layout(){this.height=this.domNode.offsetHeight-this.slider.offsetHeight;const e=this.getValue(this.model.color);this.updateSliderPosition(e)}onDidChangeColor(e){const t=this.getValue(e);this.updateSliderPosition(t)}onPointerDown(e){if(!e.target||!(e.target instanceof Element))return;const t=this._register(new Mx),i=Fn(this.domNode);this.domNode.classList.add("grabbing"),e.target!==this.slider&&this.onDidChangeTop(e.offsetY),t.startMonitoring(e.target,e.pointerId,e.buttons,r=>this.onDidChangeTop(r.pageY-i.top),()=>null);const s=re(e.target.ownerDocument,Se.POINTER_UP,()=>{this._onColorFlushed.fire(),s.dispose(),t.stopMonitoring(!0),this.domNode.classList.remove("grabbing")},!0)}onDidChangeTop(e){const t=Math.max(0,Math.min(1,1-e/this.height));this.updateSliderPosition(t),this._onDidChange.fire(t)}updateSliderPosition(e){this.slider.style.top=`${(1-e)*this.height}px`}}class zmt extends mLe{constructor(e,t,i=!1){super(e,t,i),this.domNode.classList.add("opacity-strip"),this.onDidChangeColor(this.model.color)}onDidChangeColor(e){super.onDidChangeColor(e);const{r:t,g:i,b:s}=e.rgba,r=new ge(new Jt(t,i,s,1)),o=new ge(new Jt(t,i,s,0));this.overlay.style.background=`linear-gradient(to bottom, ${r} 0%, ${o} 100%)`}getValue(e){return e.hsva.a}}class Umt extends mLe{constructor(e,t,i=!1){super(e,t,i),this.domNode.classList.add("hue-strip")}getValue(e){return 1-e.hsva.h/360}}class $mt extends ee{constructor(e){super(),this._onClicked=this._register(new X),this.onClicked=this._onClicked.event,this._button=_e(e,document.createElement("button")),this._button.classList.add("insert-button"),this._button.textContent="Insert",this._register(re(this._button,Se.CLICK,()=>{this._onClicked.fire()}))}get button(){return this._button}}class jmt extends Xl{constructor(e,t,i,s,r=!1){super(),this.model=t,this.pixelRatio=i,this._register(BI.getInstance(nt(e)).onDidChange(()=>this.layout())),this._domNode=Nl(".colorpicker-widget"),e.appendChild(this._domNode),this.header=this._register(new Bmt(this._domNode,this.model,s,r)),this.body=this._register(new Hmt(this._domNode,this.model,this.pixelRatio,r))}layout(){this.body.layout()}get domNode(){return this._domNode}}class d6{constructor(e,t,i,s){this.priority=e,this.range=t,this.initialMousePosX=i,this.initialMousePosY=s,this.type=1}equals(e){return e.type===1&&this.range.equalsRange(e.range)}canAdoptVisibleHover(e,t){return e.type===1&&t.lineNumber===this.range.startLineNumber}}class K2{constructor(e,t,i,s,r,o){this.priority=e,this.owner=t,this.range=i,this.initialMousePosX=s,this.initialMousePosY=r,this.supportsMarkerHover=o,this.type=2}equals(e){return e.type===2&&this.owner===e.owner}canAdoptVisibleHover(e,t){return e.type===2&&this.owner===e.owner}}class I0{constructor(e){this.renderedHoverParts=e}dispose(){for(const e of this.renderedHoverParts)e.dispose()}}const Q0=new class{constructor(){this._participants=[]}register(e){this._participants.push(e)}getAll(){return this._participants}};var _Le=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},vLe=function(n,e){return function(t,i){e(t,i,n)}};class Kmt{constructor(e,t,i,s){this.owner=e,this.range=t,this.model=i,this.provider=s,this.forceShowAtRange=!0}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}let WD=class{constructor(e,t){this._editor=e,this._themeService=t,this.hoverOrdinal=2}computeSync(e,t){return[]}computeAsync(e,t,i){return Ml.fromPromise(this._computeAsync(e,t,i))}async _computeAsync(e,t,i){if(!this._editor.hasModel())return[];const s=tx.get(this._editor);if(!s)return[];for(const r of t){if(!s.isColorDecoration(r))continue;const o=s.getColorData(r.range.getStartPosition());if(o)return[await bLe(this,this._editor.getModel(),o.colorInfo,o.provider)]}return[]}renderHoverParts(e,t){const i=wLe(this,this._editor,this._themeService,t,e);if(!i)return new I0([]);this._colorPicker=i.colorPicker;const s={hoverPart:i.hoverPart,hoverElement:this._colorPicker.domNode,dispose(){i.disposables.dispose()}};return new I0([s])}handleResize(){var e;(e=this._colorPicker)==null||e.layout()}isColorPickerVisible(){return!!this._colorPicker}};WD=_Le([vLe(1,ws)],WD);class qmt{constructor(e,t,i,s){this.owner=e,this.range=t,this.model=i,this.provider=s}}let HD=class{constructor(e,t){this._editor=e,this._themeService=t,this._color=null}async createColorHover(e,t,i){if(!this._editor.hasModel()||!tx.get(this._editor))return null;const r=await hLe(i,this._editor.getModel(),xt.None);let o=null,a=null;for(const u of r){const h=u.colorInfo;M.containsRange(h.range,e.range)&&(o=h,a=u.provider)}const l=o??e,c=a??t,d=!!o;return{colorHover:await bLe(this,this._editor.getModel(),l,c),foundInEditor:d}}async updateEditorModel(e){if(!this._editor.hasModel())return;const t=e.model;let i=new M(e.range.startLineNumber,e.range.startColumn,e.range.endLineNumber,e.range.endColumn);this._color&&(await q2(this._editor.getModel(),t,this._color,i,e),i=CLe(this._editor,i,t))}renderHoverParts(e,t){return wLe(this,this._editor,this._themeService,t,e)}set color(e){this._color=e}get color(){return this._color}};HD=_Le([vLe(1,ws)],HD);async function bLe(n,e,t,i){const s=e.getValueInRange(t.range),{red:r,green:o,blue:a,alpha:l}=t.color,c=new Jt(Math.round(r*255),Math.round(o*255),Math.round(a*255),l),d=new ge(c),u=await fLe(e,t,i,xt.None),h=new Fmt(d,[],0);return h.colorPresentations=u||[],h.guessColorPresentation(d,s),n instanceof WD?new Kmt(n,M.lift(t.range),h,i):new qmt(n,M.lift(t.range),h,i)}function wLe(n,e,t,i,s){if(i.length===0||!e.hasModel())return;if(s.setMinimumDimensions){const h=e.getOption(67)+8;s.setMinimumDimensions(new _i(302,h))}const r=new ue,o=i[0],a=e.getModel(),l=o.model,c=r.add(new jmt(s.fragment,l,e.getOption(144),t,n instanceof HD));let d=!1,u=new M(o.range.startLineNumber,o.range.startColumn,o.range.endLineNumber,o.range.endColumn);if(n instanceof HD){const h=o.model.color;n.color=h,q2(a,l,h,u,o),r.add(l.onColorFlushed(f=>{n.color=f}))}else r.add(l.onColorFlushed(async h=>{await q2(a,l,h,u,o),d=!0,u=CLe(e,u,l)}));return r.add(l.onDidChangeColor(h=>{q2(a,l,h,u,o)})),r.add(e.onDidChangeModelContent(h=>{d?d=!1:(s.hide(),e.focus())})),{hoverPart:o,colorPicker:c,disposables:r}}function CLe(n,e,t){const i=[],s=t.presentation.textEdit??{range:e,text:t.presentation.label,forceMoveMarkers:!1};i.push(s),t.presentation.additionalTextEdits&&i.push(...t.presentation.additionalTextEdits);const r=M.lift(s.range),o=n.getModel()._setTrackedRange(null,r,3);return n.executeEdits("colorpicker",i),n.pushUndoStop(),n.getModel()._getTrackedRange(o)??r}async function q2(n,e,t,i,s){const r=await fLe(n,{range:i,color:{red:t.rgba.r/255,green:t.rgba.g/255,blue:t.rgba.b/255,alpha:t.rgba.a}},s.provider,xt.None);e.colorPresentations=r||[]}const yLe="editor.action.showHover",Gmt="editor.action.showDefinitionPreviewHover",Ymt="editor.action.scrollUpHover",Zmt="editor.action.scrollDownHover",Xmt="editor.action.scrollLeftHover",Qmt="editor.action.scrollRightHover",Jmt="editor.action.pageUpHover",e_t="editor.action.pageDownHover",t_t="editor.action.goToTopHover",i_t="editor.action.goToBottomHover",QB="editor.action.increaseHoverVerbosityLevel",n_t=v({key:"increaseHoverVerbosityLevel",comment:["Label for action that will increase the hover verbosity level."]},"Increase Hover Verbosity Level"),JB="editor.action.decreaseHoverVerbosityLevel",s_t=v({key:"decreaseHoverVerbosityLevel",comment:["Label for action that will decrease the hover verbosity level."]},"Decrease Hover Verbosity Level"),SLe="editor.action.inlineSuggest.commit",xLe="editor.action.inlineSuggest.showPrevious",LLe="editor.action.inlineSuggest.showNext";var $J=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},gd=function(n,e){return function(t,i){e(t,i,n)}},G2;let kK=class extends ee{constructor(e,t,i){super(),this.editor=e,this.model=t,this.instantiationService=i,this.alwaysShowToolbar=mi(this,this.editor.onDidChangeConfiguration,()=>this.editor.getOption(62).showToolbar==="always"),this.sessionPosition=void 0,this.position=Ke(this,s=>{var l,c;const r=(l=this.model.read(s))==null?void 0:l.primaryGhostText.read(s);if(!this.alwaysShowToolbar.read(s)||!r||r.parts.length===0)return this.sessionPosition=void 0,null;const o=r.parts[0].column;this.sessionPosition&&this.sessionPosition.lineNumber!==r.lineNumber&&(this.sessionPosition=void 0);const a=new Y(r.lineNumber,Math.min(o,((c=this.sessionPosition)==null?void 0:c.column)??Number.MAX_SAFE_INTEGER));return this.sessionPosition=a,a}),this._register(da((s,r)=>{const o=this.model.read(s);if(!o||!this.alwaysShowToolbar.read(s))return;const a=sv((c,d)=>{const u=d.add(this.instantiationService.createInstance(ix,this.editor,!0,this.position,o.selectedInlineCompletionIndex,o.inlineCompletionsCount,o.activeCommands));return e.addContentWidget(u),d.add(Ye(()=>e.removeContentWidget(u))),d.add(gt(h=>{this.position.read(h)&&o.lastTriggerKind.read(h)!==Du.Explicit&&o.triggerExplicitly()})),u}),l=YN(this,(c,d)=>!!this.position.read(c)||!!d);r.add(gt(c=>{l.read(c)&&a.read(c)}))}))}};kK=$J([gd(2,Ze)],kK);const r_t=Xi("inline-suggestion-hints-next",ye.chevronRight,v("parameterHintsNextIcon","Icon for show next parameter hint.")),o_t=Xi("inline-suggestion-hints-previous",ye.chevronLeft,v("parameterHintsPreviousIcon","Icon for show previous parameter hint."));var r_;let ix=(r_=class extends ee{static get dropDownVisible(){return this._dropDownVisible}createCommandAction(e,t,i){const s=new Ya(e,t,i,!0,()=>this._commandService.executeCommand(e)),r=this.keybindingService.lookupKeybinding(e,this._contextKeyService);let o=t;return r&&(o=v({key:"content",comment:["A label","A keybinding"]},"{0} ({1})",t,r.getLabel())),s.tooltip=o,s}constructor(e,t,i,s,r,o,a,l,c,d,u){super(),this.editor=e,this.withBorder=t,this._position=i,this._currentSuggestionIdx=s,this._suggestionCount=r,this._extraCommands=o,this._commandService=a,this.keybindingService=c,this._contextKeyService=d,this._menuService=u,this.id=`InlineSuggestionHintsContentWidget${G2.id++}`,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this.nodes=Pt("div.inlineSuggestionsHints",{className:this.withBorder?".withBorder":""},[Pt("div@toolBar")]),this.previousAction=this.createCommandAction(xLe,v("previous","Previous"),ot.asClassName(o_t)),this.availableSuggestionCountAction=new Ya("inlineSuggestionHints.availableSuggestionCount","",void 0,!1),this.nextAction=this.createCommandAction(LLe,v("next","Next"),ot.asClassName(r_t)),this.inlineCompletionsActionsMenus=this._register(this._menuService.createMenu(ze.InlineCompletionsActions,this._contextKeyService)),this.clearAvailableSuggestionCountLabelDebounced=this._register(new yi(()=>{this.availableSuggestionCountAction.label=""},100)),this.disableButtonsDebounced=this._register(new yi(()=>{this.previousAction.enabled=this.nextAction.enabled=!1},100)),this.toolBar=this._register(l.createInstance(EK,this.nodes.toolBar,ze.InlineSuggestionToolbar,{menuOptions:{renderShortTitle:!0},toolbarOptions:{primaryGroup:h=>h.startsWith("primary")},actionViewItemProvider:(h,f)=>{if(h instanceof Za)return l.createInstance(l_t,h,void 0);if(h===this.availableSuggestionCountAction){const g=new a_t(void 0,h,{label:!0,icon:!1});return g.setClass("availableSuggestionCount"),g}},telemetrySource:"InlineSuggestionToolbar"})),this.toolBar.setPrependedPrimaryActions([this.previousAction,this.availableSuggestionCountAction,this.nextAction]),this._register(this.toolBar.onDidChangeDropdownVisibility(h=>{G2._dropDownVisible=h})),this._register(gt(h=>{this._position.read(h),this.editor.layoutContentWidget(this)})),this._register(gt(h=>{const f=this._suggestionCount.read(h),g=this._currentSuggestionIdx.read(h);f!==void 0?(this.clearAvailableSuggestionCountLabelDebounced.cancel(),this.availableSuggestionCountAction.label=`${g+1}/${f}`):this.clearAvailableSuggestionCountLabelDebounced.schedule(),f!==void 0&&f>1?(this.disableButtonsDebounced.cancel(),this.previousAction.enabled=this.nextAction.enabled=!0):this.disableButtonsDebounced.schedule()})),this._register(gt(h=>{const g=this._extraCommands.read(h).map(p=>({class:void 0,id:p.id,enabled:!0,tooltip:p.tooltip||"",label:p.title,run:_=>this._commandService.executeCommand(p.id)}));for(const[p,_]of this.inlineCompletionsActionsMenus.getActions())for(const w of _)w instanceof Za&&g.push(w);g.length>0&&g.unshift(new Ts),this.toolBar.setAdditionalSecondaryActions(g)}))}getId(){return this.id}getDomNode(){return this.nodes.root}getPosition(){return{position:this._position.get(),preference:[1,2],positionAffinity:3}}},G2=r_,r_._dropDownVisible=!1,r_.id=0,r_);ix=G2=$J([gd(6,Vi),gd(7,Ze),gd(8,hi),gd(9,at),gd(10,Yl)],ix);class a_t extends $S{constructor(){super(...arguments),this._className=void 0}setClass(e){this._className=e}render(e){super.render(e),this._className&&e.classList.add(this._className)}updateTooltip(){}}let l_t=class extends O_{updateLabel(){const e=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!e)return super.updateLabel();if(this.label){const t=Pt("div.keybinding").root;this._register(new zx(t,Ka,{disableTitle:!0,...rSe})).set(e),this.label.textContent=this._action.label,this.label.appendChild(t),this.label.classList.add("inlineSuggestionStatusBarItemLabel")}}updateTooltip(){}},EK=class extends DD{constructor(e,t,i,s,r,o,a,l,c){super(e,{resetMenu:t,...i},s,r,o,a,l,c),this.menuId=t,this.options2=i,this.menuService=s,this.contextKeyService=r,this.menu=this._store.add(this.menuService.createMenu(this.menuId,this.contextKeyService,{emitEventsForSubmenuChanges:!0})),this.additionalActions=[],this.prependedPrimaryActions=[],this._store.add(this.menu.onDidChange(()=>this.updateToolbar())),this.updateToolbar()}updateToolbar(){var i,s,r,o,a,l,c;const e=[],t=[];LB(this.menu,(i=this.options2)==null?void 0:i.menuOptions,{primary:e,secondary:t},(r=(s=this.options2)==null?void 0:s.toolbarOptions)==null?void 0:r.primaryGroup,(a=(o=this.options2)==null?void 0:o.toolbarOptions)==null?void 0:a.shouldInlineSubmenu,(c=(l=this.options2)==null?void 0:l.toolbarOptions)==null?void 0:c.useSeparatorsInPrimaryActions),t.push(...this.additionalActions),e.unshift(...this.prependedPrimaryActions),this.setActions(e,t)}setPrependedPrimaryActions(e){dn(this.prependedPrimaryActions,e,(t,i)=>t===i)||(this.prependedPrimaryActions=e,this.updateToolbar())}setAdditionalSecondaryActions(e){dn(this.additionalActions,e,(t,i)=>t===i)||(this.additionalActions=e,this.updateToolbar())}};EK=$J([gd(3,Yl),gd(4,at),gd(5,ol),gd(6,hi),gd(7,Vi),gd(8,Hr)],EK);function eW(n,e,t){const i=Fn(n);return!(e<i.left||e>i.left+i.width||t<i.top||t>i.top+i.height)}let c_t=class{constructor(e,t,i){this.value=e,this.isComplete=t,this.hasLoadingMessage=i}};class kLe extends ee{constructor(e,t){super(),this._editor=e,this._computer=t,this._onResult=this._register(new X),this.onResult=this._onResult.event,this._firstWaitScheduler=this._register(new yi(()=>this._triggerAsyncComputation(),0)),this._secondWaitScheduler=this._register(new yi(()=>this._triggerSyncComputation(),0)),this._loadingMessageScheduler=this._register(new yi(()=>this._triggerLoadingMessage(),0)),this._state=0,this._asyncIterable=null,this._asyncIterableDone=!1,this._result=[]}dispose(){this._asyncIterable&&(this._asyncIterable.cancel(),this._asyncIterable=null),super.dispose()}get _hoverTime(){return this._editor.getOption(60).delay}get _firstWaitTime(){return this._hoverTime/2}get _secondWaitTime(){return this._hoverTime-this._firstWaitTime}get _loadingMessageTime(){return 3*this._hoverTime}_setState(e,t=!0){this._state=e,t&&this._fireResult()}_triggerAsyncComputation(){this._setState(2),this._secondWaitScheduler.schedule(this._secondWaitTime),this._computer.computeAsync?(this._asyncIterableDone=!1,this._asyncIterable=FKe(e=>this._computer.computeAsync(e)),(async()=>{try{for await(const e of this._asyncIterable)e&&(this._result.push(e),this._fireResult());this._asyncIterableDone=!0,(this._state===3||this._state===4)&&this._setState(0)}catch(e){pt(e)}})()):this._asyncIterableDone=!0}_triggerSyncComputation(){this._computer.computeSync&&(this._result=this._result.concat(this._computer.computeSync())),this._setState(this._asyncIterableDone?0:3)}_triggerLoadingMessage(){this._state===3&&this._setState(4)}_fireResult(){if(this._state===1||this._state===2)return;const e=this._state===0,t=this._state===4;this._onResult.fire(new c_t(this._result.slice(0),e,t))}start(e){if(e===0)this._state===0&&(this._setState(1),this._firstWaitScheduler.schedule(this._firstWaitTime),this._loadingMessageScheduler.schedule(this._loadingMessageTime));else switch(this._state){case 0:this._triggerAsyncComputation(),this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break;case 2:this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break}}cancel(){this._firstWaitScheduler.cancel(),this._secondWaitScheduler.cancel(),this._loadingMessageScheduler.cancel(),this._asyncIterable&&(this._asyncIterable.cancel(),this._asyncIterable=null),this._result=[],this._setState(0,!1)}}class jJ{constructor(){this._onDidWillResize=new X,this.onDidWillResize=this._onDidWillResize.event,this._onDidResize=new X,this.onDidResize=this._onDidResize.event,this._sashListener=new ue,this._size=new _i(0,0),this._minSize=new _i(0,0),this._maxSize=new _i(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),this.domNode=document.createElement("div"),this._eastSash=new Dr(this.domNode,{getVerticalSashLeft:()=>this._size.width},{orientation:0}),this._westSash=new Dr(this.domNode,{getVerticalSashLeft:()=>0},{orientation:0}),this._northSash=new Dr(this.domNode,{getHorizontalSashTop:()=>0},{orientation:1,orthogonalEdge:lO.North}),this._southSash=new Dr(this.domNode,{getHorizontalSashTop:()=>this._size.height},{orientation:1,orthogonalEdge:lO.South}),this._northSash.orthogonalStartSash=this._westSash,this._northSash.orthogonalEndSash=this._eastSash,this._southSash.orthogonalStartSash=this._westSash,this._southSash.orthogonalEndSash=this._eastSash;let e,t=0,i=0;this._sashListener.add(Ee.any(this._northSash.onDidStart,this._eastSash.onDidStart,this._southSash.onDidStart,this._westSash.onDidStart)(()=>{e===void 0&&(this._onDidWillResize.fire(),e=this._size,t=0,i=0)})),this._sashListener.add(Ee.any(this._northSash.onDidEnd,this._eastSash.onDidEnd,this._southSash.onDidEnd,this._westSash.onDidEnd)(()=>{e!==void 0&&(e=void 0,t=0,i=0,this._onDidResize.fire({dimension:this._size,done:!0}))})),this._sashListener.add(this._eastSash.onDidChange(s=>{e&&(i=s.currentX-s.startX,this.layout(e.height+t,e.width+i),this._onDidResize.fire({dimension:this._size,done:!1,east:!0}))})),this._sashListener.add(this._westSash.onDidChange(s=>{e&&(i=-(s.currentX-s.startX),this.layout(e.height+t,e.width+i),this._onDidResize.fire({dimension:this._size,done:!1,west:!0}))})),this._sashListener.add(this._northSash.onDidChange(s=>{e&&(t=-(s.currentY-s.startY),this.layout(e.height+t,e.width+i),this._onDidResize.fire({dimension:this._size,done:!1,north:!0}))})),this._sashListener.add(this._southSash.onDidChange(s=>{e&&(t=s.currentY-s.startY,this.layout(e.height+t,e.width+i),this._onDidResize.fire({dimension:this._size,done:!1,south:!0}))})),this._sashListener.add(Ee.any(this._eastSash.onDidReset,this._westSash.onDidReset)(s=>{this._preferredSize&&(this.layout(this._size.height,this._preferredSize.width),this._onDidResize.fire({dimension:this._size,done:!0}))})),this._sashListener.add(Ee.any(this._northSash.onDidReset,this._southSash.onDidReset)(s=>{this._preferredSize&&(this.layout(this._preferredSize.height,this._size.width),this._onDidResize.fire({dimension:this._size,done:!0}))}))}dispose(){this._northSash.dispose(),this._southSash.dispose(),this._eastSash.dispose(),this._westSash.dispose(),this._sashListener.dispose(),this._onDidResize.dispose(),this._onDidWillResize.dispose(),this.domNode.remove()}enableSashes(e,t,i,s){this._northSash.state=e?3:0,this._eastSash.state=t?3:0,this._southSash.state=i?3:0,this._westSash.state=s?3:0}layout(e=this.size.height,t=this.size.width){const{height:i,width:s}=this._minSize,{height:r,width:o}=this._maxSize;e=Math.max(i,Math.min(r,e)),t=Math.max(s,Math.min(o,t));const a=new _i(t,e);_i.equals(a,this._size)||(this.domNode.style.height=e+"px",this.domNode.style.width=t+"px",this._size=a,this._northSash.layout(),this._eastSash.layout(),this._southSash.layout(),this._westSash.layout())}clearSashHoverState(){this._eastSash.clearSashHoverState(),this._westSash.clearSashHoverState(),this._northSash.clearSashHoverState(),this._southSash.clearSashHoverState()}get size(){return this._size}set maxSize(e){this._maxSize=e}get maxSize(){return this._maxSize}set minSize(e){this._minSize=e}get minSize(){return this._minSize}set preferredSize(e){this._preferredSize=e}get preferredSize(){return this._preferredSize}}const d_t=30,u_t=24;class h_t extends ee{constructor(e,t=new _i(10,10)){super(),this._editor=e,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._resizableNode=this._register(new jJ),this._contentPosition=null,this._isResizing=!1,this._resizableNode.domNode.style.position="absolute",this._resizableNode.minSize=_i.lift(t),this._resizableNode.layout(t.height,t.width),this._resizableNode.enableSashes(!0,!0,!0,!0),this._register(this._resizableNode.onDidResize(i=>{this._resize(new _i(i.dimension.width,i.dimension.height)),i.done&&(this._isResizing=!1)})),this._register(this._resizableNode.onDidWillResize(()=>{this._isResizing=!0}))}get isResizing(){return this._isResizing}getDomNode(){return this._resizableNode.domNode}getPosition(){return this._contentPosition}get position(){var e;return(e=this._contentPosition)!=null&&e.position?Y.lift(this._contentPosition.position):void 0}_availableVerticalSpaceAbove(e){const t=this._editor.getDomNode(),i=this._editor.getScrolledVisiblePosition(e);return!t||!i?void 0:Fn(t).top+i.top-d_t}_availableVerticalSpaceBelow(e){const t=this._editor.getDomNode(),i=this._editor.getScrolledVisiblePosition(e);if(!t||!i)return;const s=Fn(t),r=R_(t.ownerDocument.body),o=s.top+i.top+i.height;return r.height-o-u_t}_findPositionPreference(e,t){const i=Math.min(this._availableVerticalSpaceBelow(t)??1/0,e),s=Math.min(this._availableVerticalSpaceAbove(t)??1/0,e),r=Math.min(Math.max(s,i),e),o=Math.min(e,r);let a;return this._editor.getOption(60).above?a=o<=s?1:2:a=o<=i?2:1,a===1?this._resizableNode.enableSashes(!0,!0,!1,!1):this._resizableNode.enableSashes(!1,!0,!0,!1),a}_resize(e){this._resizableNode.layout(e.height,e.width)}}var f_t=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},CA=function(n,e){return function(t,i){e(t,i,n)}},fh;const pue=30,g_t=6;var o_;let IK=(o_=class extends h_t{get isVisibleFromKeyboard(){var e;return((e=this._renderedHover)==null?void 0:e.source)===1}get isVisible(){return this._hoverVisibleKey.get()??!1}get isFocused(){return this._hoverFocusedKey.get()??!1}constructor(e,t,i,s,r){const o=e.getOption(67)+8,a=150,l=new _i(a,o);super(e,l),this._configurationService=i,this._accessibilityService=s,this._keybindingService=r,this._hover=this._register(new $X),this._onDidResize=this._register(new X),this.onDidResize=this._onDidResize.event,this._minimumSize=l,this._hoverVisibleKey=F.hoverVisible.bindTo(t),this._hoverFocusedKey=F.hoverFocused.bindTo(t),_e(this._resizableNode.domNode,this._hover.containerDomNode),this._resizableNode.domNode.style.zIndex="50",this._register(this._editor.onDidLayoutChange(()=>{this.isVisible&&this._updateMaxDimensions()})),this._register(this._editor.onDidChangeConfiguration(d=>{d.hasChanged(50)&&this._updateFont()}));const c=this._register(Hu(this._resizableNode.domNode));this._register(c.onDidFocus(()=>{this._hoverFocusedKey.set(!0)})),this._register(c.onDidBlur(()=>{this._hoverFocusedKey.set(!1)})),this._setRenderedHover(void 0),this._editor.addContentWidget(this)}dispose(){var e;super.dispose(),(e=this._renderedHover)==null||e.dispose(),this._editor.removeContentWidget(this)}getId(){return fh.ID}static _applyDimensions(e,t,i){const s=typeof t=="number"?`${t}px`:t,r=typeof i=="number"?`${i}px`:i;e.style.width=s,e.style.height=r}_setContentsDomNodeDimensions(e,t){const i=this._hover.contentsDomNode;return fh._applyDimensions(i,e,t)}_setContainerDomNodeDimensions(e,t){const i=this._hover.containerDomNode;return fh._applyDimensions(i,e,t)}_setHoverWidgetDimensions(e,t){this._setContentsDomNodeDimensions(e,t),this._setContainerDomNodeDimensions(e,t),this._layoutContentWidget()}static _applyMaxDimensions(e,t,i){const s=typeof t=="number"?`${t}px`:t,r=typeof i=="number"?`${i}px`:i;e.style.maxWidth=s,e.style.maxHeight=r}_setHoverWidgetMaxDimensions(e,t){fh._applyMaxDimensions(this._hover.contentsDomNode,e,t),fh._applyMaxDimensions(this._hover.containerDomNode,e,t),this._hover.containerDomNode.style.setProperty("--vscode-hover-maxWidth",typeof e=="number"?`${e}px`:e),this._layoutContentWidget()}_setAdjustedHoverWidgetDimensions(e){this._setHoverWidgetMaxDimensions("none","none");const t=e.width,i=e.height;this._setHoverWidgetDimensions(t,i)}_updateResizableNodeMaxDimensions(){const e=this._findMaximumRenderingWidth()??1/0,t=this._findMaximumRenderingHeight()??1/0;this._resizableNode.maxSize=new _i(e,t),this._setHoverWidgetMaxDimensions(e,t)}_resize(e){fh._lastDimensions=new _i(e.width,e.height),this._setAdjustedHoverWidgetDimensions(e),this._resizableNode.layout(e.height,e.width),this._updateResizableNodeMaxDimensions(),this._hover.scrollbar.scanDomNode(),this._editor.layoutContentWidget(this),this._onDidResize.fire()}_findAvailableSpaceVertically(){var t;const e=(t=this._renderedHover)==null?void 0:t.showAtPosition;if(e)return this._positionPreference===1?this._availableVerticalSpaceAbove(e):this._availableVerticalSpaceBelow(e)}_findMaximumRenderingHeight(){const e=this._findAvailableSpaceVertically();if(!e)return;let t=g_t;return Array.from(this._hover.contentsDomNode.children).forEach(i=>{t+=i.clientHeight}),Math.min(e,t)}_isHoverTextOverflowing(){this._hover.containerDomNode.style.setProperty("--vscode-hover-whiteSpace","nowrap"),this._hover.containerDomNode.style.setProperty("--vscode-hover-sourceWhiteSpace","nowrap");const e=Array.from(this._hover.contentsDomNode.children).some(t=>t.scrollWidth>t.clientWidth);return this._hover.containerDomNode.style.removeProperty("--vscode-hover-whiteSpace"),this._hover.containerDomNode.style.removeProperty("--vscode-hover-sourceWhiteSpace"),e}_findMaximumRenderingWidth(){if(!this._editor||!this._editor.hasModel())return;const e=this._isHoverTextOverflowing(),t=typeof this._contentWidth>"u"?0:this._contentWidth-2;return e||this._hover.containerDomNode.clientWidth<t?R_(this._hover.containerDomNode.ownerDocument.body).width-14:this._hover.containerDomNode.clientWidth+2}isMouseGettingCloser(e,t){if(!this._renderedHover)return!1;if(this._renderedHover.initialMousePosX===void 0||this._renderedHover.initialMousePosY===void 0)return this._renderedHover.initialMousePosX=e,this._renderedHover.initialMousePosY=t,!1;const i=Fn(this.getDomNode());this._renderedHover.closestMouseDistance===void 0&&(this._renderedHover.closestMouseDistance=mue(this._renderedHover.initialMousePosX,this._renderedHover.initialMousePosY,i.left,i.top,i.width,i.height));const s=mue(e,t,i.left,i.top,i.width,i.height);return s>this._renderedHover.closestMouseDistance+4?!1:(this._renderedHover.closestMouseDistance=Math.min(this._renderedHover.closestMouseDistance,s),!0)}_setRenderedHover(e){var t;(t=this._renderedHover)==null||t.dispose(),this._renderedHover=e,this._hoverVisibleKey.set(!!e),this._hover.containerDomNode.classList.toggle("hidden",!e)}_updateFont(){const{fontSize:e,lineHeight:t}=this._editor.getOption(50),i=this._hover.contentsDomNode;i.style.fontSize=`${e}px`,i.style.lineHeight=`${t/e}`,Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach(r=>this._editor.applyFontInfo(r))}_updateContent(e){const t=this._hover.contentsDomNode;t.style.paddingBottom="",t.textContent="",t.appendChild(e)}_layoutContentWidget(){this._editor.layoutContentWidget(this),this._hover.onContentsChanged()}_updateMaxDimensions(){const e=Math.max(this._editor.getLayoutInfo().height/4,250,fh._lastDimensions.height),t=Math.max(this._editor.getLayoutInfo().width*.66,500,fh._lastDimensions.width);this._setHoverWidgetMaxDimensions(t,e)}_render(e){this._setRenderedHover(e),this._updateFont(),this._updateContent(e.domNode),this._updateMaxDimensions(),this.onContentsChanged(),this._editor.render()}getPosition(){return this._renderedHover?{position:this._renderedHover.showAtPosition,secondaryPosition:this._renderedHover.showAtSecondaryPosition,positionAffinity:this._renderedHover.shouldAppearBeforeContent?3:void 0,preference:[this._positionPreference??1]}:null}show(e){var o;if(!this._editor||!this._editor.hasModel())return;this._render(e);const t=_g(this._hover.containerDomNode),i=e.showAtPosition;this._positionPreference=this._findPositionPreference(t,i)??1,this.onContentsChanged(),e.shouldFocus&&this._hover.containerDomNode.focus(),this._onDidResize.fire();const r=this._hover.containerDomNode.ownerDocument.activeElement===this._hover.containerDomNode&&c1e(this._configurationService.getValue("accessibility.verbosity.hover")===!0&&this._accessibilityService.isScreenReaderOptimized(),((o=this._keybindingService.lookupKeybinding("editor.action.accessibleView"))==null?void 0:o.getAriaLabel())??"");r&&(this._hover.contentsDomNode.ariaLabel=this._hover.contentsDomNode.textContent+", "+r)}hide(){if(!this._renderedHover)return;const e=this._renderedHover.shouldFocus||this._hoverFocusedKey.get();this._setRenderedHover(void 0),this._resizableNode.maxSize=new _i(1/0,1/0),this._resizableNode.clearSashHoverState(),this._hoverFocusedKey.set(!1),this._editor.layoutContentWidget(this),e&&this._editor.focus()}_removeConstraintsRenderNormally(){const e=this._editor.getLayoutInfo();this._resizableNode.layout(e.height,e.width),this._setHoverWidgetDimensions("auto","auto")}setMinimumDimensions(e){this._minimumSize=new _i(Math.max(this._minimumSize.width,e.width),Math.max(this._minimumSize.height,e.height)),this._updateMinimumWidth()}_updateMinimumWidth(){const e=typeof this._contentWidth>"u"?this._minimumSize.width:Math.min(this._contentWidth,this._minimumSize.width);this._resizableNode.minSize=new _i(e,this._minimumSize.height)}onContentsChanged(){var s;this._removeConstraintsRenderNormally();const e=this._hover.containerDomNode;let t=_g(e),i=Pa(e);if(this._resizableNode.layout(t,i),this._setHoverWidgetDimensions(i,t),t=_g(e),i=Pa(e),this._contentWidth=i,this._updateMinimumWidth(),this._resizableNode.layout(t,i),(s=this._renderedHover)!=null&&s.showAtPosition){const r=_g(this._hover.containerDomNode);this._positionPreference=this._findPositionPreference(r,this._renderedHover.showAtPosition)}this._layoutContentWidget()}focus(){this._hover.containerDomNode.focus()}scrollUp(){const e=this._hover.scrollbar.getScrollPosition().scrollTop,t=this._editor.getOption(50);this._hover.scrollbar.setScrollPosition({scrollTop:e-t.lineHeight})}scrollDown(){const e=this._hover.scrollbar.getScrollPosition().scrollTop,t=this._editor.getOption(50);this._hover.scrollbar.setScrollPosition({scrollTop:e+t.lineHeight})}scrollLeft(){const e=this._hover.scrollbar.getScrollPosition().scrollLeft;this._hover.scrollbar.setScrollPosition({scrollLeft:e-pue})}scrollRight(){const e=this._hover.scrollbar.getScrollPosition().scrollLeft;this._hover.scrollbar.setScrollPosition({scrollLeft:e+pue})}pageUp(){const e=this._hover.scrollbar.getScrollPosition().scrollTop,t=this._hover.scrollbar.getScrollDimensions().height;this._hover.scrollbar.setScrollPosition({scrollTop:e-t})}pageDown(){const e=this._hover.scrollbar.getScrollPosition().scrollTop,t=this._hover.scrollbar.getScrollDimensions().height;this._hover.scrollbar.setScrollPosition({scrollTop:e+t})}goToTop(){this._hover.scrollbar.setScrollPosition({scrollTop:0})}goToBottom(){this._hover.scrollbar.setScrollPosition({scrollTop:this._hover.scrollbar.getScrollDimensions().scrollHeight})}},fh=o_,o_.ID="editor.contrib.resizableContentHoverWidget",o_._lastDimensions=new _i(0,0),o_);IK=fh=f_t([CA(1,at),CA(2,Tt),CA(3,al),CA(4,hi)],IK);function mue(n,e,t,i,s,r){const o=t+s/2,a=i+r/2,l=Math.max(Math.abs(n-o)-s/2,0),c=Math.max(Math.abs(e-a)-r/2,0);return Math.sqrt(l*l+c*c)}class nF{get anchor(){return this._anchor}set anchor(e){this._anchor=e}get shouldFocus(){return this._shouldFocus}set shouldFocus(e){this._shouldFocus=e}get source(){return this._source}set source(e){this._source=e}get insistOnKeepingHoverVisible(){return this._insistOnKeepingHoverVisible}set insistOnKeepingHoverVisible(e){this._insistOnKeepingHoverVisible=e}constructor(e,t){this._editor=e,this._participants=t,this._anchor=null,this._shouldFocus=!1,this._source=0,this._insistOnKeepingHoverVisible=!1}static _getLineDecorations(e,t){if(t.type!==1&&!t.supportsMarkerHover)return[];const i=e.getModel(),s=t.range.startLineNumber;if(s>i.getLineCount())return[];const r=i.getLineMaxColumn(s);return e.getLineDecorations(s).filter(o=>{if(o.options.isWholeLine)return!0;const a=o.range.startLineNumber===s?o.range.startColumn:1,l=o.range.endLineNumber===s?o.range.endColumn:r;if(o.options.showIfCollapsed){if(a>t.range.startColumn+1||t.range.endColumn-1>l)return!1}else if(a>t.range.startColumn||t.range.endColumn>l)return!1;return!0})}computeAsync(e){const t=this._anchor;if(!this._editor.hasModel()||!t)return Ml.EMPTY;const i=nF._getLineDecorations(this._editor,t);return Ml.merge(this._participants.map(s=>s.computeAsync?s.computeAsync(t,i,e):Ml.EMPTY))}computeSync(){if(!this._editor.hasModel()||!this._anchor)return[];const e=nF._getLineDecorations(this._editor,this._anchor);let t=[];for(const i of this._participants)t=t.concat(i.computeSync(this._anchor,e));return Id(t)}}class ELe{constructor(e,t,i){this.anchor=e,this.hoverParts=t,this.isComplete=i}filter(e){const t=this.hoverParts.filter(i=>i.isValidForHoverAnchor(e));return t.length===this.hoverParts.length?this:new p_t(this,this.anchor,t,this.isComplete)}}class p_t extends ELe{constructor(e,t,i,s){super(t,i,s),this.original=e}filter(e){return this.original.filter(e)}}var m_t=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},__t=function(n,e){return function(t,i){e(t,i,n)}};const _ue=xe;let sF=class extends ee{get hasContent(){return this._hasContent}constructor(e){super(),this._keybindingService=e,this.actions=[],this._hasContent=!1,this.hoverElement=_ue("div.hover-row.status-bar"),this.hoverElement.tabIndex=0,this.actionsElement=_e(this.hoverElement,_ue("div.actions"))}addAction(e){const t=this._keybindingService.lookupKeybinding(e.commandId),i=t?t.getLabel():null;this._hasContent=!0;const s=this._register(fB.render(this.actionsElement,e,i));return this.actions.push(s),s}append(e){const t=_e(this.actionsElement,e);return this._hasContent=!0,t}};sF=m_t([__t(0,hi)],sF);class v_t{constructor(e,t,i){this.provider=e,this.hover=t,this.ordinal=i}}async function b_t(n,e,t,i,s){const r=await Promise.resolve(n.provideHover(t,i,s)).catch(Wn);if(!(!r||!w_t(r)))return new v_t(n,r,e)}function KJ(n,e,t,i,s=!1){const o=n.ordered(e,s).map((a,l)=>b_t(a,l,e,t,i));return Ml.fromPromises(o).coalesce()}function ILe(n,e,t,i,s=!1){return KJ(n,e,t,i,s).map(r=>r.hover).toPromise()}va("_executeHoverProvider",(n,e,t)=>{const i=n.get(Be);return ILe(i.hoverProvider,e,t,xt.None)});va("_executeHoverProvider_recursive",(n,e,t)=>{const i=n.get(Be);return ILe(i.hoverProvider,e,t,xt.None,!0)});function w_t(n){const e=typeof n.range<"u",t=typeof n.contents<"u"&&n.contents&&n.contents.length>0;return e&&t}var C_t=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Rv=function(n,e){return function(t,i){e(t,i,n)}};const F1=xe,y_t=Xi("hover-increase-verbosity",ye.add,v("increaseHoverVerbosity","Icon for increaseing hover verbosity.")),S_t=Xi("hover-decrease-verbosity",ye.remove,v("decreaseHoverVerbosity","Icon for decreasing hover verbosity."));class _d{constructor(e,t,i,s,r,o=void 0){this.owner=e,this.range=t,this.contents=i,this.isBeforeContent=s,this.ordinal=r,this.source=o}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}class DLe{constructor(e,t,i){this.hover=e,this.hoverProvider=t,this.hoverPosition=i}supportsVerbosityAction(e){switch(e){case Ba.Increase:return this.hover.canIncreaseVerbosity??!1;case Ba.Decrease:return this.hover.canDecreaseVerbosity??!1}}}let VD=class{constructor(e,t,i,s,r,o,a,l){this._editor=e,this._languageService=t,this._openerService=i,this._configurationService=s,this._languageFeaturesService=r,this._keybindingService=o,this._hoverService=a,this._commandService=l,this.hoverOrdinal=3}createLoadingMessage(e){return new _d(this,e.range,[new Rr().appendText(v("modesContentHover.loading","Loading..."))],!1,2e3)}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1)return[];const i=this._editor.getModel(),s=e.range.startLineNumber,r=i.getLineMaxColumn(s),o=[];let a=1e3;const l=i.getLineLength(s),c=i.getLanguageIdAtPosition(e.range.startLineNumber,e.range.startColumn),d=this._editor.getOption(118),u=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:c});let h=!1;d>=0&&l>d&&e.range.startColumn>=d&&(h=!0,o.push(new _d(this,e.range,[{value:v("stopped rendering","Rendering paused for long line for performance reasons. This can be configured via `editor.stopRenderingLineAfter`.")}],!1,a++))),!h&&typeof u=="number"&&l>=u&&o.push(new _d(this,e.range,[{value:v("too many characters","Tokenization is skipped for long lines for performance reasons. This can be configured via `editor.maxTokenizationLineLength`.")}],!1,a++));let f=!1;for(const g of t){const p=g.range.startLineNumber===s?g.range.startColumn:1,_=g.range.endLineNumber===s?g.range.endColumn:r,w=g.options.hoverMessage;if(!w||WS(w))continue;g.options.beforeContentClassName&&(f=!0);const b=new M(e.range.startLineNumber,p,e.range.startLineNumber,_);o.push(new _d(this,b,UZ(w),f,a++))}return o}computeAsync(e,t,i){if(!this._editor.hasModel()||e.type!==1)return Ml.EMPTY;const s=this._editor.getModel(),r=this._languageFeaturesService.hoverProvider;return r.has(s)?this._getMarkdownHovers(r,s,e,i):Ml.EMPTY}_getMarkdownHovers(e,t,i,s){const r=i.range.getStartPosition();return KJ(e,t,r,s).filter(l=>!WS(l.hover.contents)).map(l=>{const c=l.hover.range?M.lift(l.hover.range):i.range,d=new DLe(l.hover,l.provider,r);return new _d(this,c,l.hover.contents,!1,l.ordinal,d)})}renderHoverParts(e,t){return this._renderedHoverParts=new x_t(t,e.fragment,this,this._editor,this._languageService,this._openerService,this._commandService,this._keybindingService,this._hoverService,this._configurationService,e.onContentsChanged),this._renderedHoverParts}updateMarkdownHoverVerbosityLevel(e,t,i){var s;return Promise.resolve((s=this._renderedHoverParts)==null?void 0:s.updateMarkdownHoverPartVerbosityLevel(e,t,i))}};VD=C_t([Rv(1,un),Rv(2,ba),Rv(3,Tt),Rv(4,Be),Rv(5,hi),Rv(6,wf),Rv(7,Vi)],VD);class yA{constructor(e,t,i){this.hoverPart=e,this.hoverElement=t,this.disposables=i}dispose(){this.disposables.dispose()}}class x_t{constructor(e,t,i,s,r,o,a,l,c,d,u){this._hoverParticipant=i,this._editor=s,this._languageService=r,this._openerService=o,this._commandService=a,this._keybindingService=l,this._hoverService=c,this._configurationService=d,this._onFinishedRendering=u,this._ongoingHoverOperations=new Map,this._disposables=new ue,this.renderedHoverParts=this._renderHoverParts(e,t,this._onFinishedRendering),this._disposables.add(Ye(()=>{this.renderedHoverParts.forEach(h=>{h.dispose()}),this._ongoingHoverOperations.forEach(h=>{h.tokenSource.dispose(!0)})}))}_renderHoverParts(e,t,i){return e.sort(No(s=>s.ordinal,xd)),e.map(s=>{const r=this._renderHoverPart(s,i);return t.appendChild(r.hoverElement),r})}_renderHoverPart(e,t){const i=this._renderMarkdownHover(e,t),s=i.hoverElement,r=e.source,o=new ue;if(o.add(i),!r)return new yA(e,s,o);const a=r.supportsVerbosityAction(Ba.Increase),l=r.supportsVerbosityAction(Ba.Decrease);if(!a&&!l)return new yA(e,s,o);const c=F1("div.verbosity-actions");return s.prepend(c),o.add(this._renderHoverExpansionAction(c,Ba.Increase,a)),o.add(this._renderHoverExpansionAction(c,Ba.Decrease,l)),new yA(e,s,o)}_renderMarkdownHover(e,t){return NLe(this._editor,e,this._languageService,this._openerService,t)}_renderHoverExpansionAction(e,t,i){const s=new ue,r=t===Ba.Increase,o=_e(e,F1(ot.asCSSSelector(r?y_t:S_t)));o.tabIndex=0;const a=new OS("mouse",!1,{target:e,position:{hoverPosition:0}},this._configurationService,this._hoverService);if(s.add(this._hoverService.setupManagedHover(a,o,k_t(this._keybindingService,t))),!i)return o.classList.add("disabled"),s;o.classList.add("enabled");const l=()=>this._commandService.executeCommand(t===Ba.Increase?QB:JB);return s.add(new d1e(o,l)),s.add(new u1e(o,l,[3,10])),s}async updateMarkdownHoverPartVerbosityLevel(e,t,i=!0){const s=this._editor.getModel();if(!s)return;const r=this._getRenderedHoverPartAtIndex(t),o=r==null?void 0:r.hoverPart.source;if(!r||!(o!=null&&o.supportsVerbosityAction(e)))return;const a=await this._fetchHover(o,s,e);if(!a)return;const l=new DLe(a,o.hoverProvider,o.hoverPosition),c=r.hoverPart,d=new _d(this._hoverParticipant,c.range,a.contents,c.isBeforeContent,c.ordinal,l),u=this._renderHoverPart(d,this._onFinishedRendering);return this._replaceRenderedHoverPartAtIndex(t,u,d),i&&this._focusOnHoverPartWithIndex(t),{hoverPart:d,hoverElement:u.hoverElement}}async _fetchHover(e,t,i){let s=i===Ba.Increase?1:-1;const r=e.hoverProvider,o=this._ongoingHoverOperations.get(r);o&&(o.tokenSource.cancel(),s+=o.verbosityDelta);const a=new mn;this._ongoingHoverOperations.set(r,{verbosityDelta:s,tokenSource:a});const l={verbosityRequest:{verbosityDelta:s,previousHover:e.hover}};let c;try{c=await Promise.resolve(r.provideHover(t,e.hoverPosition,a.token,l))}catch(d){Wn(d)}return a.dispose(),this._ongoingHoverOperations.delete(r),c}_replaceRenderedHoverPartAtIndex(e,t,i){if(e>=this.renderedHoverParts.length||e<0)return;const s=this.renderedHoverParts[e],r=s.hoverElement,o=t.hoverElement,a=Array.from(o.children);r.replaceChildren(...a);const l=new yA(i,r,t.disposables);r.focus(),s.dispose(),this.renderedHoverParts[e]=l}_focusOnHoverPartWithIndex(e){this.renderedHoverParts[e].hoverElement.focus()}_getRenderedHoverPartAtIndex(e){return this.renderedHoverParts[e]}dispose(){this._disposables.dispose()}}function L_t(n,e,t,i,s){e.sort(No(o=>o.ordinal,xd));const r=[];for(const o of e)r.push(NLe(t,o,i,s,n.onContentsChanged));return new I0(r)}function NLe(n,e,t,i,s){const r=new ue,o=F1("div.hover-row"),a=F1("div.hover-row-contents");o.appendChild(a);const l=e.contents;for(const d of l){if(WS(d))continue;const u=F1("div.markdown-hover"),h=_e(u,F1("div.hover-contents")),f=r.add(new ep({editor:n},t,i));r.add(f.onDidRenderAsync(()=>{h.className="hover-contents code-hover-contents",s()}));const g=r.add(f.render(d));h.appendChild(g.element),a.appendChild(u)}return{hoverPart:e,hoverElement:o,dispose(){r.dispose()}}}function k_t(n,e){switch(e){case Ba.Increase:{const t=n.lookupKeybinding(QB);return t?v("increaseVerbosityWithKb","Increase Hover Verbosity ({0})",t.getLabel()):v("increaseVerbosity","Increase Hover Verbosity")}case Ba.Decrease:{const t=n.lookupKeybinding(JB);return t?v("decreaseVerbosityWithKb","Decrease Hover Verbosity ({0})",t.getLabel()):v("decreaseVerbosity","Decrease Hover Verbosity")}}}function DK(n,e){return!!n[e]}class u6{constructor(e,t){this.target=e.target,this.isLeftClick=e.event.leftButton,this.isMiddleClick=e.event.middleButton,this.isRightClick=e.event.rightButton,this.hasTriggerModifier=DK(e.event,t.triggerModifier),this.hasSideBySideModifier=DK(e.event,t.triggerSideBySideModifier),this.isNoneOrSingleMouseDown=e.event.detail<=1}}class vue{constructor(e,t){this.keyCodeIsTriggerKey=e.keyCode===t.triggerKey,this.keyCodeIsSideBySideKey=e.keyCode===t.triggerSideBySideKey,this.hasTriggerModifier=DK(e,t.triggerModifier)}}class SA{constructor(e,t,i,s){this.triggerKey=e,this.triggerModifier=t,this.triggerSideBySideKey=i,this.triggerSideBySideModifier=s}equals(e){return this.triggerKey===e.triggerKey&&this.triggerModifier===e.triggerModifier&&this.triggerSideBySideKey===e.triggerSideBySideKey&&this.triggerSideBySideModifier===e.triggerSideBySideModifier}}function bue(n){return n==="altKey"?Bt?new SA(57,"metaKey",6,"altKey"):new SA(5,"ctrlKey",6,"altKey"):Bt?new SA(6,"altKey",57,"metaKey"):new SA(6,"altKey",5,"ctrlKey")}class tW extends ee{constructor(e,t){super(),this._onMouseMoveOrRelevantKeyDown=this._register(new X),this.onMouseMoveOrRelevantKeyDown=this._onMouseMoveOrRelevantKeyDown.event,this._onExecute=this._register(new X),this.onExecute=this._onExecute.event,this._onCancel=this._register(new X),this.onCancel=this._onCancel.event,this._editor=e,this._extractLineNumberFromMouseEvent=(t==null?void 0:t.extractLineNumberFromMouseEvent)??(i=>i.target.position?i.target.position.lineNumber:0),this._opts=bue(this._editor.getOption(78)),this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._register(this._editor.onDidChangeConfiguration(i=>{if(i.hasChanged(78)){const s=bue(this._editor.getOption(78));if(this._opts.equals(s))return;this._opts=s,this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._onCancel.fire()}})),this._register(this._editor.onMouseMove(i=>this._onEditorMouseMove(new u6(i,this._opts)))),this._register(this._editor.onMouseDown(i=>this._onEditorMouseDown(new u6(i,this._opts)))),this._register(this._editor.onMouseUp(i=>this._onEditorMouseUp(new u6(i,this._opts)))),this._register(this._editor.onKeyDown(i=>this._onEditorKeyDown(new vue(i,this._opts)))),this._register(this._editor.onKeyUp(i=>this._onEditorKeyUp(new vue(i,this._opts)))),this._register(this._editor.onMouseDrag(()=>this._resetHandler())),this._register(this._editor.onDidChangeCursorSelection(i=>this._onDidChangeCursorSelection(i))),this._register(this._editor.onDidChangeModel(i=>this._resetHandler())),this._register(this._editor.onDidChangeModelContent(()=>this._resetHandler())),this._register(this._editor.onDidScrollChange(i=>{(i.scrollTopChanged||i.scrollLeftChanged)&&this._resetHandler()}))}_onDidChangeCursorSelection(e){e.selection&&e.selection.startColumn!==e.selection.endColumn&&this._resetHandler()}_onEditorMouseMove(e){this._lastMouseMoveEvent=e,this._onMouseMoveOrRelevantKeyDown.fire([e,null])}_onEditorMouseDown(e){this._hasTriggerKeyOnMouseDown=e.hasTriggerModifier,this._lineNumberOnMouseDown=this._extractLineNumberFromMouseEvent(e)}_onEditorMouseUp(e){const t=this._extractLineNumberFromMouseEvent(e);this._hasTriggerKeyOnMouseDown&&this._lineNumberOnMouseDown&&this._lineNumberOnMouseDown===t&&this._onExecute.fire(e)}_onEditorKeyDown(e){this._lastMouseMoveEvent&&(e.keyCodeIsTriggerKey||e.keyCodeIsSideBySideKey&&e.hasTriggerModifier)?this._onMouseMoveOrRelevantKeyDown.fire([this._lastMouseMoveEvent,e]):e.hasTriggerModifier&&this._onCancel.fire()}_onEditorKeyUp(e){e.keyCodeIsTriggerKey&&this._onCancel.fire()}_resetHandler(){this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._onCancel.fire()}}class TLe{constructor(e,t){this.range=e,this.direction=t}}class qJ{constructor(e,t,i){this.hint=e,this.anchor=t,this.provider=i,this._isResolved=!1}with(e){const t=new qJ(this.hint,e.anchor,this.provider);return t._isResolved=this._isResolved,t._currentResolve=this._currentResolve,t}async resolve(e){if(typeof this.provider.resolveInlayHint=="function"){if(this._currentResolve)return await this._currentResolve,e.isCancellationRequested?void 0:this.resolve(e);this._isResolved||(this._currentResolve=this._doResolve(e).finally(()=>this._currentResolve=void 0)),await this._currentResolve}}async _doResolve(e){try{const t=await Promise.resolve(this.provider.resolveInlayHint(this.hint,e));this.hint.tooltip=(t==null?void 0:t.tooltip)??this.hint.tooltip,this.hint.label=(t==null?void 0:t.label)??this.hint.label,this.hint.textEdits=(t==null?void 0:t.textEdits)??this.hint.textEdits,this._isResolved=!0}catch(t){Wn(t),this._isResolved=!1}}}const iy=class iy{static async create(e,t,i,s){const r=[],o=e.ordered(t).reverse().map(a=>i.map(async l=>{try{const c=await a.provideInlayHints(t,l,s);(c!=null&&c.hints.length||a.onDidChangeInlayHints)&&r.push([c??iy._emptyInlayHintList,a])}catch(c){Wn(c)}}));if(await Promise.all(o.flat()),s.isCancellationRequested||t.isDisposed())throw new Dd;return new iy(i,r,t)}constructor(e,t,i){this._disposables=new ue,this.ranges=e,this.provider=new Set;const s=[];for(const[r,o]of t){this._disposables.add(r),this.provider.add(o);for(const a of r.hints){const l=i.validatePosition(a.position);let c="before";const d=iy._getRangeAtPosition(i,l);let u;d.getStartPosition().isBefore(l)?(u=M.fromPositions(d.getStartPosition(),l),c="after"):(u=M.fromPositions(l,d.getEndPosition()),c="before"),s.push(new qJ(a,new TLe(u,c),o))}}this.items=s.sort((r,o)=>Y.compare(r.hint.position,o.hint.position))}dispose(){this._disposables.dispose()}static _getRangeAtPosition(e,t){const i=t.lineNumber,s=e.getWordAtPosition(t);if(s)return new M(i,s.startColumn,i,s.endColumn);e.tokenization.tokenizeIfCheap(i);const r=e.tokenization.getLineTokens(i),o=t.column-1,a=r.findTokenIndexAtOffset(o);let l=r.getStartOffset(a),c=r.getEndOffset(a);return c-l===1&&(l===o&&a>1?(l=r.getStartOffset(a-1),c=r.getEndOffset(a-1)):c===o&&a<r.getCount()-1&&(l=r.getStartOffset(a+1),c=r.getEndOffset(a+1))),new M(i,l+1,i,c+1)}};iy._emptyInlayHintList=Object.freeze({dispose(){},hints:[]});let rF=iy;function E_t(n){return Xe.from({scheme:mt.command,path:n.id,query:n.arguments&&encodeURIComponent(JSON.stringify(n.arguments))}).toString()}var I_t=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Ff=function(n,e){return function(t,i){e(t,i,n)}};let Pd=class extends kD{constructor(e,t,i,s,r,o,a,l,c,d,u,h,f){super(e,{...s.getRawOptions(),overflowWidgetsDomNode:s.getOverflowWidgetsDomNode()},i,r,o,a,l,c,d,u,h,f),this._parentEditor=s,this._overwriteOptions=t,super.updateOptions(this._overwriteOptions),this._register(s.onDidChangeConfiguration(g=>this._onParentConfigurationChanged(g)))}getParentEditor(){return this._parentEditor}_onParentConfigurationChanged(e){super.updateOptions(this._parentEditor.getRawOptions()),super.updateOptions(this._overwriteOptions)}updateOptions(e){R3(this._overwriteOptions,e,!0),super.updateOptions(this._overwriteOptions)}};Pd=I_t([Ff(4,Ze),Ff(5,ri),Ff(6,Vi),Ff(7,at),Ff(8,ws),Ff(9,jn),Ff(10,al),Ff(11,vn),Ff(12,Be)],Pd);const wue=new ge(new Jt(0,122,204)),D_t={showArrow:!0,showFrame:!0,className:"",frameColor:wue,arrowColor:wue,keepEditorSelection:!1},N_t="vs.editor.contrib.zoneWidget";class T_t{constructor(e,t,i,s,r,o,a,l){this.id="",this.domNode=e,this.afterLineNumber=t,this.afterColumn=i,this.heightInLines=s,this.showInHiddenAreas=a,this.ordinal=l,this._onDomNodeTop=r,this._onComputedHeight=o}onDomNodeTop(e){this._onDomNodeTop(e)}onComputedHeight(e){this._onComputedHeight(e)}}class R_t{constructor(e,t){this._id=e,this._domNode=t}getId(){return this._id}getDomNode(){return this._domNode}getPosition(){return null}}const e5=class e5{constructor(e){this._editor=e,this._ruleName=e5._IdGenerator.nextId(),this._decorations=this._editor.createDecorationsCollection(),this._color=null,this._height=-1}dispose(){this.hide(),Wz(this._ruleName)}set color(e){this._color!==e&&(this._color=e,this._updateStyle())}set height(e){this._height!==e&&(this._height=e,this._updateStyle())}_updateStyle(){Wz(this._ruleName),mP(`.monaco-editor ${this._ruleName}`,`border-style: solid; border-color: transparent; border-bottom-color: ${this._color}; border-width: ${this._height}px; bottom: -${this._height}px !important; margin-left: -${this._height}px; `)}show(e){e.column===1&&(e={lineNumber:e.lineNumber,column:2}),this._decorations.set([{range:M.fromPositions(e),options:{description:"zone-widget-arrow",className:this._ruleName,stickiness:1}}])}hide(){this._decorations.clear()}};e5._IdGenerator=new JX(".arrow-decoration-");let NK=e5;class A_t{constructor(e,t={}){this._arrow=null,this._overlayWidget=null,this._resizeSash=null,this._viewZone=null,this._disposables=new ue,this.container=null,this._isShowing=!1,this.editor=e,this._positionMarkerId=this.editor.createDecorationsCollection(),this.options=eg(t),R3(this.options,D_t,!1),this.domNode=document.createElement("div"),this.options.isAccessible||(this.domNode.setAttribute("aria-hidden","true"),this.domNode.setAttribute("role","presentation")),this._disposables.add(this.editor.onDidLayoutChange(i=>{const s=this._getWidth(i);this.domNode.style.width=s+"px",this.domNode.style.left=this._getLeft(i)+"px",this._onWidth(s)}))}dispose(){this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this._viewZone&&this.editor.changeViewZones(e=>{this._viewZone&&e.removeZone(this._viewZone.id),this._viewZone=null}),this._positionMarkerId.clear(),this._disposables.dispose()}create(){this.domNode.classList.add("zone-widget"),this.options.className&&this.domNode.classList.add(this.options.className),this.container=document.createElement("div"),this.container.classList.add("zone-widget-container"),this.domNode.appendChild(this.container),this.options.showArrow&&(this._arrow=new NK(this.editor),this._disposables.add(this._arrow)),this._fillContainer(this.container),this._initSash(),this._applyStyles()}style(e){e.frameColor&&(this.options.frameColor=e.frameColor),e.arrowColor&&(this.options.arrowColor=e.arrowColor),this._applyStyles()}_applyStyles(){if(this.container&&this.options.frameColor){const e=this.options.frameColor.toString();this.container.style.borderTopColor=e,this.container.style.borderBottomColor=e}if(this._arrow&&this.options.arrowColor){const e=this.options.arrowColor.toString();this._arrow.color=e}}_getWidth(e){return e.width-e.minimap.minimapWidth-e.verticalScrollbarWidth}_getLeft(e){return e.minimap.minimapWidth>0&&e.minimap.minimapLeft===0?e.minimap.minimapWidth:0}_onViewZoneTop(e){this.domNode.style.top=e+"px"}_onViewZoneHeight(e){var t;if(this.domNode.style.height=`${e}px`,this.container){const i=e-this._decoratingElementsHeight();this.container.style.height=`${i}px`;const s=this.editor.getLayoutInfo();this._doLayout(i,this._getWidth(s))}(t=this._resizeSash)==null||t.layout()}get position(){const e=this._positionMarkerId.getRange(0);if(e)return e.getStartPosition()}show(e,t){const i=M.isIRange(e)?M.lift(e):M.fromPositions(e);this._isShowing=!0,this._showImpl(i,t),this._isShowing=!1,this._positionMarkerId.set([{range:i,options:_t.EMPTY}])}hide(){var e;this._viewZone&&(this.editor.changeViewZones(t=>{this._viewZone&&t.removeZone(this._viewZone.id)}),this._viewZone=null),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),(e=this._arrow)==null||e.hide(),this._positionMarkerId.clear()}_decoratingElementsHeight(){const e=this.editor.getOption(67);let t=0;if(this.options.showArrow){const i=Math.round(e/3);t+=2*i}if(this.options.showFrame){const i=Math.round(e/9);t+=2*i}return t}_showImpl(e,t){const i=e.getStartPosition(),s=this.editor.getLayoutInfo(),r=this._getWidth(s);this.domNode.style.width=`${r}px`,this.domNode.style.left=this._getLeft(s)+"px";const o=document.createElement("div");o.style.overflow="hidden";const a=this.editor.getOption(67);if(!this.options.allowUnlimitedHeight){const h=Math.max(12,this.editor.getLayoutInfo().height/a*.8);t=Math.min(t,h)}let l=0,c=0;if(this._arrow&&this.options.showArrow&&(l=Math.round(a/3),this._arrow.height=l,this._arrow.show(i)),this.options.showFrame&&(c=Math.round(a/9)),this.editor.changeViewZones(h=>{this._viewZone&&h.removeZone(this._viewZone.id),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this.domNode.style.top="-1000px",this._viewZone=new T_t(o,i.lineNumber,i.column,t,f=>this._onViewZoneTop(f),f=>this._onViewZoneHeight(f),this.options.showInHiddenAreas,this.options.ordinal),this._viewZone.id=h.addZone(this._viewZone),this._overlayWidget=new R_t(N_t+this._viewZone.id,this.domNode),this.editor.addOverlayWidget(this._overlayWidget)}),this.container&&this.options.showFrame){const h=this.options.frameWidth?this.options.frameWidth:c;this.container.style.borderTopWidth=h+"px",this.container.style.borderBottomWidth=h+"px"}const d=t*a-this._decoratingElementsHeight();this.container&&(this.container.style.top=l+"px",this.container.style.height=d+"px",this.container.style.overflow="hidden"),this._doLayout(d,r),this.options.keepEditorSelection||this.editor.setSelection(e);const u=this.editor.getModel();if(u){const h=u.validateRange(new M(e.startLineNumber,1,e.endLineNumber+1,1));this.revealRange(h,h.startLineNumber===u.getLineCount())}}revealRange(e,t){t?this.editor.revealLineNearTop(e.endLineNumber,0):this.editor.revealRange(e,0)}setCssClass(e,t){this.container&&(t&&this.container.classList.remove(t),this.container.classList.add(e))}_onWidth(e){}_doLayout(e,t){}_relayout(e){this._viewZone&&this._viewZone.heightInLines!==e&&this.editor.changeViewZones(t=>{this._viewZone&&(this._viewZone.heightInLines=e,t.layoutZone(this._viewZone.id))})}_initSash(){if(this._resizeSash)return;this._resizeSash=this._disposables.add(new Dr(this.domNode,this,{orientation:1})),this.options.isResizeable||(this._resizeSash.state=0);let e;this._disposables.add(this._resizeSash.onDidStart(t=>{this._viewZone&&(e={startY:t.startY,heightInLines:this._viewZone.heightInLines})})),this._disposables.add(this._resizeSash.onDidEnd(()=>{e=void 0})),this._disposables.add(this._resizeSash.onDidChange(t=>{if(e){const i=(t.currentY-e.startY)/this.editor.getOption(67),s=i<0?Math.ceil(i):Math.floor(i),r=e.heightInLines+s;r>5&&r<35&&this._relayout(r)}}))}getHorizontalSashLeft(){return 0}getHorizontalSashTop(){return(this.domNode.style.height===null?0:parseInt(this.domNode.style.height))-this._decoratingElementsHeight()/2}getHorizontalSashWidth(){const e=this.editor.getLayoutInfo();return e.width-e.minimap.minimapWidth}}var RLe=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},ALe=function(n,e){return function(t,i){e(t,i,n)}};const MLe=Wt("IPeekViewService");jt(MLe,class{constructor(){this._widgets=new Map}addExclusiveWidget(n,e){const t=this._widgets.get(n);t&&(t.listener.dispose(),t.widget.dispose());const i=()=>{const s=this._widgets.get(n);s&&s.widget===e&&(s.listener.dispose(),this._widgets.delete(n))};this._widgets.set(n,{widget:e,listener:e.onDidClose(i)})}},1);var ga;(function(n){n.inPeekEditor=new Re("inReferenceSearchEditor",!0,v("inReferenceSearchEditor","Whether the current code editor is embedded inside peek")),n.notInPeekEditor=n.inPeekEditor.toNegated()})(ga||(ga={}));var sS;let oF=(sS=class{constructor(e,t){e instanceof Pd&&ga.inPeekEditor.bindTo(t)}dispose(){}},sS.ID="editor.contrib.referenceController",sS);oF=RLe([ALe(1,at)],oF);Xt(oF.ID,oF,0);function M_t(n){const e=n.get(ri).getFocusedCodeEditor();return e instanceof Pd?e.getParentEditor():e}const P_t={headerBackgroundColor:ge.white,primaryHeadingColor:ge.fromHex("#333333"),secondaryHeadingColor:ge.fromHex("#6c6c6cb3")};let aF=class extends A_t{constructor(e,t,i){super(e,t),this.instantiationService=i,this._onDidClose=new X,this.onDidClose=this._onDidClose.event,R3(this.options,P_t,!1)}dispose(){this.disposed||(this.disposed=!0,super.dispose(),this._onDidClose.fire(this))}style(e){const t=this.options;e.headerBackgroundColor&&(t.headerBackgroundColor=e.headerBackgroundColor),e.primaryHeadingColor&&(t.primaryHeadingColor=e.primaryHeadingColor),e.secondaryHeadingColor&&(t.secondaryHeadingColor=e.secondaryHeadingColor),super.style(e)}_applyStyles(){super._applyStyles();const e=this.options;this._headElement&&e.headerBackgroundColor&&(this._headElement.style.backgroundColor=e.headerBackgroundColor.toString()),this._primaryHeading&&e.primaryHeadingColor&&(this._primaryHeading.style.color=e.primaryHeadingColor.toString()),this._secondaryHeading&&e.secondaryHeadingColor&&(this._secondaryHeading.style.color=e.secondaryHeadingColor.toString()),this._bodyElement&&e.frameColor&&(this._bodyElement.style.borderColor=e.frameColor.toString())}_fillContainer(e){this.setCssClass("peekview-widget"),this._headElement=xe(".head"),this._bodyElement=xe(".body"),this._fillHead(this._headElement),this._fillBody(this._bodyElement),e.appendChild(this._headElement),e.appendChild(this._bodyElement)}_fillHead(e,t){this._titleElement=xe(".peekview-title"),this.options.supportOnTitleClick&&(this._titleElement.classList.add("clickable"),Cn(this._titleElement,"click",r=>this._onTitleClick(r))),_e(this._headElement,this._titleElement),this._fillTitleIcon(this._titleElement),this._primaryHeading=xe("span.filename"),this._secondaryHeading=xe("span.dirname"),this._metaHeading=xe("span.meta"),_e(this._titleElement,this._primaryHeading,this._secondaryHeading,this._metaHeading);const i=xe(".peekview-actions");_e(this._headElement,i);const s=this._getActionBarOptions();this._actionbarWidget=new Ul(i,s),this._disposables.add(this._actionbarWidget),t||this._actionbarWidget.push(new Ya("peekview.close",v("label.close","Close"),ot.asClassName(ye.close),!0,()=>(this.dispose(),Promise.resolve())),{label:!1,icon:!0})}_fillTitleIcon(e){}_getActionBarOptions(){return{actionViewItemProvider:Z1e.bind(void 0,this.instantiationService),orientation:0}}_onTitleClick(e){}setTitle(e,t){this._primaryHeading&&this._secondaryHeading&&(this._primaryHeading.innerText=e,this._primaryHeading.setAttribute("title",e),t?this._secondaryHeading.innerText=t:nr(this._secondaryHeading))}setMetaTitle(e){this._metaHeading&&(e?(this._metaHeading.innerText=e,za(this._metaHeading)):Co(this._metaHeading))}_doLayout(e,t){if(!this._isShowing&&e<0){this.dispose();return}const i=Math.ceil(this.editor.getOption(67)*1.2),s=Math.round(e-(i+2));this._doLayoutHead(i,t),this._doLayoutBody(s,t)}_doLayoutHead(e,t){this._headElement&&(this._headElement.style.height=`${e}px`,this._headElement.style.lineHeight=this._headElement.style.height)}_doLayoutBody(e,t){this._bodyElement&&(this._bodyElement.style.height=`${e}px`)}};aF=RLe([ALe(2,Ze)],aF);const O_t=B("peekViewTitle.background",{dark:"#252526",light:"#F3F3F3",hcDark:ge.black,hcLight:ge.white},v("peekViewTitleBackground","Background color of the peek view title area.")),PLe=B("peekViewTitleLabel.foreground",{dark:ge.white,light:ge.black,hcDark:ge.white,hcLight:bf},v("peekViewTitleForeground","Color of the peek view title.")),OLe=B("peekViewTitleDescription.foreground",{dark:"#ccccccb3",light:"#616161",hcDark:"#FFFFFF99",hcLight:"#292929"},v("peekViewTitleInfoForeground","Color of the peek view title info.")),F_t=B("peekView.border",{dark:af,light:af,hcDark:Yt,hcLight:Yt},v("peekViewBorder","Color of the peek view borders and arrow.")),B_t=B("peekViewResult.background",{dark:"#252526",light:"#F3F3F3",hcDark:ge.black,hcLight:ge.white},v("peekViewResultsBackground","Background color of the peek view result list."));B("peekViewResult.lineForeground",{dark:"#bbbbbb",light:"#646465",hcDark:ge.white,hcLight:bf},v("peekViewResultsMatchForeground","Foreground color for line nodes in the peek view result list."));B("peekViewResult.fileForeground",{dark:ge.white,light:"#1E1E1E",hcDark:ge.white,hcLight:bf},v("peekViewResultsFileForeground","Foreground color for file nodes in the peek view result list."));B("peekViewResult.selectionBackground",{dark:"#3399ff33",light:"#3399ff33",hcDark:null,hcLight:null},v("peekViewResultsSelectionBackground","Background color of the selected entry in the peek view result list."));B("peekViewResult.selectionForeground",{dark:ge.white,light:"#6C6C6C",hcDark:ge.white,hcLight:bf},v("peekViewResultsSelectionForeground","Foreground color of the selected entry in the peek view result list."));const FLe=B("peekViewEditor.background",{dark:"#001F33",light:"#F2F8FC",hcDark:ge.black,hcLight:ge.white},v("peekViewEditorBackground","Background color of the peek view editor."));B("peekViewEditorGutter.background",FLe,v("peekViewEditorGutterBackground","Background color of the gutter in the peek view editor."));B("peekViewEditorStickyScroll.background",FLe,v("peekViewEditorStickScrollBackground","Background color of sticky scroll in the peek view editor."));B("peekViewResult.matchHighlightBackground",{dark:"#ea5c004d",light:"#ea5c004d",hcDark:null,hcLight:null},v("peekViewResultsMatchHighlight","Match highlight color in the peek view result list."));B("peekViewEditor.matchHighlightBackground",{dark:"#ff8f0099",light:"#f5d802de",hcDark:null,hcLight:null},v("peekViewEditorMatchHighlight","Match highlight color in the peek view editor."));B("peekViewEditor.matchHighlightBorder",{dark:null,light:null,hcDark:nn,hcLight:nn},v("peekViewEditorMatchHighlightBorder","Match highlight border in the peek view editor."));class U_{constructor(e,t,i,s){this.isProviderFirst=e,this.parent=t,this.link=i,this._rangeCallback=s,this.id=DU.nextId()}get uri(){return this.link.uri}get range(){return this._range??this.link.targetSelectionRange??this.link.range}set range(e){this._range=e,this._rangeCallback(this)}get ariaMessage(){var t;const e=(t=this.parent.getPreview(this))==null?void 0:t.preview(this.range);return e?v({key:"aria.oneReference.preview",comment:["Placeholders are: 0: filename, 1:line number, 2: column number, 3: preview snippet of source code"]},"{0} in {1} on line {2} at column {3}",e.value,Pc(this.uri),this.range.startLineNumber,this.range.startColumn):v("aria.oneReference","in {0} on line {1} at column {2}",Pc(this.uri),this.range.startLineNumber,this.range.startColumn)}}class W_t{constructor(e){this._modelReference=e}dispose(){this._modelReference.dispose()}preview(e,t=8){const i=this._modelReference.object.textEditorModel;if(!i)return;const{startLineNumber:s,startColumn:r,endLineNumber:o,endColumn:a}=e,l=i.getWordUntilPosition({lineNumber:s,column:r-t}),c=new M(s,l.startColumn,s,r),d=new M(o,a,o,1073741824),u=i.getValueInRange(c).replace(/^\s+/,""),h=i.getValueInRange(e),f=i.getValueInRange(d).replace(/\s+$/,"");return{value:u+h+f,highlight:{start:u.length,end:u.length+h.length}}}}class zD{constructor(e,t){this.parent=e,this.uri=t,this.children=[],this._previews=new $s}dispose(){Ti(this._previews.values()),this._previews.clear()}getPreview(e){return this._previews.get(e.uri)}get ariaMessage(){const e=this.children.length;return e===1?v("aria.fileReferences.1","1 symbol in {0}, full path {1}",Pc(this.uri),this.uri.fsPath):v("aria.fileReferences.N","{0} symbols in {1}, full path {2}",e,Pc(this.uri),this.uri.fsPath)}async resolve(e){if(this._previews.size!==0)return this;for(const t of this.children)if(!this._previews.has(t.uri))try{const i=await e.createModelReference(t.uri);this._previews.set(t.uri,new W_t(i))}catch(i){pt(i)}return this}}class Qa{constructor(e,t){this.groups=[],this.references=[],this._onDidChangeReferenceRange=new X,this.onDidChangeReferenceRange=this._onDidChangeReferenceRange.event,this._links=e,this._title=t;const[i]=e;e.sort(Qa._compareReferences);let s;for(const r of e)if((!s||!sn.isEqual(s.uri,r.uri,!0))&&(s=new zD(this,r.uri),this.groups.push(s)),s.children.length===0||Qa._compareReferences(r,s.children[s.children.length-1])!==0){const o=new U_(i===r,s,r,a=>this._onDidChangeReferenceRange.fire(a));this.references.push(o),s.children.push(o)}}dispose(){Ti(this.groups),this._onDidChangeReferenceRange.dispose(),this.groups.length=0}clone(){return new Qa(this._links,this._title)}get title(){return this._title}get isEmpty(){return this.groups.length===0}get ariaMessage(){return this.isEmpty?v("aria.result.0","No results found"):this.references.length===1?v("aria.result.1","Found 1 symbol in {0}",this.references[0].uri.fsPath):this.groups.length===1?v("aria.result.n1","Found {0} symbols in {1}",this.references.length,this.groups[0].uri.fsPath):v("aria.result.nm","Found {0} symbols in {1} files",this.references.length,this.groups.length)}nextOrPreviousReference(e,t){const{parent:i}=e;let s=i.children.indexOf(e);const r=i.children.length,o=i.parent.groups.length;return o===1||t&&s+1<r||!t&&s>0?(t?s=(s+1)%r:s=(s+r-1)%r,i.children[s]):(s=i.parent.groups.indexOf(i),t?(s=(s+1)%o,i.parent.groups[s].children[0]):(s=(s+o-1)%o,i.parent.groups[s].children[i.parent.groups[s].children.length-1]))}nearestReference(e,t){const i=this.references.map((s,r)=>({idx:r,prefixLen:D_(s.uri.toString(),e.toString()),offsetDist:Math.abs(s.range.startLineNumber-t.lineNumber)*100+Math.abs(s.range.startColumn-t.column)})).sort((s,r)=>s.prefixLen>r.prefixLen?-1:s.prefixLen<r.prefixLen?1:s.offsetDist<r.offsetDist?-1:s.offsetDist>r.offsetDist?1:0)[0];if(i)return this.references[i.idx]}referenceAt(e,t){for(const i of this.references)if(i.uri.toString()===e.toString()&&M.containsPosition(i.range,t))return i}firstReference(){for(const e of this.references)if(e.isProviderFirst)return e;return this.references[0]}static _compareReferences(e,t){return sn.compare(e.uri,t.uri)||M.compareRangesUsingStarts(e.range,t.range)}}var iW=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},nW=function(n,e){return function(t,i){e(t,i,n)}},TK;let RK=class{constructor(e){this._resolverService=e}hasChildren(e){return e instanceof Qa||e instanceof zD}getChildren(e){if(e instanceof Qa)return e.groups;if(e instanceof zD)return e.resolve(this._resolverService).then(t=>t.children);throw new Error("bad tree")}};RK=iW([nW(0,_a)],RK);class H_t{getHeight(){return 23}getTemplateId(e){return e instanceof zD?lF.id:cF.id}}let AK=class{constructor(e){this._keybindingService=e}getKeyboardNavigationLabel(e){var t;if(e instanceof U_){const i=(t=e.parent.getPreview(e))==null?void 0:t.preview(e.range);if(i)return i.value}return Pc(e.uri)}};AK=iW([nW(0,hi)],AK);class V_t{getId(e){return e instanceof U_?e.id:e.uri}}let MK=class extends ee{constructor(e,t){super(),this._labelService=t;const i=document.createElement("div");i.classList.add("reference-file"),this.file=this._register(new _O(i,{supportHighlights:!0})),this.badge=new I$(_e(i,xe(".count")),{},G1e),e.appendChild(i)}set(e,t){const i=pB(e.uri);this.file.setLabel(this._labelService.getUriBasenameLabel(e.uri),this._labelService.getUriLabel(i,{relative:!0}),{title:this._labelService.getUriLabel(e.uri),matches:t});const s=e.children.length;this.badge.setCount(s),s>1?this.badge.setTitleFormat(v("referencesCount","{0} references",s)):this.badge.setTitleFormat(v("referenceCount","{0} reference",s))}};MK=iW([nW(1,VS)],MK);var gw;let lF=(gw=class{constructor(e){this._instantiationService=e,this.templateId=TK.id}renderTemplate(e){return this._instantiationService.createInstance(MK,e)}renderElement(e,t,i){i.set(e.element,zN(e.filterData))}disposeTemplate(e){e.dispose()}},TK=gw,gw.id="FileReferencesRenderer",gw);lF=TK=iW([nW(0,Ze)],lF);class z_t extends ee{constructor(e){super(),this.label=this._register(new Qm(e))}set(e,t){var s;const i=(s=e.parent.getPreview(e))==null?void 0:s.preview(e.range);if(!i||!i.value)this.label.set(`${Pc(e.uri)}:${e.range.startLineNumber+1}:${e.range.startColumn+1}`);else{const{value:r,highlight:o}=i;t&&!Au.isDefault(t)?(this.label.element.classList.toggle("referenceMatch",!1),this.label.set(r,zN(t))):(this.label.element.classList.toggle("referenceMatch",!0),this.label.set(r,[o]))}}}const t5=class t5{constructor(){this.templateId=t5.id}renderTemplate(e){return new z_t(e)}renderElement(e,t,i){i.set(e.element,e.filterData)}disposeTemplate(e){e.dispose()}};t5.id="OneReferenceRenderer";let cF=t5;class U_t{getWidgetAriaLabel(){return v("treeAriaLabel","References")}getAriaLabel(e){return e.ariaMessage}}var $_t=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},MC=function(n,e){return function(t,i){e(t,i,n)}};const i5=class i5{constructor(e,t){this._editor=e,this._model=t,this._decorations=new Map,this._decorationIgnoreSet=new Set,this._callOnDispose=new ue,this._callOnModelChange=new ue,this._callOnDispose.add(this._editor.onDidChangeModel(()=>this._onModelChanged())),this._onModelChanged()}dispose(){this._callOnModelChange.dispose(),this._callOnDispose.dispose(),this.removeDecorations()}_onModelChanged(){this._callOnModelChange.clear();const e=this._editor.getModel();if(e){for(const t of this._model.references)if(t.uri.toString()===e.uri.toString()){this._addDecorations(t.parent);return}}}_addDecorations(e){if(!this._editor.hasModel())return;this._callOnModelChange.add(this._editor.getModel().onDidChangeDecorations(()=>this._onDecorationChanged()));const t=[],i=[];for(let s=0,r=e.children.length;s<r;s++){const o=e.children[s];this._decorationIgnoreSet.has(o.id)||o.uri.toString()===this._editor.getModel().uri.toString()&&(t.push({range:o.range,options:i5.DecorationOptions}),i.push(s))}this._editor.changeDecorations(s=>{const r=s.deltaDecorations([],t);for(let o=0;o<r.length;o++)this._decorations.set(r[o],e.children[i[o]])})}_onDecorationChanged(){const e=[],t=this._editor.getModel();if(t){for(const[i,s]of this._decorations){const r=t.getDecorationRange(i);if(!r)continue;let o=!1;if(!M.equalsRange(r,s.range)){if(M.spansMultipleLines(r))o=!0;else{const a=s.range.endColumn-s.range.startColumn,l=r.endColumn-r.startColumn;a!==l&&(o=!0)}o?(this._decorationIgnoreSet.add(s.id),e.push(i)):s.range=r}}for(let i=0,s=e.length;i<s;i++)this._decorations.delete(e[i]);this._editor.removeDecorations(e)}}removeDecorations(){this._editor.removeDecorations([...this._decorations.keys()]),this._decorations.clear()}};i5.DecorationOptions=_t.register({description:"reference-decoration",stickiness:1,className:"reference-decoration"});let PK=i5;class j_t{constructor(){this.ratio=.7,this.heightInLines=18}static fromJSON(e){let t,i;try{const s=JSON.parse(e);t=s.ratio,i=s.heightInLines}catch{}return{ratio:t||.7,heightInLines:i||18}}}class K_t extends O${}let OK=class extends aF{constructor(e,t,i,s,r,o,a,l,c){super(e,{showFrame:!1,showArrow:!0,isResizeable:!0,isAccessible:!0,supportOnTitleClick:!0},o),this._defaultTreeKeyboardSupport=t,this.layoutData=i,this._textModelResolverService=r,this._instantiationService=o,this._peekViewService=a,this._uriLabel=l,this._keybindingService=c,this._disposeOnNewModel=new ue,this._callOnDispose=new ue,this._onDidSelectReference=new X,this.onDidSelectReference=this._onDidSelectReference.event,this._dim=new _i(0,0),this._isClosing=!1,this._applyTheme(s.getColorTheme()),this._callOnDispose.add(s.onDidColorThemeChange(this._applyTheme.bind(this))),this._peekViewService.addExclusiveWidget(e,this),this.create()}get isClosing(){return this._isClosing}dispose(){this._isClosing=!0,this.setModel(void 0),this._callOnDispose.dispose(),this._disposeOnNewModel.dispose(),Ti(this._preview),Ti(this._previewNotAvailableMessage),Ti(this._tree),Ti(this._previewModelReference),this._splitView.dispose(),super.dispose()}_applyTheme(e){const t=e.getColor(F_t)||ge.transparent;this.style({arrowColor:t,frameColor:t,headerBackgroundColor:e.getColor(O_t)||ge.transparent,primaryHeadingColor:e.getColor(PLe),secondaryHeadingColor:e.getColor(OLe)})}show(e){super.show(e,this.layoutData.heightInLines||18)}focusOnReferenceTree(){this._tree.domFocus()}focusOnPreviewEditor(){this._preview.focus()}isPreviewEditorFocused(){return this._preview.hasTextFocus()}_onTitleClick(e){this._preview&&this._preview.getModel()&&this._onDidSelectReference.fire({element:this._getFocusedReference(),kind:e.ctrlKey||e.metaKey||e.altKey?"side":"open",source:"title"})}_fillBody(e){this.setCssClass("reference-zone-widget"),this._messageContainer=_e(e,xe("div.messages")),Co(this._messageContainer),this._splitView=new Hye(e,{orientation:1}),this._previewContainer=_e(e,xe("div.preview.inline"));const t={scrollBeyondLastLine:!1,scrollbar:{verticalScrollbarSize:14,horizontal:"auto",useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,alwaysConsumeMouseWheel:!0},overviewRulerLanes:2,fixedOverflowWidgets:!0,minimap:{enabled:!1}};this._preview=this._instantiationService.createInstance(Pd,this._previewContainer,t,{},this.editor),Co(this._previewContainer),this._previewNotAvailableMessage=this._instantiationService.createInstance(yu,v("missingPreviewMessage","no preview available"),Ro,yu.DEFAULT_CREATION_OPTIONS,null),this._treeContainer=_e(e,xe("div.ref-tree.inline"));const i={keyboardSupport:this._defaultTreeKeyboardSupport,accessibilityProvider:new U_t,keyboardNavigationLabelProvider:this._instantiationService.createInstance(AK),identityProvider:new V_t,openOnSingleClick:!0,selectionNavigation:!0,overrideStyles:{listBackground:B_t}};this._defaultTreeKeyboardSupport&&this._callOnDispose.add(Cn(this._treeContainer,"keydown",r=>{r.equals(9)&&(this._keybindingService.dispatchEvent(r,r.target),r.stopPropagation())},!0)),this._tree=this._instantiationService.createInstance(K_t,"ReferencesWidget",this._treeContainer,new H_t,[this._instantiationService.createInstance(lF),this._instantiationService.createInstance(cF)],this._instantiationService.createInstance(RK),i),this._splitView.addView({onDidChange:Ee.None,element:this._previewContainer,minimumSize:200,maximumSize:Number.MAX_VALUE,layout:r=>{this._preview.layout({height:this._dim.height,width:r})}},dO.Distribute),this._splitView.addView({onDidChange:Ee.None,element:this._treeContainer,minimumSize:100,maximumSize:Number.MAX_VALUE,layout:r=>{this._treeContainer.style.height=`${this._dim.height}px`,this._treeContainer.style.width=`${r}px`,this._tree.layout(this._dim.height,r)}},dO.Distribute),this._disposables.add(this._splitView.onDidSashChange(()=>{this._dim.width&&(this.layoutData.ratio=this._splitView.getViewSize(0)/this._dim.width)},void 0));const s=(r,o)=>{r instanceof U_&&(o==="show"&&this._revealReference(r,!1),this._onDidSelectReference.fire({element:r,kind:o,source:"tree"}))};this._disposables.add(this._tree.onDidOpen(r=>{r.sideBySide?s(r.element,"side"):r.editorOptions.pinned?s(r.element,"goto"):s(r.element,"show")})),Co(this._treeContainer)}_onWidth(e){this._dim&&this._doLayoutBody(this._dim.height,e)}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._dim=new _i(t,e),this.layoutData.heightInLines=this._viewZone?this._viewZone.heightInLines:this.layoutData.heightInLines,this._splitView.layout(t),this._splitView.resizeView(0,t*this.layoutData.ratio)}setSelection(e){return this._revealReference(e,!0).then(()=>{this._model&&(this._tree.setSelection([e]),this._tree.setFocus([e]))})}setModel(e){return this._disposeOnNewModel.clear(),this._model=e,this._model?this._onNewModel():Promise.resolve()}_onNewModel(){return this._model?this._model.isEmpty?(this.setTitle(""),this._messageContainer.innerText=v("noResults","No results"),za(this._messageContainer),Promise.resolve(void 0)):(Co(this._messageContainer),this._decorationsManager=new PK(this._preview,this._model),this._disposeOnNewModel.add(this._decorationsManager),this._disposeOnNewModel.add(this._model.onDidChangeReferenceRange(e=>this._tree.rerender(e))),this._disposeOnNewModel.add(this._preview.onMouseDown(e=>{const{event:t,target:i}=e;if(t.detail!==2)return;const s=this._getFocusedReference();s&&this._onDidSelectReference.fire({element:{uri:s.uri,range:i.range},kind:t.ctrlKey||t.metaKey||t.altKey?"side":"open",source:"editor"})})),this.container.classList.add("results-loaded"),za(this._treeContainer),za(this._previewContainer),this._splitView.layout(this._dim.width),this.focusOnReferenceTree(),this._tree.setInput(this._model.groups.length===1?this._model.groups[0]:this._model)):Promise.resolve(void 0)}_getFocusedReference(){const[e]=this._tree.getFocus();if(e instanceof U_)return e;if(e instanceof zD&&e.children.length>0)return e.children[0]}async revealReference(e){await this._revealReference(e,!1),this._onDidSelectReference.fire({element:e,kind:"goto",source:"tree"})}async _revealReference(e,t){if(this._revealedReference===e)return;this._revealedReference=e,e.uri.scheme!==mt.inMemory?this.setTitle(HJe(e.uri),this._uriLabel.getUriLabel(pB(e.uri))):this.setTitle(v("peekView.alternateTitle","References"));const i=this._textModelResolverService.createModelReference(e.uri);this._tree.getInput()===e.parent?this._tree.reveal(e):(t&&this._tree.reveal(e.parent),await this._tree.expand(e.parent),this._tree.reveal(e));const s=await i;if(!this._model){s.dispose();return}Ti(this._previewModelReference);const r=s.object;if(r){const o=this._preview.getModel()===r.textEditorModel?0:1,a=M.lift(e.range).collapseToStart();this._previewModelReference=s,this._preview.setModel(r.textEditorModel),this._preview.setSelection(a),this._preview.revealRangeInCenter(a,o)}else this._preview.setModel(this._previewNotAvailableMessage),s.dispose()}};OK=$_t([MC(3,ws),MC(4,_a),MC(5,Ze),MC(6,MLe),MC(7,VS),MC(8,hi)],OK);var q_t=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},PC=function(n,e){return function(t,i){e(t,i,n)}},Y2;const J0=new Re("referenceSearchVisible",!1,v("referenceSearchVisible","Whether reference peek is visible, like 'Peek References' or 'Peek Definition'"));var pw;let D0=(pw=class{static get(e){return e.getContribution(Y2.ID)}constructor(e,t,i,s,r,o,a,l){this._defaultTreeKeyboardSupport=e,this._editor=t,this._editorService=s,this._notificationService=r,this._instantiationService=o,this._storageService=a,this._configurationService=l,this._disposables=new ue,this._requestIdPool=0,this._ignoreModelChangeEvent=!1,this._referenceSearchVisible=J0.bindTo(i)}dispose(){var e,t;this._referenceSearchVisible.reset(),this._disposables.dispose(),(e=this._widget)==null||e.dispose(),(t=this._model)==null||t.dispose(),this._widget=void 0,this._model=void 0}toggleWidget(e,t,i){let s;if(this._widget&&(s=this._widget.position),this.closeWidget(),s&&e.containsPosition(s))return;this._peekMode=i,this._referenceSearchVisible.set(!0),this._disposables.add(this._editor.onDidChangeModelLanguage(()=>{this.closeWidget()})),this._disposables.add(this._editor.onDidChangeModel(()=>{this._ignoreModelChangeEvent||this.closeWidget()}));const r="peekViewLayout",o=j_t.fromJSON(this._storageService.get(r,0,"{}"));this._widget=this._instantiationService.createInstance(OK,this._editor,this._defaultTreeKeyboardSupport,o),this._widget.setTitle(v("labelLoading","Loading...")),this._widget.show(e),this._disposables.add(this._widget.onDidClose(()=>{t.cancel(),this._widget?(this._storageService.store(r,JSON.stringify(this._widget.layoutData),0,1),this._widget.isClosing||this.closeWidget(),this._widget=void 0):this.closeWidget()})),this._disposables.add(this._widget.onDidSelectReference(l=>{const{element:c,kind:d}=l;if(c)switch(d){case"open":(l.source!=="editor"||!this._configurationService.getValue("editor.stablePeek"))&&this.openReference(c,!1,!1);break;case"side":this.openReference(c,!0,!1);break;case"goto":i?this._gotoReference(c,!0):this.openReference(c,!1,!0);break}}));const a=++this._requestIdPool;t.then(l=>{var c;if(a!==this._requestIdPool||!this._widget){l.dispose();return}return(c=this._model)==null||c.dispose(),this._model=l,this._widget.setModel(this._model).then(()=>{if(this._widget&&this._model&&this._editor.hasModel()){this._model.isEmpty?this._widget.setMetaTitle(""):this._widget.setMetaTitle(v("metaTitle.N","{0} ({1})",this._model.title,this._model.references.length));const d=this._editor.getModel().uri,u=new Y(e.startLineNumber,e.startColumn),h=this._model.nearestReference(d,u);if(h)return this._widget.setSelection(h).then(()=>{this._widget&&this._editor.getOption(87)==="editor"&&this._widget.focusOnPreviewEditor()})}})},l=>{this._notificationService.error(l)})}changeFocusBetweenPreviewAndReferences(){this._widget&&(this._widget.isPreviewEditorFocused()?this._widget.focusOnReferenceTree():this._widget.focusOnPreviewEditor())}async goToNextOrPreviousReference(e){if(!this._editor.hasModel()||!this._model||!this._widget)return;const t=this._widget.position;if(!t)return;const i=this._model.nearestReference(this._editor.getModel().uri,t);if(!i)return;const s=this._model.nextOrPreviousReference(i,e),r=this._editor.hasTextFocus(),o=this._widget.isPreviewEditorFocused();await this._widget.setSelection(s),await this._gotoReference(s,!1),r?this._editor.focus():this._widget&&o&&this._widget.focusOnPreviewEditor()}async revealReference(e){!this._editor.hasModel()||!this._model||!this._widget||await this._widget.revealReference(e)}closeWidget(e=!0){var t,i;(t=this._widget)==null||t.dispose(),(i=this._model)==null||i.dispose(),this._referenceSearchVisible.reset(),this._disposables.clear(),this._widget=void 0,this._model=void 0,e&&this._editor.focus(),this._requestIdPool+=1}_gotoReference(e,t){var s;(s=this._widget)==null||s.hide(),this._ignoreModelChangeEvent=!0;const i=M.lift(e.range).collapseToStart();return this._editorService.openCodeEditor({resource:e.uri,options:{selection:i,selectionSource:"code.jump",pinned:t}},this._editor).then(r=>{if(this._ignoreModelChangeEvent=!1,!r||!this._widget){this.closeWidget();return}if(this._editor===r)this._widget.show(i),this._widget.focusOnReferenceTree();else{const o=Y2.get(r),a=this._model.clone();this.closeWidget(),r.focus(),o==null||o.toggleWidget(i,Ds(l=>Promise.resolve(a)),this._peekMode??!1)}},r=>{this._ignoreModelChangeEvent=!1,pt(r)})}openReference(e,t,i){t||this.closeWidget();const{uri:s,range:r}=e;this._editorService.openCodeEditor({resource:s,options:{selection:r,selectionSource:"code.jump",pinned:i}},this._editor,t)}},Y2=pw,pw.ID="editor.contrib.referencesController",pw);D0=Y2=q_t([PC(2,at),PC(3,ri),PC(4,jn),PC(5,Ze),PC(6,Wd),PC(7,Tt)],D0);function eC(n,e){const t=M_t(n);if(!t)return;const i=D0.get(t);i&&e(i)}Fo.registerCommandAndKeybindingRule({id:"togglePeekWidgetFocus",weight:100,primary:as(2089,60),when:he.or(J0,ga.inPeekEditor),handler(n){eC(n,e=>{e.changeFocusBetweenPreviewAndReferences()})}});Fo.registerCommandAndKeybindingRule({id:"goToNextReference",weight:90,primary:62,secondary:[70],when:he.or(J0,ga.inPeekEditor),handler(n){eC(n,e=>{e.goToNextOrPreviousReference(!0)})}});Fo.registerCommandAndKeybindingRule({id:"goToPreviousReference",weight:90,primary:1086,secondary:[1094],when:he.or(J0,ga.inPeekEditor),handler(n){eC(n,e=>{e.goToNextOrPreviousReference(!1)})}});Gt.registerCommandAlias("goToNextReferenceFromEmbeddedEditor","goToNextReference");Gt.registerCommandAlias("goToPreviousReferenceFromEmbeddedEditor","goToPreviousReference");Gt.registerCommandAlias("closeReferenceSearchEditor","closeReferenceSearch");Gt.registerCommand("closeReferenceSearch",n=>eC(n,e=>e.closeWidget()));Fo.registerKeybindingRule({id:"closeReferenceSearch",weight:-1,primary:9,secondary:[1033],when:he.and(ga.inPeekEditor,he.not("config.editor.stablePeek"))});Fo.registerKeybindingRule({id:"closeReferenceSearch",weight:250,primary:9,secondary:[1033],when:he.and(J0,he.not("config.editor.stablePeek"),he.or(F.editorTextFocus,Zye.negate()))});Fo.registerCommandAndKeybindingRule({id:"revealReference",weight:200,primary:3,mac:{primary:3,secondary:[2066]},when:he.and(J0,Jye,OQ.negate(),FQ.negate()),handler(n){var i;const t=(i=n.get($c).lastFocusedList)==null?void 0:i.getFocus();Array.isArray(t)&&t[0]instanceof U_&&eC(n,s=>s.revealReference(t[0]))}});Fo.registerCommandAndKeybindingRule({id:"openReferenceToSide",weight:100,primary:2051,mac:{primary:259},when:he.and(J0,Jye,OQ.negate(),FQ.negate()),handler(n){var i;const t=(i=n.get($c).lastFocusedList)==null?void 0:i.getFocus();Array.isArray(t)&&t[0]instanceof U_&&eC(n,s=>s.openReference(t[0],!0,!0))}});Gt.registerCommand("openReference",n=>{var i;const t=(i=n.get($c).lastFocusedList)==null?void 0:i.getFocus();Array.isArray(t)&&t[0]instanceof U_&&eC(n,s=>s.openReference(t[0],!1,!0))});var BLe=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Ck=function(n,e){return function(t,i){e(t,i,n)}};const GJ=new Re("hasSymbols",!1,v("hasSymbols","Whether there are symbol locations that can be navigated via keyboard-only.")),sW=Wt("ISymbolNavigationService");let FK=class{constructor(e,t,i,s){this._editorService=t,this._notificationService=i,this._keybindingService=s,this._currentModel=void 0,this._currentIdx=-1,this._ignoreEditorChange=!1,this._ctxHasSymbols=GJ.bindTo(e)}reset(){var e,t;this._ctxHasSymbols.reset(),(e=this._currentState)==null||e.dispose(),(t=this._currentMessage)==null||t.dispose(),this._currentModel=void 0,this._currentIdx=-1}put(e){const t=e.parent.parent;if(t.references.length<=1){this.reset();return}this._currentModel=t,this._currentIdx=t.references.indexOf(e),this._ctxHasSymbols.set(!0),this._showMessage();const i=new BK(this._editorService),s=i.onDidChange(r=>{if(this._ignoreEditorChange)return;const o=this._editorService.getActiveCodeEditor();if(!o)return;const a=o.getModel(),l=o.getPosition();if(!a||!l)return;let c=!1,d=!1;for(const u of t.references)if(tD(u.uri,a.uri))c=!0,d=d||M.containsPosition(u.range,l);else if(c)break;(!c||!d)&&this.reset()});this._currentState=Ld(i,s)}revealNext(e){if(!this._currentModel)return Promise.resolve();this._currentIdx+=1,this._currentIdx%=this._currentModel.references.length;const t=this._currentModel.references[this._currentIdx];return this._showMessage(),this._ignoreEditorChange=!0,this._editorService.openCodeEditor({resource:t.uri,options:{selection:M.collapseToStart(t.range),selectionRevealType:3}},e).finally(()=>{this._ignoreEditorChange=!1})}_showMessage(){var i;(i=this._currentMessage)==null||i.dispose();const e=this._keybindingService.lookupKeybinding("editor.gotoNextSymbolFromResult"),t=e?v("location.kb","Symbol {0} of {1}, {2} for next",this._currentIdx+1,this._currentModel.references.length,e.getLabel()):v("location","Symbol {0} of {1}",this._currentIdx+1,this._currentModel.references.length);this._currentMessage=this._notificationService.status(t)}};FK=BLe([Ck(0,at),Ck(1,ri),Ck(2,jn),Ck(3,hi)],FK);jt(sW,FK,1);Te(new class extends vs{constructor(){super({id:"editor.gotoNextSymbolFromResult",precondition:GJ,kbOpts:{weight:100,primary:70}})}runEditorCommand(n,e){return n.get(sW).revealNext(e)}});Fo.registerCommandAndKeybindingRule({id:"editor.gotoNextSymbolFromResult.cancel",weight:100,when:GJ,primary:9,handler(n){n.get(sW).reset()}});let BK=class{constructor(e){this._listener=new Map,this._disposables=new ue,this._onDidChange=new X,this.onDidChange=this._onDidChange.event,this._disposables.add(e.onCodeEditorRemove(this._onDidRemoveEditor,this)),this._disposables.add(e.onCodeEditorAdd(this._onDidAddEditor,this)),e.listCodeEditors().forEach(this._onDidAddEditor,this)}dispose(){this._disposables.dispose(),this._onDidChange.dispose(),Ti(this._listener.values())}_onDidAddEditor(e){this._listener.set(e,Ld(e.onDidChangeCursorPosition(t=>this._onDidChange.fire({editor:e})),e.onDidChangeModelContent(t=>this._onDidChange.fire({editor:e}))))}_onDidRemoveEditor(e){var t;(t=this._listener.get(e))==null||t.dispose(),this._listener.delete(e)}};BK=BLe([Ck(0,ri)],BK);function WK(n,e){return e.uri.scheme===n.uri.scheme?!0:!Pz(e.uri,mt.walkThroughSnippet,mt.vscodeChatCodeBlock,mt.vscodeChatCodeCompareBlock)}async function uT(n,e,t,i,s){const o=t.ordered(n,i).map(l=>Promise.resolve(s(l,n,e)).then(void 0,c=>{Wn(c)})),a=await Promise.all(o);return Id(a.flat()).filter(l=>WK(n,l))}function hT(n,e,t,i,s){return uT(e,t,n,i,(r,o,a)=>r.provideDefinition(o,a,s))}function YJ(n,e,t,i,s){return uT(e,t,n,i,(r,o,a)=>r.provideDeclaration(o,a,s))}function ZJ(n,e,t,i,s){return uT(e,t,n,i,(r,o,a)=>r.provideImplementation(o,a,s))}function XJ(n,e,t,i,s){return uT(e,t,n,i,(r,o,a)=>r.provideTypeDefinition(o,a,s))}function fT(n,e,t,i,s,r){return uT(e,t,n,s,async(o,a,l)=>{var u,h;const c=(u=await o.provideReferences(a,l,{includeDeclaration:!0},r))==null?void 0:u.filter(f=>WK(a,f));if(!i||!c||c.length!==2)return c;const d=(h=await o.provideReferences(a,l,{includeDeclaration:!1},r))==null?void 0:h.filter(f=>WK(a,f));return d&&d.length===1?d:c})}async function Sf(n){const e=await n(),t=new Qa(e,""),i=t.references.map(s=>s.link);return t.dispose(),i}va("_executeDefinitionProvider",(n,e,t)=>{const i=n.get(Be),s=hT(i.definitionProvider,e,t,!1,xt.None);return Sf(()=>s)});va("_executeDefinitionProvider_recursive",(n,e,t)=>{const i=n.get(Be),s=hT(i.definitionProvider,e,t,!0,xt.None);return Sf(()=>s)});va("_executeTypeDefinitionProvider",(n,e,t)=>{const i=n.get(Be),s=XJ(i.typeDefinitionProvider,e,t,!1,xt.None);return Sf(()=>s)});va("_executeTypeDefinitionProvider_recursive",(n,e,t)=>{const i=n.get(Be),s=XJ(i.typeDefinitionProvider,e,t,!0,xt.None);return Sf(()=>s)});va("_executeDeclarationProvider",(n,e,t)=>{const i=n.get(Be),s=YJ(i.declarationProvider,e,t,!1,xt.None);return Sf(()=>s)});va("_executeDeclarationProvider_recursive",(n,e,t)=>{const i=n.get(Be),s=YJ(i.declarationProvider,e,t,!0,xt.None);return Sf(()=>s)});va("_executeReferenceProvider",(n,e,t)=>{const i=n.get(Be),s=fT(i.referenceProvider,e,t,!1,!1,xt.None);return Sf(()=>s)});va("_executeReferenceProvider_recursive",(n,e,t)=>{const i=n.get(Be),s=fT(i.referenceProvider,e,t,!1,!0,xt.None);return Sf(()=>s)});va("_executeImplementationProvider",(n,e,t)=>{const i=n.get(Be),s=ZJ(i.implementationProvider,e,t,!1,xt.None);return Sf(()=>s)});va("_executeImplementationProvider_recursive",(n,e,t)=>{const i=n.get(Be),s=ZJ(i.implementationProvider,e,t,!0,xt.None);return Sf(()=>s)});Us.appendMenuItem(ze.EditorContext,{submenu:ze.EditorContextPeek,title:v("peek.submenu","Peek"),group:"navigation",order:100});class nx{static is(e){return!e||typeof e!="object"?!1:!!(e instanceof nx||Y.isIPosition(e.position)&&e.model)}constructor(e,t){this.model=e,this.position=t}}const od=class od extends qu{static all(){return od._allSymbolNavigationCommands.values()}static _patchConfig(e){const t={...e,f1:!0};if(t.menu)for(const i of qt.wrap(t.menu))(i.id===ze.EditorContext||i.id===ze.EditorContextPeek)&&(i.when=he.and(e.precondition,i.when));return t}constructor(e,t){super(od._patchConfig(t)),this.configuration=e,od._allSymbolNavigationCommands.set(t.id,this)}runEditorCommand(e,t,i,s){if(!t.hasModel())return Promise.resolve(void 0);const r=e.get(jn),o=e.get(ri),a=e.get(nv),l=e.get(sW),c=e.get(Be),d=e.get(Ze),u=t.getModel(),h=t.getPosition(),f=nx.is(i)?i:new nx(u,h),g=new V_(t,5),p=ON(this._getLocationModel(c,f.model,f.position,g.token),g.token).then(async _=>{var y;if(!_||g.token.isCancellationRequested)return;Bo(_.ariaMessage);let w;if(_.referenceAt(u.uri,h)){const S=this._getAlternativeCommand(t);!od._activeAlternativeCommands.has(S)&&od._allSymbolNavigationCommands.has(S)&&(w=od._allSymbolNavigationCommands.get(S))}const b=_.references.length;if(b===0){if(!this.configuration.muteMessage){const S=u.getWordAtPosition(h);(y=Xa.get(t))==null||y.showMessage(this._getNoResultFoundMessage(S),h)}}else if(b===1&&w)od._activeAlternativeCommands.add(this.desc.id),d.invokeFunction(S=>w.runEditorCommand(S,t,i,s).finally(()=>{od._activeAlternativeCommands.delete(this.desc.id)}));else return this._onResult(o,l,t,_,s)},_=>{r.error(_)}).finally(()=>{g.dispose()});return a.showWhile(p,250),p}async _onResult(e,t,i,s,r){const o=this._getGoToPreference(i);if(!(i instanceof Pd)&&(this.configuration.openInPeek||o==="peek"&&s.references.length>1))this._openInPeek(i,s,r);else{const a=s.firstReference(),l=s.references.length>1&&o==="gotoAndPeek",c=await this._openReference(i,e,a,this.configuration.openToSide,!l);l&&c?this._openInPeek(c,s,r):s.dispose(),o==="goto"&&t.put(a)}}async _openReference(e,t,i,s,r){let o;if(Xje(i)&&(o=i.targetSelectionRange),o||(o=i.range),!o)return;const a=await t.openCodeEditor({resource:i.uri,options:{selection:M.collapseToStart(o),selectionRevealType:3,selectionSource:"code.jump"}},e,s);if(a){if(r){const l=a.getModel(),c=a.createDecorationsCollection([{range:o,options:{description:"symbol-navigate-action-highlight",className:"symbolHighlight"}}]);setTimeout(()=>{a.getModel()===l&&c.clear()},350)}return a}}_openInPeek(e,t,i){const s=D0.get(e);s&&e.hasModel()?s.toggleWidget(i??e.getSelection(),Ds(r=>Promise.resolve(t)),this.configuration.openInPeek):t.dispose()}};od._allSymbolNavigationCommands=new Map,od._activeAlternativeCommands=new Set;let sp=od;class gT extends sp{async _getLocationModel(e,t,i,s){return new Qa(await hT(e.definitionProvider,t,i,!1,s),v("def.title","Definitions"))}_getNoResultFoundMessage(e){return e&&e.word?v("noResultWord","No definition found for '{0}'",e.word):v("generic.noResults","No definition found")}_getAlternativeCommand(e){return e.getOption(58).alternativeDefinitionCommand}_getGoToPreference(e){return e.getOption(58).multipleDefinitions}}var a_;Bi((a_=class extends gT{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:a_.id,title:{...lt("actions.goToDecl.label","Go to Definition"),mnemonicTitle:v({key:"miGotoDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Definition")},precondition:F.hasDefinitionProvider,keybinding:[{when:F.editorTextFocus,primary:70,weight:100},{when:he.and(F.editorTextFocus,Gye),primary:2118,weight:100}],menu:[{id:ze.EditorContext,group:"navigation",order:1.1},{id:ze.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:2}]}),Gt.registerCommandAlias("editor.action.goToDeclaration",a_.id)}},a_.id="editor.action.revealDefinition",a_));var l_;Bi((l_=class extends gT{constructor(){super({openToSide:!0,openInPeek:!1,muteMessage:!1},{id:l_.id,title:lt("actions.goToDeclToSide.label","Open Definition to the Side"),precondition:he.and(F.hasDefinitionProvider,F.isInEmbeddedEditor.toNegated()),keybinding:[{when:F.editorTextFocus,primary:as(2089,70),weight:100},{when:he.and(F.editorTextFocus,Gye),primary:as(2089,2118),weight:100}]}),Gt.registerCommandAlias("editor.action.openDeclarationToTheSide",l_.id)}},l_.id="editor.action.revealDefinitionAside",l_));var c_;Bi((c_=class extends gT{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:c_.id,title:lt("actions.previewDecl.label","Peek Definition"),precondition:he.and(F.hasDefinitionProvider,ga.notInPeekEditor,F.isInEmbeddedEditor.toNegated()),keybinding:{when:F.editorTextFocus,primary:582,linux:{primary:3140},weight:100},menu:{id:ze.EditorContextPeek,group:"peek",order:2}}),Gt.registerCommandAlias("editor.action.previewDeclaration",c_.id)}},c_.id="editor.action.peekDefinition",c_));class WLe extends sp{async _getLocationModel(e,t,i,s){return new Qa(await YJ(e.declarationProvider,t,i,!1,s),v("decl.title","Declarations"))}_getNoResultFoundMessage(e){return e&&e.word?v("decl.noResultWord","No declaration found for '{0}'",e.word):v("decl.generic.noResults","No declaration found")}_getAlternativeCommand(e){return e.getOption(58).alternativeDeclarationCommand}_getGoToPreference(e){return e.getOption(58).multipleDeclarations}}var mw;Bi((mw=class extends WLe{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:mw.id,title:{...lt("actions.goToDeclaration.label","Go to Declaration"),mnemonicTitle:v({key:"miGotoDeclaration",comment:["&& denotes a mnemonic"]},"Go to &&Declaration")},precondition:he.and(F.hasDeclarationProvider,F.isInEmbeddedEditor.toNegated()),menu:[{id:ze.EditorContext,group:"navigation",order:1.3},{id:ze.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:3}]})}_getNoResultFoundMessage(e){return e&&e.word?v("decl.noResultWord","No declaration found for '{0}'",e.word):v("decl.generic.noResults","No declaration found")}},mw.id="editor.action.revealDeclaration",mw));Bi(class extends WLe{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.peekDeclaration",title:lt("actions.peekDecl.label","Peek Declaration"),precondition:he.and(F.hasDeclarationProvider,ga.notInPeekEditor,F.isInEmbeddedEditor.toNegated()),menu:{id:ze.EditorContextPeek,group:"peek",order:3}})}});class HLe extends sp{async _getLocationModel(e,t,i,s){return new Qa(await XJ(e.typeDefinitionProvider,t,i,!1,s),v("typedef.title","Type Definitions"))}_getNoResultFoundMessage(e){return e&&e.word?v("goToTypeDefinition.noResultWord","No type definition found for '{0}'",e.word):v("goToTypeDefinition.generic.noResults","No type definition found")}_getAlternativeCommand(e){return e.getOption(58).alternativeTypeDefinitionCommand}_getGoToPreference(e){return e.getOption(58).multipleTypeDefinitions}}var _w;Bi((_w=class extends HLe{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:_w.ID,title:{...lt("actions.goToTypeDefinition.label","Go to Type Definition"),mnemonicTitle:v({key:"miGotoTypeDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Type Definition")},precondition:F.hasTypeDefinitionProvider,keybinding:{when:F.editorTextFocus,primary:0,weight:100},menu:[{id:ze.EditorContext,group:"navigation",order:1.4},{id:ze.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:3}]})}},_w.ID="editor.action.goToTypeDefinition",_w));var vw;Bi((vw=class extends HLe{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:vw.ID,title:lt("actions.peekTypeDefinition.label","Peek Type Definition"),precondition:he.and(F.hasTypeDefinitionProvider,ga.notInPeekEditor,F.isInEmbeddedEditor.toNegated()),menu:{id:ze.EditorContextPeek,group:"peek",order:4}})}},vw.ID="editor.action.peekTypeDefinition",vw));class VLe extends sp{async _getLocationModel(e,t,i,s){return new Qa(await ZJ(e.implementationProvider,t,i,!1,s),v("impl.title","Implementations"))}_getNoResultFoundMessage(e){return e&&e.word?v("goToImplementation.noResultWord","No implementation found for '{0}'",e.word):v("goToImplementation.generic.noResults","No implementation found")}_getAlternativeCommand(e){return e.getOption(58).alternativeImplementationCommand}_getGoToPreference(e){return e.getOption(58).multipleImplementations}}var bw;Bi((bw=class extends VLe{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:bw.ID,title:{...lt("actions.goToImplementation.label","Go to Implementations"),mnemonicTitle:v({key:"miGotoImplementation",comment:["&& denotes a mnemonic"]},"Go to &&Implementations")},precondition:F.hasImplementationProvider,keybinding:{when:F.editorTextFocus,primary:2118,weight:100},menu:[{id:ze.EditorContext,group:"navigation",order:1.45},{id:ze.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:4}]})}},bw.ID="editor.action.goToImplementation",bw));var ww;Bi((ww=class extends VLe{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:ww.ID,title:lt("actions.peekImplementation.label","Peek Implementations"),precondition:he.and(F.hasImplementationProvider,ga.notInPeekEditor,F.isInEmbeddedEditor.toNegated()),keybinding:{when:F.editorTextFocus,primary:3142,weight:100},menu:{id:ze.EditorContextPeek,group:"peek",order:5}})}},ww.ID="editor.action.peekImplementation",ww));class zLe extends sp{_getNoResultFoundMessage(e){return e?v("references.no","No references found for '{0}'",e.word):v("references.noGeneric","No references found")}_getAlternativeCommand(e){return e.getOption(58).alternativeReferenceCommand}_getGoToPreference(e){return e.getOption(58).multipleReferences}}Bi(class extends zLe{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:"editor.action.goToReferences",title:{...lt("goToReferences.label","Go to References"),mnemonicTitle:v({key:"miGotoReference",comment:["&& denotes a mnemonic"]},"Go to &&References")},precondition:he.and(F.hasReferenceProvider,ga.notInPeekEditor,F.isInEmbeddedEditor.toNegated()),keybinding:{when:F.editorTextFocus,primary:1094,weight:100},menu:[{id:ze.EditorContext,group:"navigation",order:1.45},{id:ze.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:5}]})}async _getLocationModel(e,t,i,s){return new Qa(await fT(e.referenceProvider,t,i,!0,!1,s),v("ref.title","References"))}});Bi(class extends zLe{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.referenceSearch.trigger",title:lt("references.action.label","Peek References"),precondition:he.and(F.hasReferenceProvider,ga.notInPeekEditor,F.isInEmbeddedEditor.toNegated()),menu:{id:ze.EditorContextPeek,group:"peek",order:6}})}async _getLocationModel(e,t,i,s){return new Qa(await fT(e.referenceProvider,t,i,!1,!1,s),v("ref.title","References"))}});class G_t extends sp{constructor(e,t,i){super(e,{id:"editor.action.goToLocation",title:lt("label.generic","Go to Any Symbol"),precondition:he.and(ga.notInPeekEditor,F.isInEmbeddedEditor.toNegated())}),this._references=t,this._gotoMultipleBehaviour=i}async _getLocationModel(e,t,i,s){return new Qa(this._references,v("generic.title","Locations"))}_getNoResultFoundMessage(e){return e&&v("generic.noResult","No results for '{0}'",e.word)||""}_getGoToPreference(e){return this._gotoMultipleBehaviour??e.getOption(58).multipleReferences}_getAlternativeCommand(){return""}}Gt.registerCommand({id:"editor.action.goToLocations",metadata:{description:"Go to locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:Xe},{name:"position",description:"The position at which to start",constraint:Y.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto`"},{name:"noResultsMessage",description:"Human readable message that shows when locations is empty."}]},handler:async(n,e,t,i,s,r,o)=>{si(Xe.isUri(e)),si(Y.isIPosition(t)),si(Array.isArray(i)),si(typeof s>"u"||typeof s=="string"),si(typeof o>"u"||typeof o=="boolean");const a=n.get(ri),l=await a.openCodeEditor({resource:e},a.getFocusedCodeEditor());if(ff(l))return l.setPosition(t),l.revealPositionInCenterIfOutsideViewport(t,0),l.invokeWithinContext(c=>{const d=new class extends G_t{_getNoResultFoundMessage(u){return r||super._getNoResultFoundMessage(u)}}({muteMessage:!r,openInPeek:!!o,openToSide:!1},i,s);c.get(Ze).invokeFunction(d.run.bind(d),l)})}});Gt.registerCommand({id:"editor.action.peekLocations",metadata:{description:"Peek locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:Xe},{name:"position",description:"The position at which to start",constraint:Y.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto`"}]},handler:async(n,e,t,i,s)=>{n.get(Vi).executeCommand("editor.action.goToLocations",e,t,i,s,void 0,!0)}});Gt.registerCommand({id:"editor.action.findReferences",handler:(n,e,t)=>{si(Xe.isUri(e)),si(Y.isIPosition(t));const i=n.get(Be),s=n.get(ri);return s.openCodeEditor({resource:e},s.getFocusedCodeEditor()).then(r=>{if(!ff(r)||!r.hasModel())return;const o=D0.get(r);if(!o)return;const a=Ds(c=>fT(i.referenceProvider,r.getModel(),Y.lift(t),!1,!1,c).then(d=>new Qa(d,v("ref.title","References")))),l=new M(t.lineNumber,t.column,t.lineNumber,t.column);return Promise.resolve(o.toggleWidget(l,a,!1))})}});Gt.registerCommandAlias("editor.action.showReferences","editor.action.peekLocations");async function Y_t(n,e,t,i){const s=n.get(_a),r=n.get(ol),o=n.get(Vi),a=n.get(Ze),l=n.get(jn);if(await i.item.resolve(xt.None),!i.part.location)return;const c=i.part.location,d=[],u=new Set(Us.getMenuItems(ze.EditorContext).map(f=>Sy(f)?f.command.id:ZB()));for(const f of sp.all())u.has(f.desc.id)&&d.push(new Ya(f.desc.id,Za.label(f.desc,{renderShortTitle:!0}),void 0,!0,async()=>{const g=await s.createModelReference(c.uri);try{const p=new nx(g.object.textEditorModel,M.getStartPosition(c.range)),_=i.item.anchor.range;await a.invokeFunction(f.runEditorCommand.bind(f),e,p,_)}finally{g.dispose()}}));if(i.part.command){const{command:f}=i.part;d.push(new Ts),d.push(new Ya(f.id,f.title,void 0,!0,async()=>{try{await o.executeCommand(f.id,...f.arguments??[])}catch(g){l.notify({severity:nB.Error,source:i.item.provider.displayName,message:g})}}))}const h=e.getOption(128);r.showContextMenu({domForShadowRoot:h?e.getDomNode()??void 0:void 0,getAnchor:()=>{const f=Fn(t);return{x:f.left,y:f.top+f.height+8}},getActions:()=>d,onHide:()=>{e.focus()},autoSelectFirstItem:!0})}async function ULe(n,e,t,i){const r=await n.get(_a).createModelReference(i.uri);await t.invokeWithinContext(async o=>{const a=e.hasSideBySideModifier,l=o.get(at),c=ga.inPeekEditor.getValue(l),d=!a&&t.getOption(89)&&!c;return new gT({openToSide:a,openInPeek:d,muteMessage:!0},{title:{value:"",original:""},id:"",precondition:void 0}).run(o,new nx(r.object.textEditorModel,M.getStartPosition(i.range)),M.lift(i.range))}),r.dispose()}var Z_t=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},OC=function(n,e){return function(t,i){e(t,i,n)}},e1;class dF{constructor(){this._entries=new vf(50)}get(e){const t=dF._key(e);return this._entries.get(t)}set(e,t){const i=dF._key(e);this._entries.set(i,t)}static _key(e){return`${e.uri.toString()}/${e.getVersionId()}`}}const $Le=Wt("IInlayHintsCache");jt($Le,dF,1);class HK{constructor(e,t){this.item=e,this.index=t}get part(){const e=this.item.hint.label;return typeof e=="string"?{label:e}:e[this.index]}}class X_t{constructor(e,t){this.part=e,this.hasTriggerModifier=t}}var Dg;let UD=(Dg=class{static get(e){return e.getContribution(e1.ID)??void 0}constructor(e,t,i,s,r,o,a){this._editor=e,this._languageFeaturesService=t,this._inlayHintsCache=s,this._commandService=r,this._notificationService=o,this._instaService=a,this._disposables=new ue,this._sessionDisposables=new ue,this._decorationsMetadata=new Map,this._ruleFactory=new IO(this._editor),this._activeRenderMode=0,this._debounceInfo=i.for(t.inlayHintsProvider,"InlayHint",{min:25}),this._disposables.add(t.inlayHintsProvider.onDidChange(()=>this._update())),this._disposables.add(e.onDidChangeModel(()=>this._update())),this._disposables.add(e.onDidChangeModelLanguage(()=>this._update())),this._disposables.add(e.onDidChangeConfiguration(l=>{l.hasChanged(142)&&this._update()})),this._update()}dispose(){this._sessionDisposables.dispose(),this._removeAllDecorations(),this._disposables.dispose()}_update(){this._sessionDisposables.clear(),this._removeAllDecorations();const e=this._editor.getOption(142);if(e.enabled==="off")return;const t=this._editor.getModel();if(!t||!this._languageFeaturesService.inlayHintsProvider.has(t))return;if(e.enabled==="on")this._activeRenderMode=0;else{let a,l;e.enabled==="onUnlessPressed"?(a=0,l=1):(a=1,l=0),this._activeRenderMode=a,this._sessionDisposables.add(vg.getInstance().event(c=>{if(!this._editor.hasModel())return;const d=c.altKey&&c.ctrlKey&&!(c.shiftKey||c.metaKey)?l:a;if(d!==this._activeRenderMode){this._activeRenderMode=d;const u=this._editor.getModel(),h=this._copyInlayHintsWithCurrentAnchor(u);this._updateHintsDecorators([u.getFullModelRange()],h),o.schedule(0)}}))}const i=this._inlayHintsCache.get(t);i&&this._updateHintsDecorators([t.getFullModelRange()],i),this._sessionDisposables.add(Ye(()=>{t.isDisposed()||this._cacheHintsForFastRestore(t)}));let s;const r=new Set,o=new yi(async()=>{const a=Date.now();s==null||s.dispose(!0),s=new mn;const l=t.onWillDispose(()=>s==null?void 0:s.cancel());try{const c=s.token,d=await rF.create(this._languageFeaturesService.inlayHintsProvider,t,this._getHintsRanges(),c);if(o.delay=this._debounceInfo.update(t,Date.now()-a),c.isCancellationRequested){d.dispose();return}for(const u of d.provider)typeof u.onDidChangeInlayHints=="function"&&!r.has(u)&&(r.add(u),this._sessionDisposables.add(u.onDidChangeInlayHints(()=>{o.isScheduled()||o.schedule()})));this._sessionDisposables.add(d),this._updateHintsDecorators(d.ranges,d.items),this._cacheHintsForFastRestore(t)}catch(c){pt(c)}finally{s.dispose(),l.dispose()}},this._debounceInfo.get(t));this._sessionDisposables.add(o),this._sessionDisposables.add(Ye(()=>s==null?void 0:s.dispose(!0))),o.schedule(0),this._sessionDisposables.add(this._editor.onDidScrollChange(a=>{(a.scrollTopChanged||!o.isScheduled())&&o.schedule()})),this._sessionDisposables.add(this._editor.onDidChangeModelContent(a=>{s==null||s.cancel();const l=Math.max(o.delay,1250);o.schedule(l)})),this._sessionDisposables.add(this._installDblClickGesture(()=>o.schedule(0))),this._sessionDisposables.add(this._installLinkGesture()),this._sessionDisposables.add(this._installContextMenu())}_installLinkGesture(){const e=new ue,t=e.add(new tW(this._editor)),i=new ue;return e.add(i),e.add(t.onMouseMoveOrRelevantKeyDown(s=>{const[r]=s,o=this._getInlayHintLabelPart(r),a=this._editor.getModel();if(!o||!a){i.clear();return}const l=new mn;i.add(Ye(()=>l.dispose(!0))),o.item.resolve(l.token),this._activeInlayHintPart=o.part.command||o.part.location?new X_t(o,r.hasTriggerModifier):void 0;const c=a.validatePosition(o.item.hint.position).lineNumber,d=new M(c,1,c,a.getLineMaxColumn(c)),u=this._getInlineHintsForRange(d);this._updateHintsDecorators([d],u),i.add(Ye(()=>{this._activeInlayHintPart=void 0,this._updateHintsDecorators([d],u)}))})),e.add(t.onCancel(()=>i.clear())),e.add(t.onExecute(async s=>{const r=this._getInlayHintLabelPart(s);if(r){const o=r.part;o.location?this._instaService.invokeFunction(ULe,s,this._editor,o.location):MV.is(o.command)&&await this._invokeCommand(o.command,r.item)}})),e}_getInlineHintsForRange(e){const t=new Set;for(const i of this._decorationsMetadata.values())e.containsRange(i.item.anchor.range)&&t.add(i.item);return Array.from(t)}_installDblClickGesture(e){return this._editor.onMouseUp(async t=>{if(t.event.detail!==2)return;const i=this._getInlayHintLabelPart(t);if(i&&(t.event.preventDefault(),await i.item.resolve(xt.None),ao(i.item.hint.textEdits))){const s=i.item.hint.textEdits.map(r=>gn.replace(M.lift(r.range),r.text));this._editor.executeEdits("inlayHint.default",s),e()}})}_installContextMenu(){return this._editor.onContextMenu(async e=>{if(!Ns(e.event.target))return;const t=this._getInlayHintLabelPart(e);t&&await this._instaService.invokeFunction(Y_t,this._editor,e.event.target,t)})}_getInlayHintLabelPart(e){var i;if(e.target.type!==6)return;const t=(i=e.target.detail.injectedText)==null?void 0:i.options;if(t instanceof B_&&(t==null?void 0:t.attachedData)instanceof HK)return t.attachedData}async _invokeCommand(e,t){try{await this._commandService.executeCommand(e.id,...e.arguments??[])}catch(i){this._notificationService.notify({severity:nB.Error,source:t.provider.displayName,message:i})}}_cacheHintsForFastRestore(e){const t=this._copyInlayHintsWithCurrentAnchor(e);this._inlayHintsCache.set(e,t)}_copyInlayHintsWithCurrentAnchor(e){const t=new Map;for(const[i,s]of this._decorationsMetadata){if(t.has(s.item))continue;const r=e.getDecorationRange(i);if(r){const o=new TLe(r,s.item.anchor.direction),a=s.item.with({anchor:o});t.set(s.item,a)}}return Array.from(t.values())}_getHintsRanges(){const t=this._editor.getModel(),i=this._editor.getVisibleRangesPlusViewportAboveBelow(),s=[];for(const r of i.sort(M.compareRangesUsingStarts)){const o=t.validateRange(new M(r.startLineNumber-30,r.startColumn,r.endLineNumber+30,r.endColumn));s.length===0||!M.areIntersectingOrTouching(s[s.length-1],o)?s.push(o):s[s.length-1]=M.plusRange(s[s.length-1],o)}return s}_updateHintsDecorators(e,t){var g,p;const i=[],s=(_,w,b,y,S)=>{const x={content:b,inlineClassNameAffectsLetterSpacing:!0,inlineClassName:w.className,cursorStops:y,attachedData:S};i.push({item:_,classNameRef:w,decoration:{range:_.anchor.range,options:{description:"InlayHint",showIfCollapsed:_.anchor.range.isEmpty(),collapseOnReplaceEdit:!_.anchor.range.isEmpty(),stickiness:0,[_.anchor.direction]:this._activeRenderMode===0?x:void 0}}})},r=(_,w)=>{const b=this._ruleFactory.createClassNameRef({width:`${o/3|0}px`,display:"inline-block"});s(_,b,"",w?wd.Right:wd.None)},{fontSize:o,fontFamily:a,padding:l,isUniform:c}=this._getLayoutInfo(),d="--code-editorInlayHintsFontFamily";this._editor.getContainerDomNode().style.setProperty(d,a);let u={line:0,totalLen:0};for(const _ of t){if(u.line!==_.anchor.range.startLineNumber&&(u={line:_.anchor.range.startLineNumber,totalLen:0}),u.totalLen>e1._MAX_LABEL_LEN)continue;_.hint.paddingLeft&&r(_,!1);const w=typeof _.hint.label=="string"?[{label:_.hint.label}]:_.hint.label;for(let b=0;b<w.length;b++){const y=w[b],S=b===0,x=b===w.length-1,E={fontSize:`${o}px`,fontFamily:`var(${d}), ${To.fontFamily}`,verticalAlign:c?"baseline":"middle",unicodeBidi:"isolate"};ao(_.hint.textEdits)&&(E.cursor="default"),this._fillInColors(E,_.hint),(y.command||y.location)&&((g=this._activeInlayHintPart)==null?void 0:g.part.item)===_&&this._activeInlayHintPart.part.index===b&&(E.textDecoration="underline",this._activeInlayHintPart.hasTriggerModifier&&(E.color=Dn(vXe),E.cursor="pointer")),l&&(S&&x?(E.padding=`1px ${Math.max(1,o/4)|0}px`,E.borderRadius=`${o/4|0}px`):S?(E.padding=`1px 0 1px ${Math.max(1,o/4)|0}px`,E.borderRadius=`${o/4|0}px 0 0 ${o/4|0}px`):x?(E.padding=`1px ${Math.max(1,o/4)|0}px 1px 0`,E.borderRadius=`0 ${o/4|0}px ${o/4|0}px 0`):E.padding="1px 0 1px 0");let D=y.label;u.totalLen+=D.length;let N=!1;const I=u.totalLen-e1._MAX_LABEL_LEN;if(I>0&&(D=D.slice(0,-I)+"",N=!0),s(_,this._ruleFactory.createClassNameRef(E),Q_t(D),x&&!_.hint.paddingRight?wd.Right:wd.None,new HK(_,b)),N)break}if(_.hint.paddingRight&&r(_,!0),i.length>e1._MAX_DECORATORS)break}const h=[];for(const[_,w]of this._decorationsMetadata){const b=(p=this._editor.getModel())==null?void 0:p.getDecorationRange(_);b&&e.some(y=>y.containsRange(b))&&(h.push(_),w.classNameRef.dispose(),this._decorationsMetadata.delete(_))}const f=ju.capture(this._editor);this._editor.changeDecorations(_=>{const w=_.deltaDecorations(h,i.map(b=>b.decoration));for(let b=0;b<w.length;b++){const y=i[b];this._decorationsMetadata.set(w[b],y)}}),f.restore(this._editor)}_fillInColors(e,t){t.kind===aP.Parameter?(e.backgroundColor=Dn(kXe),e.color=Dn(LXe)):t.kind===aP.Type?(e.backgroundColor=Dn(xXe),e.color=Dn(SXe)):(e.backgroundColor=Dn(BX),e.color=Dn(FX))}_getLayoutInfo(){const e=this._editor.getOption(142),t=e.padding,i=this._editor.getOption(52),s=this._editor.getOption(49);let r=e.fontSize;(!r||r<5||r>i)&&(r=i);const o=e.fontFamily||s;return{fontSize:r,fontFamily:o,padding:t,isUniform:!t&&o===s&&r===i}}_removeAllDecorations(){this._editor.removeDecorations(Array.from(this._decorationsMetadata.keys()));for(const e of this._decorationsMetadata.values())e.classNameRef.dispose();this._decorationsMetadata.clear()}},e1=Dg,Dg.ID="editor.contrib.InlayHints",Dg._MAX_DECORATORS=1500,Dg._MAX_LABEL_LEN=43,Dg);UD=e1=Z_t([OC(1,Be),OC(2,Zl),OC(3,$Le),OC(4,Vi),OC(5,jn),OC(6,Ze)],UD);function Q_t(n){return n.replace(/[ \t]/g,"")}Gt.registerCommand("_executeInlayHintProvider",async(n,...e)=>{const[t,i]=e;si(Xe.isUri(t)),si(M.isIRange(i));const{inlayHintsProvider:s}=n.get(Be),r=await n.get(_a).createModelReference(t);try{const o=await rF.create(s,r.object.textEditorModel,[M.lift(i)],xt.None),a=o.items.map(l=>l.hint);return setTimeout(()=>o.dispose(),0),a}finally{r.dispose()}});var J_t=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Ap=function(n,e){return function(t,i){e(t,i,n)}};class Cue extends K2{constructor(e,t,i,s){super(10,t,e.item.anchor.range,i,s,!0),this.part=e}}let uF=class extends VD{constructor(e,t,i,s,r,o,a,l,c){super(e,t,i,o,l,s,r,c),this._resolverService=a,this.hoverOrdinal=6}suggestHoverAnchor(e){var s;if(!UD.get(this._editor)||e.target.type!==6)return null;const i=(s=e.target.detail.injectedText)==null?void 0:s.options;return i instanceof B_&&i.attachedData instanceof HK?new Cue(i.attachedData,this,e.event.posx,e.event.posy):null}computeSync(){return[]}computeAsync(e,t,i){return e instanceof Cue?new Ml(async s=>{const{part:r}=e;if(await r.item.resolve(i),i.isCancellationRequested)return;let o;typeof r.item.hint.tooltip=="string"?o=new Rr().appendText(r.item.hint.tooltip):r.item.hint.tooltip&&(o=r.item.hint.tooltip),o&&s.emitOne(new _d(this,e.range,[o],!1,0)),ao(r.item.hint.textEdits)&&s.emitOne(new _d(this,e.range,[new Rr().appendText(v("hint.dbl","Double-click to insert"))],!1,10001));let a;if(typeof r.part.tooltip=="string"?a=new Rr().appendText(r.part.tooltip):r.part.tooltip&&(a=r.part.tooltip),a&&s.emitOne(new _d(this,e.range,[a],!1,1)),r.part.location||r.part.command){let c;const u=this._editor.getOption(78)==="altKey"?Bt?v("links.navigate.kb.meta.mac","cmd + click"):v("links.navigate.kb.meta","ctrl + click"):Bt?v("links.navigate.kb.alt.mac","option + click"):v("links.navigate.kb.alt","alt + click");r.part.location&&r.part.command?c=new Rr().appendText(v("hint.defAndCommand","Go to Definition ({0}), right click for more",u)):r.part.location?c=new Rr().appendText(v("hint.def","Go to Definition ({0})",u)):r.part.command&&(c=new Rr(`[${v("hint.cmd","Execute Command")}](${E_t(r.part.command)} "${r.part.command.title}") (${u})`,{isTrusted:!0})),c&&s.emitOne(new _d(this,e.range,[c],!1,1e4))}const l=await this._resolveInlayHintLabelPartHover(r,i);for await(const c of l)s.emitOne(c)}):Ml.EMPTY}async _resolveInlayHintLabelPartHover(e,t){if(!e.part.location)return Ml.EMPTY;const{uri:i,range:s}=e.part.location,r=await this._resolverService.createModelReference(i);try{const o=r.object.textEditorModel;return this._languageFeaturesService.hoverProvider.has(o)?KJ(this._languageFeaturesService.hoverProvider,o,new Y(s.startLineNumber,s.startColumn),t).filter(a=>!WS(a.hover.contents)).map(a=>new _d(this,e.item.anchor.range,a.hover.contents,!1,2+a.ordinal)):Ml.EMPTY}finally{r.dispose()}}};uF=J_t([Ap(1,un),Ap(2,ba),Ap(3,hi),Ap(4,wf),Ap(5,Tt),Ap(6,_a),Ap(7,Be),Ap(8,Vi)],uF);class QJ extends ee{constructor(e,t,i,s,r,o){super();const a=t.anchor,l=t.hoverParts;this._renderedHoverParts=this._register(new VK(e,i,l,o,r));const{showAtPosition:c,showAtSecondaryPosition:d}=QJ.computeHoverPositions(e,a.range,l);this.shouldAppearBeforeContent=l.some(u=>u.isBeforeContent),this.showAtPosition=c,this.showAtSecondaryPosition=d,this.initialMousePosX=a.initialMousePosX,this.initialMousePosY=a.initialMousePosY,this.shouldFocus=s.shouldFocus,this.source=s.source}get domNode(){return this._renderedHoverParts.domNode}get domNodeHasChildren(){return this._renderedHoverParts.domNodeHasChildren}get focusedHoverPartIndex(){return this._renderedHoverParts.focusedHoverPartIndex}async updateHoverVerbosityLevel(e,t,i){this._renderedHoverParts.updateHoverVerbosityLevel(e,t,i)}isColorPickerVisible(){return this._renderedHoverParts.isColorPickerVisible()}static computeHoverPositions(e,t,i){let s=1;if(e.hasModel()){const d=e._getViewModel(),u=d.coordinatesConverter,h=u.convertModelRangeToViewRange(t),f=d.getLineMinColumn(h.startLineNumber),g=new Y(h.startLineNumber,f);s=u.convertViewPositionToModelPosition(g).column}const r=t.startLineNumber;let o=t.startColumn,a;for(const d of i){const u=d.range,h=u.startLineNumber===r,f=u.endLineNumber===r;if(h&&f){const p=u.startColumn,_=Math.min(o,p);o=Math.max(_,s)}d.forceShowAtRange&&(a=u)}let l,c;if(a){const d=a.getStartPosition();l=d,c=d}else l=t.getStartPosition(),c=new Y(r,o);return{showAtPosition:l,showAtSecondaryPosition:c}}}class evt{constructor(e,t){this._statusBar=t,e.appendChild(this._statusBar.hoverElement)}get hoverElement(){return this._statusBar.hoverElement}get actions(){return this._statusBar.actions}dispose(){this._statusBar.dispose()}}const n5=class n5 extends ee{constructor(e,t,i,s,r){super(),this._renderedParts=[],this._focusedHoverPartIndex=-1,this._context=r,this._fragment=document.createDocumentFragment(),this._register(this._renderParts(t,i,r,s)),this._register(this._registerListenersOnRenderedParts()),this._register(this._createEditorDecorations(e,i)),this._updateMarkdownAndColorParticipantInfo(t)}_createEditorDecorations(e,t){if(t.length===0)return ee.None;let i=t[0].range;for(const r of t){const o=r.range;i=M.plusRange(i,o)}const s=e.createDecorationsCollection();return s.set([{range:i,options:n5._DECORATION_OPTIONS}]),Ye(()=>{s.clear()})}_renderParts(e,t,i,s){const r=new sF(s),o={fragment:this._fragment,statusBar:r,...i},a=new ue;for(const c of e){const d=this._renderHoverPartsForParticipant(t,c,o);a.add(d);for(const u of d.renderedHoverParts)this._renderedParts.push({type:"hoverPart",participant:c,hoverPart:u.hoverPart,hoverElement:u.hoverElement})}const l=this._renderStatusBar(this._fragment,r);return l&&(a.add(l),this._renderedParts.push({type:"statusBar",hoverElement:l.hoverElement,actions:l.actions})),Ye(()=>{a.dispose()})}_renderHoverPartsForParticipant(e,t,i){const s=e.filter(o=>o.owner===t);return s.length>0?t.renderHoverParts(i,s):new I0([])}_renderStatusBar(e,t){if(t.hasContent)return new evt(e,t)}_registerListenersOnRenderedParts(){const e=new ue;return this._renderedParts.forEach((t,i)=>{const s=t.hoverElement;s.tabIndex=0,e.add(re(s,Se.FOCUS_IN,r=>{r.stopPropagation(),this._focusedHoverPartIndex=i})),e.add(re(s,Se.FOCUS_OUT,r=>{r.stopPropagation(),this._focusedHoverPartIndex=-1}))}),e}_updateMarkdownAndColorParticipantInfo(e){const t=e.find(i=>i instanceof VD&&!(i instanceof uF));t&&(this._markdownHoverParticipant=t),this._colorHoverParticipant=e.find(i=>i instanceof WD)}async updateHoverVerbosityLevel(e,t,i){if(!this._markdownHoverParticipant)return;const s=this._normalizedIndexToMarkdownHoverIndexRange(this._markdownHoverParticipant,t);if(s===void 0)return;const r=await this._markdownHoverParticipant.updateMarkdownHoverVerbosityLevel(e,s,i);r&&(this._renderedParts[t]={type:"hoverPart",participant:this._markdownHoverParticipant,hoverPart:r.hoverPart,hoverElement:r.hoverElement},this._context.onContentsChanged())}isColorPickerVisible(){var e;return((e=this._colorHoverParticipant)==null?void 0:e.isColorPickerVisible())??!1}_normalizedIndexToMarkdownHoverIndexRange(e,t){const i=this._renderedParts[t];if(!i||i.type!=="hoverPart"||!(i.participant===e))return;const r=this._renderedParts.findIndex(o=>o.type==="hoverPart"&&o.participant===e);if(r===-1)throw new li;return t-r}get domNode(){return this._fragment}get domNodeHasChildren(){return this._fragment.hasChildNodes()}get focusedHoverPartIndex(){return this._focusedHoverPartIndex}};n5._DECORATION_OPTIONS=_t.register({description:"content-hover-highlight",className:"hoverHighlight"});let VK=n5;var tvt=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},yue=function(n,e){return function(t,i){e(t,i,n)}};let zK=class extends ee{constructor(e,t,i){super(),this._editor=e,this._instantiationService=t,this._keybindingService=i,this._currentResult=null,this._onContentsChanged=this._register(new X),this.onContentsChanged=this._onContentsChanged.event,this._contentHoverWidget=this._register(this._instantiationService.createInstance(IK,this._editor)),this._participants=this._initializeHoverParticipants(),this._computer=new nF(this._editor,this._participants),this._hoverOperation=this._register(new kLe(this._editor,this._computer)),this._registerListeners()}_initializeHoverParticipants(){const e=[];for(const t of Q0.getAll()){const i=this._instantiationService.createInstance(t,this._editor);e.push(i)}return e.sort((t,i)=>t.hoverOrdinal-i.hoverOrdinal),this._register(this._contentHoverWidget.onDidResize(()=>{this._participants.forEach(t=>{var i;return(i=t.handleResize)==null?void 0:i.call(t)})})),e}_registerListeners(){this._register(this._hoverOperation.onResult(t=>{if(!this._computer.anchor)return;const i=t.hasLoadingMessage?this._addLoadingMessage(t.value):t.value;this._withResult(new ELe(this._computer.anchor,i,t.isComplete))}));const e=this._contentHoverWidget.getDomNode();this._register(Cn(e,"keydown",t=>{t.equals(9)&&this.hide()})),this._register(Cn(e,"mouseleave",t=>{this._onMouseLeave(t)})),this._register(In.onDidChange(()=>{this._contentHoverWidget.position&&this._currentResult&&this._setCurrentResult(this._currentResult)}))}_startShowingOrUpdateHover(e,t,i,s,r){if(!(this._contentHoverWidget.position&&this._currentResult))return e?(this._startHoverOperationIfNecessary(e,t,i,s,!1),!0):!1;const a=this._editor.getOption(60).sticky,l=r&&this._contentHoverWidget.isMouseGettingCloser(r.event.posx,r.event.posy);return a&&l?(e&&this._startHoverOperationIfNecessary(e,t,i,s,!0),!0):e?this._currentResult.anchor.equals(e)?!0:e.canAdoptVisibleHover(this._currentResult.anchor,this._contentHoverWidget.position)?(this._setCurrentResult(this._currentResult.filter(e)),this._startHoverOperationIfNecessary(e,t,i,s,!1),!0):(this._setCurrentResult(null),this._startHoverOperationIfNecessary(e,t,i,s,!1),!0):(this._setCurrentResult(null),!1)}_startHoverOperationIfNecessary(e,t,i,s,r){this._computer.anchor&&this._computer.anchor.equals(e)||(this._hoverOperation.cancel(),this._computer.anchor=e,this._computer.shouldFocus=s,this._computer.source=i,this._computer.insistOnKeepingHoverVisible=r,this._hoverOperation.start(t))}_setCurrentResult(e){let t=e;if(this._currentResult===t)return;t&&t.hoverParts.length===0&&(t=null),this._currentResult=t,this._currentResult?this._showHover(this._currentResult):this._hideHover()}_addLoadingMessage(e){if(!this._computer.anchor)return e;for(const t of this._participants){if(!t.createLoadingMessage)continue;const i=t.createLoadingMessage(this._computer.anchor);if(i)return e.slice(0).concat([i])}return e}_withResult(e){if(this._contentHoverWidget.position&&this._currentResult&&this._currentResult.isComplete||this._setCurrentResult(e),!e.isComplete)return;const s=e.hoverParts.length===0,r=this._computer.insistOnKeepingHoverVisible;s&&r||this._setCurrentResult(e)}_showHover(e){const t=this._getHoverContext();this._renderedContentHover=new QJ(this._editor,e,this._participants,this._computer,t,this._keybindingService),this._renderedContentHover.domNodeHasChildren?this._contentHoverWidget.show(this._renderedContentHover):this._renderedContentHover.dispose()}_hideHover(){this._contentHoverWidget.hide()}_getHoverContext(){return{hide:()=>{this.hide()},onContentsChanged:()=>{this._onContentsChanged.fire(),this._contentHoverWidget.onContentsChanged()},setMinimumDimensions:s=>{this._contentHoverWidget.setMinimumDimensions(s)}}}showsOrWillShow(e){if(this._contentHoverWidget.isResizing)return!0;const i=this._findHoverAnchorCandidates(e);if(!(i.length>0))return this._startShowingOrUpdateHover(null,0,0,!1,e);const r=i[0];return this._startShowingOrUpdateHover(r,0,0,!1,e)}_findHoverAnchorCandidates(e){const t=[];for(const s of this._participants){if(!s.suggestHoverAnchor)continue;const r=s.suggestHoverAnchor(e);r&&t.push(r)}const i=e.target;switch(i.type){case 6:{t.push(new d6(0,i.range,e.event.posx,e.event.posy));break}case 7:{const s=this._editor.getOption(50).typicalHalfwidthCharacterWidth/2;if(!(!i.detail.isAfterLines&&typeof i.detail.horizontalDistanceToText=="number"&&i.detail.horizontalDistanceToText<s))break;t.push(new d6(0,i.range,e.event.posx,e.event.posy));break}}return t.sort((s,r)=>r.priority-s.priority),t}_onMouseLeave(e){const t=this._editor.getDomNode();(!t||!eW(t,e.x,e.y))&&this.hide()}startShowingAtRange(e,t,i,s){this._startShowingOrUpdateHover(new d6(0,e,void 0,void 0),t,i,s,null)}async updateHoverVerbosityLevel(e,t,i){var s;(s=this._renderedContentHover)==null||s.updateHoverVerbosityLevel(e,t,i)}focusedHoverPartIndex(){var e;return((e=this._renderedContentHover)==null?void 0:e.focusedHoverPartIndex)??-1}containsNode(e){return e?this._contentHoverWidget.getDomNode().contains(e):!1}focus(){this._contentHoverWidget.focus()}scrollUp(){this._contentHoverWidget.scrollUp()}scrollDown(){this._contentHoverWidget.scrollDown()}scrollLeft(){this._contentHoverWidget.scrollLeft()}scrollRight(){this._contentHoverWidget.scrollRight()}pageUp(){this._contentHoverWidget.pageUp()}pageDown(){this._contentHoverWidget.pageDown()}goToTop(){this._contentHoverWidget.goToTop()}goToBottom(){this._contentHoverWidget.goToBottom()}hide(){this._computer.anchor=null,this._hoverOperation.cancel(),this._setCurrentResult(null)}getDomNode(){return this._contentHoverWidget.getDomNode()}get isColorPickerVisible(){var e;return((e=this._renderedContentHover)==null?void 0:e.isColorPickerVisible())??!1}get isVisibleFromKeyboard(){return this._contentHoverWidget.isVisibleFromKeyboard}get isVisible(){return this._contentHoverWidget.isVisible}get isFocused(){return this._contentHoverWidget.isFocused}get isResizing(){return this._contentHoverWidget.isResizing}get widget(){return this._contentHoverWidget}};zK=tvt([yue(1,Ze),yue(2,hi)],zK);var ivt=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Sue=function(n,e){return function(t,i){e(t,i,n)}},UK;const nvt=!1;var Cw;let uo=(Cw=class extends ee{constructor(e,t,i){super(),this._editor=e,this._instantiationService=t,this._keybindingService=i,this._onHoverContentsChanged=this._register(new X),this.shouldKeepOpenOnEditorMouseMoveOrLeave=!1,this._listenersStore=new ue,this._hoverState={mouseDown:!1,activatedByDecoratorClick:!1},this._reactToEditorMouseMoveRunner=this._register(new yi(()=>this._reactToEditorMouseMove(this._mouseMoveEvent),0)),this._hookListeners(),this._register(this._editor.onDidChangeConfiguration(s=>{s.hasChanged(60)&&(this._unhookListeners(),this._hookListeners())}))}static get(e){return e.getContribution(UK.ID)}_hookListeners(){const e=this._editor.getOption(60);this._hoverSettings={enabled:e.enabled,sticky:e.sticky,hidingDelay:e.hidingDelay},e.enabled?(this._listenersStore.add(this._editor.onMouseDown(t=>this._onEditorMouseDown(t))),this._listenersStore.add(this._editor.onMouseUp(()=>this._onEditorMouseUp())),this._listenersStore.add(this._editor.onMouseMove(t=>this._onEditorMouseMove(t))),this._listenersStore.add(this._editor.onKeyDown(t=>this._onKeyDown(t)))):(this._listenersStore.add(this._editor.onMouseMove(t=>this._onEditorMouseMove(t))),this._listenersStore.add(this._editor.onKeyDown(t=>this._onKeyDown(t)))),this._listenersStore.add(this._editor.onMouseLeave(t=>this._onEditorMouseLeave(t))),this._listenersStore.add(this._editor.onDidChangeModel(()=>{this._cancelScheduler(),this._hideWidgets()})),this._listenersStore.add(this._editor.onDidChangeModelContent(()=>this._cancelScheduler())),this._listenersStore.add(this._editor.onDidScrollChange(t=>this._onEditorScrollChanged(t)))}_unhookListeners(){this._listenersStore.clear()}_cancelScheduler(){this._mouseMoveEvent=void 0,this._reactToEditorMouseMoveRunner.cancel()}_onEditorScrollChanged(e){(e.scrollTopChanged||e.scrollLeftChanged)&&this._hideWidgets()}_onEditorMouseDown(e){this._hoverState.mouseDown=!0,!this._shouldNotHideCurrentHoverWidget(e)&&this._hideWidgets()}_shouldNotHideCurrentHoverWidget(e){return this._isMouseOnContentHoverWidget(e)||this._isContentWidgetResizing()}_isMouseOnContentHoverWidget(e){var i;const t=(i=this._contentWidget)==null?void 0:i.getDomNode();return t?eW(t,e.event.posx,e.event.posy):!1}_onEditorMouseUp(){this._hoverState.mouseDown=!1}_onEditorMouseLeave(e){this.shouldKeepOpenOnEditorMouseMoveOrLeave||(this._cancelScheduler(),this._shouldNotHideCurrentHoverWidget(e))||this._hideWidgets()}_shouldNotRecomputeCurrentHoverWidget(e){const t=this._hoverSettings.sticky,i=(o,a)=>{const l=this._isMouseOnContentHoverWidget(o);return a&&l},s=o=>{var c;const a=this._isMouseOnContentHoverWidget(o),l=((c=this._contentWidget)==null?void 0:c.isColorPickerVisible)??!1;return a&&l},r=(o,a)=>{var l,c,d,u;return(a&&((c=this._contentWidget)==null?void 0:c.containsNode((l=o.event.browserEvent.view)==null?void 0:l.document.activeElement))&&!((u=(d=o.event.browserEvent.view)==null?void 0:d.getSelection())!=null&&u.isCollapsed))??!1};return i(e,t)||s(e)||r(e,t)}_onEditorMouseMove(e){var a,l,c,d;if(this.shouldKeepOpenOnEditorMouseMoveOrLeave||(this._mouseMoveEvent=e,(a=this._contentWidget)!=null&&a.isFocused||(l=this._contentWidget)!=null&&l.isResizing))return;const t=this._hoverSettings.sticky;if(t&&((c=this._contentWidget)!=null&&c.isVisibleFromKeyboard))return;if(this._shouldNotRecomputeCurrentHoverWidget(e)){this._reactToEditorMouseMoveRunner.cancel();return}const s=this._hoverSettings.hidingDelay;if(((d=this._contentWidget)==null?void 0:d.isVisible)&&t&&s>0){this._reactToEditorMouseMoveRunner.isScheduled()||this._reactToEditorMouseMoveRunner.schedule(s);return}this._reactToEditorMouseMove(e)}_reactToEditorMouseMove(e){var l;if(!e)return;const i=(l=e.target.element)==null?void 0:l.classList.contains("colorpicker-color-decoration"),s=this._editor.getOption(149),r=this._hoverSettings.enabled,o=this._hoverState.activatedByDecoratorClick;if(i&&(s==="click"&&!o||s==="hover"&&!r&&!nvt||s==="clickAndHover"&&!r&&!o)||!i&&!r&&!o){this._hideWidgets();return}this._tryShowHoverWidget(e)||this._hideWidgets()}_tryShowHoverWidget(e){return this._getOrCreateContentWidget().showsOrWillShow(e)}_onKeyDown(e){var s;if(!this._editor.hasModel())return;const t=this._keybindingService.softDispatch(e,this._editor.getDomNode()),i=t.kind===1||t.kind===2&&(t.commandId===yLe||t.commandId===QB||t.commandId===JB)&&((s=this._contentWidget)==null?void 0:s.isVisible);e.keyCode===5||e.keyCode===6||e.keyCode===57||e.keyCode===4||i||this._hideWidgets()}_hideWidgets(){var e,t;this._hoverState.mouseDown&&((e=this._contentWidget)!=null&&e.isColorPickerVisible)||ix.dropDownVisible||(this._hoverState.activatedByDecoratorClick=!1,(t=this._contentWidget)==null||t.hide())}_getOrCreateContentWidget(){return this._contentWidget||(this._contentWidget=this._instantiationService.createInstance(zK,this._editor),this._listenersStore.add(this._contentWidget.onContentsChanged(()=>this._onHoverContentsChanged.fire()))),this._contentWidget}showContentHover(e,t,i,s,r=!1){this._hoverState.activatedByDecoratorClick=r,this._getOrCreateContentWidget().startShowingAtRange(e,t,i,s)}_isContentWidgetResizing(){var e;return((e=this._contentWidget)==null?void 0:e.widget.isResizing)||!1}focusedHoverPartIndex(){return this._getOrCreateContentWidget().focusedHoverPartIndex()}updateHoverVerbosityLevel(e,t,i){this._getOrCreateContentWidget().updateHoverVerbosityLevel(e,t,i)}focus(){var e;(e=this._contentWidget)==null||e.focus()}scrollUp(){var e;(e=this._contentWidget)==null||e.scrollUp()}scrollDown(){var e;(e=this._contentWidget)==null||e.scrollDown()}scrollLeft(){var e;(e=this._contentWidget)==null||e.scrollLeft()}scrollRight(){var e;(e=this._contentWidget)==null||e.scrollRight()}pageUp(){var e;(e=this._contentWidget)==null||e.pageUp()}pageDown(){var e;(e=this._contentWidget)==null||e.pageDown()}goToTop(){var e;(e=this._contentWidget)==null||e.goToTop()}goToBottom(){var e;(e=this._contentWidget)==null||e.goToBottom()}get isColorPickerVisible(){var e;return(e=this._contentWidget)==null?void 0:e.isColorPickerVisible}get isHoverVisible(){var e;return(e=this._contentWidget)==null?void 0:e.isVisible}dispose(){var e;super.dispose(),this._unhookListeners(),this._listenersStore.dispose(),(e=this._contentWidget)==null||e.dispose()}},UK=Cw,Cw.ID="editor.contrib.contentHover",Cw);uo=UK=ivt([Sue(1,Ze),Sue(2,hi)],uo);const Kee=class Kee extends ee{constructor(e){super(),this._editor=e,this._register(e.onMouseDown(t=>this.onMouseDown(t)))}dispose(){super.dispose()}onMouseDown(e){const t=this._editor.getOption(149);if(t!=="click"&&t!=="clickAndHover")return;const i=e.target;if(i.type!==6||!i.detail.injectedText||i.detail.injectedText.options.attachedData!==pLe||!i.range)return;const s=this._editor.getContribution(uo.ID);if(s&&!s.isColorPickerVisible){const r=new M(i.range.startLineNumber,i.range.startColumn+1,i.range.endLineNumber,i.range.endColumn+1);s.showContentHover(r,1,0,!1,!0)}}};Kee.ID="editor.contrib.colorContribution";let hF=Kee;Xt(hF.ID,hF,2);Q0.register(WD);var jLe=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},B1=function(n,e){return function(t,i){e(t,i,n)}},$K,jK,yw;let N0=(yw=class extends ee{constructor(e,t,i){super(),this._editor=e,this._instantiationService=i,this._standaloneColorPickerWidget=null,this._standaloneColorPickerVisible=F.standaloneColorPickerVisible.bindTo(t),this._standaloneColorPickerFocused=F.standaloneColorPickerFocused.bindTo(t)}showOrFocus(){var e;this._editor.hasModel()&&(this._standaloneColorPickerVisible.get()?this._standaloneColorPickerFocused.get()||(e=this._standaloneColorPickerWidget)==null||e.focus():this._standaloneColorPickerWidget=this._instantiationService.createInstance(KK,this._editor,this._standaloneColorPickerVisible,this._standaloneColorPickerFocused))}hide(){var e;this._standaloneColorPickerFocused.set(!1),this._standaloneColorPickerVisible.set(!1),(e=this._standaloneColorPickerWidget)==null||e.hide(),this._editor.focus()}insertColor(){var e;(e=this._standaloneColorPickerWidget)==null||e.updateEditor(),this.hide()}static get(e){return e.getContribution($K.ID)}},$K=yw,yw.ID="editor.contrib.standaloneColorPickerController",yw);N0=$K=jLe([B1(1,at),B1(2,Ze)],N0);Xt(N0.ID,N0,1);const xue=8,svt=22;var Sw;let KK=(Sw=class extends ee{constructor(e,t,i,s,r,o,a){var u;super(),this._editor=e,this._standaloneColorPickerVisible=t,this._standaloneColorPickerFocused=i,this._keybindingService=r,this._languageFeaturesService=o,this._editorWorkerService=a,this.allowEditorOverflow=!0,this._position=void 0,this._body=document.createElement("div"),this._colorHover=null,this._selectionSetInEditor=!1,this._onResult=this._register(new X),this.onResult=this._onResult.event,this._standaloneColorPickerVisible.set(!0),this._standaloneColorPickerParticipant=s.createInstance(HD,this._editor),this._position=(u=this._editor._getViewModel())==null?void 0:u.getPrimaryCursorState().modelState.position;const l=this._editor.getSelection(),c=l?{startLineNumber:l.startLineNumber,startColumn:l.startColumn,endLineNumber:l.endLineNumber,endColumn:l.endColumn}:{startLineNumber:0,endLineNumber:0,endColumn:0,startColumn:0},d=this._register(Hu(this._body));this._register(d.onDidBlur(h=>{this.hide()})),this._register(d.onDidFocus(h=>{this.focus()})),this._register(this._editor.onDidChangeCursorPosition(()=>{this._selectionSetInEditor?this._selectionSetInEditor=!1:this.hide()})),this._register(this._editor.onMouseMove(h=>{var g;const f=(g=h.target.element)==null?void 0:g.classList;f&&f.contains("colorpicker-color-decoration")&&this.hide()})),this._register(this.onResult(h=>{this._render(h.value,h.foundInEditor)})),this._start(c),this._body.style.zIndex="50",this._editor.addContentWidget(this)}updateEditor(){this._colorHover&&this._standaloneColorPickerParticipant.updateEditorModel(this._colorHover)}getId(){return jK.ID}getDomNode(){return this._body}getPosition(){if(!this._position)return null;const e=this._editor.getOption(60).above;return{position:this._position,secondaryPosition:this._position,preference:e?[1,2]:[2,1],positionAffinity:2}}hide(){this.dispose(),this._standaloneColorPickerVisible.set(!1),this._standaloneColorPickerFocused.set(!1),this._editor.removeContentWidget(this),this._editor.focus()}focus(){this._standaloneColorPickerFocused.set(!0),this._body.focus()}async _start(e){const t=await this._computeAsync(e);t&&this._onResult.fire(new rvt(t.result,t.foundInEditor))}async _computeAsync(e){if(!this._editor.hasModel())return null;const t={range:e,color:{red:0,green:0,blue:0,alpha:1}},i=await this._standaloneColorPickerParticipant.createColorHover(t,new BD(this._editorWorkerService),this._languageFeaturesService.colorProvider);return i?{result:i.colorHover,foundInEditor:i.foundInEditor}:null}_render(e,t){const i=document.createDocumentFragment(),s=this._register(new sF(this._keybindingService)),r={fragment:i,statusBar:s,onContentsChanged:()=>{},hide:()=>this.hide()};this._colorHover=e;const o=this._standaloneColorPickerParticipant.renderHoverParts(r,[e]);if(!o)return;this._register(o.disposables);const a=o.colorPicker;this._body.classList.add("standalone-colorpicker-body"),this._body.style.maxHeight=Math.max(this._editor.getLayoutInfo().height/4,250)+"px",this._body.style.maxWidth=Math.max(this._editor.getLayoutInfo().width*.66,500)+"px",this._body.tabIndex=0,this._body.appendChild(i),a.layout();const l=a.body,c=l.saturationBox.domNode.clientWidth,d=l.domNode.clientWidth-c-svt-xue,u=a.body.enterButton;u==null||u.onClicked(()=>{this.updateEditor(),this.hide()});const h=a.header,f=h.pickedColorNode;f.style.width=c+xue+"px";const g=h.originalColorNode;g.style.width=d+"px";const p=a.header.closeButton;p==null||p.onClicked(()=>{this.hide()}),t&&(u&&(u.button.textContent="Replace"),this._selectionSetInEditor=!0,this._editor.setSelection(e.range)),this._editor.layoutContentWidget(this)}},jK=Sw,Sw.ID="editor.contrib.standaloneColorPickerWidget",Sw);KK=jK=jLe([B1(3,Ze),B1(4,hi),B1(5,Be),B1(6,wa)],KK);class rvt{constructor(e,t){this.value=e,this.foundInEditor=t}}class ovt extends qu{constructor(){super({id:"editor.action.showOrFocusStandaloneColorPicker",title:{...lt("showOrFocusStandaloneColorPicker","Show or Focus Standalone Color Picker"),mnemonicTitle:v({key:"mishowOrFocusStandaloneColorPicker",comment:["&& denotes a mnemonic"]},"&&Show or Focus Standalone Color Picker")},precondition:void 0,menu:[{id:ze.CommandPalette}],metadata:{description:lt("showOrFocusStandaloneColorPickerDescription","Show or focus a standalone color picker which uses the default color provider. It displays hex/rgb/hsl colors.")}})}runEditorCommand(e,t){var i;(i=N0.get(t))==null||i.showOrFocus()}}class avt extends Oe{constructor(){super({id:"editor.action.hideColorPicker",label:v({key:"hideColorPicker",comment:["Action that hides the color picker"]},"Hide the Color Picker"),alias:"Hide the Color Picker",precondition:F.standaloneColorPickerVisible.isEqualTo(!0),kbOpts:{primary:9,weight:100},metadata:{description:lt("hideColorPickerDescription","Hide the standalone color picker.")}})}run(e,t){var i;(i=N0.get(t))==null||i.hide()}}class lvt extends Oe{constructor(){super({id:"editor.action.insertColorWithStandaloneColorPicker",label:v({key:"insertColorWithStandaloneColorPicker",comment:["Action that inserts color with standalone color picker"]},"Insert Color with Standalone Color Picker"),alias:"Insert Color with Standalone Color Picker",precondition:F.standaloneColorPickerFocused.isEqualTo(!0),kbOpts:{primary:3,weight:100},metadata:{description:lt("insertColorWithStandaloneColorPickerDescription","Insert hex/rgb/hsl colors with the focused standalone color picker.")}})}run(e,t){var i;(i=N0.get(t))==null||i.insertColor()}}we(avt);we(lvt);Bi(ovt);class Tm{constructor(e,t,i){this.languageConfigurationService=i,this._selection=e,this._insertSpace=t,this._usedEndToken=null}static _haystackHasNeedleAtOffset(e,t,i){if(i<0)return!1;const s=t.length,r=e.length;if(i+s>r)return!1;for(let o=0;o<s;o++){const a=e.charCodeAt(i+o),l=t.charCodeAt(o);if(a!==l&&!(a>=65&&a<=90&&a+32===l)&&!(l>=65&&l<=90&&l+32===a))return!1}return!0}_createOperationsForBlockComment(e,t,i,s,r,o){const a=e.startLineNumber,l=e.startColumn,c=e.endLineNumber,d=e.endColumn,u=r.getLineContent(a),h=r.getLineContent(c);let f=u.lastIndexOf(t,l-1+t.length),g=h.indexOf(i,d-1-i.length);if(f!==-1&&g!==-1)if(a===c)u.substring(f+t.length,g).indexOf(i)>=0&&(f=-1,g=-1);else{const _=u.substring(f+t.length),w=h.substring(0,g);(_.indexOf(i)>=0||w.indexOf(i)>=0)&&(f=-1,g=-1)}let p;f!==-1&&g!==-1?(s&&f+t.length<u.length&&u.charCodeAt(f+t.length)===32&&(t=t+" "),s&&g>0&&h.charCodeAt(g-1)===32&&(i=" "+i,g-=1),p=Tm._createRemoveBlockCommentOperations(new M(a,f+t.length+1,c,g+1),t,i)):(p=Tm._createAddBlockCommentOperations(e,t,i,this._insertSpace),this._usedEndToken=p.length===1?i:null);for(const _ of p)o.addTrackedEditOperation(_.range,_.text)}static _createRemoveBlockCommentOperations(e,t,i){const s=[];return M.isEmpty(e)?s.push(gn.delete(new M(e.startLineNumber,e.startColumn-t.length,e.endLineNumber,e.endColumn+i.length))):(s.push(gn.delete(new M(e.startLineNumber,e.startColumn-t.length,e.startLineNumber,e.startColumn))),s.push(gn.delete(new M(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn+i.length)))),s}static _createAddBlockCommentOperations(e,t,i,s){const r=[];return M.isEmpty(e)?r.push(gn.replace(new M(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),t+"  "+i)):(r.push(gn.insert(new Y(e.startLineNumber,e.startColumn),t+(s?" ":""))),r.push(gn.insert(new Y(e.endLineNumber,e.endColumn),(s?" ":"")+i))),r}getEditOperations(e,t){const i=this._selection.startLineNumber,s=this._selection.startColumn;e.tokenization.tokenizeIfCheap(i);const r=e.getLanguageIdAtPosition(i,s),o=this.languageConfigurationService.getLanguageConfiguration(r).comments;!o||!o.blockCommentStartToken||!o.blockCommentEndToken||this._createOperationsForBlockComment(this._selection,o.blockCommentStartToken,o.blockCommentEndToken,this._insertSpace,e,t)}computeCursorState(e,t){const i=t.getInverseEditOperations();if(i.length===2){const s=i[0],r=i[1];return new $e(s.range.endLineNumber,s.range.endColumn,r.range.startLineNumber,r.range.startColumn)}else{const s=i[0].range,r=this._usedEndToken?-this._usedEndToken.length-1:0;return new $e(s.endLineNumber,s.endColumn+r,s.endLineNumber,s.endColumn+r)}}}class Kf{constructor(e,t,i,s,r,o,a){this.languageConfigurationService=e,this._selection=t,this._indentSize=i,this._type=s,this._insertSpace=r,this._selectionId=null,this._deltaColumn=0,this._moveEndPositionDown=!1,this._ignoreEmptyLines=o,this._ignoreFirstLine=a||!1}static _gatherPreflightCommentStrings(e,t,i,s){e.tokenization.tokenizeIfCheap(t);const r=e.getLanguageIdAtPosition(t,1),o=s.getLanguageConfiguration(r).comments,a=o?o.lineCommentToken:null;if(!a)return null;const l=[];for(let c=0,d=i-t+1;c<d;c++)l[c]={ignore:!1,commentStr:a,commentStrOffset:0,commentStrLength:a.length};return l}static _analyzeLines(e,t,i,s,r,o,a,l){let c=!0,d;e===0?d=!0:e===1?d=!1:d=!0;for(let u=0,h=s.length;u<h;u++){const f=s[u],g=r+u;if(g===r&&a){f.ignore=!0;continue}const p=i.getLineContent(g),_=lo(p);if(_===-1){f.ignore=o,f.commentStrOffset=p.length;continue}if(c=!1,f.ignore=!1,f.commentStrOffset=_,d&&!Tm._haystackHasNeedleAtOffset(p,f.commentStr,_)&&(e===0?d=!1:e===1||(f.ignore=!0)),d&&t){const w=_+f.commentStrLength;w<p.length&&p.charCodeAt(w)===32&&(f.commentStrLength+=1)}}if(e===0&&c){d=!1;for(let u=0,h=s.length;u<h;u++)s[u].ignore=!1}return{supported:!0,shouldRemoveComments:d,lines:s}}static _gatherPreflightData(e,t,i,s,r,o,a,l){const c=Kf._gatherPreflightCommentStrings(i,s,r,l);return c===null?{supported:!1}:Kf._analyzeLines(e,t,i,c,s,o,a,l)}_executeLineComments(e,t,i,s){let r;i.shouldRemoveComments?r=Kf._createRemoveLineCommentsOperations(i.lines,s.startLineNumber):(Kf._normalizeInsertionPoint(e,i.lines,s.startLineNumber,this._indentSize),r=this._createAddLineCommentsOperations(i.lines,s.startLineNumber));const o=new Y(s.positionLineNumber,s.positionColumn);for(let a=0,l=r.length;a<l;a++)t.addEditOperation(r[a].range,r[a].text),M.isEmpty(r[a].range)&&M.getStartPosition(r[a].range).equals(o)&&e.getLineContent(o.lineNumber).length+1===o.column&&(this._deltaColumn=(r[a].text||"").length);this._selectionId=t.trackSelection(s)}_attemptRemoveBlockComment(e,t,i,s){let r=t.startLineNumber,o=t.endLineNumber;const a=s.length+Math.max(e.getLineFirstNonWhitespaceColumn(t.startLineNumber),t.startColumn);let l=e.getLineContent(r).lastIndexOf(i,a-1),c=e.getLineContent(o).indexOf(s,t.endColumn-1-i.length);return l!==-1&&c===-1&&(c=e.getLineContent(r).indexOf(s,l+i.length),o=r),l===-1&&c!==-1&&(l=e.getLineContent(o).lastIndexOf(i,c),r=o),t.isEmpty()&&(l===-1||c===-1)&&(l=e.getLineContent(r).indexOf(i),l!==-1&&(c=e.getLineContent(r).indexOf(s,l+i.length))),l!==-1&&e.getLineContent(r).charCodeAt(l+i.length)===32&&(i+=" "),c!==-1&&e.getLineContent(o).charCodeAt(c-1)===32&&(s=" "+s,c-=1),l!==-1&&c!==-1?Tm._createRemoveBlockCommentOperations(new M(r,l+i.length+1,o,c+1),i,s):null}_executeBlockComment(e,t,i){e.tokenization.tokenizeIfCheap(i.startLineNumber);const s=e.getLanguageIdAtPosition(i.startLineNumber,1),r=this.languageConfigurationService.getLanguageConfiguration(s).comments;if(!r||!r.blockCommentStartToken||!r.blockCommentEndToken)return;const o=r.blockCommentStartToken,a=r.blockCommentEndToken;let l=this._attemptRemoveBlockComment(e,i,o,a);if(!l){if(i.isEmpty()){const c=e.getLineContent(i.startLineNumber);let d=lo(c);d===-1&&(d=c.length),l=Tm._createAddBlockCommentOperations(new M(i.startLineNumber,d+1,i.startLineNumber,c.length+1),o,a,this._insertSpace)}else l=Tm._createAddBlockCommentOperations(new M(i.startLineNumber,e.getLineFirstNonWhitespaceColumn(i.startLineNumber),i.endLineNumber,e.getLineMaxColumn(i.endLineNumber)),o,a,this._insertSpace);l.length===1&&(this._deltaColumn=o.length+1)}this._selectionId=t.trackSelection(i);for(const c of l)t.addEditOperation(c.range,c.text)}getEditOperations(e,t){let i=this._selection;if(this._moveEndPositionDown=!1,i.startLineNumber===i.endLineNumber&&this._ignoreFirstLine){t.addEditOperation(new M(i.startLineNumber,e.getLineMaxColumn(i.startLineNumber),i.startLineNumber+1,1),i.startLineNumber===e.getLineCount()?"":`
`),this._selectionId=t.trackSelection(i);return}i.startLineNumber<i.endLineNumber&&i.endColumn===1&&(this._moveEndPositionDown=!0,i=i.setEndPosition(i.endLineNumber-1,e.getLineMaxColumn(i.endLineNumber-1)));const s=Kf._gatherPreflightData(this._type,this._insertSpace,e,i.startLineNumber,i.endLineNumber,this._ignoreEmptyLines,this._ignoreFirstLine,this.languageConfigurationService);return s.supported?this._executeLineComments(e,t,s,i):this._executeBlockComment(e,t,i)}computeCursorState(e,t){let i=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(i=i.setEndPosition(i.endLineNumber+1,1)),new $e(i.selectionStartLineNumber,i.selectionStartColumn+this._deltaColumn,i.positionLineNumber,i.positionColumn+this._deltaColumn)}static _createRemoveLineCommentsOperations(e,t){const i=[];for(let s=0,r=e.length;s<r;s++){const o=e[s];o.ignore||i.push(gn.delete(new M(t+s,o.commentStrOffset+1,t+s,o.commentStrOffset+o.commentStrLength+1)))}return i}_createAddLineCommentsOperations(e,t){const i=[],s=this._insertSpace?" ":"";for(let r=0,o=e.length;r<o;r++){const a=e[r];a.ignore||i.push(gn.insert(new Y(t+r,a.commentStrOffset+1),a.commentStr+s))}return i}static nextVisibleColumn(e,t,i,s){return i?e+(t-e%t):e+s}static _normalizeInsertionPoint(e,t,i,s){let r=1073741824,o,a;for(let l=0,c=t.length;l<c;l++){if(t[l].ignore)continue;const d=e.getLineContent(i+l);let u=0;for(let h=0,f=t[l].commentStrOffset;u<r&&h<f;h++)u=Kf.nextVisibleColumn(u,s,d.charCodeAt(h)===9,1);u<r&&(r=u)}r=Math.floor(r/s)*s;for(let l=0,c=t.length;l<c;l++){if(t[l].ignore)continue;const d=e.getLineContent(i+l);let u=0;for(o=0,a=t[l].commentStrOffset;u<r&&o<a;o++)u=Kf.nextVisibleColumn(u,s,d.charCodeAt(o)===9,1);u>r?t[l].commentStrOffset=o-1:t[l].commentStrOffset=o}}}class JJ extends Oe{constructor(e,t){super(t),this._type=e}run(e,t){const i=e.get(vn);if(!t.hasModel())return;const s=t.getModel(),r=[],o=s.getOptions(),a=t.getOption(23),l=t.getSelections().map((d,u)=>({selection:d,index:u,ignoreFirstLine:!1}));l.sort((d,u)=>M.compareRangesUsingStarts(d.selection,u.selection));let c=l[0];for(let d=1;d<l.length;d++){const u=l[d];c.selection.endLineNumber===u.selection.startLineNumber&&(c.index<u.index?u.ignoreFirstLine=!0:(c.ignoreFirstLine=!0,c=u))}for(const d of l)r.push(new Kf(i,d.selection,o.indentSize,this._type,a.insertSpace,a.ignoreEmptyLines,d.ignoreFirstLine));t.pushUndoStop(),t.executeCommands(this.id,r),t.pushUndoStop()}}class cvt extends JJ{constructor(){super(0,{id:"editor.action.commentLine",label:v("comment.line","Toggle Line Comment"),alias:"Toggle Line Comment",precondition:F.writable,kbOpts:{kbExpr:F.editorTextFocus,primary:2138,weight:100},menuOpts:{menuId:ze.MenubarEditMenu,group:"5_insert",title:v({key:"miToggleLineComment",comment:["&& denotes a mnemonic"]},"&&Toggle Line Comment"),order:1}})}}class dvt extends JJ{constructor(){super(1,{id:"editor.action.addCommentLine",label:v("comment.line.add","Add Line Comment"),alias:"Add Line Comment",precondition:F.writable,kbOpts:{kbExpr:F.editorTextFocus,primary:as(2089,2081),weight:100}})}}class uvt extends JJ{constructor(){super(2,{id:"editor.action.removeCommentLine",label:v("comment.line.remove","Remove Line Comment"),alias:"Remove Line Comment",precondition:F.writable,kbOpts:{kbExpr:F.editorTextFocus,primary:as(2089,2099),weight:100}})}}class hvt extends Oe{constructor(){super({id:"editor.action.blockComment",label:v("comment.block","Toggle Block Comment"),alias:"Toggle Block Comment",precondition:F.writable,kbOpts:{kbExpr:F.editorTextFocus,primary:1567,linux:{primary:3103},weight:100},menuOpts:{menuId:ze.MenubarEditMenu,group:"5_insert",title:v({key:"miToggleBlockComment",comment:["&& denotes a mnemonic"]},"Toggle &&Block Comment"),order:2}})}run(e,t){const i=e.get(vn);if(!t.hasModel())return;const s=t.getOption(23),r=[],o=t.getSelections();for(const a of o)r.push(new Tm(a,s.insertSpace,i));t.pushUndoStop(),t.executeCommands(this.id,r),t.pushUndoStop()}}we(cvt);we(dvt);we(uvt);we(hvt);var fvt=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Av=function(n,e){return function(t,i){e(t,i,n)}},qK,xw;let sx=(xw=class{static get(e){return e.getContribution(qK.ID)}constructor(e,t,i,s,r,o,a,l){this._contextMenuService=t,this._contextViewService=i,this._contextKeyService=s,this._keybindingService=r,this._menuService=o,this._configurationService=a,this._workspaceContextService=l,this._toDispose=new ue,this._contextMenuIsBeingShownCount=0,this._editor=e,this._toDispose.add(this._editor.onContextMenu(c=>this._onContextMenu(c))),this._toDispose.add(this._editor.onMouseWheel(c=>{if(this._contextMenuIsBeingShownCount>0){const d=this._contextViewService.getContextViewElement(),u=c.srcElement;u.shadowRoot&&d0(d)===u.shadowRoot||this._contextViewService.hideContextView()}})),this._toDispose.add(this._editor.onKeyDown(c=>{this._editor.getOption(24)&&c.keyCode===58&&(c.preventDefault(),c.stopPropagation(),this.showContextMenu())}))}_onContextMenu(e){if(!this._editor.hasModel())return;if(!this._editor.getOption(24)){this._editor.focus(),e.target.position&&!this._editor.getSelection().containsPosition(e.target.position)&&this._editor.setPosition(e.target.position);return}if(e.target.type===12||e.target.type===6&&e.target.detail.injectedText)return;if(e.event.preventDefault(),e.event.stopPropagation(),e.target.type===11)return this._showScrollbarContextMenu(e.event);if(e.target.type!==6&&e.target.type!==7&&e.target.type!==1)return;if(this._editor.focus(),e.target.position){let i=!1;for(const s of this._editor.getSelections())if(s.containsPosition(e.target.position)){i=!0;break}i||this._editor.setPosition(e.target.position)}let t=null;e.target.type!==1&&(t=e.event),this.showContextMenu(t)}showContextMenu(e){if(!this._editor.getOption(24)||!this._editor.hasModel())return;const t=this._getMenuActions(this._editor.getModel(),this._editor.contextMenuId);t.length>0&&this._doShowContextMenu(t,e)}_getMenuActions(e,t){const i=[],s=this._menuService.getMenuActions(t,this._contextKeyService,{arg:e.uri});for(const r of s){const[,o]=r;let a=0;for(const l of o)if(l instanceof xy){const c=this._getMenuActions(e,l.item.submenu);c.length>0&&(i.push(new NS(l.id,l.label,c)),a++)}else i.push(l),a++;a&&i.push(new Ts)}return i.length&&i.pop(),i}_doShowContextMenu(e,t=null){if(!this._editor.hasModel())return;const i=this._editor.getOption(60);this._editor.updateOptions({hover:{enabled:!1}});let s=t;if(!s){this._editor.revealPosition(this._editor.getPosition(),1),this._editor.render();const o=this._editor.getScrolledVisiblePosition(this._editor.getPosition()),a=Fn(this._editor.getDomNode()),l=a.left+o.left,c=a.top+o.top+o.height;s={x:l,y:c}}const r=this._editor.getOption(128)&&!Bu;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:r?this._editor.getOverflowWidgetsDomNode()??this._editor.getDomNode():void 0,getAnchor:()=>s,getActions:()=>e,getActionViewItem:o=>{const a=this._keybindingFor(o);if(a)return new $S(o,o,{label:!0,keybinding:a.getLabel(),isMenu:!0});const l=o;return typeof l.getActionViewItem=="function"?l.getActionViewItem():new $S(o,o,{icon:!0,label:!0,isMenu:!0})},getKeyBinding:o=>this._keybindingFor(o),onHide:o=>{this._contextMenuIsBeingShownCount--,this._editor.updateOptions({hover:i})}})}_showScrollbarContextMenu(e){if(!this._editor.hasModel()||htt(this._workspaceContextService.getWorkspace()))return;const t=this._editor.getOption(73);let i=0;const s=c=>({id:`menu-action-${++i}`,label:c.label,tooltip:"",class:void 0,enabled:typeof c.enabled>"u"?!0:c.enabled,checked:c.checked,run:c.run}),r=(c,d)=>new NS(`menu-action-${++i}`,c,d,void 0),o=(c,d,u,h,f)=>{if(!d)return s({label:c,enabled:d,run:()=>{}});const g=_=>()=>{this._configurationService.updateValue(u,_)},p=[];for(const _ of f)p.push(s({label:_.label,checked:h===_.value,run:g(_.value)}));return r(c,p)},a=[];a.push(s({label:v("context.minimap.minimap","Minimap"),checked:t.enabled,run:()=>{this._configurationService.updateValue("editor.minimap.enabled",!t.enabled)}})),a.push(new Ts),a.push(s({label:v("context.minimap.renderCharacters","Render Characters"),enabled:t.enabled,checked:t.renderCharacters,run:()=>{this._configurationService.updateValue("editor.minimap.renderCharacters",!t.renderCharacters)}})),a.push(o(v("context.minimap.size","Vertical size"),t.enabled,"editor.minimap.size",t.size,[{label:v("context.minimap.size.proportional","Proportional"),value:"proportional"},{label:v("context.minimap.size.fill","Fill"),value:"fill"},{label:v("context.minimap.size.fit","Fit"),value:"fit"}])),a.push(o(v("context.minimap.slider","Slider"),t.enabled,"editor.minimap.showSlider",t.showSlider,[{label:v("context.minimap.slider.mouseover","Mouse Over"),value:"mouseover"},{label:v("context.minimap.slider.always","Always"),value:"always"}]));const l=this._editor.getOption(128)&&!Bu;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:l?this._editor.getDomNode():void 0,getAnchor:()=>e,getActions:()=>a,onHide:c=>{this._contextMenuIsBeingShownCount--,this._editor.focus()}})}_keybindingFor(e){return this._keybindingService.lookupKeybinding(e.id)}dispose(){this._contextMenuIsBeingShownCount>0&&this._contextViewService.hideContextView(),this._toDispose.dispose()}},qK=xw,xw.ID="editor.contrib.contextmenu",xw);sx=qK=fvt([Av(1,ol),Av(2,hp),Av(3,at),Av(4,hi),Av(5,Yl),Av(6,Tt),Av(7,m0)],sx);class gvt extends Oe{constructor(){super({id:"editor.action.showContextMenu",label:v("action.showContextMenu.label","Show Editor Context Menu"),alias:"Show Editor Context Menu",precondition:void 0,kbOpts:{kbExpr:F.textInputFocus,primary:1092,weight:100}})}run(e,t){var i;(i=sx.get(t))==null||i.showContextMenu()}}Xt(sx.ID,sx,2);we(gvt);class h6{constructor(e){this.selections=e}equals(e){const t=this.selections.length,i=e.selections.length;if(t!==i)return!1;for(let s=0;s<t;s++)if(!this.selections[s].equalsSelection(e.selections[s]))return!1;return!0}}class f6{constructor(e,t,i){this.cursorState=e,this.scrollTop=t,this.scrollLeft=i}}const s5=class s5 extends ee{static get(e){return e.getContribution(s5.ID)}constructor(e){super(),this._editor=e,this._isCursorUndoRedo=!1,this._undoStack=[],this._redoStack=[],this._register(e.onDidChangeModel(t=>{this._undoStack=[],this._redoStack=[]})),this._register(e.onDidChangeModelContent(t=>{this._undoStack=[],this._redoStack=[]})),this._register(e.onDidChangeCursorSelection(t=>{if(this._isCursorUndoRedo||!t.oldSelections||t.oldModelVersionId!==t.modelVersionId)return;const i=new h6(t.oldSelections);this._undoStack.length>0&&this._undoStack[this._undoStack.length-1].cursorState.equals(i)||(this._undoStack.push(new f6(i,e.getScrollTop(),e.getScrollLeft())),this._redoStack=[],this._undoStack.length>50&&this._undoStack.shift())}))}cursorUndo(){!this._editor.hasModel()||this._undoStack.length===0||(this._redoStack.push(new f6(new h6(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._undoStack.pop()))}cursorRedo(){!this._editor.hasModel()||this._redoStack.length===0||(this._undoStack.push(new f6(new h6(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._redoStack.pop()))}_applyState(e){this._isCursorUndoRedo=!0,this._editor.setSelections(e.cursorState.selections),this._editor.setScrollPosition({scrollTop:e.scrollTop,scrollLeft:e.scrollLeft}),this._isCursorUndoRedo=!1}};s5.ID="editor.contrib.cursorUndoRedoController";let rx=s5;class pvt extends Oe{constructor(){super({id:"cursorUndo",label:v("cursor.undo","Cursor Undo"),alias:"Cursor Undo",precondition:void 0,kbOpts:{kbExpr:F.textInputFocus,primary:2099,weight:100}})}run(e,t,i){var s;(s=rx.get(t))==null||s.cursorUndo()}}class mvt extends Oe{constructor(){super({id:"cursorRedo",label:v("cursor.redo","Cursor Redo"),alias:"Cursor Redo",precondition:void 0})}run(e,t,i){var s;(s=rx.get(t))==null||s.cursorRedo()}}Xt(rx.ID,rx,0);we(pvt);we(mvt);class _vt{constructor(e,t,i){this.selection=e,this.targetPosition=t,this.copy=i,this.targetSelection=null}getEditOperations(e,t){const i=e.getValueInRange(this.selection);if(this.copy||t.addEditOperation(this.selection,null),t.addEditOperation(new M(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column),i),this.selection.containsPosition(this.targetPosition)&&!(this.copy&&(this.selection.getEndPosition().equals(this.targetPosition)||this.selection.getStartPosition().equals(this.targetPosition)))){this.targetSelection=this.selection;return}if(this.copy){this.targetSelection=new $e(this.targetPosition.lineNumber,this.targetPosition.column,this.selection.endLineNumber-this.selection.startLineNumber+this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}if(this.targetPosition.lineNumber>this.selection.endLineNumber){this.targetSelection=new $e(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}if(this.targetPosition.lineNumber<this.selection.endLineNumber){this.targetSelection=new $e(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber+this.selection.endLineNumber-this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}this.selection.endColumn<=this.targetPosition.column?this.targetSelection=new $e(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column-this.selection.endColumn+this.selection.startColumn:this.targetPosition.column-this.selection.endColumn+this.selection.startColumn,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column:this.selection.endColumn):this.targetSelection=new $e(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column+this.selection.endColumn-this.selection.startColumn)}computeCursorState(e,t){return this.targetSelection}}function FC(n){return Bt?n.altKey:n.ctrlKey}const Xp=class Xp extends ee{constructor(e){super(),this._editor=e,this._dndDecorationIds=this._editor.createDecorationsCollection(),this._register(this._editor.onMouseDown(t=>this._onEditorMouseDown(t))),this._register(this._editor.onMouseUp(t=>this._onEditorMouseUp(t))),this._register(this._editor.onMouseDrag(t=>this._onEditorMouseDrag(t))),this._register(this._editor.onMouseDrop(t=>this._onEditorMouseDrop(t))),this._register(this._editor.onMouseDropCanceled(()=>this._onEditorMouseDropCanceled())),this._register(this._editor.onKeyDown(t=>this.onEditorKeyDown(t))),this._register(this._editor.onKeyUp(t=>this.onEditorKeyUp(t))),this._register(this._editor.onDidBlurEditorWidget(()=>this.onEditorBlur())),this._register(this._editor.onDidBlurEditorText(()=>this.onEditorBlur())),this._mouseDown=!1,this._modifierPressed=!1,this._dragSelection=null}onEditorBlur(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1}onEditorKeyDown(e){!this._editor.getOption(35)||this._editor.getOption(22)||(FC(e)&&(this._modifierPressed=!0),this._mouseDown&&FC(e)&&this._editor.updateOptions({mouseStyle:"copy"}))}onEditorKeyUp(e){!this._editor.getOption(35)||this._editor.getOption(22)||(FC(e)&&(this._modifierPressed=!1),this._mouseDown&&e.keyCode===Xp.TRIGGER_KEY_VALUE&&this._editor.updateOptions({mouseStyle:"default"}))}_onEditorMouseDown(e){this._mouseDown=!0}_onEditorMouseUp(e){this._mouseDown=!1,this._editor.updateOptions({mouseStyle:"text"})}_onEditorMouseDrag(e){const t=e.target;if(this._dragSelection===null){const s=(this._editor.getSelections()||[]).filter(r=>t.position&&r.containsPosition(t.position));if(s.length===1)this._dragSelection=s[0];else return}FC(e.event)?this._editor.updateOptions({mouseStyle:"copy"}):this._editor.updateOptions({mouseStyle:"default"}),t.position&&(this._dragSelection.containsPosition(t.position)?this._removeDecoration():this.showAt(t.position))}_onEditorMouseDropCanceled(){this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}_onEditorMouseDrop(e){if(e.target&&(this._hitContent(e.target)||this._hitMargin(e.target))&&e.target.position){const t=new Y(e.target.position.lineNumber,e.target.position.column);if(this._dragSelection===null){let i=null;if(e.event.shiftKey){const s=this._editor.getSelection();if(s){const{selectionStartLineNumber:r,selectionStartColumn:o}=s;i=[new $e(r,o,t.lineNumber,t.column)]}}else i=(this._editor.getSelections()||[]).map(s=>s.containsPosition(t)?new $e(t.lineNumber,t.column,t.lineNumber,t.column):s);this._editor.setSelections(i||[],"mouse",3)}else(!this._dragSelection.containsPosition(t)||(FC(e.event)||this._modifierPressed)&&(this._dragSelection.getEndPosition().equals(t)||this._dragSelection.getStartPosition().equals(t)))&&(this._editor.pushUndoStop(),this._editor.executeCommand(Xp.ID,new _vt(this._dragSelection,t,FC(e.event)||this._modifierPressed)),this._editor.pushUndoStop())}this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}showAt(e){this._dndDecorationIds.set([{range:new M(e.lineNumber,e.column,e.lineNumber,e.column),options:Xp._DECORATION_OPTIONS}]),this._editor.revealPosition(e,1)}_removeDecoration(){this._dndDecorationIds.clear()}_hitContent(e){return e.type===6||e.type===7}_hitMargin(e){return e.type===2||e.type===3||e.type===4}dispose(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1,super.dispose()}};Xp.ID="editor.contrib.dragAndDrop",Xp.TRIGGER_KEY_VALUE=Bt?6:5,Xp._DECORATION_OPTIONS=_t.register({description:"dnd-target",className:"dnd-target"});let fF=Xp;Xt(fF.ID,fF,2);Xt(np.ID,np,0);$x(lK);Te(new class extends vs{constructor(){super({id:Gxe,precondition:WJ,kbOpts:{weight:100,primary:2137}})}runEditorCommand(n,e){var t;return(t=np.get(e))==null?void 0:t.changePasteType()}});Te(new class extends vs{constructor(){super({id:"editor.hidePasteWidget",precondition:WJ,kbOpts:{weight:100,primary:9}})}runEditorCommand(n,e){var t;(t=np.get(e))==null||t.clearWidgets()}});var Lw;we((Lw=class extends Oe{constructor(){super({id:"editor.action.pasteAs",label:v("pasteAs","Paste As..."),alias:"Paste As...",precondition:F.writable,metadata:{description:"Paste as",args:[{name:"args",schema:Lw.argsSchema}]}})}run(e,t,i){var r;let s=typeof(i==null?void 0:i.kind)=="string"?i.kind:void 0;return!s&&i&&(s=typeof i.id=="string"?i.id:void 0),(r=np.get(t))==null?void 0:r.pasteAs(s?new cn(s):void 0)}},Lw.argsSchema={type:"object",properties:{kind:{type:"string",description:v("pasteAs.kind","The kind of the paste edit to try applying. If not provided or there are multiple edits for this kind, the editor will show a picker.")}}},Lw));we(class extends Oe{constructor(){super({id:"editor.action.pasteAsText",label:v("pasteAsText","Paste as Text"),alias:"Paste as Text",precondition:F.writable})}run(n,e){var t;return(t=np.get(e))==null?void 0:t.pasteAs({providerId:S0.id})}});class vvt{constructor(){this._dragOperations=new Map}removeDragOperationTransfer(e){if(e&&this._dragOperations.has(e)){const t=this._dragOperations.get(e);return this._dragOperations.delete(e),t}}}class Lue{constructor(e){this.identifier=e}}const KLe=Wt("treeViewsDndService");jt(KLe,vvt,1);var bvt=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},xA=function(n,e){return function(t,i){e(t,i,n)}},GK;const qLe="editor.experimental.dropIntoEditor.defaultProvider",GLe="editor.changeDropType",eee=new Re("dropWidgetVisible",!1,v("dropWidgetVisible","Whether the drop widget is showing"));var kw;let ox=(kw=class extends ee{static get(e){return e.getContribution(GK.ID)}constructor(e,t,i,s,r){super(),this._configService=i,this._languageFeaturesService=s,this._treeViewsDragAndDropService=r,this.treeItemsTransfer=oK.getInstance(),this._dropProgressManager=this._register(t.createInstance(eF,"dropIntoEditor",e)),this._postDropWidgetManager=this._register(t.createInstance(iF,"dropIntoEditor",e,eee,{id:GLe,label:v("postDropWidgetTitle","Show drop options...")})),this._register(e.onDropIntoEditor(o=>this.onDropIntoEditor(e,o.position,o.event)))}clearWidgets(){this._postDropWidgetManager.clear()}changeDropType(){this._postDropWidgetManager.tryShowSelector()}async onDropIntoEditor(e,t,i){var r;if(!i.dataTransfer||!e.hasModel())return;(r=this._currentOperation)==null||r.cancel(),e.focus(),e.setPosition(t);const s=Ds(async o=>{const a=new ue,l=a.add(new V_(e,1,void 0,o));try{const c=await this.extractDataTransferData(i);if(c.size===0||l.token.isCancellationRequested)return;const d=e.getModel();if(!d)return;const u=this._languageFeaturesService.documentDropEditProvider.ordered(d).filter(f=>f.dropMimeTypes?f.dropMimeTypes.some(g=>c.matches(g)):!0),h=a.add(await this.getDropEdits(u,d,t,c,l));if(l.token.isCancellationRequested)return;if(h.edits.length){const f=this.getInitialActiveEditIndex(d,h.edits),g=e.getOption(36).showDropSelector==="afterDrop";await this._postDropWidgetManager.applyEditAndShowIfNeeded([M.fromPositions(t)],{activeEditIndex:f,allEdits:h.edits},g,async p=>p,o)}}finally{a.dispose(),this._currentOperation===s&&(this._currentOperation=void 0)}});this._dropProgressManager.showWhile(t,v("dropIntoEditorProgress","Running drop handlers. Click to cancel"),s,{cancel:()=>s.cancel()}),this._currentOperation=s}async getDropEdits(e,t,i,s,r){const o=new ue,a=await ON(Promise.all(e.map(async c=>{try{const d=await c.provideDocumentDropEdits(t,i,s,r.token);return d&&o.add(d),d==null?void 0:d.edits.map(u=>({...u,providerId:c.id}))}catch(d){console.error(d)}})),r.token),l=Id(a??[]).flat();return{edits:Kxe(l),dispose:()=>o.dispose()}}getInitialActiveEditIndex(e,t){const i=this._configService.getValue(qLe,{resource:e.uri});for(const[s,r]of Object.entries(i)){const o=new cn(r),a=t.findIndex(l=>o.value===l.providerId&&l.handledMimeType&&Bxe(s,[l.handledMimeType]));if(a>=0)return a}return 0}async extractDataTransferData(e){if(!e.dataTransfer)return new Fxe;const t=Vxe(e.dataTransfer);if(this.treeItemsTransfer.hasData(Lue.prototype)){const i=this.treeItemsTransfer.getData(Lue.prototype);if(Array.isArray(i))for(const s of i){const r=await this._treeViewsDragAndDropService.removeDragOperationTransfer(s.identifier);if(r)for(const[o,a]of r)t.replace(o,a)}}return t}},GK=kw,kw.ID="editor.contrib.dropIntoEditorController",kw);ox=GK=bvt([xA(1,Ze),xA(2,Tt),xA(3,Be),xA(4,KLe)],ox);Xt(ox.ID,ox,2);$x(aK);Te(new class extends vs{constructor(){super({id:GLe,precondition:eee,kbOpts:{weight:100,primary:2137}})}runEditorCommand(n,e,t){var i;(i=ox.get(e))==null||i.changeDropType()}});Te(new class extends vs{constructor(){super({id:"editor.hideDropWidget",precondition:eee,kbOpts:{weight:100,primary:9}})}runEditorCommand(n,e,t){var i;(i=ox.get(e))==null||i.clearWidgets()}});_n.as(Bd.Configuration).registerConfiguration({...jN,properties:{[qLe]:{type:"object",scope:5,description:v("defaultProviderDescription","Configures the default drop provider to use for content of a given mime type."),default:{},additionalProperties:{type:"string"}}}});const Zr=class Zr{constructor(e){this._editor=e,this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null,this._startPosition=this._editor.getPosition()}dispose(){this._editor.removeDecorations(this._allDecorations()),this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}reset(){this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}getCount(){return this._decorations.length}getFindScope(){return this._findScopeDecorationIds[0]?this._editor.getModel().getDecorationRange(this._findScopeDecorationIds[0]):null}getFindScopes(){if(this._findScopeDecorationIds.length){const e=this._findScopeDecorationIds.map(t=>this._editor.getModel().getDecorationRange(t)).filter(t=>!!t);if(e.length)return e}return null}getStartPosition(){return this._startPosition}setStartPosition(e){this._startPosition=e,this.setCurrentFindMatch(null)}_getDecorationIndex(e){const t=this._decorations.indexOf(e);return t>=0?t+1:1}getDecorationRangeAt(e){const t=e<this._decorations.length?this._decorations[e]:null;return t?this._editor.getModel().getDecorationRange(t):null}getCurrentMatchesPosition(e){const t=this._editor.getModel().getDecorationsInRange(e);for(const i of t){const s=i.options;if(s===Zr._FIND_MATCH_DECORATION||s===Zr._CURRENT_FIND_MATCH_DECORATION)return this._getDecorationIndex(i.id)}return 0}setCurrentFindMatch(e){let t=null,i=0;if(e)for(let s=0,r=this._decorations.length;s<r;s++){const o=this._editor.getModel().getDecorationRange(this._decorations[s]);if(e.equalsRange(o)){t=this._decorations[s],i=s+1;break}}return(this._highlightedDecorationId!==null||t!==null)&&this._editor.changeDecorations(s=>{if(this._highlightedDecorationId!==null&&(s.changeDecorationOptions(this._highlightedDecorationId,Zr._FIND_MATCH_DECORATION),this._highlightedDecorationId=null),t!==null&&(this._highlightedDecorationId=t,s.changeDecorationOptions(this._highlightedDecorationId,Zr._CURRENT_FIND_MATCH_DECORATION)),this._rangeHighlightDecorationId!==null&&(s.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),t!==null){let r=this._editor.getModel().getDecorationRange(t);if(r.startLineNumber!==r.endLineNumber&&r.endColumn===1){const o=r.endLineNumber-1,a=this._editor.getModel().getLineMaxColumn(o);r=new M(r.startLineNumber,r.startColumn,o,a)}this._rangeHighlightDecorationId=s.addDecoration(r,Zr._RANGE_HIGHLIGHT_DECORATION)}}),i}set(e,t){this._editor.changeDecorations(i=>{let s=Zr._FIND_MATCH_DECORATION;const r=[];if(e.length>1e3){s=Zr._FIND_MATCH_NO_OVERVIEW_DECORATION;const a=this._editor.getModel().getLineCount(),c=this._editor.getLayoutInfo().height/a,d=Math.max(2,Math.ceil(3/c));let u=e[0].range.startLineNumber,h=e[0].range.endLineNumber;for(let f=1,g=e.length;f<g;f++){const p=e[f].range;h+d>=p.startLineNumber?p.endLineNumber>h&&(h=p.endLineNumber):(r.push({range:new M(u,1,h,1),options:Zr._FIND_MATCH_ONLY_OVERVIEW_DECORATION}),u=p.startLineNumber,h=p.endLineNumber)}r.push({range:new M(u,1,h,1),options:Zr._FIND_MATCH_ONLY_OVERVIEW_DECORATION})}const o=new Array(e.length);for(let a=0,l=e.length;a<l;a++)o[a]={range:e[a].range,options:s};this._decorations=i.deltaDecorations(this._decorations,o),this._overviewRulerApproximateDecorations=i.deltaDecorations(this._overviewRulerApproximateDecorations,r),this._rangeHighlightDecorationId&&(i.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),this._findScopeDecorationIds.length&&(this._findScopeDecorationIds.forEach(a=>i.removeDecoration(a)),this._findScopeDecorationIds=[]),t!=null&&t.length&&(this._findScopeDecorationIds=t.map(a=>i.addDecoration(a,Zr._FIND_SCOPE_DECORATION)))})}matchBeforePosition(e){if(this._decorations.length===0)return null;for(let t=this._decorations.length-1;t>=0;t--){const i=this._decorations[t],s=this._editor.getModel().getDecorationRange(i);if(!(!s||s.endLineNumber>e.lineNumber)){if(s.endLineNumber<e.lineNumber)return s;if(!(s.endColumn>e.column))return s}}return this._editor.getModel().getDecorationRange(this._decorations[this._decorations.length-1])}matchAfterPosition(e){if(this._decorations.length===0)return null;for(let t=0,i=this._decorations.length;t<i;t++){const s=this._decorations[t],r=this._editor.getModel().getDecorationRange(s);if(!(!r||r.startLineNumber<e.lineNumber)){if(r.startLineNumber>e.lineNumber)return r;if(!(r.startColumn<e.column))return r}}return this._editor.getModel().getDecorationRange(this._decorations[0])}_allDecorations(){let e=[];return e=e.concat(this._decorations),e=e.concat(this._overviewRulerApproximateDecorations),this._findScopeDecorationIds.length&&e.push(...this._findScopeDecorationIds),this._rangeHighlightDecorationId&&e.push(this._rangeHighlightDecorationId),e}};Zr._CURRENT_FIND_MATCH_DECORATION=_t.register({description:"current-find-match",stickiness:1,zIndex:13,className:"currentFindMatch",inlineClassName:"currentFindMatchInline",showIfCollapsed:!0,overviewRuler:{color:Dn(c8),position:Vl.Center},minimap:{color:Dn(CU),position:1}}),Zr._FIND_MATCH_DECORATION=_t.register({description:"find-match",stickiness:1,zIndex:10,className:"findMatch",inlineClassName:"findMatchInline",showIfCollapsed:!0,overviewRuler:{color:Dn(c8),position:Vl.Center},minimap:{color:Dn(CU),position:1}}),Zr._FIND_MATCH_NO_OVERVIEW_DECORATION=_t.register({description:"find-match-no-overview",stickiness:1,className:"findMatch",showIfCollapsed:!0}),Zr._FIND_MATCH_ONLY_OVERVIEW_DECORATION=_t.register({description:"find-match-only-overview",stickiness:1,overviewRuler:{color:Dn(c8),position:Vl.Center}}),Zr._RANGE_HIGHLIGHT_DECORATION=_t.register({description:"find-range-highlight",stickiness:1,className:"rangeHighlight",isWholeLine:!0}),Zr._FIND_SCOPE_DECORATION=_t.register({description:"find-scope",className:"findScope",isWholeLine:!0});let YK=Zr;class wvt{constructor(e,t,i){this._editorSelection=e,this._ranges=t,this._replaceStrings=i,this._trackedEditorSelectionId=null}getEditOperations(e,t){if(this._ranges.length>0){const i=[];for(let o=0;o<this._ranges.length;o++)i.push({range:this._ranges[o],text:this._replaceStrings[o]});i.sort((o,a)=>M.compareRangesUsingStarts(o.range,a.range));const s=[];let r=i[0];for(let o=1;o<i.length;o++)r.range.endLineNumber===i[o].range.startLineNumber&&r.range.endColumn===i[o].range.startColumn?(r.range=r.range.plusRange(i[o].range),r.text=r.text+i[o].text):(s.push(r),r=i[o]);s.push(r);for(const o of s)t.addEditOperation(o.range,o.text)}this._trackedEditorSelectionId=t.trackSelection(this._editorSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._trackedEditorSelectionId)}}function YLe(n,e){if(n&&n[0]!==""){const t=kue(n,e,"-"),i=kue(n,e,"_");return t&&!i?Eue(n,e,"-"):!t&&i?Eue(n,e,"_"):n[0].toUpperCase()===n[0]?e.toUpperCase():n[0].toLowerCase()===n[0]?e.toLowerCase():mKe(n[0][0])&&e.length>0?e[0].toUpperCase()+e.substr(1):n[0][0].toUpperCase()!==n[0][0]&&e.length>0?e[0].toLowerCase()+e.substr(1):e}else return e}function kue(n,e,t){return n[0].indexOf(t)!==-1&&e.indexOf(t)!==-1&&n[0].split(t).length===e.split(t).length}function Eue(n,e,t){const i=e.split(t),s=n[0].split(t);let r="";return i.forEach((o,a)=>{r+=YLe([s[a]],o)+t}),r.slice(0,-1)}class Iue{constructor(e){this.staticValue=e,this.kind=0}}class Cvt{constructor(e){this.pieces=e,this.kind=1}}class ax{static fromStaticValue(e){return new ax([Xb.staticValue(e)])}get hasReplacementPatterns(){return this._state.kind===1}constructor(e){!e||e.length===0?this._state=new Iue(""):e.length===1&&e[0].staticValue!==null?this._state=new Iue(e[0].staticValue):this._state=new Cvt(e)}buildReplaceString(e,t){if(this._state.kind===0)return t?YLe(e,this._state.staticValue):this._state.staticValue;let i="";for(let s=0,r=this._state.pieces.length;s<r;s++){const o=this._state.pieces[s];if(o.staticValue!==null){i+=o.staticValue;continue}let a=ax._substitute(o.matchIndex,e);if(o.caseOps!==null&&o.caseOps.length>0){const l=[],c=o.caseOps.length;let d=0;for(let u=0,h=a.length;u<h;u++){if(d>=c){l.push(a.slice(u));break}switch(o.caseOps[d]){case"U":l.push(a[u].toUpperCase());break;case"u":l.push(a[u].toUpperCase()),d++;break;case"L":l.push(a[u].toLowerCase());break;case"l":l.push(a[u].toLowerCase()),d++;break;default:l.push(a[u])}}a=l.join("")}i+=a}return i}static _substitute(e,t){if(t===null)return"";if(e===0)return t[0];let i="";for(;e>0;){if(e<t.length)return(t[e]||"")+i;i=String(e%10)+i,e=Math.floor(e/10)}return"$"+i}}class Xb{static staticValue(e){return new Xb(e,-1,null)}static caseOps(e,t){return new Xb(null,e,t)}constructor(e,t,i){this.staticValue=e,this.matchIndex=t,!i||i.length===0?this.caseOps=null:this.caseOps=i.slice(0)}}class yvt{constructor(e){this._source=e,this._lastCharIndex=0,this._result=[],this._resultLen=0,this._currentStaticPiece=""}emitUnchanged(e){this._emitStatic(this._source.substring(this._lastCharIndex,e)),this._lastCharIndex=e}emitStatic(e,t){this._emitStatic(e),this._lastCharIndex=t}_emitStatic(e){e.length!==0&&(this._currentStaticPiece+=e)}emitMatchIndex(e,t,i){this._currentStaticPiece.length!==0&&(this._result[this._resultLen++]=Xb.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),this._result[this._resultLen++]=Xb.caseOps(e,i),this._lastCharIndex=t}finalize(){return this.emitUnchanged(this._source.length),this._currentStaticPiece.length!==0&&(this._result[this._resultLen++]=Xb.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),new ax(this._result)}}function Svt(n){if(!n||n.length===0)return new ax(null);const e=[],t=new yvt(n);for(let i=0,s=n.length;i<s;i++){const r=n.charCodeAt(i);if(r===92){if(i++,i>=s)break;const o=n.charCodeAt(i);switch(o){case 92:t.emitUnchanged(i-1),t.emitStatic("\\",i+1);break;case 110:t.emitUnchanged(i-1),t.emitStatic(`
`,i+1);break;case 116:t.emitUnchanged(i-1),t.emitStatic("	",i+1);break;case 117:case 85:case 108:case 76:t.emitUnchanged(i-1),t.emitStatic("",i+1),e.push(String.fromCharCode(o));break}continue}if(r===36){if(i++,i>=s)break;const o=n.charCodeAt(i);if(o===36){t.emitUnchanged(i-1),t.emitStatic("$",i+1);continue}if(o===48||o===38){t.emitUnchanged(i-1),t.emitMatchIndex(0,i+1,e),e.length=0;continue}if(49<=o&&o<=57){let a=o-48;if(i+1<s){const l=n.charCodeAt(i+1);if(48<=l&&l<=57){i++,a=a*10+(l-48),t.emitUnchanged(i-2),t.emitMatchIndex(a,i+1,e),e.length=0;continue}}t.emitUnchanged(i-1),t.emitMatchIndex(a,i+1,e),e.length=0;continue}}}return t.finalize()}const mp=new Re("findWidgetVisible",!1);mp.toNegated();const rW=new Re("findInputFocussed",!1),tee=new Re("replaceInputFocussed",!1),LA={primary:545,mac:{primary:2593}},kA={primary:565,mac:{primary:2613}},EA={primary:560,mac:{primary:2608}},IA={primary:554,mac:{primary:2602}},DA={primary:558,mac:{primary:2606}},Ki={StartFindAction:"actions.find",StartFindWithSelection:"actions.findWithSelection",StartFindWithArgs:"editor.actions.findWithArgs",NextMatchFindAction:"editor.action.nextMatchFindAction",PreviousMatchFindAction:"editor.action.previousMatchFindAction",GoToMatchFindAction:"editor.action.goToMatchFindAction",NextSelectionMatchFindAction:"editor.action.nextSelectionMatchFindAction",PreviousSelectionMatchFindAction:"editor.action.previousSelectionMatchFindAction",StartFindReplaceAction:"editor.action.startFindReplaceAction",CloseFindWidgetCommand:"closeFindWidget",ToggleCaseSensitiveCommand:"toggleFindCaseSensitive",ToggleWholeWordCommand:"toggleFindWholeWord",ToggleRegexCommand:"toggleFindRegex",ToggleSearchScopeCommand:"toggleFindInSelection",TogglePreserveCaseCommand:"togglePreserveCase",ReplaceOneAction:"editor.action.replaceOne",ReplaceAllAction:"editor.action.replaceAll",SelectAllMatchesAction:"editor.action.selectAllMatches"},Rm=19999,xvt=240;class SE{constructor(e,t){this._toDispose=new ue,this._editor=e,this._state=t,this._isDisposed=!1,this._startSearchingTimer=new Fd,this._decorations=new YK(e),this._toDispose.add(this._decorations),this._updateDecorationsScheduler=new yi(()=>{if(this._editor.hasModel())return this.research(!1)},100),this._toDispose.add(this._updateDecorationsScheduler),this._toDispose.add(this._editor.onDidChangeCursorPosition(i=>{(i.reason===3||i.reason===5||i.reason===6)&&this._decorations.setStartPosition(this._editor.getPosition())})),this._ignoreModelContentChanged=!1,this._toDispose.add(this._editor.onDidChangeModelContent(i=>{this._ignoreModelContentChanged||(i.isFlush&&this._decorations.reset(),this._decorations.setStartPosition(this._editor.getPosition()),this._updateDecorationsScheduler.schedule())})),this._toDispose.add(this._state.onFindReplaceStateChange(i=>this._onStateChanged(i))),this.research(!1,this._state.searchScope)}dispose(){this._isDisposed=!0,Ti(this._startSearchingTimer),this._toDispose.dispose()}_onStateChanged(e){this._isDisposed||this._editor.hasModel()&&(e.searchString||e.isReplaceRevealed||e.isRegex||e.wholeWord||e.matchCase||e.searchScope)&&(this._editor.getModel().isTooLargeForSyncing()?(this._startSearchingTimer.cancel(),this._startSearchingTimer.setIfNotSet(()=>{e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor)},xvt)):e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor))}static _getSearchRange(e,t){return t||e.getFullModelRange()}research(e,t){let i=null;typeof t<"u"?t!==null&&(Array.isArray(t)?i=t:i=[t]):i=this._decorations.getFindScopes(),i!==null&&(i=i.map(a=>{if(a.startLineNumber!==a.endLineNumber){let l=a.endLineNumber;return a.endColumn===1&&(l=l-1),new M(a.startLineNumber,1,l,this._editor.getModel().getLineMaxColumn(l))}return a}));const s=this._findMatches(i,!1,Rm);this._decorations.set(s,i);const r=this._editor.getSelection();let o=this._decorations.getCurrentMatchesPosition(r);if(o===0&&s.length>0){const a=UI(s.map(l=>l.range),l=>M.compareRangesUsingStarts(l,r)>=0);o=a>0?a-1+1:o}this._state.changeMatchInfo(o,this._decorations.getCount(),void 0),e&&this._editor.getOption(41).cursorMoveOnType&&this._moveToNextMatch(this._decorations.getStartPosition())}_hasMatches(){return this._state.matchesCount>0}_cannotFind(){if(!this._hasMatches()){const e=this._decorations.getFindScope();return e&&this._editor.revealRangeInCenterIfOutsideViewport(e,0),!0}return!1}_setCurrentFindMatch(e){const t=this._decorations.setCurrentFindMatch(e);this._state.changeMatchInfo(t,this._decorations.getCount(),e),this._editor.setSelection(e),this._editor.revealRangeInCenterIfOutsideViewport(e,0)}_prevSearchPosition(e){const t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0);let{lineNumber:i,column:s}=e;const r=this._editor.getModel();return t||s===1?(i===1?i=r.getLineCount():i--,s=r.getLineMaxColumn(i)):s--,new Y(i,s)}_moveToPrevMatch(e,t=!1){if(!this._state.canNavigateBack()){const d=this._decorations.matchAfterPosition(e);d&&this._setCurrentFindMatch(d);return}if(this._decorations.getCount()<Rm){let d=this._decorations.matchBeforePosition(e);d&&d.isEmpty()&&d.getStartPosition().equals(e)&&(e=this._prevSearchPosition(e),d=this._decorations.matchBeforePosition(e)),d&&this._setCurrentFindMatch(d);return}if(this._cannotFind())return;const i=this._decorations.getFindScope(),s=SE._getSearchRange(this._editor.getModel(),i);s.getEndPosition().isBefore(e)&&(e=s.getEndPosition()),e.isBefore(s.getStartPosition())&&(e=s.getEndPosition());const{lineNumber:r,column:o}=e,a=this._editor.getModel();let l=new Y(r,o),c=a.findPreviousMatch(this._state.searchString,l,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(132):null,!1);if(c&&c.range.isEmpty()&&c.range.getStartPosition().equals(l)&&(l=this._prevSearchPosition(l),c=a.findPreviousMatch(this._state.searchString,l,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(132):null,!1)),!!c){if(!t&&!s.containsRange(c.range))return this._moveToPrevMatch(c.range.getStartPosition(),!0);this._setCurrentFindMatch(c.range)}}moveToPrevMatch(){this._moveToPrevMatch(this._editor.getSelection().getStartPosition())}_nextSearchPosition(e){const t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0);let{lineNumber:i,column:s}=e;const r=this._editor.getModel();return t||s===r.getLineMaxColumn(i)?(i===r.getLineCount()?i=1:i++,s=1):s++,new Y(i,s)}_moveToNextMatch(e){if(!this._state.canNavigateForward()){const i=this._decorations.matchBeforePosition(e);i&&this._setCurrentFindMatch(i);return}if(this._decorations.getCount()<Rm){let i=this._decorations.matchAfterPosition(e);i&&i.isEmpty()&&i.getStartPosition().equals(e)&&(e=this._nextSearchPosition(e),i=this._decorations.matchAfterPosition(e)),i&&this._setCurrentFindMatch(i);return}const t=this._getNextMatch(e,!1,!0);t&&this._setCurrentFindMatch(t.range)}_getNextMatch(e,t,i,s=!1){if(this._cannotFind())return null;const r=this._decorations.getFindScope(),o=SE._getSearchRange(this._editor.getModel(),r);o.getEndPosition().isBefore(e)&&(e=o.getStartPosition()),e.isBefore(o.getStartPosition())&&(e=o.getStartPosition());const{lineNumber:a,column:l}=e,c=this._editor.getModel();let d=new Y(a,l),u=c.findNextMatch(this._state.searchString,d,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(132):null,t);return i&&u&&u.range.isEmpty()&&u.range.getStartPosition().equals(d)&&(d=this._nextSearchPosition(d),u=c.findNextMatch(this._state.searchString,d,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(132):null,t)),u?!s&&!o.containsRange(u.range)?this._getNextMatch(u.range.getEndPosition(),t,i,!0):u:null}moveToNextMatch(){this._moveToNextMatch(this._editor.getSelection().getEndPosition())}_moveToMatch(e){const t=this._decorations.getDecorationRangeAt(e);t&&this._setCurrentFindMatch(t)}moveToMatch(e){this._moveToMatch(e)}_getReplacePattern(){return this._state.isRegex?Svt(this._state.replaceString):ax.fromStaticValue(this._state.replaceString)}replace(){if(!this._hasMatches())return;const e=this._getReplacePattern(),t=this._editor.getSelection(),i=this._getNextMatch(t.getStartPosition(),!0,!1);if(i)if(t.equalsRange(i.range)){const s=e.buildReplaceString(i.matches,this._state.preserveCase),r=new mr(t,s);this._executeEditorCommand("replace",r),this._decorations.setStartPosition(new Y(t.startLineNumber,t.startColumn+s.length)),this.research(!0)}else this._decorations.setStartPosition(this._editor.getPosition()),this._setCurrentFindMatch(i.range)}_findMatches(e,t,i){const s=(e||[null]).map(r=>SE._getSearchRange(this._editor.getModel(),r));return this._editor.getModel().findMatches(this._state.searchString,s,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(132):null,t,i)}replaceAll(){if(!this._hasMatches())return;const e=this._decorations.getFindScopes();e===null&&this._state.matchesCount>=Rm?this._largeReplaceAll():this._regularReplaceAll(e),this.research(!1)}_largeReplaceAll(){const t=new $v(this._state.searchString,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(132):null).parseSearchRequest();if(!t)return;let i=t.regex;if(!i.multiline){let u="mu";i.ignoreCase&&(u+="i"),i.global&&(u+="g"),i=new RegExp(i.source,u)}const s=this._editor.getModel(),r=s.getValue(1),o=s.getFullModelRange(),a=this._getReplacePattern();let l;const c=this._state.preserveCase;a.hasReplacementPatterns||c?l=r.replace(i,function(){return a.buildReplaceString(arguments,c)}):l=r.replace(i,a.buildReplaceString(null,c));const d=new XQ(o,l,this._editor.getSelection());this._executeEditorCommand("replaceAll",d)}_regularReplaceAll(e){const t=this._getReplacePattern(),i=this._findMatches(e,t.hasReplacementPatterns||this._state.preserveCase,1073741824),s=[];for(let o=0,a=i.length;o<a;o++)s[o]=t.buildReplaceString(i[o].matches,this._state.preserveCase);const r=new wvt(this._editor.getSelection(),i.map(o=>o.range),s);this._executeEditorCommand("replaceAll",r)}selectAllMatches(){if(!this._hasMatches())return;const e=this._decorations.getFindScopes();let i=this._findMatches(e,!1,1073741824).map(r=>new $e(r.range.startLineNumber,r.range.startColumn,r.range.endLineNumber,r.range.endColumn));const s=this._editor.getSelection();for(let r=0,o=i.length;r<o;r++)if(i[r].equalsRange(s)){i=[s].concat(i.slice(0,r)).concat(i.slice(r+1));break}this._editor.setSelections(i)}_executeEditorCommand(e,t){try{this._ignoreModelContentChanged=!0,this._editor.pushUndoStop(),this._editor.executeCommand(e,t),this._editor.pushUndoStop()}finally{this._ignoreModelContentChanged=!1}}}const r5=class r5 extends Xl{constructor(e,t,i){super(),this._hideSoon=this._register(new yi(()=>this._hide(),2e3)),this._isVisible=!1,this._editor=e,this._state=t,this._keybindingService=i,this._domNode=document.createElement("div"),this._domNode.className="findOptionsWidget",this._domNode.style.display="none",this._domNode.style.top="10px",this._domNode.style.zIndex="12",this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true");const s={inputActiveOptionBorder:Me(cB),inputActiveOptionForeground:Me(dB),inputActiveOptionBackground:Me(HN)},r=this._register(US());this.caseSensitive=this._register(new Mye({appendTitle:this._keybindingLabelFor(Ki.ToggleCaseSensitiveCommand),isChecked:this._state.matchCase,hoverDelegate:r,...s})),this._domNode.appendChild(this.caseSensitive.domNode),this._register(this.caseSensitive.onChange(()=>{this._state.change({matchCase:this.caseSensitive.checked},!1)})),this.wholeWords=this._register(new Pye({appendTitle:this._keybindingLabelFor(Ki.ToggleWholeWordCommand),isChecked:this._state.wholeWord,hoverDelegate:r,...s})),this._domNode.appendChild(this.wholeWords.domNode),this._register(this.wholeWords.onChange(()=>{this._state.change({wholeWord:this.wholeWords.checked},!1)})),this.regex=this._register(new Oye({appendTitle:this._keybindingLabelFor(Ki.ToggleRegexCommand),isChecked:this._state.isRegex,hoverDelegate:r,...s})),this._domNode.appendChild(this.regex.domNode),this._register(this.regex.onChange(()=>{this._state.change({isRegex:this.regex.checked},!1)})),this._editor.addOverlayWidget(this),this._register(this._state.onFindReplaceStateChange(o=>{let a=!1;o.isRegex&&(this.regex.checked=this._state.isRegex,a=!0),o.wholeWord&&(this.wholeWords.checked=this._state.wholeWord,a=!0),o.matchCase&&(this.caseSensitive.checked=this._state.matchCase,a=!0),!this._state.isRevealed&&a&&this._revealTemporarily()})),this._register(re(this._domNode,Se.MOUSE_LEAVE,o=>this._onMouseLeave())),this._register(re(this._domNode,"mouseover",o=>this._onMouseOver()))}_keybindingLabelFor(e){const t=this._keybindingService.lookupKeybinding(e);return t?` (${t.getLabel()})`:""}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return r5.ID}getDomNode(){return this._domNode}getPosition(){return{preference:0}}highlightFindOptions(){this._revealTemporarily()}_revealTemporarily(){this._show(),this._hideSoon.schedule()}_onMouseLeave(){this._hideSoon.schedule()}_onMouseOver(){this._hideSoon.cancel()}_show(){this._isVisible||(this._isVisible=!0,this._domNode.style.display="block")}_hide(){this._isVisible&&(this._isVisible=!1,this._domNode.style.display="none")}};r5.ID="editor.contrib.findOptionsWidget";let ZK=r5;function NA(n,e){return n===1?!0:n===2?!1:e}class Lvt extends ee{get searchString(){return this._searchString}get replaceString(){return this._replaceString}get isRevealed(){return this._isRevealed}get isReplaceRevealed(){return this._isReplaceRevealed}get isRegex(){return NA(this._isRegexOverride,this._isRegex)}get wholeWord(){return NA(this._wholeWordOverride,this._wholeWord)}get matchCase(){return NA(this._matchCaseOverride,this._matchCase)}get preserveCase(){return NA(this._preserveCaseOverride,this._preserveCase)}get actualIsRegex(){return this._isRegex}get actualWholeWord(){return this._wholeWord}get actualMatchCase(){return this._matchCase}get actualPreserveCase(){return this._preserveCase}get searchScope(){return this._searchScope}get matchesPosition(){return this._matchesPosition}get matchesCount(){return this._matchesCount}get currentMatch(){return this._currentMatch}constructor(){super(),this._onFindReplaceStateChange=this._register(new X),this.onFindReplaceStateChange=this._onFindReplaceStateChange.event,this._searchString="",this._replaceString="",this._isRevealed=!1,this._isReplaceRevealed=!1,this._isRegex=!1,this._isRegexOverride=0,this._wholeWord=!1,this._wholeWordOverride=0,this._matchCase=!1,this._matchCaseOverride=0,this._preserveCase=!1,this._preserveCaseOverride=0,this._searchScope=null,this._matchesPosition=0,this._matchesCount=0,this._currentMatch=null,this._loop=!0,this._isSearching=!1,this._filters=null}changeMatchInfo(e,t,i){const s={moveCursor:!1,updateHistory:!1,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1,isSearching:!1,filters:!1};let r=!1;t===0&&(e=0),e>t&&(e=t),this._matchesPosition!==e&&(this._matchesPosition=e,s.matchesPosition=!0,r=!0),this._matchesCount!==t&&(this._matchesCount=t,s.matchesCount=!0,r=!0),typeof i<"u"&&(M.equalsRange(this._currentMatch,i)||(this._currentMatch=i,s.currentMatch=!0,r=!0)),r&&this._onFindReplaceStateChange.fire(s)}change(e,t,i=!0){var d;const s={moveCursor:t,updateHistory:i,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1,isSearching:!1,filters:!1};let r=!1;const o=this.isRegex,a=this.wholeWord,l=this.matchCase,c=this.preserveCase;typeof e.searchString<"u"&&this._searchString!==e.searchString&&(this._searchString=e.searchString,s.searchString=!0,r=!0),typeof e.replaceString<"u"&&this._replaceString!==e.replaceString&&(this._replaceString=e.replaceString,s.replaceString=!0,r=!0),typeof e.isRevealed<"u"&&this._isRevealed!==e.isRevealed&&(this._isRevealed=e.isRevealed,s.isRevealed=!0,r=!0),typeof e.isReplaceRevealed<"u"&&this._isReplaceRevealed!==e.isReplaceRevealed&&(this._isReplaceRevealed=e.isReplaceRevealed,s.isReplaceRevealed=!0,r=!0),typeof e.isRegex<"u"&&(this._isRegex=e.isRegex),typeof e.wholeWord<"u"&&(this._wholeWord=e.wholeWord),typeof e.matchCase<"u"&&(this._matchCase=e.matchCase),typeof e.preserveCase<"u"&&(this._preserveCase=e.preserveCase),typeof e.searchScope<"u"&&((d=e.searchScope)!=null&&d.every(u=>{var h;return(h=this._searchScope)==null?void 0:h.some(f=>!M.equalsRange(f,u))})||(this._searchScope=e.searchScope,s.searchScope=!0,r=!0)),typeof e.loop<"u"&&this._loop!==e.loop&&(this._loop=e.loop,s.loop=!0,r=!0),typeof e.isSearching<"u"&&this._isSearching!==e.isSearching&&(this._isSearching=e.isSearching,s.isSearching=!0,r=!0),typeof e.filters<"u"&&(this._filters?this._filters.update(e.filters):this._filters=e.filters,s.filters=!0,r=!0),this._isRegexOverride=typeof e.isRegexOverride<"u"?e.isRegexOverride:0,this._wholeWordOverride=typeof e.wholeWordOverride<"u"?e.wholeWordOverride:0,this._matchCaseOverride=typeof e.matchCaseOverride<"u"?e.matchCaseOverride:0,this._preserveCaseOverride=typeof e.preserveCaseOverride<"u"?e.preserveCaseOverride:0,o!==this.isRegex&&(r=!0,s.isRegex=!0),a!==this.wholeWord&&(r=!0,s.wholeWord=!0),l!==this.matchCase&&(r=!0,s.matchCase=!0),c!==this.preserveCase&&(r=!0,s.preserveCase=!0),r&&this._onFindReplaceStateChange.fire(s)}canNavigateBack(){return this.canNavigateInLoop()||this.matchesPosition!==1}canNavigateForward(){return this.canNavigateInLoop()||this.matchesPosition<this.matchesCount}canNavigateInLoop(){return this._loop||this.matchesCount>=Rm}}const kvt=v("defaultLabel","input"),Evt=v("label.preserveCaseToggle","Preserve Case");class Ivt extends Hx{constructor(e){super({icon:ye.preserveCase,title:Evt+e.appendTitle,isChecked:e.isChecked,hoverDelegate:e.hoverDelegate??Vo("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class Dvt extends Xl{constructor(e,t,i,s){super(),this._showOptionButtons=i,this.fixFocusOnOptionClickEnabled=!0,this.cachedOptionsWidth=0,this._onDidOptionChange=this._register(new X),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new X),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new X),this._onInput=this._register(new X),this._onKeyUp=this._register(new X),this._onPreserveCaseKeyDown=this._register(new X),this.onPreserveCaseKeyDown=this._onPreserveCaseKeyDown.event,this.contextViewProvider=t,this.placeholder=s.placeholder||"",this.validation=s.validation,this.label=s.label||kvt;const r=s.appendPreserveCaseLabel||"",o=s.history||[],a=!!s.flexibleHeight,l=!!s.flexibleWidth,c=s.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new Fye(this.domNode,this.contextViewProvider,{ariaLabel:this.label||"",placeholder:this.placeholder||"",validationOptions:{validation:this.validation},history:o,showHistoryHint:s.showHistoryHint,flexibleHeight:a,flexibleWidth:l,flexibleMaxHeight:c,inputBoxStyles:s.inputBoxStyles})),this.preserveCase=this._register(new Ivt({appendTitle:r,isChecked:!1,...s.toggleStyles})),this._register(this.preserveCase.onChange(h=>{this._onDidOptionChange.fire(h),!h&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.preserveCase.onKeyDown(h=>{this._onPreserveCaseKeyDown.fire(h)})),this._showOptionButtons?this.cachedOptionsWidth=this.preserveCase.width():this.cachedOptionsWidth=0;const d=[this.preserveCase.domNode];this.onkeydown(this.domNode,h=>{if(h.equals(15)||h.equals(17)||h.equals(9)){const f=d.indexOf(this.domNode.ownerDocument.activeElement);if(f>=0){let g=-1;h.equals(17)?g=(f+1)%d.length:h.equals(15)&&(f===0?g=d.length-1:g=f-1),h.equals(9)?(d[f].blur(),this.inputBox.focus()):g>=0&&d[g].focus(),$t.stop(h,!0)}}});const u=document.createElement("div");u.className="controls",u.style.display=this._showOptionButtons?"block":"none",u.appendChild(this.preserveCase.domNode),this.domNode.appendChild(u),e==null||e.appendChild(this.domNode),this.onkeydown(this.inputBox.inputElement,h=>this._onKeyDown.fire(h)),this.onkeyup(this.inputBox.inputElement,h=>this._onKeyUp.fire(h)),this.oninput(this.inputBox.inputElement,h=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,h=>this._onMouseDown.fire(h))}enable(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.preserveCase.enable()}disable(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.preserveCase.disable()}setEnabled(e){e?this.enable():this.disable()}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getPreserveCase(){return this.preserveCase.checked}setPreserveCase(e){this.preserveCase.checked=e}focusOnPreserve(){this.preserveCase.focus()}validate(){var e;(e=this.inputBox)==null||e.validate()}set width(e){this.inputBox.paddingRight=this.cachedOptionsWidth,this.domNode.style.width=e+"px"}dispose(){super.dispose()}}var ZLe=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},XLe=function(n,e){return function(t,i){e(t,i,n)}};const iee=new Re("suggestWidgetVisible",!1,v("suggestWidgetVisible","Whether suggestion are visible")),nee="historyNavigationWidgetFocus",QLe="historyNavigationForwardsEnabled",JLe="historyNavigationBackwardsEnabled";let Og;const TA=[];function eke(n,e){if(TA.includes(e))throw new Error("Cannot register the same widget multiple times");TA.push(e);const t=new ue,i=new Re(nee,!1).bindTo(n),s=new Re(QLe,!0).bindTo(n),r=new Re(JLe,!0).bindTo(n),o=()=>{i.set(!0),Og=e},a=()=>{i.set(!1),Og===e&&(Og=void 0)};return z3(e.element)&&o(),t.add(e.onDidFocus(()=>o())),t.add(e.onDidBlur(()=>a())),t.add(Ye(()=>{TA.splice(TA.indexOf(e),1),a()})),{historyNavigationForwardsEnablement:s,historyNavigationBackwardsEnablement:r,dispose(){t.dispose()}}}let XK=class extends Bye{constructor(e,t,i,s){super(e,t,i);const r=this._register(s.createScoped(this.inputBox.element));this._register(eke(r,this.inputBox))}};XK=ZLe([XLe(3,at)],XK);let QK=class extends Dvt{constructor(e,t,i,s,r=!1){super(e,t,r,i);const o=this._register(s.createScoped(this.inputBox.element));this._register(eke(o,this.inputBox))}};QK=ZLe([XLe(3,at)],QK);Fo.registerCommandAndKeybindingRule({id:"history.showPrevious",weight:200,when:he.and(he.has(nee),he.equals(JLe,!0),he.not("isComposing"),iee.isEqualTo(!1)),primary:16,secondary:[528],handler:n=>{Og==null||Og.showPreviousValue()}});Fo.registerCommandAndKeybindingRule({id:"history.showNext",weight:200,when:he.and(he.has(nee),he.equals(QLe,!0),he.not("isComposing"),iee.isEqualTo(!1)),primary:18,secondary:[530],handler:n=>{Og==null||Og.showNextValue()}});function Due(n){var e,t;return((e=n.lookupKeybinding("history.showPrevious"))==null?void 0:e.getElectronAccelerator())==="Up"&&((t=n.lookupKeybinding("history.showNext"))==null?void 0:t.getElectronAccelerator())==="Down"}const Nue=Xi("find-collapsed",ye.chevronRight,v("findCollapsedIcon","Icon to indicate that the editor find widget is collapsed.")),Tue=Xi("find-expanded",ye.chevronDown,v("findExpandedIcon","Icon to indicate that the editor find widget is expanded.")),Nvt=Xi("find-selection",ye.selection,v("findSelectionIcon","Icon for 'Find in Selection' in the editor find widget.")),Tvt=Xi("find-replace",ye.replace,v("findReplaceIcon","Icon for 'Replace' in the editor find widget.")),Rvt=Xi("find-replace-all",ye.replaceAll,v("findReplaceAllIcon","Icon for 'Replace All' in the editor find widget.")),Avt=Xi("find-previous-match",ye.arrowUp,v("findPreviousMatchIcon","Icon for 'Find Previous' in the editor find widget.")),Mvt=Xi("find-next-match",ye.arrowDown,v("findNextMatchIcon","Icon for 'Find Next' in the editor find widget.")),Pvt=v("label.findDialog","Find / Replace"),Ovt=v("label.find","Find"),Fvt=v("placeholder.find","Find"),Bvt=v("label.previousMatchButton","Previous Match"),Wvt=v("label.nextMatchButton","Next Match"),Hvt=v("label.toggleSelectionFind","Find in Selection"),Vvt=v("label.closeButton","Close"),zvt=v("label.replace","Replace"),Uvt=v("placeholder.replace","Replace"),$vt=v("label.replaceButton","Replace"),jvt=v("label.replaceAllButton","Replace All"),Kvt=v("label.toggleReplaceButton","Toggle Replace"),qvt=v("title.matchesCountLimit","Only the first {0} results are highlighted, but all find operations work on the entire text.",Rm),Gvt=v("label.matchesLocation","{0} of {1}"),Rue=v("label.noResults","No results"),ah=419,Yvt=275,Zvt=Yvt-54;let XL=69;const Xvt=33,Aue="ctrlEnterReplaceAll.windows.donotask",Mue=Bt?256:2048;class g6{constructor(e){this.afterLineNumber=e,this.heightInPx=Xvt,this.suppressMouseDown=!1,this.domNode=document.createElement("div"),this.domNode.className="dock-find-viewzone"}}function Pue(n,e,t){const i=!!e.match(/\n/);if(t&&i&&t.selectionStart>0){n.stopPropagation();return}}function Oue(n,e,t){const i=!!e.match(/\n/);if(t&&i&&t.selectionEnd<t.value.length){n.stopPropagation();return}}const o5=class o5 extends Xl{constructor(e,t,i,s,r,o,a,l,c,d){super(),this._hoverService=d,this._cachedHeight=null,this._revealTimeouts=[],this._codeEditor=e,this._controller=t,this._state=i,this._contextViewProvider=s,this._keybindingService=r,this._contextKeyService=o,this._storageService=l,this._notificationService=c,this._ctrlEnterReplaceAllWarningPrompted=!!l.getBoolean(Aue,0),this._isVisible=!1,this._isReplaceVisible=!1,this._ignoreChangeEvent=!1,this._updateHistoryDelayer=new Rc(500),this._register(Ye(()=>this._updateHistoryDelayer.cancel())),this._register(this._state.onFindReplaceStateChange(u=>this._onStateChanged(u))),this._buildDomNode(),this._updateButtons(),this._tryUpdateWidgetWidth(),this._findInput.inputBox.layout(),this._register(this._codeEditor.onDidChangeConfiguration(u=>{if(u.hasChanged(92)&&(this._codeEditor.getOption(92)&&this._state.change({isReplaceRevealed:!1},!1),this._updateButtons()),u.hasChanged(146)&&this._tryUpdateWidgetWidth(),u.hasChanged(2)&&this.updateAccessibilitySupport(),u.hasChanged(41)){const h=this._codeEditor.getOption(41).loop;this._state.change({loop:h},!1);const f=this._codeEditor.getOption(41).addExtraSpaceOnTop;f&&!this._viewZone&&(this._viewZone=new g6(0),this._showViewZone()),!f&&this._viewZone&&this._removeViewZone()}})),this.updateAccessibilitySupport(),this._register(this._codeEditor.onDidChangeCursorSelection(()=>{this._isVisible&&this._updateToggleSelectionFindButton()})),this._register(this._codeEditor.onDidFocusEditorWidget(async()=>{if(this._isVisible){const u=await this._controller.getGlobalBufferTerm();u&&u!==this._state.searchString&&(this._state.change({searchString:u},!1),this._findInput.select())}})),this._findInputFocused=rW.bindTo(o),this._findFocusTracker=this._register(Hu(this._findInput.inputBox.inputElement)),this._register(this._findFocusTracker.onDidFocus(()=>{this._findInputFocused.set(!0),this._updateSearchScope()})),this._register(this._findFocusTracker.onDidBlur(()=>{this._findInputFocused.set(!1)})),this._replaceInputFocused=tee.bindTo(o),this._replaceFocusTracker=this._register(Hu(this._replaceInput.inputBox.inputElement)),this._register(this._replaceFocusTracker.onDidFocus(()=>{this._replaceInputFocused.set(!0),this._updateSearchScope()})),this._register(this._replaceFocusTracker.onDidBlur(()=>{this._replaceInputFocused.set(!1)})),this._codeEditor.addOverlayWidget(this),this._codeEditor.getOption(41).addExtraSpaceOnTop&&(this._viewZone=new g6(0)),this._register(this._codeEditor.onDidChangeModel(()=>{this._isVisible&&(this._viewZoneId=void 0)})),this._register(this._codeEditor.onDidScrollChange(u=>{if(u.scrollTopChanged){this._layoutViewZone();return}setTimeout(()=>{this._layoutViewZone()},0)}))}getId(){return o5.ID}getDomNode(){return this._domNode}getPosition(){return this._isVisible?{preference:0}:null}_onStateChanged(e){if(e.searchString){try{this._ignoreChangeEvent=!0,this._findInput.setValue(this._state.searchString)}finally{this._ignoreChangeEvent=!1}this._updateButtons()}if(e.replaceString&&(this._replaceInput.inputBox.value=this._state.replaceString),e.isRevealed&&(this._state.isRevealed?this._reveal():this._hide(!0)),e.isReplaceRevealed&&(this._state.isReplaceRevealed?!this._codeEditor.getOption(92)&&!this._isReplaceVisible&&(this._isReplaceVisible=!0,this._replaceInput.width=Pa(this._findInput.domNode),this._updateButtons(),this._replaceInput.inputBox.layout()):this._isReplaceVisible&&(this._isReplaceVisible=!1,this._updateButtons())),(e.isRevealed||e.isReplaceRevealed)&&(this._state.isRevealed||this._state.isReplaceRevealed)&&this._tryUpdateHeight()&&this._showViewZone(),e.isRegex&&this._findInput.setRegex(this._state.isRegex),e.wholeWord&&this._findInput.setWholeWords(this._state.wholeWord),e.matchCase&&this._findInput.setCaseSensitive(this._state.matchCase),e.preserveCase&&this._replaceInput.setPreserveCase(this._state.preserveCase),e.searchScope&&(this._state.searchScope?this._toggleSelectionFind.checked=!0:this._toggleSelectionFind.checked=!1,this._updateToggleSelectionFindButton()),e.searchString||e.matchesCount||e.matchesPosition){const t=this._state.searchString.length>0&&this._state.matchesCount===0;this._domNode.classList.toggle("no-results",t),this._updateMatchesCount(),this._updateButtons()}(e.searchString||e.currentMatch)&&this._layoutViewZone(),e.updateHistory&&this._delayedUpdateHistory(),e.loop&&this._updateButtons()}_delayedUpdateHistory(){this._updateHistoryDelayer.trigger(this._updateHistory.bind(this)).then(void 0,pt)}_updateHistory(){this._state.searchString&&this._findInput.inputBox.addToHistory(),this._state.replaceString&&this._replaceInput.inputBox.addToHistory()}_updateMatchesCount(){var t;this._matchesCount.style.minWidth=XL+"px",this._state.matchesCount>=Rm?this._matchesCount.title=qvt:this._matchesCount.title="",(t=this._matchesCount.firstChild)==null||t.remove();let e;if(this._state.matchesCount>0){let i=String(this._state.matchesCount);this._state.matchesCount>=Rm&&(i+="+");let s=String(this._state.matchesPosition);s==="0"&&(s="?"),e=a0(Gvt,s,i)}else e=Rue;this._matchesCount.appendChild(document.createTextNode(e)),Bo(this._getAriaLabel(e,this._state.currentMatch,this._state.searchString)),XL=Math.max(XL,this._matchesCount.clientWidth)}_getAriaLabel(e,t,i){if(e===Rue)return i===""?v("ariaSearchNoResultEmpty","{0} found",e):v("ariaSearchNoResult","{0} found for '{1}'",e,i);if(t){const s=v("ariaSearchNoResultWithLineNum","{0} found for '{1}', at {2}",e,i,t.startLineNumber+":"+t.startColumn),r=this._codeEditor.getModel();return r&&t.startLineNumber<=r.getLineCount()&&t.startLineNumber>=1?`${r.getLineContent(t.startLineNumber)}, ${s}`:s}return v("ariaSearchNoResultWithLineNumNoCurrentMatch","{0} found for '{1}'",e,i)}_updateToggleSelectionFindButton(){const e=this._codeEditor.getSelection(),t=e?e.startLineNumber!==e.endLineNumber||e.startColumn!==e.endColumn:!1,i=this._toggleSelectionFind.checked;this._isVisible&&(i||t)?this._toggleSelectionFind.enable():this._toggleSelectionFind.disable()}_updateButtons(){this._findInput.setEnabled(this._isVisible),this._replaceInput.setEnabled(this._isVisible&&this._isReplaceVisible),this._updateToggleSelectionFindButton(),this._closeBtn.setEnabled(this._isVisible);const e=this._state.searchString.length>0,t=!!this._state.matchesCount;this._prevBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateBack()),this._nextBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateForward()),this._replaceBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._replaceAllBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._domNode.classList.toggle("replaceToggled",this._isReplaceVisible),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);const i=!this._codeEditor.getOption(92);this._toggleReplaceBtn.setEnabled(this._isVisible&&i)}_reveal(){if(this._revealTimeouts.forEach(e=>{clearTimeout(e)}),this._revealTimeouts=[],!this._isVisible){this._isVisible=!0;const e=this._codeEditor.getSelection();switch(this._codeEditor.getOption(41).autoFindInSelection){case"always":this._toggleSelectionFind.checked=!0;break;case"never":this._toggleSelectionFind.checked=!1;break;case"multiline":{const i=!!e&&e.startLineNumber!==e.endLineNumber;this._toggleSelectionFind.checked=i;break}}this._tryUpdateWidgetWidth(),this._updateButtons(),this._revealTimeouts.push(setTimeout(()=>{this._domNode.classList.add("visible"),this._domNode.setAttribute("aria-hidden","false")},0)),this._revealTimeouts.push(setTimeout(()=>{this._findInput.validate()},200)),this._codeEditor.layoutOverlayWidget(this);let t=!0;if(this._codeEditor.getOption(41).seedSearchStringFromSelection&&e){const i=this._codeEditor.getDomNode();if(i){const s=Fn(i),r=this._codeEditor.getScrolledVisiblePosition(e.getStartPosition()),o=s.left+(r?r.left:0),a=r?r.top:0;if(this._viewZone&&a<this._viewZone.heightInPx){e.endLineNumber>e.startLineNumber&&(t=!1);const l=F0e(this._domNode).left;o>l&&(t=!1);const c=this._codeEditor.getScrolledVisiblePosition(e.getEndPosition());s.left+(c?c.left:0)>l&&(t=!1)}}}this._showViewZone(t)}}_hide(e){this._revealTimeouts.forEach(t=>{clearTimeout(t)}),this._revealTimeouts=[],this._isVisible&&(this._isVisible=!1,this._updateButtons(),this._domNode.classList.remove("visible"),this._domNode.setAttribute("aria-hidden","true"),this._findInput.clearMessage(),e&&this._codeEditor.focus(),this._codeEditor.layoutOverlayWidget(this),this._removeViewZone())}_layoutViewZone(e){if(!this._codeEditor.getOption(41).addExtraSpaceOnTop){this._removeViewZone();return}if(!this._isVisible)return;const i=this._viewZone;this._viewZoneId!==void 0||!i||this._codeEditor.changeViewZones(s=>{i.heightInPx=this._getHeight(),this._viewZoneId=s.addZone(i),this._codeEditor.setScrollTop(e||this._codeEditor.getScrollTop()+i.heightInPx)})}_showViewZone(e=!0){if(!this._isVisible||!this._codeEditor.getOption(41).addExtraSpaceOnTop)return;this._viewZone===void 0&&(this._viewZone=new g6(0));const i=this._viewZone;this._codeEditor.changeViewZones(s=>{if(this._viewZoneId!==void 0){const r=this._getHeight();if(r===i.heightInPx)return;const o=r-i.heightInPx;i.heightInPx=r,s.layoutZone(this._viewZoneId),e&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+o);return}else{let r=this._getHeight();if(r-=this._codeEditor.getOption(84).top,r<=0)return;i.heightInPx=r,this._viewZoneId=s.addZone(i),e&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+r)}})}_removeViewZone(){this._codeEditor.changeViewZones(e=>{this._viewZoneId!==void 0&&(e.removeZone(this._viewZoneId),this._viewZoneId=void 0,this._viewZone&&(this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()-this._viewZone.heightInPx),this._viewZone=void 0))})}_tryUpdateWidgetWidth(){if(!this._isVisible||!this._domNode.isConnected)return;const e=this._codeEditor.getLayoutInfo();if(e.contentWidth<=0){this._domNode.classList.add("hiddenEditor");return}else this._domNode.classList.contains("hiddenEditor")&&this._domNode.classList.remove("hiddenEditor");const i=e.width,s=e.minimap.minimapWidth;let r=!1,o=!1,a=!1;if(this._resized&&Pa(this._domNode)>ah){this._domNode.style.maxWidth=`${i-28-s-15}px`,this._replaceInput.width=Pa(this._findInput.domNode);return}if(ah+28+s>=i&&(o=!0),ah+28+s-XL>=i&&(a=!0),ah+28+s-XL>=i+50&&(r=!0),this._domNode.classList.toggle("collapsed-find-widget",r),this._domNode.classList.toggle("narrow-find-widget",a),this._domNode.classList.toggle("reduced-find-widget",o),!a&&!r&&(this._domNode.style.maxWidth=`${i-28-s-15}px`),this._findInput.layout({collapsedFindWidget:r,narrowFindWidget:a,reducedFindWidget:o}),this._resized){const l=this._findInput.inputBox.element.clientWidth;l>0&&(this._replaceInput.width=l)}else this._isReplaceVisible&&(this._replaceInput.width=Pa(this._findInput.domNode))}_getHeight(){let e=0;return e+=4,e+=this._findInput.inputBox.height+2,this._isReplaceVisible&&(e+=4,e+=this._replaceInput.inputBox.height+2),e+=4,e}_tryUpdateHeight(){const e=this._getHeight();return this._cachedHeight!==null&&this._cachedHeight===e?!1:(this._cachedHeight=e,this._domNode.style.height=`${e}px`,!0)}focusFindInput(){this._findInput.select(),this._findInput.focus()}focusReplaceInput(){this._replaceInput.select(),this._replaceInput.focus()}highlightFindOptions(){this._findInput.highlightFindOptions()}_updateSearchScope(){if(this._codeEditor.hasModel()&&this._toggleSelectionFind.checked){const e=this._codeEditor.getSelections();e.map(t=>{t.endColumn===1&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(t.endLineNumber-1)));const i=this._state.currentMatch;return t.startLineNumber!==t.endLineNumber&&!M.equalsRange(t,i)?t:null}).filter(t=>!!t),e.length&&this._state.change({searchScope:e},!0)}}_onFindInputMouseDown(e){e.middleButton&&e.stopPropagation()}_onFindInputKeyDown(e){if(e.equals(Mue|3))if(this._keybindingService.dispatchEvent(e,e.target)){e.preventDefault();return}else{this._findInput.inputBox.insertAtCursor(`
`),e.preventDefault();return}if(e.equals(2)){this._isReplaceVisible?this._replaceInput.focus():this._findInput.focusOnCaseSensitive(),e.preventDefault();return}if(e.equals(2066)){this._codeEditor.focus(),e.preventDefault();return}if(e.equals(16))return Pue(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea"));if(e.equals(18))return Oue(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea"))}_onReplaceInputKeyDown(e){if(e.equals(Mue|3))if(this._keybindingService.dispatchEvent(e,e.target)){e.preventDefault();return}else{wr&&Eu&&!this._ctrlEnterReplaceAllWarningPrompted&&(this._notificationService.info(v("ctrlEnter.keybindingChanged","Ctrl+Enter now inserts line break instead of replacing all. You can modify the keybinding for editor.action.replaceAll to override this behavior.")),this._ctrlEnterReplaceAllWarningPrompted=!0,this._storageService.store(Aue,!0,0,0)),this._replaceInput.inputBox.insertAtCursor(`
`),e.preventDefault();return}if(e.equals(2)){this._findInput.focusOnCaseSensitive(),e.preventDefault();return}if(e.equals(1026)){this._findInput.focus(),e.preventDefault();return}if(e.equals(2066)){this._codeEditor.focus(),e.preventDefault();return}if(e.equals(16))return Pue(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea"));if(e.equals(18))return Oue(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea"))}getVerticalSashLeft(e){return 0}_keybindingLabelFor(e){const t=this._keybindingService.lookupKeybinding(e);return t?` (${t.getLabel()})`:""}_buildDomNode(){this._findInput=this._register(new XK(null,this._contextViewProvider,{width:Zvt,label:Ovt,placeholder:Fvt,appendCaseSensitiveLabel:this._keybindingLabelFor(Ki.ToggleCaseSensitiveCommand),appendWholeWordsLabel:this._keybindingLabelFor(Ki.ToggleWholeWordCommand),appendRegexLabel:this._keybindingLabelFor(Ki.ToggleRegexCommand),validation:d=>{if(d.length===0||!this._findInput.getRegex())return null;try{return new RegExp(d,"gu"),null}catch(u){return{content:u.message}}},flexibleHeight:!0,flexibleWidth:!0,flexibleMaxHeight:118,showCommonFindToggles:!0,showHistoryHint:()=>Due(this._keybindingService),inputBoxStyles:YP,toggleStyles:GP},this._contextKeyService)),this._findInput.setRegex(!!this._state.isRegex),this._findInput.setCaseSensitive(!!this._state.matchCase),this._findInput.setWholeWords(!!this._state.wholeWord),this._register(this._findInput.onKeyDown(d=>this._onFindInputKeyDown(d))),this._register(this._findInput.inputBox.onDidChange(()=>{this._ignoreChangeEvent||this._state.change({searchString:this._findInput.getValue()},!0)})),this._register(this._findInput.onDidOptionChange(()=>{this._state.change({isRegex:this._findInput.getRegex(),wholeWord:this._findInput.getWholeWords(),matchCase:this._findInput.getCaseSensitive()},!0)})),this._register(this._findInput.onCaseSensitiveKeyDown(d=>{d.equals(1026)&&this._isReplaceVisible&&(this._replaceInput.focus(),d.preventDefault())})),this._register(this._findInput.onRegexKeyDown(d=>{d.equals(2)&&this._isReplaceVisible&&(this._replaceInput.focusOnPreserve(),d.preventDefault())})),this._register(this._findInput.inputBox.onDidHeightChange(d=>{this._tryUpdateHeight()&&this._showViewZone()})),Po&&this._register(this._findInput.onMouseDown(d=>this._onFindInputMouseDown(d))),this._matchesCount=document.createElement("div"),this._matchesCount.className="matchesCount",this._updateMatchesCount();const i=this._register(US());this._prevBtn=this._register(new BC({label:Bvt+this._keybindingLabelFor(Ki.PreviousMatchFindAction),icon:Avt,hoverDelegate:i,onTrigger:()=>{wm(this._codeEditor.getAction(Ki.PreviousMatchFindAction)).run().then(void 0,pt)}},this._hoverService)),this._nextBtn=this._register(new BC({label:Wvt+this._keybindingLabelFor(Ki.NextMatchFindAction),icon:Mvt,hoverDelegate:i,onTrigger:()=>{wm(this._codeEditor.getAction(Ki.NextMatchFindAction)).run().then(void 0,pt)}},this._hoverService));const s=document.createElement("div");s.className="find-part",s.appendChild(this._findInput.domNode);const r=document.createElement("div");r.className="find-actions",s.appendChild(r),r.appendChild(this._matchesCount),r.appendChild(this._prevBtn.domNode),r.appendChild(this._nextBtn.domNode),this._toggleSelectionFind=this._register(new Hx({icon:Nvt,title:Hvt+this._keybindingLabelFor(Ki.ToggleSearchScopeCommand),isChecked:!1,hoverDelegate:i,inputActiveOptionBackground:Me(HN),inputActiveOptionBorder:Me(cB),inputActiveOptionForeground:Me(dB)})),this._register(this._toggleSelectionFind.onChange(()=>{if(this._toggleSelectionFind.checked){if(this._codeEditor.hasModel()){let d=this._codeEditor.getSelections();d=d.map(u=>(u.endColumn===1&&u.endLineNumber>u.startLineNumber&&(u=u.setEndPosition(u.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(u.endLineNumber-1))),u.isEmpty()?null:u)).filter(u=>!!u),d.length&&this._state.change({searchScope:d},!0)}}else this._state.change({searchScope:null},!0)})),r.appendChild(this._toggleSelectionFind.domNode),this._closeBtn=this._register(new BC({label:Vvt+this._keybindingLabelFor(Ki.CloseFindWidgetCommand),icon:gSe,hoverDelegate:i,onTrigger:()=>{this._state.change({isRevealed:!1,searchScope:null},!1)},onKeyDown:d=>{d.equals(2)&&this._isReplaceVisible&&(this._replaceBtn.isEnabled()?this._replaceBtn.focus():this._codeEditor.focus(),d.preventDefault())}},this._hoverService)),this._replaceInput=this._register(new QK(null,void 0,{label:zvt,placeholder:Uvt,appendPreserveCaseLabel:this._keybindingLabelFor(Ki.TogglePreserveCaseCommand),history:[],flexibleHeight:!0,flexibleWidth:!0,flexibleMaxHeight:118,showHistoryHint:()=>Due(this._keybindingService),inputBoxStyles:YP,toggleStyles:GP},this._contextKeyService,!0)),this._replaceInput.setPreserveCase(!!this._state.preserveCase),this._register(this._replaceInput.onKeyDown(d=>this._onReplaceInputKeyDown(d))),this._register(this._replaceInput.inputBox.onDidChange(()=>{this._state.change({replaceString:this._replaceInput.inputBox.value},!1)})),this._register(this._replaceInput.inputBox.onDidHeightChange(d=>{this._isReplaceVisible&&this._tryUpdateHeight()&&this._showViewZone()})),this._register(this._replaceInput.onDidOptionChange(()=>{this._state.change({preserveCase:this._replaceInput.getPreserveCase()},!0)})),this._register(this._replaceInput.onPreserveCaseKeyDown(d=>{d.equals(2)&&(this._prevBtn.isEnabled()?this._prevBtn.focus():this._nextBtn.isEnabled()?this._nextBtn.focus():this._toggleSelectionFind.enabled?this._toggleSelectionFind.focus():this._closeBtn.isEnabled()&&this._closeBtn.focus(),d.preventDefault())}));const o=this._register(US());this._replaceBtn=this._register(new BC({label:$vt+this._keybindingLabelFor(Ki.ReplaceOneAction),icon:Tvt,hoverDelegate:o,onTrigger:()=>{this._controller.replace()},onKeyDown:d=>{d.equals(1026)&&(this._closeBtn.focus(),d.preventDefault())}},this._hoverService)),this._replaceAllBtn=this._register(new BC({label:jvt+this._keybindingLabelFor(Ki.ReplaceAllAction),icon:Rvt,hoverDelegate:o,onTrigger:()=>{this._controller.replaceAll()}},this._hoverService));const a=document.createElement("div");a.className="replace-part",a.appendChild(this._replaceInput.domNode);const l=document.createElement("div");l.className="replace-actions",a.appendChild(l),l.appendChild(this._replaceBtn.domNode),l.appendChild(this._replaceAllBtn.domNode),this._toggleReplaceBtn=this._register(new BC({label:Kvt,className:"codicon toggle left",onTrigger:()=>{this._state.change({isReplaceRevealed:!this._isReplaceVisible},!1),this._isReplaceVisible&&(this._replaceInput.width=Pa(this._findInput.domNode),this._replaceInput.inputBox.layout()),this._showViewZone()}},this._hoverService)),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible),this._domNode=document.createElement("div"),this._domNode.className="editor-widget find-widget",this._domNode.setAttribute("aria-hidden","true"),this._domNode.ariaLabel=Pvt,this._domNode.role="dialog",this._domNode.style.width=`${ah}px`,this._domNode.appendChild(this._toggleReplaceBtn.domNode),this._domNode.appendChild(s),this._domNode.appendChild(this._closeBtn.domNode),this._domNode.appendChild(a),this._resizeSash=this._register(new Dr(this._domNode,this,{orientation:0,size:2})),this._resized=!1;let c=ah;this._register(this._resizeSash.onDidStart(()=>{c=Pa(this._domNode)})),this._register(this._resizeSash.onDidChange(d=>{this._resized=!0;const u=c+d.startX-d.currentX;if(u<ah)return;const h=parseFloat(V3(this._domNode).maxWidth)||0;u>h||(this._domNode.style.width=`${u}px`,this._isReplaceVisible&&(this._replaceInput.width=Pa(this._findInput.domNode)),this._findInput.inputBox.layout(),this._tryUpdateHeight())})),this._register(this._resizeSash.onDidReset(()=>{const d=Pa(this._domNode);if(d<ah)return;let u=ah;if(!this._resized||d===ah){const h=this._codeEditor.getLayoutInfo();u=h.width-28-h.minimap.minimapWidth-15,this._resized=!0}this._domNode.style.width=`${u}px`,this._isReplaceVisible&&(this._replaceInput.width=Pa(this._findInput.domNode)),this._findInput.inputBox.layout()}))}updateAccessibilitySupport(){const e=this._codeEditor.getOption(2);this._findInput.setFocusInputOnOptionClick(e!==2)}};o5.ID="editor.contrib.findWidget";let JK=o5;class BC extends Xl{constructor(e,t){super(),this._opts=e;let i="button";this._opts.className&&(i=i+" "+this._opts.className),this._opts.icon&&(i=i+" "+ot.asClassName(this._opts.icon)),this._domNode=document.createElement("div"),this._domNode.tabIndex=0,this._domNode.className=i,this._domNode.setAttribute("role","button"),this._domNode.setAttribute("aria-label",this._opts.label),this._register(t.setupManagedHover(e.hoverDelegate??Vo("element"),this._domNode,this._opts.label)),this.onclick(this._domNode,s=>{this._opts.onTrigger(),s.preventDefault()}),this.onkeydown(this._domNode,s=>{var r,o;if(s.equals(10)||s.equals(3)){this._opts.onTrigger(),s.preventDefault();return}(o=(r=this._opts).onKeyDown)==null||o.call(r,s)})}get domNode(){return this._domNode}isEnabled(){return this._domNode.tabIndex>=0}focus(){this._domNode.focus()}setEnabled(e){this._domNode.classList.toggle("disabled",!e),this._domNode.setAttribute("aria-disabled",String(!e)),this._domNode.tabIndex=e?0:-1}setExpanded(e){this._domNode.setAttribute("aria-expanded",String(!!e)),e?(this._domNode.classList.remove(...ot.asClassNameArray(Nue)),this._domNode.classList.add(...ot.asClassNameArray(Tue))):(this._domNode.classList.remove(...ot.asClassNameArray(Tue)),this._domNode.classList.add(...ot.asClassNameArray(Nue)))}}zc((n,e)=>{const t=n.getColor(Sm);t&&e.addRule(`.monaco-editor .findMatch { border: 1px ${Tu(n.type)?"dotted":"solid"} ${t}; box-sizing: border-box; }`);const i=n.getColor(yXe);i&&e.addRule(`.monaco-editor .findScope { border: 1px ${Tu(n.type)?"dashed":"solid"} ${i}; }`);const s=n.getColor(Yt);s&&e.addRule(`.monaco-editor .find-widget { border: 1px solid ${s}; }`);const r=n.getColor(wXe);r&&e.addRule(`.monaco-editor .findMatchInline { color: ${r}; }`);const o=n.getColor(CXe);o&&e.addRule(`.monaco-editor .currentFindMatchInline { color: ${o}; }`)});var tke=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},hc=function(n,e){return function(t,i){e(t,i,n)}},eq;const Qvt=524288;function tq(n,e="single",t=!1){if(!n.hasModel())return null;const i=n.getSelection();if(e==="single"&&i.startLineNumber===i.endLineNumber||e==="multiple"){if(i.isEmpty()){const s=n.getConfiguredWordAtPosition(i.getStartPosition());if(s&&t===!1)return s.word}else if(n.getModel().getValueLengthInRange(i)<Qvt)return n.getModel().getValueInRange(i)}return null}var Ew;let pa=(Ew=class extends ee{get editor(){return this._editor}static get(e){return e.getContribution(eq.ID)}constructor(e,t,i,s,r,o){super(),this._editor=e,this._findWidgetVisible=mp.bindTo(t),this._contextKeyService=t,this._storageService=i,this._clipboardService=s,this._notificationService=r,this._hoverService=o,this._updateHistoryDelayer=new Rc(500),this._state=this._register(new Lvt),this.loadQueryState(),this._register(this._state.onFindReplaceStateChange(a=>this._onStateChanged(a))),this._model=null,this._register(this._editor.onDidChangeModel(()=>{const a=this._editor.getModel()&&this._state.isRevealed;this.disposeModel(),this._state.change({searchScope:null,matchCase:this._storageService.getBoolean("editor.matchCase",1,!1),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,!1),isRegex:this._storageService.getBoolean("editor.isRegex",1,!1),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,!1)},!1),a&&this._start({forceRevealReplace:!1,seedSearchStringFromSelection:"none",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!1,updateSearchScope:!1,loop:this._editor.getOption(41).loop})}))}dispose(){this.disposeModel(),super.dispose()}disposeModel(){this._model&&(this._model.dispose(),this._model=null)}_onStateChanged(e){this.saveQueryState(e),e.isRevealed&&(this._state.isRevealed?this._findWidgetVisible.set(!0):(this._findWidgetVisible.reset(),this.disposeModel())),e.searchString&&this.setGlobalBufferTerm(this._state.searchString)}saveQueryState(e){e.isRegex&&this._storageService.store("editor.isRegex",this._state.actualIsRegex,1,1),e.wholeWord&&this._storageService.store("editor.wholeWord",this._state.actualWholeWord,1,1),e.matchCase&&this._storageService.store("editor.matchCase",this._state.actualMatchCase,1,1),e.preserveCase&&this._storageService.store("editor.preserveCase",this._state.actualPreserveCase,1,1)}loadQueryState(){this._state.change({matchCase:this._storageService.getBoolean("editor.matchCase",1,this._state.matchCase),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,this._state.wholeWord),isRegex:this._storageService.getBoolean("editor.isRegex",1,this._state.isRegex),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,this._state.preserveCase)},!1)}isFindInputFocused(){return!!rW.getValue(this._contextKeyService)}getState(){return this._state}closeFindWidget(){this._state.change({isRevealed:!1,searchScope:null},!1),this._editor.focus()}toggleCaseSensitive(){this._state.change({matchCase:!this._state.matchCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleWholeWords(){this._state.change({wholeWord:!this._state.wholeWord},!1),this._state.isRevealed||this.highlightFindOptions()}toggleRegex(){this._state.change({isRegex:!this._state.isRegex},!1),this._state.isRevealed||this.highlightFindOptions()}togglePreserveCase(){this._state.change({preserveCase:!this._state.preserveCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleSearchScope(){if(this._state.searchScope)this._state.change({searchScope:null},!0);else if(this._editor.hasModel()){let e=this._editor.getSelections();e=e.map(t=>(t.endColumn===1&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,this._editor.getModel().getLineMaxColumn(t.endLineNumber-1))),t.isEmpty()?null:t)).filter(t=>!!t),e.length&&this._state.change({searchScope:e},!0)}}setSearchString(e){this._state.isRegex&&(e=$l(e)),this._state.change({searchString:e},!1)}highlightFindOptions(e=!1){}async _start(e,t){if(this.disposeModel(),!this._editor.hasModel())return;const i={...t,isRevealed:!0};if(e.seedSearchStringFromSelection==="single"){const s=tq(this._editor,e.seedSearchStringFromSelection,e.seedSearchStringFromNonEmptySelection);s&&(this._state.isRegex?i.searchString=$l(s):i.searchString=s)}else if(e.seedSearchStringFromSelection==="multiple"&&!e.updateSearchScope){const s=tq(this._editor,e.seedSearchStringFromSelection);s&&(i.searchString=s)}if(!i.searchString&&e.seedSearchStringFromGlobalClipboard){const s=await this.getGlobalBufferTerm();if(!this._editor.hasModel())return;s&&(i.searchString=s)}if(e.forceRevealReplace||i.isReplaceRevealed?i.isReplaceRevealed=!0:this._findWidgetVisible.get()||(i.isReplaceRevealed=!1),e.updateSearchScope){const s=this._editor.getSelections();s.some(r=>!r.isEmpty())&&(i.searchScope=s)}i.loop=e.loop,this._state.change(i,!1),this._model||(this._model=new SE(this._editor,this._state))}start(e,t){return this._start(e,t)}moveToNextMatch(){return this._model?(this._model.moveToNextMatch(),!0):!1}moveToPrevMatch(){return this._model?(this._model.moveToPrevMatch(),!0):!1}goToMatch(e){return this._model?(this._model.moveToMatch(e),!0):!1}replace(){return this._model?(this._model.replace(),!0):!1}replaceAll(){var e;return this._model?(e=this._editor.getModel())!=null&&e.isTooLargeForHeapOperation()?(this._notificationService.warn(v("too.large.for.replaceall","The file is too large to perform a replace all operation.")),!1):(this._model.replaceAll(),!0):!1}selectAllMatches(){return this._model?(this._model.selectAllMatches(),this._editor.focus(),!0):!1}async getGlobalBufferTerm(){return this._editor.getOption(41).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()?this._clipboardService.readFindText():""}setGlobalBufferTerm(e){this._editor.getOption(41).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()&&this._clipboardService.writeFindText(e)}},eq=Ew,Ew.ID="editor.contrib.findController",Ew);pa=eq=tke([hc(1,at),hc(2,Wd),hc(3,pp),hc(4,jn),hc(5,wf)],pa);let iq=class extends pa{constructor(e,t,i,s,r,o,a,l,c){super(e,i,a,l,o,c),this._contextViewService=t,this._keybindingService=s,this._themeService=r,this._widget=null,this._findOptionsWidget=null}async _start(e,t){this._widget||this._createFindWidget();const i=this._editor.getSelection();let s=!1;switch(this._editor.getOption(41).autoFindInSelection){case"always":s=!0;break;case"never":s=!1;break;case"multiline":{s=!!i&&i.startLineNumber!==i.endLineNumber;break}}e.updateSearchScope=e.updateSearchScope||s,await super._start(e,t),this._widget&&(e.shouldFocus===2?this._widget.focusReplaceInput():e.shouldFocus===1&&this._widget.focusFindInput())}highlightFindOptions(e=!1){this._widget||this._createFindWidget(),this._state.isRevealed&&!e?this._widget.highlightFindOptions():this._findOptionsWidget.highlightFindOptions()}_createFindWidget(){this._widget=this._register(new JK(this._editor,this,this._state,this._contextViewService,this._keybindingService,this._contextKeyService,this._themeService,this._storageService,this._notificationService,this._hoverService)),this._findOptionsWidget=this._register(new ZK(this._editor,this._state,this._keybindingService))}};iq=tke([hc(1,hp),hc(2,at),hc(3,hi),hc(4,ws),hc(5,jn),hc(6,Wd),hc(7,pp),hc(8,wf)],iq);const Jvt=eCe(new J0e({id:Ki.StartFindAction,label:v("startFindAction","Find"),alias:"Find",precondition:he.or(F.focus,he.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2084,weight:100},menuOpts:{menuId:ze.MenubarEditMenu,group:"3_find",title:v({key:"miFind",comment:["&& denotes a mnemonic"]},"&&Find"),order:1}}));Jvt.addImplementation(0,(n,e,t)=>{const i=pa.get(e);return i?i.start({forceRevealReplace:!1,seedSearchStringFromSelection:e.getOption(41).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:e.getOption(41).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:e.getOption(41).globalFindClipboard,shouldFocus:1,shouldAnimate:!0,updateSearchScope:!1,loop:e.getOption(41).loop}):!1});const ebt={description:"Open a new In-Editor Find Widget.",args:[{name:"Open a new In-Editor Find Widget args",schema:{properties:{searchString:{type:"string"},replaceString:{type:"string"},isRegex:{type:"boolean"},matchWholeWord:{type:"boolean"},isCaseSensitive:{type:"boolean"},preserveCase:{type:"boolean"},findInSelection:{type:"boolean"}}}}]};class tbt extends Oe{constructor(){super({id:Ki.StartFindWithArgs,label:v("startFindWithArgsAction","Find With Arguments"),alias:"Find With Arguments",precondition:void 0,kbOpts:{kbExpr:null,primary:0,weight:100},metadata:ebt})}async run(e,t,i){const s=pa.get(t);if(s){const r=i?{searchString:i.searchString,replaceString:i.replaceString,isReplaceRevealed:i.replaceString!==void 0,isRegex:i.isRegex,wholeWord:i.matchWholeWord,matchCase:i.isCaseSensitive,preserveCase:i.preserveCase}:{};await s.start({forceRevealReplace:!1,seedSearchStringFromSelection:s.getState().searchString.length===0&&t.getOption(41).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:t.getOption(41).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:!0,shouldFocus:1,shouldAnimate:!0,updateSearchScope:(i==null?void 0:i.findInSelection)||!1,loop:t.getOption(41).loop},r),s.setGlobalBufferTerm(s.getState().searchString)}}}class ibt extends Oe{constructor(){super({id:Ki.StartFindWithSelection,label:v("startFindWithSelectionAction","Find With Selection"),alias:"Find With Selection",precondition:void 0,kbOpts:{kbExpr:null,primary:0,mac:{primary:2083},weight:100}})}async run(e,t){const i=pa.get(t);i&&(await i.start({forceRevealReplace:!1,seedSearchStringFromSelection:"multiple",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(41).loop}),i.setGlobalBufferTerm(i.getState().searchString))}}class ike extends Oe{async run(e,t){const i=pa.get(t);i&&!this._run(i)&&(await i.start({forceRevealReplace:!1,seedSearchStringFromSelection:i.getState().searchString.length===0&&t.getOption(41).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:t.getOption(41).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:!0,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(41).loop}),this._run(i))}}class nbt extends ike{constructor(){super({id:Ki.NextMatchFindAction,label:v("findNextMatchAction","Find Next"),alias:"Find Next",precondition:void 0,kbOpts:[{kbExpr:F.focus,primary:61,mac:{primary:2085,secondary:[61]},weight:100},{kbExpr:he.and(F.focus,rW),primary:3,weight:100}]})}_run(e){return e.moveToNextMatch()?(e.editor.pushUndoStop(),!0):!1}}class sbt extends ike{constructor(){super({id:Ki.PreviousMatchFindAction,label:v("findPreviousMatchAction","Find Previous"),alias:"Find Previous",precondition:void 0,kbOpts:[{kbExpr:F.focus,primary:1085,mac:{primary:3109,secondary:[1085]},weight:100},{kbExpr:he.and(F.focus,rW),primary:1027,weight:100}]})}_run(e){return e.moveToPrevMatch()}}class rbt extends Oe{constructor(){super({id:Ki.GoToMatchFindAction,label:v("findMatchAction.goToMatch","Go to Match..."),alias:"Go to Match...",precondition:mp}),this._highlightDecorations=[]}run(e,t,i){const s=pa.get(t);if(!s)return;const r=s.getState().matchesCount;if(r<1){e.get(jn).notify({severity:nB.Warning,message:v("findMatchAction.noResults","No matches. Try searching for something else.")});return}const o=e.get(Uc),a=new ue,l=a.add(o.createInputBox());l.placeholder=v("findMatchAction.inputPlaceHolder","Type a number to go to a specific match (between 1 and {0})",r);const c=u=>{const h=parseInt(u);if(isNaN(h))return;const f=s.getState().matchesCount;if(h>0&&h<=f)return h-1;if(h<0&&h>=-f)return f+h},d=u=>{const h=c(u);if(typeof h=="number"){l.validationMessage=void 0,s.goToMatch(h);const f=s.getState().currentMatch;f&&this.addDecorations(t,f)}else l.validationMessage=v("findMatchAction.inputValidationMessage","Please type a number between 1 and {0}",s.getState().matchesCount),this.clearDecorations(t)};a.add(l.onDidChangeValue(u=>{d(u)})),a.add(l.onDidAccept(()=>{const u=c(l.value);typeof u=="number"?(s.goToMatch(u),l.hide()):l.validationMessage=v("findMatchAction.inputValidationMessage","Please type a number between 1 and {0}",s.getState().matchesCount)})),a.add(l.onDidHide(()=>{this.clearDecorations(t),a.dispose()})),l.show()}clearDecorations(e){e.changeDecorations(t=>{this._highlightDecorations=t.deltaDecorations(this._highlightDecorations,[])})}addDecorations(e,t){e.changeDecorations(i=>{this._highlightDecorations=i.deltaDecorations(this._highlightDecorations,[{range:t,options:{description:"find-match-quick-access-range-highlight",className:"rangeHighlight",isWholeLine:!0}},{range:t,options:{description:"find-match-quick-access-range-highlight-overview",overviewRuler:{color:Dn(tye),position:Vl.Full}}}])})}}class nke extends Oe{async run(e,t){const i=pa.get(t);if(!i)return;const s=tq(t,"single",!1);s&&i.setSearchString(s),this._run(i)||(await i.start({forceRevealReplace:!1,seedSearchStringFromSelection:"none",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(41).loop}),this._run(i))}}class obt extends nke{constructor(){super({id:Ki.NextSelectionMatchFindAction,label:v("nextSelectionMatchFindAction","Find Next Selection"),alias:"Find Next Selection",precondition:void 0,kbOpts:{kbExpr:F.focus,primary:2109,weight:100}})}_run(e){return e.moveToNextMatch()}}class abt extends nke{constructor(){super({id:Ki.PreviousSelectionMatchFindAction,label:v("previousSelectionMatchFindAction","Find Previous Selection"),alias:"Find Previous Selection",precondition:void 0,kbOpts:{kbExpr:F.focus,primary:3133,weight:100}})}_run(e){return e.moveToPrevMatch()}}const lbt=eCe(new J0e({id:Ki.StartFindReplaceAction,label:v("startReplace","Replace"),alias:"Replace",precondition:he.or(F.focus,he.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2086,mac:{primary:2596},weight:100},menuOpts:{menuId:ze.MenubarEditMenu,group:"3_find",title:v({key:"miReplace",comment:["&& denotes a mnemonic"]},"&&Replace"),order:2}}));lbt.addImplementation(0,(n,e,t)=>{if(!e.hasModel()||e.getOption(92))return!1;const i=pa.get(e);if(!i)return!1;const s=e.getSelection(),r=i.isFindInputFocused(),o=!s.isEmpty()&&s.startLineNumber===s.endLineNumber&&e.getOption(41).seedSearchStringFromSelection!=="never"&&!r,a=r||o?2:1;return i.start({forceRevealReplace:!0,seedSearchStringFromSelection:o?"single":"none",seedSearchStringFromNonEmptySelection:e.getOption(41).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:e.getOption(41).seedSearchStringFromSelection!=="never",shouldFocus:a,shouldAnimate:!0,updateSearchScope:!1,loop:e.getOption(41).loop})});Xt(pa.ID,iq,0);we(tbt);we(ibt);we(nbt);we(sbt);we(rbt);we(obt);we(abt);const Zu=vs.bindToContribution(pa.get);Te(new Zu({id:Ki.CloseFindWidgetCommand,precondition:mp,handler:n=>n.closeFindWidget(),kbOpts:{weight:105,kbExpr:he.and(F.focus,he.not("isComposing")),primary:9,secondary:[1033]}}));Te(new Zu({id:Ki.ToggleCaseSensitiveCommand,precondition:void 0,handler:n=>n.toggleCaseSensitive(),kbOpts:{weight:105,kbExpr:F.focus,primary:LA.primary,mac:LA.mac,win:LA.win,linux:LA.linux}}));Te(new Zu({id:Ki.ToggleWholeWordCommand,precondition:void 0,handler:n=>n.toggleWholeWords(),kbOpts:{weight:105,kbExpr:F.focus,primary:kA.primary,mac:kA.mac,win:kA.win,linux:kA.linux}}));Te(new Zu({id:Ki.ToggleRegexCommand,precondition:void 0,handler:n=>n.toggleRegex(),kbOpts:{weight:105,kbExpr:F.focus,primary:EA.primary,mac:EA.mac,win:EA.win,linux:EA.linux}}));Te(new Zu({id:Ki.ToggleSearchScopeCommand,precondition:void 0,handler:n=>n.toggleSearchScope(),kbOpts:{weight:105,kbExpr:F.focus,primary:IA.primary,mac:IA.mac,win:IA.win,linux:IA.linux}}));Te(new Zu({id:Ki.TogglePreserveCaseCommand,precondition:void 0,handler:n=>n.togglePreserveCase(),kbOpts:{weight:105,kbExpr:F.focus,primary:DA.primary,mac:DA.mac,win:DA.win,linux:DA.linux}}));Te(new Zu({id:Ki.ReplaceOneAction,precondition:mp,handler:n=>n.replace(),kbOpts:{weight:105,kbExpr:F.focus,primary:3094}}));Te(new Zu({id:Ki.ReplaceOneAction,precondition:mp,handler:n=>n.replace(),kbOpts:{weight:105,kbExpr:he.and(F.focus,tee),primary:3}}));Te(new Zu({id:Ki.ReplaceAllAction,precondition:mp,handler:n=>n.replaceAll(),kbOpts:{weight:105,kbExpr:F.focus,primary:2563}}));Te(new Zu({id:Ki.ReplaceAllAction,precondition:mp,handler:n=>n.replaceAll(),kbOpts:{weight:105,kbExpr:he.and(F.focus,tee),primary:void 0,mac:{primary:2051}}}));Te(new Zu({id:Ki.SelectAllMatchesAction,precondition:mp,handler:n=>n.selectAllMatches(),kbOpts:{weight:105,kbExpr:F.focus,primary:515}}));const cbt={0:" ",1:"u",2:"r"},Fue=65535,uu=16777215,Bue=4278190080;class p6{constructor(e){const t=Math.ceil(e/32);this._states=new Uint32Array(t)}get(e){const t=e/32|0,i=e%32;return(this._states[t]&1<<i)!==0}set(e,t){const i=e/32|0,s=e%32,r=this._states[i];t?this._states[i]=r|1<<s:this._states[i]=r&~(1<<s)}}class kl{constructor(e,t,i){if(e.length!==t.length||e.length>Fue)throw new Error("invalid startIndexes or endIndexes size");this._startIndexes=e,this._endIndexes=t,this._collapseStates=new p6(e.length),this._userDefinedStates=new p6(e.length),this._recoveredStates=new p6(e.length),this._types=i,this._parentsComputed=!1}ensureParentIndices(){if(!this._parentsComputed){this._parentsComputed=!0;const e=[],t=(i,s)=>{const r=e[e.length-1];return this.getStartLineNumber(r)<=i&&this.getEndLineNumber(r)>=s};for(let i=0,s=this._startIndexes.length;i<s;i++){const r=this._startIndexes[i],o=this._endIndexes[i];if(r>uu||o>uu)throw new Error("startLineNumber or endLineNumber must not exceed "+uu);for(;e.length>0&&!t(r,o);)e.pop();const a=e.length>0?e[e.length-1]:-1;e.push(i),this._startIndexes[i]=r+((a&255)<<24),this._endIndexes[i]=o+((a&65280)<<16)}}}get length(){return this._startIndexes.length}getStartLineNumber(e){return this._startIndexes[e]&uu}getEndLineNumber(e){return this._endIndexes[e]&uu}getType(e){return this._types?this._types[e]:void 0}hasTypes(){return!!this._types}isCollapsed(e){return this._collapseStates.get(e)}setCollapsed(e,t){this._collapseStates.set(e,t)}isUserDefined(e){return this._userDefinedStates.get(e)}setUserDefined(e,t){return this._userDefinedStates.set(e,t)}isRecovered(e){return this._recoveredStates.get(e)}setRecovered(e,t){return this._recoveredStates.set(e,t)}getSource(e){return this.isUserDefined(e)?1:this.isRecovered(e)?2:0}setSource(e,t){t===1?(this.setUserDefined(e,!0),this.setRecovered(e,!1)):t===2?(this.setUserDefined(e,!1),this.setRecovered(e,!0)):(this.setUserDefined(e,!1),this.setRecovered(e,!1))}setCollapsedAllOfType(e,t){let i=!1;if(this._types)for(let s=0;s<this._types.length;s++)this._types[s]===e&&(this.setCollapsed(s,t),i=!0);return i}toRegion(e){return new dbt(this,e)}getParentIndex(e){this.ensureParentIndices();const t=((this._startIndexes[e]&Bue)>>>24)+((this._endIndexes[e]&Bue)>>>16);return t===Fue?-1:t}contains(e,t){return this.getStartLineNumber(e)<=t&&this.getEndLineNumber(e)>=t}findIndex(e){let t=0,i=this._startIndexes.length;if(i===0)return-1;for(;t<i;){const s=Math.floor((t+i)/2);e<this.getStartLineNumber(s)?i=s:t=s+1}return t-1}findRange(e){let t=this.findIndex(e);if(t>=0){if(this.getEndLineNumber(t)>=e)return t;for(t=this.getParentIndex(t);t!==-1;){if(this.contains(t,e))return t;t=this.getParentIndex(t)}}return-1}toString(){const e=[];for(let t=0;t<this.length;t++)e[t]=`[${cbt[this.getSource(t)]}${this.isCollapsed(t)?"+":"-"}] ${this.getStartLineNumber(t)}/${this.getEndLineNumber(t)}`;return e.join(", ")}toFoldRange(e){return{startLineNumber:this._startIndexes[e]&uu,endLineNumber:this._endIndexes[e]&uu,type:this._types?this._types[e]:void 0,isCollapsed:this.isCollapsed(e),source:this.getSource(e)}}static fromFoldRanges(e){const t=e.length,i=new Uint32Array(t),s=new Uint32Array(t);let r=[],o=!1;for(let l=0;l<t;l++){const c=e[l];i[l]=c.startLineNumber,s[l]=c.endLineNumber,r.push(c.type),c.type&&(o=!0)}o||(r=void 0);const a=new kl(i,s,r);for(let l=0;l<t;l++)e[l].isCollapsed&&a.setCollapsed(l,!0),a.setSource(l,e[l].source);return a}static sanitizeAndMerge(e,t,i,s){i=i??Number.MAX_VALUE;const r=(_,w)=>Array.isArray(_)?b=>b<w?_[b]:void 0:b=>b<w?_.toFoldRange(b):void 0,o=r(e,e.length),a=r(t,t.length);let l=0,c=0,d=o(0),u=a(0);const h=[];let f,g=0;const p=[];for(;d||u;){let _;if(u&&(!d||d.startLineNumber>=u.startLineNumber))d&&d.startLineNumber===u.startLineNumber?(u.source===1?_=u:(_=d,_.isCollapsed=u.isCollapsed&&(d.endLineNumber===u.endLineNumber||!(s!=null&&s.startsInside(d.startLineNumber+1,d.endLineNumber+1))),_.source=0),d=o(++l)):(_=u,u.isCollapsed&&u.source===0&&(_.source=2)),u=a(++c);else{let w=c,b=u;for(;;){if(!b||b.startLineNumber>d.endLineNumber){_=d;break}if(b.source===1&&b.endLineNumber>d.endLineNumber)break;b=a(++w)}d=o(++l)}if(_){for(;f&&f.endLineNumber<_.startLineNumber;)f=h.pop();_.endLineNumber>_.startLineNumber&&_.startLineNumber>g&&_.endLineNumber<=i&&(!f||f.endLineNumber>=_.endLineNumber)&&(p.push(_),g=_.startLineNumber,f&&h.push(f),f=_)}}return p}}class dbt{constructor(e,t){this.ranges=e,this.index=t}get startLineNumber(){return this.ranges.getStartLineNumber(this.index)}get endLineNumber(){return this.ranges.getEndLineNumber(this.index)}get regionIndex(){return this.index}get parentIndex(){return this.ranges.getParentIndex(this.index)}get isCollapsed(){return this.ranges.isCollapsed(this.index)}containedBy(e){return e.startLineNumber<=this.startLineNumber&&e.endLineNumber>=this.endLineNumber}containsLine(e){return this.startLineNumber<=e&&e<=this.endLineNumber}}class ubt{get regions(){return this._regions}get textModel(){return this._textModel}constructor(e,t){this._updateEventEmitter=new X,this.onDidChange=this._updateEventEmitter.event,this._textModel=e,this._decorationProvider=t,this._regions=new kl(new Uint32Array(0),new Uint32Array(0)),this._editorDecorationIds=[]}toggleCollapseState(e){if(!e.length)return;e=e.sort((i,s)=>i.regionIndex-s.regionIndex);const t={};this._decorationProvider.changeDecorations(i=>{let s=0,r=-1,o=-1;const a=l=>{for(;s<l;){const c=this._regions.getEndLineNumber(s),d=this._regions.isCollapsed(s);if(c<=r){const u=this.regions.getSource(s)!==0;i.changeDecorationOptions(this._editorDecorationIds[s],this._decorationProvider.getDecorationOption(d,c<=o,u))}d&&c>o&&(o=c),s++}};for(const l of e){const c=l.regionIndex,d=this._editorDecorationIds[c];if(d&&!t[d]){t[d]=!0,a(c);const u=!this._regions.isCollapsed(c);this._regions.setCollapsed(c,u),r=Math.max(r,this._regions.getEndLineNumber(c))}}a(this._regions.length)}),this._updateEventEmitter.fire({model:this,collapseStateChanged:e})}removeManualRanges(e){const t=new Array,i=s=>{for(const r of e)if(!(r.startLineNumber>s.endLineNumber||s.startLineNumber>r.endLineNumber))return!0;return!1};for(let s=0;s<this._regions.length;s++){const r=this._regions.toFoldRange(s);(r.source===0||!i(r))&&t.push(r)}this.updatePost(kl.fromFoldRanges(t))}update(e,t){const i=this._currentFoldedOrManualRanges(t),s=kl.sanitizeAndMerge(e,i,this._textModel.getLineCount(),t);this.updatePost(kl.fromFoldRanges(s))}updatePost(e){const t=[];let i=-1;for(let s=0,r=e.length;s<r;s++){const o=e.getStartLineNumber(s),a=e.getEndLineNumber(s),l=e.isCollapsed(s),c=e.getSource(s)!==0,d={startLineNumber:o,startColumn:this._textModel.getLineMaxColumn(o),endLineNumber:a,endColumn:this._textModel.getLineMaxColumn(a)+1};t.push({range:d,options:this._decorationProvider.getDecorationOption(l,a<=i,c)}),l&&a>i&&(i=a)}this._decorationProvider.changeDecorations(s=>this._editorDecorationIds=s.deltaDecorations(this._editorDecorationIds,t)),this._regions=e,this._updateEventEmitter.fire({model:this})}_currentFoldedOrManualRanges(e){const t=[];for(let i=0,s=this._regions.length;i<s;i++){let r=this.regions.isCollapsed(i);const o=this.regions.getSource(i);if(r||o!==0){const a=this._regions.toFoldRange(i),l=this._textModel.getDecorationRange(this._editorDecorationIds[i]);l&&(r&&(e!=null&&e.startsInside(l.startLineNumber+1,l.endLineNumber))&&(r=!1),t.push({startLineNumber:l.startLineNumber,endLineNumber:l.endLineNumber,type:a.type,isCollapsed:r,source:o}))}}return t}getMemento(){const e=this._currentFoldedOrManualRanges(),t=[],i=this._textModel.getLineCount();for(let s=0,r=e.length;s<r;s++){const o=e[s];if(o.startLineNumber>=o.endLineNumber||o.startLineNumber<1||o.endLineNumber>i)continue;const a=this._getLinesChecksum(o.startLineNumber+1,o.endLineNumber);t.push({startLineNumber:o.startLineNumber,endLineNumber:o.endLineNumber,isCollapsed:o.isCollapsed,source:o.source,checksum:a})}return t.length>0?t:void 0}applyMemento(e){if(!Array.isArray(e))return;const t=[],i=this._textModel.getLineCount();for(const r of e){if(r.startLineNumber>=r.endLineNumber||r.startLineNumber<1||r.endLineNumber>i)continue;const o=this._getLinesChecksum(r.startLineNumber+1,r.endLineNumber);(!r.checksum||o===r.checksum)&&t.push({startLineNumber:r.startLineNumber,endLineNumber:r.endLineNumber,type:void 0,isCollapsed:r.isCollapsed??!0,source:r.source??0})}const s=kl.sanitizeAndMerge(this._regions,t,i);this.updatePost(kl.fromFoldRanges(s))}_getLinesChecksum(e,t){return B3(this._textModel.getLineContent(e)+this._textModel.getLineContent(t))%1e6}dispose(){this._decorationProvider.removeDecorations(this._editorDecorationIds)}getAllRegionsAtLine(e,t){const i=[];if(this._regions){let s=this._regions.findRange(e),r=1;for(;s>=0;){const o=this._regions.toRegion(s);(!t||t(o,r))&&i.push(o),r++,s=o.parentIndex}}return i}getRegionAtLine(e){if(this._regions){const t=this._regions.findRange(e);if(t>=0)return this._regions.toRegion(t)}return null}getRegionsInside(e,t){const i=[],s=e?e.regionIndex+1:0,r=e?e.endLineNumber:Number.MAX_VALUE;if(t&&t.length===2){const o=[];for(let a=s,l=this._regions.length;a<l;a++){const c=this._regions.toRegion(a);if(this._regions.getStartLineNumber(a)<r){for(;o.length>0&&!c.containedBy(o[o.length-1]);)o.pop();o.push(c),t(c,o.length)&&i.push(c)}else break}}else for(let o=s,a=this._regions.length;o<a;o++){const l=this._regions.toRegion(o);if(this._regions.getStartLineNumber(o)<r)(!t||t(l))&&i.push(l);else break}return i}}function see(n,e,t){const i=[];for(const s of t){const r=n.getRegionAtLine(s);if(r){const o=!r.isCollapsed;if(i.push(r),e>1){const a=n.getRegionsInside(r,(l,c)=>l.isCollapsed!==o&&c<e);i.push(...a)}}}n.toggleCollapseState(i)}function Zx(n,e,t=Number.MAX_VALUE,i){const s=[];if(i&&i.length>0)for(const r of i){const o=n.getRegionAtLine(r);if(o&&(o.isCollapsed!==e&&s.push(o),t>1)){const a=n.getRegionsInside(o,(l,c)=>l.isCollapsed!==e&&c<t);s.push(...a)}}else{const r=n.getRegionsInside(null,(o,a)=>o.isCollapsed!==e&&a<t);s.push(...r)}n.toggleCollapseState(s)}function ske(n,e,t,i){const s=[];for(const r of i){const o=n.getAllRegionsAtLine(r,(a,l)=>a.isCollapsed!==e&&l<=t);s.push(...o)}n.toggleCollapseState(s)}function hbt(n,e,t){const i=[];for(const s of t){const r=n.getAllRegionsAtLine(s,o=>o.isCollapsed!==e);r.length>0&&i.push(r[0])}n.toggleCollapseState(i)}function fbt(n,e,t,i){const s=(o,a)=>a===e&&o.isCollapsed!==t&&!i.some(l=>o.containsLine(l)),r=n.getRegionsInside(null,s);n.toggleCollapseState(r)}function rke(n,e,t){const i=[];for(const o of t){const a=n.getAllRegionsAtLine(o,void 0);a.length>0&&i.push(a[0])}const s=o=>i.every(a=>!a.containedBy(o)&&!o.containedBy(a))&&o.isCollapsed!==e,r=n.getRegionsInside(null,s);n.toggleCollapseState(r)}function ree(n,e,t){const i=n.textModel,s=n.regions,r=[];for(let o=s.length-1;o>=0;o--)if(t!==s.isCollapsed(o)){const a=s.getStartLineNumber(o);e.test(i.getLineContent(a))&&r.push(s.toRegion(o))}n.toggleCollapseState(r)}function oee(n,e,t){const i=n.regions,s=[];for(let r=i.length-1;r>=0;r--)t!==i.isCollapsed(r)&&e===i.getType(r)&&s.push(i.toRegion(r));n.toggleCollapseState(s)}function gbt(n,e){let t=null;const i=e.getRegionAtLine(n);if(i!==null&&(t=i.startLineNumber,n===t)){const s=i.parentIndex;s!==-1?t=e.regions.getStartLineNumber(s):t=null}return t}function pbt(n,e){let t=e.getRegionAtLine(n);if(t!==null&&t.startLineNumber===n){if(n!==t.startLineNumber)return t.startLineNumber;{const i=t.parentIndex;let s=0;for(i!==-1&&(s=e.regions.getStartLineNumber(t.parentIndex));t!==null;)if(t.regionIndex>0){if(t=e.regions.toRegion(t.regionIndex-1),t.startLineNumber<=s)return null;if(t.parentIndex===i)return t.startLineNumber}else return null}}else if(e.regions.length>0)for(t=e.regions.toRegion(e.regions.length-1);t!==null;){if(t.startLineNumber<n)return t.startLineNumber;t.regionIndex>0?t=e.regions.toRegion(t.regionIndex-1):t=null}return null}function mbt(n,e){let t=e.getRegionAtLine(n);if(t!==null&&t.startLineNumber===n){const i=t.parentIndex;let s=0;if(i!==-1)s=e.regions.getEndLineNumber(t.parentIndex);else{if(e.regions.length===0)return null;s=e.regions.getEndLineNumber(e.regions.length-1)}for(;t!==null;)if(t.regionIndex<e.regions.length){if(t=e.regions.toRegion(t.regionIndex+1),t.startLineNumber>=s)return null;if(t.parentIndex===i)return t.startLineNumber}else return null}else if(e.regions.length>0)for(t=e.regions.toRegion(0);t!==null;){if(t.startLineNumber>n)return t.startLineNumber;t.regionIndex<e.regions.length?t=e.regions.toRegion(t.regionIndex+1):t=null}return null}class _bt{get onDidChange(){return this._updateEventEmitter.event}get hiddenRanges(){return this._hiddenRanges}constructor(e){this._updateEventEmitter=new X,this._hasLineChanges=!1,this._foldingModel=e,this._foldingModelListener=e.onDidChange(t=>this.updateHiddenRanges()),this._hiddenRanges=[],e.regions.length&&this.updateHiddenRanges()}notifyChangeModelContent(e){this._hiddenRanges.length&&!this._hasLineChanges&&(this._hasLineChanges=e.changes.some(t=>t.range.endLineNumber!==t.range.startLineNumber||M_(t.text)[0]!==0))}updateHiddenRanges(){let e=!1;const t=[];let i=0,s=0,r=Number.MAX_VALUE,o=-1;const a=this._foldingModel.regions;for(;i<a.length;i++){if(!a.isCollapsed(i))continue;const l=a.getStartLineNumber(i)+1,c=a.getEndLineNumber(i);r<=l&&c<=o||(!e&&s<this._hiddenRanges.length&&this._hiddenRanges[s].startLineNumber===l&&this._hiddenRanges[s].endLineNumber===c?(t.push(this._hiddenRanges[s]),s++):(e=!0,t.push(new M(l,1,c,1))),r=l,o=c)}(this._hasLineChanges||e||s<this._hiddenRanges.length)&&this.applyHiddenRanges(t)}applyHiddenRanges(e){this._hiddenRanges=e,this._hasLineChanges=!1,this._updateEventEmitter.fire(e)}hasRanges(){return this._hiddenRanges.length>0}isHidden(e){return Wue(this._hiddenRanges,e)!==null}adjustSelections(e){let t=!1;const i=this._foldingModel.textModel;let s=null;const r=o=>((!s||!vbt(o,s))&&(s=Wue(this._hiddenRanges,o)),s?s.startLineNumber-1:null);for(let o=0,a=e.length;o<a;o++){let l=e[o];const c=r(l.startLineNumber);c&&(l=l.setStartPosition(c,i.getLineMaxColumn(c)),t=!0);const d=r(l.endLineNumber);d&&(l=l.setEndPosition(d,i.getLineMaxColumn(d)),t=!0),e[o]=l}return t}dispose(){this.hiddenRanges.length>0&&(this._hiddenRanges=[],this._updateEventEmitter.fire(this._hiddenRanges)),this._foldingModelListener&&(this._foldingModelListener.dispose(),this._foldingModelListener=null)}}function vbt(n,e){return n>=e.startLineNumber&&n<=e.endLineNumber}function Wue(n,e){const t=UI(n,i=>e<i.startLineNumber)-1;return t>=0&&n[t].endLineNumber>=e?n[t]:null}const bbt=5e3,wbt="indent";class aee{constructor(e,t,i){this.editorModel=e,this.languageConfigurationService=t,this.foldingRangesLimit=i,this.id=wbt}dispose(){}compute(e){const t=this.languageConfigurationService.getLanguageConfiguration(this.editorModel.getLanguageId()).foldingRules,i=t&&!!t.offSide,s=t&&t.markers;return Promise.resolve(Sbt(this.editorModel,i,s,this.foldingRangesLimit))}}let Cbt=class{constructor(e){this._startIndexes=[],this._endIndexes=[],this._indentOccurrences=[],this._length=0,this._foldingRangesLimit=e}insertFirst(e,t,i){if(e>uu||t>uu)return;const s=this._length;this._startIndexes[s]=e,this._endIndexes[s]=t,this._length++,i<1e3&&(this._indentOccurrences[i]=(this._indentOccurrences[i]||0)+1)}toIndentRanges(e){const t=this._foldingRangesLimit.limit;if(this._length<=t){this._foldingRangesLimit.update(this._length,!1);const i=new Uint32Array(this._length),s=new Uint32Array(this._length);for(let r=this._length-1,o=0;r>=0;r--,o++)i[o]=this._startIndexes[r],s[o]=this._endIndexes[r];return new kl(i,s)}else{this._foldingRangesLimit.update(this._length,t);let i=0,s=this._indentOccurrences.length;for(let l=0;l<this._indentOccurrences.length;l++){const c=this._indentOccurrences[l];if(c){if(c+i>t){s=l;break}i+=c}}const r=e.getOptions().tabSize,o=new Uint32Array(t),a=new Uint32Array(t);for(let l=this._length-1,c=0;l>=0;l--){const d=this._startIndexes[l],u=e.getLineContent(d),h=EB(u,r);(h<s||h===s&&i++<t)&&(o[c]=d,a[c]=this._endIndexes[l],c++)}return new kl(o,a)}}};const ybt={limit:bbt,update:()=>{}};function Sbt(n,e,t,i=ybt){const s=n.getOptions().tabSize,r=new Cbt(i);let o;t&&(o=new RegExp(`(${t.start.source})|(?:${t.end.source})`));const a=[],l=n.getLineCount()+1;a.push({indent:-1,endAbove:l,line:l});for(let c=n.getLineCount();c>0;c--){const d=n.getLineContent(c),u=EB(d,s);let h=a[a.length-1];if(u===-1){e&&(h.endAbove=c);continue}let f;if(o&&(f=d.match(o)))if(f[1]){let g=a.length-1;for(;g>0&&a[g].indent!==-2;)g--;if(g>0){a.length=g+1,h=a[g],r.insertFirst(c,h.line,u),h.line=c,h.indent=u,h.endAbove=c;continue}}else{a.push({indent:-2,endAbove:c,line:c});continue}if(h.indent>u){do a.pop(),h=a[a.length-1];while(h.indent>u);const g=h.endAbove-1;g-c>=1&&r.insertFirst(c,g,u)}h.indent===u?h.endAbove=c:a.push({indent:u,endAbove:c,line:c})}return r.toIndentRanges(n)}const xbt=B("editor.foldBackground",{light:kt(ym,.3),dark:kt(ym,.3),hcDark:null,hcLight:null},v("foldBackgroundBackground","Background color behind folded ranges. The color must not be opaque so as not to hide underlying decorations."),!0);B("editor.foldPlaceholderForeground",{light:"#808080",dark:"#808080",hcDark:null,hcLight:null},v("collapsedTextColor","Color of the collapsed text after the first line of a folded range."));B("editorGutter.foldingControlForeground",RP,v("editorGutter.foldingControlForeground","Color of the folding control in the editor gutter."));const gF=Xi("folding-expanded",ye.chevronDown,v("foldingExpandedIcon","Icon for expanded ranges in the editor glyph margin.")),pF=Xi("folding-collapsed",ye.chevronRight,v("foldingCollapsedIcon","Icon for collapsed ranges in the editor glyph margin.")),Hue=Xi("folding-manual-collapsed",pF,v("foldingManualCollapedIcon","Icon for manually collapsed ranges in the editor glyph margin.")),Vue=Xi("folding-manual-expanded",gF,v("foldingManualExpandedIcon","Icon for manually expanded ranges in the editor glyph margin.")),m6={color:Dn(xbt),position:1},WC=v("linesCollapsed","Click to expand the range."),RA=v("linesExpanded","Click to collapse the range."),ns=class ns{constructor(e){this.editor=e,this.showFoldingControls="mouseover",this.showFoldingHighlights=!0}getDecorationOption(e,t,i){return t?ns.HIDDEN_RANGE_DECORATION:this.showFoldingControls==="never"?e?this.showFoldingHighlights?ns.NO_CONTROLS_COLLAPSED_HIGHLIGHTED_RANGE_DECORATION:ns.NO_CONTROLS_COLLAPSED_RANGE_DECORATION:ns.NO_CONTROLS_EXPANDED_RANGE_DECORATION:e?i?this.showFoldingHighlights?ns.MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:ns.MANUALLY_COLLAPSED_VISUAL_DECORATION:this.showFoldingHighlights?ns.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:ns.COLLAPSED_VISUAL_DECORATION:this.showFoldingControls==="mouseover"?i?ns.MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION:ns.EXPANDED_AUTO_HIDE_VISUAL_DECORATION:i?ns.MANUALLY_EXPANDED_VISUAL_DECORATION:ns.EXPANDED_VISUAL_DECORATION}changeDecorations(e){return this.editor.changeDecorations(e)}removeDecorations(e){this.editor.removeDecorations(e)}};ns.COLLAPSED_VISUAL_DECORATION=_t.register({description:"folding-collapsed-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0,linesDecorationsTooltip:WC,firstLineDecorationClassName:ot.asClassName(pF)}),ns.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=_t.register({description:"folding-collapsed-highlighted-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",minimap:m6,isWholeLine:!0,linesDecorationsTooltip:WC,firstLineDecorationClassName:ot.asClassName(pF)}),ns.MANUALLY_COLLAPSED_VISUAL_DECORATION=_t.register({description:"folding-manually-collapsed-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0,linesDecorationsTooltip:WC,firstLineDecorationClassName:ot.asClassName(Hue)}),ns.MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=_t.register({description:"folding-manually-collapsed-highlighted-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",minimap:m6,isWholeLine:!0,linesDecorationsTooltip:WC,firstLineDecorationClassName:ot.asClassName(Hue)}),ns.NO_CONTROLS_COLLAPSED_RANGE_DECORATION=_t.register({description:"folding-no-controls-range-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0,linesDecorationsTooltip:WC}),ns.NO_CONTROLS_COLLAPSED_HIGHLIGHTED_RANGE_DECORATION=_t.register({description:"folding-no-controls-range-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",minimap:m6,isWholeLine:!0,linesDecorationsTooltip:WC}),ns.EXPANDED_VISUAL_DECORATION=_t.register({description:"folding-expanded-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+ot.asClassName(gF),linesDecorationsTooltip:RA}),ns.EXPANDED_AUTO_HIDE_VISUAL_DECORATION=_t.register({description:"folding-expanded-auto-hide-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:ot.asClassName(gF),linesDecorationsTooltip:RA}),ns.MANUALLY_EXPANDED_VISUAL_DECORATION=_t.register({description:"folding-manually-expanded-visual-decoration",stickiness:0,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+ot.asClassName(Vue),linesDecorationsTooltip:RA}),ns.MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION=_t.register({description:"folding-manually-expanded-auto-hide-visual-decoration",stickiness:0,isWholeLine:!0,firstLineDecorationClassName:ot.asClassName(Vue),linesDecorationsTooltip:RA}),ns.NO_CONTROLS_EXPANDED_RANGE_DECORATION=_t.register({description:"folding-no-controls-range-decoration",stickiness:0,isWholeLine:!0}),ns.HIDDEN_RANGE_DECORATION=_t.register({description:"folding-hidden-range-decoration",stickiness:1});let nq=ns;const Lbt={},kbt="syntax";class lee{constructor(e,t,i,s,r){this.editorModel=e,this.providers=t,this.handleFoldingRangesChange=i,this.foldingRangesLimit=s,this.fallbackRangeProvider=r,this.id=kbt,this.disposables=new ue,r&&this.disposables.add(r);for(const o of t)typeof o.onDidChange=="function"&&this.disposables.add(o.onDidChange(i))}compute(e){return Ebt(this.providers,this.editorModel,e).then(t=>{var i;return t?Dbt(t,this.foldingRangesLimit):((i=this.fallbackRangeProvider)==null?void 0:i.compute(e))??null})}dispose(){this.disposables.dispose()}}function Ebt(n,e,t){let i=null;const s=n.map((r,o)=>Promise.resolve(r.provideFoldingRanges(e,Lbt,t)).then(a=>{if(!t.isCancellationRequested&&Array.isArray(a)){Array.isArray(i)||(i=[]);const l=e.getLineCount();for(const c of a)c.start>0&&c.end>c.start&&c.end<=l&&i.push({start:c.start,end:c.end,rank:o,kind:c.kind})}},Wn));return Promise.all(s).then(r=>i)}class Ibt{constructor(e){this._startIndexes=[],this._endIndexes=[],this._nestingLevels=[],this._nestingLevelCounts=[],this._types=[],this._length=0,this._foldingRangesLimit=e}add(e,t,i,s){if(e>uu||t>uu)return;const r=this._length;this._startIndexes[r]=e,this._endIndexes[r]=t,this._nestingLevels[r]=s,this._types[r]=i,this._length++,s<30&&(this._nestingLevelCounts[s]=(this._nestingLevelCounts[s]||0)+1)}toIndentRanges(){const e=this._foldingRangesLimit.limit;if(this._length<=e){this._foldingRangesLimit.update(this._length,!1);const t=new Uint32Array(this._length),i=new Uint32Array(this._length);for(let s=0;s<this._length;s++)t[s]=this._startIndexes[s],i[s]=this._endIndexes[s];return new kl(t,i,this._types)}else{this._foldingRangesLimit.update(this._length,e);let t=0,i=this._nestingLevelCounts.length;for(let a=0;a<this._nestingLevelCounts.length;a++){const l=this._nestingLevelCounts[a];if(l){if(l+t>e){i=a;break}t+=l}}const s=new Uint32Array(e),r=new Uint32Array(e),o=[];for(let a=0,l=0;a<this._length;a++){const c=this._nestingLevels[a];(c<i||c===i&&t++<e)&&(s[l]=this._startIndexes[a],r[l]=this._endIndexes[a],o[l]=this._types[a],l++)}return new kl(s,r,o)}}}function Dbt(n,e){const t=n.sort((o,a)=>{let l=o.start-a.start;return l===0&&(l=o.rank-a.rank),l}),i=new Ibt(e);let s;const r=[];for(const o of t)if(!s)s=o,i.add(o.start,o.end,o.kind&&o.kind.value,r.length);else if(o.start>s.start)if(o.end<=s.end)r.push(s),s=o,i.add(o.start,o.end,o.kind&&o.kind.value,r.length);else{if(o.start>s.end){do s=r.pop();while(s&&o.start>s.end);s&&r.push(s),s=o}i.add(o.start,o.end,o.kind&&o.kind.value,r.length)}return i.toIndentRanges()}var Nbt=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},QL=function(n,e){return function(t,i){e(t,i,n)}},Xv;const yr=new Re("foldingEnabled",!1);var Iw;let $_=(Iw=class extends ee{static get(e){return e.getContribution(Xv.ID)}static getFoldingRangeProviders(e,t){var s;const i=e.foldingRangeProvider.ordered(t);return((s=Xv._foldingRangeSelector)==null?void 0:s.call(Xv,i,t))??i}constructor(e,t,i,s,r,o){super(),this.contextKeyService=t,this.languageConfigurationService=i,this.languageFeaturesService=o,this.localToDispose=this._register(new ue),this.editor=e,this._foldingLimitReporter=new oke(e);const a=this.editor.getOptions();this._isEnabled=a.get(43),this._useFoldingProviders=a.get(44)!=="indentation",this._unfoldOnClickAfterEndOfLine=a.get(48),this._restoringViewState=!1,this._currentModelHasFoldedImports=!1,this._foldingImportsByDefault=a.get(46),this.updateDebounceInfo=r.for(o.foldingRangeProvider,"Folding",{min:200}),this.foldingModel=null,this.hiddenRangeModel=null,this.rangeProvider=null,this.foldingRegionPromise=null,this.foldingModelPromise=null,this.updateScheduler=null,this.cursorChangedScheduler=null,this.mouseDownInfo=null,this.foldingDecorationProvider=new nq(e),this.foldingDecorationProvider.showFoldingControls=a.get(111),this.foldingDecorationProvider.showFoldingHighlights=a.get(45),this.foldingEnabled=yr.bindTo(this.contextKeyService),this.foldingEnabled.set(this._isEnabled),this._register(this.editor.onDidChangeModel(()=>this.onModelChanged())),this._register(this.editor.onDidChangeConfiguration(l=>{if(l.hasChanged(43)&&(this._isEnabled=this.editor.getOptions().get(43),this.foldingEnabled.set(this._isEnabled),this.onModelChanged()),l.hasChanged(47)&&this.onModelChanged(),l.hasChanged(111)||l.hasChanged(45)){const c=this.editor.getOptions();this.foldingDecorationProvider.showFoldingControls=c.get(111),this.foldingDecorationProvider.showFoldingHighlights=c.get(45),this.triggerFoldingModelChanged()}l.hasChanged(44)&&(this._useFoldingProviders=this.editor.getOptions().get(44)!=="indentation",this.onFoldingStrategyChanged()),l.hasChanged(48)&&(this._unfoldOnClickAfterEndOfLine=this.editor.getOptions().get(48)),l.hasChanged(46)&&(this._foldingImportsByDefault=this.editor.getOptions().get(46))})),this.onModelChanged()}saveViewState(){const e=this.editor.getModel();if(!e||!this._isEnabled||e.isTooLargeForTokenization())return{};if(this.foldingModel){const t=this.foldingModel.getMemento(),i=this.rangeProvider?this.rangeProvider.id:void 0;return{collapsedRegions:t,lineCount:e.getLineCount(),provider:i,foldedImports:this._currentModelHasFoldedImports}}}restoreViewState(e){const t=this.editor.getModel();if(!(!t||!this._isEnabled||t.isTooLargeForTokenization()||!this.hiddenRangeModel)&&e&&(this._currentModelHasFoldedImports=!!e.foldedImports,e.collapsedRegions&&e.collapsedRegions.length>0&&this.foldingModel)){this._restoringViewState=!0;try{this.foldingModel.applyMemento(e.collapsedRegions)}finally{this._restoringViewState=!1}}}onModelChanged(){this.localToDispose.clear();const e=this.editor.getModel();!this._isEnabled||!e||e.isTooLargeForTokenization()||(this._currentModelHasFoldedImports=!1,this.foldingModel=new ubt(e,this.foldingDecorationProvider),this.localToDispose.add(this.foldingModel),this.hiddenRangeModel=new _bt(this.foldingModel),this.localToDispose.add(this.hiddenRangeModel),this.localToDispose.add(this.hiddenRangeModel.onDidChange(t=>this.onHiddenRangesChanges(t))),this.updateScheduler=new Rc(this.updateDebounceInfo.get(e)),this.cursorChangedScheduler=new yi(()=>this.revealCursor(),200),this.localToDispose.add(this.cursorChangedScheduler),this.localToDispose.add(this.languageFeaturesService.foldingRangeProvider.onDidChange(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelLanguageConfiguration(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelContent(t=>this.onDidChangeModelContent(t))),this.localToDispose.add(this.editor.onDidChangeCursorPosition(()=>this.onCursorPositionChanged())),this.localToDispose.add(this.editor.onMouseDown(t=>this.onEditorMouseDown(t))),this.localToDispose.add(this.editor.onMouseUp(t=>this.onEditorMouseUp(t))),this.localToDispose.add({dispose:()=>{var t,i;this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),(t=this.updateScheduler)==null||t.cancel(),this.updateScheduler=null,this.foldingModel=null,this.foldingModelPromise=null,this.hiddenRangeModel=null,this.cursorChangedScheduler=null,(i=this.rangeProvider)==null||i.dispose(),this.rangeProvider=null}}),this.triggerFoldingModelChanged())}onFoldingStrategyChanged(){var e;(e=this.rangeProvider)==null||e.dispose(),this.rangeProvider=null,this.triggerFoldingModelChanged()}getRangeProvider(e){if(this.rangeProvider)return this.rangeProvider;const t=new aee(e,this.languageConfigurationService,this._foldingLimitReporter);if(this.rangeProvider=t,this._useFoldingProviders&&this.foldingModel){const i=Xv.getFoldingRangeProviders(this.languageFeaturesService,e);i.length>0&&(this.rangeProvider=new lee(e,i,()=>this.triggerFoldingModelChanged(),this._foldingLimitReporter,t))}return this.rangeProvider}getFoldingModel(){return this.foldingModelPromise}onDidChangeModelContent(e){var t;(t=this.hiddenRangeModel)==null||t.notifyChangeModelContent(e),this.triggerFoldingModelChanged()}triggerFoldingModelChanged(){this.updateScheduler&&(this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.foldingModelPromise=this.updateScheduler.trigger(()=>{const e=this.foldingModel;if(!e)return null;const t=new js,i=this.getRangeProvider(e.textModel),s=this.foldingRegionPromise=Ds(r=>i.compute(r));return s.then(r=>{if(r&&s===this.foldingRegionPromise){let o;if(this._foldingImportsByDefault&&!this._currentModelHasFoldedImports){const c=r.setCollapsedAllOfType(I_.Imports.value,!0);c&&(o=ju.capture(this.editor),this._currentModelHasFoldedImports=c)}const a=this.editor.getSelections();e.update(r,Tbt(a)),o==null||o.restore(this.editor);const l=this.updateDebounceInfo.update(e.textModel,t.elapsed());this.updateScheduler&&(this.updateScheduler.defaultDelay=l)}return e})}).then(void 0,e=>(pt(e),null)))}onHiddenRangesChanges(e){if(this.hiddenRangeModel&&e.length&&!this._restoringViewState){const t=this.editor.getSelections();t&&this.hiddenRangeModel.adjustSelections(t)&&this.editor.setSelections(t)}this.editor.setHiddenAreas(e,this)}onCursorPositionChanged(){this.hiddenRangeModel&&this.hiddenRangeModel.hasRanges()&&this.cursorChangedScheduler.schedule()}revealCursor(){const e=this.getFoldingModel();e&&e.then(t=>{if(t){const i=this.editor.getSelections();if(i&&i.length>0){const s=[];for(const r of i){const o=r.selectionStartLineNumber;this.hiddenRangeModel&&this.hiddenRangeModel.isHidden(o)&&s.push(...t.getAllRegionsAtLine(o,a=>a.isCollapsed&&o>a.startLineNumber))}s.length&&(t.toggleCollapseState(s),this.reveal(i[0].getPosition()))}}}).then(void 0,pt)}onEditorMouseDown(e){if(this.mouseDownInfo=null,!this.hiddenRangeModel||!e.target||!e.target.range||!e.event.leftButton&&!e.event.middleButton)return;const t=e.target.range;let i=!1;switch(e.target.type){case 4:{const s=e.target.detail,r=e.target.element.offsetLeft;if(s.offsetX-r<4)return;i=!0;break}case 7:{if(this._unfoldOnClickAfterEndOfLine&&this.hiddenRangeModel.hasRanges()&&!e.target.detail.isAfterLines)break;return}case 6:{if(this.hiddenRangeModel.hasRanges()){const s=this.editor.getModel();if(s&&t.startColumn===s.getLineMaxColumn(t.startLineNumber))break}return}default:return}this.mouseDownInfo={lineNumber:t.startLineNumber,iconClicked:i}}onEditorMouseUp(e){const t=this.foldingModel;if(!t||!this.mouseDownInfo||!e.target)return;const i=this.mouseDownInfo.lineNumber,s=this.mouseDownInfo.iconClicked,r=e.target.range;if(!r||r.startLineNumber!==i)return;if(s){if(e.target.type!==4)return}else{const a=this.editor.getModel();if(!a||r.startColumn!==a.getLineMaxColumn(i))return}const o=t.getRegionAtLine(i);if(o&&o.startLineNumber===i){const a=o.isCollapsed;if(s||a){const l=e.event.altKey;let c=[];if(l){const d=h=>!h.containedBy(o)&&!o.containedBy(h),u=t.getRegionsInside(null,d);for(const h of u)h.isCollapsed&&c.push(h);c.length===0&&(c=u)}else{const d=e.event.middleButton||e.event.shiftKey;if(d)for(const u of t.getRegionsInside(o))u.isCollapsed===a&&c.push(u);(a||!d||c.length===0)&&c.push(o)}t.toggleCollapseState(c),this.reveal({lineNumber:i,column:1})}}}reveal(e){this.editor.revealPositionInCenterIfOutsideViewport(e,0)}},Xv=Iw,Iw.ID="editor.contrib.folding",Iw);$_=Xv=Nbt([QL(1,at),QL(2,vn),QL(3,jn),QL(4,Zl),QL(5,Be)],$_);class oke{constructor(e){this.editor=e,this._onDidChange=new X,this._computed=0,this._limited=!1}get limit(){return this.editor.getOptions().get(47)}update(e,t){(e!==this._computed||t!==this._limited)&&(this._computed=e,this._limited=t,this._onDidChange.fire())}}class zr extends Oe{runEditorCommand(e,t,i){const s=e.get(vn),r=$_.get(t);if(!r)return;const o=r.getFoldingModel();if(o)return this.reportTelemetry(e,t),o.then(a=>{if(a){this.invoke(r,a,t,i,s);const l=t.getSelection();l&&r.reveal(l.getStartPosition())}})}getSelectedLines(e){const t=e.getSelections();return t?t.map(i=>i.startLineNumber):[]}getLineNumbers(e,t){return e&&e.selectionLines?e.selectionLines.map(i=>i+1):this.getSelectedLines(t)}run(e,t){}}function Tbt(n){return!n||n.length===0?{startsInside:()=>!1}:{startsInside(e,t){for(const i of n){const s=i.startLineNumber;if(s>=e&&s<=t)return!0}return!1}}}function ake(n){if(!ro(n)){if(!zs(n))return!1;const e=n;if(!ro(e.levels)&&!L_(e.levels)||!ro(e.direction)&&!ca(e.direction)||!ro(e.selectionLines)&&(!Array.isArray(e.selectionLines)||!e.selectionLines.every(L_)))return!1}return!0}class Rbt extends zr{constructor(){super({id:"editor.unfold",label:v("unfoldAction.label","Unfold"),alias:"Unfold",precondition:yr,kbOpts:{kbExpr:F.editorTextFocus,primary:3166,mac:{primary:2654},weight:100},metadata:{description:"Unfold the content in the editor",args:[{name:"Unfold editor argument",description:`Property-value pairs that can be passed through this argument:
						* 'levels': Number of levels to unfold. If not set, defaults to 1.
						* 'direction': If 'up', unfold given number of levels up otherwise unfolds down.
						* 'selectionLines': Array of the start lines (0-based) of the editor selections to apply the unfold action to. If not set, the active selection(s) will be used.
						`,constraint:ake,schema:{type:"object",properties:{levels:{type:"number",default:1},direction:{type:"string",enum:["up","down"],default:"down"},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,t,i,s){const r=s&&s.levels||1,o=this.getLineNumbers(s,i);s&&s.direction==="up"?ske(t,!1,r,o):Zx(t,!1,r,o)}}class Abt extends zr{constructor(){super({id:"editor.unfoldRecursively",label:v("unFoldRecursivelyAction.label","Unfold Recursively"),alias:"Unfold Recursively",precondition:yr,kbOpts:{kbExpr:F.editorTextFocus,primary:as(2089,2142),weight:100}})}invoke(e,t,i,s){Zx(t,!1,Number.MAX_VALUE,this.getSelectedLines(i))}}class Mbt extends zr{constructor(){super({id:"editor.fold",label:v("foldAction.label","Fold"),alias:"Fold",precondition:yr,kbOpts:{kbExpr:F.editorTextFocus,primary:3164,mac:{primary:2652},weight:100},metadata:{description:"Fold the content in the editor",args:[{name:"Fold editor argument",description:`Property-value pairs that can be passed through this argument:
							* 'levels': Number of levels to fold.
							* 'direction': If 'up', folds given number of levels up otherwise folds down.
							* 'selectionLines': Array of the start lines (0-based) of the editor selections to apply the fold action to. If not set, the active selection(s) will be used.
							If no levels or direction is set, folds the region at the locations or if already collapsed, the first uncollapsed parent instead.
						`,constraint:ake,schema:{type:"object",properties:{levels:{type:"number"},direction:{type:"string",enum:["up","down"]},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,t,i,s){const r=this.getLineNumbers(s,i),o=s&&s.levels,a=s&&s.direction;typeof o!="number"&&typeof a!="string"?hbt(t,!0,r):a==="up"?ske(t,!0,o||1,r):Zx(t,!0,o||1,r)}}class Pbt extends zr{constructor(){super({id:"editor.toggleFold",label:v("toggleFoldAction.label","Toggle Fold"),alias:"Toggle Fold",precondition:yr,kbOpts:{kbExpr:F.editorTextFocus,primary:as(2089,2090),weight:100}})}invoke(e,t,i){const s=this.getSelectedLines(i);see(t,1,s)}}class Obt extends zr{constructor(){super({id:"editor.foldRecursively",label:v("foldRecursivelyAction.label","Fold Recursively"),alias:"Fold Recursively",precondition:yr,kbOpts:{kbExpr:F.editorTextFocus,primary:as(2089,2140),weight:100}})}invoke(e,t,i){const s=this.getSelectedLines(i);Zx(t,!0,Number.MAX_VALUE,s)}}class Fbt extends zr{constructor(){super({id:"editor.toggleFoldRecursively",label:v("toggleFoldRecursivelyAction.label","Toggle Fold Recursively"),alias:"Toggle Fold Recursively",precondition:yr,kbOpts:{kbExpr:F.editorTextFocus,primary:as(2089,3114),weight:100}})}invoke(e,t,i){const s=this.getSelectedLines(i);see(t,Number.MAX_VALUE,s)}}class Bbt extends zr{constructor(){super({id:"editor.foldAllBlockComments",label:v("foldAllBlockComments.label","Fold All Block Comments"),alias:"Fold All Block Comments",precondition:yr,kbOpts:{kbExpr:F.editorTextFocus,primary:as(2089,2138),weight:100}})}invoke(e,t,i,s,r){if(t.regions.hasTypes())oee(t,I_.Comment.value,!0);else{const o=i.getModel();if(!o)return;const a=r.getLanguageConfiguration(o.getLanguageId()).comments;if(a&&a.blockCommentStartToken){const l=new RegExp("^\\s*"+$l(a.blockCommentStartToken));ree(t,l,!0)}}}}class Wbt extends zr{constructor(){super({id:"editor.foldAllMarkerRegions",label:v("foldAllMarkerRegions.label","Fold All Regions"),alias:"Fold All Regions",precondition:yr,kbOpts:{kbExpr:F.editorTextFocus,primary:as(2089,2077),weight:100}})}invoke(e,t,i,s,r){if(t.regions.hasTypes())oee(t,I_.Region.value,!0);else{const o=i.getModel();if(!o)return;const a=r.getLanguageConfiguration(o.getLanguageId()).foldingRules;if(a&&a.markers&&a.markers.start){const l=new RegExp(a.markers.start);ree(t,l,!0)}}}}class Hbt extends zr{constructor(){super({id:"editor.unfoldAllMarkerRegions",label:v("unfoldAllMarkerRegions.label","Unfold All Regions"),alias:"Unfold All Regions",precondition:yr,kbOpts:{kbExpr:F.editorTextFocus,primary:as(2089,2078),weight:100}})}invoke(e,t,i,s,r){if(t.regions.hasTypes())oee(t,I_.Region.value,!1);else{const o=i.getModel();if(!o)return;const a=r.getLanguageConfiguration(o.getLanguageId()).foldingRules;if(a&&a.markers&&a.markers.start){const l=new RegExp(a.markers.start);ree(t,l,!1)}}}}class Vbt extends zr{constructor(){super({id:"editor.foldAllExcept",label:v("foldAllExcept.label","Fold All Except Selected"),alias:"Fold All Except Selected",precondition:yr,kbOpts:{kbExpr:F.editorTextFocus,primary:as(2089,2136),weight:100}})}invoke(e,t,i){const s=this.getSelectedLines(i);rke(t,!0,s)}}class zbt extends zr{constructor(){super({id:"editor.unfoldAllExcept",label:v("unfoldAllExcept.label","Unfold All Except Selected"),alias:"Unfold All Except Selected",precondition:yr,kbOpts:{kbExpr:F.editorTextFocus,primary:as(2089,2134),weight:100}})}invoke(e,t,i){const s=this.getSelectedLines(i);rke(t,!1,s)}}class Ubt extends zr{constructor(){super({id:"editor.foldAll",label:v("foldAllAction.label","Fold All"),alias:"Fold All",precondition:yr,kbOpts:{kbExpr:F.editorTextFocus,primary:as(2089,2069),weight:100}})}invoke(e,t,i){Zx(t,!0)}}class $bt extends zr{constructor(){super({id:"editor.unfoldAll",label:v("unfoldAllAction.label","Unfold All"),alias:"Unfold All",precondition:yr,kbOpts:{kbExpr:F.editorTextFocus,primary:as(2089,2088),weight:100}})}invoke(e,t,i){Zx(t,!1)}}const ny=class ny extends zr{getFoldingLevel(){return parseInt(this.id.substr(ny.ID_PREFIX.length))}invoke(e,t,i){fbt(t,this.getFoldingLevel(),!0,this.getSelectedLines(i))}};ny.ID_PREFIX="editor.foldLevel",ny.ID=e=>ny.ID_PREFIX+e;let mF=ny;class jbt extends zr{constructor(){super({id:"editor.gotoParentFold",label:v("gotoParentFold.label","Go to Parent Fold"),alias:"Go to Parent Fold",precondition:yr,kbOpts:{kbExpr:F.editorTextFocus,weight:100}})}invoke(e,t,i){const s=this.getSelectedLines(i);if(s.length>0){const r=gbt(s[0],t);r!==null&&i.setSelection({startLineNumber:r,startColumn:1,endLineNumber:r,endColumn:1})}}}class Kbt extends zr{constructor(){super({id:"editor.gotoPreviousFold",label:v("gotoPreviousFold.label","Go to Previous Folding Range"),alias:"Go to Previous Folding Range",precondition:yr,kbOpts:{kbExpr:F.editorTextFocus,weight:100}})}invoke(e,t,i){const s=this.getSelectedLines(i);if(s.length>0){const r=pbt(s[0],t);r!==null&&i.setSelection({startLineNumber:r,startColumn:1,endLineNumber:r,endColumn:1})}}}class qbt extends zr{constructor(){super({id:"editor.gotoNextFold",label:v("gotoNextFold.label","Go to Next Folding Range"),alias:"Go to Next Folding Range",precondition:yr,kbOpts:{kbExpr:F.editorTextFocus,weight:100}})}invoke(e,t,i){const s=this.getSelectedLines(i);if(s.length>0){const r=mbt(s[0],t);r!==null&&i.setSelection({startLineNumber:r,startColumn:1,endLineNumber:r,endColumn:1})}}}class Gbt extends zr{constructor(){super({id:"editor.createFoldingRangeFromSelection",label:v("createManualFoldRange.label","Create Folding Range from Selection"),alias:"Create Folding Range from Selection",precondition:yr,kbOpts:{kbExpr:F.editorTextFocus,primary:as(2089,2135),weight:100}})}invoke(e,t,i){var o;const s=[],r=i.getSelections();if(r){for(const a of r){let l=a.endLineNumber;a.endColumn===1&&--l,l>a.startLineNumber&&(s.push({startLineNumber:a.startLineNumber,endLineNumber:l,type:void 0,isCollapsed:!0,source:1}),i.setSelection({startLineNumber:a.startLineNumber,startColumn:1,endLineNumber:a.startLineNumber,endColumn:1}))}if(s.length>0){s.sort((l,c)=>l.startLineNumber-c.startLineNumber);const a=kl.sanitizeAndMerge(t.regions,s,(o=i.getModel())==null?void 0:o.getLineCount());t.updatePost(kl.fromFoldRanges(a))}}}}class Ybt extends zr{constructor(){super({id:"editor.removeManualFoldingRanges",label:v("removeManualFoldingRanges.label","Remove Manual Folding Ranges"),alias:"Remove Manual Folding Ranges",precondition:yr,kbOpts:{kbExpr:F.editorTextFocus,primary:as(2089,2137),weight:100}})}invoke(e,t,i){const s=i.getSelections();if(s){const r=[];for(const o of s){const{startLineNumber:a,endLineNumber:l}=o;r.push(l>=a?{startLineNumber:a,endLineNumber:l}:{endLineNumber:l,startLineNumber:a})}t.removeManualRanges(r),e.triggerFoldingModelChanged()}}}Xt($_.ID,$_,0);we(Rbt);we(Abt);we(Mbt);we(Obt);we(Fbt);we(Ubt);we($bt);we(Bbt);we(Wbt);we(Hbt);we(Vbt);we(zbt);we(Pbt);we(jbt);we(Kbt);we(qbt);we(Gbt);we(Ybt);for(let n=1;n<=7;n++)hGe(new mF({id:mF.ID(n),label:v("foldLevelAction.label","Fold Level {0}",n),alias:`Fold Level ${n}`,precondition:yr,kbOpts:{kbExpr:F.editorTextFocus,primary:as(2089,2048|21+n),weight:100}}));Gt.registerCommand("_executeFoldingRangeProvider",async function(n,...e){const[t]=e;if(!(t instanceof Xe))throw Ec();const i=n.get(Be),s=n.get(Zi).getModel(t);if(!s)throw Ec();const r=n.get(Tt);if(!r.getValue("editor.folding",{resource:t}))return[];const o=n.get(vn),a=r.getValue("editor.foldingStrategy",{resource:t}),l={get limit(){return r.getValue("editor.foldingMaximumRegions",{resource:t})},update:(f,g)=>{}},c=new aee(s,o,l);let d=c;if(a!=="indentation"){const f=$_.getFoldingRangeProviders(i,s);f.length&&(d=new lee(s,f,()=>{},l,c))}const u=await d.compute(xt.None),h=[];try{if(u)for(let f=0;f<u.length;f++){const g=u.getType(f);h.push({start:u.getStartLineNumber(f),end:u.getEndLineNumber(f),kind:g?I_.fromValue(g):void 0})}return h}finally{d.dispose()}});class Zbt extends Oe{constructor(){super({id:"editor.action.fontZoomIn",label:v("EditorFontZoomIn.label","Increase Editor Font Size"),alias:"Increase Editor Font Size",precondition:void 0})}run(e,t){vc.setZoomLevel(vc.getZoomLevel()+1)}}class Xbt extends Oe{constructor(){super({id:"editor.action.fontZoomOut",label:v("EditorFontZoomOut.label","Decrease Editor Font Size"),alias:"Decrease Editor Font Size",precondition:void 0})}run(e,t){vc.setZoomLevel(vc.getZoomLevel()-1)}}class Qbt extends Oe{constructor(){super({id:"editor.action.fontZoomReset",label:v("EditorFontZoomReset.label","Reset Editor Font Size"),alias:"Reset Editor Font Size",precondition:void 0})}run(e,t){vc.setZoomLevel(0)}}we(Zbt);we(Xbt);we(Qbt);var lke=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},xE=function(n,e){return function(t,i){e(t,i,n)}},rS;let _F=(rS=class{constructor(e,t,i,s){this._editor=e,this._languageFeaturesService=t,this._workerService=i,this._accessibilitySignalService=s,this._disposables=new ue,this._sessionDisposables=new ue,this._disposables.add(t.onTypeFormattingEditProvider.onDidChange(this._update,this)),this._disposables.add(e.onDidChangeModel(()=>this._update())),this._disposables.add(e.onDidChangeModelLanguage(()=>this._update())),this._disposables.add(e.onDidChangeConfiguration(r=>{r.hasChanged(56)&&this._update()})),this._update()}dispose(){this._disposables.dispose(),this._sessionDisposables.dispose()}_update(){if(this._sessionDisposables.clear(),!this._editor.getOption(56)||!this._editor.hasModel())return;const e=this._editor.getModel(),[t]=this._languageFeaturesService.onTypeFormattingEditProvider.ordered(e);if(!t||!t.autoFormatTriggerCharacters)return;const i=new yP;for(const s of t.autoFormatTriggerCharacters)i.add(s.charCodeAt(0));this._sessionDisposables.add(this._editor.onDidType(s=>{const r=s.charCodeAt(s.length-1);i.has(r)&&this._trigger(String.fromCharCode(r))}))}_trigger(e){if(!this._editor.hasModel()||this._editor.getSelections().length>1||!this._editor.getSelection().isEmpty())return;const t=this._editor.getModel(),i=this._editor.getPosition(),s=new mn,r=this._editor.onDidChangeModelContent(o=>{if(o.isFlush){s.cancel(),r.dispose();return}for(let a=0,l=o.changes.length;a<l;a++)if(o.changes[a].range.endLineNumber<=i.lineNumber){s.cancel(),r.dispose();return}});fxe(this._workerService,this._languageFeaturesService,t,i,e,t.getFormattingOptions(),s.token).then(o=>{s.token.isCancellationRequested||ao(o)&&(this._accessibilitySignalService.playSignal(Ll.format,{userGesture:!1}),QS.execute(this._editor,o,!0))}).finally(()=>{r.dispose()})}},rS.ID="editor.contrib.autoFormat",rS);_F=lke([xE(1,Be),xE(2,wa),xE(3,ov)],_F);var oS;let vF=(oS=class{constructor(e,t,i){this.editor=e,this._languageFeaturesService=t,this._instantiationService=i,this._callOnDispose=new ue,this._callOnModel=new ue,this._callOnDispose.add(e.onDidChangeConfiguration(()=>this._update())),this._callOnDispose.add(e.onDidChangeModel(()=>this._update())),this._callOnDispose.add(e.onDidChangeModelLanguage(()=>this._update())),this._callOnDispose.add(t.documentRangeFormattingEditProvider.onDidChange(this._update,this))}dispose(){this._callOnDispose.dispose(),this._callOnModel.dispose()}_update(){this._callOnModel.clear(),this.editor.getOption(55)&&this.editor.hasModel()&&this._languageFeaturesService.documentRangeFormattingEditProvider.has(this.editor.getModel())&&this._callOnModel.add(this.editor.onDidPaste(({range:e})=>this._trigger(e)))}_trigger(e){this.editor.hasModel()&&(this.editor.getSelections().length>1||this._instantiationService.invokeFunction(hxe,this.editor,e,2,Cu.None,xt.None,!1).catch(pt))}},oS.ID="editor.contrib.formatOnPaste",oS);vF=lke([xE(1,Be),xE(2,Ze)],vF);class Jbt extends Oe{constructor(){super({id:"editor.action.formatDocument",label:v("formatDocument.label","Format Document"),alias:"Format Document",precondition:he.and(F.notInCompositeEditor,F.writable,F.hasDocumentFormattingProvider),kbOpts:{kbExpr:F.editorTextFocus,primary:1572,linux:{primary:3111},weight:100},contextMenuOpts:{group:"1_modification",order:1.3}})}async run(e,t){if(t.hasModel()){const i=e.get(Ze);await e.get(nv).showWhile(i.invokeFunction(agt,t,1,Cu.None,xt.None,!0),250)}}}class ewt extends Oe{constructor(){super({id:"editor.action.formatSelection",label:v("formatSelection.label","Format Selection"),alias:"Format Selection",precondition:he.and(F.writable,F.hasDocumentSelectionFormattingProvider),kbOpts:{kbExpr:F.editorTextFocus,primary:as(2089,2084),weight:100},contextMenuOpts:{when:F.hasNonEmptySelection,group:"1_modification",order:1.31}})}async run(e,t){if(!t.hasModel())return;const i=e.get(Ze),s=t.getModel(),r=t.getSelections().map(a=>a.isEmpty()?new M(a.startLineNumber,1,a.startLineNumber,s.getLineMaxColumn(a.startLineNumber)):a);await e.get(nv).showWhile(i.invokeFunction(hxe,t,r,1,Cu.None,xt.None,!0),250)}}Xt(_F.ID,_F,2);Xt(vF.ID,vF,2);we(Jbt);we(ewt);Gt.registerCommand("editor.action.format",async n=>{const e=n.get(ri).getFocusedCodeEditor();if(!e||!e.hasModel())return;const t=n.get(Vi);e.getSelection().isEmpty()?await t.executeCommand("editor.action.formatDocument"):await t.executeCommand("editor.action.formatSelection")});var twt=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},_6=function(n,e){return function(t,i){e(t,i,n)}};class W1{remove(){var e;(e=this.parent)==null||e.children.delete(this.id)}static findId(e,t){let i;typeof e=="string"?i=`${t.id}/${e}`:(i=`${t.id}/${e.name}`,t.children.get(i)!==void 0&&(i=`${t.id}/${e.name}_${e.range.startLineNumber}_${e.range.startColumn}`));let s=i;for(let r=0;t.children.get(s)!==void 0;r++)s=`${i}_${r}`;return s}static empty(e){return e.children.size===0}}class sq extends W1{constructor(e,t,i){super(),this.id=e,this.parent=t,this.symbol=i,this.children=new Map}}class cke extends W1{constructor(e,t,i,s){super(),this.id=e,this.parent=t,this.label=i,this.order=s,this.children=new Map}}class sg extends W1{static create(e,t,i){const s=new mn(i),r=new sg(t.uri),o=e.ordered(t),a=o.map((c,d)=>{const u=W1.findId(`provider_${d}`,r),h=new cke(u,r,c.displayName??"Unknown Outline Provider",d);return Promise.resolve(c.provideDocumentSymbols(t,s.token)).then(f=>{for(const g of f||[])sg._makeOutlineElement(g,h);return h},f=>(Wn(f),h)).then(f=>{W1.empty(f)?f.remove():r._groups.set(u,f)})}),l=e.onDidChange(()=>{const c=e.ordered(t);dn(c,o)||s.cancel()});return Promise.all(a).then(()=>s.token.isCancellationRequested&&!i.isCancellationRequested?sg.create(e,t,i):r._compact()).finally(()=>{s.dispose(),l.dispose(),s.dispose()})}static _makeOutlineElement(e,t){const i=W1.findId(e,t),s=new sq(i,t,e);if(e.children)for(const r of e.children)sg._makeOutlineElement(r,s);t.children.set(s.id,s)}constructor(e){super(),this.uri=e,this.id="root",this.parent=void 0,this._groups=new Map,this.children=new Map,this.id="root",this.parent=void 0}_compact(){let e=0;for(const[t,i]of this._groups)i.children.size===0?this._groups.delete(t):e+=1;if(e!==1)this.children=this._groups;else{const t=qt.first(this._groups.values());for(const[,i]of t.children)i.parent=this,this.children.set(i.id,i)}return this}getTopLevelSymbols(){const e=[];for(const t of this.children.values())t instanceof sq?e.push(t.symbol):e.push(...qt.map(t.children.values(),i=>i.symbol));return e.sort((t,i)=>M.compareRangesUsingStarts(t.range,i.range))}asListOfDocumentSymbols(){const e=this.getTopLevelSymbols(),t=[];return sg._flattenDocumentSymbols(t,e,""),t.sort((i,s)=>Y.compare(M.getStartPosition(i.range),M.getStartPosition(s.range))||Y.compare(M.getEndPosition(s.range),M.getEndPosition(i.range)))}static _flattenDocumentSymbols(e,t,i){for(const s of t)e.push({kind:s.kind,tags:s.tags,name:s.name,detail:s.detail,containerName:s.containerName||i,range:s.range,selectionRange:s.selectionRange,children:void 0}),s.children&&sg._flattenDocumentSymbols(e,s.children,s.name)}}const pT=Wt("IOutlineModelService");let rq=class{constructor(e,t,i){this._languageFeaturesService=e,this._disposables=new ue,this._cache=new vf(10,.7),this._debounceInformation=t.for(e.documentSymbolProvider,"DocumentSymbols",{min:350}),this._disposables.add(i.onModelRemoved(s=>{this._cache.delete(s.id)}))}dispose(){this._disposables.dispose()}async getOrCreate(e,t){const i=this._languageFeaturesService.documentSymbolProvider,s=i.ordered(e);let r=this._cache.get(e.id);if(!r||r.versionId!==e.getVersionId()||!dn(r.provider,s)){const a=new mn;r={versionId:e.getVersionId(),provider:s,promiseCnt:0,source:a,promise:sg.create(i,e,a.token),model:void 0},this._cache.set(e.id,r);const l=Date.now();r.promise.then(c=>{r.model=c,this._debounceInformation.update(e,Date.now()-l)}).catch(c=>{this._cache.delete(e.id)})}if(r.model)return r.model;r.promiseCnt+=1;const o=t.onCancellationRequested(()=>{--r.promiseCnt===0&&(r.source.cancel(),this._cache.delete(e.id))});try{return await r.promise}finally{o.dispose()}}};rq=twt([_6(0,Be),_6(1,Zl),_6(2,Zi)],rq);jt(pT,rq,1);Gt.registerCommand("_executeDocumentSymbolProvider",async function(n,...e){const[t]=e;si(Xe.isUri(t));const i=n.get(pT),r=await n.get(_a).createModelReference(t);try{return(await i.getOrCreate(r.object.textEditorModel,xt.None)).getTopLevelSymbols()}finally{r.dispose()}});const wh=class wh extends ee{constructor(e,t){super(),this.contextKeyService=e,this.model=t,this.inlineCompletionVisible=wh.inlineSuggestionVisible.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentation=wh.inlineSuggestionHasIndentation.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentationLessThanTabSize=wh.inlineSuggestionHasIndentationLessThanTabSize.bindTo(this.contextKeyService),this.suppressSuggestions=wh.suppressSuggestions.bindTo(this.contextKeyService),this._register(gt(i=>{const s=this.model.read(i),r=s==null?void 0:s.state.read(i),o=!!(r!=null&&r.inlineCompletion)&&(r==null?void 0:r.primaryGhostText)!==void 0&&!(r!=null&&r.primaryGhostText.isEmpty());this.inlineCompletionVisible.set(o),r!=null&&r.primaryGhostText&&(r!=null&&r.inlineCompletion)&&this.suppressSuggestions.set(r.inlineCompletion.inlineCompletion.source.inlineCompletions.suppressSuggestions)})),this._register(gt(i=>{const s=this.model.read(i);let r=!1,o=!0;const a=s==null?void 0:s.primaryGhostText.read(i);if(s!=null&&s.selectedSuggestItem&&a&&a.parts.length>0){const{column:l,lines:c}=a.parts[0],d=c[0],u=s.textModel.getLineIndentColumn(a.lineNumber);if(l<=u){let f=lo(d);f===-1&&(f=d.length-1),r=f>0;const g=s.textModel.getOptions().tabSize;o=ms.visibleColumnFromColumn(d,f+1,g)<g}}this.inlineCompletionSuggestsIndentation.set(r),this.inlineCompletionSuggestsIndentationLessThanTabSize.set(o)}))}};wh.inlineSuggestionVisible=new Re("inlineSuggestionVisible",!1,v("inlineSuggestionVisible","Whether an inline suggestion is visible")),wh.inlineSuggestionHasIndentation=new Re("inlineSuggestionHasIndentation",!1,v("inlineSuggestionHasIndentation","Whether the inline suggestion starts with whitespace")),wh.inlineSuggestionHasIndentationLessThanTabSize=new Re("inlineSuggestionHasIndentationLessThanTabSize",!0,v("inlineSuggestionHasIndentationLessThanTabSize","Whether the inline suggestion starts with whitespace that is less than what would be inserted by tab")),wh.suppressSuggestions=new Re("inlineSuggestionSuppressSuggestions",void 0,v("suppressSuggestions","Whether suggestions should be suppressed for the current suggestion"));let Ja=wh;function iwt(n){const e=new ue,t=e.add(V0e());return e.add(gt(i=>{t.setStyle(n.read(i))})),e}class $D{constructor(e,t){this.lineNumber=e,this.parts=t}equals(e){return this.lineNumber===e.lineNumber&&this.parts.length===e.parts.length&&this.parts.every((t,i)=>t.equals(e.parts[i]))}renderForScreenReader(e){if(this.parts.length===0)return"";const t=this.parts[this.parts.length-1],i=e.substr(0,t.column-1);return new kX([...this.parts.map(r=>new rf(M.fromPositions(new Y(1,r.column)),r.lines.join(`
`)))]).applyToString(i).substring(this.parts[0].column-1)}isEmpty(){return this.parts.every(e=>e.lines.length===0)}get lineCount(){return 1+this.parts.reduce((e,t)=>e+t.lines.length-1,0)}}class bF{constructor(e,t,i){this.column=e,this.text=t,this.preview=i,this.lines=mf(this.text)}equals(e){return this.column===e.column&&this.lines.length===e.lines.length&&this.lines.every((t,i)=>t===e.lines[i])}}class oq{constructor(e,t,i,s=0){this.lineNumber=e,this.columnRange=t,this.text=i,this.additionalReservedLineCount=s,this.parts=[new bF(this.columnRange.endColumnExclusive,this.text,!1)],this.newLines=mf(this.text)}renderForScreenReader(e){return this.newLines.join(`
`)}get lineCount(){return this.newLines.length}isEmpty(){return this.parts.every(e=>e.lines.length===0)}equals(e){return this.lineNumber===e.lineNumber&&this.columnRange.equals(e.columnRange)&&this.newLines.length===e.newLines.length&&this.newLines.every((t,i)=>t===e.newLines[i])&&this.additionalReservedLineCount===e.additionalReservedLineCount}}function zue(n,e){return dn(n,e,dke)}function dke(n,e){return n===e?!0:!n||!e?!1:n instanceof $D&&e instanceof $D||n instanceof oq&&e instanceof oq?n.equals(e):!1}const nwt=[];function swt(){return nwt}class uke{constructor(e,t){if(this.startColumn=e,this.endColumnExclusive=t,e>t)throw new li(`startColumn ${e} cannot be after endColumnExclusive ${t}`)}toRange(e){return new M(e,this.startColumn,e,this.endColumnExclusive)}equals(e){return this.startColumn===e.startColumn&&this.endColumnExclusive===e.endColumnExclusive}}function hke(n,e){const t=new ue,i=n.createDecorationsCollection();return t.add(qN({debugName:()=>`Apply decorations from ${e.debugName}`},s=>{const r=e.read(s);i.set(r)})),t.add({dispose:()=>{i.clear()}}),t}function rwt(n,e){return new Y(n.lineNumber+e.lineNumber-1,e.lineNumber===1?n.column+e.column-1:e.column)}function Uue(n,e){return new Y(n.lineNumber-e.lineNumber+1,n.lineNumber-e.lineNumber===0?n.column-e.column+1:n.column)}var owt=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},awt=function(n,e){return function(t,i){e(t,i,n)}};const $ue="ghost-text";let aq=class extends ee{constructor(e,t,i){super(),this.editor=e,this.model=t,this.languageService=i,this.isDisposed=Nt(this,!1),this.currentTextModel=mi(this,this.editor.onDidChangeModel,()=>this.editor.getModel()),this.uiState=Ke(this,s=>{if(this.isDisposed.read(s))return;const r=this.currentTextModel.read(s);if(r!==this.model.targetTextModel.read(s))return;const o=this.model.ghostText.read(s);if(!o)return;const a=o instanceof oq?o.columnRange:void 0,l=[],c=[];function d(p,_){if(c.length>0){const w=c[c.length-1];_&&w.decorations.push(new ko(w.content.length+1,w.content.length+1+p[0].length,_,0)),w.content+=p[0],p=p.slice(1)}for(const w of p)c.push({content:w,decorations:_?[new ko(1,w.length+1,_,0)]:[]})}const u=r.getLineContent(o.lineNumber);let h,f=0;for(const p of o.parts){let _=p.lines;h===void 0?(l.push({column:p.column,text:_[0],preview:p.preview}),_=_.slice(1)):d([u.substring(f,p.column-1)],void 0),_.length>0&&(d(_,$ue),h===void 0&&p.column<=u.length&&(h=p.column)),f=p.column-1}h!==void 0&&d([u.substring(f)],void 0);const g=h!==void 0?new uke(h,u.length+1):void 0;return{replacedRange:a,inlineTexts:l,additionalLines:c,hiddenRange:g,lineNumber:o.lineNumber,additionalReservedLineCount:this.model.minReservedLineCount.read(s),targetTextModel:r}}),this.decorations=Ke(this,s=>{const r=this.uiState.read(s);if(!r)return[];const o=[];r.replacedRange&&o.push({range:r.replacedRange.toRange(r.lineNumber),options:{inlineClassName:"inline-completion-text-to-replace",description:"GhostTextReplacement"}}),r.hiddenRange&&o.push({range:r.hiddenRange.toRange(r.lineNumber),options:{inlineClassName:"ghost-text-hidden",description:"ghost-text-hidden"}});for(const a of r.inlineTexts)o.push({range:M.fromPositions(new Y(r.lineNumber,a.column)),options:{description:$ue,after:{content:a.text,inlineClassName:a.preview?"ghost-text-decoration-preview":"ghost-text-decoration",cursorStops:wd.Left},showIfCollapsed:!0}});return o}),this.additionalLinesWidget=this._register(new lwt(this.editor,this.languageService.languageIdCodec,Ke(s=>{const r=this.uiState.read(s);return r?{lineNumber:r.lineNumber,additionalLines:r.additionalLines,minReservedLineCount:r.additionalReservedLineCount,targetTextModel:r.targetTextModel}:void 0}))),this._register(Ye(()=>{this.isDisposed.set(!0,void 0)})),this._register(hke(this.editor,this.decorations))}ownsViewZone(e){return this.additionalLinesWidget.viewZoneId===e}};aq=owt([awt(2,un)],aq);class lwt extends ee{get viewZoneId(){return this._viewZoneId}constructor(e,t,i){super(),this.editor=e,this.languageIdCodec=t,this.lines=i,this._viewZoneId=void 0,this.editorOptionsChanged=pr("editorOptionChanged",Ee.filter(this.editor.onDidChangeConfiguration,s=>s.hasChanged(33)||s.hasChanged(118)||s.hasChanged(100)||s.hasChanged(95)||s.hasChanged(51)||s.hasChanged(50)||s.hasChanged(67))),this._register(gt(s=>{const r=this.lines.read(s);this.editorOptionsChanged.read(s),r?this.updateLines(r.lineNumber,r.additionalLines,r.minReservedLineCount):this.clear()}))}dispose(){super.dispose(),this.clear()}clear(){this.editor.changeViewZones(e=>{this._viewZoneId&&(e.removeZone(this._viewZoneId),this._viewZoneId=void 0)})}updateLines(e,t,i){const s=this.editor.getModel();if(!s)return;const{tabSize:r}=s.getOptions();this.editor.changeViewZones(o=>{this._viewZoneId&&(o.removeZone(this._viewZoneId),this._viewZoneId=void 0);const a=Math.max(t.length,i);if(a>0){const l=document.createElement("div");cwt(l,r,t,this.editor.getOptions(),this.languageIdCodec),this._viewZoneId=o.addZone({afterLineNumber:e,heightInLines:a,domNode:l,afterColumnAffinity:1})}})}}function cwt(n,e,t,i,s){const r=i.get(33),o=i.get(118),a="none",l=i.get(95),c=i.get(51),d=i.get(50),u=i.get(67),h=new Tx(1e4);h.appendString('<div class="suggest-preview-text">');for(let p=0,_=t.length;p<_;p++){const w=t[p],b=w.content;h.appendString('<div class="view-line'),h.appendString('" style="top:'),h.appendString(String(p*u)),h.appendString('px;width:1000000px;">');const y=MN(b),S=DS(b),x=Ks.createEmpty(b,s);iT(new av(d.isMonospace&&!r,d.canUseHalfwidthRightwardsArrow,b,!1,y,S,0,x,w.decorations,e,0,d.spaceWidth,d.middotWidth,d.wsmiddotWidth,o,a,l,c!==k_.OFF,null),h),h.appendString("</div>")}h.appendString("</div>"),rr(n,d);const f=h.build(),g=jue?jue.createHTML(f):f;n.innerHTML=g}const jue=up("editorGhostText",{createHTML:n=>n});function dwt(n,e){const t=new cye,i=new uye(t,c=>e.getLanguageConfiguration(c)),s=new dye(new uwt([n]),i),r=g$(s,[],void 0,!0);let o="";const a=n.getLineContent();function l(c,d){if(c.kind===2)if(l(c.openingBracket,d),d=Tn(d,c.openingBracket.length),c.child&&(l(c.child,d),d=Tn(d,c.child.length)),c.closingBracket)l(c.closingBracket,d),d=Tn(d,c.closingBracket.length);else{const h=i.getSingleLanguageBracketTokens(c.openingBracket.languageId).findClosingTokenText(c.openingBracket.bracketIds);o+=h}else if(c.kind!==3){if(c.kind===0||c.kind===1)o+=a.substring(d,Tn(d,c.length));else if(c.kind===4)for(const u of c.children)l(u,d),d=Tn(d,u.length)}}return l(r,Lo),o}class uwt{constructor(e){this.lines=e,this.tokenization={getLineTokens:t=>this.lines[t-1]}}getLineCount(){return this.lines.length}getLineLength(e){return this.lines[e-1].getLineContent().length}}async function fke(n,e,t,i,s=xt.None,r){const o=e instanceof Y?gwt(e,t):e,a=n.all(t),l=new CX;for(const w of a)w.groupId&&l.add(w.groupId,w);function c(w){if(!w.yieldsToGroupIds)return[];const b=[];for(const y of w.yieldsToGroupIds||[]){const S=l.get(y);for(const x of S)b.push(x)}return b}const d=new Map,u=new Set;function h(w,b){if(b=[...b,w],u.has(w))return b;u.add(w);try{const y=c(w);for(const S of y){const x=h(S,b);if(x)return x}}finally{u.delete(w)}}function f(w){const b=d.get(w);if(b)return b;const y=h(w,[]);y&&Wn(new Error(`Inline completions: cyclic yield-to dependency detected. Path: ${y.map(x=>x.toString?x.toString():""+x).join(" -> ")}`));const S=new Ex;return d.set(w,S.p),(async()=>{var x;if(!y){const E=c(w);for(const D of E){const N=await f(D);if(N&&N.items.length>0)return}}try{return e instanceof Y?await w.provideInlineCompletions(t,e,i,s):await((x=w.provideInlineEdits)==null?void 0:x.call(w,t,e,i,s))}catch(E){Wn(E);return}})().then(x=>S.complete(x),x=>S.error(x)),S.p}const g=await Promise.all(a.map(async w=>({provider:w,completions:await f(w)}))),p=new Map,_=[];for(const w of g){const b=w.completions;if(!b)continue;const y=new fwt(b,w.provider);_.push(y);for(const S of b.items){const x=wF.from(S,y,o,t,r);p.set(x.hash(),x)}}return new hwt(Array.from(p.values()),new Set(p.keys()),_)}class hwt{constructor(e,t,i){this.completions=e,this.hashs=t,this.providerResults=i}has(e){return this.hashs.has(e.hash())}dispose(){for(const e of this.providerResults)e.removeRef()}}class fwt{constructor(e,t){this.inlineCompletions=e,this.provider=t,this.refCount=1}addRef(){this.refCount++}removeRef(){this.refCount--,this.refCount===0&&this.provider.freeInlineCompletions(this.inlineCompletions)}}class wF{static from(e,t,i,s,r){let o,a,l=e.range?M.lift(e.range):i;if(typeof e.insertText=="string"){if(o=e.insertText,r&&e.completeBracketPairs){o=Kue(o,l.getStartPosition(),s,r);const c=o.length-e.insertText.length;c!==0&&(l=new M(l.startLineNumber,l.startColumn,l.endLineNumber,l.endColumn+c))}a=void 0}else if("snippet"in e.insertText){const c=e.insertText.snippet.length;if(r&&e.completeBracketPairs){e.insertText.snippet=Kue(e.insertText.snippet,l.getStartPosition(),s,r);const u=e.insertText.snippet.length-c;u!==0&&(l=new M(l.startLineNumber,l.startColumn,l.endLineNumber,l.endColumn+u))}const d=new x0().parse(e.insertText.snippet);d.children.length===1&&d.children[0]instanceof So?(o=d.children[0].value,a=void 0):(o=d.toString(),a={snippet:e.insertText.snippet,range:l})}else X3(e.insertText);return new wF(o,e.command,l,o,a,e.additionalTextEdits||swt(),e,t)}constructor(e,t,i,s,r,o,a,l){this.filterText=e,this.command=t,this.range=i,this.insertText=s,this.snippetInfo=r,this.additionalTextEdits=o,this.sourceInlineCompletion=a,this.source=l,e=e.replace(/\r\n|\r/g,`
`),s=e.replace(/\r\n|\r/g,`
`)}withRange(e){return new wF(this.filterText,this.command,e,this.insertText,this.snippetInfo,this.additionalTextEdits,this.sourceInlineCompletion,this.source)}hash(){return JSON.stringify({insertText:this.insertText,range:this.range.toString()})}toSingleTextEdit(){return new rf(this.range,this.insertText)}}function gwt(n,e){const t=e.getWordAtPosition(n),i=e.getLineMaxColumn(n.lineNumber);return t?new M(n.lineNumber,t.startColumn,n.lineNumber,i):M.fromPositions(n,n.with(void 0,i))}function Kue(n,e,t,i){const r=t.getLineContent(e.lineNumber).substring(0,e.column-1)+n,o=t.tokenization.tokenizeLineWithEdit(e,r.length-(e.column-1),n),a=o==null?void 0:o.sliceAndInflate(e.column-1,r.length,0);return a?dwt(a,i):n}function Qb(n,e,t){const i=t?n.range.intersectRanges(t):n.range;if(!i)return n;const s=e.getValueInRange(i,1),r=D_(s,n.text),o=Rd.ofText(s.substring(0,r)).addToPosition(n.range.getStartPosition()),a=n.text.substring(r),l=M.fromPositions(o,n.range.getEndPosition());return new rf(l,a)}function gke(n,e){return n.text.startsWith(e.text)&&pwt(n.range,e.range)}function que(n,e,t,i,s=0){let r=Qb(n,e);if(r.range.endLineNumber!==r.range.startLineNumber)return;const o=e.getLineContent(r.range.startLineNumber),a=Ni(o).length;if(r.range.startColumn-1<=a){const g=Ni(r.text).length,p=o.substring(r.range.startColumn-1,a),[_,w]=[r.range.getStartPosition(),r.range.getEndPosition()],b=_.column+p.length<=w.column?_.delta(0,p.length):w,y=M.fromPositions(b,w),S=r.text.startsWith(p)?r.text.substring(p.length):r.text.substring(g);r=new rf(y,S)}const c=e.getValueInRange(r.range),d=mwt(c,r.text);if(!d)return;const u=r.range.startLineNumber,h=new Array;if(t==="prefix"){const g=d.filter(p=>p.originalLength===0);if(g.length>1||g.length===1&&g[0].originalStart!==c.length)return}const f=r.text.length-s;for(const g of d){const p=r.range.startColumn+g.originalStart+g.originalLength;if(t==="subwordSmart"&&i&&i.lineNumber===r.range.startLineNumber&&p<i.column||g.originalLength>0)return;if(g.modifiedLength===0)continue;const _=g.modifiedStart+g.modifiedLength,w=Math.max(g.modifiedStart,Math.min(_,f)),b=r.text.substring(g.modifiedStart,w),y=r.text.substring(w,Math.max(g.modifiedStart,_));b.length>0&&h.push(new bF(p,b,!1)),y.length>0&&h.push(new bF(p,y,!0))}return new $D(u,h)}function pwt(n,e){return e.getStartPosition().equals(n.getStartPosition())&&e.getEndPosition().isBeforeOrEqual(n.getEndPosition())}let lh;function mwt(n,e){if((lh==null?void 0:lh.originalValue)===n&&(lh==null?void 0:lh.newValue)===e)return lh==null?void 0:lh.changes;{let t=Yue(n,e,!0);if(t){const i=Gue(t);if(i>0){const s=Yue(n,e,!1);s&&Gue(s)<i&&(t=s)}}return lh={originalValue:n,newValue:e,changes:t},t}}function Gue(n){let e=0;for(const t of n)e+=t.originalLength;return e}function Yue(n,e,t){if(n.length>5e3||e.length>5e3)return;function i(c){let d=0;for(let u=0,h=c.length;u<h;u++){const f=c.charCodeAt(u);f>d&&(d=f)}return d}const s=Math.max(i(n),i(e));function r(c){if(c<0)throw new Error("unexpected");return s+c+1}function o(c){let d=0,u=0;const h=new Int32Array(c.length);for(let f=0,g=c.length;f<g;f++)if(t&&c[f]==="("){const p=u*100+d;h[f]=r(2*p),d++}else if(t&&c[f]===")"){d=Math.max(d-1,0);const p=u*100+d;h[f]=r(2*p+1),d===0&&u++}else h[f]=c.charCodeAt(f);return h}const a=o(n),l=o(e);return new Oh({getElements:()=>a},{getElements:()=>l}).ComputeDiff(!1).changes}var _wt=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Zue=function(n,e){return function(t,i){e(t,i,n)}};let lq=class extends ee{constructor(e,t,i,s,r){super(),this.textModel=e,this.versionId=t,this._debounceValue=i,this.languageFeaturesService=s,this.languageConfigurationService=r,this._updateOperation=this._register(new As),this.inlineCompletions=sD("inlineCompletions",void 0),this.suggestWidgetInlineCompletions=sD("suggestWidgetInlineCompletions",void 0),this._register(this.textModel.onDidChangeContent(()=>{this._updateOperation.clear()}))}fetch(e,t,i){var d,u;const s=new bwt(e,t,this.textModel.getVersionId()),r=t.selectedSuggestionInfo?this.suggestWidgetInlineCompletions:this.inlineCompletions;if((d=this._updateOperation.value)!=null&&d.request.satisfies(s))return this._updateOperation.value.promise;if((u=r.get())!=null&&u.request.satisfies(s))return Promise.resolve(!0);const o=!!this._updateOperation.value;this._updateOperation.clear();const a=new mn,l=(async()=>{if((o||t.triggerKind===Du.Automatic)&&await vwt(this._debounceValue.get(this.textModel),a.token),a.token.isCancellationRequested||this._store.isDisposed||this.textModel.getVersionId()!==s.versionId)return!1;const f=new Date,g=await fke(this.languageFeaturesService.inlineCompletionsProvider,e,this.textModel,t,a.token,this.languageConfigurationService);if(a.token.isCancellationRequested||this._store.isDisposed||this.textModel.getVersionId()!==s.versionId)return!1;const p=new Date;this._debounceValue.update(this.textModel,p.getTime()-f.getTime());const _=new Cwt(g,s,this.textModel,this.versionId);if(i){const w=i.toInlineCompletion(void 0);i.canBeReused(this.textModel,e)&&!g.has(w)&&_.prepend(i.inlineCompletion,w.range,!0)}return this._updateOperation.clear(),pn(w=>{r.set(_,w)}),!0})(),c=new wwt(s,a,l);return this._updateOperation.value=c,l}clear(e){this._updateOperation.clear(),this.inlineCompletions.set(void 0,e),this.suggestWidgetInlineCompletions.set(void 0,e)}clearSuggestWidgetInlineCompletions(e){var t;(t=this._updateOperation.value)!=null&&t.request.context.selectedSuggestionInfo&&this._updateOperation.clear(),this.suggestWidgetInlineCompletions.set(void 0,e)}cancelUpdate(){this._updateOperation.clear()}};lq=_wt([Zue(3,Be),Zue(4,vn)],lq);function vwt(n,e){return new Promise(t=>{let i;const s=setTimeout(()=>{i&&i.dispose(),t()},n);e&&(i=e.onCancellationRequested(()=>{clearTimeout(s),i&&i.dispose(),t()}))})}class bwt{constructor(e,t,i){this.position=e,this.context=t,this.versionId=i}satisfies(e){return this.position.equals(e.position)&&GU(this.context.selectedSuggestionInfo,e.context.selectedSuggestionInfo,wtt())&&(e.context.triggerKind===Du.Automatic||this.context.triggerKind===Du.Explicit)&&this.versionId===e.versionId}}class wwt{constructor(e,t,i){this.request=e,this.cancellationTokenSource=t,this.promise=i}dispose(){this.cancellationTokenSource.cancel()}}class Cwt{get inlineCompletions(){return this._inlineCompletions}constructor(e,t,i,s){this.inlineCompletionProviderResult=e,this.request=t,this._textModel=i,this._versionId=s,this._refCount=1,this._prependedInlineCompletionItems=[];const r=i.deltaDecorations([],e.completions.map(o=>({range:o.range,options:{description:"inline-completion-tracking-range"}})));this._inlineCompletions=e.completions.map((o,a)=>new Xue(o,r[a],this._textModel,this._versionId))}clone(){return this._refCount++,this}dispose(){if(this._refCount--,this._refCount===0){setTimeout(()=>{this._textModel.isDisposed()||this._textModel.deltaDecorations(this._inlineCompletions.map(e=>e.decorationId),[])},0),this.inlineCompletionProviderResult.dispose();for(const e of this._prependedInlineCompletionItems)e.source.removeRef()}}prepend(e,t,i){i&&e.source.addRef();const s=this._textModel.deltaDecorations([],[{range:t,options:{description:"inline-completion-tracking-range"}}])[0];this._inlineCompletions.unshift(new Xue(e,s,this._textModel,this._versionId)),this._prependedInlineCompletionItems.push(e)}}class Xue{get forwardStable(){return this.inlineCompletion.source.inlineCompletions.enableForwardStability??!1}constructor(e,t,i,s){this.inlineCompletion=e,this.decorationId=t,this._textModel=i,this._modelVersion=s,this.semanticId=JSON.stringify([this.inlineCompletion.filterText,this.inlineCompletion.insertText,this.inlineCompletion.range.getStartPosition().toString()]),this._updatedRange=Il({owner:this,equalsFn:M.equalsRange},r=>(this._modelVersion.read(r),this._textModel.getDecorationRange(this.decorationId)))}toInlineCompletion(e){return this.inlineCompletion.withRange(this._updatedRange.read(e)??v6)}toSingleTextEdit(e){return new rf(this._updatedRange.read(e)??v6,this.inlineCompletion.insertText)}isVisible(e,t,i){const s=Qb(this._toFilterTextReplacement(i),e),r=this._updatedRange.read(i);if(!r||!this.inlineCompletion.range.getStartPosition().equals(r.getStartPosition())||t.lineNumber!==s.range.startLineNumber)return!1;const o=e.getValueInRange(s.range,1),a=s.text,l=Math.max(0,t.column-s.range.startColumn);let c=a.substring(0,l),d=a.substring(l),u=o.substring(0,l),h=o.substring(l);const f=e.getLineIndentColumn(s.range.startLineNumber);return s.range.startColumn<=f&&(u=u.trimStart(),u.length===0&&(h=h.trimStart()),c=c.trimStart(),c.length===0&&(d=d.trimStart())),c.startsWith(u)&&!!p1e(h,d)}canBeReused(e,t){const i=this._updatedRange.read(void 0);return!!i&&i.containsPosition(t)&&this.isVisible(e,t,void 0)&&Rd.ofRange(i).isGreaterThanOrEqualTo(Rd.ofRange(this.inlineCompletion.range))}_toFilterTextReplacement(e){return new rf(this._updatedRange.read(e)??v6,this.inlineCompletion.filterText)}}const v6=new M(1,1,1,1),Lt={Visible:iee,HasFocusedSuggestion:new Re("suggestWidgetHasFocusedSuggestion",!1,v("suggestWidgetHasSelection","Whether any suggestion is focused")),DetailsVisible:new Re("suggestWidgetDetailsVisible",!1,v("suggestWidgetDetailsVisible","Whether suggestion details are visible")),MultipleSuggestions:new Re("suggestWidgetMultipleSuggestions",!1,v("suggestWidgetMultipleSuggestions","Whether there are multiple suggestions to pick from")),MakesTextEdit:new Re("suggestionMakesTextEdit",!0,v("suggestionMakesTextEdit","Whether inserting the current suggestion yields in a change or has everything already been typed")),AcceptSuggestionsOnEnter:new Re("acceptSuggestionOnEnter",!0,v("acceptSuggestionOnEnter","Whether suggestions are inserted when pressing Enter")),HasInsertAndReplaceRange:new Re("suggestionHasInsertAndReplaceRange",!1,v("suggestionHasInsertAndReplaceRange","Whether the current suggestion has insert and replace behaviour")),InsertMode:new Re("suggestionInsertMode",void 0,{type:"string",description:v("suggestionInsertMode","Whether the default behaviour is to insert or replace")}),CanResolve:new Re("suggestionCanResolve",!1,v("suggestionCanResolve","Whether the current suggestion supports to resolve further details"))},Jm=new ze("suggestWidgetStatusBar");class ywt{constructor(e,t,i,s){var r;this.position=e,this.completion=t,this.container=i,this.provider=s,this.isInvalid=!1,this.score=Au.Default,this.distance=0,this.textLabel=typeof t.label=="string"?t.label:(r=t.label)==null?void 0:r.label,this.labelLow=this.textLabel.toLowerCase(),this.isInvalid=!this.textLabel,this.sortTextLow=t.sortText&&t.sortText.toLowerCase(),this.filterTextLow=t.filterText&&t.filterText.toLowerCase(),this.extensionId=t.extensionId,M.isIRange(t.range)?(this.editStart=new Y(t.range.startLineNumber,t.range.startColumn),this.editInsertEnd=new Y(t.range.endLineNumber,t.range.endColumn),this.editReplaceEnd=new Y(t.range.endLineNumber,t.range.endColumn),this.isInvalid=this.isInvalid||M.spansMultipleLines(t.range)||t.range.startLineNumber!==e.lineNumber):(this.editStart=new Y(t.range.insert.startLineNumber,t.range.insert.startColumn),this.editInsertEnd=new Y(t.range.insert.endLineNumber,t.range.insert.endColumn),this.editReplaceEnd=new Y(t.range.replace.endLineNumber,t.range.replace.endColumn),this.isInvalid=this.isInvalid||M.spansMultipleLines(t.range.insert)||M.spansMultipleLines(t.range.replace)||t.range.insert.startLineNumber!==e.lineNumber||t.range.replace.startLineNumber!==e.lineNumber||t.range.insert.startColumn!==t.range.replace.startColumn),typeof s.resolveCompletionItem!="function"&&(this._resolveCache=Promise.resolve(),this._resolveDuration=0)}get isResolved(){return this._resolveDuration!==void 0}get resolveDuration(){return this._resolveDuration!==void 0?this._resolveDuration:-1}async resolve(e){if(!this._resolveCache){const t=e.onCancellationRequested(()=>{this._resolveCache=void 0,this._resolveDuration=void 0}),i=new js(!0);this._resolveCache=Promise.resolve(this.provider.resolveCompletionItem(this.completion,e)).then(s=>{Object.assign(this.completion,s),this._resolveDuration=i.elapsed()},s=>{Vc(s)&&(this._resolveCache=void 0,this._resolveDuration=void 0)}).finally(()=>{t.dispose()})}return this._resolveCache}}const a5=class a5{constructor(e=2,t=new Set,i=new Set,s=new Map,r=!0){this.snippetSortOrder=e,this.kindFilter=t,this.providerFilter=i,this.providerItemsToReuse=s,this.showDeprecated=r}};a5.default=new a5;let jD=a5;class Swt{constructor(e,t,i,s){this.items=e,this.needsClipboard=t,this.durations=i,this.disposable=s}}async function cee(n,e,t,i=jD.default,s={triggerKind:0},r=xt.None){const o=new js;t=t.clone();const a=e.getWordAtPosition(t),l=a?new M(t.lineNumber,a.startColumn,t.lineNumber,a.endColumn):M.fromPositions(t),c={replace:l,insert:l.setEndPosition(t.lineNumber,t.column)},d=[],u=new ue,h=[];let f=!1;const g=(_,w,b)=>{var S;let y=!1;if(!w)return y;for(const x of w.suggestions)if(!i.kindFilter.has(x.kind)){if(!i.showDeprecated&&((S=x==null?void 0:x.tags)!=null&&S.includes(1)))continue;x.range||(x.range=c),x.sortText||(x.sortText=typeof x.label=="string"?x.label:x.label.label),!f&&x.insertTextRules&&x.insertTextRules&4&&(f=x0.guessNeedsClipboard(x.insertText)),d.push(new ywt(t,x,w,_)),y=!0}return M3(w)&&u.add(w),h.push({providerName:_._debugDisplayName??"unknown_provider",elapsedProvider:w.duration??-1,elapsedOverall:b.elapsed()}),y},p=(async()=>{})();for(const _ of n.orderedGroups(e)){let w=!1;if(await Promise.all(_.map(async b=>{if(i.providerItemsToReuse.has(b)){const y=i.providerItemsToReuse.get(b);y.forEach(S=>d.push(S)),w=w||y.length>0;return}if(!(i.providerFilter.size>0&&!i.providerFilter.has(b)))try{const y=new js,S=await b.provideCompletionItems(e,t,s,r);w=g(b,S,y)||w}catch(y){Wn(y)}})),w||r.isCancellationRequested)break}return await p,r.isCancellationRequested?(u.dispose(),Promise.reject(new Dd)):new Swt(d.sort(kwt(i.snippetSortOrder)),f,{entries:h,elapsed:o.elapsed()},u)}function dee(n,e){if(n.sortTextLow&&e.sortTextLow){if(n.sortTextLow<e.sortTextLow)return-1;if(n.sortTextLow>e.sortTextLow)return 1}return n.textLabel<e.textLabel?-1:n.textLabel>e.textLabel?1:n.completion.kind-e.completion.kind}function xwt(n,e){if(n.completion.kind!==e.completion.kind){if(n.completion.kind===27)return-1;if(e.completion.kind===27)return 1}return dee(n,e)}function Lwt(n,e){if(n.completion.kind!==e.completion.kind){if(n.completion.kind===27)return 1;if(e.completion.kind===27)return-1}return dee(n,e)}const oW=new Map;oW.set(0,xwt);oW.set(2,Lwt);oW.set(1,dee);function kwt(n){return oW.get(n)}Gt.registerCommand("_executeCompletionItemProvider",async(n,...e)=>{const[t,i,s,r]=e;si(Xe.isUri(t)),si(Y.isIPosition(i)),si(typeof s=="string"||!s),si(typeof r=="number"||!r);const{completionProvider:o}=n.get(Be),a=await n.get(_a).createModelReference(t);try{const l={incomplete:!1,suggestions:[]},c=[],d=a.object.textEditorModel.validatePosition(i),u=await cee(o,a.object.textEditorModel,d,void 0,{triggerCharacter:s??void 0,triggerKind:s?1:0});for(const h of u.items)c.length<(r??0)&&c.push(h.resolve(xt.None)),l.incomplete=l.incomplete||h.container.incomplete,l.suggestions.push(h.completion);try{return await Promise.all(c),l}finally{setTimeout(()=>u.disposable.dispose(),100)}}finally{a.dispose()}});function Ewt(n,e){var t;(t=n.getContribution("editor.contrib.suggestController"))==null||t.triggerSuggest(new Set().add(e),void 0,!0)}class H1{static isAllOff(e){return e.other==="off"&&e.comments==="off"&&e.strings==="off"}static isAllOn(e){return e.other==="on"&&e.comments==="on"&&e.strings==="on"}static valueFor(e,t){switch(t){case 1:return e.comments;case 2:return e.strings;default:return e.other}}}function Que(n,e=wr){return UZe(n,e)?n.charAt(0).toUpperCase()+n.slice(1):n}var Iwt=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Dwt=function(n,e){return function(t,i){e(t,i,n)}};class Jue{constructor(e){this._delegates=e}resolve(e){for(const t of this._delegates){const i=t.resolve(e);if(i!==void 0)return i}}}class ehe{constructor(e,t,i,s){this._model=e,this._selection=t,this._selectionIdx=i,this._overtypingCapturer=s}resolve(e){const{name:t}=e;if(t==="SELECTION"||t==="TM_SELECTED_TEXT"){let i=this._model.getValueInRange(this._selection)||void 0,s=this._selection.startLineNumber!==this._selection.endLineNumber;if(!i&&this._overtypingCapturer){const r=this._overtypingCapturer.getLastOvertypedInfo(this._selectionIdx);r&&(i=r.value,s=r.multiline)}if(i&&s&&e.snippet){const r=this._model.getLineContent(this._selection.startLineNumber),o=Ni(r,0,this._selection.startColumn-1);let a=o;e.snippet.walk(c=>c===e?!1:(c instanceof So&&(a=Ni(mf(c.value).pop())),!0));const l=D_(a,o);i=i.replace(/(\r\n|\r|\n)(.*)/g,(c,d,u)=>`${d}${a.substr(l)}${u}`)}return i}else{if(t==="TM_CURRENT_LINE")return this._model.getLineContent(this._selection.positionLineNumber);if(t==="TM_CURRENT_WORD"){const i=this._model.getWordAtPosition({lineNumber:this._selection.positionLineNumber,column:this._selection.positionColumn});return i&&i.word||void 0}else{if(t==="TM_LINE_INDEX")return String(this._selection.positionLineNumber-1);if(t==="TM_LINE_NUMBER")return String(this._selection.positionLineNumber);if(t==="CURSOR_INDEX")return String(this._selectionIdx);if(t==="CURSOR_NUMBER")return String(this._selectionIdx+1)}}}}class the{constructor(e,t){this._labelService=e,this._model=t}resolve(e){const{name:t}=e;if(t==="TM_FILENAME")return qm(this._model.uri.fsPath);if(t==="TM_FILENAME_BASE"){const i=qm(this._model.uri.fsPath),s=i.lastIndexOf(".");return s<=0?i:i.slice(0,s)}else{if(t==="TM_DIRECTORY")return n0e(this._model.uri.fsPath)==="."?"":this._labelService.getUriLabel(pB(this._model.uri));if(t==="TM_FILEPATH")return this._labelService.getUriLabel(this._model.uri);if(t==="RELATIVE_FILEPATH")return this._labelService.getUriLabel(this._model.uri,{relative:!0,noPrefix:!0})}}}class ihe{constructor(e,t,i,s){this._readClipboardText=e,this._selectionIdx=t,this._selectionCount=i,this._spread=s}resolve(e){if(e.name!=="CLIPBOARD")return;const t=this._readClipboardText();if(t){if(this._spread){const i=t.split(/\r\n|\n|\r/).filter(s=>!h0e(s));if(i.length===this._selectionCount)return i[this._selectionIdx]}return t}}}let CF=class{constructor(e,t,i){this._model=e,this._selection=t,this._languageConfigurationService=i}resolve(e){const{name:t}=e,i=this._model.getLanguageIdAtPosition(this._selection.selectionStartLineNumber,this._selection.selectionStartColumn),s=this._languageConfigurationService.getLanguageConfiguration(i).comments;if(s){if(t==="LINE_COMMENT")return s.lineCommentToken||void 0;if(t==="BLOCK_COMMENT_START")return s.blockCommentStartToken||void 0;if(t==="BLOCK_COMMENT_END")return s.blockCommentEndToken||void 0}}};CF=Iwt([Dwt(2,vn)],CF);const Ch=class Ch{constructor(){this._date=new Date}resolve(e){const{name:t}=e;if(t==="CURRENT_YEAR")return String(this._date.getFullYear());if(t==="CURRENT_YEAR_SHORT")return String(this._date.getFullYear()).slice(-2);if(t==="CURRENT_MONTH")return String(this._date.getMonth().valueOf()+1).padStart(2,"0");if(t==="CURRENT_DATE")return String(this._date.getDate().valueOf()).padStart(2,"0");if(t==="CURRENT_HOUR")return String(this._date.getHours().valueOf()).padStart(2,"0");if(t==="CURRENT_MINUTE")return String(this._date.getMinutes().valueOf()).padStart(2,"0");if(t==="CURRENT_SECOND")return String(this._date.getSeconds().valueOf()).padStart(2,"0");if(t==="CURRENT_DAY_NAME")return Ch.dayNames[this._date.getDay()];if(t==="CURRENT_DAY_NAME_SHORT")return Ch.dayNamesShort[this._date.getDay()];if(t==="CURRENT_MONTH_NAME")return Ch.monthNames[this._date.getMonth()];if(t==="CURRENT_MONTH_NAME_SHORT")return Ch.monthNamesShort[this._date.getMonth()];if(t==="CURRENT_SECONDS_UNIX")return String(Math.floor(this._date.getTime()/1e3));if(t==="CURRENT_TIMEZONE_OFFSET"){const i=this._date.getTimezoneOffset(),s=i>0?"-":"+",r=Math.trunc(Math.abs(i/60)),o=r<10?"0"+r:r,a=Math.abs(i)-r*60,l=a<10?"0"+a:a;return s+o+":"+l}}};Ch.dayNames=[v("Sunday","Sunday"),v("Monday","Monday"),v("Tuesday","Tuesday"),v("Wednesday","Wednesday"),v("Thursday","Thursday"),v("Friday","Friday"),v("Saturday","Saturday")],Ch.dayNamesShort=[v("SundayShort","Sun"),v("MondayShort","Mon"),v("TuesdayShort","Tue"),v("WednesdayShort","Wed"),v("ThursdayShort","Thu"),v("FridayShort","Fri"),v("SaturdayShort","Sat")],Ch.monthNames=[v("January","January"),v("February","February"),v("March","March"),v("April","April"),v("May","May"),v("June","June"),v("July","July"),v("August","August"),v("September","September"),v("October","October"),v("November","November"),v("December","December")],Ch.monthNamesShort=[v("JanuaryShort","Jan"),v("FebruaryShort","Feb"),v("MarchShort","Mar"),v("AprilShort","Apr"),v("MayShort","May"),v("JuneShort","Jun"),v("JulyShort","Jul"),v("AugustShort","Aug"),v("SeptemberShort","Sep"),v("OctoberShort","Oct"),v("NovemberShort","Nov"),v("DecemberShort","Dec")];let yF=Ch;class nhe{constructor(e){this._workspaceService=e}resolve(e){if(!this._workspaceService)return;const t=ctt(this._workspaceService.getWorkspace());if(!att(t)){if(e.name==="WORKSPACE_NAME")return this._resolveWorkspaceName(t);if(e.name==="WORKSPACE_FOLDER")return this._resoveWorkspacePath(t)}}_resolveWorkspaceName(e){if(HU(e))return qm(e.uri.path);let t=qm(e.configPath.path);return t.endsWith(VU)&&(t=t.substr(0,t.length-VU.length-1)),t}_resoveWorkspacePath(e){if(HU(e))return Que(e.uri.fsPath);const t=qm(e.configPath.path);let i=e.configPath.fsPath;return i.endsWith(t)&&(i=i.substr(0,i.length-t.length-1)),i?Que(i):"/"}}class she{resolve(e){const{name:t}=e;if(t==="RANDOM")return Math.random().toString().slice(-6);if(t==="RANDOM_HEX")return Math.random().toString(16).slice(-6);if(t==="UUID")return ZB()}}var Nwt=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Twt=function(n,e){return function(t,i){e(t,i,n)}},Xd;const ad=class ad{constructor(e,t,i){this._editor=e,this._snippet=t,this._snippetLineLeadingWhitespace=i,this._offset=-1,this._nestingLevel=1,this._placeholderGroups=hoe(t.placeholders,pc.compareByIndex),this._placeholderGroupsIdx=-1}initialize(e){this._offset=e.newPosition}dispose(){this._placeholderDecorations&&this._editor.removeDecorations([...this._placeholderDecorations.values()]),this._placeholderGroups.length=0}_initDecorations(){if(this._offset===-1)throw new Error("Snippet not initialized!");if(this._placeholderDecorations)return;this._placeholderDecorations=new Map;const e=this._editor.getModel();this._editor.changeDecorations(t=>{for(const i of this._snippet.placeholders){const s=this._snippet.offset(i),r=this._snippet.fullLen(i),o=M.fromPositions(e.getPositionAt(this._offset+s),e.getPositionAt(this._offset+s+r)),a=i.isFinalTabstop?ad._decor.inactiveFinal:ad._decor.inactive,l=t.addDecoration(o,a);this._placeholderDecorations.set(i,l)}})}move(e){if(!this._editor.hasModel())return[];if(this._initDecorations(),this._placeholderGroupsIdx>=0){const s=[];for(const r of this._placeholderGroups[this._placeholderGroupsIdx])if(r.transform){const o=this._placeholderDecorations.get(r),a=this._editor.getModel().getDecorationRange(o),l=this._editor.getModel().getValueInRange(a),c=r.transform.resolve(l).split(/\r\n|\r|\n/);for(let d=1;d<c.length;d++)c[d]=this._editor.getModel().normalizeIndentation(this._snippetLineLeadingWhitespace+c[d]);s.push(gn.replace(a,c.join(this._editor.getModel().getEOL())))}s.length>0&&this._editor.executeEdits("snippet.placeholderTransform",s)}let t=!1;e===!0&&this._placeholderGroupsIdx<this._placeholderGroups.length-1?(this._placeholderGroupsIdx+=1,t=!0):e===!1&&this._placeholderGroupsIdx>0&&(this._placeholderGroupsIdx-=1,t=!0);const i=this._editor.getModel().changeDecorations(s=>{const r=new Set,o=[];for(const a of this._placeholderGroups[this._placeholderGroupsIdx]){const l=this._placeholderDecorations.get(a),c=this._editor.getModel().getDecorationRange(l);o.push(new $e(c.startLineNumber,c.startColumn,c.endLineNumber,c.endColumn)),t=t&&this._hasPlaceholderBeenCollapsed(a),s.changeDecorationOptions(l,a.isFinalTabstop?ad._decor.activeFinal:ad._decor.active),r.add(a);for(const d of this._snippet.enclosingPlaceholders(a)){const u=this._placeholderDecorations.get(d);s.changeDecorationOptions(u,d.isFinalTabstop?ad._decor.activeFinal:ad._decor.active),r.add(d)}}for(const[a,l]of this._placeholderDecorations)r.has(a)||s.changeDecorationOptions(l,a.isFinalTabstop?ad._decor.inactiveFinal:ad._decor.inactive);return o});return t?this.move(e):i??[]}_hasPlaceholderBeenCollapsed(e){let t=e;for(;t;){if(t instanceof pc){const i=this._placeholderDecorations.get(t);if(this._editor.getModel().getDecorationRange(i).isEmpty()&&t.toString().length>0)return!0}t=t.parent}return!1}get isAtFirstPlaceholder(){return this._placeholderGroupsIdx<=0||this._placeholderGroups.length===0}get isAtLastPlaceholder(){return this._placeholderGroupsIdx===this._placeholderGroups.length-1}get hasPlaceholder(){return this._snippet.placeholders.length>0}get isTrivialSnippet(){if(this._snippet.placeholders.length===0)return!0;if(this._snippet.placeholders.length===1){const[e]=this._snippet.placeholders;if(e.isFinalTabstop&&this._snippet.rightMostDescendant===e)return!0}return!1}computePossibleSelections(){const e=new Map;for(const t of this._placeholderGroups){let i;for(const s of t){if(s.isFinalTabstop)break;i||(i=[],e.set(s.index,i));const r=this._placeholderDecorations.get(s),o=this._editor.getModel().getDecorationRange(r);if(!o){e.delete(s.index);break}i.push(o)}}return e}get activeChoice(){if(!this._placeholderDecorations)return;const e=this._placeholderGroups[this._placeholderGroupsIdx][0];if(!(e!=null&&e.choice))return;const t=this._placeholderDecorations.get(e);if(!t)return;const i=this._editor.getModel().getDecorationRange(t);if(i)return{range:i,choice:e.choice}}get hasChoice(){let e=!1;return this._snippet.walk(t=>(e=t instanceof Yx,!e)),e}merge(e){const t=this._editor.getModel();this._nestingLevel*=10,this._editor.changeDecorations(i=>{for(const s of this._placeholderGroups[this._placeholderGroupsIdx]){const r=e.shift();console.assert(r._offset!==-1),console.assert(!r._placeholderDecorations);const o=r._snippet.placeholderInfo.last.index;for(const l of r._snippet.placeholderInfo.all)l.isFinalTabstop?l.index=s.index+(o+1)/this._nestingLevel:l.index=s.index+l.index/this._nestingLevel;this._snippet.replace(s,r._snippet.children);const a=this._placeholderDecorations.get(s);i.removeDecoration(a),this._placeholderDecorations.delete(s);for(const l of r._snippet.placeholders){const c=r._snippet.offset(l),d=r._snippet.fullLen(l),u=M.fromPositions(t.getPositionAt(r._offset+c),t.getPositionAt(r._offset+c+d)),h=i.addDecoration(u,ad._decor.inactive);this._placeholderDecorations.set(l,h)}}this._placeholderGroups=hoe(this._snippet.placeholders,pc.compareByIndex)})}};ad._decor={active:_t.register({description:"snippet-placeholder-1",stickiness:0,className:"snippet-placeholder"}),inactive:_t.register({description:"snippet-placeholder-2",stickiness:1,className:"snippet-placeholder"}),activeFinal:_t.register({description:"snippet-placeholder-3",stickiness:1,className:"finish-snippet-placeholder"}),inactiveFinal:_t.register({description:"snippet-placeholder-4",stickiness:1,className:"finish-snippet-placeholder"})};let SF=ad;const rhe={overwriteBefore:0,overwriteAfter:0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0};let xF=Xd=class{static adjustWhitespace(e,t,i,s,r){const o=e.getLineContent(t.lineNumber),a=Ni(o,0,t.column-1);let l;return s.walk(c=>{if(!(c instanceof So)||c.parent instanceof Yx||r&&!r.has(c))return!0;const d=c.value.split(/\r\n|\r|\n/);if(i){const h=s.offset(c);if(h===0)d[0]=e.normalizeIndentation(d[0]);else{l=l??s.toString();const f=l.charCodeAt(h-1);(f===10||f===13)&&(d[0]=e.normalizeIndentation(a+d[0]))}for(let f=1;f<d.length;f++)d[f]=e.normalizeIndentation(a+d[f])}const u=d.join(e.getEOL());return u!==c.value&&(c.parent.replace(c,[new So(u)]),l=void 0),!0}),a}static adjustSelection(e,t,i,s){if(i!==0||s!==0){const{positionLineNumber:r,positionColumn:o}=t,a=o-i,l=o+s,c=e.validateRange({startLineNumber:r,startColumn:a,endLineNumber:r,endColumn:l});t=$e.createWithDirection(c.startLineNumber,c.startColumn,c.endLineNumber,c.endColumn,t.getDirection())}return t}static createEditsAndSnippetsFromSelections(e,t,i,s,r,o,a,l,c){const d=[],u=[];if(!e.hasModel())return{edits:d,snippets:u};const h=e.getModel(),f=e.invokeWithinContext(S=>S.get(m0)),g=e.invokeWithinContext(S=>new the(S.get(VS),h)),p=()=>a,_=h.getValueInRange(Xd.adjustSelection(h,e.getSelection(),i,0)),w=h.getValueInRange(Xd.adjustSelection(h,e.getSelection(),0,s)),b=h.getLineFirstNonWhitespaceColumn(e.getSelection().positionLineNumber),y=e.getSelections().map((S,x)=>({selection:S,idx:x})).sort((S,x)=>M.compareRangesUsingStarts(S.selection,x.selection));for(const{selection:S,idx:x}of y){let E=Xd.adjustSelection(h,S,i,0),D=Xd.adjustSelection(h,S,0,s);_!==h.getValueInRange(E)&&(E=S),w!==h.getValueInRange(D)&&(D=S);const N=S.setStartPosition(E.startLineNumber,E.startColumn).setEndPosition(D.endLineNumber,D.endColumn),I=new x0().parse(t,!0,r),H=N.getStartPosition(),z=Xd.adjustWhitespace(h,H,o||x>0&&b!==h.getLineFirstNonWhitespaceColumn(S.positionLineNumber),I);I.resolveVariables(new Jue([g,new ihe(p,x,y.length,e.getOption(79)==="spread"),new ehe(h,S,x,l),new CF(h,S,c),new yF,new nhe(f),new she])),d[x]=gn.replace(N,I.toString()),d[x].identifier={major:x,minor:0},d[x]._isTracked=!0,u[x]=new SF(e,I,z)}return{edits:d,snippets:u}}static createEditsAndSnippetsFromEdits(e,t,i,s,r,o,a){if(!e.hasModel()||t.length===0)return{edits:[],snippets:[]};const l=[],c=e.getModel(),d=new x0,u=new lT,h=new Jue([e.invokeWithinContext(g=>new the(g.get(VS),c)),new ihe(()=>r,0,e.getSelections().length,e.getOption(79)==="spread"),new ehe(c,e.getSelection(),0,o),new CF(c,e.getSelection(),a),new yF,new nhe(e.invokeWithinContext(g=>g.get(m0))),new she]);t=t.sort((g,p)=>M.compareRangesUsingStarts(g.range,p.range));let f=0;for(let g=0;g<t.length;g++){const{range:p,template:_}=t[g];if(g>0){const x=t[g-1].range,E=M.fromPositions(x.getEndPosition(),p.getStartPosition()),D=new So(c.getValueInRange(E));u.appendChild(D),f+=D.value.length}const w=d.parseFragment(_,u);Xd.adjustWhitespace(c,p.getStartPosition(),!0,u,new Set(w)),u.resolveVariables(h);const b=u.toString(),y=b.slice(f);f=b.length;const S=gn.replace(p,y);S.identifier={major:g,minor:0},S._isTracked=!0,l.push(S)}return d.ensureFinalTabstop(u,i,!0),{edits:l,snippets:[new SF(e,u,"")]}}constructor(e,t,i=rhe,s){this._editor=e,this._template=t,this._options=i,this._languageConfigurationService=s,this._templateMerges=[],this._snippets=[]}dispose(){Ti(this._snippets)}_logInfo(){return`template="${this._template}", merged_templates="${this._templateMerges.join(" -> ")}"`}insert(){if(!this._editor.hasModel())return;const{edits:e,snippets:t}=typeof this._template=="string"?Xd.createEditsAndSnippetsFromSelections(this._editor,this._template,this._options.overwriteBefore,this._options.overwriteAfter,!1,this._options.adjustWhitespace,this._options.clipboardText,this._options.overtypingCapturer,this._languageConfigurationService):Xd.createEditsAndSnippetsFromEdits(this._editor,this._template,!1,this._options.adjustWhitespace,this._options.clipboardText,this._options.overtypingCapturer,this._languageConfigurationService);this._snippets=t,this._editor.executeEdits("snippet",e,i=>{const s=i.filter(r=>!!r.identifier);for(let r=0;r<t.length;r++)t[r].initialize(s[r].textChange);return this._snippets[0].hasPlaceholder?this._move(!0):s.map(r=>$e.fromPositions(r.range.getEndPosition()))}),this._editor.revealRange(this._editor.getSelections()[0])}merge(e,t=rhe){if(!this._editor.hasModel())return;this._templateMerges.push([this._snippets[0]._nestingLevel,this._snippets[0]._placeholderGroupsIdx,e]);const{edits:i,snippets:s}=Xd.createEditsAndSnippetsFromSelections(this._editor,e,t.overwriteBefore,t.overwriteAfter,!0,t.adjustWhitespace,t.clipboardText,t.overtypingCapturer,this._languageConfigurationService);this._editor.executeEdits("snippet",i,r=>{const o=r.filter(l=>!!l.identifier);for(let l=0;l<s.length;l++)s[l].initialize(o[l].textChange);const a=s[0].isTrivialSnippet;if(!a){for(const l of this._snippets)l.merge(s);console.assert(s.length===0)}return this._snippets[0].hasPlaceholder&&!a?this._move(void 0):o.map(l=>$e.fromPositions(l.range.getEndPosition()))})}next(){const e=this._move(!0);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}prev(){const e=this._move(!1);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}_move(e){const t=[];for(const i of this._snippets){const s=i.move(e);t.push(...s)}return t}get isAtFirstPlaceholder(){return this._snippets[0].isAtFirstPlaceholder}get isAtLastPlaceholder(){return this._snippets[0].isAtLastPlaceholder}get hasPlaceholder(){return this._snippets[0].hasPlaceholder}get hasChoice(){return this._snippets[0].hasChoice}get activeChoice(){return this._snippets[0].activeChoice}isSelectionWithinPlaceholders(){if(!this.hasPlaceholder)return!1;const e=this._editor.getSelections();if(e.length<this._snippets.length)return!1;const t=new Map;for(const i of this._snippets){const s=i.computePossibleSelections();if(t.size===0)for(const[r,o]of s){o.sort(M.compareRangesUsingStarts);for(const a of e)if(o[0].containsRange(a)){t.set(r,[]);break}}if(t.size===0)return!1;t.forEach((r,o)=>{r.push(...s.get(o))})}e.sort(M.compareRangesUsingStarts);for(const[i,s]of t){if(s.length!==e.length){t.delete(i);continue}s.sort(M.compareRangesUsingStarts);for(let r=0;r<s.length;r++)if(!s[r].containsRange(e[r])){t.delete(i);continue}}return t.size>0}};xF=Xd=Nwt([Twt(3,vn)],xF);var Rwt=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},AA=function(n,e){return function(t,i){e(t,i,n)}},t1;const ohe={overwriteBefore:0,overwriteAfter:0,undoStopBefore:!0,undoStopAfter:!0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0};var Hh;let Wo=(Hh=class{static get(e){return e.getContribution(t1.ID)}constructor(e,t,i,s,r){this._editor=e,this._logService=t,this._languageFeaturesService=i,this._languageConfigurationService=r,this._snippetListener=new ue,this._modelVersionId=-1,this._inSnippet=t1.InSnippetMode.bindTo(s),this._hasNextTabstop=t1.HasNextTabstop.bindTo(s),this._hasPrevTabstop=t1.HasPrevTabstop.bindTo(s)}dispose(){var e;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),(e=this._session)==null||e.dispose(),this._snippetListener.dispose()}insert(e,t){try{this._doInsert(e,typeof t>"u"?ohe:{...ohe,...t})}catch(i){this.cancel(),this._logService.error(i),this._logService.error("snippet_error"),this._logService.error("insert_template=",e),this._logService.error("existing_template=",this._session?this._session._logInfo():"<no_session>")}}_doInsert(e,t){var i;if(this._editor.hasModel()){if(this._snippetListener.clear(),t.undoStopBefore&&this._editor.getModel().pushStackElement(),this._session&&typeof e!="string"&&this.cancel(),this._session?(si(typeof e=="string"),this._session.merge(e,t)):(this._modelVersionId=this._editor.getModel().getAlternativeVersionId(),this._session=new xF(this._editor,e,t,this._languageConfigurationService),this._session.insert()),t.undoStopAfter&&this._editor.getModel().pushStackElement(),(i=this._session)!=null&&i.hasChoice){const s={_debugDisplayName:"snippetChoiceCompletions",provideCompletionItems:(d,u)=>{if(!this._session||d!==this._editor.getModel()||!Y.equals(this._editor.getPosition(),u))return;const{activeChoice:h}=this._session;if(!h||h.choice.options.length===0)return;const f=d.getValueInRange(h.range),g=!!h.choice.options.find(_=>_.value===f),p=[];for(let _=0;_<h.choice.options.length;_++){const w=h.choice.options[_];p.push({kind:13,label:w.value,insertText:w.value,sortText:"a".repeat(_+1),range:h.range,filterText:g?`${f}_${w.value}`:void 0,command:{id:"jumpToNextSnippetPlaceholder",title:v("next","Go to next placeholder...")}})}return{suggestions:p}}},r=this._editor.getModel();let o,a=!1;const l=()=>{o==null||o.dispose(),a=!1},c=()=>{a||(o=this._languageFeaturesService.completionProvider.register({language:r.getLanguageId(),pattern:r.uri.fsPath,scheme:r.uri.scheme,exclusive:!0},s),this._snippetListener.add(o),a=!0)};this._choiceCompletions={provider:s,enable:c,disable:l}}this._updateState(),this._snippetListener.add(this._editor.onDidChangeModelContent(s=>s.isFlush&&this.cancel())),this._snippetListener.add(this._editor.onDidChangeModel(()=>this.cancel())),this._snippetListener.add(this._editor.onDidChangeCursorSelection(()=>this._updateState()))}}_updateState(){if(!(!this._session||!this._editor.hasModel())){if(this._modelVersionId===this._editor.getModel().getAlternativeVersionId())return this.cancel();if(!this._session.hasPlaceholder)return this.cancel();if(this._session.isAtLastPlaceholder||!this._session.isSelectionWithinPlaceholders())return this._editor.getModel().pushStackElement(),this.cancel();this._inSnippet.set(!0),this._hasPrevTabstop.set(!this._session.isAtFirstPlaceholder),this._hasNextTabstop.set(!this._session.isAtLastPlaceholder),this._handleChoice()}}_handleChoice(){var t;if(!this._session||!this._editor.hasModel()){this._currentChoice=void 0;return}const{activeChoice:e}=this._session;if(!e||!this._choiceCompletions){(t=this._choiceCompletions)==null||t.disable(),this._currentChoice=void 0;return}this._currentChoice!==e.choice&&(this._currentChoice=e.choice,this._choiceCompletions.enable(),queueMicrotask(()=>{Ewt(this._editor,this._choiceCompletions.provider)}))}finish(){for(;this._inSnippet.get();)this.next()}cancel(e=!1){var t;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),this._snippetListener.clear(),this._currentChoice=void 0,(t=this._session)==null||t.dispose(),this._session=void 0,this._modelVersionId=-1,e&&this._editor.setSelections([this._editor.getSelection()])}prev(){var e;(e=this._session)==null||e.prev(),this._updateState()}next(){var e;(e=this._session)==null||e.next(),this._updateState()}isInSnippet(){return!!this._inSnippet.get()}},t1=Hh,Hh.ID="snippetController2",Hh.InSnippetMode=new Re("inSnippetMode",!1,v("inSnippetMode","Whether the editor in current in snippet mode")),Hh.HasNextTabstop=new Re("hasNextTabstop",!1,v("hasNextTabstop","Whether there is a next tab stop when in snippet mode")),Hh.HasPrevTabstop=new Re("hasPrevTabstop",!1,v("hasPrevTabstop","Whether there is a previous tab stop when in snippet mode")),Hh);Wo=t1=Rwt([AA(1,Cr),AA(2,Be),AA(3,at),AA(4,vn)],Wo);Xt(Wo.ID,Wo,4);const aW=vs.bindToContribution(Wo.get);Te(new aW({id:"jumpToNextSnippetPlaceholder",precondition:he.and(Wo.InSnippetMode,Wo.HasNextTabstop),handler:n=>n.next(),kbOpts:{weight:130,kbExpr:F.textInputFocus,primary:2}}));Te(new aW({id:"jumpToPrevSnippetPlaceholder",precondition:he.and(Wo.InSnippetMode,Wo.HasPrevTabstop),handler:n=>n.prev(),kbOpts:{weight:130,kbExpr:F.textInputFocus,primary:1026}}));Te(new aW({id:"leaveSnippet",precondition:Wo.InSnippetMode,handler:n=>n.cancel(!0),kbOpts:{weight:130,kbExpr:F.textInputFocus,primary:9,secondary:[1033]}}));Te(new aW({id:"acceptSnippet",precondition:Wo.InSnippetMode,handler:n=>n.finish()}));var Awt=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},b6=function(n,e){return function(t,i){e(t,i,n)}};let cq=class extends ee{get isAcceptingPartially(){return this._isAcceptingPartially}constructor(e,t,i,s,r,o,a,l,c,d,u,h){super(),this.textModel=e,this.selectedSuggestItem=t,this._textModelVersionId=i,this._positions=s,this._debounceValue=r,this._suggestPreviewEnabled=o,this._suggestPreviewMode=a,this._inlineSuggestMode=l,this._enabled=c,this._instantiationService=d,this._commandService=u,this._languageConfigurationService=h,this._source=this._register(this._instantiationService.createInstance(lq,this.textModel,this._textModelVersionId,this._debounceValue)),this._isActive=Nt(this,!1),this._forceUpdateExplicitlySignal=Bx(this),this._selectedInlineCompletionId=Nt(this,void 0),this._primaryPosition=Ke(this,g=>this._positions.read(g)[0]??new Y(1,1)),this._isAcceptingPartially=!1,this._preserveCurrentCompletionReasons=new Set([qf.Redo,qf.Undo,qf.AcceptWord]),this._fetchInlineCompletionsPromise=F1e({owner:this,createEmptyChangeSummary:()=>({preserveCurrentCompletion:!1,inlineCompletionTriggerKind:Du.Automatic}),handleChange:(g,p)=>(g.didChange(this._textModelVersionId)&&this._preserveCurrentCompletionReasons.has(this._getReason(g.change))?p.preserveCurrentCompletion=!0:g.didChange(this._forceUpdateExplicitlySignal)&&(p.inlineCompletionTriggerKind=Du.Explicit),!0)},(g,p)=>{if(this._forceUpdateExplicitlySignal.read(g),!(this._enabled.read(g)&&this.selectedSuggestItem.read(g)||this._isActive.read(g))){this._source.cancelUpdate();return}this._textModelVersionId.read(g);const w=this._source.suggestWidgetInlineCompletions.get(),b=this.selectedSuggestItem.read(g);if(w&&!b){const D=this._source.inlineCompletions.get();pn(N=>{(!D||w.request.versionId>D.request.versionId)&&this._source.inlineCompletions.set(w.clone(),N),this._source.clearSuggestWidgetInlineCompletions(N)})}const y=this._primaryPosition.read(g),S={triggerKind:p.inlineCompletionTriggerKind,selectedSuggestionInfo:b==null?void 0:b.toSelectedSuggestionInfo()},x=this.selectedInlineCompletion.get(),E=p.preserveCurrentCompletion||x!=null&&x.forwardStable?x:void 0;return this._source.fetch(y,S,E)}),this._filteredInlineCompletionItems=Il({owner:this,equalsFn:$P()},g=>{const p=this._source.inlineCompletions.read(g);if(!p)return[];const _=this._primaryPosition.read(g);return p.inlineCompletions.filter(b=>b.isVisible(this.textModel,_,g))}),this.selectedInlineCompletionIndex=Ke(this,g=>{const p=this._selectedInlineCompletionId.read(g),_=this._filteredInlineCompletionItems.read(g),w=this._selectedInlineCompletionId===void 0?-1:_.findIndex(b=>b.semanticId===p);return w===-1?(this._selectedInlineCompletionId.set(void 0,void 0),0):w}),this.selectedInlineCompletion=Ke(this,g=>{const p=this._filteredInlineCompletionItems.read(g),_=this.selectedInlineCompletionIndex.read(g);return p[_]}),this.activeCommands=Il({owner:this,equalsFn:$P()},g=>{var p;return((p=this.selectedInlineCompletion.read(g))==null?void 0:p.inlineCompletion.source.inlineCompletions.commands)??[]}),this.lastTriggerKind=this._source.inlineCompletions.map(this,g=>g==null?void 0:g.request.context.triggerKind),this.inlineCompletionsCount=Ke(this,g=>{if(this.lastTriggerKind.read(g)===Du.Explicit)return this._filteredInlineCompletionItems.read(g).length}),this.state=Il({owner:this,equalsFn:(g,p)=>!g||!p?g===p:zue(g.ghostTexts,p.ghostTexts)&&g.inlineCompletion===p.inlineCompletion&&g.suggestItem===p.suggestItem},g=>{const p=this.textModel,_=this.selectedSuggestItem.read(g);if(_){const w=Qb(_.toSingleTextEdit(),p),b=this._computeAugmentation(w,g);if(!this._suggestPreviewEnabled.read(g)&&!b)return;const S=(b==null?void 0:b.edit)??w,x=b?b.edit.text.length-w.text.length:0,E=this._suggestPreviewMode.read(g),D=this._positions.read(g),N=[S,...w6(this.textModel,D,S)],I=N.map((z,G)=>que(z,p,E,D[G],x)).filter(Yh),H=I[0]??new $D(S.range.endLineNumber,[]);return{edits:N,primaryGhostText:H,ghostTexts:I,inlineCompletion:b==null?void 0:b.completion,suggestItem:_}}else{if(!this._isActive.read(g))return;const w=this.selectedInlineCompletion.read(g);if(!w)return;const b=w.toSingleTextEdit(g),y=this._inlineSuggestMode.read(g),S=this._positions.read(g),x=[b,...w6(this.textModel,S,b)],E=x.map((D,N)=>que(D,p,y,S[N],0)).filter(Yh);return E[0]?{edits:x,primaryGhostText:E[0],ghostTexts:E,inlineCompletion:w,suggestItem:void 0}:void 0}}),this.ghostTexts=Il({owner:this,equalsFn:zue},g=>{const p=this.state.read(g);if(p)return p.ghostTexts}),this.primaryGhostText=Il({owner:this,equalsFn:dke},g=>{const p=this.state.read(g);if(p)return p==null?void 0:p.primaryGhostText}),this._register(Wx(this._fetchInlineCompletionsPromise));let f;this._register(gt(g=>{var w,b;const p=this.state.read(g),_=p==null?void 0:p.inlineCompletion;if((_==null?void 0:_.semanticId)!==(f==null?void 0:f.semanticId)&&(f=_,_)){const y=_.inlineCompletion,S=y.source;(b=(w=S.provider).handleItemDidShow)==null||b.call(w,S.inlineCompletions,y.sourceInlineCompletion,y.insertText)}}))}_getReason(e){return e!=null&&e.isUndoing?qf.Undo:e!=null&&e.isRedoing?qf.Redo:this.isAcceptingPartially?qf.AcceptWord:qf.Other}async trigger(e){this._isActive.set(!0,e),await this._fetchInlineCompletionsPromise.get()}async triggerExplicitly(e){_0(e,t=>{this._isActive.set(!0,t),this._forceUpdateExplicitlySignal.trigger(t)}),await this._fetchInlineCompletionsPromise.get()}stop(e){_0(e,t=>{this._isActive.set(!1,t),this._source.clear(t)})}_computeAugmentation(e,t){const i=this.textModel,s=this._source.suggestWidgetInlineCompletions.read(t),r=s?s.inlineCompletions:[this.selectedInlineCompletion.read(t)].filter(Yh);return BYe(r,a=>{let l=a.toSingleTextEdit(t);return l=Qb(l,i,M.fromPositions(l.range.getStartPosition(),e.range.getEndPosition())),gke(l,e)?{completion:a,edit:l}:void 0})}async _deltaSelectedInlineCompletionIndex(e){await this.triggerExplicitly();const t=this._filteredInlineCompletionItems.get()||[];if(t.length>0){const i=(this.selectedInlineCompletionIndex.get()+e+t.length)%t.length;this._selectedInlineCompletionId.set(t[i].semanticId,void 0)}else this._selectedInlineCompletionId.set(void 0,void 0)}async next(){await this._deltaSelectedInlineCompletionIndex(1)}async previous(){await this._deltaSelectedInlineCompletionIndex(-1)}async accept(e){var s;if(e.getModel()!==this.textModel)throw new li;const t=this.state.get();if(!t||t.primaryGhostText.isEmpty()||!t.inlineCompletion)return;const i=t.inlineCompletion.toInlineCompletion(void 0);if(i.command&&i.source.addRef(),e.pushUndoStop(),i.snippetInfo)e.executeEdits("inlineSuggestion.accept",[gn.replace(i.range,""),...i.additionalTextEdits]),e.setPosition(i.snippetInfo.range.getStartPosition(),"inlineCompletionAccept"),(s=Wo.get(e))==null||s.insert(i.snippetInfo.snippet,{undoStopBefore:!1});else{const r=t.edits,o=ahe(r).map(a=>$e.fromPositions(a));e.executeEdits("inlineSuggestion.accept",[...r.map(a=>gn.replace(a.range,a.text)),...i.additionalTextEdits]),e.setSelections(o,"inlineCompletionAccept")}this.stop(),i.command&&(await this._commandService.executeCommand(i.command.id,...i.command.arguments||[]).then(void 0,Wn),i.source.removeRef())}async acceptNextWord(e){await this._acceptNext(e,(t,i)=>{const s=this.textModel.getLanguageIdAtPosition(t.lineNumber,t.column),r=this._languageConfigurationService.getLanguageConfiguration(s),o=new RegExp(r.wordDefinition.source,r.wordDefinition.flags.replace("g","")),a=i.match(o);let l=0;a&&a.index!==void 0?a.index===0?l=a[0].length:l=a.index:l=i.length;const d=/\s+/g.exec(i);return d&&d.index!==void 0&&d.index+d[0].length<l&&(l=d.index+d[0].length),l},0)}async acceptNextLine(e){await this._acceptNext(e,(t,i)=>{const s=i.match(/\n/);return s&&s.index!==void 0?s.index+1:i.length},1)}async _acceptNext(e,t,i){if(e.getModel()!==this.textModel)throw new li;const s=this.state.get();if(!s||s.primaryGhostText.isEmpty()||!s.inlineCompletion)return;const r=s.primaryGhostText,o=s.inlineCompletion.toInlineCompletion(void 0);if(o.snippetInfo||o.filterText!==o.insertText){await this.accept(e);return}const a=r.parts[0],l=new Y(r.lineNumber,a.column),c=a.text,d=t(l,c);if(d===c.length&&r.parts.length===1){this.accept(e);return}const u=c.substring(0,d),h=this._positions.get(),f=h[0];o.source.addRef();try{this._isAcceptingPartially=!0;try{e.pushUndoStop();const g=M.fromPositions(f,l),p=e.getModel().getValueInRange(g)+u,_=new rf(g,p),w=[_,...w6(this.textModel,h,_)],b=ahe(w).map(y=>$e.fromPositions(y));e.executeEdits("inlineSuggestion.accept",w.map(y=>gn.replace(y.range,y.text))),e.setSelections(b,"inlineCompletionPartialAccept"),e.revealPositionInCenterIfOutsideViewport(e.getPosition(),1)}finally{this._isAcceptingPartially=!1}if(o.source.provider.handlePartialAccept){const g=M.fromPositions(o.range.getStartPosition(),Rd.ofText(u).addToPosition(l)),p=e.getModel().getValueInRange(g,1);o.source.provider.handlePartialAccept(o.source.inlineCompletions,o.sourceInlineCompletion,p.length,{kind:i})}}finally{o.source.removeRef()}}handleSuggestAccepted(e){var r,o;const t=Qb(e.toSingleTextEdit(),this.textModel),i=this._computeAugmentation(t,void 0);if(!i)return;const s=i.completion.inlineCompletion;(o=(r=s.source.provider).handlePartialAccept)==null||o.call(r,s.source.inlineCompletions,s.sourceInlineCompletion,t.text.length,{kind:2})}};cq=Awt([b6(9,Ze),b6(10,Vi),b6(11,vn)],cq);var qf;(function(n){n[n.Undo=0]="Undo",n[n.Redo=1]="Redo",n[n.AcceptWord=2]="AcceptWord",n[n.Other=3]="Other"})(qf||(qf={}));function w6(n,e,t){if(e.length===1)return[];const i=e[0],s=e.slice(1),r=t.range.getStartPosition(),o=t.range.getEndPosition(),a=n.getValueInRange(M.fromPositions(i,o)),l=Uue(i,r);if(l.lineNumber<1)return pt(new li(`positionWithinTextEdit line number should be bigger than 0.
			Invalid subtraction between ${i.toString()} and ${r.toString()}`)),[];const c=Mwt(t.text,l);return s.map(d=>{const u=rwt(Uue(d,r),o),h=n.getValueInRange(M.fromPositions(d,u)),f=D_(a,h),g=M.fromPositions(d,d.delta(0,f));return new rf(g,c)})}function Mwt(n,e){let t="";const i=dKe(n);for(let s=e.lineNumber-1;s<i.length;s++)t+=i[s].substring(s===e.lineNumber-1?e.column-1:0);return t}function ahe(n){const e=ZM.createSortPermutation(n,No(r=>r.range,M.compareRangesUsingStarts)),i=new kX(e.apply(n)).getNewRanges();return e.inverse().apply(i).map(r=>r.getEndPosition())}var Pwt=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},lhe=function(n,e){return function(t,i){e(t,i,n)}},yk;class uee{constructor(e){this.name=e}select(e,t,i){if(i.length===0)return 0;const s=i[0].score[0];for(let r=0;r<i.length;r++){const{score:o,completion:a}=i[r];if(o[0]!==s)break;if(a.preselect)return r}return 0}}class che extends uee{constructor(){super("first")}memorize(e,t,i){}toJSON(){}fromJSON(){}}class Owt extends uee{constructor(){super("recentlyUsed"),this._cache=new vf(300,.66),this._seq=0}memorize(e,t,i){const s=`${e.getLanguageId()}/${i.textLabel}`;this._cache.set(s,{touch:this._seq++,type:i.completion.kind,insertText:i.completion.insertText})}select(e,t,i){if(i.length===0)return 0;const s=e.getLineContent(t.lineNumber).substr(t.column-10,t.column-1);if(/\s$/.test(s))return super.select(e,t,i);const r=i[0].score[0];let o=-1,a=-1,l=-1;for(let c=0;c<i.length&&i[c].score[0]===r;c++){const d=`${e.getLanguageId()}/${i[c].textLabel}`,u=this._cache.peek(d);if(u&&u.touch>l&&u.type===i[c].completion.kind&&u.insertText===i[c].completion.insertText&&(l=u.touch,a=c),i[c].completion.preselect&&o===-1)return o=c}return a!==-1?a:o!==-1?o:0}toJSON(){return this._cache.toJSON()}fromJSON(e){this._cache.clear();const t=0;for(const[i,s]of e)s.touch=t,s.type=typeof s.type=="number"?s.type:RI.fromString(s.type),this._cache.set(i,s);this._seq=this._cache.size}}class Fwt extends uee{constructor(){super("recentlyUsedByPrefix"),this._trie=Iy.forStrings(),this._seq=0}memorize(e,t,i){const{word:s}=e.getWordUntilPosition(t),r=`${e.getLanguageId()}/${s}`;this._trie.set(r,{type:i.completion.kind,insertText:i.completion.insertText,touch:this._seq++})}select(e,t,i){const{word:s}=e.getWordUntilPosition(t);if(!s)return super.select(e,t,i);const r=`${e.getLanguageId()}/${s}`;let o=this._trie.get(r);if(o||(o=this._trie.findSubstr(r)),o)for(let a=0;a<i.length;a++){const{kind:l,insertText:c}=i[a].completion;if(l===o.type&&c===o.insertText)return a}return super.select(e,t,i)}toJSON(){const e=[];return this._trie.forEach((t,i)=>e.push([i,t])),e.sort((t,i)=>-(t[1].touch-i[1].touch)).forEach((t,i)=>t[1].touch=i),e.slice(0,200)}fromJSON(e){if(this._trie.clear(),e.length>0){this._seq=e[0][1].touch+1;for(const[t,i]of e)i.type=typeof i.type=="number"?i.type:RI.fromString(i.type),this._trie.set(t,i)}}}var d_;let dq=(d_=class{constructor(e,t){this._storageService=e,this._configService=t,this._disposables=new ue,this._persistSoon=new yi(()=>this._saveState(),500),this._disposables.add(e.onWillSaveState(i=>{i.reason===aD.SHUTDOWN&&this._saveState()}))}dispose(){this._disposables.dispose(),this._persistSoon.dispose()}memorize(e,t,i){this._withStrategy(e,t).memorize(e,t,i),this._persistSoon.schedule()}select(e,t,i){return this._withStrategy(e,t).select(e,t,i)}_withStrategy(e,t){var s;const i=this._configService.getValue("editor.suggestSelection",{overrideIdentifier:e.getLanguageIdAtPosition(t.lineNumber,t.column),resource:e.uri});if(((s=this._strategy)==null?void 0:s.name)!==i){this._saveState();const r=yk._strategyCtors.get(i)||che;this._strategy=new r;try{const a=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,l=this._storageService.get(`${yk._storagePrefix}/${i}`,a);l&&this._strategy.fromJSON(JSON.parse(l))}catch{}}return this._strategy}_saveState(){if(this._strategy){const t=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,i=JSON.stringify(this._strategy);this._storageService.store(`${yk._storagePrefix}/${this._strategy.name}`,i,t,1)}}},yk=d_,d_._strategyCtors=new Map([["recentlyUsedByPrefix",Fwt],["recentlyUsed",Owt],["first",che]]),d_._storagePrefix="suggest/memories",d_);dq=yk=Pwt([lhe(0,Wd),lhe(1,Tt)],dq);const lW=Wt("ISuggestMemories");jt(lW,dq,1);var Bwt=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Wwt=function(n,e){return function(t,i){e(t,i,n)}},uq,Dw;let LF=(Dw=class{constructor(e,t){this._editor=e,this._enabled=!1,this._ckAtEnd=uq.AtEnd.bindTo(t),this._configListener=this._editor.onDidChangeConfiguration(i=>i.hasChanged(124)&&this._update()),this._update()}dispose(){var e;this._configListener.dispose(),(e=this._selectionListener)==null||e.dispose(),this._ckAtEnd.reset()}_update(){const e=this._editor.getOption(124)==="on";if(this._enabled!==e)if(this._enabled=e,this._enabled){const t=()=>{if(!this._editor.hasModel()){this._ckAtEnd.set(!1);return}const i=this._editor.getModel(),s=this._editor.getSelection(),r=i.getWordAtPosition(s.getStartPosition());if(!r){this._ckAtEnd.set(!1);return}this._ckAtEnd.set(r.endColumn===s.getStartPosition().column)};this._selectionListener=this._editor.onDidChangeCursorSelection(t),t()}else this._selectionListener&&(this._ckAtEnd.reset(),this._selectionListener.dispose(),this._selectionListener=void 0)}},uq=Dw,Dw.AtEnd=new Re("atEndOfWord",!1),Dw);LF=uq=Bwt([Wwt(1,at)],LF);var Hwt=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Vwt=function(n,e){return function(t,i){e(t,i,n)}},Sk,Nw;let lx=(Nw=class{constructor(e,t){this._editor=e,this._index=0,this._ckOtherSuggestions=Sk.OtherSuggestions.bindTo(t)}dispose(){this.reset()}reset(){var e;this._ckOtherSuggestions.reset(),(e=this._listener)==null||e.dispose(),this._model=void 0,this._acceptNext=void 0,this._ignore=!1}set({model:e,index:t},i){if(e.items.length===0){this.reset();return}if(Sk._moveIndex(!0,e,t)===t){this.reset();return}this._acceptNext=i,this._model=e,this._index=t,this._listener=this._editor.onDidChangeCursorPosition(()=>{this._ignore||this.reset()}),this._ckOtherSuggestions.set(!0)}static _moveIndex(e,t,i){let s=i;for(let r=t.items.length;r>0&&(s=(s+t.items.length+(e?1:-1))%t.items.length,!(s===i||!t.items[s].completion.additionalTextEdits));r--);return s}next(){this._move(!0)}prev(){this._move(!1)}_move(e){if(this._model)try{this._ignore=!0,this._index=Sk._moveIndex(e,this._model,this._index),this._acceptNext({index:this._index,item:this._model.items[this._index],model:this._model})}finally{this._ignore=!1}}},Sk=Nw,Nw.OtherSuggestions=new Re("hasOtherSuggestions",!1),Nw);lx=Sk=Hwt([Vwt(1,at)],lx);class zwt{constructor(e,t,i,s){this._disposables=new ue,this._disposables.add(i.onDidSuggest(r=>{r.completionModel.items.length===0&&this.reset()})),this._disposables.add(i.onDidCancel(r=>{this.reset()})),this._disposables.add(t.onDidShow(()=>this._onItem(t.getFocusedItem()))),this._disposables.add(t.onDidFocus(this._onItem,this)),this._disposables.add(t.onDidHide(this.reset,this)),this._disposables.add(e.onWillType(r=>{if(this._active&&!t.isFrozen()&&i.state!==0){const o=r.charCodeAt(r.length-1);this._active.acceptCharacters.has(o)&&e.getOption(0)&&s(this._active.item)}}))}_onItem(e){if(!e||!ao(e.item.completion.commitCharacters)){this.reset();return}if(this._active&&this._active.item.item===e.item)return;const t=new yP;for(const i of e.item.completion.commitCharacters)i.length>0&&t.add(i.charCodeAt(0));this._active={acceptCharacters:t,item:e}}reset(){this._active=void 0}dispose(){this._disposables.dispose()}}const lc=class lc{async provideSelectionRanges(e,t){const i=[];for(const s of t){const r=[];i.push(r);const o=new Map;await new Promise(a=>lc._bracketsRightYield(a,0,e,s,o)),await new Promise(a=>lc._bracketsLeftYield(a,0,e,s,o,r))}return i}static _bracketsRightYield(e,t,i,s,r){const o=new Map,a=Date.now();for(;;){if(t>=lc._maxRounds){e();break}if(!s){e();break}const l=i.bracketPairs.findNextBracket(s);if(!l){e();break}if(Date.now()-a>lc._maxDuration){setTimeout(()=>lc._bracketsRightYield(e,t+1,i,s,r));break}if(l.bracketInfo.isOpeningBracket){const d=l.bracketInfo.bracketText,u=o.has(d)?o.get(d):0;o.set(d,u+1)}else{const d=l.bracketInfo.getOpeningBrackets()[0].bracketText;let u=o.has(d)?o.get(d):0;if(u-=1,o.set(d,Math.max(0,u)),u<0){let h=r.get(d);h||(h=new xo,r.set(d,h)),h.push(l.range)}}s=l.range.getEndPosition()}}static _bracketsLeftYield(e,t,i,s,r,o){const a=new Map,l=Date.now();for(;;){if(t>=lc._maxRounds&&r.size===0){e();break}if(!s){e();break}const c=i.bracketPairs.findPrevBracket(s);if(!c){e();break}if(Date.now()-l>lc._maxDuration){setTimeout(()=>lc._bracketsLeftYield(e,t+1,i,s,r,o));break}if(c.bracketInfo.isOpeningBracket){const u=c.bracketInfo.bracketText;let h=a.has(u)?a.get(u):0;if(h-=1,a.set(u,Math.max(0,h)),h<0){const f=r.get(u);if(f){const g=f.shift();f.size===0&&r.delete(u);const p=M.fromPositions(c.range.getEndPosition(),g.getStartPosition()),_=M.fromPositions(c.range.getStartPosition(),g.getEndPosition());o.push({range:p}),o.push({range:_}),lc._addBracketLeading(i,_,o)}}}else{const u=c.bracketInfo.getOpeningBrackets()[0].bracketText,h=a.has(u)?a.get(u):0;a.set(u,h+1)}s=c.range.getStartPosition()}}static _addBracketLeading(e,t,i){if(t.startLineNumber===t.endLineNumber)return;const s=t.startLineNumber,r=e.getLineFirstNonWhitespaceColumn(s);r!==0&&r!==t.startColumn&&(i.push({range:M.fromPositions(new Y(s,r),t.getEndPosition())}),i.push({range:M.fromPositions(new Y(s,1),t.getEndPosition())}));const o=s-1;if(o>0){const a=e.getLineFirstNonWhitespaceColumn(o);a===t.startColumn&&a!==e.getLineLastNonWhitespaceColumn(o)&&(i.push({range:M.fromPositions(new Y(o,a),t.getEndPosition())}),i.push({range:M.fromPositions(new Y(o,1),t.getEndPosition())}))}}};lc._maxDuration=30,lc._maxRounds=2;let kF=lc;const yh=class yh{static async create(e,t){if(!t.getOption(119).localityBonus||!t.hasModel())return yh.None;const i=t.getModel(),s=t.getPosition();if(!e.canComputeWordRanges(i.uri))return yh.None;const[r]=await new kF().provideSelectionRanges(i,[s]);if(r.length===0)return yh.None;const o=await e.computeWordRanges(i.uri,r[0].range);if(!o)return yh.None;const a=i.getWordUntilPosition(s);return delete o[a.word],new class extends yh{distance(l,c){if(!s.equals(t.getPosition()))return 0;if(c.kind===17)return 2<<20;const d=typeof c.label=="string"?c.label:c.label.label,u=o[d];if(Rwe(u))return 2<<20;const h=kI(u,M.fromPositions(l),M.compareRangesUsingStarts),f=h>=0?u[h]:u[Math.max(0,~h-1)];let g=r.length;for(const p of r){if(!M.containsRange(p.range,f))break;g-=1}return g}}}};yh.None=new class extends yh{distance(){return 0}};let EF=yh,dhe=class{constructor(e,t){this.leadingLineContent=e,this.characterCountDelta=t}};class dm{constructor(e,t,i,s,r,o,a=eD.default,l=void 0){this.clipboardText=l,this._snippetCompareFn=dm._compareCompletionItems,this._items=e,this._column=t,this._wordDistance=s,this._options=r,this._refilterKind=1,this._lineContext=i,this._fuzzyScoreOptions=a,o==="top"?this._snippetCompareFn=dm._compareCompletionItemsSnippetsUp:o==="bottom"&&(this._snippetCompareFn=dm._compareCompletionItemsSnippetsDown)}get lineContext(){return this._lineContext}set lineContext(e){(this._lineContext.leadingLineContent!==e.leadingLineContent||this._lineContext.characterCountDelta!==e.characterCountDelta)&&(this._refilterKind=this._lineContext.characterCountDelta<e.characterCountDelta&&this._filteredItems?2:1,this._lineContext=e)}get items(){return this._ensureCachedState(),this._filteredItems}getItemsByProvider(){return this._ensureCachedState(),this._itemsByProvider}getIncompleteProvider(){this._ensureCachedState();const e=new Set;for(const[t,i]of this.getItemsByProvider())i.length>0&&i[0].container.incomplete&&e.add(t);return e}get stats(){return this._ensureCachedState(),this._stats}_ensureCachedState(){this._refilterKind!==0&&this._createCachedState()}_createCachedState(){this._itemsByProvider=new Map;const e=[],{leadingLineContent:t,characterCountDelta:i}=this._lineContext;let s="",r="";const o=this._refilterKind===1?this._items:this._filteredItems,a=[],l=!this._options.filterGraceful||o.length>2e3?p0:DJe;for(let c=0;c<o.length;c++){const d=o[c];if(d.isInvalid)continue;const u=this._itemsByProvider.get(d.provider);u?u.push(d):this._itemsByProvider.set(d.provider,[d]);const h=d.position.column-d.editStart.column,f=h+i-(d.position.column-this._column);if(s.length!==f&&(s=f===0?"":t.slice(-f),r=s.toLowerCase()),d.word=s,f===0)d.score=Au.Default;else{let g=0;for(;g<h;){const p=s.charCodeAt(g);if(p===32||p===9)g+=1;else break}if(g>=f)d.score=Au.Default;else if(typeof d.completion.filterText=="string"){const p=l(s,r,g,d.completion.filterText,d.filterTextLow,0,this._fuzzyScoreOptions);if(!p)continue;Iz(d.completion.filterText,d.textLabel)===0?d.score=p:(d.score=LJe(s,r,g,d.textLabel,d.labelLow,0),d.score[0]=p[0])}else{const p=l(s,r,g,d.textLabel,d.labelLow,0,this._fuzzyScoreOptions);if(!p)continue;d.score=p}}d.idx=c,d.distance=this._wordDistance.distance(d.position,d.completion),a.push(d),e.push(d.textLabel.length)}this._filteredItems=a.sort(this._snippetCompareFn),this._refilterKind=0,this._stats={pLabelLen:e.length?bV(e.length-.85,e,(c,d)=>c-d):0}}static _compareCompletionItems(e,t){return e.score[0]>t.score[0]?-1:e.score[0]<t.score[0]?1:e.distance<t.distance?-1:e.distance>t.distance?1:e.idx<t.idx?-1:e.idx>t.idx?1:0}static _compareCompletionItemsSnippetsDown(e,t){if(e.completion.kind!==t.completion.kind){if(e.completion.kind===27)return 1;if(t.completion.kind===27)return-1}return dm._compareCompletionItems(e,t)}static _compareCompletionItemsSnippetsUp(e,t){if(e.completion.kind!==t.completion.kind){if(e.completion.kind===27)return-1;if(t.completion.kind===27)return 1}return dm._compareCompletionItems(e,t)}}var Uwt=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Mp=function(n,e){return function(t,i){e(t,i,n)}},hq;class Mv{static shouldAutoTrigger(e){if(!e.hasModel())return!1;const t=e.getModel(),i=e.getPosition();t.tokenization.tokenizeIfCheap(i.lineNumber);const s=t.getWordAtPosition(i);return!(!s||s.endColumn!==i.column&&s.startColumn+1!==i.column||!isNaN(Number(s.word)))}constructor(e,t,i){this.leadingLineContent=e.getLineContent(t.lineNumber).substr(0,t.column-1),this.leadingWord=e.getWordUntilPosition(t),this.lineNumber=t.lineNumber,this.column=t.column,this.triggerOptions=i}}function $wt(n,e,t){if(!e.getContextKeyValue(Ja.inlineSuggestionVisible.key))return!0;const i=e.getContextKeyValue(Ja.suppressSuggestions.key);return i!==void 0?!i:!n.getOption(62).suppressSuggestions}function jwt(n,e,t){if(!e.getContextKeyValue("inlineSuggestionVisible"))return!0;const i=e.getContextKeyValue(Ja.suppressSuggestions.key);return i!==void 0?!i:!n.getOption(62).suppressSuggestions}let IF=hq=class{constructor(e,t,i,s,r,o,a,l,c){this._editor=e,this._editorWorkerService=t,this._clipboardService=i,this._telemetryService=s,this._logService=r,this._contextKeyService=o,this._configurationService=a,this._languageFeaturesService=l,this._envService=c,this._toDispose=new ue,this._triggerCharacterListener=new ue,this._triggerQuickSuggest=new Fd,this._triggerState=void 0,this._completionDisposables=new ue,this._onDidCancel=new X,this._onDidTrigger=new X,this._onDidSuggest=new X,this.onDidCancel=this._onDidCancel.event,this.onDidTrigger=this._onDidTrigger.event,this.onDidSuggest=this._onDidSuggest.event,this._telemetryGate=0,this._currentSelection=this._editor.getSelection()||new $e(1,1,1,1),this._toDispose.add(this._editor.onDidChangeModel(()=>{this._updateTriggerCharacters(),this.cancel()})),this._toDispose.add(this._editor.onDidChangeModelLanguage(()=>{this._updateTriggerCharacters(),this.cancel()})),this._toDispose.add(this._editor.onDidChangeConfiguration(()=>{this._updateTriggerCharacters()})),this._toDispose.add(this._languageFeaturesService.completionProvider.onDidChange(()=>{this._updateTriggerCharacters(),this._updateActiveSuggestSession()}));let d=!1;this._toDispose.add(this._editor.onDidCompositionStart(()=>{d=!0})),this._toDispose.add(this._editor.onDidCompositionEnd(()=>{d=!1,this._onCompositionEnd()})),this._toDispose.add(this._editor.onDidChangeCursorSelection(u=>{d||this._onCursorChange(u)})),this._toDispose.add(this._editor.onDidChangeModelContent(()=>{!d&&this._triggerState!==void 0&&this._refilterCompletionItems()})),this._updateTriggerCharacters()}dispose(){Ti(this._triggerCharacterListener),Ti([this._onDidCancel,this._onDidSuggest,this._onDidTrigger,this._triggerQuickSuggest]),this._toDispose.dispose(),this._completionDisposables.dispose(),this.cancel()}_updateTriggerCharacters(){if(this._triggerCharacterListener.clear(),this._editor.getOption(92)||!this._editor.hasModel()||!this._editor.getOption(122))return;const e=new Map;for(const i of this._languageFeaturesService.completionProvider.all(this._editor.getModel()))for(const s of i.triggerCharacters||[]){let r=e.get(s);r||(r=new Set,e.set(s,r)),r.add(i)}const t=i=>{var o;if(!jwt(this._editor,this._contextKeyService,this._configurationService)||Mv.shouldAutoTrigger(this._editor))return;if(!i){const a=this._editor.getPosition();i=this._editor.getModel().getLineContent(a.lineNumber).substr(0,a.column-1)}let s="";l0(i.charCodeAt(i.length-1))?ks(i.charCodeAt(i.length-2))&&(s=i.substr(i.length-2)):s=i.charAt(i.length-1);const r=e.get(s);if(r){const a=new Map;if(this._completionModel)for(const[l,c]of this._completionModel.getItemsByProvider())r.has(l)||a.set(l,c);this.trigger({auto:!0,triggerKind:1,triggerCharacter:s,retrigger:!!this._completionModel,clipboardText:(o=this._completionModel)==null?void 0:o.clipboardText,completionOptions:{providerFilter:r,providerItemsToReuse:a}})}};this._triggerCharacterListener.add(this._editor.onDidType(t)),this._triggerCharacterListener.add(this._editor.onDidCompositionEnd(()=>t()))}get state(){return this._triggerState?this._triggerState.auto?2:1:0}cancel(e=!1){var t;this._triggerState!==void 0&&(this._triggerQuickSuggest.cancel(),(t=this._requestToken)==null||t.cancel(),this._requestToken=void 0,this._triggerState=void 0,this._completionModel=void 0,this._context=void 0,this._onDidCancel.fire({retrigger:e}))}clear(){this._completionDisposables.clear()}_updateActiveSuggestSession(){this._triggerState!==void 0&&(!this._editor.hasModel()||!this._languageFeaturesService.completionProvider.has(this._editor.getModel())?this.cancel():this.trigger({auto:this._triggerState.auto,retrigger:!0}))}_onCursorChange(e){if(!this._editor.hasModel())return;const t=this._currentSelection;if(this._currentSelection=this._editor.getSelection(),!e.selection.isEmpty()||e.reason!==0&&e.reason!==3||e.source!=="keyboard"&&e.source!=="deleteLeft"){this.cancel();return}this._triggerState===void 0&&e.reason===0?(t.containsRange(this._currentSelection)||t.getEndPosition().isBeforeOrEqual(this._currentSelection.getPosition()))&&this._doTriggerQuickSuggest():this._triggerState!==void 0&&e.reason===3&&this._refilterCompletionItems()}_onCompositionEnd(){this._triggerState===void 0?this._doTriggerQuickSuggest():this._refilterCompletionItems()}_doTriggerQuickSuggest(){var e;H1.isAllOff(this._editor.getOption(90))||this._editor.getOption(119).snippetsPreventQuickSuggestions&&((e=Wo.get(this._editor))!=null&&e.isInSnippet())||(this.cancel(),this._triggerQuickSuggest.cancelAndSet(()=>{if(this._triggerState!==void 0||!Mv.shouldAutoTrigger(this._editor)||!this._editor.hasModel()||!this._editor.hasWidgetFocus())return;const t=this._editor.getModel(),i=this._editor.getPosition(),s=this._editor.getOption(90);if(!H1.isAllOff(s)){if(!H1.isAllOn(s)){t.tokenization.tokenizeIfCheap(i.lineNumber);const r=t.tokenization.getLineTokens(i.lineNumber),o=r.getStandardTokenType(r.findTokenIndexAtOffset(Math.max(i.column-1-1,0)));if(H1.valueFor(s,o)!=="on")return}$wt(this._editor,this._contextKeyService,this._configurationService)&&this._languageFeaturesService.completionProvider.has(t)&&this.trigger({auto:!0})}},this._editor.getOption(91)))}_refilterCompletionItems(){si(this._editor.hasModel()),si(this._triggerState!==void 0);const e=this._editor.getModel(),t=this._editor.getPosition(),i=new Mv(e,t,{...this._triggerState,refilter:!0});this._onNewContext(i)}trigger(e){var h,f,g;if(!this._editor.hasModel())return;const t=this._editor.getModel(),i=new Mv(t,this._editor.getPosition(),e);this.cancel(e.retrigger),this._triggerState=e,this._onDidTrigger.fire({auto:e.auto,shy:e.shy??!1,position:this._editor.getPosition()}),this._context=i;let s={triggerKind:e.triggerKind??0};e.triggerCharacter&&(s={triggerKind:1,triggerCharacter:e.triggerCharacter}),this._requestToken=new mn;const r=this._editor.getOption(113);let o=1;switch(r){case"top":o=0;break;case"bottom":o=2;break}const{itemKind:a,showDeprecated:l}=hq.createSuggestFilter(this._editor),c=new jD(o,((h=e.completionOptions)==null?void 0:h.kindFilter)??a,(f=e.completionOptions)==null?void 0:f.providerFilter,(g=e.completionOptions)==null?void 0:g.providerItemsToReuse,l),d=EF.create(this._editorWorkerService,this._editor),u=cee(this._languageFeaturesService.completionProvider,t,this._editor.getPosition(),c,s,this._requestToken.token);Promise.all([u,d]).then(async([p,_])=>{var x;if((x=this._requestToken)==null||x.dispose(),!this._editor.hasModel())return;let w=e==null?void 0:e.clipboardText;if(!w&&p.needsClipboard&&(w=await this._clipboardService.readText()),this._triggerState===void 0)return;const b=this._editor.getModel(),y=new Mv(b,this._editor.getPosition(),e),S={...eD.default,firstMatchCanBeWeak:!this._editor.getOption(119).matchOnWordStartOnly};if(this._completionModel=new dm(p.items,this._context.column,{leadingLineContent:y.leadingLineContent,characterCountDelta:y.column-this._context.column},_,this._editor.getOption(119),this._editor.getOption(113),S,w),this._completionDisposables.add(p.disposable),this._onNewContext(y),this._reportDurationsTelemetry(p.durations),!this._envService.isBuilt||this._envService.isExtensionDevelopment)for(const E of p.items)E.isInvalid&&this._logService.warn(`[suggest] did IGNORE invalid completion item from ${E.provider._debugDisplayName}`,E.completion)}).catch(pt)}_reportDurationsTelemetry(e){this._telemetryGate++%230===0&&setTimeout(()=>{this._telemetryService.publicLog2("suggest.durations.json",{data:JSON.stringify(e)}),this._logService.debug("suggest.durations.json",e)})}static createSuggestFilter(e){const t=new Set;e.getOption(113)==="none"&&t.add(27);const s=e.getOption(119);return s.showMethods||t.add(0),s.showFunctions||t.add(1),s.showConstructors||t.add(2),s.showFields||t.add(3),s.showVariables||t.add(4),s.showClasses||t.add(5),s.showStructs||t.add(6),s.showInterfaces||t.add(7),s.showModules||t.add(8),s.showProperties||t.add(9),s.showEvents||t.add(10),s.showOperators||t.add(11),s.showUnits||t.add(12),s.showValues||t.add(13),s.showConstants||t.add(14),s.showEnums||t.add(15),s.showEnumMembers||t.add(16),s.showKeywords||t.add(17),s.showWords||t.add(18),s.showColors||t.add(19),s.showFiles||t.add(20),s.showReferences||t.add(21),s.showColors||t.add(22),s.showFolders||t.add(23),s.showTypeParameters||t.add(24),s.showSnippets||t.add(27),s.showUsers||t.add(25),s.showIssues||t.add(26),{itemKind:t,showDeprecated:s.showDeprecated}}_onNewContext(e){if(this._context){if(e.lineNumber!==this._context.lineNumber){this.cancel();return}if(Ni(e.leadingLineContent)!==Ni(this._context.leadingLineContent)){this.cancel();return}if(e.column<this._context.column){e.leadingWord.word?this.trigger({auto:this._context.triggerOptions.auto,retrigger:!0}):this.cancel();return}if(this._completionModel){if(e.leadingWord.word.length!==0&&e.leadingWord.startColumn>this._context.leadingWord.startColumn){if(Mv.shouldAutoTrigger(this._editor)&&this._context){const i=this._completionModel.getItemsByProvider();this.trigger({auto:this._context.triggerOptions.auto,retrigger:!0,clipboardText:this._completionModel.clipboardText,completionOptions:{providerItemsToReuse:i}})}return}if(e.column>this._context.column&&this._completionModel.getIncompleteProvider().size>0&&e.leadingWord.word.length!==0){const t=new Map,i=new Set;for(const[s,r]of this._completionModel.getItemsByProvider())r.length>0&&r[0].container.incomplete?i.add(s):t.set(s,r);this.trigger({auto:this._context.triggerOptions.auto,triggerKind:2,retrigger:!0,clipboardText:this._completionModel.clipboardText,completionOptions:{providerFilter:i,providerItemsToReuse:t}})}else{const t=this._completionModel.lineContext;let i=!1;if(this._completionModel.lineContext={leadingLineContent:e.leadingLineContent,characterCountDelta:e.column-this._context.column},this._completionModel.items.length===0){const s=Mv.shouldAutoTrigger(this._editor);if(!this._context){this.cancel();return}if(s&&this._context.leadingWord.endColumn<e.leadingWord.startColumn){this.trigger({auto:this._context.triggerOptions.auto,retrigger:!0});return}if(this._context.triggerOptions.auto){this.cancel();return}else if(this._completionModel.lineContext=t,i=this._completionModel.items.length>0,i&&e.leadingWord.word.length===0){this.cancel();return}}this._onDidSuggest.fire({completionModel:this._completionModel,triggerOptions:e.triggerOptions,isFrozen:i})}}}}};IF=hq=Uwt([Mp(1,wa),Mp(2,pp),Mp(3,Hr),Mp(4,Cr),Mp(5,at),Mp(6,Tt),Mp(7,Be),Mp(8,NX)],IF);const l5=class l5{constructor(e,t){this._disposables=new ue,this._lastOvertyped=[],this._locked=!1,this._disposables.add(e.onWillType(()=>{if(this._locked||!e.hasModel())return;const i=e.getSelections(),s=i.length;let r=!1;for(let a=0;a<s;a++)if(!i[a].isEmpty()){r=!0;break}if(!r){this._lastOvertyped.length!==0&&(this._lastOvertyped.length=0);return}this._lastOvertyped=[];const o=e.getModel();for(let a=0;a<s;a++){const l=i[a];if(o.getValueLengthInRange(l)>l5._maxSelectionLength)return;this._lastOvertyped[a]={value:o.getValueInRange(l),multiline:l.startLineNumber!==l.endLineNumber}}})),this._disposables.add(t.onDidTrigger(i=>{this._locked=!0})),this._disposables.add(t.onDidCancel(i=>{this._locked=!1}))}getLastOvertypedInfo(e){if(e>=0&&e<this._lastOvertyped.length)return this._lastOvertyped[e]}dispose(){this._disposables.dispose()}};l5._maxSelectionLength=51200;let fq=l5;var Kwt=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},C6=function(n,e){return function(t,i){e(t,i,n)}};let gq=class{constructor(e,t,i,s,r){this._menuId=t,this._menuService=s,this._contextKeyService=r,this._menuDisposables=new ue,this.element=_e(e,xe(".suggest-status-bar"));const o=a=>a instanceof Za?i.createInstance(lQ,a,{useComma:!0}):void 0;this._leftActions=new Ul(this.element,{actionViewItemProvider:o}),this._rightActions=new Ul(this.element,{actionViewItemProvider:o}),this._leftActions.domNode.classList.add("left"),this._rightActions.domNode.classList.add("right")}dispose(){this._menuDisposables.dispose(),this._leftActions.dispose(),this._rightActions.dispose(),this.element.remove()}show(){const e=this._menuService.createMenu(this._menuId,this._contextKeyService),t=()=>{const i=[],s=[];for(const[r,o]of e.getActions())r==="left"?i.push(...o):s.push(...o);this._leftActions.clear(),this._leftActions.push(i),this._rightActions.clear(),this._rightActions.push(s)};this._menuDisposables.add(e.onDidChange(()=>t())),this._menuDisposables.add(e)}hide(){this._menuDisposables.clear()}};gq=Kwt([C6(2,Ze),C6(3,Yl),C6(4,at)],gq);var qwt=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Gwt=function(n,e){return function(t,i){e(t,i,n)}};function hee(n){return!!n&&!!(n.completion.documentation||n.completion.detail&&n.completion.detail!==n.completion.label)}let pq=class{constructor(e,t){this._editor=e,this._onDidClose=new X,this.onDidClose=this._onDidClose.event,this._onDidChangeContents=new X,this.onDidChangeContents=this._onDidChangeContents.event,this._disposables=new ue,this._renderDisposeable=new ue,this._borderWidth=1,this._size=new _i(330,0),this.domNode=xe(".suggest-details"),this.domNode.classList.add("no-docs"),this._markdownRenderer=t.createInstance(ep,{editor:e}),this._body=xe(".body"),this._scrollbar=new VN(this._body,{alwaysConsumeMouseWheel:!0}),_e(this.domNode,this._scrollbar.getDomNode()),this._disposables.add(this._scrollbar),this._header=_e(this._body,xe(".header")),this._close=_e(this._header,xe("span"+ot.asCSSSelector(ye.close))),this._close.title=v("details.close","Close"),this._type=_e(this._header,xe("p.type")),this._docs=_e(this._body,xe("p.docs")),this._configureFont(),this._disposables.add(this._editor.onDidChangeConfiguration(i=>{i.hasChanged(50)&&this._configureFont()}))}dispose(){this._disposables.dispose(),this._renderDisposeable.dispose()}_configureFont(){const e=this._editor.getOptions(),t=e.get(50),i=t.getMassagedFontFamily(),s=e.get(120)||t.fontSize,r=e.get(121)||t.lineHeight,o=t.fontWeight,a=`${s}px`,l=`${r}px`;this.domNode.style.fontSize=a,this.domNode.style.lineHeight=`${r/s}`,this.domNode.style.fontWeight=o,this.domNode.style.fontFeatureSettings=t.fontFeatureSettings,this._type.style.fontFamily=i,this._close.style.height=l,this._close.style.width=l}getLayoutInfo(){const e=this._editor.getOption(121)||this._editor.getOption(50).lineHeight,t=this._borderWidth,i=t*2;return{lineHeight:e,borderWidth:t,borderHeight:i,verticalPadding:22,horizontalPadding:14}}renderLoading(){this._type.textContent=v("loading","Loading..."),this._docs.textContent="",this.domNode.classList.remove("no-docs","no-type"),this.layout(this.size.width,this.getLayoutInfo().lineHeight*2),this._onDidChangeContents.fire(this)}renderItem(e,t){var r;this._renderDisposeable.clear();let{detail:i,documentation:s}=e.completion;if(t){let o="";o+=`score: ${e.score[0]}
`,o+=`prefix: ${e.word??"(no prefix)"}
`,o+=`word: ${e.completion.filterText?e.completion.filterText+" (filterText)":e.textLabel}
`,o+=`distance: ${e.distance} (localityBonus-setting)
`,o+=`index: ${e.idx}, based on ${e.completion.sortText&&`sortText: "${e.completion.sortText}"`||"label"}
`,o+=`commit_chars: ${(r=e.completion.commitCharacters)==null?void 0:r.join("")}
`,s=new Rr().appendCodeblock("empty",o),i=`Provider: ${e.provider._debugDisplayName}`}if(!t&&!hee(e)){this.clearContents();return}if(this.domNode.classList.remove("no-docs","no-type"),i){const o=i.length>1e5?`${i.substr(0,1e5)}`:i;this._type.textContent=o,this._type.title=o,za(this._type),this._type.classList.toggle("auto-wrap",!/\r?\n^\s+/gmi.test(o))}else nr(this._type),this._type.title="",Co(this._type),this.domNode.classList.add("no-type");if(nr(this._docs),typeof s=="string")this._docs.classList.remove("markdown-docs"),this._docs.textContent=s;else if(s){this._docs.classList.add("markdown-docs"),nr(this._docs);const o=this._markdownRenderer.render(s);this._docs.appendChild(o.element),this._renderDisposeable.add(o),this._renderDisposeable.add(this._markdownRenderer.onDidRenderAsync(()=>{this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}))}this.domNode.style.userSelect="text",this.domNode.tabIndex=-1,this._close.onmousedown=o=>{o.preventDefault(),o.stopPropagation()},this._close.onclick=o=>{o.preventDefault(),o.stopPropagation(),this._onDidClose.fire()},this._body.scrollTop=0,this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}clearContents(){this.domNode.classList.add("no-docs"),this._type.textContent="",this._docs.textContent=""}get isEmpty(){return this.domNode.classList.contains("no-docs")}get size(){return this._size}layout(e,t){const i=new _i(e,t);_i.equals(i,this._size)||(this._size=i,_qe(this.domNode,e,t)),this._scrollbar.scanDomNode()}scrollDown(e=8){this._body.scrollTop+=e}scrollUp(e=8){this._body.scrollTop-=e}scrollTop(){this._body.scrollTop=0}scrollBottom(){this._body.scrollTop=this._body.scrollHeight}pageDown(){this.scrollDown(80)}pageUp(){this.scrollUp(80)}set borderWidth(e){this._borderWidth=e}get borderWidth(){return this._borderWidth}};pq=qwt([Gwt(1,Ze)],pq);class Ywt{constructor(e,t){this.widget=e,this._editor=t,this.allowEditorOverflow=!0,this._disposables=new ue,this._added=!1,this._preferAlignAtTop=!0,this._resizable=new jJ,this._resizable.domNode.classList.add("suggest-details-container"),this._resizable.domNode.appendChild(e.domNode),this._resizable.enableSashes(!1,!0,!0,!1);let i,s,r=0,o=0;this._disposables.add(this._resizable.onDidWillResize(()=>{i=this._topLeft,s=this._resizable.size})),this._disposables.add(this._resizable.onDidResize(a=>{if(i&&s){this.widget.layout(a.dimension.width,a.dimension.height);let l=!1;a.west&&(o=s.width-a.dimension.width,l=!0),a.north&&(r=s.height-a.dimension.height,l=!0),l&&this._applyTopLeft({top:i.top+r,left:i.left+o})}a.done&&(i=void 0,s=void 0,r=0,o=0,this._userSize=a.dimension)})),this._disposables.add(this.widget.onDidChangeContents(()=>{this._anchorBox&&this._placeAtAnchor(this._anchorBox,this._userSize??this.widget.size,this._preferAlignAtTop)}))}dispose(){this._resizable.dispose(),this._disposables.dispose(),this.hide()}getId(){return"suggest.details"}getDomNode(){return this._resizable.domNode}getPosition(){return this._topLeft?{preference:this._topLeft}:null}show(){this._added||(this._editor.addOverlayWidget(this),this._added=!0)}hide(e=!1){this._resizable.clearSashHoverState(),this._added&&(this._editor.removeOverlayWidget(this),this._added=!1,this._anchorBox=void 0,this._topLeft=void 0),e&&(this._userSize=void 0,this.widget.clearContents())}placeAtAnchor(e,t){const i=e.getBoundingClientRect();this._anchorBox=i,this._preferAlignAtTop=t,this._placeAtAnchor(this._anchorBox,this._userSize??this.widget.size,t)}_placeAtAnchor(e,t,i){const s=R_(this.getDomNode().ownerDocument.body),r=this.widget.getLayoutInfo(),o=new _i(220,2*r.lineHeight),a=e.top,l=function(){const x=s.width-(e.left+e.width+r.borderWidth+r.horizontalPadding),E=-r.borderWidth+e.left+e.width,D=new _i(x,s.height-e.top-r.borderHeight-r.verticalPadding),N=D.with(void 0,e.top+e.height-r.borderHeight-r.verticalPadding);return{top:a,left:E,fit:x-t.width,maxSizeTop:D,maxSizeBottom:N,minSize:o.with(Math.min(x,o.width))}}(),c=function(){const x=e.left-r.borderWidth-r.horizontalPadding,E=Math.max(r.horizontalPadding,e.left-t.width-r.borderWidth),D=new _i(x,s.height-e.top-r.borderHeight-r.verticalPadding),N=D.with(void 0,e.top+e.height-r.borderHeight-r.verticalPadding);return{top:a,left:E,fit:x-t.width,maxSizeTop:D,maxSizeBottom:N,minSize:o.with(Math.min(x,o.width))}}(),d=function(){const x=e.left,E=-r.borderWidth+e.top+e.height,D=new _i(e.width-r.borderHeight,s.height-e.top-e.height-r.verticalPadding);return{top:E,left:x,fit:D.height-t.height,maxSizeBottom:D,maxSizeTop:D,minSize:o.with(D.width)}}(),u=[l,c,d],h=u.find(x=>x.fit>=0)??u.sort((x,E)=>E.fit-x.fit)[0],f=e.top+e.height-r.borderHeight;let g,p=t.height;const _=Math.max(h.maxSizeTop.height,h.maxSizeBottom.height);p>_&&(p=_);let w;i?p<=h.maxSizeTop.height?(g=!0,w=h.maxSizeTop):(g=!1,w=h.maxSizeBottom):p<=h.maxSizeBottom.height?(g=!1,w=h.maxSizeBottom):(g=!0,w=h.maxSizeTop);let{top:b,left:y}=h;!g&&p>e.height&&(b=f-p);const S=this._editor.getDomNode();if(S){const x=S.getBoundingClientRect();b-=x.top,y-=x.left}this._applyTopLeft({left:y,top:b}),this._resizable.enableSashes(!g,h===l,g,h!==l),this._resizable.minSize=h.minSize,this._resizable.maxSize=w,this._resizable.layout(p,Math.min(w.width,t.width)),this.widget.layout(this._resizable.size.width,this._resizable.size.height)}_applyTopLeft(e){this._topLeft=e,this._editor.layoutOverlayWidget(this)}}var Uh;(function(n){n[n.FILE=0]="FILE",n[n.FOLDER=1]="FOLDER",n[n.ROOT_FOLDER=2]="ROOT_FOLDER"})(Uh||(Uh={}));const Zwt=/(?:\/|^)(?:([^\/]+)\/)?([^\/]+)$/;function MA(n,e,t,i,s){if(ot.isThemeIcon(s))return[`codicon-${s.id}`,"predefined-file-icon"];if(Xe.isUri(s))return[];const r=i===Uh.ROOT_FOLDER?["rootfolder-icon"]:i===Uh.FOLDER?["folder-icon"]:["file-icon"];if(t){let o;if(t.scheme===mt.data)o=P_.parseMetaData(t).get(P_.META_DATA_LABEL);else{const a=t.path.match(Zwt);a?(o=PA(a[2].toLowerCase()),a[1]&&r.push(`${PA(a[1].toLowerCase())}-name-dir-icon`)):o=PA(t.authority.toLowerCase())}if(i===Uh.ROOT_FOLDER)r.push(`${o}-root-name-folder-icon`);else if(i===Uh.FOLDER)r.push(`${o}-name-folder-icon`);else{if(o){if(r.push(`${o}-name-file-icon`),r.push("name-file-icon"),o.length<=255){const l=o.split(".");for(let c=1;c<l.length;c++)r.push(`${l.slice(c).join(".")}-ext-file-icon`)}r.push("ext-file-icon")}const a=Xwt(n,e,t);a&&r.push(`${PA(a)}-lang-file-icon`)}}return r}function Xwt(n,e,t){if(!t)return null;let i=null;if(t.scheme===mt.data){const r=P_.parseMetaData(t).get(P_.META_DATA_MIME);r&&(i=e.getLanguageIdByMimeType(r))}else{const s=n.getModel(t);s&&(i=s.getLanguageId())}return i&&i!==Ro?i:e.guessLanguageIdByFilepathOrFirstLine(t)}function PA(n){return n.replace(/[\s]/g,"/")}var Qwt=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},y6=function(n,e){return function(t,i){e(t,i,n)}};function pke(n){return`suggest-aria-id:${n}`}const Jwt=Xi("suggest-more-info",ye.chevronRight,v("suggestMoreInfoIcon","Icon for more information in the suggest widget."));var mu;const e0t=new(mu=class{extract(e,t){if(e.textLabel.match(mu._regexStrict))return t[0]=e.textLabel,!0;if(e.completion.detail&&e.completion.detail.match(mu._regexStrict))return t[0]=e.completion.detail,!0;if(e.completion.documentation){const i=typeof e.completion.documentation=="string"?e.completion.documentation:e.completion.documentation.value,s=mu._regexRelaxed.exec(i);if(s&&(s.index===0||s.index+s[0].length===i.length))return t[0]=s[0],!0}return!1}},mu._regexRelaxed=/(#([\da-fA-F]{3}){1,2}|(rgb|hsl)a\(\s*(\d{1,3}%?\s*,\s*){3}(1|0?\.\d+)\)|(rgb|hsl)\(\s*\d{1,3}%?(\s*,\s*\d{1,3}%?){2}\s*\))/,mu._regexStrict=new RegExp(`^${mu._regexRelaxed.source}$`,"i"),mu);let mq=class{constructor(e,t,i,s){this._editor=e,this._modelService=t,this._languageService=i,this._themeService=s,this._onDidToggleDetails=new X,this.onDidToggleDetails=this._onDidToggleDetails.event,this.templateId="suggestion"}dispose(){this._onDidToggleDetails.dispose()}renderTemplate(e){const t=new ue,i=e;i.classList.add("show-file-icons");const s=_e(e,xe(".icon")),r=_e(s,xe("span.colorspan")),o=_e(e,xe(".contents")),a=_e(o,xe(".main")),l=_e(a,xe(".icon-label.codicon")),c=_e(a,xe("span.left")),d=_e(a,xe("span.right")),u=new _O(c,{supportHighlights:!0,supportIcons:!0});t.add(u);const h=_e(c,xe("span.signature-label")),f=_e(c,xe("span.qualifier-label")),g=_e(d,xe("span.details-label")),p=_e(d,xe("span.readMore"+ot.asCSSSelector(Jwt)));return p.title=v("readMore","Read More"),{root:i,left:c,right:d,icon:s,colorspan:r,iconLabel:u,iconContainer:l,parametersLabel:h,qualifierLabel:f,detailsLabel:g,readMore:p,disposables:t,configureFont:()=>{const w=this._editor.getOptions(),b=w.get(50),y=b.getMassagedFontFamily(),S=b.fontFeatureSettings,x=w.get(120)||b.fontSize,E=w.get(121)||b.lineHeight,D=b.fontWeight,N=b.letterSpacing,I=`${x}px`,H=`${E}px`,z=`${N}px`;i.style.fontSize=I,i.style.fontWeight=D,i.style.letterSpacing=z,a.style.fontFamily=y,a.style.fontFeatureSettings=S,a.style.lineHeight=H,s.style.height=H,s.style.width=H,p.style.height=H,p.style.width=H}}}renderElement(e,t,i){i.configureFont();const{completion:s}=e;i.root.id=pke(t),i.colorspan.style.backgroundColor="";const r={labelEscapeNewLines:!0,matches:zN(e.score)},o=[];if(s.kind===19&&e0t.extract(e,o))i.icon.className="icon customcolor",i.iconContainer.className="icon hide",i.colorspan.style.backgroundColor=o[0];else if(s.kind===20&&this._themeService.getFileIconTheme().hasFileIcons){i.icon.className="icon hide",i.iconContainer.className="icon hide";const a=MA(this._modelService,this._languageService,Xe.from({scheme:"fake",path:e.textLabel}),Uh.FILE),l=MA(this._modelService,this._languageService,Xe.from({scheme:"fake",path:s.detail}),Uh.FILE);r.extraClasses=a.length>l.length?a:l}else s.kind===23&&this._themeService.getFileIconTheme().hasFolderIcons?(i.icon.className="icon hide",i.iconContainer.className="icon hide",r.extraClasses=[MA(this._modelService,this._languageService,Xe.from({scheme:"fake",path:e.textLabel}),Uh.FOLDER),MA(this._modelService,this._languageService,Xe.from({scheme:"fake",path:s.detail}),Uh.FOLDER)].flat()):(i.icon.className="icon hide",i.iconContainer.className="",i.iconContainer.classList.add("suggest-icon",...ot.asClassNameArray(RI.toIcon(s.kind))));s.tags&&s.tags.indexOf(1)>=0&&(r.extraClasses=(r.extraClasses||[]).concat(["deprecated"]),r.matches=[]),i.iconLabel.setLabel(e.textLabel,void 0,r),typeof s.label=="string"?(i.parametersLabel.textContent="",i.detailsLabel.textContent=S6(s.detail||""),i.root.classList.add("string-label")):(i.parametersLabel.textContent=S6(s.label.detail||""),i.detailsLabel.textContent=S6(s.label.description||""),i.root.classList.remove("string-label")),this._editor.getOption(119).showInlineDetails?za(i.detailsLabel):Co(i.detailsLabel),hee(e)?(i.right.classList.add("can-expand-details"),za(i.readMore),i.readMore.onmousedown=a=>{a.stopPropagation(),a.preventDefault()},i.readMore.onclick=a=>{a.stopPropagation(),a.preventDefault(),this._onDidToggleDetails.fire()}):(i.right.classList.remove("can-expand-details"),Co(i.readMore),i.readMore.onmousedown=null,i.readMore.onclick=null)}disposeTemplate(e){e.disposables.dispose()}};mq=Qwt([y6(1,Zi),y6(2,un),y6(3,ws)],mq);function S6(n){return n.replace(/\r\n|\r|\n/g,"")}var t0t=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},OA=function(n,e){return function(t,i){e(t,i,n)}},i1;B("editorSuggestWidget.background",Pl,v("editorSuggestWidgetBackground","Background color of the suggest widget."));B("editorSuggestWidget.border",PX,v("editorSuggestWidgetBorder","Border color of the suggest widget."));const i0t=B("editorSuggestWidget.foreground",bf,v("editorSuggestWidgetForeground","Foreground color of the suggest widget."));B("editorSuggestWidget.selectedForeground",ZI,v("editorSuggestWidgetSelectedForeground","Foreground color of the selected entry in the suggest widget."));B("editorSuggestWidget.selectedIconForeground",zX,v("editorSuggestWidgetSelectedIconForeground","Icon foreground color of the selected entry in the suggest widget."));const n0t=B("editorSuggestWidget.selectedBackground",XI,v("editorSuggestWidgetSelectedBackground","Background color of the selected entry in the suggest widget."));B("editorSuggestWidget.highlightForeground",x1,v("editorSuggestWidgetHighlightForeground","Color of the match highlights in the suggest widget."));B("editorSuggestWidget.focusHighlightForeground",DQe,v("editorSuggestWidgetFocusHighlightForeground","Color of the match highlights in the suggest widget when an item is focused."));B("editorSuggestWidgetStatus.foreground",kt(i0t,.5),v("editorSuggestWidgetStatusForeground","Foreground color of the suggest widget status."));class s0t{constructor(e,t){this._service=e,this._key=`suggestWidget.size/${t.getEditorType()}/${t instanceof Pd}`}restore(){const e=this._service.get(this._key,0)??"";try{const t=JSON.parse(e);if(_i.is(t))return _i.lift(t)}catch{}}store(e){this._service.store(this._key,JSON.stringify(e),0,1)}reset(){this._service.remove(this._key,0)}}var u_;let _q=(u_=class{constructor(e,t,i,s,r){this.editor=e,this._storageService=t,this._state=0,this._isAuto=!1,this._pendingLayout=new As,this._pendingShowDetails=new As,this._ignoreFocusEvents=!1,this._forceRenderingAbove=!1,this._explainMode=!1,this._showTimeout=new Fd,this._disposables=new ue,this._onDidSelect=new o0,this._onDidFocus=new o0,this._onDidHide=new X,this._onDidShow=new X,this.onDidSelect=this._onDidSelect.event,this.onDidFocus=this._onDidFocus.event,this.onDidHide=this._onDidHide.event,this.onDidShow=this._onDidShow.event,this._onDetailsKeydown=new X,this.onDetailsKeyDown=this._onDetailsKeydown.event,this.element=new jJ,this.element.domNode.classList.add("editor-widget","suggest-widget"),this._contentWidget=new r0t(this,e),this._persistedSize=new s0t(t,e);class o{constructor(f,g,p=!1,_=!1){this.persistedSize=f,this.currentSize=g,this.persistHeight=p,this.persistWidth=_}}let a;this._disposables.add(this.element.onDidWillResize(()=>{this._contentWidget.lockPreference(),a=new o(this._persistedSize.restore(),this.element.size)})),this._disposables.add(this.element.onDidResize(h=>{var f,g;if(this._resize(h.dimension.width,h.dimension.height),a&&(a.persistHeight=a.persistHeight||!!h.north||!!h.south,a.persistWidth=a.persistWidth||!!h.east||!!h.west),!!h.done){if(a){const{itemHeight:p,defaultSize:_}=this.getLayoutInfo(),w=Math.round(p/2);let{width:b,height:y}=this.element.size;(!a.persistHeight||Math.abs(a.currentSize.height-y)<=w)&&(y=((f=a.persistedSize)==null?void 0:f.height)??_.height),(!a.persistWidth||Math.abs(a.currentSize.width-b)<=w)&&(b=((g=a.persistedSize)==null?void 0:g.width)??_.width),this._persistedSize.store(new _i(b,y))}this._contentWidget.unlockPreference(),a=void 0}})),this._messageElement=_e(this.element.domNode,xe(".message")),this._listElement=_e(this.element.domNode,xe(".tree"));const l=this._disposables.add(r.createInstance(pq,this.editor));l.onDidClose(this.toggleDetails,this,this._disposables),this._details=new Ywt(l,this.editor);const c=()=>this.element.domNode.classList.toggle("no-icons",!this.editor.getOption(119).showIcons);c();const d=r.createInstance(mq,this.editor);this._disposables.add(d),this._disposables.add(d.onDidToggleDetails(()=>this.toggleDetails())),this._list=new Ql("SuggestWidget",this._listElement,{getHeight:h=>this.getLayoutInfo().itemHeight,getTemplateId:h=>"suggestion"},[d],{alwaysConsumeMouseWheel:!0,useShadows:!1,mouseSupport:!1,multipleSelectionSupport:!1,accessibilityProvider:{getRole:()=>"option",getWidgetAriaLabel:()=>v("suggest","Suggest"),getWidgetRole:()=>"listbox",getAriaLabel:h=>{let f=h.textLabel;if(typeof h.completion.label!="string"){const{detail:w,description:b}=h.completion.label;w&&b?f=v("label.full","{0} {1}, {2}",f,w,b):w?f=v("label.detail","{0} {1}",f,w):b&&(f=v("label.desc","{0}, {1}",f,b))}if(!h.isResolved||!this._isDetailsVisible())return f;const{documentation:g,detail:p}=h.completion,_=a0("{0}{1}",p||"",g?typeof g=="string"?g:g.value:"");return v("ariaCurrenttSuggestionReadDetails","{0}, docs: {1}",f,_)}}}),this._list.style($0({listInactiveFocusBackground:n0t,listInactiveFocusOutline:nn})),this._status=r.createInstance(gq,this.element.domNode,Jm);const u=()=>this.element.domNode.classList.toggle("with-status-bar",this.editor.getOption(119).showStatusBar);u(),this._disposables.add(s.onDidColorThemeChange(h=>this._onThemeChange(h))),this._onThemeChange(s.getColorTheme()),this._disposables.add(this._list.onMouseDown(h=>this._onListMouseDownOrTap(h))),this._disposables.add(this._list.onTap(h=>this._onListMouseDownOrTap(h))),this._disposables.add(this._list.onDidChangeSelection(h=>this._onListSelection(h))),this._disposables.add(this._list.onDidChangeFocus(h=>this._onListFocus(h))),this._disposables.add(this.editor.onDidChangeCursorSelection(()=>this._onCursorSelectionChanged())),this._disposables.add(this.editor.onDidChangeConfiguration(h=>{h.hasChanged(119)&&(u(),c()),this._completionModel&&(h.hasChanged(50)||h.hasChanged(120)||h.hasChanged(121))&&this._list.splice(0,this._list.length,this._completionModel.items)})),this._ctxSuggestWidgetVisible=Lt.Visible.bindTo(i),this._ctxSuggestWidgetDetailsVisible=Lt.DetailsVisible.bindTo(i),this._ctxSuggestWidgetMultipleSuggestions=Lt.MultipleSuggestions.bindTo(i),this._ctxSuggestWidgetHasFocusedSuggestion=Lt.HasFocusedSuggestion.bindTo(i),this._disposables.add(Cn(this._details.widget.domNode,"keydown",h=>{this._onDetailsKeydown.fire(h)})),this._disposables.add(this.editor.onMouseDown(h=>this._onEditorMouseDown(h)))}dispose(){var e;this._details.widget.dispose(),this._details.dispose(),this._list.dispose(),this._status.dispose(),this._disposables.dispose(),(e=this._loadingTimeout)==null||e.dispose(),this._pendingLayout.dispose(),this._pendingShowDetails.dispose(),this._showTimeout.dispose(),this._contentWidget.dispose(),this.element.dispose()}_onEditorMouseDown(e){this._details.widget.domNode.contains(e.target.element)?this._details.widget.domNode.focus():this.element.domNode.contains(e.target.element)&&this.editor.focus()}_onCursorSelectionChanged(){this._state!==0&&this._contentWidget.layout()}_onListMouseDownOrTap(e){typeof e.element>"u"||typeof e.index>"u"||(e.browserEvent.preventDefault(),e.browserEvent.stopPropagation(),this._select(e.element,e.index))}_onListSelection(e){e.elements.length&&this._select(e.elements[0],e.indexes[0])}_select(e,t){const i=this._completionModel;i&&(this._onDidSelect.fire({item:e,index:t,model:i}),this.editor.focus())}_onThemeChange(e){this._details.widget.borderWidth=Tu(e.type)?2:1}_onListFocus(e){var s;if(this._ignoreFocusEvents)return;if(!e.elements.length){this._currentSuggestionDetails&&(this._currentSuggestionDetails.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=void 0),this.editor.setAriaOptions({activeDescendant:void 0}),this._ctxSuggestWidgetHasFocusedSuggestion.set(!1);return}if(!this._completionModel)return;this._ctxSuggestWidgetHasFocusedSuggestion.set(!0);const t=e.elements[0],i=e.indexes[0];t!==this._focusedItem&&((s=this._currentSuggestionDetails)==null||s.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=t,this._list.reveal(i),this._currentSuggestionDetails=Ds(async r=>{const o=T_(()=>{this._isDetailsVisible()&&this.showDetails(!0)},250),a=r.onCancellationRequested(()=>o.dispose());try{return await t.resolve(r)}finally{o.dispose(),a.dispose()}}),this._currentSuggestionDetails.then(()=>{i>=this._list.length||t!==this._list.element(i)||(this._ignoreFocusEvents=!0,this._list.splice(i,1,[t]),this._list.setFocus([i]),this._ignoreFocusEvents=!1,this._isDetailsVisible()?this.showDetails(!1):this.element.domNode.classList.remove("docs-side"),this.editor.setAriaOptions({activeDescendant:pke(i)}))}).catch(pt)),this._onDidFocus.fire({item:t,index:i,model:this._completionModel})}_setState(e){if(this._state!==e)switch(this._state=e,this.element.domNode.classList.toggle("frozen",e===4),this.element.domNode.classList.remove("message"),e){case 0:Co(this._messageElement,this._listElement,this._status.element),this._details.hide(!0),this._status.hide(),this._contentWidget.hide(),this._ctxSuggestWidgetVisible.reset(),this._ctxSuggestWidgetMultipleSuggestions.reset(),this._ctxSuggestWidgetHasFocusedSuggestion.reset(),this._showTimeout.cancel(),this.element.domNode.classList.remove("visible"),this._list.splice(0,this._list.length),this._focusedItem=void 0,this._cappedHeight=void 0,this._explainMode=!1;break;case 1:this.element.domNode.classList.add("message"),this._messageElement.textContent=i1.LOADING_MESSAGE,Co(this._listElement,this._status.element),za(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0,lf(i1.LOADING_MESSAGE);break;case 2:this.element.domNode.classList.add("message"),this._messageElement.textContent=i1.NO_SUGGESTIONS_MESSAGE,Co(this._listElement,this._status.element),za(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0,lf(i1.NO_SUGGESTIONS_MESSAGE);break;case 3:Co(this._messageElement),za(this._listElement,this._status.element),this._show();break;case 4:Co(this._messageElement),za(this._listElement,this._status.element),this._show();break;case 5:Co(this._messageElement),za(this._listElement,this._status.element),this._details.show(),this._show();break}}_show(){this._status.show(),this._contentWidget.show(),this._layout(this._persistedSize.restore()),this._ctxSuggestWidgetVisible.set(!0),this._showTimeout.cancelAndSet(()=>{this.element.domNode.classList.add("visible"),this._onDidShow.fire(this)},100)}showTriggered(e,t){this._state===0&&(this._contentWidget.setPosition(this.editor.getPosition()),this._isAuto=!!e,this._isAuto||(this._loadingTimeout=T_(()=>this._setState(1),t)))}showSuggestions(e,t,i,s,r){var l,c;if(this._contentWidget.setPosition(this.editor.getPosition()),(l=this._loadingTimeout)==null||l.dispose(),(c=this._currentSuggestionDetails)==null||c.cancel(),this._currentSuggestionDetails=void 0,this._completionModel!==e&&(this._completionModel=e),i&&this._state!==2&&this._state!==0){this._setState(4);return}const o=this._completionModel.items.length,a=o===0;if(this._ctxSuggestWidgetMultipleSuggestions.set(o>1),a){this._setState(s?0:2),this._completionModel=void 0;return}this._focusedItem=void 0,this._onDidFocus.pause(),this._onDidSelect.pause();try{this._list.splice(0,this._list.length,this._completionModel.items),this._setState(i?4:3),this._list.reveal(t,0),this._list.setFocus(r?[]:[t])}finally{this._onDidFocus.resume(),this._onDidSelect.resume()}this._pendingLayout.value=gP(nt(this.element.domNode),()=>{this._pendingLayout.clear(),this._layout(this.element.size),this._details.widget.domNode.classList.remove("focused")})}focusSelected(){this._list.length>0&&this._list.setFocus([0])}selectNextPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageDown(),!0;case 1:return!this._isAuto;default:return this._list.focusNextPage(),!0}}selectNext(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusNext(1,!0),!0}}selectLast(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollBottom(),!0;case 1:return!this._isAuto;default:return this._list.focusLast(),!0}}selectPreviousPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageUp(),!0;case 1:return!this._isAuto;default:return this._list.focusPreviousPage(),!0}}selectPrevious(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusPrevious(1,!0),!1}}selectFirst(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollTop(),!0;case 1:return!this._isAuto;default:return this._list.focusFirst(),!0}}getFocusedItem(){if(this._state!==0&&this._state!==2&&this._state!==1&&this._completionModel&&this._list.getFocus().length>0)return{item:this._list.getFocusedElements()[0],index:this._list.getFocus()[0],model:this._completionModel}}toggleDetailsFocus(){this._state===5?(this._setState(3),this._details.widget.domNode.classList.remove("focused")):this._state===3&&this._isDetailsVisible()&&(this._setState(5),this._details.widget.domNode.classList.add("focused"))}toggleDetails(){this._isDetailsVisible()?(this._pendingShowDetails.clear(),this._ctxSuggestWidgetDetailsVisible.set(!1),this._setDetailsVisible(!1),this._details.hide(),this.element.domNode.classList.remove("shows-details")):(hee(this._list.getFocusedElements()[0])||this._explainMode)&&(this._state===3||this._state===5||this._state===4)&&(this._ctxSuggestWidgetDetailsVisible.set(!0),this._setDetailsVisible(!0),this.showDetails(!1))}showDetails(e){this._pendingShowDetails.value=gP(nt(this.element.domNode),()=>{this._pendingShowDetails.clear(),this._details.show(),e?this._details.widget.renderLoading():this._details.widget.renderItem(this._list.getFocusedElements()[0],this._explainMode),this._details.widget.isEmpty?this._details.hide():(this._positionDetails(),this.element.domNode.classList.add("shows-details")),this.editor.focus()})}toggleExplainMode(){this._list.getFocusedElements()[0]&&(this._explainMode=!this._explainMode,this._isDetailsVisible()?this.showDetails(!1):this.toggleDetails())}resetPersistedSize(){this._persistedSize.reset()}hideWidget(){var i;this._pendingLayout.clear(),this._pendingShowDetails.clear(),(i=this._loadingTimeout)==null||i.dispose(),this._setState(0),this._onDidHide.fire(this),this.element.clearSashHoverState();const e=this._persistedSize.restore(),t=Math.ceil(this.getLayoutInfo().itemHeight*4.3);e&&e.height<t&&this._persistedSize.store(e.with(void 0,t))}isFrozen(){return this._state===4}_afterRender(e){if(e===null){this._isDetailsVisible()&&this._details.hide();return}this._state===2||this._state===1||(this._isDetailsVisible()&&!this._details.widget.isEmpty&&this._details.show(),this._positionDetails())}_layout(e){var o,a;if(!this.editor.hasModel()||!this.editor.getDomNode())return;const t=R_(this.element.domNode.ownerDocument.body),i=this.getLayoutInfo();e||(e=i.defaultSize);let s=e.height,r=e.width;if(this._status.element.style.height=`${i.itemHeight}px`,this._state===2||this._state===1)s=i.itemHeight+i.borderHeight,r=i.defaultSize.width/2,this.element.enableSashes(!1,!1,!1,!1),this.element.minSize=this.element.maxSize=new _i(r,s),this._contentWidget.setPreference(2);else{const l=t.width-i.borderHeight-2*i.horizontalPadding;r>l&&(r=l);const c=this._completionModel?this._completionModel.stats.pLabelLen*i.typicalHalfwidthCharacterWidth:r,d=i.statusBarHeight+this._list.contentHeight+i.borderHeight,u=i.itemHeight+i.statusBarHeight,h=Fn(this.editor.getDomNode()),f=this.editor.getScrolledVisiblePosition(this.editor.getPosition()),g=h.top+f.top+f.height,p=Math.min(t.height-g-i.verticalPadding,d),_=h.top+f.top-i.verticalPadding,w=Math.min(_,d);let b=Math.min(Math.max(w,p)+i.borderHeight,d);s===((o=this._cappedHeight)==null?void 0:o.capped)&&(s=this._cappedHeight.wanted),s<u&&(s=u),s>b&&(s=b),s>p||this._forceRenderingAbove&&_>150?(this._contentWidget.setPreference(1),this.element.enableSashes(!0,!0,!1,!1),b=w):(this._contentWidget.setPreference(2),this.element.enableSashes(!1,!0,!0,!1),b=p),this.element.preferredSize=new _i(c,i.defaultSize.height),this.element.maxSize=new _i(l,b),this.element.minSize=new _i(220,u),this._cappedHeight=s===d?{wanted:((a=this._cappedHeight)==null?void 0:a.wanted)??e.height,capped:s}:void 0}this._resize(r,s)}_resize(e,t){const{width:i,height:s}=this.element.maxSize;e=Math.min(i,e),t=Math.min(s,t);const{statusBarHeight:r}=this.getLayoutInfo();this._list.layout(t-r,e),this._listElement.style.height=`${t-r}px`,this.element.layout(t,e),this._contentWidget.layout(),this._positionDetails()}_positionDetails(){var e;this._isDetailsVisible()&&this._details.placeAtAnchor(this.element.domNode,((e=this._contentWidget.getPosition())==null?void 0:e.preference[0])===2)}getLayoutInfo(){const e=this.editor.getOption(50),t=wo(this.editor.getOption(121)||e.lineHeight,8,1e3),i=!this.editor.getOption(119).showStatusBar||this._state===2||this._state===1?0:t,s=this._details.widget.borderWidth,r=2*s;return{itemHeight:t,statusBarHeight:i,borderWidth:s,borderHeight:r,typicalHalfwidthCharacterWidth:e.typicalHalfwidthCharacterWidth,verticalPadding:22,horizontalPadding:14,defaultSize:new _i(430,i+12*t+r)}}_isDetailsVisible(){return this._storageService.getBoolean("expandSuggestionDocs",0,!1)}_setDetailsVisible(e){this._storageService.store("expandSuggestionDocs",e,0,0)}forceRenderingAbove(){this._forceRenderingAbove||(this._forceRenderingAbove=!0,this._layout(this._persistedSize.restore()))}stopForceRenderingAbove(){this._forceRenderingAbove=!1}},i1=u_,u_.LOADING_MESSAGE=v("suggestWidget.loading","Loading..."),u_.NO_SUGGESTIONS_MESSAGE=v("suggestWidget.noSuggestions","No suggestions."),u_);_q=i1=t0t([OA(1,Wd),OA(2,at),OA(3,ws),OA(4,Ze)],_q);class r0t{constructor(e,t){this._widget=e,this._editor=t,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._preferenceLocked=!1,this._added=!1,this._hidden=!1}dispose(){this._added&&(this._added=!1,this._editor.removeContentWidget(this))}getId(){return"editor.widget.suggestWidget"}getDomNode(){return this._widget.element.domNode}show(){this._hidden=!1,this._added||(this._added=!0,this._editor.addContentWidget(this))}hide(){this._hidden||(this._hidden=!0,this.layout())}layout(){this._editor.layoutContentWidget(this)}getPosition(){return this._hidden||!this._position||!this._preference?null:{position:this._position,preference:[this._preference]}}beforeRender(){const{height:e,width:t}=this._widget.element.size,{borderWidth:i,horizontalPadding:s}=this._widget.getLayoutInfo();return new _i(t+2*i+s,e+2*i)}afterRender(e){this._widget._afterRender(e)}setPreference(e){this._preferenceLocked||(this._preference=e)}lockPreference(){this._preferenceLocked=!0}unlockPreference(){this._preferenceLocked=!1}setPosition(e){this._position=e}}var o0t=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},HC=function(n,e){return function(t,i){e(t,i,n)}},vq;class a0t{constructor(e,t){if(this._model=e,this._position=t,this._decorationOptions=_t.register({description:"suggest-line-suffix",stickiness:1}),e.getLineMaxColumn(t.lineNumber)!==t.column){const s=e.getOffsetAt(t),r=e.getPositionAt(s+1);e.changeDecorations(o=>{this._marker&&o.removeDecoration(this._marker),this._marker=o.addDecoration(M.fromPositions(t,r),this._decorationOptions)})}}dispose(){this._marker&&!this._model.isDisposed()&&this._model.changeDecorations(e=>{e.removeDecoration(this._marker),this._marker=void 0})}delta(e){if(this._model.isDisposed()||this._position.lineNumber!==e.lineNumber)return 0;if(this._marker){const t=this._model.getDecorationRange(this._marker);return this._model.getOffsetAt(t.getStartPosition())-this._model.getOffsetAt(e)}else return this._model.getLineMaxColumn(e.lineNumber)-e.column}}var Tw;let Cd=(Tw=class{static get(e){return e.getContribution(vq.ID)}constructor(e,t,i,s,r,o,a){this._memoryService=t,this._commandService=i,this._contextKeyService=s,this._instantiationService=r,this._logService=o,this._telemetryService=a,this._lineSuffix=new As,this._toDispose=new ue,this._selectors=new l0t(u=>u.priority),this._onWillInsertSuggestItem=new X,this.onWillInsertSuggestItem=this._onWillInsertSuggestItem.event,this.editor=e,this.model=r.createInstance(IF,this.editor),this._selectors.register({priority:0,select:(u,h,f)=>this._memoryService.select(u,h,f)});const l=Lt.InsertMode.bindTo(s);l.set(e.getOption(119).insertMode),this._toDispose.add(this.model.onDidTrigger(()=>l.set(e.getOption(119).insertMode))),this.widget=this._toDispose.add(new H9(nt(e.getDomNode()),()=>{const u=this._instantiationService.createInstance(_q,this.editor);this._toDispose.add(u),this._toDispose.add(u.onDidSelect(_=>this._insertSuggestion(_,0),this));const h=new zwt(this.editor,u,this.model,_=>this._insertSuggestion(_,2));this._toDispose.add(h);const f=Lt.MakesTextEdit.bindTo(this._contextKeyService),g=Lt.HasInsertAndReplaceRange.bindTo(this._contextKeyService),p=Lt.CanResolve.bindTo(this._contextKeyService);return this._toDispose.add(Ye(()=>{f.reset(),g.reset(),p.reset()})),this._toDispose.add(u.onDidFocus(({item:_})=>{const w=this.editor.getPosition(),b=_.editStart.column,y=w.column;let S=!0;this.editor.getOption(1)==="smart"&&this.model.state===2&&!_.completion.additionalTextEdits&&!(_.completion.insertTextRules&4)&&y-b===_.completion.insertText.length&&(S=this.editor.getModel().getValueInRange({startLineNumber:w.lineNumber,startColumn:b,endLineNumber:w.lineNumber,endColumn:y})!==_.completion.insertText),f.set(S),g.set(!Y.equals(_.editInsertEnd,_.editReplaceEnd)),p.set(!!_.provider.resolveCompletionItem||!!_.completion.documentation||_.completion.detail!==_.completion.label)})),this._toDispose.add(u.onDetailsKeyDown(_=>{if(_.toKeyCodeChord().equals(new Zg(!0,!1,!1,!1,33))||Bt&&_.toKeyCodeChord().equals(new Zg(!1,!1,!1,!0,33))){_.stopPropagation();return}_.toKeyCodeChord().isModifierKey()||this.editor.focus()})),u})),this._overtypingCapturer=this._toDispose.add(new H9(nt(e.getDomNode()),()=>this._toDispose.add(new fq(this.editor,this.model)))),this._alternatives=this._toDispose.add(new H9(nt(e.getDomNode()),()=>this._toDispose.add(new lx(this.editor,this._contextKeyService)))),this._toDispose.add(r.createInstance(LF,e)),this._toDispose.add(this.model.onDidTrigger(u=>{this.widget.value.showTriggered(u.auto,u.shy?250:50),this._lineSuffix.value=new a0t(this.editor.getModel(),u.position)})),this._toDispose.add(this.model.onDidSuggest(u=>{if(u.triggerOptions.shy)return;let h=-1;for(const g of this._selectors.itemsOrderedByPriorityDesc)if(h=g.select(this.editor.getModel(),this.editor.getPosition(),u.completionModel.items),h!==-1)break;if(h===-1&&(h=0),this.model.state===0)return;let f=!1;if(u.triggerOptions.auto){const g=this.editor.getOption(119);g.selectionMode==="never"||g.selectionMode==="always"?f=g.selectionMode==="never":g.selectionMode==="whenTriggerCharacter"?f=u.triggerOptions.triggerKind!==1:g.selectionMode==="whenQuickSuggestion"&&(f=u.triggerOptions.triggerKind===1&&!u.triggerOptions.refilter)}this.widget.value.showSuggestions(u.completionModel,h,u.isFrozen,u.triggerOptions.auto,f)})),this._toDispose.add(this.model.onDidCancel(u=>{u.retrigger||this.widget.value.hideWidget()})),this._toDispose.add(this.editor.onDidBlurEditorWidget(()=>{this.model.cancel(),this.model.clear()}));const c=Lt.AcceptSuggestionsOnEnter.bindTo(s),d=()=>{const u=this.editor.getOption(1);c.set(u==="on"||u==="smart")};this._toDispose.add(this.editor.onDidChangeConfiguration(()=>d())),d()}dispose(){this._alternatives.dispose(),this._toDispose.dispose(),this.widget.dispose(),this.model.dispose(),this._lineSuffix.dispose(),this._onWillInsertSuggestItem.dispose()}_insertSuggestion(e,t){if(!e||!e.item){this._alternatives.value.reset(),this.model.cancel(),this.model.clear();return}if(!this.editor.hasModel())return;const i=Wo.get(this.editor);if(!i)return;this._onWillInsertSuggestItem.fire({item:e.item});const s=this.editor.getModel(),r=s.getAlternativeVersionId(),{item:o}=e,a=[],l=new mn;t&1||this.editor.pushUndoStop();const c=this.getOverwriteInfo(o,!!(t&8));this._memoryService.memorize(s,this.editor.getPosition(),o);const d=o.isResolved;let u=-1,h=-1;if(Array.isArray(o.completion.additionalTextEdits)){this.model.cancel();const g=ju.capture(this.editor);this.editor.executeEdits("suggestController.additionalTextEdits.sync",o.completion.additionalTextEdits.map(p=>{let _=M.lift(p.range);if(_.startLineNumber===o.position.lineNumber&&_.startColumn>o.position.column){const w=this.editor.getPosition().column-o.position.column,b=w,y=M.spansMultipleLines(_)?0:w;_=new M(_.startLineNumber,_.startColumn+b,_.endLineNumber,_.endColumn+y)}return gn.replaceMove(_,p.text)})),g.restoreRelativeVerticalPositionOfCursor(this.editor)}else if(!d){const g=new js;let p;const _=s.onDidChangeContent(S=>{if(S.isFlush){l.cancel(),_.dispose();return}for(const x of S.changes){const E=M.getEndPosition(x.range);(!p||Y.isBefore(E,p))&&(p=E)}}),w=t;t|=2;let b=!1;const y=this.editor.onWillType(()=>{y.dispose(),b=!0,w&2||this.editor.pushUndoStop()});a.push(o.resolve(l.token).then(()=>{if(!o.completion.additionalTextEdits||l.token.isCancellationRequested)return;if(p&&o.completion.additionalTextEdits.some(x=>Y.isBefore(p,M.getStartPosition(x.range))))return!1;b&&this.editor.pushUndoStop();const S=ju.capture(this.editor);return this.editor.executeEdits("suggestController.additionalTextEdits.async",o.completion.additionalTextEdits.map(x=>gn.replaceMove(M.lift(x.range),x.text))),S.restoreRelativeVerticalPositionOfCursor(this.editor),(b||!(w&2))&&this.editor.pushUndoStop(),!0}).then(S=>{this._logService.trace("[suggest] async resolving of edits DONE (ms, applied?)",g.elapsed(),S),h=S===!0?1:S===!1?0:-2}).finally(()=>{_.dispose(),y.dispose()}))}let{insertText:f}=o.completion;if(o.completion.insertTextRules&4||(f=x0.escape(f)),this.model.cancel(),i.insert(f,{overwriteBefore:c.overwriteBefore,overwriteAfter:c.overwriteAfter,undoStopBefore:!1,undoStopAfter:!1,adjustWhitespace:!(o.completion.insertTextRules&1),clipboardText:e.model.clipboardText,overtypingCapturer:this._overtypingCapturer.value}),t&2||this.editor.pushUndoStop(),o.completion.command)if(o.completion.command.id===DF.id)this.model.trigger({auto:!0,retrigger:!0});else{const g=new js;a.push(this._commandService.executeCommand(o.completion.command.id,...o.completion.command.arguments?[...o.completion.command.arguments]:[]).catch(p=>{o.completion.extensionId?Wn(p):pt(p)}).finally(()=>{u=g.elapsed()}))}t&4&&this._alternatives.value.set(e,g=>{for(l.cancel();s.canUndo();){r!==s.getAlternativeVersionId()&&s.undo(),this._insertSuggestion(g,3|(t&8?8:0));break}}),this._alertCompletionItem(o),Promise.all(a).finally(()=>{this._reportSuggestionAcceptedTelemetry(o,s,d,u,h,e.index,e.model.items),this.model.clear(),l.dispose()})}_reportSuggestionAcceptedTelemetry(e,t,i,s,r,o,a){var h;if(Math.floor(Math.random()*100)===0)return;const l=new Map;for(let f=0;f<Math.min(30,a.length);f++){const g=a[f].textLabel;l.has(g)?l.get(g).push(f):l.set(g,[f])}const c=l.get(e.textLabel),u=c&&c.length>1?c[0]:-1;this._telemetryService.publicLog2("suggest.acceptedSuggestion",{extensionId:((h=e.extensionId)==null?void 0:h.value)??"unknown",providerId:e.provider._debugDisplayName??"unknown",kind:e.completion.kind,basenameHash:B3(Pc(t.uri)).toString(16),languageId:t.getLanguageId(),fileExtension:VJe(t.uri),resolveInfo:e.provider.resolveCompletionItem?i?1:0:-1,resolveDuration:e.resolveDuration,commandDuration:s,additionalEditsAsync:r,index:o,firstIndex:u})}getOverwriteInfo(e,t){si(this.editor.hasModel());let i=this.editor.getOption(119).insertMode==="replace";t&&(i=!i);const s=e.position.column-e.editStart.column,r=(i?e.editReplaceEnd.column:e.editInsertEnd.column)-e.position.column,o=this.editor.getPosition().column-e.position.column,a=this._lineSuffix.value?this._lineSuffix.value.delta(this.editor.getPosition()):0;return{overwriteBefore:s+o,overwriteAfter:r+a}}_alertCompletionItem(e){if(ao(e.completion.additionalTextEdits)){const t=v("aria.alert.snippet","Accepting '{0}' made {1} additional edits",e.textLabel,e.completion.additionalTextEdits.length);Bo(t)}}triggerSuggest(e,t,i){this.editor.hasModel()&&(this.model.trigger({auto:t??!1,completionOptions:{providerFilter:e,kindFilter:i?new Set:void 0}}),this.editor.revealPosition(this.editor.getPosition(),0),this.editor.focus())}triggerSuggestAndAcceptBest(e){if(!this.editor.hasModel())return;const t=this.editor.getPosition(),i=()=>{t.equals(this.editor.getPosition())&&this._commandService.executeCommand(e.fallback)},s=r=>{if(r.completion.insertTextRules&4||r.completion.additionalTextEdits)return!0;const o=this.editor.getPosition(),a=r.editStart.column,l=o.column;return l-a!==r.completion.insertText.length?!0:this.editor.getModel().getValueInRange({startLineNumber:o.lineNumber,startColumn:a,endLineNumber:o.lineNumber,endColumn:l})!==r.completion.insertText};Ee.once(this.model.onDidTrigger)(r=>{const o=[];Ee.any(this.model.onDidTrigger,this.model.onDidCancel)(()=>{Ti(o),i()},void 0,o),this.model.onDidSuggest(({completionModel:a})=>{if(Ti(o),a.items.length===0){i();return}const l=this._memoryService.select(this.editor.getModel(),this.editor.getPosition(),a.items),c=a.items[l];if(!s(c)){i();return}this.editor.pushUndoStop(),this._insertSuggestion({index:l,item:c,model:a},7)},void 0,o)}),this.model.trigger({auto:!1,shy:!0}),this.editor.revealPosition(t,0),this.editor.focus()}acceptSelectedSuggestion(e,t){const i=this.widget.value.getFocusedItem();let s=0;e&&(s|=4),t&&(s|=8),this._insertSuggestion(i,s)}acceptNextSuggestion(){this._alternatives.value.next()}acceptPrevSuggestion(){this._alternatives.value.prev()}cancelSuggestWidget(){this.model.cancel(),this.model.clear(),this.widget.value.hideWidget()}focusSuggestion(){this.widget.value.focusSelected()}selectNextSuggestion(){this.widget.value.selectNext()}selectNextPageSuggestion(){this.widget.value.selectNextPage()}selectLastSuggestion(){this.widget.value.selectLast()}selectPrevSuggestion(){this.widget.value.selectPrevious()}selectPrevPageSuggestion(){this.widget.value.selectPreviousPage()}selectFirstSuggestion(){this.widget.value.selectFirst()}toggleSuggestionDetails(){this.widget.value.toggleDetails()}toggleExplainMode(){this.widget.value.toggleExplainMode()}toggleSuggestionFocus(){this.widget.value.toggleDetailsFocus()}resetWidgetSize(){this.widget.value.resetPersistedSize()}forceRenderingAbove(){this.widget.value.forceRenderingAbove()}stopForceRenderingAbove(){this.widget.isInitialized&&this.widget.value.stopForceRenderingAbove()}registerSelector(e){return this._selectors.register(e)}},vq=Tw,Tw.ID="editor.contrib.suggestController",Tw);Cd=vq=o0t([HC(1,lW),HC(2,Vi),HC(3,at),HC(4,Ze),HC(5,Cr),HC(6,Hr)],Cd);class l0t{constructor(e){this.prioritySelector=e,this._items=new Array}register(e){if(this._items.indexOf(e)!==-1)throw new Error("Value is already registered");return this._items.push(e),this._items.sort((t,i)=>this.prioritySelector(i)-this.prioritySelector(t)),{dispose:()=>{const t=this._items.indexOf(e);t>=0&&this._items.splice(t,1)}}}get itemsOrderedByPriorityDesc(){return this._items}}const c5=class c5 extends Oe{constructor(){super({id:c5.id,label:v("suggest.trigger.label","Trigger Suggest"),alias:"Trigger Suggest",precondition:he.and(F.writable,F.hasCompletionItemProvider,Lt.Visible.toNegated()),kbOpts:{kbExpr:F.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[521,2087]},weight:100}})}run(e,t,i){const s=Cd.get(t);if(!s)return;let r;i&&typeof i=="object"&&i.auto===!0&&(r=!0),s.triggerSuggest(void 0,r,void 0)}};c5.id="editor.action.triggerSuggest";let DF=c5;Xt(Cd.ID,Cd,2);we(DF);const Gl=190,Uo=vs.bindToContribution(Cd.get);Te(new Uo({id:"acceptSelectedSuggestion",precondition:he.and(Lt.Visible,Lt.HasFocusedSuggestion),handler(n){n.acceptSelectedSuggestion(!0,!1)},kbOpts:[{primary:2,kbExpr:he.and(Lt.Visible,F.textInputFocus),weight:Gl},{primary:3,kbExpr:he.and(Lt.Visible,F.textInputFocus,Lt.AcceptSuggestionsOnEnter,Lt.MakesTextEdit),weight:Gl}],menuOpts:[{menuId:Jm,title:v("accept.insert","Insert"),group:"left",order:1,when:Lt.HasInsertAndReplaceRange.toNegated()},{menuId:Jm,title:v("accept.insert","Insert"),group:"left",order:1,when:he.and(Lt.HasInsertAndReplaceRange,Lt.InsertMode.isEqualTo("insert"))},{menuId:Jm,title:v("accept.replace","Replace"),group:"left",order:1,when:he.and(Lt.HasInsertAndReplaceRange,Lt.InsertMode.isEqualTo("replace"))}]}));Te(new Uo({id:"acceptAlternativeSelectedSuggestion",precondition:he.and(Lt.Visible,F.textInputFocus,Lt.HasFocusedSuggestion),kbOpts:{weight:Gl,kbExpr:F.textInputFocus,primary:1027,secondary:[1026]},handler(n){n.acceptSelectedSuggestion(!1,!0)},menuOpts:[{menuId:Jm,group:"left",order:2,when:he.and(Lt.HasInsertAndReplaceRange,Lt.InsertMode.isEqualTo("insert")),title:v("accept.replace","Replace")},{menuId:Jm,group:"left",order:2,when:he.and(Lt.HasInsertAndReplaceRange,Lt.InsertMode.isEqualTo("replace")),title:v("accept.insert","Insert")}]}));Gt.registerCommandAlias("acceptSelectedSuggestionOnEnter","acceptSelectedSuggestion");Te(new Uo({id:"hideSuggestWidget",precondition:Lt.Visible,handler:n=>n.cancelSuggestWidget(),kbOpts:{weight:Gl,kbExpr:F.textInputFocus,primary:9,secondary:[1033]}}));Te(new Uo({id:"selectNextSuggestion",precondition:he.and(Lt.Visible,he.or(Lt.MultipleSuggestions,Lt.HasFocusedSuggestion.negate())),handler:n=>n.selectNextSuggestion(),kbOpts:{weight:Gl,kbExpr:F.textInputFocus,primary:18,secondary:[2066],mac:{primary:18,secondary:[2066,300]}}}));Te(new Uo({id:"selectNextPageSuggestion",precondition:he.and(Lt.Visible,he.or(Lt.MultipleSuggestions,Lt.HasFocusedSuggestion.negate())),handler:n=>n.selectNextPageSuggestion(),kbOpts:{weight:Gl,kbExpr:F.textInputFocus,primary:12,secondary:[2060]}}));Te(new Uo({id:"selectLastSuggestion",precondition:he.and(Lt.Visible,he.or(Lt.MultipleSuggestions,Lt.HasFocusedSuggestion.negate())),handler:n=>n.selectLastSuggestion()}));Te(new Uo({id:"selectPrevSuggestion",precondition:he.and(Lt.Visible,he.or(Lt.MultipleSuggestions,Lt.HasFocusedSuggestion.negate())),handler:n=>n.selectPrevSuggestion(),kbOpts:{weight:Gl,kbExpr:F.textInputFocus,primary:16,secondary:[2064],mac:{primary:16,secondary:[2064,302]}}}));Te(new Uo({id:"selectPrevPageSuggestion",precondition:he.and(Lt.Visible,he.or(Lt.MultipleSuggestions,Lt.HasFocusedSuggestion.negate())),handler:n=>n.selectPrevPageSuggestion(),kbOpts:{weight:Gl,kbExpr:F.textInputFocus,primary:11,secondary:[2059]}}));Te(new Uo({id:"selectFirstSuggestion",precondition:he.and(Lt.Visible,he.or(Lt.MultipleSuggestions,Lt.HasFocusedSuggestion.negate())),handler:n=>n.selectFirstSuggestion()}));Te(new Uo({id:"focusSuggestion",precondition:he.and(Lt.Visible,Lt.HasFocusedSuggestion.negate()),handler:n=>n.focusSuggestion(),kbOpts:{weight:Gl,kbExpr:F.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[2087]}}}));Te(new Uo({id:"focusAndAcceptSuggestion",precondition:he.and(Lt.Visible,Lt.HasFocusedSuggestion.negate()),handler:n=>{n.focusSuggestion(),n.acceptSelectedSuggestion(!0,!1)}}));Te(new Uo({id:"toggleSuggestionDetails",precondition:he.and(Lt.Visible,Lt.HasFocusedSuggestion),handler:n=>n.toggleSuggestionDetails(),kbOpts:{weight:Gl,kbExpr:F.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[2087]}},menuOpts:[{menuId:Jm,group:"right",order:1,when:he.and(Lt.DetailsVisible,Lt.CanResolve),title:v("detail.more","Show Less")},{menuId:Jm,group:"right",order:1,when:he.and(Lt.DetailsVisible.toNegated(),Lt.CanResolve),title:v("detail.less","Show More")}]}));Te(new Uo({id:"toggleExplainMode",precondition:Lt.Visible,handler:n=>n.toggleExplainMode(),kbOpts:{weight:100,primary:2138}}));Te(new Uo({id:"toggleSuggestionFocus",precondition:Lt.Visible,handler:n=>n.toggleSuggestionFocus(),kbOpts:{weight:Gl,kbExpr:F.textInputFocus,primary:2570,mac:{primary:778}}}));Te(new Uo({id:"insertBestCompletion",precondition:he.and(F.textInputFocus,he.equals("config.editor.tabCompletion","on"),LF.AtEnd,Lt.Visible.toNegated(),lx.OtherSuggestions.toNegated(),Wo.InSnippetMode.toNegated()),handler:(n,e)=>{n.triggerSuggestAndAcceptBest(zs(e)?{fallback:"tab",...e}:{fallback:"tab"})},kbOpts:{weight:Gl,primary:2}}));Te(new Uo({id:"insertNextSuggestion",precondition:he.and(F.textInputFocus,he.equals("config.editor.tabCompletion","on"),lx.OtherSuggestions,Lt.Visible.toNegated(),Wo.InSnippetMode.toNegated()),handler:n=>n.acceptNextSuggestion(),kbOpts:{weight:Gl,kbExpr:F.textInputFocus,primary:2}}));Te(new Uo({id:"insertPrevSuggestion",precondition:he.and(F.textInputFocus,he.equals("config.editor.tabCompletion","on"),lx.OtherSuggestions,Lt.Visible.toNegated(),Wo.InSnippetMode.toNegated()),handler:n=>n.acceptPrevSuggestion(),kbOpts:{weight:Gl,kbExpr:F.textInputFocus,primary:1026}}));we(class extends Oe{constructor(){super({id:"editor.action.resetSuggestSize",label:v("suggest.reset.label","Reset Suggest Widget Size"),alias:"Reset Suggest Widget Size",precondition:void 0})}run(n,e){var t;(t=Cd.get(e))==null||t.resetWidgetSize()}});class c0t extends ee{get selectedItem(){return this._currentSuggestItemInfo}constructor(e,t,i){super(),this.editor=e,this.suggestControllerPreselector=t,this.onWillAccept=i,this.isSuggestWidgetVisible=!1,this.isShiftKeyPressed=!1,this._isActive=!1,this._currentSuggestItemInfo=void 0,this._onDidSelectedItemChange=this._register(new X),this.onDidSelectedItemChange=this._onDidSelectedItemChange.event,this._register(e.onKeyDown(r=>{r.shiftKey&&!this.isShiftKeyPressed&&(this.isShiftKeyPressed=!0,this.update(this._isActive))})),this._register(e.onKeyUp(r=>{r.shiftKey&&this.isShiftKeyPressed&&(this.isShiftKeyPressed=!1,this.update(this._isActive))}));const s=Cd.get(this.editor);if(s){this._register(s.registerSelector({priority:100,select:(a,l,c)=>{const d=this.editor.getModel();if(!d)return-1;const u=this.suggestControllerPreselector(),h=u?Qb(u,d):void 0;if(!h)return-1;const f=Y.lift(l),g=c.map((_,w)=>{const b=LE.fromSuggestion(s,d,f,_,this.isShiftKeyPressed),y=Qb(b.toSingleTextEdit(),d),S=gke(h,y);return{index:w,valid:S,prefixLength:y.text.length,suggestItem:_}}).filter(_=>_&&_.valid&&_.prefixLength>0),p=LX(g,No(_=>_.prefixLength,xd));return p?p.index:-1}}));let r=!1;const o=()=>{r||(r=!0,this._register(s.widget.value.onDidShow(()=>{this.isSuggestWidgetVisible=!0,this.update(!0)})),this._register(s.widget.value.onDidHide(()=>{this.isSuggestWidgetVisible=!1,this.update(!1)})),this._register(s.widget.value.onDidFocus(()=>{this.isSuggestWidgetVisible=!0,this.update(!0)})))};this._register(Ee.once(s.model.onDidTrigger)(a=>{o()})),this._register(s.onWillInsertSuggestItem(a=>{const l=this.editor.getPosition(),c=this.editor.getModel();if(!l||!c)return;const d=LE.fromSuggestion(s,c,l,a.item,this.isShiftKeyPressed);this.onWillAccept(d)}))}this.update(this._isActive)}update(e){const t=this.getSuggestItemInfo();(this._isActive!==e||!d0t(this._currentSuggestItemInfo,t))&&(this._isActive=e,this._currentSuggestItemInfo=t,this._onDidSelectedItemChange.fire())}getSuggestItemInfo(){const e=Cd.get(this.editor);if(!e||!this.isSuggestWidgetVisible)return;const t=e.widget.value.getFocusedItem(),i=this.editor.getPosition(),s=this.editor.getModel();if(!(!t||!i||!s))return LE.fromSuggestion(e,s,i,t.item,this.isShiftKeyPressed)}stopForceRenderingAbove(){const e=Cd.get(this.editor);e==null||e.stopForceRenderingAbove()}forceRenderingAbove(){const e=Cd.get(this.editor);e==null||e.forceRenderingAbove()}}class LE{static fromSuggestion(e,t,i,s,r){let{insertText:o}=s.completion,a=!1;if(s.completion.insertTextRules&4){const c=new x0().parse(o);c.children.length<100&&xF.adjustWhitespace(t,i,!0,c),o=c.toString(),a=!0}const l=e.getOverwriteInfo(s,r);return new LE(M.fromPositions(i.delta(0,-l.overwriteBefore),i.delta(0,Math.max(l.overwriteAfter,0))),o,s.completion.kind,a)}constructor(e,t,i,s){this.range=e,this.insertText=t,this.completionItemKind=i,this.isSnippetText=s}equals(e){return this.range.equalsRange(e.range)&&this.insertText===e.insertText&&this.completionItemKind===e.completionItemKind&&this.isSnippetText===e.isSnippetText}toSelectedSuggestionInfo(){return new c0e(this.range,this.insertText,this.completionItemKind,this.isSnippetText)}toSingleTextEdit(){return new rf(this.range,this.insertText)}}function d0t(n,e){return n===e?!0:!n||!e?!1:n.equals(e)}var u0t=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Bf=function(n,e){return function(t,i){e(t,i,n)}},bq,Rw;let Fc=(Rw=class extends ee{static get(e){return e.getContribution(bq.ID)}constructor(e,t,i,s,r,o,a,l,c,d){super(),this.editor=e,this._instantiationService=t,this._contextKeyService=i,this._configurationService=s,this._commandService=r,this._debounceService=o,this._languageFeaturesService=a,this._accessibilitySignalService=l,this._keybindingService=c,this._accessibilityService=d,this._editorObs=$a(this.editor),this._positions=Ke(this,h=>{var f;return((f=this._editorObs.selections.read(h))==null?void 0:f.map(g=>g.getEndPosition()))??[new Y(1,1)]}),this._suggestWidgetAdaptor=this._register(new c0t(this.editor,()=>{var h,f;return this._editorObs.forceUpdate(),(f=(h=this.model.get())==null?void 0:h.selectedInlineCompletion.get())==null?void 0:f.toSingleTextEdit(void 0)},h=>this._editorObs.forceUpdate(f=>{var g;(g=this.model.get())==null||g.handleSuggestAccepted(h)}))),this._suggestWidgetSelectedItem=mi(this,h=>this._suggestWidgetAdaptor.onDidSelectedItemChange(()=>{this._editorObs.forceUpdate(f=>h(void 0))}),()=>this._suggestWidgetAdaptor.selectedItem),this._enabledInConfig=mi(this,this.editor.onDidChangeConfiguration,()=>this.editor.getOption(62).enabled),this._isScreenReaderEnabled=mi(this,this._accessibilityService.onDidChangeScreenReaderOptimized,()=>this._accessibilityService.isScreenReaderOptimized()),this._editorDictationInProgress=mi(this,this._contextKeyService.onDidChangeContext,()=>this._contextKeyService.getContext(this.editor.getDomNode()).getValue("editorDictation.inProgress")===!0),this._enabled=Ke(this,h=>this._enabledInConfig.read(h)&&(!this._isScreenReaderEnabled.read(h)||!this._editorDictationInProgress.read(h))),this._debounceValue=this._debounceService.for(this._languageFeaturesService.inlineCompletionsProvider,"InlineCompletionsDebounce",{min:50,max:50}),this.model=io(this,h=>{if(this._editorObs.isReadonly.read(h))return;const f=this._editorObs.model.read(h);return f?this._instantiationService.createInstance(cq,f,this._suggestWidgetSelectedItem,this._editorObs.versionId,this._positions,this._debounceValue,mi(this.editor.onDidChangeConfiguration,()=>this.editor.getOption(119).preview),mi(this.editor.onDidChangeConfiguration,()=>this.editor.getOption(119).previewMode),mi(this.editor.onDidChangeConfiguration,()=>this.editor.getOption(62).mode),this._enabled):void 0}).recomputeInitiallyAndOnChange(this._store),this._ghostTexts=Ke(this,h=>{const f=this.model.read(h);return(f==null?void 0:f.ghostTexts.read(h))??[]}),this._stablizedGhostTexts=h0t(this._ghostTexts,this._store),this._ghostTextWidgets=Ftt(this,this._stablizedGhostTexts,(h,f)=>f.add(this._instantiationService.createInstance(aq,this.editor,{ghostText:h,minReservedLineCount:Sc(0),targetTextModel:this.model.map(g=>g==null?void 0:g.textModel)}))).recomputeInitiallyAndOnChange(this._store),this._playAccessibilitySignal=Bx(this),this._fontFamily=mi(this,this.editor.onDidChangeConfiguration,()=>this.editor.getOption(62).fontFamily),this._register(new Ja(this._contextKeyService,this.model)),this._register(qj(this._editorObs.onDidType,(h,f)=>{var g;this._enabled.get()&&((g=this.model.get())==null||g.trigger())})),this._register(this._commandService.onDidExecuteCommand(h=>{new Set([Hy.Tab.id,Hy.DeleteLeft.id,Hy.DeleteRight.id,SLe,"acceptSelectedSuggestion"]).has(h.commandId)&&e.hasTextFocus()&&this._enabled.get()&&this._editorObs.forceUpdate(g=>{var p;(p=this.model.get())==null||p.trigger(g)})})),this._register(qj(this._editorObs.selections,(h,f)=>{var g;f.some(p=>p.reason===3||p.source==="api")&&((g=this.model.get())==null||g.stop())})),this._register(this.editor.onDidBlurEditorWidget(()=>{this._contextKeyService.getContextKeyValue("accessibleViewIsShown")||this._configurationService.getValue("editor.inlineSuggest.keepOnBlur")||e.getOption(62).keepOnBlur||ix.dropDownVisible||pn(h=>{var f;(f=this.model.get())==null||f.stop(h)})})),this._register(gt(h=>{var g;const f=(g=this.model.read(h))==null?void 0:g.state.read(h);f!=null&&f.suggestItem?f.primaryGhostText.lineCount>=2&&this._suggestWidgetAdaptor.forceRenderingAbove():this._suggestWidgetAdaptor.stopForceRenderingAbove()})),this._register(Ye(()=>{this._suggestWidgetAdaptor.stopForceRenderingAbove()}));const u=YN(this,(h,f)=>{var _;const g=this.model.read(h),p=g==null?void 0:g.state.read(h);return this._suggestWidgetSelectedItem.get()?f:(_=p==null?void 0:p.inlineCompletion)==null?void 0:_.semanticId});this._register(lht(Ke(h=>(this._playAccessibilitySignal.read(h),u.read(h),{})),async(h,f,g)=>{const p=this.model.get(),_=p==null?void 0:p.state.get();if(!_||!p)return;const w=p.textModel.getLineContent(_.primaryGhostText.lineNumber);await Xg(50,kV(g)),await W1e(this._suggestWidgetSelectedItem,ro,()=>!1,kV(g)),await this._accessibilitySignalService.playSignal(Ll.inlineSuggestion),this.editor.getOption(8)&&this._provideScreenReaderUpdate(_.primaryGhostText.renderForScreenReader(w))})),this._register(new kK(this.editor,this.model,this._instantiationService)),this._register(iwt(Ke(h=>{const f=this._fontFamily.read(h);return f===""||f==="default"?"":`
.monaco-editor .ghost-text-decoration,
.monaco-editor .ghost-text-decoration-preview,
.monaco-editor .ghost-text {
	font-family: ${f};
}`}))),this._register(this._configurationService.onDidChangeConfiguration(h=>{h.affectsConfiguration("accessibility.verbosity.inlineCompletions")&&this.editor.updateOptions({inlineCompletionsAccessibilityVerbose:this._configurationService.getValue("accessibility.verbosity.inlineCompletions")})})),this.editor.updateOptions({inlineCompletionsAccessibilityVerbose:this._configurationService.getValue("accessibility.verbosity.inlineCompletions")})}playAccessibilitySignal(e){this._playAccessibilitySignal.trigger(e)}_provideScreenReaderUpdate(e){const t=this._contextKeyService.getContextKeyValue("accessibleViewIsShown"),i=this._keybindingService.lookupKeybinding("editor.action.accessibleView");let s;!t&&i&&this.editor.getOption(150)&&(s=v("showAccessibleViewHint","Inspect this in the accessible view ({0})",i.getAriaLabel())),Bo(s?e+", "+s:e)}shouldShowHoverAt(e){var i;const t=(i=this.model.get())==null?void 0:i.primaryGhostText.get();return t?t.parts.some(s=>e.containsPosition(new Y(t.lineNumber,s.column))):!1}shouldShowHoverAtViewZone(e){var t;return((t=this._ghostTextWidgets.get()[0])==null?void 0:t.ownsViewZone(e))??!1}},bq=Rw,Rw.ID="editor.contrib.inlineCompletionsController",Rw);Fc=bq=u0t([Bf(1,Ze),Bf(2,at),Bf(3,Tt),Bf(4,Vi),Bf(5,Zl),Bf(6,Be),Bf(7,ov),Bf(8,hi),Bf(9,al)],Fc);function h0t(n,e){const t=Nt("result",[]),i=[];return e.add(gt(s=>{const r=n.read(s);pn(o=>{if(r.length!==i.length){i.length=r.length;for(let a=0;a<i.length;a++)i[a]||(i[a]=Nt("item",r[a]));t.set([...i],o)}i.forEach((a,l)=>a.set(r[l],o))})})),t}const d5=class d5 extends Oe{constructor(){super({id:d5.ID,label:v("action.inlineSuggest.showNext","Show Next Inline Suggestion"),alias:"Show Next Inline Suggestion",precondition:he.and(F.writable,Ja.inlineSuggestionVisible),kbOpts:{weight:100,primary:606}})}async run(e,t){var s;const i=Fc.get(t);(s=i==null?void 0:i.model.get())==null||s.next()}};d5.ID=LLe;let wq=d5;const u5=class u5 extends Oe{constructor(){super({id:u5.ID,label:v("action.inlineSuggest.showPrevious","Show Previous Inline Suggestion"),alias:"Show Previous Inline Suggestion",precondition:he.and(F.writable,Ja.inlineSuggestionVisible),kbOpts:{weight:100,primary:604}})}async run(e,t){var s;const i=Fc.get(t);(s=i==null?void 0:i.model.get())==null||s.previous()}};u5.ID=xLe;let Cq=u5;class f0t extends Oe{constructor(){super({id:"editor.action.inlineSuggest.trigger",label:v("action.inlineSuggest.trigger","Trigger Inline Suggestion"),alias:"Trigger Inline Suggestion",precondition:F.writable})}async run(e,t){const i=Fc.get(t);await O1e(async s=>{var r;await((r=i==null?void 0:i.model.get())==null?void 0:r.triggerExplicitly(s)),i==null||i.playAccessibilitySignal(s)})}}class g0t extends Oe{constructor(){super({id:"editor.action.inlineSuggest.acceptNextWord",label:v("action.inlineSuggest.acceptNextWord","Accept Next Word Of Inline Suggestion"),alias:"Accept Next Word Of Inline Suggestion",precondition:he.and(F.writable,Ja.inlineSuggestionVisible),kbOpts:{weight:101,primary:2065,kbExpr:he.and(F.writable,Ja.inlineSuggestionVisible)},menuOpts:[{menuId:ze.InlineSuggestionToolbar,title:v("acceptWord","Accept Word"),group:"primary",order:2}]})}async run(e,t){var s;const i=Fc.get(t);await((s=i==null?void 0:i.model.get())==null?void 0:s.acceptNextWord(i.editor))}}class p0t extends Oe{constructor(){super({id:"editor.action.inlineSuggest.acceptNextLine",label:v("action.inlineSuggest.acceptNextLine","Accept Next Line Of Inline Suggestion"),alias:"Accept Next Line Of Inline Suggestion",precondition:he.and(F.writable,Ja.inlineSuggestionVisible),kbOpts:{weight:101},menuOpts:[{menuId:ze.InlineSuggestionToolbar,title:v("acceptLine","Accept Line"),group:"secondary",order:2}]})}async run(e,t){var s;const i=Fc.get(t);await((s=i==null?void 0:i.model.get())==null?void 0:s.acceptNextLine(i.editor))}}class m0t extends Oe{constructor(){super({id:SLe,label:v("action.inlineSuggest.accept","Accept Inline Suggestion"),alias:"Accept Inline Suggestion",precondition:Ja.inlineSuggestionVisible,menuOpts:[{menuId:ze.InlineSuggestionToolbar,title:v("accept","Accept"),group:"primary",order:1}],kbOpts:{primary:2,weight:200,kbExpr:he.and(Ja.inlineSuggestionVisible,F.tabMovesFocus.toNegated(),Ja.inlineSuggestionHasIndentationLessThanTabSize,Lt.Visible.toNegated(),F.hoverFocused.toNegated())}})}async run(e,t){var s;const i=Fc.get(t);i&&((s=i.model.get())==null||s.accept(i.editor),i.editor.focus())}}const h5=class h5 extends Oe{constructor(){super({id:h5.ID,label:v("action.inlineSuggest.hide","Hide Inline Suggestion"),alias:"Hide Inline Suggestion",precondition:Ja.inlineSuggestionVisible,kbOpts:{weight:100,primary:9}})}async run(e,t){const i=Fc.get(t);pn(s=>{var r;(r=i==null?void 0:i.model.get())==null||r.stop(s)})}};h5.ID="editor.action.inlineSuggest.hide";let yq=h5;const f5=class f5 extends Ho{constructor(){super({id:f5.ID,title:v("action.inlineSuggest.alwaysShowToolbar","Always Show Toolbar"),f1:!1,precondition:void 0,menu:[{id:ze.InlineSuggestionToolbar,group:"secondary",order:10}],toggled:he.equals("config.editor.inlineSuggest.showToolbar","always")})}async run(e,t){const i=e.get(Tt),r=i.getValue("editor.inlineSuggest.showToolbar")==="always"?"onHover":"always";i.updateValue("editor.inlineSuggest.showToolbar",r)}};f5.ID="editor.action.inlineSuggest.toggleAlwaysShowToolbar";let Sq=f5;var _0t=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},JL=function(n,e){return function(t,i){e(t,i,n)}};class v0t{constructor(e,t,i){this.owner=e,this.range=t,this.controller=i}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}let xq=class{constructor(e,t,i,s,r,o){this._editor=e,this._languageService=t,this._openerService=i,this.accessibilityService=s,this._instantiationService=r,this._telemetryService=o,this.hoverOrdinal=4}suggestHoverAnchor(e){const t=Fc.get(this._editor);if(!t)return null;const i=e.target;if(i.type===8){const s=i.detail;if(t.shouldShowHoverAtViewZone(s.viewZoneId))return new K2(1e3,this,M.fromPositions(this._editor.getModel().validatePosition(s.positionBefore||s.position)),e.event.posx,e.event.posy,!1)}return i.type===7&&t.shouldShowHoverAt(i.range)?new K2(1e3,this,i.range,e.event.posx,e.event.posy,!1):i.type===6&&i.detail.mightBeForeignElement&&t.shouldShowHoverAt(i.range)?new K2(1e3,this,i.range,e.event.posx,e.event.posy,!1):null}computeSync(e,t){if(this._editor.getOption(62).showToolbar!=="onHover")return[];const i=Fc.get(this._editor);return i&&i.shouldShowHoverAt(e.range)?[new v0t(this,e.range,i)]:[]}renderHoverParts(e,t){const i=new ue,s=t[0];this._telemetryService.publicLog2("inlineCompletionHover.shown"),this.accessibilityService.isScreenReaderOptimized()&&!this._editor.getOption(8)&&i.add(this.renderScreenReaderText(e,s));const r=s.controller.model.get(),o=this._instantiationService.createInstance(ix,this._editor,!1,Sc(null),r.selectedInlineCompletionIndex,r.inlineCompletionsCount,r.activeCommands),a=o.getDomNode();e.fragment.appendChild(a),r.triggerExplicitly(),i.add(o);const l={hoverPart:s,hoverElement:a,dispose(){i.dispose()}};return new I0([l])}renderScreenReaderText(e,t){const i=new ue,s=xe,r=s("div.hover-row.markdown-hover"),o=_e(r,s("div.hover-contents",{"aria-live":"assertive"})),a=i.add(new ep({editor:this._editor},this._languageService,this._openerService)),l=c=>{i.add(a.onDidRenderAsync(()=>{o.className="hover-contents code-hover-contents",e.onContentsChanged()}));const d=v("inlineSuggestionFollows","Suggestion:"),u=i.add(a.render(new Rr().appendText(d).appendCodeblock("text",c)));o.replaceChildren(u.element)};return i.add(gt(c=>{var u;const d=(u=t.controller.model.read(c))==null?void 0:u.primaryGhostText.read(c);if(d){const h=this._editor.getModel().getLineContent(d.lineNumber);l(d.renderForScreenReader(h))}else sr(o)})),e.fragment.appendChild(r),i}};xq=_0t([JL(1,un),JL(2,ba),JL(3,al),JL(4,Ze),JL(5,Hr)],xq);class b0t{}const cW=new class{constructor(){this._implementations=[]}register(e){return this._implementations.push(e),{dispose:()=>{const t=this._implementations.indexOf(e);t!==-1&&this._implementations.splice(t,1)}}}getImplementations(){return this._implementations}};Xt(Fc.ID,Fc,3);we(f0t);we(wq);we(Cq);we(g0t);we(p0t);we(m0t);we(yq);Bi(Sq);Q0.register(xq);cW.register(new b0t);var w0t=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},x6=function(n,e){return function(t,i){e(t,i,n)}},xk,h_;let KD=(h_=class{constructor(e,t,i,s){this.textModelResolverService=t,this.languageService=i,this.languageFeaturesService=s,this.toUnhook=new ue,this.toUnhookForKeyboard=new ue,this.currentWordAtPosition=null,this.previousPromise=null,this.editor=e,this.linkDecorations=this.editor.createDecorationsCollection();const r=new tW(e);this.toUnhook.add(r),this.toUnhook.add(r.onMouseMoveOrRelevantKeyDown(([o,a])=>{this.startFindDefinitionFromMouse(o,a??void 0)})),this.toUnhook.add(r.onExecute(o=>{this.isEnabled(o)&&this.gotoDefinition(o.target.position,o.hasSideBySideModifier).catch(a=>{pt(a)}).finally(()=>{this.removeLinkDecorations()})})),this.toUnhook.add(r.onCancel(()=>{this.removeLinkDecorations(),this.currentWordAtPosition=null}))}static get(e){return e.getContribution(xk.ID)}async startFindDefinitionFromCursor(e){await this.startFindDefinition(e),this.toUnhookForKeyboard.add(this.editor.onDidChangeCursorPosition(()=>{this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear()})),this.toUnhookForKeyboard.add(this.editor.onKeyDown(t=>{t&&(this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear())}))}startFindDefinitionFromMouse(e,t){if(e.target.type===9&&this.linkDecorations.length>0)return;if(!this.editor.hasModel()||!this.isEnabled(e,t)){this.currentWordAtPosition=null,this.removeLinkDecorations();return}const i=e.target.position;this.startFindDefinition(i)}async startFindDefinition(e){var o;this.toUnhookForKeyboard.clear();const t=e?(o=this.editor.getModel())==null?void 0:o.getWordAtPosition(e):null;if(!t){this.currentWordAtPosition=null,this.removeLinkDecorations();return}if(this.currentWordAtPosition&&this.currentWordAtPosition.startColumn===t.startColumn&&this.currentWordAtPosition.endColumn===t.endColumn&&this.currentWordAtPosition.word===t.word)return;this.currentWordAtPosition=t;const i=new cxe(this.editor,15);this.previousPromise&&(this.previousPromise.cancel(),this.previousPromise=null),this.previousPromise=Ds(a=>this.findDefinition(e,a));let s;try{s=await this.previousPromise}catch(a){pt(a);return}if(!s||!s.length||!i.validate(this.editor)){this.removeLinkDecorations();return}const r=s[0].originSelectionRange?M.lift(s[0].originSelectionRange):new M(e.lineNumber,t.startColumn,e.lineNumber,t.endColumn);if(s.length>1){let a=r;for(const{originSelectionRange:l}of s)l&&(a=M.plusRange(a,l));this.addDecoration(a,new Rr().appendText(v("multipleResults","Click to show {0} definitions.",s.length)))}else{const a=s[0];if(!a.uri)return;this.textModelResolverService.createModelReference(a.uri).then(l=>{if(!l.object||!l.object.textEditorModel){l.dispose();return}const{object:{textEditorModel:c}}=l,{startLineNumber:d}=a.range;if(d<1||d>c.getLineCount()){l.dispose();return}const u=this.getPreviewValue(c,d,a),h=this.languageService.guessLanguageIdByFilepathOrFirstLine(c.uri);this.addDecoration(r,u?new Rr().appendCodeblock(h||"",u):void 0),l.dispose()})}}getPreviewValue(e,t,i){let s=i.range;return s.endLineNumber-s.startLineNumber>=xk.MAX_SOURCE_PREVIEW_LINES&&(s=this.getPreviewRangeBasedOnIndentation(e,t)),this.stripIndentationFromPreviewRange(e,t,s)}stripIndentationFromPreviewRange(e,t,i){let r=e.getLineFirstNonWhitespaceColumn(t);for(let a=t+1;a<i.endLineNumber;a++){const l=e.getLineFirstNonWhitespaceColumn(a);r=Math.min(r,l)}return e.getValueInRange(i).replace(new RegExp(`^\\s{${r-1}}`,"gm"),"").trim()}getPreviewRangeBasedOnIndentation(e,t){const i=e.getLineFirstNonWhitespaceColumn(t),s=Math.min(e.getLineCount(),t+xk.MAX_SOURCE_PREVIEW_LINES);let r=t+1;for(;r<s;r++){const o=e.getLineFirstNonWhitespaceColumn(r);if(i===o)break}return new M(t,1,r+1,1)}addDecoration(e,t){const i={range:e,options:{description:"goto-definition-link",inlineClassName:"goto-definition-link",hoverMessage:t}};this.linkDecorations.set([i])}removeLinkDecorations(){this.linkDecorations.clear()}isEnabled(e,t){var i;return this.editor.hasModel()&&e.isLeftClick&&e.isNoneOrSingleMouseDown&&e.target.type===6&&!(((i=e.target.detail.injectedText)==null?void 0:i.options)instanceof B_)&&(e.hasTriggerModifier||(t?t.keyCodeIsTriggerKey:!1))&&this.languageFeaturesService.definitionProvider.has(this.editor.getModel())}findDefinition(e,t){const i=this.editor.getModel();return i?hT(this.languageFeaturesService.definitionProvider,i,e,!1,t):Promise.resolve(null)}gotoDefinition(e,t){return this.editor.setPosition(e),this.editor.invokeWithinContext(i=>{const s=!t&&this.editor.getOption(89)&&!this.isInPeekEditor(i);return new gT({openToSide:t,openInPeek:s,muteMessage:!0},{title:{value:"",original:""},id:"",precondition:void 0}).run(i)})}isInPeekEditor(e){const t=e.get(at);return ga.inPeekEditor.getValue(t)}dispose(){this.toUnhook.dispose(),this.toUnhookForKeyboard.dispose()}},xk=h_,h_.ID="editor.contrib.gotodefinitionatposition",h_.MAX_SOURCE_PREVIEW_LINES=8,h_);KD=xk=w0t([x6(1,_a),x6(2,un),x6(3,Be)],KD);Xt(KD.ID,KD,2);var mke=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},NF=function(n,e){return function(t,i){e(t,i,n)}};class uhe{constructor(e,t,i){this.marker=e,this.index=t,this.total=i}}let Lq=class{constructor(e,t,i){this._markerService=t,this._configService=i,this._onDidChange=new X,this.onDidChange=this._onDidChange.event,this._dispoables=new ue,this._markers=[],this._nextIdx=-1,Xe.isUri(e)?this._resourceFilter=a=>a.toString()===e.toString():e&&(this._resourceFilter=e);const s=this._configService.getValue("problems.sortOrder"),r=(a,l)=>{let c=PI(a.resource.toString(),l.resource.toString());return c===0&&(s==="position"?c=M.compareRangesUsingStarts(a,l)||Nn.compare(a.severity,l.severity):c=Nn.compare(a.severity,l.severity)||M.compareRangesUsingStarts(a,l)),c},o=()=>{this._markers=this._markerService.read({resource:Xe.isUri(e)?e:void 0,severities:Nn.Error|Nn.Warning|Nn.Info}),typeof e=="function"&&(this._markers=this._markers.filter(a=>this._resourceFilter(a.resource))),this._markers.sort(r)};o(),this._dispoables.add(t.onMarkerChanged(a=>{(!this._resourceFilter||a.some(l=>this._resourceFilter(l)))&&(o(),this._nextIdx=-1,this._onDidChange.fire())}))}dispose(){this._dispoables.dispose(),this._onDidChange.dispose()}matches(e){return!this._resourceFilter&&!e?!0:!this._resourceFilter||!e?!1:this._resourceFilter(e)}get selected(){const e=this._markers[this._nextIdx];return e&&new uhe(e,this._nextIdx+1,this._markers.length)}_initIdx(e,t,i){let s=!1,r=this._markers.findIndex(o=>o.resource.toString()===e.uri.toString());r<0&&(r=kI(this._markers,{resource:e.uri},(o,a)=>PI(o.resource.toString(),a.resource.toString())),r<0&&(r=~r));for(let o=r;o<this._markers.length;o++){let a=M.lift(this._markers[o]);if(a.isEmpty()){const l=e.getWordAtPosition(a.getStartPosition());l&&(a=new M(a.startLineNumber,l.startColumn,a.startLineNumber,l.endColumn))}if(t&&(a.containsPosition(t)||t.isBeforeOrEqual(a.getStartPosition()))){this._nextIdx=o,s=!0;break}if(this._markers[o].resource.toString()!==e.uri.toString())break}s||(this._nextIdx=i?0:this._markers.length-1),this._nextIdx<0&&(this._nextIdx=this._markers.length-1)}resetIndex(){this._nextIdx=-1}move(e,t,i){if(this._markers.length===0)return!1;const s=this._nextIdx;return this._nextIdx===-1?this._initIdx(t,i,e):e?this._nextIdx=(this._nextIdx+1)%this._markers.length:e||(this._nextIdx=(this._nextIdx-1+this._markers.length)%this._markers.length),s!==this._nextIdx}find(e,t){let i=this._markers.findIndex(s=>s.resource.toString()===e.toString());if(!(i<0)){for(;i<this._markers.length;i++)if(M.containsPosition(this._markers[i],t))return new uhe(this._markers[i],i+1,this._markers.length)}}};Lq=mke([NF(1,Cf),NF(2,Tt)],Lq);const _ke=Wt("IMarkerNavigationService");let kq=class{constructor(e,t){this._markerService=e,this._configService=t,this._provider=new xo}getMarkerList(e){for(const t of this._provider){const i=t.getMarkerList(e);if(i)return i}return new Lq(e,this._markerService,this._configService)}};kq=mke([NF(0,Cf),NF(1,Tt)],kq);jt(_ke,kq,1);var Eq;(function(n){function e(t){switch(t){case Un.Ignore:return"severity-ignore "+ot.asClassName(ye.info);case Un.Info:return ot.asClassName(ye.info);case Un.Warning:return ot.asClassName(ye.warning);case Un.Error:return ot.asClassName(ye.error);default:return""}}n.className=e})(Eq||(Eq={}));var C0t=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},VC=function(n,e){return function(t,i){e(t,i,n)}},Iq;class y0t{constructor(e,t,i,s,r){this._openerService=s,this._labelService=r,this._lines=0,this._longestLineLength=0,this._relatedDiagnostics=new WeakMap,this._disposables=new ue,this._editor=t;const o=document.createElement("div");o.className="descriptioncontainer",this._messageBlock=document.createElement("div"),this._messageBlock.classList.add("message"),this._messageBlock.setAttribute("aria-live","assertive"),this._messageBlock.setAttribute("role","alert"),o.appendChild(this._messageBlock),this._relatedBlock=document.createElement("div"),o.appendChild(this._relatedBlock),this._disposables.add(Cn(this._relatedBlock,"click",a=>{a.preventDefault();const l=this._relatedDiagnostics.get(a.target);l&&i(l)})),this._scrollable=new l1e(o,{horizontal:1,vertical:1,useShadows:!1,horizontalScrollbarSize:6,verticalScrollbarSize:6}),e.appendChild(this._scrollable.getDomNode()),this._disposables.add(this._scrollable.onScroll(a=>{o.style.left=`-${a.scrollLeft}px`,o.style.top=`-${a.scrollTop}px`})),this._disposables.add(this._scrollable)}dispose(){Ti(this._disposables)}update(e){const{source:t,message:i,relatedInformation:s,code:r}=e;let o=((t==null?void 0:t.length)||0)+2;r&&(typeof r=="string"?o+=r.length:o+=r.value.length);const a=mf(i);this._lines=a.length,this._longestLineLength=0;for(const h of a)this._longestLineLength=Math.max(h.length+o,this._longestLineLength);nr(this._messageBlock),this._messageBlock.setAttribute("aria-label",this.getAriaLabel(e)),this._editor.applyFontInfo(this._messageBlock);let l=this._messageBlock;for(const h of a)l=document.createElement("div"),l.innerText=h,h===""&&(l.style.height=this._messageBlock.style.lineHeight),this._messageBlock.appendChild(l);if(t||r){const h=document.createElement("span");if(h.classList.add("details"),l.appendChild(h),t){const f=document.createElement("span");f.innerText=t,f.classList.add("source"),h.appendChild(f)}if(r)if(typeof r=="string"){const f=document.createElement("span");f.innerText=`(${r})`,f.classList.add("code"),h.appendChild(f)}else{this._codeLink=xe("a.code-link"),this._codeLink.setAttribute("href",`${r.target.toString()}`),this._codeLink.onclick=g=>{this._openerService.open(r.target,{allowCommands:!0}),g.preventDefault(),g.stopPropagation()};const f=_e(this._codeLink,xe("span"));f.innerText=r.value,h.appendChild(this._codeLink)}}if(nr(this._relatedBlock),this._editor.applyFontInfo(this._relatedBlock),ao(s)){const h=this._relatedBlock.appendChild(document.createElement("div"));h.style.paddingTop=`${Math.floor(this._editor.getOption(67)*.66)}px`,this._lines+=1;for(const f of s){const g=document.createElement("div"),p=document.createElement("a");p.classList.add("filename"),p.innerText=`${this._labelService.getUriBasenameLabel(f.resource)}(${f.startLineNumber}, ${f.startColumn}): `,p.title=this._labelService.getUriLabel(f.resource),this._relatedDiagnostics.set(p,f);const _=document.createElement("span");_.innerText=f.message,g.appendChild(p),g.appendChild(_),this._lines+=1,h.appendChild(g)}}const c=this._editor.getOption(50),d=Math.ceil(c.typicalFullwidthCharacterWidth*this._longestLineLength*.75),u=c.lineHeight*this._lines;this._scrollable.setScrollDimensions({scrollWidth:d,scrollHeight:u})}layout(e,t){this._scrollable.getDomNode().style.height=`${e}px`,this._scrollable.getDomNode().style.width=`${t}px`,this._scrollable.setScrollDimensions({width:t,height:e})}getHeightInLines(){return Math.min(17,this._lines)}getAriaLabel(e){let t="";switch(e.severity){case Nn.Error:t=v("Error","Error");break;case Nn.Warning:t=v("Warning","Warning");break;case Nn.Info:t=v("Info","Info");break;case Nn.Hint:t=v("Hint","Hint");break}let i=v("marker aria","{0} at {1}. ",t,e.startLineNumber+":"+e.startColumn);const s=this._editor.getModel();return s&&e.startLineNumber<=s.getLineCount()&&e.startLineNumber>=1&&(i=`${s.getLineContent(e.startLineNumber)}, ${i}`),i}}var Aw;let qD=(Aw=class extends aF{constructor(e,t,i,s,r,o,a){super(e,{showArrow:!0,showFrame:!0,isAccessible:!0,frameWidth:1},r),this._themeService=t,this._openerService=i,this._menuService=s,this._contextKeyService=o,this._labelService=a,this._callOnDispose=new ue,this._onDidSelectRelatedInformation=new X,this.onDidSelectRelatedInformation=this._onDidSelectRelatedInformation.event,this._severity=Nn.Warning,this._backgroundColor=ge.white,this._applyTheme(t.getColorTheme()),this._callOnDispose.add(t.onDidColorThemeChange(this._applyTheme.bind(this))),this.create()}_applyTheme(e){this._backgroundColor=e.getColor(k0t);let t=Dq,i=S0t;this._severity===Nn.Warning?(t=Z2,i=x0t):this._severity===Nn.Info&&(t=Nq,i=L0t);const s=e.getColor(t),r=e.getColor(i);this.style({arrowColor:s,frameColor:s,headerBackgroundColor:r,primaryHeadingColor:e.getColor(PLe),secondaryHeadingColor:e.getColor(OLe)})}_applyStyles(){this._parentContainer&&(this._parentContainer.style.backgroundColor=this._backgroundColor?this._backgroundColor.toString():""),super._applyStyles()}dispose(){this._callOnDispose.dispose(),super.dispose()}_fillHead(e){super._fillHead(e),this._disposables.add(this._actionbarWidget.actionRunner.onWillRun(s=>this.editor.focus()));const t=[],i=this._menuService.getMenuActions(Iq.TitleMenu,this._contextKeyService);LB(i,t),this._actionbarWidget.push(t,{label:!1,icon:!0,index:0})}_fillTitleIcon(e){this._icon=_e(e,xe(""))}_fillBody(e){this._parentContainer=e,e.classList.add("marker-widget"),this._parentContainer.tabIndex=0,this._parentContainer.setAttribute("role","tooltip"),this._container=document.createElement("div"),e.appendChild(this._container),this._message=new y0t(this._container,this.editor,t=>this._onDidSelectRelatedInformation.fire(t),this._openerService,this._labelService),this._disposables.add(this._message)}show(){throw new Error("call showAtMarker")}showAtMarker(e,t,i){this._container.classList.remove("stale"),this._message.update(e),this._severity=e.severity,this._applyTheme(this._themeService.getColorTheme());const s=M.lift(e),r=this.editor.getPosition(),o=r&&s.containsPosition(r)?r:s.getStartPosition();super.show(o,this.computeRequiredHeight());const a=this.editor.getModel();if(a){const l=i>1?v("problems","{0} of {1} problems",t,i):v("change","{0} of {1} problem",t,i);this.setTitle(Pc(a.uri),l)}this._icon.className=`codicon ${Eq.className(Nn.toSeverity(this._severity))}`,this.editor.revealPositionNearTop(o,0),this.editor.focus()}updateMarker(e){this._container.classList.remove("stale"),this._message.update(e)}showStale(){this._container.classList.add("stale"),this._relayout()}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._heightInPixel=e,this._message.layout(e,t),this._container.style.height=`${e}px`}_onWidth(e){this._message.layout(this._heightInPixel,e)}_relayout(){super._relayout(this.computeRequiredHeight())}computeRequiredHeight(){return 3+this._message.getHeightInLines()}},Iq=Aw,Aw.TitleMenu=new ze("gotoErrorTitleMenu"),Aw);qD=Iq=C0t([VC(1,ws),VC(2,ba),VC(3,Yl),VC(4,Ze),VC(5,at),VC(6,VS)],qD);const hhe=KI(aB,pXe),fhe=KI(Jg,qI),ghe=KI(af,GI),Dq=B("editorMarkerNavigationError.background",{dark:hhe,light:hhe,hcDark:Yt,hcLight:Yt},v("editorMarkerNavigationError","Editor marker navigation widget error color.")),S0t=B("editorMarkerNavigationError.headerBackground",{dark:kt(Dq,.1),light:kt(Dq,.1),hcDark:null,hcLight:null},v("editorMarkerNavigationErrorHeaderBackground","Editor marker navigation widget error heading background.")),Z2=B("editorMarkerNavigationWarning.background",{dark:fhe,light:fhe,hcDark:Yt,hcLight:Yt},v("editorMarkerNavigationWarning","Editor marker navigation widget warning color.")),x0t=B("editorMarkerNavigationWarning.headerBackground",{dark:kt(Z2,.1),light:kt(Z2,.1),hcDark:"#0C141F",hcLight:kt(Z2,.2)},v("editorMarkerNavigationWarningBackground","Editor marker navigation widget warning heading background.")),Nq=B("editorMarkerNavigationInfo.background",{dark:ghe,light:ghe,hcDark:Yt,hcLight:Yt},v("editorMarkerNavigationInfo","Editor marker navigation widget info color.")),L0t=B("editorMarkerNavigationInfo.headerBackground",{dark:kt(Nq,.1),light:kt(Nq,.1),hcDark:null,hcLight:null},v("editorMarkerNavigationInfoHeaderBackground","Editor marker navigation widget info heading background.")),k0t=B("editorMarkerNavigation.background",Ad,v("editorMarkerNavigationBackground","Editor marker navigation widget background."));var E0t=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},FA=function(n,e){return function(t,i){e(t,i,n)}},Lk,Mw;let T0=(Mw=class{static get(e){return e.getContribution(Lk.ID)}constructor(e,t,i,s,r){this._markerNavigationService=t,this._contextKeyService=i,this._editorService=s,this._instantiationService=r,this._sessionDispoables=new ue,this._editor=e,this._widgetVisible=vke.bindTo(this._contextKeyService)}dispose(){this._cleanUp(),this._sessionDispoables.dispose()}_cleanUp(){this._widgetVisible.reset(),this._sessionDispoables.clear(),this._widget=void 0,this._model=void 0}_getOrCreateModel(e){if(this._model&&this._model.matches(e))return this._model;let t=!1;return this._model&&(t=!0,this._cleanUp()),this._model=this._markerNavigationService.getMarkerList(e),t&&this._model.move(!0,this._editor.getModel(),this._editor.getPosition()),this._widget=this._instantiationService.createInstance(qD,this._editor),this._widget.onDidClose(()=>this.close(),this,this._sessionDispoables),this._widgetVisible.set(!0),this._sessionDispoables.add(this._model),this._sessionDispoables.add(this._widget),this._sessionDispoables.add(this._editor.onDidChangeCursorPosition(i=>{var s,r,o;(!((s=this._model)!=null&&s.selected)||!M.containsPosition((r=this._model)==null?void 0:r.selected.marker,i.position))&&((o=this._model)==null||o.resetIndex())})),this._sessionDispoables.add(this._model.onDidChange(()=>{if(!this._widget||!this._widget.position||!this._model)return;const i=this._model.find(this._editor.getModel().uri,this._widget.position);i?this._widget.updateMarker(i.marker):this._widget.showStale()})),this._sessionDispoables.add(this._widget.onDidSelectRelatedInformation(i=>{this._editorService.openCodeEditor({resource:i.resource,options:{pinned:!0,revealIfOpened:!0,selection:M.lift(i).collapseToStart()}},this._editor),this.close(!1)})),this._sessionDispoables.add(this._editor.onDidChangeModel(()=>this._cleanUp())),this._model}close(e=!0){this._cleanUp(),e&&this._editor.focus()}showAtMarker(e){if(this._editor.hasModel()){const t=this._getOrCreateModel(this._editor.getModel().uri);t.resetIndex(),t.move(!0,this._editor.getModel(),new Y(e.startLineNumber,e.startColumn)),t.selected&&this._widget.showAtMarker(t.selected.marker,t.selected.index,t.selected.total)}}async nagivate(e,t){var i,s;if(this._editor.hasModel()){const r=this._getOrCreateModel(t?void 0:this._editor.getModel().uri);if(r.move(e,this._editor.getModel(),this._editor.getPosition()),!r.selected)return;if(r.selected.marker.resource.toString()!==this._editor.getModel().uri.toString()){this._cleanUp();const o=await this._editorService.openCodeEditor({resource:r.selected.marker.resource,options:{pinned:!1,revealIfOpened:!0,selectionRevealType:2,selection:r.selected.marker}},this._editor);o&&((i=Lk.get(o))==null||i.close(),(s=Lk.get(o))==null||s.nagivate(e,t))}else this._widget.showAtMarker(r.selected.marker,r.selected.index,r.selected.total)}}},Lk=Mw,Mw.ID="editor.contrib.markerController",Mw);T0=Lk=E0t([FA(1,_ke),FA(2,at),FA(3,ri),FA(4,Ze)],T0);class dW extends Oe{constructor(e,t,i){super(i),this._next=e,this._multiFile=t}async run(e,t){var i;t.hasModel()&&((i=T0.get(t))==null||i.nagivate(this._next,this._multiFile))}}const _b=class _b extends dW{constructor(){super(!0,!1,{id:_b.ID,label:_b.LABEL,alias:"Go to Next Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:F.focus,primary:578,weight:100},menuOpts:{menuId:qD.TitleMenu,title:_b.LABEL,icon:Xi("marker-navigation-next",ye.arrowDown,v("nextMarkerIcon","Icon for goto next marker.")),group:"navigation",order:1}})}};_b.ID="editor.action.marker.next",_b.LABEL=v("markerAction.next.label","Go to Next Problem (Error, Warning, Info)");let TF=_b;const vb=class vb extends dW{constructor(){super(!1,!1,{id:vb.ID,label:vb.LABEL,alias:"Go to Previous Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:F.focus,primary:1602,weight:100},menuOpts:{menuId:qD.TitleMenu,title:vb.LABEL,icon:Xi("marker-navigation-previous",ye.arrowUp,v("previousMarkerIcon","Icon for goto previous marker.")),group:"navigation",order:2}})}};vb.ID="editor.action.marker.prev",vb.LABEL=v("markerAction.previous.label","Go to Previous Problem (Error, Warning, Info)");let Tq=vb;class I0t extends dW{constructor(){super(!0,!0,{id:"editor.action.marker.nextInFiles",label:v("markerAction.nextInFiles.label","Go to Next Problem in Files (Error, Warning, Info)"),alias:"Go to Next Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:F.focus,primary:66,weight:100},menuOpts:{menuId:ze.MenubarGoMenu,title:v({key:"miGotoNextProblem",comment:["&& denotes a mnemonic"]},"Next &&Problem"),group:"6_problem_nav",order:1}})}}class D0t extends dW{constructor(){super(!1,!0,{id:"editor.action.marker.prevInFiles",label:v("markerAction.previousInFiles.label","Go to Previous Problem in Files (Error, Warning, Info)"),alias:"Go to Previous Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:F.focus,primary:1090,weight:100},menuOpts:{menuId:ze.MenubarGoMenu,title:v({key:"miGotoPreviousProblem",comment:["&& denotes a mnemonic"]},"Previous &&Problem"),group:"6_problem_nav",order:2}})}}Xt(T0.ID,T0,4);we(TF);we(Tq);we(I0t);we(D0t);const vke=new Re("markersNavigationVisible",!1),N0t=vs.bindToContribution(T0.get);Te(new N0t({id:"closeMarkersNavigation",precondition:vke,handler:n=>n.close(),kbOpts:{weight:150,kbExpr:F.focus,primary:9,secondary:[1033]}}));var iu;(function(n){n.NoAutoFocus="noAutoFocus",n.FocusIfVisible="focusIfVisible",n.AutoFocusImmediately="autoFocusImmediately"})(iu||(iu={}));class T0t extends Oe{constructor(){super({id:yLe,label:v({key:"showOrFocusHover",comment:["Label for action that will trigger the showing/focusing of a hover in the editor.","If the hover is not visible, it will show the hover.","This allows for users to show the hover without using the mouse."]},"Show or Focus Hover"),metadata:{description:lt("showOrFocusHoverDescription","Show or focus the editor hover which shows documentation, references, and other content for a symbol at the current cursor position."),args:[{name:"args",schema:{type:"object",properties:{focus:{description:"Controls if and when the hover should take focus upon being triggered by this action.",enum:[iu.NoAutoFocus,iu.FocusIfVisible,iu.AutoFocusImmediately],enumDescriptions:[v("showOrFocusHover.focus.noAutoFocus","The hover will not automatically take focus."),v("showOrFocusHover.focus.focusIfVisible","The hover will take focus only if it is already visible."),v("showOrFocusHover.focus.autoFocusImmediately","The hover will automatically take focus when it appears.")],default:iu.FocusIfVisible}}}}]},alias:"Show or Focus Hover",precondition:void 0,kbOpts:{kbExpr:F.editorTextFocus,primary:as(2089,2087),weight:100}})}run(e,t,i){if(!t.hasModel())return;const s=uo.get(t);if(!s)return;const r=i==null?void 0:i.focus;let o=iu.FocusIfVisible;Object.values(iu).includes(r)?o=r:typeof r=="boolean"&&r&&(o=iu.AutoFocusImmediately);const a=c=>{const d=t.getPosition(),u=new M(d.lineNumber,d.column,d.lineNumber,d.column);s.showContentHover(u,1,1,c)},l=t.getOption(2)===2;s.isHoverVisible?o!==iu.NoAutoFocus?s.focus():a(l):a(l||o===iu.AutoFocusImmediately)}}class R0t extends Oe{constructor(){super({id:Gmt,label:v({key:"showDefinitionPreviewHover",comment:["Label for action that will trigger the showing of definition preview hover in the editor.","This allows for users to show the definition preview hover without using the mouse."]},"Show Definition Preview Hover"),alias:"Show Definition Preview Hover",precondition:void 0,metadata:{description:lt("showDefinitionPreviewHoverDescription","Show the definition preview hover in the editor.")}})}run(e,t){const i=uo.get(t);if(!i)return;const s=t.getPosition();if(!s)return;const r=new M(s.lineNumber,s.column,s.lineNumber,s.column),o=KD.get(t);if(!o)return;o.startFindDefinitionFromCursor(s).then(()=>{i.showContentHover(r,1,1,!0)})}}class A0t extends Oe{constructor(){super({id:Ymt,label:v({key:"scrollUpHover",comment:["Action that allows to scroll up in the hover widget with the up arrow when the hover widget is focused."]},"Scroll Up Hover"),alias:"Scroll Up Hover",precondition:F.hoverFocused,kbOpts:{kbExpr:F.hoverFocused,primary:16,weight:100},metadata:{description:lt("scrollUpHoverDescription","Scroll up the editor hover.")}})}run(e,t){const i=uo.get(t);i&&i.scrollUp()}}class M0t extends Oe{constructor(){super({id:Zmt,label:v({key:"scrollDownHover",comment:["Action that allows to scroll down in the hover widget with the up arrow when the hover widget is focused."]},"Scroll Down Hover"),alias:"Scroll Down Hover",precondition:F.hoverFocused,kbOpts:{kbExpr:F.hoverFocused,primary:18,weight:100},metadata:{description:lt("scrollDownHoverDescription","Scroll down the editor hover.")}})}run(e,t){const i=uo.get(t);i&&i.scrollDown()}}class P0t extends Oe{constructor(){super({id:Xmt,label:v({key:"scrollLeftHover",comment:["Action that allows to scroll left in the hover widget with the left arrow when the hover widget is focused."]},"Scroll Left Hover"),alias:"Scroll Left Hover",precondition:F.hoverFocused,kbOpts:{kbExpr:F.hoverFocused,primary:15,weight:100},metadata:{description:lt("scrollLeftHoverDescription","Scroll left the editor hover.")}})}run(e,t){const i=uo.get(t);i&&i.scrollLeft()}}class O0t extends Oe{constructor(){super({id:Qmt,label:v({key:"scrollRightHover",comment:["Action that allows to scroll right in the hover widget with the right arrow when the hover widget is focused."]},"Scroll Right Hover"),alias:"Scroll Right Hover",precondition:F.hoverFocused,kbOpts:{kbExpr:F.hoverFocused,primary:17,weight:100},metadata:{description:lt("scrollRightHoverDescription","Scroll right the editor hover.")}})}run(e,t){const i=uo.get(t);i&&i.scrollRight()}}class F0t extends Oe{constructor(){super({id:Jmt,label:v({key:"pageUpHover",comment:["Action that allows to page up in the hover widget with the page up command when the hover widget is focused."]},"Page Up Hover"),alias:"Page Up Hover",precondition:F.hoverFocused,kbOpts:{kbExpr:F.hoverFocused,primary:11,secondary:[528],weight:100},metadata:{description:lt("pageUpHoverDescription","Page up the editor hover.")}})}run(e,t){const i=uo.get(t);i&&i.pageUp()}}class B0t extends Oe{constructor(){super({id:e_t,label:v({key:"pageDownHover",comment:["Action that allows to page down in the hover widget with the page down command when the hover widget is focused."]},"Page Down Hover"),alias:"Page Down Hover",precondition:F.hoverFocused,kbOpts:{kbExpr:F.hoverFocused,primary:12,secondary:[530],weight:100},metadata:{description:lt("pageDownHoverDescription","Page down the editor hover.")}})}run(e,t){const i=uo.get(t);i&&i.pageDown()}}class W0t extends Oe{constructor(){super({id:t_t,label:v({key:"goToTopHover",comment:["Action that allows to go to the top of the hover widget with the home command when the hover widget is focused."]},"Go To Top Hover"),alias:"Go To Bottom Hover",precondition:F.hoverFocused,kbOpts:{kbExpr:F.hoverFocused,primary:14,secondary:[2064],weight:100},metadata:{description:lt("goToTopHoverDescription","Go to the top of the editor hover.")}})}run(e,t){const i=uo.get(t);i&&i.goToTop()}}class H0t extends Oe{constructor(){super({id:i_t,label:v({key:"goToBottomHover",comment:["Action that allows to go to the bottom in the hover widget with the end command when the hover widget is focused."]},"Go To Bottom Hover"),alias:"Go To Bottom Hover",precondition:F.hoverFocused,kbOpts:{kbExpr:F.hoverFocused,primary:13,secondary:[2066],weight:100},metadata:{description:lt("goToBottomHoverDescription","Go to the bottom of the editor hover.")}})}run(e,t){const i=uo.get(t);i&&i.goToBottom()}}class V0t extends Oe{constructor(){super({id:QB,label:n_t,alias:"Increase Hover Verbosity Level",precondition:F.hoverVisible})}run(e,t,i){const s=uo.get(t);if(!s)return;const r=(i==null?void 0:i.index)!==void 0?i.index:s.focusedHoverPartIndex();s.updateHoverVerbosityLevel(Ba.Increase,r,i==null?void 0:i.focus)}}class z0t extends Oe{constructor(){super({id:JB,label:s_t,alias:"Decrease Hover Verbosity Level",precondition:F.hoverVisible})}run(e,t,i){var o;const s=uo.get(t);if(!s)return;const r=(i==null?void 0:i.index)!==void 0?i.index:s.focusedHoverPartIndex();(o=uo.get(t))==null||o.updateHoverVerbosityLevel(Ba.Decrease,r,i==null?void 0:i.focus)}}var U0t=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},L6=function(n,e){return function(t,i){e(t,i,n)}};const td=xe;class $0t{constructor(e,t,i){this.owner=e,this.range=t,this.marker=i}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}const phe={type:1,filter:{include:tn.QuickFix},triggerAction:nl.QuickFixHover};let Rq=class{constructor(e,t,i,s){this._editor=e,this._markerDecorationsService=t,this._openerService=i,this._languageFeaturesService=s,this.hoverOrdinal=1,this.recentMarkerCodeActionsInfo=void 0}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1&&!e.supportsMarkerHover)return[];const i=this._editor.getModel(),s=e.range.startLineNumber,r=i.getLineMaxColumn(s),o=[];for(const a of t){const l=a.range.startLineNumber===s?a.range.startColumn:1,c=a.range.endLineNumber===s?a.range.endColumn:r,d=this._markerDecorationsService.getMarker(i.uri,a);if(!d)continue;const u=new M(e.range.startLineNumber,l,e.range.startLineNumber,c);o.push(new $0t(this,u,d))}return o}renderHoverParts(e,t){if(!t.length)return new I0([]);const i=new ue,s=[];t.forEach(o=>{const a=this._renderMarkerHover(o);e.fragment.appendChild(a.hoverElement),s.push(a)});const r=t.length===1?t[0]:t.sort((o,a)=>Nn.compare(o.marker.severity,a.marker.severity))[0];return this.renderMarkerStatusbar(e,r,i),new I0(s)}_renderMarkerHover(e){const t=new ue,i=td("div.hover-row"),s=_e(i,td("div.marker.hover-contents")),{source:r,message:o,code:a,relatedInformation:l}=e.marker;this._editor.applyFontInfo(s);const c=_e(s,td("span"));if(c.style.whiteSpace="pre-wrap",c.innerText=o,r||a)if(a&&typeof a!="string"){const u=td("span");if(r){const p=_e(u,td("span"));p.innerText=r}const h=_e(u,td("a.code-link"));h.setAttribute("href",a.target.toString()),t.add(re(h,"click",p=>{this._openerService.open(a.target,{allowCommands:!0}),p.preventDefault(),p.stopPropagation()}));const f=_e(h,td("span"));f.innerText=a.value;const g=_e(s,u);g.style.opacity="0.6",g.style.paddingLeft="6px"}else{const u=_e(s,td("span"));u.style.opacity="0.6",u.style.paddingLeft="6px",u.innerText=r&&a?`${r}(${a})`:r||`(${a})`}if(ao(l))for(const{message:u,resource:h,startLineNumber:f,startColumn:g}of l){const p=_e(s,td("div"));p.style.marginTop="8px";const _=_e(p,td("a"));_.innerText=`${Pc(h)}(${f}, ${g}): `,_.style.cursor="pointer",t.add(re(_,"click",b=>{if(b.stopPropagation(),b.preventDefault(),this._openerService){const y={selection:{startLineNumber:f,startColumn:g}};this._openerService.open(h,{fromUserGesture:!0,editorOptions:y}).catch(pt)}}));const w=_e(p,td("span"));w.innerText=u,this._editor.applyFontInfo(w)}return{hoverPart:e,hoverElement:i,dispose:()=>t.dispose()}}renderMarkerStatusbar(e,t,i){if(t.marker.severity===Nn.Error||t.marker.severity===Nn.Warning||t.marker.severity===Nn.Info){const s=T0.get(this._editor);s&&e.statusBar.addAction({label:v("view problem","View Problem"),commandId:TF.ID,run:()=>{e.hide(),s.showAtMarker(t.marker),this._editor.focus()}})}if(!this._editor.getOption(92)){const s=e.statusBar.append(td("div"));this.recentMarkerCodeActionsInfo&&(JP.makeKey(this.recentMarkerCodeActionsInfo.marker)===JP.makeKey(t.marker)?this.recentMarkerCodeActionsInfo.hasCodeActions||(s.textContent=v("noQuickFixes","No quick fixes available")):this.recentMarkerCodeActionsInfo=void 0);const r=this.recentMarkerCodeActionsInfo&&!this.recentMarkerCodeActionsInfo.hasCodeActions?ee.None:T_(()=>s.textContent=v("checkingForQuickFixes","Checking for quick fixes..."),200,i);s.textContent||(s.textContent="");const o=this.getCodeActions(t.marker);i.add(Ye(()=>o.cancel())),o.then(a=>{if(r.dispose(),this.recentMarkerCodeActionsInfo={marker:t.marker,hasCodeActions:a.validActions.length>0},!this.recentMarkerCodeActionsInfo.hasCodeActions){a.dispose(),s.textContent=v("noQuickFixes","No quick fixes available");return}s.style.display="none";let l=!1;i.add(Ye(()=>{l||a.dispose()})),e.statusBar.addAction({label:v("quick fixes","Quick Fix..."),commandId:VJ,run:c=>{l=!0;const d=ex.get(this._editor),u=Fn(c);e.hide(),d==null||d.showCodeActions(phe,a,{x:u.left,y:u.top,width:u.width,height:u.height})}})},pt)}}getCodeActions(e){return Ds(t=>O1(this._languageFeaturesService.codeActionProvider,this._editor.getModel(),new M(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),phe,Cu.None,t))}};Rq=U0t([L6(1,hQ),L6(2,ba),L6(3,Be)],Rq);class j0t{get lineNumber(){return this._lineNumber}set lineNumber(e){this._lineNumber=e}get lane(){return this._laneOrLine}set lane(e){this._laneOrLine=e}constructor(e){this._editor=e,this._lineNumber=-1,this._laneOrLine=Td.Center}computeSync(){var r;const e=o=>({value:o}),t=this._editor.getLineDecorations(this._lineNumber),i=[],s=this._laneOrLine==="lineNo";if(!t)return i;for(const o of t){const a=((r=o.options.glyphMargin)==null?void 0:r.position)??Td.Center;if(!s&&a!==this._laneOrLine)continue;const l=s?o.options.lineNumberHoverMessage:o.options.glyphMarginHoverMessage;!l||WS(l)||i.push(...UZ(l).map(e))}return i}}var K0t=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},mhe=function(n,e){return function(t,i){e(t,i,n)}},Aq;const _he=xe;var Pw;let Mq=(Pw=class extends ee{constructor(e,t,i){super(),this._renderDisposeables=this._register(new ue),this._editor=e,this._isVisible=!1,this._messages=[],this._hover=this._register(new $X),this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._markdownRenderer=this._register(new ep({editor:this._editor},t,i)),this._computer=new j0t(this._editor),this._hoverOperation=this._register(new kLe(this._editor,this._computer)),this._register(this._hoverOperation.onResult(s=>{this._withResult(s.value)})),this._register(this._editor.onDidChangeModelDecorations(()=>this._onModelDecorationsChanged())),this._register(this._editor.onDidChangeConfiguration(s=>{s.hasChanged(50)&&this._updateFont()})),this._register(Cn(this._hover.containerDomNode,"mouseleave",s=>{this._onMouseLeave(s)})),this._editor.addOverlayWidget(this)}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return Aq.ID}getDomNode(){return this._hover.containerDomNode}getPosition(){return null}_updateFont(){Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach(t=>this._editor.applyFontInfo(t))}_onModelDecorationsChanged(){this._isVisible&&(this._hoverOperation.cancel(),this._hoverOperation.start(0))}showsOrWillShow(e){const t=e.target;return t.type===2&&t.detail.glyphMarginLane?(this._startShowingAt(t.position.lineNumber,t.detail.glyphMarginLane),!0):t.type===3?(this._startShowingAt(t.position.lineNumber,"lineNo"),!0):!1}_startShowingAt(e,t){this._computer.lineNumber===e&&this._computer.lane===t||(this._hoverOperation.cancel(),this.hide(),this._computer.lineNumber=e,this._computer.lane=t,this._hoverOperation.start(0))}hide(){this._computer.lineNumber=-1,this._hoverOperation.cancel(),this._isVisible&&(this._isVisible=!1,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible))}_withResult(e){this._messages=e,this._messages.length>0?this._renderMessages(this._computer.lineNumber,this._messages):this.hide()}_renderMessages(e,t){this._renderDisposeables.clear();const i=document.createDocumentFragment();for(const s of t){const r=_he("div.hover-row.markdown-hover"),o=_e(r,_he("div.hover-contents")),a=this._renderDisposeables.add(this._markdownRenderer.render(s.value));o.appendChild(a.element),i.appendChild(r)}this._updateContents(i),this._showAt(e)}_updateContents(e){this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(e),this._updateFont()}_showAt(e){this._isVisible||(this._isVisible=!0,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible));const t=this._editor.getLayoutInfo(),i=this._editor.getTopForLineNumber(e),s=this._editor.getScrollTop(),r=this._editor.getOption(67),o=this._hover.containerDomNode.clientHeight,a=i-s-(o-r)/2,l=t.glyphMarginLeft+t.glyphMarginWidth+(this._computer.lane==="lineNo"?t.lineNumbersWidth:0);this._hover.containerDomNode.style.left=`${l}px`,this._hover.containerDomNode.style.top=`${Math.max(Math.round(a),0)}px`}_onMouseLeave(e){const t=this._editor.getDomNode();(!t||!eW(t,e.x,e.y))&&this.hide()}},Aq=Pw,Pw.ID="editor.contrib.modesGlyphHoverWidget",Pw);Mq=Aq=K0t([mhe(1,un),mhe(2,ba)],Mq);var q0t=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},G0t=function(n,e){return function(t,i){e(t,i,n)}},aS;let RF=(aS=class extends ee{constructor(e,t){super(),this._editor=e,this._instantiationService=t,this.shouldKeepOpenOnEditorMouseMoveOrLeave=!1,this._listenersStore=new ue,this._hoverState={mouseDown:!1},this._reactToEditorMouseMoveRunner=this._register(new yi(()=>this._reactToEditorMouseMove(this._mouseMoveEvent),0)),this._hookListeners(),this._register(this._editor.onDidChangeConfiguration(i=>{i.hasChanged(60)&&(this._unhookListeners(),this._hookListeners())}))}_hookListeners(){const e=this._editor.getOption(60);this._hoverSettings={enabled:e.enabled,sticky:e.sticky,hidingDelay:e.hidingDelay},e.enabled?(this._listenersStore.add(this._editor.onMouseDown(t=>this._onEditorMouseDown(t))),this._listenersStore.add(this._editor.onMouseUp(()=>this._onEditorMouseUp())),this._listenersStore.add(this._editor.onMouseMove(t=>this._onEditorMouseMove(t))),this._listenersStore.add(this._editor.onKeyDown(t=>this._onKeyDown(t)))):(this._listenersStore.add(this._editor.onMouseMove(t=>this._onEditorMouseMove(t))),this._listenersStore.add(this._editor.onKeyDown(t=>this._onKeyDown(t)))),this._listenersStore.add(this._editor.onMouseLeave(t=>this._onEditorMouseLeave(t))),this._listenersStore.add(this._editor.onDidChangeModel(()=>{this._cancelScheduler(),this._hideWidgets()})),this._listenersStore.add(this._editor.onDidChangeModelContent(()=>this._cancelScheduler())),this._listenersStore.add(this._editor.onDidScrollChange(t=>this._onEditorScrollChanged(t)))}_unhookListeners(){this._listenersStore.clear()}_cancelScheduler(){this._mouseMoveEvent=void 0,this._reactToEditorMouseMoveRunner.cancel()}_onEditorScrollChanged(e){(e.scrollTopChanged||e.scrollLeftChanged)&&this._hideWidgets()}_onEditorMouseDown(e){this._hoverState.mouseDown=!0,!this._isMouseOnMarginHoverWidget(e)&&this._hideWidgets()}_isMouseOnMarginHoverWidget(e){var i;const t=(i=this._glyphWidget)==null?void 0:i.getDomNode();return t?eW(t,e.event.posx,e.event.posy):!1}_onEditorMouseUp(){this._hoverState.mouseDown=!1}_onEditorMouseLeave(e){this.shouldKeepOpenOnEditorMouseMoveOrLeave||(this._cancelScheduler(),this._isMouseOnMarginHoverWidget(e))||this._hideWidgets()}_shouldNotRecomputeCurrentHoverWidget(e){const t=this._hoverSettings.sticky,i=this._isMouseOnMarginHoverWidget(e);return t&&i}_onEditorMouseMove(e){if(this.shouldKeepOpenOnEditorMouseMoveOrLeave)return;if(this._mouseMoveEvent=e,this._shouldNotRecomputeCurrentHoverWidget(e)){this._reactToEditorMouseMoveRunner.cancel();return}this._reactToEditorMouseMove(e)}_reactToEditorMouseMove(e){!e||this._tryShowHoverWidget(e)||this._hideWidgets()}_tryShowHoverWidget(e){return this._getOrCreateGlyphWidget().showsOrWillShow(e)}_onKeyDown(e){this._editor.hasModel()&&(e.keyCode===5||e.keyCode===6||e.keyCode===57||e.keyCode===4||this._hideWidgets())}_hideWidgets(){var e;(e=this._glyphWidget)==null||e.hide()}_getOrCreateGlyphWidget(){return this._glyphWidget||(this._glyphWidget=this._instantiationService.createInstance(Mq,this._editor)),this._glyphWidget}dispose(){var e;super.dispose(),this._unhookListeners(),this._listenersStore.dispose(),(e=this._glyphWidget)==null||e.dispose()}},aS.ID="editor.contrib.marginHover",aS);RF=q0t([G0t(1,Ze)],RF);class Y0t{}class Z0t{}class X0t{}Xt(uo.ID,uo,2);Xt(RF.ID,RF,2);we(T0t);we(R0t);we(A0t);we(M0t);we(P0t);we(O0t);we(F0t);we(B0t);we(W0t);we(H0t);we(V0t);we(z0t);Q0.register(VD);Q0.register(Rq);zc((n,e)=>{const t=n.getColor(YCe);t&&(e.addRule(`.monaco-editor .monaco-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${t.transparent(.5)}; }`),e.addRule(`.monaco-editor .monaco-hover hr { border-top: 1px solid ${t.transparent(.5)}; }`),e.addRule(`.monaco-editor .monaco-hover hr { border-bottom: 0px solid ${t.transparent(.5)}; }`))});cW.register(new Y0t);cW.register(new Z0t);cW.register(new X0t);function Aa(n,e){let t=0;for(let i=0;i<n.length;i++)n.charAt(i)==="	"?t+=e:t++;return t}function kE(n,e,t){n=n<0?0:n;let i="";if(!t){const s=Math.floor(n/e);n=n%e;for(let r=0;r<s;r++)i+="	"}for(let s=0;s<n;s++)i+=" ";return i}function bke(n,e,t,i){if(n.getLineCount()===1&&n.getLineMaxColumn(1)===1)return[];const s=e.getLanguageConfiguration(n.getLanguageId()).indentRulesSupport;if(!s)return[];const r=new QQ(n,s,e);for(i=Math.min(i,n.getLineCount());t<=i&&r.shouldIgnore(t);)t++;if(t>i-1)return[];const{tabSize:o,indentSize:a,insertSpaces:l}=n.getOptions(),c=(p,_)=>(_=_||1,Oc.shiftIndent(p,p.length+_,o,a,l)),d=(p,_)=>(_=_||1,Oc.unshiftIndent(p,p.length+_,o,a,l)),u=[],h=n.getLineContent(t);let f=Ni(h),g=f;r.shouldIncrease(t)?(g=c(g),f=c(f)):r.shouldIndentNextLine(t)&&(g=c(g)),t++;for(let p=t;p<=i;p++){if(Q0t(n,p))continue;const _=n.getLineContent(p),w=Ni(_),b=g;r.shouldDecrease(p,b)&&(g=d(g),f=d(f)),w!==g&&u.push(gn.replaceMove(new $e(p,1,p,w.length+1),fQ(g,a,l))),!r.shouldIgnore(p)&&(r.shouldIncrease(p,b)?(f=c(f),g=f):r.shouldIndentNextLine(p,b)?g=c(g):g=f)}return u}function Q0t(n,e){return n.tokenization.isCheapToTokenize(e)?n.tokenization.getLineTokens(e).getStandardTokenType(0)===2:!1}var J0t=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},eCt=function(n,e){return function(t,i){e(t,i,n)}};const g5=class g5 extends Oe{constructor(){super({id:g5.ID,label:v("indentationToSpaces","Convert Indentation to Spaces"),alias:"Convert Indentation to Spaces",precondition:F.writable,metadata:{description:lt("indentationToSpacesDescription","Convert the tab indentation to spaces.")}})}run(e,t){const i=t.getModel();if(!i)return;const s=i.getOptions(),r=t.getSelection();if(!r)return;const o=new rCt(r,s.tabSize);t.pushUndoStop(),t.executeCommands(this.id,[o]),t.pushUndoStop(),i.updateOptions({insertSpaces:!0})}};g5.ID="editor.action.indentationToSpaces";let Pq=g5;const p5=class p5 extends Oe{constructor(){super({id:p5.ID,label:v("indentationToTabs","Convert Indentation to Tabs"),alias:"Convert Indentation to Tabs",precondition:F.writable,metadata:{description:lt("indentationToTabsDescription","Convert the spaces indentation to tabs.")}})}run(e,t){const i=t.getModel();if(!i)return;const s=i.getOptions(),r=t.getSelection();if(!r)return;const o=new oCt(r,s.tabSize);t.pushUndoStop(),t.executeCommands(this.id,[o]),t.pushUndoStop(),i.updateOptions({insertSpaces:!1})}};p5.ID="editor.action.indentationToTabs";let Oq=p5;class fee extends Oe{constructor(e,t,i){super(i),this.insertSpaces=e,this.displaySizeOnly=t}run(e,t){const i=e.get(Uc),s=e.get(Zi),r=t.getModel();if(!r)return;const o=s.getCreationOptions(r.getLanguageId(),r.uri,r.isForSimpleWidget),a=r.getOptions(),l=[1,2,3,4,5,6,7,8].map(d=>({id:d.toString(),label:d.toString(),description:d===o.tabSize&&d===a.tabSize?v("configuredTabSize","Configured Tab Size"):d===o.tabSize?v("defaultTabSize","Default Tab Size"):d===a.tabSize?v("currentTabSize","Current Tab Size"):void 0})),c=Math.min(r.getOptions().tabSize-1,7);setTimeout(()=>{i.pick(l,{placeHolder:v({key:"selectTabWidth",comment:["Tab corresponds to the tab key"]},"Select Tab Size for Current File"),activeItem:l[c]}).then(d=>{if(d&&r&&!r.isDisposed()){const u=parseInt(d.label,10);this.displaySizeOnly?r.updateOptions({tabSize:u}):r.updateOptions({tabSize:u,indentSize:u,insertSpaces:this.insertSpaces})}})},50)}}const m5=class m5 extends fee{constructor(){super(!1,!1,{id:m5.ID,label:v("indentUsingTabs","Indent Using Tabs"),alias:"Indent Using Tabs",precondition:void 0,metadata:{description:lt("indentUsingTabsDescription","Use indentation with tabs.")}})}};m5.ID="editor.action.indentUsingTabs";let Fq=m5;const _5=class _5 extends fee{constructor(){super(!0,!1,{id:_5.ID,label:v("indentUsingSpaces","Indent Using Spaces"),alias:"Indent Using Spaces",precondition:void 0,metadata:{description:lt("indentUsingSpacesDescription","Use indentation with spaces.")}})}};_5.ID="editor.action.indentUsingSpaces";let Bq=_5;const v5=class v5 extends fee{constructor(){super(!0,!0,{id:v5.ID,label:v("changeTabDisplaySize","Change Tab Display Size"),alias:"Change Tab Display Size",precondition:void 0,metadata:{description:lt("changeTabDisplaySizeDescription","Change the space size equivalent of the tab.")}})}};v5.ID="editor.action.changeTabDisplaySize";let Wq=v5;const b5=class b5 extends Oe{constructor(){super({id:b5.ID,label:v("detectIndentation","Detect Indentation from Content"),alias:"Detect Indentation from Content",precondition:void 0,metadata:{description:lt("detectIndentationDescription","Detect the indentation from content.")}})}run(e,t){const i=e.get(Zi),s=t.getModel();if(!s)return;const r=i.getCreationOptions(s.getLanguageId(),s.uri,s.isForSimpleWidget);s.detectIndentation(r.insertSpaces,r.tabSize)}};b5.ID="editor.action.detectIndentation";let Hq=b5;class tCt extends Oe{constructor(){super({id:"editor.action.reindentlines",label:v("editor.reindentlines","Reindent Lines"),alias:"Reindent Lines",precondition:F.writable,metadata:{description:lt("editor.reindentlinesDescription","Reindent the lines of the editor.")}})}run(e,t){const i=e.get(vn),s=t.getModel();if(!s)return;const r=bke(s,i,1,s.getLineCount());r.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,r),t.pushUndoStop())}}class iCt extends Oe{constructor(){super({id:"editor.action.reindentselectedlines",label:v("editor.reindentselectedlines","Reindent Selected Lines"),alias:"Reindent Selected Lines",precondition:F.writable,metadata:{description:lt("editor.reindentselectedlinesDescription","Reindent the selected lines of the editor.")}})}run(e,t){const i=e.get(vn),s=t.getModel();if(!s)return;const r=t.getSelections();if(r===null)return;const o=[];for(const a of r){let l=a.startLineNumber,c=a.endLineNumber;if(l!==c&&a.endColumn===1&&c--,l===1){if(l===c)continue}else l--;const d=bke(s,i,l,c);o.push(...d)}o.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,o),t.pushUndoStop())}}class nCt{constructor(e,t){this._initialSelection=t,this._edits=[],this._selectionId=null;for(const i of e)i.range&&typeof i.text=="string"&&this._edits.push(i)}getEditOperations(e,t){for(const s of this._edits)t.addEditOperation(M.lift(s.range),s.text);let i=!1;Array.isArray(this._edits)&&this._edits.length===1&&this._initialSelection.isEmpty()&&(this._edits[0].range.startColumn===this._initialSelection.endColumn&&this._edits[0].range.startLineNumber===this._initialSelection.endLineNumber?(i=!0,this._selectionId=t.trackSelection(this._initialSelection,!0)):this._edits[0].range.endColumn===this._initialSelection.startColumn&&this._edits[0].range.endLineNumber===this._initialSelection.startLineNumber&&(i=!0,this._selectionId=t.trackSelection(this._initialSelection,!1))),i||(this._selectionId=t.trackSelection(this._initialSelection))}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}var lS;let AF=(lS=class{constructor(e,t){this.editor=e,this._languageConfigurationService=t,this.callOnDispose=new ue,this.callOnModel=new ue,this.callOnDispose.add(e.onDidChangeConfiguration(()=>this.update())),this.callOnDispose.add(e.onDidChangeModel(()=>this.update())),this.callOnDispose.add(e.onDidChangeModelLanguage(()=>this.update()))}update(){this.callOnModel.clear(),!(this.editor.getOption(12)<4||this.editor.getOption(55))&&this.editor.hasModel()&&this.callOnModel.add(this.editor.onDidPaste(({range:e})=>{this.trigger(e)}))}trigger(e){const t=this.editor.getSelections();if(t===null||t.length>1)return;const i=this.editor.getModel();if(!i||this.rangeContainsOnlyWhitespaceCharacters(i,e)||sCt(i,e)||!i.tokenization.isCheapToTokenize(e.getStartPosition().lineNumber))return;const r=this.editor.getOption(12),{tabSize:o,indentSize:a,insertSpaces:l}=i.getOptions(),c=[],d={shiftIndent:g=>Oc.shiftIndent(g,g.length+1,o,a,l),unshiftIndent:g=>Oc.unshiftIndent(g,g.length+1,o,a,l)};let u=e.startLineNumber;for(;u<=e.endLineNumber;){if(this.shouldIgnoreLine(i,u)){u++;continue}break}if(u>e.endLineNumber)return;let h=i.getLineContent(u);if(!/\S/.test(h.substring(0,e.startColumn-1))){const g=fE(r,i,i.getLanguageId(),u,d,this._languageConfigurationService);if(g!==null){const p=Ni(h),_=Aa(g,o),w=Aa(p,o);if(_!==w){const b=kE(_,o,l);c.push({range:new M(u,1,u,p.length+1),text:b}),h=b+h.substring(p.length)}else{const b=MSe(i,u,this._languageConfigurationService);if(b===0||b===8)return}}}const f=u;for(;u<e.endLineNumber;){if(!/\S/.test(i.getLineContent(u+1))){u++;continue}break}if(u!==e.endLineNumber){const p=fE(r,{tokenization:{getLineTokens:_=>i.tokenization.getLineTokens(_),getLanguageId:()=>i.getLanguageId(),getLanguageIdAtPosition:(_,w)=>i.getLanguageIdAtPosition(_,w)},getLineContent:_=>_===f?h:i.getLineContent(_)},i.getLanguageId(),u+1,d,this._languageConfigurationService);if(p!==null){const _=Aa(p,o),w=Aa(Ni(i.getLineContent(u+1)),o);if(_!==w){const b=_-w;for(let y=u+1;y<=e.endLineNumber;y++){const S=i.getLineContent(y),x=Ni(S),D=Aa(x,o)+b,N=kE(D,o,l);N!==x&&c.push({range:new M(y,1,y,x.length+1),text:N})}}}}if(c.length>0){this.editor.pushUndoStop();const g=new nCt(c,this.editor.getSelection());this.editor.executeCommand("autoIndentOnPaste",g),this.editor.pushUndoStop()}}rangeContainsOnlyWhitespaceCharacters(e,t){const i=r=>r.trim().length===0;let s=!0;if(t.startLineNumber===t.endLineNumber){const o=e.getLineContent(t.startLineNumber).substring(t.startColumn-1,t.endColumn-1);s=i(o)}else for(let r=t.startLineNumber;r<=t.endLineNumber;r++){const o=e.getLineContent(r);if(r===t.startLineNumber){const a=o.substring(t.startColumn-1);s=i(a)}else if(r===t.endLineNumber){const a=o.substring(0,t.endColumn-1);s=i(a)}else s=e.getLineFirstNonWhitespaceColumn(r)===0;if(!s)break}return s}shouldIgnoreLine(e,t){e.tokenization.forceTokenization(t);const i=e.getLineFirstNonWhitespaceColumn(t);if(i===0)return!0;const s=e.tokenization.getLineTokens(t);if(s.getCount()>0){const r=s.findTokenIndexAtOffset(i);if(r>=0&&s.getStandardTokenType(r)===1)return!0}return!1}dispose(){this.callOnDispose.dispose(),this.callOnModel.dispose()}},lS.ID="editor.contrib.autoIndentOnPaste",lS);AF=J0t([eCt(1,vn)],AF);function sCt(n,e){const t=i=>xet(n,i)===2;return t(e.getStartPosition())||t(e.getEndPosition())}function wke(n,e,t,i){if(n.getLineCount()===1&&n.getLineMaxColumn(1)===1)return;let s="";for(let o=0;o<t;o++)s+=" ";const r=new RegExp(s,"gi");for(let o=1,a=n.getLineCount();o<=a;o++){let l=n.getLineFirstNonWhitespaceColumn(o);if(l===0&&(l=n.getLineMaxColumn(o)),l===1)continue;const c=new M(o,1,o,l),d=n.getValueInRange(c),u=i?d.replace(/\t/ig,s):d.replace(r,"	");e.addEditOperation(c,u)}}class rCt{constructor(e,t){this.selection=e,this.tabSize=t,this.selectionId=null}getEditOperations(e,t){this.selectionId=t.trackSelection(this.selection),wke(e,t,this.tabSize,!0)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}}class oCt{constructor(e,t){this.selection=e,this.tabSize=t,this.selectionId=null}getEditOperations(e,t){this.selectionId=t.trackSelection(this.selection),wke(e,t,this.tabSize,!1)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}}Xt(AF.ID,AF,2);we(Pq);we(Oq);we(Fq);we(Bq);we(Wq);we(Hq);we(tCt);we(iCt);Xt(UD.ID,UD,1);Q0.register(uF);class aCt{constructor(e,t,i){this._editRange=e,this._originalSelection=t,this._text=i}getEditOperations(e,t){t.addTrackedEditOperation(this._editRange,this._text)}computeCursorState(e,t){const s=t.getInverseEditOperations()[0].range;return this._originalSelection.isEmpty()?new $e(s.endLineNumber,Math.min(this._originalSelection.positionColumn,s.endColumn),s.endLineNumber,Math.min(this._originalSelection.positionColumn,s.endColumn)):new $e(s.endLineNumber,s.endColumn-this._text.length,s.endLineNumber,s.endColumn)}}var lCt=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},cCt=function(n,e){return function(t,i){e(t,i,n)}},X2,f_;let cx=(f_=class{static get(e){return e.getContribution(X2.ID)}constructor(e,t){this.editor=e,this.editorWorkerService=t,this.decorations=this.editor.createDecorationsCollection()}dispose(){}run(e,t){var l;(l=this.currentRequest)==null||l.cancel();const i=this.editor.getSelection(),s=this.editor.getModel();if(!s||!i)return;let r=i;if(r.startLineNumber!==r.endLineNumber)return;const o=new cxe(this.editor,5),a=s.uri;return this.editorWorkerService.canNavigateValueSet(a)?(this.currentRequest=Ds(c=>this.editorWorkerService.navigateValueSet(a,r,t)),this.currentRequest.then(c=>{var g;if(!c||!c.range||!c.value||!o.validate(this.editor))return;const d=M.lift(c.range);let u=c.range;const h=c.value.length-(r.endColumn-r.startColumn);u={startLineNumber:u.startLineNumber,startColumn:u.startColumn,endLineNumber:u.endLineNumber,endColumn:u.startColumn+c.value.length},h>1&&(r=new $e(r.startLineNumber,r.startColumn,r.endLineNumber,r.endColumn+h-1));const f=new aCt(d,r,c.value);this.editor.pushUndoStop(),this.editor.executeCommand(e,f),this.editor.pushUndoStop(),this.decorations.set([{range:u,options:X2.DECORATION}]),(g=this.decorationRemover)==null||g.cancel(),this.decorationRemover=Xg(350),this.decorationRemover.then(()=>this.decorations.clear()).catch(pt)}).catch(pt)):Promise.resolve(void 0)}},X2=f_,f_.ID="editor.contrib.inPlaceReplaceController",f_.DECORATION=_t.register({description:"in-place-replace",className:"valueSetReplacement"}),f_);cx=X2=lCt([cCt(1,wa)],cx);class dCt extends Oe{constructor(){super({id:"editor.action.inPlaceReplace.up",label:v("InPlaceReplaceAction.previous.label","Replace with Previous Value"),alias:"Replace with Previous Value",precondition:F.writable,kbOpts:{kbExpr:F.editorTextFocus,primary:3159,weight:100}})}run(e,t){const i=cx.get(t);return i?i.run(this.id,!1):Promise.resolve(void 0)}}class uCt extends Oe{constructor(){super({id:"editor.action.inPlaceReplace.down",label:v("InPlaceReplaceAction.next.label","Replace with Next Value"),alias:"Replace with Next Value",precondition:F.writable,kbOpts:{kbExpr:F.editorTextFocus,primary:3161,weight:100}})}run(e,t){const i=cx.get(t);return i?i.run(this.id,!0):Promise.resolve(void 0)}}Xt(cx.ID,cx,4);we(dCt);we(uCt);class hCt extends Oe{constructor(){super({id:"expandLineSelection",label:v("expandLineSelection","Expand Line Selection"),alias:"Expand Line Selection",precondition:void 0,kbOpts:{weight:0,kbExpr:F.textInputFocus,primary:2090}})}run(e,t,i){if(i=i||{},!t.hasModel())return;const s=t._getViewModel();s.model.pushStackElement(),s.setCursorStates(i.source,3,Xs.expandLineSelection(s,s.getCursorStates())),s.revealAllCursors(i.source,!0)}}we(hCt);class fCt{constructor(e,t,i){this._selection=e,this._cursors=t,this._selectionId=null,this._trimInRegexesAndStrings=i}getEditOperations(e,t){const i=gCt(e,this._cursors,this._trimInRegexesAndStrings);for(let s=0,r=i.length;s<r;s++){const o=i[s];t.addEditOperation(o.range,o.text)}this._selectionId=t.trackSelection(this._selection)}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}function gCt(n,e,t){e.sort((a,l)=>a.lineNumber===l.lineNumber?a.column-l.column:a.lineNumber-l.lineNumber);for(let a=e.length-2;a>=0;a--)e[a].lineNumber===e[a+1].lineNumber&&e.splice(a,1);const i=[];let s=0,r=0;const o=e.length;for(let a=1,l=n.getLineCount();a<=l;a++){const c=n.getLineContent(a),d=c.length+1;let u=0;if(r<o&&e[r].lineNumber===a&&(u=e[r].column,r++,u===d)||c.length===0)continue;const h=Nu(c);let f=0;if(h===-1)f=1;else if(h!==c.length-1)f=h+2;else continue;if(!t){if(!n.tokenization.hasAccurateTokensForLine(a))continue;const g=n.tokenization.getLineTokens(a),p=g.getStandardTokenType(g.findTokenIndexAtOffset(f));if(p===2||p===3)continue}f=Math.max(u,f),i[s++]=gn.delete(new M(a,f,a,d))}return i}class Cke{constructor(e,t,i){this._selection=e,this._isCopyingDown=t,this._noop=i||!1,this._selectionDirection=0,this._selectionId=null,this._startLineNumberDelta=0,this._endLineNumberDelta=0}getEditOperations(e,t){let i=this._selection;this._startLineNumberDelta=0,this._endLineNumberDelta=0,i.startLineNumber<i.endLineNumber&&i.endColumn===1&&(this._endLineNumberDelta=1,i=i.setEndPosition(i.endLineNumber-1,e.getLineMaxColumn(i.endLineNumber-1)));const s=[];for(let o=i.startLineNumber;o<=i.endLineNumber;o++)s.push(e.getLineContent(o));const r=s.join(`
`);r===""&&this._isCopyingDown&&(this._startLineNumberDelta++,this._endLineNumberDelta++),this._noop?t.addEditOperation(new M(i.endLineNumber,e.getLineMaxColumn(i.endLineNumber),i.endLineNumber+1,1),i.endLineNumber===e.getLineCount()?"":`
`):this._isCopyingDown?t.addEditOperation(new M(i.startLineNumber,1,i.startLineNumber,1),r+`
`):t.addEditOperation(new M(i.endLineNumber,e.getLineMaxColumn(i.endLineNumber),i.endLineNumber,e.getLineMaxColumn(i.endLineNumber)),`
`+r),this._selectionId=t.trackSelection(i),this._selectionDirection=this._selection.getDirection()}computeCursorState(e,t){let i=t.getTrackedSelection(this._selectionId);if(this._startLineNumberDelta!==0||this._endLineNumberDelta!==0){let s=i.startLineNumber,r=i.startColumn,o=i.endLineNumber,a=i.endColumn;this._startLineNumberDelta!==0&&(s=s+this._startLineNumberDelta,r=1),this._endLineNumberDelta!==0&&(o=o+this._endLineNumberDelta,a=1),i=$e.createWithDirection(s,r,o,a,this._selectionDirection)}return i}}var pCt=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},mCt=function(n,e){return function(t,i){e(t,i,n)}};let Vq=class{constructor(e,t,i,s){this._languageConfigurationService=s,this._selection=e,this._isMovingDown=t,this._autoIndent=i,this._selectionId=null,this._moveEndLineSelectionShrink=!1}getEditOperations(e,t){const i=()=>e.getLanguageId(),s=(u,h)=>e.getLanguageIdAtPosition(u,h),r=e.getLineCount();if(this._isMovingDown&&this._selection.endLineNumber===r){this._selectionId=t.trackSelection(this._selection);return}if(!this._isMovingDown&&this._selection.startLineNumber===1){this._selectionId=t.trackSelection(this._selection);return}this._moveEndPositionDown=!1;let o=this._selection;o.startLineNumber<o.endLineNumber&&o.endColumn===1&&(this._moveEndPositionDown=!0,o=o.setEndPosition(o.endLineNumber-1,e.getLineMaxColumn(o.endLineNumber-1)));const{tabSize:a,indentSize:l,insertSpaces:c}=e.getOptions(),d=this.buildIndentConverter(a,l,c);if(o.startLineNumber===o.endLineNumber&&e.getLineMaxColumn(o.startLineNumber)===1){const u=o.startLineNumber,h=this._isMovingDown?u+1:u-1;e.getLineMaxColumn(h)===1?t.addEditOperation(new M(1,1,1,1),null):(t.addEditOperation(new M(u,1,u,1),e.getLineContent(h)),t.addEditOperation(new M(h,1,h,e.getLineMaxColumn(h)),null)),o=new $e(h,1,h,1)}else{let u,h;if(this._isMovingDown){u=o.endLineNumber+1,h=e.getLineContent(u),t.addEditOperation(new M(u-1,e.getLineMaxColumn(u-1),u,e.getLineMaxColumn(u)),null);let f=h;if(this.shouldAutoIndent(e,o)){const g=this.matchEnterRule(e,d,a,u,o.startLineNumber-1);if(g!==null){const _=Ni(e.getLineContent(u)),w=g+Aa(_,a);f=kE(w,a,c)+this.trimStart(h)}else{const _={tokenization:{getLineTokens:b=>b===o.startLineNumber?e.tokenization.getLineTokens(u):e.tokenization.getLineTokens(b),getLanguageId:i,getLanguageIdAtPosition:s},getLineContent:b=>b===o.startLineNumber?e.getLineContent(u):e.getLineContent(b)},w=fE(this._autoIndent,_,e.getLanguageIdAtPosition(u,1),o.startLineNumber,d,this._languageConfigurationService);if(w!==null){const b=Ni(e.getLineContent(u)),y=Aa(w,a),S=Aa(b,a);y!==S&&(f=kE(y,a,c)+this.trimStart(h))}}t.addEditOperation(new M(o.startLineNumber,1,o.startLineNumber,1),f+`
`);const p=this.matchEnterRuleMovingDown(e,d,a,o.startLineNumber,u,f);if(p!==null)p!==0&&this.getIndentEditsOfMovingBlock(e,t,o,a,c,p);else{const _={tokenization:{getLineTokens:b=>b===o.startLineNumber?e.tokenization.getLineTokens(u):b>=o.startLineNumber+1&&b<=o.endLineNumber+1?e.tokenization.getLineTokens(b-1):e.tokenization.getLineTokens(b),getLanguageId:i,getLanguageIdAtPosition:s},getLineContent:b=>b===o.startLineNumber?f:b>=o.startLineNumber+1&&b<=o.endLineNumber+1?e.getLineContent(b-1):e.getLineContent(b)},w=fE(this._autoIndent,_,e.getLanguageIdAtPosition(u,1),o.startLineNumber+1,d,this._languageConfigurationService);if(w!==null){const b=Ni(e.getLineContent(o.startLineNumber)),y=Aa(w,a),S=Aa(b,a);if(y!==S){const x=y-S;this.getIndentEditsOfMovingBlock(e,t,o,a,c,x)}}}}else t.addEditOperation(new M(o.startLineNumber,1,o.startLineNumber,1),f+`
`)}else if(u=o.startLineNumber-1,h=e.getLineContent(u),t.addEditOperation(new M(u,1,u+1,1),null),t.addEditOperation(new M(o.endLineNumber,e.getLineMaxColumn(o.endLineNumber),o.endLineNumber,e.getLineMaxColumn(o.endLineNumber)),`
`+h),this.shouldAutoIndent(e,o)){const f={tokenization:{getLineTokens:p=>p===u?e.tokenization.getLineTokens(o.startLineNumber):e.tokenization.getLineTokens(p),getLanguageId:i,getLanguageIdAtPosition:s},getLineContent:p=>p===u?e.getLineContent(o.startLineNumber):e.getLineContent(p)},g=this.matchEnterRule(e,d,a,o.startLineNumber,o.startLineNumber-2);if(g!==null)g!==0&&this.getIndentEditsOfMovingBlock(e,t,o,a,c,g);else{const p=fE(this._autoIndent,f,e.getLanguageIdAtPosition(o.startLineNumber,1),u,d,this._languageConfigurationService);if(p!==null){const _=Ni(e.getLineContent(o.startLineNumber)),w=Aa(p,a),b=Aa(_,a);if(w!==b){const y=w-b;this.getIndentEditsOfMovingBlock(e,t,o,a,c,y)}}}}}this._selectionId=t.trackSelection(o)}buildIndentConverter(e,t,i){return{shiftIndent:s=>Oc.shiftIndent(s,s.length+1,e,t,i),unshiftIndent:s=>Oc.unshiftIndent(s,s.length+1,e,t,i)}}parseEnterResult(e,t,i,s,r){if(r){let o=r.indentation;r.indentAction===os.None||r.indentAction===os.Indent?o=r.indentation+r.appendText:r.indentAction===os.IndentOutdent?o=r.indentation:r.indentAction===os.Outdent&&(o=t.unshiftIndent(r.indentation)+r.appendText);const a=e.getLineContent(s);if(this.trimStart(a).indexOf(this.trimStart(o))>=0){const l=Ni(e.getLineContent(s));let c=Ni(o);const d=MSe(e,s,this._languageConfigurationService);d!==null&&d&2&&(c=t.unshiftIndent(c));const u=Aa(c,i),h=Aa(l,i);return u-h}}return null}matchEnterRuleMovingDown(e,t,i,s,r,o){if(Nu(o)>=0){const a=e.getLineMaxColumn(r),l=Wy(this._autoIndent,e,new M(r,a,r,a),this._languageConfigurationService);return this.parseEnterResult(e,t,i,s,l)}else{let a=s-1;for(;a>=1;){const d=e.getLineContent(a);if(Nu(d)>=0)break;a--}if(a<1||s>e.getLineCount())return null;const l=e.getLineMaxColumn(a),c=Wy(this._autoIndent,e,new M(a,l,a,l),this._languageConfigurationService);return this.parseEnterResult(e,t,i,s,c)}}matchEnterRule(e,t,i,s,r,o){let a=r;for(;a>=1;){let d;if(a===r&&o!==void 0?d=o:d=e.getLineContent(a),Nu(d)>=0)break;a--}if(a<1||s>e.getLineCount())return null;const l=e.getLineMaxColumn(a),c=Wy(this._autoIndent,e,new M(a,l,a,l),this._languageConfigurationService);return this.parseEnterResult(e,t,i,s,c)}trimStart(e){return e.replace(/^\s+/,"")}shouldAutoIndent(e,t){if(this._autoIndent<4||!e.tokenization.isCheapToTokenize(t.startLineNumber))return!1;const i=e.getLanguageIdAtPosition(t.startLineNumber,1),s=e.getLanguageIdAtPosition(t.endLineNumber,1);return!(i!==s||this._languageConfigurationService.getLanguageConfiguration(i).indentRulesSupport===null)}getIndentEditsOfMovingBlock(e,t,i,s,r,o){for(let a=i.startLineNumber;a<=i.endLineNumber;a++){const l=e.getLineContent(a),c=Ni(l),u=Aa(c,s)+o,h=kE(u,s,r);h!==c&&(t.addEditOperation(new M(a,1,a,c.length+1),h),a===i.endLineNumber&&i.endColumn<=c.length+1&&h===""&&(this._moveEndLineSelectionShrink=!0))}}computeCursorState(e,t){let i=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(i=i.setEndPosition(i.endLineNumber+1,1)),this._moveEndLineSelectionShrink&&i.startLineNumber<i.endLineNumber&&(i=i.setEndPosition(i.endLineNumber,2)),i}};Vq=pCt([mCt(3,vn)],Vq);const sy=class sy{static getCollator(){return sy._COLLATOR||(sy._COLLATOR=new Intl.Collator),sy._COLLATOR}constructor(e,t){this.selection=e,this.descending=t,this.selectionId=null}getEditOperations(e,t){const i=_Ct(e,this.selection,this.descending);i&&t.addEditOperation(i.range,i.text),this.selectionId=t.trackSelection(this.selection)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}static canRun(e,t,i){if(e===null)return!1;const s=yke(e,t,i);if(!s)return!1;for(let r=0,o=s.before.length;r<o;r++)if(s.before[r]!==s.after[r])return!0;return!1}};sy._COLLATOR=null;let GD=sy;function yke(n,e,t){const i=e.startLineNumber;let s=e.endLineNumber;if(e.endColumn===1&&s--,i>=s)return null;const r=[];for(let a=i;a<=s;a++)r.push(n.getLineContent(a));let o=r.slice(0);return o.sort(GD.getCollator().compare),t===!0&&(o=o.reverse()),{startLineNumber:i,endLineNumber:s,before:r,after:o}}function _Ct(n,e,t){const i=yke(n,e,t);return i?gn.replace(new M(i.startLineNumber,1,i.endLineNumber,n.getLineMaxColumn(i.endLineNumber)),i.after.join(`
`)):null}class Ske extends Oe{constructor(e,t){super(t),this.down=e}run(e,t){if(!t.hasModel())return;const i=t.getSelections().map((o,a)=>({selection:o,index:a,ignore:!1}));i.sort((o,a)=>M.compareRangesUsingStarts(o.selection,a.selection));let s=i[0];for(let o=1;o<i.length;o++){const a=i[o];s.selection.endLineNumber===a.selection.startLineNumber&&(s.index<a.index?a.ignore=!0:(s.ignore=!0,s=a))}const r=[];for(const o of i)r.push(new Cke(o.selection,this.down,o.ignore));t.pushUndoStop(),t.executeCommands(this.id,r),t.pushUndoStop()}}class vCt extends Ske{constructor(){super(!1,{id:"editor.action.copyLinesUpAction",label:v("lines.copyUp","Copy Line Up"),alias:"Copy Line Up",precondition:F.writable,kbOpts:{kbExpr:F.editorTextFocus,primary:1552,linux:{primary:3600},weight:100},menuOpts:{menuId:ze.MenubarSelectionMenu,group:"2_line",title:v({key:"miCopyLinesUp",comment:["&& denotes a mnemonic"]},"&&Copy Line Up"),order:1}})}}class bCt extends Ske{constructor(){super(!0,{id:"editor.action.copyLinesDownAction",label:v("lines.copyDown","Copy Line Down"),alias:"Copy Line Down",precondition:F.writable,kbOpts:{kbExpr:F.editorTextFocus,primary:1554,linux:{primary:3602},weight:100},menuOpts:{menuId:ze.MenubarSelectionMenu,group:"2_line",title:v({key:"miCopyLinesDown",comment:["&& denotes a mnemonic"]},"Co&&py Line Down"),order:2}})}}class wCt extends Oe{constructor(){super({id:"editor.action.duplicateSelection",label:v("duplicateSelection","Duplicate Selection"),alias:"Duplicate Selection",precondition:F.writable,menuOpts:{menuId:ze.MenubarSelectionMenu,group:"2_line",title:v({key:"miDuplicateSelection",comment:["&& denotes a mnemonic"]},"&&Duplicate Selection"),order:5}})}run(e,t,i){if(!t.hasModel())return;const s=[],r=t.getSelections(),o=t.getModel();for(const a of r)if(a.isEmpty())s.push(new Cke(a,!0));else{const l=new $e(a.endLineNumber,a.endColumn,a.endLineNumber,a.endColumn);s.push(new sct(l,o.getValueInRange(a)))}t.pushUndoStop(),t.executeCommands(this.id,s),t.pushUndoStop()}}class xke extends Oe{constructor(e,t){super(t),this.down=e}run(e,t){const i=e.get(vn),s=[],r=t.getSelections()||[],o=t.getOption(12);for(const a of r)s.push(new Vq(a,this.down,o,i));t.pushUndoStop(),t.executeCommands(this.id,s),t.pushUndoStop()}}class CCt extends xke{constructor(){super(!1,{id:"editor.action.moveLinesUpAction",label:v("lines.moveUp","Move Line Up"),alias:"Move Line Up",precondition:F.writable,kbOpts:{kbExpr:F.editorTextFocus,primary:528,linux:{primary:528},weight:100},menuOpts:{menuId:ze.MenubarSelectionMenu,group:"2_line",title:v({key:"miMoveLinesUp",comment:["&& denotes a mnemonic"]},"Mo&&ve Line Up"),order:3}})}}class yCt extends xke{constructor(){super(!0,{id:"editor.action.moveLinesDownAction",label:v("lines.moveDown","Move Line Down"),alias:"Move Line Down",precondition:F.writable,kbOpts:{kbExpr:F.editorTextFocus,primary:530,linux:{primary:530},weight:100},menuOpts:{menuId:ze.MenubarSelectionMenu,group:"2_line",title:v({key:"miMoveLinesDown",comment:["&& denotes a mnemonic"]},"Move &&Line Down"),order:4}})}}class Lke extends Oe{constructor(e,t){super(t),this.descending=e}run(e,t){if(!t.hasModel())return;const i=t.getModel();let s=t.getSelections();s.length===1&&s[0].isEmpty()&&(s=[new $e(1,1,i.getLineCount(),i.getLineMaxColumn(i.getLineCount()))]);for(const o of s)if(!GD.canRun(t.getModel(),o,this.descending))return;const r=[];for(let o=0,a=s.length;o<a;o++)r[o]=new GD(s[o],this.descending);t.pushUndoStop(),t.executeCommands(this.id,r),t.pushUndoStop()}}class SCt extends Lke{constructor(){super(!1,{id:"editor.action.sortLinesAscending",label:v("lines.sortAscending","Sort Lines Ascending"),alias:"Sort Lines Ascending",precondition:F.writable})}}class xCt extends Lke{constructor(){super(!0,{id:"editor.action.sortLinesDescending",label:v("lines.sortDescending","Sort Lines Descending"),alias:"Sort Lines Descending",precondition:F.writable})}}class LCt extends Oe{constructor(){super({id:"editor.action.removeDuplicateLines",label:v("lines.deleteDuplicates","Delete Duplicate Lines"),alias:"Delete Duplicate Lines",precondition:F.writable})}run(e,t){if(!t.hasModel())return;const i=t.getModel();if(i.getLineCount()===1&&i.getLineMaxColumn(1)===1)return;const s=[],r=[];let o=0,a=!0,l=t.getSelections();l.length===1&&l[0].isEmpty()&&(l=[new $e(1,1,i.getLineCount(),i.getLineMaxColumn(i.getLineCount()))],a=!1);for(const c of l){const d=new Set,u=[];for(let p=c.startLineNumber;p<=c.endLineNumber;p++){const _=i.getLineContent(p);d.has(_)||(u.push(_),d.add(_))}const h=new $e(c.startLineNumber,1,c.endLineNumber,i.getLineMaxColumn(c.endLineNumber)),f=c.startLineNumber-o,g=new $e(f,1,f+u.length-1,u[u.length-1].length);s.push(gn.replace(h,u.join(`
`))),r.push(g),o+=c.endLineNumber-c.startLineNumber+1-u.length}t.pushUndoStop(),t.executeEdits(this.id,s,a?r:void 0),t.pushUndoStop()}}const w5=class w5 extends Oe{constructor(){super({id:w5.ID,label:v("lines.trimTrailingWhitespace","Trim Trailing Whitespace"),alias:"Trim Trailing Whitespace",precondition:F.writable,kbOpts:{kbExpr:F.editorTextFocus,primary:as(2089,2102),weight:100}})}run(e,t,i){let s=[];i.reason==="auto-save"&&(s=(t.getSelections()||[]).map(d=>new Y(d.positionLineNumber,d.positionColumn)));const r=t.getSelection();if(r===null)return;const o=e.get(Tt),a=t.getModel(),l=o.getValue("files.trimTrailingWhitespaceInRegexAndStrings",{overrideIdentifier:a==null?void 0:a.getLanguageId(),resource:a==null?void 0:a.uri}),c=new fCt(r,s,l);t.pushUndoStop(),t.executeCommands(this.id,[c]),t.pushUndoStop()}};w5.ID="editor.action.trimTrailingWhitespace";let zq=w5;class kCt extends Oe{constructor(){super({id:"editor.action.deleteLines",label:v("lines.delete","Delete Line"),alias:"Delete Line",precondition:F.writable,kbOpts:{kbExpr:F.textInputFocus,primary:3113,weight:100}})}run(e,t){if(!t.hasModel())return;const i=this._getLinesToRemove(t),s=t.getModel();if(s.getLineCount()===1&&s.getLineMaxColumn(1)===1)return;let r=0;const o=[],a=[];for(let l=0,c=i.length;l<c;l++){const d=i[l];let u=d.startLineNumber,h=d.endLineNumber,f=1,g=s.getLineMaxColumn(h);h<s.getLineCount()?(h+=1,g=1):u>1&&(u-=1,f=s.getLineMaxColumn(u)),o.push(gn.replace(new $e(u,f,h,g),"")),a.push(new $e(u-r,d.positionColumn,u-r,d.positionColumn)),r+=d.endLineNumber-d.startLineNumber+1}t.pushUndoStop(),t.executeEdits(this.id,o,a),t.pushUndoStop()}_getLinesToRemove(e){const t=e.getSelections().map(r=>{let o=r.endLineNumber;return r.startLineNumber<r.endLineNumber&&r.endColumn===1&&(o-=1),{startLineNumber:r.startLineNumber,selectionStartColumn:r.selectionStartColumn,endLineNumber:o,positionColumn:r.positionColumn}});t.sort((r,o)=>r.startLineNumber===o.startLineNumber?r.endLineNumber-o.endLineNumber:r.startLineNumber-o.startLineNumber);const i=[];let s=t[0];for(let r=1;r<t.length;r++)s.endLineNumber+1>=t[r].startLineNumber?s.endLineNumber=t[r].endLineNumber:(i.push(s),s=t[r]);return i.push(s),i}}class ECt extends Oe{constructor(){super({id:"editor.action.indentLines",label:v("lines.indent","Indent Line"),alias:"Indent Line",precondition:F.writable,kbOpts:{kbExpr:F.editorTextFocus,primary:2142,weight:100}})}run(e,t){const i=t._getViewModel();i&&(t.pushUndoStop(),t.executeCommands(this.id,cm.indent(i.cursorConfig,t.getModel(),t.getSelections())),t.pushUndoStop())}}class ICt extends Oe{constructor(){super({id:"editor.action.outdentLines",label:v("lines.outdent","Outdent Line"),alias:"Outdent Line",precondition:F.writable,kbOpts:{kbExpr:F.editorTextFocus,primary:2140,weight:100}})}run(e,t){Hy.Outdent.runEditorCommand(e,t,null)}}class DCt extends Oe{constructor(){super({id:"editor.action.insertLineBefore",label:v("lines.insertBefore","Insert Line Above"),alias:"Insert Line Above",precondition:F.writable,kbOpts:{kbExpr:F.editorTextFocus,primary:3075,weight:100}})}run(e,t){const i=t._getViewModel();i&&(t.pushUndoStop(),t.executeCommands(this.id,HB.lineInsertBefore(i.cursorConfig,t.getModel(),t.getSelections())))}}class NCt extends Oe{constructor(){super({id:"editor.action.insertLineAfter",label:v("lines.insertAfter","Insert Line Below"),alias:"Insert Line Below",precondition:F.writable,kbOpts:{kbExpr:F.editorTextFocus,primary:2051,weight:100}})}run(e,t){const i=t._getViewModel();i&&(t.pushUndoStop(),t.executeCommands(this.id,HB.lineInsertAfter(i.cursorConfig,t.getModel(),t.getSelections())))}}class kke extends Oe{run(e,t){if(!t.hasModel())return;const i=t.getSelection(),s=this._getRangesToDelete(t),r=[];for(let l=0,c=s.length-1;l<c;l++){const d=s[l],u=s[l+1];M.intersectRanges(d,u)===null?r.push(d):s[l+1]=M.plusRange(d,u)}r.push(s[s.length-1]);const o=this._getEndCursorState(i,r),a=r.map(l=>gn.replace(l,""));t.pushUndoStop(),t.executeEdits(this.id,a,o),t.pushUndoStop()}}class TCt extends kke{constructor(){super({id:"deleteAllLeft",label:v("lines.deleteAllLeft","Delete All Left"),alias:"Delete All Left",precondition:F.writable,kbOpts:{kbExpr:F.textInputFocus,primary:0,mac:{primary:2049},weight:100}})}_getEndCursorState(e,t){let i=null;const s=[];let r=0;return t.forEach(o=>{let a;if(o.endColumn===1&&r>0){const l=o.startLineNumber-r;a=new $e(l,o.startColumn,l,o.startColumn)}else a=new $e(o.startLineNumber,o.startColumn,o.startLineNumber,o.startColumn);r+=o.endLineNumber-o.startLineNumber,o.intersectRanges(e)?i=a:s.push(a)}),i&&s.unshift(i),s}_getRangesToDelete(e){const t=e.getSelections();if(t===null)return[];let i=t;const s=e.getModel();return s===null?[]:(i.sort(M.compareRangesUsingStarts),i=i.map(r=>{if(r.isEmpty())if(r.startColumn===1){const o=Math.max(1,r.startLineNumber-1),a=r.startLineNumber===1?1:s.getLineLength(o)+1;return new M(o,a,r.startLineNumber,1)}else return new M(r.startLineNumber,1,r.startLineNumber,r.startColumn);else return new M(r.startLineNumber,1,r.endLineNumber,r.endColumn)}),i)}}class RCt extends kke{constructor(){super({id:"deleteAllRight",label:v("lines.deleteAllRight","Delete All Right"),alias:"Delete All Right",precondition:F.writable,kbOpts:{kbExpr:F.textInputFocus,primary:0,mac:{primary:297,secondary:[2068]},weight:100}})}_getEndCursorState(e,t){let i=null;const s=[];for(let r=0,o=t.length,a=0;r<o;r++){const l=t[r],c=new $e(l.startLineNumber-a,l.startColumn,l.startLineNumber-a,l.startColumn);l.intersectRanges(e)?i=c:s.push(c)}return i&&s.unshift(i),s}_getRangesToDelete(e){const t=e.getModel();if(t===null)return[];const i=e.getSelections();if(i===null)return[];const s=i.map(r=>{if(r.isEmpty()){const o=t.getLineMaxColumn(r.startLineNumber);return r.startColumn===o?new M(r.startLineNumber,r.startColumn,r.startLineNumber+1,1):new M(r.startLineNumber,r.startColumn,r.startLineNumber,o)}return r});return s.sort(M.compareRangesUsingStarts),s}}class ACt extends Oe{constructor(){super({id:"editor.action.joinLines",label:v("lines.joinLines","Join Lines"),alias:"Join Lines",precondition:F.writable,kbOpts:{kbExpr:F.editorTextFocus,primary:0,mac:{primary:296},weight:100}})}run(e,t){const i=t.getSelections();if(i===null)return;let s=t.getSelection();if(s===null)return;i.sort(M.compareRangesUsingStarts);const r=[],o=i.reduce((h,f)=>h.isEmpty()?h.endLineNumber===f.startLineNumber?(s.equalsSelection(h)&&(s=f),f):f.startLineNumber>h.endLineNumber+1?(r.push(h),f):new $e(h.startLineNumber,h.startColumn,f.endLineNumber,f.endColumn):f.startLineNumber>h.endLineNumber?(r.push(h),f):new $e(h.startLineNumber,h.startColumn,f.endLineNumber,f.endColumn));r.push(o);const a=t.getModel();if(a===null)return;const l=[],c=[];let d=s,u=0;for(let h=0,f=r.length;h<f;h++){const g=r[h],p=g.startLineNumber,_=1;let w=0,b,y;const S=a.getLineLength(g.endLineNumber)-g.endColumn;if(g.isEmpty()||g.startLineNumber===g.endLineNumber){const D=g.getStartPosition();D.lineNumber<a.getLineCount()?(b=p+1,y=a.getLineMaxColumn(b)):(b=D.lineNumber,y=a.getLineMaxColumn(D.lineNumber))}else b=g.endLineNumber,y=a.getLineMaxColumn(b);let x=a.getLineContent(p);for(let D=p+1;D<=b;D++){const N=a.getLineContent(D),I=a.getLineFirstNonWhitespaceColumn(D);if(I>=1){let H=!0;x===""&&(H=!1),H&&(x.charAt(x.length-1)===" "||x.charAt(x.length-1)==="	")&&(H=!1,x=x.replace(/[\s\uFEFF\xA0]+$/g," "));const z=N.substr(I-1);x+=(H?" ":"")+z,H?w=z.length+1:w=z.length}else w=0}const E=new M(p,_,b,y);if(!E.isEmpty()){let D;g.isEmpty()?(l.push(gn.replace(E,x)),D=new $e(E.startLineNumber-u,x.length-w+1,p-u,x.length-w+1)):g.startLineNumber===g.endLineNumber?(l.push(gn.replace(E,x)),D=new $e(g.startLineNumber-u,g.startColumn,g.endLineNumber-u,g.endColumn)):(l.push(gn.replace(E,x)),D=new $e(g.startLineNumber-u,g.startColumn,g.startLineNumber-u,x.length-S)),M.intersectRanges(E,s)!==null?d=D:c.push(D)}u+=E.endLineNumber-E.startLineNumber}c.unshift(d),t.pushUndoStop(),t.executeEdits(this.id,l,c),t.pushUndoStop()}}class MCt extends Oe{constructor(){super({id:"editor.action.transpose",label:v("editor.transpose","Transpose Characters around the Cursor"),alias:"Transpose Characters around the Cursor",precondition:F.writable})}run(e,t){const i=t.getSelections();if(i===null)return;const s=t.getModel();if(s===null)return;const r=[];for(let o=0,a=i.length;o<a;o++){const l=i[o];if(!l.isEmpty())continue;const c=l.getStartPosition(),d=s.getLineMaxColumn(c.lineNumber);if(c.column>=d){if(c.lineNumber===s.getLineCount())continue;const u=new M(c.lineNumber,Math.max(1,c.column-1),c.lineNumber+1,1),h=s.getValueInRange(u).split("").reverse().join("");r.push(new mr(new $e(c.lineNumber,Math.max(1,c.column-1),c.lineNumber+1,1),h))}else{const u=new M(c.lineNumber,Math.max(1,c.column-1),c.lineNumber,c.column+1),h=s.getValueInRange(u).split("").reverse().join("");r.push(new XQ(u,h,new $e(c.lineNumber,c.column+1,c.lineNumber,c.column+1)))}}t.pushUndoStop(),t.executeCommands(this.id,r),t.pushUndoStop()}}class tC extends Oe{run(e,t){const i=t.getSelections();if(i===null)return;const s=t.getModel();if(s===null)return;const r=t.getOption(132),o=[];for(const a of i)if(a.isEmpty()){const l=a.getStartPosition(),c=t.getConfiguredWordAtPosition(l);if(!c)continue;const d=new M(l.lineNumber,c.startColumn,l.lineNumber,c.endColumn),u=s.getValueInRange(d);o.push(gn.replace(d,this._modifyText(u,r)))}else{const l=s.getValueInRange(a);o.push(gn.replace(a,this._modifyText(l,r)))}t.pushUndoStop(),t.executeEdits(this.id,o),t.pushUndoStop()}}class PCt extends tC{constructor(){super({id:"editor.action.transformToUppercase",label:v("editor.transformToUppercase","Transform to Uppercase"),alias:"Transform to Uppercase",precondition:F.writable})}_modifyText(e,t){return e.toLocaleUpperCase()}}class OCt extends tC{constructor(){super({id:"editor.action.transformToLowercase",label:v("editor.transformToLowercase","Transform to Lowercase"),alias:"Transform to Lowercase",precondition:F.writable})}_modifyText(e,t){return e.toLocaleLowerCase()}}class Fg{constructor(e,t){this._pattern=e,this._flags=t,this._actual=null,this._evaluated=!1}get(){if(!this._evaluated){this._evaluated=!0;try{this._actual=new RegExp(this._pattern,this._flags)}catch{}}return this._actual}isSupported(){return this.get()!==null}}const C5=class C5 extends tC{constructor(){super({id:"editor.action.transformToTitlecase",label:v("editor.transformToTitlecase","Transform to Title Case"),alias:"Transform to Title Case",precondition:F.writable})}_modifyText(e,t){const i=C5.titleBoundary.get();return i?e.toLocaleLowerCase().replace(i,s=>s.toLocaleUpperCase()):e}};C5.titleBoundary=new Fg("(^|[^\\p{L}\\p{N}']|((^|\\P{L})'))\\p{L}","gmu");let MF=C5;const ry=class ry extends tC{constructor(){super({id:"editor.action.transformToSnakecase",label:v("editor.transformToSnakecase","Transform to Snake Case"),alias:"Transform to Snake Case",precondition:F.writable})}_modifyText(e,t){const i=ry.caseBoundary.get(),s=ry.singleLetters.get();return!i||!s?e:e.replace(i,"$1_$2").replace(s,"$1_$2$3").toLocaleLowerCase()}};ry.caseBoundary=new Fg("(\\p{Ll})(\\p{Lu})","gmu"),ry.singleLetters=new Fg("(\\p{Lu}|\\p{N})(\\p{Lu})(\\p{Ll})","gmu");let EE=ry;const y5=class y5 extends tC{constructor(){super({id:"editor.action.transformToCamelcase",label:v("editor.transformToCamelcase","Transform to Camel Case"),alias:"Transform to Camel Case",precondition:F.writable})}_modifyText(e,t){const i=y5.wordBoundary.get();if(!i)return e;const s=e.split(i);return s.shift()+s.map(o=>o.substring(0,1).toLocaleUpperCase()+o.substring(1)).join("")}};y5.wordBoundary=new Fg("[_\\s-]","gm");let PF=y5;const oy=class oy extends tC{constructor(){super({id:"editor.action.transformToPascalcase",label:v("editor.transformToPascalcase","Transform to Pascal Case"),alias:"Transform to Pascal Case",precondition:F.writable})}_modifyText(e,t){const i=oy.wordBoundary.get(),s=oy.wordBoundaryToMaintain.get();return!i||!s?e:e.split(s).map(a=>a.split(i)).flat().map(a=>a.substring(0,1).toLocaleUpperCase()+a.substring(1)).join("")}};oy.wordBoundary=new Fg("[_\\s-]","gm"),oy.wordBoundaryToMaintain=new Fg("(?<=\\.)","gm");let OF=oy;const Qp=class Qp extends tC{static isSupported(){return[this.caseBoundary,this.singleLetters,this.underscoreBoundary].every(t=>t.isSupported())}constructor(){super({id:"editor.action.transformToKebabcase",label:v("editor.transformToKebabcase","Transform to Kebab Case"),alias:"Transform to Kebab Case",precondition:F.writable})}_modifyText(e,t){const i=Qp.caseBoundary.get(),s=Qp.singleLetters.get(),r=Qp.underscoreBoundary.get();return!i||!s||!r?e:e.replace(r,"$1-$3").replace(i,"$1-$2").replace(s,"$1-$2").toLocaleLowerCase()}};Qp.caseBoundary=new Fg("(\\p{Ll})(\\p{Lu})","gmu"),Qp.singleLetters=new Fg("(\\p{Lu}|\\p{N})(\\p{Lu}\\p{Ll})","gmu"),Qp.underscoreBoundary=new Fg("(\\S)(_)(\\S)","gm");let FF=Qp;we(vCt);we(bCt);we(wCt);we(CCt);we(yCt);we(SCt);we(xCt);we(LCt);we(zq);we(kCt);we(ECt);we(ICt);we(DCt);we(NCt);we(TCt);we(RCt);we(ACt);we(MCt);we(PCt);we(OCt);EE.caseBoundary.isSupported()&&EE.singleLetters.isSupported()&&we(EE);PF.wordBoundary.isSupported()&&we(PF);OF.wordBoundary.isSupported()&&we(OF);MF.titleBoundary.isSupported()&&we(MF);FF.isSupported()&&we(FF);var FCt=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},BA=function(n,e){return function(t,i){e(t,i,n)}},Q2;const Eke=new Re("LinkedEditingInputVisible",!1),BCt="linked-editing-decoration";var g_;let dx=(g_=class extends ee{static get(e){return e.getContribution(Q2.ID)}constructor(e,t,i,s,r){super(),this.languageConfigurationService=s,this._syncRangesToken=0,this._localToDispose=this._register(new ue),this._editor=e,this._providers=i.linkedEditingRangeProvider,this._enabled=!1,this._visibleContextKey=Eke.bindTo(t),this._debounceInformation=r.for(this._providers,"Linked Editing",{max:200}),this._currentDecorations=this._editor.createDecorationsCollection(),this._languageWordPattern=null,this._currentWordPattern=null,this._ignoreChangeEvent=!1,this._localToDispose=this._register(new ue),this._rangeUpdateTriggerPromise=null,this._rangeSyncTriggerPromise=null,this._currentRequestCts=null,this._currentRequestPosition=null,this._currentRequestModelVersion=null,this._register(this._editor.onDidChangeModel(()=>this.reinitialize(!0))),this._register(this._editor.onDidChangeConfiguration(o=>{(o.hasChanged(70)||o.hasChanged(94))&&this.reinitialize(!1)})),this._register(this._providers.onDidChange(()=>this.reinitialize(!1))),this._register(this._editor.onDidChangeModelLanguage(()=>this.reinitialize(!0))),this.reinitialize(!0)}reinitialize(e){const t=this._editor.getModel(),i=t!==null&&(this._editor.getOption(70)||this._editor.getOption(94))&&this._providers.has(t);if(i===this._enabled&&!e||(this._enabled=i,this.clearRanges(),this._localToDispose.clear(),!i||t===null))return;this._localToDispose.add(Ee.runAndSubscribe(t.onDidChangeLanguageConfiguration,()=>{this._languageWordPattern=this.languageConfigurationService.getLanguageConfiguration(t.getLanguageId()).getWordDefinition()}));const s=new Rc(this._debounceInformation.get(t)),r=()=>{this._rangeUpdateTriggerPromise=s.trigger(()=>this.updateRanges(),this._debounceDuration??this._debounceInformation.get(t))},o=new Rc(0),a=l=>{this._rangeSyncTriggerPromise=o.trigger(()=>this._syncRanges(l))};this._localToDispose.add(this._editor.onDidChangeCursorPosition(()=>{r()})),this._localToDispose.add(this._editor.onDidChangeModelContent(l=>{if(!this._ignoreChangeEvent&&this._currentDecorations.length>0){const c=this._currentDecorations.getRange(0);if(c&&l.changes.every(d=>c.intersectRanges(d.range))){a(this._syncRangesToken);return}}r()})),this._localToDispose.add({dispose:()=>{s.dispose(),o.dispose()}}),this.updateRanges()}_syncRanges(e){if(!this._editor.hasModel()||e!==this._syncRangesToken||this._currentDecorations.length===0)return;const t=this._editor.getModel(),i=this._currentDecorations.getRange(0);if(!i||i.startLineNumber!==i.endLineNumber)return this.clearRanges();const s=t.getValueInRange(i);if(this._currentWordPattern){const o=s.match(this._currentWordPattern);if((o?o[0].length:0)!==s.length)return this.clearRanges()}const r=[];for(let o=1,a=this._currentDecorations.length;o<a;o++){const l=this._currentDecorations.getRange(o);if(l)if(l.startLineNumber!==l.endLineNumber)r.push({range:l,text:s});else{let c=t.getValueInRange(l),d=s,u=l.startColumn,h=l.endColumn;const f=D_(c,d);u+=f,c=c.substr(f),d=d.substr(f);const g=cP(c,d);h-=g,c=c.substr(0,c.length-g),d=d.substr(0,d.length-g),(u!==h||d.length!==0)&&r.push({range:new M(l.startLineNumber,u,l.endLineNumber,h),text:d})}}if(r.length!==0)try{this._editor.popUndoStop(),this._ignoreChangeEvent=!0;const o=this._editor._getViewModel().getPrevEditOperationType();this._editor.executeEdits("linkedEditing",r),this._editor._getViewModel().setPrevEditOperationType(o)}finally{this._ignoreChangeEvent=!1}}dispose(){this.clearRanges(),super.dispose()}clearRanges(){this._visibleContextKey.set(!1),this._currentDecorations.clear(),this._currentRequestCts&&(this._currentRequestCts.cancel(),this._currentRequestCts=null,this._currentRequestPosition=null)}async updateRanges(e=!1){if(!this._editor.hasModel()){this.clearRanges();return}const t=this._editor.getPosition();if(!this._enabled&&!e||this._editor.getSelections().length>1){this.clearRanges();return}const i=this._editor.getModel(),s=i.getVersionId();if(this._currentRequestPosition&&this._currentRequestModelVersion===s){if(t.equals(this._currentRequestPosition))return;if(this._currentDecorations.length>0){const o=this._currentDecorations.getRange(0);if(o&&o.containsPosition(t))return}}this.clearRanges(),this._currentRequestPosition=t,this._currentRequestModelVersion=s;const r=this._currentRequestCts=new mn;try{const o=new js(!1),a=await Ike(this._providers,i,t,r.token);if(this._debounceInformation.update(i,o.elapsed()),r!==this._currentRequestCts||(this._currentRequestCts=null,s!==i.getVersionId()))return;let l=[];a!=null&&a.ranges&&(l=a.ranges),this._currentWordPattern=(a==null?void 0:a.wordPattern)||this._languageWordPattern;let c=!1;for(let u=0,h=l.length;u<h;u++)if(M.containsPosition(l[u],t)){if(c=!0,u!==0){const f=l[u];l.splice(u,1),l.unshift(f)}break}if(!c){this.clearRanges();return}const d=l.map(u=>({range:u,options:Q2.DECORATION}));this._visibleContextKey.set(!0),this._currentDecorations.set(d),this._syncRangesToken++}catch(o){Vc(o)||pt(o),(this._currentRequestCts===r||!this._currentRequestCts)&&this.clearRanges()}}},Q2=g_,g_.ID="editor.contrib.linkedEditing",g_.DECORATION=_t.register({description:"linked-editing",stickiness:0,className:BCt}),g_);dx=Q2=FCt([BA(1,at),BA(2,Be),BA(3,vn),BA(4,Zl)],dx);class WCt extends Oe{constructor(){super({id:"editor.action.linkedEditing",label:v("linkedEditing.label","Start Linked Editing"),alias:"Start Linked Editing",precondition:he.and(F.writable,F.hasRenameProvider),kbOpts:{kbExpr:F.editorTextFocus,primary:3132,weight:100}})}runCommand(e,t){const i=e.get(ri),[s,r]=Array.isArray(t)&&t||[void 0,void 0];return Xe.isUri(s)&&Y.isIPosition(r)?i.openCodeEditor({resource:s},i.getActiveCodeEditor()).then(o=>{o&&(o.setPosition(r),o.invokeWithinContext(a=>(this.reportTelemetry(a,o),this.run(a,o))))},pt):super.runCommand(e,t)}run(e,t){const i=dx.get(t);return i?Promise.resolve(i.updateRanges(!0)):Promise.resolve()}}const HCt=vs.bindToContribution(dx.get);Te(new HCt({id:"cancelLinkedEditingInput",precondition:Eke,handler:n=>n.clearRanges(),kbOpts:{kbExpr:F.editorTextFocus,weight:199,primary:9,secondary:[1033]}}));function Ike(n,e,t,i){const s=n.ordered(e);return cX(s.map(r=>async()=>{try{return await r.provideLinkedEditingRanges(e,t,i)}catch(o){Wn(o);return}}),r=>!!r&&ao(r==null?void 0:r.ranges))}B("editor.linkedEditingBackground",{dark:ge.fromHex("#f00").transparent(.3),light:ge.fromHex("#f00").transparent(.3),hcDark:ge.fromHex("#f00").transparent(.3),hcLight:ge.white},v("editorLinkedEditingBackground","Background color when the editor auto renames on type."));va("_executeLinkedEditingProvider",(n,e,t)=>{const{linkedEditingRangeProvider:i}=n.get(Be);return Ike(i,e,t,xt.None)});Xt(dx.ID,dx,1);we(WCt);let VCt=class{constructor(e,t){this._link=e,this._provider=t}toJSON(){return{range:this.range,url:this.url,tooltip:this.tooltip}}get range(){return this._link.range}get url(){return this._link.url}get tooltip(){return this._link.tooltip}async resolve(e){return this._link.url?this._link.url:typeof this._provider.resolveLink=="function"?Promise.resolve(this._provider.resolveLink(this._link,e)).then(t=>(this._link=t||this._link,this._link.url?this.resolve(e):Promise.reject(new Error("missing")))):Promise.reject(new Error("missing"))}};class BF{constructor(e){this._disposables=new ue;let t=[];for(const[i,s]of e){const r=i.links.map(o=>new VCt(o,s));t=BF._union(t,r),M3(i)&&this._disposables.add(i)}this.links=t}dispose(){this._disposables.dispose(),this.links.length=0}static _union(e,t){const i=[];let s,r,o,a;for(s=0,o=0,r=e.length,a=t.length;s<r&&o<a;){const l=e[s],c=t[o];if(M.areIntersectingOrTouching(l.range,c.range)){s++;continue}M.compareRangesUsingStarts(l.range,c.range)<0?(i.push(l),s++):(i.push(c),o++)}for(;s<r;s++)i.push(e[s]);for(;o<a;o++)i.push(t[o]);return i}}function Dke(n,e,t){const i=[],s=n.ordered(e).reverse().map((r,o)=>Promise.resolve(r.provideLinks(e,t)).then(a=>{a&&(i[o]=[a,r])},Wn));return Promise.all(s).then(()=>{const r=new BF(Id(i));return t.isCancellationRequested?(r.dispose(),new BF([])):r})}Gt.registerCommand("_executeLinkProvider",async(n,...e)=>{let[t,i]=e;si(t instanceof Xe),typeof i!="number"&&(i=0);const{linkProvider:s}=n.get(Be),r=n.get(Zi).getModel(t);if(!r)return[];const o=await Dke(s,r,xt.None);if(!o)return[];for(let l=0;l<Math.min(i,o.links.length);l++)await o.links[l].resolve(xt.None);const a=o.links.slice(0);return o.dispose(),a});var zCt=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},WA=function(n,e){return function(t,i){e(t,i,n)}},Uq,Ow;let YD=(Ow=class extends ee{static get(e){return e.getContribution(Uq.ID)}constructor(e,t,i,s,r){super(),this.editor=e,this.openerService=t,this.notificationService=i,this.languageFeaturesService=s,this.providers=this.languageFeaturesService.linkProvider,this.debounceInformation=r.for(this.providers,"Links",{min:1e3,max:4e3}),this.computeLinks=this._register(new yi(()=>this.computeLinksNow(),1e3)),this.computePromise=null,this.activeLinksList=null,this.currentOccurrences={},this.activeLinkDecorationId=null;const o=this._register(new tW(e));this._register(o.onMouseMoveOrRelevantKeyDown(([a,l])=>{this._onEditorMouseMove(a,l)})),this._register(o.onExecute(a=>{this.onEditorMouseUp(a)})),this._register(o.onCancel(a=>{this.cleanUpActiveLinkDecoration()})),this._register(e.onDidChangeConfiguration(a=>{a.hasChanged(71)&&(this.updateDecorations([]),this.stop(),this.computeLinks.schedule(0))})),this._register(e.onDidChangeModelContent(a=>{this.editor.hasModel()&&this.computeLinks.schedule(this.debounceInformation.get(this.editor.getModel()))})),this._register(e.onDidChangeModel(a=>{this.currentOccurrences={},this.activeLinkDecorationId=null,this.stop(),this.computeLinks.schedule(0)})),this._register(e.onDidChangeModelLanguage(a=>{this.stop(),this.computeLinks.schedule(0)})),this._register(this.providers.onDidChange(a=>{this.stop(),this.computeLinks.schedule(0)})),this.computeLinks.schedule(0)}async computeLinksNow(){if(!this.editor.hasModel()||!this.editor.getOption(71))return;const e=this.editor.getModel();if(!e.isTooLargeForSyncing()&&this.providers.has(e)){this.activeLinksList&&(this.activeLinksList.dispose(),this.activeLinksList=null),this.computePromise=Ds(t=>Dke(this.providers,e,t));try{const t=new js(!1);if(this.activeLinksList=await this.computePromise,this.debounceInformation.update(e,t.elapsed()),e.isDisposed())return;this.updateDecorations(this.activeLinksList.links)}catch(t){pt(t)}finally{this.computePromise=null}}}updateDecorations(e){const t=this.editor.getOption(78)==="altKey",i=[],s=Object.keys(this.currentOccurrences);for(const o of s){const a=this.currentOccurrences[o];i.push(a.decorationId)}const r=[];if(e)for(const o of e)r.push($y.decoration(o,t));this.editor.changeDecorations(o=>{const a=o.deltaDecorations(i,r);this.currentOccurrences={},this.activeLinkDecorationId=null;for(let l=0,c=a.length;l<c;l++){const d=new $y(e[l],a[l]);this.currentOccurrences[d.decorationId]=d}})}_onEditorMouseMove(e,t){const i=this.editor.getOption(78)==="altKey";if(this.isEnabled(e,t)){this.cleanUpActiveLinkDecoration();const s=this.getLinkOccurrence(e.target.position);s&&this.editor.changeDecorations(r=>{s.activate(r,i),this.activeLinkDecorationId=s.decorationId})}else this.cleanUpActiveLinkDecoration()}cleanUpActiveLinkDecoration(){const e=this.editor.getOption(78)==="altKey";if(this.activeLinkDecorationId){const t=this.currentOccurrences[this.activeLinkDecorationId];t&&this.editor.changeDecorations(i=>{t.deactivate(i,e)}),this.activeLinkDecorationId=null}}onEditorMouseUp(e){if(!this.isEnabled(e))return;const t=this.getLinkOccurrence(e.target.position);t&&this.openLinkOccurrence(t,e.hasSideBySideModifier,!0)}openLinkOccurrence(e,t,i=!1){if(!this.openerService)return;const{link:s}=e;s.resolve(xt.None).then(r=>{if(typeof r=="string"&&this.editor.hasModel()){const o=this.editor.getModel().uri;if(o.scheme===mt.file&&r.startsWith(`${mt.file}:`)){const a=Xe.parse(r);if(a.scheme===mt.file){const l=hh(a);let c=null;l.startsWith("/./")||l.startsWith("\\.\\")?c=`.${l.substr(1)}`:(l.startsWith("//./")||l.startsWith("\\\\.\\"))&&(c=`.${l.substr(2)}`),c&&(r=zJe(o,c))}}}return this.openerService.open(r,{openToSide:t,fromUserGesture:i,allowContributedOpeners:!0,allowCommands:!0,fromWorkspace:!0})},r=>{const o=r instanceof Error?r.message:r;o==="invalid"?this.notificationService.warn(v("invalid.url","Failed to open this link because it is not well-formed: {0}",s.url.toString())):o==="missing"?this.notificationService.warn(v("missing.url","Failed to open this link because its target is missing.")):pt(r)})}getLinkOccurrence(e){if(!this.editor.hasModel()||!e)return null;const t=this.editor.getModel().getDecorationsInRange({startLineNumber:e.lineNumber,startColumn:e.column,endLineNumber:e.lineNumber,endColumn:e.column},0,!0);for(const i of t){const s=this.currentOccurrences[i.id];if(s)return s}return null}isEnabled(e,t){return!!(e.target.type===6&&(e.hasTriggerModifier||t&&t.keyCodeIsTriggerKey))}stop(){var e;this.computeLinks.cancel(),this.activeLinksList&&((e=this.activeLinksList)==null||e.dispose(),this.activeLinksList=null),this.computePromise&&(this.computePromise.cancel(),this.computePromise=null)}dispose(){super.dispose(),this.stop()}},Uq=Ow,Ow.ID="editor.linkDetector",Ow);YD=Uq=zCt([WA(1,ba),WA(2,jn),WA(3,Be),WA(4,Zl)],YD);const vhe={general:_t.register({description:"detected-link",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link"}),active:_t.register({description:"detected-link-active",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link-active"})};class $y{static decoration(e,t){return{range:e.range,options:$y._getOptions(e,t,!1)}}static _getOptions(e,t,i){const s={...i?vhe.active:vhe.general};return s.hoverMessage=UCt(e,t),s}constructor(e,t){this.link=e,this.decorationId=t}activate(e,t){e.changeDecorationOptions(this.decorationId,$y._getOptions(this.link,t,!0))}deactivate(e,t){e.changeDecorationOptions(this.decorationId,$y._getOptions(this.link,t,!1))}}function UCt(n,e){const t=n.url&&/^command:/i.test(n.url.toString()),i=n.tooltip?n.tooltip:t?v("links.navigate.executeCmd","Execute command"):v("links.navigate.follow","Follow link"),s=e?Bt?v("links.navigate.kb.meta.mac","cmd + click"):v("links.navigate.kb.meta","ctrl + click"):Bt?v("links.navigate.kb.alt.mac","option + click"):v("links.navigate.kb.alt","alt + click");if(n.url){let r="";if(/^command:/i.test(n.url.toString())){const a=n.url.toString().match(/^command:([^?#]+)/);if(a){const l=a[1];r=v("tooltip.explanation","Execute command {0}",l)}}return new Rr("",!0).appendLink(n.url.toString(!0).replace(/ /g,"%20"),i,r).appendMarkdown(` (${s})`)}else return new Rr().appendText(`${i} (${s})`)}class $Ct extends Oe{constructor(){super({id:"editor.action.openLink",label:v("label","Open Link"),alias:"Open Link",precondition:void 0})}run(e,t){const i=YD.get(t);if(!i||!t.hasModel())return;const s=t.getSelections();for(const r of s){const o=i.getLinkOccurrence(r.getEndPosition());o&&i.openLinkOccurrence(o,!1)}}}Xt(YD.ID,YD,1);we($Ct);const qee=class qee extends ee{constructor(e){super(),this._editor=e,this._register(this._editor.onMouseDown(t=>{const i=this._editor.getOption(118);i>=0&&t.target.type===6&&t.target.position.column>=i&&this._editor.updateOptions({stopRenderingLineAfter:-1})}))}};qee.ID="editor.contrib.longLinesHelper";let WF=qee;Xt(WF.ID,WF,2);const jCt=B("editor.wordHighlightBackground",{dark:"#575757B8",light:"#57575740",hcDark:null,hcLight:null},v("wordHighlight","Background color of a symbol during read-access, like reading a variable. The color must not be opaque so as not to hide underlying decorations."),!0);B("editor.wordHighlightStrongBackground",{dark:"#004972B8",light:"#0e639c40",hcDark:null,hcLight:null},v("wordHighlightStrong","Background color of a symbol during write-access, like writing to a variable. The color must not be opaque so as not to hide underlying decorations."),!0);B("editor.wordHighlightTextBackground",jCt,v("wordHighlightText","Background color of a textual occurrence for a symbol. The color must not be opaque so as not to hide underlying decorations."),!0);const KCt=B("editor.wordHighlightBorder",{light:null,dark:null,hcDark:nn,hcLight:nn},v("wordHighlightBorder","Border color of a symbol during read-access, like reading a variable."));B("editor.wordHighlightStrongBorder",{light:null,dark:null,hcDark:nn,hcLight:nn},v("wordHighlightStrongBorder","Border color of a symbol during write-access, like writing to a variable."));B("editor.wordHighlightTextBorder",KCt,v("wordHighlightTextBorder","Border color of a textual occurrence for a symbol."));const qCt=B("editorOverviewRuler.wordHighlightForeground","#A0A0A0CC",v("overviewRulerWordHighlightForeground","Overview ruler marker color for symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),GCt=B("editorOverviewRuler.wordHighlightStrongForeground","#C0A0C0CC",v("overviewRulerWordHighlightStrongForeground","Overview ruler marker color for write-access symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),YCt=B("editorOverviewRuler.wordHighlightTextForeground",QCe,v("overviewRulerWordHighlightTextForeground","Overview ruler marker color of a textual occurrence for a symbol. The color must not be opaque so as not to hide underlying decorations."),!0),ZCt=_t.register({description:"word-highlight-strong",stickiness:1,className:"wordHighlightStrong",overviewRuler:{color:Dn(GCt),position:Vl.Center},minimap:{color:Dn(lB),position:1}}),XCt=_t.register({description:"word-highlight-text",stickiness:1,className:"wordHighlightText",overviewRuler:{color:Dn(YCt),position:Vl.Center},minimap:{color:Dn(lB),position:1}}),QCt=_t.register({description:"selection-highlight-overview",stickiness:1,className:"selectionHighlight",overviewRuler:{color:Dn(QCe),position:Vl.Center},minimap:{color:Dn(lB),position:1}}),JCt=_t.register({description:"selection-highlight",stickiness:1,className:"selectionHighlight"}),e1t=_t.register({description:"word-highlight",stickiness:1,className:"wordHighlight",overviewRuler:{color:Dn(qCt),position:Vl.Center},minimap:{color:Dn(lB),position:1}});function t1t(n){return n===IS.Write?ZCt:n===IS.Text?XCt:e1t}function i1t(n){return n?JCt:QCt}zc((n,e)=>{const t=n.getColor(OX);t&&e.addRule(`.monaco-editor .selectionHighlight { background-color: ${t.transparent(.5)}; }`)});var n1t=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},s1t=function(n,e){return function(t,i){e(t,i,n)}},$q;function lv(n,e){const t=e.filter(i=>!n.find(s=>s.equals(i)));if(t.length>=1){const i=t.map(r=>`line ${r.viewState.position.lineNumber} column ${r.viewState.position.column}`).join(", "),s=t.length===1?v("cursorAdded","Cursor added: {0}",i):v("cursorsAdded","Cursors added: {0}",i);lf(s)}}class r1t extends Oe{constructor(){super({id:"editor.action.insertCursorAbove",label:v("mutlicursor.insertAbove","Add Cursor Above"),alias:"Add Cursor Above",precondition:void 0,kbOpts:{kbExpr:F.editorTextFocus,primary:2576,linux:{primary:1552,secondary:[3088]},weight:100},menuOpts:{menuId:ze.MenubarSelectionMenu,group:"3_multi",title:v({key:"miInsertCursorAbove",comment:["&& denotes a mnemonic"]},"&&Add Cursor Above"),order:2}})}run(e,t,i){if(!t.hasModel())return;let s=!0;i&&i.logicalLine===!1&&(s=!1);const r=t._getViewModel();if(r.cursorConfig.readOnly)return;r.model.pushStackElement();const o=r.getCursorStates();r.setCursorStates(i.source,3,Xs.addCursorUp(r,o,s)),r.revealTopMostCursor(i.source),lv(o,r.getCursorStates())}}class o1t extends Oe{constructor(){super({id:"editor.action.insertCursorBelow",label:v("mutlicursor.insertBelow","Add Cursor Below"),alias:"Add Cursor Below",precondition:void 0,kbOpts:{kbExpr:F.editorTextFocus,primary:2578,linux:{primary:1554,secondary:[3090]},weight:100},menuOpts:{menuId:ze.MenubarSelectionMenu,group:"3_multi",title:v({key:"miInsertCursorBelow",comment:["&& denotes a mnemonic"]},"A&&dd Cursor Below"),order:3}})}run(e,t,i){if(!t.hasModel())return;let s=!0;i&&i.logicalLine===!1&&(s=!1);const r=t._getViewModel();if(r.cursorConfig.readOnly)return;r.model.pushStackElement();const o=r.getCursorStates();r.setCursorStates(i.source,3,Xs.addCursorDown(r,o,s)),r.revealBottomMostCursor(i.source),lv(o,r.getCursorStates())}}class a1t extends Oe{constructor(){super({id:"editor.action.insertCursorAtEndOfEachLineSelected",label:v("mutlicursor.insertAtEndOfEachLineSelected","Add Cursors to Line Ends"),alias:"Add Cursors to Line Ends",precondition:void 0,kbOpts:{kbExpr:F.editorTextFocus,primary:1575,weight:100},menuOpts:{menuId:ze.MenubarSelectionMenu,group:"3_multi",title:v({key:"miInsertCursorAtEndOfEachLineSelected",comment:["&& denotes a mnemonic"]},"Add C&&ursors to Line Ends"),order:4}})}getCursorsForSelection(e,t,i){if(!e.isEmpty()){for(let s=e.startLineNumber;s<e.endLineNumber;s++){const r=t.getLineMaxColumn(s);i.push(new $e(s,r,s,r))}e.endColumn>1&&i.push(new $e(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn))}}run(e,t){if(!t.hasModel())return;const i=t.getModel(),s=t.getSelections(),r=t._getViewModel(),o=r.getCursorStates(),a=[];s.forEach(l=>this.getCursorsForSelection(l,i,a)),a.length>0&&t.setSelections(a),lv(o,r.getCursorStates())}}class l1t extends Oe{constructor(){super({id:"editor.action.addCursorsToBottom",label:v("mutlicursor.addCursorsToBottom","Add Cursors To Bottom"),alias:"Add Cursors To Bottom",precondition:void 0})}run(e,t){if(!t.hasModel())return;const i=t.getSelections(),s=t.getModel().getLineCount(),r=[];for(let l=i[0].startLineNumber;l<=s;l++)r.push(new $e(l,i[0].startColumn,l,i[0].endColumn));const o=t._getViewModel(),a=o.getCursorStates();r.length>0&&t.setSelections(r),lv(a,o.getCursorStates())}}class c1t extends Oe{constructor(){super({id:"editor.action.addCursorsToTop",label:v("mutlicursor.addCursorsToTop","Add Cursors To Top"),alias:"Add Cursors To Top",precondition:void 0})}run(e,t){if(!t.hasModel())return;const i=t.getSelections(),s=[];for(let a=i[0].startLineNumber;a>=1;a--)s.push(new $e(a,i[0].startColumn,a,i[0].endColumn));const r=t._getViewModel(),o=r.getCursorStates();s.length>0&&t.setSelections(s),lv(o,r.getCursorStates())}}class HA{constructor(e,t,i){this.selections=e,this.revealRange=t,this.revealScrollType=i}}class ZD{static create(e,t){if(!e.hasModel())return null;const i=t.getState();if(!e.hasTextFocus()&&i.isRevealed&&i.searchString.length>0)return new ZD(e,t,!1,i.searchString,i.wholeWord,i.matchCase,null);let s=!1,r,o;const a=e.getSelections();a.length===1&&a[0].isEmpty()?(s=!0,r=!0,o=!0):(r=i.wholeWord,o=i.matchCase);const l=e.getSelection();let c,d=null;if(l.isEmpty()){const u=e.getConfiguredWordAtPosition(l.getStartPosition());if(!u)return null;c=u.word,d=new $e(l.startLineNumber,u.startColumn,l.startLineNumber,u.endColumn)}else c=e.getModel().getValueInRange(l).replace(/\r\n/g,`
`);return new ZD(e,t,s,c,r,o,d)}constructor(e,t,i,s,r,o,a){this._editor=e,this.findController=t,this.isDisconnectedFromFindController=i,this.searchText=s,this.wholeWord=r,this.matchCase=o,this.currentMatch=a}addSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const e=this._getNextMatch();if(!e)return null;const t=this._editor.getSelections();return new HA(t.concat(e),e,0)}moveSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const e=this._getNextMatch();if(!e)return null;const t=this._editor.getSelections();return new HA(t.slice(0,t.length-1).concat(e),e,0)}_getNextMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const s=this.currentMatch;return this.currentMatch=null,s}this.findController.highlightFindOptions();const e=this._editor.getSelections(),t=e[e.length-1],i=this._editor.getModel().findNextMatch(this.searchText,t.getEndPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(132):null,!1);return i?new $e(i.range.startLineNumber,i.range.startColumn,i.range.endLineNumber,i.range.endColumn):null}addSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const e=this._getPreviousMatch();if(!e)return null;const t=this._editor.getSelections();return new HA(t.concat(e),e,0)}moveSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const e=this._getPreviousMatch();if(!e)return null;const t=this._editor.getSelections();return new HA(t.slice(0,t.length-1).concat(e),e,0)}_getPreviousMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const s=this.currentMatch;return this.currentMatch=null,s}this.findController.highlightFindOptions();const e=this._editor.getSelections(),t=e[e.length-1],i=this._editor.getModel().findPreviousMatch(this.searchText,t.getStartPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(132):null,!1);return i?new $e(i.range.startLineNumber,i.range.startColumn,i.range.endLineNumber,i.range.endColumn):null}selectAll(e){if(!this._editor.hasModel())return[];this.findController.highlightFindOptions();const t=this._editor.getModel();return e?t.findMatches(this.searchText,e,!1,this.matchCase,this.wholeWord?this._editor.getOption(132):null,!1,1073741824):t.findMatches(this.searchText,!0,!1,this.matchCase,this.wholeWord?this._editor.getOption(132):null,!1,1073741824)}}const S5=class S5 extends ee{static get(e){return e.getContribution(S5.ID)}constructor(e){super(),this._sessionDispose=this._register(new ue),this._editor=e,this._ignoreSelectionChange=!1,this._session=null}dispose(){this._endSession(),super.dispose()}_beginSessionIfNeeded(e){if(!this._session){const t=ZD.create(this._editor,e);if(!t)return;this._session=t;const i={searchString:this._session.searchText};this._session.isDisconnectedFromFindController&&(i.wholeWordOverride=1,i.matchCaseOverride=1,i.isRegexOverride=2),e.getState().change(i,!1),this._sessionDispose.add(this._editor.onDidChangeCursorSelection(s=>{this._ignoreSelectionChange||this._endSession()})),this._sessionDispose.add(this._editor.onDidBlurEditorText(()=>{this._endSession()})),this._sessionDispose.add(e.getState().onFindReplaceStateChange(s=>{(s.matchCase||s.wholeWord)&&this._endSession()}))}}_endSession(){if(this._sessionDispose.clear(),this._session&&this._session.isDisconnectedFromFindController){const e={wholeWordOverride:0,matchCaseOverride:0,isRegexOverride:0};this._session.findController.getState().change(e,!1)}this._session=null}_setSelections(e){this._ignoreSelectionChange=!0,this._editor.setSelections(e),this._ignoreSelectionChange=!1}_expandEmptyToWord(e,t){if(!t.isEmpty())return t;const i=this._editor.getConfiguredWordAtPosition(t.getStartPosition());return i?new $e(t.startLineNumber,i.startColumn,t.startLineNumber,i.endColumn):t}_applySessionResult(e){e&&(this._setSelections(e.selections),e.revealRange&&this._editor.revealRangeInCenterIfOutsideViewport(e.revealRange,e.revealScrollType))}getSession(e){return this._session}addSelectionToNextFindMatch(e){if(this._editor.hasModel()){if(!this._session){const t=this._editor.getSelections();if(t.length>1){const s=e.getState().matchCase;if(!Nke(this._editor.getModel(),t,s)){const o=this._editor.getModel(),a=[];for(let l=0,c=t.length;l<c;l++)a[l]=this._expandEmptyToWord(o,t[l]);this._editor.setSelections(a);return}}}this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToNextFindMatch())}}addSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToPreviousFindMatch())}moveSelectionToNextFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToNextFindMatch())}moveSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToPreviousFindMatch())}selectAll(e){if(!this._editor.hasModel())return;let t=null;const i=e.getState();if(i.isRevealed&&i.searchString.length>0&&i.isRegex){const s=this._editor.getModel();i.searchScope?t=s.findMatches(i.searchString,i.searchScope,i.isRegex,i.matchCase,i.wholeWord?this._editor.getOption(132):null,!1,1073741824):t=s.findMatches(i.searchString,!0,i.isRegex,i.matchCase,i.wholeWord?this._editor.getOption(132):null,!1,1073741824)}else{if(this._beginSessionIfNeeded(e),!this._session)return;t=this._session.selectAll(i.searchScope)}if(t.length>0){const s=this._editor.getSelection();for(let r=0,o=t.length;r<o;r++){const a=t[r];if(a.range.intersectRanges(s)){t[r]=t[0],t[0]=a;break}}this._setSelections(t.map(r=>new $e(r.range.startLineNumber,r.range.startColumn,r.range.endLineNumber,r.range.endColumn)))}}};S5.ID="editor.contrib.multiCursorController";let ux=S5;class Xx extends Oe{run(e,t){const i=ux.get(t);if(!i)return;const s=t._getViewModel();if(s){const r=s.getCursorStates(),o=pa.get(t);if(o)this._run(i,o);else{const a=e.get(Ze).createInstance(pa,t);this._run(i,a),a.dispose()}lv(r,s.getCursorStates())}}}class d1t extends Xx{constructor(){super({id:"editor.action.addSelectionToNextFindMatch",label:v("addSelectionToNextFindMatch","Add Selection To Next Find Match"),alias:"Add Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:F.focus,primary:2082,weight:100},menuOpts:{menuId:ze.MenubarSelectionMenu,group:"3_multi",title:v({key:"miAddSelectionToNextFindMatch",comment:["&& denotes a mnemonic"]},"Add &&Next Occurrence"),order:5}})}_run(e,t){e.addSelectionToNextFindMatch(t)}}class u1t extends Xx{constructor(){super({id:"editor.action.addSelectionToPreviousFindMatch",label:v("addSelectionToPreviousFindMatch","Add Selection To Previous Find Match"),alias:"Add Selection To Previous Find Match",precondition:void 0,menuOpts:{menuId:ze.MenubarSelectionMenu,group:"3_multi",title:v({key:"miAddSelectionToPreviousFindMatch",comment:["&& denotes a mnemonic"]},"Add P&&revious Occurrence"),order:6}})}_run(e,t){e.addSelectionToPreviousFindMatch(t)}}class h1t extends Xx{constructor(){super({id:"editor.action.moveSelectionToNextFindMatch",label:v("moveSelectionToNextFindMatch","Move Last Selection To Next Find Match"),alias:"Move Last Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:F.focus,primary:as(2089,2082),weight:100}})}_run(e,t){e.moveSelectionToNextFindMatch(t)}}class f1t extends Xx{constructor(){super({id:"editor.action.moveSelectionToPreviousFindMatch",label:v("moveSelectionToPreviousFindMatch","Move Last Selection To Previous Find Match"),alias:"Move Last Selection To Previous Find Match",precondition:void 0})}_run(e,t){e.moveSelectionToPreviousFindMatch(t)}}class g1t extends Xx{constructor(){super({id:"editor.action.selectHighlights",label:v("selectAllOccurrencesOfFindMatch","Select All Occurrences of Find Match"),alias:"Select All Occurrences of Find Match",precondition:void 0,kbOpts:{kbExpr:F.focus,primary:3114,weight:100},menuOpts:{menuId:ze.MenubarSelectionMenu,group:"3_multi",title:v({key:"miSelectHighlights",comment:["&& denotes a mnemonic"]},"Select All &&Occurrences"),order:7}})}_run(e,t){e.selectAll(t)}}class p1t extends Xx{constructor(){super({id:"editor.action.changeAll",label:v("changeAll.label","Change All Occurrences"),alias:"Change All Occurrences",precondition:he.and(F.writable,F.editorTextFocus),kbOpts:{kbExpr:F.editorTextFocus,primary:2108,weight:100},contextMenuOpts:{group:"1_modification",order:1.2}})}_run(e,t){e.selectAll(t)}}class m1t{constructor(e,t,i,s,r){this._model=e,this._searchText=t,this._matchCase=i,this._wordSeparators=s,this._modelVersionId=this._model.getVersionId(),this._cachedFindMatches=null,r&&this._model===r._model&&this._searchText===r._searchText&&this._matchCase===r._matchCase&&this._wordSeparators===r._wordSeparators&&this._modelVersionId===r._modelVersionId&&(this._cachedFindMatches=r._cachedFindMatches)}findMatches(){return this._cachedFindMatches===null&&(this._cachedFindMatches=this._model.findMatches(this._searchText,!0,!1,this._matchCase,this._wordSeparators,!1).map(e=>e.range),this._cachedFindMatches.sort(M.compareRangesUsingStarts)),this._cachedFindMatches}}var Fw;let HF=(Fw=class extends ee{constructor(e,t){super(),this._languageFeaturesService=t,this.editor=e,this._isEnabled=e.getOption(109),this._decorations=e.createDecorationsCollection(),this.updateSoon=this._register(new yi(()=>this._update(),300)),this.state=null,this._register(e.onDidChangeConfiguration(s=>{this._isEnabled=e.getOption(109)})),this._register(e.onDidChangeCursorSelection(s=>{this._isEnabled&&(s.selection.isEmpty()?s.reason===3?(this.state&&this._setState(null),this.updateSoon.schedule()):this._setState(null):this._update())})),this._register(e.onDidChangeModel(s=>{this._setState(null)})),this._register(e.onDidChangeModelContent(s=>{this._isEnabled&&this.updateSoon.schedule()}));const i=pa.get(e);i&&this._register(i.getState().onFindReplaceStateChange(s=>{this._update()})),this.updateSoon.schedule()}_update(){this._setState($q._createState(this.state,this._isEnabled,this.editor))}static _createState(e,t,i){if(!t||!i.hasModel())return null;const s=i.getSelection();if(s.startLineNumber!==s.endLineNumber)return null;const r=ux.get(i);if(!r)return null;const o=pa.get(i);if(!o)return null;let a=r.getSession(o);if(!a){const d=i.getSelections();if(d.length>1){const h=o.getState().matchCase;if(!Nke(i.getModel(),d,h))return null}a=ZD.create(i,o)}if(!a||a.currentMatch||/^[ \t]+$/.test(a.searchText)||a.searchText.length>200)return null;const l=o.getState(),c=l.matchCase;if(l.isRevealed){let d=l.searchString;c||(d=d.toLowerCase());let u=a.searchText;if(c||(u=u.toLowerCase()),d===u&&a.matchCase===l.matchCase&&a.wholeWord===l.wholeWord&&!l.isRegex)return null}return new m1t(i.getModel(),a.searchText,a.matchCase,a.wholeWord?i.getOption(132):null,e)}_setState(e){if(this.state=e,!this.state){this._decorations.clear();return}if(!this.editor.hasModel())return;const t=this.editor.getModel();if(t.isTooLargeForTokenization())return;const i=this.state.findMatches(),s=this.editor.getSelections();s.sort(M.compareRangesUsingStarts);const r=[];for(let c=0,d=0,u=i.length,h=s.length;c<u;){const f=i[c];if(d>=h)r.push(f),c++;else{const g=M.compareRangesUsingStarts(f,s[d]);g<0?((s[d].isEmpty()||!M.areIntersecting(f,s[d]))&&r.push(f),c++):(g>0||c++,d++)}}const o=this.editor.getOption(81)!=="off",a=this._languageFeaturesService.documentHighlightProvider.has(t)&&o,l=r.map(c=>({range:c,options:i1t(a)}));this._decorations.set(l)}dispose(){this._setState(null),super.dispose()}},$q=Fw,Fw.ID="editor.contrib.selectionHighlighter",Fw);HF=$q=n1t([s1t(1,Be)],HF);function Nke(n,e,t){const i=bhe(n,e[0],!t);for(let s=1,r=e.length;s<r;s++){const o=e[s];if(o.isEmpty())return!1;const a=bhe(n,o,!t);if(i!==a)return!1}return!0}function bhe(n,e,t){const i=n.getValueInRange(e);return t?i.toLowerCase():i}class _1t extends Oe{constructor(){super({id:"editor.action.focusNextCursor",label:v("mutlicursor.focusNextCursor","Focus Next Cursor"),metadata:{description:v("mutlicursor.focusNextCursor.description","Focuses the next cursor"),args:[]},alias:"Focus Next Cursor",precondition:void 0})}run(e,t,i){if(!t.hasModel())return;const s=t._getViewModel();if(s.cursorConfig.readOnly)return;s.model.pushStackElement();const r=Array.from(s.getCursorStates()),o=r.shift();o&&(r.push(o),s.setCursorStates(i.source,3,r),s.revealPrimaryCursor(i.source,!0),lv(r,s.getCursorStates()))}}class v1t extends Oe{constructor(){super({id:"editor.action.focusPreviousCursor",label:v("mutlicursor.focusPreviousCursor","Focus Previous Cursor"),metadata:{description:v("mutlicursor.focusPreviousCursor.description","Focuses the previous cursor"),args:[]},alias:"Focus Previous Cursor",precondition:void 0})}run(e,t,i){if(!t.hasModel())return;const s=t._getViewModel();if(s.cursorConfig.readOnly)return;s.model.pushStackElement();const r=Array.from(s.getCursorStates()),o=r.pop();o&&(r.unshift(o),s.setCursorStates(i.source,3,r),s.revealPrimaryCursor(i.source,!0),lv(r,s.getCursorStates()))}}Xt(ux.ID,ux,4);Xt(HF.ID,HF,1);we(r1t);we(o1t);we(a1t);we(d1t);we(u1t);we(h1t);we(f1t);we(g1t);we(p1t);we(l1t);we(c1t);we(_1t);we(v1t);const b1t="editor.action.inlineEdit.accept",w1t="editor.action.inlineEdit.reject",C1t="editor.action.inlineEdit.jumpTo",y1t="editor.action.inlineEdit.jumpBack";var S1t=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},x1t=function(n,e){return function(t,i){e(t,i,n)}};const k6="inline-edit";let jq=class extends ee{constructor(e,t,i){super(),this.editor=e,this.model=t,this.languageService=i,this.isDisposed=Nt(this,!1),this.currentTextModel=mi(this,this.editor.onDidChangeModel,()=>this.editor.getModel()),this.uiState=Ke(this,s=>{var b;if(this.isDisposed.read(s))return;const r=this.currentTextModel.read(s);if(r!==this.model.targetTextModel.read(s))return;const o=this.model.ghostText.read(s);if(!o)return;let a=(b=this.model.range)==null?void 0:b.read(s);a&&a.startLineNumber===a.endLineNumber&&a.startColumn===a.endColumn&&(a=void 0);const l=(a?a.startLineNumber===a.endLineNumber:!0)&&o.parts.length===1&&o.parts[0].lines.length===1,c=o.parts.length===1&&o.parts[0].lines.every(y=>y.length===0),d=[],u=[];function h(y,S){if(u.length>0){const x=u[u.length-1];S&&x.decorations.push(new ko(x.content.length+1,x.content.length+1+y[0].length,S,0)),x.content+=y[0],y=y.slice(1)}for(const x of y)u.push({content:x,decorations:S?[new ko(1,x.length+1,S,0)]:[]})}const f=r.getLineContent(o.lineNumber);let g,p=0;if(!c&&(l||!a)){for(const y of o.parts){let S=y.lines;a&&!l&&(h(S,k6),S=[]),g===void 0?(d.push({column:y.column,text:S[0],preview:y.preview}),S=S.slice(1)):h([f.substring(p,y.column-1)],void 0),S.length>0&&(h(S,k6),g===void 0&&y.column<=f.length&&(g=y.column)),p=y.column-1}g!==void 0&&h([f.substring(p)],void 0)}const _=g!==void 0?new uke(g,f.length+1):void 0,w=l||!a?o.lineNumber:a.endLineNumber-1;return{inlineTexts:d,additionalLines:u,hiddenRange:_,lineNumber:w,additionalReservedLineCount:this.model.minReservedLineCount.read(s),targetTextModel:r,range:a,isSingleLine:l,isPureRemove:c}}),this.decorations=Ke(this,s=>{const r=this.uiState.read(s);if(!r)return[];const o=[];if(r.hiddenRange&&o.push({range:r.hiddenRange.toRange(r.lineNumber),options:{inlineClassName:"inline-edit-hidden",description:"inline-edit-hidden"}}),r.range){const a=[];if(r.isSingleLine)a.push(r.range);else if(!r.isPureRemove){const l=r.range.endLineNumber-r.range.startLineNumber;for(let c=0;c<l;c++){const d=r.range.startLineNumber+c,u=r.targetTextModel.getLineFirstNonWhitespaceColumn(d),h=r.targetTextModel.getLineLastNonWhitespaceColumn(d),f=new M(d,u,d,h);a.push(f)}}for(const l of a)o.push({range:l,options:XS})}if(r.range&&!r.isSingleLine&&r.isPureRemove){const a=new M(r.range.startLineNumber,1,r.range.endLineNumber-1,1);o.push({range:a,options:ED})}for(const a of r.inlineTexts)o.push({range:M.fromPositions(new Y(r.lineNumber,a.column)),options:{description:k6,after:{content:a.text,inlineClassName:a.preview?"inline-edit-decoration-preview":"inline-edit-decoration",cursorStops:wd.Left},showIfCollapsed:!0}});return o}),this._register(Ye(()=>{this.isDisposed.set(!0,void 0)})),this._register(hke(this.editor,this.decorations))}};jq=S1t([x1t(2,un)],jq);var gee=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Th=function(n,e){return function(t,i){e(t,i,n)}},J2;let Kq=class extends ee{constructor(e,t,i){super(),this.editor=e,this.model=t,this.instantiationService=i,this.alwaysShowToolbar=mi(this,this.editor.onDidChangeConfiguration,()=>this.editor.getOption(63).showToolbar==="always"),this.sessionPosition=void 0,this.position=Ke(this,s=>{var l,c;const r=(l=this.model.read(s))==null?void 0:l.model.ghostText.read(s);if(!this.alwaysShowToolbar.read(s)||!r||r.parts.length===0)return this.sessionPosition=void 0,null;const o=r.parts[0].column;this.sessionPosition&&this.sessionPosition.lineNumber!==r.lineNumber&&(this.sessionPosition=void 0);const a=new Y(r.lineNumber,Math.min(o,((c=this.sessionPosition)==null?void 0:c.column)??Number.MAX_SAFE_INTEGER));return this.sessionPosition=a,a}),this._register(da((s,r)=>{if(!this.model.read(s)||!this.alwaysShowToolbar.read(s))return;const a=r.add(this.instantiationService.createInstance(qq,this.editor,!0,this.position));e.addContentWidget(a),r.add(Ye(()=>e.removeContentWidget(a)))}))}};Kq=gee([Th(2,Ze)],Kq);var p_;let qq=(p_=class extends ee{constructor(e,t,i,s,r,o){super(),this.editor=e,this.withBorder=t,this._position=i,this._contextKeyService=r,this._menuService=o,this.id=`InlineEditHintsContentWidget${J2.id++}`,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this.nodes=Pt("div.inlineEditHints",{className:this.withBorder?".withBorder":""},[Pt("div@toolBar")]),this.inlineCompletionsActionsMenus=this._register(this._menuService.createMenu(ze.InlineEditActions,this._contextKeyService)),this.toolBar=this._register(s.createInstance(Gq,this.nodes.toolBar,this.editor,ze.InlineEditToolbar,{menuOptions:{renderShortTitle:!0},toolbarOptions:{primaryGroup:a=>a.startsWith("primary")},actionViewItemProvider:(a,l)=>{if(a instanceof Za)return s.createInstance(L1t,a,void 0)},telemetrySource:"InlineEditToolbar"})),this._register(this.toolBar.onDidChangeDropdownVisibility(a=>{J2._dropDownVisible=a})),this._register(gt(a=>{this._position.read(a),this.editor.layoutContentWidget(this)})),this._register(gt(a=>{const l=[];for(const[c,d]of this.inlineCompletionsActionsMenus.getActions())for(const u of d)u instanceof Za&&l.push(u);l.length>0&&l.unshift(new Ts),this.toolBar.setAdditionalSecondaryActions(l)}))}getId(){return this.id}getDomNode(){return this.nodes.root}getPosition(){return{position:this._position.get(),preference:[1,2],positionAffinity:3}}},J2=p_,p_._dropDownVisible=!1,p_.id=0,p_);qq=J2=gee([Th(3,Ze),Th(4,at),Th(5,Yl)],qq);class L1t extends O_{updateLabel(){const e=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!e)return super.updateLabel();if(this.label){const t=Pt("div.keybinding").root;this._register(new zx(t,Ka,{disableTitle:!0,...rSe})).set(e),this.label.textContent=this._action.label,this.label.appendChild(t),this.label.classList.add("inlineEditStatusBarItemLabel")}}updateTooltip(){}}let Gq=class extends DD{constructor(e,t,i,s,r,o,a,l,c,d){super(e,{resetMenu:i,...s},r,o,a,l,c,d),this.editor=t,this.menuId=i,this.options2=s,this.menuService=r,this.contextKeyService=o,this.menu=this._store.add(this.menuService.createMenu(this.menuId,this.contextKeyService,{emitEventsForSubmenuChanges:!0})),this.additionalActions=[],this.prependedPrimaryActions=[],this._store.add(this.menu.onDidChange(()=>this.updateToolbar())),this._store.add(this.editor.onDidChangeCursorPosition(()=>this.updateToolbar())),this.updateToolbar()}updateToolbar(){var i,s,r,o,a,l,c;const e=[],t=[];LB(this.menu,(i=this.options2)==null?void 0:i.menuOptions,{primary:e,secondary:t},(r=(s=this.options2)==null?void 0:s.toolbarOptions)==null?void 0:r.primaryGroup,(a=(o=this.options2)==null?void 0:o.toolbarOptions)==null?void 0:a.shouldInlineSubmenu,(c=(l=this.options2)==null?void 0:l.toolbarOptions)==null?void 0:c.useSeparatorsInPrimaryActions),t.push(...this.additionalActions),e.unshift(...this.prependedPrimaryActions),this.setActions(e,t)}setAdditionalSecondaryActions(e){dn(this.additionalActions,e,(t,i)=>t===i)||(this.additionalActions=e,this.updateToolbar())}};Gq=gee([Th(4,Yl),Th(5,at),Th(6,ol),Th(7,hi),Th(8,Vi),Th(9,Hr)],Gq);var Tke=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},eM=function(n,e){return function(t,i){e(t,i,n)}},kk,Yq;function*k1t(n,e,t=1){e===void 0&&([e,n]=[n,0]);for(let i=n;i<e;i+=t)yield i}function E6(n){var i;const e=((i=n[0].match(/^\s*/))==null?void 0:i[0])??"",t=e.length;return{text:n.map(s=>s.replace(new RegExp("^"+e),"")),shift:t}}var Bw;let Zq=(Bw=class extends ee{static _createUniqueUri(){return Xe.from({scheme:"inline-edit-widget",path:new Date().toString()+String(kk._modelId++)})}constructor(e,t,i,s,r){super(),this._editor=e,this._model=t,this._instantiationService=i,this._diffProviderFactoryService=s,this._modelService=r,this._position=Ke(this,o=>{const a=this._model.read(o);if(!a||a.text.length===0||a.range.startLineNumber===a.range.endLineNumber&&!(a.range.startColumn===a.range.endColumn&&a.range.startColumn===1))return null;const l=this._editor.getModel();if(!l)return null;const c=Array.from(k1t(a.range.startLineNumber,a.range.endLineNumber+1)),d=c.map(p=>l.getLineLastNonWhitespaceColumn(p)),u=Math.max(...d),h=c[d.indexOf(u)],f=new Y(h,u);return{top:a.range.startLineNumber,left:f}}),this._text=Ke(this,o=>{const a=this._model.read(o);if(!a)return{text:"",shift:0};const l=E6(a.text.split(`
`));return{text:l.text.join(`
`),shift:l.shift}}),this._originalModel=io(()=>this._modelService.createModel("",null,kk._createUniqueUri())).keepObserved(this._store),this._modifiedModel=io(()=>this._modelService.createModel("",null,kk._createUniqueUri())).keepObserved(this._store),this._diff=Ke(this,o=>{var a,l;return(l=(a=this._diffPromise.read(o))==null?void 0:a.promiseResult.read(o))==null?void 0:l.data}),this._diffPromise=Ke(this,o=>{const a=this._model.read(o);if(!a)return;const l=this._editor.getModel();if(!l)return;const c=E6(l.getValueInRange(a.range).split(`
`)).text.join(`
`),d=E6(a.text.split(`
`)).text.join(`
`);this._originalModel.get().setValue(c),this._modifiedModel.get().setValue(d);const u=this._diffProviderFactoryService.createDiffProvider({diffAlgorithm:"advanced"});return yB.fromFn(async()=>{const h=await u.computeDiff(this._originalModel.get(),this._modifiedModel.get(),{computeMoves:!1,ignoreTrimWhitespace:!1,maxComputationTimeMs:1e3},xt.None);if(!h.identical)return h.changes})}),this._register(da((o,a)=>{if(!this._model.read(o)||this._position.get()===null)return;const c=a.add(this._instantiationService.createInstance(Xq,this._editor,this._position,this._text.map(d=>d.text),this._text.map(d=>d.shift),this._diff));e.addOverlayWidget(c),a.add(Ye(()=>e.removeOverlayWidget(c)))}))}},kk=Bw,Bw._modelId=0,Bw);Zq=kk=Tke([eM(2,Ze),eM(3,sT),eM(4,Zi)],Zq);var Ww;let Xq=(Ww=class extends ee{constructor(e,t,i,s,r,o){var a;super(),this._editor=e,this._position=t,this._text=i,this._shift=s,this._diff=r,this._instantiationService=o,this.id=`InlineEditSideBySideContentWidget${Yq.id++}`,this.allowEditorOverflow=!1,this._nodes=xe("div.inlineEditSideBySide",void 0),this._scrollChanged=pr("editor.onDidScrollChange",this._editor.onDidScrollChange),this._previewEditor=this._register(this._instantiationService.createInstance(Pd,this._nodes,{glyphMargin:!1,lineNumbers:"off",minimap:{enabled:!1},guides:{indentation:!1,bracketPairs:!1,bracketPairsHorizontal:!1,highlightActiveIndentation:!1},folding:!1,selectOnLineNumbers:!1,selectionHighlight:!1,columnSelection:!1,overviewRulerBorder:!1,overviewRulerLanes:0,lineDecorationsWidth:0,lineNumbersMinChars:0,scrollbar:{vertical:"hidden",horizontal:"hidden",alwaysConsumeMouseWheel:!1,handleMouseWheel:!1},readOnly:!0,wordWrap:"off",wordWrapOverride1:"off",wordWrapOverride2:"off",wrappingIndent:"none",wrappingStrategy:void 0},{contributions:[],isSimpleWidget:!0},this._editor)),this._previewEditorObs=$a(this._previewEditor),this._editorObs=$a(this._editor),this._previewTextModel=this._register(this._instantiationService.createInstance(yu,"",((a=this._editor.getModel())==null?void 0:a.getLanguageId())??Ro,yu.DEFAULT_CREATION_OPTIONS,null)),this._setText=Ke(l=>{const c=this._text.read(l);c&&this._previewTextModel.setValue(c)}).recomputeInitiallyAndOnChange(this._store),this._decorations=Ke(this,l=>{this._setText.read(l);const c=this._position.read(l);if(!c)return{org:[],mod:[]};const d=this._diff.read(l);if(!d)return{org:[],mod:[]};const u=[],h=[];if(d.length===1&&d[0].innerChanges[0].modifiedRange.equalsRange(this._previewTextModel.getFullModelRange()))return{org:[],mod:[]};const f=this._shift.get(),g=p=>new M(p.startLineNumber+c.top-1,p.startColumn+f,p.endLineNumber+c.top-1,p.endColumn+f);for(const p of d)if(p.original.isEmpty||u.push({range:g(p.original.toInclusiveRange()),options:ED}),p.modified.isEmpty||h.push({range:p.modified.toInclusiveRange(),options:$O}),p.modified.isEmpty||p.original.isEmpty)p.original.isEmpty||u.push({range:g(p.original.toInclusiveRange()),options:bJ}),p.modified.isEmpty||h.push({range:p.modified.toInclusiveRange(),options:_J});else for(const _ of p.innerChanges||[])p.original.contains(_.originalRange.startLineNumber)&&u.push({range:g(_.originalRange),options:_.originalRange.isEmpty()?wJ:XS}),p.modified.contains(_.modifiedRange.startLineNumber)&&h.push({range:_.modifiedRange,options:_.modifiedRange.isEmpty()?vJ:jO});return{org:u,mod:h}}),this._originalDecorations=Ke(this,l=>this._decorations.read(l).org),this._modifiedDecorations=Ke(this,l=>this._decorations.read(l).mod),this._previewEditor.setModel(this._previewTextModel),this._register(this._editorObs.setDecorations(this._originalDecorations)),this._register(this._previewEditorObs.setDecorations(this._modifiedDecorations)),this._register(gt(l=>{const c=this._previewEditorObs.contentWidth.read(l),d=this._text.read(l).split(`
`).length-1,u=this._editor.getOption(67)*d;c<=0||this._previewEditor.layout({height:u,width:c})})),this._register(gt(l=>{this._position.read(l),this._editor.layoutOverlayWidget(this)})),this._register(gt(l=>{this._scrollChanged.read(l),this._position.read(l)&&this._editor.layoutOverlayWidget(this)}))}getId(){return this.id}getDomNode(){return this._nodes}getPosition(){const e=this._position.get();if(!e)return null;const t=this._editor.getLayoutInfo(),i=this._editor.getScrolledVisiblePosition(new Y(e.top,1));if(!i)return null;const s=i.top-1,r=this._editor.getOffsetForColumn(e.left.lineNumber,e.left.column);return{preference:{left:t.contentLeft+r+10,top:s}}}},Yq=Ww,Ww.id=0,Ww);Xq=Yq=Tke([eM(5,Ze)],Xq);var E1t=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Pv=function(n,e){return function(t,i){e(t,i,n)}},Ek,fc;let Eo=(fc=class extends ee{static get(e){return e.getContribution(Ek.ID)}constructor(e,t,i,s,r,o,a,l){super(),this.editor=e,this.instantiationService=t,this.contextKeyService=i,this.languageFeaturesService=s,this._commandService=r,this._configurationService=o,this._diffProviderFactoryService=a,this._modelService=l,this._isVisibleContext=Ek.inlineEditVisibleContext.bindTo(this.contextKeyService),this._isCursorAtInlineEditContext=Ek.cursorAtInlineEditContext.bindTo(this.contextKeyService),this._currentEdit=Nt(this,void 0),this._currentWidget=io(this._currentEdit,g=>{const p=this._currentEdit.read(g);if(!p)return;const _=p.range.endLineNumber,w=p.range.endColumn,b=p.text.endsWith(`
`)&&!(p.range.startLineNumber===p.range.endLineNumber&&p.range.startColumn===p.range.endColumn)?p.text.slice(0,-1):p.text,y=new $D(_,[new bF(w,b,!1)]),S=p.range.startLineNumber===p.range.endLineNumber&&y.parts.length===1&&y.parts[0].lines.length===1,x=p.text==="";return!S&&!x?void 0:this.instantiationService.createInstance(jq,this.editor,{ghostText:Sc(y),minReservedLineCount:Sc(0),targetTextModel:Sc(this.editor.getModel()??void 0),range:Sc(p.range)})}),this._isAccepting=Nt(this,!1),this._enabled=mi(this,this.editor.onDidChangeConfiguration,()=>this.editor.getOption(63).enabled),this._fontFamily=mi(this,this.editor.onDidChangeConfiguration,()=>this.editor.getOption(63).fontFamily);const c=pr("InlineEditController.modelContentChangedSignal",e.onDidChangeModelContent);this._register(gt(g=>{this._enabled.read(g)&&(c.read(g),!this._isAccepting.read(g)&&this.getInlineEdit(e,!0))}));const d=mi(this,e.onDidChangeCursorPosition,()=>e.getPosition());this._register(gt(g=>{if(!this._enabled.read(g))return;const p=d.read(g);p&&this.checkCursorPosition(p)})),this._register(gt(g=>{const p=this._currentEdit.read(g);if(this._isCursorAtInlineEditContext.set(!1),!p){this._isVisibleContext.set(!1);return}this._isVisibleContext.set(!0);const _=e.getPosition();_&&this.checkCursorPosition(_)}));const u=pr("InlineEditController.editorBlurSignal",e.onDidBlurEditorWidget);this._register(gt(async g=>{var p;this._enabled.read(g)&&(u.read(g),!(this._configurationService.getValue("editor.experimentalInlineEdit.keepOnBlur")||e.getOption(63).keepOnBlur)&&((p=this._currentRequestCts)==null||p.dispose(!0),this._currentRequestCts=void 0,await this.clear(!1)))}));const h=pr("InlineEditController.editorFocusSignal",e.onDidFocusEditorText);this._register(gt(g=>{this._enabled.read(g)&&(h.read(g),this.getInlineEdit(e,!0))}));const f=this._register(V0e());this._register(gt(g=>{const p=this._fontFamily.read(g);f.setStyle(p===""||p==="default"?"":`
.monaco-editor .inline-edit-decoration,
.monaco-editor .inline-edit-decoration-preview,
.monaco-editor .inline-edit {
	font-family: ${p};
}`)})),this._register(new Kq(this.editor,this._currentWidget,this.instantiationService)),this._register(new Zq(this.editor,this._currentEdit,this.instantiationService,this._diffProviderFactoryService,this._modelService))}checkCursorPosition(e){if(!this._currentEdit){this._isCursorAtInlineEditContext.set(!1);return}const t=this._currentEdit.get();if(!t){this._isCursorAtInlineEditContext.set(!1);return}this._isCursorAtInlineEditContext.set(M.containsPosition(t.range,e))}validateInlineEdit(e,t){var i;if(t.text.includes(`
`)&&t.range.startLineNumber!==t.range.endLineNumber&&t.range.startColumn!==t.range.endColumn){if(t.range.startColumn!==1)return!1;const r=t.range.endLineNumber,o=t.range.endColumn,a=((i=e.getModel())==null?void 0:i.getLineLength(r))??0;if(o!==a+1)return!1}return!0}async fetchInlineEdit(e,t){this._currentRequestCts&&this._currentRequestCts.dispose(!0);const i=e.getModel();if(!i)return;const s=i.getVersionId(),r=this.languageFeaturesService.inlineEditProvider.all(i);if(r.length===0)return;const o=r[0];this._currentRequestCts=new mn;const a=this._currentRequestCts.token,l=t?lP.Automatic:lP.Invoke;if(t&&await I1t(50,a),a.isCancellationRequested||i.isDisposed()||i.getVersionId()!==s)return;const d=await o.provideInlineEdit(i,{triggerKind:l},a);if(d&&!(a.isCancellationRequested||i.isDisposed()||i.getVersionId()!==s)&&this.validateInlineEdit(e,d))return d}async getInlineEdit(e,t){this._isCursorAtInlineEditContext.set(!1),await this.clear();const i=await this.fetchInlineEdit(e,t);i&&this._currentEdit.set(i,void 0)}async trigger(){await this.getInlineEdit(this.editor,!1)}async jumpBack(){this._jumpBackPosition&&(this.editor.setPosition(this._jumpBackPosition),this.editor.revealPositionInCenterIfOutsideViewport(this._jumpBackPosition))}async accept(){this._isAccepting.set(!0,void 0);const e=this._currentEdit.get();if(!e)return;let t=e.text;e.text.startsWith(`
`)&&(t=e.text.substring(1)),this.editor.pushUndoStop(),this.editor.executeEdits("acceptCurrent",[gn.replace(M.lift(e.range),t)]),e.accepted&&await this._commandService.executeCommand(e.accepted.id,...e.accepted.arguments||[]).then(void 0,Wn),this.freeEdit(e),pn(i=>{this._currentEdit.set(void 0,i),this._isAccepting.set(!1,i)})}jumpToCurrent(){var i;this._jumpBackPosition=(i=this.editor.getSelection())==null?void 0:i.getStartPosition();const e=this._currentEdit.get();if(!e)return;const t=Y.lift({lineNumber:e.range.startLineNumber,column:e.range.startColumn});this.editor.setPosition(t),this.editor.revealPositionInCenterIfOutsideViewport(t)}async clear(e=!0){const t=this._currentEdit.get();t&&(t!=null&&t.rejected)&&e&&await this._commandService.executeCommand(t.rejected.id,...t.rejected.arguments||[]).then(void 0,Wn),t&&this.freeEdit(t),this._currentEdit.set(void 0,void 0)}freeEdit(e){const t=this.editor.getModel();if(!t)return;const i=this.languageFeaturesService.inlineEditProvider.all(t);i.length!==0&&i[0].freeInlineEdit(e)}},Ek=fc,fc.ID="editor.contrib.inlineEditController",fc.inlineEditVisibleKey="inlineEditVisible",fc.inlineEditVisibleContext=new Re(fc.inlineEditVisibleKey,!1),fc.cursorAtInlineEditKey="cursorAtInlineEdit",fc.cursorAtInlineEditContext=new Re(fc.cursorAtInlineEditKey,!1),fc);Eo=Ek=E1t([Pv(1,Ze),Pv(2,at),Pv(3,Be),Pv(4,Vi),Pv(5,Tt),Pv(6,sT),Pv(7,Zi)],Eo);function I1t(n,e){return new Promise(t=>{let i;const s=setTimeout(()=>{i&&i.dispose(),t()},n);e&&(i=e.onCancellationRequested(()=>{clearTimeout(s),i&&i.dispose(),t()}))})}let D1t=class extends Oe{constructor(){super({id:b1t,label:"Accept Inline Edit",alias:"Accept Inline Edit",precondition:he.and(F.writable,Eo.inlineEditVisibleContext),kbOpts:[{weight:101,primary:2,kbExpr:he.and(F.writable,Eo.inlineEditVisibleContext,Eo.cursorAtInlineEditContext)}],menuOpts:[{menuId:ze.InlineEditToolbar,title:"Accept",group:"primary",order:1}]})}async run(e,t){const i=Eo.get(t);await(i==null?void 0:i.accept())}};class N1t extends Oe{constructor(){const e=he.and(F.writable,he.not(Eo.inlineEditVisibleKey));super({id:"editor.action.inlineEdit.trigger",label:"Trigger Inline Edit",alias:"Trigger Inline Edit",precondition:e,kbOpts:{weight:101,primary:2646,kbExpr:e}})}async run(e,t){const i=Eo.get(t);i==null||i.trigger()}}class T1t extends Oe{constructor(){const e=he.and(F.writable,Eo.inlineEditVisibleContext,he.not(Eo.cursorAtInlineEditKey));super({id:C1t,label:"Jump to Inline Edit",alias:"Jump to Inline Edit",precondition:e,kbOpts:{weight:101,primary:2646,kbExpr:e},menuOpts:[{menuId:ze.InlineEditToolbar,title:"Jump To Edit",group:"primary",order:3,when:e}]})}async run(e,t){const i=Eo.get(t);i==null||i.jumpToCurrent()}}class R1t extends Oe{constructor(){const e=he.and(F.writable,Eo.cursorAtInlineEditContext);super({id:y1t,label:"Jump Back from Inline Edit",alias:"Jump Back from Inline Edit",precondition:e,kbOpts:{weight:110,primary:2646,kbExpr:e},menuOpts:[{menuId:ze.InlineEditToolbar,title:"Jump Back",group:"primary",order:3,when:e}]})}async run(e,t){const i=Eo.get(t);i==null||i.jumpBack()}}class A1t extends Oe{constructor(){const e=he.and(F.writable,Eo.inlineEditVisibleContext);super({id:w1t,label:"Reject Inline Edit",alias:"Reject Inline Edit",precondition:e,kbOpts:{weight:100,primary:9,kbExpr:e},menuOpts:[{menuId:ze.InlineEditToolbar,title:"Reject",group:"secondary",order:2}]})}async run(e,t){const i=Eo.get(t);await(i==null?void 0:i.clear())}}we(D1t);we(A1t);we(T1t);we(R1t);we(N1t);Xt(Eo.ID,Eo,3);const M1t="editor.action.inlineEdits.accept",P1t="editor.action.inlineEdits.showPrevious",O1t="editor.action.inlineEdits.showNext",hx=new Re("inlineEditsVisible",!1,v("inlineEditsVisible","Whether an inline edit is visible")),F1t=new Re("inlineEditsIsPinned",!1,v("isPinned","Whether an inline edit is visible")),Gee=class Gee extends ee{constructor(e){super(),this._editor=e,this._editorObs=$a(this._editor),this._placeholderText=this._editorObs.getOption(88),this._state=Il({owner:this,equalsFn:jP},t=>{const i=this._placeholderText.read(t);if(i&&this._editorObs.valueIsEmpty.read(t))return{placeholder:i}}),this._shouldViewBeAlive=B1t(this,t=>{var i;return((i=this._state.read(t))==null?void 0:i.placeholder)!==void 0}),this._view=sv((t,i)=>{if(!this._shouldViewBeAlive.read(t))return;const s=Pt("div.editorPlaceholder");i.add(gt(r=>{const o=this._state.read(r),a=(o==null?void 0:o.placeholder)!==void 0;s.root.style.display=a?"block":"none",s.root.innerText=(o==null?void 0:o.placeholder)??""})),i.add(gt(r=>{const o=this._editorObs.layoutInfo.read(r);s.root.style.left=`${o.contentLeft}px`,s.root.style.width=o.contentWidth-o.verticalScrollbarWidth+"px",s.root.style.top=`${this._editor.getTopForLineNumber(0)}px`})),i.add(gt(r=>{s.root.style.fontFamily=this._editorObs.getOption(49).read(r),s.root.style.fontSize=this._editorObs.getOption(52).read(r)+"px",s.root.style.lineHeight=this._editorObs.getOption(67).read(r)+"px"})),i.add(this._editorObs.createOverlayWidget({allowEditorOverflow:!1,minContentWidthInPx:Sc(0),position:Sc(null),domNode:s.root}))}),this._view.recomputeInitiallyAndOnChange(this._store)}};Gee.ID="editor.contrib.placeholderText";let XD=Gee;function B1t(n,e){return YN(n,(t,i)=>i===!0?!0:e(t))}var W1t=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},H1t=function(n,e){return function(t,i){e(t,i,n)}};class V1t{constructor(e,t,i){this.range=e,this.newLines=t,this.changes=i}}let Qq=class extends ee{constructor(e,t,i,s){super(),this._editor=e,this._edit=t,this._userPrompt=i,this._instantiationService=s,this._editorObs=$a(this._editor),this._elements=Pt("div.inline-edits-widget",{style:{position:"absolute",overflow:"visible",top:"0px",left:"0px"}},[Pt("div@editorContainer",{style:{position:"absolute",top:"0px",left:"0px",width:"500px",height:"500px"}},[Pt("div.toolbar@toolbar",{style:{position:"absolute",top:"-25px",left:"0px"}}),Pt("div.promptEditor@promptEditor",{style:{position:"absolute",top:"-25px",left:"80px",width:"300px",height:"22px"}}),Pt("div.preview@editor",{style:{position:"absolute",top:"0px",left:"0px"}})]),SC("svg",{style:{overflow:"visible",pointerEvents:"none"}},[SC("defs",[SC("linearGradient",{id:"Gradient2",x1:"0",y1:"0",x2:"1",y2:"0"},[SC("stop",{offset:"0%",class:"gradient-stop"}),SC("stop",{offset:"100%",class:"gradient-stop"})])]),SC("path@path",{d:"",fill:"url(#Gradient2)"})])]),this._previewTextModel=this._register(this._instantiationService.createInstance(yu,"",Ro,yu.DEFAULT_CREATION_OPTIONS,null)),this._setText=Ke(o=>{const a=this._edit.read(o);a&&this._previewTextModel.setValue(a.newLines.join(`
`))}).recomputeInitiallyAndOnChange(this._store),this._promptTextModel=this._register(this._instantiationService.createInstance(yu,"",Ro,yu.DEFAULT_CREATION_OPTIONS,null)),this._promptEditor=this._register(this._instantiationService.createInstance(Pd,this._elements.promptEditor,{glyphMargin:!1,lineNumbers:"off",minimap:{enabled:!1},guides:{indentation:!1,bracketPairs:!1,bracketPairsHorizontal:!1,highlightActiveIndentation:!1},folding:!1,selectOnLineNumbers:!1,selectionHighlight:!1,columnSelection:!1,overviewRulerBorder:!1,overviewRulerLanes:0,lineDecorationsWidth:0,lineNumbersMinChars:0,placeholder:"Describe the change you want...",fontFamily:zSe},{contributions:$b.getSomeEditorContributions([Cd.ID,XD.ID,sx.ID]),isSimpleWidget:!0},this._editor)),this._previewEditor=this._register(this._instantiationService.createInstance(Pd,this._elements.editor,{glyphMargin:!1,lineNumbers:"off",minimap:{enabled:!1},guides:{indentation:!1,bracketPairs:!1,bracketPairsHorizontal:!1,highlightActiveIndentation:!1},folding:!1,selectOnLineNumbers:!1,selectionHighlight:!1,columnSelection:!1,overviewRulerBorder:!1,overviewRulerLanes:0,lineDecorationsWidth:0,lineNumbersMinChars:0},{contributions:[]},this._editor)),this._previewEditorObs=$a(this._previewEditor),this._decorations=Ke(this,o=>{var d;this._setText.read(o);const a=(d=this._edit.read(o))==null?void 0:d.changes;if(!a)return[];const l=[],c=[];if(a.length===1&&a[0].innerChanges[0].modifiedRange.equalsRange(this._previewTextModel.getFullModelRange()))return[];for(const u of a)if(u.original.isEmpty||l.push({range:u.original.toInclusiveRange(),options:ED}),u.modified.isEmpty||c.push({range:u.modified.toInclusiveRange(),options:$O}),u.modified.isEmpty||u.original.isEmpty)u.original.isEmpty||l.push({range:u.original.toInclusiveRange(),options:bJ}),u.modified.isEmpty||c.push({range:u.modified.toInclusiveRange(),options:_J});else for(const h of u.innerChanges||[])u.original.contains(h.originalRange.startLineNumber)&&l.push({range:h.originalRange,options:h.originalRange.isEmpty()?wJ:XS}),u.modified.contains(h.modifiedRange.startLineNumber)&&c.push({range:h.modifiedRange,options:h.modifiedRange.isEmpty()?vJ:jO});return c}),this._layout1=Ke(this,o=>{const a=this._editor.getModel(),l=this._edit.read(o);if(!l)return null;const c=l.range;let d=0;for(let f=c.startLineNumber;f<c.endLineNumberExclusive;f++){const g=a.getLineMaxColumn(f),p=this._editor.getOffsetForColumn(f,g);d=Math.max(d,p)}return{left:this._editor.getLayoutInfo().contentLeft+d}}),this._layout=Ke(this,o=>{const a=this._edit.read(o);if(!a)return null;const l=a.range,c=this._editorObs.scrollLeft.read(o),d=this._layout1.read(o).left+20-c,u=this._editor.getTopForLineNumber(l.startLineNumber)-this._editorObs.scrollTop.read(o),h=this._editor.getTopForLineNumber(l.endLineNumberExclusive)-this._editorObs.scrollTop.read(o),f=new V1(d,u),g=new V1(d,h),p=h-u,_=50,w=this._editor.getOption(67)*a.newLines.length,b=p-w,y=new V1(d+_,u+b/2),S=new V1(d+_,h-b/2);return{topCode:f,bottomCode:g,codeHeight:p,topEdit:y,bottomEdit:S,editHeight:w}});const r=Ke(this,o=>this._edit.read(o)!==void 0||this._userPrompt.read(o)!==void 0);this._register(tp(this._elements.root,{display:Ke(this,o=>r.read(o)?"block":"none")})),this._register(M1(this._editor.getDomNode(),this._elements.root)),this._register($a(e).createOverlayWidget({domNode:this._elements.root,position:Sc(null),allowEditorOverflow:!1,minContentWidthInPx:Ke(o=>{var c;const a=(c=this._layout1.read(o))==null?void 0:c.left;if(a===void 0)return 0;const l=this._previewEditorObs.contentWidth.read(o);return a+l})})),this._previewEditor.setModel(this._previewTextModel),this._register(this._previewEditorObs.setDecorations(this._decorations)),this._register(gt(o=>{const a=this._layout.read(o);if(!a)return;const{topCode:l,bottomCode:c,topEdit:d,bottomEdit:u,editHeight:h}=a,f=10,g=0,p=40,_=new U1t().moveTo(l).lineTo(l.deltaX(f)).curveTo(l.deltaX(f+p),d.deltaX(-p-g),d.deltaX(-g)).lineTo(d).lineTo(u).lineTo(u.deltaX(-g)).curveTo(u.deltaX(-p-g),c.deltaX(f+p),c.deltaX(f)).lineTo(c).build();this._elements.path.setAttribute("d",_),this._elements.editorContainer.style.top=`${d.y}px`,this._elements.editorContainer.style.left=`${d.x}px`,this._elements.editorContainer.style.height=`${h}px`;const w=this._previewEditorObs.contentWidth.read(o);this._previewEditor.layout({height:h,width:w})})),this._promptEditor.setModel(this._promptTextModel),this._promptEditor.layout(),this._register($1t(z1t(this._userPrompt,o=>o??"",o=>o),$a(this._promptEditor).value)),this._register(gt(o=>{const a=$a(this._promptEditor).isFocused.read(o);this._elements.root.classList.toggle("focused",a)}))}};Qq=W1t([H1t(3,Ze)],Qq);function z1t(n,e,t){return KN(void 0,i=>e(n.read(i)),(i,s)=>n.set(t(i),s))}class V1{constructor(e,t){this.x=e,this.y=t}deltaX(e){return new V1(this.x+e,this.y)}}class U1t{constructor(){this._data=""}moveTo(e){return this._data+=`M ${e.x} ${e.y} `,this}lineTo(e){return this._data+=`L ${e.x} ${e.y} `,this}curveTo(e,t,i){return this._data+=`C ${e.x} ${e.y} ${t.x} ${t.y} ${i.x} ${i.y} `,this}build(){return this._data}}function $1t(n,e){const t=new ue;return t.add(gt(i=>{const s=n.read(i);e.set(s,void 0)})),t.add(gt(i=>{const s=e.read(i);n.set(s,void 0)})),t}var j1t=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},I6=function(n,e){return function(t,i){e(t,i,n)}},Ik,Hw;let Jq=(Hw=class extends ee{static _createUniqueUri(){return Xe.from({scheme:"inline-edits",path:new Date().toString()+String(Ik._modelId++)})}constructor(e,t,i,s,r,o,a){super(),this.textModel=e,this._textModelVersionId=t,this._selection=i,this._debounceValue=s,this.languageFeaturesService=r,this._diffProviderFactoryService=o,this._modelService=a,this._forceUpdateExplicitlySignal=Bx(this),this._selectedInlineCompletionId=Nt(this,void 0),this._isActive=Nt(this,!1),this._originalModel=io(()=>this._modelService.createModel("",null,Ik._createUniqueUri())).keepObserved(this._store),this._modifiedModel=io(()=>this._modelService.createModel("",null,Ik._createUniqueUri())).keepObserved(this._store),this._pinnedRange=new q1t(this.textModel,this._textModelVersionId),this.isPinned=this._pinnedRange.range.map(l=>!!l),this.userPrompt=Nt(this,void 0),this.inlineEdit=Ke(this,l=>{var c,d;return(d=(c=this._inlineEdit.read(l))==null?void 0:c.promiseResult.read(l))==null?void 0:d.data}),this._inlineEdit=Ke(this,l=>{const c=this.selectedInlineEdit.read(l);if(!c)return;const d=c.inlineCompletion.range;if(c.inlineCompletion.insertText.trim()==="")return;let u=c.inlineCompletion.insertText.split(/\r\n|\r|\n/);function h(_){var b;const w=((b=_[0].match(/^\s*/))==null?void 0:b[0])??"";return _.map(y=>y.replace(new RegExp("^"+w),""))}u=h(u);let g=this.textModel.getValueInRange(d).split(/\r\n|\r|\n/);g=h(g),this._originalModel.get().setValue(g.join(`
`)),this._modifiedModel.get().setValue(u.join(`
`));const p=this._diffProviderFactoryService.createDiffProvider({diffAlgorithm:"advanced"});return yB.fromFn(async()=>{const _=await p.computeDiff(this._originalModel.get(),this._modifiedModel.get(),{computeMoves:!1,ignoreTrimWhitespace:!1,maxComputationTimeMs:1e3},xt.None);if(!_.identical)return new V1t(wt.fromRangeInclusive(d),h(u),_.changes)})}),this._fetchStore=this._register(new ue),this._inlineEditsFetchResult=sD(this,void 0),this._inlineEdits=Il({owner:this,equalsFn:jP},l=>{var c;return((c=this._inlineEditsFetchResult.read(l))==null?void 0:c.completions.map(d=>new K1t(d)))??[]}),this._fetchInlineEditsPromise=F1e({owner:this,createEmptyChangeSummary:()=>({inlineCompletionTriggerKind:Du.Automatic}),handleChange:(l,c)=>(l.didChange(this._forceUpdateExplicitlySignal)&&(c.inlineCompletionTriggerKind=Du.Explicit),!0)},async(l,c)=>{this._fetchStore.clear(),this._forceUpdateExplicitlySignal.read(l),this._textModelVersionId.read(l);function d(p,_){return _(p)}const u=this._pinnedRange.range.read(l)??d(this._selection.read(l),p=>p.isEmpty()?void 0:p);if(!u){this._inlineEditsFetchResult.set(void 0,void 0),this.userPrompt.set(void 0,void 0);return}const h={triggerKind:c.inlineCompletionTriggerKind,selectedSuggestionInfo:void 0,userPrompt:this.userPrompt.read(l)},f=kV(this._fetchStore);await Xg(200,f);const g=await fke(this.languageFeaturesService.inlineCompletionsProvider,u,this.textModel,h,f);f.isCancellationRequested||this._inlineEditsFetchResult.set(g,void 0)}),this._filteredInlineEditItems=Il({owner:this,equalsFn:$P()},l=>this._inlineEdits.read(l)),this.selectedInlineCompletionIndex=Ke(this,l=>{const c=this._selectedInlineCompletionId.read(l),d=this._filteredInlineEditItems.read(l),u=this._selectedInlineCompletionId===void 0?-1:d.findIndex(h=>h.semanticId===c);return u===-1?(this._selectedInlineCompletionId.set(void 0,void 0),0):u}),this.selectedInlineEdit=Ke(this,l=>{const c=this._filteredInlineEditItems.read(l),d=this.selectedInlineCompletionIndex.read(l);return c[d]}),this._register(Wx(this._fetchInlineEditsPromise))}async triggerExplicitly(e){_0(e,t=>{this._isActive.set(!0,t),this._forceUpdateExplicitlySignal.trigger(t)}),await this._fetchInlineEditsPromise.get()}stop(e){_0(e,t=>{this.userPrompt.set(void 0,t),this._isActive.set(!1,t),this._inlineEditsFetchResult.set(void 0,t),this._pinnedRange.setRange(void 0,t)})}async _deltaSelectedInlineCompletionIndex(e){await this.triggerExplicitly();const t=this._filteredInlineEditItems.get()||[];if(t.length>0){const i=(this.selectedInlineCompletionIndex.get()+e+t.length)%t.length;this._selectedInlineCompletionId.set(t[i].semanticId,void 0)}else this._selectedInlineCompletionId.set(void 0,void 0)}async next(){await this._deltaSelectedInlineCompletionIndex(1)}async previous(){await this._deltaSelectedInlineCompletionIndex(-1)}async accept(e){if(e.getModel()!==this.textModel)throw new li;const t=this.selectedInlineEdit.get();t&&(e.pushUndoStop(),e.executeEdits("inlineSuggestion.accept",[t.inlineCompletion.toSingleTextEdit().toSingleEditOperation()]),this.stop())}},Ik=Hw,Hw._modelId=0,Hw);Jq=Ik=j1t([I6(4,Be),I6(5,sT),I6(6,Zi)],Jq);class K1t{constructor(e){this.inlineCompletion=e,this.semanticId=this.inlineCompletion.hash()}}class q1t extends ee{constructor(e,t){super(),this._textModel=e,this._versionId=t,this._decorations=Nt(this,[]),this.range=Ke(this,i=>{this._versionId.read(i);const s=this._decorations.read(i)[0];return s?this._textModel.getDecorationRange(s)??null:null}),this._register(Ye(()=>{this._textModel.deltaDecorations(this._decorations.get(),[])}))}setRange(e,t){this._decorations.set(this._textModel.deltaDecorations(this._decorations.get(),e?[{range:e,options:{description:"trackedRange"}}]:[]),t)}}var G1t=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},ek=function(n,e){return function(t,i){e(t,i,n)}},eG,Vw;let rp=(Vw=class extends ee{static get(e){return e.getContribution(eG.ID)}constructor(e,t,i,s,r,o){super(),this.editor=e,this._instantiationService=t,this._contextKeyService=i,this._debounceService=s,this._languageFeaturesService=r,this._configurationService=o,this._enabled=ght("editor.inlineEdits.enabled",!1,this._configurationService),this._editorObs=$a(this.editor),this._selection=Ke(this,a=>this._editorObs.cursorSelection.read(a)??new $e(1,1,1,1)),this._debounceValue=this._debounceService.for(this._languageFeaturesService.inlineCompletionsProvider,"InlineEditsDebounce",{min:50,max:50}),this.model=io(this,a=>{if(!this._enabled.read(a)||this._editorObs.isReadonly.read(a))return;const l=this._editorObs.model.read(a);return l?this._instantiationService.createInstance(Fa(Jq,a),l,this._editorObs.versionId,this._selection,this._debounceValue):void 0}),this._hadInlineEdit=YN(this,(a,l)=>{var c;return l||((c=this.model.read(a))==null?void 0:c.inlineEdit.read(a))!==void 0}),this._widget=io(this,a=>{if(this._hadInlineEdit.read(a))return this._instantiationService.createInstance(Fa(Qq,a),this.editor,this.model.map((l,c)=>l==null?void 0:l.inlineEdit.read(c)),Y1t(l=>{var c;return((c=this.model.read(l))==null?void 0:c.userPrompt)??Nt("empty","")}))}),this._register(eu(hx,this._contextKeyService,a=>{var l;return!!((l=this.model.read(a))!=null&&l.inlineEdit.read(a))})),this._register(eu(F1t,this._contextKeyService,a=>{var l;return!!((l=this.model.read(a))!=null&&l.isPinned.read(a))})),this.model.recomputeInitiallyAndOnChange(this._store),this._widget.recomputeInitiallyAndOnChange(this._store)}},eG=Vw,Vw.ID="editor.contrib.inlineEditsController",Vw);rp=eG=G1t([ek(1,Ze),ek(2,at),ek(3,Zl),ek(4,Be),ek(5,Tt)],rp);function Y1t(n){return KN(void 0,e=>n(e).read(e),(e,t)=>{n(void 0).set(e,t)})}function mT(n){return{label:n.value,alias:n.original}}const x5=class x5 extends Oe{constructor(){super({id:x5.ID,...mT(lt("action.inlineEdits.showNext","Show Next Inline Edit")),precondition:he.and(F.writable,hx),kbOpts:{weight:100,primary:606}})}async run(e,t){var s;const i=rp.get(t);(s=i==null?void 0:i.model.get())==null||s.next()}};x5.ID=O1t;let tG=x5;const L5=class L5 extends Oe{constructor(){super({id:L5.ID,...mT(lt("action.inlineEdits.showPrevious","Show Previous Inline Edit")),precondition:he.and(F.writable,hx),kbOpts:{weight:100,primary:604}})}async run(e,t){var s;const i=rp.get(t);(s=i==null?void 0:i.model.get())==null||s.previous()}};L5.ID=P1t;let iG=L5;class Z1t extends Oe{constructor(){super({id:"editor.action.inlineEdits.trigger",...mT(lt("action.inlineEdits.trigger","Trigger Inline Edit")),precondition:F.writable})}async run(e,t){const i=rp.get(t);await O1e(async s=>{var r;await((r=i==null?void 0:i.model.get())==null?void 0:r.triggerExplicitly(s))})}}class X1t extends Oe{constructor(){super({id:M1t,...mT(lt("action.inlineEdits.accept","Accept Inline Edit")),precondition:hx,menuOpts:{menuId:ze.InlineEditsActions,title:v("inlineEditsActions","Accept Inline Edit"),group:"primary",order:1,icon:ye.check},kbOpts:{primary:2058,weight:2e4,kbExpr:hx}})}async run(e,t){var s;t instanceof Pd&&(t=t.getParentEditor());const i=rp.get(t);i&&((s=i.model.get())==null||s.accept(i.editor),i.editor.focus())}}const k5=class k5 extends Oe{constructor(){super({id:k5.ID,...mT(lt("action.inlineEdits.hide","Hide Inline Edit")),precondition:hx,kbOpts:{weight:100,primary:9}})}async run(e,t){const i=rp.get(t);pn(s=>{var r;(r=i==null?void 0:i.model.get())==null||r.stop(s)})}};k5.ID="editor.action.inlineEdits.hide";let nG=k5;Xt(rp.ID,rp,3);we(Z1t);we(tG);we(iG);we(X1t);we(nG);const R0={Visible:new Re("parameterHintsVisible",!1),MultipleSignatures:new Re("parameterHintsMultipleSignatures",!1)};async function Rke(n,e,t,i,s){const r=n.ordered(e);for(const o of r)try{const a=await o.provideSignatureHelp(e,t,s,i);if(a)return a}catch(a){Wn(a)}}Gt.registerCommand("_executeSignatureHelpProvider",async(n,...e)=>{const[t,i,s]=e;si(Xe.isUri(t)),si(Y.isIPosition(i)),si(typeof s=="string"||!s);const r=n.get(Be),o=await n.get(_a).createModelReference(t);try{const a=await Rke(r.signatureHelpProvider,o.object.textEditorModel,Y.lift(i),{triggerKind:Zh.Invoke,isRetrigger:!1,triggerCharacter:s},xt.None);return a?(setTimeout(()=>a.dispose(),0),a.value):void 0}finally{o.dispose()}});var Kp;(function(n){n.Default={type:0};class e{constructor(s,r){this.request=s,this.previouslyActiveHints=r,this.type=2}}n.Pending=e;class t{constructor(s){this.hints=s,this.type=1}}n.Active=t})(Kp||(Kp={}));const E5=class E5 extends ee{constructor(e,t,i=E5.DEFAULT_DELAY){super(),this._onChangedHints=this._register(new X),this.onChangedHints=this._onChangedHints.event,this.triggerOnType=!1,this._state=Kp.Default,this._pendingTriggers=[],this._lastSignatureHelpResult=this._register(new As),this.triggerChars=new yP,this.retriggerChars=new yP,this.triggerId=0,this.editor=e,this.providers=t,this.throttledDelayer=new Rc(i),this._register(this.editor.onDidBlurEditorWidget(()=>this.cancel())),this._register(this.editor.onDidChangeConfiguration(()=>this.onEditorConfigurationChange())),this._register(this.editor.onDidChangeModel(s=>this.onModelChanged())),this._register(this.editor.onDidChangeModelLanguage(s=>this.onModelChanged())),this._register(this.editor.onDidChangeCursorSelection(s=>this.onCursorChange(s))),this._register(this.editor.onDidChangeModelContent(s=>this.onModelContentChange())),this._register(this.providers.onDidChange(this.onModelChanged,this)),this._register(this.editor.onDidType(s=>this.onDidType(s))),this.onEditorConfigurationChange(),this.onModelChanged()}get state(){return this._state}set state(e){this._state.type===2&&this._state.request.cancel(),this._state=e}cancel(e=!1){this.state=Kp.Default,this.throttledDelayer.cancel(),e||this._onChangedHints.fire(void 0)}trigger(e,t){const i=this.editor.getModel();if(!i||!this.providers.has(i))return;const s=++this.triggerId;this._pendingTriggers.push(e),this.throttledDelayer.trigger(()=>this.doTrigger(s),t).catch(pt)}next(){if(this.state.type!==1)return;const e=this.state.hints.signatures.length,t=this.state.hints.activeSignature,i=t%e===e-1,s=this.editor.getOption(86).cycle;if((e<2||i)&&!s){this.cancel();return}this.updateActiveSignature(i&&s?0:t+1)}previous(){if(this.state.type!==1)return;const e=this.state.hints.signatures.length,t=this.state.hints.activeSignature,i=t===0,s=this.editor.getOption(86).cycle;if((e<2||i)&&!s){this.cancel();return}this.updateActiveSignature(i&&s?e-1:t-1)}updateActiveSignature(e){this.state.type===1&&(this.state=new Kp.Active({...this.state.hints,activeSignature:e}),this._onChangedHints.fire(this.state.hints))}async doTrigger(e){const t=this.state.type===1||this.state.type===2,i=this.getLastActiveHints();if(this.cancel(!0),this._pendingTriggers.length===0)return!1;const s=this._pendingTriggers.reduce(Q1t);this._pendingTriggers=[];const r={triggerKind:s.triggerKind,triggerCharacter:s.triggerCharacter,isRetrigger:t,activeSignatureHelp:i};if(!this.editor.hasModel())return!1;const o=this.editor.getModel(),a=this.editor.getPosition();this.state=new Kp.Pending(Ds(l=>Rke(this.providers,o,a,r,l)),i);try{const l=await this.state.request;return e!==this.triggerId?(l==null||l.dispose(),!1):!l||!l.value.signatures||l.value.signatures.length===0?(l==null||l.dispose(),this._lastSignatureHelpResult.clear(),this.cancel(),!1):(this.state=new Kp.Active(l.value),this._lastSignatureHelpResult.value=l,this._onChangedHints.fire(this.state.hints),!0)}catch(l){return e===this.triggerId&&(this.state=Kp.Default),pt(l),!1}}getLastActiveHints(){switch(this.state.type){case 1:return this.state.hints;case 2:return this.state.previouslyActiveHints;default:return}}get isTriggered(){return this.state.type===1||this.state.type===2||this.throttledDelayer.isTriggered()}onModelChanged(){this.cancel(),this.triggerChars.clear(),this.retriggerChars.clear();const e=this.editor.getModel();if(e)for(const t of this.providers.ordered(e)){for(const i of t.signatureHelpTriggerCharacters||[])if(i.length){const s=i.charCodeAt(0);this.triggerChars.add(s),this.retriggerChars.add(s)}for(const i of t.signatureHelpRetriggerCharacters||[])i.length&&this.retriggerChars.add(i.charCodeAt(0))}}onDidType(e){if(!this.triggerOnType)return;const t=e.length-1,i=e.charCodeAt(t);(this.triggerChars.has(i)||this.isTriggered&&this.retriggerChars.has(i))&&this.trigger({triggerKind:Zh.TriggerCharacter,triggerCharacter:e.charAt(t)})}onCursorChange(e){e.source==="mouse"?this.cancel():this.isTriggered&&this.trigger({triggerKind:Zh.ContentChange})}onModelContentChange(){this.isTriggered&&this.trigger({triggerKind:Zh.ContentChange})}onEditorConfigurationChange(){this.triggerOnType=this.editor.getOption(86).enabled,this.triggerOnType||this.cancel()}dispose(){this.cancel(!0),super.dispose()}};E5.DEFAULT_DELAY=120;let sG=E5;function Q1t(n,e){switch(e.triggerKind){case Zh.Invoke:return e;case Zh.ContentChange:return n;case Zh.TriggerCharacter:default:return e}}var J1t=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},VA=function(n,e){return function(t,i){e(t,i,n)}},rG;const ml=xe,eyt=Xi("parameter-hints-next",ye.chevronDown,v("parameterHintsNextIcon","Icon for show next parameter hint.")),tyt=Xi("parameter-hints-previous",ye.chevronUp,v("parameterHintsPreviousIcon","Icon for show previous parameter hint."));var zw;let oG=(zw=class extends ee{constructor(e,t,i,s,r,o){super(),this.editor=e,this.model=t,this.telemetryService=o,this.renderDisposeables=this._register(new ue),this.visible=!1,this.announcedLabel=null,this.allowEditorOverflow=!0,this.markdownRenderer=this._register(new ep({editor:e},r,s)),this.keyVisible=R0.Visible.bindTo(i),this.keyMultipleSignatures=R0.MultipleSignatures.bindTo(i)}createParameterHintDOMNodes(){const e=ml(".editor-widget.parameter-hints-widget"),t=_e(e,ml(".phwrapper"));t.tabIndex=-1;const i=_e(t,ml(".controls")),s=_e(i,ml(".button"+ot.asCSSSelector(tyt))),r=_e(i,ml(".overloads")),o=_e(i,ml(".button"+ot.asCSSSelector(eyt)));this._register(re(s,"click",h=>{$t.stop(h),this.previous()})),this._register(re(o,"click",h=>{$t.stop(h),this.next()}));const a=ml(".body"),l=new VN(a,{alwaysConsumeMouseWheel:!0});this._register(l),t.appendChild(l.getDomNode());const c=_e(a,ml(".signature")),d=_e(a,ml(".docs"));e.style.userSelect="text",this.domNodes={element:e,signature:c,overloads:r,docs:d,scrollbar:l},this.editor.addContentWidget(this),this.hide(),this._register(this.editor.onDidChangeCursorSelection(h=>{this.visible&&this.editor.layoutContentWidget(this)}));const u=()=>{if(!this.domNodes)return;const h=this.editor.getOption(50),f=this.domNodes.element;f.style.fontSize=`${h.fontSize}px`,f.style.lineHeight=`${h.lineHeight/h.fontSize}`,f.style.setProperty("--vscode-parameterHintsWidget-editorFontFamily",h.fontFamily),f.style.setProperty("--vscode-parameterHintsWidget-editorFontFamilyDefault",To.fontFamily)};u(),this._register(Ee.chain(this.editor.onDidChangeConfiguration.bind(this.editor),h=>h.filter(f=>f.hasChanged(50)))(u)),this._register(this.editor.onDidLayoutChange(h=>this.updateMaxHeight())),this.updateMaxHeight()}show(){this.visible||(this.domNodes||this.createParameterHintDOMNodes(),this.keyVisible.set(!0),this.visible=!0,setTimeout(()=>{var e;(e=this.domNodes)==null||e.element.classList.add("visible")},100),this.editor.layoutContentWidget(this))}hide(){var e;this.renderDisposeables.clear(),this.visible&&(this.keyVisible.reset(),this.visible=!1,this.announcedLabel=null,(e=this.domNodes)==null||e.element.classList.remove("visible"),this.editor.layoutContentWidget(this))}getPosition(){return this.visible?{position:this.editor.getPosition(),preference:[1,2]}:null}render(e){if(this.renderDisposeables.clear(),!this.domNodes)return;const t=e.signatures.length>1;this.domNodes.element.classList.toggle("multiple",t),this.keyMultipleSignatures.set(t),this.domNodes.signature.innerText="",this.domNodes.docs.innerText="";const i=e.signatures[e.activeSignature];if(!i)return;const s=_e(this.domNodes.signature,ml(".code")),r=i.parameters.length>0,o=i.activeParameter??e.activeParameter;if(r)this.renderParameters(s,i,o);else{const c=_e(s,ml("span"));c.textContent=i.label}const a=i.parameters[o];if(a!=null&&a.documentation){const c=ml("span.documentation");if(typeof a.documentation=="string")c.textContent=a.documentation;else{const d=this.renderMarkdownDocs(a.documentation);c.appendChild(d.element)}_e(this.domNodes.docs,ml("p",{},c))}if(i.documentation!==void 0)if(typeof i.documentation=="string")_e(this.domNodes.docs,ml("p",{},i.documentation));else{const c=this.renderMarkdownDocs(i.documentation);_e(this.domNodes.docs,c.element)}const l=this.hasDocs(i,a);if(this.domNodes.signature.classList.toggle("has-docs",l),this.domNodes.docs.classList.toggle("empty",!l),this.domNodes.overloads.textContent=String(e.activeSignature+1).padStart(e.signatures.length.toString().length,"0")+"/"+e.signatures.length,a){let c="";const d=i.parameters[o];Array.isArray(d.label)?c=i.label.substring(d.label[0],d.label[1]):c=d.label,d.documentation&&(c+=typeof d.documentation=="string"?`, ${d.documentation}`:`, ${d.documentation.value}`),i.documentation&&(c+=typeof i.documentation=="string"?`, ${i.documentation}`:`, ${i.documentation.value}`),this.announcedLabel!==c&&(Bo(v("hint","{0}, hint",c)),this.announcedLabel=c)}this.editor.layoutContentWidget(this),this.domNodes.scrollbar.scanDomNode()}renderMarkdownDocs(e){const t=new js,i=this.renderDisposeables.add(this.markdownRenderer.render(e,{asyncRenderCallback:()=>{var r;(r=this.domNodes)==null||r.scrollbar.scanDomNode()}}));i.element.classList.add("markdown-docs");const s=t.elapsed();return s>300&&this.telemetryService.publicLog2("parameterHints.parseMarkdown",{renderDuration:s}),i}hasDocs(e,t){return!!(t&&typeof t.documentation=="string"&&wm(t.documentation).length>0||t&&typeof t.documentation=="object"&&wm(t.documentation).value.length>0||e.documentation&&typeof e.documentation=="string"&&wm(e.documentation).length>0||e.documentation&&typeof e.documentation=="object"&&wm(e.documentation.value).length>0)}renderParameters(e,t,i){const[s,r]=this.getParameterLabelOffsets(t,i),o=document.createElement("span");o.textContent=t.label.substring(0,s);const a=document.createElement("span");a.textContent=t.label.substring(s,r),a.className="parameter active";const l=document.createElement("span");l.textContent=t.label.substring(r),_e(e,o,a,l)}getParameterLabelOffsets(e,t){const i=e.parameters[t];if(i){if(Array.isArray(i.label))return i.label;if(i.label.length){const s=new RegExp(`(\\W|^)${$l(i.label)}(?=\\W|$)`,"g");s.test(e.label);const r=s.lastIndex-i.label.length;return r>=0?[r,s.lastIndex]:[0,0]}else return[0,0]}else return[0,0]}next(){this.editor.focus(),this.model.next()}previous(){this.editor.focus(),this.model.previous()}getDomNode(){return this.domNodes||this.createParameterHintDOMNodes(),this.domNodes.element}getId(){return rG.ID}updateMaxHeight(){if(!this.domNodes)return;const t=`${Math.max(this.editor.getLayoutInfo().height/4,250)}px`;this.domNodes.element.style.maxHeight=t;const i=this.domNodes.element.getElementsByClassName("phwrapper");i.length&&(i[0].style.maxHeight=t)}},rG=zw,zw.ID="editor.widget.parameterHintsWidget",zw);oG=rG=J1t([VA(2,at),VA(3,ba),VA(4,un),VA(5,Hr)],oG);B("editorHoverWidget.highlightForeground",x1,v("editorHoverWidgetHighlightForeground","Foreground color of the active item in the parameter hint."));var iyt=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},whe=function(n,e){return function(t,i){e(t,i,n)}},aG,Uw;let fx=(Uw=class extends ee{static get(e){return e.getContribution(aG.ID)}constructor(e,t,i){super(),this.editor=e,this.model=this._register(new sG(e,i.signatureHelpProvider)),this._register(this.model.onChangedHints(s=>{var r;s?(this.widget.value.show(),this.widget.value.render(s)):(r=this.widget.rawValue)==null||r.hide()})),this.widget=new Wu(()=>this._register(t.createInstance(oG,this.editor,this.model)))}cancel(){this.model.cancel()}previous(){var e;(e=this.widget.rawValue)==null||e.previous()}next(){var e;(e=this.widget.rawValue)==null||e.next()}trigger(e){this.model.trigger(e,0)}},aG=Uw,Uw.ID="editor.controller.parameterHints",Uw);fx=aG=iyt([whe(1,Ze),whe(2,Be)],fx);class nyt extends Oe{constructor(){super({id:"editor.action.triggerParameterHints",label:v("parameterHints.trigger.label","Trigger Parameter Hints"),alias:"Trigger Parameter Hints",precondition:F.hasSignatureHelpProvider,kbOpts:{kbExpr:F.editorTextFocus,primary:3082,weight:100}})}run(e,t){const i=fx.get(t);i==null||i.trigger({triggerKind:Zh.Invoke})}}Xt(fx.ID,fx,2);we(nyt);const pee=175,mee=vs.bindToContribution(fx.get);Te(new mee({id:"closeParameterHints",precondition:R0.Visible,handler:n=>n.cancel(),kbOpts:{weight:pee,kbExpr:F.focus,primary:9,secondary:[1033]}}));Te(new mee({id:"showPrevParameterHint",precondition:he.and(R0.Visible,R0.MultipleSignatures),handler:n=>n.previous(),kbOpts:{weight:pee,kbExpr:F.focus,primary:16,secondary:[528],mac:{primary:16,secondary:[528,302]}}}));Te(new mee({id:"showNextParameterHint",precondition:he.and(R0.Visible,R0.MultipleSignatures),handler:n=>n.next(),kbOpts:{weight:pee,kbExpr:F.focus,primary:18,secondary:[530],mac:{primary:18,secondary:[530,300]}}}));var syt=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},ryt=function(n,e){return function(t,i){e(t,i,n)}};class oyt{constructor(e){this.instantiationService=e}init(...e){}}function ayt(n,e){return class extends e{constructor(){super(...arguments),this._autorun=void 0}init(...i){this._autorun=da((s,r)=>{const o=Fa(n(),s);r.add(this.instantiationService.createInstance(o,...i))})}dispose(){var i;(i=this._autorun)==null||i.dispose()}}}function lyt(n){return UB()?ayt(n,lG):n()}let lG=class extends oyt{constructor(e,t){super(t),this.init(e)}};lG=syt([ryt(1,Ze)],lG);Xt(XD.ID,lyt(()=>XD),0);B("editor.placeholder.foreground",nnt,v("placeholderForeground","Foreground color of the placeholder text in the editor."));var cyt=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},zA=function(n,e){return function(t,i){e(t,i,n)}};const Qx=new Re("renameInputVisible",!1,v("renameInputVisible","Whether the rename input widget is visible"));new Re("renameInputFocused",!1,v("renameInputFocused","Whether the rename input widget is focused"));let cG=class{constructor(e,t,i,s,r,o){this._editor=e,this._acceptKeybindings=t,this._themeService=i,this._keybindingService=s,this._logService=o,this.allowEditorOverflow=!0,this._disposables=new ue,this._visibleContextKey=Qx.bindTo(r),this._isEditingRenameCandidate=!1,this._nRenameSuggestionsInvocations=0,this._hadAutomaticRenameSuggestionsInvocation=!1,this._candidates=new Set,this._beforeFirstInputFieldEditSW=new js,this._inputWithButton=new dyt,this._disposables.add(this._inputWithButton),this._editor.addContentWidget(this),this._disposables.add(this._editor.onDidChangeConfiguration(a=>{a.hasChanged(50)&&this._updateFont()})),this._disposables.add(i.onDidColorThemeChange(this._updateStyles,this))}dispose(){this._disposables.dispose(),this._editor.removeContentWidget(this)}getId(){return"__renameInputWidget"}getDomNode(){return this._domNode||(this._domNode=document.createElement("div"),this._domNode.className="monaco-editor rename-box",this._domNode.appendChild(this._inputWithButton.domNode),this._renameCandidateListView=this._disposables.add(new _ee(this._domNode,{fontInfo:this._editor.getOption(50),onFocusChange:e=>{this._inputWithButton.input.value=e,this._isEditingRenameCandidate=!1},onSelectionChange:()=>{this._isEditingRenameCandidate=!1,this.acceptInput(!1)}})),this._disposables.add(this._inputWithButton.onDidInputChange(()=>{var e,t,i;((e=this._renameCandidateListView)==null?void 0:e.focusedCandidate)!==void 0&&(this._isEditingRenameCandidate=!0),this._timeBeforeFirstInputFieldEdit??(this._timeBeforeFirstInputFieldEdit=this._beforeFirstInputFieldEditSW.elapsed()),((t=this._renameCandidateProvidersCts)==null?void 0:t.token.isCancellationRequested)===!1&&this._renameCandidateProvidersCts.cancel(),(i=this._renameCandidateListView)==null||i.clearFocus()})),this._label=document.createElement("div"),this._label.className="rename-label",this._domNode.appendChild(this._label),this._updateFont(),this._updateStyles(this._themeService.getColorTheme())),this._domNode}_updateStyles(e){if(!this._domNode)return;const t=e.getColor(Ax),i=e.getColor(ZCe);this._domNode.style.backgroundColor=String(e.getColor(Pl)??""),this._domNode.style.boxShadow=t?` 0 0 8px 2px ${t}`:"",this._domNode.style.border=i?`1px solid ${i}`:"",this._domNode.style.color=String(e.getColor(JCe)??"");const s=e.getColor(e1e);this._inputWithButton.domNode.style.backgroundColor=String(e.getColor(yU)??""),this._inputWithButton.input.style.backgroundColor=String(e.getColor(yU)??""),this._inputWithButton.domNode.style.borderWidth=s?"1px":"0px",this._inputWithButton.domNode.style.borderStyle=s?"solid":"none",this._inputWithButton.domNode.style.borderColor=(s==null?void 0:s.toString())??"none"}_updateFont(){if(this._domNode===void 0)return;si(this._label!==void 0,"RenameWidget#_updateFont: _label must not be undefined given _domNode is defined"),this._editor.applyFontInfo(this._inputWithButton.input);const e=this._editor.getOption(50);this._label.style.fontSize=`${this._computeLabelFontSize(e.fontSize)}px`}_computeLabelFontSize(e){return e*.8}getPosition(){if(!this._visible||!this._editor.hasModel()||!this._editor.getDomNode())return null;const e=R_(this.getDomNode().ownerDocument.body),t=Fn(this._editor.getDomNode()),i=this._getTopForPosition();this._nPxAvailableAbove=i+t.top,this._nPxAvailableBelow=e.height-this._nPxAvailableAbove;const s=this._editor.getOption(67),{totalHeight:r}=QD.getLayoutInfo({lineHeight:s}),o=this._nPxAvailableBelow>r*6?[2,1]:[1,2];return{position:this._position,preference:o}}beforeRender(){var i,s;const[e,t]=this._acceptKeybindings;return this._label.innerText=v({key:"label",comment:['placeholders are keybindings, e.g "F2 to Rename, Shift+F2 to Preview"']},"{0} to Rename, {1} to Preview",(i=this._keybindingService.lookupKeybinding(e))==null?void 0:i.getLabel(),(s=this._keybindingService.lookupKeybinding(t))==null?void 0:s.getLabel()),this._domNode.style.minWidth="200px",null}afterRender(e){if(e===null){this.cancelInput(!0,"afterRender (because position is null)");return}if(!this._editor.hasModel()||!this._editor.getDomNode())return;si(this._renameCandidateListView),si(this._nPxAvailableAbove!==void 0),si(this._nPxAvailableBelow!==void 0);const t=_g(this._inputWithButton.domNode),i=_g(this._label);let s;e===2?s=this._nPxAvailableBelow:s=this._nPxAvailableAbove,this._renameCandidateListView.layout({height:s-i-t,width:Pa(this._inputWithButton.domNode)})}acceptInput(e){var t;this._trace("invoking acceptInput"),(t=this._currentAcceptInput)==null||t.call(this,e)}cancelInput(e,t){var i;(i=this._currentCancelInput)==null||i.call(this,e)}focusNextRenameSuggestion(){var e;(e=this._renameCandidateListView)!=null&&e.focusNext()||(this._inputWithButton.input.value=this._currentName)}focusPreviousRenameSuggestion(){var e;(e=this._renameCandidateListView)!=null&&e.focusPrevious()||(this._inputWithButton.input.value=this._currentName)}getInput(e,t,i,s,r){const{start:o,end:a}=this._getSelection(e,t);this._renameCts=r;const l=new ue;this._nRenameSuggestionsInvocations=0,this._hadAutomaticRenameSuggestionsInvocation=!1,s===void 0?this._inputWithButton.button.style.display="none":(this._inputWithButton.button.style.display="flex",this._requestRenameCandidatesOnce=s,this._requestRenameCandidates(t,!1),l.add(re(this._inputWithButton.button,"click",()=>this._requestRenameCandidates(t,!0))),l.add(re(this._inputWithButton.button,Se.KEY_DOWN,d=>{const u=new Oi(d);(u.equals(3)||u.equals(10))&&(u.stopPropagation(),u.preventDefault(),this._requestRenameCandidates(t,!0))}))),this._isEditingRenameCandidate=!1,this._domNode.classList.toggle("preview",i),this._position=new Y(e.startLineNumber,e.startColumn),this._currentName=t,this._inputWithButton.input.value=t,this._inputWithButton.input.setAttribute("selectionStart",o.toString()),this._inputWithButton.input.setAttribute("selectionEnd",a.toString()),this._inputWithButton.input.size=Math.max((e.endColumn-e.startColumn)*1.1,20),this._beforeFirstInputFieldEditSW.reset(),l.add(Ye(()=>{this._renameCts=void 0,r.dispose(!0)})),l.add(Ye(()=>{this._renameCandidateProvidersCts!==void 0&&(this._renameCandidateProvidersCts.dispose(!0),this._renameCandidateProvidersCts=void 0)})),l.add(Ye(()=>this._candidates.clear()));const c=new Ex;return c.p.finally(()=>{l.dispose(),this._hide()}),this._currentCancelInput=d=>{var u;return this._trace("invoking _currentCancelInput"),this._currentAcceptInput=void 0,this._currentCancelInput=void 0,(u=this._renameCandidateListView)==null||u.clearCandidates(),c.complete(d),!0},this._currentAcceptInput=d=>{this._trace("invoking _currentAcceptInput"),si(this._renameCandidateListView!==void 0);const u=this._renameCandidateListView.nCandidates;let h,f;const g=this._renameCandidateListView.focusedCandidate;if(g!==void 0?(this._trace("using new name from renameSuggestion"),h=g,f={k:"renameSuggestion"}):(this._trace("using new name from inputField"),h=this._inputWithButton.input.value,f=this._isEditingRenameCandidate?{k:"userEditedRenameSuggestion"}:{k:"inputField"}),h===t||h.trim().length===0){this.cancelInput(!0,"_currentAcceptInput (because newName === value || newName.trim().length === 0)");return}this._currentAcceptInput=void 0,this._currentCancelInput=void 0,this._renameCandidateListView.clearCandidates(),c.complete({newName:h,wantsPreview:i&&d,stats:{source:f,nRenameSuggestions:u,timeBeforeFirstInputFieldEdit:this._timeBeforeFirstInputFieldEdit,nRenameSuggestionsInvocations:this._nRenameSuggestionsInvocations,hadAutomaticRenameSuggestionsInvocation:this._hadAutomaticRenameSuggestionsInvocation}})},l.add(r.token.onCancellationRequested(()=>this.cancelInput(!0,"cts.token.onCancellationRequested"))),l.add(this._editor.onDidBlurEditorWidget(()=>{var d;return this.cancelInput(!((d=this._domNode)!=null&&d.ownerDocument.hasFocus()),"editor.onDidBlurEditorWidget")})),this._show(),c.p}_requestRenameCandidates(e,t){if(this._requestRenameCandidatesOnce!==void 0&&(this._renameCandidateProvidersCts!==void 0&&this._renameCandidateProvidersCts.dispose(!0),si(this._renameCts),this._inputWithButton.buttonState!=="stop")){this._renameCandidateProvidersCts=new mn;const i=t?MI.Invoke:MI.Automatic,s=this._requestRenameCandidatesOnce(i,this._renameCandidateProvidersCts.token);if(s.length===0){this._inputWithButton.setSparkleButton();return}t||(this._hadAutomaticRenameSuggestionsInvocation=!0),this._nRenameSuggestionsInvocations+=1,this._inputWithButton.setStopButton(),this._updateRenameCandidates(s,e,this._renameCts.token)}}_getSelection(e,t){si(this._editor.hasModel());const i=this._editor.getSelection();let s=0,r=t.length;return!M.isEmpty(i)&&!M.spansMultipleLines(i)&&M.containsRange(e,i)&&(s=Math.max(0,i.startColumn-e.startColumn),r=Math.min(e.endColumn,i.endColumn)-e.startColumn),{start:s,end:r}}_show(){this._trace("invoking _show"),this._editor.revealLineInCenterIfOutsideViewport(this._position.lineNumber,0),this._visible=!0,this._visibleContextKey.set(!0),this._editor.layoutContentWidget(this),setTimeout(()=>{this._inputWithButton.input.focus(),this._inputWithButton.input.setSelectionRange(parseInt(this._inputWithButton.input.getAttribute("selectionStart")),parseInt(this._inputWithButton.input.getAttribute("selectionEnd")))},100)}async _updateRenameCandidates(e,t,i){const s=(...c)=>this._trace("_updateRenameCandidates",...c);s("start");const r=await ON(Promise.allSettled(e),i);if(this._inputWithButton.setSparkleButton(),r===void 0){s("returning early - received updateRenameCandidates results - undefined");return}const o=r.flatMap(c=>c.status==="fulfilled"&&Yh(c.value)?c.value:[]);s(`received updateRenameCandidates results - total (unfiltered) ${o.length} candidates.`);const a=qg(o,c=>c.newSymbolName);s(`distinct candidates - ${a.length} candidates.`);const l=a.filter(({newSymbolName:c})=>c.trim().length>0&&c!==this._inputWithButton.input.value&&c!==t&&!this._candidates.has(c));if(s(`valid distinct candidates - ${o.length} candidates.`),l.forEach(c=>this._candidates.add(c.newSymbolName)),l.length<1){s("returning early - no valid distinct candidates");return}s("setting candidates"),this._renameCandidateListView.setCandidates(l),s("asking editor to re-layout"),this._editor.layoutContentWidget(this)}_hide(){this._trace("invoked _hide"),this._visible=!1,this._visibleContextKey.reset(),this._editor.layoutContentWidget(this)}_getTopForPosition(){const e=this._editor.getVisibleRanges();let t;return e.length>0?t=e[0].startLineNumber:(this._logService.warn("RenameWidget#_getTopForPosition: this should not happen - visibleRanges is empty"),t=Math.max(1,this._position.lineNumber-5)),this._editor.getTopForLineNumber(this._position.lineNumber)-this._editor.getTopForLineNumber(t)}_trace(...e){this._logService.trace("RenameWidget",...e)}};cG=cyt([zA(2,ws),zA(3,hi),zA(4,at),zA(5,Cr)],cG);class _ee{constructor(e,t){this._disposables=new ue,this._availableHeight=0,this._minimumWidth=0,this._lineHeight=t.fontInfo.lineHeight,this._typicalHalfwidthCharacterWidth=t.fontInfo.typicalHalfwidthCharacterWidth,this._listContainer=document.createElement("div"),this._listContainer.className="rename-box rename-candidate-list-container",e.appendChild(this._listContainer),this._listWidget=_ee._createListWidget(this._listContainer,this._candidateViewHeight,t.fontInfo),this._listWidget.onDidChangeFocus(i=>{i.elements.length===1&&t.onFocusChange(i.elements[0].newSymbolName)},this._disposables),this._listWidget.onDidChangeSelection(i=>{i.elements.length===1&&t.onSelectionChange()},this._disposables),this._disposables.add(this._listWidget.onDidBlur(i=>{this._listWidget.setFocus([])})),this._listWidget.style($0({listInactiveFocusForeground:ZI,listInactiveFocusBackground:XI}))}dispose(){this._listWidget.dispose(),this._disposables.dispose()}layout({height:e,width:t}){this._availableHeight=e,this._minimumWidth=t}setCandidates(e){this._listWidget.splice(0,0,e);const t=this._pickListHeight(this._listWidget.length),i=this._pickListWidth(e);this._listWidget.layout(t,i),this._listContainer.style.height=`${t}px`,this._listContainer.style.width=`${i}px`,lf(v("renameSuggestionsReceivedAria","Received {0} rename suggestions",e.length))}clearCandidates(){this._listContainer.style.height="0px",this._listContainer.style.width="0px",this._listWidget.splice(0,this._listWidget.length,[])}get nCandidates(){return this._listWidget.length}get focusedCandidate(){if(this._listWidget.length===0)return;const e=this._listWidget.getSelectedElements()[0];if(e!==void 0)return e.newSymbolName;const t=this._listWidget.getFocusedElements()[0];if(t!==void 0)return t.newSymbolName}focusNext(){if(this._listWidget.length===0)return!1;const e=this._listWidget.getFocus();if(e.length===0)return this._listWidget.focusFirst(),this._listWidget.reveal(0),!0;if(e[0]===this._listWidget.length-1)return this._listWidget.setFocus([]),this._listWidget.reveal(0),!1;{this._listWidget.focusNext();const t=this._listWidget.getFocus()[0];return this._listWidget.reveal(t),!0}}focusPrevious(){if(this._listWidget.length===0)return!1;const e=this._listWidget.getFocus();if(e.length===0){this._listWidget.focusLast();const t=this._listWidget.getFocus()[0];return this._listWidget.reveal(t),!0}else{if(e[0]===0)return this._listWidget.setFocus([]),!1;{this._listWidget.focusPrevious();const t=this._listWidget.getFocus()[0];return this._listWidget.reveal(t),!0}}}clearFocus(){this._listWidget.setFocus([])}get _candidateViewHeight(){const{totalHeight:e}=QD.getLayoutInfo({lineHeight:this._lineHeight});return e}_pickListHeight(e){const t=this._candidateViewHeight*e;return Math.min(t,this._availableHeight,this._candidateViewHeight*7)}_pickListWidth(e){const t=Math.ceil(Math.max(...e.map(s=>s.newSymbolName.length))*this._typicalHalfwidthCharacterWidth);return Math.max(this._minimumWidth,25+t+10)}static _createListWidget(e,t,i){const s=new class{getTemplateId(o){return"candidate"}getHeight(o){return t}},r=new class{constructor(){this.templateId="candidate"}renderTemplate(o){return new QD(o,i)}renderElement(o,a,l){l.populate(o)}disposeTemplate(o){o.dispose()}};return new Ql("NewSymbolNameCandidates",e,s,[r],{keyboardSupport:!1,mouseSupport:!0,multipleSelectionSupport:!1})}}class dyt{constructor(){this._onDidInputChange=new X,this.onDidInputChange=this._onDidInputChange.event,this._disposables=new ue}get domNode(){return this._domNode||(this._domNode=document.createElement("div"),this._domNode.className="rename-input-with-button",this._domNode.style.display="flex",this._domNode.style.flexDirection="row",this._domNode.style.alignItems="center",this._inputNode=document.createElement("input"),this._inputNode.className="rename-input",this._inputNode.type="text",this._inputNode.style.border="none",this._inputNode.setAttribute("aria-label",v("renameAriaLabel","Rename input. Type new name and press Enter to commit.")),this._domNode.appendChild(this._inputNode),this._buttonNode=document.createElement("div"),this._buttonNode.className="rename-suggestions-button",this._buttonNode.setAttribute("tabindex","0"),this._buttonGenHoverText=v("generateRenameSuggestionsButton","Generate new name suggestions"),this._buttonCancelHoverText=v("cancelRenameSuggestionsButton","Cancel"),this._buttonHover=Gu().setupManagedHover(Vo("element"),this._buttonNode,this._buttonGenHoverText),this._disposables.add(this._buttonHover),this._domNode.appendChild(this._buttonNode),this._disposables.add(re(this.input,Se.INPUT,()=>this._onDidInputChange.fire())),this._disposables.add(re(this.input,Se.KEY_DOWN,e=>{const t=new Oi(e);(t.keyCode===15||t.keyCode===17)&&this._onDidInputChange.fire()})),this._disposables.add(re(this.input,Se.CLICK,()=>this._onDidInputChange.fire())),this._disposables.add(re(this.input,Se.FOCUS,()=>{this.domNode.style.outlineWidth="1px",this.domNode.style.outlineStyle="solid",this.domNode.style.outlineOffset="-1px",this.domNode.style.outlineColor="var(--vscode-focusBorder)"})),this._disposables.add(re(this.input,Se.BLUR,()=>{this.domNode.style.outline="none"}))),this._domNode}get input(){return si(this._inputNode),this._inputNode}get button(){return si(this._buttonNode),this._buttonNode}get buttonState(){return this._buttonState}setSparkleButton(){var e;this._buttonState="sparkle",this._sparkleIcon??(this._sparkleIcon=g0(ye.sparkle)),nr(this.button),this.button.appendChild(this._sparkleIcon),this.button.setAttribute("aria-label","Generating new name suggestions"),(e=this._buttonHover)==null||e.update(this._buttonGenHoverText),this.input.focus()}setStopButton(){var e;this._buttonState="stop",this._stopIcon??(this._stopIcon=g0(ye.primitiveSquare)),nr(this.button),this.button.appendChild(this._stopIcon),this.button.setAttribute("aria-label","Cancel generating new name suggestions"),(e=this._buttonHover)==null||e.update(this._buttonCancelHoverText),this.input.focus()}dispose(){this._disposables.dispose()}}const YE=class YE{constructor(e,t){this._domNode=document.createElement("div"),this._domNode.className="rename-box rename-candidate",this._domNode.style.display="flex",this._domNode.style.columnGap="5px",this._domNode.style.alignItems="center",this._domNode.style.height=`${t.lineHeight}px`,this._domNode.style.padding=`${YE._PADDING}px`;const i=document.createElement("div");i.style.display="flex",i.style.alignItems="center",i.style.width=i.style.height=`${t.lineHeight*.8}px`,this._domNode.appendChild(i),this._icon=g0(ye.sparkle),this._icon.style.display="none",i.appendChild(this._icon),this._label=document.createElement("div"),rr(this._label,t),this._domNode.appendChild(this._label),e.appendChild(this._domNode)}populate(e){this._updateIcon(e),this._updateLabel(e)}_updateIcon(e){var i;const t=!!((i=e.tags)!=null&&i.includes(AV.AIGenerated));this._icon.style.display=t?"inherit":"none"}_updateLabel(e){this._label.innerText=e.newSymbolName}static getLayoutInfo({lineHeight:e}){return{totalHeight:e+YE._PADDING*2}}dispose(){}};YE._PADDING=2;let QD=YE;var uyt=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Pp=function(n,e){return function(t,i){e(t,i,n)}},dG;class vee{constructor(e,t,i){this.model=e,this.position=t,this._providerRenameIdx=0,this._providers=i.ordered(e)}hasProvider(){return this._providers.length>0}async resolveRenameLocation(e){const t=[];for(this._providerRenameIdx=0;this._providerRenameIdx<this._providers.length;this._providerRenameIdx++){const s=this._providers[this._providerRenameIdx];if(!s.resolveRenameLocation)break;const r=await s.resolveRenameLocation(this.model,this.position,e);if(r){if(r.rejectReason){t.push(r.rejectReason);continue}return r}}this._providerRenameIdx=0;const i=this.model.getWordAtPosition(this.position);return i?{range:new M(this.position.lineNumber,i.startColumn,this.position.lineNumber,i.endColumn),text:i.word,rejectReason:t.length>0?t.join(`
`):void 0}:{range:M.fromPositions(this.position),text:"",rejectReason:t.length>0?t.join(`
`):void 0}}async provideRenameEdits(e,t){return this._provideRenameEdits(e,this._providerRenameIdx,[],t)}async _provideRenameEdits(e,t,i,s){const r=this._providers[t];if(!r)return{edits:[],rejectReason:i.join(`
`)};const o=await r.provideRenameEdits(this.model,this.position,e,s);if(o){if(o.rejectReason)return this._provideRenameEdits(e,t+1,i.concat(o.rejectReason),s)}else return this._provideRenameEdits(e,t+1,i.concat(v("no result","No result.")),s);return o}}async function hyt(n,e,t,i){const s=new vee(e,t,n),r=await s.resolveRenameLocation(xt.None);return r!=null&&r.rejectReason?{edits:[],rejectReason:r.rejectReason}:s.provideRenameEdits(i,xt.None)}var $w;let j_=($w=class{static get(e){return e.getContribution(dG.ID)}constructor(e,t,i,s,r,o,a,l,c){this.editor=e,this._instaService=t,this._notificationService=i,this._bulkEditService=s,this._progressService=r,this._logService=o,this._configService=a,this._languageFeaturesService=l,this._telemetryService=c,this._disposableStore=new ue,this._cts=new mn,this._renameWidget=this._disposableStore.add(this._instaService.createInstance(cG,this.editor,["acceptRenameInput","acceptRenameInputWithPreview"]))}dispose(){this._disposableStore.dispose(),this._cts.dispose(!0)}async run(){var g,p;const e=this._logService.trace.bind(this._logService,"[rename]");if(this._cts.dispose(!0),this._cts=new mn,!this.editor.hasModel()){e("editor has no model");return}const t=this.editor.getPosition(),i=new vee(this.editor.getModel(),t,this._languageFeaturesService.renameProvider);if(!i.hasProvider()){e("skeleton has no provider");return}const s=new V_(this.editor,5,void 0,this._cts.token);let r;try{e("resolving rename location");const _=i.resolveRenameLocation(s.token);this._progressService.showWhile(_,250),r=await _,e("resolved rename location")}catch(_){_ instanceof Dd?e("resolve rename location cancelled",JSON.stringify(_,null,"	")):(e("resolve rename location failed",_ instanceof Error?_:JSON.stringify(_,null,"	")),(typeof _=="string"||Mu(_))&&((g=Xa.get(this.editor))==null||g.showMessage(_||v("resolveRenameLocationFailed","An unknown error occurred while resolving rename location"),t)));return}finally{s.dispose()}if(!r){e("returning early - no loc");return}if(r.rejectReason){e(`returning early - rejected with reason: ${r.rejectReason}`,r.rejectReason),(p=Xa.get(this.editor))==null||p.showMessage(r.rejectReason,t);return}if(s.token.isCancellationRequested){e("returning early - cts1 cancelled");return}const o=new V_(this.editor,5,r.range,this._cts.token),a=this.editor.getModel(),l=this._languageFeaturesService.newSymbolNamesProvider.all(a),c=await Promise.all(l.map(async _=>[_,await _.supportsAutomaticNewSymbolNamesTriggerKind??!1])),d=(_,w)=>{let b=c.slice();return _===MI.Automatic&&(b=b.filter(([y,S])=>S)),b.map(([y])=>y.provideNewSymbolNames(a,r.range,_,w))};e("creating rename input field and awaiting its result");const u=this._bulkEditService.hasPreviewHandler()&&this._configService.getValue(this.editor.getModel().uri,"editor.rename.enablePreview"),h=await this._renameWidget.getInput(r.range,r.text,u,l.length>0?d:void 0,o);if(e("received response from rename input field"),l.length>0&&this._reportTelemetry(l.length,a.getLanguageId(),h),typeof h=="boolean"){e(`returning early - rename input field response - ${h}`),h&&this.editor.focus(),o.dispose();return}this.editor.focus(),e("requesting rename edits");const f=ON(i.provideRenameEdits(h.newName,o.token),o.token).then(async _=>{if(!_){e("returning early - no rename edits result");return}if(!this.editor.hasModel()){e("returning early - no model after rename edits are provided");return}if(_.rejectReason){e(`returning early - rejected with reason: ${_.rejectReason}`),this._notificationService.info(_.rejectReason);return}this.editor.setSelection(M.fromPositions(this.editor.getSelection().getPosition())),e("applying edits"),this._bulkEditService.apply(_,{editor:this.editor,showPreview:h.wantsPreview,label:v("label","Renaming '{0}' to '{1}'",r==null?void 0:r.text,h.newName),code:"undoredo.rename",quotableLabel:v("quotableLabel","Renaming {0} to {1}",r==null?void 0:r.text,h.newName),respectAutoSaveConfig:!0}).then(w=>{e("edits applied"),w.ariaSummary&&Bo(v("aria","Successfully renamed '{0}' to '{1}'. Summary: {2}",r.text,h.newName,w.ariaSummary))}).catch(w=>{e(`error when applying edits ${JSON.stringify(w,null,"	")}`),this._notificationService.error(v("rename.failedApply","Rename failed to apply edits")),this._logService.error(w)})},_=>{e("error when providing rename edits",JSON.stringify(_,null,"	")),this._notificationService.error(v("rename.failed","Rename failed to compute edits")),this._logService.error(_)}).finally(()=>{o.dispose()});return e("returning rename operation"),this._progressService.showWhile(f,250),f}acceptRenameInput(e){this._renameWidget.acceptInput(e)}cancelRenameInput(){this._renameWidget.cancelInput(!0,"cancelRenameInput command")}focusNextRenameSuggestion(){this._renameWidget.focusNextRenameSuggestion()}focusPreviousRenameSuggestion(){this._renameWidget.focusPreviousRenameSuggestion()}_reportTelemetry(e,t,i){const s=typeof i=="boolean"?{kind:"cancelled",languageId:t,nRenameSuggestionProviders:e}:{kind:"accepted",languageId:t,nRenameSuggestionProviders:e,source:i.stats.source.k,nRenameSuggestions:i.stats.nRenameSuggestions,timeBeforeFirstInputFieldEdit:i.stats.timeBeforeFirstInputFieldEdit,wantsPreview:i.wantsPreview,nRenameSuggestionsInvocations:i.stats.nRenameSuggestionsInvocations,hadAutomaticRenameSuggestionsInvocation:i.stats.hadAutomaticRenameSuggestionsInvocation};this._telemetryService.publicLog2("renameInvokedEvent",s)}},dG=$w,$w.ID="editor.contrib.renameController",$w);j_=dG=uyt([Pp(1,Ze),Pp(2,jn),Pp(3,$N),Pp(4,nv),Pp(5,Cr),Pp(6,iB),Pp(7,Be),Pp(8,Hr)],j_);class fyt extends Oe{constructor(){super({id:"editor.action.rename",label:v("rename.label","Rename Symbol"),alias:"Rename Symbol",precondition:he.and(F.writable,F.hasRenameProvider),kbOpts:{kbExpr:F.editorTextFocus,primary:60,weight:100},contextMenuOpts:{group:"1_modification",order:1.1}})}runCommand(e,t){const i=e.get(ri),[s,r]=Array.isArray(t)&&t||[void 0,void 0];return Xe.isUri(s)&&Y.isIPosition(r)?i.openCodeEditor({resource:s},i.getActiveCodeEditor()).then(o=>{o&&(o.setPosition(r),o.invokeWithinContext(a=>(this.reportTelemetry(a,o),this.run(a,o))))},pt):super.runCommand(e,t)}run(e,t){const i=e.get(Cr),s=j_.get(t);return s?(i.trace("[RenameAction] got controller, running..."),s.run()):(i.trace("[RenameAction] returning early - controller missing"),Promise.resolve())}}Xt(j_.ID,j_,4);we(fyt);const bee=vs.bindToContribution(j_.get);Te(new bee({id:"acceptRenameInput",precondition:Qx,handler:n=>n.acceptRenameInput(!1),kbOpts:{weight:199,kbExpr:he.and(F.focus,he.not("isComposing")),primary:3}}));Te(new bee({id:"acceptRenameInputWithPreview",precondition:he.and(Qx,he.has("config.editor.rename.enablePreview")),handler:n=>n.acceptRenameInput(!0),kbOpts:{weight:199,kbExpr:he.and(F.focus,he.not("isComposing")),primary:2051}}));Te(new bee({id:"cancelRenameInput",precondition:Qx,handler:n=>n.cancelRenameInput(),kbOpts:{weight:199,kbExpr:F.focus,primary:9,secondary:[1033]}}));Bi(class extends Ho{constructor(){super({id:"focusNextRenameSuggestion",title:{...lt("focusNextRenameSuggestion","Focus Next Rename Suggestion")},precondition:Qx,keybinding:[{primary:18,weight:199}]})}run(e){const t=e.get(ri).getFocusedCodeEditor();if(!t)return;const i=j_.get(t);i&&i.focusNextRenameSuggestion()}});Bi(class extends Ho{constructor(){super({id:"focusPreviousRenameSuggestion",title:{...lt("focusPreviousRenameSuggestion","Focus Previous Rename Suggestion")},precondition:Qx,keybinding:[{primary:16,weight:199}]})}run(e){const t=e.get(ri).getFocusedCodeEditor();if(!t)return;const i=j_.get(t);i&&i.focusPreviousRenameSuggestion()}});va("_executeDocumentRenameProvider",function(n,e,t,...i){const[s]=i;si(typeof s=="string");const{renameProvider:r}=n.get(Be);return hyt(r,e,t,s)});va("_executePrepareRename",async function(n,e,t){const{renameProvider:i}=n.get(Be),r=await new vee(e,t,i).resolveRenameLocation(xt.None);if(r!=null&&r.rejectReason)throw new Error(r.rejectReason);return r});_n.as(Bd.Configuration).registerConfiguration({id:"editor",properties:{"editor.rename.enablePreview":{scope:5,description:v("enablePreview","Enable/disable the ability to preview changes before renaming"),default:!0,type:"boolean"}}});var gyt=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Che=function(n,e){return function(t,i){e(t,i,n)}},cS;let VF=(cS=class extends ee{constructor(e,t,i){super(),this.editor=e,this.languageConfigurationService=t,this.editorWorkerService=i,this.decorations=this.editor.createDecorationsCollection(),this.options=this.createOptions(e.getOption(73)),this.computePromise=null,this.currentOccurrences={},this._register(e.onDidChangeModel(s=>{this.currentOccurrences={},this.options=this.createOptions(e.getOption(73)),this.stop(),this.computeSectionHeaders.schedule(0)})),this._register(e.onDidChangeModelLanguage(s=>{this.currentOccurrences={},this.options=this.createOptions(e.getOption(73)),this.stop(),this.computeSectionHeaders.schedule(0)})),this._register(t.onDidChange(s=>{var o;const r=(o=this.editor.getModel())==null?void 0:o.getLanguageId();r&&s.affects(r)&&(this.currentOccurrences={},this.options=this.createOptions(e.getOption(73)),this.stop(),this.computeSectionHeaders.schedule(0))})),this._register(e.onDidChangeConfiguration(s=>{this.options&&!s.hasChanged(73)||(this.options=this.createOptions(e.getOption(73)),this.updateDecorations([]),this.stop(),this.computeSectionHeaders.schedule(0))})),this._register(this.editor.onDidChangeModelContent(s=>{this.computeSectionHeaders.schedule()})),this._register(e.onDidChangeModelTokens(s=>{this.computeSectionHeaders.isScheduled()||this.computeSectionHeaders.schedule(1e3)})),this.computeSectionHeaders=this._register(new yi(()=>{this.findSectionHeaders()},250)),this.computeSectionHeaders.schedule(0)}createOptions(e){if(!e||!this.editor.hasModel())return;const t=this.editor.getModel().getLanguageId();if(!t)return;const i=this.languageConfigurationService.getLanguageConfiguration(t).comments,s=this.languageConfigurationService.getLanguageConfiguration(t).foldingRules;if(!(!i&&!(s!=null&&s.markers)))return{foldingRules:s,findMarkSectionHeaders:e.showMarkSectionHeaders,findRegionSectionHeaders:e.showRegionSectionHeaders}}findSectionHeaders(){var i,s;if(!this.editor.hasModel()||!((i=this.options)!=null&&i.findMarkSectionHeaders)&&!((s=this.options)!=null&&s.findRegionSectionHeaders))return;const e=this.editor.getModel();if(e.isDisposed()||e.isTooLargeForSyncing())return;const t=e.getVersionId();this.editorWorkerService.findSectionHeaders(e.uri,this.options).then(r=>{e.isDisposed()||e.getVersionId()!==t||this.updateDecorations(r)})}updateDecorations(e){const t=this.editor.getModel();t&&(e=e.filter(r=>{if(!r.shouldBeInComments)return!0;const o=t.validateRange(r.range),a=t.tokenization.getLineTokens(o.startLineNumber),l=a.findTokenIndexAtOffset(o.startColumn-1),c=a.getStandardTokenType(l);return a.getLanguageId(l)===t.getLanguageId()&&c===1}));const i=Object.values(this.currentOccurrences).map(r=>r.decorationId),s=e.map(r=>pyt(r));this.editor.changeDecorations(r=>{const o=r.deltaDecorations(i,s);this.currentOccurrences={};for(let a=0,l=o.length;a<l;a++){const c={sectionHeader:e[a],decorationId:o[a]};this.currentOccurrences[c.decorationId]=c}})}stop(){this.computeSectionHeaders.cancel(),this.computePromise&&(this.computePromise.cancel(),this.computePromise=null)}dispose(){super.dispose(),this.stop(),this.decorations.clear()}},cS.ID="editor.sectionHeaderDetector",cS);VF=gyt([Che(1,vn),Che(2,wa)],VF);function pyt(n){return{range:n.range,options:_t.createDynamic({description:"section-header",stickiness:3,collapseOnReplaceEdit:!0,minimap:{color:void 0,position:1,sectionHeaderStyle:n.hasSeparatorLine?2:1,sectionHeaderText:n.text}})}}Xt(VF.ID,VF,1);function myt(n){for(let e=0,t=n.length;e<t;e+=4){const i=n[e+0],s=n[e+1],r=n[e+2],o=n[e+3];n[e+0]=o,n[e+1]=r,n[e+2]=s,n[e+3]=i}}function _yt(n){const e=new Uint8Array(n.buffer,n.byteOffset,n.length*4);return $we()||myt(e),J3.wrap(e)}function Ake(n){const e=new Uint32Array(vyt(n));let t=0;if(e[t++]=n.id,n.type==="full")e[t++]=1,e[t++]=n.data.length,e.set(n.data,t),t+=n.data.length;else{e[t++]=2,e[t++]=n.deltas.length;for(const i of n.deltas)e[t++]=i.start,e[t++]=i.deleteCount,i.data?(e[t++]=i.data.length,e.set(i.data,t),t+=i.data.length):e[t++]=0}return _yt(e)}function vyt(n){let e=0;if(e+=2,n.type==="full")e+=1+n.data.length;else{e+=1,e+=3*n.deltas.length;for(const t of n.deltas)t.data&&(e+=t.data.length)}return e}function uW(n){return n&&!!n.data}function Mke(n){return n&&Array.isArray(n.edits)}class byt{constructor(e,t,i){this.provider=e,this.tokens=t,this.error=i}}function Pke(n,e){return n.has(e)}function wyt(n,e){const t=n.orderedGroups(e);return t.length>0?t[0]:[]}async function Oke(n,e,t,i,s){const r=wyt(n,e),o=await Promise.all(r.map(async a=>{let l,c=null;try{l=await a.provideDocumentSemanticTokens(e,a===t?i:null,s)}catch(d){c=d,l=null}return(!l||!uW(l)&&!Mke(l))&&(l=null),new byt(a,l,c)}));for(const a of o){if(a.error)throw a.error;if(a.tokens)return a}return o.length>0?o[0]:null}function Cyt(n,e){const t=n.orderedGroups(e);return t.length>0?t[0]:null}class yyt{constructor(e,t){this.provider=e,this.tokens=t}}function Syt(n,e){return n.has(e)}function Fke(n,e){const t=n.orderedGroups(e);return t.length>0?t[0]:[]}async function wee(n,e,t,i){const s=Fke(n,e),r=await Promise.all(s.map(async o=>{let a;try{a=await o.provideDocumentRangeSemanticTokens(e,t,i)}catch(l){Wn(l),a=null}return(!a||!uW(a))&&(a=null),new yyt(o,a)}));for(const o of r)if(o.tokens)return o;return r.length>0?r[0]:null}Gt.registerCommand("_provideDocumentSemanticTokensLegend",async(n,...e)=>{const[t]=e;si(t instanceof Xe);const i=n.get(Zi).getModel(t);if(!i)return;const{documentSemanticTokensProvider:s}=n.get(Be),r=Cyt(s,i);return r?r[0].getLegend():n.get(Vi).executeCommand("_provideDocumentRangeSemanticTokensLegend",t)});Gt.registerCommand("_provideDocumentSemanticTokens",async(n,...e)=>{const[t]=e;si(t instanceof Xe);const i=n.get(Zi).getModel(t);if(!i)return;const{documentSemanticTokensProvider:s}=n.get(Be);if(!Pke(s,i))return n.get(Vi).executeCommand("_provideDocumentRangeSemanticTokens",t,i.getFullModelRange());const r=await Oke(s,i,null,null,xt.None);if(!r)return;const{provider:o,tokens:a}=r;if(!a||!uW(a))return;const l=Ake({id:0,type:"full",data:a.data});return a.resultId&&o.releaseDocumentSemanticTokens(a.resultId),l});Gt.registerCommand("_provideDocumentRangeSemanticTokensLegend",async(n,...e)=>{const[t,i]=e;si(t instanceof Xe);const s=n.get(Zi).getModel(t);if(!s)return;const{documentRangeSemanticTokensProvider:r}=n.get(Be),o=Fke(r,s);if(o.length===0)return;if(o.length===1)return o[0].getLegend();if(!i||!M.isIRange(i))return console.warn("provideDocumentRangeSemanticTokensLegend might be out-of-sync with provideDocumentRangeSemanticTokens unless a range argument is passed in"),o[0].getLegend();const a=await wee(r,s,M.lift(i),xt.None);if(a)return a.provider.getLegend()});Gt.registerCommand("_provideDocumentRangeSemanticTokens",async(n,...e)=>{const[t,i]=e;si(t instanceof Xe),si(M.isIRange(i));const s=n.get(Zi).getModel(t);if(!s)return;const{documentRangeSemanticTokensProvider:r}=n.get(Be),o=await wee(r,s,M.lift(i),xt.None);if(!(!o||!o.tokens))return Ake({id:0,type:"full",data:o.tokens.data})});const Cee="editor.semanticHighlighting";function tM(n,e,t){var s;const i=(s=t.getValue(Cee,{overrideIdentifier:n.getLanguageId(),resource:n.uri}))==null?void 0:s.enabled;return typeof i=="boolean"?i:e.getColorTheme().semanticHighlighting}var Bke=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Rh=function(n,e){return function(t,i){e(t,i,n)}},Vp;let uG=class extends ee{constructor(e,t,i,s,r,o){super(),this._watchers=Object.create(null);const a=d=>{this._watchers[d.uri.toString()]=new hG(d,e,i,r,o)},l=(d,u)=>{u.dispose(),delete this._watchers[d.uri.toString()]},c=()=>{for(const d of t.getModels()){const u=this._watchers[d.uri.toString()];tM(d,i,s)?u||a(d):u&&l(d,u)}};t.getModels().forEach(d=>{tM(d,i,s)&&a(d)}),this._register(t.onModelAdded(d=>{tM(d,i,s)&&a(d)})),this._register(t.onModelRemoved(d=>{const u=this._watchers[d.uri.toString()];u&&l(d,u)})),this._register(s.onDidChangeConfiguration(d=>{d.affectsConfiguration(Cee)&&c()})),this._register(i.onDidColorThemeChange(c))}dispose(){for(const e of Object.values(this._watchers))e.dispose();super.dispose()}};uG=Bke([Rh(0,sB),Rh(1,Zi),Rh(2,ws),Rh(3,Tt),Rh(4,Zl),Rh(5,Be)],uG);var m_;let hG=(m_=class extends ee{constructor(e,t,i,s,r){super(),this._semanticTokensStylingService=t,this._isDisposed=!1,this._model=e,this._provider=r.documentSemanticTokensProvider,this._debounceInformation=s.for(this._provider,"DocumentSemanticTokens",{min:Vp.REQUEST_MIN_DELAY,max:Vp.REQUEST_MAX_DELAY}),this._fetchDocumentSemanticTokens=this._register(new yi(()=>this._fetchDocumentSemanticTokensNow(),Vp.REQUEST_MIN_DELAY)),this._currentDocumentResponse=null,this._currentDocumentRequestCancellationTokenSource=null,this._documentProvidersChangeListeners=[],this._providersChangedDuringRequest=!1,this._register(this._model.onDidChangeContent(()=>{this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._register(this._model.onDidChangeAttached(()=>{this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._register(this._model.onDidChangeLanguage(()=>{this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule(0)}));const o=()=>{Ti(this._documentProvidersChangeListeners),this._documentProvidersChangeListeners=[];for(const a of this._provider.all(e))typeof a.onDidChange=="function"&&this._documentProvidersChangeListeners.push(a.onDidChange(()=>{if(this._currentDocumentRequestCancellationTokenSource){this._providersChangedDuringRequest=!0;return}this._fetchDocumentSemanticTokens.schedule(0)}))};o(),this._register(this._provider.onDidChange(()=>{o(),this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._register(i.onDidColorThemeChange(a=>{this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._fetchDocumentSemanticTokens.schedule(0)}dispose(){this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),Ti(this._documentProvidersChangeListeners),this._documentProvidersChangeListeners=[],this._setDocumentSemanticTokens(null,null,null,[]),this._isDisposed=!0,super.dispose()}_fetchDocumentSemanticTokensNow(){if(this._currentDocumentRequestCancellationTokenSource)return;if(!Pke(this._provider,this._model)){this._currentDocumentResponse&&this._model.tokenization.setSemanticTokens(null,!1);return}if(!this._model.isAttachedToEditor())return;const e=new mn,t=this._currentDocumentResponse?this._currentDocumentResponse.provider:null,i=this._currentDocumentResponse&&this._currentDocumentResponse.resultId||null,s=Oke(this._provider,this._model,t,i,e.token);this._currentDocumentRequestCancellationTokenSource=e,this._providersChangedDuringRequest=!1;const r=[],o=this._model.onDidChangeContent(l=>{r.push(l)}),a=new js(!1);s.then(l=>{if(this._debounceInformation.update(this._model,a.elapsed()),this._currentDocumentRequestCancellationTokenSource=null,o.dispose(),!l)this._setDocumentSemanticTokens(null,null,null,r);else{const{provider:c,tokens:d}=l,u=this._semanticTokensStylingService.getStyling(c);this._setDocumentSemanticTokens(c,d||null,u,r)}},l=>{l&&(Vc(l)||typeof l.message=="string"&&l.message.indexOf("busy")!==-1)||pt(l),this._currentDocumentRequestCancellationTokenSource=null,o.dispose(),(r.length>0||this._providersChangedDuringRequest)&&(this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model)))})}static _copy(e,t,i,s,r){r=Math.min(r,i.length-s,e.length-t);for(let o=0;o<r;o++)i[s+o]=e[t+o]}_setDocumentSemanticTokens(e,t,i,s){const r=this._currentDocumentResponse,o=()=>{(s.length>0||this._providersChangedDuringRequest)&&!this._fetchDocumentSemanticTokens.isScheduled()&&this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))};if(this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._isDisposed){e&&t&&e.releaseDocumentSemanticTokens(t.resultId);return}if(!e||!i){this._model.tokenization.setSemanticTokens(null,!1);return}if(!t){this._model.tokenization.setSemanticTokens(null,!0),o();return}if(Mke(t)){if(!r){this._model.tokenization.setSemanticTokens(null,!0);return}if(t.edits.length===0)t={resultId:t.resultId,data:r.data};else{let a=0;for(const h of t.edits)a+=(h.data?h.data.length:0)-h.deleteCount;const l=r.data,c=new Uint32Array(l.length+a);let d=l.length,u=c.length;for(let h=t.edits.length-1;h>=0;h--){const f=t.edits[h];if(f.start>l.length){i.warnInvalidEditStart(r.resultId,t.resultId,h,f.start,l.length),this._model.tokenization.setSemanticTokens(null,!0);return}const g=d-(f.start+f.deleteCount);g>0&&(Vp._copy(l,d-g,c,u-g,g),u-=g),f.data&&(Vp._copy(f.data,0,c,u-f.data.length,f.data.length),u-=f.data.length),d=f.start}d>0&&Vp._copy(l,0,c,0,d),t={resultId:t.resultId,data:c}}}if(uW(t)){this._currentDocumentResponse=new xyt(e,t.resultId,t.data);const a=PCe(t,i,this._model.getLanguageId());if(s.length>0)for(const l of s)for(const c of a)for(const d of l.changes)c.applyEdit(d.range,d.text);this._model.tokenization.setSemanticTokens(a,!0)}else this._model.tokenization.setSemanticTokens(null,!0);o()}},Vp=m_,m_.REQUEST_MIN_DELAY=300,m_.REQUEST_MAX_DELAY=2e3,m_);hG=Vp=Bke([Rh(1,sB),Rh(2,ws),Rh(3,Zl),Rh(4,Be)],hG);class xyt{constructor(e,t,i){this.provider=e,this.resultId=t,this.data=i}dispose(){this.provider.releaseDocumentSemanticTokens(this.resultId)}}$x(uG);var Lyt=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},tk=function(n,e){return function(t,i){e(t,i,n)}},dS;let zF=(dS=class extends ee{constructor(e,t,i,s,r,o){super(),this._semanticTokensStylingService=t,this._themeService=i,this._configurationService=s,this._editor=e,this._provider=o.documentRangeSemanticTokensProvider,this._debounceInformation=r.for(this._provider,"DocumentRangeSemanticTokens",{min:100,max:500}),this._tokenizeViewport=this._register(new yi(()=>this._tokenizeViewportNow(),100)),this._outstandingRequests=[];const a=()=>{this._editor.hasModel()&&this._tokenizeViewport.schedule(this._debounceInformation.get(this._editor.getModel()))};this._register(this._editor.onDidScrollChange(()=>{a()})),this._register(this._editor.onDidChangeModel(()=>{this._cancelAll(),a()})),this._register(this._editor.onDidChangeModelContent(l=>{this._cancelAll(),a()})),this._register(this._provider.onDidChange(()=>{this._cancelAll(),a()})),this._register(this._configurationService.onDidChangeConfiguration(l=>{l.affectsConfiguration(Cee)&&(this._cancelAll(),a())})),this._register(this._themeService.onDidColorThemeChange(()=>{this._cancelAll(),a()})),a()}_cancelAll(){for(const e of this._outstandingRequests)e.cancel();this._outstandingRequests=[]}_removeOutstandingRequest(e){for(let t=0,i=this._outstandingRequests.length;t<i;t++)if(this._outstandingRequests[t]===e){this._outstandingRequests.splice(t,1);return}}_tokenizeViewportNow(){if(!this._editor.hasModel())return;const e=this._editor.getModel();if(e.tokenization.hasCompleteSemanticTokens())return;if(!tM(e,this._themeService,this._configurationService)){e.tokenization.hasSomeSemanticTokens()&&e.tokenization.setSemanticTokens(null,!1);return}if(!Syt(this._provider,e)){e.tokenization.hasSomeSemanticTokens()&&e.tokenization.setSemanticTokens(null,!1);return}const t=this._editor.getVisibleRangesPlusViewportAboveBelow();this._outstandingRequests=this._outstandingRequests.concat(t.map(i=>this._requestRange(e,i)))}_requestRange(e,t){const i=e.getVersionId(),s=Ds(o=>Promise.resolve(wee(this._provider,e,t,o))),r=new js(!1);return s.then(o=>{if(this._debounceInformation.update(e,r.elapsed()),!o||!o.tokens||e.isDisposed()||e.getVersionId()!==i)return;const{provider:a,tokens:l}=o,c=this._semanticTokensStylingService.getStyling(a);e.tokenization.setPartialSemanticTokens(t,PCe(l,c,e.getLanguageId()))}).then(()=>this._removeOutstandingRequest(s),()=>this._removeOutstandingRequest(s)),s}},dS.ID="editor.contrib.viewportSemanticTokens",dS);zF=Lyt([tk(1,sB),tk(2,ws),tk(3,Tt),tk(4,Zl),tk(5,Be)],zF);Xt(zF.ID,zF,1);class kyt{constructor(e=!0){this.selectSubwords=e}provideSelectionRanges(e,t){const i=[];for(const s of t){const r=[];i.push(r),this.selectSubwords&&this._addInWordRanges(r,e,s),this._addWordRanges(r,e,s),this._addWhitespaceLine(r,e,s),r.push({range:e.getFullModelRange()})}return i}_addInWordRanges(e,t,i){const s=t.getWordAtPosition(i);if(!s)return;const{word:r,startColumn:o}=s,a=i.column-o;let l=a,c=a,d=0;for(;l>=0;l--){const u=r.charCodeAt(l);if(l!==a&&(u===95||u===45))break;if(Cm(u)&&Ih(d))break;d=u}for(l+=1;c<r.length;c++){const u=r.charCodeAt(c);if(Ih(u)&&Cm(d))break;if(u===95||u===45)break;d=u}l<c&&e.push({range:new M(i.lineNumber,o+l,i.lineNumber,o+c)})}_addWordRanges(e,t,i){const s=t.getWordAtPosition(i);s&&e.push({range:new M(i.lineNumber,s.startColumn,i.lineNumber,s.endColumn)})}_addWhitespaceLine(e,t,i){t.getLineLength(i.lineNumber)>0&&t.getLineFirstNonWhitespaceColumn(i.lineNumber)===0&&t.getLineLastNonWhitespaceColumn(i.lineNumber)===0&&e.push({range:new M(i.lineNumber,1,i.lineNumber,t.getLineMaxColumn(i.lineNumber))})}}var Eyt=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Iyt=function(n,e){return function(t,i){e(t,i,n)}},fG;class yee{constructor(e,t){this.index=e,this.ranges=t}mov(e){const t=this.index+(e?1:-1);if(t<0||t>=this.ranges.length)return this;const i=new yee(t,this.ranges);return i.ranges[t].equalsRange(this.ranges[this.index])?i.mov(e):i}}var jw;let JD=(jw=class{static get(e){return e.getContribution(fG.ID)}constructor(e,t){this._editor=e,this._languageFeaturesService=t,this._ignoreSelection=!1}dispose(){var e;(e=this._selectionListener)==null||e.dispose()}async run(e){if(!this._editor.hasModel())return;const t=this._editor.getSelections(),i=this._editor.getModel();if(this._state||await Hke(this._languageFeaturesService.selectionRangeProvider,i,t.map(r=>r.getPosition()),this._editor.getOption(114),xt.None).then(r=>{var o;if(!(!ao(r)||r.length!==t.length)&&!(!this._editor.hasModel()||!dn(this._editor.getSelections(),t,(a,l)=>a.equalsSelection(l)))){for(let a=0;a<r.length;a++)r[a]=r[a].filter(l=>l.containsPosition(t[a].getStartPosition())&&l.containsPosition(t[a].getEndPosition())),r[a].unshift(t[a]);this._state=r.map(a=>new yee(0,a)),(o=this._selectionListener)==null||o.dispose(),this._selectionListener=this._editor.onDidChangeCursorPosition(()=>{var a;this._ignoreSelection||((a=this._selectionListener)==null||a.dispose(),this._state=void 0)})}}),!this._state)return;this._state=this._state.map(r=>r.mov(e));const s=this._state.map(r=>$e.fromPositions(r.ranges[r.index].getStartPosition(),r.ranges[r.index].getEndPosition()));this._ignoreSelection=!0;try{this._editor.setSelections(s)}finally{this._ignoreSelection=!1}}},fG=jw,jw.ID="editor.contrib.smartSelectController",jw);JD=fG=Eyt([Iyt(1,Be)],JD);class Wke extends Oe{constructor(e,t){super(t),this._forward=e}async run(e,t){const i=JD.get(t);i&&await i.run(this._forward)}}class Dyt extends Wke{constructor(){super(!0,{id:"editor.action.smartSelect.expand",label:v("smartSelect.expand","Expand Selection"),alias:"Expand Selection",precondition:void 0,kbOpts:{kbExpr:F.editorTextFocus,primary:1553,mac:{primary:3345,secondary:[1297]},weight:100},menuOpts:{menuId:ze.MenubarSelectionMenu,group:"1_basic",title:v({key:"miSmartSelectGrow",comment:["&& denotes a mnemonic"]},"&&Expand Selection"),order:2}})}}Gt.registerCommandAlias("editor.action.smartSelect.grow","editor.action.smartSelect.expand");class Nyt extends Wke{constructor(){super(!1,{id:"editor.action.smartSelect.shrink",label:v("smartSelect.shrink","Shrink Selection"),alias:"Shrink Selection",precondition:void 0,kbOpts:{kbExpr:F.editorTextFocus,primary:1551,mac:{primary:3343,secondary:[1295]},weight:100},menuOpts:{menuId:ze.MenubarSelectionMenu,group:"1_basic",title:v({key:"miSmartSelectShrink",comment:["&& denotes a mnemonic"]},"&&Shrink Selection"),order:3}})}}Xt(JD.ID,JD,4);we(Dyt);we(Nyt);async function Hke(n,e,t,i,s){const r=n.all(e).concat(new kyt(i.selectSubwords));r.length===1&&r.unshift(new kF);const o=[],a=[];for(const l of r)o.push(Promise.resolve(l.provideSelectionRanges(e,t,s)).then(c=>{if(ao(c)&&c.length===t.length)for(let d=0;d<t.length;d++){a[d]||(a[d]=[]);for(const u of c[d])M.isIRange(u.range)&&M.containsPosition(u.range,t[d])&&a[d].push(M.lift(u.range))}},Wn));return await Promise.all(o),a.map(l=>{if(l.length===0)return[];l.sort((h,f)=>Y.isBefore(h.getStartPosition(),f.getStartPosition())?1:Y.isBefore(f.getStartPosition(),h.getStartPosition())||Y.isBefore(h.getEndPosition(),f.getEndPosition())?-1:Y.isBefore(f.getEndPosition(),h.getEndPosition())?1:0);const c=[];let d;for(const h of l)(!d||M.containsRange(h,d)&&!M.equalsRange(h,d))&&(c.push(h),d=h);if(!i.selectLeadingAndTrailingWhitespace)return c;const u=[c[0]];for(let h=1;h<c.length;h++){const f=c[h-1],g=c[h];if(g.startLineNumber!==f.startLineNumber||g.endLineNumber!==f.endLineNumber){const p=new M(f.startLineNumber,e.getLineFirstNonWhitespaceColumn(f.startLineNumber),f.endLineNumber,e.getLineLastNonWhitespaceColumn(f.endLineNumber));p.containsRange(f)&&!p.equalsRange(f)&&g.containsRange(p)&&!g.equalsRange(p)&&u.push(p);const _=new M(f.startLineNumber,1,f.endLineNumber,e.getLineMaxColumn(f.endLineNumber));_.containsRange(f)&&!_.equalsRange(p)&&g.containsRange(_)&&!g.equalsRange(_)&&u.push(_)}u.push(g)}return u})}Gt.registerCommand("_executeSelectionRangeProvider",async function(n,...e){const[t,i]=e;si(Xe.isUri(t));const s=n.get(Be).selectionRangeProvider,r=await n.get(_a).createModelReference(t);try{return Hke(s,r.object.textEditorModel,i,{selectLeadingAndTrailingWhitespace:!0,selectSubwords:!0},xt.None)}finally{r.dispose()}});const Tyt=Object.freeze({View:lt("view","View"),Help:lt("help","Help"),Test:lt("test","Test"),File:lt("file","File"),Preferences:lt("preferences","Preferences"),Developer:lt({key:"developer",comment:["A developer on Code itself or someone diagnosing issues in Code"]},"Developer")});class IE{constructor(e,t,i,s=null){this.startLineNumbers=e,this.endLineNumbers=t,this.lastLineRelativePosition=i,this.showEndForLine=s}equals(e){return!!e&&this.lastLineRelativePosition===e.lastLineRelativePosition&&this.showEndForLine===e.showEndForLine&&dn(this.startLineNumbers,e.startLineNumbers)&&dn(this.endLineNumbers,e.endLineNumbers)}static get Empty(){return new IE([],[],0)}}const yhe=up("stickyScrollViewLayer",{createHTML:n=>n}),D6="data-sticky-line-index",She="data-sticky-is-line",Ryt="data-sticky-is-line-number",xhe="data-sticky-is-folding-icon";class Ayt extends ee{constructor(e){super(),this._editor=e,this._foldingIconStore=new ue,this._rootDomNode=document.createElement("div"),this._lineNumbersDomNode=document.createElement("div"),this._linesDomNodeScrollable=document.createElement("div"),this._linesDomNode=document.createElement("div"),this._lineHeight=this._editor.getOption(67),this._renderedStickyLines=[],this._lineNumbers=[],this._lastLineRelativePosition=0,this._minContentWidthInPx=0,this._isOnGlyphMargin=!1,this._lineNumbersDomNode.className="sticky-widget-line-numbers",this._lineNumbersDomNode.setAttribute("role","none"),this._linesDomNode.className="sticky-widget-lines",this._linesDomNode.setAttribute("role","list"),this._linesDomNodeScrollable.className="sticky-widget-lines-scrollable",this._linesDomNodeScrollable.appendChild(this._linesDomNode),this._rootDomNode.className="sticky-widget",this._rootDomNode.classList.toggle("peek",e instanceof Pd),this._rootDomNode.appendChild(this._lineNumbersDomNode),this._rootDomNode.appendChild(this._linesDomNodeScrollable);const t=()=>{this._linesDomNode.style.left=this._editor.getOption(116).scrollWithEditor?`-${this._editor.getScrollLeft()}px`:"0px"};this._register(this._editor.onDidChangeConfiguration(i=>{i.hasChanged(116)&&t(),i.hasChanged(67)&&(this._lineHeight=this._editor.getOption(67))})),this._register(this._editor.onDidScrollChange(i=>{i.scrollLeftChanged&&t(),i.scrollWidthChanged&&this._updateWidgetWidth()})),this._register(this._editor.onDidChangeModel(()=>{t(),this._updateWidgetWidth()})),this._register(this._foldingIconStore),t(),this._register(this._editor.onDidLayoutChange(i=>{this._updateWidgetWidth()})),this._updateWidgetWidth()}get lineNumbers(){return this._lineNumbers}get lineNumberCount(){return this._lineNumbers.length}getRenderedStickyLine(e){return this._renderedStickyLines.find(t=>t.lineNumber===e)}getCurrentLines(){return this._lineNumbers}setState(e,t,i){if(i===void 0&&(!this._previousState&&!e||this._previousState&&this._previousState.equals(e)))return;const s=this._isWidgetHeightZero(e),r=s?void 0:e,o=s?0:this._findLineToRebuildWidgetFrom(e,i);this._renderRootNode(r,t,o),this._previousState=e}_isWidgetHeightZero(e){if(!e)return!0;const t=e.startLineNumbers.length*this._lineHeight+e.lastLineRelativePosition;if(t>0){this._lastLineRelativePosition=e.lastLineRelativePosition;const i=[...e.startLineNumbers];e.showEndForLine!==null&&(i[e.showEndForLine]=e.endLineNumbers[e.showEndForLine]),this._lineNumbers=i}else this._lastLineRelativePosition=0,this._lineNumbers=[];return t===0}_findLineToRebuildWidgetFrom(e,t){if(!e||!this._previousState)return 0;if(t!==void 0)return t;const i=this._previousState,s=e.startLineNumbers.findIndex(r=>!i.startLineNumbers.includes(r));return s===-1?0:s}_updateWidgetWidth(){const e=this._editor.getLayoutInfo(),t=e.contentLeft;this._lineNumbersDomNode.style.width=`${t}px`,this._linesDomNodeScrollable.style.setProperty("--vscode-editorStickyScroll-scrollableWidth",`${this._editor.getScrollWidth()-e.verticalScrollbarWidth}px`),this._rootDomNode.style.width=`${e.width-e.verticalScrollbarWidth}px`}_clearStickyLinesFromLine(e){this._foldingIconStore.clear();for(let t=e;t<this._renderedStickyLines.length;t++){const i=this._renderedStickyLines[t];i.lineNumberDomNode.remove(),i.lineDomNode.remove()}this._renderedStickyLines=this._renderedStickyLines.slice(0,e),this._rootDomNode.style.display="none"}_useFoldingOpacityTransition(e){this._lineNumbersDomNode.style.setProperty("--vscode-editorStickyScroll-foldingOpacityTransition",`opacity ${e?.5:0}s`)}_setFoldingIconsVisibility(e){for(const t of this._renderedStickyLines){const i=t.foldingIcon;i&&i.setVisible(e?!0:i.isCollapsed)}}async _renderRootNode(e,t,i){if(this._clearStickyLinesFromLine(i),!e)return;for(const a of this._renderedStickyLines)this._updateTopAndZIndexOfStickyLine(a);const s=this._editor.getLayoutInfo(),r=this._lineNumbers.slice(i);for(const[a,l]of r.entries()){const c=this._renderChildNode(a+i,l,t,s);c&&(this._linesDomNode.appendChild(c.lineDomNode),this._lineNumbersDomNode.appendChild(c.lineNumberDomNode),this._renderedStickyLines.push(c))}t&&(this._setFoldingHoverListeners(),this._useFoldingOpacityTransition(!this._isOnGlyphMargin));const o=this._lineNumbers.length*this._lineHeight+this._lastLineRelativePosition;this._rootDomNode.style.display="block",this._lineNumbersDomNode.style.height=`${o}px`,this._linesDomNodeScrollable.style.height=`${o}px`,this._rootDomNode.style.height=`${o}px`,this._rootDomNode.style.marginLeft="0px",this._minContentWidthInPx=Math.max(...this._renderedStickyLines.map(a=>a.scrollWidth))+s.verticalScrollbarWidth,this._editor.layoutOverlayWidget(this)}_setFoldingHoverListeners(){this._editor.getOption(111)==="mouseover"&&(this._foldingIconStore.add(re(this._lineNumbersDomNode,Se.MOUSE_ENTER,()=>{this._isOnGlyphMargin=!0,this._setFoldingIconsVisibility(!0)})),this._foldingIconStore.add(re(this._lineNumbersDomNode,Se.MOUSE_LEAVE,()=>{this._isOnGlyphMargin=!1,this._useFoldingOpacityTransition(!0),this._setFoldingIconsVisibility(!1)})))}_renderChildNode(e,t,i,s){const r=this._editor._getViewModel();if(!r)return;const o=r.coordinatesConverter.convertModelPositionToViewPosition(new Y(t,1)).lineNumber,a=r.getViewLineRenderingData(o),l=this._editor.getOption(68);let c;try{c=ko.filter(a.inlineDecorations,o,a.minColumn,a.maxColumn)}catch{c=[]}const d=new av(!0,!0,a.content,a.continuesWithWrappedLine,a.isBasicASCII,a.containsRTL,0,a.tokens,c,a.tabSize,a.startVisibleColumn,1,1,1,500,"none",!0,!0,null),u=new Tx(2e3),h=iT(d,u);let f;yhe?f=yhe.createHTML(u.build()):f=u.build();const g=document.createElement("span");g.setAttribute(D6,String(e)),g.setAttribute(She,""),g.setAttribute("role","listitem"),g.tabIndex=0,g.className="sticky-line-content",g.classList.add(`stickyLine${t}`),g.style.lineHeight=`${this._lineHeight}px`,g.innerHTML=f;const p=document.createElement("span");p.setAttribute(D6,String(e)),p.setAttribute(Ryt,""),p.className="sticky-line-number",p.style.lineHeight=`${this._lineHeight}px`;const _=s.contentLeft;p.style.width=`${_}px`;const w=document.createElement("span");l.renderType===1||l.renderType===3&&t%10===0?w.innerText=t.toString():l.renderType===2&&(w.innerText=Math.abs(t-this._editor.getPosition().lineNumber).toString()),w.className="sticky-line-number-inner",w.style.lineHeight=`${this._lineHeight}px`,w.style.width=`${s.lineNumbersWidth}px`,w.style.paddingLeft=`${s.lineNumbersLeft}px`,p.appendChild(w);const b=this._renderFoldingIconForLine(i,t);b&&p.appendChild(b.domNode),this._editor.applyFontInfo(g),this._editor.applyFontInfo(w),p.style.lineHeight=`${this._lineHeight}px`,g.style.lineHeight=`${this._lineHeight}px`,p.style.height=`${this._lineHeight}px`,g.style.height=`${this._lineHeight}px`;const y=new Myt(e,t,g,p,b,h.characterMapping,g.scrollWidth);return this._updateTopAndZIndexOfStickyLine(y)}_updateTopAndZIndexOfStickyLine(e){var d;const t=e.index,i=e.lineDomNode,s=e.lineNumberDomNode,r=t===this._lineNumbers.length-1,o="0",a="1";i.style.zIndex=r?o:a,s.style.zIndex=r?o:a;const l=`${t*this._lineHeight+this._lastLineRelativePosition+((d=e.foldingIcon)!=null&&d.isCollapsed?1:0)}px`,c=`${t*this._lineHeight}px`;return i.style.top=r?l:c,s.style.top=r?l:c,e}_renderFoldingIconForLine(e,t){const i=this._editor.getOption(111);if(!e||i==="never")return;const s=e.regions,r=s.findRange(t),o=s.getStartLineNumber(r);if(!(t===o))return;const l=s.isCollapsed(r),c=new Pyt(l,o,s.getEndLineNumber(r),this._lineHeight);return c.setVisible(this._isOnGlyphMargin?!0:l||i==="always"),c.domNode.setAttribute(xhe,""),c}getId(){return"editor.contrib.stickyScrollWidget"}getDomNode(){return this._rootDomNode}getPosition(){return{preference:2,stackOridinal:10}}getMinContentWidthInPx(){return this._minContentWidthInPx}focusLineWithIndex(e){0<=e&&e<this._renderedStickyLines.length&&this._renderedStickyLines[e].lineDomNode.focus()}getEditorPositionFromNode(e){if(!e||e.children.length>0)return null;const t=this._getRenderedStickyLineFromChildDomNode(e);if(!t)return null;const i=YQ(t.characterMapping,e,0);return new Y(t.lineNumber,i)}getLineNumberFromChildDomNode(e){var t;return((t=this._getRenderedStickyLineFromChildDomNode(e))==null?void 0:t.lineNumber)??null}_getRenderedStickyLineFromChildDomNode(e){const t=this.getLineIndexFromChildDomNode(e);return t===null||t<0||t>=this._renderedStickyLines.length?null:this._renderedStickyLines[t]}getLineIndexFromChildDomNode(e){const t=this._getAttributeValue(e,D6);return t?parseInt(t,10):null}isInStickyLine(e){return this._getAttributeValue(e,She)!==void 0}isInFoldingIconDomNode(e){return this._getAttributeValue(e,xhe)!==void 0}_getAttributeValue(e,t){for(;e&&e!==this._rootDomNode;){const i=e.getAttribute(t);if(i!==null)return i;e=e.parentElement}}}class Myt{constructor(e,t,i,s,r,o,a){this.index=e,this.lineNumber=t,this.lineDomNode=i,this.lineNumberDomNode=s,this.foldingIcon=r,this.characterMapping=o,this.scrollWidth=a}}class Pyt{constructor(e,t,i,s){this.isCollapsed=e,this.foldingStartLine=t,this.foldingEndLine=i,this.dimension=s,this.domNode=document.createElement("div"),this.domNode.style.width=`${s}px`,this.domNode.style.height=`${s}px`,this.domNode.className=ot.asClassName(e?pF:gF)}setVisible(e){this.domNode.style.cursor=e?"pointer":"default",this.domNode.style.opacity=e?"1":"0"}}class DE{constructor(e,t){this.startLineNumber=e,this.endLineNumber=t}}class UF{constructor(e,t,i){this.range=e,this.children=t,this.parent=i}}class Vke{constructor(e,t,i,s){this.uri=e,this.version=t,this.element=i,this.outlineProviderId=s}}var hW=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},eN=function(n,e){return function(t,i){e(t,i,n)}},NE;(function(n){n.OUTLINE_MODEL="outlineModel",n.FOLDING_PROVIDER_MODEL="foldingProviderModel",n.INDENTATION_MODEL="indentationModel"})(NE||(NE={}));var Am;(function(n){n[n.VALID=0]="VALID",n[n.INVALID=1]="INVALID",n[n.CANCELED=2]="CANCELED"})(Am||(Am={}));let gG=class extends ee{constructor(e,t,i,s){switch(super(),this._editor=e,this._modelProviders=[],this._modelPromise=null,this._updateScheduler=this._register(new Rc(300)),this._updateOperation=this._register(new ue),this._editor.getOption(116).defaultModel){case NE.OUTLINE_MODEL:this._modelProviders.push(new pG(this._editor,s));case NE.FOLDING_PROVIDER_MODEL:this._modelProviders.push(new _G(this._editor,t,s));case NE.INDENTATION_MODEL:this._modelProviders.push(new mG(this._editor,i));break}}dispose(){this._modelProviders.forEach(e=>e.dispose()),this._updateOperation.clear(),this._cancelModelPromise(),super.dispose()}_cancelModelPromise(){this._modelPromise&&(this._modelPromise.cancel(),this._modelPromise=null)}async update(e){return this._updateOperation.clear(),this._updateOperation.add({dispose:()=>{this._cancelModelPromise(),this._updateScheduler.cancel()}}),this._cancelModelPromise(),await this._updateScheduler.trigger(async()=>{for(const t of this._modelProviders){const{statusPromise:i,modelPromise:s}=t.computeStickyModel(e);this._modelPromise=s;const r=await i;if(this._modelPromise!==s)return null;switch(r){case Am.CANCELED:return this._updateOperation.clear(),null;case Am.VALID:return t.stickyModel}}return null}).catch(t=>(pt(t),null))}};gG=hW([eN(2,Ze),eN(3,Be)],gG);class zke extends ee{constructor(e){super(),this._editor=e,this._stickyModel=null}get stickyModel(){return this._stickyModel}_invalid(){return this._stickyModel=null,Am.INVALID}computeStickyModel(e){if(e.isCancellationRequested||!this.isProviderValid())return{statusPromise:this._invalid(),modelPromise:null};const t=Ds(i=>this.createModelFromProvider(i));return{statusPromise:t.then(i=>this.isModelValid(i)?e.isCancellationRequested?Am.CANCELED:(this._stickyModel=this.createStickyModel(e,i),Am.VALID):this._invalid()).then(void 0,i=>(pt(i),Am.CANCELED)),modelPromise:t}}isModelValid(e){return!0}isProviderValid(){return!0}}let pG=class extends zke{constructor(e,t){super(e),this._languageFeaturesService=t}createModelFromProvider(e){return sg.create(this._languageFeaturesService.documentSymbolProvider,this._editor.getModel(),e)}createStickyModel(e,t){var o;const{stickyOutlineElement:i,providerID:s}=this._stickyModelFromOutlineModel(t,(o=this._stickyModel)==null?void 0:o.outlineProviderId),r=this._editor.getModel();return new Vke(r.uri,r.getVersionId(),i,s)}isModelValid(e){return e&&e.children.size>0}_stickyModelFromOutlineModel(e,t){let i;if(qt.first(e.children.values())instanceof cke){const a=qt.find(e.children.values(),l=>l.id===t);if(a)i=a.children;else{let l="",c=-1,d;for(const[u,h]of e.children.entries()){const f=this._findSumOfRangesOfGroup(h);f>c&&(d=h,c=f,l=h.id)}t=l,i=d.children}}else i=e.children;const s=[],r=Array.from(i.values()).sort((a,l)=>{const c=new DE(a.symbol.range.startLineNumber,a.symbol.range.endLineNumber),d=new DE(l.symbol.range.startLineNumber,l.symbol.range.endLineNumber);return this._comparator(c,d)});for(const a of r)s.push(this._stickyModelFromOutlineElement(a,a.symbol.selectionRange.startLineNumber));return{stickyOutlineElement:new UF(void 0,s,void 0),providerID:t}}_stickyModelFromOutlineElement(e,t){const i=[];for(const r of e.children.values())if(r.symbol.selectionRange.startLineNumber!==r.symbol.range.endLineNumber)if(r.symbol.selectionRange.startLineNumber!==t)i.push(this._stickyModelFromOutlineElement(r,r.symbol.selectionRange.startLineNumber));else for(const o of r.children.values())i.push(this._stickyModelFromOutlineElement(o,r.symbol.selectionRange.startLineNumber));i.sort((r,o)=>this._comparator(r.range,o.range));const s=new DE(e.symbol.selectionRange.startLineNumber,e.symbol.range.endLineNumber);return new UF(s,i,void 0)}_comparator(e,t){return e.startLineNumber!==t.startLineNumber?e.startLineNumber-t.startLineNumber:t.endLineNumber-e.endLineNumber}_findSumOfRangesOfGroup(e){let t=0;for(const i of e.children.values())t+=this._findSumOfRangesOfGroup(i);return e instanceof sq?t+e.symbol.range.endLineNumber-e.symbol.selectionRange.startLineNumber:t}};pG=hW([eN(1,Be)],pG);class Uke extends zke{constructor(e){super(e),this._foldingLimitReporter=new oke(e)}createStickyModel(e,t){const i=this._fromFoldingRegions(t),s=this._editor.getModel();return new Vke(s.uri,s.getVersionId(),i,void 0)}isModelValid(e){return e!==null}_fromFoldingRegions(e){const t=e.length,i=[],s=new UF(void 0,[],void 0);for(let r=0;r<t;r++){const o=e.getParentIndex(r);let a;o!==-1?a=i[o]:a=s;const l=new UF(new DE(e.getStartLineNumber(r),e.getEndLineNumber(r)+1),[],a);a.children.push(l),i.push(l)}return s}}let mG=class extends Uke{constructor(e,t){super(e),this._languageConfigurationService=t,this.provider=this._register(new aee(e.getModel(),this._languageConfigurationService,this._foldingLimitReporter))}async createModelFromProvider(e){return this.provider.compute(e)}};mG=hW([eN(1,vn)],mG);let _G=class extends Uke{constructor(e,t,i){super(e),this._languageFeaturesService=i;const s=$_.getFoldingRangeProviders(this._languageFeaturesService,e.getModel());s.length>0&&(this.provider=this._register(new lee(e.getModel(),s,t,this._foldingLimitReporter,void 0)))}isProviderValid(){return this.provider!==void 0}async createModelFromProvider(e){var t;return((t=this.provider)==null?void 0:t.compute(e))??null}};_G=hW([eN(2,Be)],_G);var Oyt=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Lhe=function(n,e){return function(t,i){e(t,i,n)}};class Fyt{constructor(e,t,i){this.startLineNumber=e,this.endLineNumber=t,this.nestingDepth=i}}let vG=class extends ee{constructor(e,t,i){super(),this._languageFeaturesService=t,this._languageConfigurationService=i,this._onDidChangeStickyScroll=this._register(new X),this.onDidChangeStickyScroll=this._onDidChangeStickyScroll.event,this._model=null,this._cts=null,this._stickyModelProvider=null,this._editor=e,this._sessionStore=this._register(new ue),this._updateSoon=this._register(new yi(()=>this.update(),50)),this._register(this._editor.onDidChangeConfiguration(s=>{s.hasChanged(116)&&this.readConfiguration()})),this.readConfiguration()}readConfiguration(){this._sessionStore.clear(),this._editor.getOption(116).enabled&&(this._sessionStore.add(this._editor.onDidChangeModel(()=>{this._model=null,this.updateStickyModelProvider(),this._onDidChangeStickyScroll.fire(),this.update()})),this._sessionStore.add(this._editor.onDidChangeHiddenAreas(()=>this.update())),this._sessionStore.add(this._editor.onDidChangeModelContent(()=>this._updateSoon.schedule())),this._sessionStore.add(this._languageFeaturesService.documentSymbolProvider.onDidChange(()=>this.update())),this._sessionStore.add(Ye(()=>{var t;(t=this._stickyModelProvider)==null||t.dispose(),this._stickyModelProvider=null})),this.updateStickyModelProvider(),this.update())}getVersionId(){var e;return(e=this._model)==null?void 0:e.version}updateStickyModelProvider(){var t;(t=this._stickyModelProvider)==null||t.dispose(),this._stickyModelProvider=null;const e=this._editor;e.hasModel()&&(this._stickyModelProvider=new gG(e,()=>this._updateSoon.schedule(),this._languageConfigurationService,this._languageFeaturesService))}async update(){var e;(e=this._cts)==null||e.dispose(!0),this._cts=new mn,await this.updateStickyModel(this._cts.token),this._onDidChangeStickyScroll.fire()}async updateStickyModel(e){if(!this._editor.hasModel()||!this._stickyModelProvider||this._editor.getModel().isTooLargeForTokenization()){this._model=null;return}const t=await this._stickyModelProvider.update(e);e.isCancellationRequested||(this._model=t)}updateIndex(e){return e===-1?e=0:e<0&&(e=-e-2),e}getCandidateStickyLinesIntersectingFromStickyModel(e,t,i,s,r){if(t.children.length===0)return;let o=r;const a=[];for(let d=0;d<t.children.length;d++){const u=t.children[d];u.range&&a.push(u.range.startLineNumber)}const l=this.updateIndex(kI(a,e.startLineNumber,(d,u)=>d-u)),c=this.updateIndex(kI(a,e.startLineNumber+s,(d,u)=>d-u));for(let d=l;d<=c;d++){const u=t.children[d];if(!u)return;if(u.range){const h=u.range.startLineNumber,f=u.range.endLineNumber;e.startLineNumber<=f+1&&h-1<=e.endLineNumber&&h!==o&&(o=h,i.push(new Fyt(h,f-1,s+1)),this.getCandidateStickyLinesIntersectingFromStickyModel(e,u,i,s+1,h))}else this.getCandidateStickyLinesIntersectingFromStickyModel(e,u,i,s,r)}}getCandidateStickyLinesIntersecting(e){var s,r;if(!((s=this._model)!=null&&s.element))return[];let t=[];this.getCandidateStickyLinesIntersectingFromStickyModel(e,this._model.element,t,0,-1);const i=(r=this._editor._getViewModel())==null?void 0:r.getHiddenAreas();if(i)for(const o of i)t=t.filter(a=>!(a.startLineNumber>=o.startLineNumber&&a.endLineNumber<=o.endLineNumber+1));return t}};vG=Oyt([Lhe(1,Be),Lhe(2,vn)],vG);var Byt=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},zC=function(n,e){return function(t,i){e(t,i,n)}},bG,Kw;let op=(Kw=class extends ee{constructor(e,t,i,s,r,o,a){super(),this._editor=e,this._contextMenuService=t,this._languageFeaturesService=i,this._instaService=s,this._contextKeyService=a,this._sessionStore=new ue,this._maxStickyLines=Number.MAX_SAFE_INTEGER,this._candidateDefinitionsLength=-1,this._focusedStickyElementIndex=-1,this._enabled=!1,this._focused=!1,this._positionRevealed=!1,this._onMouseDown=!1,this._endLineNumbers=[],this._stickyScrollWidget=new Ayt(this._editor),this._stickyLineCandidateProvider=new vG(this._editor,i,r),this._register(this._stickyScrollWidget),this._register(this._stickyLineCandidateProvider),this._widgetState=IE.Empty,this._onDidResize(),this._readConfiguration();const l=this._stickyScrollWidget.getDomNode();this._register(this._editor.onDidChangeConfiguration(d=>{this._readConfigurationChange(d)})),this._register(re(l,Se.CONTEXT_MENU,async d=>{this._onContextMenu(nt(l),d)})),this._stickyScrollFocusedContextKey=F.stickyScrollFocused.bindTo(this._contextKeyService),this._stickyScrollVisibleContextKey=F.stickyScrollVisible.bindTo(this._contextKeyService);const c=this._register(Hu(l));this._register(c.onDidBlur(d=>{this._positionRevealed===!1&&l.clientHeight===0?(this._focusedStickyElementIndex=-1,this.focus()):this._disposeFocusStickyScrollStore()})),this._register(c.onDidFocus(d=>{this.focus()})),this._registerMouseListeners(),this._register(re(l,Se.MOUSE_DOWN,d=>{this._onMouseDown=!0}))}static get(e){return e.getContribution(bG.ID)}_disposeFocusStickyScrollStore(){var e;this._stickyScrollFocusedContextKey.set(!1),(e=this._focusDisposableStore)==null||e.dispose(),this._focused=!1,this._positionRevealed=!1,this._onMouseDown=!1}focus(){if(this._onMouseDown){this._onMouseDown=!1,this._editor.focus();return}this._stickyScrollFocusedContextKey.get()!==!0&&(this._focused=!0,this._focusDisposableStore=new ue,this._stickyScrollFocusedContextKey.set(!0),this._focusedStickyElementIndex=this._stickyScrollWidget.lineNumbers.length-1,this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex))}focusNext(){this._focusedStickyElementIndex<this._stickyScrollWidget.lineNumberCount-1&&this._focusNav(!0)}focusPrevious(){this._focusedStickyElementIndex>0&&this._focusNav(!1)}selectEditor(){this._editor.focus()}_focusNav(e){this._focusedStickyElementIndex=e?this._focusedStickyElementIndex+1:this._focusedStickyElementIndex-1,this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex)}goToFocused(){const e=this._stickyScrollWidget.lineNumbers;this._disposeFocusStickyScrollStore(),this._revealPosition({lineNumber:e[this._focusedStickyElementIndex],column:1})}_revealPosition(e){this._reveaInEditor(e,()=>this._editor.revealPosition(e))}_revealLineInCenterIfOutsideViewport(e){this._reveaInEditor(e,()=>this._editor.revealLineInCenterIfOutsideViewport(e.lineNumber,0))}_reveaInEditor(e,t){this._focused&&this._disposeFocusStickyScrollStore(),this._positionRevealed=!0,t(),this._editor.setSelection(M.fromPositions(e)),this._editor.focus()}_registerMouseListeners(){const e=this._register(new ue),t=this._register(new tW(this._editor,{extractLineNumberFromMouseEvent:r=>{const o=this._stickyScrollWidget.getEditorPositionFromNode(r.target.element);return o?o.lineNumber:0}})),i=r=>{if(!this._editor.hasModel()||r.target.type!==12||r.target.detail!==this._stickyScrollWidget.getId())return null;const o=r.target.element;if(!o||o.innerText!==o.innerHTML)return null;const a=this._stickyScrollWidget.getEditorPositionFromNode(o);return a?{range:new M(a.lineNumber,a.column,a.lineNumber,a.column+o.innerText.length),textElement:o}:null},s=this._stickyScrollWidget.getDomNode();this._register(Cn(s,Se.CLICK,r=>{if(r.ctrlKey||r.altKey||r.metaKey||!r.leftButton)return;if(r.shiftKey){const c=this._stickyScrollWidget.getLineIndexFromChildDomNode(r.target);if(c===null)return;const d=new Y(this._endLineNumbers[c],1);this._revealLineInCenterIfOutsideViewport(d);return}if(this._stickyScrollWidget.isInFoldingIconDomNode(r.target)){const c=this._stickyScrollWidget.getLineNumberFromChildDomNode(r.target);this._toggleFoldingRegionForLine(c);return}if(!this._stickyScrollWidget.isInStickyLine(r.target))return;let l=this._stickyScrollWidget.getEditorPositionFromNode(r.target);if(!l){const c=this._stickyScrollWidget.getLineNumberFromChildDomNode(r.target);if(c===null)return;l=new Y(c,1)}this._revealPosition(l)})),this._register(Cn(s,Se.MOUSE_MOVE,r=>{if(r.shiftKey){const o=this._stickyScrollWidget.getLineIndexFromChildDomNode(r.target);if(o===null||this._showEndForLine!==null&&this._showEndForLine===o)return;this._showEndForLine=o,this._renderStickyScroll();return}this._showEndForLine!==void 0&&(this._showEndForLine=void 0,this._renderStickyScroll())})),this._register(re(s,Se.MOUSE_LEAVE,r=>{this._showEndForLine!==void 0&&(this._showEndForLine=void 0,this._renderStickyScroll())})),this._register(t.onMouseMoveOrRelevantKeyDown(([r,o])=>{const a=i(r);if(!a||!r.hasTriggerModifier||!this._editor.hasModel()){e.clear();return}const{range:l,textElement:c}=a;if(!l.equalsRange(this._stickyRangeProjectedOnEditor))this._stickyRangeProjectedOnEditor=l,e.clear();else if(c.style.textDecoration==="underline")return;const d=new mn;e.add(Ye(()=>d.dispose(!0)));let u;hT(this._languageFeaturesService.definitionProvider,this._editor.getModel(),new Y(l.startLineNumber,l.startColumn+1),!1,d.token).then(h=>{if(!d.token.isCancellationRequested)if(h.length!==0){this._candidateDefinitionsLength=h.length;const f=c;u!==f?(e.clear(),u=f,u.style.textDecoration="underline",e.add(Ye(()=>{u.style.textDecoration="none"}))):u||(u=f,u.style.textDecoration="underline",e.add(Ye(()=>{u.style.textDecoration="none"})))}else e.clear()})})),this._register(t.onCancel(()=>{e.clear()})),this._register(t.onExecute(async r=>{if(r.target.type!==12||r.target.detail!==this._stickyScrollWidget.getId())return;const o=this._stickyScrollWidget.getEditorPositionFromNode(r.target.element);o&&(!this._editor.hasModel()||!this._stickyRangeProjectedOnEditor||(this._candidateDefinitionsLength>1&&(this._focused&&this._disposeFocusStickyScrollStore(),this._revealPosition({lineNumber:o.lineNumber,column:1})),this._instaService.invokeFunction(ULe,r,this._editor,{uri:this._editor.getModel().uri,range:this._stickyRangeProjectedOnEditor})))}))}_onContextMenu(e,t){const i=new bd(e,t);this._contextMenuService.showContextMenu({menuId:ze.StickyScrollContext,getAnchor:()=>i})}_toggleFoldingRegionForLine(e){if(!this._foldingModel||e===null)return;const t=this._stickyScrollWidget.getRenderedStickyLine(e),i=t==null?void 0:t.foldingIcon;if(!i)return;see(this._foldingModel,Number.MAX_VALUE,[e]),i.isCollapsed=!i.isCollapsed;const s=(i.isCollapsed?this._editor.getTopForLineNumber(i.foldingEndLine):this._editor.getTopForLineNumber(i.foldingStartLine))-this._editor.getOption(67)*t.index+1;this._editor.setScrollTop(s),this._renderStickyScroll(e)}_readConfiguration(){const e=this._editor.getOption(116);if(e.enabled===!1){this._editor.removeOverlayWidget(this._stickyScrollWidget),this._sessionStore.clear(),this._enabled=!1;return}else e.enabled&&!this._enabled&&(this._editor.addOverlayWidget(this._stickyScrollWidget),this._sessionStore.add(this._editor.onDidScrollChange(i=>{i.scrollTopChanged&&(this._showEndForLine=void 0,this._renderStickyScroll())})),this._sessionStore.add(this._editor.onDidLayoutChange(()=>this._onDidResize())),this._sessionStore.add(this._editor.onDidChangeModelTokens(i=>this._onTokensChange(i))),this._sessionStore.add(this._stickyLineCandidateProvider.onDidChangeStickyScroll(()=>{this._showEndForLine=void 0,this._renderStickyScroll()})),this._enabled=!0);this._editor.getOption(68).renderType===2&&this._sessionStore.add(this._editor.onDidChangeCursorPosition(()=>{this._showEndForLine=void 0,this._renderStickyScroll(0)}))}_readConfigurationChange(e){(e.hasChanged(116)||e.hasChanged(73)||e.hasChanged(67)||e.hasChanged(111)||e.hasChanged(68))&&this._readConfiguration(),e.hasChanged(68)&&this._renderStickyScroll(0)}_needsUpdate(e){const t=this._stickyScrollWidget.getCurrentLines();for(const i of t)for(const s of e.ranges)if(i>=s.fromLineNumber&&i<=s.toLineNumber)return!0;return!1}_onTokensChange(e){this._needsUpdate(e)&&this._renderStickyScroll(0)}_onDidResize(){const t=this._editor.getLayoutInfo().height/this._editor.getOption(67);this._maxStickyLines=Math.round(t*.25)}async _renderStickyScroll(e){const t=this._editor.getModel();if(!t||t.isTooLargeForTokenization()){this._resetState();return}const i=this._updateAndGetMinRebuildFromLine(e),s=this._stickyLineCandidateProvider.getVersionId();if(s===void 0||s===t.getVersionId())if(!this._focused)await this._updateState(i);else if(this._focusedStickyElementIndex===-1)await this._updateState(i),this._focusedStickyElementIndex=this._stickyScrollWidget.lineNumberCount-1,this._focusedStickyElementIndex!==-1&&this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex);else{const o=this._stickyScrollWidget.lineNumbers[this._focusedStickyElementIndex];await this._updateState(i),this._stickyScrollWidget.lineNumberCount===0?this._focusedStickyElementIndex=-1:(this._stickyScrollWidget.lineNumbers.includes(o)||(this._focusedStickyElementIndex=this._stickyScrollWidget.lineNumberCount-1),this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex))}}_updateAndGetMinRebuildFromLine(e){if(e!==void 0){const t=this._minRebuildFromLine!==void 0?this._minRebuildFromLine:1/0;this._minRebuildFromLine=Math.min(e,t)}return this._minRebuildFromLine}async _updateState(e){var i;this._minRebuildFromLine=void 0,this._foldingModel=await((i=$_.get(this._editor))==null?void 0:i.getFoldingModel())??void 0,this._widgetState=this.findScrollWidgetState();const t=this._widgetState.startLineNumbers.length>0;this._stickyScrollVisibleContextKey.set(t),this._stickyScrollWidget.setState(this._widgetState,this._foldingModel,e)}async _resetState(){this._minRebuildFromLine=void 0,this._foldingModel=void 0,this._widgetState=IE.Empty,this._stickyScrollVisibleContextKey.set(!1),this._stickyScrollWidget.setState(void 0,void 0)}findScrollWidgetState(){const e=this._editor.getOption(67),t=Math.min(this._maxStickyLines,this._editor.getOption(116).maxLineCount),i=this._editor.getScrollTop();let s=0;const r=[],o=[],a=this._editor.getVisibleRanges();if(a.length!==0){const l=new DE(a[0].startLineNumber,a[a.length-1].endLineNumber),c=this._stickyLineCandidateProvider.getCandidateStickyLinesIntersecting(l);for(const d of c){const u=d.startLineNumber,h=d.endLineNumber,f=d.nestingDepth;if(h-u>0){const g=(f-1)*e,p=f*e,_=this._editor.getBottomForLineNumber(u)-i,w=this._editor.getTopForLineNumber(h)-i,b=this._editor.getBottomForLineNumber(h)-i;if(g>w&&g<=b){r.push(u),o.push(h+1),s=b-p;break}else p>_&&p<=b&&(r.push(u),o.push(h+1));if(r.length===t)break}}}return this._endLineNumbers=o,new IE(r,o,s,this._showEndForLine)}dispose(){super.dispose(),this._sessionStore.dispose()}},bG=Kw,Kw.ID="store.contrib.stickyScrollController",Kw);op=bG=Byt([zC(1,ol),zC(2,Be),zC(3,Ze),zC(4,vn),zC(5,Zl),zC(6,at)],op);class Wyt extends Ho{constructor(){super({id:"editor.action.toggleStickyScroll",title:{...lt("toggleEditorStickyScroll","Toggle Editor Sticky Scroll"),mnemonicTitle:v({key:"mitoggleStickyScroll",comment:["&& denotes a mnemonic"]},"&&Toggle Editor Sticky Scroll")},metadata:{description:lt("toggleEditorStickyScroll.description","Toggle/enable the editor sticky scroll which shows the nested scopes at the top of the viewport")},category:Tyt.View,toggled:{condition:he.equals("config.editor.stickyScroll.enabled",!0),title:v("stickyScroll","Sticky Scroll"),mnemonicTitle:v({key:"miStickyScroll",comment:["&& denotes a mnemonic"]},"&&Sticky Scroll")},menu:[{id:ze.CommandPalette},{id:ze.MenubarAppearanceMenu,group:"4_editor",order:3},{id:ze.StickyScrollContext}]})}async run(e){const t=e.get(Tt),i=!t.getValue("editor.stickyScroll.enabled");return t.updateValue("editor.stickyScroll.enabled",i)}}const fW=100;class Hyt extends qu{constructor(){super({id:"editor.action.focusStickyScroll",title:{...lt("focusStickyScroll","Focus on the editor sticky scroll"),mnemonicTitle:v({key:"mifocusStickyScroll",comment:["&& denotes a mnemonic"]},"&&Focus Sticky Scroll")},precondition:he.and(he.has("config.editor.stickyScroll.enabled"),F.stickyScrollVisible),menu:[{id:ze.CommandPalette}]})}runEditorCommand(e,t){var i;(i=op.get(t))==null||i.focus()}}class Vyt extends qu{constructor(){super({id:"editor.action.selectNextStickyScrollLine",title:lt("selectNextStickyScrollLine.title","Select the next editor sticky scroll line"),precondition:F.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:fW,primary:18}})}runEditorCommand(e,t){var i;(i=op.get(t))==null||i.focusNext()}}class zyt extends qu{constructor(){super({id:"editor.action.selectPreviousStickyScrollLine",title:lt("selectPreviousStickyScrollLine.title","Select the previous sticky scroll line"),precondition:F.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:fW,primary:16}})}runEditorCommand(e,t){var i;(i=op.get(t))==null||i.focusPrevious()}}class Uyt extends qu{constructor(){super({id:"editor.action.goToFocusedStickyScrollLine",title:lt("goToFocusedStickyScrollLine.title","Go to the focused sticky scroll line"),precondition:F.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:fW,primary:3}})}runEditorCommand(e,t){var i;(i=op.get(t))==null||i.goToFocused()}}class $yt extends qu{constructor(){super({id:"editor.action.selectEditor",title:lt("selectEditor.title","Select Editor"),precondition:F.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:fW,primary:9}})}runEditorCommand(e,t){var i;(i=op.get(t))==null||i.selectEditor()}}Xt(op.ID,op,1);Bi(Wyt);Bi(Hyt);Bi(zyt);Bi(Vyt);Bi(Uyt);Bi($yt);var $ke=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Dk=function(n,e){return function(t,i){e(t,i,n)}};class jyt{constructor(e,t,i,s,r,o){this.range=e,this.insertText=t,this.filterText=i,this.additionalTextEdits=s,this.command=r,this.completion=o}}let wG=class extends pje{constructor(e,t,i,s,r,o){super(r.disposable),this.model=e,this.line=t,this.word=i,this.completionModel=s,this._suggestMemoryService=o}canBeReused(e,t,i){return this.model===e&&this.line===t&&this.word.word.length>0&&this.word.startColumn===i.startColumn&&this.word.endColumn<i.endColumn&&this.completionModel.getIncompleteProvider().size===0}get items(){const e=[],{items:t}=this.completionModel,i=this._suggestMemoryService.select(this.model,{lineNumber:this.line,column:this.word.endColumn+this.completionModel.lineContext.characterCountDelta},t),s=qt.slice(t,i),r=qt.slice(t,0,i);let o=5;for(const a of qt.concat(s,r)){if(a.score===Au.Default)continue;const l=new M(a.editStart.lineNumber,a.editStart.column,a.editInsertEnd.lineNumber,a.editInsertEnd.column+this.completionModel.lineContext.characterCountDelta),c=a.completion.insertTextRules&&a.completion.insertTextRules&4?{snippet:a.completion.insertText}:a.completion.insertText;e.push(new jyt(l,c,a.filterTextLow??a.labelLow,a.completion.additionalTextEdits,a.completion.command,a)),o-->=0&&a.resolve(xt.None)}return e}};wG=$ke([Dk(5,lW)],wG);let CG=class extends ee{constructor(e,t,i,s){super(),this._languageFeatureService=e,this._clipboardService=t,this._suggestMemoryService=i,this._editorService=s,this._store.add(e.inlineCompletionsProvider.register("*",this))}async provideInlineCompletions(e,t,i,s){var f;if(i.selectedSuggestionInfo)return;let r;for(const g of this._editorService.listCodeEditors())if(g.getModel()===e){r=g;break}if(!r)return;const o=r.getOption(90);if(H1.isAllOff(o))return;e.tokenization.tokenizeIfCheap(t.lineNumber);const a=e.tokenization.getLineTokens(t.lineNumber),l=a.getStandardTokenType(a.findTokenIndexAtOffset(Math.max(t.column-1-1,0)));if(H1.valueFor(o,l)!=="inline")return;let c=e.getWordAtPosition(t),d;if(c!=null&&c.word||(d=this._getTriggerCharacterInfo(e,t)),!(c!=null&&c.word)&&!d||(c||(c=e.getWordUntilPosition(t)),c.endColumn!==t.column))return;let u;const h=e.getValueInRange(new M(t.lineNumber,1,t.lineNumber,t.column));if(!d&&((f=this._lastResult)!=null&&f.canBeReused(e,t.lineNumber,c))){const g=new dhe(h,t.column-this._lastResult.word.endColumn);this._lastResult.completionModel.lineContext=g,this._lastResult.acquire(),u=this._lastResult}else{const g=await cee(this._languageFeatureService.completionProvider,e,t,new jD(void 0,IF.createSuggestFilter(r).itemKind,d==null?void 0:d.providers),d&&{triggerKind:1,triggerCharacter:d.ch},s);let p;g.needsClipboard&&(p=await this._clipboardService.readText());const _=new dm(g.items,t.column,new dhe(h,0),EF.None,r.getOption(119),r.getOption(113),{boostFullMatch:!1,firstMatchCanBeWeak:!1},p);u=new wG(e,t.lineNumber,c,_,g,this._suggestMemoryService)}return this._lastResult=u,u}handleItemDidShow(e,t){t.completion.resolve(xt.None)}freeInlineCompletions(e){e.release()}_getTriggerCharacterInfo(e,t){var r;const i=e.getValueInRange(M.fromPositions({lineNumber:t.lineNumber,column:t.column-1},t)),s=new Set;for(const o of this._languageFeatureService.completionProvider.all(e))(r=o.triggerCharacters)!=null&&r.includes(i)&&s.add(o);if(s.size!==0)return{providers:s,ch:i}}};CG=$ke([Dk(0,Be),Dk(1,pp),Dk(2,lW),Dk(3,ri)],CG);$x(CG);class Kyt extends Oe{constructor(){super({id:"editor.action.forceRetokenize",label:v("forceRetokenize","Developer: Force Retokenize"),alias:"Developer: Force Retokenize",precondition:void 0})}run(e,t){if(!t.hasModel())return;const i=t.getModel();i.tokenization.resetTokenization();const s=new js;i.tokenization.forceTokenization(i.getLineCount()),s.stop(),console.log(`tokenization took ${s.elapsed()}`)}}we(Kyt);const I5=class I5 extends Ho{constructor(){super({id:I5.ID,title:lt({key:"toggle.tabMovesFocus",comment:["Turn on/off use of tab key for moving focus around VS Code"]},"Toggle Tab Key Moves Focus"),precondition:void 0,keybinding:{primary:2091,mac:{primary:1323},weight:100},metadata:{description:lt("tabMovesFocusDescriptions","Determines whether the tab key moves focus around the workbench or inserts the tab character in the current editor. This is also called tab trapping, tab navigation, or tab focus mode.")},f1:!0})}run(){const t=!YS.getTabFocusMode();YS.setTabFocusMode(t),Bo(t?v("toggle.tabMovesFocus.on","Pressing Tab will now move focus to the next focusable element"):v("toggle.tabMovesFocus.off","Pressing Tab will now insert the tab character"))}};I5.ID="editor.action.toggleTabFocusMode";let yG=I5;Bi(yG);var qyt=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},khe=function(n,e){return function(t,i){e(t,i,n)}};let SG=class extends ee{get enabled(){return this._enabled}set enabled(e){e?(this.el.setAttribute("aria-disabled","false"),this.el.tabIndex=0,this.el.style.pointerEvents="auto",this.el.style.opacity="1",this.el.style.cursor="pointer",this._enabled=!1):(this.el.setAttribute("aria-disabled","true"),this.el.tabIndex=-1,this.el.style.pointerEvents="none",this.el.style.opacity="0.4",this.el.style.cursor="default",this._enabled=!0),this._enabled=e}constructor(e,t,i={},s,r){super(),this._link=t,this._hoverService=s,this._enabled=!0,this.el=_e(e,xe("a.monaco-link",{tabIndex:t.tabIndex??0,href:t.href},t.label)),this.hoverDelegate=i.hoverDelegate??Vo("mouse"),this.setTooltip(t.title),this.el.setAttribute("role","button");const o=this._register(new zt(this.el,"click")),a=this._register(new zt(this.el,"keypress")),l=Ee.chain(a.event,u=>u.map(h=>new Oi(h)).filter(h=>h.keyCode===3)),c=this._register(new zt(this.el,Hi.Tap)).event;this._register(Br.addTarget(this.el));const d=Ee.any(o.event,l,c);this._register(d(u=>{this.enabled&&($t.stop(u,!0),i!=null&&i.opener?i.opener(this._link.href):r.open(this._link.href,{allowCommands:!0}))})),this.enabled=!0}setTooltip(e){this.hoverDelegate.showNativeHover?this.el.title=e??"":!this.hover&&e?this.hover=this._register(this._hoverService.setupManagedHover(this.hoverDelegate,this.el,e)):this.hover&&this.hover.update(e)}};SG=qyt([khe(3,wf),khe(4,ba)],SG);var jke=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Kke=function(n,e){return function(t,i){e(t,i,n)}};const Gyt=26;let xG=class extends ee{constructor(e,t){super(),this._editor=e,this.instantiationService=t,this.banner=this._register(this.instantiationService.createInstance(LG))}hide(){this._editor.setBanner(null,0),this.banner.clear()}show(e){this.banner.show({...e,onClose:()=>{var t;this.hide(),(t=e.onClose)==null||t.call(e)}}),this._editor.setBanner(this.banner.element,Gyt)}};xG=jke([Kke(1,Ze)],xG);let LG=class extends ee{constructor(e){super(),this.instantiationService=e,this.markdownRenderer=this.instantiationService.createInstance(ep,{}),this.element=xe("div.editor-banner"),this.element.tabIndex=0}getAriaLabel(e){if(e.ariaLabel)return e.ariaLabel;if(typeof e.message=="string")return e.message}getBannerMessage(e){if(typeof e=="string"){const t=xe("span");return t.innerText=e,t}return this.markdownRenderer.render(e).element}clear(){nr(this.element)}show(e){nr(this.element);const t=this.getAriaLabel(e);t&&this.element.setAttribute("aria-label",t);const i=_e(this.element,xe("div.icon-container"));i.setAttribute("aria-hidden","true"),e.icon&&i.appendChild(xe(`div${ot.asCSSSelector(e.icon)}`));const s=_e(this.element,xe("div.message-container"));if(s.setAttribute("aria-hidden","true"),s.appendChild(this.getBannerMessage(e.message)),this.messageActionsContainer=_e(this.element,xe("div.message-actions-container")),e.actions)for(const o of e.actions)this._register(this.instantiationService.createInstance(SG,this.messageActionsContainer,{...o,tabIndex:-1},{}));const r=_e(this.element,xe("div.action-container"));this.actionBar=this._register(new Ul(r)),this.actionBar.push(this._register(new Ya("banner.close","Close Banner",ot.asClassName(gSe),!0,()=>{typeof e.onClose=="function"&&e.onClose()})),{icon:!0,label:!1}),this.actionBar.setFocusable(!1)}};LG=jke([Kke(0,Ze)],LG);var See=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},jy=function(n,e){return function(t,i){e(t,i,n)}};const Yyt=Xi("extensions-warning-message",ye.warning,v("warningIcon","Icon shown with a warning message in the extensions editor."));var uS;let tN=(uS=class extends ee{constructor(e,t,i,s){super(),this._editor=e,this._editorWorkerService=t,this._workspaceTrustService=i,this._highlighter=null,this._bannerClosed=!1,this._updateState=r=>{if(r&&r.hasMore){if(this._bannerClosed)return;const o=Math.max(r.ambiguousCharacterCount,r.nonBasicAsciiCharacterCount,r.invisibleCharacterCount);let a;if(r.nonBasicAsciiCharacterCount>=o)a={message:v("unicodeHighlighting.thisDocumentHasManyNonBasicAsciiUnicodeCharacters","This document contains many non-basic ASCII unicode characters"),command:new nN};else if(r.ambiguousCharacterCount>=o)a={message:v("unicodeHighlighting.thisDocumentHasManyAmbiguousUnicodeCharacters","This document contains many ambiguous unicode characters"),command:new A0};else if(r.invisibleCharacterCount>=o)a={message:v("unicodeHighlighting.thisDocumentHasManyInvisibleUnicodeCharacters","This document contains many invisible unicode characters"),command:new iN};else throw new Error("Unreachable");this._bannerController.show({id:"unicodeHighlightBanner",message:a.message,icon:Yyt,actions:[{label:a.command.shortLabel,href:`command:${a.command.id}`}],onClose:()=>{this._bannerClosed=!0}})}else this._bannerController.hide()},this._bannerController=this._register(s.createInstance(xG,e)),this._register(this._editor.onDidChangeModel(()=>{this._bannerClosed=!1,this._updateHighlighter()})),this._options=e.getOption(126),this._register(i.onDidChangeTrust(r=>{this._updateHighlighter()})),this._register(e.onDidChangeConfiguration(r=>{r.hasChanged(126)&&(this._options=e.getOption(126),this._updateHighlighter())})),this._updateHighlighter()}dispose(){this._highlighter&&(this._highlighter.dispose(),this._highlighter=null),super.dispose()}_updateHighlighter(){if(this._updateState(null),this._highlighter&&(this._highlighter.dispose(),this._highlighter=null),!this._editor.hasModel())return;const e=Zyt(this._workspaceTrustService.isWorkspaceTrusted(),this._options);if([e.nonBasicASCII,e.ambiguousCharacters,e.invisibleCharacters].every(i=>i===!1))return;const t={nonBasicASCII:e.nonBasicASCII,ambiguousCharacters:e.ambiguousCharacters,invisibleCharacters:e.invisibleCharacters,includeComments:e.includeComments,includeStrings:e.includeStrings,allowedCodePoints:Object.keys(e.allowedCharacters).map(i=>i.codePointAt(0)),allowedLocales:Object.keys(e.allowedLocales).map(i=>i==="_os"?new Intl.NumberFormat().resolvedOptions().locale:i==="_vscode"?f$e:i)};this._editorWorkerService.canComputeUnicodeHighlights(this._editor.getModel().uri)?this._highlighter=new kG(this._editor,t,this._updateState,this._editorWorkerService):this._highlighter=new Xyt(this._editor,t,this._updateState)}getDecorationInfo(e){return this._highlighter?this._highlighter.getDecorationInfo(e):null}},uS.ID="editor.contrib.unicodeHighlighter",uS);tN=See([jy(1,wa),jy(2,N1e),jy(3,Ze)],tN);function Zyt(n,e){return{nonBasicASCII:e.nonBasicASCII===bl?!n:e.nonBasicASCII,ambiguousCharacters:e.ambiguousCharacters,invisibleCharacters:e.invisibleCharacters,includeComments:e.includeComments===bl?!n:e.includeComments,includeStrings:e.includeStrings===bl?!n:e.includeStrings,allowedCharacters:e.allowedCharacters,allowedLocales:e.allowedLocales}}let kG=class extends ee{constructor(e,t,i,s){super(),this._editor=e,this._options=t,this._updateState=i,this._editorWorkerService=s,this._model=this._editor.getModel(),this._decorations=this._editor.createDecorationsCollection(),this._updateSoon=this._register(new yi(()=>this._update(),250)),this._register(this._editor.onDidChangeModelContent(()=>{this._updateSoon.schedule()})),this._updateSoon.schedule()}dispose(){this._decorations.clear(),super.dispose()}_update(){if(this._model.isDisposed())return;if(!this._model.mightContainNonBasicASCII()){this._decorations.clear();return}const e=this._model.getVersionId();this._editorWorkerService.computedUnicodeHighlights(this._model.uri,this._options).then(t=>{if(this._model.isDisposed()||this._model.getVersionId()!==e)return;this._updateState(t);const i=[];if(!t.hasMore)for(const s of t.ranges)i.push({range:s,options:$F.instance.getDecorationFromOptions(this._options)});this._decorations.set(i)})}getDecorationInfo(e){if(!this._decorations.has(e))return null;const t=this._editor.getModel();if(!dJ(t,e))return null;const i=t.getValueInRange(e.range);return{reason:Gke(i,this._options),inComment:uJ(t,e),inString:hJ(t,e)}}};kG=See([jy(3,wa)],kG);class Xyt extends ee{constructor(e,t,i){super(),this._editor=e,this._options=t,this._updateState=i,this._model=this._editor.getModel(),this._decorations=this._editor.createDecorationsCollection(),this._updateSoon=this._register(new yi(()=>this._update(),250)),this._register(this._editor.onDidLayoutChange(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidScrollChange(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidChangeHiddenAreas(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidChangeModelContent(()=>{this._updateSoon.schedule()})),this._updateSoon.schedule()}dispose(){this._decorations.clear(),super.dispose()}_update(){if(this._model.isDisposed())return;if(!this._model.mightContainNonBasicASCII()){this._decorations.clear();return}const e=this._editor.getVisibleRanges(),t=[],i={ranges:[],ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0,hasMore:!1};for(const s of e){const r=SX.computeUnicodeHighlights(this._model,this._options,s);for(const o of r.ranges)i.ranges.push(o);i.ambiguousCharacterCount+=i.ambiguousCharacterCount,i.invisibleCharacterCount+=i.invisibleCharacterCount,i.nonBasicAsciiCharacterCount+=i.nonBasicAsciiCharacterCount,i.hasMore=i.hasMore||r.hasMore}if(!i.hasMore)for(const s of i.ranges)t.push({range:s,options:$F.instance.getDecorationFromOptions(this._options)});this._updateState(i),this._decorations.set(t)}getDecorationInfo(e){if(!this._decorations.has(e))return null;const t=this._editor.getModel(),i=t.getValueInRange(e.range);return dJ(t,e)?{reason:Gke(i,this._options),inComment:uJ(t,e),inString:hJ(t,e)}:null}}const qke=v("unicodeHighlight.configureUnicodeHighlightOptions","Configure Unicode Highlight Options");let EG=class{constructor(e,t,i){this._editor=e,this._languageService=t,this._openerService=i,this.hoverOrdinal=5}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1)return[];const i=this._editor.getModel(),s=this._editor.getContribution(tN.ID);if(!s)return[];const r=[],o=new Set;let a=300;for(const l of t){const c=s.getDecorationInfo(l);if(!c)continue;const u=i.getValueInRange(l.range).codePointAt(0),h=N6(u);let f;switch(c.reason.kind){case 0:{MN(c.reason.confusableWith)?f=v("unicodeHighlight.characterIsAmbiguousASCII","The character {0} could be confused with the ASCII character {1}, which is more common in source code.",h,N6(c.reason.confusableWith.codePointAt(0))):f=v("unicodeHighlight.characterIsAmbiguous","The character {0} could be confused with the character {1}, which is more common in source code.",h,N6(c.reason.confusableWith.codePointAt(0)));break}case 1:f=v("unicodeHighlight.characterIsInvisible","The character {0} is invisible.",h);break;case 2:f=v("unicodeHighlight.characterIsNonBasicAscii","The character {0} is not a basic ASCII character.",h);break}if(o.has(f))continue;o.add(f);const g={codePoint:u,reason:c.reason,inComment:c.inComment,inString:c.inString},p=v("unicodeHighlight.adjustSettings","Adjust settings"),_=`command:${jF.ID}?${encodeURIComponent(JSON.stringify(g))}`,w=new Rr("",!0).appendMarkdown(f).appendText(" ").appendLink(_,p,qke);r.push(new _d(this,l.range,[w],!1,a++))}return r}renderHoverParts(e,t){return L_t(e,t,this._editor,this._languageService,this._openerService)}};EG=See([jy(1,un),jy(2,ba)],EG);function IG(n){return`U+${n.toString(16).padStart(4,"0")}`}function N6(n){let e=`\`${IG(n)}\``;return Hb.isInvisibleCharacter(n)||(e+=` "${`${Qyt(n)}`}"`),e}function Qyt(n){return n===96?"`` ` ``":"`"+String.fromCodePoint(n)+"`"}function Gke(n,e){return SX.computeUnicodeHighlightReason(n,e)}const D5=class D5{constructor(){this.map=new Map}getDecorationFromOptions(e){return this.getDecoration(!e.includeComments,!e.includeStrings)}getDecoration(e,t){const i=`${e}${t}`;let s=this.map.get(i);return s||(s=_t.createDynamic({description:"unicode-highlight",stickiness:1,className:"unicode-highlight",showIfCollapsed:!0,overviewRuler:null,minimap:null,hideInCommentTokens:e,hideInStringTokens:t}),this.map.set(i,s)),s}};D5.instance=new D5;let $F=D5;class Jyt extends Oe{constructor(){super({id:A0.ID,label:v("action.unicodeHighlight.disableHighlightingInComments","Disable highlighting of characters in comments"),alias:"Disable highlighting of characters in comments",precondition:void 0}),this.shortLabel=v("unicodeHighlight.disableHighlightingInComments.shortLabel","Disable Highlight In Comments")}async run(e,t,i){const s=e==null?void 0:e.get(Tt);s&&this.runAction(s)}async runAction(e){await e.updateValue(ia.includeComments,!1,2)}}class eSt extends Oe{constructor(){super({id:A0.ID,label:v("action.unicodeHighlight.disableHighlightingInStrings","Disable highlighting of characters in strings"),alias:"Disable highlighting of characters in strings",precondition:void 0}),this.shortLabel=v("unicodeHighlight.disableHighlightingInStrings.shortLabel","Disable Highlight In Strings")}async run(e,t,i){const s=e==null?void 0:e.get(Tt);s&&this.runAction(s)}async runAction(e){await e.updateValue(ia.includeStrings,!1,2)}}const N5=class N5 extends Oe{constructor(){super({id:N5.ID,label:v("action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters","Disable highlighting of ambiguous characters"),alias:"Disable highlighting of ambiguous characters",precondition:void 0}),this.shortLabel=v("unicodeHighlight.disableHighlightingOfAmbiguousCharacters.shortLabel","Disable Ambiguous Highlight")}async run(e,t,i){const s=e==null?void 0:e.get(Tt);s&&this.runAction(s)}async runAction(e){await e.updateValue(ia.ambiguousCharacters,!1,2)}};N5.ID="editor.action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters";let A0=N5;const T5=class T5 extends Oe{constructor(){super({id:T5.ID,label:v("action.unicodeHighlight.disableHighlightingOfInvisibleCharacters","Disable highlighting of invisible characters"),alias:"Disable highlighting of invisible characters",precondition:void 0}),this.shortLabel=v("unicodeHighlight.disableHighlightingOfInvisibleCharacters.shortLabel","Disable Invisible Highlight")}async run(e,t,i){const s=e==null?void 0:e.get(Tt);s&&this.runAction(s)}async runAction(e){await e.updateValue(ia.invisibleCharacters,!1,2)}};T5.ID="editor.action.unicodeHighlight.disableHighlightingOfInvisibleCharacters";let iN=T5;const R5=class R5 extends Oe{constructor(){super({id:R5.ID,label:v("action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters","Disable highlighting of non basic ASCII characters"),alias:"Disable highlighting of non basic ASCII characters",precondition:void 0}),this.shortLabel=v("unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters.shortLabel","Disable Non ASCII Highlight")}async run(e,t,i){const s=e==null?void 0:e.get(Tt);s&&this.runAction(s)}async runAction(e){await e.updateValue(ia.nonBasicASCII,!1,2)}};R5.ID="editor.action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters";let nN=R5;const A5=class A5 extends Oe{constructor(){super({id:A5.ID,label:v("action.unicodeHighlight.showExcludeOptions","Show Exclude Options"),alias:"Show Exclude Options",precondition:void 0})}async run(e,t,i){const{codePoint:s,reason:r,inString:o,inComment:a}=i,l=String.fromCodePoint(s),c=e.get(Uc),d=e.get(Tt);function u(g){return Hb.isInvisibleCharacter(g)?v("unicodeHighlight.excludeInvisibleCharFromBeingHighlighted","Exclude {0} (invisible character) from being highlighted",IG(g)):v("unicodeHighlight.excludeCharFromBeingHighlighted","Exclude {0} from being highlighted",`${IG(g)} "${l}"`)}const h=[];if(r.kind===0)for(const g of r.notAmbiguousInLocales)h.push({label:v("unicodeHighlight.allowCommonCharactersInLanguage",'Allow unicode characters that are more common in the language "{0}".',g),run:async()=>{iSt(d,[g])}});if(h.push({label:u(s),run:()=>tSt(d,[s])}),a){const g=new Jyt;h.push({label:g.label,run:async()=>g.runAction(d)})}else if(o){const g=new eSt;h.push({label:g.label,run:async()=>g.runAction(d)})}if(r.kind===0){const g=new A0;h.push({label:g.label,run:async()=>g.runAction(d)})}else if(r.kind===1){const g=new iN;h.push({label:g.label,run:async()=>g.runAction(d)})}else if(r.kind===2){const g=new nN;h.push({label:g.label,run:async()=>g.runAction(d)})}else nSt(r);const f=await c.pick(h,{title:qke});f&&await f.run()}};A5.ID="editor.action.unicodeHighlight.showExcludeOptions";let jF=A5;async function tSt(n,e){const t=n.getValue(ia.allowedCharacters);let i;typeof t=="object"&&t?i=t:i={};for(const s of e)i[String.fromCodePoint(s)]=!0;await n.updateValue(ia.allowedCharacters,i,2)}async function iSt(n,e){var s;const t=(s=n.inspect(ia.allowedLocales).user)==null?void 0:s.value;let i;typeof t=="object"&&t?i=Object.assign({},t):i={};for(const r of e)i[r]=!0;await n.updateValue(ia.allowedLocales,i,2)}function nSt(n){throw new Error(`Unexpected value: ${n}`)}we(A0);we(iN);we(nN);we(jF);Xt(tN.ID,tN,1);Q0.register(EG);var sSt=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Ehe=function(n,e){return function(t,i){e(t,i,n)}};const Yke="ignoreUnusualLineTerminators";function rSt(n,e,t){n.setModelProperty(e.uri,Yke,t)}function oSt(n,e){return n.getModelProperty(e.uri,Yke)}var hS;let KF=(hS=class extends ee{constructor(e,t,i){super(),this._editor=e,this._dialogService=t,this._codeEditorService=i,this._isPresentingDialog=!1,this._config=this._editor.getOption(127),this._register(this._editor.onDidChangeConfiguration(s=>{s.hasChanged(127)&&(this._config=this._editor.getOption(127),this._checkForUnusualLineTerminators())})),this._register(this._editor.onDidChangeModel(()=>{this._checkForUnusualLineTerminators()})),this._register(this._editor.onDidChangeModelContent(s=>{s.isUndoing||this._checkForUnusualLineTerminators()})),this._checkForUnusualLineTerminators()}async _checkForUnusualLineTerminators(){if(this._config==="off"||!this._editor.hasModel())return;const e=this._editor.getModel();if(!e.mightContainUnusualLineTerminators()||oSt(this._codeEditorService,e)===!0||this._editor.getOption(92))return;if(this._config==="auto"){e.removeUnusualLineTerminators(this._editor.getSelections());return}if(this._isPresentingDialog)return;let i;try{this._isPresentingDialog=!0,i=await this._dialogService.confirm({title:v("unusualLineTerminators.title","Unusual Line Terminators"),message:v("unusualLineTerminators.message","Detected unusual line terminators"),detail:v("unusualLineTerminators.detail","The file '{0}' contains one or more unusual line terminator characters, like Line Separator (LS) or Paragraph Separator (PS).\n\nIt is recommended to remove them from the file. This can be configured via `editor.unusualLineTerminators`.",Pc(e.uri)),primaryButton:v({key:"unusualLineTerminators.fix",comment:["&& denotes a mnemonic"]},"&&Remove Unusual Line Terminators"),cancelButton:v("unusualLineTerminators.ignore","Ignore")})}finally{this._isPresentingDialog=!1}if(!i.confirmed){rSt(this._codeEditorService,e,!0);return}e.removeUnusualLineTerminators(this._editor.getSelections())}},hS.ID="editor.contrib.unusualLineTerminatorsDetector",hS);KF=sSt([Ehe(1,WN),Ehe(2,ri)],KF);Xt(KF.ID,KF,1);var aSt=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},lSt=function(n,e){return function(t,i){e(t,i,n)}};class Ihe{constructor(){this.selector={language:"*"}}provideDocumentHighlights(e,t,i){const s=[],r=e.getWordAtPosition({lineNumber:t.lineNumber,column:t.column});return r?e.isDisposed()?void 0:e.findMatches(r.word,!0,!1,!0,eP,!1).map(a=>({range:a.range,kind:IS.Text})):Promise.resolve(s)}provideMultiDocumentHighlights(e,t,i,s){const r=new $s,o=e.getWordAtPosition({lineNumber:t.lineNumber,column:t.column});if(!o)return Promise.resolve(r);for(const a of[e,...i]){if(a.isDisposed())continue;const c=a.findMatches(o.word,!0,!1,!0,eP,!1).map(d=>({range:d.range,kind:IS.Text}));c&&r.set(a.uri,c)}return r}}let DG=class extends ee{constructor(e){super(),this._register(e.documentHighlightProvider.register("*",new Ihe)),this._register(e.multiDocumentHighlightProvider.register("*",new Ihe))}};DG=aSt([lSt(0,Be)],DG);var Zke=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},iM=function(n,e){return function(t,i){e(t,i,n)}},Hn,NG;const xee=new Re("hasWordHighlights",!1);function Xke(n,e,t,i){const s=n.ordered(e);return cX(s.map(r=>()=>Promise.resolve(r.provideDocumentHighlights(e,t,i)).then(void 0,Wn)),r=>r!=null).then(r=>{if(r){const o=new $s;return o.set(e.uri,r),o}return new $s})}function cSt(n,e,t,i,s,r){const o=n.ordered(e);return cX(o.map(a=>()=>{const l=r.filter(c=>mCe(c)).filter(c=>RX(a.selector,c.uri,c.getLanguageId(),!0,void 0,void 0)>0);return Promise.resolve(a.provideMultiDocumentHighlights(e,t,l,s)).then(void 0,Wn)}),a=>a!=null)}class Qke{constructor(e,t,i){this._model=e,this._selection=t,this._wordSeparators=i,this._wordRange=this._getCurrentWordRange(e,t),this._result=null}get result(){return this._result||(this._result=Ds(e=>this._compute(this._model,this._selection,this._wordSeparators,e))),this._result}_getCurrentWordRange(e,t){const i=e.getWordAtPosition(t.getPosition());return i?new M(t.startLineNumber,i.startColumn,t.startLineNumber,i.endColumn):null}isValid(e,t,i){const s=t.startLineNumber,r=t.startColumn,o=t.endColumn,a=this._getCurrentWordRange(e,t);let l=!!(this._wordRange&&this._wordRange.equalsRange(a));for(let c=0,d=i.length;!l&&c<d;c++){const u=i.getRange(c);u&&u.startLineNumber===s&&u.startColumn<=r&&u.endColumn>=o&&(l=!0)}return l}cancel(){this.result.cancel()}}class dSt extends Qke{constructor(e,t,i,s){super(e,t,i),this._providers=s}_compute(e,t,i,s){return Xke(this._providers,e,t.getPosition(),s).then(r=>r||new $s)}}class uSt extends Qke{constructor(e,t,i,s,r){super(e,t,i),this._providers=s,this._otherModels=r}_compute(e,t,i,s){return cSt(this._providers,e,t.getPosition(),i,s,this._otherModels).then(r=>r||new $s)}}function hSt(n,e,t,i,s){return new dSt(e,t,s,n)}function fSt(n,e,t,i,s,r){return new uSt(e,t,s,n,r)}va("_executeDocumentHighlights",async(n,e,t)=>{const i=n.get(Be),s=await Xke(i.documentHighlightProvider,e,t,xt.None);return s==null?void 0:s.get(e.uri)});var __;let TG=(__=class{constructor(e,t,i,s,r){this.toUnhook=new ue,this.workerRequestTokenId=0,this.workerRequestCompleted=!1,this.workerRequestValue=new $s,this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1,this.runDelayer=this.toUnhook.add(new Rc(50)),this.editor=e,this.providers=t,this.multiDocumentProviders=i,this.codeEditorService=r,this._hasWordHighlights=xee.bindTo(s),this._ignorePositionChangeEvent=!1,this.occurrencesHighlight=this.editor.getOption(81),this.model=this.editor.getModel(),this.toUnhook.add(e.onDidChangeCursorPosition(o=>{this._ignorePositionChangeEvent||this.occurrencesHighlight!=="off"&&this.runDelayer.trigger(()=>{this._onPositionChanged(o)})})),this.toUnhook.add(e.onDidFocusEditorText(o=>{this.occurrencesHighlight!=="off"&&(this.workerRequest||this.runDelayer.trigger(()=>{this._run()}))})),this.toUnhook.add(e.onDidChangeModelContent(o=>{O3(this.model.uri,"output")||this._stopAll()})),this.toUnhook.add(e.onDidChangeModel(o=>{!o.newModelUrl&&o.oldModelUrl?this._stopSingular():Hn.query&&this._run()})),this.toUnhook.add(e.onDidChangeConfiguration(o=>{var l,c;const a=this.editor.getOption(81);if(this.occurrencesHighlight!==a)switch(this.occurrencesHighlight=a,a){case"off":this._stopAll();break;case"singleFile":this._stopAll((c=(l=Hn.query)==null?void 0:l.modelInfo)==null?void 0:c.model);break;case"multiFile":Hn.query&&this._run(!0);break;default:console.warn("Unknown occurrencesHighlight setting value:",a);break}})),this.decorations=this.editor.createDecorationsCollection(),this.workerRequestTokenId=0,this.workerRequest=null,this.workerRequestCompleted=!1,this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1,Hn.query&&this._run()}hasDecorations(){return this.decorations.length>0}restore(){this.occurrencesHighlight!=="off"&&(this.runDelayer.cancel(),this._run())}_getSortedHighlights(){return this.decorations.getRanges().sort(M.compareRangesUsingStarts)}moveNext(){const e=this._getSortedHighlights(),i=(e.findIndex(r=>r.containsPosition(this.editor.getPosition()))+1)%e.length,s=e[i];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(s.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(s);const r=this._getWord();if(r){const o=this.editor.getModel().getLineContent(s.startLineNumber);Bo(`${o}, ${i+1} of ${e.length} for '${r.word}'`)}}finally{this._ignorePositionChangeEvent=!1}}moveBack(){const e=this._getSortedHighlights(),i=(e.findIndex(r=>r.containsPosition(this.editor.getPosition()))-1+e.length)%e.length,s=e[i];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(s.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(s);const r=this._getWord();if(r){const o=this.editor.getModel().getLineContent(s.startLineNumber);Bo(`${o}, ${i+1} of ${e.length} for '${r.word}'`)}}finally{this._ignorePositionChangeEvent=!1}}_removeSingleDecorations(){if(!this.editor.hasModel())return;const e=Hn.storedDecorationIDs.get(this.editor.getModel().uri);e&&(this.editor.removeDecorations(e),Hn.storedDecorationIDs.delete(this.editor.getModel().uri),this.decorations.length>0&&(this.decorations.clear(),this._hasWordHighlights.set(!1)))}_removeAllDecorations(e){const t=this.codeEditorService.listCodeEditors(),i=[];for(const s of t){if(!s.hasModel()||tD(s.getModel().uri,e==null?void 0:e.uri))continue;const r=Hn.storedDecorationIDs.get(s.getModel().uri);if(!r)continue;s.removeDecorations(r),i.push(s.getModel().uri);const o=K_.get(s);o!=null&&o.wordHighlighter&&o.wordHighlighter.decorations.length>0&&(o.wordHighlighter.decorations.clear(),o.wordHighlighter.workerRequest=null,o.wordHighlighter._hasWordHighlights.set(!1))}for(const s of i)Hn.storedDecorationIDs.delete(s)}_stopSingular(){var e,t,i,s;this._removeSingleDecorations(),this.editor.hasTextFocus()&&(((e=this.editor.getModel())==null?void 0:e.uri.scheme)!==mt.vscodeNotebookCell&&((i=(t=Hn.query)==null?void 0:t.modelInfo)==null?void 0:i.model.uri.scheme)!==mt.vscodeNotebookCell?(Hn.query=null,this._run()):(s=Hn.query)!=null&&s.modelInfo&&(Hn.query.modelInfo=null)),this.renderDecorationsTimer!==-1&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1),this.workerRequest!==null&&(this.workerRequest.cancel(),this.workerRequest=null),this.workerRequestCompleted||(this.workerRequestTokenId++,this.workerRequestCompleted=!0)}_stopAll(e){this._removeAllDecorations(e),this.renderDecorationsTimer!==-1&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1),this.workerRequest!==null&&(this.workerRequest.cancel(),this.workerRequest=null),this.workerRequestCompleted||(this.workerRequestTokenId++,this.workerRequestCompleted=!0)}_onPositionChanged(e){var t;if(this.occurrencesHighlight==="off"){this._stopAll();return}if(e.reason!==3&&((t=this.editor.getModel())==null?void 0:t.uri.scheme)!==mt.vscodeNotebookCell){this._stopAll();return}this._run()}_getWord(){const e=this.editor.getSelection(),t=e.startLineNumber,i=e.startColumn;return this.model.isDisposed()?null:this.model.getWordAtPosition({lineNumber:t,column:i})}getOtherModelsToHighlight(e){if(!e)return[];if(e.uri.scheme===mt.vscodeNotebookCell){const r=[],o=this.codeEditorService.listCodeEditors();for(const a of o){const l=a.getModel();l&&l!==e&&l.uri.scheme===mt.vscodeNotebookCell&&r.push(l)}return r}const i=[],s=this.codeEditorService.listCodeEditors();for(const r of s){if(!DJ(r))continue;const o=r.getModel();o&&e===o.modified&&i.push(o.modified)}if(i.length)return i;if(this.occurrencesHighlight==="singleFile")return[];for(const r of s){const o=r.getModel();o&&o!==e&&i.push(o)}return i}_run(e){var s,r;let t;if(this.editor.hasTextFocus()){const o=this.editor.getSelection();if(!o||o.startLineNumber!==o.endLineNumber){Hn.query=null,this._stopAll();return}const a=o.startColumn,l=o.endColumn,c=this._getWord();if(!c||c.startColumn>a||c.endColumn<l){Hn.query=null,this._stopAll();return}t=this.workerRequest&&this.workerRequest.isValid(this.model,o,this.decorations),Hn.query={modelInfo:{model:this.model,selection:o},word:c}}else if(!Hn.query){this._stopAll();return}if(this.lastCursorPositionChangeTime=new Date().getTime(),t)this.workerRequestCompleted&&this.renderDecorationsTimer!==-1&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1,this._beginRenderDecorations());else if(tD(this.editor.getModel().uri,(s=Hn.query.modelInfo)==null?void 0:s.model.uri)){if(!e){const l=this.decorations.getRanges();for(const c of l)if(c.containsPosition(this.editor.getPosition()))return}this._stopAll(e?this.model:void 0);const o=++this.workerRequestTokenId;this.workerRequestCompleted=!1;const a=this.getOtherModelsToHighlight(this.editor.getModel());if(!Hn.query||!Hn.query.modelInfo||Hn.query.modelInfo.model.isDisposed())return;this.workerRequest=this.computeWithModel(Hn.query.modelInfo.model,Hn.query.modelInfo.selection,Hn.query.word,a),(r=this.workerRequest)==null||r.result.then(l=>{o===this.workerRequestTokenId&&(this.workerRequestCompleted=!0,this.workerRequestValue=l||[],this._beginRenderDecorations())},pt)}}computeWithModel(e,t,i,s){return s.length?fSt(this.multiDocumentProviders,e,t,i,this.editor.getOption(132),s):hSt(this.providers,e,t,i,this.editor.getOption(132))}_beginRenderDecorations(){const e=new Date().getTime(),t=this.lastCursorPositionChangeTime+250;e>=t?(this.renderDecorationsTimer=-1,this.renderDecorations()):this.renderDecorationsTimer=setTimeout(()=>{this.renderDecorations()},t-e)}renderDecorations(){var t,i,s;this.renderDecorationsTimer=-1;const e=this.codeEditorService.listCodeEditors();for(const r of e){const o=K_.get(r);if(!o)continue;const a=[],l=(t=r.getModel())==null?void 0:t.uri;if(l&&this.workerRequestValue.has(l)){const c=Hn.storedDecorationIDs.get(l),d=this.workerRequestValue.get(l);if(d)for(const h of d)h.range&&a.push({range:h.range,options:t1t(h.kind)});let u=[];r.changeDecorations(h=>{u=h.deltaDecorations(c??[],a)}),Hn.storedDecorationIDs=Hn.storedDecorationIDs.set(l,u),a.length>0&&((i=o.wordHighlighter)==null||i.decorations.set(a),(s=o.wordHighlighter)==null||s._hasWordHighlights.set(!0))}}}dispose(){this._stopSingular(),this.toUnhook.dispose()}},Hn=__,__.storedDecorationIDs=new $s,__.query=null,__);TG=Hn=Zke([iM(4,ri)],TG);var qw;let K_=(qw=class extends ee{static get(e){return e.getContribution(NG.ID)}constructor(e,t,i,s){super(),this._wordHighlighter=null;const r=()=>{e.hasModel()&&!e.getModel().isTooLargeForTokenization()&&(this._wordHighlighter=new TG(e,i.documentHighlightProvider,i.multiDocumentHighlightProvider,t,s))};this._register(e.onDidChangeModel(o=>{this._wordHighlighter&&(this._wordHighlighter.dispose(),this._wordHighlighter=null),r()})),r()}get wordHighlighter(){return this._wordHighlighter}saveViewState(){return!!(this._wordHighlighter&&this._wordHighlighter.hasDecorations())}moveNext(){var e;(e=this._wordHighlighter)==null||e.moveNext()}moveBack(){var e;(e=this._wordHighlighter)==null||e.moveBack()}restoreViewState(e){this._wordHighlighter&&e&&this._wordHighlighter.restore()}dispose(){this._wordHighlighter&&(this._wordHighlighter.dispose(),this._wordHighlighter=null),super.dispose()}},NG=qw,qw.ID="editor.contrib.wordHighlighter",qw);K_=NG=Zke([iM(1,at),iM(2,Be),iM(3,ri)],K_);class Jke extends Oe{constructor(e,t){super(t),this._isNext=e}run(e,t){const i=K_.get(t);i&&(this._isNext?i.moveNext():i.moveBack())}}class gSt extends Jke{constructor(){super(!0,{id:"editor.action.wordHighlight.next",label:v("wordHighlight.next.label","Go to Next Symbol Highlight"),alias:"Go to Next Symbol Highlight",precondition:xee,kbOpts:{kbExpr:F.editorTextFocus,primary:65,weight:100}})}}class pSt extends Jke{constructor(){super(!1,{id:"editor.action.wordHighlight.prev",label:v("wordHighlight.previous.label","Go to Previous Symbol Highlight"),alias:"Go to Previous Symbol Highlight",precondition:xee,kbOpts:{kbExpr:F.editorTextFocus,primary:1089,weight:100}})}}class mSt extends Oe{constructor(){super({id:"editor.action.wordHighlight.trigger",label:v("wordHighlight.trigger.label","Trigger Symbol Highlight"),alias:"Trigger Symbol Highlight",precondition:void 0,kbOpts:{kbExpr:F.editorTextFocus,primary:0,weight:100}})}run(e,t,i){const s=K_.get(t);s&&s.restoreViewState(!0)}}Xt(K_.ID,K_,0);we(gSt);we(pSt);we(mSt);$x(DG);class gW extends vs{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode,this._wordNavigationType=e.wordNavigationType}runEditorCommand(e,t,i){if(!t.hasModel())return;const s=Mc(t.getOption(132),t.getOption(131)),r=t.getModel(),o=t.getSelections(),a=o.length>1,l=o.map(c=>{const d=new Y(c.positionLineNumber,c.positionColumn),u=this._move(s,r,d,this._wordNavigationType,a);return this._moveTo(c,u,this._inSelectionMode)});if(r.pushStackElement(),t._getViewModel().setCursorStates("moveWordCommand",3,l.map(c=>ni.fromModelSelection(c))),l.length===1){const c=new Y(l[0].positionLineNumber,l[0].positionColumn);t.revealPosition(c,0)}}_moveTo(e,t,i){return i?new $e(e.selectionStartLineNumber,e.selectionStartColumn,t.lineNumber,t.column):new $e(t.lineNumber,t.column,t.lineNumber,t.column)}}class cv extends gW{_move(e,t,i,s,r){return di.moveWordLeft(e,t,i,s,r)}}class dv extends gW{_move(e,t,i,s,r){return di.moveWordRight(e,t,i,s)}}class _St extends cv{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordStartLeft",precondition:void 0})}}class vSt extends cv{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordEndLeft",precondition:void 0})}}class bSt extends cv{constructor(){var e;super({inSelectionMode:!1,wordNavigationType:1,id:"cursorWordLeft",precondition:void 0,kbOpts:{kbExpr:he.and(F.textInputFocus,(e=he.and(UN,IB))==null?void 0:e.negate()),primary:2063,mac:{primary:527},weight:100}})}}class wSt extends cv{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordStartLeftSelect",precondition:void 0})}}class CSt extends cv{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordEndLeftSelect",precondition:void 0})}}class ySt extends cv{constructor(){var e;super({inSelectionMode:!0,wordNavigationType:1,id:"cursorWordLeftSelect",precondition:void 0,kbOpts:{kbExpr:he.and(F.textInputFocus,(e=he.and(UN,IB))==null?void 0:e.negate()),primary:3087,mac:{primary:1551},weight:100}})}}class SSt extends cv{constructor(){super({inSelectionMode:!1,wordNavigationType:3,id:"cursorWordAccessibilityLeft",precondition:void 0})}_move(e,t,i,s,r){return super._move(Mc(Ku.wordSeparators.defaultValue,e.intlSegmenterLocales),t,i,s,r)}}class xSt extends cv{constructor(){super({inSelectionMode:!0,wordNavigationType:3,id:"cursorWordAccessibilityLeftSelect",precondition:void 0})}_move(e,t,i,s,r){return super._move(Mc(Ku.wordSeparators.defaultValue,e.intlSegmenterLocales),t,i,s,r)}}class LSt extends dv{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordStartRight",precondition:void 0})}}class kSt extends dv{constructor(){var e;super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordEndRight",precondition:void 0,kbOpts:{kbExpr:he.and(F.textInputFocus,(e=he.and(UN,IB))==null?void 0:e.negate()),primary:2065,mac:{primary:529},weight:100}})}}class ESt extends dv{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordRight",precondition:void 0})}}class ISt extends dv{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordStartRightSelect",precondition:void 0})}}class DSt extends dv{constructor(){var e;super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordEndRightSelect",precondition:void 0,kbOpts:{kbExpr:he.and(F.textInputFocus,(e=he.and(UN,IB))==null?void 0:e.negate()),primary:3089,mac:{primary:1553},weight:100}})}}class NSt extends dv{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordRightSelect",precondition:void 0})}}class TSt extends dv{constructor(){super({inSelectionMode:!1,wordNavigationType:3,id:"cursorWordAccessibilityRight",precondition:void 0})}_move(e,t,i,s,r){return super._move(Mc(Ku.wordSeparators.defaultValue,e.intlSegmenterLocales),t,i,s,r)}}class RSt extends dv{constructor(){super({inSelectionMode:!0,wordNavigationType:3,id:"cursorWordAccessibilityRightSelect",precondition:void 0})}_move(e,t,i,s,r){return super._move(Mc(Ku.wordSeparators.defaultValue,e.intlSegmenterLocales),t,i,s,r)}}class pW extends vs{constructor(e){super(e),this._whitespaceHeuristics=e.whitespaceHeuristics,this._wordNavigationType=e.wordNavigationType}runEditorCommand(e,t,i){const s=e.get(vn);if(!t.hasModel())return;const r=Mc(t.getOption(132),t.getOption(131)),o=t.getModel(),a=t.getSelections(),l=t.getOption(6),c=t.getOption(11),d=s.getLanguageConfiguration(o.getLanguageId()).getAutoClosingPairs(),u=t._getViewModel(),h=a.map(f=>{const g=this._delete({wordSeparators:r,model:o,selection:f,whitespaceHeuristics:this._whitespaceHeuristics,autoClosingDelete:t.getOption(9),autoClosingBrackets:l,autoClosingQuotes:c,autoClosingPairs:d,autoClosedCharacters:u.getCursorAutoClosedCharacters()},this._wordNavigationType);return new mr(g,"")});t.pushUndoStop(),t.executeCommands(this.id,h),t.pushUndoStop()}}class Lee extends pW{_delete(e,t){const i=di.deleteWordLeft(e,t);return i||new M(1,1,1,1)}}class kee extends pW{_delete(e,t){const i=di.deleteWordRight(e,t);if(i)return i;const s=e.model.getLineCount(),r=e.model.getLineMaxColumn(s);return new M(s,r,s,r)}}class ASt extends Lee{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:0,id:"deleteWordStartLeft",precondition:F.writable})}}class MSt extends Lee{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:2,id:"deleteWordEndLeft",precondition:F.writable})}}class PSt extends Lee{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:0,id:"deleteWordLeft",precondition:F.writable,kbOpts:{kbExpr:F.textInputFocus,primary:2049,mac:{primary:513},weight:100}})}}class OSt extends kee{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:0,id:"deleteWordStartRight",precondition:F.writable})}}class FSt extends kee{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:2,id:"deleteWordEndRight",precondition:F.writable})}}class BSt extends kee{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:2,id:"deleteWordRight",precondition:F.writable,kbOpts:{kbExpr:F.textInputFocus,primary:2068,mac:{primary:532},weight:100}})}}class WSt extends Oe{constructor(){super({id:"deleteInsideWord",precondition:F.writable,label:v("deleteInsideWord","Delete Word"),alias:"Delete Word"})}run(e,t,i){if(!t.hasModel())return;const s=Mc(t.getOption(132),t.getOption(131)),r=t.getModel(),a=t.getSelections().map(l=>{const c=di.deleteInsideWord(s,r,l);return new mr(c,"")});t.pushUndoStop(),t.executeCommands(this.id,a),t.pushUndoStop()}}Te(new _St);Te(new vSt);Te(new bSt);Te(new wSt);Te(new CSt);Te(new ySt);Te(new LSt);Te(new kSt);Te(new ESt);Te(new ISt);Te(new DSt);Te(new NSt);Te(new SSt);Te(new xSt);Te(new TSt);Te(new RSt);Te(new ASt);Te(new MSt);Te(new PSt);Te(new OSt);Te(new FSt);Te(new BSt);we(WSt);class HSt extends pW{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:0,id:"deleteWordPartLeft",precondition:F.writable,kbOpts:{kbExpr:F.textInputFocus,primary:0,mac:{primary:769},weight:100}})}_delete(e,t){const i=WB.deleteWordPartLeft(e);return i||new M(1,1,1,1)}}class VSt extends pW{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:2,id:"deleteWordPartRight",precondition:F.writable,kbOpts:{kbExpr:F.textInputFocus,primary:0,mac:{primary:788},weight:100}})}_delete(e,t){const i=WB.deleteWordPartRight(e);if(i)return i;const s=e.model.getLineCount(),r=e.model.getLineMaxColumn(s);return new M(s,r,s,r)}}class eEe extends gW{_move(e,t,i,s,r){return WB.moveWordPartLeft(e,t,i,r)}}class zSt extends eEe{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordPartLeft",precondition:void 0,kbOpts:{kbExpr:F.textInputFocus,primary:0,mac:{primary:783},weight:100}})}}Gt.registerCommandAlias("cursorWordPartStartLeft","cursorWordPartLeft");class USt extends eEe{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordPartLeftSelect",precondition:void 0,kbOpts:{kbExpr:F.textInputFocus,primary:0,mac:{primary:1807},weight:100}})}}Gt.registerCommandAlias("cursorWordPartStartLeftSelect","cursorWordPartLeftSelect");class tEe extends gW{_move(e,t,i,s,r){return WB.moveWordPartRight(e,t,i)}}class $St extends tEe{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordPartRight",precondition:void 0,kbOpts:{kbExpr:F.textInputFocus,primary:0,mac:{primary:785},weight:100}})}}class jSt extends tEe{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordPartRightSelect",precondition:void 0,kbOpts:{kbExpr:F.textInputFocus,primary:0,mac:{primary:1809},weight:100}})}}Te(new HSt);Te(new VSt);Te(new zSt);Te(new USt);Te(new $St);Te(new jSt);const Yee=class Yee extends ee{constructor(e){super(),this.editor=e,this._register(this.editor.onDidAttemptReadOnlyEdit(()=>this._onDidAttemptReadOnlyEdit()))}_onDidAttemptReadOnlyEdit(){const e=Xa.get(this.editor);if(e&&this.editor.hasModel()){let t=this.editor.getOptions().get(93);t||(this.editor.isSimpleWidget?t=new Rr(v("editor.simple.readonly","Cannot edit in read-only input")):t=new Rr(v("editor.readonly","Cannot edit in read-only editor"))),e.showMessage(t,this.editor.getPosition())}}};Yee.ID="editor.contrib.readOnlyMessageController";let qF=Yee;Xt(qF.ID,qF,2);var KSt=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Dhe=function(n,e){return function(t,i){e(t,i,n)}};let RG=class extends ee{constructor(e,t,i){super(),this._textModel=e,this._languageFeaturesService=t,this._outlineModelService=i,this._currentModel=Nt(this,void 0);const s=pr("documentSymbolProvider.onDidChange",this._languageFeaturesService.documentSymbolProvider.onDidChange),r=pr("_textModel.onDidChangeContent",Ee.debounce(o=>this._textModel.onDidChangeContent(o),()=>{},100));this._register(da(async(o,a)=>{s.read(o),r.read(o);const l=a.add(new Rut),c=await this._outlineModelService.getOrCreate(this._textModel,l.token);a.isDisposed||this._currentModel.set(c,void 0)}))}getBreadcrumbItems(e,t){const i=this._currentModel.read(t);if(!i)return[];const s=i.asListOfDocumentSymbols().filter(r=>e.contains(r.range.startLineNumber)&&!e.contains(r.range.endLineNumber));return s.sort(Mwe(No(r=>r.range.endLineNumber-r.range.startLineNumber,xd))),s.map(r=>({name:r.name,kind:r.kind,startLineNumber:r.range.startLineNumber}))}};RG=KSt([Dhe(1,Be),Dhe(2,pT)],RG);qO.setBreadcrumbsSourceFactory((n,e)=>e.createInstance(RG,n));const Zee=class Zee extends ee{constructor(e){super(),this.editor=e,this.widget=null,Bu&&(this._register(e.onDidChangeConfiguration(()=>this.update())),this.update())}update(){const e=!this.editor.getOption(92);!this.widget&&e?this.widget=new AG(this.editor):this.widget&&!e&&(this.widget.dispose(),this.widget=null)}dispose(){super.dispose(),this.widget&&(this.widget.dispose(),this.widget=null)}};Zee.ID="editor.contrib.iPadShowKeyboard";let GF=Zee;const M5=class M5 extends ee{constructor(e){super(),this.editor=e,this._domNode=document.createElement("textarea"),this._domNode.className="iPadShowKeyboard",this._register(re(this._domNode,"touchstart",t=>{this.editor.focus()})),this._register(re(this._domNode,"focus",t=>{this.editor.focus()})),this.editor.addOverlayWidget(this)}dispose(){this.editor.removeOverlayWidget(this),super.dispose()}getId(){return M5.ID}getDomNode(){return this._domNode}getPosition(){return{preference:1}}};M5.ID="editor.contrib.ShowKeyboardWidget";let AG=M5;Xt(GF.ID,GF,3);var qSt=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Nhe=function(n,e){return function(t,i){e(t,i,n)}},MG,Gw;let sN=(Gw=class extends ee{static get(e){return e.getContribution(MG.ID)}constructor(e,t,i){super(),this._editor=e,this._languageService=i,this._widget=null,this._register(this._editor.onDidChangeModel(s=>this.stop())),this._register(this._editor.onDidChangeModelLanguage(s=>this.stop())),this._register(In.onDidChange(s=>this.stop())),this._register(this._editor.onKeyUp(s=>s.keyCode===9&&this.stop()))}dispose(){this.stop(),super.dispose()}launch(){this._widget||this._editor.hasModel()&&(this._widget=new PG(this._editor,this._languageService))}stop(){this._widget&&(this._widget.dispose(),this._widget=null)}},MG=Gw,Gw.ID="editor.contrib.inspectTokens",Gw);sN=MG=qSt([Nhe(1,Jl),Nhe(2,un)],sN);class GSt extends Oe{constructor(){super({id:"editor.action.inspectTokens",label:zU.inspectTokensAction,alias:"Developer: Inspect Tokens",precondition:void 0})}run(e,t){const i=sN.get(t);i==null||i.launch()}}function YSt(n){let e="";for(let t=0,i=n.length;t<i;t++){const s=n.charCodeAt(t);switch(s){case 9:e+="";break;case 32:e+="";break;default:e+=String.fromCharCode(s)}}return e}function ZSt(n,e){const t=In.get(e);if(t)return t;const i=n.encodeLanguageId(e);return{getInitialState:()=>HS,tokenize:(s,r,o)=>tQ(e,o),tokenizeEncoded:(s,r,o)=>vB(i,o)}}const P5=class P5 extends ee{constructor(e,t){super(),this.allowEditorOverflow=!0,this._editor=e,this._languageService=t,this._model=this._editor.getModel(),this._domNode=document.createElement("div"),this._domNode.className="tokens-inspect-widget",this._tokenizationSupport=ZSt(this._languageService.languageIdCodec,this._model.getLanguageId()),this._compute(this._editor.getPosition()),this._register(this._editor.onDidChangeCursorPosition(i=>this._compute(this._editor.getPosition()))),this._editor.addContentWidget(this)}dispose(){this._editor.removeContentWidget(this),super.dispose()}getId(){return P5._ID}_compute(e){const t=this._getTokensAtLine(e.lineNumber);let i=0;for(let l=t.tokens1.length-1;l>=0;l--){const c=t.tokens1[l];if(e.column-1>=c.offset){i=l;break}}let s=0;for(let l=t.tokens2.length>>>1;l>=0;l--)if(e.column-1>=t.tokens2[l<<1]){s=l;break}const r=this._model.getLineContent(e.lineNumber);let o="";if(i<t.tokens1.length){const l=t.tokens1[i].offset,c=i+1<t.tokens1.length?t.tokens1[i+1].offset:r.length;o=r.substring(l,c)}sr(this._domNode,xe("h2.tm-token",void 0,YSt(o),xe("span.tm-token-length",void 0,`${o.length} ${o.length===1?"char":"chars"}`))),_e(this._domNode,xe("hr.tokens-inspect-separator",{style:"clear:both"}));const a=(s<<1)+1<t.tokens2.length?this._decodeMetadata(t.tokens2[(s<<1)+1]):null;_e(this._domNode,xe("table.tm-metadata-table",void 0,xe("tbody",void 0,xe("tr",void 0,xe("td.tm-metadata-key",void 0,"language"),xe("td.tm-metadata-value",void 0,`${a?a.languageId:"-?-"}`)),xe("tr",void 0,xe("td.tm-metadata-key",void 0,"token type"),xe("td.tm-metadata-value",void 0,`${a?this._tokenTypeToString(a.tokenType):"-?-"}`)),xe("tr",void 0,xe("td.tm-metadata-key",void 0,"font style"),xe("td.tm-metadata-value",void 0,`${a?this._fontStyleToString(a.fontStyle):"-?-"}`)),xe("tr",void 0,xe("td.tm-metadata-key",void 0,"foreground"),xe("td.tm-metadata-value",void 0,`${a?ge.Format.CSS.formatHex(a.foreground):"-?-"}`)),xe("tr",void 0,xe("td.tm-metadata-key",void 0,"background"),xe("td.tm-metadata-value",void 0,`${a?ge.Format.CSS.formatHex(a.background):"-?-"}`))))),_e(this._domNode,xe("hr.tokens-inspect-separator")),i<t.tokens1.length&&_e(this._domNode,xe("span.tm-token-type",void 0,t.tokens1[i].type)),this._editor.layoutContentWidget(this)}_decodeMetadata(e){const t=In.getColorMap(),i=ra.getLanguageId(e),s=ra.getTokenType(e),r=ra.getFontStyle(e),o=ra.getForeground(e),a=ra.getBackground(e);return{languageId:this._languageService.languageIdCodec.decodeLanguageId(i),tokenType:s,fontStyle:r,foreground:t[o],background:t[a]}}_tokenTypeToString(e){switch(e){case 0:return"Other";case 1:return"Comment";case 2:return"String";case 3:return"RegEx";default:return"??"}}_fontStyleToString(e){let t="";return e&1&&(t+="italic "),e&2&&(t+="bold "),e&4&&(t+="underline "),e&8&&(t+="strikethrough "),t.length===0&&(t="---"),t}_getTokensAtLine(e){const t=this._getStateBeforeLine(e),i=this._tokenizationSupport.tokenize(this._model.getLineContent(e),!0,t),s=this._tokenizationSupport.tokenizeEncoded(this._model.getLineContent(e),!0,t);return{startState:t,tokens1:i.tokens,tokens2:s.tokens,endState:i.endState}}_getStateBeforeLine(e){let t=this._tokenizationSupport.getInitialState();for(let i=1;i<e;i++)t=this._tokenizationSupport.tokenize(this._model.getLineContent(i),!0,t).endState;return t}getDomNode(){return this._domNode}getPosition(){return{position:this._editor.getPosition(),preference:[2,1]}}};P5._ID="editor.contrib.inspectTokensWidget";let PG=P5;Xt(sN.ID,sN,4);we(GSt);var XSt=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},The=function(n,e){return function(t,i){e(t,i,n)}},Nk,Yw;let OG=(Yw=class{constructor(e,t){this.quickInputService=e,this.keybindingService=t,this.registry=_n.as(j0.Quickaccess)}provide(e){const t=new ue;return t.add(e.onDidAccept(()=>{const[i]=e.selectedItems;i&&this.quickInputService.quickAccess.show(i.prefix,{preserveValue:!0})})),t.add(e.onDidChangeValue(i=>{const s=this.registry.getQuickAccessProvider(i.substr(Nk.PREFIX.length));s&&s.prefix&&s.prefix!==Nk.PREFIX&&this.quickInputService.quickAccess.show(s.prefix,{preserveValue:!0})})),e.items=this.getQuickAccessProviders().filter(i=>i.prefix!==Nk.PREFIX),t}getQuickAccessProviders(){return this.registry.getQuickAccessProviders().sort((t,i)=>t.prefix.localeCompare(i.prefix)).flatMap(t=>this.createPicks(t))}createPicks(e){return e.helpEntries.map(t=>{const i=t.prefix||e.prefix,s=i||"";return{prefix:i,label:s,keybinding:t.commandId?this.keybindingService.lookupKeybinding(t.commandId):void 0,ariaLabel:v("helpPickAriaLabel","{0}, {1}",s,t.description),description:t.description}})}},Nk=Yw,Yw.PREFIX="?",Yw);OG=Nk=XSt([The(0,Uc),The(1,hi)],OG);_n.as(j0.Quickaccess).registerQuickAccessProvider({ctor:OG,prefix:"",helpEntries:[{description:UU.helpQuickAccessActionLabel}]});class iEe{constructor(e){this.options=e,this.rangeHighlightDecorationId=void 0}provide(e,t,i){var o;const s=new ue;e.canAcceptInBackground=!!((o=this.options)!=null&&o.canAcceptInBackground),e.matchOnLabel=e.matchOnDescription=e.matchOnDetail=e.sortByLabel=!1;const r=s.add(new As);return r.value=this.doProvide(e,t,i),s.add(this.onDidActiveTextEditorControlChange(()=>{r.value=void 0,r.value=this.doProvide(e,t)})),s}doProvide(e,t,i){const s=new ue,r=this.activeTextEditorControl;if(r&&this.canProvideWithTextEditor(r)){const o={editor:r},a=dxe(r);if(a){let l=r.saveViewState()??void 0;s.add(a.onDidChangeCursorPosition(()=>{l=r.saveViewState()??void 0})),o.restoreViewState=()=>{l&&r===this.activeTextEditorControl&&r.restoreViewState(l)},s.add(E_(t.onCancellationRequested)(()=>{var c;return(c=o.restoreViewState)==null?void 0:c.call(o)}))}s.add(Ye(()=>this.clearDecorations(r))),s.add(this.provideWithTextEditor(o,e,t,i))}else s.add(this.provideWithoutTextEditor(e,t));return s}canProvideWithTextEditor(e){return!0}gotoLocation({editor:e},t){e.setSelection(t.range,"code.jump"),e.revealRangeInCenter(t.range,0),t.preserveFocus||e.focus();const i=e.getModel();i&&"getLineContent"in i&&lf(`${i.getLineContent(t.range.startLineNumber)}`)}getModel(e){var t;return DJ(e)?(t=e.getModel())==null?void 0:t.modified:e.getModel()}addDecorations(e,t){e.changeDecorations(i=>{const s=[];this.rangeHighlightDecorationId&&(s.push(this.rangeHighlightDecorationId.overviewRulerDecorationId),s.push(this.rangeHighlightDecorationId.rangeHighlightId),this.rangeHighlightDecorationId=void 0);const r=[{range:t,options:{description:"quick-access-range-highlight",className:"rangeHighlight",isWholeLine:!0}},{range:t,options:{description:"quick-access-range-highlight-overview",overviewRuler:{color:Dn(tye),position:Vl.Full}}}],[o,a]=i.deltaDecorations(s,r);this.rangeHighlightDecorationId={rangeHighlightId:o,overviewRulerDecorationId:a}})}clearDecorations(e){const t=this.rangeHighlightDecorationId;t&&(e.changeDecorations(i=>{i.deltaDecorations([t.overviewRulerDecorationId,t.rangeHighlightId],[])}),this.rangeHighlightDecorationId=void 0)}}const O5=class O5 extends iEe{constructor(){super({canAcceptInBackground:!0})}provideWithoutTextEditor(e){const t=v("cannotRunGotoLine","Open a text editor first to go to a line.");return e.items=[{label:t}],e.ariaLabel=t,ee.None}provideWithTextEditor(e,t,i){const s=e.editor,r=new ue;r.add(t.onDidAccept(l=>{const[c]=t.selectedItems;if(c){if(!this.isValidLineNumber(s,c.lineNumber))return;this.gotoLocation(e,{range:this.toRange(c.lineNumber,c.column),keyMods:t.keyMods,preserveFocus:l.inBackground}),l.inBackground||t.hide()}}));const o=()=>{const l=this.parsePosition(s,t.value.trim().substr(O5.PREFIX.length)),c=this.getPickLabel(s,l.lineNumber,l.column);if(t.items=[{lineNumber:l.lineNumber,column:l.column,label:c}],t.ariaLabel=c,!this.isValidLineNumber(s,l.lineNumber)){this.clearDecorations(s);return}const d=this.toRange(l.lineNumber,l.column);s.revealRangeInCenter(d,0),this.addDecorations(s,d)};o(),r.add(t.onDidChangeValue(()=>o()));const a=dxe(s);return a&&a.getOptions().get(68).renderType===2&&(a.updateOptions({lineNumbers:"on"}),r.add(Ye(()=>a.updateOptions({lineNumbers:"relative"})))),r}toRange(e=1,t=1){return{startLineNumber:e,startColumn:t,endLineNumber:e,endColumn:t}}parsePosition(e,t){const i=t.split(/,|:|#/).map(r=>parseInt(r,10)).filter(r=>!isNaN(r)),s=this.lineCount(e)+1;return{lineNumber:i[0]>0?i[0]:s+i[0],column:i[1]}}getPickLabel(e,t,i){if(this.isValidLineNumber(e,t))return this.isValidColumn(e,t,i)?v("gotoLineColumnLabel","Go to line {0} and character {1}.",t,i):v("gotoLineLabel","Go to line {0}.",t);const s=e.getPosition()||{lineNumber:1,column:1},r=this.lineCount(e);return r>1?v("gotoLineLabelEmptyWithLimit","Current Line: {0}, Character: {1}. Type a line number between 1 and {2} to navigate to.",s.lineNumber,s.column,r):v("gotoLineLabelEmpty","Current Line: {0}, Character: {1}. Type a line number to navigate to.",s.lineNumber,s.column)}isValidLineNumber(e,t){return!t||typeof t!="number"?!1:t>0&&t<=this.lineCount(e)}isValidColumn(e,t,i){if(!i||typeof i!="number")return!1;const s=this.getModel(e);if(!s)return!1;const r={lineNumber:t,column:i};return s.validatePosition(r).equals(r)}lineCount(e){var t;return((t=this.getModel(e))==null?void 0:t.getLineCount())??0}};O5.PREFIX=":";let FG=O5;var QSt=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},JSt=function(n,e){return function(t,i){e(t,i,n)}};let rN=class extends FG{constructor(e){super(),this.editorService=e,this.onDidActiveTextEditorControlChange=Ee.None}get activeTextEditorControl(){return this.editorService.getFocusedCodeEditor()??void 0}};rN=QSt([JSt(0,ri)],rN);var Zw;let nEe=(Zw=class extends Oe{constructor(){super({id:Zw.ID,label:zP.gotoLineActionLabel,alias:"Go to Line/Column...",precondition:void 0,kbOpts:{kbExpr:F.focus,primary:2085,mac:{primary:293},weight:100}})}run(e){e.get(Uc).quickAccess.show(rN.PREFIX)}},Zw.ID="editor.action.gotoLine",Zw);we(nEe);_n.as(j0.Quickaccess).registerQuickAccessProvider({ctor:rN,prefix:rN.PREFIX,helpEntries:[{description:zP.gotoLineActionLabel,commandId:nEe.ID}]});const sEe=[void 0,[]];function T6(n,e,t=0,i=0){const s=e;return s.values&&s.values.length>1?ext(n,s.values,t,i):rEe(n,e,t,i)}function ext(n,e,t,i){let s=0;const r=[];for(const o of e){const[a,l]=rEe(n,o,t,i);if(typeof a!="number")return sEe;s+=a,r.push(...l)}return[s,txt(r)]}function rEe(n,e,t,i){const s=p0(e.original,e.originalLowercase,t,n,n.toLowerCase(),i,{firstMatchCanBeWeak:!0,boostFullMatch:!0});return s?[s[0],zN(s)]:sEe}function txt(n){const e=n.sort((s,r)=>s.start-r.start),t=[];let i;for(const s of e)!i||!ixt(i,s)?(i=s,t.push(s)):(i.start=Math.min(i.start,s.start),i.end=Math.max(i.end,s.end));return t}function ixt(n,e){return!(n.end<e.start||e.end<n.start)}function Rhe(n){return n.startsWith('"')&&n.endsWith('"')}const oEe=" ";function BG(n){typeof n!="string"&&(n="");const e=n.toLowerCase(),{pathNormalized:t,normalized:i,normalizedLowercase:s}=Ahe(n),r=t.indexOf(Iu)>=0,o=Rhe(n);let a;const l=n.split(oEe);if(l.length>1)for(const c of l){const d=Rhe(c),{pathNormalized:u,normalized:h,normalizedLowercase:f}=Ahe(c);h&&(a||(a=[]),a.push({original:c,originalLowercase:c.toLowerCase(),pathNormalized:u,normalized:h,normalizedLowercase:f,expectContiguousMatch:d}))}return{original:n,originalLowercase:e,pathNormalized:t,normalized:i,normalizedLowercase:s,values:a,containsPathSeparator:r,expectContiguousMatch:o}}function Ahe(n){let e;wr?e=n.replace(/\//g,Iu):e=n.replace(/\\/g,Iu);const t=lKe(e).replace(/\s|"/g,"");return{pathNormalized:e,normalized:t,normalizedLowercase:t.toLowerCase()}}function Mhe(n){return Array.isArray(n)?BG(n.map(e=>e.original).join(oEe)):BG(n.original)}var nxt=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Phe=function(n,e){return function(t,i){e(t,i,n)}},nM,_u;let Jb=(_u=class extends iEe{constructor(e,t,i=Object.create(null)){super(i),this._languageFeaturesService=e,this._outlineModelService=t,this.options=i,this.options.canAcceptInBackground=!0}provideWithoutTextEditor(e){return this.provideLabelPick(e,v("cannotRunGotoSymbolWithoutEditor","To go to a symbol, first open a text editor with symbol information.")),ee.None}provideWithTextEditor(e,t,i,s){const r=e.editor,o=this.getModel(r);return o?this._languageFeaturesService.documentSymbolProvider.has(o)?this.doProvideWithEditorSymbols(e,o,t,i,s):this.doProvideWithoutEditorSymbols(e,o,t,i):ee.None}doProvideWithoutEditorSymbols(e,t,i,s){const r=new ue;return this.provideLabelPick(i,v("cannotRunGotoSymbolWithoutSymbolProvider","The active text editor does not provide symbol information.")),(async()=>!await this.waitForLanguageSymbolRegistry(t,r)||s.isCancellationRequested||r.add(this.doProvideWithEditorSymbols(e,t,i,s)))(),r}provideLabelPick(e,t){e.items=[{label:t,index:0,kind:14}],e.ariaLabel=t}async waitForLanguageSymbolRegistry(e,t){if(this._languageFeaturesService.documentSymbolProvider.has(e))return!0;const i=new Ex,s=t.add(this._languageFeaturesService.documentSymbolProvider.onDidChange(()=>{this._languageFeaturesService.documentSymbolProvider.has(e)&&(s.dispose(),i.complete(!0))}));return t.add(Ye(()=>i.complete(!1))),i.p}doProvideWithEditorSymbols(e,t,i,s,r){var u;const o=e.editor,a=new ue;a.add(i.onDidAccept(h=>{var g;const[f]=i.selectedItems;f&&f.range&&(this.gotoLocation(e,{range:f.range.selection,keyMods:i.keyMods,preserveFocus:h.inBackground}),(g=r==null?void 0:r.handleAccept)==null||g.call(r,f),h.inBackground||i.hide())})),a.add(i.onDidTriggerItemButton(({item:h})=>{h&&h.range&&(this.gotoLocation(e,{range:h.range.selection,keyMods:i.keyMods,forceSideBySide:!0}),i.hide())}));const l=this.getDocumentSymbols(t,s);let c;const d=async h=>{c==null||c.dispose(!0),i.busy=!1,c=new mn(s),i.busy=!0;try{const f=BG(i.value.substr(nM.PREFIX.length).trim()),g=await this.doGetSymbolPicks(l,f,void 0,c.token,t);if(s.isCancellationRequested)return;if(g.length>0){if(i.items=g,h&&f.original.length===0){const p=VI(g,_=>!!(_.type!=="separator"&&_.range&&M.containsPosition(_.range.decoration,h)));p&&(i.activeItems=[p])}}else f.original.length>0?this.provideLabelPick(i,v("noMatchingSymbolResults","No matching editor symbols")):this.provideLabelPick(i,v("noSymbolResults","No editor symbols"))}finally{s.isCancellationRequested||(i.busy=!1)}};return a.add(i.onDidChangeValue(()=>d(void 0))),d((u=o.getSelection())==null?void 0:u.getPosition()),a.add(i.onDidChangeActive(()=>{const[h]=i.activeItems;h&&h.range&&(o.revealRangeInCenter(h.range.selection,0),this.addDecorations(o,h.range.decoration))})),a}async doGetSymbolPicks(e,t,i,s,r){var _,w;const o=await e;if(s.isCancellationRequested)return[];const a=t.original.indexOf(nM.SCOPE_PREFIX)===0,l=a?1:0;let c,d;t.values&&t.values.length>1?(c=Mhe(t.values[0]),d=Mhe(t.values.slice(1))):c=t;let u;const h=(w=(_=this.options)==null?void 0:_.openSideBySideDirection)==null?void 0:w.call(_);h&&(u=[{iconClass:h==="right"?ot.asClassName(ye.splitHorizontal):ot.asClassName(ye.splitVertical),tooltip:h==="right"?v("openToSide","Open to the Side"):v("openToBottom","Open to the Bottom")}]);const f=[];for(let b=0;b<o.length;b++){const y=o[b],S=oKe(y.name),x=`$(${oP.toIcon(y.kind).id}) ${S}`,E=x.length-S.length;let D=y.containerName;i!=null&&i.extraContainerLabel&&(D?D=`${i.extraContainerLabel}  ${D}`:D=i.extraContainerLabel);let N,I,H,z;if(t.original.length>l){let J=!1;if(c!==t&&([N,I]=T6(x,{...t,values:void 0},l,E),typeof N=="number"&&(J=!0)),typeof N!="number"&&([N,I]=T6(x,c,l,E),typeof N!="number"))continue;if(!J&&d){if(D&&d.original.length>0&&([H,z]=T6(D,d)),typeof H!="number")continue;typeof N=="number"&&(N+=H)}}const G=y.tags&&y.tags.indexOf(1)>=0;f.push({index:b,kind:y.kind,score:N,label:x,ariaLabel:Jje(y.name,y.kind),description:D,highlights:G?void 0:{label:I,description:z},range:{selection:M.collapseToStart(y.selectionRange),decoration:y.range},uri:r.uri,symbolName:S,strikethrough:G,buttons:u})}const g=f.sort((b,y)=>a?this.compareByKindAndScore(b,y):this.compareByScore(b,y));let p=[];if(a){let x=function(){y&&typeof b=="number"&&S>0&&(y.label=a0(A6[b]||R6,S))},b,y,S=0;for(const E of g)b!==E.kind?(x(),b=E.kind,S=1,y={type:"separator"},p.push(y)):S++,p.push(E);x()}else g.length>0&&(p=[{label:v("symbols","symbols ({0})",f.length),type:"separator"},...g]);return p}compareByScore(e,t){if(typeof e.score!="number"&&typeof t.score=="number")return 1;if(typeof e.score=="number"&&typeof t.score!="number")return-1;if(typeof e.score=="number"&&typeof t.score=="number"){if(e.score>t.score)return-1;if(e.score<t.score)return 1}return e.index<t.index?-1:e.index>t.index?1:0}compareByKindAndScore(e,t){const i=A6[e.kind]||R6,s=A6[t.kind]||R6,r=i.localeCompare(s);return r===0?this.compareByScore(e,t):r}async getDocumentSymbols(e,t){const i=await this._outlineModelService.getOrCreate(e,t);return t.isCancellationRequested?[]:i.asListOfDocumentSymbols()}},nM=_u,_u.PREFIX="@",_u.SCOPE_PREFIX=":",_u.PREFIX_BY_CATEGORY=`${_u.PREFIX}${_u.SCOPE_PREFIX}`,_u);Jb=nM=nxt([Phe(0,Be),Phe(1,pT)],Jb);const R6=v("property","properties ({0})"),A6={5:v("method","methods ({0})"),11:v("function","functions ({0})"),8:v("_constructor","constructors ({0})"),12:v("variable","variables ({0})"),4:v("class","classes ({0})"),22:v("struct","structs ({0})"),23:v("event","events ({0})"),24:v("operator","operators ({0})"),10:v("interface","interfaces ({0})"),2:v("namespace","namespaces ({0})"),3:v("package","packages ({0})"),25:v("typeParameter","type parameters ({0})"),1:v("modules","modules ({0})"),6:v("property","properties ({0})"),9:v("enum","enumerations ({0})"),21:v("enumMember","enumeration members ({0})"),14:v("string","strings ({0})"),0:v("file","files ({0})"),17:v("array","arrays ({0})"),15:v("number","numbers ({0})"),16:v("boolean","booleans ({0})"),18:v("object","objects ({0})"),19:v("key","keys ({0})"),7:v("field","fields ({0})"),13:v("constant","constants ({0})")};var sxt=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},M6=function(n,e){return function(t,i){e(t,i,n)}};let WG=class extends Jb{constructor(e,t,i){super(t,i),this.editorService=e,this.onDidActiveTextEditorControlChange=Ee.None}get activeTextEditorControl(){return this.editorService.getFocusedCodeEditor()??void 0}};WG=sxt([M6(0,ri),M6(1,Be),M6(2,pT)],WG);const F5=class F5 extends Oe{constructor(){super({id:F5.ID,label:nD.quickOutlineActionLabel,alias:"Go to Symbol...",precondition:F.hasDocumentSymbolProvider,kbOpts:{kbExpr:F.focus,primary:3117,weight:100},contextMenuOpts:{group:"navigation",order:3}})}run(e){e.get(Uc).quickAccess.show(Jb.PREFIX,{itemActivation:cu.NONE})}};F5.ID="editor.action.quickOutline";let YF=F5;we(YF);_n.as(j0.Quickaccess).registerQuickAccessProvider({ctor:WG,prefix:Jb.PREFIX,helpEntries:[{description:nD.quickOutlineActionLabel,prefix:Jb.PREFIX,commandId:YF.ID},{description:nD.quickOutlineByCategoryActionLabel,prefix:Jb.PREFIX_BY_CATEGORY}]});function rxt(n){const e=new Map;for(const t of n)e.set(t,(e.get(t)??0)+1);return e}class TE{constructor(){this.chunkCount=0,this.chunkOccurrences=new Map,this.documents=new Map}calculateScores(e,t){const i=this.computeEmbedding(e),s=new Map,r=[];for(const[o,a]of this.documents){if(t.isCancellationRequested)return[];for(const l of a.chunks){const c=this.computeSimilarityScore(l,i,s);c>0&&r.push({key:o,score:c})}}return r}static termFrequencies(e){return rxt(TE.splitTerms(e))}static*splitTerms(e){const t=i=>i.toLowerCase();for(const[i]of e.matchAll(new RegExp("\\b\\p{Letter}[\\p{Letter}\\d]{2,}\\b","gu"))){yield t(i);const s=i.replace(/([a-z])([A-Z])/g,"$1 $2").split(/\s+/g);if(s.length>1)for(const r of s)r.length>2&&new RegExp("\\p{Letter}{3,}","gu").test(r)&&(yield t(r))}}updateDocuments(e){for(const{key:t}of e)this.deleteDocument(t);for(const t of e){const i=[];for(const s of t.textChunks){const r=TE.termFrequencies(s);for(const o of r.keys())this.chunkOccurrences.set(o,(this.chunkOccurrences.get(o)??0)+1);i.push({text:s,tf:r})}this.chunkCount+=i.length,this.documents.set(t.key,{chunks:i})}return this}deleteDocument(e){const t=this.documents.get(e);if(t){this.documents.delete(e),this.chunkCount-=t.chunks.length;for(const i of t.chunks)for(const s of i.tf.keys()){const r=this.chunkOccurrences.get(s);if(typeof r=="number"){const o=r-1;o<=0?this.chunkOccurrences.delete(s):this.chunkOccurrences.set(s,o)}}}}computeSimilarityScore(e,t,i){let s=0;for(const[r,o]of Object.entries(t)){const a=e.tf.get(r);if(!a)continue;let l=i.get(r);typeof l!="number"&&(l=this.computeIdf(r),i.set(r,l));const c=a*l;s+=c*o}return s}computeEmbedding(e){const t=TE.termFrequencies(e);return this.computeTfidf(t)}computeIdf(e){const t=this.chunkOccurrences.get(e)??0;return t>0?Math.log((this.chunkCount+1)/t):0}computeTfidf(e){const t=Object.create(null);for(const[i,s]of e){const r=this.computeIdf(i);r>0&&(t[i]=s*r)}return t}}function oxt(n){var i;const e=n.slice(0);e.sort((s,r)=>r.score-s.score);const t=((i=e[0])==null?void 0:i.score)??0;if(t>0)for(const s of e)s.score/=t;return e}var z1;(function(n){n[n.NO_ACTION=0]="NO_ACTION",n[n.CLOSE_PICKER=1]="CLOSE_PICKER",n[n.REFRESH_PICKER=2]="REFRESH_PICKER",n[n.REMOVE_ITEM=3]="REMOVE_ITEM"})(z1||(z1={}));function P6(n){const e=n;return Array.isArray(e.items)}function Ohe(n){const e=n;return!!e.picks&&e.additionalPicks instanceof Promise}class axt extends ee{constructor(e,t){super(),this.prefix=e,this.options=t}provide(e,t,i){var c;const s=new ue;e.canAcceptInBackground=!!((c=this.options)!=null&&c.canAcceptInBackground),e.matchOnLabel=e.matchOnDescription=e.matchOnDetail=e.sortByLabel=!1;let r;const o=s.add(new As),a=async()=>{var _;const d=o.value=new ue;r==null||r.dispose(!0),e.busy=!1,r=new mn(t);const u=r.token;let h=e.value.substring(this.prefix.length);(_=this.options)!=null&&_.shouldSkipTrimPickFilter||(h=h.trim());const f=this._getPicks(h,d,u,i),g=(w,b)=>{var x;let y,S;if(P6(w)?(y=w.items,S=w.active):y=w,y.length===0){if(b)return!1;(h.length>0||e.hideInput)&&((x=this.options)!=null&&x.noResultsPick)&&(II(this.options.noResultsPick)?y=[this.options.noResultsPick(h)]:y=[this.options.noResultsPick])}return e.items=y,S&&(e.activeItems=[S]),!0},p=async w=>{let b=!1,y=!1;await Promise.all([(async()=>{typeof w.mergeDelay=="number"&&(await Xg(w.mergeDelay),u.isCancellationRequested)||y||(b=g(w.picks,!0))})(),(async()=>{e.busy=!0;try{const S=await w.additionalPicks;if(u.isCancellationRequested)return;let x,E;P6(w.picks)?(x=w.picks.items,E=w.picks.active):x=w.picks;let D,N;if(P6(S)?(D=S.items,N=S.active):D=S,D.length>0||!b){let I;if(!E&&!N){const H=e.activeItems[0];H&&x.indexOf(H)!==-1&&(I=H)}g({items:[...x,...D],active:E||N||I})}}finally{u.isCancellationRequested||(e.busy=!1),y=!0}})()])};if(f!==null)if(Ohe(f))await p(f);else if(!(f instanceof Promise))g(f);else{e.busy=!0;try{const w=await f;if(u.isCancellationRequested)return;Ohe(w)?await p(w):g(w)}finally{u.isCancellationRequested||(e.busy=!1)}}};s.add(e.onDidChangeValue(()=>a())),a(),s.add(e.onDidAccept(d=>{var h;if(i!=null&&i.handleAccept){d.inBackground||e.hide(),(h=i.handleAccept)==null||h.call(i,e.activeItems[0]);return}const[u]=e.selectedItems;typeof(u==null?void 0:u.accept)=="function"&&(d.inBackground||e.hide(),u.accept(e.keyMods,d))}));const l=async(d,u)=>{var f;if(typeof u.trigger!="function")return;const h=((f=u.buttons)==null?void 0:f.indexOf(d))??-1;if(h>=0){const g=u.trigger(h,e.keyMods),p=typeof g=="number"?g:await g;if(t.isCancellationRequested)return;switch(p){case z1.NO_ACTION:break;case z1.CLOSE_PICKER:e.hide();break;case z1.REFRESH_PICKER:a();break;case z1.REMOVE_ITEM:{const _=e.items.indexOf(u);if(_!==-1){const w=e.items.slice(),b=w.splice(_,1),y=e.activeItems.filter(x=>x!==b[0]),S=e.keepScrollPosition;e.keepScrollPosition=!0,e.items=w,y&&(e.activeItems=y),e.keepScrollPosition=S}break}}}};return s.add(e.onDidTriggerItemButton(({button:d,item:u})=>l(d,u))),s.add(e.onDidTriggerSeparatorButton(({button:d,separator:u})=>l(d,u))),s}}var aEe=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},um=function(n,e){return function(t,i){e(t,i,n)}},Qv,us,Vh;let HG=(Vh=class extends axt{constructor(e,t,i,s,r,o){super(Qv.PREFIX,e),this.instantiationService=t,this.keybindingService=i,this.commandService=s,this.telemetryService=r,this.dialogService=o,this.commandsHistory=this._register(this.instantiationService.createInstance(VG)),this.options=e}async _getPicks(e,t,i,s){var f,g;const r=await this.getCommandPicks(i);if(i.isCancellationRequested)return[];const o=E_(()=>{const p=new TE;p.updateDocuments(r.map(w=>({key:w.commandId,textChunks:[this.getTfIdfChunk(w)]})));const _=p.calculateScores(e,i);return oxt(_).filter(w=>w.score>Qv.TFIDF_THRESHOLD).slice(0,Qv.TFIDF_MAX_RESULTS)}),a=[];for(const p of r){const _=Qv.WORD_FILTER(e,p.label)??void 0,w=p.commandAlias?Qv.WORD_FILTER(e,p.commandAlias)??void 0:void 0;if(_||w)p.highlights={label:_,detail:this.options.showAlias?w:void 0},a.push(p);else if(e===p.commandId)a.push(p);else if(e.length>=3){const b=o();if(i.isCancellationRequested)return[];const y=b.find(S=>S.key===p.commandId);y&&(p.tfIdfScore=y.score,a.push(p))}}const l=new Map;for(const p of a){const _=l.get(p.label);_?(p.description=p.commandId,_.description=_.commandId):l.set(p.label,p)}a.sort((p,_)=>{if(p.tfIdfScore&&_.tfIdfScore)return p.tfIdfScore===_.tfIdfScore?p.label.localeCompare(_.label):_.tfIdfScore-p.tfIdfScore;if(p.tfIdfScore)return 1;if(_.tfIdfScore)return-1;const w=this.commandsHistory.peek(p.commandId),b=this.commandsHistory.peek(_.commandId);if(w&&b)return w>b?-1:1;if(w)return-1;if(b)return 1;if(this.options.suggestedCommandIds){const y=this.options.suggestedCommandIds.has(p.commandId),S=this.options.suggestedCommandIds.has(_.commandId);if(y&&S)return 0;if(y)return-1;if(S)return 1}return p.label.localeCompare(_.label)});const c=[];let d=!1,u=!0,h=!!this.options.suggestedCommandIds;for(let p=0;p<a.length;p++){const _=a[p];p===0&&this.commandsHistory.peek(_.commandId)&&(c.push({type:"separator",label:v("recentlyUsed","recently used")}),d=!0),u&&_.tfIdfScore!==void 0&&(c.push({type:"separator",label:v("suggested","similar commands")}),u=!1),h&&_.tfIdfScore===void 0&&!this.commandsHistory.peek(_.commandId)&&((f=this.options.suggestedCommandIds)!=null&&f.has(_.commandId))&&(c.push({type:"separator",label:v("commonlyUsed","commonly used")}),d=!0,h=!1),d&&_.tfIdfScore===void 0&&!this.commandsHistory.peek(_.commandId)&&!((g=this.options.suggestedCommandIds)!=null&&g.has(_.commandId))&&(c.push({type:"separator",label:v("morecCommands","other commands")}),d=!1),c.push(this.toCommandPick(_,s))}return this.hasAdditionalCommandPicks(e,i)?{picks:c,additionalPicks:(async()=>{var w;const p=await this.getAdditionalCommandPicks(r,a,e,i);if(i.isCancellationRequested)return[];const _=p.map(b=>this.toCommandPick(b,s));return u&&((w=_[0])==null?void 0:w.type)!=="separator"&&_.unshift({type:"separator",label:v("suggested","similar commands")}),_})()}:c}toCommandPick(e,t){if(e.type==="separator")return e;const i=this.keybindingService.lookupKeybinding(e.commandId),s=i?v("commandPickAriaLabelWithKeybinding","{0}, {1}",e.label,i.getAriaLabel()):e.label;return{...e,ariaLabel:s,detail:this.options.showAlias&&e.commandAlias!==e.label?e.commandAlias:void 0,keybinding:i,accept:async()=>{var r;this.commandsHistory.push(e.commandId),this.telemetryService.publicLog2("workbenchActionExecuted",{id:e.commandId,from:(t==null?void 0:t.from)??"quick open"});try{(r=e.args)!=null&&r.length?await this.commandService.executeCommand(e.commandId,...e.args):await this.commandService.executeCommand(e.commandId)}catch(o){Vc(o)||this.dialogService.error(v("canNotRun","Command '{0}' resulted in an error",e.label),tF(o))}}}}getTfIdfChunk({label:e,commandAlias:t,commandDescription:i}){let s=e;return t&&t!==e&&(s+=` - ${t}`),i&&i.value!==e&&(s+=` - ${i.value===i.original?i.value:`${i.value} (${i.original})`}`),s}},Qv=Vh,Vh.PREFIX=">",Vh.TFIDF_THRESHOLD=.5,Vh.TFIDF_MAX_RESULTS=5,Vh.WORD_FILTER=KX(JI,CJe,g1e),Vh);HG=Qv=aEe([um(1,Ze),um(2,hi),um(3,Vi),um(4,Hr),um(5,WN)],HG);var vu;let VG=(vu=class extends ee{constructor(e,t,i){super(),this.storageService=e,this.configurationService=t,this.logService=i,this.configuredCommandsHistoryLength=0,this.updateConfiguration(),this.load(),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(e=>this.updateConfiguration(e))),this._register(this.storageService.onWillSaveState(e=>{e.reason===aD.SHUTDOWN&&this.saveState()}))}updateConfiguration(e){e&&!e.affectsConfiguration("workbench.commandPalette.history")||(this.configuredCommandsHistoryLength=us.getConfiguredCommandHistoryLength(this.configurationService),us.cache&&us.cache.limit!==this.configuredCommandsHistoryLength&&(us.cache.limit=this.configuredCommandsHistoryLength,us.hasChanges=!0))}load(){const e=this.storageService.get(us.PREF_KEY_CACHE,0);let t;if(e)try{t=JSON.parse(e)}catch(s){this.logService.error(`[CommandsHistory] invalid data: ${s}`)}const i=us.cache=new vf(this.configuredCommandsHistoryLength,1);if(t){let s;t.usesLRU?s=t.entries:s=t.entries.sort((r,o)=>r.value-o.value),s.forEach(r=>i.set(r.key,r.value))}us.counter=this.storageService.getNumber(us.PREF_KEY_COUNTER,0,us.counter)}push(e){us.cache&&(us.cache.set(e,us.counter++),us.hasChanges=!0)}peek(e){var t;return(t=us.cache)==null?void 0:t.peek(e)}saveState(){if(!us.cache||!us.hasChanges)return;const e={usesLRU:!0,entries:[]};us.cache.forEach((t,i)=>e.entries.push({key:i,value:t})),this.storageService.store(us.PREF_KEY_CACHE,JSON.stringify(e),0,0),this.storageService.store(us.PREF_KEY_COUNTER,us.counter,0,0),us.hasChanges=!1}static getConfiguredCommandHistoryLength(e){var s,r;const i=(r=(s=e.getValue().workbench)==null?void 0:s.commandPalette)==null?void 0:r.history;return typeof i=="number"?i:us.DEFAULT_COMMANDS_HISTORY_LENGTH}},us=vu,vu.DEFAULT_COMMANDS_HISTORY_LENGTH=50,vu.PREF_KEY_CACHE="commandPalette.mru.cache",vu.PREF_KEY_COUNTER="commandPalette.mru.counter",vu.counter=1,vu.hasChanges=!1,vu);VG=us=aEe([um(0,Wd),um(1,Tt),um(2,Cr)],VG);class lxt extends HG{constructor(e,t,i,s,r,o){super(e,t,i,s,r,o)}getCodeEditorCommandPicks(){var i;const e=this.activeTextEditorControl;if(!e)return[];const t=[];for(const s of e.getSupportedActions()){let r;(i=s.metadata)!=null&&i.description&&(Cit(s.metadata.description)?r=s.metadata.description:r={original:s.metadata.description,value:s.metadata.description}),t.push({commandId:s.id,commandAlias:s.alias,commandDescription:r,label:QX(s.label)||s.id})}return t}}var cxt=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},UC=function(n,e){return function(t,i){e(t,i,n)}};let oN=class extends lxt{get activeTextEditorControl(){return this.codeEditorService.getFocusedCodeEditor()??void 0}constructor(e,t,i,s,r,o){super({showAlias:!1},e,i,s,r,o),this.codeEditorService=t}async getCommandPicks(){return this.getCodeEditorCommandPicks()}hasAdditionalCommandPicks(){return!1}async getAdditionalCommandPicks(){return[]}};oN=cxt([UC(0,Ze),UC(1,ri),UC(2,hi),UC(3,Vi),UC(4,Hr),UC(5,WN)],oN);const B5=class B5 extends Oe{constructor(){super({id:B5.ID,label:UP.quickCommandActionLabel,alias:"Command Palette",precondition:void 0,kbOpts:{kbExpr:F.focus,primary:59,weight:100},contextMenuOpts:{group:"z_commands",order:1}})}run(e){e.get(Uc).quickAccess.show(oN.PREFIX)}};B5.ID="editor.action.quickCommand";let ZF=B5;we(ZF);_n.as(j0.Quickaccess).registerQuickAccessProvider({ctor:oN,prefix:oN.PREFIX,helpEntries:[{description:UP.quickCommandHelp,commandId:ZF.ID}]});var dxt=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},$C=function(n,e){return function(t,i){e(t,i,n)}};let zG=class extends D0{constructor(e,t,i,s,r,o,a){super(!0,e,t,i,s,r,o,a)}};zG=dxt([$C(1,at),$C(2,ri),$C(3,jn),$C(4,Ze),$C(5,Wd),$C(6,Tt)],zG);Xt(D0.ID,zG,4);class uxt extends Oe{constructor(){super({id:"editor.action.toggleHighContrast",label:jU.toggleHighContrast,alias:"Toggle High Contrast Theme",precondition:void 0}),this._originalThemeName=null}run(e,t){const i=e.get(Jl),s=i.getColorTheme();Tu(s.type)?(i.setTheme(this._originalThemeName||(AS(s.type)?Py:dg)),this._originalThemeName=null):(i.setTheme(AS(s.type)?Gb:Yb),this._originalThemeName=s.themeName)}}we(uxt);const O6={};/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function lEe(n){return typeof n>"u"||n===null}function hxt(n){return typeof n=="object"&&n!==null}function fxt(n){return Array.isArray(n)?n:lEe(n)?[]:[n]}function gxt(n,e){var t,i,s,r;if(e)for(r=Object.keys(e),t=0,i=r.length;t<i;t+=1)s=r[t],n[s]=e[s];return n}function pxt(n,e){var t="",i;for(i=0;i<e;i+=1)t+=n;return t}function mxt(n){return n===0&&Number.NEGATIVE_INFINITY===1/n}var _xt=lEe,vxt=hxt,bxt=fxt,wxt=pxt,Cxt=mxt,yxt=gxt,Mr={isNothing:_xt,isObject:vxt,toArray:bxt,repeat:wxt,isNegativeZero:Cxt,extend:yxt};function cEe(n,e){var t="",i=n.reason||"(unknown reason)";return n.mark?(n.mark.name&&(t+='in "'+n.mark.name+'" '),t+="("+(n.mark.line+1)+":"+(n.mark.column+1)+")",!e&&n.mark.snippet&&(t+=`

`+n.mark.snippet),i+" "+t):i}function aN(n,e){Error.call(this),this.name="YAMLException",this.reason=n,this.mark=e,this.message=cEe(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}aN.prototype=Object.create(Error.prototype);aN.prototype.constructor=aN;aN.prototype.toString=function(e){return this.name+": "+cEe(this,e)};var ja=aN;function F6(n,e,t,i,s){var r="",o="",a=Math.floor(s/2)-1;return i-e>a&&(r=" ... ",e=i-a+r.length),t-i>a&&(o=" ...",t=i+a-o.length),{str:r+n.slice(e,t).replace(/\t/g,"")+o,pos:i-e+r.length}}function B6(n,e){return Mr.repeat(" ",e-n.length)+n}function Sxt(n,e){if(e=Object.create(e||null),!n.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var t=/\r?\n|\r|\0/g,i=[0],s=[],r,o=-1;r=t.exec(n.buffer);)s.push(r.index),i.push(r.index+r[0].length),n.position<=r.index&&o<0&&(o=i.length-2);o<0&&(o=i.length-1);var a="",l,c,d=Math.min(n.line+e.linesAfter,s.length).toString().length,u=e.maxLength-(e.indent+d+3);for(l=1;l<=e.linesBefore&&!(o-l<0);l++)c=F6(n.buffer,i[o-l],s[o-l],n.position-(i[o]-i[o-l]),u),a=Mr.repeat(" ",e.indent)+B6((n.line-l+1).toString(),d)+" | "+c.str+`
`+a;for(c=F6(n.buffer,i[o],s[o],n.position,u),a+=Mr.repeat(" ",e.indent)+B6((n.line+1).toString(),d)+" | "+c.str+`
`,a+=Mr.repeat("-",e.indent+d+3+c.pos)+`^
`,l=1;l<=e.linesAfter&&!(o+l>=s.length);l++)c=F6(n.buffer,i[o+l],s[o+l],n.position-(i[o]-i[o+l]),u),a+=Mr.repeat(" ",e.indent)+B6((n.line+l+1).toString(),d)+" | "+c.str+`
`;return a.replace(/\n$/,"")}var xxt=Sxt,Lxt=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],kxt=["scalar","sequence","mapping"];function Ext(n){var e={};return n!==null&&Object.keys(n).forEach(function(t){n[t].forEach(function(i){e[String(i)]=t})}),e}function Ixt(n,e){if(e=e||{},Object.keys(e).forEach(function(t){if(Lxt.indexOf(t)===-1)throw new ja('Unknown option "'+t+'" is met in definition of "'+n+'" YAML type.')}),this.options=e,this.tag=n,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(t){return t},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=Ext(e.styleAliases||null),kxt.indexOf(this.kind)===-1)throw new ja('Unknown kind "'+this.kind+'" is specified for "'+n+'" YAML type.')}var Ao=Ixt;function Fhe(n,e){var t=[];return n[e].forEach(function(i){var s=t.length;t.forEach(function(r,o){r.tag===i.tag&&r.kind===i.kind&&r.multi===i.multi&&(s=o)}),t[s]=i}),t}function Dxt(){var n={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,t;function i(s){s.multi?(n.multi[s.kind].push(s),n.multi.fallback.push(s)):n[s.kind][s.tag]=n.fallback[s.tag]=s}for(e=0,t=arguments.length;e<t;e+=1)arguments[e].forEach(i);return n}function UG(n){return this.extend(n)}UG.prototype.extend=function(e){var t=[],i=[];if(e instanceof Ao)i.push(e);else if(Array.isArray(e))i=i.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(t=t.concat(e.implicit)),e.explicit&&(i=i.concat(e.explicit));else throw new ja("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");t.forEach(function(r){if(!(r instanceof Ao))throw new ja("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(r.loadKind&&r.loadKind!=="scalar")throw new ja("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(r.multi)throw new ja("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),i.forEach(function(r){if(!(r instanceof Ao))throw new ja("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var s=Object.create(UG.prototype);return s.implicit=(this.implicit||[]).concat(t),s.explicit=(this.explicit||[]).concat(i),s.compiledImplicit=Fhe(s,"implicit"),s.compiledExplicit=Fhe(s,"explicit"),s.compiledTypeMap=Dxt(s.compiledImplicit,s.compiledExplicit),s};var dEe=UG,uEe=new Ao("tag:yaml.org,2002:str",{kind:"scalar",construct:function(n){return n!==null?n:""}}),hEe=new Ao("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(n){return n!==null?n:[]}}),fEe=new Ao("tag:yaml.org,2002:map",{kind:"mapping",construct:function(n){return n!==null?n:{}}}),gEe=new dEe({explicit:[uEe,hEe,fEe]});function Nxt(n){if(n===null)return!0;var e=n.length;return e===1&&n==="~"||e===4&&(n==="null"||n==="Null"||n==="NULL")}function Txt(){return null}function Rxt(n){return n===null}var pEe=new Ao("tag:yaml.org,2002:null",{kind:"scalar",resolve:Nxt,construct:Txt,predicate:Rxt,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function Axt(n){if(n===null)return!1;var e=n.length;return e===4&&(n==="true"||n==="True"||n==="TRUE")||e===5&&(n==="false"||n==="False"||n==="FALSE")}function Mxt(n){return n==="true"||n==="True"||n==="TRUE"}function Pxt(n){return Object.prototype.toString.call(n)==="[object Boolean]"}var mEe=new Ao("tag:yaml.org,2002:bool",{kind:"scalar",resolve:Axt,construct:Mxt,predicate:Pxt,represent:{lowercase:function(n){return n?"true":"false"},uppercase:function(n){return n?"TRUE":"FALSE"},camelcase:function(n){return n?"True":"False"}},defaultStyle:"lowercase"});function Oxt(n){return 48<=n&&n<=57||65<=n&&n<=70||97<=n&&n<=102}function Fxt(n){return 48<=n&&n<=55}function Bxt(n){return 48<=n&&n<=57}function Wxt(n){if(n===null)return!1;var e=n.length,t=0,i=!1,s;if(!e)return!1;if(s=n[t],(s==="-"||s==="+")&&(s=n[++t]),s==="0"){if(t+1===e)return!0;if(s=n[++t],s==="b"){for(t++;t<e;t++)if(s=n[t],s!=="_"){if(s!=="0"&&s!=="1")return!1;i=!0}return i&&s!=="_"}if(s==="x"){for(t++;t<e;t++)if(s=n[t],s!=="_"){if(!Oxt(n.charCodeAt(t)))return!1;i=!0}return i&&s!=="_"}if(s==="o"){for(t++;t<e;t++)if(s=n[t],s!=="_"){if(!Fxt(n.charCodeAt(t)))return!1;i=!0}return i&&s!=="_"}}if(s==="_")return!1;for(;t<e;t++)if(s=n[t],s!=="_"){if(!Bxt(n.charCodeAt(t)))return!1;i=!0}return!(!i||s==="_")}function Hxt(n){var e=n,t=1,i;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),i=e[0],(i==="-"||i==="+")&&(i==="-"&&(t=-1),e=e.slice(1),i=e[0]),e==="0")return 0;if(i==="0"){if(e[1]==="b")return t*parseInt(e.slice(2),2);if(e[1]==="x")return t*parseInt(e.slice(2),16);if(e[1]==="o")return t*parseInt(e.slice(2),8)}return t*parseInt(e,10)}function Vxt(n){return Object.prototype.toString.call(n)==="[object Number]"&&n%1===0&&!Mr.isNegativeZero(n)}var _Ee=new Ao("tag:yaml.org,2002:int",{kind:"scalar",resolve:Wxt,construct:Hxt,predicate:Vxt,represent:{binary:function(n){return n>=0?"0b"+n.toString(2):"-0b"+n.toString(2).slice(1)},octal:function(n){return n>=0?"0o"+n.toString(8):"-0o"+n.toString(8).slice(1)},decimal:function(n){return n.toString(10)},hexadecimal:function(n){return n>=0?"0x"+n.toString(16).toUpperCase():"-0x"+n.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),zxt=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function Uxt(n){return!(n===null||!zxt.test(n)||n[n.length-1]==="_")}function $xt(n){var e,t;return e=n.replace(/_/g,"").toLowerCase(),t=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?t===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:t*parseFloat(e,10)}var jxt=/^[-+]?[0-9]+e/;function Kxt(n,e){var t;if(isNaN(n))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===n)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===n)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Mr.isNegativeZero(n))return"-0.0";return t=n.toString(10),jxt.test(t)?t.replace("e",".e"):t}function qxt(n){return Object.prototype.toString.call(n)==="[object Number]"&&(n%1!==0||Mr.isNegativeZero(n))}var vEe=new Ao("tag:yaml.org,2002:float",{kind:"scalar",resolve:Uxt,construct:$xt,predicate:qxt,represent:Kxt,defaultStyle:"lowercase"}),bEe=gEe.extend({implicit:[pEe,mEe,_Ee,vEe]}),wEe=bEe,CEe=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),yEe=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function Gxt(n){return n===null?!1:CEe.exec(n)!==null||yEe.exec(n)!==null}function Yxt(n){var e,t,i,s,r,o,a,l=0,c=null,d,u,h;if(e=CEe.exec(n),e===null&&(e=yEe.exec(n)),e===null)throw new Error("Date resolve error");if(t=+e[1],i=+e[2]-1,s=+e[3],!e[4])return new Date(Date.UTC(t,i,s));if(r=+e[4],o=+e[5],a=+e[6],e[7]){for(l=e[7].slice(0,3);l.length<3;)l+="0";l=+l}return e[9]&&(d=+e[10],u=+(e[11]||0),c=(d*60+u)*6e4,e[9]==="-"&&(c=-c)),h=new Date(Date.UTC(t,i,s,r,o,a,l)),c&&h.setTime(h.getTime()-c),h}function Zxt(n){return n.toISOString()}var SEe=new Ao("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:Gxt,construct:Yxt,instanceOf:Date,represent:Zxt});function Xxt(n){return n==="<<"||n===null}var xEe=new Ao("tag:yaml.org,2002:merge",{kind:"scalar",resolve:Xxt}),Eee=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function Qxt(n){if(n===null)return!1;var e,t,i=0,s=n.length,r=Eee;for(t=0;t<s;t++)if(e=r.indexOf(n.charAt(t)),!(e>64)){if(e<0)return!1;i+=6}return i%8===0}function Jxt(n){var e,t,i=n.replace(/[\r\n=]/g,""),s=i.length,r=Eee,o=0,a=[];for(e=0;e<s;e++)e%4===0&&e&&(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)),o=o<<6|r.indexOf(i.charAt(e));return t=s%4*6,t===0?(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)):t===18?(a.push(o>>10&255),a.push(o>>2&255)):t===12&&a.push(o>>4&255),new Uint8Array(a)}function eLt(n){var e="",t=0,i,s,r=n.length,o=Eee;for(i=0;i<r;i++)i%3===0&&i&&(e+=o[t>>18&63],e+=o[t>>12&63],e+=o[t>>6&63],e+=o[t&63]),t=(t<<8)+n[i];return s=r%3,s===0?(e+=o[t>>18&63],e+=o[t>>12&63],e+=o[t>>6&63],e+=o[t&63]):s===2?(e+=o[t>>10&63],e+=o[t>>4&63],e+=o[t<<2&63],e+=o[64]):s===1&&(e+=o[t>>2&63],e+=o[t<<4&63],e+=o[64],e+=o[64]),e}function tLt(n){return Object.prototype.toString.call(n)==="[object Uint8Array]"}var LEe=new Ao("tag:yaml.org,2002:binary",{kind:"scalar",resolve:Qxt,construct:Jxt,predicate:tLt,represent:eLt}),iLt=Object.prototype.hasOwnProperty,nLt=Object.prototype.toString;function sLt(n){if(n===null)return!0;var e=[],t,i,s,r,o,a=n;for(t=0,i=a.length;t<i;t+=1){if(s=a[t],o=!1,nLt.call(s)!=="[object Object]")return!1;for(r in s)if(iLt.call(s,r))if(!o)o=!0;else return!1;if(!o)return!1;if(e.indexOf(r)===-1)e.push(r);else return!1}return!0}function rLt(n){return n!==null?n:[]}var kEe=new Ao("tag:yaml.org,2002:omap",{kind:"sequence",resolve:sLt,construct:rLt}),oLt=Object.prototype.toString;function aLt(n){if(n===null)return!0;var e,t,i,s,r,o=n;for(r=new Array(o.length),e=0,t=o.length;e<t;e+=1){if(i=o[e],oLt.call(i)!=="[object Object]"||(s=Object.keys(i),s.length!==1))return!1;r[e]=[s[0],i[s[0]]]}return!0}function lLt(n){if(n===null)return[];var e,t,i,s,r,o=n;for(r=new Array(o.length),e=0,t=o.length;e<t;e+=1)i=o[e],s=Object.keys(i),r[e]=[s[0],i[s[0]]];return r}var EEe=new Ao("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:aLt,construct:lLt}),cLt=Object.prototype.hasOwnProperty;function dLt(n){if(n===null)return!0;var e,t=n;for(e in t)if(cLt.call(t,e)&&t[e]!==null)return!1;return!0}function uLt(n){return n!==null?n:{}}var IEe=new Ao("tag:yaml.org,2002:set",{kind:"mapping",resolve:dLt,construct:uLt}),Iee=wEe.extend({implicit:[SEe,xEe],explicit:[LEe,kEe,EEe,IEe]}),q_=Object.prototype.hasOwnProperty,XF=1,DEe=2,NEe=3,QF=4,W6=1,hLt=2,Bhe=3,fLt=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,gLt=/[\x85\u2028\u2029]/,pLt=/[,\[\]\{\}]/,TEe=/^(?:!|!!|![a-z\-]+!)$/i,REe=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Whe(n){return Object.prototype.toString.call(n)}function Jh(n){return n===10||n===13}function ew(n){return n===9||n===32}function Fl(n){return n===9||n===32||n===10||n===13}function U1(n){return n===44||n===91||n===93||n===123||n===125}function mLt(n){var e;return 48<=n&&n<=57?n-48:(e=n|32,97<=e&&e<=102?e-97+10:-1)}function _Lt(n){return n===120?2:n===117?4:n===85?8:0}function vLt(n){return 48<=n&&n<=57?n-48:-1}function Hhe(n){return n===48?"\0":n===97?"\x07":n===98?"\b":n===116||n===9?"	":n===110?`
`:n===118?"\v":n===102?"\f":n===114?"\r":n===101?"\x1B":n===32?" ":n===34?'"':n===47?"/":n===92?"\\":n===78?"":n===95?"":n===76?"\u2028":n===80?"\u2029":""}function bLt(n){return n<=65535?String.fromCharCode(n):String.fromCharCode((n-65536>>10)+55296,(n-65536&1023)+56320)}var AEe=new Array(256),MEe=new Array(256);for(var jC=0;jC<256;jC++)AEe[jC]=Hhe(jC)?1:0,MEe[jC]=Hhe(jC);function wLt(n,e){this.input=n,this.filename=e.filename||null,this.schema=e.schema||Iee,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=n.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function PEe(n,e){var t={name:n.filename,buffer:n.input.slice(0,-1),position:n.position,line:n.line,column:n.position-n.lineStart};return t.snippet=xxt(t),new ja(e,t)}function Vt(n,e){throw PEe(n,e)}function JF(n,e){n.onWarning&&n.onWarning.call(null,PEe(n,e))}var Vhe={YAML:function(e,t,i){var s,r,o;e.version!==null&&Vt(e,"duplication of %YAML directive"),i.length!==1&&Vt(e,"YAML directive accepts exactly one argument"),s=/^([0-9]+)\.([0-9]+)$/.exec(i[0]),s===null&&Vt(e,"ill-formed argument of the YAML directive"),r=parseInt(s[1],10),o=parseInt(s[2],10),r!==1&&Vt(e,"unacceptable YAML version of the document"),e.version=i[0],e.checkLineBreaks=o<2,o!==1&&o!==2&&JF(e,"unsupported YAML version of the document")},TAG:function(e,t,i){var s,r;i.length!==2&&Vt(e,"TAG directive accepts exactly two arguments"),s=i[0],r=i[1],TEe.test(s)||Vt(e,"ill-formed tag handle (first argument) of the TAG directive"),q_.call(e.tagMap,s)&&Vt(e,'there is a previously declared suffix for "'+s+'" tag handle'),REe.test(r)||Vt(e,"ill-formed tag prefix (second argument) of the TAG directive");try{r=decodeURIComponent(r)}catch{Vt(e,"tag prefix is malformed: "+r)}e.tagMap[s]=r}};function e_(n,e,t,i){var s,r,o,a;if(e<t){if(a=n.input.slice(e,t),i)for(s=0,r=a.length;s<r;s+=1)o=a.charCodeAt(s),o===9||32<=o&&o<=1114111||Vt(n,"expected valid JSON character");else fLt.test(a)&&Vt(n,"the stream contains non-printable characters");n.result+=a}}function zhe(n,e,t,i){var s,r,o,a;for(Mr.isObject(t)||Vt(n,"cannot merge mappings; the provided source object is unacceptable"),s=Object.keys(t),o=0,a=s.length;o<a;o+=1)r=s[o],q_.call(e,r)||(e[r]=t[r],i[r]=!0)}function $1(n,e,t,i,s,r,o,a,l){var c,d;if(Array.isArray(s))for(s=Array.prototype.slice.call(s),c=0,d=s.length;c<d;c+=1)Array.isArray(s[c])&&Vt(n,"nested arrays are not supported inside keys"),typeof s=="object"&&Whe(s[c])==="[object Object]"&&(s[c]="[object Object]");if(typeof s=="object"&&Whe(s)==="[object Object]"&&(s="[object Object]"),s=String(s),e===null&&(e={}),i==="tag:yaml.org,2002:merge")if(Array.isArray(r))for(c=0,d=r.length;c<d;c+=1)zhe(n,e,r[c],t);else zhe(n,e,r,t);else!n.json&&!q_.call(t,s)&&q_.call(e,s)&&(n.line=o||n.line,n.lineStart=a||n.lineStart,n.position=l||n.position,Vt(n,"duplicated mapping key")),s==="__proto__"?Object.defineProperty(e,s,{configurable:!0,enumerable:!0,writable:!0,value:r}):e[s]=r,delete t[s];return e}function Dee(n){var e;e=n.input.charCodeAt(n.position),e===10?n.position++:e===13?(n.position++,n.input.charCodeAt(n.position)===10&&n.position++):Vt(n,"a line break is expected"),n.line+=1,n.lineStart=n.position,n.firstTabInLine=-1}function _r(n,e,t){for(var i=0,s=n.input.charCodeAt(n.position);s!==0;){for(;ew(s);)s===9&&n.firstTabInLine===-1&&(n.firstTabInLine=n.position),s=n.input.charCodeAt(++n.position);if(e&&s===35)do s=n.input.charCodeAt(++n.position);while(s!==10&&s!==13&&s!==0);if(Jh(s))for(Dee(n),s=n.input.charCodeAt(n.position),i++,n.lineIndent=0;s===32;)n.lineIndent++,s=n.input.charCodeAt(++n.position);else break}return t!==-1&&i!==0&&n.lineIndent<t&&JF(n,"deficient indentation"),i}function mW(n){var e=n.position,t;return t=n.input.charCodeAt(e),!!((t===45||t===46)&&t===n.input.charCodeAt(e+1)&&t===n.input.charCodeAt(e+2)&&(e+=3,t=n.input.charCodeAt(e),t===0||Fl(t)))}function Nee(n,e){e===1?n.result+=" ":e>1&&(n.result+=Mr.repeat(`
`,e-1))}function CLt(n,e,t){var i,s,r,o,a,l,c,d,u=n.kind,h=n.result,f;if(f=n.input.charCodeAt(n.position),Fl(f)||U1(f)||f===35||f===38||f===42||f===33||f===124||f===62||f===39||f===34||f===37||f===64||f===96||(f===63||f===45)&&(s=n.input.charCodeAt(n.position+1),Fl(s)||t&&U1(s)))return!1;for(n.kind="scalar",n.result="",r=o=n.position,a=!1;f!==0;){if(f===58){if(s=n.input.charCodeAt(n.position+1),Fl(s)||t&&U1(s))break}else if(f===35){if(i=n.input.charCodeAt(n.position-1),Fl(i))break}else{if(n.position===n.lineStart&&mW(n)||t&&U1(f))break;if(Jh(f))if(l=n.line,c=n.lineStart,d=n.lineIndent,_r(n,!1,-1),n.lineIndent>=e){a=!0,f=n.input.charCodeAt(n.position);continue}else{n.position=o,n.line=l,n.lineStart=c,n.lineIndent=d;break}}a&&(e_(n,r,o,!1),Nee(n,n.line-l),r=o=n.position,a=!1),ew(f)||(o=n.position+1),f=n.input.charCodeAt(++n.position)}return e_(n,r,o,!1),n.result?!0:(n.kind=u,n.result=h,!1)}function yLt(n,e){var t,i,s;if(t=n.input.charCodeAt(n.position),t!==39)return!1;for(n.kind="scalar",n.result="",n.position++,i=s=n.position;(t=n.input.charCodeAt(n.position))!==0;)if(t===39)if(e_(n,i,n.position,!0),t=n.input.charCodeAt(++n.position),t===39)i=n.position,n.position++,s=n.position;else return!0;else Jh(t)?(e_(n,i,s,!0),Nee(n,_r(n,!1,e)),i=s=n.position):n.position===n.lineStart&&mW(n)?Vt(n,"unexpected end of the document within a single quoted scalar"):(n.position++,s=n.position);Vt(n,"unexpected end of the stream within a single quoted scalar")}function SLt(n,e){var t,i,s,r,o,a;if(a=n.input.charCodeAt(n.position),a!==34)return!1;for(n.kind="scalar",n.result="",n.position++,t=i=n.position;(a=n.input.charCodeAt(n.position))!==0;){if(a===34)return e_(n,t,n.position,!0),n.position++,!0;if(a===92){if(e_(n,t,n.position,!0),a=n.input.charCodeAt(++n.position),Jh(a))_r(n,!1,e);else if(a<256&&AEe[a])n.result+=MEe[a],n.position++;else if((o=_Lt(a))>0){for(s=o,r=0;s>0;s--)a=n.input.charCodeAt(++n.position),(o=mLt(a))>=0?r=(r<<4)+o:Vt(n,"expected hexadecimal character");n.result+=bLt(r),n.position++}else Vt(n,"unknown escape sequence");t=i=n.position}else Jh(a)?(e_(n,t,i,!0),Nee(n,_r(n,!1,e)),t=i=n.position):n.position===n.lineStart&&mW(n)?Vt(n,"unexpected end of the document within a double quoted scalar"):(n.position++,i=n.position)}Vt(n,"unexpected end of the stream within a double quoted scalar")}function xLt(n,e){var t=!0,i,s,r,o=n.tag,a,l=n.anchor,c,d,u,h,f,g=Object.create(null),p,_,w,b;if(b=n.input.charCodeAt(n.position),b===91)d=93,f=!1,a=[];else if(b===123)d=125,f=!0,a={};else return!1;for(n.anchor!==null&&(n.anchorMap[n.anchor]=a),b=n.input.charCodeAt(++n.position);b!==0;){if(_r(n,!0,e),b=n.input.charCodeAt(n.position),b===d)return n.position++,n.tag=o,n.anchor=l,n.kind=f?"mapping":"sequence",n.result=a,!0;t?b===44&&Vt(n,"expected the node content, but found ','"):Vt(n,"missed comma between flow collection entries"),_=p=w=null,u=h=!1,b===63&&(c=n.input.charCodeAt(n.position+1),Fl(c)&&(u=h=!0,n.position++,_r(n,!0,e))),i=n.line,s=n.lineStart,r=n.position,gx(n,e,XF,!1,!0),_=n.tag,p=n.result,_r(n,!0,e),b=n.input.charCodeAt(n.position),(h||n.line===i)&&b===58&&(u=!0,b=n.input.charCodeAt(++n.position),_r(n,!0,e),gx(n,e,XF,!1,!0),w=n.result),f?$1(n,a,g,_,p,w,i,s,r):u?a.push($1(n,null,g,_,p,w,i,s,r)):a.push(p),_r(n,!0,e),b=n.input.charCodeAt(n.position),b===44?(t=!0,b=n.input.charCodeAt(++n.position)):t=!1}Vt(n,"unexpected end of the stream within a flow collection")}function LLt(n,e){var t,i,s=W6,r=!1,o=!1,a=e,l=0,c=!1,d,u;if(u=n.input.charCodeAt(n.position),u===124)i=!1;else if(u===62)i=!0;else return!1;for(n.kind="scalar",n.result="";u!==0;)if(u=n.input.charCodeAt(++n.position),u===43||u===45)W6===s?s=u===43?Bhe:hLt:Vt(n,"repeat of a chomping mode identifier");else if((d=vLt(u))>=0)d===0?Vt(n,"bad explicit indentation width of a block scalar; it cannot be less than one"):o?Vt(n,"repeat of an indentation width identifier"):(a=e+d-1,o=!0);else break;if(ew(u)){do u=n.input.charCodeAt(++n.position);while(ew(u));if(u===35)do u=n.input.charCodeAt(++n.position);while(!Jh(u)&&u!==0)}for(;u!==0;){for(Dee(n),n.lineIndent=0,u=n.input.charCodeAt(n.position);(!o||n.lineIndent<a)&&u===32;)n.lineIndent++,u=n.input.charCodeAt(++n.position);if(!o&&n.lineIndent>a&&(a=n.lineIndent),Jh(u)){l++;continue}if(n.lineIndent<a){s===Bhe?n.result+=Mr.repeat(`
`,r?1+l:l):s===W6&&r&&(n.result+=`
`);break}for(i?ew(u)?(c=!0,n.result+=Mr.repeat(`
`,r?1+l:l)):c?(c=!1,n.result+=Mr.repeat(`
`,l+1)):l===0?r&&(n.result+=" "):n.result+=Mr.repeat(`
`,l):n.result+=Mr.repeat(`
`,r?1+l:l),r=!0,o=!0,l=0,t=n.position;!Jh(u)&&u!==0;)u=n.input.charCodeAt(++n.position);e_(n,t,n.position,!1)}return!0}function Uhe(n,e){var t,i=n.tag,s=n.anchor,r=[],o,a=!1,l;if(n.firstTabInLine!==-1)return!1;for(n.anchor!==null&&(n.anchorMap[n.anchor]=r),l=n.input.charCodeAt(n.position);l!==0&&(n.firstTabInLine!==-1&&(n.position=n.firstTabInLine,Vt(n,"tab characters must not be used in indentation")),!(l!==45||(o=n.input.charCodeAt(n.position+1),!Fl(o))));){if(a=!0,n.position++,_r(n,!0,-1)&&n.lineIndent<=e){r.push(null),l=n.input.charCodeAt(n.position);continue}if(t=n.line,gx(n,e,NEe,!1,!0),r.push(n.result),_r(n,!0,-1),l=n.input.charCodeAt(n.position),(n.line===t||n.lineIndent>e)&&l!==0)Vt(n,"bad indentation of a sequence entry");else if(n.lineIndent<e)break}return a?(n.tag=i,n.anchor=s,n.kind="sequence",n.result=r,!0):!1}function kLt(n,e,t){var i,s,r,o,a,l,c=n.tag,d=n.anchor,u={},h=Object.create(null),f=null,g=null,p=null,_=!1,w=!1,b;if(n.firstTabInLine!==-1)return!1;for(n.anchor!==null&&(n.anchorMap[n.anchor]=u),b=n.input.charCodeAt(n.position);b!==0;){if(!_&&n.firstTabInLine!==-1&&(n.position=n.firstTabInLine,Vt(n,"tab characters must not be used in indentation")),i=n.input.charCodeAt(n.position+1),r=n.line,(b===63||b===58)&&Fl(i))b===63?(_&&($1(n,u,h,f,g,null,o,a,l),f=g=p=null),w=!0,_=!0,s=!0):_?(_=!1,s=!0):Vt(n,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),n.position+=1,b=i;else{if(o=n.line,a=n.lineStart,l=n.position,!gx(n,t,DEe,!1,!0))break;if(n.line===r){for(b=n.input.charCodeAt(n.position);ew(b);)b=n.input.charCodeAt(++n.position);if(b===58)b=n.input.charCodeAt(++n.position),Fl(b)||Vt(n,"a whitespace character is expected after the key-value separator within a block mapping"),_&&($1(n,u,h,f,g,null,o,a,l),f=g=p=null),w=!0,_=!1,s=!1,f=n.tag,g=n.result;else if(w)Vt(n,"can not read an implicit mapping pair; a colon is missed");else return n.tag=c,n.anchor=d,!0}else if(w)Vt(n,"can not read a block mapping entry; a multiline key may not be an implicit key");else return n.tag=c,n.anchor=d,!0}if((n.line===r||n.lineIndent>e)&&(_&&(o=n.line,a=n.lineStart,l=n.position),gx(n,e,QF,!0,s)&&(_?g=n.result:p=n.result),_||($1(n,u,h,f,g,p,o,a,l),f=g=p=null),_r(n,!0,-1),b=n.input.charCodeAt(n.position)),(n.line===r||n.lineIndent>e)&&b!==0)Vt(n,"bad indentation of a mapping entry");else if(n.lineIndent<e)break}return _&&$1(n,u,h,f,g,null,o,a,l),w&&(n.tag=c,n.anchor=d,n.kind="mapping",n.result=u),w}function ELt(n){var e,t=!1,i=!1,s,r,o;if(o=n.input.charCodeAt(n.position),o!==33)return!1;if(n.tag!==null&&Vt(n,"duplication of a tag property"),o=n.input.charCodeAt(++n.position),o===60?(t=!0,o=n.input.charCodeAt(++n.position)):o===33?(i=!0,s="!!",o=n.input.charCodeAt(++n.position)):s="!",e=n.position,t){do o=n.input.charCodeAt(++n.position);while(o!==0&&o!==62);n.position<n.length?(r=n.input.slice(e,n.position),o=n.input.charCodeAt(++n.position)):Vt(n,"unexpected end of the stream within a verbatim tag")}else{for(;o!==0&&!Fl(o);)o===33&&(i?Vt(n,"tag suffix cannot contain exclamation marks"):(s=n.input.slice(e-1,n.position+1),TEe.test(s)||Vt(n,"named tag handle cannot contain such characters"),i=!0,e=n.position+1)),o=n.input.charCodeAt(++n.position);r=n.input.slice(e,n.position),pLt.test(r)&&Vt(n,"tag suffix cannot contain flow indicator characters")}r&&!REe.test(r)&&Vt(n,"tag name cannot contain such characters: "+r);try{r=decodeURIComponent(r)}catch{Vt(n,"tag name is malformed: "+r)}return t?n.tag=r:q_.call(n.tagMap,s)?n.tag=n.tagMap[s]+r:s==="!"?n.tag="!"+r:s==="!!"?n.tag="tag:yaml.org,2002:"+r:Vt(n,'undeclared tag handle "'+s+'"'),!0}function ILt(n){var e,t;if(t=n.input.charCodeAt(n.position),t!==38)return!1;for(n.anchor!==null&&Vt(n,"duplication of an anchor property"),t=n.input.charCodeAt(++n.position),e=n.position;t!==0&&!Fl(t)&&!U1(t);)t=n.input.charCodeAt(++n.position);return n.position===e&&Vt(n,"name of an anchor node must contain at least one character"),n.anchor=n.input.slice(e,n.position),!0}function DLt(n){var e,t,i;if(i=n.input.charCodeAt(n.position),i!==42)return!1;for(i=n.input.charCodeAt(++n.position),e=n.position;i!==0&&!Fl(i)&&!U1(i);)i=n.input.charCodeAt(++n.position);return n.position===e&&Vt(n,"name of an alias node must contain at least one character"),t=n.input.slice(e,n.position),q_.call(n.anchorMap,t)||Vt(n,'unidentified alias "'+t+'"'),n.result=n.anchorMap[t],_r(n,!0,-1),!0}function gx(n,e,t,i,s){var r,o,a,l=1,c=!1,d=!1,u,h,f,g,p,_;if(n.listener!==null&&n.listener("open",n),n.tag=null,n.anchor=null,n.kind=null,n.result=null,r=o=a=QF===t||NEe===t,i&&_r(n,!0,-1)&&(c=!0,n.lineIndent>e?l=1:n.lineIndent===e?l=0:n.lineIndent<e&&(l=-1)),l===1)for(;ELt(n)||ILt(n);)_r(n,!0,-1)?(c=!0,a=r,n.lineIndent>e?l=1:n.lineIndent===e?l=0:n.lineIndent<e&&(l=-1)):a=!1;if(a&&(a=c||s),(l===1||QF===t)&&(XF===t||DEe===t?p=e:p=e+1,_=n.position-n.lineStart,l===1?a&&(Uhe(n,_)||kLt(n,_,p))||xLt(n,p)?d=!0:(o&&LLt(n,p)||yLt(n,p)||SLt(n,p)?d=!0:DLt(n)?(d=!0,(n.tag!==null||n.anchor!==null)&&Vt(n,"alias node should not have any properties")):CLt(n,p,XF===t)&&(d=!0,n.tag===null&&(n.tag="?")),n.anchor!==null&&(n.anchorMap[n.anchor]=n.result)):l===0&&(d=a&&Uhe(n,_))),n.tag===null)n.anchor!==null&&(n.anchorMap[n.anchor]=n.result);else if(n.tag==="?"){for(n.result!==null&&n.kind!=="scalar"&&Vt(n,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+n.kind+'"'),u=0,h=n.implicitTypes.length;u<h;u+=1)if(g=n.implicitTypes[u],g.resolve(n.result)){n.result=g.construct(n.result),n.tag=g.tag,n.anchor!==null&&(n.anchorMap[n.anchor]=n.result);break}}else if(n.tag!=="!"){if(q_.call(n.typeMap[n.kind||"fallback"],n.tag))g=n.typeMap[n.kind||"fallback"][n.tag];else for(g=null,f=n.typeMap.multi[n.kind||"fallback"],u=0,h=f.length;u<h;u+=1)if(n.tag.slice(0,f[u].tag.length)===f[u].tag){g=f[u];break}g||Vt(n,"unknown tag !<"+n.tag+">"),n.result!==null&&g.kind!==n.kind&&Vt(n,"unacceptable node kind for !<"+n.tag+'> tag; it should be "'+g.kind+'", not "'+n.kind+'"'),g.resolve(n.result,n.tag)?(n.result=g.construct(n.result,n.tag),n.anchor!==null&&(n.anchorMap[n.anchor]=n.result)):Vt(n,"cannot resolve a node with !<"+n.tag+"> explicit tag")}return n.listener!==null&&n.listener("close",n),n.tag!==null||n.anchor!==null||d}function NLt(n){var e=n.position,t,i,s,r=!1,o;for(n.version=null,n.checkLineBreaks=n.legacy,n.tagMap=Object.create(null),n.anchorMap=Object.create(null);(o=n.input.charCodeAt(n.position))!==0&&(_r(n,!0,-1),o=n.input.charCodeAt(n.position),!(n.lineIndent>0||o!==37));){for(r=!0,o=n.input.charCodeAt(++n.position),t=n.position;o!==0&&!Fl(o);)o=n.input.charCodeAt(++n.position);for(i=n.input.slice(t,n.position),s=[],i.length<1&&Vt(n,"directive name must not be less than one character in length");o!==0;){for(;ew(o);)o=n.input.charCodeAt(++n.position);if(o===35){do o=n.input.charCodeAt(++n.position);while(o!==0&&!Jh(o));break}if(Jh(o))break;for(t=n.position;o!==0&&!Fl(o);)o=n.input.charCodeAt(++n.position);s.push(n.input.slice(t,n.position))}o!==0&&Dee(n),q_.call(Vhe,i)?Vhe[i](n,i,s):JF(n,'unknown document directive "'+i+'"')}if(_r(n,!0,-1),n.lineIndent===0&&n.input.charCodeAt(n.position)===45&&n.input.charCodeAt(n.position+1)===45&&n.input.charCodeAt(n.position+2)===45?(n.position+=3,_r(n,!0,-1)):r&&Vt(n,"directives end mark is expected"),gx(n,n.lineIndent-1,QF,!1,!0),_r(n,!0,-1),n.checkLineBreaks&&gLt.test(n.input.slice(e,n.position))&&JF(n,"non-ASCII line breaks are interpreted as content"),n.documents.push(n.result),n.position===n.lineStart&&mW(n)){n.input.charCodeAt(n.position)===46&&(n.position+=3,_r(n,!0,-1));return}if(n.position<n.length-1)Vt(n,"end of the stream or a document separator is expected");else return}function OEe(n,e){n=String(n),e=e||{},n.length!==0&&(n.charCodeAt(n.length-1)!==10&&n.charCodeAt(n.length-1)!==13&&(n+=`
`),n.charCodeAt(0)===65279&&(n=n.slice(1)));var t=new wLt(n,e),i=n.indexOf("\0");for(i!==-1&&(t.position=i,Vt(t,"null byte is not allowed in input")),t.input+="\0";t.input.charCodeAt(t.position)===32;)t.lineIndent+=1,t.position+=1;for(;t.position<t.length-1;)NLt(t);return t.documents}function TLt(n,e,t){e!==null&&typeof e=="object"&&typeof t>"u"&&(t=e,e=null);var i=OEe(n,t);if(typeof e!="function")return i;for(var s=0,r=i.length;s<r;s+=1)e(i[s])}function RLt(n,e){var t=OEe(n,e);if(t.length!==0){if(t.length===1)return t[0];throw new ja("expected a single document in the stream, but found more")}}var ALt=TLt,MLt=RLt,FEe={loadAll:ALt,load:MLt},BEe=Object.prototype.toString,WEe=Object.prototype.hasOwnProperty,Tee=65279,PLt=9,lN=10,OLt=13,FLt=32,BLt=33,WLt=34,$G=35,HLt=37,VLt=38,zLt=39,ULt=42,HEe=44,$Lt=45,e4=58,jLt=61,KLt=62,qLt=63,GLt=64,VEe=91,zEe=93,YLt=96,UEe=123,ZLt=124,$Ee=125,Ca={};Ca[0]="\\0";Ca[7]="\\a";Ca[8]="\\b";Ca[9]="\\t";Ca[10]="\\n";Ca[11]="\\v";Ca[12]="\\f";Ca[13]="\\r";Ca[27]="\\e";Ca[34]='\\"';Ca[92]="\\\\";Ca[133]="\\N";Ca[160]="\\_";Ca[8232]="\\L";Ca[8233]="\\P";var XLt=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],QLt=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function JLt(n,e){var t,i,s,r,o,a,l;if(e===null)return{};for(t={},i=Object.keys(e),s=0,r=i.length;s<r;s+=1)o=i[s],a=String(e[o]),o.slice(0,2)==="!!"&&(o="tag:yaml.org,2002:"+o.slice(2)),l=n.compiledTypeMap.fallback[o],l&&WEe.call(l.styleAliases,a)&&(a=l.styleAliases[a]),t[o]=a;return t}function ekt(n){var e,t,i;if(e=n.toString(16).toUpperCase(),n<=255)t="x",i=2;else if(n<=65535)t="u",i=4;else if(n<=4294967295)t="U",i=8;else throw new ja("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+t+Mr.repeat("0",i-e.length)+e}var tkt=1,cN=2;function ikt(n){this.schema=n.schema||Iee,this.indent=Math.max(1,n.indent||2),this.noArrayIndent=n.noArrayIndent||!1,this.skipInvalid=n.skipInvalid||!1,this.flowLevel=Mr.isNothing(n.flowLevel)?-1:n.flowLevel,this.styleMap=JLt(this.schema,n.styles||null),this.sortKeys=n.sortKeys||!1,this.lineWidth=n.lineWidth||80,this.noRefs=n.noRefs||!1,this.noCompatMode=n.noCompatMode||!1,this.condenseFlow=n.condenseFlow||!1,this.quotingType=n.quotingType==='"'?cN:tkt,this.forceQuotes=n.forceQuotes||!1,this.replacer=typeof n.replacer=="function"?n.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function $he(n,e){for(var t=Mr.repeat(" ",e),i=0,s=-1,r="",o,a=n.length;i<a;)s=n.indexOf(`
`,i),s===-1?(o=n.slice(i),i=a):(o=n.slice(i,s+1),i=s+1),o.length&&o!==`
`&&(r+=t),r+=o;return r}function jG(n,e){return`
`+Mr.repeat(" ",n.indent*e)}function nkt(n,e){var t,i,s;for(t=0,i=n.implicitTypes.length;t<i;t+=1)if(s=n.implicitTypes[t],s.resolve(e))return!0;return!1}function t4(n){return n===FLt||n===PLt}function dN(n){return 32<=n&&n<=126||161<=n&&n<=55295&&n!==8232&&n!==8233||57344<=n&&n<=65533&&n!==Tee||65536<=n&&n<=1114111}function jhe(n){return dN(n)&&n!==Tee&&n!==OLt&&n!==lN}function Khe(n,e,t){var i=jhe(n),s=i&&!t4(n);return(t?i:i&&n!==HEe&&n!==VEe&&n!==zEe&&n!==UEe&&n!==$Ee)&&n!==$G&&!(e===e4&&!s)||jhe(e)&&!t4(e)&&n===$G||e===e4&&s}function skt(n){return dN(n)&&n!==Tee&&!t4(n)&&n!==$Lt&&n!==qLt&&n!==e4&&n!==HEe&&n!==VEe&&n!==zEe&&n!==UEe&&n!==$Ee&&n!==$G&&n!==VLt&&n!==ULt&&n!==BLt&&n!==ZLt&&n!==jLt&&n!==KLt&&n!==zLt&&n!==WLt&&n!==HLt&&n!==GLt&&n!==YLt}function rkt(n){return!t4(n)&&n!==e4}function Tk(n,e){var t=n.charCodeAt(e),i;return t>=55296&&t<=56319&&e+1<n.length&&(i=n.charCodeAt(e+1),i>=56320&&i<=57343)?(t-55296)*1024+i-56320+65536:t}function jEe(n){var e=/^\n* /;return e.test(n)}var KEe=1,KG=2,qEe=3,GEe=4,n1=5;function okt(n,e,t,i,s,r,o,a){var l,c=0,d=null,u=!1,h=!1,f=i!==-1,g=-1,p=skt(Tk(n,0))&&rkt(Tk(n,n.length-1));if(e||o)for(l=0;l<n.length;c>=65536?l+=2:l++){if(c=Tk(n,l),!dN(c))return n1;p=p&&Khe(c,d,a),d=c}else{for(l=0;l<n.length;c>=65536?l+=2:l++){if(c=Tk(n,l),c===lN)u=!0,f&&(h=h||l-g-1>i&&n[g+1]!==" ",g=l);else if(!dN(c))return n1;p=p&&Khe(c,d,a),d=c}h=h||f&&l-g-1>i&&n[g+1]!==" "}return!u&&!h?p&&!o&&!s(n)?KEe:r===cN?n1:KG:t>9&&jEe(n)?n1:o?r===cN?n1:KG:h?GEe:qEe}function akt(n,e,t,i,s){n.dump=function(){if(e.length===0)return n.quotingType===cN?'""':"''";if(!n.noCompatMode&&(XLt.indexOf(e)!==-1||QLt.test(e)))return n.quotingType===cN?'"'+e+'"':"'"+e+"'";var r=n.indent*Math.max(1,t),o=n.lineWidth===-1?-1:Math.max(Math.min(n.lineWidth,40),n.lineWidth-r),a=i||n.flowLevel>-1&&t>=n.flowLevel;function l(c){return nkt(n,c)}switch(okt(e,a,n.indent,o,l,n.quotingType,n.forceQuotes&&!i,s)){case KEe:return e;case KG:return"'"+e.replace(/'/g,"''")+"'";case qEe:return"|"+qhe(e,n.indent)+Ghe($he(e,r));case GEe:return">"+qhe(e,n.indent)+Ghe($he(lkt(e,o),r));case n1:return'"'+ckt(e)+'"';default:throw new ja("impossible error: invalid scalar style")}}()}function qhe(n,e){var t=jEe(n)?String(e):"",i=n[n.length-1]===`
`,s=i&&(n[n.length-2]===`
`||n===`
`),r=s?"+":i?"":"-";return t+r+`
`}function Ghe(n){return n[n.length-1]===`
`?n.slice(0,-1):n}function lkt(n,e){for(var t=/(\n+)([^\n]*)/g,i=function(){var c=n.indexOf(`
`);return c=c!==-1?c:n.length,t.lastIndex=c,Yhe(n.slice(0,c),e)}(),s=n[0]===`
`||n[0]===" ",r,o;o=t.exec(n);){var a=o[1],l=o[2];r=l[0]===" ",i+=a+(!s&&!r&&l!==""?`
`:"")+Yhe(l,e),s=r}return i}function Yhe(n,e){if(n===""||n[0]===" ")return n;for(var t=/ [^ ]/g,i,s=0,r,o=0,a=0,l="";i=t.exec(n);)a=i.index,a-s>e&&(r=o>s?o:a,l+=`
`+n.slice(s,r),s=r+1),o=a;return l+=`
`,n.length-s>e&&o>s?l+=n.slice(s,o)+`
`+n.slice(o+1):l+=n.slice(s),l.slice(1)}function ckt(n){for(var e="",t=0,i,s=0;s<n.length;t>=65536?s+=2:s++)t=Tk(n,s),i=Ca[t],!i&&dN(t)?(e+=n[s],t>=65536&&(e+=n[s+1])):e+=i||ekt(t);return e}function dkt(n,e,t){var i="",s=n.tag,r,o,a;for(r=0,o=t.length;r<o;r+=1)a=t[r],n.replacer&&(a=n.replacer.call(t,String(r),a)),(ap(n,e,a,!1,!1)||typeof a>"u"&&ap(n,e,null,!1,!1))&&(i!==""&&(i+=","+(n.condenseFlow?"":" ")),i+=n.dump);n.tag=s,n.dump="["+i+"]"}function Zhe(n,e,t,i){var s="",r=n.tag,o,a,l;for(o=0,a=t.length;o<a;o+=1)l=t[o],n.replacer&&(l=n.replacer.call(t,String(o),l)),(ap(n,e+1,l,!0,!0,!1,!0)||typeof l>"u"&&ap(n,e+1,null,!0,!0,!1,!0))&&((!i||s!=="")&&(s+=jG(n,e)),n.dump&&lN===n.dump.charCodeAt(0)?s+="-":s+="- ",s+=n.dump);n.tag=r,n.dump=s||"[]"}function ukt(n,e,t){var i="",s=n.tag,r=Object.keys(t),o,a,l,c,d;for(o=0,a=r.length;o<a;o+=1)d="",i!==""&&(d+=", "),n.condenseFlow&&(d+='"'),l=r[o],c=t[l],n.replacer&&(c=n.replacer.call(t,l,c)),ap(n,e,l,!1,!1)&&(n.dump.length>1024&&(d+="? "),d+=n.dump+(n.condenseFlow?'"':"")+":"+(n.condenseFlow?"":" "),ap(n,e,c,!1,!1)&&(d+=n.dump,i+=d));n.tag=s,n.dump="{"+i+"}"}function hkt(n,e,t,i){var s="",r=n.tag,o=Object.keys(t),a,l,c,d,u,h;if(n.sortKeys===!0)o.sort();else if(typeof n.sortKeys=="function")o.sort(n.sortKeys);else if(n.sortKeys)throw new ja("sortKeys must be a boolean or a function");for(a=0,l=o.length;a<l;a+=1)h="",(!i||s!=="")&&(h+=jG(n,e)),c=o[a],d=t[c],n.replacer&&(d=n.replacer.call(t,c,d)),ap(n,e+1,c,!0,!0,!0)&&(u=n.tag!==null&&n.tag!=="?"||n.dump&&n.dump.length>1024,u&&(n.dump&&lN===n.dump.charCodeAt(0)?h+="?":h+="? "),h+=n.dump,u&&(h+=jG(n,e)),ap(n,e+1,d,!0,u)&&(n.dump&&lN===n.dump.charCodeAt(0)?h+=":":h+=": ",h+=n.dump,s+=h));n.tag=r,n.dump=s||"{}"}function Xhe(n,e,t){var i,s,r,o,a,l;for(s=t?n.explicitTypes:n.implicitTypes,r=0,o=s.length;r<o;r+=1)if(a=s[r],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof e=="object"&&e instanceof a.instanceOf)&&(!a.predicate||a.predicate(e))){if(t?a.multi&&a.representName?n.tag=a.representName(e):n.tag=a.tag:n.tag="?",a.represent){if(l=n.styleMap[a.tag]||a.defaultStyle,BEe.call(a.represent)==="[object Function]")i=a.represent(e,l);else if(WEe.call(a.represent,l))i=a.represent[l](e,l);else throw new ja("!<"+a.tag+'> tag resolver accepts not "'+l+'" style');n.dump=i}return!0}return!1}function ap(n,e,t,i,s,r,o){n.tag=null,n.dump=t,Xhe(n,t,!1)||Xhe(n,t,!0);var a=BEe.call(n.dump),l=i,c;i&&(i=n.flowLevel<0||n.flowLevel>e);var d=a==="[object Object]"||a==="[object Array]",u,h;if(d&&(u=n.duplicates.indexOf(t),h=u!==-1),(n.tag!==null&&n.tag!=="?"||h||n.indent!==2&&e>0)&&(s=!1),h&&n.usedDuplicates[u])n.dump="*ref_"+u;else{if(d&&h&&!n.usedDuplicates[u]&&(n.usedDuplicates[u]=!0),a==="[object Object]")i&&Object.keys(n.dump).length!==0?(hkt(n,e,n.dump,s),h&&(n.dump="&ref_"+u+n.dump)):(ukt(n,e,n.dump),h&&(n.dump="&ref_"+u+" "+n.dump));else if(a==="[object Array]")i&&n.dump.length!==0?(n.noArrayIndent&&!o&&e>0?Zhe(n,e-1,n.dump,s):Zhe(n,e,n.dump,s),h&&(n.dump="&ref_"+u+n.dump)):(dkt(n,e,n.dump),h&&(n.dump="&ref_"+u+" "+n.dump));else if(a==="[object String]")n.tag!=="?"&&akt(n,n.dump,e,r,l);else{if(a==="[object Undefined]")return!1;if(n.skipInvalid)return!1;throw new ja("unacceptable kind of an object to dump "+a)}n.tag!==null&&n.tag!=="?"&&(c=encodeURI(n.tag[0]==="!"?n.tag.slice(1):n.tag).replace(/!/g,"%21"),n.tag[0]==="!"?c="!"+c:c.slice(0,18)==="tag:yaml.org,2002:"?c="!!"+c.slice(18):c="!<"+c+">",n.dump=c+" "+n.dump)}return!0}function fkt(n,e){var t=[],i=[],s,r;for(qG(n,t,i),s=0,r=i.length;s<r;s+=1)e.duplicates.push(t[i[s]]);e.usedDuplicates=new Array(r)}function qG(n,e,t){var i,s,r;if(n!==null&&typeof n=="object")if(s=e.indexOf(n),s!==-1)t.indexOf(s)===-1&&t.push(s);else if(e.push(n),Array.isArray(n))for(s=0,r=n.length;s<r;s+=1)qG(n[s],e,t);else for(i=Object.keys(n),s=0,r=i.length;s<r;s+=1)qG(n[i[s]],e,t)}function gkt(n,e){e=e||{};var t=new ikt(e);t.noRefs||fkt(n,t);var i=n;return t.replacer&&(i=t.replacer.call({"":i},"",i)),ap(t,0,i,!0,!0)?t.dump+`
`:""}var pkt=gkt,mkt={dump:pkt};function Ree(n,e){return function(){throw new Error("Function yaml."+n+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}var _kt=Ao,vkt=dEe,bkt=gEe,wkt=bEe,Ckt=wEe,ykt=Iee,Skt=FEe.load,xkt=FEe.loadAll,Lkt=mkt.dump,kkt=ja,Ekt={binary:LEe,float:vEe,map:fEe,null:pEe,pairs:EEe,set:IEe,timestamp:SEe,bool:mEe,int:_Ee,merge:xEe,omap:kEe,seq:hEe,str:uEe},Ikt=Ree("safeLoad","load"),Dkt=Ree("safeLoadAll","loadAll"),Nkt=Ree("safeDump","dump"),Tkt={Type:_kt,Schema:vkt,FAILSAFE_SCHEMA:bkt,JSON_SCHEMA:wkt,CORE_SCHEMA:Ckt,DEFAULT_SCHEMA:ykt,load:Skt,loadAll:xkt,dump:Lkt,YAMLException:kkt,types:Ekt,safeLoad:Ikt,safeLoadAll:Dkt,safeDump:Nkt},YEe={exports:{}},UA={exports:{}},Qhe;function Rkt(){return Qhe||(Qhe=1,function(n,e){(function(){var t=this,i=t._,s={},r=Array.prototype,o=Object.prototype,a=Function.prototype,l=r.push,c=r.slice,d=r.concat,u=o.toString,h=o.hasOwnProperty,f=r.forEach,g=r.map,p=r.reduce,_=r.reduceRight,w=r.filter,b=r.every,y=r.some,S=r.indexOf,x=r.lastIndexOf,E=Array.isArray,D=Object.keys,N=a.bind,I=function(P){if(P instanceof I)return P;if(!(this instanceof I))return new I(P);this._wrapped=P};n.exports&&(e=n.exports=I),e._=I,I.VERSION="1.6.0";var H=I.each=I.forEach=function(P,$,Z){if(P==null)return P;if(f&&P.forEach===f)P.forEach($,Z);else if(P.length===+P.length){for(var ae=0,Le=P.length;ae<Le;ae++)if($.call(Z,P[ae],ae,P)===s)return}else for(var Ae=I.keys(P),ae=0,Le=Ae.length;ae<Le;ae++)if($.call(Z,P[Ae[ae]],Ae[ae],P)===s)return;return P};I.map=I.collect=function(P,$,Z){var ae=[];return P==null?ae:g&&P.map===g?P.map($,Z):(H(P,function(Le,Ae,Ue){ae.push($.call(Z,Le,Ae,Ue))}),ae)};var z="Reduce of empty array with no initial value";I.reduce=I.foldl=I.inject=function(P,$,Z,ae){var Le=arguments.length>2;if(P==null&&(P=[]),p&&P.reduce===p)return ae&&($=I.bind($,ae)),Le?P.reduce($,Z):P.reduce($);if(H(P,function(Ae,Ue,qe){Le?Z=$.call(ae,Z,Ae,Ue,qe):(Z=Ae,Le=!0)}),!Le)throw new TypeError(z);return Z},I.reduceRight=I.foldr=function(P,$,Z,ae){var Le=arguments.length>2;if(P==null&&(P=[]),_&&P.reduceRight===_)return ae&&($=I.bind($,ae)),Le?P.reduceRight($,Z):P.reduceRight($);var Ae=P.length;if(Ae!==+Ae){var Ue=I.keys(P);Ae=Ue.length}if(H(P,function(qe,vt,Ot){vt=Ue?Ue[--Ae]:--Ae,Le?Z=$.call(ae,Z,P[vt],vt,Ot):(Z=P[vt],Le=!0)}),!Le)throw new TypeError(z);return Z},I.find=I.detect=function(P,$,Z){var ae;return G(P,function(Le,Ae,Ue){if($.call(Z,Le,Ae,Ue))return ae=Le,!0}),ae},I.filter=I.select=function(P,$,Z){var ae=[];return P==null?ae:w&&P.filter===w?P.filter($,Z):(H(P,function(Le,Ae,Ue){$.call(Z,Le,Ae,Ue)&&ae.push(Le)}),ae)},I.reject=function(P,$,Z){return I.filter(P,function(ae,Le,Ae){return!$.call(Z,ae,Le,Ae)},Z)},I.every=I.all=function(P,$,Z){$||($=I.identity);var ae=!0;return P==null?ae:b&&P.every===b?P.every($,Z):(H(P,function(Le,Ae,Ue){if(!(ae=ae&&$.call(Z,Le,Ae,Ue)))return s}),!!ae)};var G=I.some=I.any=function(P,$,Z){$||($=I.identity);var ae=!1;return P==null?ae:y&&P.some===y?P.some($,Z):(H(P,function(Le,Ae,Ue){if(ae||(ae=$.call(Z,Le,Ae,Ue)))return s}),!!ae)};I.contains=I.include=function(P,$){return P==null?!1:S&&P.indexOf===S?P.indexOf($)!=-1:G(P,function(Z){return Z===$})},I.invoke=function(P,$){var Z=c.call(arguments,2),ae=I.isFunction($);return I.map(P,function(Le){return(ae?$:Le[$]).apply(Le,Z)})},I.pluck=function(P,$){return I.map(P,I.property($))},I.where=function(P,$){return I.filter(P,I.matches($))},I.findWhere=function(P,$){return I.find(P,I.matches($))},I.max=function(P,$,Z){if(!$&&I.isArray(P)&&P[0]===+P[0]&&P.length<65535)return Math.max.apply(Math,P);var ae=-1/0,Le=-1/0;return H(P,function(Ae,Ue,qe){var vt=$?$.call(Z,Ae,Ue,qe):Ae;vt>Le&&(ae=Ae,Le=vt)}),ae},I.min=function(P,$,Z){if(!$&&I.isArray(P)&&P[0]===+P[0]&&P.length<65535)return Math.min.apply(Math,P);var ae=1/0,Le=1/0;return H(P,function(Ae,Ue,qe){var vt=$?$.call(Z,Ae,Ue,qe):Ae;vt<Le&&(ae=Ae,Le=vt)}),ae},I.shuffle=function(P){var $,Z=0,ae=[];return H(P,function(Le){$=I.random(Z++),ae[Z-1]=ae[$],ae[$]=Le}),ae},I.sample=function(P,$,Z){return $==null||Z?(P.length!==+P.length&&(P=I.values(P)),P[I.random(P.length-1)]):I.shuffle(P).slice(0,Math.max(0,$))};var J=function(P){return P==null?I.identity:I.isFunction(P)?P:I.property(P)};I.sortBy=function(P,$,Z){return $=J($),I.pluck(I.map(P,function(ae,Le,Ae){return{value:ae,index:Le,criteria:$.call(Z,ae,Le,Ae)}}).sort(function(ae,Le){var Ae=ae.criteria,Ue=Le.criteria;if(Ae!==Ue){if(Ae>Ue||Ae===void 0)return 1;if(Ae<Ue||Ue===void 0)return-1}return ae.index-Le.index}),"value")};var j=function(P){return function($,Z,ae){var Le={};return Z=J(Z),H($,function(Ae,Ue){var qe=Z.call(ae,Ae,Ue,$);P(Le,qe,Ae)}),Le}};I.groupBy=j(function(P,$,Z){I.has(P,$)?P[$].push(Z):P[$]=[Z]}),I.indexBy=j(function(P,$,Z){P[$]=Z}),I.countBy=j(function(P,$){I.has(P,$)?P[$]++:P[$]=1}),I.sortedIndex=function(P,$,Z,ae){Z=J(Z);for(var Le=Z.call(ae,$),Ae=0,Ue=P.length;Ae<Ue;){var qe=Ae+Ue>>>1;Z.call(ae,P[qe])<Le?Ae=qe+1:Ue=qe}return Ae},I.toArray=function(P){return P?I.isArray(P)?c.call(P):P.length===+P.length?I.map(P,I.identity):I.values(P):[]},I.size=function(P){return P==null?0:P.length===+P.length?P.length:I.keys(P).length},I.first=I.head=I.take=function(P,$,Z){if(P!=null)return $==null||Z?P[0]:$<0?[]:c.call(P,0,$)},I.initial=function(P,$,Z){return c.call(P,0,P.length-($==null||Z?1:$))},I.last=function(P,$,Z){if(P!=null)return $==null||Z?P[P.length-1]:c.call(P,Math.max(P.length-$,0))},I.rest=I.tail=I.drop=function(P,$,Z){return c.call(P,$==null||Z?1:$)},I.compact=function(P){return I.filter(P,I.identity)};var ne=function(P,$,Z){return $&&I.every(P,I.isArray)?d.apply(Z,P):(H(P,function(ae){I.isArray(ae)||I.isArguments(ae)?$?l.apply(Z,ae):ne(ae,$,Z):Z.push(ae)}),Z)};I.flatten=function(P,$){return ne(P,$,[])},I.without=function(P){return I.difference(P,c.call(arguments,1))},I.partition=function(P,$){var Z=[],ae=[];return H(P,function(Le){($(Le)?Z:ae).push(Le)}),[Z,ae]},I.uniq=I.unique=function(P,$,Z,ae){I.isFunction($)&&(ae=Z,Z=$,$=!1);var Le=Z?I.map(P,Z,ae):P,Ae=[],Ue=[];return H(Le,function(qe,vt){($?!vt||Ue[Ue.length-1]!==qe:!I.contains(Ue,qe))&&(Ue.push(qe),Ae.push(P[vt]))}),Ae},I.union=function(){return I.uniq(I.flatten(arguments,!0))},I.intersection=function(P){var $=c.call(arguments,1);return I.filter(I.uniq(P),function(Z){return I.every($,function(ae){return I.contains(ae,Z)})})},I.difference=function(P){var $=d.apply(r,c.call(arguments,1));return I.filter(P,function(Z){return!I.contains($,Z)})},I.zip=function(){for(var P=I.max(I.pluck(arguments,"length").concat(0)),$=new Array(P),Z=0;Z<P;Z++)$[Z]=I.pluck(arguments,""+Z);return $},I.object=function(P,$){if(P==null)return{};for(var Z={},ae=0,Le=P.length;ae<Le;ae++)$?Z[P[ae]]=$[ae]:Z[P[ae][0]]=P[ae][1];return Z},I.indexOf=function(P,$,Z){if(P==null)return-1;var ae=0,Le=P.length;if(Z)if(typeof Z=="number")ae=Z<0?Math.max(0,Le+Z):Z;else return ae=I.sortedIndex(P,$),P[ae]===$?ae:-1;if(S&&P.indexOf===S)return P.indexOf($,Z);for(;ae<Le;ae++)if(P[ae]===$)return ae;return-1},I.lastIndexOf=function(P,$,Z){if(P==null)return-1;var ae=Z!=null;if(x&&P.lastIndexOf===x)return ae?P.lastIndexOf($,Z):P.lastIndexOf($);for(var Le=ae?Z:P.length;Le--;)if(P[Le]===$)return Le;return-1},I.range=function(P,$,Z){arguments.length<=1&&($=P||0,P=0),Z=arguments[2]||1;for(var ae=Math.max(Math.ceil(($-P)/Z),0),Le=0,Ae=new Array(ae);Le<ae;)Ae[Le++]=P,P+=Z;return Ae};var oe=function(){};I.bind=function(P,$){var Z,ae;if(N&&P.bind===N)return N.apply(P,c.call(arguments,1));if(!I.isFunction(P))throw new TypeError;return Z=c.call(arguments,2),ae=function(){if(!(this instanceof ae))return P.apply($,Z.concat(c.call(arguments)));oe.prototype=P.prototype;var Le=new oe;oe.prototype=null;var Ae=P.apply(Le,Z.concat(c.call(arguments)));return Object(Ae)===Ae?Ae:Le}},I.partial=function(P){var $=c.call(arguments,1);return function(){for(var Z=0,ae=$.slice(),Le=0,Ae=ae.length;Le<Ae;Le++)ae[Le]===I&&(ae[Le]=arguments[Z++]);for(;Z<arguments.length;)ae.push(arguments[Z++]);return P.apply(this,ae)}},I.bindAll=function(P){var $=c.call(arguments,1);if($.length===0)throw new Error("bindAll must be passed function names");return H($,function(Z){P[Z]=I.bind(P[Z],P)}),P},I.memoize=function(P,$){var Z={};return $||($=I.identity),function(){var ae=$.apply(this,arguments);return I.has(Z,ae)?Z[ae]:Z[ae]=P.apply(this,arguments)}},I.delay=function(P,$){var Z=c.call(arguments,2);return setTimeout(function(){return P.apply(null,Z)},$)},I.defer=function(P){return I.delay.apply(I,[P,1].concat(c.call(arguments,1)))},I.throttle=function(P,$,Z){var ae,Le,Ae,Ue=null,qe=0;Z||(Z={});var vt=function(){qe=Z.leading===!1?0:I.now(),Ue=null,Ae=P.apply(ae,Le),ae=Le=null};return function(){var Ot=I.now();!qe&&Z.leading===!1&&(qe=Ot);var on=$-(Ot-qe);return ae=this,Le=arguments,on<=0?(clearTimeout(Ue),Ue=null,qe=Ot,Ae=P.apply(ae,Le),ae=Le=null):!Ue&&Z.trailing!==!1&&(Ue=setTimeout(vt,on)),Ae}},I.debounce=function(P,$,Z){var ae,Le,Ae,Ue,qe,vt=function(){var Ot=I.now()-Ue;Ot<$?ae=setTimeout(vt,$-Ot):(ae=null,Z||(qe=P.apply(Ae,Le),Ae=Le=null))};return function(){Ae=this,Le=arguments,Ue=I.now();var Ot=Z&&!ae;return ae||(ae=setTimeout(vt,$)),Ot&&(qe=P.apply(Ae,Le),Ae=Le=null),qe}},I.once=function(P){var $=!1,Z;return function(){return $||($=!0,Z=P.apply(this,arguments),P=null),Z}},I.wrap=function(P,$){return I.partial($,P)},I.compose=function(){var P=arguments;return function(){for(var $=arguments,Z=P.length-1;Z>=0;Z--)$=[P[Z].apply(this,$)];return $[0]}},I.after=function(P,$){return function(){if(--P<1)return $.apply(this,arguments)}},I.keys=function(P){if(!I.isObject(P))return[];if(D)return D(P);var $=[];for(var Z in P)I.has(P,Z)&&$.push(Z);return $},I.values=function(P){for(var $=I.keys(P),Z=$.length,ae=new Array(Z),Le=0;Le<Z;Le++)ae[Le]=P[$[Le]];return ae},I.pairs=function(P){for(var $=I.keys(P),Z=$.length,ae=new Array(Z),Le=0;Le<Z;Le++)ae[Le]=[$[Le],P[$[Le]]];return ae},I.invert=function(P){for(var $={},Z=I.keys(P),ae=0,Le=Z.length;ae<Le;ae++)$[P[Z[ae]]]=Z[ae];return $},I.functions=I.methods=function(P){var $=[];for(var Z in P)I.isFunction(P[Z])&&$.push(Z);return $.sort()},I.extend=function(P){return H(c.call(arguments,1),function($){if($)for(var Z in $)P[Z]=$[Z]}),P},I.pick=function(P){var $={},Z=d.apply(r,c.call(arguments,1));return H(Z,function(ae){ae in P&&($[ae]=P[ae])}),$},I.omit=function(P){var $={},Z=d.apply(r,c.call(arguments,1));for(var ae in P)I.contains(Z,ae)||($[ae]=P[ae]);return $},I.defaults=function(P){return H(c.call(arguments,1),function($){if($)for(var Z in $)P[Z]===void 0&&(P[Z]=$[Z])}),P},I.clone=function(P){return I.isObject(P)?I.isArray(P)?P.slice():I.extend({},P):P},I.tap=function(P,$){return $(P),P};var ve=function(P,$,Z,ae){if(P===$)return P!==0||1/P==1/$;if(P==null||$==null)return P===$;P instanceof I&&(P=P._wrapped),$ instanceof I&&($=$._wrapped);var Le=u.call(P);if(Le!=u.call($))return!1;switch(Le){case"[object String]":return P==String($);case"[object Number]":return P!=+P?$!=+$:P==0?1/P==1/$:P==+$;case"[object Date]":case"[object Boolean]":return+P==+$;case"[object RegExp]":return P.source==$.source&&P.global==$.global&&P.multiline==$.multiline&&P.ignoreCase==$.ignoreCase}if(typeof P!="object"||typeof $!="object")return!1;for(var Ae=Z.length;Ae--;)if(Z[Ae]==P)return ae[Ae]==$;var Ue=P.constructor,qe=$.constructor;if(Ue!==qe&&!(I.isFunction(Ue)&&Ue instanceof Ue&&I.isFunction(qe)&&qe instanceof qe)&&"constructor"in P&&"constructor"in $)return!1;Z.push(P),ae.push($);var vt=0,Ot=!0;if(Le=="[object Array]"){if(vt=P.length,Ot=vt==$.length,Ot)for(;vt--&&(Ot=ve(P[vt],$[vt],Z,ae)););}else{for(var on in P)if(I.has(P,on)&&(vt++,!(Ot=I.has($,on)&&ve(P[on],$[on],Z,ae))))break;if(Ot){for(on in $)if(I.has($,on)&&!vt--)break;Ot=!vt}}return Z.pop(),ae.pop(),Ot};I.isEqual=function(P,$){return ve(P,$,[],[])},I.isEmpty=function(P){if(P==null)return!0;if(I.isArray(P)||I.isString(P))return P.length===0;for(var $ in P)if(I.has(P,$))return!1;return!0},I.isElement=function(P){return!!(P&&P.nodeType===1)},I.isArray=E||function(P){return u.call(P)=="[object Array]"},I.isObject=function(P){return P===Object(P)},H(["Arguments","Function","String","Number","Date","RegExp"],function(P){I["is"+P]=function($){return u.call($)=="[object "+P+"]"}}),I.isArguments(arguments)||(I.isArguments=function(P){return!!(P&&I.has(P,"callee"))}),typeof/./!="function"&&(I.isFunction=function(P){return typeof P=="function"}),I.isFinite=function(P){return isFinite(P)&&!isNaN(parseFloat(P))},I.isNaN=function(P){return I.isNumber(P)&&P!=+P},I.isBoolean=function(P){return P===!0||P===!1||u.call(P)=="[object Boolean]"},I.isNull=function(P){return P===null},I.isUndefined=function(P){return P===void 0},I.has=function(P,$){return h.call(P,$)},I.noConflict=function(){return t._=i,this},I.identity=function(P){return P},I.constant=function(P){return function(){return P}},I.property=function(P){return function($){return $[P]}},I.matches=function(P){return function($){if($===P)return!0;for(var Z in P)if(P[Z]!==$[Z])return!1;return!0}},I.times=function(P,$,Z){for(var ae=Array(Math.max(0,P)),Le=0;Le<P;Le++)ae[Le]=$.call(Z,Le);return ae},I.random=function(P,$){return $==null&&($=P,P=0),P+Math.floor(Math.random()*($-P+1))},I.now=Date.now||function(){return new Date().getTime()};var te={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};te.unescape=I.invert(te.escape);var ce={escape:new RegExp("["+I.keys(te.escape).join("")+"]","g"),unescape:new RegExp("("+I.keys(te.unescape).join("|")+")","g")};I.each(["escape","unescape"],function(P){I[P]=function($){return $==null?"":(""+$).replace(ce[P],function(Z){return te[P][Z]})}}),I.result=function(P,$){if(P!=null){var Z=P[$];return I.isFunction(Z)?Z.call(P):Z}},I.mixin=function(P){H(I.functions(P),function($){var Z=I[$]=P[$];I.prototype[$]=function(){var ae=[this._wrapped];return l.apply(ae,arguments),dt.call(this,Z.apply(I,ae))}})};var Ie=0;I.uniqueId=function(P){var $=++Ie+"";return P?P+$:$},I.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var Ce=/(.)^/,it={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},He=/\\|'|\r|\n|\t|\u2028|\u2029/g;I.template=function(P,$,Z){var ae;Z=I.defaults({},Z,I.templateSettings);var Le=new RegExp([(Z.escape||Ce).source,(Z.interpolate||Ce).source,(Z.evaluate||Ce).source].join("|")+"|$","g"),Ae=0,Ue="__p+='";P.replace(Le,function(vt,Ot,on,Cs,Rn){return Ue+=P.slice(Ae,Rn).replace(He,function(ya){return"\\"+it[ya]}),Ot&&(Ue+=`'+
((__t=(`+Ot+`))==null?'':_.escape(__t))+
'`),on&&(Ue+=`'+
((__t=(`+on+`))==null?'':__t)+
'`),Cs&&(Ue+=`';
`+Cs+`
__p+='`),Ae=Rn+vt.length,vt}),Ue+=`';
`,Z.variable||(Ue=`with(obj||{}){
`+Ue+`}
`),Ue=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+Ue+`return __p;
`;try{ae=new Function(Z.variable||"obj","_",Ue)}catch(vt){throw vt.source=Ue,vt}if($)return ae($,I);var qe=function(vt){return ae.call(this,vt,I)};return qe.source="function("+(Z.variable||"obj")+`){
`+Ue+"}",qe},I.chain=function(P){return I(P).chain()};var dt=function(P){return this._chain?I(P).chain():P};I.mixin(I),H(["pop","push","reverse","shift","sort","splice","unshift"],function(P){var $=r[P];I.prototype[P]=function(){var Z=this._wrapped;return $.apply(Z,arguments),(P=="shift"||P=="splice")&&Z.length===0&&delete Z[0],dt.call(this,Z)}}),H(["concat","join","slice"],function(P){var $=r[P];I.prototype[P]=function(){return dt.call(this,$.apply(this._wrapped,arguments))}}),I.extend(I.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(KC)}(UA,UA.exports)),UA.exports}/*! check-type@v0.4.11 - 2014-06-28 */(function(n){(function(){var e,t,i;e=function(s){var r,o={};return r=function(a){var l={};return l.is=function(c){var d;if(!s.isString(c))throw new Error("Provided type is not a string");if(d=o["is"+c.toLowerCase()],!s.isFunction(d))throw new Error("Unsupported type",c);return d(a)},l.is.not=function(c){return!this(c)},l.has=function(c){var d,u,h=!0;if(!s.isString(c))throw new Error("Provided path is not a string");return d=c.split("."),u=a,d.forEach(function(f){h&&s.isObject(u)&&!s.isUndefined(u[f])?u=u[f]:h=!1}),h},l.matches=function(c){var d=!0;if(!s.isObject(c))throw new Error("Provided stucture is not an object");return s.isObject(a)?(s.each(c,function(u,h){r(a[h]).is.not(u)&&(d=!1)}),d):!1},l},r.init=function(a,l){var c,d;return s.isUndefined(a)?(a=s,d=s.without(s.functions(a),"isEqual")):d=s.functions(a),c=s.reduce(d,function(u,h){return u[h]=a[h],u},{}),Object.keys(c).forEach(function(u){u.match(/^is[A-Z]/)&&(s.isUndefined(o[u.toLowerCase()])||l)&&(o[u.toLowerCase()]=c[u])}),this},r.clear=function(){return o={},this},r},n.exports=e(Rkt()),typeof window<"u"&&(t=e(window._),i=function(){var s=window.check;return function(){return t===window.check&&(window.check=s),t}}(),t.noConflict=i,window.check=t)})()})(YEe);var Akt=YEe.exports;const Mkt=GG(Akt),Ov=Mkt.init(),Pkt=/(\d+):\d+/u;class Okt{constructor(e){this.options=Object.assign({log:!1,structure:!1,onWarning:null,writeJson:!1},e),this.logs=[],this.nonValidPaths=[],this.inValidFilesCount=0}errored(e){this.logs.push(e)}validateStructure(e,t,i){let s=[],r="",o;return i=i||"",Object.keys(t).forEach(a=>{const l=a.endsWith("?"),c=a.replace(/\?$/u,"");r=i,Ov(t).is("Array")||(r+=(i.length>0?".":"")+c);const d=t[a];d instanceof Array?Ov(e).has(c)&&Ov(e[c]).is("Array")?e[c].forEach((u,h)=>{d.length>1?o=this.validateStructure([u],[d[h]],r+"["+h+"]"):o=this.validateStructure([u],d,r+"["+h+"]"),s=s.concat(o)}):l||s.push(r):typeof d=="string"?(!Ov(e).has(c)&&l?o=!1:o=!((Ov(t).is("Array")||Ov(e).has(c))&&Ov(e[c]).is(d)),s.push(o?r:!1)):typeof d=="object"&&d!==null&&(l||(o=this.validateStructure(e[c],d,r),s=s.concat(o)))}),s.filter(function(l){return l!==!1})}loadData(e,t){const i=r=>{this.errored(e+" > "+r),typeof this.options.onWarning=="function"&&this.options.onWarning.call(this,r,e)};let s;try{if(s=Tkt.load(t,{onWarning:i}),!s)return i("File is empty"),null}catch(r){const o=r.message.match(Pkt),a=o&&o.length>0?o[1]:"unknown";return console.error(`${e}:${a}
${r.message}`),i(`Failed to load the Yaml file "${e}:${a}"
${r.message}`),null}return s}loadFile(e){let t;const i=this;try{t=O6.readFileSync(e,"utf8")}catch{return i.errored(e+" > No such file or directory"),null}return this.loadData(e,t)}checkFile(e){const t=this.loadFile(e);if(!t)return 1;if(this.options.writeJson){const i=JSON.stringify(t,null,"  ");O6.writeFileSync(e.replace(/\.y(a)?ml$/iu,".json"),i,"utf8")}if(this.options.structure){const i=this.validateStructure(t,this.options.structure);if(i.length>0)return this.errored(e+" is not following the correct structure, missing:"),this.errored(i.join(`
`)),this.nonValidPaths=this.nonValidPaths.concat(i),1}return 0}validate(e){const t=this;this.inValidFilesCount=e.map(i=>t.checkFile(i)).reduce((i,s)=>i+s,t.inValidFilesCount)}report(){this.inValidFilesCount>0&&this.errored("Yaml format related errors in "+this.inValidFilesCount+" files");const e=this.nonValidPaths.length;return this.errored("Total of "+e+" structure validation error(s)"),typeof this.options.log=="string"&&O6.writeFileSync(this.options.log,this.logs.join(`
`),"utf8"),this.inValidFilesCount}}var i4={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */i4.exports;(function(n,e){(function(){var t,i="4.17.21",s=200,r="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",c=500,d="__lodash_placeholder__",u=1,h=2,f=4,g=1,p=2,_=1,w=2,b=4,y=8,S=16,x=32,E=64,D=128,N=256,I=512,H=30,z="...",G=800,J=16,j=1,ne=2,oe=3,ve=1/0,te=9007199254740991,ce=17976931348623157e292,Ie=NaN,Ce=4294967295,it=Ce-1,He=Ce>>>1,dt=[["ary",D],["bind",_],["bindKey",w],["curry",y],["curryRight",S],["flip",I],["partial",x],["partialRight",E],["rearg",N]],P="[object Arguments]",$="[object Array]",Z="[object AsyncFunction]",ae="[object Boolean]",Le="[object Date]",Ae="[object DOMException]",Ue="[object Error]",qe="[object Function]",vt="[object GeneratorFunction]",Ot="[object Map]",on="[object Number]",Cs="[object Null]",Rn="[object Object]",ya="[object Promise]",es="[object Proxy]",or="[object RegExp]",Ur="[object Set]",jc="[object String]",$o="[object Symbol]",Hd="[object Undefined]",Sr="[object WeakMap]",dl="[object WeakSet]",xr="[object ArrayBuffer]",ul="[object DataView]",$r="[object Float32Array]",jo="[object Float64Array]",ar="[object Int8Array]",ho="[object Int16Array]",Ko="[object Int32Array]",qn="[object Uint8Array]",qs="[object Uint8ClampedArray]",Lr="[object Uint16Array]",fo="[object Uint32Array]",ht=/\b__p \+= '';/g,zi=/\b(__p \+=) '' \+/g,hn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,go=/&(?:amp|lt|gt|quot|#39);/g,Qi=/[&<>"']/g,Sa=RegExp(go.source),uv=RegExp(Qi.source),iC=/<%-([\s\S]+?)%>/g,hv=/<%([\s\S]+?)%>/g,Kt=/<%=([\s\S]+?)%>/g,U=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,q=/^\w*$/,Q=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,se=/[\\^$.*+?()[\]{}|]/g,de=RegExp(se.source),be=/^\s+/,Ne=/\s/,tt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ut=/\{\n\/\* \[wrapped with (.+)\] \*/,Ut=/,? & /,Si=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ii=/[()=,{}\[\]\/\s]/,yn=/\\(\\)?/g,Sn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,jr=/\w*$/,xa=/^[-+]0x[0-9a-f]+$/i,fv=/^0b[01]+$/i,Et=/^\[object .+?Constructor\]$/,fe=/^0o[0-7]+$/i,et=/^(?:0|[1-9]\d*)$/,Ct=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,bn=/($^)/,Kr=/['\n\r\u2028\u2029\\]/g,Ms="\\ud800-\\udfff",qo="\\u0300-\\u036f",Kc="\\ufe20-\\ufe2f",gv="\\u20d0-\\u20ff",qr=qo+Kc+gv,Jx="\\u2700-\\u27bf",eL="a-z\\xdf-\\xf6\\xf8-\\xff",LIe="\\xac\\xb1\\xd7\\xf7",kIe="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",EIe="\\u2000-\\u206f",IIe=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Xee="A-Z\\xc0-\\xd6\\xd8-\\xde",Qee="\\ufe0e\\ufe0f",Jee=LIe+kIe+EIe+IIe,_W="[']",DIe="["+Ms+"]",ete="["+Jee+"]",_T="["+qr+"]",tte="\\d+",NIe="["+Jx+"]",ite="["+eL+"]",nte="[^"+Ms+Jee+tte+Jx+eL+Xee+"]",vW="\\ud83c[\\udffb-\\udfff]",TIe="(?:"+_T+"|"+vW+")",ste="[^"+Ms+"]",bW="(?:\\ud83c[\\udde6-\\uddff]){2}",wW="[\\ud800-\\udbff][\\udc00-\\udfff]",nC="["+Xee+"]",rte="\\u200d",ote="(?:"+ite+"|"+nte+")",RIe="(?:"+nC+"|"+nte+")",ate="(?:"+_W+"(?:d|ll|m|re|s|t|ve))?",lte="(?:"+_W+"(?:D|LL|M|RE|S|T|VE))?",cte=TIe+"?",dte="["+Qee+"]?",AIe="(?:"+rte+"(?:"+[ste,bW,wW].join("|")+")"+dte+cte+")*",MIe="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",PIe="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ute=dte+cte+AIe,OIe="(?:"+[NIe,bW,wW].join("|")+")"+ute,FIe="(?:"+[ste+_T+"?",_T,bW,wW,DIe].join("|")+")",BIe=RegExp(_W,"g"),WIe=RegExp(_T,"g"),CW=RegExp(vW+"(?="+vW+")|"+FIe+ute,"g"),HIe=RegExp([nC+"?"+ite+"+"+ate+"(?="+[ete,nC,"$"].join("|")+")",RIe+"+"+lte+"(?="+[ete,nC+ote,"$"].join("|")+")",nC+"?"+ote+"+"+ate,nC+"+"+lte,PIe,MIe,tte,OIe].join("|"),"g"),VIe=RegExp("["+rte+Ms+qr+Qee+"]"),zIe=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,UIe=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],$Ie=-1,ls={};ls[$r]=ls[jo]=ls[ar]=ls[ho]=ls[Ko]=ls[qn]=ls[qs]=ls[Lr]=ls[fo]=!0,ls[P]=ls[$]=ls[xr]=ls[ae]=ls[ul]=ls[Le]=ls[Ue]=ls[qe]=ls[Ot]=ls[on]=ls[Rn]=ls[or]=ls[Ur]=ls[jc]=ls[Sr]=!1;var ts={};ts[P]=ts[$]=ts[xr]=ts[ul]=ts[ae]=ts[Le]=ts[$r]=ts[jo]=ts[ar]=ts[ho]=ts[Ko]=ts[Ot]=ts[on]=ts[Rn]=ts[or]=ts[Ur]=ts[jc]=ts[$o]=ts[qn]=ts[qs]=ts[Lr]=ts[fo]=!0,ts[Ue]=ts[qe]=ts[Sr]=!1;var jIe={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},KIe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},qIe={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},GIe={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},YIe=parseFloat,ZIe=parseInt,hte=typeof KC=="object"&&KC&&KC.Object===Object&&KC,XIe=typeof self=="object"&&self&&self.Object===Object&&self,po=hte||XIe||Function("return this")(),yW=e&&!e.nodeType&&e,pv=yW&&!0&&n&&!n.nodeType&&n,fte=pv&&pv.exports===yW,SW=fte&&hte.process,qc=function(){try{var pe=pv&&pv.require&&pv.require("util").types;return pe||SW&&SW.binding&&SW.binding("util")}catch{}}(),gte=qc&&qc.isArrayBuffer,pte=qc&&qc.isDate,mte=qc&&qc.isMap,_te=qc&&qc.isRegExp,vte=qc&&qc.isSet,bte=qc&&qc.isTypedArray;function ec(pe,Pe,De){switch(De.length){case 0:return pe.call(Pe);case 1:return pe.call(Pe,De[0]);case 2:return pe.call(Pe,De[0],De[1]);case 3:return pe.call(Pe,De[0],De[1],De[2])}return pe.apply(Pe,De)}function QIe(pe,Pe,De,bt){for(var fi=-1,wn=pe==null?0:pe.length;++fi<wn;){var kr=pe[fi];Pe(bt,kr,De(kr),pe)}return bt}function Gc(pe,Pe){for(var De=-1,bt=pe==null?0:pe.length;++De<bt&&Pe(pe[De],De,pe)!==!1;);return pe}function JIe(pe,Pe){for(var De=pe==null?0:pe.length;De--&&Pe(pe[De],De,pe)!==!1;);return pe}function wte(pe,Pe){for(var De=-1,bt=pe==null?0:pe.length;++De<bt;)if(!Pe(pe[De],De,pe))return!1;return!0}function _p(pe,Pe){for(var De=-1,bt=pe==null?0:pe.length,fi=0,wn=[];++De<bt;){var kr=pe[De];Pe(kr,De,pe)&&(wn[fi++]=kr)}return wn}function vT(pe,Pe){var De=pe==null?0:pe.length;return!!De&&sC(pe,Pe,0)>-1}function xW(pe,Pe,De){for(var bt=-1,fi=pe==null?0:pe.length;++bt<fi;)if(De(Pe,pe[bt]))return!0;return!1}function fs(pe,Pe){for(var De=-1,bt=pe==null?0:pe.length,fi=Array(bt);++De<bt;)fi[De]=Pe(pe[De],De,pe);return fi}function vp(pe,Pe){for(var De=-1,bt=Pe.length,fi=pe.length;++De<bt;)pe[fi+De]=Pe[De];return pe}function LW(pe,Pe,De,bt){var fi=-1,wn=pe==null?0:pe.length;for(bt&&wn&&(De=pe[++fi]);++fi<wn;)De=Pe(De,pe[fi],fi,pe);return De}function eDe(pe,Pe,De,bt){var fi=pe==null?0:pe.length;for(bt&&fi&&(De=pe[--fi]);fi--;)De=Pe(De,pe[fi],fi,pe);return De}function kW(pe,Pe){for(var De=-1,bt=pe==null?0:pe.length;++De<bt;)if(Pe(pe[De],De,pe))return!0;return!1}var tDe=EW("length");function iDe(pe){return pe.split("")}function nDe(pe){return pe.match(Si)||[]}function Cte(pe,Pe,De){var bt;return De(pe,function(fi,wn,kr){if(Pe(fi,wn,kr))return bt=wn,!1}),bt}function bT(pe,Pe,De,bt){for(var fi=pe.length,wn=De+(bt?1:-1);bt?wn--:++wn<fi;)if(Pe(pe[wn],wn,pe))return wn;return-1}function sC(pe,Pe,De){return Pe===Pe?pDe(pe,Pe,De):bT(pe,yte,De)}function sDe(pe,Pe,De,bt){for(var fi=De-1,wn=pe.length;++fi<wn;)if(bt(pe[fi],Pe))return fi;return-1}function yte(pe){return pe!==pe}function Ste(pe,Pe){var De=pe==null?0:pe.length;return De?DW(pe,Pe)/De:Ie}function EW(pe){return function(Pe){return Pe==null?t:Pe[pe]}}function IW(pe){return function(Pe){return pe==null?t:pe[Pe]}}function xte(pe,Pe,De,bt,fi){return fi(pe,function(wn,kr,Gn){De=bt?(bt=!1,wn):Pe(De,wn,kr,Gn)}),De}function rDe(pe,Pe){var De=pe.length;for(pe.sort(Pe);De--;)pe[De]=pe[De].value;return pe}function DW(pe,Pe){for(var De,bt=-1,fi=pe.length;++bt<fi;){var wn=Pe(pe[bt]);wn!==t&&(De=De===t?wn:De+wn)}return De}function NW(pe,Pe){for(var De=-1,bt=Array(pe);++De<pe;)bt[De]=Pe(De);return bt}function oDe(pe,Pe){return fs(Pe,function(De){return[De,pe[De]]})}function Lte(pe){return pe&&pe.slice(0,Dte(pe)+1).replace(be,"")}function tc(pe){return function(Pe){return pe(Pe)}}function TW(pe,Pe){return fs(Pe,function(De){return pe[De]})}function tL(pe,Pe){return pe.has(Pe)}function kte(pe,Pe){for(var De=-1,bt=pe.length;++De<bt&&sC(Pe,pe[De],0)>-1;);return De}function Ete(pe,Pe){for(var De=pe.length;De--&&sC(Pe,pe[De],0)>-1;);return De}function aDe(pe,Pe){for(var De=pe.length,bt=0;De--;)pe[De]===Pe&&++bt;return bt}var lDe=IW(jIe),cDe=IW(KIe);function dDe(pe){return"\\"+GIe[pe]}function uDe(pe,Pe){return pe==null?t:pe[Pe]}function rC(pe){return VIe.test(pe)}function hDe(pe){return zIe.test(pe)}function fDe(pe){for(var Pe,De=[];!(Pe=pe.next()).done;)De.push(Pe.value);return De}function RW(pe){var Pe=-1,De=Array(pe.size);return pe.forEach(function(bt,fi){De[++Pe]=[fi,bt]}),De}function Ite(pe,Pe){return function(De){return pe(Pe(De))}}function bp(pe,Pe){for(var De=-1,bt=pe.length,fi=0,wn=[];++De<bt;){var kr=pe[De];(kr===Pe||kr===d)&&(pe[De]=d,wn[fi++]=De)}return wn}function wT(pe){var Pe=-1,De=Array(pe.size);return pe.forEach(function(bt){De[++Pe]=bt}),De}function gDe(pe){var Pe=-1,De=Array(pe.size);return pe.forEach(function(bt){De[++Pe]=[bt,bt]}),De}function pDe(pe,Pe,De){for(var bt=De-1,fi=pe.length;++bt<fi;)if(pe[bt]===Pe)return bt;return-1}function mDe(pe,Pe,De){for(var bt=De+1;bt--;)if(pe[bt]===Pe)return bt;return bt}function oC(pe){return rC(pe)?vDe(pe):tDe(pe)}function Vd(pe){return rC(pe)?bDe(pe):iDe(pe)}function Dte(pe){for(var Pe=pe.length;Pe--&&Ne.test(pe.charAt(Pe)););return Pe}var _De=IW(qIe);function vDe(pe){for(var Pe=CW.lastIndex=0;CW.test(pe);)++Pe;return Pe}function bDe(pe){return pe.match(CW)||[]}function wDe(pe){return pe.match(HIe)||[]}var CDe=function pe(Pe){Pe=Pe==null?po:aC.defaults(po.Object(),Pe,aC.pick(po,UIe));var De=Pe.Array,bt=Pe.Date,fi=Pe.Error,wn=Pe.Function,kr=Pe.Math,Gn=Pe.Object,AW=Pe.RegExp,yDe=Pe.String,Yc=Pe.TypeError,CT=De.prototype,SDe=wn.prototype,lC=Gn.prototype,yT=Pe["__core-js_shared__"],ST=SDe.toString,An=lC.hasOwnProperty,xDe=0,Nte=function(){var m=/[^.]+$/.exec(yT&&yT.keys&&yT.keys.IE_PROTO||"");return m?"Symbol(src)_1."+m:""}(),xT=lC.toString,LDe=ST.call(Gn),kDe=po._,EDe=AW("^"+ST.call(An).replace(se,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),LT=fte?Pe.Buffer:t,wp=Pe.Symbol,kT=Pe.Uint8Array,Tte=LT?LT.allocUnsafe:t,ET=Ite(Gn.getPrototypeOf,Gn),Rte=Gn.create,Ate=lC.propertyIsEnumerable,IT=CT.splice,Mte=wp?wp.isConcatSpreadable:t,iL=wp?wp.iterator:t,mv=wp?wp.toStringTag:t,DT=function(){try{var m=Cv(Gn,"defineProperty");return m({},"",{}),m}catch{}}(),IDe=Pe.clearTimeout!==po.clearTimeout&&Pe.clearTimeout,DDe=bt&&bt.now!==po.Date.now&&bt.now,NDe=Pe.setTimeout!==po.setTimeout&&Pe.setTimeout,NT=kr.ceil,TT=kr.floor,MW=Gn.getOwnPropertySymbols,TDe=LT?LT.isBuffer:t,Pte=Pe.isFinite,RDe=CT.join,ADe=Ite(Gn.keys,Gn),Er=kr.max,Go=kr.min,MDe=bt.now,PDe=Pe.parseInt,Ote=kr.random,ODe=CT.reverse,PW=Cv(Pe,"DataView"),nL=Cv(Pe,"Map"),OW=Cv(Pe,"Promise"),cC=Cv(Pe,"Set"),sL=Cv(Pe,"WeakMap"),rL=Cv(Gn,"create"),RT=sL&&new sL,dC={},FDe=yv(PW),BDe=yv(nL),WDe=yv(OW),HDe=yv(cC),VDe=yv(sL),AT=wp?wp.prototype:t,oL=AT?AT.valueOf:t,Fte=AT?AT.toString:t;function V(m){if(Ps(m)&&!gi(m)&&!(m instanceof Wi)){if(m instanceof Zc)return m;if(An.call(m,"__wrapped__"))return Bie(m)}return new Zc(m)}var uC=function(){function m(){}return function(C){if(!ys(C))return{};if(Rte)return Rte(C);m.prototype=C;var L=new m;return m.prototype=t,L}}();function MT(){}function Zc(m,C){this.__wrapped__=m,this.__actions__=[],this.__chain__=!!C,this.__index__=0,this.__values__=t}V.templateSettings={escape:iC,evaluate:hv,interpolate:Kt,variable:"",imports:{_:V}},V.prototype=MT.prototype,V.prototype.constructor=V,Zc.prototype=uC(MT.prototype),Zc.prototype.constructor=Zc;function Wi(m){this.__wrapped__=m,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ce,this.__views__=[]}function zDe(){var m=new Wi(this.__wrapped__);return m.__actions__=hl(this.__actions__),m.__dir__=this.__dir__,m.__filtered__=this.__filtered__,m.__iteratees__=hl(this.__iteratees__),m.__takeCount__=this.__takeCount__,m.__views__=hl(this.__views__),m}function UDe(){if(this.__filtered__){var m=new Wi(this);m.__dir__=-1,m.__filtered__=!0}else m=this.clone(),m.__dir__*=-1;return m}function $De(){var m=this.__wrapped__.value(),C=this.__dir__,L=gi(m),R=C<0,O=L?m.length:0,K=iTe(0,O,this.__views__),ie=K.start,le=K.end,me=le-ie,Fe=R?le:ie-1,We=this.__iteratees__,je=We.length,ft=0,Rt=Go(me,this.__takeCount__);if(!L||!R&&O==me&&Rt==me)return aie(m,this.__actions__);var ei=[];e:for(;me--&&ft<Rt;){Fe+=C;for(var xi=-1,ti=m[Fe];++xi<je;){var Ri=We[xi],Ui=Ri.iteratee,sc=Ri.type,Ea=Ui(ti);if(sc==ne)ti=Ea;else if(!Ea){if(sc==j)continue e;break e}}ei[ft++]=ti}return ei}Wi.prototype=uC(MT.prototype),Wi.prototype.constructor=Wi;function _v(m){var C=-1,L=m==null?0:m.length;for(this.clear();++C<L;){var R=m[C];this.set(R[0],R[1])}}function jDe(){this.__data__=rL?rL(null):{},this.size=0}function KDe(m){var C=this.has(m)&&delete this.__data__[m];return this.size-=C?1:0,C}function qDe(m){var C=this.__data__;if(rL){var L=C[m];return L===l?t:L}return An.call(C,m)?C[m]:t}function GDe(m){var C=this.__data__;return rL?C[m]!==t:An.call(C,m)}function YDe(m,C){var L=this.__data__;return this.size+=this.has(m)?0:1,L[m]=rL&&C===t?l:C,this}_v.prototype.clear=jDe,_v.prototype.delete=KDe,_v.prototype.get=qDe,_v.prototype.has=GDe,_v.prototype.set=YDe;function xf(m){var C=-1,L=m==null?0:m.length;for(this.clear();++C<L;){var R=m[C];this.set(R[0],R[1])}}function ZDe(){this.__data__=[],this.size=0}function XDe(m){var C=this.__data__,L=PT(C,m);if(L<0)return!1;var R=C.length-1;return L==R?C.pop():IT.call(C,L,1),--this.size,!0}function QDe(m){var C=this.__data__,L=PT(C,m);return L<0?t:C[L][1]}function JDe(m){return PT(this.__data__,m)>-1}function eNe(m,C){var L=this.__data__,R=PT(L,m);return R<0?(++this.size,L.push([m,C])):L[R][1]=C,this}xf.prototype.clear=ZDe,xf.prototype.delete=XDe,xf.prototype.get=QDe,xf.prototype.has=JDe,xf.prototype.set=eNe;function Lf(m){var C=-1,L=m==null?0:m.length;for(this.clear();++C<L;){var R=m[C];this.set(R[0],R[1])}}function tNe(){this.size=0,this.__data__={hash:new _v,map:new(nL||xf),string:new _v}}function iNe(m){var C=qT(this,m).delete(m);return this.size-=C?1:0,C}function nNe(m){return qT(this,m).get(m)}function sNe(m){return qT(this,m).has(m)}function rNe(m,C){var L=qT(this,m),R=L.size;return L.set(m,C),this.size+=L.size==R?0:1,this}Lf.prototype.clear=tNe,Lf.prototype.delete=iNe,Lf.prototype.get=nNe,Lf.prototype.has=sNe,Lf.prototype.set=rNe;function vv(m){var C=-1,L=m==null?0:m.length;for(this.__data__=new Lf;++C<L;)this.add(m[C])}function oNe(m){return this.__data__.set(m,l),this}function aNe(m){return this.__data__.has(m)}vv.prototype.add=vv.prototype.push=oNe,vv.prototype.has=aNe;function zd(m){var C=this.__data__=new xf(m);this.size=C.size}function lNe(){this.__data__=new xf,this.size=0}function cNe(m){var C=this.__data__,L=C.delete(m);return this.size=C.size,L}function dNe(m){return this.__data__.get(m)}function uNe(m){return this.__data__.has(m)}function hNe(m,C){var L=this.__data__;if(L instanceof xf){var R=L.__data__;if(!nL||R.length<s-1)return R.push([m,C]),this.size=++L.size,this;L=this.__data__=new Lf(R)}return L.set(m,C),this.size=L.size,this}zd.prototype.clear=lNe,zd.prototype.delete=cNe,zd.prototype.get=dNe,zd.prototype.has=uNe,zd.prototype.set=hNe;function Bte(m,C){var L=gi(m),R=!L&&Sv(m),O=!L&&!R&&Lp(m),K=!L&&!R&&!O&&pC(m),ie=L||R||O||K,le=ie?NW(m.length,yDe):[],me=le.length;for(var Fe in m)(C||An.call(m,Fe))&&!(ie&&(Fe=="length"||O&&(Fe=="offset"||Fe=="parent")||K&&(Fe=="buffer"||Fe=="byteLength"||Fe=="byteOffset")||Df(Fe,me)))&&le.push(Fe);return le}function Wte(m){var C=m.length;return C?m[qW(0,C-1)]:t}function fNe(m,C){return GT(hl(m),bv(C,0,m.length))}function gNe(m){return GT(hl(m))}function FW(m,C,L){(L!==t&&!Ud(m[C],L)||L===t&&!(C in m))&&kf(m,C,L)}function aL(m,C,L){var R=m[C];(!(An.call(m,C)&&Ud(R,L))||L===t&&!(C in m))&&kf(m,C,L)}function PT(m,C){for(var L=m.length;L--;)if(Ud(m[L][0],C))return L;return-1}function pNe(m,C,L,R){return Cp(m,function(O,K,ie){C(R,O,L(O),ie)}),R}function Hte(m,C){return m&&Ju(C,Gr(C),m)}function mNe(m,C){return m&&Ju(C,gl(C),m)}function kf(m,C,L){C=="__proto__"&&DT?DT(m,C,{configurable:!0,enumerable:!0,value:L,writable:!0}):m[C]=L}function BW(m,C){for(var L=-1,R=C.length,O=De(R),K=m==null;++L<R;)O[L]=K?t:v7(m,C[L]);return O}function bv(m,C,L){return m===m&&(L!==t&&(m=m<=L?m:L),C!==t&&(m=m>=C?m:C)),m}function Xc(m,C,L,R,O,K){var ie,le=C&u,me=C&h,Fe=C&f;if(L&&(ie=O?L(m,R,O,K):L(m)),ie!==t)return ie;if(!ys(m))return m;var We=gi(m);if(We){if(ie=sTe(m),!le)return hl(m,ie)}else{var je=Yo(m),ft=je==qe||je==vt;if(Lp(m))return die(m,le);if(je==Rn||je==P||ft&&!O){if(ie=me||ft?{}:Die(m),!le)return me?qNe(m,mNe(ie,m)):KNe(m,Hte(ie,m))}else{if(!ts[je])return O?m:{};ie=rTe(m,je,le)}}K||(K=new zd);var Rt=K.get(m);if(Rt)return Rt;K.set(m,ie),sne(m)?m.forEach(function(ti){ie.add(Xc(ti,C,L,ti,m,K))}):ine(m)&&m.forEach(function(ti,Ri){ie.set(Ri,Xc(ti,C,L,Ri,m,K))});var ei=Fe?me?s7:n7:me?gl:Gr,xi=We?t:ei(m);return Gc(xi||m,function(ti,Ri){xi&&(Ri=ti,ti=m[Ri]),aL(ie,Ri,Xc(ti,C,L,Ri,m,K))}),ie}function _Ne(m){var C=Gr(m);return function(L){return Vte(L,m,C)}}function Vte(m,C,L){var R=L.length;if(m==null)return!R;for(m=Gn(m);R--;){var O=L[R],K=C[O],ie=m[O];if(ie===t&&!(O in m)||!K(ie))return!1}return!0}function zte(m,C,L){if(typeof m!="function")throw new Yc(o);return gL(function(){m.apply(t,L)},C)}function lL(m,C,L,R){var O=-1,K=vT,ie=!0,le=m.length,me=[],Fe=C.length;if(!le)return me;L&&(C=fs(C,tc(L))),R?(K=xW,ie=!1):C.length>=s&&(K=tL,ie=!1,C=new vv(C));e:for(;++O<le;){var We=m[O],je=L==null?We:L(We);if(We=R||We!==0?We:0,ie&&je===je){for(var ft=Fe;ft--;)if(C[ft]===je)continue e;me.push(We)}else K(C,je,R)||me.push(We)}return me}var Cp=pie(Qu),Ute=pie(HW,!0);function vNe(m,C){var L=!0;return Cp(m,function(R,O,K){return L=!!C(R,O,K),L}),L}function OT(m,C,L){for(var R=-1,O=m.length;++R<O;){var K=m[R],ie=C(K);if(ie!=null&&(le===t?ie===ie&&!nc(ie):L(ie,le)))var le=ie,me=K}return me}function bNe(m,C,L,R){var O=m.length;for(L=bi(L),L<0&&(L=-L>O?0:O+L),R=R===t||R>O?O:bi(R),R<0&&(R+=O),R=L>R?0:one(R);L<R;)m[L++]=C;return m}function $te(m,C){var L=[];return Cp(m,function(R,O,K){C(R,O,K)&&L.push(R)}),L}function mo(m,C,L,R,O){var K=-1,ie=m.length;for(L||(L=aTe),O||(O=[]);++K<ie;){var le=m[K];C>0&&L(le)?C>1?mo(le,C-1,L,R,O):vp(O,le):R||(O[O.length]=le)}return O}var WW=mie(),jte=mie(!0);function Qu(m,C){return m&&WW(m,C,Gr)}function HW(m,C){return m&&jte(m,C,Gr)}function FT(m,C){return _p(C,function(L){return Nf(m[L])})}function wv(m,C){C=Sp(C,m);for(var L=0,R=C.length;m!=null&&L<R;)m=m[eh(C[L++])];return L&&L==R?m:t}function Kte(m,C,L){var R=C(m);return gi(m)?R:vp(R,L(m))}function La(m){return m==null?m===t?Hd:Cs:mv&&mv in Gn(m)?tTe(m):gTe(m)}function VW(m,C){return m>C}function wNe(m,C){return m!=null&&An.call(m,C)}function CNe(m,C){return m!=null&&C in Gn(m)}function yNe(m,C,L){return m>=Go(C,L)&&m<Er(C,L)}function zW(m,C,L){for(var R=L?xW:vT,O=m[0].length,K=m.length,ie=K,le=De(K),me=1/0,Fe=[];ie--;){var We=m[ie];ie&&C&&(We=fs(We,tc(C))),me=Go(We.length,me),le[ie]=!L&&(C||O>=120&&We.length>=120)?new vv(ie&&We):t}We=m[0];var je=-1,ft=le[0];e:for(;++je<O&&Fe.length<me;){var Rt=We[je],ei=C?C(Rt):Rt;if(Rt=L||Rt!==0?Rt:0,!(ft?tL(ft,ei):R(Fe,ei,L))){for(ie=K;--ie;){var xi=le[ie];if(!(xi?tL(xi,ei):R(m[ie],ei,L)))continue e}ft&&ft.push(ei),Fe.push(Rt)}}return Fe}function SNe(m,C,L,R){return Qu(m,function(O,K,ie){C(R,L(O),K,ie)}),R}function cL(m,C,L){C=Sp(C,m),m=Aie(m,C);var R=m==null?m:m[eh(Jc(C))];return R==null?t:ec(R,m,L)}function qte(m){return Ps(m)&&La(m)==P}function xNe(m){return Ps(m)&&La(m)==xr}function LNe(m){return Ps(m)&&La(m)==Le}function dL(m,C,L,R,O){return m===C?!0:m==null||C==null||!Ps(m)&&!Ps(C)?m!==m&&C!==C:kNe(m,C,L,R,dL,O)}function kNe(m,C,L,R,O,K){var ie=gi(m),le=gi(C),me=ie?$:Yo(m),Fe=le?$:Yo(C);me=me==P?Rn:me,Fe=Fe==P?Rn:Fe;var We=me==Rn,je=Fe==Rn,ft=me==Fe;if(ft&&Lp(m)){if(!Lp(C))return!1;ie=!0,We=!1}if(ft&&!We)return K||(K=new zd),ie||pC(m)?kie(m,C,L,R,O,K):JNe(m,C,me,L,R,O,K);if(!(L&g)){var Rt=We&&An.call(m,"__wrapped__"),ei=je&&An.call(C,"__wrapped__");if(Rt||ei){var xi=Rt?m.value():m,ti=ei?C.value():C;return K||(K=new zd),O(xi,ti,L,R,K)}}return ft?(K||(K=new zd),eTe(m,C,L,R,O,K)):!1}function ENe(m){return Ps(m)&&Yo(m)==Ot}function UW(m,C,L,R){var O=L.length,K=O,ie=!R;if(m==null)return!K;for(m=Gn(m);O--;){var le=L[O];if(ie&&le[2]?le[1]!==m[le[0]]:!(le[0]in m))return!1}for(;++O<K;){le=L[O];var me=le[0],Fe=m[me],We=le[1];if(ie&&le[2]){if(Fe===t&&!(me in m))return!1}else{var je=new zd;if(R)var ft=R(Fe,We,me,m,C,je);if(!(ft===t?dL(We,Fe,g|p,R,je):ft))return!1}}return!0}function Gte(m){if(!ys(m)||cTe(m))return!1;var C=Nf(m)?EDe:Et;return C.test(yv(m))}function INe(m){return Ps(m)&&La(m)==or}function DNe(m){return Ps(m)&&Yo(m)==Ur}function NNe(m){return Ps(m)&&eR(m.length)&&!!ls[La(m)]}function Yte(m){return typeof m=="function"?m:m==null?pl:typeof m=="object"?gi(m)?Qte(m[0],m[1]):Xte(m):_ne(m)}function $W(m){if(!fL(m))return ADe(m);var C=[];for(var L in Gn(m))An.call(m,L)&&L!="constructor"&&C.push(L);return C}function TNe(m){if(!ys(m))return fTe(m);var C=fL(m),L=[];for(var R in m)R=="constructor"&&(C||!An.call(m,R))||L.push(R);return L}function jW(m,C){return m<C}function Zte(m,C){var L=-1,R=fl(m)?De(m.length):[];return Cp(m,function(O,K,ie){R[++L]=C(O,K,ie)}),R}function Xte(m){var C=o7(m);return C.length==1&&C[0][2]?Tie(C[0][0],C[0][1]):function(L){return L===m||UW(L,m,C)}}function Qte(m,C){return l7(m)&&Nie(C)?Tie(eh(m),C):function(L){var R=v7(L,m);return R===t&&R===C?b7(L,m):dL(C,R,g|p)}}function BT(m,C,L,R,O){m!==C&&WW(C,function(K,ie){if(O||(O=new zd),ys(K))RNe(m,C,ie,L,BT,R,O);else{var le=R?R(d7(m,ie),K,ie+"",m,C,O):t;le===t&&(le=K),FW(m,ie,le)}},gl)}function RNe(m,C,L,R,O,K,ie){var le=d7(m,L),me=d7(C,L),Fe=ie.get(me);if(Fe){FW(m,L,Fe);return}var We=K?K(le,me,L+"",m,C,ie):t,je=We===t;if(je){var ft=gi(me),Rt=!ft&&Lp(me),ei=!ft&&!Rt&&pC(me);We=me,ft||Rt||ei?gi(le)?We=le:Gs(le)?We=hl(le):Rt?(je=!1,We=die(me,!0)):ei?(je=!1,We=uie(me,!0)):We=[]:pL(me)||Sv(me)?(We=le,Sv(le)?We=ane(le):(!ys(le)||Nf(le))&&(We=Die(me))):je=!1}je&&(ie.set(me,We),O(We,me,R,K,ie),ie.delete(me)),FW(m,L,We)}function Jte(m,C){var L=m.length;if(L)return C+=C<0?L:0,Df(C,L)?m[C]:t}function eie(m,C,L){C.length?C=fs(C,function(K){return gi(K)?function(ie){return wv(ie,K.length===1?K[0]:K)}:K}):C=[pl];var R=-1;C=fs(C,tc(Qt()));var O=Zte(m,function(K,ie,le){var me=fs(C,function(Fe){return Fe(K)});return{criteria:me,index:++R,value:K}});return rDe(O,function(K,ie){return jNe(K,ie,L)})}function ANe(m,C){return tie(m,C,function(L,R){return b7(m,R)})}function tie(m,C,L){for(var R=-1,O=C.length,K={};++R<O;){var ie=C[R],le=wv(m,ie);L(le,ie)&&uL(K,Sp(ie,m),le)}return K}function MNe(m){return function(C){return wv(C,m)}}function KW(m,C,L,R){var O=R?sDe:sC,K=-1,ie=C.length,le=m;for(m===C&&(C=hl(C)),L&&(le=fs(m,tc(L)));++K<ie;)for(var me=0,Fe=C[K],We=L?L(Fe):Fe;(me=O(le,We,me,R))>-1;)le!==m&&IT.call(le,me,1),IT.call(m,me,1);return m}function iie(m,C){for(var L=m?C.length:0,R=L-1;L--;){var O=C[L];if(L==R||O!==K){var K=O;Df(O)?IT.call(m,O,1):ZW(m,O)}}return m}function qW(m,C){return m+TT(Ote()*(C-m+1))}function PNe(m,C,L,R){for(var O=-1,K=Er(NT((C-m)/(L||1)),0),ie=De(K);K--;)ie[R?K:++O]=m,m+=L;return ie}function GW(m,C){var L="";if(!m||C<1||C>te)return L;do C%2&&(L+=m),C=TT(C/2),C&&(m+=m);while(C);return L}function ki(m,C){return u7(Rie(m,C,pl),m+"")}function ONe(m){return Wte(mC(m))}function FNe(m,C){var L=mC(m);return GT(L,bv(C,0,L.length))}function uL(m,C,L,R){if(!ys(m))return m;C=Sp(C,m);for(var O=-1,K=C.length,ie=K-1,le=m;le!=null&&++O<K;){var me=eh(C[O]),Fe=L;if(me==="__proto__"||me==="constructor"||me==="prototype")return m;if(O!=ie){var We=le[me];Fe=R?R(We,me,le):t,Fe===t&&(Fe=ys(We)?We:Df(C[O+1])?[]:{})}aL(le,me,Fe),le=le[me]}return m}var nie=RT?function(m,C){return RT.set(m,C),m}:pl,BNe=DT?function(m,C){return DT(m,"toString",{configurable:!0,enumerable:!1,value:C7(C),writable:!0})}:pl;function WNe(m){return GT(mC(m))}function Qc(m,C,L){var R=-1,O=m.length;C<0&&(C=-C>O?0:O+C),L=L>O?O:L,L<0&&(L+=O),O=C>L?0:L-C>>>0,C>>>=0;for(var K=De(O);++R<O;)K[R]=m[R+C];return K}function HNe(m,C){var L;return Cp(m,function(R,O,K){return L=C(R,O,K),!L}),!!L}function WT(m,C,L){var R=0,O=m==null?R:m.length;if(typeof C=="number"&&C===C&&O<=He){for(;R<O;){var K=R+O>>>1,ie=m[K];ie!==null&&!nc(ie)&&(L?ie<=C:ie<C)?R=K+1:O=K}return O}return YW(m,C,pl,L)}function YW(m,C,L,R){var O=0,K=m==null?0:m.length;if(K===0)return 0;C=L(C);for(var ie=C!==C,le=C===null,me=nc(C),Fe=C===t;O<K;){var We=TT((O+K)/2),je=L(m[We]),ft=je!==t,Rt=je===null,ei=je===je,xi=nc(je);if(ie)var ti=R||ei;else Fe?ti=ei&&(R||ft):le?ti=ei&&ft&&(R||!Rt):me?ti=ei&&ft&&!Rt&&(R||!xi):Rt||xi?ti=!1:ti=R?je<=C:je<C;ti?O=We+1:K=We}return Go(K,it)}function sie(m,C){for(var L=-1,R=m.length,O=0,K=[];++L<R;){var ie=m[L],le=C?C(ie):ie;if(!L||!Ud(le,me)){var me=le;K[O++]=ie===0?0:ie}}return K}function rie(m){return typeof m=="number"?m:nc(m)?Ie:+m}function ic(m){if(typeof m=="string")return m;if(gi(m))return fs(m,ic)+"";if(nc(m))return Fte?Fte.call(m):"";var C=m+"";return C=="0"&&1/m==-ve?"-0":C}function yp(m,C,L){var R=-1,O=vT,K=m.length,ie=!0,le=[],me=le;if(L)ie=!1,O=xW;else if(K>=s){var Fe=C?null:XNe(m);if(Fe)return wT(Fe);ie=!1,O=tL,me=new vv}else me=C?[]:le;e:for(;++R<K;){var We=m[R],je=C?C(We):We;if(We=L||We!==0?We:0,ie&&je===je){for(var ft=me.length;ft--;)if(me[ft]===je)continue e;C&&me.push(je),le.push(We)}else O(me,je,L)||(me!==le&&me.push(je),le.push(We))}return le}function ZW(m,C){return C=Sp(C,m),m=Aie(m,C),m==null||delete m[eh(Jc(C))]}function oie(m,C,L,R){return uL(m,C,L(wv(m,C)),R)}function HT(m,C,L,R){for(var O=m.length,K=R?O:-1;(R?K--:++K<O)&&C(m[K],K,m););return L?Qc(m,R?0:K,R?K+1:O):Qc(m,R?K+1:0,R?O:K)}function aie(m,C){var L=m;return L instanceof Wi&&(L=L.value()),LW(C,function(R,O){return O.func.apply(O.thisArg,vp([R],O.args))},L)}function XW(m,C,L){var R=m.length;if(R<2)return R?yp(m[0]):[];for(var O=-1,K=De(R);++O<R;)for(var ie=m[O],le=-1;++le<R;)le!=O&&(K[O]=lL(K[O]||ie,m[le],C,L));return yp(mo(K,1),C,L)}function lie(m,C,L){for(var R=-1,O=m.length,K=C.length,ie={};++R<O;){var le=R<K?C[R]:t;L(ie,m[R],le)}return ie}function QW(m){return Gs(m)?m:[]}function JW(m){return typeof m=="function"?m:pl}function Sp(m,C){return gi(m)?m:l7(m,C)?[m]:Fie(xn(m))}var VNe=ki;function xp(m,C,L){var R=m.length;return L=L===t?R:L,!C&&L>=R?m:Qc(m,C,L)}var cie=IDe||function(m){return po.clearTimeout(m)};function die(m,C){if(C)return m.slice();var L=m.length,R=Tte?Tte(L):new m.constructor(L);return m.copy(R),R}function e7(m){var C=new m.constructor(m.byteLength);return new kT(C).set(new kT(m)),C}function zNe(m,C){var L=C?e7(m.buffer):m.buffer;return new m.constructor(L,m.byteOffset,m.byteLength)}function UNe(m){var C=new m.constructor(m.source,jr.exec(m));return C.lastIndex=m.lastIndex,C}function $Ne(m){return oL?Gn(oL.call(m)):{}}function uie(m,C){var L=C?e7(m.buffer):m.buffer;return new m.constructor(L,m.byteOffset,m.length)}function hie(m,C){if(m!==C){var L=m!==t,R=m===null,O=m===m,K=nc(m),ie=C!==t,le=C===null,me=C===C,Fe=nc(C);if(!le&&!Fe&&!K&&m>C||K&&ie&&me&&!le&&!Fe||R&&ie&&me||!L&&me||!O)return 1;if(!R&&!K&&!Fe&&m<C||Fe&&L&&O&&!R&&!K||le&&L&&O||!ie&&O||!me)return-1}return 0}function jNe(m,C,L){for(var R=-1,O=m.criteria,K=C.criteria,ie=O.length,le=L.length;++R<ie;){var me=hie(O[R],K[R]);if(me){if(R>=le)return me;var Fe=L[R];return me*(Fe=="desc"?-1:1)}}return m.index-C.index}function fie(m,C,L,R){for(var O=-1,K=m.length,ie=L.length,le=-1,me=C.length,Fe=Er(K-ie,0),We=De(me+Fe),je=!R;++le<me;)We[le]=C[le];for(;++O<ie;)(je||O<K)&&(We[L[O]]=m[O]);for(;Fe--;)We[le++]=m[O++];return We}function gie(m,C,L,R){for(var O=-1,K=m.length,ie=-1,le=L.length,me=-1,Fe=C.length,We=Er(K-le,0),je=De(We+Fe),ft=!R;++O<We;)je[O]=m[O];for(var Rt=O;++me<Fe;)je[Rt+me]=C[me];for(;++ie<le;)(ft||O<K)&&(je[Rt+L[ie]]=m[O++]);return je}function hl(m,C){var L=-1,R=m.length;for(C||(C=De(R));++L<R;)C[L]=m[L];return C}function Ju(m,C,L,R){var O=!L;L||(L={});for(var K=-1,ie=C.length;++K<ie;){var le=C[K],me=R?R(L[le],m[le],le,L,m):t;me===t&&(me=m[le]),O?kf(L,le,me):aL(L,le,me)}return L}function KNe(m,C){return Ju(m,a7(m),C)}function qNe(m,C){return Ju(m,Eie(m),C)}function VT(m,C){return function(L,R){var O=gi(L)?QIe:pNe,K=C?C():{};return O(L,m,Qt(R,2),K)}}function hC(m){return ki(function(C,L){var R=-1,O=L.length,K=O>1?L[O-1]:t,ie=O>2?L[2]:t;for(K=m.length>3&&typeof K=="function"?(O--,K):t,ie&&ka(L[0],L[1],ie)&&(K=O<3?t:K,O=1),C=Gn(C);++R<O;){var le=L[R];le&&m(C,le,R,K)}return C})}function pie(m,C){return function(L,R){if(L==null)return L;if(!fl(L))return m(L,R);for(var O=L.length,K=C?O:-1,ie=Gn(L);(C?K--:++K<O)&&R(ie[K],K,ie)!==!1;);return L}}function mie(m){return function(C,L,R){for(var O=-1,K=Gn(C),ie=R(C),le=ie.length;le--;){var me=ie[m?le:++O];if(L(K[me],me,K)===!1)break}return C}}function GNe(m,C,L){var R=C&_,O=hL(m);function K(){var ie=this&&this!==po&&this instanceof K?O:m;return ie.apply(R?L:this,arguments)}return K}function _ie(m){return function(C){C=xn(C);var L=rC(C)?Vd(C):t,R=L?L[0]:C.charAt(0),O=L?xp(L,1).join(""):C.slice(1);return R[m]()+O}}function fC(m){return function(C){return LW(pne(gne(C).replace(BIe,"")),m,"")}}function hL(m){return function(){var C=arguments;switch(C.length){case 0:return new m;case 1:return new m(C[0]);case 2:return new m(C[0],C[1]);case 3:return new m(C[0],C[1],C[2]);case 4:return new m(C[0],C[1],C[2],C[3]);case 5:return new m(C[0],C[1],C[2],C[3],C[4]);case 6:return new m(C[0],C[1],C[2],C[3],C[4],C[5]);case 7:return new m(C[0],C[1],C[2],C[3],C[4],C[5],C[6])}var L=uC(m.prototype),R=m.apply(L,C);return ys(R)?R:L}}function YNe(m,C,L){var R=hL(m);function O(){for(var K=arguments.length,ie=De(K),le=K,me=gC(O);le--;)ie[le]=arguments[le];var Fe=K<3&&ie[0]!==me&&ie[K-1]!==me?[]:bp(ie,me);if(K-=Fe.length,K<L)return yie(m,C,zT,O.placeholder,t,ie,Fe,t,t,L-K);var We=this&&this!==po&&this instanceof O?R:m;return ec(We,this,ie)}return O}function vie(m){return function(C,L,R){var O=Gn(C);if(!fl(C)){var K=Qt(L,3);C=Gr(C),L=function(le){return K(O[le],le,O)}}var ie=m(C,L,R);return ie>-1?O[K?C[ie]:ie]:t}}function bie(m){return If(function(C){var L=C.length,R=L,O=Zc.prototype.thru;for(m&&C.reverse();R--;){var K=C[R];if(typeof K!="function")throw new Yc(o);if(O&&!ie&&KT(K)=="wrapper")var ie=new Zc([],!0)}for(R=ie?R:L;++R<L;){K=C[R];var le=KT(K),me=le=="wrapper"?r7(K):t;me&&c7(me[0])&&me[1]==(D|y|x|N)&&!me[4].length&&me[9]==1?ie=ie[KT(me[0])].apply(ie,me[3]):ie=K.length==1&&c7(K)?ie[le]():ie.thru(K)}return function(){var Fe=arguments,We=Fe[0];if(ie&&Fe.length==1&&gi(We))return ie.plant(We).value();for(var je=0,ft=L?C[je].apply(this,Fe):We;++je<L;)ft=C[je].call(this,ft);return ft}})}function zT(m,C,L,R,O,K,ie,le,me,Fe){var We=C&D,je=C&_,ft=C&w,Rt=C&(y|S),ei=C&I,xi=ft?t:hL(m);function ti(){for(var Ri=arguments.length,Ui=De(Ri),sc=Ri;sc--;)Ui[sc]=arguments[sc];if(Rt)var Ea=gC(ti),rc=aDe(Ui,Ea);if(R&&(Ui=fie(Ui,R,O,Rt)),K&&(Ui=gie(Ui,K,ie,Rt)),Ri-=rc,Rt&&Ri<Fe){var Ys=bp(Ui,Ea);return yie(m,C,zT,ti.placeholder,L,Ui,Ys,le,me,Fe-Ri)}var $d=je?L:this,Rf=ft?$d[m]:m;return Ri=Ui.length,le?Ui=pTe(Ui,le):ei&&Ri>1&&Ui.reverse(),We&&me<Ri&&(Ui.length=me),this&&this!==po&&this instanceof ti&&(Rf=xi||hL(Rf)),Rf.apply($d,Ui)}return ti}function wie(m,C){return function(L,R){return SNe(L,m,C(R),{})}}function UT(m,C){return function(L,R){var O;if(L===t&&R===t)return C;if(L!==t&&(O=L),R!==t){if(O===t)return R;typeof L=="string"||typeof R=="string"?(L=ic(L),R=ic(R)):(L=rie(L),R=rie(R)),O=m(L,R)}return O}}function t7(m){return If(function(C){return C=fs(C,tc(Qt())),ki(function(L){var R=this;return m(C,function(O){return ec(O,R,L)})})})}function $T(m,C){C=C===t?" ":ic(C);var L=C.length;if(L<2)return L?GW(C,m):C;var R=GW(C,NT(m/oC(C)));return rC(C)?xp(Vd(R),0,m).join(""):R.slice(0,m)}function ZNe(m,C,L,R){var O=C&_,K=hL(m);function ie(){for(var le=-1,me=arguments.length,Fe=-1,We=R.length,je=De(We+me),ft=this&&this!==po&&this instanceof ie?K:m;++Fe<We;)je[Fe]=R[Fe];for(;me--;)je[Fe++]=arguments[++le];return ec(ft,O?L:this,je)}return ie}function Cie(m){return function(C,L,R){return R&&typeof R!="number"&&ka(C,L,R)&&(L=R=t),C=Tf(C),L===t?(L=C,C=0):L=Tf(L),R=R===t?C<L?1:-1:Tf(R),PNe(C,L,R,m)}}function jT(m){return function(C,L){return typeof C=="string"&&typeof L=="string"||(C=ed(C),L=ed(L)),m(C,L)}}function yie(m,C,L,R,O,K,ie,le,me,Fe){var We=C&y,je=We?ie:t,ft=We?t:ie,Rt=We?K:t,ei=We?t:K;C|=We?x:E,C&=~(We?E:x),C&b||(C&=~(_|w));var xi=[m,C,O,Rt,je,ei,ft,le,me,Fe],ti=L.apply(t,xi);return c7(m)&&Mie(ti,xi),ti.placeholder=R,Pie(ti,m,C)}function i7(m){var C=kr[m];return function(L,R){if(L=ed(L),R=R==null?0:Go(bi(R),292),R&&Pte(L)){var O=(xn(L)+"e").split("e"),K=C(O[0]+"e"+(+O[1]+R));return O=(xn(K)+"e").split("e"),+(O[0]+"e"+(+O[1]-R))}return C(L)}}var XNe=cC&&1/wT(new cC([,-0]))[1]==ve?function(m){return new cC(m)}:x7;function Sie(m){return function(C){var L=Yo(C);return L==Ot?RW(C):L==Ur?gDe(C):oDe(C,m(C))}}function Ef(m,C,L,R,O,K,ie,le){var me=C&w;if(!me&&typeof m!="function")throw new Yc(o);var Fe=R?R.length:0;if(Fe||(C&=~(x|E),R=O=t),ie=ie===t?ie:Er(bi(ie),0),le=le===t?le:bi(le),Fe-=O?O.length:0,C&E){var We=R,je=O;R=O=t}var ft=me?t:r7(m),Rt=[m,C,L,R,O,We,je,K,ie,le];if(ft&&hTe(Rt,ft),m=Rt[0],C=Rt[1],L=Rt[2],R=Rt[3],O=Rt[4],le=Rt[9]=Rt[9]===t?me?0:m.length:Er(Rt[9]-Fe,0),!le&&C&(y|S)&&(C&=~(y|S)),!C||C==_)var ei=GNe(m,C,L);else C==y||C==S?ei=YNe(m,C,le):(C==x||C==(_|x))&&!O.length?ei=ZNe(m,C,L,R):ei=zT.apply(t,Rt);var xi=ft?nie:Mie;return Pie(xi(ei,Rt),m,C)}function xie(m,C,L,R){return m===t||Ud(m,lC[L])&&!An.call(R,L)?C:m}function Lie(m,C,L,R,O,K){return ys(m)&&ys(C)&&(K.set(C,m),BT(m,C,t,Lie,K),K.delete(C)),m}function QNe(m){return pL(m)?t:m}function kie(m,C,L,R,O,K){var ie=L&g,le=m.length,me=C.length;if(le!=me&&!(ie&&me>le))return!1;var Fe=K.get(m),We=K.get(C);if(Fe&&We)return Fe==C&&We==m;var je=-1,ft=!0,Rt=L&p?new vv:t;for(K.set(m,C),K.set(C,m);++je<le;){var ei=m[je],xi=C[je];if(R)var ti=ie?R(xi,ei,je,C,m,K):R(ei,xi,je,m,C,K);if(ti!==t){if(ti)continue;ft=!1;break}if(Rt){if(!kW(C,function(Ri,Ui){if(!tL(Rt,Ui)&&(ei===Ri||O(ei,Ri,L,R,K)))return Rt.push(Ui)})){ft=!1;break}}else if(!(ei===xi||O(ei,xi,L,R,K))){ft=!1;break}}return K.delete(m),K.delete(C),ft}function JNe(m,C,L,R,O,K,ie){switch(L){case ul:if(m.byteLength!=C.byteLength||m.byteOffset!=C.byteOffset)return!1;m=m.buffer,C=C.buffer;case xr:return!(m.byteLength!=C.byteLength||!K(new kT(m),new kT(C)));case ae:case Le:case on:return Ud(+m,+C);case Ue:return m.name==C.name&&m.message==C.message;case or:case jc:return m==C+"";case Ot:var le=RW;case Ur:var me=R&g;if(le||(le=wT),m.size!=C.size&&!me)return!1;var Fe=ie.get(m);if(Fe)return Fe==C;R|=p,ie.set(m,C);var We=kie(le(m),le(C),R,O,K,ie);return ie.delete(m),We;case $o:if(oL)return oL.call(m)==oL.call(C)}return!1}function eTe(m,C,L,R,O,K){var ie=L&g,le=n7(m),me=le.length,Fe=n7(C),We=Fe.length;if(me!=We&&!ie)return!1;for(var je=me;je--;){var ft=le[je];if(!(ie?ft in C:An.call(C,ft)))return!1}var Rt=K.get(m),ei=K.get(C);if(Rt&&ei)return Rt==C&&ei==m;var xi=!0;K.set(m,C),K.set(C,m);for(var ti=ie;++je<me;){ft=le[je];var Ri=m[ft],Ui=C[ft];if(R)var sc=ie?R(Ui,Ri,ft,C,m,K):R(Ri,Ui,ft,m,C,K);if(!(sc===t?Ri===Ui||O(Ri,Ui,L,R,K):sc)){xi=!1;break}ti||(ti=ft=="constructor")}if(xi&&!ti){var Ea=m.constructor,rc=C.constructor;Ea!=rc&&"constructor"in m&&"constructor"in C&&!(typeof Ea=="function"&&Ea instanceof Ea&&typeof rc=="function"&&rc instanceof rc)&&(xi=!1)}return K.delete(m),K.delete(C),xi}function If(m){return u7(Rie(m,t,Vie),m+"")}function n7(m){return Kte(m,Gr,a7)}function s7(m){return Kte(m,gl,Eie)}var r7=RT?function(m){return RT.get(m)}:x7;function KT(m){for(var C=m.name+"",L=dC[C],R=An.call(dC,C)?L.length:0;R--;){var O=L[R],K=O.func;if(K==null||K==m)return O.name}return C}function gC(m){var C=An.call(V,"placeholder")?V:m;return C.placeholder}function Qt(){var m=V.iteratee||y7;return m=m===y7?Yte:m,arguments.length?m(arguments[0],arguments[1]):m}function qT(m,C){var L=m.__data__;return lTe(C)?L[typeof C=="string"?"string":"hash"]:L.map}function o7(m){for(var C=Gr(m),L=C.length;L--;){var R=C[L],O=m[R];C[L]=[R,O,Nie(O)]}return C}function Cv(m,C){var L=uDe(m,C);return Gte(L)?L:t}function tTe(m){var C=An.call(m,mv),L=m[mv];try{m[mv]=t;var R=!0}catch{}var O=xT.call(m);return R&&(C?m[mv]=L:delete m[mv]),O}var a7=MW?function(m){return m==null?[]:(m=Gn(m),_p(MW(m),function(C){return Ate.call(m,C)}))}:L7,Eie=MW?function(m){for(var C=[];m;)vp(C,a7(m)),m=ET(m);return C}:L7,Yo=La;(PW&&Yo(new PW(new ArrayBuffer(1)))!=ul||nL&&Yo(new nL)!=Ot||OW&&Yo(OW.resolve())!=ya||cC&&Yo(new cC)!=Ur||sL&&Yo(new sL)!=Sr)&&(Yo=function(m){var C=La(m),L=C==Rn?m.constructor:t,R=L?yv(L):"";if(R)switch(R){case FDe:return ul;case BDe:return Ot;case WDe:return ya;case HDe:return Ur;case VDe:return Sr}return C});function iTe(m,C,L){for(var R=-1,O=L.length;++R<O;){var K=L[R],ie=K.size;switch(K.type){case"drop":m+=ie;break;case"dropRight":C-=ie;break;case"take":C=Go(C,m+ie);break;case"takeRight":m=Er(m,C-ie);break}}return{start:m,end:C}}function nTe(m){var C=m.match(ut);return C?C[1].split(Ut):[]}function Iie(m,C,L){C=Sp(C,m);for(var R=-1,O=C.length,K=!1;++R<O;){var ie=eh(C[R]);if(!(K=m!=null&&L(m,ie)))break;m=m[ie]}return K||++R!=O?K:(O=m==null?0:m.length,!!O&&eR(O)&&Df(ie,O)&&(gi(m)||Sv(m)))}function sTe(m){var C=m.length,L=new m.constructor(C);return C&&typeof m[0]=="string"&&An.call(m,"index")&&(L.index=m.index,L.input=m.input),L}function Die(m){return typeof m.constructor=="function"&&!fL(m)?uC(ET(m)):{}}function rTe(m,C,L){var R=m.constructor;switch(C){case xr:return e7(m);case ae:case Le:return new R(+m);case ul:return zNe(m,L);case $r:case jo:case ar:case ho:case Ko:case qn:case qs:case Lr:case fo:return uie(m,L);case Ot:return new R;case on:case jc:return new R(m);case or:return UNe(m);case Ur:return new R;case $o:return $Ne(m)}}function oTe(m,C){var L=C.length;if(!L)return m;var R=L-1;return C[R]=(L>1?"& ":"")+C[R],C=C.join(L>2?", ":" "),m.replace(tt,`{
/* [wrapped with `+C+`] */
`)}function aTe(m){return gi(m)||Sv(m)||!!(Mte&&m&&m[Mte])}function Df(m,C){var L=typeof m;return C=C??te,!!C&&(L=="number"||L!="symbol"&&et.test(m))&&m>-1&&m%1==0&&m<C}function ka(m,C,L){if(!ys(L))return!1;var R=typeof C;return(R=="number"?fl(L)&&Df(C,L.length):R=="string"&&C in L)?Ud(L[C],m):!1}function l7(m,C){if(gi(m))return!1;var L=typeof m;return L=="number"||L=="symbol"||L=="boolean"||m==null||nc(m)?!0:q.test(m)||!U.test(m)||C!=null&&m in Gn(C)}function lTe(m){var C=typeof m;return C=="string"||C=="number"||C=="symbol"||C=="boolean"?m!=="__proto__":m===null}function c7(m){var C=KT(m),L=V[C];if(typeof L!="function"||!(C in Wi.prototype))return!1;if(m===L)return!0;var R=r7(L);return!!R&&m===R[0]}function cTe(m){return!!Nte&&Nte in m}var dTe=yT?Nf:k7;function fL(m){var C=m&&m.constructor,L=typeof C=="function"&&C.prototype||lC;return m===L}function Nie(m){return m===m&&!ys(m)}function Tie(m,C){return function(L){return L==null?!1:L[m]===C&&(C!==t||m in Gn(L))}}function uTe(m){var C=QT(m,function(R){return L.size===c&&L.clear(),R}),L=C.cache;return C}function hTe(m,C){var L=m[1],R=C[1],O=L|R,K=O<(_|w|D),ie=R==D&&L==y||R==D&&L==N&&m[7].length<=C[8]||R==(D|N)&&C[7].length<=C[8]&&L==y;if(!(K||ie))return m;R&_&&(m[2]=C[2],O|=L&_?0:b);var le=C[3];if(le){var me=m[3];m[3]=me?fie(me,le,C[4]):le,m[4]=me?bp(m[3],d):C[4]}return le=C[5],le&&(me=m[5],m[5]=me?gie(me,le,C[6]):le,m[6]=me?bp(m[5],d):C[6]),le=C[7],le&&(m[7]=le),R&D&&(m[8]=m[8]==null?C[8]:Go(m[8],C[8])),m[9]==null&&(m[9]=C[9]),m[0]=C[0],m[1]=O,m}function fTe(m){var C=[];if(m!=null)for(var L in Gn(m))C.push(L);return C}function gTe(m){return xT.call(m)}function Rie(m,C,L){return C=Er(C===t?m.length-1:C,0),function(){for(var R=arguments,O=-1,K=Er(R.length-C,0),ie=De(K);++O<K;)ie[O]=R[C+O];O=-1;for(var le=De(C+1);++O<C;)le[O]=R[O];return le[C]=L(ie),ec(m,this,le)}}function Aie(m,C){return C.length<2?m:wv(m,Qc(C,0,-1))}function pTe(m,C){for(var L=m.length,R=Go(C.length,L),O=hl(m);R--;){var K=C[R];m[R]=Df(K,L)?O[K]:t}return m}function d7(m,C){if(!(C==="constructor"&&typeof m[C]=="function")&&C!="__proto__")return m[C]}var Mie=Oie(nie),gL=NDe||function(m,C){return po.setTimeout(m,C)},u7=Oie(BNe);function Pie(m,C,L){var R=C+"";return u7(m,oTe(R,mTe(nTe(R),L)))}function Oie(m){var C=0,L=0;return function(){var R=MDe(),O=J-(R-L);if(L=R,O>0){if(++C>=G)return arguments[0]}else C=0;return m.apply(t,arguments)}}function GT(m,C){var L=-1,R=m.length,O=R-1;for(C=C===t?R:C;++L<C;){var K=qW(L,O),ie=m[K];m[K]=m[L],m[L]=ie}return m.length=C,m}var Fie=uTe(function(m){var C=[];return m.charCodeAt(0)===46&&C.push(""),m.replace(Q,function(L,R,O,K){C.push(O?K.replace(yn,"$1"):R||L)}),C});function eh(m){if(typeof m=="string"||nc(m))return m;var C=m+"";return C=="0"&&1/m==-ve?"-0":C}function yv(m){if(m!=null){try{return ST.call(m)}catch{}try{return m+""}catch{}}return""}function mTe(m,C){return Gc(dt,function(L){var R="_."+L[0];C&L[1]&&!vT(m,R)&&m.push(R)}),m.sort()}function Bie(m){if(m instanceof Wi)return m.clone();var C=new Zc(m.__wrapped__,m.__chain__);return C.__actions__=hl(m.__actions__),C.__index__=m.__index__,C.__values__=m.__values__,C}function _Te(m,C,L){(L?ka(m,C,L):C===t)?C=1:C=Er(bi(C),0);var R=m==null?0:m.length;if(!R||C<1)return[];for(var O=0,K=0,ie=De(NT(R/C));O<R;)ie[K++]=Qc(m,O,O+=C);return ie}function vTe(m){for(var C=-1,L=m==null?0:m.length,R=0,O=[];++C<L;){var K=m[C];K&&(O[R++]=K)}return O}function bTe(){var m=arguments.length;if(!m)return[];for(var C=De(m-1),L=arguments[0],R=m;R--;)C[R-1]=arguments[R];return vp(gi(L)?hl(L):[L],mo(C,1))}var wTe=ki(function(m,C){return Gs(m)?lL(m,mo(C,1,Gs,!0)):[]}),CTe=ki(function(m,C){var L=Jc(C);return Gs(L)&&(L=t),Gs(m)?lL(m,mo(C,1,Gs,!0),Qt(L,2)):[]}),yTe=ki(function(m,C){var L=Jc(C);return Gs(L)&&(L=t),Gs(m)?lL(m,mo(C,1,Gs,!0),t,L):[]});function STe(m,C,L){var R=m==null?0:m.length;return R?(C=L||C===t?1:bi(C),Qc(m,C<0?0:C,R)):[]}function xTe(m,C,L){var R=m==null?0:m.length;return R?(C=L||C===t?1:bi(C),C=R-C,Qc(m,0,C<0?0:C)):[]}function LTe(m,C){return m&&m.length?HT(m,Qt(C,3),!0,!0):[]}function kTe(m,C){return m&&m.length?HT(m,Qt(C,3),!0):[]}function ETe(m,C,L,R){var O=m==null?0:m.length;return O?(L&&typeof L!="number"&&ka(m,C,L)&&(L=0,R=O),bNe(m,C,L,R)):[]}function Wie(m,C,L){var R=m==null?0:m.length;if(!R)return-1;var O=L==null?0:bi(L);return O<0&&(O=Er(R+O,0)),bT(m,Qt(C,3),O)}function Hie(m,C,L){var R=m==null?0:m.length;if(!R)return-1;var O=R-1;return L!==t&&(O=bi(L),O=L<0?Er(R+O,0):Go(O,R-1)),bT(m,Qt(C,3),O,!0)}function Vie(m){var C=m==null?0:m.length;return C?mo(m,1):[]}function ITe(m){var C=m==null?0:m.length;return C?mo(m,ve):[]}function DTe(m,C){var L=m==null?0:m.length;return L?(C=C===t?1:bi(C),mo(m,C)):[]}function NTe(m){for(var C=-1,L=m==null?0:m.length,R={};++C<L;){var O=m[C];R[O[0]]=O[1]}return R}function zie(m){return m&&m.length?m[0]:t}function TTe(m,C,L){var R=m==null?0:m.length;if(!R)return-1;var O=L==null?0:bi(L);return O<0&&(O=Er(R+O,0)),sC(m,C,O)}function RTe(m){var C=m==null?0:m.length;return C?Qc(m,0,-1):[]}var ATe=ki(function(m){var C=fs(m,QW);return C.length&&C[0]===m[0]?zW(C):[]}),MTe=ki(function(m){var C=Jc(m),L=fs(m,QW);return C===Jc(L)?C=t:L.pop(),L.length&&L[0]===m[0]?zW(L,Qt(C,2)):[]}),PTe=ki(function(m){var C=Jc(m),L=fs(m,QW);return C=typeof C=="function"?C:t,C&&L.pop(),L.length&&L[0]===m[0]?zW(L,t,C):[]});function OTe(m,C){return m==null?"":RDe.call(m,C)}function Jc(m){var C=m==null?0:m.length;return C?m[C-1]:t}function FTe(m,C,L){var R=m==null?0:m.length;if(!R)return-1;var O=R;return L!==t&&(O=bi(L),O=O<0?Er(R+O,0):Go(O,R-1)),C===C?mDe(m,C,O):bT(m,yte,O,!0)}function BTe(m,C){return m&&m.length?Jte(m,bi(C)):t}var WTe=ki(Uie);function Uie(m,C){return m&&m.length&&C&&C.length?KW(m,C):m}function HTe(m,C,L){return m&&m.length&&C&&C.length?KW(m,C,Qt(L,2)):m}function VTe(m,C,L){return m&&m.length&&C&&C.length?KW(m,C,t,L):m}var zTe=If(function(m,C){var L=m==null?0:m.length,R=BW(m,C);return iie(m,fs(C,function(O){return Df(O,L)?+O:O}).sort(hie)),R});function UTe(m,C){var L=[];if(!(m&&m.length))return L;var R=-1,O=[],K=m.length;for(C=Qt(C,3);++R<K;){var ie=m[R];C(ie,R,m)&&(L.push(ie),O.push(R))}return iie(m,O),L}function h7(m){return m==null?m:ODe.call(m)}function $Te(m,C,L){var R=m==null?0:m.length;return R?(L&&typeof L!="number"&&ka(m,C,L)?(C=0,L=R):(C=C==null?0:bi(C),L=L===t?R:bi(L)),Qc(m,C,L)):[]}function jTe(m,C){return WT(m,C)}function KTe(m,C,L){return YW(m,C,Qt(L,2))}function qTe(m,C){var L=m==null?0:m.length;if(L){var R=WT(m,C);if(R<L&&Ud(m[R],C))return R}return-1}function GTe(m,C){return WT(m,C,!0)}function YTe(m,C,L){return YW(m,C,Qt(L,2),!0)}function ZTe(m,C){var L=m==null?0:m.length;if(L){var R=WT(m,C,!0)-1;if(Ud(m[R],C))return R}return-1}function XTe(m){return m&&m.length?sie(m):[]}function QTe(m,C){return m&&m.length?sie(m,Qt(C,2)):[]}function JTe(m){var C=m==null?0:m.length;return C?Qc(m,1,C):[]}function eRe(m,C,L){return m&&m.length?(C=L||C===t?1:bi(C),Qc(m,0,C<0?0:C)):[]}function tRe(m,C,L){var R=m==null?0:m.length;return R?(C=L||C===t?1:bi(C),C=R-C,Qc(m,C<0?0:C,R)):[]}function iRe(m,C){return m&&m.length?HT(m,Qt(C,3),!1,!0):[]}function nRe(m,C){return m&&m.length?HT(m,Qt(C,3)):[]}var sRe=ki(function(m){return yp(mo(m,1,Gs,!0))}),rRe=ki(function(m){var C=Jc(m);return Gs(C)&&(C=t),yp(mo(m,1,Gs,!0),Qt(C,2))}),oRe=ki(function(m){var C=Jc(m);return C=typeof C=="function"?C:t,yp(mo(m,1,Gs,!0),t,C)});function aRe(m){return m&&m.length?yp(m):[]}function lRe(m,C){return m&&m.length?yp(m,Qt(C,2)):[]}function cRe(m,C){return C=typeof C=="function"?C:t,m&&m.length?yp(m,t,C):[]}function f7(m){if(!(m&&m.length))return[];var C=0;return m=_p(m,function(L){if(Gs(L))return C=Er(L.length,C),!0}),NW(C,function(L){return fs(m,EW(L))})}function $ie(m,C){if(!(m&&m.length))return[];var L=f7(m);return C==null?L:fs(L,function(R){return ec(C,t,R)})}var dRe=ki(function(m,C){return Gs(m)?lL(m,C):[]}),uRe=ki(function(m){return XW(_p(m,Gs))}),hRe=ki(function(m){var C=Jc(m);return Gs(C)&&(C=t),XW(_p(m,Gs),Qt(C,2))}),fRe=ki(function(m){var C=Jc(m);return C=typeof C=="function"?C:t,XW(_p(m,Gs),t,C)}),gRe=ki(f7);function pRe(m,C){return lie(m||[],C||[],aL)}function mRe(m,C){return lie(m||[],C||[],uL)}var _Re=ki(function(m){var C=m.length,L=C>1?m[C-1]:t;return L=typeof L=="function"?(m.pop(),L):t,$ie(m,L)});function jie(m){var C=V(m);return C.__chain__=!0,C}function vRe(m,C){return C(m),m}function YT(m,C){return C(m)}var bRe=If(function(m){var C=m.length,L=C?m[0]:0,R=this.__wrapped__,O=function(K){return BW(K,m)};return C>1||this.__actions__.length||!(R instanceof Wi)||!Df(L)?this.thru(O):(R=R.slice(L,+L+(C?1:0)),R.__actions__.push({func:YT,args:[O],thisArg:t}),new Zc(R,this.__chain__).thru(function(K){return C&&!K.length&&K.push(t),K}))});function wRe(){return jie(this)}function CRe(){return new Zc(this.value(),this.__chain__)}function yRe(){this.__values__===t&&(this.__values__=rne(this.value()));var m=this.__index__>=this.__values__.length,C=m?t:this.__values__[this.__index__++];return{done:m,value:C}}function SRe(){return this}function xRe(m){for(var C,L=this;L instanceof MT;){var R=Bie(L);R.__index__=0,R.__values__=t,C?O.__wrapped__=R:C=R;var O=R;L=L.__wrapped__}return O.__wrapped__=m,C}function LRe(){var m=this.__wrapped__;if(m instanceof Wi){var C=m;return this.__actions__.length&&(C=new Wi(this)),C=C.reverse(),C.__actions__.push({func:YT,args:[h7],thisArg:t}),new Zc(C,this.__chain__)}return this.thru(h7)}function kRe(){return aie(this.__wrapped__,this.__actions__)}var ERe=VT(function(m,C,L){An.call(m,L)?++m[L]:kf(m,L,1)});function IRe(m,C,L){var R=gi(m)?wte:vNe;return L&&ka(m,C,L)&&(C=t),R(m,Qt(C,3))}function DRe(m,C){var L=gi(m)?_p:$te;return L(m,Qt(C,3))}var NRe=vie(Wie),TRe=vie(Hie);function RRe(m,C){return mo(ZT(m,C),1)}function ARe(m,C){return mo(ZT(m,C),ve)}function MRe(m,C,L){return L=L===t?1:bi(L),mo(ZT(m,C),L)}function Kie(m,C){var L=gi(m)?Gc:Cp;return L(m,Qt(C,3))}function qie(m,C){var L=gi(m)?JIe:Ute;return L(m,Qt(C,3))}var PRe=VT(function(m,C,L){An.call(m,L)?m[L].push(C):kf(m,L,[C])});function ORe(m,C,L,R){m=fl(m)?m:mC(m),L=L&&!R?bi(L):0;var O=m.length;return L<0&&(L=Er(O+L,0)),tR(m)?L<=O&&m.indexOf(C,L)>-1:!!O&&sC(m,C,L)>-1}var FRe=ki(function(m,C,L){var R=-1,O=typeof C=="function",K=fl(m)?De(m.length):[];return Cp(m,function(ie){K[++R]=O?ec(C,ie,L):cL(ie,C,L)}),K}),BRe=VT(function(m,C,L){kf(m,L,C)});function ZT(m,C){var L=gi(m)?fs:Zte;return L(m,Qt(C,3))}function WRe(m,C,L,R){return m==null?[]:(gi(C)||(C=C==null?[]:[C]),L=R?t:L,gi(L)||(L=L==null?[]:[L]),eie(m,C,L))}var HRe=VT(function(m,C,L){m[L?0:1].push(C)},function(){return[[],[]]});function VRe(m,C,L){var R=gi(m)?LW:xte,O=arguments.length<3;return R(m,Qt(C,4),L,O,Cp)}function zRe(m,C,L){var R=gi(m)?eDe:xte,O=arguments.length<3;return R(m,Qt(C,4),L,O,Ute)}function URe(m,C){var L=gi(m)?_p:$te;return L(m,JT(Qt(C,3)))}function $Re(m){var C=gi(m)?Wte:ONe;return C(m)}function jRe(m,C,L){(L?ka(m,C,L):C===t)?C=1:C=bi(C);var R=gi(m)?fNe:FNe;return R(m,C)}function KRe(m){var C=gi(m)?gNe:WNe;return C(m)}function qRe(m){if(m==null)return 0;if(fl(m))return tR(m)?oC(m):m.length;var C=Yo(m);return C==Ot||C==Ur?m.size:$W(m).length}function GRe(m,C,L){var R=gi(m)?kW:HNe;return L&&ka(m,C,L)&&(C=t),R(m,Qt(C,3))}var YRe=ki(function(m,C){if(m==null)return[];var L=C.length;return L>1&&ka(m,C[0],C[1])?C=[]:L>2&&ka(C[0],C[1],C[2])&&(C=[C[0]]),eie(m,mo(C,1),[])}),XT=DDe||function(){return po.Date.now()};function ZRe(m,C){if(typeof C!="function")throw new Yc(o);return m=bi(m),function(){if(--m<1)return C.apply(this,arguments)}}function Gie(m,C,L){return C=L?t:C,C=m&&C==null?m.length:C,Ef(m,D,t,t,t,t,C)}function Yie(m,C){var L;if(typeof C!="function")throw new Yc(o);return m=bi(m),function(){return--m>0&&(L=C.apply(this,arguments)),m<=1&&(C=t),L}}var g7=ki(function(m,C,L){var R=_;if(L.length){var O=bp(L,gC(g7));R|=x}return Ef(m,R,C,L,O)}),Zie=ki(function(m,C,L){var R=_|w;if(L.length){var O=bp(L,gC(Zie));R|=x}return Ef(C,R,m,L,O)});function Xie(m,C,L){C=L?t:C;var R=Ef(m,y,t,t,t,t,t,C);return R.placeholder=Xie.placeholder,R}function Qie(m,C,L){C=L?t:C;var R=Ef(m,S,t,t,t,t,t,C);return R.placeholder=Qie.placeholder,R}function Jie(m,C,L){var R,O,K,ie,le,me,Fe=0,We=!1,je=!1,ft=!0;if(typeof m!="function")throw new Yc(o);C=ed(C)||0,ys(L)&&(We=!!L.leading,je="maxWait"in L,K=je?Er(ed(L.maxWait)||0,C):K,ft="trailing"in L?!!L.trailing:ft);function Rt(Ys){var $d=R,Rf=O;return R=O=t,Fe=Ys,ie=m.apply(Rf,$d),ie}function ei(Ys){return Fe=Ys,le=gL(Ri,C),We?Rt(Ys):ie}function xi(Ys){var $d=Ys-me,Rf=Ys-Fe,vne=C-$d;return je?Go(vne,K-Rf):vne}function ti(Ys){var $d=Ys-me,Rf=Ys-Fe;return me===t||$d>=C||$d<0||je&&Rf>=K}function Ri(){var Ys=XT();if(ti(Ys))return Ui(Ys);le=gL(Ri,xi(Ys))}function Ui(Ys){return le=t,ft&&R?Rt(Ys):(R=O=t,ie)}function sc(){le!==t&&cie(le),Fe=0,R=me=O=le=t}function Ea(){return le===t?ie:Ui(XT())}function rc(){var Ys=XT(),$d=ti(Ys);if(R=arguments,O=this,me=Ys,$d){if(le===t)return ei(me);if(je)return cie(le),le=gL(Ri,C),Rt(me)}return le===t&&(le=gL(Ri,C)),ie}return rc.cancel=sc,rc.flush=Ea,rc}var XRe=ki(function(m,C){return zte(m,1,C)}),QRe=ki(function(m,C,L){return zte(m,ed(C)||0,L)});function JRe(m){return Ef(m,I)}function QT(m,C){if(typeof m!="function"||C!=null&&typeof C!="function")throw new Yc(o);var L=function(){var R=arguments,O=C?C.apply(this,R):R[0],K=L.cache;if(K.has(O))return K.get(O);var ie=m.apply(this,R);return L.cache=K.set(O,ie)||K,ie};return L.cache=new(QT.Cache||Lf),L}QT.Cache=Lf;function JT(m){if(typeof m!="function")throw new Yc(o);return function(){var C=arguments;switch(C.length){case 0:return!m.call(this);case 1:return!m.call(this,C[0]);case 2:return!m.call(this,C[0],C[1]);case 3:return!m.call(this,C[0],C[1],C[2])}return!m.apply(this,C)}}function eAe(m){return Yie(2,m)}var tAe=VNe(function(m,C){C=C.length==1&&gi(C[0])?fs(C[0],tc(Qt())):fs(mo(C,1),tc(Qt()));var L=C.length;return ki(function(R){for(var O=-1,K=Go(R.length,L);++O<K;)R[O]=C[O].call(this,R[O]);return ec(m,this,R)})}),p7=ki(function(m,C){var L=bp(C,gC(p7));return Ef(m,x,t,C,L)}),ene=ki(function(m,C){var L=bp(C,gC(ene));return Ef(m,E,t,C,L)}),iAe=If(function(m,C){return Ef(m,N,t,t,t,C)});function nAe(m,C){if(typeof m!="function")throw new Yc(o);return C=C===t?C:bi(C),ki(m,C)}function sAe(m,C){if(typeof m!="function")throw new Yc(o);return C=C==null?0:Er(bi(C),0),ki(function(L){var R=L[C],O=xp(L,0,C);return R&&vp(O,R),ec(m,this,O)})}function rAe(m,C,L){var R=!0,O=!0;if(typeof m!="function")throw new Yc(o);return ys(L)&&(R="leading"in L?!!L.leading:R,O="trailing"in L?!!L.trailing:O),Jie(m,C,{leading:R,maxWait:C,trailing:O})}function oAe(m){return Gie(m,1)}function aAe(m,C){return p7(JW(C),m)}function lAe(){if(!arguments.length)return[];var m=arguments[0];return gi(m)?m:[m]}function cAe(m){return Xc(m,f)}function dAe(m,C){return C=typeof C=="function"?C:t,Xc(m,f,C)}function uAe(m){return Xc(m,u|f)}function hAe(m,C){return C=typeof C=="function"?C:t,Xc(m,u|f,C)}function fAe(m,C){return C==null||Vte(m,C,Gr(C))}function Ud(m,C){return m===C||m!==m&&C!==C}var gAe=jT(VW),pAe=jT(function(m,C){return m>=C}),Sv=qte(function(){return arguments}())?qte:function(m){return Ps(m)&&An.call(m,"callee")&&!Ate.call(m,"callee")},gi=De.isArray,mAe=gte?tc(gte):xNe;function fl(m){return m!=null&&eR(m.length)&&!Nf(m)}function Gs(m){return Ps(m)&&fl(m)}function _Ae(m){return m===!0||m===!1||Ps(m)&&La(m)==ae}var Lp=TDe||k7,vAe=pte?tc(pte):LNe;function bAe(m){return Ps(m)&&m.nodeType===1&&!pL(m)}function wAe(m){if(m==null)return!0;if(fl(m)&&(gi(m)||typeof m=="string"||typeof m.splice=="function"||Lp(m)||pC(m)||Sv(m)))return!m.length;var C=Yo(m);if(C==Ot||C==Ur)return!m.size;if(fL(m))return!$W(m).length;for(var L in m)if(An.call(m,L))return!1;return!0}function CAe(m,C){return dL(m,C)}function yAe(m,C,L){L=typeof L=="function"?L:t;var R=L?L(m,C):t;return R===t?dL(m,C,t,L):!!R}function m7(m){if(!Ps(m))return!1;var C=La(m);return C==Ue||C==Ae||typeof m.message=="string"&&typeof m.name=="string"&&!pL(m)}function SAe(m){return typeof m=="number"&&Pte(m)}function Nf(m){if(!ys(m))return!1;var C=La(m);return C==qe||C==vt||C==Z||C==es}function tne(m){return typeof m=="number"&&m==bi(m)}function eR(m){return typeof m=="number"&&m>-1&&m%1==0&&m<=te}function ys(m){var C=typeof m;return m!=null&&(C=="object"||C=="function")}function Ps(m){return m!=null&&typeof m=="object"}var ine=mte?tc(mte):ENe;function xAe(m,C){return m===C||UW(m,C,o7(C))}function LAe(m,C,L){return L=typeof L=="function"?L:t,UW(m,C,o7(C),L)}function kAe(m){return nne(m)&&m!=+m}function EAe(m){if(dTe(m))throw new fi(r);return Gte(m)}function IAe(m){return m===null}function DAe(m){return m==null}function nne(m){return typeof m=="number"||Ps(m)&&La(m)==on}function pL(m){if(!Ps(m)||La(m)!=Rn)return!1;var C=ET(m);if(C===null)return!0;var L=An.call(C,"constructor")&&C.constructor;return typeof L=="function"&&L instanceof L&&ST.call(L)==LDe}var _7=_te?tc(_te):INe;function NAe(m){return tne(m)&&m>=-te&&m<=te}var sne=vte?tc(vte):DNe;function tR(m){return typeof m=="string"||!gi(m)&&Ps(m)&&La(m)==jc}function nc(m){return typeof m=="symbol"||Ps(m)&&La(m)==$o}var pC=bte?tc(bte):NNe;function TAe(m){return m===t}function RAe(m){return Ps(m)&&Yo(m)==Sr}function AAe(m){return Ps(m)&&La(m)==dl}var MAe=jT(jW),PAe=jT(function(m,C){return m<=C});function rne(m){if(!m)return[];if(fl(m))return tR(m)?Vd(m):hl(m);if(iL&&m[iL])return fDe(m[iL]());var C=Yo(m),L=C==Ot?RW:C==Ur?wT:mC;return L(m)}function Tf(m){if(!m)return m===0?m:0;if(m=ed(m),m===ve||m===-ve){var C=m<0?-1:1;return C*ce}return m===m?m:0}function bi(m){var C=Tf(m),L=C%1;return C===C?L?C-L:C:0}function one(m){return m?bv(bi(m),0,Ce):0}function ed(m){if(typeof m=="number")return m;if(nc(m))return Ie;if(ys(m)){var C=typeof m.valueOf=="function"?m.valueOf():m;m=ys(C)?C+"":C}if(typeof m!="string")return m===0?m:+m;m=Lte(m);var L=fv.test(m);return L||fe.test(m)?ZIe(m.slice(2),L?2:8):xa.test(m)?Ie:+m}function ane(m){return Ju(m,gl(m))}function OAe(m){return m?bv(bi(m),-te,te):m===0?m:0}function xn(m){return m==null?"":ic(m)}var FAe=hC(function(m,C){if(fL(C)||fl(C)){Ju(C,Gr(C),m);return}for(var L in C)An.call(C,L)&&aL(m,L,C[L])}),lne=hC(function(m,C){Ju(C,gl(C),m)}),iR=hC(function(m,C,L,R){Ju(C,gl(C),m,R)}),BAe=hC(function(m,C,L,R){Ju(C,Gr(C),m,R)}),WAe=If(BW);function HAe(m,C){var L=uC(m);return C==null?L:Hte(L,C)}var VAe=ki(function(m,C){m=Gn(m);var L=-1,R=C.length,O=R>2?C[2]:t;for(O&&ka(C[0],C[1],O)&&(R=1);++L<R;)for(var K=C[L],ie=gl(K),le=-1,me=ie.length;++le<me;){var Fe=ie[le],We=m[Fe];(We===t||Ud(We,lC[Fe])&&!An.call(m,Fe))&&(m[Fe]=K[Fe])}return m}),zAe=ki(function(m){return m.push(t,Lie),ec(cne,t,m)});function UAe(m,C){return Cte(m,Qt(C,3),Qu)}function $Ae(m,C){return Cte(m,Qt(C,3),HW)}function jAe(m,C){return m==null?m:WW(m,Qt(C,3),gl)}function KAe(m,C){return m==null?m:jte(m,Qt(C,3),gl)}function qAe(m,C){return m&&Qu(m,Qt(C,3))}function GAe(m,C){return m&&HW(m,Qt(C,3))}function YAe(m){return m==null?[]:FT(m,Gr(m))}function ZAe(m){return m==null?[]:FT(m,gl(m))}function v7(m,C,L){var R=m==null?t:wv(m,C);return R===t?L:R}function XAe(m,C){return m!=null&&Iie(m,C,wNe)}function b7(m,C){return m!=null&&Iie(m,C,CNe)}var QAe=wie(function(m,C,L){C!=null&&typeof C.toString!="function"&&(C=xT.call(C)),m[C]=L},C7(pl)),JAe=wie(function(m,C,L){C!=null&&typeof C.toString!="function"&&(C=xT.call(C)),An.call(m,C)?m[C].push(L):m[C]=[L]},Qt),e2e=ki(cL);function Gr(m){return fl(m)?Bte(m):$W(m)}function gl(m){return fl(m)?Bte(m,!0):TNe(m)}function t2e(m,C){var L={};return C=Qt(C,3),Qu(m,function(R,O,K){kf(L,C(R,O,K),R)}),L}function i2e(m,C){var L={};return C=Qt(C,3),Qu(m,function(R,O,K){kf(L,O,C(R,O,K))}),L}var n2e=hC(function(m,C,L){BT(m,C,L)}),cne=hC(function(m,C,L,R){BT(m,C,L,R)}),s2e=If(function(m,C){var L={};if(m==null)return L;var R=!1;C=fs(C,function(K){return K=Sp(K,m),R||(R=K.length>1),K}),Ju(m,s7(m),L),R&&(L=Xc(L,u|h|f,QNe));for(var O=C.length;O--;)ZW(L,C[O]);return L});function r2e(m,C){return dne(m,JT(Qt(C)))}var o2e=If(function(m,C){return m==null?{}:ANe(m,C)});function dne(m,C){if(m==null)return{};var L=fs(s7(m),function(R){return[R]});return C=Qt(C),tie(m,L,function(R,O){return C(R,O[0])})}function a2e(m,C,L){C=Sp(C,m);var R=-1,O=C.length;for(O||(O=1,m=t);++R<O;){var K=m==null?t:m[eh(C[R])];K===t&&(R=O,K=L),m=Nf(K)?K.call(m):K}return m}function l2e(m,C,L){return m==null?m:uL(m,C,L)}function c2e(m,C,L,R){return R=typeof R=="function"?R:t,m==null?m:uL(m,C,L,R)}var une=Sie(Gr),hne=Sie(gl);function d2e(m,C,L){var R=gi(m),O=R||Lp(m)||pC(m);if(C=Qt(C,4),L==null){var K=m&&m.constructor;O?L=R?new K:[]:ys(m)?L=Nf(K)?uC(ET(m)):{}:L={}}return(O?Gc:Qu)(m,function(ie,le,me){return C(L,ie,le,me)}),L}function u2e(m,C){return m==null?!0:ZW(m,C)}function h2e(m,C,L){return m==null?m:oie(m,C,JW(L))}function f2e(m,C,L,R){return R=typeof R=="function"?R:t,m==null?m:oie(m,C,JW(L),R)}function mC(m){return m==null?[]:TW(m,Gr(m))}function g2e(m){return m==null?[]:TW(m,gl(m))}function p2e(m,C,L){return L===t&&(L=C,C=t),L!==t&&(L=ed(L),L=L===L?L:0),C!==t&&(C=ed(C),C=C===C?C:0),bv(ed(m),C,L)}function m2e(m,C,L){return C=Tf(C),L===t?(L=C,C=0):L=Tf(L),m=ed(m),yNe(m,C,L)}function _2e(m,C,L){if(L&&typeof L!="boolean"&&ka(m,C,L)&&(C=L=t),L===t&&(typeof C=="boolean"?(L=C,C=t):typeof m=="boolean"&&(L=m,m=t)),m===t&&C===t?(m=0,C=1):(m=Tf(m),C===t?(C=m,m=0):C=Tf(C)),m>C){var R=m;m=C,C=R}if(L||m%1||C%1){var O=Ote();return Go(m+O*(C-m+YIe("1e-"+((O+"").length-1))),C)}return qW(m,C)}var v2e=fC(function(m,C,L){return C=C.toLowerCase(),m+(L?fne(C):C)});function fne(m){return w7(xn(m).toLowerCase())}function gne(m){return m=xn(m),m&&m.replace(Ct,lDe).replace(WIe,"")}function b2e(m,C,L){m=xn(m),C=ic(C);var R=m.length;L=L===t?R:bv(bi(L),0,R);var O=L;return L-=C.length,L>=0&&m.slice(L,O)==C}function w2e(m){return m=xn(m),m&&uv.test(m)?m.replace(Qi,cDe):m}function C2e(m){return m=xn(m),m&&de.test(m)?m.replace(se,"\\$&"):m}var y2e=fC(function(m,C,L){return m+(L?"-":"")+C.toLowerCase()}),S2e=fC(function(m,C,L){return m+(L?" ":"")+C.toLowerCase()}),x2e=_ie("toLowerCase");function L2e(m,C,L){m=xn(m),C=bi(C);var R=C?oC(m):0;if(!C||R>=C)return m;var O=(C-R)/2;return $T(TT(O),L)+m+$T(NT(O),L)}function k2e(m,C,L){m=xn(m),C=bi(C);var R=C?oC(m):0;return C&&R<C?m+$T(C-R,L):m}function E2e(m,C,L){m=xn(m),C=bi(C);var R=C?oC(m):0;return C&&R<C?$T(C-R,L)+m:m}function I2e(m,C,L){return L||C==null?C=0:C&&(C=+C),PDe(xn(m).replace(be,""),C||0)}function D2e(m,C,L){return(L?ka(m,C,L):C===t)?C=1:C=bi(C),GW(xn(m),C)}function N2e(){var m=arguments,C=xn(m[0]);return m.length<3?C:C.replace(m[1],m[2])}var T2e=fC(function(m,C,L){return m+(L?"_":"")+C.toLowerCase()});function R2e(m,C,L){return L&&typeof L!="number"&&ka(m,C,L)&&(C=L=t),L=L===t?Ce:L>>>0,L?(m=xn(m),m&&(typeof C=="string"||C!=null&&!_7(C))&&(C=ic(C),!C&&rC(m))?xp(Vd(m),0,L):m.split(C,L)):[]}var A2e=fC(function(m,C,L){return m+(L?" ":"")+w7(C)});function M2e(m,C,L){return m=xn(m),L=L==null?0:bv(bi(L),0,m.length),C=ic(C),m.slice(L,L+C.length)==C}function P2e(m,C,L){var R=V.templateSettings;L&&ka(m,C,L)&&(C=t),m=xn(m),C=iR({},C,R,xie);var O=iR({},C.imports,R.imports,xie),K=Gr(O),ie=TW(O,K),le,me,Fe=0,We=C.interpolate||bn,je="__p += '",ft=AW((C.escape||bn).source+"|"+We.source+"|"+(We===Kt?Sn:bn).source+"|"+(C.evaluate||bn).source+"|$","g"),Rt="//# sourceURL="+(An.call(C,"sourceURL")?(C.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++$Ie+"]")+`
`;m.replace(ft,function(ti,Ri,Ui,sc,Ea,rc){return Ui||(Ui=sc),je+=m.slice(Fe,rc).replace(Kr,dDe),Ri&&(le=!0,je+=`' +
__e(`+Ri+`) +
'`),Ea&&(me=!0,je+=`';
`+Ea+`;
__p += '`),Ui&&(je+=`' +
((__t = (`+Ui+`)) == null ? '' : __t) +
'`),Fe=rc+ti.length,ti}),je+=`';
`;var ei=An.call(C,"variable")&&C.variable;if(!ei)je=`with (obj) {
`+je+`
}
`;else if(Ii.test(ei))throw new fi(a);je=(me?je.replace(ht,""):je).replace(zi,"$1").replace(hn,"$1;"),je="function("+(ei||"obj")+`) {
`+(ei?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(le?", __e = _.escape":"")+(me?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+je+`return __p
}`;var xi=mne(function(){return wn(K,Rt+"return "+je).apply(t,ie)});if(xi.source=je,m7(xi))throw xi;return xi}function O2e(m){return xn(m).toLowerCase()}function F2e(m){return xn(m).toUpperCase()}function B2e(m,C,L){if(m=xn(m),m&&(L||C===t))return Lte(m);if(!m||!(C=ic(C)))return m;var R=Vd(m),O=Vd(C),K=kte(R,O),ie=Ete(R,O)+1;return xp(R,K,ie).join("")}function W2e(m,C,L){if(m=xn(m),m&&(L||C===t))return m.slice(0,Dte(m)+1);if(!m||!(C=ic(C)))return m;var R=Vd(m),O=Ete(R,Vd(C))+1;return xp(R,0,O).join("")}function H2e(m,C,L){if(m=xn(m),m&&(L||C===t))return m.replace(be,"");if(!m||!(C=ic(C)))return m;var R=Vd(m),O=kte(R,Vd(C));return xp(R,O).join("")}function V2e(m,C){var L=H,R=z;if(ys(C)){var O="separator"in C?C.separator:O;L="length"in C?bi(C.length):L,R="omission"in C?ic(C.omission):R}m=xn(m);var K=m.length;if(rC(m)){var ie=Vd(m);K=ie.length}if(L>=K)return m;var le=L-oC(R);if(le<1)return R;var me=ie?xp(ie,0,le).join(""):m.slice(0,le);if(O===t)return me+R;if(ie&&(le+=me.length-le),_7(O)){if(m.slice(le).search(O)){var Fe,We=me;for(O.global||(O=AW(O.source,xn(jr.exec(O))+"g")),O.lastIndex=0;Fe=O.exec(We);)var je=Fe.index;me=me.slice(0,je===t?le:je)}}else if(m.indexOf(ic(O),le)!=le){var ft=me.lastIndexOf(O);ft>-1&&(me=me.slice(0,ft))}return me+R}function z2e(m){return m=xn(m),m&&Sa.test(m)?m.replace(go,_De):m}var U2e=fC(function(m,C,L){return m+(L?" ":"")+C.toUpperCase()}),w7=_ie("toUpperCase");function pne(m,C,L){return m=xn(m),C=L?t:C,C===t?hDe(m)?wDe(m):nDe(m):m.match(C)||[]}var mne=ki(function(m,C){try{return ec(m,t,C)}catch(L){return m7(L)?L:new fi(L)}}),$2e=If(function(m,C){return Gc(C,function(L){L=eh(L),kf(m,L,g7(m[L],m))}),m});function j2e(m){var C=m==null?0:m.length,L=Qt();return m=C?fs(m,function(R){if(typeof R[1]!="function")throw new Yc(o);return[L(R[0]),R[1]]}):[],ki(function(R){for(var O=-1;++O<C;){var K=m[O];if(ec(K[0],this,R))return ec(K[1],this,R)}})}function K2e(m){return _Ne(Xc(m,u))}function C7(m){return function(){return m}}function q2e(m,C){return m==null||m!==m?C:m}var G2e=bie(),Y2e=bie(!0);function pl(m){return m}function y7(m){return Yte(typeof m=="function"?m:Xc(m,u))}function Z2e(m){return Xte(Xc(m,u))}function X2e(m,C){return Qte(m,Xc(C,u))}var Q2e=ki(function(m,C){return function(L){return cL(L,m,C)}}),J2e=ki(function(m,C){return function(L){return cL(m,L,C)}});function S7(m,C,L){var R=Gr(C),O=FT(C,R);L==null&&!(ys(C)&&(O.length||!R.length))&&(L=C,C=m,m=this,O=FT(C,Gr(C)));var K=!(ys(L)&&"chain"in L)||!!L.chain,ie=Nf(m);return Gc(O,function(le){var me=C[le];m[le]=me,ie&&(m.prototype[le]=function(){var Fe=this.__chain__;if(K||Fe){var We=m(this.__wrapped__),je=We.__actions__=hl(this.__actions__);return je.push({func:me,args:arguments,thisArg:m}),We.__chain__=Fe,We}return me.apply(m,vp([this.value()],arguments))})}),m}function eMe(){return po._===this&&(po._=kDe),this}function x7(){}function tMe(m){return m=bi(m),ki(function(C){return Jte(C,m)})}var iMe=t7(fs),nMe=t7(wte),sMe=t7(kW);function _ne(m){return l7(m)?EW(eh(m)):MNe(m)}function rMe(m){return function(C){return m==null?t:wv(m,C)}}var oMe=Cie(),aMe=Cie(!0);function L7(){return[]}function k7(){return!1}function lMe(){return{}}function cMe(){return""}function dMe(){return!0}function uMe(m,C){if(m=bi(m),m<1||m>te)return[];var L=Ce,R=Go(m,Ce);C=Qt(C),m-=Ce;for(var O=NW(R,C);++L<m;)C(L);return O}function hMe(m){return gi(m)?fs(m,eh):nc(m)?[m]:hl(Fie(xn(m)))}function fMe(m){var C=++xDe;return xn(m)+C}var gMe=UT(function(m,C){return m+C},0),pMe=i7("ceil"),mMe=UT(function(m,C){return m/C},1),_Me=i7("floor");function vMe(m){return m&&m.length?OT(m,pl,VW):t}function bMe(m,C){return m&&m.length?OT(m,Qt(C,2),VW):t}function wMe(m){return Ste(m,pl)}function CMe(m,C){return Ste(m,Qt(C,2))}function yMe(m){return m&&m.length?OT(m,pl,jW):t}function SMe(m,C){return m&&m.length?OT(m,Qt(C,2),jW):t}var xMe=UT(function(m,C){return m*C},1),LMe=i7("round"),kMe=UT(function(m,C){return m-C},0);function EMe(m){return m&&m.length?DW(m,pl):0}function IMe(m,C){return m&&m.length?DW(m,Qt(C,2)):0}return V.after=ZRe,V.ary=Gie,V.assign=FAe,V.assignIn=lne,V.assignInWith=iR,V.assignWith=BAe,V.at=WAe,V.before=Yie,V.bind=g7,V.bindAll=$2e,V.bindKey=Zie,V.castArray=lAe,V.chain=jie,V.chunk=_Te,V.compact=vTe,V.concat=bTe,V.cond=j2e,V.conforms=K2e,V.constant=C7,V.countBy=ERe,V.create=HAe,V.curry=Xie,V.curryRight=Qie,V.debounce=Jie,V.defaults=VAe,V.defaultsDeep=zAe,V.defer=XRe,V.delay=QRe,V.difference=wTe,V.differenceBy=CTe,V.differenceWith=yTe,V.drop=STe,V.dropRight=xTe,V.dropRightWhile=LTe,V.dropWhile=kTe,V.fill=ETe,V.filter=DRe,V.flatMap=RRe,V.flatMapDeep=ARe,V.flatMapDepth=MRe,V.flatten=Vie,V.flattenDeep=ITe,V.flattenDepth=DTe,V.flip=JRe,V.flow=G2e,V.flowRight=Y2e,V.fromPairs=NTe,V.functions=YAe,V.functionsIn=ZAe,V.groupBy=PRe,V.initial=RTe,V.intersection=ATe,V.intersectionBy=MTe,V.intersectionWith=PTe,V.invert=QAe,V.invertBy=JAe,V.invokeMap=FRe,V.iteratee=y7,V.keyBy=BRe,V.keys=Gr,V.keysIn=gl,V.map=ZT,V.mapKeys=t2e,V.mapValues=i2e,V.matches=Z2e,V.matchesProperty=X2e,V.memoize=QT,V.merge=n2e,V.mergeWith=cne,V.method=Q2e,V.methodOf=J2e,V.mixin=S7,V.negate=JT,V.nthArg=tMe,V.omit=s2e,V.omitBy=r2e,V.once=eAe,V.orderBy=WRe,V.over=iMe,V.overArgs=tAe,V.overEvery=nMe,V.overSome=sMe,V.partial=p7,V.partialRight=ene,V.partition=HRe,V.pick=o2e,V.pickBy=dne,V.property=_ne,V.propertyOf=rMe,V.pull=WTe,V.pullAll=Uie,V.pullAllBy=HTe,V.pullAllWith=VTe,V.pullAt=zTe,V.range=oMe,V.rangeRight=aMe,V.rearg=iAe,V.reject=URe,V.remove=UTe,V.rest=nAe,V.reverse=h7,V.sampleSize=jRe,V.set=l2e,V.setWith=c2e,V.shuffle=KRe,V.slice=$Te,V.sortBy=YRe,V.sortedUniq=XTe,V.sortedUniqBy=QTe,V.split=R2e,V.spread=sAe,V.tail=JTe,V.take=eRe,V.takeRight=tRe,V.takeRightWhile=iRe,V.takeWhile=nRe,V.tap=vRe,V.throttle=rAe,V.thru=YT,V.toArray=rne,V.toPairs=une,V.toPairsIn=hne,V.toPath=hMe,V.toPlainObject=ane,V.transform=d2e,V.unary=oAe,V.union=sRe,V.unionBy=rRe,V.unionWith=oRe,V.uniq=aRe,V.uniqBy=lRe,V.uniqWith=cRe,V.unset=u2e,V.unzip=f7,V.unzipWith=$ie,V.update=h2e,V.updateWith=f2e,V.values=mC,V.valuesIn=g2e,V.without=dRe,V.words=pne,V.wrap=aAe,V.xor=uRe,V.xorBy=hRe,V.xorWith=fRe,V.zip=gRe,V.zipObject=pRe,V.zipObjectDeep=mRe,V.zipWith=_Re,V.entries=une,V.entriesIn=hne,V.extend=lne,V.extendWith=iR,S7(V,V),V.add=gMe,V.attempt=mne,V.camelCase=v2e,V.capitalize=fne,V.ceil=pMe,V.clamp=p2e,V.clone=cAe,V.cloneDeep=uAe,V.cloneDeepWith=hAe,V.cloneWith=dAe,V.conformsTo=fAe,V.deburr=gne,V.defaultTo=q2e,V.divide=mMe,V.endsWith=b2e,V.eq=Ud,V.escape=w2e,V.escapeRegExp=C2e,V.every=IRe,V.find=NRe,V.findIndex=Wie,V.findKey=UAe,V.findLast=TRe,V.findLastIndex=Hie,V.findLastKey=$Ae,V.floor=_Me,V.forEach=Kie,V.forEachRight=qie,V.forIn=jAe,V.forInRight=KAe,V.forOwn=qAe,V.forOwnRight=GAe,V.get=v7,V.gt=gAe,V.gte=pAe,V.has=XAe,V.hasIn=b7,V.head=zie,V.identity=pl,V.includes=ORe,V.indexOf=TTe,V.inRange=m2e,V.invoke=e2e,V.isArguments=Sv,V.isArray=gi,V.isArrayBuffer=mAe,V.isArrayLike=fl,V.isArrayLikeObject=Gs,V.isBoolean=_Ae,V.isBuffer=Lp,V.isDate=vAe,V.isElement=bAe,V.isEmpty=wAe,V.isEqual=CAe,V.isEqualWith=yAe,V.isError=m7,V.isFinite=SAe,V.isFunction=Nf,V.isInteger=tne,V.isLength=eR,V.isMap=ine,V.isMatch=xAe,V.isMatchWith=LAe,V.isNaN=kAe,V.isNative=EAe,V.isNil=DAe,V.isNull=IAe,V.isNumber=nne,V.isObject=ys,V.isObjectLike=Ps,V.isPlainObject=pL,V.isRegExp=_7,V.isSafeInteger=NAe,V.isSet=sne,V.isString=tR,V.isSymbol=nc,V.isTypedArray=pC,V.isUndefined=TAe,V.isWeakMap=RAe,V.isWeakSet=AAe,V.join=OTe,V.kebabCase=y2e,V.last=Jc,V.lastIndexOf=FTe,V.lowerCase=S2e,V.lowerFirst=x2e,V.lt=MAe,V.lte=PAe,V.max=vMe,V.maxBy=bMe,V.mean=wMe,V.meanBy=CMe,V.min=yMe,V.minBy=SMe,V.stubArray=L7,V.stubFalse=k7,V.stubObject=lMe,V.stubString=cMe,V.stubTrue=dMe,V.multiply=xMe,V.nth=BTe,V.noConflict=eMe,V.noop=x7,V.now=XT,V.pad=L2e,V.padEnd=k2e,V.padStart=E2e,V.parseInt=I2e,V.random=_2e,V.reduce=VRe,V.reduceRight=zRe,V.repeat=D2e,V.replace=N2e,V.result=a2e,V.round=LMe,V.runInContext=pe,V.sample=$Re,V.size=qRe,V.snakeCase=T2e,V.some=GRe,V.sortedIndex=jTe,V.sortedIndexBy=KTe,V.sortedIndexOf=qTe,V.sortedLastIndex=GTe,V.sortedLastIndexBy=YTe,V.sortedLastIndexOf=ZTe,V.startCase=A2e,V.startsWith=M2e,V.subtract=kMe,V.sum=EMe,V.sumBy=IMe,V.template=P2e,V.times=uMe,V.toFinite=Tf,V.toInteger=bi,V.toLength=one,V.toLower=O2e,V.toNumber=ed,V.toSafeInteger=OAe,V.toString=xn,V.toUpper=F2e,V.trim=B2e,V.trimEnd=W2e,V.trimStart=H2e,V.truncate=V2e,V.unescape=z2e,V.uniqueId=fMe,V.upperCase=U2e,V.upperFirst=w7,V.each=Kie,V.eachRight=qie,V.first=zie,S7(V,function(){var m={};return Qu(V,function(C,L){An.call(V.prototype,L)||(m[L]=C)}),m}(),{chain:!1}),V.VERSION=i,Gc(["bind","bindKey","curry","curryRight","partial","partialRight"],function(m){V[m].placeholder=V}),Gc(["drop","take"],function(m,C){Wi.prototype[m]=function(L){L=L===t?1:Er(bi(L),0);var R=this.__filtered__&&!C?new Wi(this):this.clone();return R.__filtered__?R.__takeCount__=Go(L,R.__takeCount__):R.__views__.push({size:Go(L,Ce),type:m+(R.__dir__<0?"Right":"")}),R},Wi.prototype[m+"Right"]=function(L){return this.reverse()[m](L).reverse()}}),Gc(["filter","map","takeWhile"],function(m,C){var L=C+1,R=L==j||L==oe;Wi.prototype[m]=function(O){var K=this.clone();return K.__iteratees__.push({iteratee:Qt(O,3),type:L}),K.__filtered__=K.__filtered__||R,K}}),Gc(["head","last"],function(m,C){var L="take"+(C?"Right":"");Wi.prototype[m]=function(){return this[L](1).value()[0]}}),Gc(["initial","tail"],function(m,C){var L="drop"+(C?"":"Right");Wi.prototype[m]=function(){return this.__filtered__?new Wi(this):this[L](1)}}),Wi.prototype.compact=function(){return this.filter(pl)},Wi.prototype.find=function(m){return this.filter(m).head()},Wi.prototype.findLast=function(m){return this.reverse().find(m)},Wi.prototype.invokeMap=ki(function(m,C){return typeof m=="function"?new Wi(this):this.map(function(L){return cL(L,m,C)})}),Wi.prototype.reject=function(m){return this.filter(JT(Qt(m)))},Wi.prototype.slice=function(m,C){m=bi(m);var L=this;return L.__filtered__&&(m>0||C<0)?new Wi(L):(m<0?L=L.takeRight(-m):m&&(L=L.drop(m)),C!==t&&(C=bi(C),L=C<0?L.dropRight(-C):L.take(C-m)),L)},Wi.prototype.takeRightWhile=function(m){return this.reverse().takeWhile(m).reverse()},Wi.prototype.toArray=function(){return this.take(Ce)},Qu(Wi.prototype,function(m,C){var L=/^(?:filter|find|map|reject)|While$/.test(C),R=/^(?:head|last)$/.test(C),O=V[R?"take"+(C=="last"?"Right":""):C],K=R||/^find/.test(C);O&&(V.prototype[C]=function(){var ie=this.__wrapped__,le=R?[1]:arguments,me=ie instanceof Wi,Fe=le[0],We=me||gi(ie),je=function(Ri){var Ui=O.apply(V,vp([Ri],le));return R&&ft?Ui[0]:Ui};We&&L&&typeof Fe=="function"&&Fe.length!=1&&(me=We=!1);var ft=this.__chain__,Rt=!!this.__actions__.length,ei=K&&!ft,xi=me&&!Rt;if(!K&&We){ie=xi?ie:new Wi(this);var ti=m.apply(ie,le);return ti.__actions__.push({func:YT,args:[je],thisArg:t}),new Zc(ti,ft)}return ei&&xi?m.apply(this,le):(ti=this.thru(je),ei?R?ti.value()[0]:ti.value():ti)})}),Gc(["pop","push","shift","sort","splice","unshift"],function(m){var C=CT[m],L=/^(?:push|sort|unshift)$/.test(m)?"tap":"thru",R=/^(?:pop|shift)$/.test(m);V.prototype[m]=function(){var O=arguments;if(R&&!this.__chain__){var K=this.value();return C.apply(gi(K)?K:[],O)}return this[L](function(ie){return C.apply(gi(ie)?ie:[],O)})}}),Qu(Wi.prototype,function(m,C){var L=V[C];if(L){var R=L.name+"";An.call(dC,R)||(dC[R]=[]),dC[R].push({name:C,func:L})}}),dC[zT(t,w).name]=[{name:"wrapper",func:t}],Wi.prototype.clone=zDe,Wi.prototype.reverse=UDe,Wi.prototype.value=$De,V.prototype.at=bRe,V.prototype.chain=wRe,V.prototype.commit=CRe,V.prototype.next=yRe,V.prototype.plant=xRe,V.prototype.reverse=LRe,V.prototype.toJSON=V.prototype.valueOf=V.prototype.value=kRe,V.prototype.first=V.prototype.head,iL&&(V.prototype[iL]=SRe),V},aC=CDe();pv?((pv.exports=aC)._=aC,yW._=aC):po._=aC}).call(KC)})(i4,i4.exports);var Fkt=i4.exports;const zp=[],ch=[],Fv=[],Bkt=new Okt({log:!1,structure:!0,onWarning:n=>{zp.push({line:0,column:0,message:n,severity:"warning",type:"schema"})},schema:{openapi:{type:"string",required:!1},swagger:{type:"string",required:!1},info:{type:"object",required:!0,schema:{title:{type:"string",required:!0},version:{type:"string",required:!0},description:{type:"string",required:!1}}},servers:{type:"array",required:!1,schema:{url:{type:"string",required:!0},description:{type:"string",required:!1}}},paths:{type:"object",required:!0,schema:{"*":{type:"object",schema:{get:{type:"object",required:!1},post:{type:"object",required:!1},put:{type:"object",required:!1},delete:{type:"object",required:!1},patch:{type:"object",required:!1}}}}},components:{type:"object",required:!1,schema:{schemas:{type:"object",required:!1},securitySchemes:{type:"object",required:!1}}},security:{type:"array",required:!1}}}),Wkt=Fkt.debounce(n=>Aee(n),300),Aee=n=>{var e,t,i;if(ch.length=0,zp.length=0,Fv.length=0,!n.trim()){const s={line:0,column:0,message:"YAML content cannot be empty",severity:"error",type:"syntax",suggestion:"Add some YAML content to get started"};return ch.push(s),{isValid:!1,error:s.message,errors:ch,warnings:zp,infos:Fv,severity:"error",suggestion:s.suggestion}}try{try{Z_e(n)}catch(s){const r=s,o={line:((e=r.mark)==null?void 0:e.line)||0,column:((t=r.mark)==null?void 0:t.column)||0,message:"YAML Syntax Error",severity:"error",type:"syntax",details:r.message,suggestion:Hkt(r.message)};return ch.push(o),{isValid:!1,errors:ch,warnings:zp,infos:Fv,error:o.message,details:r.message,lineNumber:o.line,column:o.column,severity:"error",suggestion:o.suggestion}}return Bkt.validate([n]),zp.length>0&&ch.length===0?{isValid:!0,errors:ch,warnings:zp,infos:Fv,severity:"warning",suggestion:"Your YAML is valid but could be improved"}:(Fv.push({line:0,column:0,message:"YAML is valid",severity:"info",type:"format"}),{isValid:!0,errors:ch,warnings:zp,infos:Fv,severity:"info"})}catch(s){const r={line:0,column:0,message:"OpenAPI Schema Validation Error",severity:"error",type:"schema",details:s instanceof Error?s.message:String(s)};if(s instanceof Error){const o=s.message,a=o.match(/line (\d+), column (\d+)/);a&&(r.line=parseInt(a[1],10),r.column=parseInt(a[2],10));const l=o.match(/at path "([^"]+)"/);l&&(r.source=l[1]),r.suggestion=Vkt(o)}return ch.push(r),{isValid:!1,errors:ch,warnings:zp,infos:Fv,error:r.message,lineNumber:r.line,column:r.column,details:r.details,severity:"error",path:(i=r.source)==null?void 0:i.split("."),suggestion:r.suggestion}}};function Hkt(n){return n.includes("end of the stream")?"Check for missing closing brackets or quotes":n.includes("duplicate key")?"Remove or rename the duplicate property":n.includes("bad indentation")?"Fix indentation - use 2 spaces per level":n.includes("tab characters")?"Replace tabs with spaces for indentation":n.includes("flow map")?"Check your YAML structure - make sure objects are properly formatted":n.includes("trailing comma")?"Remove trailing comma - YAML does not support trailing commas":"Check your YAML syntax against the OpenAPI specification"}function Vkt(n){return n.includes("required property")?"Add the missing required property":n.includes("invalid type")?"Correct the property type according to the OpenAPI schema":n.includes("paths")?"Every API needs at least one path - add an endpoint":n.includes("info")?"Add API information including title and version":n.includes("additionalProperty")?"Remove unknown property - it is not defined in the schema":n.includes("enum")?"Use one of the allowed values for this field":"Validate your schema against the OpenAPI specification"}function zkt(n,e){const t=[];return n.errors.forEach(i=>{t.push(H6(i,$2.Error,e))}),n.warnings.forEach(i=>{t.push(H6(i,$2.Warning,e))}),n.infos.forEach(i=>{i.line>0&&t.push(H6(i,$2.Info,e))}),t}function H6(n,e,t){const i=Math.max(0,n.line),s=t.getLineContent(i+1)||"",r=Math.min(Math.max(0,n.column),s.length);let o=i+1,a=r+1,l=i+1,c=s.length+1;if(n.range)o=n.range.start.line+1,a=n.range.start.column+1,l=n.range.end.line+1,c=n.range.end.column+1;else{const u=n.message.toLowerCase();if(u.includes("duplicate key")){const h=u.match(/duplicate key ['"]([^'"]+)['"]/i);if(h){const f=h[1],g=s.indexOf(f);g>=0&&(a=g+1,c=g+f.length+1)}}else if(u.includes("unexpected token")){const h=u.match(/unexpected token ['"]?([^'"]+)['"]?/i);if(h){const f=h[1],g=s.indexOf(f);g>=0&&(a=g+1,c=g+f.length+1)}}else if(u.includes("missing")){const h=u.match(/missing (?:required )?(?:field|property) ['"]([^'"]+)['"]/i);h&&h[1]}else if(u.includes("should be a")){const h=/:\s*(.+)$/,f=s.match(h);if(f){const g=f[1].trim(),p=s.lastIndexOf(g);p>=0&&(a=p+1,c=p+g.length+1)}}}let d=n.suggestion||"";if(!d){const u=n.message.toLowerCase();if(u.includes("unexpected end of file"))d="Add missing closing bracket or brace.";else if(u.includes("indentation")){const h=u.match(/expected (\d+) spaces/i);h?d=`Fix indentation to use ${h[1]} spaces.`:d="Correct the indentation to match the document structure."}else if(u.includes("duplicate key")){const h=u.match(/duplicate key ['"]([^'"]+)['"]/i);h&&(d=`Rename or remove the duplicate '${h[1]}' key.`)}else if(u.includes("missing")){const h=u.match(/missing (?:required )?(?:field|property) ['"]([^'"]+)['"]/i);h&&(d=`Add the required '${h[1]}' field.`)}else if(u.includes("should be a")){const h=u.match(/should be a (\w+)/i);h&&(d=`Change the value type to ${h[1]}.`)}}return{severity:e,message:n.message,startLineNumber:o,startColumn:a,endLineNumber:l,endColumn:c,source:n.type==="syntax"?"YAML Syntax":n.type==="schema"?"OpenAPI Schema":"YAML Format",code:n.code||"",tags:[],relatedInformation:n.details?[{resource:t.uri,message:n.details,startLineNumber:o,startColumn:a,endLineNumber:l,endColumn:c}]:[],...d&&{message:`${n.message}
Suggestion: ${d}`}}}function Jhe(n,e){const t=zkt(n,e);NJ.setModelMarkers(e,"yaml-validator",t)}function Ukt(n,e){const t={lineNumber:n.line+1,column:n.column+1};e.revealPositionInCenter(t),e.setPosition(t),e.focus()}var Mee="Collapsible",[$kt,lTt]=cp(Mee),[jkt,Pee]=$kt(Mee),ZEe=A.forwardRef((n,e)=>{const{__scopeCollapsible:t,open:i,defaultOpen:s,disabled:r,onOpenChange:o,...a}=n,[l=!1,c]=ef({prop:i,defaultProp:s,onChange:o});return k.jsx(jkt,{scope:t,disabled:r,contentId:Kh(),open:l,onOpenToggle:A.useCallback(()=>c(d=>!d),[c]),children:k.jsx(Zt.div,{"data-state":Fee(l),"data-disabled":r?"":void 0,...a,ref:e})})});ZEe.displayName=Mee;var XEe="CollapsibleTrigger",QEe=A.forwardRef((n,e)=>{const{__scopeCollapsible:t,...i}=n,s=Pee(XEe,t);return k.jsx(Zt.button,{type:"button","aria-controls":s.contentId,"aria-expanded":s.open||!1,"data-state":Fee(s.open),"data-disabled":s.disabled?"":void 0,disabled:s.disabled,...i,ref:e,onClick:Dt(n.onClick,s.onOpenToggle)})});QEe.displayName=XEe;var Oee="CollapsibleContent",JEe=A.forwardRef((n,e)=>{const{forceMount:t,...i}=n,s=Pee(Oee,n.__scopeCollapsible);return k.jsx(Hc,{present:t||s.open,children:({present:r})=>k.jsx(Kkt,{...i,ref:e,present:r})})});JEe.displayName=Oee;var Kkt=A.forwardRef((n,e)=>{const{__scopeCollapsible:t,present:i,children:s,...r}=n,o=Pee(Oee,t),[a,l]=A.useState(i),c=A.useRef(null),d=Yi(e,c),u=A.useRef(0),h=u.current,f=A.useRef(0),g=f.current,p=o.open||a,_=A.useRef(p),w=A.useRef();return A.useEffect(()=>{const b=requestAnimationFrame(()=>_.current=!1);return()=>cancelAnimationFrame(b)},[]),co(()=>{const b=c.current;if(b){w.current=w.current||{transitionDuration:b.style.transitionDuration,animationName:b.style.animationName},b.style.transitionDuration="0s",b.style.animationName="none";const y=b.getBoundingClientRect();u.current=y.height,f.current=y.width,_.current||(b.style.transitionDuration=w.current.transitionDuration,b.style.animationName=w.current.animationName),l(i)}},[o.open,i]),k.jsx(Zt.div,{"data-state":Fee(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!p,...r,ref:d,style:{"--radix-collapsible-content-height":h?`${h}px`:void 0,"--radix-collapsible-content-width":g?`${g}px`:void 0,...n.style},children:p&&s})});function Fee(n){return n?"open":"closed"}var qkt=ZEe;const V6=qkt,z6=QEe,U6=JEe,eIe=({errors:n,warnings:e,infos:t,onErrorClick:i,className:s=""})=>{const[r,o]=rt.useState({errors:!0,warnings:!0,infos:!1}),a=n.length+e.length+t.length,l=d=>{o(u=>({...u,[d]:!u[d]}))},c=d=>{switch(d){case"error":return k.jsx(i4e,{className:"h-4 w-4 text-red-500 mr-2 flex-shrink-0"});case"warning":return k.jsx(f4e,{className:"h-4 w-4 text-yellow-500 mr-2 flex-shrink-0"});case"info":return k.jsx(l4e,{className:"h-4 w-4 text-blue-500 mr-2 flex-shrink-0"});default:return k.jsx(t4e,{className:"h-4 w-4 mr-2 flex-shrink-0"})}};return k.jsxs("div",{className:vi("border rounded-lg overflow-hidden bg-background",s),children:[k.jsx("div",{className:"p-2 bg-muted/50 border-b flex items-center justify-between",children:k.jsxs("h3",{className:"text-sm font-medium",children:["Problems (",a,")"]})}),k.jsx(kZ,{className:"h-[200px]",children:k.jsxs("div",{className:"p-2",children:[n.length>0&&k.jsxs(V6,{open:r.errors,onOpenChange:()=>l("errors"),className:"mb-2",children:[k.jsxs(z6,{className:"flex items-center w-full text-left p-1 hover:bg-muted/30 rounded",children:[r.errors?k.jsx(zk,{className:"h-4 w-4 mr-1"}):k.jsx(n9,{className:"h-4 w-4 mr-1"}),k.jsxs("span",{className:"text-sm font-medium",children:["Errors (",n.length,")"]})]}),k.jsx(U6,{children:n.map((d,u)=>k.jsxs("div",{className:"flex items-start p-2 text-xs hover:bg-muted/30 rounded cursor-pointer ml-4",onClick:()=>i&&i(d),children:[c("error"),k.jsxs("div",{children:[k.jsx("div",{className:"font-medium",children:d.message}),k.jsxs("div",{className:"text-muted-foreground mt-1",children:["Line ",d.line+1,", Column ",d.column+1]}),d.suggestion&&k.jsxs("div",{className:"mt-1 text-green-600 dark:text-green-400",children:["Suggestion: ",d.suggestion]})]})]},`error-${u}`))})]}),e.length>0&&k.jsxs(V6,{open:r.warnings,onOpenChange:()=>l("warnings"),className:"mb-2",children:[k.jsxs(z6,{className:"flex items-center w-full text-left p-1 hover:bg-muted/30 rounded",children:[r.warnings?k.jsx(zk,{className:"h-4 w-4 mr-1"}):k.jsx(n9,{className:"h-4 w-4 mr-1"}),k.jsxs("span",{className:"text-sm font-medium",children:["Warnings (",e.length,")"]})]}),k.jsx(U6,{children:e.map((d,u)=>k.jsxs("div",{className:"flex items-start p-2 text-xs hover:bg-muted/30 rounded cursor-pointer ml-4",onClick:()=>i&&i(d),children:[c("warning"),k.jsxs("div",{children:[k.jsx("div",{className:"font-medium",children:d.message}),d.line>0&&k.jsxs("div",{className:"text-muted-foreground mt-1",children:["Line ",d.line+1,", Column ",d.column+1]}),d.suggestion&&k.jsxs("div",{className:"mt-1 text-yellow-600 dark:text-yellow-400",children:["Suggestion: ",d.suggestion]})]})]},`warning-${u}`))})]}),t.length>0&&k.jsxs(V6,{open:r.infos,onOpenChange:()=>l("infos"),children:[k.jsxs(z6,{className:"flex items-center w-full text-left p-1 hover:bg-muted/30 rounded",children:[r.infos?k.jsx(zk,{className:"h-4 w-4 mr-1"}):k.jsx(n9,{className:"h-4 w-4 mr-1"}),k.jsxs("span",{className:"text-sm font-medium",children:["Information (",t.length,")"]})]}),k.jsx(U6,{children:t.map((d,u)=>k.jsxs("div",{className:"flex items-start p-2 text-xs hover:bg-muted/30 rounded cursor-pointer ml-4",onClick:()=>i&&i(d),children:[c("info"),k.jsxs("div",{children:[k.jsx("div",{className:"font-medium",children:d.message}),d.line>0&&k.jsxs("div",{className:"text-muted-foreground mt-1",children:["Line ",d.line+1,", Column ",d.column+1]})]})]},`info-${u}`))})]}),a===0&&k.jsx("div",{className:"p-4 text-center text-muted-foreground text-sm",children:"No problems found in your YAML"})]})})]})},Gkt=({content:n,onChange:e,className:t="",showErrorPanel:i=!0})=>{const s=A.useRef(null),r=A.useRef(null),o=A.useRef(n),[a,l]=A.useState({isValid:!0,errors:[],warnings:[],infos:[]}),c=u=>{const h=Aee(u);if(l(h),s.current){const f=s.current.getModel();f&&Jhe(h,f)}return h};A.useEffect(()=>{if(r.current)return s.current=NJ.create(r.current,{value:n,language:"yaml",theme:"vs-dark",automaticLayout:!0,minimap:{enabled:!0},fontSize:14,lineNumbers:"on",renderLineHighlight:"all",scrollBeyondLastLine:!1,wordWrap:"on",folding:!0,lineDecorationsWidth:5,suggestOnTriggerCharacters:!0,formatOnPaste:!0,formatOnType:!0,hover:{enabled:!0,delay:300},quickSuggestions:{other:!0,comments:!1,strings:!0},cursorStyle:"line-thin",cursorWidth:3,renderWhitespace:"none",fixedOverflowWidgets:!0,mouseWheelZoom:!1,roundedSelection:!1}),s.current.onDidChangeModelContent(()=>{if(s.current){const u=s.current.getModel();if(u){const h=u.getValue();h!==o.current&&(o.current=h,e(h),Wkt(h).then(f=>{if(s.current){l(f);const g=s.current.getModel();g&&Jhe(f,g)}}))}}}),c(n),()=>{s.current&&s.current.dispose()}},[]),A.useEffect(()=>{if(!s.current||n===o.current)return;const u=s.current,h=u.hasTextFocus(),f=u.getPosition(),g=u.getSelection(),p=u.getModel();if(p&&(o.current=n,p.setValue(n),c(n),h&&f)){const _=p.getLineCount(),w=Math.min(f.lineNumber,_),b=p.getLineContent(w),y=Math.min(f.column,b.length+1);u.setPosition({lineNumber:w,column:y}),g&&u.setSelection(g),setTimeout(()=>{u&&(u.focus(),u.setPosition({lineNumber:w,column:y}),u.revealPositionInCenter({lineNumber:w,column:y}),u.render(!0))},50)}},[n]);const d=u=>{s.current&&u.line>=0&&Ukt(u,s.current)};return k.jsxs("div",{className:`flex flex-col ${t}`,children:[k.jsx("div",{ref:r,className:"min-h-[500px] border rounded-lg overflow-hidden"}),i&&(a.errors.length>0||a.warnings.length>0)&&k.jsxs("div",{className:"mt-4 border border-gray-200 rounded-lg p-4 bg-gray-50",children:[k.jsx("h3",{className:"text-lg font-semibold mb-2",children:a.errors.length>0?`YAML Errors (${a.errors.length})`:`YAML Warnings (${a.warnings.length})`}),k.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Click on any error or warning to jump to its location in the editor."}),k.jsx(eIe,{errors:a.errors,warnings:a.warnings,infos:a.infos,onErrorClick:d,className:"mt-2"})]})]})},Ykt=({content:n,onContentChange:e,className:t=""})=>{const i=A.useRef(n),[s,r]=A.useState([]),[o,a]=A.useState([]),l=u=>{const h=u.message;return h.includes("end of the stream")?"Check for missing closing quotes or brackets":h.includes("mapping values")?"Make sure to use proper indentation and colons for key-value pairs":h.includes("duplicate key")?"You have duplicate keys in your YAML, which is not allowed":"Review your YAML syntax and indentation"};A.useEffect(()=>{n!==i.current&&(i.current=n)},[n]);const c=u=>{i.current=u,requestAnimationFrame(()=>{e(u)}),setTimeout(()=>{d(u)},0)},d=u=>{var f,g;if(!u||!u.trim()){r([]),a([]);return}const h=Aee(u);r(h.errors),a(h.warnings);try{X_e.load(u)}catch(p){if(h.errors.length===0){const _=p,w={line:((f=_.mark)==null?void 0:f.line)!==void 0?_.mark.line:0,column:((g=_.mark)==null?void 0:g.column)!==void 0?_.mark.column:0,message:_.message||"Syntax error",severity:"error",type:"syntax",suggestion:l(_)};r([w])}}};return k.jsxs("div",{className:vi("yaml-advanced-editor-container flex flex-col space-y-2",t),children:[k.jsx("div",{className:"yaml-editor-content w-full",children:k.jsx(Gkt,{content:n,onChange:c,className:"h-[500px]",showErrorPanel:!1})}),(s.length>0||o.length>0)&&k.jsxs("div",{className:"yaml-editor-error-panel mt-2 border rounded-lg p-2 bg-background/50",children:[k.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.length>0&&k.jsxs(Lu,{variant:"destructive",className:"font-normal gap-1",children:[k.jsx(JFe,{size:14}),s.length," Error",s.length!==1?"s":""]}),o.length>0&&k.jsxs(Lu,{variant:"outline",className:"font-normal gap-1 bg-yellow-100 text-yellow-800 border-yellow-300",children:[k.jsx(a4e,{size:14}),o.length," Warning",o.length!==1?"s":""]})]}),k.jsx(eIe,{errors:s,warnings:o,infos:[],className:"max-h-[200px] overflow-auto"})]}),k.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:[k.jsx("p",{children:"This advanced editor provides real-time syntax checking and validation for your YAML files."}),s.length>0&&k.jsx("p",{className:"mt-1 text-red-700",children:"Fix the errors highlighted above to ensure your YAML is valid."})]})]})},Zkt=({spec:n,onNewProject:e})=>{var h;const{user:t}=DN(),[i,s]=A.useState(""),r=()=>{localStorage.clear(),e&&e(),rg({title:"Project Reset",description:"Started a new project, all form data has been cleared"})},a=(f=>{let g=`openapi: ${f.openapi||"3.0.0"}
`;return f.info&&(g+=`info:
`,f.info.title&&(g+=`  title: ${f.info.title}
`),f.info.description&&(g+=`  description: ${f.info.description}
`),f.info.version&&(g+=`  version: ${f.info.version}
`),f.info.contact&&(g+=`  contact:
`,f.info.contact.name&&(g+=`    name: ${f.info.contact.name}
`),f.info.contact.email&&(g+=`    email: ${f.info.contact.email}
`),f.info.contact.url&&(g+=`    url: ${f.info.contact.url}
`))),f.servers&&f.servers.length>0&&(g+=`servers:
`,f.servers.forEach(p=>{g+=`- url: ${p.url}
`,p.description&&(g+=`  description: ${p.description}
`)})),f.paths&&Object.keys(f.paths).length>0&&(g+=`paths:
`,Object.entries(f.paths).forEach(([p,_])=>{g+=`  ${p}:
`,Object.entries(_).forEach(([w,b])=>{var y,S;if(g+=`    ${w}:
`,b.summary&&(g+=`    summary: ${b.summary}
`),b.description&&(g+=`      description: ${b.description}
`),b.operationId&&(g+=`      operationId: ${b.operationId}
`),b.tags&&b.tags.length>0&&(g+=`      tags:
`,b.tags.forEach(x=>{g+=`      - ${x}
`})),b.security&&b.security.length>0&&(g+=`      security:
`,b.security.forEach(x=>{g+="      - ",Object.entries(x).forEach(([E,D],N)=>{N>0&&(g+="        "),g+=`${E}: `,Array.isArray(D)&&D.length>0?g+=`[ '${D.join("', '")}' ]
`:g+=`[]
`})})),b.parameters&&b.parameters.length>0&&(g+=`      parameters:
`,b.parameters.forEach(x=>{g+="      - name: "+x.name+`
`,g+="        in: "+x.in+`
`,x.required&&(g+=`        required: true
`),x.description&&(g+="        description: "+x.description+`
`),x["x-zia-agent-param-type"]&&(g+="        x-zia-agent-param-type: "+x["x-zia-agent-param-type"]+`
`),x.schema&&(g+=`        schema:
`,g+="          type: "+x.schema.type+`
`)})),b.requestBody){g=g+`      requestBody:
`,b.requestBody.required&&(g=g+`        required: true
`),g=g+`        content:
`,g=g+`          application/json:
`,g=g+`            schema:
`;const x=(S=(y=b.requestBody.content)==null?void 0:y["application/json"])==null?void 0:S.schema;x!=null&&x.$ref?g=g+`              $ref: '${x.$ref}'
`:g=g+`              type: object
`,g=g+`            x-zia-agent-param-type: dynamic
`}b.responses&&b.responses.length>0&&(g+=`      responses:
`,b.responses.forEach(x=>{var E,D;g+=`        '${x.statusCode}':
`,g+=`          description: ${x.description}
`,(D=(E=x.content)==null?void 0:E["application/json"])!=null&&D.schema&&(g+=`          content:
`,g+=`            application/json:
`,g+=`              schema:
`,x.content["application/json"].schema.$ref?g+=`                $ref: '${x.content["application/json"].schema.$ref}'
`:g+=`                type: ${x.content["application/json"].schema.type||"object"}
`)}))})})),f.components&&(g+=`components:
`,f.components.schemas&&Object.keys(f.components.schemas).length>0&&(g+=`  schemas:
`,Object.entries(f.components.schemas).forEach(([p,_])=>{g+=`    ${p}:
`,g+=`      type: ${_.type}
`,_.properties&&Object.keys(_.properties).length>0&&(g+=`      properties:
`,Object.entries(_.properties).forEach(([w,b])=>{g+=`        ${w}:
`,g+=`          type: ${b.type}
`,b.description&&(g+=`          description: ${b.description}
`),b["x-zia-agent-param-type"]&&(g+=`          x-zia-agent-param-type: ${b["x-zia-agent-param-type"]}
`)})),_.required&&_.required.length>0&&(g+=`      required:
`,_.required.forEach(w=>{g+=`      - ${w}
`}))})),f.components.securitySchemes&&Object.keys(f.components.securitySchemes).length>0&&(g+=`  securitySchemes:
`,Object.entries(f.components.securitySchemes).forEach(([p,_])=>{g+=`    ${p}:
`,g+=`      type: ${_.type}
`,_.scheme&&(g+=`      scheme: ${_.scheme}
`),_.bearerFormat&&(g+=`      bearerFormat: ${_.bearerFormat}
`),_.flows&&(g+=`      flows:
`,Object.entries(_.flows).forEach(([w,b])=>{g+=`        ${w}:
`,b.authorizationUrl&&(g+=`          authorizationUrl: ${b.authorizationUrl}
`),b.tokenUrl&&(g+=`          tokenUrl: ${b.tokenUrl}
`),b.scopes&&Object.keys(b.scopes).length>0&&(g+=`          scopes:
`,Object.entries(b.scopes).forEach(([y,S])=>{g+=`            '${y}': ${S}
`}))}))}))),f.security&&f.security.length>0&&(g+=`security:
`,f.security.forEach(p=>{g+="- ",Object.entries(p).forEach(([_,w],b)=>{b>0&&(g+="  "),g+=`${_}: `,Array.isArray(w)&&w.length>0?g+=`[ '${w.join("', '")}' ]
`:g+=`[]
`})})),g})(n);rt.useEffect(()=>{s(a)},[a]);const l=()=>{navigator.clipboard.writeText(a),rg({title:"Copied!",description:"YAML has been copied to clipboard"})},c=()=>{var _,w;const f=new Blob([a],{type:"text/yaml"}),g=URL.createObjectURL(f),p=document.createElement("a");p.href=g,p.download=`${((w=(_=n.info)==null?void 0:_.title)==null?void 0:w.replace(/\s+/g,"-").toLowerCase())||"openapi"}.yaml`,document.body.appendChild(p),p.click(),document.body.removeChild(p),URL.revokeObjectURL(g),rg({title:"Downloaded!",description:"YAML file has been downloaded"})};(()=>{var w,b;const f=Object.keys(n.paths||{}).length,g=Object.keys(((w=n.components)==null?void 0:w.schemas)||{}).length,p=(n.servers||[]).length,_=Object.keys(((b=n.components)==null?void 0:b.securitySchemes)||{}).length;return{pathCount:f,schemaCount:g,serverCount:p,securityCount:_}})();const u=f=>{s(f)};return k.jsxs("div",{className:"space-y-4",children:[k.jsx("div",{className:"flex gap-2 relative",children:k.jsx($me,{delayDuration:100,children:k.jsxs("div",{className:"flex gap-2 flex-1 z-10",children:[k.jsxs(a9,{children:[k.jsx(l9,{asChild:!0,children:k.jsx($n,{onClick:t?l:()=>rg({title:"Sign in required",description:"Please sign in to copy the YAML"}),variant:"outline",size:"sm",className:`flex-1 ${t?"":"opacity-50 cursor-not-allowed"}`,children:k.jsxs("span",{className:"flex items-center",children:[k.jsx(n4e,{className:"w-4 h-4 mr-1"}),t?"Copy YAML":"Sign in to copy",!t&&k.jsx(Pse,{className:"w-4 h-4 ml-2 text-gray-400"})]})})}),k.jsx(o2,{side:"top",className:"bg-white text-gray-900 border shadow-sm z-50",children:t?"Copy YAML to clipboard":"Sign in to copy YAML"})]}),k.jsxs(a9,{children:[k.jsx(l9,{asChild:!0,children:k.jsx($n,{onClick:t?c:()=>rg({title:"Sign in required",description:"Please sign in to download the YAML"}),variant:"outline",size:"sm",className:`flex-1 ${t?"":"opacity-50 cursor-not-allowed"}`,children:k.jsxs("span",{className:"flex items-center",children:[k.jsx(r4e,{className:"w-4 h-4 mr-1"}),t?"Download YAML":"Sign in to download",!t&&k.jsx(Pse,{className:"w-4 h-4 ml-2 text-gray-400"})]})})}),k.jsx(o2,{side:"top",className:"bg-white text-gray-900 border shadow-sm z-50",children:t?"Download YAML file":"Sign in to download YAML"})]}),k.jsxs(a9,{children:[k.jsx(l9,{asChild:!0,children:k.jsx($n,{onClick:r,variant:"outline",size:"sm",className:"flex-1",children:k.jsxs("span",{className:"flex items-center",children:[k.jsx(c4e,{className:"w-4 h-4 mr-1"}),"Start New Project"]})})}),k.jsx(o2,{side:"top",className:"bg-white text-gray-900 border shadow-sm z-50",children:"Clear all data and start a new project"})]})]})})}),t?k.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[k.jsxs("div",{className:"flex items-center justify-between p-2 bg-secondary/20 border-b",children:[k.jsxs(Lu,{variant:"outline",className:"bg-primary/20",children:[k.jsx(o4e,{className:"w-4 h-4 mr-1"}),"Advanced Editor Mode"]}),k.jsx("span",{className:"text-xs text-muted-foreground",children:"Full editing with error detection"})]}),k.jsx(Ykt,{content:i,onContentChange:u})]}):k.jsxs("div",{children:[k.jsxs("div",{className:"flex items-center justify-between p-2 bg-secondary/20 border rounded-t-lg",children:[k.jsxs(Lu,{variant:"outline",className:"bg-gray-100",children:[k.jsx(s2,{className:"w-4 h-4 mr-1"}),"Preview Mode"]}),k.jsx("span",{className:"text-xs text-muted-foreground",children:"Sign in for advanced editing features"})]}),k.jsx(kZ,{className:"h-[500px] w-full border border-t-0 rounded-b-lg bg-gray-900 text-gray-100",children:k.jsx("pre",{className:"p-4 text-xs font-mono leading-relaxed",children:k.jsx("code",{children:a||"# Configure your API above to see the YAML preview"})})})]}),((h=n.info)==null?void 0:h.title)&&k.jsxs("div",{className:"text-xs text-gray-500 bg-gray-50 p-2 rounded",children:[k.jsx("strong",{children:"API:"})," ",n.info.title," v",n.info.version,n.info.description&&k.jsxs(k.Fragment,{children:[k.jsx("br",{}),k.jsx("strong",{children:"Description:"})," ",n.info.description]})]})]})};var Bee="Dialog",[tIe,cTt]=cp(Bee),[Xkt,Xu]=tIe(Bee),iIe=n=>{const{__scopeDialog:e,children:t,open:i,defaultOpen:s,onOpenChange:r,modal:o=!0}=n,a=A.useRef(null),l=A.useRef(null),[c=!1,d]=ef({prop:i,defaultProp:s,onChange:r});return k.jsx(Xkt,{scope:e,triggerRef:a,contentRef:l,contentId:Kh(),titleId:Kh(),descriptionId:Kh(),open:c,onOpenChange:d,onOpenToggle:A.useCallback(()=>d(u=>!u),[d]),modal:o,children:t})};iIe.displayName=Bee;var nIe="DialogTrigger",Qkt=A.forwardRef((n,e)=>{const{__scopeDialog:t,...i}=n,s=Xu(nIe,t),r=Yi(e,s.triggerRef);return k.jsx(Zt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Vee(s.open),...i,ref:r,onClick:Dt(n.onClick,s.onOpenToggle)})});Qkt.displayName=nIe;var Wee="DialogPortal",[Jkt,sIe]=tIe(Wee,{forceMount:void 0}),rIe=n=>{const{__scopeDialog:e,forceMount:t,children:i,container:s}=n,r=Xu(Wee,e);return k.jsx(Jkt,{scope:e,forceMount:t,children:A.Children.map(i,o=>k.jsx(Hc,{present:t||r.open,children:k.jsx(t3,{asChild:!0,container:s,children:o})}))})};rIe.displayName=Wee;var n4="DialogOverlay",oIe=A.forwardRef((n,e)=>{const t=sIe(n4,n.__scopeDialog),{forceMount:i=t.forceMount,...s}=n,r=Xu(n4,n.__scopeDialog);return r.modal?k.jsx(Hc,{present:i||r.open,children:k.jsx(eEt,{...s,ref:e})}):null});oIe.displayName=n4;var eEt=A.forwardRef((n,e)=>{const{__scopeDialog:t,...i}=n,s=Xu(n4,t);return k.jsx(vZ,{as:i0,allowPinchZoom:!0,shards:[s.contentRef],children:k.jsx(Zt.div,{"data-state":Vee(s.open),...i,ref:e,style:{pointerEvents:"auto",...i.style}})})}),M0="DialogContent",aIe=A.forwardRef((n,e)=>{const t=sIe(M0,n.__scopeDialog),{forceMount:i=t.forceMount,...s}=n,r=Xu(M0,n.__scopeDialog);return k.jsx(Hc,{present:i||r.open,children:r.modal?k.jsx(tEt,{...s,ref:e}):k.jsx(iEt,{...s,ref:e})})});aIe.displayName=M0;var tEt=A.forwardRef((n,e)=>{const t=Xu(M0,n.__scopeDialog),i=A.useRef(null),s=Yi(e,t.contentRef,i);return A.useEffect(()=>{const r=i.current;if(r)return kve(r)},[]),k.jsx(lIe,{...n,ref:s,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Dt(n.onCloseAutoFocus,r=>{var o;r.preventDefault(),(o=t.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Dt(n.onPointerDownOutside,r=>{const o=r.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&r.preventDefault()}),onFocusOutside:Dt(n.onFocusOutside,r=>r.preventDefault())})}),iEt=A.forwardRef((n,e)=>{const t=Xu(M0,n.__scopeDialog),i=A.useRef(!1),s=A.useRef(!1);return k.jsx(lIe,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:r=>{var o,a;(o=n.onCloseAutoFocus)==null||o.call(n,r),r.defaultPrevented||(i.current||(a=t.triggerRef.current)==null||a.focus(),r.preventDefault()),i.current=!1,s.current=!1},onInteractOutside:r=>{var l,c;(l=n.onInteractOutside)==null||l.call(n,r),r.defaultPrevented||(i.current=!0,r.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=r.target;((c=t.triggerRef.current)==null?void 0:c.contains(o))&&r.preventDefault(),r.detail.originalEvent.type==="focusin"&&s.current&&r.preventDefault()}})}),lIe=A.forwardRef((n,e)=>{const{__scopeDialog:t,trapFocus:i,onOpenAutoFocus:s,onCloseAutoFocus:r,...o}=n,a=Xu(M0,t),l=A.useRef(null),c=Yi(e,l);return Sve(),k.jsxs(k.Fragment,{children:[k.jsx(mZ,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:s,onUnmountAutoFocus:r,children:k.jsx(vN,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":Vee(a.open),...o,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),k.jsxs(k.Fragment,{children:[k.jsx(nEt,{titleId:a.titleId}),k.jsx(rEt,{contentRef:l,descriptionId:a.descriptionId})]})]})}),Hee="DialogTitle",cIe=A.forwardRef((n,e)=>{const{__scopeDialog:t,...i}=n,s=Xu(Hee,t);return k.jsx(Zt.h2,{id:s.titleId,...i,ref:e})});cIe.displayName=Hee;var dIe="DialogDescription",uIe=A.forwardRef((n,e)=>{const{__scopeDialog:t,...i}=n,s=Xu(dIe,t);return k.jsx(Zt.p,{id:s.descriptionId,...i,ref:e})});uIe.displayName=dIe;var hIe="DialogClose",fIe=A.forwardRef((n,e)=>{const{__scopeDialog:t,...i}=n,s=Xu(hIe,t);return k.jsx(Zt.button,{type:"button",...i,ref:e,onClick:Dt(n.onClick,()=>s.onOpenChange(!1))})});fIe.displayName=hIe;function Vee(n){return n?"open":"closed"}var gIe="DialogTitleWarning",[dTt,pIe]=fFe(gIe,{contentName:M0,titleName:Hee,docsSlug:"dialog"}),nEt=({titleId:n})=>{const e=pIe(gIe),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return A.useEffect(()=>{n&&(document.getElementById(n)||console.error(t))},[t,n]),null},sEt="DialogDescriptionWarning",rEt=({contentRef:n,descriptionId:e})=>{const i=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${pIe(sEt).contentName}}.`;return A.useEffect(()=>{var r;const s=(r=n.current)==null?void 0:r.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(i))},[i,n,e]),null},oEt=iIe,aEt=rIe,mIe=oIe,_Ie=aIe,vIe=cIe,bIe=uIe,lEt=fIe;const cEt=oEt,dEt=aEt,wIe=A.forwardRef(({className:n,...e},t)=>k.jsx(mIe,{ref:t,className:vi("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...e}));wIe.displayName=mIe.displayName;const CIe=A.forwardRef(({className:n,children:e,...t},i)=>k.jsxs(dEt,{children:[k.jsx(wIe,{}),k.jsxs(_Ie,{ref:i,className:vi("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...t,children:[e,k.jsxs(lEt,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[k.jsx(Sd,{className:"h-4 w-4"}),k.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));CIe.displayName=_Ie.displayName;const yIe=({className:n,...e})=>k.jsx("div",{className:vi("flex flex-col space-y-1.5 text-center sm:text-left",n),...e});yIe.displayName="DialogHeader";const SIe=A.forwardRef(({className:n,...e},t)=>k.jsx(vIe,{ref:t,className:vi("text-lg font-semibold leading-none tracking-tight",n),...e}));SIe.displayName=vIe.displayName;const uEt=A.forwardRef(({className:n,...e},t)=>k.jsx(bIe,{ref:t,className:vi("text-sm text-muted-foreground",n),...e}));uEt.displayName=bIe.displayName;const hEt=["Backend Developer","API/Product Engineer","Technical Writer","No-Code Developer","Dev Tool Builder","Student / Learner","Other"],fEt=["Beginner","Intermediate","Advanced"],gEt=["Creating OpenAPI specs from scratch","Editing existing specs","Creating docs for a public API","Integrating with OpenAI/LangChain","Learning OpenAPI","Other"];function xIe({open:n,onOpenChange:e}){const{user:t}=DN(),{toast:i}=Ipe(),[s,r]=A.useState(""),[o,a]=A.useState(""),[l,c]=A.useState(""),[d,u]=A.useState([]),[h,f]=A.useState(""),[g,p]=A.useState(!1),_=b=>{u(y=>y.includes(b)?y.filter(S=>S!==b):[...y,b])},w=async()=>{if(!s||!l||d.length===0){i({title:"Missing Information",description:"Please fill in all required fields",variant:"destructive"});return}if(s==="Other"&&!o.trim()){i({title:"Missing Information",description:"Please specify your role",variant:"destructive"});return}if(d.includes("Other")&&!h.trim()){i({title:"Missing Information",description:"Please specify your use case",variant:"destructive"});return}p(!0);try{if(!(await fetch("https://ymal.onrender.com/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t==null?void 0:t.displayName,email:t==null?void 0:t.email,role:s==="Other"?o:s,yamlFamiliarity:l,useCases:d.map(y=>y==="Other"?h:y)})})).ok)throw new Error("Failed to save user information");i({title:"Success!",description:"Your information has been saved successfully."}),e(!1)}catch{i({title:"Error",description:"Failed to save your information. Please try again.",variant:"destructive"})}finally{p(!1)}};return k.jsx(cEt,{open:n,onOpenChange:e,children:k.jsxs(CIe,{className:"sm:max-w-[425px]",children:[k.jsx(yIe,{children:k.jsx(SIe,{children:"Tell us about yourself"})}),k.jsxs("div",{className:"space-y-6 py-4",children:[k.jsxs("div",{className:"space-y-2",children:[k.jsx("label",{className:"text-sm font-medium",children:"What best describes your role?"}),k.jsxs("div",{className:"flex gap-2 items-center",children:[k.jsxs(pd,{value:s,onValueChange:r,className:"flex-1",children:[k.jsx(mc,{children:k.jsx(md,{placeholder:"Select your role"})}),k.jsx(_c,{children:hEt.map(b=>k.jsx(Mi,{value:b,children:b},b))})]}),s==="Other"&&k.jsx(ss,{value:o,onChange:b=>a(b.target.value),placeholder:"Enter your role",className:"flex-1"})]})]}),k.jsxs("div",{className:"space-y-2",children:[k.jsx("label",{className:"text-sm font-medium",children:"How familiar are you with OpenAPI or YAML?"}),k.jsxs(pd,{value:l,onValueChange:c,children:[k.jsx(mc,{children:k.jsx(md,{placeholder:"Select your familiarity level"})}),k.jsx(_c,{children:fEt.map(b=>k.jsx(Mi,{value:b,children:b},b))})]})]}),k.jsxs("div",{className:"space-y-2",children:[k.jsx("label",{className:"text-sm font-medium",children:"What do you plan to use this tool for?"}),k.jsx("div",{className:"space-y-2",children:gEt.map(b=>k.jsx("div",{children:k.jsxs("div",{className:"flex items-center gap-2",children:[k.jsx(HM,{id:b,checked:d.includes(b),onCheckedChange:()=>_(b)}),k.jsx("label",{htmlFor:b,className:"text-sm flex-1",children:b}),b==="Other"&&d.includes("Other")&&k.jsx(ss,{value:h,onChange:y=>f(y.target.value),placeholder:"Enter your use case",className:"flex-1"})]})},b))})]}),k.jsx($n,{className:"w-full",onClick:w,disabled:g,children:g?"Saving...":"Save Information"})]})]})})}function pEt(){const{user:n}=DN();o_e();const[e,t]=A.useState(!1),i=async()=>{try{const r=await Dwe();if(r){const o=r.email,l=await(await fetch(`https://ymal.onrender.com/api/users/check?email=${encodeURIComponent(o)}`)).json();console.log("User info already exists:",l),l.exists?console.log("User info already exists, skipping dialog."):t(!0)}}catch(r){console.error("Sign in error:",r)}},s=r=>{t(r)};return k.jsxs("nav",{className:"bg-white shadow-sm mb-6",children:[k.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:k.jsxs("div",{className:"flex justify-between h-16",children:[k.jsx("div",{className:"flex items-center",children:k.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"YAML Studio"})}),k.jsx("div",{className:"flex items-center gap-4",children:n?k.jsxs(k.Fragment,{children:[k.jsxs("div",{className:"flex items-center gap-3",children:[k.jsx("img",{src:n.photoURL||"",alt:"Profile",className:"h-8 w-8 rounded-full"}),k.jsx("span",{className:"text-sm font-medium text-gray-700",children:n.displayName})]}),k.jsx($n,{variant:"destructive",size:"sm",onClick:KUe,children:"Sign Out"})]}):k.jsx($n,{variant:"default",size:"sm",onClick:i,children:"Sign In"})})]})}),k.jsx(xIe,{open:e,onOpenChange:s})]})}const efe="yamlstudio_state",mEt=()=>{DN();const[n,e]=A.useState({title:"",description:"",version:"1.0.0"}),[t,i]=A.useState([]),[s,r]=A.useState([]),[o,a]=A.useState([]),[l,c]=A.useState([]),[d,u]=A.useState([]),[h,f]=A.useState("info"),[g,p]=A.useState("");A.useEffect(()=>{const y=localStorage.getItem(efe);if(y)try{const{apiInfo:S,servers:x,paths:E,schemas:D,securitySchemes:N,globalSecurity:I}=JSON.parse(y);S&&e(S),x&&i(x),E&&r(E),D&&a(D),N&&c(N),I&&u(I)}catch(S){console.error("Error loading saved state:",S)}},[]),A.useEffect(()=>{const y={apiInfo:n,servers:t,paths:s,schemas:o,securitySchemes:l,globalSecurity:d};localStorage.setItem(efe,JSON.stringify(y))},[n,t,s,o,l,d]);const _=()=>({openapi:"3.0.0",info:n,servers:t,paths:s.reduce((S,x)=>(S[x.path]=x.methods,S),{}),components:{schemas:o.reduce((S,x)=>(S[x.name]={type:x.type,properties:x.properties,required:x.required},S),{}),securitySchemes:l.reduce((S,x)=>(S[x.name]={type:x.type,...x.scheme&&{scheme:x.scheme},...x.bearerFormat&&{bearerFormat:x.bearerFormat},...x.flows&&{flows:x.flows}},S),{})},...d.length>0&&{security:d}}),w=()=>{var y,S;if(!g.trim()){rg({title:"Error",description:"Please paste your YAML content first",variant:"destructive"});return}try{const x=X_e.load(g);if(x.info&&e({title:x.info.title||"",description:x.info.description||"",version:x.info.version||"1.0.0",contact:x.info.contact||void 0}),x.servers&&Array.isArray(x.servers)){const E=x.servers.map(D=>({url:D.url||"",description:D.description||""}));i(E)}if((y=x.components)!=null&&y.securitySchemes){const E=[];Object.entries(x.components.securitySchemes).forEach(([D,N])=>{const I={name:D,type:N.type||"http",scheme:N.scheme,bearerFormat:N.bearerFormat,flows:N.flows,scopes:{}};N.type==="oauth2"&&N.flows&&Object.values(N.flows).forEach(H=>{H.scopes&&(I.scopes={...I.scopes,...H.scopes})}),E.push(I)}),c(E)}if((S=x.components)!=null&&S.schemas){const E=[];Object.entries(x.components.schemas).forEach(([D,N])=>{if(N.type==="object"&&N.properties){const I={name:D,type:"object",properties:{},required:N.required||[]};Object.entries(N.properties).forEach(([H,z])=>{I.properties[H]={type:z.type||"string",description:z.description||"","x-zia-agent-param-type":z["x-zia-agent-param-type"]}}),E.push(I)}}),a(E)}if(x.paths){const E=[];Object.entries(x.paths).forEach(([D,N])=>{const I={path:D,methods:{}};Object.entries(N).forEach(([H,z])=>{var J,j;const G={summary:z.summary||"",description:z.description||"",operationId:z.operationId||"",tags:z.tags||[],security:z.security||[],parameters:[],responses:[]};z.parameters&&Array.isArray(z.parameters)&&(G.parameters=z.parameters.map(ne=>({name:ne.name||"",in:ne.in||"query",required:ne.required||!1,description:ne.description||"",schema:ne.schema||{type:"string"},"x-zia-agent-param-type":ne["x-zia-agent-param-type"]}))),z.requestBody&&(G.requestBody={required:z.requestBody.required||!1,content:{"application/json":{schema:((j=(J=z.requestBody.content)==null?void 0:J["application/json"])==null?void 0:j.schema)||{type:"object"}}}}),z.responses&&Object.entries(z.responses).forEach(([ne,oe])=>{G.responses.push({statusCode:ne,description:oe.description||"",content:oe.content})}),I.methods[H]=G}),E.push(I)}),r(E)}x.security&&Array.isArray(x.security)&&u(x.security),rg({title:"Success!",description:"YAML imported successfully! All components have been populated."}),p(""),f("info")}catch(x){console.error("YAML Import Error:",x),rg({title:"Import Notice",description:"YAML was imported without validation.",variant:"default"}),p(""),f("info")}},b=y=>{const S=y.map(x=>x.type==="oauth2"&&x.scopes?{[x.name]:Object.keys(x.scopes)}:{[x.name]:[]});u(S)};return rt.useEffect(()=>{b(l)},[l]),k.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50",children:[k.jsx(pEt,{}),k.jsx("div",{className:"container mx-auto p-4",children:k.jsxs("div",{className:"grid gap-4",children:[k.jsxs("div",{className:"mb-8 text-center",children:[k.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-4",children:"OpenAPI YAML Generator"}),k.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Create comprehensive OpenAPI specifications with an intuitive form-based interface. No more manual YAML writing!"}),k.jsxs("div",{className:"flex justify-center gap-2 mt-4",children:[k.jsxs(Lu,{variant:"secondary",className:"bg-blue-100 text-blue-700",children:[k.jsx(s2,{className:"w-3 h-3 mr-1"}),"OpenAPI 3.0.0"]}),k.jsxs(Lu,{variant:"secondary",className:"bg-green-100 text-green-700",children:[k.jsx(Lc,{className:"w-3 h-3 mr-1"}),"Form Builder"]}),k.jsxs(Lu,{variant:"secondary",className:"bg-purple-100 text-purple-700",children:[k.jsx(Ose,{className:"w-3 h-3 mr-1"}),"Live Preview"]})]})]}),k.jsxs(gs,{className:"mb-6 shadow-lg border-0 bg-white/80 backdrop-blur-sm",children:[k.jsx(aa,{className:"pb-4",children:k.jsxs(Va,{className:"flex items-center gap-2",children:[k.jsx(Fse,{className:"w-5 h-5 text-purple-600"}),"Import Existing YAML"]})}),k.jsxs(ps,{className:"space-y-4",children:[k.jsx(C3,{value:g,onChange:y=>p(y.target.value),placeholder:"Paste your existing OpenAPI YAML here to import and edit...",className:"min-h-[120px] font-mono text-sm"}),k.jsxs("div",{className:"flex gap-2",children:[k.jsxs($n,{onClick:w,className:"flex-1",children:[k.jsx(Fse,{className:"w-4 h-4 mr-2"}),"Import YAML"]}),k.jsx($n,{variant:"outline",onClick:()=>p(""),className:"flex-1",children:"Clear"})]})]})]}),k.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[k.jsx("div",{className:"space-y-6",children:k.jsxs(gs,{className:"shadow-lg border-0 bg-white/80 backdrop-blur-sm",children:[k.jsx(aa,{className:"pb-4",children:k.jsxs(Va,{className:"flex items-center gap-2",children:[k.jsx(Ose,{className:"w-5 h-5 text-blue-600"}),"API Configuration"]})}),k.jsx(ps,{children:k.jsxs(e8e,{value:h,onValueChange:f,className:"w-full",children:[k.jsxs(_ve,{className:"grid w-full grid-cols-5",children:[k.jsx(GC,{value:"info",className:"text-xs",children:"Info"}),k.jsx(GC,{value:"servers",className:"text-xs",children:"Servers"}),k.jsx(GC,{value:"paths",className:"text-xs",children:"Paths"}),k.jsx(GC,{value:"schemas",className:"text-xs",children:"Schemas"}),k.jsx(GC,{value:"security",className:"text-xs",children:"Security"})]}),k.jsxs(YC,{value:"info",className:"mt-4",children:[k.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[k.jsx(s2,{className:"w-4 h-4 text-blue-600"}),k.jsx("h3",{className:"font-semibold",children:"API Information"})]}),k.jsx(a8e,{apiInfo:n,setApiInfo:e})]}),k.jsxs(YC,{value:"servers",className:"mt-4",children:[k.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[k.jsx(d4e,{className:"w-4 h-4 text-green-600"}),k.jsx("h3",{className:"font-semibold",children:"Server Configuration"})]}),k.jsx(l8e,{servers:t,setServers:i})]}),k.jsxs(YC,{value:"paths",className:"mt-4",children:[k.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[k.jsx(Lc,{className:"w-4 h-4 text-purple-600"}),k.jsx("h3",{className:"font-semibold",children:"API Endpoints"})]}),k.jsx(H6e,{paths:s,setPaths:r,schemas:o,securitySchemes:l})]}),k.jsxs(YC,{value:"schemas",className:"mt-4",children:[k.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[k.jsx(s4e,{className:"w-4 h-4 text-orange-600"}),k.jsx("h3",{className:"font-semibold",children:"Data Schemas"})]}),k.jsx(V6e,{schemas:o,setSchemas:a})]}),k.jsxs(YC,{value:"security",className:"mt-4",children:[k.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[k.jsx(u4e,{className:"w-4 h-4 text-red-600"}),k.jsx("h3",{className:"font-semibold",children:"Security Schemes"})]}),k.jsx(z6e,{securitySchemes:l,setSecuritySchemes:c})]})]})})]})}),k.jsx("div",{className:"space-y-6",children:k.jsxs(gs,{className:"shadow-lg border-0 bg-white/80 backdrop-blur-sm",children:[k.jsx(aa,{className:"pb-4",children:k.jsxs(Va,{className:"flex items-center gap-2",children:[k.jsx(s2,{className:"w-5 h-5 text-green-600"}),"YAML Preview"]})}),k.jsx(ps,{children:k.jsx(Zkt,{spec:_(),onNewProject:()=>{e({title:"",description:"",version:"1.0.0"}),i([]),r([]),a([]),c([]),u([]),f("info")}})})]})})]})]})})]})},_Et=()=>{const n=aZ();return A.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",n.pathname)},[n.pathname]),k.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:k.jsxs("div",{className:"text-center",children:[k.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),k.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),k.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})};function vEt(){const n=o_e(),{user:e}=DN(),[t,i]=A.useState(!1);A.useEffect(()=>{e&&i(!0)},[e]);const s=o=>{i(o),!o&&e&&n("/")},r=async()=>{try{await Dwe()&&i(!0)}catch(o){console.error("Error signing in with Google: ",o)}};return k.jsxs("div",{className:"flex min-h-screen items-center justify-center bg-gray-50",children:[k.jsxs("div",{className:"w-full max-w-md p-8 space-y-6 bg-white rounded-lg shadow-lg",children:[k.jsxs("div",{className:"text-center space-y-2",children:[k.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Welcome to YAML Studio"}),k.jsx("p",{className:"text-gray-500",children:"Please sign in to continue"})]}),k.jsxs($n,{onClick:r,className:"w-full flex items-center justify-center gap-3 bg-white text-gray-900 border border-gray-300 hover:bg-gray-50",children:[k.jsxs("svg",{viewBox:"0 0 48 48",width:"24",height:"24",children:[k.jsx("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),k.jsx("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),k.jsx("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),k.jsx("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"})]}),"Sign in with Google"]})]}),k.jsx(xIe,{open:t,onOpenChange:s})]})}const bEt=new bBe,wEt=()=>k.jsx(CBe,{client:bEt,children:k.jsx(qUe,{children:k.jsxs($me,{children:[k.jsx(Y4e,{}),k.jsx(x5e,{}),k.jsx(gWe,{children:k.jsxs(uWe,{children:[k.jsx(a2,{path:"/login",element:k.jsx(vEt,{})}),k.jsx(a2,{path:"/",element:k.jsx(mEt,{})}),k.jsx(a2,{path:"*",element:k.jsx(_Et,{})})]})})]})})});Epe(document.getElementById("root")).render(k.jsx(wEt,{}));export{rT as m,Txe as t};
